/**
 * Copyright (C) 2003-present CompatibL. All rights reserved.
 * This file contains valuable trade secrets and may be copied, stored, used,
 * or distributed only in compliance with the terms of a written commercial
 * license from CompatibL and with the inclusion of this copyright notice.
 */
var xv=Object.defineProperty;var $g=K=>{throw TypeError(K)};var Ev=(K,J,ne)=>J in K?xv(K,J,{enumerable:!0,configurable:!0,writable:!0,value:ne}):K[J]=ne;var wr=(K,J,ne)=>Ev(K,typeof J!="symbol"?J+"":J,ne),f0=(K,J,ne)=>J.has(K)||$g("Cannot "+ne);var Ze=(K,J,ne)=>(f0(K,J,"read from private field"),ne?ne.call(K):J.get(K)),yt=(K,J,ne)=>J.has(K)?$g("Cannot add the same private member more than once"):J instanceof WeakSet?J.add(K):J.set(K,ne),ht=(K,J,ne,oe)=>(f0(K,J,"write to private field"),oe?oe.call(K,ne):J.set(K,ne),ne),bt=(K,J,ne)=>(f0(K,J,"access private method"),ne);var wi=(K,J,ne,oe)=>({set _(ce){ht(K,J,ce,ne)},get _(){return Ze(K,J,oe)}});import{g as global,j as jsxRuntimeExports,$ as $A}from"./controls-BzKGYbpU.js";import{r as reactExports,b as reactDomExports,g as getDefaultExportFromCjs,c as commonjsGlobal,h as generatePath,R as React,u as useLocation,i as useNavigate,O as Outlet,d as c$3,a as getAugmentedNamespace,s as schedulerExports,e as ReactDOM,j as useParams,N as Navigate,k as useSearchParams,l as createBrowserRouter,m as RouterProvider}from"./react-CxujAPCK.js";import{p as process$1,B as Buffer,_ as __vitePreload,m as monaco,P as Position$1}from"./monaco-C3uQlWyP.js";import{d as dayjs,_ as _c,j as j_,A as AA,P as Pp,W as W5,M as M_,O as OF,R as R_,r as rl,a as Pk,b as Mp,c as dF,e as cx,f as PF,g as cF,m as mf,h as gD,Y as Y_,p as pF,v as vF,i as WB,z as zB,k as Ml,l as gf$1,n as mB,o as nD,C as Ck,q as Rp,D as D_,s as rA,H as Ho,w as wF,t as gk,u as vk,x as CF,y as fk,K as Kj,B as MF,E as nB,F as rB,G as oB,I as oa,L as LF$2,J as jk,N as PA,Q as xF,S as EA,T as bF,U as SF,V as HF,X as Mj,Z as Lj,$ as $F,a0 as dT,a1 as aF,a2 as iF,a3 as oF,a4 as gF,a5 as AD,a6 as mT,a7 as uF,a8 as nA,a9 as RF,aa as Dk,ab as hF,ac as PB,ad as yF,ae as tF,af as nF,ag as DA,ah as TA,ai as kA,aj as Tk,ak as lF,al as RA,am as BB$1,an as AB,ao as LA,ap as EF,aq as fB,ar as vB,as as P_,at as Ac,au as mD,av as q_,aw as bA,ax as mF,ay as GB,az as UB,aA as VA,aB as _A,aC as Ak,aD as ok$2,aE as VD,aF as MA,aG as Nk,aH as uT,aI as pT,aJ as lk,aK as WT,aL as Lk,aM as Ik,aN as pB,aO as hB,aP as CB$1,aQ as bB,aR as yB,aS as xB,aT as wB,aU as SB,aV as bT,aW as EB$1,aX as PD,aY as Ek,aZ as IA,a_ as HB,a$ as ek,b0 as kB,b1 as QT,b2 as XT,b3 as BA$1,b4 as JT$1,b5 as Fk,b6 as eF,b7 as JA,b8 as QA,b9 as YA,ba as XA,bb as UA,bc as GA,bd as qA,be as ZD,bf as PT,bg as HA,bh as DT,bi as wA,bj as _T,bk as U_,bl as Vk,bm as PropTypes,bn as IF,bo as bk,bp as zA,bq as WA,br as ZA,bs as rF,bt as FT,bu as NF}from"./uikit-Djry2pI2.js";import{X as XLSX,x as xlsx_minExports,r as requireSafeBuffer$1,a as requireStreamBrowserify,b as requireInherits_browser,c as require$$0$1,d as requireString_decoder,e as requireEvents,f as requireUtil$1,g as requireBrowser$b}from"./xlsx-TNCHBusx.js";import{u as u$6}from"./plotly-Cr11kGvO.js";(function(){const J=document.createElement("link").relList;if(J&&J.supports&&J.supports("modulepreload"))return;for(const ce of document.querySelectorAll('link[rel="modulepreload"]'))oe(ce);new MutationObserver(ce=>{for(const ue of ce)if(ue.type==="childList")for(const Ae of ue.addedNodes)Ae.tagName==="LINK"&&Ae.rel==="modulepreload"&&oe(Ae)}).observe(document,{childList:!0,subtree:!0});function ne(ce){const ue={};return ce.integrity&&(ue.integrity=ce.integrity),ce.referrerPolicy&&(ue.referrerPolicy=ce.referrerPolicy),ce.crossOrigin==="use-credentials"?ue.credentials="include":ce.crossOrigin==="anonymous"?ue.credentials="omit":ue.credentials="same-origin",ue}function oe(ce){if(ce.ep)return;ce.ep=!0;const ue=ne(ce);fetch(ce.href,ue)}})();const isString$5=K=>typeof K=="string",defer=()=>{let K,J;const ne=new Promise((oe,ce)=>{K=oe,J=ce});return ne.resolve=K,ne.reject=J,ne},makeString=K=>K==null?"":""+K,copy$1=(K,J,ne)=>{K.forEach(oe=>{J[oe]&&(ne[oe]=J[oe])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=K=>K&&K.indexOf("###")>-1?K.replace(lastOfPathSeparatorRegExp,"."):K,canNotTraverseDeeper=K=>!K||isString$5(K),getLastOfPath=(K,J,ne)=>{const oe=isString$5(J)?J.split("."):J;let ce=0;for(;ce<oe.length-1;){if(canNotTraverseDeeper(K))return{};const ue=cleanKey(oe[ce]);!K[ue]&&ne&&(K[ue]=new ne),Object.prototype.hasOwnProperty.call(K,ue)?K=K[ue]:K={},++ce}return canNotTraverseDeeper(K)?{}:{obj:K,k:cleanKey(oe[ce])}},setPath=(K,J,ne)=>{const{obj:oe,k:ce}=getLastOfPath(K,J,Object);if(oe!==void 0||J.length===1){oe[ce]=ne;return}let ue=J[J.length-1],Ae=J.slice(0,J.length-1),pe=getLastOfPath(K,Ae,Object);for(;pe.obj===void 0&&Ae.length;)ue=`${Ae[Ae.length-1]}.${ue}`,Ae=Ae.slice(0,Ae.length-1),pe=getLastOfPath(K,Ae,Object),pe&&pe.obj&&typeof pe.obj[`${pe.k}.${ue}`]<"u"&&(pe.obj=void 0);pe.obj[`${pe.k}.${ue}`]=ne},pushPath=(K,J,ne,oe)=>{const{obj:ce,k:ue}=getLastOfPath(K,J,Object);ce[ue]=ce[ue]||[],ce[ue].push(ne)},getPath=(K,J)=>{const{obj:ne,k:oe}=getLastOfPath(K,J);if(ne)return ne[oe]},getPathWithDefaults=(K,J,ne)=>{const oe=getPath(K,ne);return oe!==void 0?oe:getPath(J,ne)},deepExtend=(K,J,ne)=>{for(const oe in J)oe!=="__proto__"&&oe!=="constructor"&&(oe in K?isString$5(K[oe])||K[oe]instanceof String||isString$5(J[oe])||J[oe]instanceof String?ne&&(K[oe]=J[oe]):deepExtend(K[oe],J[oe],ne):K[oe]=J[oe]);return K},regexEscape=K=>K.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape$2=K=>isString$5(K)?K.replace(/[&<>"'\/]/g,J=>_entityMap[J]):K;class RegExpCache{constructor(J){this.capacity=J,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(J){const ne=this.regExpMap.get(J);if(ne!==void 0)return ne;const oe=new RegExp(J);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(J,oe),this.regExpQueue.push(J),oe}}const chars$4=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(K,J,ne)=>{J=J||"",ne=ne||"";const oe=chars$4.filter(Ae=>J.indexOf(Ae)<0&&ne.indexOf(Ae)<0);if(oe.length===0)return!0;const ce=looksLikeObjectPathRegExpCache.getRegExp(`(${oe.map(Ae=>Ae==="?"?"\\?":Ae).join("|")})`);let ue=!ce.test(K);if(!ue){const Ae=K.indexOf(ne);Ae>0&&!ce.test(K.substring(0,Ae))&&(ue=!0)}return ue},deepFind=function(K,J){let ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!K)return;if(K[J])return K[J];const oe=J.split(ne);let ce=K;for(let ue=0;ue<oe.length;){if(!ce||typeof ce!="object")return;let Ae,pe="";for(let ve=ue;ve<oe.length;++ve)if(ve!==ue&&(pe+=ne),pe+=oe[ve],Ae=ce[pe],Ae!==void 0){if(["string","number","boolean"].indexOf(typeof Ae)>-1&&ve<oe.length-1)continue;ue+=ve-ue+1;break}ce=Ae}return ce},getCleanedCode=K=>K&&K.replace("_","-"),consoleLogger={type:"logger",log(K){this.output("log",K)},warn(K){this.output("warn",K)},error(K){this.output("error",K)},output(K,J){console&&console[K]&&console[K].apply(console,J)}};let Logger$1=class h0{constructor(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(J,ne)}init(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=ne.prefix||"i18next:",this.logger=J||consoleLogger,this.options=ne,this.debug=ne.debug}log(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return this.forward(ne,"log","",!0)}warn(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return this.forward(ne,"warn","",!0)}error(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return this.forward(ne,"error","")}deprecate(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return this.forward(ne,"warn","WARNING DEPRECATED: ",!0)}forward(J,ne,oe,ce){return ce&&!this.debug?null:(isString$5(J[0])&&(J[0]=`${oe}${this.prefix} ${J[0]}`),this.logger[ne](J))}create(J){return new h0(this.logger,{prefix:`${this.prefix}:${J}:`,...this.options})}clone(J){return J=J||this.options,J.prefix=J.prefix||this.prefix,new h0(this.logger,J)}};var baseLogger=new Logger$1;class EventEmitter{constructor(){this.observers={}}on(J,ne){return J.split(" ").forEach(oe=>{this.observers[oe]||(this.observers[oe]=new Map);const ce=this.observers[oe].get(ne)||0;this.observers[oe].set(ne,ce+1)}),this}off(J,ne){if(this.observers[J]){if(!ne){delete this.observers[J];return}this.observers[J].delete(ne)}}emit(J){for(var ne=arguments.length,oe=new Array(ne>1?ne-1:0),ce=1;ce<ne;ce++)oe[ce-1]=arguments[ce];this.observers[J]&&Array.from(this.observers[J].entries()).forEach(Ae=>{let[pe,ve]=Ae;for(let me=0;me<ve;me++)pe(...oe)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(Ae=>{let[pe,ve]=Ae;for(let me=0;me<ve;me++)pe.apply(pe,[J,...oe])})}}class ResourceStore extends EventEmitter{constructor(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=J||{},this.options=ne,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(J){this.options.ns.indexOf(J)<0&&this.options.ns.push(J)}removeNamespaces(J){const ne=this.options.ns.indexOf(J);ne>-1&&this.options.ns.splice(ne,1)}getResource(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ue=ce.keySeparator!==void 0?ce.keySeparator:this.options.keySeparator,Ae=ce.ignoreJSONStructure!==void 0?ce.ignoreJSONStructure:this.options.ignoreJSONStructure;let pe;J.indexOf(".")>-1?pe=J.split("."):(pe=[J,ne],oe&&(Array.isArray(oe)?pe.push(...oe):isString$5(oe)&&ue?pe.push(...oe.split(ue)):pe.push(oe)));const ve=getPath(this.data,pe);return!ve&&!ne&&!oe&&J.indexOf(".")>-1&&(J=pe[0],ne=pe[1],oe=pe.slice(2).join(".")),ve||!Ae||!isString$5(oe)?ve:deepFind(this.data&&this.data[J]&&this.data[J][ne],oe,ue)}addResource(J,ne,oe,ce){let ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const Ae=ue.keySeparator!==void 0?ue.keySeparator:this.options.keySeparator;let pe=[J,ne];oe&&(pe=pe.concat(Ae?oe.split(Ae):oe)),J.indexOf(".")>-1&&(pe=J.split("."),ce=ne,ne=pe[1]),this.addNamespaces(ne),setPath(this.data,pe,ce),ue.silent||this.emit("added",J,ne,oe,ce)}addResources(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const ue in oe)(isString$5(oe[ue])||Array.isArray(oe[ue]))&&this.addResource(J,ne,ue,oe[ue],{silent:!0});ce.silent||this.emit("added",J,ne,oe)}addResourceBundle(J,ne,oe,ce,ue){let Ae=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},pe=[J,ne];J.indexOf(".")>-1&&(pe=J.split("."),ce=oe,oe=ne,ne=pe[1]),this.addNamespaces(ne);let ve=getPath(this.data,pe)||{};Ae.skipCopy||(oe=JSON.parse(JSON.stringify(oe))),ce?deepExtend(ve,oe,ue):ve={...ve,...oe},setPath(this.data,pe,ve),Ae.silent||this.emit("added",J,ne,oe)}removeResourceBundle(J,ne){this.hasResourceBundle(J,ne)&&delete this.data[J][ne],this.removeNamespaces(ne),this.emit("removed",J,ne)}hasResourceBundle(J,ne){return this.getResource(J,ne)!==void 0}getResourceBundle(J,ne){return ne||(ne=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(J,ne)}:this.getResource(J,ne)}getDataByLanguage(J){return this.data[J]}hasLanguageSomeTranslations(J){const ne=this.getDataByLanguage(J);return!!(ne&&Object.keys(ne)||[]).find(ce=>ne[ce]&&Object.keys(ne[ce]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(K){this.processors[K.name]=K},handle(K,J,ne,oe,ce){return K.forEach(ue=>{this.processors[ue]&&(J=this.processors[ue].process(J,ne,oe,ce))}),J}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy$1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],J,this),this.options=ne,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(J){J&&(this.language=J)}exists(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(J==null)return!1;const oe=this.resolve(J,ne);return oe&&oe.res!==void 0}extractFromKey(J,ne){let oe=ne.nsSeparator!==void 0?ne.nsSeparator:this.options.nsSeparator;oe===void 0&&(oe=":");const ce=ne.keySeparator!==void 0?ne.keySeparator:this.options.keySeparator;let ue=ne.ns||this.options.defaultNS||[];const Ae=oe&&J.indexOf(oe)>-1,pe=!this.options.userDefinedKeySeparator&&!ne.keySeparator&&!this.options.userDefinedNsSeparator&&!ne.nsSeparator&&!looksLikeObjectPath(J,oe,ce);if(Ae&&!pe){const ve=J.match(this.interpolator.nestingRegexp);if(ve&&ve.length>0)return{key:J,namespaces:ue};const me=J.split(oe);(oe!==ce||oe===ce&&this.options.ns.indexOf(me[0])>-1)&&(ue=me.shift()),J=me.join(ce)}return isString$5(ue)&&(ue=[ue]),{key:J,namespaces:ue}}translate(J,ne,oe){if(typeof ne!="object"&&this.options.overloadTranslationOptionHandler&&(ne=this.options.overloadTranslationOptionHandler(arguments)),typeof ne=="object"&&(ne={...ne}),ne||(ne={}),J==null)return"";Array.isArray(J)||(J=[String(J)]);const ce=ne.returnDetails!==void 0?ne.returnDetails:this.options.returnDetails,ue=ne.keySeparator!==void 0?ne.keySeparator:this.options.keySeparator,{key:Ae,namespaces:pe}=this.extractFromKey(J[J.length-1],ne),ve=pe[pe.length-1],me=ne.lng||this.language,ge=ne.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(me&&me.toLowerCase()==="cimode"){if(ge){const ze=ne.nsSeparator||this.options.nsSeparator;return ce?{res:`${ve}${ze}${Ae}`,usedKey:Ae,exactUsedKey:Ae,usedLng:me,usedNS:ve,usedParams:this.getUsedParamsDetails(ne)}:`${ve}${ze}${Ae}`}return ce?{res:Ae,usedKey:Ae,exactUsedKey:Ae,usedLng:me,usedNS:ve,usedParams:this.getUsedParamsDetails(ne)}:Ae}const ye=this.resolve(J,ne);let xe=ye&&ye.res;const _e=ye&&ye.usedKey||Ae,$e=ye&&ye.exactUsedKey||Ae,Ie=Object.prototype.toString.apply(xe),Fe=["[object Number]","[object Function]","[object RegExp]"],ke=ne.joinArrays!==void 0?ne.joinArrays:this.options.joinArrays,je=!this.i18nFormat||this.i18nFormat.handleAsObject,We=!isString$5(xe)&&typeof xe!="boolean"&&typeof xe!="number";if(je&&xe&&We&&Fe.indexOf(Ie)<0&&!(isString$5(ke)&&Array.isArray(xe))){if(!ne.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ze=this.options.returnedObjectHandler?this.options.returnedObjectHandler(_e,xe,{...ne,ns:pe}):`key '${Ae} (${this.language})' returned an object instead of string.`;return ce?(ye.res=ze,ye.usedParams=this.getUsedParamsDetails(ne),ye):ze}if(ue){const ze=Array.isArray(xe),Xe=ze?[]:{},Je=ze?$e:_e;for(const nt in xe)if(Object.prototype.hasOwnProperty.call(xe,nt)){const et=`${Je}${ue}${nt}`;Xe[nt]=this.translate(et,{...ne,joinArrays:!1,ns:pe}),Xe[nt]===et&&(Xe[nt]=xe[nt])}xe=Xe}}else if(je&&isString$5(ke)&&Array.isArray(xe))xe=xe.join(ke),xe&&(xe=this.extendTranslation(xe,J,ne,oe));else{let ze=!1,Xe=!1;const Je=ne.count!==void 0&&!isString$5(ne.count),nt=Translator.hasDefaultValue(ne),et=Je?this.pluralResolver.getSuffix(me,ne.count,ne):"",tt=ne.ordinal&&Je?this.pluralResolver.getSuffix(me,ne.count,{ordinal:!1}):"",st=Je&&!ne.ordinal&&ne.count===0&&this.pluralResolver.shouldUseIntlApi(),qe=st&&ne[`defaultValue${this.options.pluralSeparator}zero`]||ne[`defaultValue${et}`]||ne[`defaultValue${tt}`]||ne.defaultValue;!this.isValidLookup(xe)&&nt&&(ze=!0,xe=qe),this.isValidLookup(xe)||(Xe=!0,xe=Ae);const Re=(ne.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Xe?void 0:xe,Be=nt&&qe!==xe&&this.options.updateMissing;if(Xe||ze||Be){if(this.logger.log(Be?"updateKey":"missingKey",me,ve,Ae,Be?qe:xe),ue){const Ye=this.resolve(Ae,{...ne,keySeparator:!1});Ye&&Ye.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ne=[];const Ue=this.languageUtils.getFallbackCodes(this.options.fallbackLng,ne.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ue&&Ue[0])for(let Ye=0;Ye<Ue.length;Ye++)Ne.push(Ue[Ye]);else this.options.saveMissingTo==="all"?Ne=this.languageUtils.toResolveHierarchy(ne.lng||this.language):Ne.push(ne.lng||this.language);const Ge=(Ye,Qe,Te)=>{const Ke=nt&&Te!==xe?Te:Re;this.options.missingKeyHandler?this.options.missingKeyHandler(Ye,ve,Qe,Ke,Be,ne):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Ye,ve,Qe,Ke,Be,ne),this.emit("missingKey",Ye,ve,Qe,xe)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Je?Ne.forEach(Ye=>{const Qe=this.pluralResolver.getSuffixes(Ye,ne);st&&ne[`defaultValue${this.options.pluralSeparator}zero`]&&Qe.indexOf(`${this.options.pluralSeparator}zero`)<0&&Qe.push(`${this.options.pluralSeparator}zero`),Qe.forEach(Te=>{Ge([Ye],Ae+Te,ne[`defaultValue${Te}`]||qe)})}):Ge(Ne,Ae,qe))}xe=this.extendTranslation(xe,J,ne,ye,oe),Xe&&xe===Ae&&this.options.appendNamespaceToMissingKey&&(xe=`${ve}:${Ae}`),(Xe||ze)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?xe=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${ve}:${Ae}`:Ae,ze?xe:void 0):xe=this.options.parseMissingKeyHandler(xe))}return ce?(ye.res=xe,ye.usedParams=this.getUsedParamsDetails(ne),ye):xe}extendTranslation(J,ne,oe,ce,ue){var Ae=this;if(this.i18nFormat&&this.i18nFormat.parse)J=this.i18nFormat.parse(J,{...this.options.interpolation.defaultVariables,...oe},oe.lng||this.language||ce.usedLng,ce.usedNS,ce.usedKey,{resolved:ce});else if(!oe.skipInterpolation){oe.interpolation&&this.interpolator.init({...oe,interpolation:{...this.options.interpolation,...oe.interpolation}});const me=isString$5(J)&&(oe&&oe.interpolation&&oe.interpolation.skipOnVariables!==void 0?oe.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let ge;if(me){const xe=J.match(this.interpolator.nestingRegexp);ge=xe&&xe.length}let ye=oe.replace&&!isString$5(oe.replace)?oe.replace:oe;if(this.options.interpolation.defaultVariables&&(ye={...this.options.interpolation.defaultVariables,...ye}),J=this.interpolator.interpolate(J,ye,oe.lng||this.language||ce.usedLng,oe),me){const xe=J.match(this.interpolator.nestingRegexp),_e=xe&&xe.length;ge<_e&&(oe.nest=!1)}!oe.lng&&this.options.compatibilityAPI!=="v1"&&ce&&ce.res&&(oe.lng=this.language||ce.usedLng),oe.nest!==!1&&(J=this.interpolator.nest(J,function(){for(var xe=arguments.length,_e=new Array(xe),$e=0;$e<xe;$e++)_e[$e]=arguments[$e];return ue&&ue[0]===_e[0]&&!oe.context?(Ae.logger.warn(`It seems you are nesting recursively key: ${_e[0]} in key: ${ne[0]}`),null):Ae.translate(..._e,ne)},oe)),oe.interpolation&&this.interpolator.reset()}const pe=oe.postProcess||this.options.postProcess,ve=isString$5(pe)?[pe]:pe;return J!=null&&ve&&ve.length&&oe.applyPostProcessor!==!1&&(J=postProcessor.handle(ve,J,ne,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...ce,usedParams:this.getUsedParamsDetails(oe)},...oe}:oe,this)),J}resolve(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe,ce,ue,Ae,pe;return isString$5(J)&&(J=[J]),J.forEach(ve=>{if(this.isValidLookup(oe))return;const me=this.extractFromKey(ve,ne),ge=me.key;ce=ge;let ye=me.namespaces;this.options.fallbackNS&&(ye=ye.concat(this.options.fallbackNS));const xe=ne.count!==void 0&&!isString$5(ne.count),_e=xe&&!ne.ordinal&&ne.count===0&&this.pluralResolver.shouldUseIntlApi(),$e=ne.context!==void 0&&(isString$5(ne.context)||typeof ne.context=="number")&&ne.context!=="",Ie=ne.lngs?ne.lngs:this.languageUtils.toResolveHierarchy(ne.lng||this.language,ne.fallbackLng);ye.forEach(Fe=>{this.isValidLookup(oe)||(pe=Fe,!checkedLoadedFor[`${Ie[0]}-${Fe}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(pe)&&(checkedLoadedFor[`${Ie[0]}-${Fe}`]=!0,this.logger.warn(`key "${ce}" for languages "${Ie.join(", ")}" won't get resolved as namespace "${pe}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),Ie.forEach(ke=>{if(this.isValidLookup(oe))return;Ae=ke;const je=[ge];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(je,ge,ke,Fe,ne);else{let ze;xe&&(ze=this.pluralResolver.getSuffix(ke,ne.count,ne));const Xe=`${this.options.pluralSeparator}zero`,Je=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(xe&&(je.push(ge+ze),ne.ordinal&&ze.indexOf(Je)===0&&je.push(ge+ze.replace(Je,this.options.pluralSeparator)),_e&&je.push(ge+Xe)),$e){const nt=`${ge}${this.options.contextSeparator}${ne.context}`;je.push(nt),xe&&(je.push(nt+ze),ne.ordinal&&ze.indexOf(Je)===0&&je.push(nt+ze.replace(Je,this.options.pluralSeparator)),_e&&je.push(nt+Xe))}}let We;for(;We=je.pop();)this.isValidLookup(oe)||(ue=We,oe=this.getResource(ke,Fe,We,ne))}))})}),{res:oe,usedKey:ce,exactUsedKey:ue,usedLng:Ae,usedNS:pe}}isValidLookup(J){return J!==void 0&&!(!this.options.returnNull&&J===null)&&!(!this.options.returnEmptyString&&J==="")}getResource(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(J,ne,oe,ce):this.resourceStore.getResource(J,ne,oe,ce)}getUsedParamsDetails(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const ne=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],oe=J.replace&&!isString$5(J.replace);let ce=oe?J.replace:J;if(oe&&typeof J.count<"u"&&(ce.count=J.count),this.options.interpolation.defaultVariables&&(ce={...this.options.interpolation.defaultVariables,...ce}),!oe){ce={...ce};for(const ue of ne)delete ce[ue]}return ce}static hasDefaultValue(J){const ne="defaultValue";for(const oe in J)if(Object.prototype.hasOwnProperty.call(J,oe)&&ne===oe.substring(0,ne.length)&&J[oe]!==void 0)return!0;return!1}}const capitalize$1=K=>K.charAt(0).toUpperCase()+K.slice(1);class LanguageUtil{constructor(J){this.options=J,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(J){if(J=getCleanedCode(J),!J||J.indexOf("-")<0)return null;const ne=J.split("-");return ne.length===2||(ne.pop(),ne[ne.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(ne.join("-"))}getLanguagePartFromCode(J){if(J=getCleanedCode(J),!J||J.indexOf("-")<0)return J;const ne=J.split("-");return this.formatLanguageCode(ne[0])}formatLanguageCode(J){if(isString$5(J)&&J.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let ce=Intl.getCanonicalLocales(J)[0];if(ce&&this.options.lowerCaseLng&&(ce=ce.toLowerCase()),ce)return ce}catch{}const ne=["hans","hant","latn","cyrl","cans","mong","arab"];let oe=J.split("-");return this.options.lowerCaseLng?oe=oe.map(ce=>ce.toLowerCase()):oe.length===2?(oe[0]=oe[0].toLowerCase(),oe[1]=oe[1].toUpperCase(),ne.indexOf(oe[1].toLowerCase())>-1&&(oe[1]=capitalize$1(oe[1].toLowerCase()))):oe.length===3&&(oe[0]=oe[0].toLowerCase(),oe[1].length===2&&(oe[1]=oe[1].toUpperCase()),oe[0]!=="sgn"&&oe[2].length===2&&(oe[2]=oe[2].toUpperCase()),ne.indexOf(oe[1].toLowerCase())>-1&&(oe[1]=capitalize$1(oe[1].toLowerCase())),ne.indexOf(oe[2].toLowerCase())>-1&&(oe[2]=capitalize$1(oe[2].toLowerCase()))),oe.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?J.toLowerCase():J}isSupportedCode(J){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(J=this.getLanguagePartFromCode(J)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(J)>-1}getBestMatchFromCodes(J){if(!J)return null;let ne;return J.forEach(oe=>{if(ne)return;const ce=this.formatLanguageCode(oe);(!this.options.supportedLngs||this.isSupportedCode(ce))&&(ne=ce)}),!ne&&this.options.supportedLngs&&J.forEach(oe=>{if(ne)return;const ce=this.getLanguagePartFromCode(oe);if(this.isSupportedCode(ce))return ne=ce;ne=this.options.supportedLngs.find(ue=>{if(ue===ce)return ue;if(!(ue.indexOf("-")<0&&ce.indexOf("-")<0)&&(ue.indexOf("-")>0&&ce.indexOf("-")<0&&ue.substring(0,ue.indexOf("-"))===ce||ue.indexOf(ce)===0&&ce.length>1))return ue})}),ne||(ne=this.getFallbackCodes(this.options.fallbackLng)[0]),ne}getFallbackCodes(J,ne){if(!J)return[];if(typeof J=="function"&&(J=J(ne)),isString$5(J)&&(J=[J]),Array.isArray(J))return J;if(!ne)return J.default||[];let oe=J[ne];return oe||(oe=J[this.getScriptPartFromCode(ne)]),oe||(oe=J[this.formatLanguageCode(ne)]),oe||(oe=J[this.getLanguagePartFromCode(ne)]),oe||(oe=J.default),oe||[]}toResolveHierarchy(J,ne){const oe=this.getFallbackCodes(ne||this.options.fallbackLng||[],J),ce=[],ue=Ae=>{Ae&&(this.isSupportedCode(Ae)?ce.push(Ae):this.logger.warn(`rejecting language code not found in supportedLngs: ${Ae}`))};return isString$5(J)&&(J.indexOf("-")>-1||J.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&ue(this.formatLanguageCode(J)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&ue(this.getScriptPartFromCode(J)),this.options.load!=="currentOnly"&&ue(this.getLanguagePartFromCode(J))):isString$5(J)&&ue(this.formatLanguageCode(J)),oe.forEach(Ae=>{ce.indexOf(Ae)<0&&ue(this.formatLanguageCode(Ae))}),ce}}let sets$1=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:K=>+(K>1),2:K=>+(K!=1),3:K=>0,4:K=>K%10==1&&K%100!=11?0:K%10>=2&&K%10<=4&&(K%100<10||K%100>=20)?1:2,5:K=>K==0?0:K==1?1:K==2?2:K%100>=3&&K%100<=10?3:K%100>=11?4:5,6:K=>K==1?0:K>=2&&K<=4?1:2,7:K=>K==1?0:K%10>=2&&K%10<=4&&(K%100<10||K%100>=20)?1:2,8:K=>K==1?0:K==2?1:K!=8&&K!=11?2:3,9:K=>+(K>=2),10:K=>K==1?0:K==2?1:K<7?2:K<11?3:4,11:K=>K==1||K==11?0:K==2||K==12?1:K>2&&K<20?2:3,12:K=>+(K%10!=1||K%100==11),13:K=>+(K!==0),14:K=>K==1?0:K==2?1:K==3?2:3,15:K=>K%10==1&&K%100!=11?0:K%10>=2&&(K%100<10||K%100>=20)?1:2,16:K=>K%10==1&&K%100!=11?0:K!==0?1:2,17:K=>K==1||K%10==1&&K%100!=11?0:1,18:K=>K==0?0:K==1?1:2,19:K=>K==1?0:K==0||K%100>1&&K%100<11?1:K%100>10&&K%100<20?2:3,20:K=>K==1?0:K==0||K%100>0&&K%100<20?1:2,21:K=>K%100==1?1:K%100==2?2:K%100==3||K%100==4?3:0,22:K=>K==1?0:K==2?1:(K<0||K>10)&&K%10==0?2:3};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},createRules=()=>{const K={};return sets$1.forEach(J=>{J.lngs.forEach(ne=>{K[ne]={numbers:J.nr,plurals:_rulesPluralsTypes[J.fc]}})}),K};class PluralResolver{constructor(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=J,this.options=ne,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||intlVersions.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules(),this.pluralRulesCache={}}addRule(J,ne){this.rules[J]=ne}clearCache(){this.pluralRulesCache={}}getRule(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const oe=getCleanedCode(J==="dev"?"en":J),ce=ne.ordinal?"ordinal":"cardinal",ue=JSON.stringify({cleanedCode:oe,type:ce});if(ue in this.pluralRulesCache)return this.pluralRulesCache[ue];const Ae=new Intl.PluralRules(oe,{type:ce});return this.pluralRulesCache[ue]=Ae,Ae}catch{return}return this.rules[J]||this.rules[this.languageUtils.getLanguagePartFromCode(J)]}needsPlural(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const oe=this.getRule(J,ne);return this.shouldUseIntlApi()?oe&&oe.resolvedOptions().pluralCategories.length>1:oe&&oe.numbers.length>1}getPluralFormsOfKey(J,ne){let oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(J,oe).map(ce=>`${ne}${ce}`)}getSuffixes(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const oe=this.getRule(J,ne);return oe?this.shouldUseIntlApi()?oe.resolvedOptions().pluralCategories.sort((ce,ue)=>suffixesOrder[ce]-suffixesOrder[ue]).map(ce=>`${this.options.prepend}${ne.ordinal?`ordinal${this.options.prepend}`:""}${ce}`):oe.numbers.map(ce=>this.getSuffix(J,ce,ne)):[]}getSuffix(J,ne){let oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const ce=this.getRule(J,oe);return ce?this.shouldUseIntlApi()?`${this.options.prepend}${oe.ordinal?`ordinal${this.options.prepend}`:""}${ce.select(ne)}`:this.getSuffixRetroCompatible(ce,ne):(this.logger.warn(`no plural rule found for: ${J}`),"")}getSuffixRetroCompatible(J,ne){const oe=J.noAbs?J.plurals(ne):J.plurals(Math.abs(ne));let ce=J.numbers[oe];this.options.simplifyPluralSuffix&&J.numbers.length===2&&J.numbers[0]===1&&(ce===2?ce="plural":ce===1&&(ce=""));const ue=()=>this.options.prepend&&ce.toString()?this.options.prepend+ce.toString():ce.toString();return this.options.compatibilityJSON==="v1"?ce===1?"":typeof ce=="number"?`_plural_${ce.toString()}`:ue():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&J.numbers.length===2&&J.numbers[0]===1?ue():this.options.prepend&&oe.toString()?this.options.prepend+oe.toString():oe.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}const deepFindWithDefaults=function(K,J,ne){let oe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",ce=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ue=getPathWithDefaults(K,J,ne);return!ue&&ce&&isString$5(ne)&&(ue=deepFind(K,ne,oe),ue===void 0&&(ue=deepFind(J,ne,oe))),ue},regexSafe=K=>K.replace(/\$/g,"$$$$");class Interpolator{constructor(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=J,this.format=J.interpolation&&J.interpolation.format||(ne=>ne),this.init(J)}init(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J.interpolation||(J.interpolation={escapeValue:!0});const{escape:ne,escapeValue:oe,useRawValueToEscape:ce,prefix:ue,prefixEscaped:Ae,suffix:pe,suffixEscaped:ve,formatSeparator:me,unescapeSuffix:ge,unescapePrefix:ye,nestingPrefix:xe,nestingPrefixEscaped:_e,nestingSuffix:$e,nestingSuffixEscaped:Ie,nestingOptionsSeparator:Fe,maxReplaces:ke,alwaysFormat:je}=J.interpolation;this.escape=ne!==void 0?ne:escape$2,this.escapeValue=oe!==void 0?oe:!0,this.useRawValueToEscape=ce!==void 0?ce:!1,this.prefix=ue?regexEscape(ue):Ae||"{{",this.suffix=pe?regexEscape(pe):ve||"}}",this.formatSeparator=me||",",this.unescapePrefix=ge?"":ye||"-",this.unescapeSuffix=this.unescapePrefix?"":ge||"",this.nestingPrefix=xe?regexEscape(xe):_e||regexEscape("$t("),this.nestingSuffix=$e?regexEscape($e):Ie||regexEscape(")"),this.nestingOptionsSeparator=Fe||",",this.maxReplaces=ke||1e3,this.alwaysFormat=je!==void 0?je:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const J=(ne,oe)=>ne&&ne.source===oe?(ne.lastIndex=0,ne):new RegExp(oe,"g");this.regexp=J(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=J(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=J(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(J,ne,oe,ce){let ue,Ae,pe;const ve=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},me=_e=>{if(_e.indexOf(this.formatSeparator)<0){const ke=deepFindWithDefaults(ne,ve,_e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(ke,void 0,oe,{...ce,...ne,interpolationkey:_e}):ke}const $e=_e.split(this.formatSeparator),Ie=$e.shift().trim(),Fe=$e.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(ne,ve,Ie,this.options.keySeparator,this.options.ignoreJSONStructure),Fe,oe,{...ce,...ne,interpolationkey:Ie})};this.resetRegExp();const ge=ce&&ce.missingInterpolationHandler||this.options.missingInterpolationHandler,ye=ce&&ce.interpolation&&ce.interpolation.skipOnVariables!==void 0?ce.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:_e=>regexSafe(_e)},{regex:this.regexp,safeValue:_e=>this.escapeValue?regexSafe(this.escape(_e)):regexSafe(_e)}].forEach(_e=>{for(pe=0;ue=_e.regex.exec(J);){const $e=ue[1].trim();if(Ae=me($e),Ae===void 0)if(typeof ge=="function"){const Fe=ge(J,ue,ce);Ae=isString$5(Fe)?Fe:""}else if(ce&&Object.prototype.hasOwnProperty.call(ce,$e))Ae="";else if(ye){Ae=ue[0];continue}else this.logger.warn(`missed to pass in variable ${$e} for interpolating ${J}`),Ae="";else!isString$5(Ae)&&!this.useRawValueToEscape&&(Ae=makeString(Ae));const Ie=_e.safeValue(Ae);if(J=J.replace(ue[0],Ie),ye?(_e.regex.lastIndex+=Ae.length,_e.regex.lastIndex-=ue[0].length):_e.regex.lastIndex=0,pe++,pe>=this.maxReplaces)break}}),J}nest(J,ne){let oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ce,ue,Ae;const pe=(ve,me)=>{const ge=this.nestingOptionsSeparator;if(ve.indexOf(ge)<0)return ve;const ye=ve.split(new RegExp(`${ge}[ ]*{`));let xe=`{${ye[1]}`;ve=ye[0],xe=this.interpolate(xe,Ae);const _e=xe.match(/'/g),$e=xe.match(/"/g);(_e&&_e.length%2===0&&!$e||$e.length%2!==0)&&(xe=xe.replace(/'/g,'"'));try{Ae=JSON.parse(xe),me&&(Ae={...me,...Ae})}catch(Ie){return this.logger.warn(`failed parsing options string in nesting for key ${ve}`,Ie),`${ve}${ge}${xe}`}return Ae.defaultValue&&Ae.defaultValue.indexOf(this.prefix)>-1&&delete Ae.defaultValue,ve};for(;ce=this.nestingRegexp.exec(J);){let ve=[];Ae={...oe},Ae=Ae.replace&&!isString$5(Ae.replace)?Ae.replace:Ae,Ae.applyPostProcessor=!1,delete Ae.defaultValue;let me=!1;if(ce[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(ce[1])){const ge=ce[1].split(this.formatSeparator).map(ye=>ye.trim());ce[1]=ge.shift(),ve=ge,me=!0}if(ue=ne(pe.call(this,ce[1].trim(),Ae),Ae),ue&&ce[0]===J&&!isString$5(ue))return ue;isString$5(ue)||(ue=makeString(ue)),ue||(this.logger.warn(`missed to resolve ${ce[1]} for nesting ${J}`),ue=""),me&&(ue=ve.reduce((ge,ye)=>this.format(ge,ye,oe.lng,{...oe,interpolationkey:ce[1].trim()}),ue.trim())),J=J.replace(ce[0],ue),this.regexp.lastIndex=0}return J}}const parseFormatStr=K=>{let J=K.toLowerCase().trim();const ne={};if(K.indexOf("(")>-1){const oe=K.split("(");J=oe[0].toLowerCase().trim();const ce=oe[1].substring(0,oe[1].length-1);J==="currency"&&ce.indexOf(":")<0?ne.currency||(ne.currency=ce.trim()):J==="relativetime"&&ce.indexOf(":")<0?ne.range||(ne.range=ce.trim()):ce.split(";").forEach(Ae=>{if(Ae){const[pe,...ve]=Ae.split(":"),me=ve.join(":").trim().replace(/^'+|'+$/g,""),ge=pe.trim();ne[ge]||(ne[ge]=me),me==="false"&&(ne[ge]=!1),me==="true"&&(ne[ge]=!0),isNaN(me)||(ne[ge]=parseInt(me,10))}})}return{formatName:J,formatOptions:ne}},createCachedFormatter=K=>{const J={};return(ne,oe,ce)=>{let ue=ce;ce&&ce.interpolationkey&&ce.formatParams&&ce.formatParams[ce.interpolationkey]&&ce[ce.interpolationkey]&&(ue={...ue,[ce.interpolationkey]:void 0});const Ae=oe+JSON.stringify(ue);let pe=J[Ae];return pe||(pe=K(getCleanedCode(oe),ce),J[Ae]=pe),pe(ne)}};class Formatter{constructor(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=J,this.formats={number:createCachedFormatter((ne,oe)=>ce=>new Intl.NumberFormat(ne,{...oe}).format(ce)),currency:createCachedFormatter((ne,oe)=>ce=>new Intl.NumberFormat(ne,{...oe,style:"currency"}).format(ce)),datetime:createCachedFormatter((ne,oe)=>ce=>new Intl.DateTimeFormat(ne,{...oe}).format(ce)),relativetime:createCachedFormatter((ne,oe)=>ce=>new Intl.RelativeTimeFormat(ne,{...oe}).format(ce,oe.range||"day")),list:createCachedFormatter((ne,oe)=>ce=>new Intl.ListFormat(ne,{...oe}).format(ce))},this.init(J)}init(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=ne.interpolation.formatSeparator||","}add(J,ne){this.formats[J.toLowerCase().trim()]=ne}addCached(J,ne){this.formats[J.toLowerCase().trim()]=createCachedFormatter(ne)}format(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ue=ne.split(this.formatSeparator);if(ue.length>1&&ue[0].indexOf("(")>1&&ue[0].indexOf(")")<0&&ue.find(pe=>pe.indexOf(")")>-1)){const pe=ue.findIndex(ve=>ve.indexOf(")")>-1);ue[0]=[ue[0],...ue.splice(1,pe)].join(this.formatSeparator)}return ue.reduce((pe,ve)=>{const{formatName:me,formatOptions:ge}=parseFormatStr(ve);if(this.formats[me]){let ye=pe;try{const xe=ce&&ce.formatParams&&ce.formatParams[ce.interpolationkey]||{},_e=xe.locale||xe.lng||ce.locale||ce.lng||oe;ye=this.formats[me](pe,_e,{...ge,...ce,...xe})}catch(xe){this.logger.warn(xe)}return ye}else this.logger.warn(`there was no format function for ${me}`);return pe},J)}}const removePending=(K,J)=>{K.pending[J]!==void 0&&(delete K.pending[J],K.pendingCount--)};class Connector extends EventEmitter{constructor(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=J,this.store=ne,this.services=oe,this.languageUtils=oe.languageUtils,this.options=ce,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=ce.maxParallelReads||10,this.readingCalls=0,this.maxRetries=ce.maxRetries>=0?ce.maxRetries:5,this.retryTimeout=ce.retryTimeout>=1?ce.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(oe,ce.backend,ce)}queueLoad(J,ne,oe,ce){const ue={},Ae={},pe={},ve={};return J.forEach(me=>{let ge=!0;ne.forEach(ye=>{const xe=`${me}|${ye}`;!oe.reload&&this.store.hasResourceBundle(me,ye)?this.state[xe]=2:this.state[xe]<0||(this.state[xe]===1?Ae[xe]===void 0&&(Ae[xe]=!0):(this.state[xe]=1,ge=!1,Ae[xe]===void 0&&(Ae[xe]=!0),ue[xe]===void 0&&(ue[xe]=!0),ve[ye]===void 0&&(ve[ye]=!0)))}),ge||(pe[me]=!0)}),(Object.keys(ue).length||Object.keys(Ae).length)&&this.queue.push({pending:Ae,pendingCount:Object.keys(Ae).length,loaded:{},errors:[],callback:ce}),{toLoad:Object.keys(ue),pending:Object.keys(Ae),toLoadLanguages:Object.keys(pe),toLoadNamespaces:Object.keys(ve)}}loaded(J,ne,oe){const ce=J.split("|"),ue=ce[0],Ae=ce[1];ne&&this.emit("failedLoading",ue,Ae,ne),!ne&&oe&&this.store.addResourceBundle(ue,Ae,oe,void 0,void 0,{skipCopy:!0}),this.state[J]=ne?-1:2,ne&&oe&&(this.state[J]=0);const pe={};this.queue.forEach(ve=>{pushPath(ve.loaded,[ue],Ae),removePending(ve,J),ne&&ve.errors.push(ne),ve.pendingCount===0&&!ve.done&&(Object.keys(ve.loaded).forEach(me=>{pe[me]||(pe[me]={});const ge=ve.loaded[me];ge.length&&ge.forEach(ye=>{pe[me][ye]===void 0&&(pe[me][ye]=!0)})}),ve.done=!0,ve.errors.length?ve.callback(ve.errors):ve.callback())}),this.emit("loaded",pe),this.queue=this.queue.filter(ve=>!ve.done)}read(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,Ae=arguments.length>5?arguments[5]:void 0;if(!J.length)return Ae(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:J,ns:ne,fcName:oe,tried:ce,wait:ue,callback:Ae});return}this.readingCalls++;const pe=(me,ge)=>{if(this.readingCalls--,this.waitingReads.length>0){const ye=this.waitingReads.shift();this.read(ye.lng,ye.ns,ye.fcName,ye.tried,ye.wait,ye.callback)}if(me&&ge&&ce<this.maxRetries){setTimeout(()=>{this.read.call(this,J,ne,oe,ce+1,ue*2,Ae)},ue);return}Ae(me,ge)},ve=this.backend[oe].bind(this.backend);if(ve.length===2){try{const me=ve(J,ne);me&&typeof me.then=="function"?me.then(ge=>pe(null,ge)).catch(pe):pe(null,me)}catch(me){pe(me)}return}return ve(J,ne,pe)}prepareLoading(J,ne){let oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ce=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),ce&&ce();isString$5(J)&&(J=this.languageUtils.toResolveHierarchy(J)),isString$5(ne)&&(ne=[ne]);const ue=this.queueLoad(J,ne,oe,ce);if(!ue.toLoad.length)return ue.pending.length||ce(),null;ue.toLoad.forEach(Ae=>{this.loadOne(Ae)})}load(J,ne,oe){this.prepareLoading(J,ne,{},oe)}reload(J,ne,oe){this.prepareLoading(J,ne,{reload:!0},oe)}loadOne(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const oe=J.split("|"),ce=oe[0],ue=oe[1];this.read(ce,ue,"read",void 0,void 0,(Ae,pe)=>{Ae&&this.logger.warn(`${ne}loading namespace ${ue} for language ${ce} failed`,Ae),!Ae&&pe&&this.logger.log(`${ne}loaded namespace ${ue} for language ${ce}`,pe),this.loaded(J,Ae,pe)})}saveMissing(J,ne,oe,ce,ue){let Ae=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},pe=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(ne)){this.logger.warn(`did not save key "${oe}" as the namespace "${ne}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(oe==null||oe==="")){if(this.backend&&this.backend.create){const ve={...Ae,isUpdate:ue},me=this.backend.create.bind(this.backend);if(me.length<6)try{let ge;me.length===5?ge=me(J,ne,oe,ce,ve):ge=me(J,ne,oe,ce),ge&&typeof ge.then=="function"?ge.then(ye=>pe(null,ye)).catch(pe):pe(null,ge)}catch(ge){pe(ge)}else me(J,ne,oe,ce,pe,ve)}!J||!J[0]||this.store.addResource(J[0],ne,oe,ce)}}}const get$3=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:K=>{let J={};if(typeof K[1]=="object"&&(J=K[1]),isString$5(K[1])&&(J.defaultValue=K[1]),isString$5(K[2])&&(J.tDescription=K[2]),typeof K[2]=="object"||typeof K[3]=="object"){const ne=K[3]||K[2];Object.keys(ne).forEach(oe=>{J[oe]=ne[oe]})}return J},interpolation:{escapeValue:!0,format:K=>K,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=K=>(isString$5(K.ns)&&(K.ns=[K.ns]),isString$5(K.fallbackLng)&&(K.fallbackLng=[K.fallbackLng]),isString$5(K.fallbackNS)&&(K.fallbackNS=[K.fallbackNS]),K.supportedLngs&&K.supportedLngs.indexOf("cimode")<0&&(K.supportedLngs=K.supportedLngs.concat(["cimode"])),K),noop$6=()=>{},bindMemberFunctions=K=>{Object.getOwnPropertyNames(Object.getPrototypeOf(K)).forEach(ne=>{typeof K[ne]=="function"&&(K[ne]=K[ne].bind(K))})};class I18n extends EventEmitter{constructor(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(J),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),ne&&!this.isInitialized&&!J.isClone){if(!this.options.initImmediate)return this.init(J,ne),this;setTimeout(()=>{this.init(J,ne)},0)}}init(){var J=this;let ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof ne=="function"&&(oe=ne,ne={}),!ne.defaultNS&&ne.defaultNS!==!1&&ne.ns&&(isString$5(ne.ns)?ne.defaultNS=ne.ns:ne.ns.indexOf("translation")<0&&(ne.defaultNS=ne.ns[0]));const ce=get$3();this.options={...ce,...this.options,...transformOptions(ne)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...ce.interpolation,...this.options.interpolation}),ne.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=ne.keySeparator),ne.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=ne.nsSeparator);const ue=ge=>ge?typeof ge=="function"?new ge:ge:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(ue(this.modules.logger),this.options):baseLogger.init(null,this.options);let ge;this.modules.formatter?ge=this.modules.formatter:typeof Intl<"u"&&(ge=Formatter);const ye=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const xe=this.services;xe.logger=baseLogger,xe.resourceStore=this.store,xe.languageUtils=ye,xe.pluralResolver=new PluralResolver(ye,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),ge&&(!this.options.interpolation.format||this.options.interpolation.format===ce.interpolation.format)&&(xe.formatter=ue(ge),xe.formatter.init(xe,this.options),this.options.interpolation.format=xe.formatter.format.bind(xe.formatter)),xe.interpolator=new Interpolator(this.options),xe.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},xe.backendConnector=new Connector(ue(this.modules.backend),xe.resourceStore,xe,this.options),xe.backendConnector.on("*",function(_e){for(var $e=arguments.length,Ie=new Array($e>1?$e-1:0),Fe=1;Fe<$e;Fe++)Ie[Fe-1]=arguments[Fe];J.emit(_e,...Ie)}),this.modules.languageDetector&&(xe.languageDetector=ue(this.modules.languageDetector),xe.languageDetector.init&&xe.languageDetector.init(xe,this.options.detection,this.options)),this.modules.i18nFormat&&(xe.i18nFormat=ue(this.modules.i18nFormat),xe.i18nFormat.init&&xe.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(_e){for(var $e=arguments.length,Ie=new Array($e>1?$e-1:0),Fe=1;Fe<$e;Fe++)Ie[Fe-1]=arguments[Fe];J.emit(_e,...Ie)}),this.modules.external.forEach(_e=>{_e.init&&_e.init(this)})}if(this.format=this.options.interpolation.format,oe||(oe=noop$6),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const ge=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);ge.length>0&&ge[0]!=="dev"&&(this.options.lng=ge[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(ge=>{this[ge]=function(){return J.store[ge](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(ge=>{this[ge]=function(){return J.store[ge](...arguments),J}});const ve=defer(),me=()=>{const ge=(ye,xe)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),ve.resolve(xe),oe(ye,xe)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return ge(null,this.t.bind(this));this.changeLanguage(this.options.lng,ge)};return this.options.resources||!this.options.initImmediate?me():setTimeout(me,0),ve}loadResources(J){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$6;const ce=isString$5(J)?J:this.language;if(typeof J=="function"&&(oe=J),!this.options.resources||this.options.partialBundledLanguages){if(ce&&ce.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return oe();const ue=[],Ae=pe=>{if(!pe||pe==="cimode")return;this.services.languageUtils.toResolveHierarchy(pe).forEach(me=>{me!=="cimode"&&ue.indexOf(me)<0&&ue.push(me)})};ce?Ae(ce):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(ve=>Ae(ve)),this.options.preload&&this.options.preload.forEach(pe=>Ae(pe)),this.services.backendConnector.load(ue,this.options.ns,pe=>{!pe&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),oe(pe)})}else oe(null)}reloadResources(J,ne,oe){const ce=defer();return typeof J=="function"&&(oe=J,J=void 0),typeof ne=="function"&&(oe=ne,ne=void 0),J||(J=this.languages),ne||(ne=this.options.ns),oe||(oe=noop$6),this.services.backendConnector.reload(J,ne,ue=>{ce.resolve(),oe(ue)}),ce}use(J){if(!J)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!J.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return J.type==="backend"&&(this.modules.backend=J),(J.type==="logger"||J.log&&J.warn&&J.error)&&(this.modules.logger=J),J.type==="languageDetector"&&(this.modules.languageDetector=J),J.type==="i18nFormat"&&(this.modules.i18nFormat=J),J.type==="postProcessor"&&postProcessor.addPostProcessor(J),J.type==="formatter"&&(this.modules.formatter=J),J.type==="3rdParty"&&this.modules.external.push(J),this}setResolvedLanguage(J){if(!(!J||!this.languages)&&!(["cimode","dev"].indexOf(J)>-1))for(let ne=0;ne<this.languages.length;ne++){const oe=this.languages[ne];if(!(["cimode","dev"].indexOf(oe)>-1)&&this.store.hasLanguageSomeTranslations(oe)){this.resolvedLanguage=oe;break}}}changeLanguage(J,ne){var oe=this;this.isLanguageChangingTo=J;const ce=defer();this.emit("languageChanging",J);const ue=ve=>{this.language=ve,this.languages=this.services.languageUtils.toResolveHierarchy(ve),this.resolvedLanguage=void 0,this.setResolvedLanguage(ve)},Ae=(ve,me)=>{me?(ue(me),this.translator.changeLanguage(me),this.isLanguageChangingTo=void 0,this.emit("languageChanged",me),this.logger.log("languageChanged",me)):this.isLanguageChangingTo=void 0,ce.resolve(function(){return oe.t(...arguments)}),ne&&ne(ve,function(){return oe.t(...arguments)})},pe=ve=>{!J&&!ve&&this.services.languageDetector&&(ve=[]);const me=isString$5(ve)?ve:this.services.languageUtils.getBestMatchFromCodes(ve);me&&(this.language||ue(me),this.translator.language||this.translator.changeLanguage(me),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(me)),this.loadResources(me,ge=>{Ae(ge,me)})};return!J&&this.services.languageDetector&&!this.services.languageDetector.async?pe(this.services.languageDetector.detect()):!J&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(pe):this.services.languageDetector.detect(pe):pe(J),ce}getFixedT(J,ne,oe){var ce=this;const ue=function(Ae,pe){let ve;if(typeof pe!="object"){for(var me=arguments.length,ge=new Array(me>2?me-2:0),ye=2;ye<me;ye++)ge[ye-2]=arguments[ye];ve=ce.options.overloadTranslationOptionHandler([Ae,pe].concat(ge))}else ve={...pe};ve.lng=ve.lng||ue.lng,ve.lngs=ve.lngs||ue.lngs,ve.ns=ve.ns||ue.ns,ve.keyPrefix!==""&&(ve.keyPrefix=ve.keyPrefix||oe||ue.keyPrefix);const xe=ce.options.keySeparator||".";let _e;return ve.keyPrefix&&Array.isArray(Ae)?_e=Ae.map($e=>`${ve.keyPrefix}${xe}${$e}`):_e=ve.keyPrefix?`${ve.keyPrefix}${xe}${Ae}`:Ae,ce.t(_e,ve)};return isString$5(J)?ue.lng=J:ue.lngs=J,ue.ns=ne,ue.keyPrefix=oe,ue}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(J){this.options.defaultNS=J}hasLoadedNamespace(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const oe=ne.lng||this.resolvedLanguage||this.languages[0],ce=this.options?this.options.fallbackLng:!1,ue=this.languages[this.languages.length-1];if(oe.toLowerCase()==="cimode")return!0;const Ae=(pe,ve)=>{const me=this.services.backendConnector.state[`${pe}|${ve}`];return me===-1||me===0||me===2};if(ne.precheck){const pe=ne.precheck(this,Ae);if(pe!==void 0)return pe}return!!(this.hasResourceBundle(oe,J)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||Ae(oe,J)&&(!ce||Ae(ue,J)))}loadNamespaces(J,ne){const oe=defer();return this.options.ns?(isString$5(J)&&(J=[J]),J.forEach(ce=>{this.options.ns.indexOf(ce)<0&&this.options.ns.push(ce)}),this.loadResources(ce=>{oe.resolve(),ne&&ne(ce)}),oe):(ne&&ne(),Promise.resolve())}loadLanguages(J,ne){const oe=defer();isString$5(J)&&(J=[J]);const ce=this.options.preload||[],ue=J.filter(Ae=>ce.indexOf(Ae)<0&&this.services.languageUtils.isSupportedCode(Ae));return ue.length?(this.options.preload=ce.concat(ue),this.loadResources(Ae=>{oe.resolve(),ne&&ne(Ae)}),oe):(ne&&ne(),Promise.resolve())}dir(J){if(J||(J=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!J)return"rtl";const ne=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],oe=this.services&&this.services.languageUtils||new LanguageUtil(get$3());return ne.indexOf(oe.getLanguagePartFromCode(J))>-1||J.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=arguments.length>1?arguments[1]:void 0;return new I18n(J,ne)}cloneInstance(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$6;const oe=J.forkResourceStore;oe&&delete J.forkResourceStore;const ce={...this.options,...J,isClone:!0},ue=new I18n(ce);return(J.debug!==void 0||J.prefix!==void 0)&&(ue.logger=ue.logger.clone(J)),["store","services","language"].forEach(pe=>{ue[pe]=this[pe]}),ue.services={...this.services},ue.services.utils={hasLoadedNamespace:ue.hasLoadedNamespace.bind(ue)},oe&&(ue.store=new ResourceStore(this.store.data,ce),ue.services.resourceStore=ue.store),ue.translator=new Translator(ue.services,ce),ue.translator.on("*",function(pe){for(var ve=arguments.length,me=new Array(ve>1?ve-1:0),ge=1;ge<ve;ge++)me[ge-1]=arguments[ge];ue.emit(pe,...me)}),ue.init(ce,ne),ue.translator.options=ce,ue.translator.backendConnector.services.utils={hasLoadedNamespace:ue.hasLoadedNamespace.bind(ue)},ue}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;const t$5=instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;function _extends(){return _extends=Object.assign?Object.assign.bind():function(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J];for(var oe in ne)({}).hasOwnProperty.call(ne,oe)&&(K[oe]=ne[oe])}return K},_extends.apply(null,arguments)}function warn$3(){if(console&&console.warn){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];typeof J[0]=="string"&&(J[0]=`react-i18next:: ${J[0]}`),console.warn(...J)}}const alreadyWarned={};function warnOnce(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];typeof J[0]=="string"&&alreadyWarned[J[0]]||(typeof J[0]=="string"&&(alreadyWarned[J[0]]=new Date),warn$3(...J))}const loadedClb=(K,J)=>()=>{if(K.isInitialized)J();else{const ne=()=>{setTimeout(()=>{K.off("initialized",ne)},0),J()};K.on("initialized",ne)}};function loadNamespaces(K,J,ne){K.loadNamespaces(J,loadedClb(K,ne))}function loadLanguages(K,J,ne,oe){typeof ne=="string"&&(ne=[ne]),ne.forEach(ce=>{K.options.ns.indexOf(ce)<0&&K.options.ns.push(ce)}),K.loadLanguages(J,loadedClb(K,oe))}function oldI18nextHasLoadedNamespace(K,J){let ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const oe=J.languages[0],ce=J.options?J.options.fallbackLng:!1,ue=J.languages[J.languages.length-1];if(oe.toLowerCase()==="cimode")return!0;const Ae=(pe,ve)=>{const me=J.services.backendConnector.state[`${pe}|${ve}`];return me===-1||me===2};return ne.bindI18n&&ne.bindI18n.indexOf("languageChanging")>-1&&J.services.backendConnector.backend&&J.isLanguageChangingTo&&!Ae(J.isLanguageChangingTo,K)?!1:!!(J.hasResourceBundle(oe,K)||!J.services.backendConnector.backend||J.options.resources&&!J.options.partialBundledLanguages||Ae(oe,K)&&(!ce||Ae(ue,K)))}function hasLoadedNamespace(K,J){let ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!J.languages||!J.languages.length?(warnOnce("i18n.languages were undefined or empty",J.languages),!0):J.options.ignoreJSONStructure!==void 0?J.hasLoadedNamespace(K,{lng:ne.lng,precheck:(ce,ue)=>{if(ne.bindI18n&&ne.bindI18n.indexOf("languageChanging")>-1&&ce.services.backendConnector.backend&&ce.isLanguageChangingTo&&!ue(ce.isLanguageChangingTo,K))return!1}}):oldI18nextHasLoadedNamespace(K,J,ne)}function getDisplayName(K){return K.displayName||K.name||(typeof K=="string"&&K.length>0?K:"Unknown")}const matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=K=>htmlEntities[K],unescape$1=K=>K.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$1};function setDefaults(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};defaultOptions={...defaultOptions,...K}}function getDefaults(){return defaultOptions}let i18nInstance;function setI18n(K){i18nInstance=K}function getI18n(){return i18nInstance}const initReactI18next={type:"3rdParty",init(K){setDefaults(K.options.react),setI18n(K)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(J){J.forEach(ne=>{this.usedNamespaces[ne]||(this.usedNamespaces[ne]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious$1=(K,J)=>{const ne=reactExports.useRef();return reactExports.useEffect(()=>{ne.current=K},[K,J]),ne.current};function useTranslation(K){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:ne}=J,{i18n:oe,defaultNS:ce}=reactExports.useContext(I18nContext)||{},ue=ne||oe||getI18n();if(ue&&!ue.reportNamespaces&&(ue.reportNamespaces=new ReportNamespaces),!ue){warnOnce("You will need to pass in an i18next instance by using initReactI18next");const We=(Xe,Je)=>typeof Je=="string"?Je:Je&&typeof Je=="object"&&typeof Je.defaultValue=="string"?Je.defaultValue:Array.isArray(Xe)?Xe[Xe.length-1]:Xe,ze=[We,{},!1];return ze.t=We,ze.i18n={},ze.ready=!1,ze}ue.options.react&&ue.options.react.wait!==void 0&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const Ae={...getDefaults(),...ue.options.react,...J},{useSuspense:pe,keyPrefix:ve}=Ae;let me=K||ce||ue.options&&ue.options.defaultNS;me=typeof me=="string"?[me]:me||["translation"],ue.reportNamespaces.addUsedNamespaces&&ue.reportNamespaces.addUsedNamespaces(me);const ge=(ue.isInitialized||ue.initializedStoreOnce)&&me.every(We=>hasLoadedNamespace(We,ue,Ae));function ye(){return ue.getFixedT(J.lng||null,Ae.nsMode==="fallback"?me:me[0],ve)}const[xe,_e]=reactExports.useState(ye);let $e=me.join();J.lng&&($e=`${J.lng}${$e}`);const Ie=usePrevious$1($e),Fe=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:We,bindI18nStore:ze}=Ae;Fe.current=!0,!ge&&!pe&&(J.lng?loadLanguages(ue,J.lng,me,()=>{Fe.current&&_e(ye)}):loadNamespaces(ue,me,()=>{Fe.current&&_e(ye)})),ge&&Ie&&Ie!==$e&&Fe.current&&_e(ye);function Xe(){Fe.current&&_e(ye)}return We&&ue&&ue.on(We,Xe),ze&&ue&&ue.store.on(ze,Xe),()=>{Fe.current=!1,We&&ue&&We.split(" ").forEach(Je=>ue.off(Je,Xe)),ze&&ue&&ze.split(" ").forEach(Je=>ue.store.off(Je,Xe))}},[ue,$e]);const ke=reactExports.useRef(!0);reactExports.useEffect(()=>{Fe.current&&!ke.current&&_e(ye),ke.current=!1},[ue,ve]);const je=[xe,ue,ge];if(je.t=xe,je.i18n=ue,je.ready=ge,ge||!ge&&!pe)return je;throw new Promise(We=>{J.lng?loadLanguages(ue,J.lng,me,()=>We()):loadNamespaces(ue,me,()=>We())})}function withTranslation(K){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(oe){function ce(Ae){let{forwardedRef:pe,...ve}=Ae;const[me,ge,ye]=useTranslation(K,{...ve,keyPrefix:J.keyPrefix}),xe={...ve,t:me,i18n:ge,tReady:ye};return J.withRef&&pe?xe.ref=pe:!J.withRef&&pe&&(xe.forwardedRef=pe),reactExports.createElement(oe,xe)}ce.displayName=`withI18nextTranslation(${getDisplayName(oe)})`,ce.WrappedComponent=oe;const ue=(Ae,pe)=>reactExports.createElement(ce,Object.assign({},Ae,{forwardedRef:pe}));return J.withRef?reactExports.forwardRef(ue):ce}}function Translation(K){const{ns:J,children:ne,...oe}=K,[ce,ue,Ae]=useTranslation(J,oe);return ne(ce,{i18n:ue,lng:ue.language},Ae)}const header$7={input:{placeholder:"Find Screen (Ctrl+F)"},tabgroups:{opened:"Opened",tables:"Tables",types:"Types",filters:"Filters",clear:"Clear",filter:"Filter by Type"},userInfo:{theme:{label:"Theme"},language:{label:"Language"},role:"Role",accessLevel:"Access level",build:"Build",versions:"Versions",fullScreenMode:"Full screen mode",secrets:{title:"My Keys",name:"Name",value:"Value",encrypted:"Encrypted",addKey:"ADD KEY",deletingKey:"Deleting Key",deleteModalContent:"You are about to delete {{keyName}} key. This action cannot be undone.",point1:"Your encrypted keys are stored in the browser only",point2:"The server does not cache or store them",point3:"The keys are always encrypted in transit and at rest",point4:"You can delete the keys any time",point5:"They will be deleted automatically after {{expire}} days"},backupAndRestore:{title:"Backup & Restore",export:"Export Database",import:"Import Database"}},theme:{dark:"Dark",light:"Light"},environmentModal:{environment:"Environment"},addEnvironmentModal:{addTitle:"Add"},cancelButton:{tooltip:"Cancel running jobs"},downloadLogs:"Download logs",sendFeedback:"Send feedback",logsFileName:"Logs",record:"Record"},shared$2={copy:"Copy",copied:"Copied",close:"Close",yes:"Yes",no:"No",open:"Open",pleaseReloadPage:"Please Reload the Page",somethingWentWrong:"Something went wrong",notSupported:"Not supported",success:"Success",reloadPage:"Reload page",noRecordsAreSelected:"No records are selected",refresh:"Refresh",filterInputPlaceholder:"Filter here"},serverUnavailablePage$2={title:"Cannot Connect To The Server",subtitle:"Check your internet connectivity and server status",loaderTitle:"Trying To Reconnect"},grid$3={sorting:{asc:"Sort Asc",desc:"Sort Desc",none:"No Sort"},useSearch:"Use the search bar to open a new screen",pressControlF:"Press Ctrl + F to start typing",pleaseContantTheAdministrator:"No data found. Please contact the administrator.",overview:"Overview",columnFilter:{filterPlaceholder:"Start typing to search"},tabs:{main:"Main",closeTab:"Close tab",closeOtherTabs:"Close other tabs",closeAllTabs:"Close all tabs"},recordNavigationModal:{title:"{{handlerName}} result",content:"'{{handlerName}}' has been completed",forRecordKey:" for '{{recordKey}}'",viewResults:". View results?"},pagination:{firstPage:"First page",nextPage:"Next page",previousPage:"Previous page",jumpToPage:"Jump to page",go:"GO"},errorHandler:"Error during task run",successHandler:"Successfully executed task",settings:"Grid settings",cellHeight:"Max cell height",rowBorder:"Row Border"},editor$4={modalHeader:"Select the key",entityModalHeader:"Create Entity",entityExists:"Entity exists",duplicateEntity:"Record with key undefined already exists. Do you want to replace it?",createEntity:"Create new empty record",copyEntity:"Create copy from existing record",openJSONEditor:"JSON Editor",entitySavedSuccessfully:"Entity saved successfully",readonlyHint:"This field cannot be edited",tabs:{data:"Data",newEntity:"New entity",copyEntity:"Copy entity",history:"History",selectType:"Select Type",dag:"Directed Acyclic Graph"},breadcrumbs:{closeAll:"Close all crumbs",moveUp:"Move up",moveDown:"Move down"},listToolbar:{add:"Add array element",remove:"Remove array element",grid:"Grid view",list:"List view",insertRow:"Insert row",moveRowDown:"Move row down",moveRowUp:"Move row up",addValue:"Add value",addVector:"Add vector",insertValue:"Insert value",insertVector:"Insert vector"},modals:{genericTypeEmpty:"Type doesn't have any information"},validation:{containErrors:"Some fields contain errors"},addDagNode:"Add node",edit:"Edit"},gridToolbar$2={layout:"Layout",content:"Content",query:"Query",data:"Data",entity:"Entity",excel:"Excel",history:"Show history",refresh:"Refresh",addNewEntity:"Add new entity",copyEntity:"Copy entity",deleteSelectedEntity:"Delete selected entity",deleteSelectedEntities:"Delete {{numberOfItems}}selected entities",selectAllRecords:"Select all records",deselectAllRecords:"Deselect all records",savePermanentlyEntity:"Save permanently entity",savePermanentlyEntities:"Save permanently {{numberOfItems}}selected entities",chatAbout:"Chat about",export:"Export",json:"JSON",csv:"CSV",openExcelAddIn:"Export to Excel",openCSV:"Open CSV",restoreDefaultLayout:"Restore default layout",completed:"completed",failed:"failed",stopAll:"Stop All",commonTasks:"Common Tasks",recordTasks:"Record Tasks",settings:"Settings"},editorToolbar$2={json:"Open JSON editor",refresh:"Refresh"},typeToolbar$3={openLogs:" Open notifications",emptyRunHanlers:"No items available",handlerExecutedSuccessfuly:"Completed"},buttons$3={agree:"Agree",cancel:"Cancel",apply:"Apply",save:"Save",connect:"Connect",add:"Add",delete:"Delete",execute:"Execute",ok:"Ok",run:"Run",yes:"Yes",no:"No",send:"Send",proceed:"Proceed",saveAndNext:"Save & Next",saveAndClose:"Save & Close",close:"Close",back:"Back",discard:"Discard"},logs$2={filterByStatus:"Filter by status",search:"Search",handlers:"Tasks",completedHandler:"The task '{{handlerName}}' completed successfully.",failedHandler:"Failed task",notifications:"Notifications",sec:"sec",eraseLogs:"Erase logs",title:"Notifications",errors:"Errors",error:"Error",type:"Type",key:"Key",handler:"Task",taskId:"Task ID",all:"All"},unsavedChangeModal$2={title:"Unsaved Changes",content:"There are unsaved changes. Save now or Cancel to keep editing."},unsavedChangeInfoModal$2={title:"Unsaved Changes Detected",content:"Please save your changes before running the task."},sendFeedbackModal$2={feedback:"Send feedback",warningMessage:"Your message will be sent anonymously. If you'd like us to reply you, please indicate your email address in the mail body.",to:"To",purpose:"Purpose",textareaPlaceholder:"Please describe what you were doing when the error occurred.",subject:"Subject",attachLogs:"Attach Logs"},logsFilter$2={all:"All",debug:"Debug",info:"Info",warning:"Warning",error:"Error",critical:"Critical",submitted:"Submitted",running:"Running",completed:"Completed",failed:"Failed",cancelled:"Cancelled",clear:"Reset filters"},validationMessage$3={invalidEmail:"Please enter a valid email address",fieldRequired:"Field is required",intValue:"Value should be integer",boolValue:"Value should be boolean",dateValue:"Value should be YYYY-MM-DD format",timeValue:"Value should be HH:mm:ss format",dateTimeValue:"Value should be YYYY-MM-DD HH:mm:ss format",emptyTagsArray:"Please specify at least one recipient"},noData$5={inTheReport:"No Data in the Report",refresh:"Refresh",contactAdministrator:"Something went wrong, please reload the page and contact administrator",loading:"Loading",loadingWithDots:"Loading...",details:"Open new screen or try to refresh",noData:"No Data",emptyViewer:"The Viewer is empty",pageNotExist:"Page doesn't exist",returnToPrevPage:"Return to continue using app",return:"Return"},auth$2={login:{actions:{login:"Log In"},username:{placeholder:"Username"},password:{placeholder:"Password"},error:"The username or password is incorrect",divider:"Or continue with",dev:"Dev Login",adLogin:"AD Login: ID-"},logOut:"Log out",error:"Something went wrong, please contact the administrator",backToLogin:"Back to login"},chat$2={newChat:"New Chat",pleaseStartNewChat:"Please start new chat to continue ...",sendMessage:"Send a message ...",cancelRequest:"Processing ... Press Cancel to stop.",loading:"Processing ...",startNewChat:"start new chat",askSomething:"Ask something to start",emptyHistoryTooltip:"No available chats for this topic",historyTooltip:"Chat history",deleteSelectedChats:"delete selected",selectAll:"select all",types:{private:"private chat",internal:"internal chat",encrypted:"encrypted chat"},prompt:"Current Profile",newTypes:{internalAndProfile:"new chat & Profile",private:"new private chat",internal:"new chat",encrypted:"new encrypted chat"},newTooltipTypes:{internalAndProfile:"Start a new chat session & Profile",private:"Start a new private encrypted chat session",internal:"Start a new chat session"},disclaimer:{title:"Disclaimer",paragraph:"By using this software, you consent to the following:",list:["This demo may have trained AI against datasets that may not be complete","Any results obtained from this demonstration need to be carefully considered as feedback from the AI model","Any results may not be used as source data for any other purpose, without independent verification","The results obtained should not be used to automate any business process without a review by the subject matter expert","The results herein shall be deemed confidential and proprietary."]},contentHandlersModal:{title:"Please select the content"}},maximizeButton$2={fullScreen:"Full screen mode",exitFullScreen:"Exit full screen mode",defaultView:"Default view",editorFullScreen:"Expand record view",gridFullScreen:"Expand grid view"},layoutDirectionButton$2={view:"View",verticalLayout:"Split vertically",horizontalLayout:"Split horizontally",horizontalSplit:"Horizontal split",verticalSplit:"Vertical split",gridOnly:"Grid only",dataOnly:"Data only"},recordNavigation$2={record:"Record",prevRecord:"Previous record",moveToTheNext:"Move to the next record",nextRecord:"Next record",moveToThePrev:"Move to the previous record",editRecord:"Edit record",editRecordDescription:"Open JSON editor"},confirmationModal$2={deleteRecords:{addCurrentRecord:"Do you want to add current record to the selection and delete {{numberOfItems}} records?",addTitle:"Do you want to delete current record",title:"Deleting Entities",confirmationTextOneEntity:`This action cannot be undone.
 Are you sure you want to delete selected entity?`,confirmationTexts:`This action cannot be undone.
 Are you sure you want to delete {{numberOfItems}} selected entities?`},executingHandlers:{addCurrentRecord:"Do you want to add current record to the selection and execute {{numberOfItems}} records?",addTitle:"Do you want to execute current record",title:"Confirmation",confirmationTexts:"This will run the task for {{numberOfItems}} records"},restoreLayout:{title:"Restore Default Layout",description:"Restore layout  to the basic view",confirmationText:"All settings that were not saved manually will be discarded. Continue?"},variantSelect:{title:"Variant"},withDependencies:"Save With Dependencies",export:{title:"Confirm",exportEntity_zero:"You are about to export all entities. Continue?",exportEntity_one:"You are about to export {{count}} selected entity. Continue?",exportEntity_other:"You are about to export {{count}} selected entities. Continue?"},savePermanently:{title:"Confirm",exportEntity_zero:"You are about to save all entities. Continue?",exportEntity_one:"You are about to save {{count}} selected entity. Continue?",exportEntity_other:"You are about to save {{count}} selected entities. Continue?"}},viewers$2={pdf:{placeholder:"Enter to search",search:"Search",previousPage:"Previous page",nextPage:"Next page",previousMatch:"Previous match",nextMatch:"Next match"}},queryBuilder$3={customIndex:"Custom",title:"Query",introduction:"Please Select an Index to Display Data",label:"Index",resetAll:"Reset all",apply:"Apply",select:"Select"},toast$3={completed:"completed",failed:"failed",warnings:"warnings",completedUpperCase:"Completed",failedUpperCase:"Failed"},reloadApplicationModal$2={title:"Reload required",content:"Application has been refreshed. Press OK to reload."},userGuideModal$2={title:"User Guide",doNotShowAgain:"Do not show again"},checkboxLabex$2={label:"Enable all"},uploadZoneErrorModal$2={title:"Uploading files error",message:"There were errors processing your file:"},selectedRowsCounter$2={all:"All",selectedRows:"Selected rows: {{selectedRowsCount}}"},versionWarning$2={minor:"Minor version is not match some features might not work. Current - {{currentVersion}} Last - {{lastVersion}}",majorTitle:"Version is not match. App is cannot work",majorSubtitle:"Current - {{currentVersion}}, last - {{lastVersion}}. Please update the app "},newEntity$2={add:"Add new entity",create:"Create new record",clearAllFields:"Clear all fields",success:"Record created successfully",error:"Error occurred",copy:"Copy entity",openNewTable:"Open a new table after the close"},en$1={header:header$7,shared:shared$2,serverUnavailablePage:serverUnavailablePage$2,grid:grid$3,editor:editor$4,gridToolbar:gridToolbar$2,editorToolbar:editorToolbar$2,typeToolbar:typeToolbar$3,buttons:buttons$3,logs:logs$2,unsavedChangeModal:unsavedChangeModal$2,unsavedChangeInfoModal:unsavedChangeInfoModal$2,sendFeedbackModal:sendFeedbackModal$2,logsFilter:logsFilter$2,validationMessage:validationMessage$3,noData:noData$5,auth:auth$2,chat:chat$2,maximizeButton:maximizeButton$2,layoutDirectionButton:layoutDirectionButton$2,recordNavigation:recordNavigation$2,confirmationModal:confirmationModal$2,viewers:viewers$2,queryBuilder:queryBuilder$3,toast:toast$3,reloadApplicationModal:reloadApplicationModal$2,userGuideModal:userGuideModal$2,checkboxLabex:checkboxLabex$2,uploadZoneErrorModal:uploadZoneErrorModal$2,selectedRowsCounter:selectedRowsCounter$2,versionWarning:versionWarning$2,newEntity:newEntity$2},header$6={input:{placeholder:"Find Screen (Ctrl+F)"},tabgroups:{opened:"Opened",tables:"Tables",types:"Types",filters:"Filters",clear:"Clear",filter:"Filter by Type"},userInfo:{theme:{label:"Theme"},language:{label:"Language"},role:"Role",accessLevel:"Access level",build:"Build",versions:"Versions",fullScreenMode:"Full screen mode",secrets:{title:"My Keys",name:"Name",value:"Value",encrypted:"Encrypted",addKey:"ADD KEY",deletingKey:"Deleting Key",deleteModalContent:"You are about to delete {{keyName}} key. This action cannot be undone.",point1:"Your encrypted keys are stored in the browser only",point2:"The server does not cache or store them",point3:"The keys are always encrypted in transit and at rest",point4:"You can delete the keys any time",point5:"They will be deleted automatically after {{expire}} days"},backupAndRestore:{title:"Backup & Restore",export:"Export Database",import:"Import Database"}},theme:{dark:"Dark",light:"Light"},environmentModal:{environment:"Environment"},addEnvironmentModal:{addTitle:"Add"},cancelButton:{tooltip:"Cancel running jobs"},downloadLogs:"Download logs",sendFeedback:"Send feedback",logsFileName:"Logs",record:"Record"},shared$1={copy:"Copy",copied:"Copied",close:"Close",yes:"Yes",no:"No",open:"Open",pleaseReloadPage:"Please Reload the Page",somethingWentWrong:"Something went wrong",notSupported:"Not supported",success:"Success",reloadPage:"Reload page",noRecordsAreSelected:"No records are selected",refresh:"Refresh",filterInputPlaceholder:"Filter here"},serverUnavailablePage$1={title:"Cannot Connect To The Server",subtitle:"Check your internet connectivity and server status",loaderTitle:"Trying To Reconnect"},grid$2={sorting:{asc:"Sort Asc",desc:"Sort Desc",none:"No Sort"},useSearch:"Use the search bar to open a new screen",pressControlF:"Press Ctrl + F to start typing",pleaseContantTheAdministrator:"No data found. Please contact the administrator.",overview:"Overview",columnFilter:{filterPlaceholder:"Start typing to search"},tabs:{main:"Main",closeTab:"Close tab",closeOtherTabs:"Close other tabs",closeAllTabs:"Close all tabs"},recordNavigationModal:{title:"{{handlerName}} result",content:"'{{handlerName}}' has been completed",forRecordKey:" for '{{recordKey}}'",viewResults:". View results?"},pagination:{firstPage:"First page",nextPage:"Next page",previousPage:"Previous page",jumpToPage:"Jump to page",go:"GO"},errorHandler:"Error during task run",successHandler:"Successfully executed task",settings:"Grid settings",cellHeight:"Max cell height",rowBorder:"Row Border"},editor$3={modalHeader:"Select the key",entityModalHeader:"Create Entity",entityExists:"Entity exists",duplicateEntity:"Record with key undefined already exists. Do you want to replace it?",createEntity:"Create new empty record",copyEntity:"Create copy from existing record",openJSONEditor:"JSON Editor",entitySavedSuccessfully:"Entity saved successfully",readonlyHint:"This field cannot be edited",tabs:{data:"Data",newEntity:"New entity",copyEntity:"Copy entity",history:"History",selectType:"Select Type",dag:"Directed Acyclic Graph"},breadcrumbs:{closeAll:"Close all crumbs",moveUp:"Move up",moveDown:"Move down"},listToolbar:{add:"Add array element",remove:"Remove array element",grid:"Grid view",list:"List view",insertRow:"Insert row",moveRowDown:"Move row down",moveRowUp:"Move row up",addValue:"Add value",addVector:"Add vector",insertValue:"Insert value",insertVector:"Insert vector"},modals:{genericTypeEmpty:"Type doesn't have any information"},validation:{containErrors:"Some fields contain errors"},addDagNode:"Add node",edit:"Edit"},gridToolbar$1={layout:"Layout",content:"Content",query:"Query",data:"Data",entity:"Entity",excel:"Excel",history:"Show history",refresh:"Refresh",addNewEntity:"Add new entity",copyEntity:"Copy entity",deleteSelectedEntity:"Delete selected entity",deleteSelectedEntities:"Delete {{numberOfItems}}selected entities",selectAllRecords:"Select all records",deselectAllRecords:"Deselect all records",savePermanentlyEntity:"Save permanently entity",savePermanentlyEntities:"Save permanently {{numberOfItems}}selected entities",chatAbout:"Chat about",export:"Export",json:"JSON",openExcelAddIn:"Export to Excel",openCSV:"Open CSV",restoreDefaultLayout:"Restore default layout",completed:"completed",failed:"failed",stopAll:"Stop All",commonTasks:"Common Tasks",recordTasks:"Record Tasks",settings:"Settings"},editorToolbar$1={json:"Open JSON editor",refresh:"Refresh"},typeToolbar$2={openLogs:" Open notifications",emptyRunHanlers:"No items available",handlerExecutedSuccessfuly:"Completed"},buttons$2={agree:"Agree",cancel:"Cancel",apply:"Apply",save:"Save",connect:"Connect",add:"Add",delete:"Delete",execute:"Execute",ok:"Ok",run:"Run",yes:"Yes",no:"No",send:"Send",proceed:"Proceed",saveAndNext:"Save & Next",saveAndClose:"Save & Close",close:"Close",back:"Back",discard:"Discard"},logs$1={filterByStatus:"Filter by status",search:"Search",handlers:"Tasks",completedHandler:"The task '{{handlerName}}' completed successfully.",failedHandler:"Failed task",notifications:"Notifications",sec:"sec",eraseLogs:"Erase logs",title:"Notifications",errors:"Errors",error:"Error",type:"Type",key:"Key",handler:"Task",taskId:"Task ID",all:"All"},unsavedChangeModal$1={title:"Unsaved Changes",content:"There are unsaved changes. Save now or Cancel to keep editing."},unsavedChangeInfoModal$1={title:"Unsaved Changes Detected",content:"Please save your changes before running the task."},sendFeedbackModal$1={feedback:"Send feedback",warningMessage:"Your message will be sent anonymously. If you'd like us to reply you, please indicate your email address in the mail body.",to:"To",purpose:"Purpose",textareaPlaceholder:"Please describe what you were doing when the error occurred.",subject:"Subject",attachLogs:"Attach Logs"},logsFilter$1={all:"All",debug:"Debug",info:"Info",warning:"Warning",error:"Error",critical:"Critical",submitted:"Submitted",running:"Running",completed:"Completed",failed:"Failed",cancelled:"Cancelled",clear:"Reset filters"},validationMessage$2={invalidEmail:"Please enter a valid email address",fieldRequired:"Field is required",intValue:"Value should be integer",boolValue:"Value should be boolean",dateValue:"Value should be YYYY-MM-DD format",timeValue:"Value should be HH:mm:ss format",dateTimeValue:"Value should be YYYY-MM-DD HH:mm:ss format",emptyTagsArray:"Please specify at least one recipient"},noData$4={inTheReport:"No Data in the Report",refresh:"Refresh",contactAdministrator:"Something went wrong, please reload the page and contact administrator",loading:"Loading",loadingWithDots:"Loading...",details:"Open new screen or try to refresh",noData:"No Data",emptyViewer:"The Viewer is empty",pageNotExist:"Page doesn't exist",returnToPrevPage:"Return to continue using app",return:"Return"},auth$1={login:{actions:{login:"Log In"},username:{placeholder:"Username"},password:{placeholder:"Password"},error:"The username or password is incorrect",divider:"Or continue with",dev:"Dev Login",adLogin:"AD Login: ID-"},logOut:"Log out",error:"Something went wrong, please contact the administrator",backToLogin:"Back to login"},chat$1={newChat:"New Chat",pleaseStartNewChat:"Please start new chat to continue ...",sendMessage:"Send a message ...",cancelRequest:"Processing ... Press Cancel to stop.",loading:"Processing ...",startNewChat:"start new chat",askSomething:"Ask something to start",emptyHistoryTooltip:"No available chats for this topic",historyTooltip:"Chat history",deleteSelectedChats:"delete selected",selectAll:"select all",types:{private:"private chat",internal:"internal chat",encrypted:"encrypted chat"},prompt:"Current Profile",newTypes:{internalAndProfile:"new chat & Profile",private:"new private chat",internal:"new chat",encrypted:"new encrypted chat"},newTooltipTypes:{internalAndProfile:"Start a new chat session & Profile",private:"Start a new private encrypted chat session",internal:"Start a new chat session"},disclaimer:{title:"Disclaimer",paragraph:"By using this software, you consent to the following:",list:["This demo may have trained AI against datasets that may not be complete","Any results obtained from this demonstration need to be carefully considered as feedback from the AI model","Any results may not be used as source data for any other purpose, without independent verification","The results obtained should not be used to automate any business process without a review by the subject matter expert","The results herein shall be deemed confidential and proprietary."]},contentHandlersModal:{title:"Please select the content"}},maximizeButton$1={fullScreen:"Full screen mode",exitFullScreen:"Exit full screen mode",defaultView:"Default view",editorFullScreen:"Expand record view",gridFullScreen:"Expand grid view"},layoutDirectionButton$1={view:"View",verticalLayout:"Split vertically",horizontalLayout:"Split horizontally",horizontalSplit:"Horizontal split",verticalSplit:"Vertical split",gridOnly:"Grid only",dataOnly:"Data only"},recordNavigation$1={record:"Record",prevRecord:"Previous record",moveToTheNext:"Move to the next record",nextRecord:"Next record",moveToThePrev:"Move to the previous record",editRecord:"Edit record",editRecordDescription:"Open JSON editor"},confirmationModal$1={deleteRecords:{addCurrentRecord:"Do you want to add current record to the selection and delete {{numberOfItems}} records?",addTitle:"Do you want to delete current record",title:"Deleting Entities",confirmationTextOneEntity:`This action cannot be undone.
 Are you sure you want to delete selected entity?`,confirmationTexts:`This action cannot be undone.
 Are you sure you want to delete {{numberOfItems}} selected entities?`},executingHandlers:{addCurrentRecord:"Do you want to add current record to the selection and execute {{numberOfItems}} records?",addTitle:"Do you want to execute current record",title:"Confirmation",confirmationTexts:"This will run the task for {{numberOfItems}} records"},restoreLayout:{title:"Restore Default Layout",description:"Restore layout  to the basic view",confirmationText:"All settings that were not saved manually will be discarded. Continue?"},variantSelect:{title:"Variant"},withDependencies:"Save With Dependencies",export:{title:"Confirm",exportEntity_zero:"You are about to export all entities. Continue?",exportEntity_one:"You are about to export {{count}} selected entity. Continue?",exportEntity_other:"You are about to export {{count}} selected entities. Continue?"},savePermanently:{title:"Confirm",exportEntity_zero:"You are about to save all entities. Continue?",exportEntity_one:"You are about to save {{count}} selected entity. Continue?",exportEntity_other:"You are about to save {{count}} selected entities. Continue?"}},viewers$1={pdf:{placeholder:"Enter to search",search:"Search",previousPage:"Previous page",nextPage:"Next page",previousMatch:"Previous match",nextMatch:"Next match"}},queryBuilder$2={customIndex:"Custom",title:"Query",introduction:"Please Select an Index to Display Data",label:"Index",resetAll:"Reset all",apply:"Apply",select:"Select"},toast$2={completed:"completed",failed:"failed",warnings:"warnings",completedUpperCase:"Completed",failedUpperCase:"Failed"},reloadApplicationModal$1={title:"Reload required",content:"Application has been refreshed. Press OK to reload."},userGuideModal$1={title:"User Guide",doNotShowAgain:"Do not show again"},checkboxLabex$1={label:"Enable all"},uploadZoneErrorModal$1={title:"Uploading files error",message:"There were errors processing your file:"},selectedRowsCounter$1={all:"All",selectedRows:"Selected rows: {{selectedRowsCount}}"},versionWarning$1={minor:"Minor version is not match some features might not work. Current - {{currentVersion}} Last - {{lastVersion}}",majorTitle:"Version is not match. App is cannot work",majorSubtitle:"Current - {{currentVersion}}, last - {{lastVersion}}. Please update the app "},newEntity$1={add:"Add new entity",create:"Create new record",clearAllFields:"Clear all fields",success:"Record created successfully",error:"Error occurred",copy:"Copy entity",openNewTable:"Open a new table after the close"},enGB={header:header$6,shared:shared$1,serverUnavailablePage:serverUnavailablePage$1,grid:grid$2,editor:editor$3,gridToolbar:gridToolbar$1,editorToolbar:editorToolbar$1,typeToolbar:typeToolbar$2,buttons:buttons$2,logs:logs$1,unsavedChangeModal:unsavedChangeModal$1,unsavedChangeInfoModal:unsavedChangeInfoModal$1,sendFeedbackModal:sendFeedbackModal$1,logsFilter:logsFilter$1,validationMessage:validationMessage$2,noData:noData$4,auth:auth$1,chat:chat$1,maximizeButton:maximizeButton$1,layoutDirectionButton:layoutDirectionButton$1,recordNavigation:recordNavigation$1,confirmationModal:confirmationModal$1,viewers:viewers$1,queryBuilder:queryBuilder$2,toast:toast$2,reloadApplicationModal:reloadApplicationModal$1,userGuideModal:userGuideModal$1,checkboxLabex:checkboxLabex$1,uploadZoneErrorModal:uploadZoneErrorModal$1,selectedRowsCounter:selectedRowsCounter$1,versionWarning:versionWarning$1,newEntity:newEntity$1},header$5={input:{placeholder:"Find Screen (Ctrl+F)"},tabgroups:{opened:"Opened",tables:"Tables",types:"Types",filters:"Filters",clear:"Clear",filter:"Filter by Type"},userInfo:{theme:{label:"Theme"},language:{label:"Language"},role:"Role",accessLevel:"Access level",build:"Build",versions:"Versions",fullScreenMode:"Full screen mode",secrets:{title:"My Keys",name:"Name",value:"Value",encrypted:"Encrypted",addKey:"ADD KEY",deletingKey:"Deleting Key",deleteModalContent:"You are about to delete {{keyName}} key. This action cannot be undone.",point1:"Your encrypted keys are stored in the browser only",point2:"The server does not cache or store them",point3:"The keys are always encrypted in transit and at rest",point4:"You can delete the keys any time",point5:"They will be deleted automatically after {{expire}} days"},backupAndRestore:{title:"Backup & Restore",export:"Export Database",import:"Import Database"}},theme:{dark:"Dark",light:"Light"},environmentModal:{environment:"Environment"},addEnvironmentModal:{addTitle:"Add"},cancelButton:{tooltip:"Cancel running jobs"},downloadLogs:"Download logs",sendFeedback:"Send feedback",logsFileName:"Logs",record:"Record"},shared={copy:"Copy",copied:"Copied",close:"Close",yes:"Yes",no:"No",open:"Open",pleaseReloadPage:"Please Reload the Page",somethingWentWrong:"Something went wrong",notSupported:"Not supported",success:"Success",reloadPage:"Reload page",noRecordsAreSelected:"No records are selected",refresh:"Refresh",filterInputPlaceholder:"Filter here"},serverUnavailablePage={title:"Cannot Connect To The Server",subtitle:"Check your internet connectivity and server status",loaderTitle:"Trying To Reconnect"},grid$1={sorting:{asc:"Sort Asc",desc:"Sort Desc",none:"No Sort"},useSearch:"Use the search bar to open a new screen",pressControlF:"Press Ctrl + F to start typing",pleaseContantTheAdministrator:"No data found. Please contact the administrator.",overview:"Overview",columnFilter:{filterPlaceholder:"Start typing to search"},tabs:{main:"Main",closeTab:"Close tab",closeOtherTabs:"Close other tabs",closeAllTabs:"Close all tabs"},recordNavigationModal:{title:"{{handlerName}} result",content:"'{{handlerName}}' has been completed",forRecordKey:" for '{{recordKey}}'",viewResults:". View results?"},pagination:{firstPage:"First page",nextPage:"Next page",previousPage:"Previous page",jumpToPage:"Jump to page",go:"GO"},errorHandler:"Error during task run",successHandler:"Successfully executed task",settings:"Grid settings",cellHeight:"Max cell height",rowBorder:"Row Border"},editor$2={modalHeader:"Select the key",entityModalHeader:"Create Entity",entityExists:"Entity exists",duplicateEntity:"Record with key undefined already exists. Do you want to replace it?",createEntity:"Create new empty record",copyEntity:"Create copy from existing record",openJSONEditor:"JSON Editor",entitySavedSuccessfully:"Entity saved successfully",readonlyHint:"This field cannot be edited",tabs:{data:"Data",newEntity:"New entity",copyEntity:"Copy entity",history:"History",selectType:"Select Type",dag:"Directed Acyclic Graph"},breadcrumbs:{closeAll:"Close all crumbs",moveUp:"Move up",moveDown:"Move down"},listToolbar:{add:"Add array element",remove:"Remove array element",grid:"Grid view",list:"List view",insertRow:"Insert row",moveRowDown:"Move row down",moveRowUp:"Move row up",addValue:"Add value",addVector:"Add vector",insertValue:"Insert value",insertVector:"Insert vector"},modals:{genericTypeEmpty:"Type doesn't have any information"},validation:{containErrors:"Some fields contain errors"},addDagNode:"Add node",edit:"Edit"},gridToolbar={layout:"Layout",content:"Content",query:"Query",data:"Data",entity:"Entity",excel:"Excel",history:"Show history",refresh:"Refresh",addNewEntity:"Add new entity",copyEntity:"Copy entity",deleteSelectedEntity:"Delete selected entity",deleteSelectedEntities:"Delete {{numberOfItems}}selected entities",selectAllRecords:"Select all records",deselectAllRecords:"Deselect all records",savePermanentlyEntity:"Save permanently entity",savePermanentlyEntities:"Save permanently {{numberOfItems}}selected entities",chatAbout:"Chat about",export:"Export",json:"JSON",openExcelAddIn:"Export to Excel",openCSV:"Open CSV",restoreDefaultLayout:"Restore default layout",completed:"completed",failed:"failed",stopAll:"Stop All",commonTasks:"Common Tasks",recordTasks:"Record Tasks",settings:"Settings"},editorToolbar={json:"Open JSON editor",refresh:"Refresh"},typeToolbar$1={openLogs:" Open notifications",emptyRunHanlers:"No items available",handlerExecutedSuccessfuly:"Completed"},buttons$1={agree:"Agree",cancel:"Cancel",apply:"Apply",save:"Save",connect:"Connect",add:"Add",delete:"Delete",execute:"Execute",ok:"Ok",run:"Run",yes:"Yes",no:"No",send:"Send",proceed:"Proceed",saveAndNext:"Save & Next",saveAndClose:"Save & Close",close:"Close",back:"Back",discard:"Discard"},logs={filterByStatus:"Filter by status",search:"Search",handlers:"Tasks",completedHandler:"The task '{{handlerName}}' completed successfully.",failedHandler:"Failed task",notifications:"Notifications",sec:"sec",eraseLogs:"Erase logs",title:"Notifications",errors:"Errors",error:"Error",type:"Type",key:"Key",handler:"Task",taskId:"Task ID",all:"All"},unsavedChangeModal={title:"Unsaved Changes",content:"There are unsaved changes. Save now or Cancel to keep editing."},unsavedChangeInfoModal={title:"Unsaved Changes Detected",content:"Please save your changes before running the task."},sendFeedbackModal={feedback:"Send feedback",warningMessage:"Your message will be sent anonymously. If you'd like us to reply you, please indicate your email address in the mail body.",to:"To",purpose:"Purpose",textareaPlaceholder:"Please describe what you were doing when the error occurred.",subject:"Subject",attachLogs:"Attach Logs"},logsFilter={all:"All",debug:"Debug",info:"Info",warning:"Warning",error:"Error",critical:"Critical",submitted:"Submitted",running:"Running",completed:"Completed",failed:"Failed",cancelled:"Cancelled",clear:"Reset filters"},validationMessage$1={invalidEmail:"Please enter a valid email address",fieldRequired:"Field is required",intValue:"Value should be integer",boolValue:"Value should be boolean",dateValue:"Value should be YYYY-MM-DD format",timeValue:"Value should be HH:mm:ss format",dateTimeValue:"Value should be YYYY-MM-DD HH:mm:ss format",emptyTagsArray:"Please specify at least one recipient"},noData$3={inTheReport:"No Data in the Report",refresh:"Refresh",contactAdministrator:"Something went wrong, please reload the page and contact administrator",loading:"Loading",loadingWithDots:"Loading...",details:"Open new screen or try to refresh",noData:"No Data",emptyViewer:"The Viewer is empty",pageNotExist:"Page doesn't exist",returnToPrevPage:"Return to continue using app",return:"Return"},auth={login:{actions:{login:"Log In"},username:{placeholder:"Username"},password:{placeholder:"Password"},error:"The username or password is incorrect",divider:"Or continue with",dev:"Dev Login",adLogin:"AD Login: ID-"},logOut:"Log out",error:"Something went wrong, please contact the administrator",backToLogin:"Back to login"},chat={newChat:"New Chat",pleaseStartNewChat:"Please start new chat to continue ...",sendMessage:"Send a message ...",cancelRequest:"Processing ... Press Cancel to stop.",loading:"Processing ...",startNewChat:"start new chat",askSomething:"Ask something to start",emptyHistoryTooltip:"No available chats for this topic",historyTooltip:"Chat history",deleteSelectedChats:"delete selected",selectAll:"select all",types:{private:"private chat",internal:"internal chat",encrypted:"encrypted chat"},prompt:"Current Profile",newTypes:{internalAndProfile:"new chat & Profile",private:"new private chat",internal:"new chat",encrypted:"new encrypted chat"},newTooltipTypes:{internalAndProfile:"Start a new chat session & Profile",private:"Start a new private encrypted chat session",internal:"Start a new chat session"},disclaimer:{title:"Disclaimer",paragraph:"By using this software, you consent to the following:",list:["This demo may have trained AI against datasets that may not be complete","Any results obtained from this demonstration need to be carefully considered as feedback from the AI model","Any results may not be used as source data for any other purpose, without independent verification","The results obtained should not be used to automate any business process without a review by the subject matter expert","The results herein shall be deemed confidential and proprietary."]},contentHandlersModal:{title:"Please select the content"}},maximizeButton={fullScreen:"Full screen mode",exitFullScreen:"Exit full screen mode",defaultView:"Default view",editorFullScreen:"Expand record view",gridFullScreen:"Expand grid view"},layoutDirectionButton={view:"View",verticalLayout:"Split vertically",horizontalLayout:"Split horizontally",horizontalSplit:"Horizontal split",verticalSplit:"Vertical split",gridOnly:"Grid only",dataOnly:"Data only"},recordNavigation={record:"Record",prevRecord:"Previous record",moveToTheNext:"Move to the next record",nextRecord:"Next record",moveToThePrev:"Move to the previous record",editRecord:"Edit record",editRecordDescription:"Open JSON editor"},confirmationModal={deleteRecords:{addCurrentRecord:"Do you want to add current record to the selection and delete {{numberOfItems}} records?",addTitle:"Do you want to delete current record",title:"Deleting Entities",confirmationTextOneEntity:`This action cannot be undone.
 Are you sure you want to delete selected entity?`,confirmationTexts:`This action cannot be undone.
 Are you sure you want to delete {{numberOfItems}} selected entities?`},executingHandlers:{addCurrentRecord:"Do you want to add current record to the selection and execute {{numberOfItems}} records?",addTitle:"Do you want to execute current record",title:"Confirmation",confirmationTexts:"This will run the task for {{numberOfItems}} records"},restoreLayout:{title:"Restore Default Layout",description:"Restore layout  to the basic view",confirmationText:"All settings that were not saved manually will be discarded. Continue?"},variantSelect:{title:"Variant"},withDependencies:"Save With Dependencies",export:{title:"Confirm",exportEntity_zero:"You are about to export all entities. Continue?",exportEntity_one:"You are about to export {{count}} selected entity. Continue?",exportEntity_other:"You are about to export {{count}} selected entities. Continue?"},savePermanently:{title:"Confirm",exportEntity_zero:"You are about to save all entities. Continue?",exportEntity_one:"You are about to save {{count}} selected entity. Continue?",exportEntity_other:"You are about to save {{count}} selected entities. Continue?"}},viewers={pdf:{placeholder:"Enter to search",search:"Search",previousPage:"Previous page",nextPage:"Next page",previousMatch:"Previous match",nextMatch:"Next match"}},queryBuilder$1={customIndex:"Custom",title:"Query",introduction:"Please Select an Index to Display Data",label:"Index",resetAll:"Reset all",apply:"Apply",select:"Select"},toast$1={completed:"completed",failed:"failed",warnings:"warnings",completedUpperCase:"Completed",failedUpperCase:"Failed"},reloadApplicationModal={title:"Reload required",content:"Application has been refreshed. Press OK to reload."},userGuideModal={title:"User Guide",doNotShowAgain:"Do not show again"},checkboxLabex={label:"Enable all"},uploadZoneErrorModal={title:"Uploading files error",message:"There were errors processing your file:"},selectedRowsCounter={all:"All",selectedRows:"Selected rows: {{selectedRowsCount}}"},versionWarning={minor:"Minor version is not match some features might not work. Current - {{currentVersion}} Last - {{lastVersion}}",majorTitle:"Version is not match. App is cannot work",majorSubtitle:"Current - {{currentVersion}}, last - {{lastVersion}}. Please update the app "},newEntity={add:"Add new entity",create:"Create new record",clearAllFields:"Clear all fields",success:"Record created successfully",error:"Error occurred",copy:"Copy entity",openNewTable:"Open a new table after the close"},enUS={header:header$5,shared,serverUnavailablePage,grid:grid$1,editor:editor$2,gridToolbar,editorToolbar,typeToolbar:typeToolbar$1,buttons:buttons$1,logs,unsavedChangeModal,unsavedChangeInfoModal,sendFeedbackModal,logsFilter,validationMessage:validationMessage$1,noData:noData$3,auth,chat,maximizeButton,layoutDirectionButton,recordNavigation,confirmationModal,viewers,queryBuilder:queryBuilder$1,toast:toast$1,reloadApplicationModal,userGuideModal,checkboxLabex,uploadZoneErrorModal,selectedRowsCounter,versionWarning,newEntity};instance.use(initReactI18next).init({resources:{en:{translation:en$1},enGB:{translation:enGB},enUS:{translation:enUS}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var createRoot,m$5=reactDomExports;createRoot=m$5.createRoot,m$5.hydrateRoot;var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$3=reactExports;function h$6(K,J){return K===J&&(K!==0||1/K===1/J)||K!==K&&J!==J}var k$5=typeof Object.is=="function"?Object.is:h$6,l$4=e$3.useState,m$4=e$3.useEffect,n$4=e$3.useLayoutEffect,p$5=e$3.useDebugValue;function q$5(K,J){var ne=J(),oe=l$4({inst:{value:ne,getSnapshot:J}}),ce=oe[0].inst,ue=oe[1];return n$4(function(){ce.value=ne,ce.getSnapshot=J,r$5(ce)&&ue({inst:ce})},[K,ne,J]),m$4(function(){return r$5(ce)&&ue({inst:ce}),K(function(){r$5(ce)&&ue({inst:ce})})},[K]),p$5(ne),ne}function r$5(K){var J=K.getSnapshot;K=K.value;try{var ne=J();return!k$5(K,ne)}catch{return!0}}function t$4(K,J){return J()}var u$5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$4:q$5;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$3.useSyncExternalStore!==void 0?e$3.useSyncExternalStore:u$5;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports,withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$5=reactExports,n$3=shimExports;function p$4(K,J){return K===J&&(K!==0||1/K===1/J)||K!==K&&J!==J}var q$4=typeof Object.is=="function"?Object.is:p$4,r$4=n$3.useSyncExternalStore,t$3=h$5.useRef,u$4=h$5.useEffect,v$5=h$5.useMemo,w$2=h$5.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(K,J,ne,oe,ce){var ue=t$3(null);if(ue.current===null){var Ae={hasValue:!1,value:null};ue.current=Ae}else Ae=ue.current;ue=v$5(function(){function ve(_e){if(!me){if(me=!0,ge=_e,_e=oe(_e),ce!==void 0&&Ae.hasValue){var $e=Ae.value;if(ce($e,_e))return ye=$e}return ye=_e}if($e=ye,q$4(ge,_e))return $e;var Ie=oe(_e);return ce!==void 0&&ce($e,Ie)?$e:(ge=_e,ye=Ie)}var me=!1,ge,ye,xe=ne===void 0?null:ne;return[function(){return ve(J())},xe===null?void 0:function(){return ve(xe())}]},[J,ne,oe,ce]);var pe=r$4(K,ue[0],ue[1]);return u$4(function(){Ae.hasValue=!0,Ae.value=pe},[pe]),w$2(pe),pe};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports);function defaultNoopBatch(K){K()}let batch=defaultNoopBatch;const setBatch=K=>batch=K,getBatch=()=>batch,ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){var K;if(!reactExports.createContext)return{};const J=(K=gT[ContextKey])!=null?K:gT[ContextKey]=new Map;let ne=J.get(reactExports.createContext);return ne||(ne=reactExports.createContext(null),J.set(reactExports.createContext,ne)),ne}const ReactReduxContext=getContext();function createReduxContextHook(K=ReactReduxContext){return function(){return reactExports.useContext(K)}}const useReduxContext=createReduxContextHook(),notInitialized=()=>{throw new Error("uSES not initialized!")};let useSyncExternalStoreWithSelector$1=notInitialized;const initializeUseSelector=K=>{useSyncExternalStoreWithSelector$1=K},refEquality=(K,J)=>K===J;function createSelectorHook(K=ReactReduxContext){const J=K===ReactReduxContext?useReduxContext:createReduxContextHook(K);return function(oe,ce={}){const{equalityFn:ue=refEquality,stabilityCheck:Ae=void 0,noopCheck:pe=void 0}=typeof ce=="function"?{equalityFn:ce}:ce,{store:ve,subscription:me,getServerState:ge,stabilityCheck:ye,noopCheck:xe}=J();reactExports.useRef(!0);const _e=reactExports.useCallback({[oe.name](Ie){return oe(Ie)}}[oe.name],[oe,ye,Ae]),$e=useSyncExternalStoreWithSelector$1(me.addNestedSub,ve.getState,ge||ve.getState,_e,ue);return reactExports.useDebugValue($e),$e}}const useSelector$1=createSelectorHook();function _objectWithoutPropertiesLoose$2(K,J){if(K==null)return{};var ne={};for(var oe in K)if({}.hasOwnProperty.call(K,oe)){if(J.indexOf(oe)!==-1)continue;ne[oe]=K[oe]}return ne}var reactIs$2={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$3=typeof Symbol=="function"&&Symbol.for,c$2=b$3?Symbol.for("react.element"):60103,d$3=b$3?Symbol.for("react.portal"):60106,e$2=b$3?Symbol.for("react.fragment"):60107,f$6=b$3?Symbol.for("react.strict_mode"):60108,g$3=b$3?Symbol.for("react.profiler"):60114,h$4=b$3?Symbol.for("react.provider"):60109,k$4=b$3?Symbol.for("react.context"):60110,l$3=b$3?Symbol.for("react.async_mode"):60111,m$3=b$3?Symbol.for("react.concurrent_mode"):60111,n$2=b$3?Symbol.for("react.forward_ref"):60112,p$3=b$3?Symbol.for("react.suspense"):60113,q$3=b$3?Symbol.for("react.suspense_list"):60120,r$3=b$3?Symbol.for("react.memo"):60115,t$2=b$3?Symbol.for("react.lazy"):60116,v$4=b$3?Symbol.for("react.block"):60121,w$1=b$3?Symbol.for("react.fundamental"):60117,x$1=b$3?Symbol.for("react.responder"):60118,y$2=b$3?Symbol.for("react.scope"):60119;function z$3(K){if(typeof K=="object"&&K!==null){var J=K.$$typeof;switch(J){case c$2:switch(K=K.type,K){case l$3:case m$3:case e$2:case g$3:case f$6:case p$3:return K;default:switch(K=K&&K.$$typeof,K){case k$4:case n$2:case t$2:case r$3:case h$4:return K;default:return J}}case d$3:return J}}}function A$4(K){return z$3(K)===m$3}reactIs_production_min$1.AsyncMode=l$3;reactIs_production_min$1.ConcurrentMode=m$3;reactIs_production_min$1.ContextConsumer=k$4;reactIs_production_min$1.ContextProvider=h$4;reactIs_production_min$1.Element=c$2;reactIs_production_min$1.ForwardRef=n$2;reactIs_production_min$1.Fragment=e$2;reactIs_production_min$1.Lazy=t$2;reactIs_production_min$1.Memo=r$3;reactIs_production_min$1.Portal=d$3;reactIs_production_min$1.Profiler=g$3;reactIs_production_min$1.StrictMode=f$6;reactIs_production_min$1.Suspense=p$3;reactIs_production_min$1.isAsyncMode=function(K){return A$4(K)||z$3(K)===l$3};reactIs_production_min$1.isConcurrentMode=A$4;reactIs_production_min$1.isContextConsumer=function(K){return z$3(K)===k$4};reactIs_production_min$1.isContextProvider=function(K){return z$3(K)===h$4};reactIs_production_min$1.isElement=function(K){return typeof K=="object"&&K!==null&&K.$$typeof===c$2};reactIs_production_min$1.isForwardRef=function(K){return z$3(K)===n$2};reactIs_production_min$1.isFragment=function(K){return z$3(K)===e$2};reactIs_production_min$1.isLazy=function(K){return z$3(K)===t$2};reactIs_production_min$1.isMemo=function(K){return z$3(K)===r$3};reactIs_production_min$1.isPortal=function(K){return z$3(K)===d$3};reactIs_production_min$1.isProfiler=function(K){return z$3(K)===g$3};reactIs_production_min$1.isStrictMode=function(K){return z$3(K)===f$6};reactIs_production_min$1.isSuspense=function(K){return z$3(K)===p$3};reactIs_production_min$1.isValidElementType=function(K){return typeof K=="string"||typeof K=="function"||K===e$2||K===m$3||K===g$3||K===f$6||K===p$3||K===q$3||typeof K=="object"&&K!==null&&(K.$$typeof===t$2||K.$$typeof===r$3||K.$$typeof===h$4||K.$$typeof===k$4||K.$$typeof===n$2||K.$$typeof===w$1||K.$$typeof===x$1||K.$$typeof===y$2||K.$$typeof===v$4)};reactIs_production_min$1.typeOf=z$3;reactIs$2.exports=reactIs_production_min$1;var reactIsExports$1=reactIs$2.exports,reactIs$1=reactIsExports$1,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs$1.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs$1.Memo]=MEMO_STATICS;function getStatics(K){return reactIs$1.isMemo(K)?MEMO_STATICS:TYPE_STATICS[K.$$typeof]||REACT_STATICS}var defineProperty$1=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf$1=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(K,J,ne){if(typeof J!="string"){if(objectPrototype){var oe=getPrototypeOf$1(J);oe&&oe!==objectPrototype&&hoistNonReactStatics(K,oe,ne)}var ce=getOwnPropertyNames(J);getOwnPropertySymbols&&(ce=ce.concat(getOwnPropertySymbols(J)));for(var ue=getStatics(K),Ae=getStatics(J),pe=0;pe<ce.length;++pe){var ve=ce[pe];if(!KNOWN_STATICS[ve]&&!(ne&&ne[ve])&&!(Ae&&Ae[ve])&&!(ue&&ue[ve])){var me=getOwnPropertyDescriptor(J,ve);try{defineProperty$1(K,ve,me)}catch{}}}}return K}var hoistNonReactStatics_cjs=hoistNonReactStatics;const hoistStatics=getDefaultExportFromCjs(hoistNonReactStatics_cjs);var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=Symbol.for("react.element"),c$1=Symbol.for("react.portal"),d$2=Symbol.for("react.fragment"),e$1=Symbol.for("react.strict_mode"),f$5=Symbol.for("react.profiler"),g$2=Symbol.for("react.provider"),h$3=Symbol.for("react.context"),k$3=Symbol.for("react.server_context"),l$2=Symbol.for("react.forward_ref"),m$2=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$2=Symbol.for("react.memo"),q$2=Symbol.for("react.lazy"),t$1=Symbol.for("react.offscreen"),u$3;u$3=Symbol.for("react.module.reference");function v$3(K){if(typeof K=="object"&&K!==null){var J=K.$$typeof;switch(J){case b$2:switch(K=K.type,K){case d$2:case f$5:case e$1:case m$2:case n$1:return K;default:switch(K=K&&K.$$typeof,K){case k$3:case h$3:case l$2:case q$2:case p$2:case g$2:return K;default:return J}}case c$1:return J}}}reactIs_production_min.ContextConsumer=h$3;reactIs_production_min.ContextProvider=g$2;reactIs_production_min.Element=b$2;reactIs_production_min.ForwardRef=l$2;reactIs_production_min.Fragment=d$2;reactIs_production_min.Lazy=q$2;reactIs_production_min.Memo=p$2;reactIs_production_min.Portal=c$1;reactIs_production_min.Profiler=f$5;reactIs_production_min.StrictMode=e$1;reactIs_production_min.Suspense=m$2;reactIs_production_min.SuspenseList=n$1;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(K){return v$3(K)===h$3};reactIs_production_min.isContextProvider=function(K){return v$3(K)===g$2};reactIs_production_min.isElement=function(K){return typeof K=="object"&&K!==null&&K.$$typeof===b$2};reactIs_production_min.isForwardRef=function(K){return v$3(K)===l$2};reactIs_production_min.isFragment=function(K){return v$3(K)===d$2};reactIs_production_min.isLazy=function(K){return v$3(K)===q$2};reactIs_production_min.isMemo=function(K){return v$3(K)===p$2};reactIs_production_min.isPortal=function(K){return v$3(K)===c$1};reactIs_production_min.isProfiler=function(K){return v$3(K)===f$5};reactIs_production_min.isStrictMode=function(K){return v$3(K)===e$1};reactIs_production_min.isSuspense=function(K){return v$3(K)===m$2};reactIs_production_min.isSuspenseList=function(K){return v$3(K)===n$1};reactIs_production_min.isValidElementType=function(K){return typeof K=="string"||typeof K=="function"||K===d$2||K===f$5||K===e$1||K===m$2||K===n$1||K===t$1||typeof K=="object"&&K!==null&&(K.$$typeof===q$2||K.$$typeof===p$2||K.$$typeof===g$2||K.$$typeof===h$3||K.$$typeof===l$2||K.$$typeof===u$3||K.getModuleId!==void 0)};reactIs_production_min.typeOf=v$3;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports;const _excluded$3=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function pureFinalPropsSelectorFactory(K,J,ne,oe,{areStatesEqual:ce,areOwnPropsEqual:ue,areStatePropsEqual:Ae}){let pe=!1,ve,me,ge,ye,xe;function _e(je,We){return ve=je,me=We,ge=K(ve,me),ye=J(oe,me),xe=ne(ge,ye,me),pe=!0,xe}function $e(){return ge=K(ve,me),J.dependsOnOwnProps&&(ye=J(oe,me)),xe=ne(ge,ye,me),xe}function Ie(){return K.dependsOnOwnProps&&(ge=K(ve,me)),J.dependsOnOwnProps&&(ye=J(oe,me)),xe=ne(ge,ye,me),xe}function Fe(){const je=K(ve,me),We=!Ae(je,ge);return ge=je,We&&(xe=ne(ge,ye,me)),xe}function ke(je,We){const ze=!ue(We,me),Xe=!ce(je,ve,We,me);return ve=je,me=We,ze&&Xe?$e():ze?Ie():Xe?Fe():xe}return function(We,ze){return pe?ke(We,ze):_e(We,ze)}}function finalPropsSelectorFactory(K,J){let{initMapStateToProps:ne,initMapDispatchToProps:oe,initMergeProps:ce}=J,ue=_objectWithoutPropertiesLoose$2(J,_excluded$3);const Ae=ne(K,ue),pe=oe(K,ue),ve=ce(K,ue);return pureFinalPropsSelectorFactory(Ae,pe,ve,K,ue)}function bindActionCreators$1(K,J){const ne={};for(const oe in K){const ce=K[oe];typeof ce=="function"&&(ne[oe]=(...ue)=>J(ce(...ue)))}return ne}function wrapMapToPropsConstant(K){return function(ne){const oe=K(ne);function ce(){return oe}return ce.dependsOnOwnProps=!1,ce}}function getDependsOnOwnProps(K){return K.dependsOnOwnProps?!!K.dependsOnOwnProps:K.length!==1}function wrapMapToPropsFunc(K,J){return function(oe,{displayName:ce}){const ue=function(pe,ve){return ue.dependsOnOwnProps?ue.mapToProps(pe,ve):ue.mapToProps(pe,void 0)};return ue.dependsOnOwnProps=!0,ue.mapToProps=function(pe,ve){ue.mapToProps=K,ue.dependsOnOwnProps=getDependsOnOwnProps(K);let me=ue(pe,ve);return typeof me=="function"&&(ue.mapToProps=me,ue.dependsOnOwnProps=getDependsOnOwnProps(me),me=ue(pe,ve)),me},ue}}function createInvalidArgFactory(K,J){return(ne,oe)=>{throw new Error(`Invalid value of type ${typeof K} for ${J} argument when connecting component ${oe.wrappedComponentName}.`)}}function mapDispatchToPropsFactory(K){return K&&typeof K=="object"?wrapMapToPropsConstant(J=>bindActionCreators$1(K,J)):K?typeof K=="function"?wrapMapToPropsFunc(K):createInvalidArgFactory(K,"mapDispatchToProps"):wrapMapToPropsConstant(J=>({dispatch:J}))}function mapStateToPropsFactory(K){return K?typeof K=="function"?wrapMapToPropsFunc(K):createInvalidArgFactory(K,"mapStateToProps"):wrapMapToPropsConstant(()=>({}))}function defaultMergeProps(K,J,ne){return _extends({},ne,K,J)}function wrapMergePropsFunc(K){return function(ne,{displayName:oe,areMergedPropsEqual:ce}){let ue=!1,Ae;return function(ve,me,ge){const ye=K(ve,me,ge);return ue?ce(ye,Ae)||(Ae=ye):(ue=!0,Ae=ye),Ae}}}function mergePropsFactory(K){return K?typeof K=="function"?wrapMergePropsFunc(K):createInvalidArgFactory(K,"mergeProps"):()=>defaultMergeProps}function createListenerCollection(){const K=getBatch();let J=null,ne=null;return{clear(){J=null,ne=null},notify(){K(()=>{let oe=J;for(;oe;)oe.callback(),oe=oe.next})},get(){let oe=[],ce=J;for(;ce;)oe.push(ce),ce=ce.next;return oe},subscribe(oe){let ce=!0,ue=ne={callback:oe,next:null,prev:ne};return ue.prev?ue.prev.next=ue:J=ue,function(){!ce||J===null||(ce=!1,ue.next?ue.next.prev=ue.prev:ne=ue.prev,ue.prev?ue.prev.next=ue.next:J=ue.next)}}}}const nullListeners={notify(){},get:()=>[]};function createSubscription(K,J){let ne,oe=nullListeners,ce=0,ue=!1;function Ae(Ie){ge();const Fe=oe.subscribe(Ie);let ke=!1;return()=>{ke||(ke=!0,Fe(),ye())}}function pe(){oe.notify()}function ve(){$e.onStateChange&&$e.onStateChange()}function me(){return ue}function ge(){ce++,ne||(ne=J?J.addNestedSub(ve):K.subscribe(ve),oe=createListenerCollection())}function ye(){ce--,ne&&ce===0&&(ne(),ne=void 0,oe.clear(),oe=nullListeners)}function xe(){ue||(ue=!0,ge())}function _e(){ue&&(ue=!1,ye())}const $e={addNestedSub:Ae,notifyNestedSubs:pe,handleChangeWrapper:ve,isSubscribed:me,trySubscribe:xe,tryUnsubscribe:_e,getListeners:()=>oe};return $e}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect$4=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function is(K,J){return K===J?K!==0||J!==0||1/K===1/J:K!==K&&J!==J}function shallowEqual(K,J){if(is(K,J))return!0;if(typeof K!="object"||K===null||typeof J!="object"||J===null)return!1;const ne=Object.keys(K),oe=Object.keys(J);if(ne.length!==oe.length)return!1;for(let ce=0;ce<ne.length;ce++)if(!Object.prototype.hasOwnProperty.call(J,ne[ce])||!is(K[ne[ce]],J[ne[ce]]))return!1;return!0}const _excluded$2=["reactReduxForwardedRef"];let useSyncExternalStore=notInitialized;const initializeConnect=K=>{useSyncExternalStore=K},NO_SUBSCRIPTION_ARRAY=[null,null];function useIsomorphicLayoutEffectWithArgs(K,J,ne){useIsomorphicLayoutEffect$4(()=>K(...J),ne)}function captureWrapperProps(K,J,ne,oe,ce,ue){K.current=oe,ne.current=!1,ce.current&&(ce.current=null,ue())}function subscribeUpdates(K,J,ne,oe,ce,ue,Ae,pe,ve,me,ge){if(!K)return()=>{};let ye=!1,xe=null;const _e=()=>{if(ye||!pe.current)return;const Ie=J.getState();let Fe,ke;try{Fe=oe(Ie,ce.current)}catch(je){ke=je,xe=je}ke||(xe=null),Fe===ue.current?Ae.current||me():(ue.current=Fe,ve.current=Fe,Ae.current=!0,ge())};return ne.onStateChange=_e,ne.trySubscribe(),_e(),()=>{if(ye=!0,ne.tryUnsubscribe(),ne.onStateChange=null,xe)throw xe}}function strictEqual(K,J){return K===J}function connect(K,J,ne,{pure:oe,areStatesEqual:ce=strictEqual,areOwnPropsEqual:ue=shallowEqual,areStatePropsEqual:Ae=shallowEqual,areMergedPropsEqual:pe=shallowEqual,forwardRef:ve=!1,context:me=ReactReduxContext}={}){const ge=me,ye=mapStateToPropsFactory(K),xe=mapDispatchToPropsFactory(J),_e=mergePropsFactory(ne),$e=!!K;return Fe=>{const ke=Fe.displayName||Fe.name||"Component",je=`Connect(${ke})`,We={shouldHandleStateChanges:$e,displayName:je,wrappedComponentName:ke,WrappedComponent:Fe,initMapStateToProps:ye,initMapDispatchToProps:xe,initMergeProps:_e,areStatesEqual:ce,areStatePropsEqual:Ae,areOwnPropsEqual:ue,areMergedPropsEqual:pe};function ze(nt){const[et,tt,st]=reactExports.useMemo(()=>{const{reactReduxForwardedRef:wt}=nt,Et=_objectWithoutPropertiesLoose$2(nt,_excluded$2);return[nt.context,wt,Et]},[nt]),qe=reactExports.useMemo(()=>et&&et.Consumer&&reactIsExports.isContextConsumer(reactExports.createElement(et.Consumer,null))?et:ge,[et,ge]),Se=reactExports.useContext(qe),Re=!!nt.store&&!!nt.store.getState&&!!nt.store.dispatch,Be=!!Se&&!!Se.store,Ne=Re?nt.store:Se.store,Ue=Be?Se.getServerState:Ne.getState,Ge=reactExports.useMemo(()=>finalPropsSelectorFactory(Ne.dispatch,We),[Ne]),[Ye,Qe]=reactExports.useMemo(()=>{if(!$e)return NO_SUBSCRIPTION_ARRAY;const wt=createSubscription(Ne,Re?void 0:Se.subscription),Et=wt.notifyNestedSubs.bind(wt);return[wt,Et]},[Ne,Re,Se]),Te=reactExports.useMemo(()=>Re?Se:_extends({},Se,{subscription:Ye}),[Re,Se,Ye]),Ke=reactExports.useRef(),rt=reactExports.useRef(st),it=reactExports.useRef(),at=reactExports.useRef(!1);reactExports.useRef(!1);const lt=reactExports.useRef(!1),ct=reactExports.useRef();useIsomorphicLayoutEffect$4(()=>(lt.current=!0,()=>{lt.current=!1}),[]);const ot=reactExports.useMemo(()=>()=>it.current&&st===rt.current?it.current:Ge(Ne.getState(),st),[Ne,st]),ft=reactExports.useMemo(()=>Et=>Ye?subscribeUpdates($e,Ne,Ye,Ge,rt,Ke,at,lt,it,Qe,Et):()=>{},[Ye]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[rt,Ke,at,st,it,Qe]);let dt;try{dt=useSyncExternalStore(ft,ot,Ue?()=>Ge(Ue(),st):ot)}catch(wt){throw ct.current&&(wt.message+=`
The error may be correlated with this previous error:
${ct.current.stack}

`),wt}useIsomorphicLayoutEffect$4(()=>{ct.current=void 0,it.current=void 0,Ke.current=dt});const mt=reactExports.useMemo(()=>reactExports.createElement(Fe,_extends({},dt,{ref:tt})),[tt,Fe,dt]);return reactExports.useMemo(()=>$e?reactExports.createElement(qe.Provider,{value:Te},mt):mt,[qe,mt,Te])}const Je=reactExports.memo(ze);if(Je.WrappedComponent=Fe,Je.displayName=ze.displayName=je,ve){const et=reactExports.forwardRef(function(st,qe){return reactExports.createElement(Je,_extends({},st,{reactReduxForwardedRef:qe}))});return et.displayName=je,et.WrappedComponent=Fe,hoistStatics(et,Fe)}return hoistStatics(Je,Fe)}}function Provider$2({store:K,context:J,children:ne,serverState:oe,stabilityCheck:ce="once",noopCheck:ue="once"}){const Ae=reactExports.useMemo(()=>{const me=createSubscription(K);return{store:K,subscription:me,getServerState:oe?()=>oe:void 0,stabilityCheck:ce,noopCheck:ue}},[K,oe,ce,ue]),pe=reactExports.useMemo(()=>K.getState(),[K]);useIsomorphicLayoutEffect$4(()=>{const{subscription:me}=Ae;return me.onStateChange=me.notifyNestedSubs,me.trySubscribe(),pe!==K.getState()&&me.notifyNestedSubs(),()=>{me.tryUnsubscribe(),me.onStateChange=void 0}},[Ae,pe]);const ve=J||ReactReduxContext;return reactExports.createElement(ve.Provider,{value:Ae},ne)}function createStoreHook(K=ReactReduxContext){const J=K===ReactReduxContext?useReduxContext:createReduxContextHook(K);return function(){const{store:oe}=J();return oe}}const useStore$1=createStoreHook();function createDispatchHook(K=ReactReduxContext){const J=K===ReactReduxContext?useStore$1:createStoreHook(K);return function(){return J().dispatch}}const useDispatch$1=createDispatchHook();initializeUseSelector(withSelectorExports.useSyncExternalStoreWithSelector);initializeConnect(shimExports.useSyncExternalStore);setBatch(reactDomExports.unstable_batchedUpdates);function n(K){for(var J=arguments.length,ne=Array(J>1?J-1:0),oe=1;oe<J;oe++)ne[oe-1]=arguments[oe];throw Error("[Immer] minified error nr: "+K+(ne.length?" "+ne.map(function(ce){return"'"+ce+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r$2(K){return!!K&&!!K[Q$1]}function t(K){var J;return!!K&&(function(ne){if(!ne||typeof ne!="object")return!1;var oe=Object.getPrototypeOf(ne);if(oe===null)return!0;var ce=Object.hasOwnProperty.call(oe,"constructor")&&oe.constructor;return ce===Object||typeof ce=="function"&&Function.toString.call(ce)===Z$3}(K)||Array.isArray(K)||!!K[L$3]||!!(!((J=K.constructor)===null||J===void 0)&&J[L$3])||s$1(K)||v$2(K))}function i$5(K,J,ne){ne===void 0&&(ne=!1),o(K)===0?(ne?Object.keys:nn)(K).forEach(function(oe){ne&&typeof oe=="symbol"||J(oe,K[oe],K)}):K.forEach(function(oe,ce){return J(ce,oe,K)})}function o(K){var J=K[Q$1];return J?J.i>3?J.i-4:J.i:Array.isArray(K)?1:s$1(K)?2:v$2(K)?3:0}function u$2(K,J){return o(K)===2?K.has(J):Object.prototype.hasOwnProperty.call(K,J)}function a$1(K,J){return o(K)===2?K.get(J):K[J]}function f$4(K,J,ne){var oe=o(K);oe===2?K.set(J,ne):oe===3?K.add(ne):K[J]=ne}function c(K,J){return K===J?K!==0||1/K==1/J:K!=K&&J!=J}function s$1(K){return X$1&&K instanceof Map}function v$2(K){return q$1&&K instanceof Set}function p$1(K){return K.o||K.t}function l$1(K){if(Array.isArray(K))return Array.prototype.slice.call(K);var J=rn(K);delete J[Q$1];for(var ne=nn(J),oe=0;oe<ne.length;oe++){var ce=ne[oe],ue=J[ce];ue.writable===!1&&(ue.writable=!0,ue.configurable=!0),(ue.get||ue.set)&&(J[ce]={configurable:!0,writable:!0,enumerable:ue.enumerable,value:K[ce]})}return Object.create(Object.getPrototypeOf(K),J)}function d$1(K,J){return J===void 0&&(J=!1),y$1(K)||r$2(K)||!t(K)||(o(K)>1&&(K.set=K.add=K.clear=K.delete=h$2),Object.freeze(K),J&&i$5(K,function(ne,oe){return d$1(oe,!0)},!0)),K}function h$2(){n(2)}function y$1(K){return K==null||typeof K!="object"||Object.isFrozen(K)}function b$1(K){var J=tn[K];return J||n(18,K),J}function m$1(K,J){tn[K]||(tn[K]=J)}function _$2(){return U$1}function j(K,J){J&&(b$1("Patches"),K.u=[],K.s=[],K.v=J)}function g$1(K){O$1(K),K.p.forEach(S$2),K.p=null}function O$1(K){K===U$1&&(U$1=K.l)}function w(K){return U$1={p:[],l:U$1,h:K,m:!0,_:0}}function S$2(K){var J=K[Q$1];J.i===0||J.i===1?J.j():J.g=!0}function P$1(K,J){J._=J.p.length;var ne=J.p[0],oe=K!==void 0&&K!==ne;return J.h.O||b$1("ES5").S(J,K,oe),oe?(ne[Q$1].P&&(g$1(J),n(4)),t(K)&&(K=M$2(J,K),J.l||x(J,K)),J.u&&b$1("Patches").M(ne[Q$1].t,K,J.u,J.s)):K=M$2(J,ne,[]),g$1(J),J.u&&J.v(J.u,J.s),K!==H$d?K:void 0}function M$2(K,J,ne){if(y$1(J))return J;var oe=J[Q$1];if(!oe)return i$5(J,function(pe,ve){return A$3(K,oe,J,pe,ve,ne)},!0),J;if(oe.A!==K)return J;if(!oe.P)return x(K,oe.t,!0),oe.t;if(!oe.I){oe.I=!0,oe.A._--;var ce=oe.i===4||oe.i===5?oe.o=l$1(oe.k):oe.o,ue=ce,Ae=!1;oe.i===3&&(ue=new Set(ce),ce.clear(),Ae=!0),i$5(ue,function(pe,ve){return A$3(K,oe,ce,pe,ve,ne,Ae)}),x(K,ce,!1),ne&&K.u&&b$1("Patches").N(oe,ne,K.u,K.s)}return oe.o}function A$3(K,J,ne,oe,ce,ue,Ae){if(r$2(ce)){var pe=M$2(K,ce,ue&&J&&J.i!==3&&!u$2(J.R,oe)?ue.concat(oe):void 0);if(f$4(ne,oe,pe),!r$2(pe))return;K.m=!1}else Ae&&ne.add(ce);if(t(ce)&&!y$1(ce)){if(!K.h.D&&K._<1)return;M$2(K,ce),J&&J.A.l||x(K,ce)}}function x(K,J,ne){ne===void 0&&(ne=!1),!K.l&&K.h.D&&K.m&&d$1(J,ne)}function z$2(K,J){var ne=K[Q$1];return(ne?p$1(ne):K)[J]}function I$2(K,J){if(J in K)for(var ne=Object.getPrototypeOf(K);ne;){var oe=Object.getOwnPropertyDescriptor(ne,J);if(oe)return oe;ne=Object.getPrototypeOf(ne)}}function k$2(K){K.P||(K.P=!0,K.l&&k$2(K.l))}function E$2(K){K.o||(K.o=l$1(K.t))}function N$1(K,J,ne){var oe=s$1(J)?b$1("MapSet").F(J,ne):v$2(J)?b$1("MapSet").T(J,ne):K.O?function(ce,ue){var Ae=Array.isArray(ce),pe={i:Ae?1:0,A:ue?ue.A:_$2(),P:!1,I:!1,R:{},l:ue,t:ce,k:null,o:null,j:null,C:!1},ve=pe,me=en;Ae&&(ve=[pe],me=on);var ge=Proxy.revocable(ve,me),ye=ge.revoke,xe=ge.proxy;return pe.k=xe,pe.j=ye,xe}(J,ne):b$1("ES5").J(J,ne);return(ne?ne.A:_$2()).p.push(oe),oe}function R$1(K){return r$2(K)||n(22,K),function J(ne){if(!t(ne))return ne;var oe,ce=ne[Q$1],ue=o(ne);if(ce){if(!ce.P&&(ce.i<4||!b$1("ES5").K(ce)))return ce.t;ce.I=!0,oe=D$3(ne,ue),ce.I=!1}else oe=D$3(ne,ue);return i$5(oe,function(Ae,pe){ce&&a$1(ce.t,Ae)===pe||f$4(oe,Ae,J(pe))}),ue===3?new Set(oe):oe}(K)}function D$3(K,J){switch(J){case 2:return new Map(K);case 3:return Array.from(K)}return l$1(K)}function F$2(){function K(ue,Ae){var pe=ce[ue];return pe?pe.enumerable=Ae:ce[ue]=pe={configurable:!0,enumerable:Ae,get:function(){var ve=this[Q$1];return en.get(ve,ue)},set:function(ve){var me=this[Q$1];en.set(me,ue,ve)}},pe}function J(ue){for(var Ae=ue.length-1;Ae>=0;Ae--){var pe=ue[Ae][Q$1];if(!pe.P)switch(pe.i){case 5:oe(pe)&&k$2(pe);break;case 4:ne(pe)&&k$2(pe)}}}function ne(ue){for(var Ae=ue.t,pe=ue.k,ve=nn(pe),me=ve.length-1;me>=0;me--){var ge=ve[me];if(ge!==Q$1){var ye=Ae[ge];if(ye===void 0&&!u$2(Ae,ge))return!0;var xe=pe[ge],_e=xe&&xe[Q$1];if(_e?_e.t!==ye:!c(xe,ye))return!0}}var $e=!!Ae[Q$1];return ve.length!==nn(Ae).length+($e?0:1)}function oe(ue){var Ae=ue.k;if(Ae.length!==ue.t.length)return!0;var pe=Object.getOwnPropertyDescriptor(Ae,Ae.length-1);if(pe&&!pe.get)return!0;for(var ve=0;ve<Ae.length;ve++)if(!Ae.hasOwnProperty(ve))return!0;return!1}var ce={};m$1("ES5",{J:function(ue,Ae){var pe=Array.isArray(ue),ve=function(ge,ye){if(ge){for(var xe=Array(ye.length),_e=0;_e<ye.length;_e++)Object.defineProperty(xe,""+_e,K(_e,!0));return xe}var $e=rn(ye);delete $e[Q$1];for(var Ie=nn($e),Fe=0;Fe<Ie.length;Fe++){var ke=Ie[Fe];$e[ke]=K(ke,ge||!!$e[ke].enumerable)}return Object.create(Object.getPrototypeOf(ye),$e)}(pe,ue),me={i:pe?5:4,A:Ae?Ae.A:_$2(),P:!1,I:!1,R:{},l:Ae,t:ue,k:ve,o:null,g:!1,C:!1};return Object.defineProperty(ve,Q$1,{value:me,writable:!0}),ve},S:function(ue,Ae,pe){pe?r$2(Ae)&&Ae[Q$1].A===ue&&J(ue.p):(ue.u&&function ve(me){if(me&&typeof me=="object"){var ge=me[Q$1];if(ge){var ye=ge.t,xe=ge.k,_e=ge.R,$e=ge.i;if($e===4)i$5(xe,function(We){We!==Q$1&&(ye[We]!==void 0||u$2(ye,We)?_e[We]||ve(xe[We]):(_e[We]=!0,k$2(ge)))}),i$5(ye,function(We){xe[We]!==void 0||u$2(xe,We)||(_e[We]=!1,k$2(ge))});else if($e===5){if(oe(ge)&&(k$2(ge),_e.length=!0),xe.length<ye.length)for(var Ie=xe.length;Ie<ye.length;Ie++)_e[Ie]=!1;else for(var Fe=ye.length;Fe<xe.length;Fe++)_e[Fe]=!0;for(var ke=Math.min(xe.length,ye.length),je=0;je<ke;je++)xe.hasOwnProperty(je)||(_e[je]=!0),_e[je]===void 0&&ve(xe[je])}}}}(ue.p[0]),J(ue.p))},K:function(ue){return ue.i===4?ne(ue):oe(ue)}})}var G,U$1,W=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X$1=typeof Map<"u",q$1=typeof Set<"u",B$1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H$d=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L$3=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q$1=W?Symbol.for("immer-state"):"__$immer_state",Z$3=""+Object.prototype.constructor,nn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(K){return Object.getOwnPropertyNames(K).concat(Object.getOwnPropertySymbols(K))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(K){var J={};return nn(K).forEach(function(ne){J[ne]=Object.getOwnPropertyDescriptor(K,ne)}),J},tn={},en={get:function(K,J){if(J===Q$1)return K;var ne=p$1(K);if(!u$2(ne,J))return function(ce,ue,Ae){var pe,ve=I$2(ue,Ae);return ve?"value"in ve?ve.value:(pe=ve.get)===null||pe===void 0?void 0:pe.call(ce.k):void 0}(K,ne,J);var oe=ne[J];return K.I||!t(oe)?oe:oe===z$2(K.t,J)?(E$2(K),K.o[J]=N$1(K.A.h,oe,K)):oe},has:function(K,J){return J in p$1(K)},ownKeys:function(K){return Reflect.ownKeys(p$1(K))},set:function(K,J,ne){var oe=I$2(p$1(K),J);if(oe!=null&&oe.set)return oe.set.call(K.k,ne),!0;if(!K.P){var ce=z$2(p$1(K),J),ue=ce==null?void 0:ce[Q$1];if(ue&&ue.t===ne)return K.o[J]=ne,K.R[J]=!1,!0;if(c(ne,ce)&&(ne!==void 0||u$2(K.t,J)))return!0;E$2(K),k$2(K)}return K.o[J]===ne&&(ne!==void 0||J in K.o)||Number.isNaN(ne)&&Number.isNaN(K.o[J])||(K.o[J]=ne,K.R[J]=!0),!0},deleteProperty:function(K,J){return z$2(K.t,J)!==void 0||J in K.t?(K.R[J]=!1,E$2(K),k$2(K)):delete K.R[J],K.o&&delete K.o[J],!0},getOwnPropertyDescriptor:function(K,J){var ne=p$1(K),oe=Reflect.getOwnPropertyDescriptor(ne,J);return oe&&{writable:!0,configurable:K.i!==1||J!=="length",enumerable:oe.enumerable,value:ne[J]}},defineProperty:function(){n(11)},getPrototypeOf:function(K){return Object.getPrototypeOf(K.t)},setPrototypeOf:function(){n(12)}},on={};i$5(en,function(K,J){on[K]=function(){return arguments[0]=arguments[0][0],J.apply(this,arguments)}}),on.deleteProperty=function(K,J){return on.set.call(this,K,J,void 0)},on.set=function(K,J,ne){return en.set.call(this,K[0],J,ne,K[0])};var un=function(){function K(ne){var oe=this;this.O=B$1,this.D=!0,this.produce=function(ce,ue,Ae){if(typeof ce=="function"&&typeof ue!="function"){var pe=ue;ue=ce;var ve=oe;return function(Ie){var Fe=this;Ie===void 0&&(Ie=pe);for(var ke=arguments.length,je=Array(ke>1?ke-1:0),We=1;We<ke;We++)je[We-1]=arguments[We];return ve.produce(Ie,function(ze){var Xe;return(Xe=ue).call.apply(Xe,[Fe,ze].concat(je))})}}var me;if(typeof ue!="function"&&n(6),Ae!==void 0&&typeof Ae!="function"&&n(7),t(ce)){var ge=w(oe),ye=N$1(oe,ce,void 0),xe=!0;try{me=ue(ye),xe=!1}finally{xe?g$1(ge):O$1(ge)}return typeof Promise<"u"&&me instanceof Promise?me.then(function(Ie){return j(ge,Ae),P$1(Ie,ge)},function(Ie){throw g$1(ge),Ie}):(j(ge,Ae),P$1(me,ge))}if(!ce||typeof ce!="object"){if((me=ue(ce))===void 0&&(me=ce),me===H$d&&(me=void 0),oe.D&&d$1(me,!0),Ae){var _e=[],$e=[];b$1("Patches").M(ce,me,_e,$e),Ae(_e,$e)}return me}n(21,ce)},this.produceWithPatches=function(ce,ue){if(typeof ce=="function")return function(me){for(var ge=arguments.length,ye=Array(ge>1?ge-1:0),xe=1;xe<ge;xe++)ye[xe-1]=arguments[xe];return oe.produceWithPatches(me,function(_e){return ce.apply(void 0,[_e].concat(ye))})};var Ae,pe,ve=oe.produce(ce,ue,function(me,ge){Ae=me,pe=ge});return typeof Promise<"u"&&ve instanceof Promise?ve.then(function(me){return[me,Ae,pe]}):[ve,Ae,pe]},typeof(ne==null?void 0:ne.useProxies)=="boolean"&&this.setUseProxies(ne.useProxies),typeof(ne==null?void 0:ne.autoFreeze)=="boolean"&&this.setAutoFreeze(ne.autoFreeze)}var J=K.prototype;return J.createDraft=function(ne){t(ne)||n(8),r$2(ne)&&(ne=R$1(ne));var oe=w(this),ce=N$1(this,ne,void 0);return ce[Q$1].C=!0,O$1(oe),ce},J.finishDraft=function(ne,oe){var ce=ne&&ne[Q$1],ue=ce.A;return j(ue,oe),P$1(void 0,ue)},J.setAutoFreeze=function(ne){this.D=ne},J.setUseProxies=function(ne){ne&&!B$1&&n(20),this.O=ne},J.applyPatches=function(ne,oe){var ce;for(ce=oe.length-1;ce>=0;ce--){var ue=oe[ce];if(ue.path.length===0&&ue.op==="replace"){ne=ue.value;break}}ce>-1&&(oe=oe.slice(ce+1));var Ae=b$1("Patches").$;return r$2(ne)?Ae(ne,oe):this.produce(ne,function(pe){return Ae(pe,oe)})},K}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);function _typeof$4(K){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof$4(K)}function toPrimitive(K,J){if(_typeof$4(K)!="object"||!K)return K;var ne=K[Symbol.toPrimitive];if(ne!==void 0){var oe=ne.call(K,J||"default");if(_typeof$4(oe)!="object")return oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(K)}function toPropertyKey(K){var J=toPrimitive(K,"string");return _typeof$4(J)=="symbol"?J:J+""}function _defineProperty$5(K,J,ne){return(J=toPropertyKey(J))in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function ownKeys$4(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread2$2(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys$4(Object(ne),!0).forEach(function(oe){_defineProperty$5(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys$4(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function formatProdErrorMessage(K){return"Minified Redux error #"+K+"; visit https://redux.js.org/Errors?code="+K+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$4(K){if(typeof K!="object"||K===null)return!1;for(var J=K;Object.getPrototypeOf(J)!==null;)J=Object.getPrototypeOf(J);return Object.getPrototypeOf(K)===J}function createStore$2(K,J,ne){var oe;if(typeof J=="function"&&typeof ne=="function"||typeof ne=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof J=="function"&&typeof ne>"u"&&(ne=J,J=void 0),typeof ne<"u"){if(typeof ne!="function")throw new Error(formatProdErrorMessage(1));return ne(createStore$2)(K,J)}if(typeof K!="function")throw new Error(formatProdErrorMessage(2));var ce=K,ue=J,Ae=[],pe=Ae,ve=!1;function me(){pe===Ae&&(pe=Ae.slice())}function ge(){if(ve)throw new Error(formatProdErrorMessage(3));return ue}function ye(Ie){if(typeof Ie!="function")throw new Error(formatProdErrorMessage(4));if(ve)throw new Error(formatProdErrorMessage(5));var Fe=!0;return me(),pe.push(Ie),function(){if(Fe){if(ve)throw new Error(formatProdErrorMessage(6));Fe=!1,me();var je=pe.indexOf(Ie);pe.splice(je,1),Ae=null}}}function xe(Ie){if(!isPlainObject$4(Ie))throw new Error(formatProdErrorMessage(7));if(typeof Ie.type>"u")throw new Error(formatProdErrorMessage(8));if(ve)throw new Error(formatProdErrorMessage(9));try{ve=!0,ue=ce(ue,Ie)}finally{ve=!1}for(var Fe=Ae=pe,ke=0;ke<Fe.length;ke++){var je=Fe[ke];je()}return Ie}function _e(Ie){if(typeof Ie!="function")throw new Error(formatProdErrorMessage(10));ce=Ie,xe({type:ActionTypes.REPLACE})}function $e(){var Ie,Fe=ye;return Ie={subscribe:function(je){if(typeof je!="object"||je===null)throw new Error(formatProdErrorMessage(11));function We(){je.next&&je.next(ge())}We();var ze=Fe(We);return{unsubscribe:ze}}},Ie[$$observable]=function(){return this},Ie}return xe({type:ActionTypes.INIT}),oe={dispatch:xe,subscribe:ye,getState:ge,replaceReducer:_e},oe[$$observable]=$e,oe}function assertReducerShape(K){Object.keys(K).forEach(function(J){var ne=K[J],oe=ne(void 0,{type:ActionTypes.INIT});if(typeof oe>"u")throw new Error(formatProdErrorMessage(12));if(typeof ne(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers(K){for(var J=Object.keys(K),ne={},oe=0;oe<J.length;oe++){var ce=J[oe];typeof K[ce]=="function"&&(ne[ce]=K[ce])}var ue=Object.keys(ne),Ae;try{assertReducerShape(ne)}catch(pe){Ae=pe}return function(ve,me){if(ve===void 0&&(ve={}),Ae)throw Ae;for(var ge=!1,ye={},xe=0;xe<ue.length;xe++){var _e=ue[xe],$e=ne[_e],Ie=ve[_e],Fe=$e(Ie,me);if(typeof Fe>"u")throw me&&me.type,new Error(formatProdErrorMessage(14));ye[_e]=Fe,ge=ge||Fe!==Ie}return ge=ge||ue.length!==Object.keys(ve).length,ge?ye:ve}}function bindActionCreator(K,J){return function(){return J(K.apply(this,arguments))}}function bindActionCreators(K,J){if(typeof K=="function")return bindActionCreator(K,J);if(typeof K!="object"||K===null)throw new Error(formatProdErrorMessage(16));var ne={};for(var oe in K){var ce=K[oe];typeof ce=="function"&&(ne[oe]=bindActionCreator(ce,J))}return ne}function compose$2(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];return J.length===0?function(oe){return oe}:J.length===1?J[0]:J.reduce(function(oe,ce){return function(){return oe(ce.apply(void 0,arguments))}})}function applyMiddleware(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];return function(oe){return function(){var ce=oe.apply(void 0,arguments),ue=function(){throw new Error(formatProdErrorMessage(15))},Ae={getState:ce.getState,dispatch:function(){return ue.apply(void 0,arguments)}},pe=J.map(function(ve){return ve(Ae)});return ue=compose$2.apply(void 0,pe)(ce.dispatch),_objectSpread2$2(_objectSpread2$2({},ce),{},{dispatch:ue})}}}var NOT_FOUND="NOT_FOUND";function createSingletonCache(K){var J;return{get:function(oe){return J&&K(J.key,oe)?J.value:NOT_FOUND},put:function(oe,ce){J={key:oe,value:ce}},getEntries:function(){return J?[J]:[]},clear:function(){J=void 0}}}function createLruCache(K,J){var ne=[];function oe(pe){var ve=ne.findIndex(function(ge){return J(pe,ge.key)});if(ve>-1){var me=ne[ve];return ve>0&&(ne.splice(ve,1),ne.unshift(me)),me.value}return NOT_FOUND}function ce(pe,ve){oe(pe)===NOT_FOUND&&(ne.unshift({key:pe,value:ve}),ne.length>K&&ne.pop())}function ue(){return ne}function Ae(){ne=[]}return{get:oe,put:ce,getEntries:ue,clear:Ae}}var defaultEqualityCheck=function(J,ne){return J===ne};function createCacheKeyComparator(K){return function(ne,oe){if(ne===null||oe===null||ne.length!==oe.length)return!1;for(var ce=ne.length,ue=0;ue<ce;ue++)if(!K(ne[ue],oe[ue]))return!1;return!0}}function defaultMemoize(K,J){var ne=typeof J=="object"?J:{equalityCheck:J},oe=ne.equalityCheck,ce=oe===void 0?defaultEqualityCheck:oe,ue=ne.maxSize,Ae=ue===void 0?1:ue,pe=ne.resultEqualityCheck,ve=createCacheKeyComparator(ce),me=Ae===1?createSingletonCache(ve):createLruCache(Ae,ve);function ge(){var ye=me.get(arguments);if(ye===NOT_FOUND){if(ye=K.apply(null,arguments),pe){var xe=me.getEntries(),_e=xe.find(function($e){return pe($e.value,ye)});_e&&(ye=_e.value)}me.put(arguments,ye)}return ye}return ge.clearCache=function(){return me.clear()},ge}function getDependencies(K){var J=Array.isArray(K[0])?K[0]:K;if(!J.every(function(oe){return typeof oe=="function"})){var ne=J.map(function(oe){return typeof oe=="function"?"function "+(oe.name||"unnamed")+"()":typeof oe}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+ne+"]")}return J}function createSelectorCreator(K){for(var J=arguments.length,ne=new Array(J>1?J-1:0),oe=1;oe<J;oe++)ne[oe-1]=arguments[oe];var ce=function(){for(var Ae=arguments.length,pe=new Array(Ae),ve=0;ve<Ae;ve++)pe[ve]=arguments[ve];var me=0,ge,ye={memoizeOptions:void 0},xe=pe.pop();if(typeof xe=="object"&&(ye=xe,xe=pe.pop()),typeof xe!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof xe+"]");var _e=ye,$e=_e.memoizeOptions,Ie=$e===void 0?ne:$e,Fe=Array.isArray(Ie)?Ie:[Ie],ke=getDependencies(pe),je=K.apply(void 0,[function(){return me++,xe.apply(null,arguments)}].concat(Fe)),We=K(function(){for(var Xe=[],Je=ke.length,nt=0;nt<Je;nt++)Xe.push(ke[nt].apply(null,arguments));return ge=je.apply(null,Xe),ge});return Object.assign(We,{resultFunc:xe,memoizedResultFunc:je,dependencies:ke,lastResult:function(){return ge},recomputations:function(){return me},resetRecomputations:function(){return me=0}}),We};return ce}var createSelector=createSelectorCreator(defaultMemoize);function createThunkMiddleware(K){var J=function(oe){var ce=oe.dispatch,ue=oe.getState;return function(Ae){return function(pe){return typeof pe=="function"?pe(ce,ue,K):Ae(pe)}}};return J}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;var __extends$e=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),__generator$3=function(K,J){var ne={label:0,sent:function(){if(ue[0]&1)throw ue[1];return ue[1]},trys:[],ops:[]},oe,ce,ue,Ae;return Ae={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function pe(me){return function(ge){return ve([me,ge])}}function ve(me){if(oe)throw new TypeError("Generator is already executing.");for(;ne;)try{if(oe=1,ce&&(ue=me[0]&2?ce.return:me[0]?ce.throw||((ue=ce.return)&&ue.call(ce),0):ce.next)&&!(ue=ue.call(ce,me[1])).done)return ue;switch(ce=0,ue&&(me=[me[0]&2,ue.value]),me[0]){case 0:case 1:ue=me;break;case 4:return ne.label++,{value:me[1],done:!1};case 5:ne.label++,ce=me[1],me=[0];continue;case 7:me=ne.ops.pop(),ne.trys.pop();continue;default:if(ue=ne.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(me[0]===6||me[0]===2)){ne=0;continue}if(me[0]===3&&(!ue||me[1]>ue[0]&&me[1]<ue[3])){ne.label=me[1];break}if(me[0]===6&&ne.label<ue[1]){ne.label=ue[1],ue=me;break}if(ue&&ne.label<ue[2]){ne.label=ue[2],ne.ops.push(me);break}ue[2]&&ne.ops.pop(),ne.trys.pop();continue}me=J.call(K,ne)}catch(ge){me=[6,ge],ce=0}finally{oe=ue=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}},__spreadArray$3=function(K,J){for(var ne=0,oe=J.length,ce=K.length;ne<oe;ne++,ce++)K[ce]=J[ne];return K},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function(K,J,ne){return J in K?__defProp(K,J,{enumerable:!0,configurable:!0,writable:!0,value:ne}):K[J]=ne},__spreadValues=function(K,J){for(var ne in J||(J={}))__hasOwnProp.call(J,ne)&&__defNormalProp(K,ne,J[ne]);if(__getOwnPropSymbols)for(var oe=0,ce=__getOwnPropSymbols(J);oe<ce.length;oe++){var ne=ce[oe];__propIsEnum.call(J,ne)&&__defNormalProp(K,ne,J[ne])}return K},__spreadProps=function(K,J){return __defProps(K,__getOwnPropDescs(J))},__async=function(K,J,ne){return new Promise(function(oe,ce){var ue=function(ve){try{pe(ne.next(ve))}catch(me){ce(me)}},Ae=function(ve){try{pe(ne.throw(ve))}catch(me){ce(me)}},pe=function(ve){return ve.done?oe(ve.value):Promise.resolve(ve.value).then(ue,Ae)};pe((ne=ne.apply(K,J)).next())})},composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose$2:compose$2.apply(null,arguments)};function isPlainObject$3(K){if(typeof K!="object"||K===null)return!1;var J=Object.getPrototypeOf(K);if(J===null)return!0;for(var ne=J;Object.getPrototypeOf(ne)!==null;)ne=Object.getPrototypeOf(ne);return J===ne}var MiddlewareArray=function(K){__extends$e(J,K);function J(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];var ce=K.apply(this,ne)||this;return Object.setPrototypeOf(ce,J.prototype),ce}return Object.defineProperty(J,Symbol.species,{get:function(){return J},enumerable:!1,configurable:!0}),J.prototype.concat=function(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];return K.prototype.concat.apply(this,ne)},J.prototype.prepend=function(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];return ne.length===1&&Array.isArray(ne[0])?new(J.bind.apply(J,__spreadArray$3([void 0],ne[0].concat(this)))):new(J.bind.apply(J,__spreadArray$3([void 0],ne.concat(this))))},J}(Array),EnhancerArray=function(K){__extends$e(J,K);function J(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];var ce=K.apply(this,ne)||this;return Object.setPrototypeOf(ce,J.prototype),ce}return Object.defineProperty(J,Symbol.species,{get:function(){return J},enumerable:!1,configurable:!0}),J.prototype.concat=function(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];return K.prototype.concat.apply(this,ne)},J.prototype.prepend=function(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];return ne.length===1&&Array.isArray(ne[0])?new(J.bind.apply(J,__spreadArray$3([void 0],ne[0].concat(this)))):new(J.bind.apply(J,__spreadArray$3([void 0],ne.concat(this))))},J}(Array);function freezeDraftable(K){return t(K)?fn(K,function(){}):K}function isPlain(K){var J=typeof K;return K==null||J==="string"||J==="boolean"||J==="number"||Array.isArray(K)||isPlainObject$3(K)}function isBoolean$1(K){return typeof K=="boolean"}function curryGetDefaultMiddleware(){return function(J){return getDefaultMiddleware(J)}}function getDefaultMiddleware(K){K===void 0&&(K={});var J=K.thunk,ne=J===void 0?!0:J;K.immutableCheck,K.serializableCheck;var oe=new MiddlewareArray;return ne&&(isBoolean$1(ne)?oe.push(thunk):oe.push(thunk.withExtraArgument(ne.extraArgument))),oe}var IS_PRODUCTION=!0;function configureStore(K){var J=curryGetDefaultMiddleware(),ne=K||{},oe=ne.reducer,ce=oe===void 0?void 0:oe,ue=ne.middleware,Ae=ue===void 0?J():ue,pe=ne.devTools,ve=pe===void 0?!0:pe,me=ne.preloadedState,ge=me===void 0?void 0:me,ye=ne.enhancers,xe=ye===void 0?void 0:ye,_e;if(typeof ce=="function")_e=ce;else if(isPlainObject$3(ce))_e=combineReducers(ce);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var $e=Ae;typeof $e=="function"&&($e=$e(J));var Ie=applyMiddleware.apply(void 0,$e),Fe=compose$2;ve&&(Fe=composeWithDevTools(__spreadValues({trace:!IS_PRODUCTION},typeof ve=="object"&&ve)));var ke=new EnhancerArray(Ie),je=ke;Array.isArray(xe)?je=__spreadArray$3([Ie],xe):typeof xe=="function"&&(je=xe(ke));var We=Fe.apply(void 0,je);return createStore$2(_e,ge,We)}function createAction(K,J){function ne(){for(var oe=[],ce=0;ce<arguments.length;ce++)oe[ce]=arguments[ce];if(J){var ue=J.apply(void 0,oe);if(!ue)throw new Error("prepareAction did not return an object");return __spreadValues(__spreadValues({type:K,payload:ue.payload},"meta"in ue&&{meta:ue.meta}),"error"in ue&&{error:ue.error})}return{type:K,payload:oe[0]}}return ne.toString=function(){return""+K},ne.type=K,ne.match=function(oe){return oe.type===K},ne}function isAction(K){return isPlainObject$3(K)&&"type"in K}function executeReducerBuilderCallback(K){var J={},ne=[],oe,ce={addCase:function(ue,Ae){var pe=typeof ue=="string"?ue:ue.type;if(pe in J)throw new Error("addCase cannot be called with two reducers for the same action type");return J[pe]=Ae,ce},addMatcher:function(ue,Ae){return ne.push({matcher:ue,reducer:Ae}),ce},addDefaultCase:function(ue){return oe=ue,ce}};return K(ce),[J,ne,oe]}function isStateFunction(K){return typeof K=="function"}function createReducer(K,J,ne,oe){ne===void 0&&(ne=[]);var ce=typeof J=="function"?executeReducerBuilderCallback(J):[J,ne,oe],ue=ce[0],Ae=ce[1],pe=ce[2],ve;if(isStateFunction(K))ve=function(){return freezeDraftable(K())};else{var me=freezeDraftable(K);ve=function(){return me}}function ge(ye,xe){ye===void 0&&(ye=ve());var _e=__spreadArray$3([ue[xe.type]],Ae.filter(function($e){var Ie=$e.matcher;return Ie(xe)}).map(function($e){var Ie=$e.reducer;return Ie}));return _e.filter(function($e){return!!$e}).length===0&&(_e=[pe]),_e.reduce(function($e,Ie){if(Ie)if(r$2($e)){var Fe=$e,ke=Ie(Fe,xe);return ke===void 0?$e:ke}else{if(t($e))return fn($e,function(je){return Ie(je,xe)});var ke=Ie($e,xe);if(ke===void 0){if($e===null)return $e;throw Error("A case reducer on a non-draftable value must not return undefined")}return ke}return $e},ye)}return ge.getInitialState=ve,ge}function getType2(K,J){return K+"/"+J}function createSlice(K){var J=K.name;if(!J)throw new Error("`name` is a required option for createSlice");typeof process$1<"u";var ne=typeof K.initialState=="function"?K.initialState:freezeDraftable(K.initialState),oe=K.reducers||{},ce=Object.keys(oe),ue={},Ae={},pe={};ce.forEach(function(ge){var ye=oe[ge],xe=getType2(J,ge),_e,$e;"reducer"in ye?(_e=ye.reducer,$e=ye.prepare):_e=ye,ue[ge]=_e,Ae[xe]=_e,pe[ge]=$e?createAction(xe,$e):createAction(xe)});function ve(){var ge=typeof K.extraReducers=="function"?executeReducerBuilderCallback(K.extraReducers):[K.extraReducers],ye=ge[0],xe=ye===void 0?{}:ye,_e=ge[1],$e=_e===void 0?[]:_e,Ie=ge[2],Fe=Ie===void 0?void 0:Ie,ke=__spreadValues(__spreadValues({},xe),Ae);return createReducer(ne,function(je){for(var We in ke)je.addCase(We,ke[We]);for(var ze=0,Xe=$e;ze<Xe.length;ze++){var Je=Xe[ze];je.addMatcher(Je.matcher,Je.reducer)}Fe&&je.addDefaultCase(Fe)})}var me;return{name:J,reducer:function(ge,ye){return me||(me=ve()),me(ge,ye)},actions:pe,caseReducers:ue,getInitialState:function(){return me||(me=ve()),me.getInitialState()}}}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=function(K){K===void 0&&(K=21);for(var J="",ne=K;ne--;)J+=urlAlphabet[Math.random()*64|0];return J},commonProperties=["name","message","stack","code"],RejectWithValue=function(){function K(J,ne){this.payload=J,this.meta=ne}return K}(),FulfillWithMeta=function(){function K(J,ne){this.payload=J,this.meta=ne}return K}(),miniSerializeError=function(K){if(typeof K=="object"&&K!==null){for(var J={},ne=0,oe=commonProperties;ne<oe.length;ne++){var ce=oe[ne];typeof K[ce]=="string"&&(J[ce]=K[ce])}return J}return{message:String(K)}},createAsyncThunk=function(){function K(J,ne,oe){var ce=createAction(J+"/fulfilled",function(me,ge,ye,xe){return{payload:me,meta:__spreadProps(__spreadValues({},xe||{}),{arg:ye,requestId:ge,requestStatus:"fulfilled"})}}),ue=createAction(J+"/pending",function(me,ge,ye){return{payload:void 0,meta:__spreadProps(__spreadValues({},ye||{}),{arg:ge,requestId:me,requestStatus:"pending"})}}),Ae=createAction(J+"/rejected",function(me,ge,ye,xe,_e){return{payload:xe,error:(oe&&oe.serializeError||miniSerializeError)(me||"Rejected"),meta:__spreadProps(__spreadValues({},_e||{}),{arg:ye,requestId:ge,rejectedWithValue:!!xe,requestStatus:"rejected",aborted:(me==null?void 0:me.name)==="AbortError",condition:(me==null?void 0:me.name)==="ConditionError"})}}),pe=typeof AbortController<"u"?AbortController:function(){function me(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return me.prototype.abort=function(){},me}();function ve(me){return function(ge,ye,xe){var _e=oe!=null&&oe.idGenerator?oe.idGenerator(me):nanoid(),$e=new pe,Ie;function Fe(je){Ie=je,$e.abort()}var ke=function(){return __async(this,null,function(){var je,We,ze,Xe,Je,nt,et;return __generator$3(this,function(tt){switch(tt.label){case 0:return tt.trys.push([0,4,,5]),Xe=(je=oe==null?void 0:oe.condition)==null?void 0:je.call(oe,me,{getState:ye,extra:xe}),isThenable$1(Xe)?[4,Xe]:[3,2];case 1:Xe=tt.sent(),tt.label=2;case 2:if(Xe===!1||$e.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Je=new Promise(function(st,qe){return $e.signal.addEventListener("abort",function(){return qe({name:"AbortError",message:Ie||"Aborted"})})}),ge(ue(_e,me,(We=oe==null?void 0:oe.getPendingMeta)==null?void 0:We.call(oe,{requestId:_e,arg:me},{getState:ye,extra:xe}))),[4,Promise.race([Je,Promise.resolve(ne(me,{dispatch:ge,getState:ye,extra:xe,requestId:_e,signal:$e.signal,abort:Fe,rejectWithValue:function(st,qe){return new RejectWithValue(st,qe)},fulfillWithValue:function(st,qe){return new FulfillWithMeta(st,qe)}})).then(function(st){if(st instanceof RejectWithValue)throw st;return st instanceof FulfillWithMeta?ce(st.payload,_e,me,st.meta):ce(st,_e,me)})])];case 3:return ze=tt.sent(),[3,5];case 4:return nt=tt.sent(),ze=nt instanceof RejectWithValue?Ae(null,_e,me,nt.payload,nt.meta):Ae(nt,_e,me),[3,5];case 5:return et=oe&&!oe.dispatchConditionRejection&&Ae.match(ze)&&ze.meta.condition,et||ge(ze),[2,ze]}})})}();return Object.assign(ke,{abort:Fe,requestId:_e,arg:me,unwrap:function(){return ke.then(unwrapResult)}})}}return Object.assign(ve,{pending:ue,rejected:Ae,fulfilled:ce,typePrefix:J})}return K.withTypes=function(){return K},K}();function unwrapResult(K){if(K.meta&&K.meta.rejectedWithValue)throw K.payload;if(K.error)throw K.error;return K.payload}function isThenable$1(K){return K!==null&&typeof K=="object"&&typeof K.then=="function"}var hasMatchFunction=function(K){return K&&typeof K.match=="function"},matches=function(K,J){return hasMatchFunction(K)?K.match(J):K(J)};function isAnyOf(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];return function(ne){return K.some(function(oe){return matches(oe,ne)})}}var assertFunction=function(K,J){if(typeof K!="function")throw new TypeError(J+" is not a function")},noop$5=function(){},catchRejection=function(K,J){return J===void 0&&(J=noop$5),K.catch(J),K},addAbortSignalListener=function(K,J){return K.addEventListener("abort",J,{once:!0}),function(){return K.removeEventListener("abort",J)}},abortControllerWithReason=function(K,J){var ne=K.signal;ne.aborted||("reason"in ne||Object.defineProperty(ne,"reason",{enumerable:!0,value:J,configurable:!0,writable:!0}),K.abort(J))},task="task",listener="listener",completed="completed",cancelled="cancelled",taskCancelled="task-"+cancelled,taskCompleted="task-"+completed,listenerCancelled=listener+"-"+cancelled,listenerCompleted=listener+"-"+completed,TaskAbortError=function(){function K(J){this.code=J,this.name="TaskAbortError",this.message=task+" "+cancelled+" (reason: "+J+")"}return K}(),validateActive=function(K){if(K.aborted)throw new TaskAbortError(K.reason)};function raceWithSignal(K,J){var ne=noop$5;return new Promise(function(oe,ce){var ue=function(){return ce(new TaskAbortError(K.reason))};if(K.aborted){ue();return}ne=addAbortSignalListener(K,ue),J.finally(function(){return ne()}).then(oe,ce)}).finally(function(){ne=noop$5})}var runTask=function(K,J){return __async(void 0,null,function(){var ne,oe;return __generator$3(this,function(ce){switch(ce.label){case 0:return ce.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return ce.sent(),[4,K()];case 2:return ne=ce.sent(),[2,{status:"ok",value:ne}];case 3:return oe=ce.sent(),[2,{status:oe instanceof TaskAbortError?"cancelled":"rejected",error:oe}];case 4:return J==null||J(),[7];case 5:return[2]}})})},createPause=function(K){return function(J){return catchRejection(raceWithSignal(K,J).then(function(ne){return validateActive(K),ne}))}},createDelay=function(K){var J=createPause(K);return function(ne){return J(new Promise(function(oe){return setTimeout(oe,ne)}))}},assign$1=Object.assign,INTERNAL_NIL_TOKEN={},alm="listenerMiddleware",createFork=function(K){var J=function(ne){return addAbortSignalListener(K,function(){return abortControllerWithReason(ne,K.reason)})};return function(ne){assertFunction(ne,"taskExecutor");var oe=new AbortController;J(oe);var ce=runTask(function(){return __async(void 0,null,function(){var ue;return __generator$3(this,function(Ae){switch(Ae.label){case 0:return validateActive(K),validateActive(oe.signal),[4,ne({pause:createPause(oe.signal),delay:createDelay(oe.signal),signal:oe.signal})];case 1:return ue=Ae.sent(),validateActive(oe.signal),[2,ue]}})})},function(){return abortControllerWithReason(oe,taskCompleted)});return{result:createPause(K)(ce),cancel:function(){abortControllerWithReason(oe,taskCancelled)}}}},createTakePattern=function(K,J){var ne=function(oe,ce){return __async(void 0,null,function(){var ue,Ae,pe,ve;return __generator$3(this,function(me){switch(me.label){case 0:validateActive(J),ue=function(){},Ae=new Promise(function(ge,ye){var xe=K({predicate:oe,effect:function(_e,$e){$e.unsubscribe(),ge([_e,$e.getState(),$e.getOriginalState()])}});ue=function(){xe(),ye()}}),pe=[Ae],ce!=null&&pe.push(new Promise(function(ge){return setTimeout(ge,ce,null)})),me.label=1;case 1:return me.trys.push([1,,3,4]),[4,raceWithSignal(J,Promise.race(pe))];case 2:return ve=me.sent(),validateActive(J),[2,ve];case 3:return ue(),[7];case 4:return[2]}})})};return function(oe,ce){return catchRejection(ne(oe,ce))}},getListenerEntryPropsFrom=function(K){var J=K.type,ne=K.actionCreator,oe=K.matcher,ce=K.predicate,ue=K.effect;if(J)ce=createAction(J).match;else if(ne)J=ne.type,ce=ne.match;else if(oe)ce=oe;else if(!ce)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return assertFunction(ue,"options.listener"),{predicate:ce,type:J,effect:ue}},createListenerEntry=function(K){var J=getListenerEntryPropsFrom(K),ne=J.type,oe=J.predicate,ce=J.effect,ue=nanoid(),Ae={id:ue,effect:ce,type:ne,predicate:oe,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return Ae},cancelActiveListeners=function(K){K.pending.forEach(function(J){abortControllerWithReason(J,listenerCancelled)})},createClearListenerMiddleware=function(K){return function(){K.forEach(cancelActiveListeners),K.clear()}},safelyNotifyError=function(K,J,ne){try{K(J,ne)}catch(oe){setTimeout(function(){throw oe},0)}},addListener=createAction(alm+"/add"),clearAllListeners=createAction(alm+"/removeAll"),removeListener=createAction(alm+"/remove"),defaultErrorHandler=function(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];console.error.apply(console,__spreadArray$3([alm+"/error"],K))};function createListenerMiddleware(K){var J=this;K===void 0&&(K={});var ne=new Map,oe=K.extra,ce=K.onError,ue=ce===void 0?defaultErrorHandler:ce;assertFunction(ue,"onError");var Ae=function(_e){return _e.unsubscribe=function(){return ne.delete(_e.id)},ne.set(_e.id,_e),function($e){_e.unsubscribe(),$e!=null&&$e.cancelActive&&cancelActiveListeners(_e)}},pe=function(_e){for(var $e=0,Ie=Array.from(ne.values());$e<Ie.length;$e++){var Fe=Ie[$e];if(_e(Fe))return Fe}},ve=function(_e){var $e=pe(function(Ie){return Ie.effect===_e.effect});return $e||($e=createListenerEntry(_e)),Ae($e)},me=function(_e){var $e=getListenerEntryPropsFrom(_e),Ie=$e.type,Fe=$e.effect,ke=$e.predicate,je=pe(function(We){var ze=typeof Ie=="string"?We.type===Ie:We.predicate===ke;return ze&&We.effect===Fe});return je&&(je.unsubscribe(),_e.cancelActive&&cancelActiveListeners(je)),!!je},ge=function(_e,$e,Ie,Fe){return __async(J,null,function(){var ke,je,We;return __generator$3(this,function(ze){switch(ze.label){case 0:ke=new AbortController,je=createTakePattern(ve,ke.signal),ze.label=1;case 1:return ze.trys.push([1,3,4,5]),_e.pending.add(ke),[4,Promise.resolve(_e.effect($e,assign$1({},Ie,{getOriginalState:Fe,condition:function(Xe,Je){return je(Xe,Je).then(Boolean)},take:je,delay:createDelay(ke.signal),pause:createPause(ke.signal),extra:oe,signal:ke.signal,fork:createFork(ke.signal),unsubscribe:_e.unsubscribe,subscribe:function(){ne.set(_e.id,_e)},cancelActiveListeners:function(){_e.pending.forEach(function(Xe,Je,nt){Xe!==ke&&(abortControllerWithReason(Xe,listenerCancelled),nt.delete(Xe))})}})))];case 2:return ze.sent(),[3,5];case 3:return We=ze.sent(),We instanceof TaskAbortError||safelyNotifyError(ue,We,{raisedBy:"effect"}),[3,5];case 4:return abortControllerWithReason(ke,listenerCompleted),_e.pending.delete(ke),[7];case 5:return[2]}})})},ye=createClearListenerMiddleware(ne),xe=function(_e){return function($e){return function(Ie){if(!isAction(Ie))return $e(Ie);if(addListener.match(Ie))return ve(Ie.payload);if(clearAllListeners.match(Ie)){ye();return}if(removeListener.match(Ie))return me(Ie.payload);var Fe=_e.getState(),ke=function(){if(Fe===INTERNAL_NIL_TOKEN)throw new Error(alm+": getOriginalState can only be called synchronously");return Fe},je;try{if(je=$e(Ie),ne.size>0)for(var We=_e.getState(),ze=Array.from(ne.values()),Xe=0,Je=ze;Xe<Je.length;Xe++){var nt=Je[Xe],et=!1;try{et=nt.predicate(Ie,We,Fe)}catch(tt){et=!1,safelyNotifyError(ue,tt,{raisedBy:"predicate"})}et&&ge(nt,Ie,_e,ke)}}finally{Fe=INTERNAL_NIL_TOKEN}return je}}};return{middleware:xe,startListening:ve,stopListening:me,clearListeners:ye}}var promise;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);F$2();var isNumeric$1=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER$2=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function clone(K){var J,ne,oe,ce=je.prototype={constructor:je,toString:null,valueOf:null},ue=new je(1),Ae=20,pe=4,ve=-7,me=21,ge=-1e7,ye=1e7,xe=!1,_e=1,$e=0,Ie={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Fe="0123456789abcdefghijklmnopqrstuvwxyz",ke=!0;function je(et,tt){var st,qe,Se,Re,Be,Ne,Ue,Ge,Ye=this;if(!(Ye instanceof je))return new je(et,tt);if(tt==null){if(et&&et._isBigNumber===!0){Ye.s=et.s,!et.c||et.e>ye?Ye.c=Ye.e=null:et.e<ge?Ye.c=[Ye.e=0]:(Ye.e=et.e,Ye.c=et.c.slice());return}if((Ne=typeof et=="number")&&et*0==0){if(Ye.s=1/et<0?(et=-et,-1):1,et===~~et){for(Re=0,Be=et;Be>=10;Be/=10,Re++);Re>ye?Ye.c=Ye.e=null:(Ye.e=Re,Ye.c=[et]);return}Ge=String(et)}else{if(!isNumeric$1.test(Ge=String(et)))return oe(Ye,Ge,Ne);Ye.s=Ge.charCodeAt(0)==45?(Ge=Ge.slice(1),-1):1}(Re=Ge.indexOf("."))>-1&&(Ge=Ge.replace(".","")),(Be=Ge.search(/e/i))>0?(Re<0&&(Re=Be),Re+=+Ge.slice(Be+1),Ge=Ge.substring(0,Be)):Re<0&&(Re=Ge.length)}else{if(intCheck(tt,2,Fe.length,"Base"),tt==10&&ke)return Ye=new je(et),Je(Ye,Ae+Ye.e+1,pe);if(Ge=String(et),Ne=typeof et=="number"){if(et*0!=0)return oe(Ye,Ge,Ne,tt);if(Ye.s=1/et<0?(Ge=Ge.slice(1),-1):1,je.DEBUG&&Ge.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits+et)}else Ye.s=Ge.charCodeAt(0)===45?(Ge=Ge.slice(1),-1):1;for(st=Fe.slice(0,tt),Re=Be=0,Ue=Ge.length;Be<Ue;Be++)if(st.indexOf(qe=Ge.charAt(Be))<0){if(qe=="."){if(Be>Re){Re=Ue;continue}}else if(!Se&&(Ge==Ge.toUpperCase()&&(Ge=Ge.toLowerCase())||Ge==Ge.toLowerCase()&&(Ge=Ge.toUpperCase()))){Se=!0,Be=-1,Re=0;continue}return oe(Ye,String(et),Ne,tt)}Ne=!1,Ge=ne(Ge,tt,10,Ye.s),(Re=Ge.indexOf("."))>-1?Ge=Ge.replace(".",""):Re=Ge.length}for(Be=0;Ge.charCodeAt(Be)===48;Be++);for(Ue=Ge.length;Ge.charCodeAt(--Ue)===48;);if(Ge=Ge.slice(Be,++Ue)){if(Ue-=Be,Ne&&je.DEBUG&&Ue>15&&(et>MAX_SAFE_INTEGER$2||et!==mathfloor(et)))throw Error(tooManyDigits+Ye.s*et);if((Re=Re-Be-1)>ye)Ye.c=Ye.e=null;else if(Re<ge)Ye.c=[Ye.e=0];else{if(Ye.e=Re,Ye.c=[],Be=(Re+1)%LOG_BASE,Re<0&&(Be+=LOG_BASE),Be<Ue){for(Be&&Ye.c.push(+Ge.slice(0,Be)),Ue-=LOG_BASE;Be<Ue;)Ye.c.push(+Ge.slice(Be,Be+=LOG_BASE));Be=LOG_BASE-(Ge=Ge.slice(Be)).length}else Be-=Ue;for(;Be--;Ge+="0");Ye.c.push(+Ge)}}else Ye.c=[Ye.e=0]}je.clone=clone,je.ROUND_UP=0,je.ROUND_DOWN=1,je.ROUND_CEIL=2,je.ROUND_FLOOR=3,je.ROUND_HALF_UP=4,je.ROUND_HALF_DOWN=5,je.ROUND_HALF_EVEN=6,je.ROUND_HALF_CEIL=7,je.ROUND_HALF_FLOOR=8,je.EUCLID=9,je.config=je.set=function(et){var tt,st;if(et!=null)if(typeof et=="object"){if(et.hasOwnProperty(tt="DECIMAL_PLACES")&&(st=et[tt],intCheck(st,0,MAX,tt),Ae=st),et.hasOwnProperty(tt="ROUNDING_MODE")&&(st=et[tt],intCheck(st,0,8,tt),pe=st),et.hasOwnProperty(tt="EXPONENTIAL_AT")&&(st=et[tt],st&&st.pop?(intCheck(st[0],-MAX,0,tt),intCheck(st[1],0,MAX,tt),ve=st[0],me=st[1]):(intCheck(st,-MAX,MAX,tt),ve=-(me=st<0?-st:st))),et.hasOwnProperty(tt="RANGE"))if(st=et[tt],st&&st.pop)intCheck(st[0],-MAX,-1,tt),intCheck(st[1],1,MAX,tt),ge=st[0],ye=st[1];else if(intCheck(st,-MAX,MAX,tt),st)ge=-(ye=st<0?-st:st);else throw Error(bignumberError+tt+" cannot be zero: "+st);if(et.hasOwnProperty(tt="CRYPTO"))if(st=et[tt],st===!!st)if(st)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))xe=st;else throw xe=!st,Error(bignumberError+"crypto unavailable");else xe=st;else throw Error(bignumberError+tt+" not true or false: "+st);if(et.hasOwnProperty(tt="MODULO_MODE")&&(st=et[tt],intCheck(st,0,9,tt),_e=st),et.hasOwnProperty(tt="POW_PRECISION")&&(st=et[tt],intCheck(st,0,MAX,tt),$e=st),et.hasOwnProperty(tt="FORMAT"))if(st=et[tt],typeof st=="object")Ie=st;else throw Error(bignumberError+tt+" not an object: "+st);if(et.hasOwnProperty(tt="ALPHABET"))if(st=et[tt],typeof st=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(st))ke=st.slice(0,10)=="0123456789",Fe=st;else throw Error(bignumberError+tt+" invalid: "+st)}else throw Error(bignumberError+"Object expected: "+et);return{DECIMAL_PLACES:Ae,ROUNDING_MODE:pe,EXPONENTIAL_AT:[ve,me],RANGE:[ge,ye],CRYPTO:xe,MODULO_MODE:_e,POW_PRECISION:$e,FORMAT:Ie,ALPHABET:Fe}},je.isBigNumber=function(et){if(!et||et._isBigNumber!==!0)return!1;if(!je.DEBUG)return!0;var tt,st,qe=et.c,Se=et.e,Re=et.s;e:if({}.toString.call(qe)=="[object Array]"){if((Re===1||Re===-1)&&Se>=-MAX&&Se<=MAX&&Se===mathfloor(Se)){if(qe[0]===0){if(Se===0&&qe.length===1)return!0;break e}if(tt=(Se+1)%LOG_BASE,tt<1&&(tt+=LOG_BASE),String(qe[0]).length==tt){for(tt=0;tt<qe.length;tt++)if(st=qe[tt],st<0||st>=BASE||st!==mathfloor(st))break e;if(st!==0)return!0}}}else if(qe===null&&Se===null&&(Re===null||Re===1||Re===-1))return!0;throw Error(bignumberError+"Invalid BigNumber: "+et)},je.maximum=je.max=function(){return ze(arguments,-1)},je.minimum=je.min=function(){return ze(arguments,1)},je.random=function(){var et=9007199254740992,tt=Math.random()*et&2097151?function(){return mathfloor(Math.random()*et)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(st){var qe,Se,Re,Be,Ne,Ue=0,Ge=[],Ye=new je(ue);if(st==null?st=Ae:intCheck(st,0,MAX),Be=mathceil(st/LOG_BASE),xe)if(crypto.getRandomValues){for(qe=crypto.getRandomValues(new Uint32Array(Be*=2));Ue<Be;)Ne=qe[Ue]*131072+(qe[Ue+1]>>>11),Ne>=9e15?(Se=crypto.getRandomValues(new Uint32Array(2)),qe[Ue]=Se[0],qe[Ue+1]=Se[1]):(Ge.push(Ne%1e14),Ue+=2);Ue=Be/2}else if(crypto.randomBytes){for(qe=crypto.randomBytes(Be*=7);Ue<Be;)Ne=(qe[Ue]&31)*281474976710656+qe[Ue+1]*1099511627776+qe[Ue+2]*4294967296+qe[Ue+3]*16777216+(qe[Ue+4]<<16)+(qe[Ue+5]<<8)+qe[Ue+6],Ne>=9e15?crypto.randomBytes(7).copy(qe,Ue):(Ge.push(Ne%1e14),Ue+=7);Ue=Be/7}else throw xe=!1,Error(bignumberError+"crypto unavailable");if(!xe)for(;Ue<Be;)Ne=tt(),Ne<9e15&&(Ge[Ue++]=Ne%1e14);for(Be=Ge[--Ue],st%=LOG_BASE,Be&&st&&(Ne=POWS_TEN[LOG_BASE-st],Ge[Ue]=mathfloor(Be/Ne)*Ne);Ge[Ue]===0;Ge.pop(),Ue--);if(Ue<0)Ge=[Re=0];else{for(Re=-1;Ge[0]===0;Ge.splice(0,1),Re-=LOG_BASE);for(Ue=1,Ne=Ge[0];Ne>=10;Ne/=10,Ue++);Ue<LOG_BASE&&(Re-=LOG_BASE-Ue)}return Ye.e=Re,Ye.c=Ge,Ye}}(),je.sum=function(){for(var et=1,tt=arguments,st=new je(tt[0]);et<tt.length;)st=st.plus(tt[et++]);return st},ne=function(){var et="0123456789";function tt(st,qe,Se,Re){for(var Be,Ne=[0],Ue,Ge=0,Ye=st.length;Ge<Ye;){for(Ue=Ne.length;Ue--;Ne[Ue]*=qe);for(Ne[0]+=Re.indexOf(st.charAt(Ge++)),Be=0;Be<Ne.length;Be++)Ne[Be]>Se-1&&(Ne[Be+1]==null&&(Ne[Be+1]=0),Ne[Be+1]+=Ne[Be]/Se|0,Ne[Be]%=Se)}return Ne.reverse()}return function(st,qe,Se,Re,Be){var Ne,Ue,Ge,Ye,Qe,Te,Ke,rt,it=st.indexOf("."),at=Ae,lt=pe;for(it>=0&&(Ye=$e,$e=0,st=st.replace(".",""),rt=new je(qe),Te=rt.pow(st.length-it),$e=Ye,rt.c=tt(toFixedPoint(coeffToString(Te.c),Te.e,"0"),10,Se,et),rt.e=rt.c.length),Ke=tt(st,qe,Se,Be?(Ne=Fe,et):(Ne=et,Fe)),Ge=Ye=Ke.length;Ke[--Ye]==0;Ke.pop());if(!Ke[0])return Ne.charAt(0);if(it<0?--Ge:(Te.c=Ke,Te.e=Ge,Te.s=Re,Te=J(Te,rt,at,lt,Se),Ke=Te.c,Qe=Te.r,Ge=Te.e),Ue=Ge+at+1,it=Ke[Ue],Ye=Se/2,Qe=Qe||Ue<0||Ke[Ue+1]!=null,Qe=lt<4?(it!=null||Qe)&&(lt==0||lt==(Te.s<0?3:2)):it>Ye||it==Ye&&(lt==4||Qe||lt==6&&Ke[Ue-1]&1||lt==(Te.s<0?8:7)),Ue<1||!Ke[0])st=Qe?toFixedPoint(Ne.charAt(1),-at,Ne.charAt(0)):Ne.charAt(0);else{if(Ke.length=Ue,Qe)for(--Se;++Ke[--Ue]>Se;)Ke[Ue]=0,Ue||(++Ge,Ke=[1].concat(Ke));for(Ye=Ke.length;!Ke[--Ye];);for(it=0,st="";it<=Ye;st+=Ne.charAt(Ke[it++]));st=toFixedPoint(st,Ge,Ne.charAt(0))}return st}}(),J=function(){function et(qe,Se,Re){var Be,Ne,Ue,Ge,Ye=0,Qe=qe.length,Te=Se%SQRT_BASE,Ke=Se/SQRT_BASE|0;for(qe=qe.slice();Qe--;)Ue=qe[Qe]%SQRT_BASE,Ge=qe[Qe]/SQRT_BASE|0,Be=Ke*Ue+Ge*Te,Ne=Te*Ue+Be%SQRT_BASE*SQRT_BASE+Ye,Ye=(Ne/Re|0)+(Be/SQRT_BASE|0)+Ke*Ge,qe[Qe]=Ne%Re;return Ye&&(qe=[Ye].concat(qe)),qe}function tt(qe,Se,Re,Be){var Ne,Ue;if(Re!=Be)Ue=Re>Be?1:-1;else for(Ne=Ue=0;Ne<Re;Ne++)if(qe[Ne]!=Se[Ne]){Ue=qe[Ne]>Se[Ne]?1:-1;break}return Ue}function st(qe,Se,Re,Be){for(var Ne=0;Re--;)qe[Re]-=Ne,Ne=qe[Re]<Se[Re]?1:0,qe[Re]=Ne*Be+qe[Re]-Se[Re];for(;!qe[0]&&qe.length>1;qe.splice(0,1));}return function(qe,Se,Re,Be,Ne){var Ue,Ge,Ye,Qe,Te,Ke,rt,it,at,lt,ct,ot,ft,dt,mt,kt,wt,Et=qe.s==Se.s?1:-1,Ot=qe.c,Rt=Se.c;if(!Ot||!Ot[0]||!Rt||!Rt[0])return new je(!qe.s||!Se.s||(Ot?Rt&&Ot[0]==Rt[0]:!Rt)?NaN:Ot&&Ot[0]==0||!Rt?Et*0:Et/0);for(it=new je(Et),at=it.c=[],Ge=qe.e-Se.e,Et=Re+Ge+1,Ne||(Ne=BASE,Ge=bitFloor(qe.e/LOG_BASE)-bitFloor(Se.e/LOG_BASE),Et=Et/LOG_BASE|0),Ye=0;Rt[Ye]==(Ot[Ye]||0);Ye++);if(Rt[Ye]>(Ot[Ye]||0)&&Ge--,Et<0)at.push(1),Qe=!0;else{for(dt=Ot.length,kt=Rt.length,Ye=0,Et+=2,Te=mathfloor(Ne/(Rt[0]+1)),Te>1&&(Rt=et(Rt,Te,Ne),Ot=et(Ot,Te,Ne),kt=Rt.length,dt=Ot.length),ft=kt,lt=Ot.slice(0,kt),ct=lt.length;ct<kt;lt[ct++]=0);wt=Rt.slice(),wt=[0].concat(wt),mt=Rt[0],Rt[1]>=Ne/2&&mt++;do{if(Te=0,Ue=tt(Rt,lt,kt,ct),Ue<0){if(ot=lt[0],kt!=ct&&(ot=ot*Ne+(lt[1]||0)),Te=mathfloor(ot/mt),Te>1)for(Te>=Ne&&(Te=Ne-1),Ke=et(Rt,Te,Ne),rt=Ke.length,ct=lt.length;tt(Ke,lt,rt,ct)==1;)Te--,st(Ke,kt<rt?wt:Rt,rt,Ne),rt=Ke.length,Ue=1;else Te==0&&(Ue=Te=1),Ke=Rt.slice(),rt=Ke.length;if(rt<ct&&(Ke=[0].concat(Ke)),st(lt,Ke,ct,Ne),ct=lt.length,Ue==-1)for(;tt(Rt,lt,kt,ct)<1;)Te++,st(lt,kt<ct?wt:Rt,ct,Ne),ct=lt.length}else Ue===0&&(Te++,lt=[0]);at[Ye++]=Te,lt[0]?lt[ct++]=Ot[ft]||0:(lt=[Ot[ft]],ct=1)}while((ft++<dt||lt[0]!=null)&&Et--);Qe=lt[0]!=null,at[0]||at.splice(0,1)}if(Ne==BASE){for(Ye=1,Et=at[0];Et>=10;Et/=10,Ye++);Je(it,Re+(it.e=Ye+Ge*LOG_BASE-1)+1,Be,Qe)}else it.e=Ge,it.r=+Qe;return it}}();function We(et,tt,st,qe){var Se,Re,Be,Ne,Ue;if(st==null?st=pe:intCheck(st,0,8),!et.c)return et.toString();if(Se=et.c[0],Be=et.e,tt==null)Ue=coeffToString(et.c),Ue=qe==1||qe==2&&(Be<=ve||Be>=me)?toExponential(Ue,Be):toFixedPoint(Ue,Be,"0");else if(et=Je(new je(et),tt,st),Re=et.e,Ue=coeffToString(et.c),Ne=Ue.length,qe==1||qe==2&&(tt<=Re||Re<=ve)){for(;Ne<tt;Ue+="0",Ne++);Ue=toExponential(Ue,Re)}else if(tt-=Be,Ue=toFixedPoint(Ue,Re,"0"),Re+1>Ne){if(--tt>0)for(Ue+=".";tt--;Ue+="0");}else if(tt+=Re-Ne,tt>0)for(Re+1==Ne&&(Ue+=".");tt--;Ue+="0");return et.s<0&&Se?"-"+Ue:Ue}function ze(et,tt){for(var st,qe,Se=1,Re=new je(et[0]);Se<et.length;Se++)qe=new je(et[Se]),(!qe.s||(st=compare$1(Re,qe))===tt||st===0&&Re.s===tt)&&(Re=qe);return Re}function Xe(et,tt,st){for(var qe=1,Se=tt.length;!tt[--Se];tt.pop());for(Se=tt[0];Se>=10;Se/=10,qe++);return(st=qe+st*LOG_BASE-1)>ye?et.c=et.e=null:st<ge?et.c=[et.e=0]:(et.e=st,et.c=tt),et}oe=function(){var et=/^(-?)0([xbo])(?=\w[\w.]*$)/i,tt=/^([^.]+)\.$/,st=/^\.([^.]+)$/,qe=/^-?(Infinity|NaN)$/,Se=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Re,Be,Ne,Ue){var Ge,Ye=Ne?Be:Be.replace(Se,"");if(qe.test(Ye))Re.s=isNaN(Ye)?null:Ye<0?-1:1;else{if(!Ne&&(Ye=Ye.replace(et,function(Qe,Te,Ke){return Ge=(Ke=Ke.toLowerCase())=="x"?16:Ke=="b"?2:8,!Ue||Ue==Ge?Te:Qe}),Ue&&(Ge=Ue,Ye=Ye.replace(tt,"$1").replace(st,"0.$1")),Be!=Ye))return new je(Ye,Ge);if(je.DEBUG)throw Error(bignumberError+"Not a"+(Ue?" base "+Ue:"")+" number: "+Be);Re.s=null}Re.c=Re.e=null}}();function Je(et,tt,st,qe){var Se,Re,Be,Ne,Ue,Ge,Ye,Qe=et.c,Te=POWS_TEN;if(Qe){e:{for(Se=1,Ne=Qe[0];Ne>=10;Ne/=10,Se++);if(Re=tt-Se,Re<0)Re+=LOG_BASE,Be=tt,Ue=Qe[Ge=0],Ye=mathfloor(Ue/Te[Se-Be-1]%10);else if(Ge=mathceil((Re+1)/LOG_BASE),Ge>=Qe.length)if(qe){for(;Qe.length<=Ge;Qe.push(0));Ue=Ye=0,Se=1,Re%=LOG_BASE,Be=Re-LOG_BASE+1}else break e;else{for(Ue=Ne=Qe[Ge],Se=1;Ne>=10;Ne/=10,Se++);Re%=LOG_BASE,Be=Re-LOG_BASE+Se,Ye=Be<0?0:mathfloor(Ue/Te[Se-Be-1]%10)}if(qe=qe||tt<0||Qe[Ge+1]!=null||(Be<0?Ue:Ue%Te[Se-Be-1]),qe=st<4?(Ye||qe)&&(st==0||st==(et.s<0?3:2)):Ye>5||Ye==5&&(st==4||qe||st==6&&(Re>0?Be>0?Ue/Te[Se-Be]:0:Qe[Ge-1])%10&1||st==(et.s<0?8:7)),tt<1||!Qe[0])return Qe.length=0,qe?(tt-=et.e+1,Qe[0]=Te[(LOG_BASE-tt%LOG_BASE)%LOG_BASE],et.e=-tt||0):Qe[0]=et.e=0,et;if(Re==0?(Qe.length=Ge,Ne=1,Ge--):(Qe.length=Ge+1,Ne=Te[LOG_BASE-Re],Qe[Ge]=Be>0?mathfloor(Ue/Te[Se-Be]%Te[Be])*Ne:0),qe)for(;;)if(Ge==0){for(Re=1,Be=Qe[0];Be>=10;Be/=10,Re++);for(Be=Qe[0]+=Ne,Ne=1;Be>=10;Be/=10,Ne++);Re!=Ne&&(et.e++,Qe[0]==BASE&&(Qe[0]=1));break}else{if(Qe[Ge]+=Ne,Qe[Ge]!=BASE)break;Qe[Ge--]=0,Ne=1}for(Re=Qe.length;Qe[--Re]===0;Qe.pop());}et.e>ye?et.c=et.e=null:et.e<ge&&(et.c=[et.e=0])}return et}function nt(et){var tt,st=et.e;return st===null?et.toString():(tt=coeffToString(et.c),tt=st<=ve||st>=me?toExponential(tt,st):toFixedPoint(tt,st,"0"),et.s<0?"-"+tt:tt)}return ce.absoluteValue=ce.abs=function(){var et=new je(this);return et.s<0&&(et.s=1),et},ce.comparedTo=function(et,tt){return compare$1(this,new je(et,tt))},ce.decimalPlaces=ce.dp=function(et,tt){var st,qe,Se,Re=this;if(et!=null)return intCheck(et,0,MAX),tt==null?tt=pe:intCheck(tt,0,8),Je(new je(Re),et+Re.e+1,tt);if(!(st=Re.c))return null;if(qe=((Se=st.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE,Se=st[Se])for(;Se%10==0;Se/=10,qe--);return qe<0&&(qe=0),qe},ce.dividedBy=ce.div=function(et,tt){return J(this,new je(et,tt),Ae,pe)},ce.dividedToIntegerBy=ce.idiv=function(et,tt){return J(this,new je(et,tt),0,1)},ce.exponentiatedBy=ce.pow=function(et,tt){var st,qe,Se,Re,Be,Ne,Ue,Ge,Ye,Qe=this;if(et=new je(et),et.c&&!et.isInteger())throw Error(bignumberError+"Exponent not an integer: "+nt(et));if(tt!=null&&(tt=new je(tt)),Ne=et.e>14,!Qe.c||!Qe.c[0]||Qe.c[0]==1&&!Qe.e&&Qe.c.length==1||!et.c||!et.c[0])return Ye=new je(Math.pow(+nt(Qe),Ne?et.s*(2-isOdd(et)):+nt(et))),tt?Ye.mod(tt):Ye;if(Ue=et.s<0,tt){if(tt.c?!tt.c[0]:!tt.s)return new je(NaN);qe=!Ue&&Qe.isInteger()&&tt.isInteger(),qe&&(Qe=Qe.mod(tt))}else{if(et.e>9&&(Qe.e>0||Qe.e<-1||(Qe.e==0?Qe.c[0]>1||Ne&&Qe.c[1]>=24e7:Qe.c[0]<8e13||Ne&&Qe.c[0]<=9999975e7)))return Re=Qe.s<0&&isOdd(et)?-0:0,Qe.e>-1&&(Re=1/Re),new je(Ue?1/Re:Re);$e&&(Re=mathceil($e/LOG_BASE+2))}for(Ne?(st=new je(.5),Ue&&(et.s=1),Ge=isOdd(et)):(Se=Math.abs(+nt(et)),Ge=Se%2),Ye=new je(ue);;){if(Ge){if(Ye=Ye.times(Qe),!Ye.c)break;Re?Ye.c.length>Re&&(Ye.c.length=Re):qe&&(Ye=Ye.mod(tt))}if(Se){if(Se=mathfloor(Se/2),Se===0)break;Ge=Se%2}else if(et=et.times(st),Je(et,et.e+1,1),et.e>14)Ge=isOdd(et);else{if(Se=+nt(et),Se===0)break;Ge=Se%2}Qe=Qe.times(Qe),Re?Qe.c&&Qe.c.length>Re&&(Qe.c.length=Re):qe&&(Qe=Qe.mod(tt))}return qe?Ye:(Ue&&(Ye=ue.div(Ye)),tt?Ye.mod(tt):Re?Je(Ye,$e,pe,Be):Ye)},ce.integerValue=function(et){var tt=new je(this);return et==null?et=pe:intCheck(et,0,8),Je(tt,tt.e+1,et)},ce.isEqualTo=ce.eq=function(et,tt){return compare$1(this,new je(et,tt))===0},ce.isFinite=function(){return!!this.c},ce.isGreaterThan=ce.gt=function(et,tt){return compare$1(this,new je(et,tt))>0},ce.isGreaterThanOrEqualTo=ce.gte=function(et,tt){return(tt=compare$1(this,new je(et,tt)))===1||tt===0},ce.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2},ce.isLessThan=ce.lt=function(et,tt){return compare$1(this,new je(et,tt))<0},ce.isLessThanOrEqualTo=ce.lte=function(et,tt){return(tt=compare$1(this,new je(et,tt)))===-1||tt===0},ce.isNaN=function(){return!this.s},ce.isNegative=function(){return this.s<0},ce.isPositive=function(){return this.s>0},ce.isZero=function(){return!!this.c&&this.c[0]==0},ce.minus=function(et,tt){var st,qe,Se,Re,Be=this,Ne=Be.s;if(et=new je(et,tt),tt=et.s,!Ne||!tt)return new je(NaN);if(Ne!=tt)return et.s=-tt,Be.plus(et);var Ue=Be.e/LOG_BASE,Ge=et.e/LOG_BASE,Ye=Be.c,Qe=et.c;if(!Ue||!Ge){if(!Ye||!Qe)return Ye?(et.s=-tt,et):new je(Qe?Be:NaN);if(!Ye[0]||!Qe[0])return Qe[0]?(et.s=-tt,et):new je(Ye[0]?Be:pe==3?-0:0)}if(Ue=bitFloor(Ue),Ge=bitFloor(Ge),Ye=Ye.slice(),Ne=Ue-Ge){for((Re=Ne<0)?(Ne=-Ne,Se=Ye):(Ge=Ue,Se=Qe),Se.reverse(),tt=Ne;tt--;Se.push(0));Se.reverse()}else for(qe=(Re=(Ne=Ye.length)<(tt=Qe.length))?Ne:tt,Ne=tt=0;tt<qe;tt++)if(Ye[tt]!=Qe[tt]){Re=Ye[tt]<Qe[tt];break}if(Re&&(Se=Ye,Ye=Qe,Qe=Se,et.s=-et.s),tt=(qe=Qe.length)-(st=Ye.length),tt>0)for(;tt--;Ye[st++]=0);for(tt=BASE-1;qe>Ne;){if(Ye[--qe]<Qe[qe]){for(st=qe;st&&!Ye[--st];Ye[st]=tt);--Ye[st],Ye[qe]+=BASE}Ye[qe]-=Qe[qe]}for(;Ye[0]==0;Ye.splice(0,1),--Ge);return Ye[0]?Xe(et,Ye,Ge):(et.s=pe==3?-1:1,et.c=[et.e=0],et)},ce.modulo=ce.mod=function(et,tt){var st,qe,Se=this;return et=new je(et,tt),!Se.c||!et.s||et.c&&!et.c[0]?new je(NaN):!et.c||Se.c&&!Se.c[0]?new je(Se):(_e==9?(qe=et.s,et.s=1,st=J(Se,et,0,3),et.s=qe,st.s*=qe):st=J(Se,et,0,_e),et=Se.minus(st.times(et)),!et.c[0]&&_e==1&&(et.s=Se.s),et)},ce.multipliedBy=ce.times=function(et,tt){var st,qe,Se,Re,Be,Ne,Ue,Ge,Ye,Qe,Te,Ke,rt,it,at,lt=this,ct=lt.c,ot=(et=new je(et,tt)).c;if(!ct||!ot||!ct[0]||!ot[0])return!lt.s||!et.s||ct&&!ct[0]&&!ot||ot&&!ot[0]&&!ct?et.c=et.e=et.s=null:(et.s*=lt.s,!ct||!ot?et.c=et.e=null:(et.c=[0],et.e=0)),et;for(qe=bitFloor(lt.e/LOG_BASE)+bitFloor(et.e/LOG_BASE),et.s*=lt.s,Ue=ct.length,Qe=ot.length,Ue<Qe&&(rt=ct,ct=ot,ot=rt,Se=Ue,Ue=Qe,Qe=Se),Se=Ue+Qe,rt=[];Se--;rt.push(0));for(it=BASE,at=SQRT_BASE,Se=Qe;--Se>=0;){for(st=0,Te=ot[Se]%at,Ke=ot[Se]/at|0,Be=Ue,Re=Se+Be;Re>Se;)Ge=ct[--Be]%at,Ye=ct[Be]/at|0,Ne=Ke*Ge+Ye*Te,Ge=Te*Ge+Ne%at*at+rt[Re]+st,st=(Ge/it|0)+(Ne/at|0)+Ke*Ye,rt[Re--]=Ge%it;rt[Re]=st}return st?++qe:rt.splice(0,1),Xe(et,rt,qe)},ce.negated=function(){var et=new je(this);return et.s=-et.s||null,et},ce.plus=function(et,tt){var st,qe=this,Se=qe.s;if(et=new je(et,tt),tt=et.s,!Se||!tt)return new je(NaN);if(Se!=tt)return et.s=-tt,qe.minus(et);var Re=qe.e/LOG_BASE,Be=et.e/LOG_BASE,Ne=qe.c,Ue=et.c;if(!Re||!Be){if(!Ne||!Ue)return new je(Se/0);if(!Ne[0]||!Ue[0])return Ue[0]?et:new je(Ne[0]?qe:Se*0)}if(Re=bitFloor(Re),Be=bitFloor(Be),Ne=Ne.slice(),Se=Re-Be){for(Se>0?(Be=Re,st=Ue):(Se=-Se,st=Ne),st.reverse();Se--;st.push(0));st.reverse()}for(Se=Ne.length,tt=Ue.length,Se-tt<0&&(st=Ue,Ue=Ne,Ne=st,tt=Se),Se=0;tt;)Se=(Ne[--tt]=Ne[tt]+Ue[tt]+Se)/BASE|0,Ne[tt]=BASE===Ne[tt]?0:Ne[tt]%BASE;return Se&&(Ne=[Se].concat(Ne),++Be),Xe(et,Ne,Be)},ce.precision=ce.sd=function(et,tt){var st,qe,Se,Re=this;if(et!=null&&et!==!!et)return intCheck(et,1,MAX),tt==null?tt=pe:intCheck(tt,0,8),Je(new je(Re),et,tt);if(!(st=Re.c))return null;if(Se=st.length-1,qe=Se*LOG_BASE+1,Se=st[Se]){for(;Se%10==0;Se/=10,qe--);for(Se=st[0];Se>=10;Se/=10,qe++);}return et&&Re.e+1>qe&&(qe=Re.e+1),qe},ce.shiftedBy=function(et){return intCheck(et,-MAX_SAFE_INTEGER$2,MAX_SAFE_INTEGER$2),this.times("1e"+et)},ce.squareRoot=ce.sqrt=function(){var et,tt,st,qe,Se,Re=this,Be=Re.c,Ne=Re.s,Ue=Re.e,Ge=Ae+4,Ye=new je("0.5");if(Ne!==1||!Be||!Be[0])return new je(!Ne||Ne<0&&(!Be||Be[0])?NaN:Be?Re:1/0);if(Ne=Math.sqrt(+nt(Re)),Ne==0||Ne==1/0?(tt=coeffToString(Be),(tt.length+Ue)%2==0&&(tt+="0"),Ne=Math.sqrt(+tt),Ue=bitFloor((Ue+1)/2)-(Ue<0||Ue%2),Ne==1/0?tt="5e"+Ue:(tt=Ne.toExponential(),tt=tt.slice(0,tt.indexOf("e")+1)+Ue),st=new je(tt)):st=new je(Ne+""),st.c[0]){for(Ue=st.e,Ne=Ue+Ge,Ne<3&&(Ne=0);;)if(Se=st,st=Ye.times(Se.plus(J(Re,Se,Ge,1))),coeffToString(Se.c).slice(0,Ne)===(tt=coeffToString(st.c)).slice(0,Ne))if(st.e<Ue&&--Ne,tt=tt.slice(Ne-3,Ne+1),tt=="9999"||!qe&&tt=="4999"){if(!qe&&(Je(Se,Se.e+Ae+2,0),Se.times(Se).eq(Re))){st=Se;break}Ge+=4,Ne+=4,qe=1}else{(!+tt||!+tt.slice(1)&&tt.charAt(0)=="5")&&(Je(st,st.e+Ae+2,1),et=!st.times(st).eq(Re));break}}return Je(st,st.e+Ae+1,pe,et)},ce.toExponential=function(et,tt){return et!=null&&(intCheck(et,0,MAX),et++),We(this,et,tt,1)},ce.toFixed=function(et,tt){return et!=null&&(intCheck(et,0,MAX),et=et+this.e+1),We(this,et,tt)},ce.toFormat=function(et,tt,st){var qe,Se=this;if(st==null)et!=null&&tt&&typeof tt=="object"?(st=tt,tt=null):et&&typeof et=="object"?(st=et,et=tt=null):st=Ie;else if(typeof st!="object")throw Error(bignumberError+"Argument not an object: "+st);if(qe=Se.toFixed(et,tt),Se.c){var Re,Be=qe.split("."),Ne=+st.groupSize,Ue=+st.secondaryGroupSize,Ge=st.groupSeparator||"",Ye=Be[0],Qe=Be[1],Te=Se.s<0,Ke=Te?Ye.slice(1):Ye,rt=Ke.length;if(Ue&&(Re=Ne,Ne=Ue,Ue=Re,rt-=Re),Ne>0&&rt>0){for(Re=rt%Ne||Ne,Ye=Ke.substr(0,Re);Re<rt;Re+=Ne)Ye+=Ge+Ke.substr(Re,Ne);Ue>0&&(Ye+=Ge+Ke.slice(Re)),Te&&(Ye="-"+Ye)}qe=Qe?Ye+(st.decimalSeparator||"")+((Ue=+st.fractionGroupSize)?Qe.replace(new RegExp("\\d{"+Ue+"}\\B","g"),"$&"+(st.fractionGroupSeparator||"")):Qe):Ye}return(st.prefix||"")+qe+(st.suffix||"")},ce.toFraction=function(et){var tt,st,qe,Se,Re,Be,Ne,Ue,Ge,Ye,Qe,Te,Ke=this,rt=Ke.c;if(et!=null&&(Ne=new je(et),!Ne.isInteger()&&(Ne.c||Ne.s!==1)||Ne.lt(ue)))throw Error(bignumberError+"Argument "+(Ne.isInteger()?"out of range: ":"not an integer: ")+nt(Ne));if(!rt)return new je(Ke);for(tt=new je(ue),Ge=st=new je(ue),qe=Ue=new je(ue),Te=coeffToString(rt),Re=tt.e=Te.length-Ke.e-1,tt.c[0]=POWS_TEN[(Be=Re%LOG_BASE)<0?LOG_BASE+Be:Be],et=!et||Ne.comparedTo(tt)>0?Re>0?tt:Ge:Ne,Be=ye,ye=1/0,Ne=new je(Te),Ue.c[0]=0;Ye=J(Ne,tt,0,1),Se=st.plus(Ye.times(qe)),Se.comparedTo(et)!=1;)st=qe,qe=Se,Ge=Ue.plus(Ye.times(Se=Ge)),Ue=Se,tt=Ne.minus(Ye.times(Se=tt)),Ne=Se;return Se=J(et.minus(st),qe,0,1),Ue=Ue.plus(Se.times(Ge)),st=st.plus(Se.times(qe)),Ue.s=Ge.s=Ke.s,Re=Re*2,Qe=J(Ge,qe,Re,pe).minus(Ke).abs().comparedTo(J(Ue,st,Re,pe).minus(Ke).abs())<1?[Ge,qe]:[Ue,st],ye=Be,Qe},ce.toNumber=function(){return+nt(this)},ce.toPrecision=function(et,tt){return et!=null&&intCheck(et,1,MAX),We(this,et,tt,2)},ce.toString=function(et){var tt,st=this,qe=st.s,Se=st.e;return Se===null?qe?(tt="Infinity",qe<0&&(tt="-"+tt)):tt="NaN":(et==null?tt=Se<=ve||Se>=me?toExponential(coeffToString(st.c),Se):toFixedPoint(coeffToString(st.c),Se,"0"):et===10&&ke?(st=Je(new je(st),Ae+Se+1,pe),tt=toFixedPoint(coeffToString(st.c),st.e,"0")):(intCheck(et,2,Fe.length,"Base"),tt=ne(toFixedPoint(coeffToString(st.c),Se,"0"),10,et,qe,!0)),qe<0&&st.c[0]&&(tt="-"+tt)),tt},ce.valueOf=ce.toJSON=function(){return nt(this)},ce._isBigNumber=!0,ce[Symbol.toStringTag]="BigNumber",ce[Symbol.for("nodejs.util.inspect.custom")]=ce.valueOf,K!=null&&je.set(K),je}function bitFloor(K){var J=K|0;return K>0||K===J?J:J-1}function coeffToString(K){for(var J,ne,oe=1,ce=K.length,ue=K[0]+"";oe<ce;){for(J=K[oe++]+"",ne=LOG_BASE-J.length;ne--;J="0"+J);ue+=J}for(ce=ue.length;ue.charCodeAt(--ce)===48;);return ue.slice(0,ce+1||1)}function compare$1(K,J){var ne,oe,ce=K.c,ue=J.c,Ae=K.s,pe=J.s,ve=K.e,me=J.e;if(!Ae||!pe)return null;if(ne=ce&&!ce[0],oe=ue&&!ue[0],ne||oe)return ne?oe?0:-pe:Ae;if(Ae!=pe)return Ae;if(ne=Ae<0,oe=ve==me,!ce||!ue)return oe?0:!ce^ne?1:-1;if(!oe)return ve>me^ne?1:-1;for(pe=(ve=ce.length)<(me=ue.length)?ve:me,Ae=0;Ae<pe;Ae++)if(ce[Ae]!=ue[Ae])return ce[Ae]>ue[Ae]^ne?1:-1;return ve==me?0:ve>me^ne?1:-1}function intCheck(K,J,ne,oe){if(K<J||K>ne||K!==mathfloor(K))throw Error(bignumberError+(oe||"Argument")+(typeof K=="number"?K<J||K>ne?" out of range: ":" not an integer: ":" not a primitive number: ")+String(K))}function isOdd(K){var J=K.c.length-1;return bitFloor(K.e/LOG_BASE)==J&&K.c[J]%2!=0}function toExponential(K,J){return(K.length>1?K.charAt(0)+"."+K.slice(1):K)+(J<0?"e":"e+")+J}function toFixedPoint(K,J,ne){var oe,ce;if(J<0){for(ce=ne+".";++J;ce+=ne);K=ce+K}else if(oe=K.length,++J>oe){for(ce=ne,J-=oe;--J;ce+=ne);K+=ce}else J<oe&&(K=K.slice(0,J)+"."+K.slice(J));return K}var BigNumber=clone();const initialState$8={headerData:{language:"eng"}},HeaderDataSlice=createSlice({name:"headerData",initialState:initialState$8,reducers:{setLanguage(K,J){K.headerData.language=J.payload}}}),HeaderDataSliceReducer=HeaderDataSlice.reducer,{setLanguage}=HeaderDataSlice.actions;var LoadingStatusesEnum=(K=>(K.INITIAL="INITIAL",K.LOADING="LOADING",K.SUCCESS="SUCCESS",K.ERROR="ERROR",K))(LoadingStatusesEnum||{}),QueryOperatorEnum=(K=>(K.Not="Not",K.And="And",K.Or="Or",K.Nor="Nor",K.Equal="Equal",K.NotEqual="NotEqual",K.Less="Less",K.LessOrEqual="LessOrEqual",K.More="More",K.MoreOrEqual="MoreOrEqual",K.In="In",K.NotIn="NotIn",K.Contains="Contains",K.Size="Size",K.All="All",K.Exists="Exists",K.EndsWith="EndsWith",K.StartsWith="StartsWith",K))(QueryOperatorEnum||{}),RunHandlerStatusCodeEnum=(K=>(K.Empty="Empty",K.Submitted="Submitted",K.Running="Running",K.Paused="Paused",K.Completed="Completed",K.Failed="Failed",K.Cancelled="Cancelled",K))(RunHandlerStatusCodeEnum||{});const handleMouseDown=(K,J)=>{K.stopPropagation();const ne=new CustomEvent("closesearchmenu");document.dispatchEvent(ne);const oe=J[K.button];return oe==null?void 0:oe()},searchByName=(K,J)=>K.toLowerCase().search(J.trimStart().toLowerCase())!==-1,resizePlotly=()=>{window.Plotly&&Array.from(document.querySelectorAll(".plotly-graph-div")).map(K=>K.getAttribute("id")).filter(K=>!!K).forEach(K=>{var J;return(J=window.Plotly)==null?void 0:J.Plots.resize(K)})},getSortTypeByValueType=K=>{switch(K){case"Long":case"Bool":return"basic";case"Int":case"Double":return(J,ne,oe)=>{const ce=J.values[oe],ue=ne.values[oe];return isNaN$1(ce)&&isNaN$1(ue)?0:isNaN$1(ce)?1:isNaN$1(ue)||ce<ue?-1:ce>ue?1:0};case"Time":return(J,ne,oe)=>{const ce=J.values[oe],ue=ne.values[oe];if(!isString$3(ce)&&!isString$3(ue))return 0;if(!isString$3(ce))return 1;if(!isString$3(ue))return-1;const Ae=DateFormatUtility.create(ce,DateFormatEnum.TIME_MS),pe=DateFormatUtility.create(ue,DateFormatEnum.TIME_MS);return Ae.sort(pe)};default:return"alphanumeric"}},getViewersTabs=K=>K.map(({Name:J})=>({id:J,key:J,label:J,isClosable:!1})),toString$4=K=>{if(isNullable(K))return"";if(BigNumber.isBigNumber(K))return K.toString();if(isObject$9(K))return JSON.stringify(K);switch(typeof K){case"bigint":case"number":case"boolean":case"symbol":return K.toString();case"string":return K;default:return""}},isViewOfType=K=>isObject$9(K)&&"_t"in K,getViewerTypeHelper=K=>{if(!isNullable(K)&&isViewOfType(K.ViewOf)){const{_t:J}=K.ViewOf;return J}},isLoading=K=>K.some(J=>J===LoadingStatusesEnum.INITIAL||J===LoadingStatusesEnum.LOADING),isError=K=>K.some(J=>J===LoadingStatusesEnum.ERROR);var isNil=K=>K==null,isFunction$6=K=>typeof K=="function",isNaNNumber=K=>typeof K=="number"&&isNaN(K),isFiniteNumber=K=>typeof K=="number"&&isFinite(K);const multiplyByPowerOfTen=(K,J)=>{if(!isFiniteNumber(K))return NaN;const ne=""+K,oe=ne.indexOf("e");return oe===-1?+(ne+"e"+J):+(ne.slice(0,oe)+"e"+(+ne.slice(oe+1)+J))},log10=K=>Math.round(Math.log(K)*Math.LOG10E),toObject=(K,J)=>{const ne={};for(let oe=0;oe<K.length;++oe)if(oe in K){const[ce,ue]=J(K[oe],oe);ne[ce]=ue}return ne},escapeRegexString=K=>K.replace(/[.*+?^${}()|[\]\\]/g,J=>`\\${J}`),memoize=K=>{const J={};return function(...ne){const oe=ne.length>1?ne.join("-(:-:)-"):ne[0];if(oe in J)return J[oe];const ce=K.apply(this,ne);return J[oe]=ce,ce}},powerOf10LookupObject=(()=>{const K={};let J="",ne;for(;ne!==1/0;)ne=+("1"+J),K[ne]=!0,J+="0";for(J="",ne=void 0;ne!==0;)ne=+("0."+J+"1"),K[ne]=!0,J+="0";return K})(),isPowerOfTen=K=>!!powerOf10LookupObject[K],toBase=(K,J,ne)=>{if(!isFiniteNumber(K)||J===ne.base)return K;if(!(J in ne.scale))return NaN;const oe=ne.scale[J]||1;return isPowerOfTen(oe)?multiplyByPowerOfTen(K,log10(oe)):K*oe},convertUnit=(K,J,ne,oe)=>{if(!isFiniteNumber(K)||J===ne)return K;const ce=toBase(K,J,oe),ue=Object.assign(Object.assign({},oe.scale),{[oe.base]:1});if(isNaN(ce)||!(J in ue)||!(ne in ue))return NaN;const Ae=oe.scale[ne]||1;return isPowerOfTen(Ae)?multiplyByPowerOfTen(ce,-log10(Ae)):ce/Ae},toBest=(K,J,ne,oe)=>{const ce=Object.assign({exclude:[],cutOffNumber:1},oe);let ue=null;const Ae=ne.scale;return Object.keys(Ae).sort((pe,ve)=>Ae[pe]-Ae[ve]).forEach(pe=>{if(!(ce.exclude.indexOf(pe)===-1))return;const me=convertUnit(K,J,pe,ne),ge=Math.abs(me);(!ue||ge>=ce.cutOffNumber&&ge<Math.abs(ue[0]))&&(ue=[me,pe])}),ue||[K,J]},unitScale=K=>({toBase:(J,ne)=>toBase(J,ne,K),convert:(J,ne,oe)=>convertUnit(J,ne,oe,K),toBest:(J,ne,oe)=>toBest(J,ne,K,oe),scaleDefinition:K}),stringRepeat=(K,J)=>{if(J<1)return"";let ne="",oe=K;for(;J>1;)J&1&&(ne+=oe),J>>>=1,oe+=oe;return ne+oe},baseCreateUnitScaleFromLocaleAbbreviations=K=>{if(!K)return unitScale({base:"",scale:{}});const J=K.split("|"),ne={"":1};return J.forEach((oe,ce)=>{oe&&(ne[oe]=+(1+stringRepeat("0",ce)))}),unitScale({base:"",scale:ne})},createUnitScaleFromLocaleAbbreviations=memoize(baseCreateUnitScaleFromLocaleAbbreviations),replaceNumeralSystemWithLatinNumbers=(K,J)=>{if(!J||J.length!==10)return K;const ne=K.length,oe=toObject(J,(ue,Ae)=>[ue.replace(/\u200e/g,""),""+Ae]);let ce="";for(let ue=0;ue<ne;ue++){const Ae=K[ue];ce+=oe[Ae]||Ae}return ce},getScalingFactorFromAbbreviations=(K,J)=>{var ne;const oe=createUnitScaleFromLocaleAbbreviations((ne=J.locale)===null||ne===void 0?void 0:ne.abbreviations),ce=Object.keys(oe.scaleDefinition.scale).sort((Ae,pe)=>pe.length-Ae.length);let ue=1;for(const Ae of ce){const pe=escapeRegexString(Ae),ve=new RegExp(`[^a-zA-Z](${pe})|(${pe.replace(/\u200e/g,"")})(?:\\)(?:\\))?)?$`);if(K.match(ve)){ue=oe.toBase(ue,Ae);break}}return ue},formattedStringToNumber=(K,J)=>{var ne;const oe=J.locale,ce=K;let ue;const Ae=replaceNumeralSystemWithLatinNumbers(K,(ne=J.locale)===null||ne===void 0?void 0:ne.numeralSystem);if(J.zeroFormat&&Ae===J.zeroFormat)ue=0;else if(J.nullFormat&&Ae===J.nullFormat||!Ae.replace(/[^0-9]+/g,"").length)ue=null;else{const pe=oe.delimiters.decimal,ve=pe==="."?Ae:Ae.replace(/\./g,"").replace(pe,"."),me=getScalingFactorFromAbbreviations(ce,J),ge=(ve.split("-").length+Math.min(ve.split("(").length-1,ve.split(")").length-1))%2?1:-1,ye=ve.replace(/[^0-9.]+/g,"");ue=ge*multiplyByPowerOfTen(+ye,log10(me))}return ue},locale={code:"en",delimiters:{thousands:",",decimal:"."},abbreviations:"|||K|||M|||B|||T",ordinal:K=>{const J=K%10;return Math.floor(K%100/10)===1?"th":J===1?"st":J===2?"nd":J===3?"rd":"th"}};function merge$4(...K){const J={},ne=K.length;for(let oe=0;oe<ne;oe++)for(const ce in K[oe])J[ce]=K[oe][ce];return J}var isObject$a=K=>typeof K=="object"&&K!==null,isString$4=K=>typeof K=="string";const truncateNumber=K=>K<0?Math.ceil(K):Math.floor(K),getPatternParts=K=>{let J=!1,ne="";const oe=[];for(let ce=0;ce<K.length;ce++){const ue=K.charAt(ce);ue==="'"&&!J?(J=!0,ne=""):ue==="'"&&J&&K.charAt(ce-1)!=="\\"?(J=!1,oe.push({escaped:!0,value:ne})):J?ne+=ue:oe.length&&!oe[oe.length-1].escaped?oe[oe.length-1].value+=ue:oe.push({escaped:!1,value:ue})}return oe},patternIncludes=(K,J)=>patternRemoveEscapedText(K).indexOf(J)!==-1,patternReplace=(K,J,ne)=>getPatternParts(K).map(oe=>oe.escaped?`'${oe.value}'`:oe.value.replace(J,ce=>ne)).join(""),patternRemoveEscapedText=K=>getPatternParts(K).filter(J=>!J.escaped).map(J=>J.value).join(""),patternStripAndNormalizeEscapedText=K=>getPatternParts(K).map(J=>J.escaped?J.value.replace(/\\'/g,"'"):J.value).join(""),stringIncludes=(K,J)=>K.indexOf(J)!==-1,signRule=K=>{const J=patternRemoveEscapedText(K),ne=stringIncludes(J,"(")&&stringIncludes(J,")"),oe=!ne&&stringIncludes(J,"+");let ce=K;return ce=patternReplace(ce,"(","'nps'"),ce=patternReplace(ce,")","'npe'"),ce=patternReplace(ce,/(-|\+)/,"'s'"),[ce,{negativeParentheses:ne,forceSign:oe}]},abbreviationRule=K=>{let J=null,ne=!1;if(patternIncludes(K,"a")){ne=!0;const ue=patternRemoveEscapedText(K).match(/a(k|m|b|t)?/);J=ue?ue[1]:null}let oe=K;return oe=patternReplace(oe,/a(k|m|b|t)?/,"'a'"),[oe,{compact:ne,compactUnit:J,compactAuto:ne&&!J}]},splitStringInTwoParts=(K,J)=>{if(!K)return["",""];const ne=K.indexOf(J);return ne===-1?[K,""]:[K.slice(0,ne),K.slice(ne+1)]},countChars=(K,J)=>K?K.split("").filter(ne=>ne===J).length:0,decimalPlacesRule=K=>{const J=patternRemoveEscapedText(K),ne=splitStringInTwoParts(J,".")[1];let oe=0,ce=0;if(ne){const ue=ne.trim();if(stringIncludes(ue,"[")){const Ae=ue.replace("]",""),pe=splitStringInTwoParts(Ae,"[");oe=countChars(pe[0],"0"),ce=oe+countChars(pe[1],"0")}else if(stringIncludes(ue,"#"))oe=countChars(ue.split("#")[0],"0"),ce=ue.length;else if(stringIncludes(ue,"X"))oe=countChars(ue.split("X")[0],"0"),ce=500;else{const Ae=countChars(ue.split(" ")[0],"0");oe=Ae,ce=Ae}}return{minimumFractionDigits:oe,maximumFractionDigits:ce}},optionalDecimalPlacesRule=K=>{let J=!1,ne=K;return patternIncludes(K,"[.]")&&(J=!0,ne=patternReplace(ne,"[.]",".")),[ne,{optionalFractionDigits:J}]},numberPositionRule=K=>patternReplace(K,/((((0|#)+,)?(0|#)+(\.([0#X]|\[0+\])+)?){1})/,"'n'"),minimumIntegerDigitsRule=K=>{const ne=patternRemoveEscapedText(K).split(".")[0].split(",")[0];return/#/g.test(ne)?0:(ne.match(/0/g)||[]).length},addSignPositionIfItDoesNotExists=K=>stringIncludes(K,"'s'")||stringIncludes(K,"'nps'")?K:K.replace("'n'",J=>"'s''n'"),baseParsePattern=K=>{const J=isString$4(K)&&K||"0,0.##########",[ne,oe]=signRule(J),[ce,ue]=abbreviationRule(ne),[Ae,pe]=optionalDecimalPlacesRule(ce),ve=Ae,me=patternRemoveEscapedText(ve),ge=decimalPlacesRule(ve),ye=minimumIntegerDigitsRule(ve),xe=me.indexOf(",")>-1,_e=numberPositionRule(ve),Ie=addSignPositionIfItDoesNotExists(_e);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},oe),ue),pe),ge),{grouping:xe,minimumIntegerDigits:ye,patternMask:Ie})},parsePattern=memoize(baseParsePattern),removeSignIfExists=K=>K[0]==="-"?K.slice(1):K,rescaleRoundedValue=(K,J,ne,oe)=>{const{compact:ce,compactAuto:ue}=ne,{abbreviations:Ae}=oe.locale;if(!ce||!ue)return[K,J];const pe=createUnitScaleFromLocaleAbbreviations(Ae),[ve,me]=pe.toBest(K,J||"");return[ve,me]},resolveForcedAbbreviationUnit=(K,J,ne)=>{const ce={k:3,m:6,b:9,t:12}[K],ue=(J==null?void 0:J.split("|"))||[];let Ae=null;for(let pe=0;pe<ue.length;pe++)if(ue[ce-pe]){Ae=ce-pe;break}return Ae===null?[ne,null]:[multiplyByPowerOfTen(ne,-Ae),ue[Ae]]},scaleValueWithAbbreviation=(K,J,ne)=>{const{compact:oe,compactUnit:ce}=J,{abbreviations:ue}=ne.locale;if(!oe)return[K,null];if(ce)return resolveForcedAbbreviationUnit(ce,ue,K);const Ae=createUnitScaleFromLocaleAbbreviations(ue),[pe,ve]=Ae.toBest(K,"");return[pe,ve||null]},roundNumber=(K,J,ne)=>{const oe=J||0,ce=ne||Math.round,ue=multiplyByPowerOfTen(K,oe),Ae=ce(ue);return multiplyByPowerOfTen(Ae,-oe)},formatPositiveExponentResult=K=>{const[J,ne]=splitStringInTwoParts(K,"e"),oe=+ne;if(oe<0)return K;const[ce,ue]=splitStringInTwoParts(J,"."),Ae=oe-ue.length;return`${ce}${ue}${stringRepeat("0",Ae)}`},formatNegativeExponentResult=(K,J,ne)=>{const oe=Math.abs(J),[ce,ue]=splitStringInTwoParts(ne,".");let pe=ce[0]==="-"?ce.slice(1):ce,ve=ue;for(let me=0;me<oe;me+=1){const ge=pe[0]||"";pe=pe.slice(0,pe.length-1),ve=(ge||"0")+ve}return`${K<0?"-":""}${pe||0}.${ve}`},numberToNonExponentialString=K=>{const J=(K||0).toString();if(!(J.indexOf("e")>=0))return J;const[oe,ce]=splitStringInTwoParts(J,"e"),ue=+ce;return ue>=0?formatPositiveExponentResult(J):formatNegativeExponentResult(K,ue,oe)},addTrailingZerosInFractionalPart=(K,J)=>{const[ne,oe]=splitStringInTwoParts(K,".");return`${ne}.${oe+stringRepeat("0",J-oe.length)}`},numberToFixed=(K,J,ne,oe)=>{const ce=numberToNonExponentialString(K),ue=J-(oe||0),Ae=splitStringInTwoParts(ce,".")[1],pe=Ae?Math.min(Math.max(Ae.length,ue),J):ue,ve=roundNumber(K,pe,ne);let me=numberToNonExponentialString(ve);return ue&&(me=addTrailingZerosInFractionalPart(me,ue)),me},roundValueAndAddTrailingZeros=(K,J,ne)=>{const{rounding:oe}=ne,{minimumFractionDigits:ce,maximumFractionDigits:ue}=J,Ae=oe||Math.round;if(ce>0||ue>0){const ve=ue-ce;return numberToFixed(K,ue,Ae,ve)}else return numberToFixed(K,0,Ae)},replaceDigitsWithNumeralSystem=(K,J)=>{if(!J||J.length!==10)return K;const ne=K.length;let oe="";for(let ce=0;ce<ne;ce++){const ue=K[ce];oe+=J[ue]||ue}return oe},addOrRemoveLeadingZerosToValue=(K,J)=>{const{minimumIntegerDigits:ne}=J;return ne===0&&+K<1&&+K>-1?"":K.length>=ne?K:`${stringRepeat("0",ne-K.length)}${K}`},addSignInfoToFullFormattedNumber=(K,J,ne,oe)=>{const{negativeParentheses:ce,forceSign:ue}=oe;let Ae=K;return ce&&J?Ae=Ae.replace(/'(nps|npe)'/g,pe=>pe==="'nps'"?"(":")"):ue?Ae=Ae.replace("'s'",J?"-":ne?"":"+"):J&&(Ae=Ae.replace("'s'","-")),Ae},splitNumberIntegerAndDecimalParts=(K,J)=>{const{optionalFractionDigits:ne}=J,[oe,ce]=splitStringInTwoParts(K,".");return ne&&Number(ce)===0?[oe,""]:[oe,ce]},addThousandsSeparatorToValueIntegerPart=(K,J,ne)=>{const{delimiters:oe,digitGroupingStyle:ce}=ne.locale,{grouping:ue}=J;if(!ue||!oe.thousands)return K;const Ae=K,pe=oe.thousands,me=[...ce!=null&&ce.length?ce:[3]];let ge="",ye=1;for(let xe=Ae.length-1;xe>=0;xe--)ye===me[0]&&xe!==0?(ge=pe+Ae[xe]+ge,me.length>1&&me.shift(),ye=1):(ge=Ae[xe]+ge,ye+=1);return ge},applyAbbreviationLocalizedUnitToPatternMask=(K,J,ne)=>ne?J?K.replace("'a'",oe=>`'${J.replace(/'/g,ce=>"\\'")}'`):K.match(/'n'\s*'a'/)?K.replace(/\s*'a'/,""):K.replace(/'a'\s*/,""):K,scaleAndRoundValue=(K,J,ne)=>{if(!J.compact)return[roundValueAndAddTrailingZeros(K,J,ne),null];const[oe,ce]=scaleValueWithAbbreviation(K,J,ne),ue=+roundValueAndAddTrailingZeros(oe,J,ne),[Ae,pe]=rescaleRoundedValue(+ue,ce,J,ne);return[roundValueAndAddTrailingZeros(Ae,J,ne),pe]},numberToFormattedNumber=(K,J,ne)=>{var oe;const ce=parsePattern(J),ue=isFiniteNumber(K)?K:0,[Ae,pe]=scaleAndRoundValue(ue,ce,ne);if(Ae==="NaN")return"";const ve=ne.signedZero?K<0:+Ae<0,me=ne.signedZero?K===0:+Ae==0,ge=removeSignIfExists(Ae),[ye,xe]=splitNumberIntegerAndDecimalParts(ge,ce),_e=addOrRemoveLeadingZerosToValue(ye,ce),$e=addThousandsSeparatorToValueIntegerPart(_e,ce,ne),Ie=ne.locale.numeralSystem,Fe=replaceDigitsWithNumeralSystem($e,Ie),ke=replaceDigitsWithNumeralSystem(xe,Ie),je=Fe+(ke?(((oe=ne.locale.delimiters)===null||oe===void 0?void 0:oe.decimal)||".")+ke:""),ze=applyAbbreviationLocalizedUnitToPatternMask(ce.patternMask,pe,ce.compact).replace("'n'",et=>`'${je.replace(/'/g,"\\'")}'`),Je=addSignInfoToFullFormattedNumber(ze,ve,me,ce).replace(/'(nps|npe|s|a|n)'/g,"");return patternStripAndNormalizeEscapedText(Je)},bpsFormatter={name:"bps",regexps:{format:/BPS/,unformat:/BPS/},format:(K,J,ne)=>{const oe=multiplyByPowerOfTen(K,4),ce=patternReplace(J,/BPS/,"'BPS'");return numberToFormattedNumber(oe,ce,ne).replace("BPS","BPS")},unformat:(K,J)=>{const ne=formattedStringToNumber(K.replace(/\s?BPS/,""),J);return isFiniteNumber(ne)?multiplyByPowerOfTen(ne,-4):ne}},timeFormatter={name:"time",regexps:{format:/([0-9]{1,2}:[0-9]{2}) *$/,unformat:/([0-9]{1,2}:[0-9]{2}) *$/},format:K=>{const J=Math.abs(K),ne=K<0?"-":"",oe=truncateNumber(J/3600),ce=truncateNumber((J-oe*3600)/60),ue=truncateNumber(J-oe*3600-ce*60);return`${ne}${oe}:${(ce<10?"0":"")+ce}:${(ue<10?"0":"")+ue}`},unformat:K=>{const J=/^ *-/.test(K),oe=K.replace(/^ *-/,"").split(":").reverse();let ce=0;return ce+=+oe[0],ce+=+oe[1]*60,ce+=(+oe[2]||0)*3600,J&&ce!==0?-ce:ce}},decimalSuffixes=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],binarySuffixes=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],allSuffixes=decimalSuffixes.concat(binarySuffixes.slice(1)),unformatRegex=`(${allSuffixes.join("|").replace(/B/g,"B(?!PS)")})`,bytesDecimalScale=unitScale({base:"B",scale:toObject(decimalSuffixes,(K,J)=>[K,Math.pow(1e3,J)])}),bytesBinaryScale=unitScale({base:"B",scale:toObject(binarySuffixes,(K,J)=>[K,Math.pow(1024,J)])}),bytesFormatter={name:"bytes",regexps:{format:/([0\s]b[bd])|(b[bd][0\s])/,unformat:(K,J)=>J.type==="bytes"?new RegExp(unformatRegex).test(K):!1},format:(K,J,ne)=>{const oe=patternIncludes(J,"bb")?bytesBinaryScale:bytesDecimalScale,[ce,ue]=oe.toBest(K,"B"),Ae=patternReplace(J,/b[bd]/,"'bytes'");return numberToFormattedNumber(ce,Ae,ne).replace("bytes",ue||"")},unformat:(K,J)=>{var ne;const oe=formattedStringToNumber(K.replace(new RegExp(unformatRegex),""),J),ce=((ne=K.match(unformatRegex))===null||ne===void 0?void 0:ne[0])||"",ue=bytesBinaryScale.scaleDefinition.scale[ce]?bytesBinaryScale:bytesDecimalScale;return oe&&ue.toBase(oe,ce)}},ordinalFormatter={name:"ordinal",regexps:{format:/o/},format:(K,J,ne)=>{var oe,ce;const ue=((ce=(oe=ne.locale).ordinal)===null||ce===void 0?void 0:ce.call(oe,K))||"",Ae=patternReplace(J,/o/,"'ord'");return numberToFormattedNumber(K,Ae,ne).replace("ord",ve=>ue)}},currencySymbolsMap={EUR:"",USD:"$",XCD:"EC$",AUD:"A$",INR:"",BRL:"R$",CAD:"CA$",XAF:"FCFA",CNY:"CN",NZD:"NZ$",XPF:"CFPF",GBP:"",HKD:"HK$",ILS:"",JPY:"",KRW:"",XOF:"CFA",MXN:"MX$",TWD:"NT$",VND:""},currencyFormatter={name:"currency",regexps:{format:/(\$)/},format:(K,J,ne)=>{var oe;const ce=(oe=ne.currency)===null||oe===void 0?void 0:oe.toUpperCase(),ue=currencySymbolsMap[ce]||ce||"",Ae=patternReplace(J,/\$/,"'currency'");return numberToFormattedNumber(K,Ae,ne).replace("currency",ve=>ue)}},percentageFormatter={name:"percentage",regexps:{format:/%!?/,unformat:/%/},format:(K,J,ne)=>{const oe=patternIncludes(J,"%!"),ce=ne.scalePercentage&&!oe?multiplyByPowerOfTen(K,2):K,ue=patternReplace(J,/%!?/,"'%'");return numberToFormattedNumber(ce,ue,ne).replace("%","%")},unformat:(K,J)=>{const ne=formattedStringToNumber(K.replace(/\s?%/,""),J);return ne&&J.scalePercentage?multiplyByPowerOfTen(ne,-2):ne}},exponentialFormatter={name:"exponential",regexps:{format:/[eE][+-][0-9]+/,unformat:/[eE][+-][0-9]+/},format:(K,J,ne)=>{const oe=typeof K=="number"&&!isNaNNumber(K)?K.toExponential():"0e+0",ce=splitStringInTwoParts(oe,"e"),ue=patternReplace(J,/e[+|-]{1}0/i,"");return numberToFormattedNumber(+ce[0],ue,ne)+"e"+ce[1]},unformat:(K,J)=>{var ne;const oe=formattedStringToNumber(K.replace(/e[+-]{1}[0-9]{1,3}/i,""),J),ce=+(((ne=K.match(/e([+-]{1}[0-9]{1,3})/i))===null||ne===void 0?void 0:ne[1])||"0");return isFiniteNumber(oe)?multiplyByPowerOfTen(oe,ce):oe}},BUILT_IN_FORMATTERS=[percentageFormatter,currencyFormatter,ordinalFormatter,timeFormatter,bytesFormatter,exponentialFormatter,bpsFormatter],roundHalfAwayFromZero=K=>K>=0?Math.round(K):K%.5===0?Math.floor(K):Math.round(K),areDelimitersValid=K=>!!(K!=null&&K.decimal)&&isString$4(K==null?void 0:K.thousands)&&K.decimal!==K.thousands,resolveOptionsLocale=K=>{const J=locale;return isObject$a(K)?merge$4(K,{delimiters:areDelimitersValid(K.delimiters)?K.delimiters:J.delimiters,abbreviations:K.abbreviations||J.abbreviations,ordinal:K.ordinal||J.ordinal}):J},resolveRoundingOption=K=>{switch(K){case"ceil":return Math.ceil;case"floor":return Math.floor;case"truncate":return truncateNumber;case"half-up":return Math.round;case"half-away-from-zero":return roundHalfAwayFromZero;default:return isFunction$6(K)?K:roundHalfAwayFromZero}},resolveOptionsFormatters=K=>K?isFunction$6(K)?K(BUILT_IN_FORMATTERS):[...K,...BUILT_IN_FORMATTERS]:BUILT_IN_FORMATTERS,resolveFormatOptions=K=>{var J,ne,oe;const ce=K||{},ue=resolveRoundingOption(ce.rounding),Ae=resolveOptionsLocale(ce.locale),pe=resolveOptionsFormatters(ce.formatters);return{defaultPattern:ce.defaultPattern||"0,0.##########",nullFormat:ce.nullFormat||"",nanFormat:ce.nanFormat,zeroFormat:ce.zeroFormat,locale:Ae,rounding:ue,type:ce.type,scalePercentage:(J=ce.scalePercentage)!==null&&J!==void 0?J:!0,trim:(ne=ce.trim)!==null&&ne!==void 0?ne:!0,formatters:pe,currency:ce.currency,signedZero:!!ce.signedZero,nonBreakingSpace:(oe=ce.nonBreakingSpace)!==null&&oe!==void 0?oe:!1}},getFormatFunctionIfMatch=(K,J)=>{const ne=patternRemoveEscapedText(K);for(const oe of J.formatters){const ce=oe.regexps.format;if(!ce)continue;if(isFunction$6(ce)?ce(K,J):!!ne.match(ce))return oe.format}},format$2=(K,J,ne)=>{var oe;try{const ce=isString$4(K)?parseFloat(K):K,ue=resolveFormatOptions(ne),Ae=J||ue.defaultPattern;let pe;if(ce===1/0||ce===-1/0)pe=ce>0?"":"-";else{if(isNaNNumber(ce))return isString$4(ue.nanFormat)?ue.nanFormat:isString$4(ue.nullFormat)?ue.nullFormat:"";if(isNil(ce))pe=isString$4(ue.nullFormat)?ue.nullFormat:"";else if(ce===0&&isString$4(ue.zeroFormat))pe=ue.zeroFormat;else{const ve=ce||0;pe=(getFormatFunctionIfMatch(Ae,ue)||numberToFormattedNumber)(ve,Ae,ue)}}return pe=isString$4(pe)?pe:"",pe=ue.nonBreakingSpace?pe.replace(/ /g,ve=>""):pe,pe=ue.trim?pe.trim():pe,pe}catch{return((oe=ne)===null||oe===void 0?void 0:oe._errorFormat)||""}};function format$1(K,J,ne){const oe=isString$4(J)?J:null,ce=isObject$a(J)?J:isObject$a(ne)?ne:{};return format$2(K,oe,ce)}const createFormatFunction=K=>{const J=merge$4(K,{locale:isFunction$6(K.locale)?K.locale():K.locale});return(ne,oe,ce)=>{const ue=isString$4(oe)?oe:null,Ae=isObject$a(oe)?oe:isObject$a(ce)?ce:{};return format$2(ne,ue,merge$4(J,Ae))}};format$1.withOptions=createFormatFunction;var IntFormatting=(K=>(K.INT="Int",K.NUMBER="Number",K))(IntFormatting||{}),ValueTypesEnum$1=(K=>(K.Data="Data",K.Bool="Bool",K.Double="Double",K.Long="Long",K.Int="Int",K.String="String",K.Date="Date",K.Time="Time",K.DateTime="DateTime",K.Key="Key",K.TimeElement="TimeElement",K.DateTimeElement="DateTimeElement",K.Binary="Binary",K.Variant="Variant",K.Dict="Dict",K.Type="type",K))(ValueTypesEnum$1||{});const simpleValueTypes$1=["String","Bool","Int","Double","Long","Date","Time","DateTime","TimeElement","DateTimeElement","type"];var FormatTypesUnum=(K=>(K.NUMBER_AMOUNT="NumberAmount",K.NUMBER_BASIS_POINT="NumberBp",K.NUMBER_PERCENT="NumberPercent",K))(FormatTypesUnum||{});const isDefined$2=K=>K!=null,isNullable=K=>K==null,isNaN$1=K=>isNullable(K)||Number.isNaN(K),isArray$7=K=>Array.isArray(K),isObject$9=K=>typeof K=="object"&&!isArray$7(K)&&K!==null,isEmpty$2=K=>isObject$9(K)&&Object.keys(K).length===0,isEmptyString=K=>typeof K=="string"&&K.length===0,isNumber$2=K=>isDefined$2(K)&&typeof K=="number",isString$3=K=>isDefined$2(K)&&typeof K=="string",isBool=K=>typeof K=="boolean",isSimpleViewType=K=>!isArray$7(K)&&(typeof K!="object"||BigNumber.isBigNumber(K)||isNullable(K)),isSimpleValueType$1=K=>isDefined$2(K)?simpleValueTypes$1.some(J=>J===K):!1,isArrayViewOfType=K=>typeof K=="object"&&isArray$7(K)&&K.length>0,isInt=K=>isNumber$2(K)&&Number.isInteger(K),isStringBool=K=>String(K)==="true"||String(K)==="false",isArrayOfStrings=K=>isArray$7(K)&&K.length>0&&K.every(isString$3),isArrayOfObjects=K=>isArray$7(K)&&K.length>0&&K.every(isObject$9),isNumericString=K=>!Number.isNaN(Number.parseFloat(K)),isStringifiedTimeStamp=K=>isString$3(K)&&/^\d{4}-\d{2}-\d{2}-\d{2}-\d{2}-\d{2}-\d{3}-7[a-f0-9]+$/.test(K),numberTypesArr=new Set(["Int","Double","Long"]),isLessThanAbsoluteValue=(K,J)=>BigNumber.isBigNumber(K)?K.abs().isLessThan(J):Math.abs(K)<J,isCloseToZero=K=>isLessThanAbsoluteValue(K,1e-10),isSmallNumber=K=>isLessThanAbsoluteValue(K,1),isExponentialNumber=K=>{const J=K.toPrecision();return/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)/g.test(J)},formatDoubleDecimal=(K,J,ne,oe)=>{if(ne.toString().includes("e"))return`.${K}`;if(oe===FormatTypesUnum.NUMBER_PERCENT||oe===FormatTypesUnum.NUMBER_BASIS_POINT)return".00";const ce=oe==null?void 0:oe.match(/:(,?)(\.\d+)?f/);if(ce){const[,,ue]=ce,Ae=ue?Number.parseInt(ue.slice(1),10):0;return Ae>0?`.${"0".repeat(Ae)}`:""}return`.${J}`},generateFormatPattern=(K,J,ne,oe)=>{const ce=!isCloseToZero(K)&&isExponentialNumber(K)?"e+0":"",ue=isSmallNumber(K)?"####":"##";let Ae="00";oe!==void 0&&oe<1&&(Ae="0000");const pe=`0,0${ne==="Double"?formatDoubleDecimal(ue,Ae,K,J):`.${ue}`}${ce}`,ve=`0${ne==="Double"?formatDoubleDecimal(ue,Ae,K,J):`.${ue}`}${ce}`;if(ne===IntFormatting.INT&&J!==IntFormatting.NUMBER)return ve;switch(J){case FormatTypesUnum.NUMBER_AMOUNT:return`$${pe}`;case FormatTypesUnum.NUMBER_BASIS_POINT:return`${pe}bp`;case FormatTypesUnum.NUMBER_PERCENT:return`${pe}%`;default:return pe}},formatNumberValue=(K,J,ne,oe)=>{if(!isDefined$2(K)||isEmptyString(K))return"";let ce=BigNumber.isBigNumber(K)?K:+K;return J===FormatTypesUnum.NUMBER_BASIS_POINT&&typeof ce=="number"&&(ce*=1e4),format$1(typeof K=="boolean"?K.toString():ce.toString(),generateFormatPattern(ce,J,ne,oe))},isNumberType=K=>K&&numberTypesArr.has(K),isNegativeNumber=K=>{if(BigNumber.isBigNumber(K))return new BigNumber(K).isNegative();if(!isDefined$2(K)||isBool(K)||typeof K=="object")return!1;const J=isString$3(K)?K.replaceAll(",",""):K;return isNumber$2(Number(J))&&Number(J)<0};var BooleanColumnInputValueEnum=(K=>(K.y="y",K.n="n",K))(BooleanColumnInputValueEnum||{}),KeyboardCode=(K=>(K.ArrowUp="ArrowUp",K.ArrowDown="ArrowDown",K.ArrowLeft="ArrowLeft",K.ArrowRight="ArrowRight",K.Enter="Enter",K.Escape="Escape",K.KeyA="KeyA",K.KeyC="KeyC",K.KeyF="KeyF",K.KeyS="KeyS",K.KeyX="KeyX",K.KeyV="KeyV",K.Backspace="Backspace",K.Plus="Plus",K.Minus="Minus",K.Period="Period",K.Zero="Digit0",K.One="Digit1",K.Two="Digit2",K.Three="Digit3",K.Four="Digit4",K.Five="Digit5",K.Six="Digit6",K.Seven="Digit7",K.Eight="Digit8",K.Nine="Digit9",K.Tab="Tab",K.NumpadEnter="NumpadEnter",K.NumpadMinus="NumpadMinus",K.NumpadPlus="NumpadPlus",K.NumpadPeriod="NumpadPeriod",K.NumpadZero="Numpad0",K.NumpadOne="Numpad1",K.NumpadTwo="Numpad2",K.NumpadThree="Numpad3",K.NumpadFour="Numpad4",K.NumpadFive="Numpad5",K.NumpadSix="Numpad6",K.NumpadSeven="Numpad7",K.NumpadEight="Numpad8",K.NumpadNine="Numpad9",K))(KeyboardCode||{}),ButtonCode=(K=>(K[K.MAIN=0]="MAIN",K[K.MIDDLE=1]="MIDDLE",K[K.SECONDARY=2]="SECONDARY",K[K.BROWSER_BACK=3]="BROWSER_BACK",K[K.BROWSER_FORWARD=4]="BROWSER_FORWARD",K))(ButtonCode||{});function createEventManager(){const K=new Map;return{subscribe(J,ne){var oe;return K.has(J)?(oe=K.get(J))==null||oe.add(ne):K.set(J,new Set([ne])),this},once(J,ne){const oe=ce=>{this.unsubscribe(J,oe),ne(ce)};return this.subscribe(J,oe),this},unsubscribe(J,ne){return K.has(J)&&K.get(J).delete(ne),this},emit(J,ne){var oe;return K.has(J)&&((oe=K.get(J))==null||oe.forEach(ce=>ce(ne))),this}}}const eventManager=createEventManager(),escapeStringRegexp=K=>K.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d").replace(/([^\\*])/g,"$1\\s*");class AbortedPromiseError extends Error{constructor(J="The promise has been aborted"){super(J),this.name="AbortedPromiseError"}}function isAbortedPromiseError(K){return K instanceof AbortedPromiseError}function makeCancellablePromise$1(K,J){return new Promise((ne,oe)=>{K.then(ce=>!J.aborted&&ne(ce)).catch(ce=>!J.aborted&&oe(ce)),J.addEventListener("abort",()=>{oe(new AbortedPromiseError(J.reason))})})}function isInteger(K){return INTEGER_REGEX.test(K)}var INTEGER_REGEX=/^-?[0-9]+$/;function isNumber$1(K){return NUMBER_REGEX.test(K)}var NUMBER_REGEX=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function isSafeNumber(K,J){var ne=parseFloat(K),oe=String(ne),ce=extractSignificantDigits(K),ue=extractSignificantDigits(oe);if(ce===ue)return!0;if((J==null?void 0:J.approx)===!0){var Ae=14;if(!isInteger(K)&&ue.length>=Ae&&ce.startsWith(ue.substring(0,Ae)))return!0}return!1}var UnsafeNumberReason=function(K){return K.underflow="underflow",K.overflow="overflow",K.truncate_integer="truncate_integer",K.truncate_float="truncate_float",K}({});function getUnsafeNumberReason(K){if(!isSafeNumber(K,{approx:!1})){if(isInteger(K))return UnsafeNumberReason.truncate_integer;var J=parseFloat(K);return isFinite(J)?J===0?UnsafeNumberReason.underflow:UnsafeNumberReason.truncate_float:UnsafeNumberReason.overflow}}function extractSignificantDigits(K){return K.replace(EXPONENTIAL_PART_REGEX,"").replace(DOT_REGEX,"").replace(TRAILING_ZEROS_REGEX,"").replace(LEADING_MINUS_AND_ZEROS_REGEX,"")}var EXPONENTIAL_PART_REGEX=/[eE][+-]?\d+$/,LEADING_MINUS_AND_ZEROS_REGEX=/^-?(0*)?/,DOT_REGEX=/\./,TRAILING_ZEROS_REGEX=/0+$/;function _typeof$3(K){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof$3(K)}function _classCallCheck(K,J){if(!(K instanceof J))throw new TypeError("Cannot call a class as a function")}function _defineProperties(K,J){for(var ne=0;ne<J.length;ne++){var oe=J[ne];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(K,_toPropertyKey$1(oe.key),oe)}}function _createClass(K,J,ne){return J&&_defineProperties(K.prototype,J),Object.defineProperty(K,"prototype",{writable:!1}),K}function _defineProperty$4(K,J,ne){return J=_toPropertyKey$1(J),J in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function _toPropertyKey$1(K){var J=_toPrimitive$1(K,"string");return _typeof$3(J)==="symbol"?J:String(J)}function _toPrimitive$1(K,J){if(_typeof$3(K)!=="object"||K===null)return K;var ne=K[Symbol.toPrimitive];if(ne!==void 0){var oe=ne.call(K,J||"default");if(_typeof$3(oe)!=="object")return oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(K)}var LosslessNumber=function(){function K(J){if(_classCallCheck(this,K),_defineProperty$4(this,"isLosslessNumber",!0),!isNumber$1(J))throw new Error('Invalid number (value: "'+J+'")');this.value=J}return _createClass(K,[{key:"valueOf",value:function(){var ne=getUnsafeNumberReason(this.value);if(ne===void 0||ne===UnsafeNumberReason.truncate_float)return parseFloat(this.value);if(isInteger(this.value))return BigInt(this.value);throw new Error("Cannot safely convert to number: "+"the value '".concat(this.value,"' would ").concat(ne," and become ").concat(parseFloat(this.value)))}},{key:"toString",value:function(){return this.value}}]),K}();function isLosslessNumber(K){return K&&_typeof$3(K)==="object"&&K.isLosslessNumber===!0||!1}function parseLosslessNumber(K){return new LosslessNumber(K)}function _typeof$2(K){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof$2(K)}function revive(K,J){return reviveValue({"":K},"",K,J)}function reviveValue(K,J,ne,oe){return Array.isArray(ne)?oe.call(K,J,reviveArray(ne,oe)):ne&&_typeof$2(ne)==="object"&&!isLosslessNumber(ne)?oe.call(K,J,reviveObject(ne,oe)):oe.call(K,J,ne)}function reviveObject(K,J){return Object.keys(K).forEach(function(ne){var oe=reviveValue(K,ne,K[ne],J);oe!==void 0?K[ne]=oe:delete K[ne]}),K}function reviveArray(K,J){for(var ne=0;ne<K.length;ne++)K[ne]=reviveValue(K,ne+"",K[ne],J);return K}function _typeof$1(K){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof$1(K)}function _toConsumableArray$2(K){return _arrayWithoutHoles$2(K)||_iterableToArray$2(K)||_unsupportedIterableToArray$3(K)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(K,J){if(K){if(typeof K=="string")return _arrayLikeToArray$3(K,J);var ne=Object.prototype.toString.call(K).slice(8,-1);if(ne==="Object"&&K.constructor&&(ne=K.constructor.name),ne==="Map"||ne==="Set")return Array.from(K);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return _arrayLikeToArray$3(K,J)}}function _iterableToArray$2(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}function _arrayWithoutHoles$2(K){if(Array.isArray(K))return _arrayLikeToArray$3(K)}function _arrayLikeToArray$3(K,J){(J==null||J>K.length)&&(J=K.length);for(var ne=0,oe=new Array(J);ne<J;ne++)oe[ne]=K[ne];return oe}function parse$3(K,J){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:parseLosslessNumber,oe=0,ce=pe();return $e(ce),Fe(),J?revive(ce,J):ce;function ue(){if(K.charCodeAt(oe)===codeOpeningBrace){oe++,me();for(var Be={},Ne=!0;oe<K.length&&K.charCodeAt(oe)!==codeClosingBrace;){Ne?Ne=!1:(xe(),me());var Ue=oe,Ge=ge();Ge===void 0&&We(),me(),_e();var Ye=pe();Ye===void 0&&tt(),Object.prototype.hasOwnProperty.call(Be,Ge)&&!isDeepEqual(Ye,Be[Ge])&&ze(Ge,Ue+1),Be[Ge]=Ye}return K.charCodeAt(oe)!==codeClosingBrace&&Xe(),oe++,Be}}function Ae(){if(K.charCodeAt(oe)===codeOpeningBracket){oe++,me();for(var Be=[],Ne=!0;oe<K.length&&K.charCodeAt(oe)!==codeClosingBracket;){Ne?Ne=!1:xe();var Ue=pe();Ie(Ue),Be.push(Ue)}return K.charCodeAt(oe)!==codeClosingBracket&&Je(),oe++,Be}}function pe(){var Be,Ne,Ue,Ge,Ye,Qe;me();var Te=(Be=(Ne=(Ue=(Ge=(Ye=(Qe=ge())!==null&&Qe!==void 0?Qe:ye())!==null&&Ye!==void 0?Ye:ue())!==null&&Ge!==void 0?Ge:Ae())!==null&&Ue!==void 0?Ue:ve("true",!0))!==null&&Ne!==void 0?Ne:ve("false",!1))!==null&&Be!==void 0?Be:ve("null",null);return me(),Te}function ve(Be,Ne){if(K.slice(oe,oe+Be.length)===Be)return oe+=Be.length,Ne}function me(){for(;isWhitespace(K.charCodeAt(oe));)oe++}function ge(){if(K.charCodeAt(oe)===codeDoubleQuote){oe++;for(var Be="";oe<K.length&&K.charCodeAt(oe)!==codeDoubleQuote;){if(K.charCodeAt(oe)===codeBackslash){var Ne=K[oe+1],Ue=escapeCharacters[Ne];Ue!==void 0?(Be+=Ue,oe++):Ne==="u"?isHex$1(K.charCodeAt(oe+2))&&isHex$1(K.charCodeAt(oe+3))&&isHex$1(K.charCodeAt(oe+4))&&isHex$1(K.charCodeAt(oe+5))?(Be+=String.fromCharCode(parseInt(K.slice(oe+2,oe+6),16)),oe+=5):st(oe):et(oe)}else isValidStringCharacter(K.charCodeAt(oe))?Be+=K[oe]:nt(K[oe]);oe++}return je(),oe++,Be}}function ye(){var Be=oe;if(K.charCodeAt(oe)===codeMinus&&(oe++,ke(Be)),K.charCodeAt(oe)===codeZero)oe++;else if(isNonZeroDigit(K.charCodeAt(oe)))for(oe++;isDigit$1(K.charCodeAt(oe));)oe++;if(K.charCodeAt(oe)===codeDot)for(oe++,ke(Be);isDigit$1(K.charCodeAt(oe));)oe++;if(K.charCodeAt(oe)===codeLowercaseE||K.charCodeAt(oe)===codeUppercaseE)for(oe++,(K.charCodeAt(oe)===codeMinus||K.charCodeAt(oe)===codePlus)&&oe++,ke(Be);isDigit$1(K.charCodeAt(oe));)oe++;if(oe>Be)return ne(K.slice(Be,oe))}function xe(){if(K.charCodeAt(oe)!==codeComma)throw new SyntaxError("Comma ',' expected after value ".concat(Re()));oe++}function _e(){if(K.charCodeAt(oe)!==codeColon)throw new SyntaxError("Colon ':' expected after property name ".concat(Re()));oe++}function $e(Be){if(Be===void 0)throw new SyntaxError("JSON value expected ".concat(Re()))}function Ie(Be){if(Be===void 0)throw new SyntaxError("Array item expected ".concat(Re()))}function Fe(){if(oe<K.length)throw new SyntaxError("Expected end of input ".concat(Re()))}function ke(Be){if(!isDigit$1(K.charCodeAt(oe))){var Ne=K.slice(Be,oe);throw new SyntaxError("Invalid number '".concat(Ne,"', expecting a digit ").concat(Re()))}}function je(){if(K.charCodeAt(oe)!==codeDoubleQuote)throw new SyntaxError(`End of string '"' expected `.concat(Re()))}function We(){throw new SyntaxError("Quoted object key expected ".concat(Re()))}function ze(Be,Ne){throw new SyntaxError("Duplicate key '".concat(Be,"' encountered at position ").concat(Ne))}function Xe(){throw new SyntaxError("Quoted object key or end of object '}' expected ".concat(Re()))}function Je(){throw new SyntaxError("Array item or end of array ']' expected ".concat(Re()))}function nt(Be){throw new SyntaxError("Invalid character '".concat(Be,"' ").concat(qe()))}function et(Be){var Ne=K.slice(Be,Be+2);throw new SyntaxError("Invalid escape character '".concat(Ne,"' ").concat(qe()))}function tt(){throw new SyntaxError("Object value expected after ':' ".concat(qe()))}function st(Be){for(var Ne=Be+2;/\w/.test(K[Ne]);)Ne++;var Ue=K.slice(Be,Ne);throw new SyntaxError("Invalid unicode character '".concat(Ue,"' ").concat(qe()))}function qe(){return"at position ".concat(oe)}function Se(){return oe<K.length?"but got '".concat(K[oe],"'"):"but reached end of input"}function Re(){return Se()+" "+qe()}}function isWhitespace(K){return K===codeSpace||K===codeNewline||K===codeTab||K===codeReturn}function isHex$1(K){return K>=codeZero&&K<=codeNine||K>=codeUppercaseA&&K<=codeUppercaseF||K>=codeLowercaseA&&K<=codeLowercaseF}function isDigit$1(K){return K>=codeZero&&K<=codeNine}function isNonZeroDigit(K){return K>=codeOne&&K<=codeNine}function isValidStringCharacter(K){return K>=32&&K<=1114111}function isDeepEqual(K,J){if(K===J)return!0;if(Array.isArray(K)&&Array.isArray(J))return K.length===J.length&&K.every(function(oe,ce){return isDeepEqual(oe,J[ce])});if(isObject$8(K)&&isObject$8(J)){var ne=_toConsumableArray$2(new Set([].concat(_toConsumableArray$2(Object.keys(K)),_toConsumableArray$2(Object.keys(J)))));return ne.every(function(oe){return isDeepEqual(K[oe],J[oe])})}return!1}function isObject$8(K){return _typeof$1(K)==="object"&&K!==null}var escapeCharacters={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},codeBackslash=92,codeOpeningBrace=123,codeClosingBrace=125,codeOpeningBracket=91,codeClosingBracket=93,codeSpace=32,codeNewline=10,codeTab=9,codeReturn=13,codeDoubleQuote=34,codePlus=43,codeMinus=45,codeZero=48,codeOne=49,codeNine=57,codeComma=44,codeDot=46,codeColon=58,codeUppercaseA=65,codeLowercaseA=97,codeUppercaseE=69,codeLowercaseE=101,codeUppercaseF=70,codeLowercaseF=102;function _typeof(K){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof(K)}function stringify$2(K,J,ne,oe){var ce=resolveSpace(ne),ue=K;return Ae(ue,"");function Ae(ge,ye){if(Array.isArray(oe)){var xe=oe.find(function($e){return $e.test(ge)});if(xe){var _e=xe.stringify(ge);if(typeof _e!="string"||!isNumber$1(_e))throw new Error("Invalid JSON number: output of a number stringifier must be a string containing a JSON number "+"(output: ".concat(_e,")"));return _e}}if(typeof ge=="boolean"||typeof ge=="number"||typeof ge=="string"||ge===null||ge instanceof Date||ge instanceof Boolean||ge instanceof Number||ge instanceof String)return JSON.stringify(ge);if(ge&&ge.isLosslessNumber||typeof ge=="bigint")return ge.toString();if(Array.isArray(ge))return pe(ge,ye);if(ge&&_typeof(ge)==="object")return ve(ge,ye)}function pe(ge,ye){if(ge.length===0)return"[]";for(var xe=ce?ye+ce:void 0,_e=ce?`[
`:"[",$e=0;$e<ge.length;$e++){var Ie=ge[$e];ce&&(_e+=xe),typeof Ie<"u"&&typeof Ie!="function"?_e+=Ae(Ie,xe):_e+="null",$e<ge.length-1&&(_e+=ce?`,
`:",")}return _e+=ce?`
`+ye+"]":"]",_e}function ve(ge,ye){if(typeof ge.toJSON=="function")return stringify$2(ge.toJSON(),J,ne,void 0);var xe=Array.isArray(J)?J.map(String):Object.keys(ge);if(xe.length===0)return"{}";var _e=ce?ye+ce:void 0,$e=!0,Ie=ce?`{
`:"{";return xe.forEach(function(Fe){var ke=ge[Fe];if(me(Fe,ke)){$e?$e=!1:Ie+=ce?`,
`:",";var je=JSON.stringify(Fe);Ie+=ce?_e+je+": ":je+":",Ie+=Ae(ke,_e)}}),Ie+=ce?`
`+ye+"}":"}",Ie}function me(ge,ye){return typeof ye<"u"&&typeof ye!="function"&&_typeof(ye)!=="symbol"}}function resolveSpace(K){if(typeof K=="number")return" ".repeat(K);if(typeof K=="string"&&K!=="")return K}BigNumber.config({EXPONENTIAL_AT:1e9});const parseStringNumber=K=>isSafeNumber(K)?Number.parseFloat(K):BigNumber(K),deserialize$1=K=>parse$3(K,void 0,parseStringNumber),bigNumberStringifier={test:K=>BigNumber.isBigNumber(K),stringify:K=>K.valueOf()},serialize$1=(K,J,ne)=>stringify$2(K,J,ne,[bigNumberStringifier]);var SimplifiedEnum=(K=>(K.LAYOUT_ELEMENT="LayoutElement",K.LAYOUT_STACK_ELEMENT="LayoutStackElement",K.UI_TYPE_STATE="UiTypeState",K.UI_APP_STATE="UiAppState",K.TYPE_DECL_KEY="TypeDeclKey",K))(SimplifiedEnum||{}),StackEnum=(K=>(K.STACK="stack",K.ROW="row",K.COLUMN="column",K))(StackEnum||{}),DropBoxEnum=(K=>(K.GLOBAL="global",K.INNER="inner",K.TOP="top",K.SINGLE="single",K))(DropBoxEnum||{}),GridTabEnum=(K=>(K.MAIN="main",K))(GridTabEnum||{}),DefaultPanelSize=(K=>(K[K.DEFAULT=50]="DEFAULT",K[K.FULL_VIEW=100]="FULL_VIEW",K))(DefaultPanelSize||{}),LayoutDirection=(K=>(K.VERTICAL="vertical",K.HORIZONTAL="horizontal",K))(LayoutDirection||{});const GRID_TAB={main:{id:"main",key:"main",label:"grid.tabs.main",isClosable:!1,isActive:!0,isCurrentlyDragging:!1,isMainGridTab:!0}},returnDefaultConfig=(K,J=LayoutDirection.HORIZONTAL)=>{var ne,oe;return{type:J===LayoutDirection.VERTICAL?StackEnum.ROW:StackEnum.COLUMN,key:`${J===LayoutDirection.VERTICAL?"row":"column"}-stack-main`,id:`${J===LayoutDirection.VERTICAL?"row":"column"}-stack-main`,isMainGrid:!1,size:DefaultPanelSize.FULL_VIEW,content:[{type:StackEnum.STACK,key:`stack-${GridTabEnum.MAIN}`,id:`stack-${GridTabEnum.MAIN}`,isMainGrid:!0,size:DefaultPanelSize.DEFAULT,content:[GRID_TAB[GridTabEnum.MAIN]]},{type:StackEnum.STACK,key:`stack-${((ne=K[0])==null?void 0:ne.id)||1}`,id:`stack-${((oe=K[0])==null?void 0:oe.id)||1}`,isMainGrid:!1,size:DefaultPanelSize.DEFAULT,content:K}]}};var ToastTypeEnum=(K=>(K.SUCCESS="success",K.ERROR="error",K.INFO="info",K.WARNING="warning",K))(ToastTypeEnum||{});const addDataToClickboard=K=>{if(navigator.clipboard)return navigator.clipboard.writeText(K);const J=document.createElement("textarea");J.value=K,document.body.appendChild(J),J.focus(),J.select();try{return document.execCommand("copy"),Promise.resolve()}catch(ne){return console.error("Unable to copy to clipboard",ne),Promise.reject(ne)}finally{J.remove()}};let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let K=0;K<256;++K)byteToHex.push((K+256).toString(16).slice(1));function unsafeStringify(K,J=0){return(byteToHex[K[J+0]]+byteToHex[K[J+1]]+byteToHex[K[J+2]]+byteToHex[K[J+3]]+"-"+byteToHex[K[J+4]]+byteToHex[K[J+5]]+"-"+byteToHex[K[J+6]]+byteToHex[K[J+7]]+"-"+byteToHex[K[J+8]]+byteToHex[K[J+9]]+"-"+byteToHex[K[J+10]]+byteToHex[K[J+11]]+byteToHex[K[J+12]]+byteToHex[K[J+13]]+byteToHex[K[J+14]]+byteToHex[K[J+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(K,J,ne){if(native.randomUUID&&!J&&!K)return native.randomUUID();K=K||{};const oe=K.random||(K.rng||rng)();return oe[6]=oe[6]&15|64,oe[8]=oe[8]&63|128,unsafeStringify(oe)}var StorageKeyEnum=(K=>(K.VERSION="version",K.FILTERS="filters",K.SORTING="sorting",K.SHOW_DISCLAIMER_ONCE="showDisclaimerOnce",K.TOAST_DATA="toastData",K.PARAMS_VIEWERS="paramsViewers",K.SESSION_ID="sessionId",K.IS_LOGS_PANEL="isLogsPanel",K.LOGS_FLAT_VIEW_FILTERS="logsFlatViewFilters",K.LOGS_HANDLERS_VIEW_FILTERS="logsHandlersViewFilters",K.LAYOUT_DIRECTION_PER_TYPE="layoutDirection",K.IS_ROW_BORDER="isRowBorder",K.SELECTED_ROW="selectedRow",K.VIEWER_ACTIVE_TAB="viewerActiveTab",K.SECRET_KEYS="secretKeys",K.PROVIDER_ID="providerID",K.DEFAULT_LAYOUT="defaultLayout",K))(StorageKeyEnum||{}),SessionStorageKeyEnum=(K=>(K.MAIN_GRID_SCROLL="MAIN_GRID_SCROLL",K))(SessionStorageKeyEnum||{});class StorageDictionary extends Map{constructor(ne,oe){super(oe);wr(this,"key");this.key=ne}static createByKey(ne){const oe=localStorage.getItem(ne);if(oe){const ce=JSON.parse(oe);return isObject$9(ce)?new StorageDictionary(ne,Object.entries(ce)):new StorageDictionary(ne)}return new StorageDictionary(ne)}updateOrDeleteByValue(ne,oe){return oe.length>0?this.set(ne,oe):this.delete(ne),this}save(){localStorage.setItem(this.key,this.toString())}toString(){return JSON.stringify(Object.fromEntries(this.entries()))}}const externalStorage={getVersion:()=>localStorage.getItem(StorageKeyEnum.VERSION),setVersion:K=>localStorage.setItem(StorageKeyEnum.VERSION,K),setFiltersByKey(K,J){StorageDictionary.createByKey(StorageKeyEnum.FILTERS).updateOrDeleteByValue(K,J).save()},getFiltersByKey(K){return StorageDictionary.createByKey(StorageKeyEnum.FILTERS).get(K)??[]},clearFilterByKey(K){const J=StorageDictionary.createByKey(StorageKeyEnum.FILTERS);J.delete(K),J.save()},setSortByKey:(K,J)=>{StorageDictionary.createByKey(StorageKeyEnum.SORTING).updateOrDeleteByValue(K,J).save()},getSortByKey(K){return StorageDictionary.createByKey(StorageKeyEnum.SORTING).get(K)??[]},clearSortByKey(K){const J=StorageDictionary.createByKey(StorageKeyEnum.SORTING);J.delete(K),J.save()},clear(){for(const K of Object.values(StorageKeyEnum))localStorage.removeItem(K)},addToast({type:K,id:J,...ne}){const oe=localStorage.getItem(StorageKeyEnum.TOAST_DATA),ce=oe?JSON.parse(oe):{},ue=K in ce?ce[K]:{},Ae={...ce,[K]:{...ue,[J]:ne}};localStorage.setItem(StorageKeyEnum.TOAST_DATA,JSON.stringify(Ae))},getToasts(){const K=localStorage.getItem(StorageKeyEnum.TOAST_DATA);return K?JSON.parse(K):{}},removeToast(K,J){var oe;const ne=localStorage.getItem(StorageKeyEnum.TOAST_DATA);if(ne){const ce=JSON.parse(ne);(oe=ce==null?void 0:ce[K])!=null&&oe[J]&&delete ce[K][J],localStorage.setItem(StorageKeyEnum.TOAST_DATA,JSON.stringify(ce))}},removeAllTypeToasts(K){const J=localStorage.getItem(StorageKeyEnum.TOAST_DATA);if(J){const oe={...JSON.parse(J),[K]:{}};localStorage.setItem(StorageKeyEnum.TOAST_DATA,JSON.stringify(oe))}},removeAllToasts(){localStorage.setItem(StorageKeyEnum.TOAST_DATA,"")},setParamsViewers(K,J){const ne=localStorage.getItem(StorageKeyEnum.PARAMS_VIEWERS),ce={...ne?JSON.parse(ne):{},[K]:J};localStorage.setItem(StorageKeyEnum.PARAMS_VIEWERS,JSON.stringify(ce))},getParamsViewers(){const K=localStorage.getItem(StorageKeyEnum.PARAMS_VIEWERS);return K?JSON.parse(K):{}},removeParamsViewer(K){const J=localStorage.getItem(StorageKeyEnum.PARAMS_VIEWERS),ne=J?JSON.parse(J):{};K in ne&&delete ne[K],localStorage.setItem(StorageKeyEnum.PARAMS_VIEWERS,JSON.stringify(ne))},removeAllParamsViewers(){localStorage.setItem(StorageKeyEnum.PARAMS_VIEWERS,"")},getSessionId(){return localStorage.getItem(StorageKeyEnum.SESSION_ID)},setSessionId(K){localStorage.setItem(StorageKeyEnum.SESSION_ID,K)},removeSessionId(){localStorage.removeItem(StorageKeyEnum.SESSION_ID)},setIsLogsPanel(K){localStorage.setItem(StorageKeyEnum.IS_LOGS_PANEL,JSON.stringify(K))},getIsLogsPanel(){const K=localStorage.getItem(StorageKeyEnum.IS_LOGS_PANEL);return K?JSON.parse(K):!1},getDefaultLayoutVersion(){const K=LayoutDirection.HORIZONTAL,J=localStorage.getItem(StorageKeyEnum.DEFAULT_LAYOUT);return J||(localStorage.setItem(StorageKeyEnum.DEFAULT_LAYOUT,K),K)},getLayoutDirection(K){const J=localStorage.getItem(StorageKeyEnum.LAYOUT_DIRECTION_PER_TYPE);return(J?JSON.parse(J):{})[K]||this.getDefaultLayoutVersion()},setLayoutDirectiom(K,J){const ne=localStorage.getItem(StorageKeyEnum.LAYOUT_DIRECTION_PER_TYPE),ce={...ne?JSON.parse(ne):{},[K]:J};localStorage.setItem(StorageKeyEnum.LAYOUT_DIRECTION_PER_TYPE,JSON.stringify(ce))},clearLayoutDirection(){localStorage.removeItem(StorageKeyEnum.LAYOUT_DIRECTION_PER_TYPE)},setIsRowBorder(K){localStorage.setItem(StorageKeyEnum.IS_ROW_BORDER,JSON.stringify(K))},getIsRowBorder(){const K=localStorage.getItem(StorageKeyEnum.IS_ROW_BORDER);return K?JSON.parse(K):!1},setSelectedRow(K){localStorage.setItem(StorageKeyEnum.SELECTED_ROW,K)},getSelectedRow(){return localStorage.getItem(StorageKeyEnum.SELECTED_ROW)},clearSelectedRow(){localStorage.removeItem(StorageKeyEnum.SELECTED_ROW)},setViewerActiveTab(K){localStorage.setItem(StorageKeyEnum.VIEWER_ACTIVE_TAB,K)},getViewerActiveTab(){return localStorage.getItem(StorageKeyEnum.VIEWER_ACTIVE_TAB)},clearViewerActiveTab(){localStorage.removeItem(StorageKeyEnum.VIEWER_ACTIVE_TAB)},setSecretKeys(K,J){const ne=localStorage.getItem(StorageKeyEnum.SECRET_KEYS);let oe=JSON.parse(ne);if(oe&&Array.isArray(oe))return localStorage.setItem(StorageKeyEnum.SECRET_KEYS,JSON.stringify({}));const ce=btoa(J);oe?oe[ce]=K:K.length&&(oe={[ce]:K}),localStorage.setItem(StorageKeyEnum.SECRET_KEYS,JSON.stringify(oe))},getSecretKeys(K){const J=localStorage.getItem(StorageKeyEnum.SECRET_KEYS),ne=JSON.parse(J),oe=btoa(K);return ne&&Array.isArray(ne)?[]:ne!=null&&ne.hasOwnProperty(oe)?ne[oe]:[]},setMainGridScrollPercent(K){const ne={...JSON.parse(sessionStorage.getItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL)),...K};sessionStorage.setItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL,JSON.stringify(ne))},getMainGridScrollPercent(K){const J=JSON.parse(sessionStorage.getItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL));return J?Number(J[K]):0},removeMainGridScrollPercent(K){const J=JSON.parse(sessionStorage.getItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL));J==null||delete J[K],sessionStorage.setItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL,JSON.stringify(J))},removeAllMainGridScrollPercents(){sessionStorage.removeItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL)},setProviderId(K){localStorage.setItem(StorageKeyEnum.PROVIDER_ID,K)},getProviderId(){return localStorage.getItem(StorageKeyEnum.PROVIDER_ID)},removeProviderId(){localStorage.removeItem(StorageKeyEnum.PROVIDER_ID)}},showToast=K=>{const{type:J,content:ne}=K;externalStorage.addToast({...K,id:v4(),content:J===ToastTypeEnum.ERROR&&ne?getErrorMessage(ne):ne}),window.dispatchEvent(new Event("storage"))},toast={success:(K,J)=>showToast({type:ToastTypeEnum.SUCCESS,content:K,options:J}),error:(K,J)=>showToast({type:ToastTypeEnum.ERROR,content:K,options:J}),warning:(K,J)=>showToast({type:ToastTypeEnum.WARNING,content:K,options:J}),info:(K,J)=>showToast({type:ToastTypeEnum.INFO,content:K,options:J})};var ViewerTypesEnum=(K=>(K.VariantTable="VariantTable",K.BinaryContent="FileData",K.VariantMatrix="VariantMatrix",K.ViewContainer="ViewContainer",K.Script="Script",K.VariantTree="VariantTree",K.FormattedVariantTable="FormattedVariantTable",K.ViewHandlerAction="ViewHandlerAction",K.DAG="DAG",K.Dag="Dag",K.UIViewer="Control",K.HtmlView="HtmlView",K.PdfView="PdfView",K.PngView="PngView",K.CsvView="CsvView",K.EmptyView="EmptyView",K))(ViewerTypesEnum||{}),BinaryContentTypesEnum=(K=>(K.Plotly="Plotly",K.Html="Html",K.Jpg="Jpg",K.Png="Png",K.Pdf="Pdf",K.Xlsx="Xlsx",K.Csv="Csv",K))(BinaryContentTypesEnum||{});const fileToBase64$1=K=>new Promise((J,ne)=>{const oe=new FileReader;oe.readAsDataURL(K),oe.onload=()=>J(oe.result.split(",")[1]),oe.onerror=ne}),base64ToBytes=K=>{const J=window.atob(K),ne=J.length,oe=new Uint8Array(ne);for(let ce=0;ce<ne;ce++)oe[ce]=J.charCodeAt(ce);return oe},getMimeTypeFromBuffer=K=>{const J=new Uint8Array(K),ne=4;if(J.length>=ne){const oe=new Array(ne);for(let ue=0;ue<ne;ue++)oe[ue]=new Uint8Array(K)[ue].toString(16);switch(oe.join("").toUpperCase()){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":return"image/jpeg";case"504B0304":return"application/zip";case"504B34":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";default:return null}}return null};var relativeTime$1={exports:{}};(function(K,J){(function(ne,oe){K.exports=oe()})(commonjsGlobal,function(){return function(ne,oe,ce){ne=ne||{};var ue=oe.prototype,Ae={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function pe(me,ge,ye,xe){return ue.fromToBase(me,ge,ye,xe)}ce.en.relativeTime=Ae,ue.fromToBase=function(me,ge,ye,xe,_e){for(var $e,Ie,Fe,ke=ye.$locale().relativeTime||Ae,je=ne.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],We=je.length,ze=0;ze<We;ze+=1){var Xe=je[ze];Xe.d&&($e=xe?ce(me).diff(ye,Xe.d,!0):ye.diff(me,Xe.d,!0));var Je=(ne.rounding||Math.round)(Math.abs($e));if(Fe=$e>0,Je<=Xe.r||!Xe.r){Je<=1&&ze>0&&(Xe=je[ze-1]);var nt=ke[Xe.l];_e&&(Je=_e(""+Je)),Ie=typeof nt=="string"?nt.replace("%d",Je):nt(Je,ge,Xe.l,Fe);break}}if(ge)return Ie;var et=Fe?ke.future:ke.past;return typeof et=="function"?et(Ie):et.replace("%s",Ie)},ue.to=function(me,ge){return pe(me,ge,this,!0)},ue.from=function(me,ge){return pe(me,ge,this)};var ve=function(me){return me.$u?ce.utc():ce()};ue.toNow=function(me){return this.to(ve(this),me)},ue.fromNow=function(me){return this.from(ve(this),me)}}})})(relativeTime$1);var relativeTimeExports=relativeTime$1.exports;const relativeTime=getDefaultExportFromCjs(relativeTimeExports);var utc$1={exports:{}};(function(K,J){(function(ne,oe){K.exports=oe()})(commonjsGlobal,function(){var ne="minute",oe=/[+-]\d\d(?::?\d\d)?/g,ce=/([+-]|\d\d)/g;return function(ue,Ae,pe){var ve=Ae.prototype;pe.utc=function(Ie){var Fe={date:Ie,utc:!0,args:arguments};return new Ae(Fe)},ve.utc=function(Ie){var Fe=pe(this.toDate(),{locale:this.$L,utc:!0});return Ie?Fe.add(this.utcOffset(),ne):Fe},ve.local=function(){return pe(this.toDate(),{locale:this.$L,utc:!1})};var me=ve.parse;ve.parse=function(Ie){Ie.utc&&(this.$u=!0),this.$utils().u(Ie.$offset)||(this.$offset=Ie.$offset),me.call(this,Ie)};var ge=ve.init;ve.init=function(){if(this.$u){var Ie=this.$d;this.$y=Ie.getUTCFullYear(),this.$M=Ie.getUTCMonth(),this.$D=Ie.getUTCDate(),this.$W=Ie.getUTCDay(),this.$H=Ie.getUTCHours(),this.$m=Ie.getUTCMinutes(),this.$s=Ie.getUTCSeconds(),this.$ms=Ie.getUTCMilliseconds()}else ge.call(this)};var ye=ve.utcOffset;ve.utcOffset=function(Ie,Fe){var ke=this.$utils().u;if(ke(Ie))return this.$u?0:ke(this.$offset)?ye.call(this):this.$offset;if(typeof Ie=="string"&&(Ie=function(Xe){Xe===void 0&&(Xe="");var Je=Xe.match(oe);if(!Je)return null;var nt=(""+Je[0]).match(ce)||["-",0,0],et=nt[0],tt=60*+nt[1]+ +nt[2];return tt===0?0:et==="+"?tt:-tt}(Ie),Ie===null))return this;var je=Math.abs(Ie)<=16?60*Ie:Ie,We=this;if(Fe)return We.$offset=je,We.$u=Ie===0,We;if(Ie!==0){var ze=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(We=this.local().add(je+ze,ne)).$offset=je,We.$x.$localOffset=ze}else We=this.utc();return We};var xe=ve.format;ve.format=function(Ie){var Fe=Ie||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return xe.call(this,Fe)},ve.valueOf=function(){var Ie=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*Ie},ve.isUTC=function(){return!!this.$u},ve.toISOString=function(){return this.toDate().toISOString()},ve.toString=function(){return this.toDate().toUTCString()};var _e=ve.toDate;ve.toDate=function(Ie){return Ie==="s"&&this.$offset?pe(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():_e.call(this)};var $e=ve.diff;ve.diff=function(Ie,Fe,ke){if(Ie&&this.$u===Ie.$u)return $e.call(this,Ie,Fe,ke);var je=this.local(),We=pe(Ie).local();return $e.call(je,We,Fe,ke)}}})})(utc$1);var utcExports=utc$1.exports;const utc=getDefaultExportFromCjs(utcExports);dayjs.extend(relativeTime);dayjs.extend(utc);const dateTypesArr=new Set(["Date","Time","DateTime"]),isDateType=K=>K?dateTypesArr.has(K):!1;var DateFormatEnum=(K=>(K.DATE="YYYY-MM-DD",K.DATE_TIME="YYYY-MM-DD HH:mm:ss",K.TIME="HH:mm:ss",K.TIME_MS="HH:mm:ss.SSS",K.DATE_TIME_MS="YYYY-MM-DDTHH-mm-ss-SSS",K.DATE_BULLET_TIME="YYYY-MM-DD [] HH:mm:ss",K))(DateFormatEnum||{});function createDateFormatUtility(K,J){const ne=dayjs(K,J);return{format(ce){return ne.format(ce)},subtract(ce,ue){const Ae=ne.clone().subtract(ce,ue);return oe(Ae)},fromNow(ce){return ne.fromNow(ce)},add(ce,ue){const Ae=ne.clone().add(ce,ue);return oe(Ae)},diff(ce,ue,Ae){return ne.diff(ce,ue,Ae)},unix(){return ne.unix()},sort(ce){return ne.isBefore(ce.toInstance())?-1:ne.isAfter(ce.toInstance())?1:0},toDate(){return ne.toDate()},toInstance(){return ne},isValid(){return ne.isValid()},utcString:ne.utc().format()};function oe(ce){return createDateFormatUtility(ce)}}const DateFormatUtility={create:createDateFormatUtility},isAlltabsInLayout=(K,J,ne,oe)=>!ne||!oe?!1:K.length===J.length&&K.every(ce=>J.find(ue=>ue===ce.id)),getErrorMessage=K=>K instanceof Error?parseAxiosErrorMessage(K):isString$3(K)?K:"Unexpected error occurred!",parseAxiosErrorMessage=K=>{const{data:J}=K.response??{};try{if(J){const{Message:ne}=deserialize$1(J);return isObject$9(ne)?serialize$1(ne):ne}return K.message}catch{return K.message}};function bind(K,J){return function(){return K.apply(J,arguments)}}const{toString:toString$3}=Object.prototype,{getPrototypeOf}=Object,kindOf=(K=>J=>{const ne=toString$3.call(J);return K[ne]||(K[ne]=ne.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=K=>(K=K.toLowerCase(),J=>kindOf(J)===K),typeOfTest=K=>J=>typeof J===K,{isArray:isArray$6}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer$3(K){return K!==null&&!isUndefined$1(K)&&K.constructor!==null&&!isUndefined$1(K.constructor)&&isFunction$5(K.constructor.isBuffer)&&K.constructor.isBuffer(K)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(K){let J;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?J=ArrayBuffer.isView(K):J=K&&K.buffer&&isArrayBuffer$1(K.buffer),J}const isString$2=typeOfTest("string"),isFunction$5=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$7=K=>K!==null&&typeof K=="object",isBoolean=K=>K===!0||K===!1,isPlainObject$2=K=>{if(kindOf(K)!=="object")return!1;const J=getPrototypeOf(K);return(J===null||J===Object.prototype||Object.getPrototypeOf(J)===null)&&!(Symbol.toStringTag in K)&&!(Symbol.iterator in K)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=K=>isObject$7(K)&&isFunction$5(K.pipe),isFormData=K=>{let J;return K&&(typeof FormData=="function"&&K instanceof FormData||isFunction$5(K.append)&&((J=kindOf(K))==="formdata"||J==="object"&&isFunction$5(K.toString)&&K.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim$1=K=>K.trim?K.trim():K.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(K,J,{allOwnKeys:ne=!1}={}){if(K===null||typeof K>"u")return;let oe,ce;if(typeof K!="object"&&(K=[K]),isArray$6(K))for(oe=0,ce=K.length;oe<ce;oe++)J.call(null,K[oe],oe,K);else{const ue=ne?Object.getOwnPropertyNames(K):Object.keys(K),Ae=ue.length;let pe;for(oe=0;oe<Ae;oe++)pe=ue[oe],J.call(null,K[pe],pe,K)}}function findKey(K,J){J=J.toLowerCase();const ne=Object.keys(K);let oe=ne.length,ce;for(;oe-- >0;)if(ce=ne[oe],J===ce.toLowerCase())return ce;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=K=>!isUndefined$1(K)&&K!==_global;function merge$3(){const{caseless:K}=isContextDefined(this)&&this||{},J={},ne=(oe,ce)=>{const ue=K&&findKey(J,ce)||ce;isPlainObject$2(J[ue])&&isPlainObject$2(oe)?J[ue]=merge$3(J[ue],oe):isPlainObject$2(oe)?J[ue]=merge$3({},oe):isArray$6(oe)?J[ue]=oe.slice():J[ue]=oe};for(let oe=0,ce=arguments.length;oe<ce;oe++)arguments[oe]&&forEach$1(arguments[oe],ne);return J}const extend$3=(K,J,ne,{allOwnKeys:oe}={})=>(forEach$1(J,(ce,ue)=>{ne&&isFunction$5(ce)?K[ue]=bind(ce,ne):K[ue]=ce},{allOwnKeys:oe}),K),stripBOM=K=>(K.charCodeAt(0)===65279&&(K=K.slice(1)),K),inherits=(K,J,ne,oe)=>{K.prototype=Object.create(J.prototype,oe),K.prototype.constructor=K,Object.defineProperty(K,"super",{value:J.prototype}),ne&&Object.assign(K.prototype,ne)},toFlatObject=(K,J,ne,oe)=>{let ce,ue,Ae;const pe={};if(J=J||{},K==null)return J;do{for(ce=Object.getOwnPropertyNames(K),ue=ce.length;ue-- >0;)Ae=ce[ue],(!oe||oe(Ae,K,J))&&!pe[Ae]&&(J[Ae]=K[Ae],pe[Ae]=!0);K=ne!==!1&&getPrototypeOf(K)}while(K&&(!ne||ne(K,J))&&K!==Object.prototype);return J},endsWith=(K,J,ne)=>{K=String(K),(ne===void 0||ne>K.length)&&(ne=K.length),ne-=J.length;const oe=K.indexOf(J,ne);return oe!==-1&&oe===ne},toArray$1=K=>{if(!K)return null;if(isArray$6(K))return K;let J=K.length;if(!isNumber(J))return null;const ne=new Array(J);for(;J-- >0;)ne[J]=K[J];return ne},isTypedArray$3=(K=>J=>K&&J instanceof K)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(K,J)=>{const oe=(K&&K[Symbol.iterator]).call(K);let ce;for(;(ce=oe.next())&&!ce.done;){const ue=ce.value;J.call(K,ue[0],ue[1])}},matchAll=(K,J)=>{let ne;const oe=[];for(;(ne=K.exec(J))!==null;)oe.push(ne);return oe},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=K=>K.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(ne,oe,ce){return oe.toUpperCase()+ce}),hasOwnProperty$b=(({hasOwnProperty:K})=>(J,ne)=>K.call(J,ne))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(K,J)=>{const ne=Object.getOwnPropertyDescriptors(K),oe={};forEach$1(ne,(ce,ue)=>{let Ae;(Ae=J(ce,ue,K))!==!1&&(oe[ue]=Ae||ce)}),Object.defineProperties(K,oe)},freezeMethods=K=>{reduceDescriptors(K,(J,ne)=>{if(isFunction$5(K)&&["arguments","caller","callee"].indexOf(ne)!==-1)return!1;const oe=K[ne];if(isFunction$5(oe)){if(J.enumerable=!1,"writable"in J){J.writable=!1;return}J.set||(J.set=()=>{throw Error("Can not rewrite read-only method '"+ne+"'")})}})},toObjectSet=(K,J)=>{const ne={},oe=ce=>{ce.forEach(ue=>{ne[ue]=!0})};return isArray$6(K)?oe(K):oe(String(K).split(J)),ne},noop$4=()=>{},toFiniteNumber=(K,J)=>(K=+K,Number.isFinite(K)?K:J),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(K=16,J=ALPHABET.ALPHA_DIGIT)=>{let ne="";const{length:oe}=J;for(;K--;)ne+=J[Math.random()*oe|0];return ne};function isSpecCompliantForm(K){return!!(K&&isFunction$5(K.append)&&K[Symbol.toStringTag]==="FormData"&&K[Symbol.iterator])}const toJSONObject=K=>{const J=new Array(10),ne=(oe,ce)=>{if(isObject$7(oe)){if(J.indexOf(oe)>=0)return;if(!("toJSON"in oe)){J[ce]=oe;const ue=isArray$6(oe)?[]:{};return forEach$1(oe,(Ae,pe)=>{const ve=ne(Ae,ce+1);!isUndefined$1(ve)&&(ue[pe]=ve)}),J[ce]=void 0,ue}}return oe};return ne(K,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=K=>K&&(isObject$7(K)||isFunction$5(K))&&isFunction$5(K.then)&&isFunction$5(K.catch),utils$6={isArray:isArray$6,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$3,isFormData,isArrayBufferView,isString:isString$2,isNumber,isBoolean,isObject:isObject$7,isPlainObject:isPlainObject$2,isUndefined:isUndefined$1,isDate,isFile,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$5,isStream,isURLSearchParams,isTypedArray:isTypedArray$3,isFileList,forEach:forEach$1,merge:merge$3,extend:extend$3,trim:trim$1,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$b,hasOwnProp:hasOwnProperty$b,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$4,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError$1(K,J,ne,oe,ce){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=K,this.name="AxiosError",J&&(this.code=J),ne&&(this.config=ne),oe&&(this.request=oe),ce&&(this.response=ce)}utils$6.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$6.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(K=>{descriptors[K]={value:K}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(K,J,ne,oe,ce,ue)=>{const Ae=Object.create(prototype$1);return utils$6.toFlatObject(K,Ae,function(ve){return ve!==Error.prototype},pe=>pe!=="isAxiosError"),AxiosError$1.call(Ae,K.message,J,ne,oe,ce),Ae.cause=K,Ae.name=K.name,ue&&Object.assign(Ae,ue),Ae};const httpAdapter=null;function isVisitable(K){return utils$6.isPlainObject(K)||utils$6.isArray(K)}function removeBrackets(K){return utils$6.endsWith(K,"[]")?K.slice(0,-2):K}function renderKey(K,J,ne){return K?K.concat(J).map(function(ce,ue){return ce=removeBrackets(ce),!ne&&ue?"["+ce+"]":ce}).join(ne?".":""):J}function isFlatArray(K){return utils$6.isArray(K)&&!K.some(isVisitable)}const predicates=utils$6.toFlatObject(utils$6,{},null,function(J){return/^is[A-Z]/.test(J)});function toFormData$1(K,J,ne){if(!utils$6.isObject(K))throw new TypeError("target must be an object");J=J||new FormData,ne=utils$6.toFlatObject(ne,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ie,Fe){return!utils$6.isUndefined(Fe[Ie])});const oe=ne.metaTokens,ce=ne.visitor||ge,ue=ne.dots,Ae=ne.indexes,ve=(ne.Blob||typeof Blob<"u"&&Blob)&&utils$6.isSpecCompliantForm(J);if(!utils$6.isFunction(ce))throw new TypeError("visitor must be a function");function me($e){if($e===null)return"";if(utils$6.isDate($e))return $e.toISOString();if(!ve&&utils$6.isBlob($e))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$6.isArrayBuffer($e)||utils$6.isTypedArray($e)?ve&&typeof Blob=="function"?new Blob([$e]):Buffer.from($e):$e}function ge($e,Ie,Fe){let ke=$e;if($e&&!Fe&&typeof $e=="object"){if(utils$6.endsWith(Ie,"{}"))Ie=oe?Ie:Ie.slice(0,-2),$e=JSON.stringify($e);else if(utils$6.isArray($e)&&isFlatArray($e)||(utils$6.isFileList($e)||utils$6.endsWith(Ie,"[]"))&&(ke=utils$6.toArray($e)))return Ie=removeBrackets(Ie),ke.forEach(function(We,ze){!(utils$6.isUndefined(We)||We===null)&&J.append(Ae===!0?renderKey([Ie],ze,ue):Ae===null?Ie:Ie+"[]",me(We))}),!1}return isVisitable($e)?!0:(J.append(renderKey(Fe,Ie,ue),me($e)),!1)}const ye=[],xe=Object.assign(predicates,{defaultVisitor:ge,convertValue:me,isVisitable});function _e($e,Ie){if(!utils$6.isUndefined($e)){if(ye.indexOf($e)!==-1)throw Error("Circular reference detected in "+Ie.join("."));ye.push($e),utils$6.forEach($e,function(ke,je){(!(utils$6.isUndefined(ke)||ke===null)&&ce.call(J,ke,utils$6.isString(je)?je.trim():je,Ie,xe))===!0&&_e(ke,Ie?Ie.concat(je):[je])}),ye.pop()}}if(!utils$6.isObject(K))throw new TypeError("data must be an object");return _e(K),J}function encode$1(K){const J={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(K).replace(/[!'()~]|%20|%00/g,function(oe){return J[oe]})}function AxiosURLSearchParams(K,J){this._pairs=[],K&&toFormData$1(K,this,J)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(J,ne){this._pairs.push([J,ne])};prototype.toString=function(J){const ne=J?function(oe){return J.call(this,oe,encode$1)}:encode$1;return this._pairs.map(function(ce){return ne(ce[0])+"="+ne(ce[1])},"").join("&")};function encode(K){return encodeURIComponent(K).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(K,J,ne){if(!J)return K;const oe=ne&&ne.encode||encode,ce=ne&&ne.serialize;let ue;if(ce?ue=ce(J,ne):ue=utils$6.isURLSearchParams(J)?J.toString():new AxiosURLSearchParams(J,ne).toString(oe),ue){const Ae=K.indexOf("#");Ae!==-1&&(K=K.slice(0,Ae)),K+=(K.indexOf("?")===-1?"?":"&")+ue}return K}class InterceptorManager{constructor(){this.handlers=[]}use(J,ne,oe){return this.handlers.push({fulfilled:J,rejected:ne,synchronous:oe?oe.synchronous:!1,runWhen:oe?oe.runWhen:null}),this.handlers.length-1}eject(J){this.handlers[J]&&(this.handlers[J]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(J){utils$6.forEach(this.handlers,function(oe){oe!==null&&J(oe)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let K;return typeof navigator<"u"&&((K=navigator.product)==="ReactNative"||K==="NativeScript"||K==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(K,J){return toFormData$1(K,new platform.classes.URLSearchParams,Object.assign({visitor:function(ne,oe,ce,ue){return platform.isNode&&utils$6.isBuffer(ne)?(this.append(oe,ne.toString("base64")),!1):ue.defaultVisitor.apply(this,arguments)}},J))}function parsePropPath(K){return utils$6.matchAll(/\w+|\[(\w*)]/g,K).map(J=>J[0]==="[]"?"":J[1]||J[0])}function arrayToObject(K){const J={},ne=Object.keys(K);let oe;const ce=ne.length;let ue;for(oe=0;oe<ce;oe++)ue=ne[oe],J[ue]=K[ue];return J}function formDataToJSON(K){function J(ne,oe,ce,ue){let Ae=ne[ue++];const pe=Number.isFinite(+Ae),ve=ue>=ne.length;return Ae=!Ae&&utils$6.isArray(ce)?ce.length:Ae,ve?(utils$6.hasOwnProp(ce,Ae)?ce[Ae]=[ce[Ae],oe]:ce[Ae]=oe,!pe):((!ce[Ae]||!utils$6.isObject(ce[Ae]))&&(ce[Ae]=[]),J(ne,oe,ce[Ae],ue)&&utils$6.isArray(ce[Ae])&&(ce[Ae]=arrayToObject(ce[Ae])),!pe)}if(utils$6.isFormData(K)&&utils$6.isFunction(K.entries)){const ne={};return utils$6.forEachEntry(K,(oe,ce)=>{J(parsePropPath(oe),ce,ne,0)}),ne}return null}function stringifySafely(K,J,ne){if(utils$6.isString(K))try{return(J||JSON.parse)(K),utils$6.trim(K)}catch(oe){if(oe.name!=="SyntaxError")throw oe}return(ne||JSON.stringify)(K)}const defaults$2={transitional:transitionalDefaults,adapter:platform.isNode?"http":"xhr",transformRequest:[function(J,ne){const oe=ne.getContentType()||"",ce=oe.indexOf("application/json")>-1,ue=utils$6.isObject(J);if(ue&&utils$6.isHTMLForm(J)&&(J=new FormData(J)),utils$6.isFormData(J))return ce&&ce?JSON.stringify(formDataToJSON(J)):J;if(utils$6.isArrayBuffer(J)||utils$6.isBuffer(J)||utils$6.isStream(J)||utils$6.isFile(J)||utils$6.isBlob(J))return J;if(utils$6.isArrayBufferView(J))return J.buffer;if(utils$6.isURLSearchParams(J))return ne.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),J.toString();let pe;if(ue){if(oe.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(J,this.formSerializer).toString();if((pe=utils$6.isFileList(J))||oe.indexOf("multipart/form-data")>-1){const ve=this.env&&this.env.FormData;return toFormData$1(pe?{"files[]":J}:J,ve&&new ve,this.formSerializer)}}return ue||ce?(ne.setContentType("application/json",!1),stringifySafely(J)):J}],transformResponse:[function(J){const ne=this.transitional||defaults$2.transitional,oe=ne&&ne.forcedJSONParsing,ce=this.responseType==="json";if(J&&utils$6.isString(J)&&(oe&&!this.responseType||ce)){const Ae=!(ne&&ne.silentJSONParsing)&&ce;try{return JSON.parse(J)}catch(pe){if(Ae)throw pe.name==="SyntaxError"?AxiosError$1.from(pe,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):pe}}return J}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(J){return J>=200&&J<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$6.forEach(["delete","get","head","post","put","patch"],K=>{defaults$2.headers[K]={}});const ignoreDuplicateOf=utils$6.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=K=>{const J={};let ne,oe,ce;return K&&K.split(`
`).forEach(function(Ae){ce=Ae.indexOf(":"),ne=Ae.substring(0,ce).trim().toLowerCase(),oe=Ae.substring(ce+1).trim(),!(!ne||J[ne]&&ignoreDuplicateOf[ne])&&(ne==="set-cookie"?J[ne]?J[ne].push(oe):J[ne]=[oe]:J[ne]=J[ne]?J[ne]+", "+oe:oe)}),J},$internals=Symbol("internals");function normalizeHeader(K){return K&&String(K).trim().toLowerCase()}function normalizeValue(K){return K===!1||K==null?K:utils$6.isArray(K)?K.map(normalizeValue):String(K)}function parseTokens(K){const J=Object.create(null),ne=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let oe;for(;oe=ne.exec(K);)J[oe[1]]=oe[2];return J}const isValidHeaderName=K=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(K.trim());function matchHeaderValue(K,J,ne,oe,ce){if(utils$6.isFunction(oe))return oe.call(this,J,ne);if(ce&&(J=ne),!!utils$6.isString(J)){if(utils$6.isString(oe))return J.indexOf(oe)!==-1;if(utils$6.isRegExp(oe))return oe.test(J)}}function formatHeader(K){return K.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(J,ne,oe)=>ne.toUpperCase()+oe)}function buildAccessors(K,J){const ne=utils$6.toCamelCase(" "+J);["get","set","has"].forEach(oe=>{Object.defineProperty(K,oe+ne,{value:function(ce,ue,Ae){return this[oe].call(this,J,ce,ue,Ae)},configurable:!0})})}let AxiosHeaders$1=class{constructor(J){J&&this.set(J)}set(J,ne,oe){const ce=this;function ue(pe,ve,me){const ge=normalizeHeader(ve);if(!ge)throw new Error("header name must be a non-empty string");const ye=utils$6.findKey(ce,ge);(!ye||ce[ye]===void 0||me===!0||me===void 0&&ce[ye]!==!1)&&(ce[ye||ve]=normalizeValue(pe))}const Ae=(pe,ve)=>utils$6.forEach(pe,(me,ge)=>ue(me,ge,ve));return utils$6.isPlainObject(J)||J instanceof this.constructor?Ae(J,ne):utils$6.isString(J)&&(J=J.trim())&&!isValidHeaderName(J)?Ae(parseHeaders(J),ne):J!=null&&ue(ne,J,oe),this}get(J,ne){if(J=normalizeHeader(J),J){const oe=utils$6.findKey(this,J);if(oe){const ce=this[oe];if(!ne)return ce;if(ne===!0)return parseTokens(ce);if(utils$6.isFunction(ne))return ne.call(this,ce,oe);if(utils$6.isRegExp(ne))return ne.exec(ce);throw new TypeError("parser must be boolean|regexp|function")}}}has(J,ne){if(J=normalizeHeader(J),J){const oe=utils$6.findKey(this,J);return!!(oe&&this[oe]!==void 0&&(!ne||matchHeaderValue(this,this[oe],oe,ne)))}return!1}delete(J,ne){const oe=this;let ce=!1;function ue(Ae){if(Ae=normalizeHeader(Ae),Ae){const pe=utils$6.findKey(oe,Ae);pe&&(!ne||matchHeaderValue(oe,oe[pe],pe,ne))&&(delete oe[pe],ce=!0)}}return utils$6.isArray(J)?J.forEach(ue):ue(J),ce}clear(J){const ne=Object.keys(this);let oe=ne.length,ce=!1;for(;oe--;){const ue=ne[oe];(!J||matchHeaderValue(this,this[ue],ue,J,!0))&&(delete this[ue],ce=!0)}return ce}normalize(J){const ne=this,oe={};return utils$6.forEach(this,(ce,ue)=>{const Ae=utils$6.findKey(oe,ue);if(Ae){ne[Ae]=normalizeValue(ce),delete ne[ue];return}const pe=J?formatHeader(ue):String(ue).trim();pe!==ue&&delete ne[ue],ne[pe]=normalizeValue(ce),oe[pe]=!0}),this}concat(...J){return this.constructor.concat(this,...J)}toJSON(J){const ne=Object.create(null);return utils$6.forEach(this,(oe,ce)=>{oe!=null&&oe!==!1&&(ne[ce]=J&&utils$6.isArray(oe)?oe.join(", "):oe)}),ne}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([J,ne])=>J+": "+ne).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(J){return J instanceof this?J:new this(J)}static concat(J,...ne){const oe=new this(J);return ne.forEach(ce=>oe.set(ce)),oe}static accessor(J){const oe=(this[$internals]=this[$internals]={accessors:{}}).accessors,ce=this.prototype;function ue(Ae){const pe=normalizeHeader(Ae);oe[pe]||(buildAccessors(ce,Ae),oe[pe]=!0)}return utils$6.isArray(J)?J.forEach(ue):ue(J),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$6.reduceDescriptors(AxiosHeaders$1.prototype,({value:K},J)=>{let ne=J[0].toUpperCase()+J.slice(1);return{get:()=>K,set(oe){this[ne]=oe}}});utils$6.freezeMethods(AxiosHeaders$1);function transformData(K,J){const ne=this||defaults$2,oe=J||ne,ce=AxiosHeaders$1.from(oe.headers);let ue=oe.data;return utils$6.forEach(K,function(pe){ue=pe.call(ne,ue,ce.normalize(),J?J.status:void 0)}),ce.normalize(),ue}function isCancel$1(K){return!!(K&&K.__CANCEL__)}function CanceledError$1(K,J,ne){AxiosError$1.call(this,K??"canceled",AxiosError$1.ERR_CANCELED,J,ne),this.name="CanceledError"}utils$6.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(K,J,ne){const oe=ne.config.validateStatus;!ne.status||!oe||oe(ne.status)?K(ne):J(new AxiosError$1("Request failed with status code "+ne.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(ne.status/100)-4],ne.config,ne.request,ne))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(ne,oe,ce,ue,Ae,pe){const ve=[];ve.push(ne+"="+encodeURIComponent(oe)),utils$6.isNumber(ce)&&ve.push("expires="+new Date(ce).toGMTString()),utils$6.isString(ue)&&ve.push("path="+ue),utils$6.isString(Ae)&&ve.push("domain="+Ae),pe===!0&&ve.push("secure"),document.cookie=ve.join("; ")},read:function(ne){const oe=document.cookie.match(new RegExp("(^|;\\s*)("+ne+")=([^;]*)"));return oe?decodeURIComponent(oe[3]):null},remove:function(ne){this.write(ne,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(K){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(K)}function combineURLs(K,J){return J?K.replace(/\/+$/,"")+"/"+J.replace(/^\/+/,""):K}function buildFullPath(K,J){return K&&!isAbsoluteURL(J)?combineURLs(K,J):J}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const J=/(msie|trident)/i.test(navigator.userAgent),ne=document.createElement("a");let oe;function ce(ue){let Ae=ue;return J&&(ne.setAttribute("href",Ae),Ae=ne.href),ne.setAttribute("href",Ae),{href:ne.href,protocol:ne.protocol?ne.protocol.replace(/:$/,""):"",host:ne.host,search:ne.search?ne.search.replace(/^\?/,""):"",hash:ne.hash?ne.hash.replace(/^#/,""):"",hostname:ne.hostname,port:ne.port,pathname:ne.pathname.charAt(0)==="/"?ne.pathname:"/"+ne.pathname}}return oe=ce(window.location.href),function(Ae){const pe=utils$6.isString(Ae)?ce(Ae):Ae;return pe.protocol===oe.protocol&&pe.host===oe.host}}():function(){return function(){return!0}}();function parseProtocol(K){const J=/^([-+\w]{1,25})(:?\/\/|:)/.exec(K);return J&&J[1]||""}function speedometer(K,J){K=K||10;const ne=new Array(K),oe=new Array(K);let ce=0,ue=0,Ae;return J=J!==void 0?J:1e3,function(ve){const me=Date.now(),ge=oe[ue];Ae||(Ae=me),ne[ce]=ve,oe[ce]=me;let ye=ue,xe=0;for(;ye!==ce;)xe+=ne[ye++],ye=ye%K;if(ce=(ce+1)%K,ce===ue&&(ue=(ue+1)%K),me-Ae<J)return;const _e=ge&&me-ge;return _e?Math.round(xe*1e3/_e):void 0}}function progressEventReducer(K,J){let ne=0;const oe=speedometer(50,250);return ce=>{const ue=ce.loaded,Ae=ce.lengthComputable?ce.total:void 0,pe=ue-ne,ve=oe(pe),me=ue<=Ae;ne=ue;const ge={loaded:ue,total:Ae,progress:Ae?ue/Ae:void 0,bytes:pe,rate:ve||void 0,estimated:ve&&Ae&&me?(Ae-ue)/ve:void 0,event:ce};ge[J?"download":"upload"]=!0,K(ge)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(K){return new Promise(function(ne,oe){let ce=K.data;const ue=AxiosHeaders$1.from(K.headers).normalize(),Ae=K.responseType;let pe;function ve(){K.cancelToken&&K.cancelToken.unsubscribe(pe),K.signal&&K.signal.removeEventListener("abort",pe)}utils$6.isFormData(ce)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv?ue.setContentType(!1):ue.setContentType("multipart/form-data;",!1));let me=new XMLHttpRequest;if(K.auth){const _e=K.auth.username||"",$e=K.auth.password?unescape(encodeURIComponent(K.auth.password)):"";ue.set("Authorization","Basic "+btoa(_e+":"+$e))}const ge=buildFullPath(K.baseURL,K.url);me.open(K.method.toUpperCase(),buildURL(ge,K.params,K.paramsSerializer),!0),me.timeout=K.timeout;function ye(){if(!me)return;const _e=AxiosHeaders$1.from("getAllResponseHeaders"in me&&me.getAllResponseHeaders()),Ie={data:!Ae||Ae==="text"||Ae==="json"?me.responseText:me.response,status:me.status,statusText:me.statusText,headers:_e,config:K,request:me};settle(function(ke){ne(ke),ve()},function(ke){oe(ke),ve()},Ie),me=null}if("onloadend"in me?me.onloadend=ye:me.onreadystatechange=function(){!me||me.readyState!==4||me.status===0&&!(me.responseURL&&me.responseURL.indexOf("file:")===0)||setTimeout(ye)},me.onabort=function(){me&&(oe(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,K,me)),me=null)},me.onerror=function(){oe(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,K,me)),me=null},me.ontimeout=function(){let $e=K.timeout?"timeout of "+K.timeout+"ms exceeded":"timeout exceeded";const Ie=K.transitional||transitionalDefaults;K.timeoutErrorMessage&&($e=K.timeoutErrorMessage),oe(new AxiosError$1($e,Ie.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,K,me)),me=null},platform.isStandardBrowserEnv){const _e=(K.withCredentials||isURLSameOrigin(ge))&&K.xsrfCookieName&&cookies.read(K.xsrfCookieName);_e&&ue.set(K.xsrfHeaderName,_e)}ce===void 0&&ue.setContentType(null),"setRequestHeader"in me&&utils$6.forEach(ue.toJSON(),function($e,Ie){me.setRequestHeader(Ie,$e)}),utils$6.isUndefined(K.withCredentials)||(me.withCredentials=!!K.withCredentials),Ae&&Ae!=="json"&&(me.responseType=K.responseType),typeof K.onDownloadProgress=="function"&&me.addEventListener("progress",progressEventReducer(K.onDownloadProgress,!0)),typeof K.onUploadProgress=="function"&&me.upload&&me.upload.addEventListener("progress",progressEventReducer(K.onUploadProgress)),(K.cancelToken||K.signal)&&(pe=_e=>{me&&(oe(!_e||_e.type?new CanceledError$1(null,K,me):_e),me.abort(),me=null)},K.cancelToken&&K.cancelToken.subscribe(pe),K.signal&&(K.signal.aborted?pe():K.signal.addEventListener("abort",pe)));const xe=parseProtocol(ge);if(xe&&platform.protocols.indexOf(xe)===-1){oe(new AxiosError$1("Unsupported protocol "+xe+":",AxiosError$1.ERR_BAD_REQUEST,K));return}me.send(ce||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$6.forEach(knownAdapters,(K,J)=>{if(K){try{Object.defineProperty(K,"name",{value:J})}catch{}Object.defineProperty(K,"adapterName",{value:J})}});const adapters={getAdapter:K=>{K=utils$6.isArray(K)?K:[K];const{length:J}=K;let ne,oe;for(let ce=0;ce<J&&(ne=K[ce],!(oe=utils$6.isString(ne)?knownAdapters[ne.toLowerCase()]:ne));ce++);if(!oe)throw oe===!1?new AxiosError$1(`Adapter ${ne} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils$6.hasOwnProp(knownAdapters,ne)?`Adapter '${ne}' is not available in the build`:`Unknown adapter '${ne}'`);if(!utils$6.isFunction(oe))throw new TypeError("adapter is not a function");return oe},adapters:knownAdapters};function throwIfCancellationRequested(K){if(K.cancelToken&&K.cancelToken.throwIfRequested(),K.signal&&K.signal.aborted)throw new CanceledError$1(null,K)}function dispatchRequest(K){return throwIfCancellationRequested(K),K.headers=AxiosHeaders$1.from(K.headers),K.data=transformData.call(K,K.transformRequest),["post","put","patch"].indexOf(K.method)!==-1&&K.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(K.adapter||defaults$2.adapter)(K).then(function(oe){return throwIfCancellationRequested(K),oe.data=transformData.call(K,K.transformResponse,oe),oe.headers=AxiosHeaders$1.from(oe.headers),oe},function(oe){return isCancel$1(oe)||(throwIfCancellationRequested(K),oe&&oe.response&&(oe.response.data=transformData.call(K,K.transformResponse,oe.response),oe.response.headers=AxiosHeaders$1.from(oe.response.headers))),Promise.reject(oe)})}const headersToObject=K=>K instanceof AxiosHeaders$1?K.toJSON():K;function mergeConfig$1(K,J){J=J||{};const ne={};function oe(me,ge,ye){return utils$6.isPlainObject(me)&&utils$6.isPlainObject(ge)?utils$6.merge.call({caseless:ye},me,ge):utils$6.isPlainObject(ge)?utils$6.merge({},ge):utils$6.isArray(ge)?ge.slice():ge}function ce(me,ge,ye){if(utils$6.isUndefined(ge)){if(!utils$6.isUndefined(me))return oe(void 0,me,ye)}else return oe(me,ge,ye)}function ue(me,ge){if(!utils$6.isUndefined(ge))return oe(void 0,ge)}function Ae(me,ge){if(utils$6.isUndefined(ge)){if(!utils$6.isUndefined(me))return oe(void 0,me)}else return oe(void 0,ge)}function pe(me,ge,ye){if(ye in J)return oe(me,ge);if(ye in K)return oe(void 0,me)}const ve={url:ue,method:ue,data:ue,baseURL:Ae,transformRequest:Ae,transformResponse:Ae,paramsSerializer:Ae,timeout:Ae,timeoutMessage:Ae,withCredentials:Ae,adapter:Ae,responseType:Ae,xsrfCookieName:Ae,xsrfHeaderName:Ae,onUploadProgress:Ae,onDownloadProgress:Ae,decompress:Ae,maxContentLength:Ae,maxBodyLength:Ae,beforeRedirect:Ae,transport:Ae,httpAgent:Ae,httpsAgent:Ae,cancelToken:Ae,socketPath:Ae,responseEncoding:Ae,validateStatus:pe,headers:(me,ge)=>ce(headersToObject(me),headersToObject(ge),!0)};return utils$6.forEach(Object.keys(Object.assign({},K,J)),function(ge){const ye=ve[ge]||ce,xe=ye(K[ge],J[ge],ge);utils$6.isUndefined(xe)&&ye!==pe||(ne[ge]=xe)}),ne}const VERSION$2="1.5.0",validators$3={};["object","boolean","number","function","string","symbol"].forEach((K,J)=>{validators$3[K]=function(oe){return typeof oe===K||"a"+(J<1?"n ":" ")+K}});const deprecatedWarnings={};validators$3.transitional=function(J,ne,oe){function ce(ue,Ae){return"[Axios v"+VERSION$2+"] Transitional option '"+ue+"'"+Ae+(oe?". "+oe:"")}return(ue,Ae,pe)=>{if(J===!1)throw new AxiosError$1(ce(Ae," has been removed"+(ne?" in "+ne:"")),AxiosError$1.ERR_DEPRECATED);return ne&&!deprecatedWarnings[Ae]&&(deprecatedWarnings[Ae]=!0,console.warn(ce(Ae," has been deprecated since v"+ne+" and will be removed in the near future"))),J?J(ue,Ae,pe):!0}};function assertOptions(K,J,ne){if(typeof K!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const oe=Object.keys(K);let ce=oe.length;for(;ce-- >0;){const ue=oe[ce],Ae=J[ue];if(Ae){const pe=K[ue],ve=pe===void 0||Ae(pe,ue,K);if(ve!==!0)throw new AxiosError$1("option "+ue+" must be "+ve,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(ne!==!0)throw new AxiosError$1("Unknown option "+ue,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$3},validators$2=validator.validators;let Axios$1=class{constructor(J){this.defaults=J,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}request(J,ne){typeof J=="string"?(ne=ne||{},ne.url=J):ne=J||{},ne=mergeConfig$1(this.defaults,ne);const{transitional:oe,paramsSerializer:ce,headers:ue}=ne;oe!==void 0&&validator.assertOptions(oe,{silentJSONParsing:validators$2.transitional(validators$2.boolean),forcedJSONParsing:validators$2.transitional(validators$2.boolean),clarifyTimeoutError:validators$2.transitional(validators$2.boolean)},!1),ce!=null&&(utils$6.isFunction(ce)?ne.paramsSerializer={serialize:ce}:validator.assertOptions(ce,{encode:validators$2.function,serialize:validators$2.function},!0)),ne.method=(ne.method||this.defaults.method||"get").toLowerCase();let Ae=ue&&utils$6.merge(ue.common,ue[ne.method]);ue&&utils$6.forEach(["delete","get","head","post","put","patch","common"],$e=>{delete ue[$e]}),ne.headers=AxiosHeaders$1.concat(Ae,ue);const pe=[];let ve=!0;this.interceptors.request.forEach(function(Ie){typeof Ie.runWhen=="function"&&Ie.runWhen(ne)===!1||(ve=ve&&Ie.synchronous,pe.unshift(Ie.fulfilled,Ie.rejected))});const me=[];this.interceptors.response.forEach(function(Ie){me.push(Ie.fulfilled,Ie.rejected)});let ge,ye=0,xe;if(!ve){const $e=[dispatchRequest.bind(this),void 0];for($e.unshift.apply($e,pe),$e.push.apply($e,me),xe=$e.length,ge=Promise.resolve(ne);ye<xe;)ge=ge.then($e[ye++],$e[ye++]);return ge}xe=pe.length;let _e=ne;for(ye=0;ye<xe;){const $e=pe[ye++],Ie=pe[ye++];try{_e=$e(_e)}catch(Fe){Ie.call(this,Fe);break}}try{ge=dispatchRequest.call(this,_e)}catch($e){return Promise.reject($e)}for(ye=0,xe=me.length;ye<xe;)ge=ge.then(me[ye++],me[ye++]);return ge}getUri(J){J=mergeConfig$1(this.defaults,J);const ne=buildFullPath(J.baseURL,J.url);return buildURL(ne,J.params,J.paramsSerializer)}};utils$6.forEach(["delete","get","head","options"],function(J){Axios$1.prototype[J]=function(ne,oe){return this.request(mergeConfig$1(oe||{},{method:J,url:ne,data:(oe||{}).data}))}});utils$6.forEach(["post","put","patch"],function(J){function ne(oe){return function(ue,Ae,pe){return this.request(mergeConfig$1(pe||{},{method:J,headers:oe?{"Content-Type":"multipart/form-data"}:{},url:ue,data:Ae}))}}Axios$1.prototype[J]=ne(),Axios$1.prototype[J+"Form"]=ne(!0)});let CancelToken$1=class Dg{constructor(J){if(typeof J!="function")throw new TypeError("executor must be a function.");let ne;this.promise=new Promise(function(ue){ne=ue});const oe=this;this.promise.then(ce=>{if(!oe._listeners)return;let ue=oe._listeners.length;for(;ue-- >0;)oe._listeners[ue](ce);oe._listeners=null}),this.promise.then=ce=>{let ue;const Ae=new Promise(pe=>{oe.subscribe(pe),ue=pe}).then(ce);return Ae.cancel=function(){oe.unsubscribe(ue)},Ae},J(function(ue,Ae,pe){oe.reason||(oe.reason=new CanceledError$1(ue,Ae,pe),ne(oe.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(J){if(this.reason){J(this.reason);return}this._listeners?this._listeners.push(J):this._listeners=[J]}unsubscribe(J){if(!this._listeners)return;const ne=this._listeners.indexOf(J);ne!==-1&&this._listeners.splice(ne,1)}static source(){let J;return{token:new Dg(function(ce){J=ce}),cancel:J}}};function spread$1(K){return function(ne){return K.apply(null,ne)}}function isAxiosError$1(K){return utils$6.isObject(K)&&K.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([K,J])=>{HttpStatusCode$1[J]=K});function createInstance(K){const J=new Axios$1(K),ne=bind(Axios$1.prototype.request,J);return utils$6.extend(ne,Axios$1.prototype,J,{allOwnKeys:!0}),utils$6.extend(ne,J,null,{allOwnKeys:!0}),ne.create=function(ce){return createInstance(mergeConfig$1(K,ce))},ne}const axios=createInstance(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(J){return Promise.all(J)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=K=>formDataToJSON(utils$6.isHTMLForm(K)?new FormData(K):K);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all:all$1,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,__vite_import_meta_env__$1={BASE_URL:"/",CL_API_HOST:"",CL_API_PORT:"",CL_API_PREFIX:"",CL_API_PROTOCOL:"",CL_API_URL:"",CL_APP_NAME:"UI React",CL_APP_PREFIX_BASENAME:"",CL_APP_TITLE:"CompatibL UI",CL_BASENAME:"/app",CL_BUILD_ENV:"C:\\CL.Build.Utilities\\bin",CL_CHAT_ABOUT_ON:"true",CL_DEFAULT_THEME:"Blue",CL_FEEDBACK_EMAIL:"ui.tracking@compatibl.com",CL_FRONTEND_VERSION:"Default version",CL_FULL_SCREEN_HANDLERS:"true",CL_FULL_SCREEN_NAVIGATION:"true",CL_GOOGLE_TAG_MANAGER_ID:"",CL_GRID_MAX_LINES:"1",CL_HIDE_EMPTY_COLUMNS:"true",CL_LOCAL_BUILD:"true",CL_REFRESH_ON_ALL_HANDLERS:"false",CL_SCHEMA_VERSION:"1.9.0",CL_SIMPLIFIED_BUILD:"true",DEV:!1,MODE:"prod",PROD:!0,SSR:!1},getEnv$1=K=>{var J;return(J=__vite_import_meta_env__$1==null?void 0:__vite_import_meta_env__$1[K])==null?void 0:J.trim()},getBoolEnv=K=>getEnv$1(K)==="true",getApiUrl=()=>{const K=getEnv$1("CL_API_URL"),J=getEnv$1("CL_API_PREFIX");if(K)return`${K}${J||""}`;const ne=getEnv$1("CL_API_PROTOCOL")||location.protocol,oe=getEnv$1("CL_API_HOST")||location.hostname,ce=getEnv$1("CL_API_PORT")||location.port;return`${ne}//${oe}${ce?`:${ce}`:""}${J||""}`},env$1={apiUrl:getApiUrl(),baseName:getEnv$1("CL_BASENAME"),frontendVersion:getEnv$1("CL_FRONTEND_VERSION"),feedBackEmail:getEnv$1("CL_FEEDBACK_EMAIL"),defaultTheme:getEnv$1("CL_DEFAULT_THEME"),isChatAboutOn:getBoolEnv("CL_CHAT_ABOUT_ON"),isRefreshOnHandlerSuccess:getEnv$1("CL_REFRESH_ON_ALL_HANDLERS"),gridMaxLines:getEnv$1("CL_GRID_MAX_LINES"),hideEmptyColumns:getEnv$1("CL_HIDE_EMPTY_COLUMNS"),defaultName:getEnv$1("CL_APP_NAME"),isFullScreenNavigation:getBoolEnv("CL_FULL_SCREEN_NAVIGATION"),isFullScreenHandlers:getBoolEnv("CL_FULL_SCREEN_HANDLERS"),userKeyExpire:getEnv$1("CL_USER_KEYS_EXPIRE"),schemaVersion:getEnv$1("CL_SCHEMA_VERSION"),googleTagManagerId:getEnv$1("CL_GOOGLE_TAG_MANAGER_ID"),isSimplifiedBuild:getBoolEnv("CL_SIMPLIFIED_BUILD"),isLocalBuild:getBoolEnv("CL_LOCAL_BUILD")},selectSchemaTypes=K=>K.SchemaTypesSliceReducer,selectActiveDataset$1=K=>K.DatasetDataSliceReducer.datasetData.activeDatasetName,selectDatasetData=K=>K.DatasetDataSliceReducer.datasetData,selectStore$1=K=>K.AppStateSliceReducer,selectActiveTab=createSelector(selectStore$1,K=>K.activeTab),selectOpenedTabs=createSelector(selectStore$1,K=>K.openedTabs),selectIsReadonly=createSelector(selectStore$1,K=>K.isReadonly),selectApplicationTheme=createSelector(selectStore$1,K=>K.applicationTheme),selectActiveTabIndex=createSelector(selectStore$1,K=>K.activeTabIndex),selectFullScreenMode=createSelector(selectStore$1,K=>K.fullScreenMode),selectUserSecretIdentifiers=createSelector(selectStore$1,K=>K.userSecretIdentifiers);createSelector(selectStore$1,K=>K.authType);const selectUser=createSelector(selectStore$1,K=>K.user),selectIsLogoutLink=createSelector(selectStore$1,K=>K.isLogoutLink),selectProviders=createSelector(selectStore$1,K=>K.providers),selectIsAuthenticated=createSelector(selectStore$1,K=>K.isAuthenticated),selectStore=K=>K.SettingsDataSliceReducer,selectApplicationName=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.ApplicationName}),selectVersions=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.Versions}),selectEnvLabel=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.Environment}),selectActiveEnvironment=createSelector(selectStore,K=>K.activeEnvironment),selectEnvironmentList=createSelector(selectStore,K=>K.environmentList),selectSchemaVersion=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.SchemaVersion}),selectIsDatasetSupport=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.DatasetSupport}),selectIsDemoMode=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.DemoMode});createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.SessionId});function generateHeaders(){const K=store.getState(),{user:J}=selectStore$1(K),ne=selectActiveDataset$1(K),oe=selectActiveEnvironment(K);return{...ne&&{Dataset:ne},...oe&&{Environment:oe},...J&&{user:J.id},Locale:navigator.language,Timezone:new Date().getTimezoneOffset().toString()}}const createRefreshAndRetryQueue=()=>{let K=[];return{iterate(J){K.forEach(J)},enqueue(J){K.push(J)},clear(){K=[]}}};let navigate;const setNavigate=K=>{navigate=K},getNavigate=()=>{if(!navigate)throw new Error("Navigate function not set");return navigate},createRoute=(K,J=ne=>generatePath(K,ne))=>({path:K,build:J,go:oe=>{getNavigate()(J(oe))}}),routes={root:createRoute("/"),app:createRoute("/:environment?/:activeTab?"),login:createRoute("/login"),loginCallback:createRoute("login/callback"),forbidden:createRoute("/forbidden"),serverError:createRoute("/server-error"),serverUnavailable:createRoute("/server-unavailable"),notFound:createRoute("/404"),versionError:createRoute("/version-error")},generateTabsParams=K=>K.map(({id:J,tableKey:ne})=>ne?{TableName:ne,TypeName:J}:{TableName:J}),initialState$7={status:LoadingStatusesEnum.INITIAL,isReadonly:!1,applicationTheme:env$1.defaultTheme,openedTabs:[],activeTab:"",fullScreenMode:!1,user:null,authType:null,isLogoutLink:!1,providers:[],isAuthenticated:!1},updateAppState=async K=>{if(K.user)try{await storageApi.saveEntity({data:[{ApplicationTheme:K.applicationTheme,OpenedTabs:generateTabsParams(K.openedTabs),ActiveTabIndex:K.activeTabIndex,User:K.user.id,ReadOnly:K.isReadonly,FullScreenMode:K.fullScreenMode,UserSecretIdentifiers:K.userSecretIdentifiers,_t:"UiAppState"}]})}catch(J){toast.error(J)}},AppState=createSlice({name:"AppState",initialState:initialState$7,reducers:{setAppState(K,J){var xe,_e,$e,Ie,Fe,ke,je,We,ze;const{OpenedTabs:ne=[],ReadOnly:oe=!1,FullScreenMode:ce=!1,UserSecretIdentifiers:ue=[],ApplicationTheme:Ae,availableTypes:pe}=J.payload||{},ve=((xe=J.payload)==null?void 0:xe.ActiveTabIndex)||0,me=new Set(K.openedTabs.map(Xe=>Xe.tableKey||Xe.key)),ge=(ne==null?void 0:ne.filter(Xe=>!me.has(Xe.TableName||Xe.TypeName||"")).map(({TypeName:Xe,TableName:Je})=>{var tt;const nt=Xe??Je,et=((tt=pe.find(st=>st.id===Je))==null?void 0:tt.label)??"";return{id:nt,label:et,key:nt,tableKey:Xe?Je:"",tableName:et}}))||[],ye=K.activeTab===(($e=(_e=K.openedTabs)==null?void 0:_e[ve])==null?void 0:$e.id);if(K.openedTabs=K.openedTabs.concat(ge),K.status=LoadingStatusesEnum.SUCCESS,K.fullScreenMode=K.activeTab?ce:!1,K.isReadonly=oe,K.userSecretIdentifiers=ue,K.applicationTheme=Ae??env$1.defaultTheme,ye&&(K.activeTab=(Fe=(Ie=K.openedTabs)==null?void 0:Ie[ve])==null?void 0:Fe.id,K.activeTabIndex=ve),!ye){const Xe=K.openedTabs.findIndex(Je=>Je.id===K.activeTab);if(Xe>=0)K.activeTab=(je=(ke=K.openedTabs)==null?void 0:ke[Xe])==null?void 0:je.id,K.activeTabIndex=Xe,updateAppState(K);else{const Je=pe.findIndex(nt=>nt.id===K.activeTab);if(Je>=0){const nt=pe[Je];K.activeTab=nt.id,K.openedTabs=[...K.openedTabs,nt],K.activeTabIndex=K.openedTabs.length-1,updateAppState(K)}else K.activeTab=(ze=(We=K.openedTabs)==null?void 0:We[ve])==null?void 0:ze.id,K.activeTabIndex=ve}}},setUser(K,J){K.user=J.payload},setTabs(K,J){const ne=J.payload;ne.length===0?K.openedTabs=initialState$7.openedTabs:K.openedTabs=ne},openTab(K,J){var _e;const{payload:ne}=J,{openedTabs:oe}=K,{id:ce,key:ue,label:Ae,tableKey:pe,tableName:ve}=ne,me={...ne,label:ve??Ae},ge=oe.length?oe.map($e=>$e.key===pe||$e.key===ue||$e.tableKey===ue||isDefined$2($e.tableKey)&&$e.tableKey===pe?{...ne,tableName:pe,label:ve??Ae}:$e):[me],ye=ge.findIndex($e=>$e.id===ce),xe=ge.find($e=>$e.id===ce);K.activeTabIndex=ye>=0?ye:0,K.activeTab=(xe==null?void 0:xe.id)??((_e=ge==null?void 0:ge[0])==null?void 0:_e.id)??"",K.openedTabs=ye>=0?ge:[...ge,me]},closeTab(K,J){K.openedTabs=K.openedTabs.filter(ne=>ne.id!==J.payload.id)},setActiveTab(K,J){K.activeTab=J.payload.id},setApplicationTheme(K,J){K.applicationTheme=J.payload},updateActiveTabIndex(K,J){K.activeTabIndex=K.openedTabs.findIndex(ne=>ne.id===J.payload.id)},saveAppState(K,J){if(K.user)try{storageApi.saveEntity({dataset:J.payload||"",data:[{ApplicationTheme:K.applicationTheme,OpenedTabs:generateTabsParams(K.openedTabs),ActiveTabIndex:K.activeTabIndex,User:K.user.id,ReadOnly:K.isReadonly,FullScreenMode:K.fullScreenMode,UserSecretIdentifiers:K.userSecretIdentifiers,_t:"UiAppState"}]})}catch(ne){toast.error(ne)}},setFullScreenMode(K,J){K.fullScreenMode=J.payload},setIsLogoutLink(K,J){K.isLogoutLink=J.payload},setProviders(K,J){K.providers=J.payload},setIsAuthenticated(K,J){K.isAuthenticated=J.payload},updateAppReadOnly(K,J){K.isReadonly=J.payload}}}),{setUser,setAppState,setTabs,setActiveTab,openTab,closeTab,saveAppState,setApplicationTheme,updateActiveTabIndex,setFullScreenMode,setIsLogoutLink,setProviders,setIsAuthenticated,updateAppReadOnly}=AppState.actions,{reducer:AppStateSliceReducer}=AppState,APP_NAME="CompatibL",initialState$6={settings:{data:{SchemaVersion:"",ApplicationName:APP_NAME,Environment:"",Versions:null,DatasetSupport:!1,DemoMode:!1,SessionId:""}},environmentList:[],activeEnvironment:""},SettingsDataSlice=createSlice({name:"settingsData",initialState:initialState$6,reducers:{setActiveEnvironment(K,J){const ne=()=>{const oe=K.environmentList,ce=oe==null?void 0:oe[0];if(J.payload){const ue=oe==null?void 0:oe.find(Ae=>Ae.Name===J.payload);if(ue)return ue.Name}return ce?ce.Name:""};K.activeEnvironment=ne()},setSettings(K,J){const{ApplicationName:ne,Versions:oe,...ce}=J.payload;let ue="";oe&&(ue=Object.keys(oe)[0].split(".")[0]+".frontend"),K.settings.data={...K.settings.data,Versions:{[ue]:env$1.frontendVersion,...oe},...ce,ApplicationName:isDefined$2(ne)?ne:APP_NAME}},setEnvironmentList(K,J){K.environmentList=J.payload}}}),{setSettings,setActiveEnvironment,setEnvironmentList}=SettingsDataSlice.actions,SettingsDataSliceReducer=SettingsDataSlice.reducer,createAuthService=()=>{const K=async()=>{dispatch$1(setUser(await authApi.profile()))},J=async pe=>{const ve=await settingsApi.getSettings(),me=externalStorage.getSessionId();if(me!==null&&me!==(ve==null?void 0:ve.SessionId)&&!pe)return oe();dispatch$1(setSettings(ve)),externalStorage.setSessionId(ve.SessionId);const ye=await storageApi.getEnvs();dispatch$1(setEnvironmentList(ye)),dispatch$1(setActiveEnvironment(ye==null?void 0:ye[0].Name))},ne=()=>dispatch$1(setUser(null)),oe=async()=>{let pe="";const ve=externalStorage.getProviderId(),me=await authApi.getTypes();if(!ve){ne(),externalStorage.removeSessionId(),window.location.pathname="/";return}try{const ge=await authApi.getLogoutRedirect(ve);pe=ge==null?void 0:ge.RedirectUrl}catch(ge){console.error(ge);return}finally{dispatch$1(setProviders(me))}isDefined$2(pe)&&pe.length&&(dispatch$1(setIsLogoutLink(!0)),window.location.href=pe),ne(),externalStorage.removeSessionId(),externalStorage.removeProviderId(),dispatch$1(setIsAuthenticated(!1))},ce=async()=>{try{const pe=externalStorage.getProviderId();await authApi.refreshToken(pe||""),dispatch$1(setIsAuthenticated(!0))}catch(pe){throw oe(),pe}};return{init:async()=>{const pe=externalStorage.getSessionId(),ve=await authApi.getTypes();if(dispatch$1(setProviders(ve)),!ve.length)await J(!0),await K(),dispatch$1(setIsAuthenticated(!0));else if(pe||externalStorage.getProviderId())try{await ce(),await J(),await K(),dispatch$1(setIsAuthenticated(!0))}catch{return oe()}},login:async pe=>{externalStorage.setProviderId(pe),dispatch$1(setIsAuthenticated(!0)),await J(),await K()},logout:oe,loadProfile:K,refreshToken:ce}},authService=createAuthService(),createMainAxiosInstance=()=>{const K=axios.create({baseURL:env$1.apiUrl,transformResponse:oe=>oe});let J=!1;const ne=createRefreshAndRetryQueue();return K.interceptors.request.use(oe=>{var ve;const ce=oe,ue=generateHeaders();for(const me of Object.keys(ue)){const ge=ue[me];ce.headers.set(me,ge)}const Ae=store.getState(),{providers:pe}=Ae.AppStateSliceReducer;return!((ve=ce.url)!=null&&ve.includes("/providers"))&&pe.length!==0?ce.withCredentials=!0:ce.withCredentials=!1,ce}),K.interceptors.response.use(oe=>oe.status===204?{...oe,data:{}}:(oe.config.responseType!=="arraybuffer"&&(oe.data=deserialize$1(oe.data)),oe)),K.interceptors.response.use(oe=>oe,async oe=>{if(axios.isAxiosError(oe)){const ce=oe.config,ue=parseAxiosErrorMessage(oe),{method:Ae,url:pe}=oe.config,{status:ve}=oe.response??{};switch(console.error(` [API] ${Ae==null?void 0:Ae.toUpperCase()} ${pe} | Error ${ve} ${ue}`),ve){case 401:{if(pe&&/\/auth\/[^/]+\/refresh$/.test(pe))throw oe;if(pe&&pe.includes("/auth/")&&pe.includes("/callback"))throw routes.login.go({}),oe;if(!J){J=!0;try{return await authService.refreshToken(),ne.iterate(({config:me,resolve:ge,reject:ye})=>{K.request(me).then(ge).catch(ye)}),ne.clear(),K(ce)}catch{ne.clear()}finally{J=!1}}return new Promise((me,ge)=>{ne.enqueue({config:ce,resolve:me,reject:ge})})}case 403:{routes.forbidden.go({});break}case 404:break;case 500:break;case void 0:{routes.serverUnavailable.go({});break}}}else console.error(` [API] | Error ${oe.message}`);throw oe}),K},axiosMain=createMainAxiosInstance(),getUserKeysHeaders=K=>{const J=new AxiosHeaders;if(K){const ne=externalStorage.getSecretKeys(K);Object.values(ne).flat().forEach(oe=>{const ce=`Cl-User-Key-${oe.name.replaceAll(" ","-")}`;J.set(ce,oe.value)})}return J},handlerApi={async handlerRun(K){const{Dataset:J,userName:ne,...oe}=K;return(await axiosMain.post("/handler/run",serialize$1(oe),{headers:{"Content-Type":"application/json",Dataset:J,...getUserKeysHeaders(ne)}})).data},async runTasks(K){const{keys:J,args:ne,dataset:oe,type:ce,method:ue,userName:Ae}=K,pe={Type:ce,Method:ue,Keys:J,Arguments:ne};return(await axiosMain.post("/tasks/submit",serialize$1(pe),{headers:{"Content-Type":"application/json",dataset:oe,...getUserKeysHeaders(Ae)}})).data},async runTasksStatus({dataset:K,taskRunIds:J}){return(await axiosMain.post("/tasks/status",serialize$1(convertTaskStatusDtoToParams(J)),{headers:{"Content-Type":"application/json",dataset:K}})).data},async runTasksResult(K){const{dataset:J,taskRunIds:ne}=K;return(await axiosMain.post("/tasks/result",serialize$1(convertTaskStatusDtoToParams(ne)),{headers:{"Content-Type":"application/json",dataset:J}})).data},async runView(K){const J=convertHandlerDtoToParams(K);return(await axiosMain.get("/entity/run_view",{params:{...J,arguments:K.args?serialize$1(K.args):void 0}})).data.Result.ViewOf},async cancel(K){const{dataset:J,taskRunIds:ne}=K;return(await axiosMain.post("/tasks/cancel",serialize$1(convertTaskStatusDtoToParams(ne)),{headers:{"Content-Type":"application/json",dataset:J}})).data},async cancelAll(K){return(await axiosMain.post("/tasks/cancel_all",{},{headers:{"Content-Type":"application/json",dataset:K}})).data}},convertRootSchema=(K,J)=>{var ne;return((ne=Object.keys(K))==null?void 0:ne.find(oe=>{var ce;return((ce=oe.split("."))==null?void 0:ce.at(-1))===J}))||""},convertSchemaTypeHierarchyDtoToModel=K=>K.flat().filter((J,ne,oe)=>ne===oe.findIndex(ce=>ce.Name===J.Name)),convertSchemaTypeDtoToModel=(K,J)=>({rootType:convertRootSchema(K,J),typeList:K}),convertHandlerDtoToParams=({dataSource:K,traceId:J,args:ne,panelId:oe,...ce})=>({arguments:ne,traceid:J,data_source:K,panel_id:oe,...ce}),convertTaskStatusDtoToParams=K=>({TaskRunIds:K}),schemaApi={async getType({name:K}){const J=await axiosMain.get("/schema/type",{params:{type_name:K}});return convertSchemaTypeDtoToModel(J.data,K)},async getTypes(){return(await axiosMain.get("/schema/types")).data},async getInterfaces(){return(await axiosMain.get("/schema/interfaces")).data},async getEnums(){return(await axiosMain.get("/schema/enums")).data},async getTypeHierarchy({name:K}){const J=await axiosMain.get("/schema/type-successors",{params:{type_name:K}});return convertSchemaTypeHierarchyDtoToModel(J.data)},async getModules(){return(await axiosMain.get("/schema/modules")).data}},convertStorageSelectDtoToModel=(K,J)=>{var ne;return{data:K.Data,schema:{rootType:((ne=K.Schema)==null?void 0:ne.rootType)||convertRootSchema(K.Schema,J),typeList:K.Schema}}},storageApi={async getRecord({type:K,key:J,dataset:ne,ignoreNotFound:oe}){var pe;const ce=[{Type:K,Key:J||""}],{data:ue}=await axiosMain.post("/storage/load",ce,{params:{ignore_not_found:oe},headers:{dataset:ne}}),Ae=(pe=ue.Data)==null?void 0:pe[0];return{schema:convertSchemaTypeDtoToModel(ue.Schema,(Ae==null?void 0:Ae._t)??K),data:Ae}},async getTypeViewSettings(K){return storageApi.getRecord({type:"UiTypeState",key:`${K.module};${K.type};${K.user}`,ignoreNotFound:!0,module:"Cl.Runtime.Backend.Core"}).then(({data:J})=>J)},async getAppState(K){const J={type:"UiAppState",module:"Cl.Runtime.Backend.Core",ignoreNotFound:!0};return storageApi.getRecord({...J,key:K}).then(ne=>ne.data)},async getDatasets({type:K}){return(await axiosMain.get("/storage/datasets",{params:{type_name:K}})).data},async getEnvs(){return(await axiosMain.get("/storage/envs")).data},async select({params:K,dto:J}){const{dataset:ne,type:oe,...ce}=K,ue={Type:oe,QueryDict:{...J}},Ae=isNullable(ue)||isEmpty$2(ue)?void 0:serialize$1(ue),pe=await axiosMain.post("/storage/select",Ae,{headers:{"Content-Type":"application/json",dataset:ne},params:ce});return convertStorageSelectDtoToModel(pe.data,K.type)},async saveEntity({data:K,dataset:J,isInsert:ne}){const oe=ne?"insert":"save";return(await axiosMain.post(`/storage/${oe}`,serialize$1(K),{headers:{"Content-Type":"application/json",dataset:J}})).data},async deleteEntities({data:K,dataset:J}){return(await axiosMain.post("/storage/delete",serialize$1(K),{headers:{"Content-Type":"application/json",dataset:J}})).data}};function isCyrillic(K){return/[-]/i.test(K)}const translitMap={:"a",:"b",:"v",:"g",:"d",:"e",:"yo",:"zh",:"z",:"i",:"y",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"f",:"h",:"ts",:"ch",:"sh",:"sch",:"",:"y",:"",:"e",:"yu",:"ya"},translit=K=>K.split("").map(J=>{const ne=J.toLowerCase();if(translitMap[ne]){const oe=translitMap[ne];return J===ne?oe:oe.charAt(0).toUpperCase()+oe.slice(1)}return J}).join(""),convertIfCyrillic=K=>isCyrillic(K)?translit(K):K,convertUserDtoToModel=K=>{const J=[K.FirstName,K==null?void 0:K.LastName].filter(Boolean).join(" "),ne=convertIfCyrillic(K.Username);return{username:ne,firstName:K.FirstName,fullName:J,lastName:K.LastName||null,email:K.Email||null,roles:K.Scopes,userSecretsPublicKey:K.UserSecretsPublicKey,id:K.Id||ne}},authApi={async getTypes(){return(await axiosMain.get("/auth/providers")).data},async getType(K){return(await axiosMain.get(`/auth/${K}/type-info`)).data},async login(K){const J=new FormData;return J.set("username",K.username),J.set("password",K.password),(await axiosMain.post(`/auth/${K.type_id}/login`,J)).data},async refreshToken(K){return(await axiosMain.post(`/auth/${K}/refresh`)).data},async profile(){const K=await axiosMain.get("/auth/me");return convertUserDtoToModel(K.data)},async getLogoutRedirect(K){return(await axiosMain.post(`/auth/${K}/logout`)).data},async loginCallback(K,J){return(await axiosMain.get(`/auth/${J}/callback?one_time_token=${K}`)).data},async loginRedirect(K){return(await axiosMain.post(`/auth/${K}/login-redirect`)).data}},supportApi={async getHealth(){return(await axiosMain.get("/health")).data}},sseApiUrls={events:"/sse/events"},sseApi={events(){return`${env$1.apiUrl}${sseApiUrls.events}`}},settingsApi={async getSettings(){return(await axiosMain.get("/settings")).data}};var LanguageEnum=(K=>(K.R="R",K.Json="Json",K.Xml="Xml",K.Python="Python",K.Markdown="Markdown",K.Sql="Sql",K.Cpp="Cpp",K.C="C",K.Csharp="Csharp",K.Java="Java",K.Typescript="Typescript",K.Javascript="Javascript",K.Plaintext="Plaintext",K))(LanguageEnum||{}),HandlerRunTypeEnum=(K=>(K.UI_RECORD_UTIL="UiRecordUtil",K.UI_SUPPORT_UTIL="UiSupportUtil",K.UI_LOG_UTIL="UiLogUtil",K.DATA_SERVICE="DataService",K.DATA_SOURCE_TOOL="DataSourceTool",K))(HandlerRunTypeEnum||{}),KindTypeModel=(K=>(K.ABSTRACT="Abstract",K.FINAL="Final",K.ELEMENT="Element",K.ABSTRACT_ELEMENT="AbstractElement",K))(KindTypeModel||{}),SchemaDisplayKind=(K=>(K.Basic="Basic",K.Singleton="Singleton",K.Dashboard="Dashboard",K))(SchemaDisplayKind||{}),HandlerType=(K=>(K.VIEWER="Viewer",K.JOB="Job",K.CONTENT="Content",K))(HandlerType||{}),SchemaTypeKind=(K=>(K.TABLE="Table",K))(SchemaTypeKind||{}),DictionaryDataPath=(K=>(K.Key="key",K.Value="value",K))(DictionaryDataPath||{}),AuthKindEnum=(K=>(K.None="none",K.Develop="develop",K.ActiveDirectory="active_directory",K.Oidc="oidc",K))(AuthKindEnum||{}),AuthKindNamesEnum=(K=>(K.Okta="Okta",K.Kinde="Kinde",K.AD="AD",K))(AuthKindNamesEnum||{}),AuthStrategyEnum=(K=>(K.default="default",K.redirect="redirect",K))(AuthStrategyEnum||{}),UserRole=(K=>(K.Developer="Developer",K))(UserRole||{});const correctConfigDirection=(K,J)=>{var ne;J===LayoutDirection.HORIZONTAL&&(K.type=StackEnum.COLUMN),J===LayoutDirection.VERTICAL&&(K.type=StackEnum.ROW),K.id=`${K.type}-${(ne=K.content[0])==null?void 0:ne.key.replace(/\s/g,"")}`,K.key=K.id},findParent=(K,J)=>{var ne,oe;if((ne=K.content)!=null&&ne.some(ce=>J.some(ue=>ue===ce.key)))return K;for(let ce=0;ce<((oe=K.content)==null?void 0:oe.length);ce+=1){const ue=K.content[ce],Ae=findParent(ue,J);if(Ae)return Ae}},revertTwoMoreDetailsViewers=(K,J,ne)=>{if(K&&J.content.length>2){const oe=[...J.content];oe.splice(0,1);const ce=ne===LayoutDirection.VERTICAL?StackEnum.COLUMN:StackEnum.ROW,ue={type:ce,key:`${ce}-${oe[0].id}`,id:`${ce}-${oe[0].id}`,isMainGrid:!1,size:DefaultPanelSize.DEFAULT,content:oe},Ae=revertConfigNodesOrientation(ue,ne);J.content=[K,Ae],J.type=ne===LayoutDirection.VERTICAL?StackEnum.ROW:StackEnum.COLUMN}},revertSingleNonStackViewer=(K,J,ne)=>{var oe;!K&&J.type!==StackEnum.STACK&&(J.content=J.content.map(ce=>revertConfigNodesOrientation(ce,ne)),J.id=`${J.type}-${(oe=J.content[0])==null?void 0:oe.key.replace(/\s/g,"")}`,J.key=J.id)},revertConfigNodesOrientation=(K,J)=>{const ne=structuredClone(K),oe=findParent(ne,[GridTabEnum.MAIN]);return revertTwoMoreDetailsViewers(oe,ne,J),revertSingleNonStackViewer(oe,ne,J),ne},isConfigType=K=>Object.hasOwn(K,"content"),isGridTabDataType=K=>Object.hasOwn(K,"id")&&Object.hasOwn(K,"key")&&Object.hasOwn(K,"label"),checkForSingleContentConfig=K=>{var ne,oe,ce;return isConfigType(K)&&K.content.length===1&&isConfigType(K.content[0])&&(((ne=K.content[0])==null?void 0:ne.type)===StackEnum.STACK||((oe=K.content[0])==null?void 0:oe.type)===StackEnum.ROW||((ce=K.content[0])==null?void 0:ce.type)===StackEnum.COLUMN)},checkForStack=K=>K.content.every(isGridTabDataType),correctContent=(K,J=!1)=>{var oe,ce,ue,Ae,pe,ve;const ne=K;if(isConfigType(ne)&&ne.content.length>1){for(let me=0;me<ne.content.length;me+=1){const ge=ne.content[me],ye=isConfigType(ge);ge&&ye&&(ge.content.length>1&&correctContent(ge,J),(ge.type===ne.type||ge.content.length===1&&isConfigType(ge.content[0])&&(((oe=ge.content[0])==null?void 0:oe.type)===StackEnum.STACK||((ce=ge.content[0])==null?void 0:ce.type)===StackEnum.ROW||((ue=ge.content[0])==null?void 0:ue.type)===StackEnum.COLUMN))&&(ne.content.splice(me,1,...ge.content),me-=1),ge.content.length===0&&(ne.content.splice(me,1),me-=1),J||(ge.id=`${ge.type}-${(Ae=ge.content[0])==null?void 0:Ae.key.replaceAll(/\s/g,"")}`,ge.key=ge.id)),ge&&!ye&&(ge.isCurrentlyDragging=!1)}ne.id=`${ne.type}-${(pe=ne.content[0])==null?void 0:pe.key.replaceAll(/\s/g,"")}`,ne.key=ne.id}return isConfigType(ne)&&checkForSingleContentConfig(ne)?correctContent(ne.content[0],J):(isConfigType(ne)&&checkForStack(ne)&&(ne.id=`${ne.type}-${(ve=ne.content[0])==null?void 0:ve.key.replaceAll(/\s/g,"")}`,ne.key=ne.id),ne)};var EditorTabsEnum=(K=>(K.EDITOR="editor",K.EDITOR_TRANSITION="editor-transition",K.NEW_ENTITY="newEntity",K.COPY_ENTITY="copyEntity",K.HISTORY="history",K.SELECT_TYPE="selectType",K.DAG="directed-acyclic-graph",K))(EditorTabsEnum||{});const EDITOR_TABS={editor:{id:"editor",key:"editor",label:"editor.tabs.data",isClosable:!1,isActive:!1,isCurrentlyDragging:!1,isMainGridTab:!1},"editor-transition":{id:"editor-transition",key:"editor-transition",label:"",isClosable:!0,isActive:!0,isCurrentlyDragging:!1,isMainGridTab:!1},newEntity:{id:"newEntity",key:"newEntity",label:"editor.tabs.newEntity",isClosable:!1,isActive:!0,isCurrentlyDragging:!1,isMainGridTab:!1},copyEntity:{id:"copyEntity",key:"copyEntity",label:"editor.tabs.copyEntity",isClosable:!1,isActive:!0,isCurrentlyDragging:!1,isMainGridTab:!1},selectType:{id:"selectType",key:"selectType",label:"editor.tabs.selectType",isClosable:!1,isCurrentlyDragging:!1,isMainGridTab:!1},history:{id:"history",key:"history",label:"editor.tabs.history",isCurrentlyDragging:!1,isMainGridTab:!1},"directed-acyclic-graph":{id:"directed-acyclic-graph",key:"directed-acyclic-graph",label:"editor.tabs.dag",isClosable:!1,isCurrentlyDragging:!1,isMainGridTab:!1}},handleStackParsing=K=>{var oe;const J={ColsCount:1,Content:[],_t:SimplifiedEnum.LAYOUT_ELEMENT},ne={Key:"",Stack:[],_t:SimplifiedEnum.LAYOUT_STACK_ELEMENT};return K.content.forEach(ce=>{var ue;ce.isActive&&(ne.Key=ce.id),ce.id!==EditorTabsEnum.EDITOR_TRANSITION&&((ue=ne.Stack)==null||ue.push({Key:ce.id,_t:SimplifiedEnum.LAYOUT_STACK_ELEMENT}))}),ne.Key===EditorTabsEnum.EDITOR_TRANSITION&&((oe=ne.Stack)!=null&&oe.length)&&(ne.Key=ne.Stack[0].Key),J.Content.push(ne),J},getParsedConfig=(K,J=!1)=>{if(K.type===StackEnum.COLUMN){const ne=[];return K.content.forEach(oe=>{if(isConfigType(oe)&&oe.type===StackEnum.STACK){const ce=handleStackParsing(oe);ne.push(ce)}if(isConfigType(oe)&&oe.type===StackEnum.ROW){const ce={ColsCount:oe.content.length,Content:[],_t:SimplifiedEnum.LAYOUT_ELEMENT};oe.content.forEach(ue=>{const Ae=getParsedConfig(ue);if(Ae&&!Array.isArray(Ae)&&ce.Content.push(Ae),Ae&&Array.isArray(Ae)){const pe={ColsCount:1,Content:Ae,_t:SimplifiedEnum.LAYOUT_ELEMENT};ce.Content.push(pe)}}),ne.push(ce)}}),ne}if(K.type===StackEnum.ROW){const ne=[],oe={ColsCount:K.content.length,Content:[],_t:SimplifiedEnum.LAYOUT_ELEMENT};return K.content.forEach(ce=>{if(isConfigType(ce)&&ce.type===StackEnum.STACK&&oe.Content.push(handleStackParsing(ce)),isConfigType(ce)&&ce.type===StackEnum.COLUMN){const ue={ColsCount:1,Content:[],_t:SimplifiedEnum.LAYOUT_ELEMENT};ce.content.forEach(Ae=>{const pe=getParsedConfig(Ae);if(pe&&!Array.isArray(pe)&&ue.Content.push(pe),pe&&Array.isArray(pe)){const ve={ColsCount:Ae.content.length,Content:pe,_t:SimplifiedEnum.LAYOUT_ELEMENT};ue.Content.push(ve)}}),oe.Content.push(ue)}}),ne.push(oe),ne}if(K.type===StackEnum.STACK){const ne=handleStackParsing(K);return J?[ne]:ne}},getTableTabData=K=>K==null?void 0:K.map(({TableName:J,Label:ne})=>({key:J,label:ne,id:J})),getTypeTabData=(K,J)=>K==null?void 0:K.map(({TableName:ne,Label:oe,TypeName:ce})=>{var ue;return{key:ce,label:oe,id:ce,tableName:(ue=J.find(Ae=>Ae.TableName===ne))==null?void 0:ue.Label,tableKey:ne}}),filterSchemaTypes=K=>({OpenedTypes:[],Tables:getTableTabData(K.Tables)??[],Types:getTypeTabData(K.Types,K.Tables)??[],Filters:[]}),filterTypeHelper=(K,J)=>{if(!J)return K;const ne=[],oe=[],ce=J.toLowerCase(),ue=new RegExp(`(${escapeStringRegexp(J)})`,"gi");K.forEach(pe=>{const ve=pe.label.split(" ").map(me=>me.charAt(0)).join("").toLowerCase().includes(ce);pe.label.toLowerCase().includes(ce)||ve?ne.push(pe):pe.label.match(ue)&&oe.push(pe)});const Ae=pe=>pe.sort((ve,me)=>ve.label.toLowerCase().indexOf(ce)-me.label.toLowerCase().indexOf(ce)||ve.label.length-me.label.length);return[...Ae(ne),...Ae(oe)]},getNonEditorTabs=K=>K===EditorTabsEnum.NEW_ENTITY?[EDITOR_TABS[EditorTabsEnum.NEW_ENTITY]]:K===EditorTabsEnum.COPY_ENTITY?[EDITOR_TABS[EditorTabsEnum.COPY_ENTITY]]:[EDITOR_TABS[EditorTabsEnum.SELECT_TYPE]],updateCurrentLayout=(K,J,ne,oe)=>{const{state:ce}=K,{state:ue,action:Ae}=J,pe=structuredClone(ue.configBackup);correctConfigDirection(pe,ne);const ve=ce.activeEditorTab===EditorTabsEnum.EDITOR;if(!oe&&ve){const ge=revertConfigNodesOrientation(structuredClone(pe),ne);pe.content=ge.content}const me=correctContent(pe);Ae.updateConfig(ve?me:revertConfigNodesOrientation(returnDefaultConfig(getNonEditorTabs(ce.activeEditorTab),ne),ne)),Ae.saveUiTypeData({simplifiedConfig:getParsedConfig(me),handlers:ue.pinnedHandlers,MaximizedTabId:""}),Ae.updateMaximizedTabId("",!0)},initialState$5={schemaTypes:{OpenedTypes:[],Tables:[],Types:[],Filters:[]},searchTypes:void 0,status:LoadingStatusesEnum.INITIAL,isInitLoad:!1,error:""},getSchemaTypes=createAsyncThunk("getSchemaTypes",async({isInitLoad:K=!1}={},{rejectWithValue:J})=>{try{return{response:await handlerApi.handlerRun({Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"Screens",Arguments:{}}),isInitLoad:K}}catch(ne){return toast.error(ne),J(getErrorMessage(ne))}}),SchemaTypesSlice=createSlice({name:"SchemaTypesSlice",initialState:initialState$5,reducers:{removeSearchTypes(K){K.searchTypes=void 0}},extraReducers:K=>K.addCase(getSchemaTypes.pending,(J,ne)=>{var oe;(oe=ne.meta.arg)!=null&&oe.isInitLoad&&(J.status=LoadingStatusesEnum.LOADING),J.error=""}).addCase(getSchemaTypes.fulfilled,(J,ne)=>{const oe=ne.payload.response[0].Result,ce=filterSchemaTypes(oe);J.schemaTypes=ce,J.searchTypes=ce,ne.payload.isInitLoad&&(J.status=LoadingStatusesEnum.SUCCESS)}).addCase(getSchemaTypes.rejected,(J,ne)=>{var oe;(oe=ne.meta.arg)!=null&&oe.isInitLoad&&(J.status=LoadingStatusesEnum.ERROR),J.error=isString$3(ne.payload)?ne.payload:""})}),SchemaTypesSliceReducer=SchemaTypesSlice.reducer,{removeSearchTypes}=SchemaTypesSlice.actions,getActiveTypeMetadata=createAsyncThunk("getActiveTypeMetadata",async({activeTab:K,basetype:J},{rejectWithValue:ne,dispatch:oe})=>{try{const ce=await schemaApi.getType({name:J});return ce.typeList[ce.rootType]}catch(ce){return toast.error(ce),oe(closeTab({id:K})),ne(getErrorMessage(ce))}}),initialState$4={tabsData:{metaData:{data:{},status:LoadingStatusesEnum.INITIAL,error:""}}},GridTabsDataSlice=createSlice({name:"tabsData",initialState:initialState$4,reducers:{updateActiveTypeMetadata(K,J){K.tabsData.metaData.data=J.payload},removeMetaData(K){K.tabsData.metaData.data={}}},extraReducers:K=>K.addCase(getActiveTypeMetadata.pending,J=>{J.tabsData.metaData.data=initialState$4.tabsData.metaData.data,J.tabsData.metaData.status=LoadingStatusesEnum.LOADING,J.tabsData.metaData.error=""}).addCase(getActiveTypeMetadata.fulfilled,(J,ne)=>{J.tabsData.metaData.data=ne.payload,J.tabsData.metaData.status=LoadingStatusesEnum.SUCCESS}).addCase(getActiveTypeMetadata.rejected,(J,ne)=>{J.tabsData.metaData.status=LoadingStatusesEnum.ERROR,J.tabsData.metaData.error=isString$3(ne.payload)?ne.payload:""})}),GridTabsDataSliceReducer=GridTabsDataSlice.reducer,{updateActiveTypeMetadata,removeMetaData}=GridTabsDataSlice.actions,initialState$3={isGridMaximized:!1,gridMaximizedId:""},GridDataSlice=createSlice({name:"gridData",initialState:initialState$3,reducers:{setIsGridMaximized(K,J){K.gridMaximizedId=J.payload.maximized&&J.payload.gridId?J.payload.gridId:"",K.isGridMaximized=J.payload.maximized}}}),GridDataSliceReducer=GridDataSlice.reducer,initialState$2={datasetData:{rowsData:[],status:LoadingStatusesEnum.INITIAL,error:""}},getDatasetData=createAsyncThunk("getDatasetData",async({type:K},{rejectWithValue:J})=>{try{return await storageApi.getDatasets({type:K})}catch(ne){return toast.error(ne),J(getErrorMessage(ne))}}),selectDataset$1=createAsyncThunk("selectDataset",async K=>new Promise(J=>{setTimeout(()=>{J(K)},100)})),isExistDataset=(K,J="")=>K.length===0?!1:K.some(ne=>ne.Name===J),DatasetDataSlice=createSlice({name:"datasetData",initialState:initialState$2,reducers:{cleanDatasetData(K){K.datasetData=initialState$2.datasetData}},extraReducers:K=>{K.addCase(getDatasetData.fulfilled,(J,ne)=>{const oe=ne.payload.map(ce=>(ce.Name===null&&(ce.Name=""),ce));J.datasetData.rowsData=oe,(!J.datasetData.activeDatasetName&&isExistDataset(ne.payload)||!isExistDataset(ne.payload,J.datasetData.activeDatasetName))&&(J.datasetData.activeDatasetName=""),J.datasetData.status=LoadingStatusesEnum.SUCCESS}).addCase(selectDataset$1.fulfilled,(J,ne)=>{J.datasetData.activeDatasetName=ne.payload,J.datasetData.status=LoadingStatusesEnum.SUCCESS}).addMatcher(isAnyOf(getDatasetData.rejected,selectDataset$1.pending),J=>{J.datasetData.status=LoadingStatusesEnum.LOADING,J.datasetData.error=""}).addMatcher(isAnyOf(getDatasetData.rejected,selectDataset$1.rejected),(J,ne)=>{J.datasetData.status=LoadingStatusesEnum.ERROR,J.datasetData.error=isString$3(ne.payload)?ne.payload:""})}}),DatasetDataSliceReducer=DatasetDataSlice.reducer,SaveAppStateListener=K=>{K({matcher:isAnyOf(setTabs),effect:(J,ne)=>{ne.dispatch(saveAppState())}})},listenerMiddleware=createListenerMiddleware(),startAppListening=listenerMiddleware.startListening,listeners=[SaveAppStateListener];listeners.forEach(K=>K(startAppListening));const rootReducer=combineReducers({SchemaTypesSliceReducer,HeaderDataSliceReducer,GridTabsDataSliceReducer,GridDataSliceReducer,DatasetDataSliceReducer,AppStateSliceReducer,SettingsDataSliceReducer}),setupStore=()=>configureStore({reducer:rootReducer,middleware:K=>K({serializableCheck:{isSerializable:J=>isPlain(J)||BigNumber.isBigNumber(J)}}).prepend(listenerMiddleware.middleware)}),store=setupStore(),{dispatch:dispatch$1}=store;function r$1(K){var J,ne,oe="";if(typeof K=="string"||typeof K=="number")oe+=K;else if(typeof K=="object")if(Array.isArray(K))for(J=0;J<K.length;J++)K[J]&&(ne=r$1(K[J]))&&(oe&&(oe+=" "),oe+=ne);else for(J in K)K[J]&&(oe&&(oe+=" "),oe+=J);return oe}function clsx$1(){for(var K,J,ne=0,oe="";ne<arguments.length;)(K=arguments[ne++])&&(J=r$1(K))&&(oe&&(oe+=" "),oe+=J);return oe}const u$1=K=>typeof K=="number"&&!isNaN(K),d=K=>typeof K=="string",p=K=>typeof K=="function",m=K=>d(K)||p(K)?K:null,f$3=K=>reactExports.isValidElement(K)||d(K)||p(K)||u$1(K);function g(K,J,ne){ne===void 0&&(ne=300);const{scrollHeight:oe,style:ce}=K;requestAnimationFrame(()=>{ce.minHeight="initial",ce.height=oe+"px",ce.transition=`all ${ne}ms`,requestAnimationFrame(()=>{ce.height="0",ce.padding="0",ce.margin="0",setTimeout(J,ne)})})}function h$1(K){let{enter:J,exit:ne,appendPosition:oe=!1,collapse:ce=!0,collapseDuration:ue=300}=K;return function(Ae){let{children:pe,position:ve,preventExitTransition:me,done:ge,nodeRef:ye,isIn:xe}=Ae;const _e=oe?`${J}--${ve}`:J,$e=oe?`${ne}--${ve}`:ne,Ie=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{const Fe=ye.current,ke=_e.split(" "),je=We=>{We.target===ye.current&&(Fe.dispatchEvent(new Event("d")),Fe.removeEventListener("animationend",je),Fe.removeEventListener("animationcancel",je),Ie.current===0&&We.type!=="animationcancel"&&Fe.classList.remove(...ke))};Fe.classList.add(...ke),Fe.addEventListener("animationend",je),Fe.addEventListener("animationcancel",je)},[]),reactExports.useEffect(()=>{const Fe=ye.current,ke=()=>{Fe.removeEventListener("animationend",ke),ce?g(Fe,ge,ue):ge()};xe||(me?ke():(Ie.current=1,Fe.className+=` ${$e}`,Fe.addEventListener("animationend",ke)))},[xe]),React.createElement(React.Fragment,null,pe)}}function y(K,J){return K!=null?{content:K.content,containerId:K.props.containerId,id:K.props.toastId,theme:K.props.theme,type:K.props.type,data:K.props.data||{},isLoading:K.props.isLoading,icon:K.props.icon,status:J}:{}}const v$1={list:new Map,emitQueue:new Map,on(K,J){return this.list.has(K)||this.list.set(K,[]),this.list.get(K).push(J),this},off(K,J){if(J){const ne=this.list.get(K).filter(oe=>oe!==J);return this.list.set(K,ne),this}return this.list.delete(K),this},cancelEmit(K){const J=this.emitQueue.get(K);return J&&(J.forEach(clearTimeout),this.emitQueue.delete(K)),this},emit(K){this.list.has(K)&&this.list.get(K).forEach(J=>{const ne=setTimeout(()=>{J(...[].slice.call(arguments,1))},0);this.emitQueue.has(K)||this.emitQueue.set(K,[]),this.emitQueue.get(K).push(ne)})}},T$1=K=>{let{theme:J,type:ne,...oe}=K;return React.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:J==="colored"?"currentColor":`var(--toastify-icon-color-${ne})`,...oe})},E$1={info:function(K){return React.createElement(T$1,{...K},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(K){return React.createElement(T$1,{...K},React.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(K){return React.createElement(T$1,{...K},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(K){return React.createElement(T$1,{...K},React.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return React.createElement("div",{className:"Toastify__spinner"})}};function C(K){const[,J]=reactExports.useReducer(_e=>_e+1,0),[ne,oe]=reactExports.useState([]),ce=reactExports.useRef(null),ue=reactExports.useRef(new Map).current,Ae=_e=>ne.indexOf(_e)!==-1,pe=reactExports.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:K,containerId:null,isToastActive:Ae,getToast:_e=>ue.get(_e)}).current;function ve(_e){let{containerId:$e}=_e;const{limit:Ie}=pe.props;!Ie||$e&&pe.containerId!==$e||(pe.count-=pe.queue.length,pe.queue=[])}function me(_e){oe($e=>_e==null?[]:$e.filter(Ie=>Ie!==_e))}function ge(){const{toastContent:_e,toastProps:$e,staleId:Ie}=pe.queue.shift();xe(_e,$e,Ie)}function ye(_e,$e){let{delay:Ie,staleId:Fe,...ke}=$e;if(!f$3(_e)||function(Se){return!ce.current||pe.props.enableMultiContainer&&Se.containerId!==pe.props.containerId||ue.has(Se.toastId)&&Se.updateId==null}(ke))return;const{toastId:je,updateId:We,data:ze}=ke,{props:Xe}=pe,Je=()=>me(je),nt=We==null;nt&&pe.count++;const et={...Xe,style:Xe.toastStyle,key:pe.toastKey++,...Object.fromEntries(Object.entries(ke).filter(Se=>{let[Re,Be]=Se;return Be!=null})),toastId:je,updateId:We,data:ze,closeToast:Je,isIn:!1,className:m(ke.className||Xe.toastClassName),bodyClassName:m(ke.bodyClassName||Xe.bodyClassName),progressClassName:m(ke.progressClassName||Xe.progressClassName),autoClose:!ke.isLoading&&(tt=ke.autoClose,st=Xe.autoClose,tt===!1||u$1(tt)&&tt>0?tt:st),deleteToast(){const Se=y(ue.get(je),"removed");ue.delete(je),v$1.emit(4,Se);const Re=pe.queue.length;if(pe.count=je==null?pe.count-pe.displayedToast:pe.count-1,pe.count<0&&(pe.count=0),Re>0){const Be=je==null?pe.props.limit:1;if(Re===1||Be===1)pe.displayedToast++,ge();else{const Ne=Be>Re?Re:Be;pe.displayedToast=Ne;for(let Ue=0;Ue<Ne;Ue++)ge()}}else J()}};var tt,st;et.iconOut=function(Se){let{theme:Re,type:Be,isLoading:Ne,icon:Ue}=Se,Ge=null;const Ye={theme:Re,type:Be};return Ue===!1||(p(Ue)?Ge=Ue(Ye):reactExports.isValidElement(Ue)?Ge=reactExports.cloneElement(Ue,Ye):d(Ue)||u$1(Ue)?Ge=Ue:Ne?Ge=E$1.spinner():(Qe=>Qe in E$1)(Be)&&(Ge=E$1[Be](Ye))),Ge}(et),p(ke.onOpen)&&(et.onOpen=ke.onOpen),p(ke.onClose)&&(et.onClose=ke.onClose),et.closeButton=Xe.closeButton,ke.closeButton===!1||f$3(ke.closeButton)?et.closeButton=ke.closeButton:ke.closeButton===!0&&(et.closeButton=!f$3(Xe.closeButton)||Xe.closeButton);let qe=_e;reactExports.isValidElement(_e)&&!d(_e.type)?qe=reactExports.cloneElement(_e,{closeToast:Je,toastProps:et,data:ze}):p(_e)&&(qe=_e({closeToast:Je,toastProps:et,data:ze})),Xe.limit&&Xe.limit>0&&pe.count>Xe.limit&&nt?pe.queue.push({toastContent:qe,toastProps:et,staleId:Fe}):u$1(Ie)?setTimeout(()=>{xe(qe,et,Fe)},Ie):xe(qe,et,Fe)}function xe(_e,$e,Ie){const{toastId:Fe}=$e;Ie&&ue.delete(Ie);const ke={content:_e,props:$e};ue.set(Fe,ke),oe(je=>[...je,Fe].filter(We=>We!==Ie)),v$1.emit(4,y(ke,ke.props.updateId==null?"added":"updated"))}return reactExports.useEffect(()=>(pe.containerId=K.containerId,v$1.cancelEmit(3).on(0,ye).on(1,_e=>ce.current&&me(_e)).on(5,ve).emit(2,pe),()=>{ue.clear(),v$1.emit(3,pe)}),[]),reactExports.useEffect(()=>{pe.props=K,pe.isToastActive=Ae,pe.displayedToast=ne.length}),{getToastToRender:function(_e){const $e=new Map,Ie=Array.from(ue.values());return K.newestOnTop&&Ie.reverse(),Ie.forEach(Fe=>{const{position:ke}=Fe.props;$e.has(ke)||$e.set(ke,[]),$e.get(ke).push(Fe)}),Array.from($e,Fe=>_e(Fe[0],Fe[1]))},containerRef:ce,isToastActive:Ae}}function b(K){return K.targetTouches&&K.targetTouches.length>=1?K.targetTouches[0].clientX:K.clientX}function I$1(K){return K.targetTouches&&K.targetTouches.length>=1?K.targetTouches[0].clientY:K.clientY}function _$1(K){const[J,ne]=reactExports.useState(!1),[oe,ce]=reactExports.useState(!1),ue=reactExports.useRef(null),Ae=reactExports.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,pe=reactExports.useRef(K),{autoClose:ve,pauseOnHover:me,closeToast:ge,onClick:ye,closeOnClick:xe}=K;function _e(ze){if(K.draggable){ze.nativeEvent.type==="touchstart"&&ze.nativeEvent.preventDefault(),Ae.didMove=!1,document.addEventListener("mousemove",ke),document.addEventListener("mouseup",je),document.addEventListener("touchmove",ke),document.addEventListener("touchend",je);const Xe=ue.current;Ae.canCloseOnClick=!0,Ae.canDrag=!0,Ae.boundingRect=Xe.getBoundingClientRect(),Xe.style.transition="",Ae.x=b(ze.nativeEvent),Ae.y=I$1(ze.nativeEvent),K.draggableDirection==="x"?(Ae.start=Ae.x,Ae.removalDistance=Xe.offsetWidth*(K.draggablePercent/100)):(Ae.start=Ae.y,Ae.removalDistance=Xe.offsetHeight*(K.draggablePercent===80?1.5*K.draggablePercent:K.draggablePercent/100))}}function $e(ze){if(Ae.boundingRect){const{top:Xe,bottom:Je,left:nt,right:et}=Ae.boundingRect;ze.nativeEvent.type!=="touchend"&&K.pauseOnHover&&Ae.x>=nt&&Ae.x<=et&&Ae.y>=Xe&&Ae.y<=Je?Fe():Ie()}}function Ie(){ne(!0)}function Fe(){ne(!1)}function ke(ze){const Xe=ue.current;Ae.canDrag&&Xe&&(Ae.didMove=!0,J&&Fe(),Ae.x=b(ze),Ae.y=I$1(ze),Ae.delta=K.draggableDirection==="x"?Ae.x-Ae.start:Ae.y-Ae.start,Ae.start!==Ae.x&&(Ae.canCloseOnClick=!1),Xe.style.transform=`translate${K.draggableDirection}(${Ae.delta}px)`,Xe.style.opacity=""+(1-Math.abs(Ae.delta/Ae.removalDistance)))}function je(){document.removeEventListener("mousemove",ke),document.removeEventListener("mouseup",je),document.removeEventListener("touchmove",ke),document.removeEventListener("touchend",je);const ze=ue.current;if(Ae.canDrag&&Ae.didMove&&ze){if(Ae.canDrag=!1,Math.abs(Ae.delta)>Ae.removalDistance)return ce(!0),void K.closeToast();ze.style.transition="transform 0.2s, opacity 0.2s",ze.style.transform=`translate${K.draggableDirection}(0)`,ze.style.opacity="1"}}reactExports.useEffect(()=>{pe.current=K}),reactExports.useEffect(()=>(ue.current&&ue.current.addEventListener("d",Ie,{once:!0}),p(K.onOpen)&&K.onOpen(reactExports.isValidElement(K.children)&&K.children.props),()=>{const ze=pe.current;p(ze.onClose)&&ze.onClose(reactExports.isValidElement(ze.children)&&ze.children.props)}),[]),reactExports.useEffect(()=>(K.pauseOnFocusLoss&&(document.hasFocus()||Fe(),window.addEventListener("focus",Ie),window.addEventListener("blur",Fe)),()=>{K.pauseOnFocusLoss&&(window.removeEventListener("focus",Ie),window.removeEventListener("blur",Fe))}),[K.pauseOnFocusLoss]);const We={onMouseDown:_e,onTouchStart:_e,onMouseUp:$e,onTouchEnd:$e};return ve&&me&&(We.onMouseEnter=Fe,We.onMouseLeave=Ie),xe&&(We.onClick=ze=>{ye&&ye(ze),Ae.canCloseOnClick&&ge()}),{playToast:Ie,pauseToast:Fe,isRunning:J,preventExitTransition:oe,toastRef:ue,eventHandlers:We}}function L$2(K){let{closeToast:J,theme:ne,ariaLabel:oe="close"}=K;return React.createElement("button",{className:`Toastify__close-button Toastify__close-button--${ne}`,type:"button",onClick:ce=>{ce.stopPropagation(),J(ce)},"aria-label":oe},React.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function O(K){let{delay:J,isRunning:ne,closeToast:oe,type:ce="default",hide:ue,className:Ae,style:pe,controlledProgress:ve,progress:me,rtl:ge,isIn:ye,theme:xe}=K;const _e=ue||ve&&me===0,$e={...pe,animationDuration:`${J}ms`,animationPlayState:ne?"running":"paused",opacity:_e?0:1};ve&&($e.transform=`scaleX(${me})`);const Ie=clsx$1("Toastify__progress-bar",ve?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${xe}`,`Toastify__progress-bar--${ce}`,{"Toastify__progress-bar--rtl":ge}),Fe=p(Ae)?Ae({rtl:ge,type:ce,defaultClassName:Ie}):clsx$1(Ie,Ae);return React.createElement("div",{role:"progressbar","aria-hidden":_e?"true":"false","aria-label":"notification timer",className:Fe,style:$e,[ve&&me>=1?"onTransitionEnd":"onAnimationEnd"]:ve&&me<1?null:()=>{ye&&oe()}})}const N=K=>{const{isRunning:J,preventExitTransition:ne,toastRef:oe,eventHandlers:ce}=_$1(K),{closeButton:ue,children:Ae,autoClose:pe,onClick:ve,type:me,hideProgressBar:ge,closeToast:ye,transition:xe,position:_e,className:$e,style:Ie,bodyClassName:Fe,bodyStyle:ke,progressClassName:je,progressStyle:We,updateId:ze,role:Xe,progress:Je,rtl:nt,toastId:et,deleteToast:tt,isIn:st,isLoading:qe,iconOut:Se,closeOnClick:Re,theme:Be}=K,Ne=clsx$1("Toastify__toast",`Toastify__toast-theme--${Be}`,`Toastify__toast--${me}`,{"Toastify__toast--rtl":nt},{"Toastify__toast--close-on-click":Re}),Ue=p($e)?$e({rtl:nt,position:_e,type:me,defaultClassName:Ne}):clsx$1(Ne,$e),Ge=!!Je||!pe,Ye={closeToast:ye,type:me,theme:Be};let Qe=null;return ue===!1||(Qe=p(ue)?ue(Ye):reactExports.isValidElement(ue)?reactExports.cloneElement(ue,Ye):L$2(Ye)),React.createElement(xe,{isIn:st,done:tt,position:_e,preventExitTransition:ne,nodeRef:oe},React.createElement("div",{id:et,onClick:ve,className:Ue,...ce,style:Ie,ref:oe},React.createElement("div",{...st&&{role:Xe},className:p(Fe)?Fe({type:me}):clsx$1("Toastify__toast-body",Fe),style:ke},Se!=null&&React.createElement("div",{className:clsx$1("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!qe})},Se),React.createElement("div",null,Ae)),Qe,React.createElement(O,{...ze&&!Ge?{key:`pb-${ze}`}:{},rtl:nt,theme:Be,delay:pe,isRunning:J,isIn:st,closeToast:ye,hide:ge,type:me,style:We,className:je,controlledProgress:Ge,progress:Je||0})))},M$1=function(K,J){return J===void 0&&(J=!1),{enter:`Toastify--animate Toastify__${K}-enter`,exit:`Toastify--animate Toastify__${K}-exit`,appendPosition:J}},R=h$1(M$1("bounce",!0));h$1(M$1("slide",!0));h$1(M$1("zoom"));h$1(M$1("flip"));const k$1=reactExports.forwardRef((K,J)=>{const{getToastToRender:ne,containerRef:oe,isToastActive:ce}=C(K),{className:ue,style:Ae,rtl:pe,containerId:ve}=K;function me(ge){const ye=clsx$1("Toastify__toast-container",`Toastify__toast-container--${ge}`,{"Toastify__toast-container--rtl":pe});return p(ue)?ue({position:ge,rtl:pe,defaultClassName:ye}):clsx$1(ye,m(ue))}return reactExports.useEffect(()=>{J&&(J.current=oe.current)},[]),React.createElement("div",{ref:oe,className:"Toastify",id:ve},ne((ge,ye)=>{const xe=ye.length?{...Ae}:{...Ae,pointerEvents:"none"};return React.createElement("div",{className:me(ge),style:xe,key:`container-${ge}`},ye.map((_e,$e)=>{let{content:Ie,props:Fe}=_e;return React.createElement(N,{...Fe,isIn:ce(Fe.toastId),style:{...Fe.style,"--nth":$e+1,"--len":ye.length},key:`toast-${Fe.key}`},Ie)}))}))});k$1.displayName="ToastContainer",k$1.defaultProps={position:"top-right",transition:R,autoClose:5e3,closeButton:L$2,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let P,B=new Map,D$2=[],A$2=1;function z$1(){return""+A$2++}function F$1(K){return K&&(d(K.toastId)||u$1(K.toastId))?K.toastId:z$1()}function H$c(K,J){return B.size>0?v$1.emit(0,K,J):D$2.push({content:K,options:J}),J.toastId}function S$1(K,J){return{...J,type:J&&J.type||K,toastId:F$1(J)}}function q(K){return(J,ne)=>H$c(J,S$1(K,ne))}function Q(K,J){return H$c(K,S$1("default",J))}Q.loading=(K,J)=>H$c(K,S$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...J})),Q.promise=function(K,J,ne){let oe,{pending:ce,error:ue,success:Ae}=J;ce&&(oe=d(ce)?Q.loading(ce,ne):Q.loading(ce.render,{...ne,...ce}));const pe={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},ve=(ge,ye,xe)=>{if(ye==null)return void Q.dismiss(oe);const _e={type:ge,...pe,...ne,data:xe},$e=d(ye)?{render:ye}:ye;return oe?Q.update(oe,{..._e,...$e}):Q($e.render,{..._e,...$e}),xe},me=p(K)?K():K;return me.then(ge=>ve("success",Ae,ge)).catch(ge=>ve("error",ue,ge)),me},Q.success=q("success"),Q.info=q("info"),Q.error=q("error"),Q.warning=q("warning"),Q.warn=Q.warning,Q.dark=(K,J)=>H$c(K,S$1("default",{theme:"dark",...J})),Q.dismiss=K=>{B.size>0?v$1.emit(1,K):D$2=D$2.filter(J=>K!=null&&J.options.toastId!==K)},Q.clearWaitingQueue=function(K){return K===void 0&&(K={}),v$1.emit(5,K)},Q.isActive=K=>{let J=!1;return B.forEach(ne=>{ne.isToastActive&&ne.isToastActive(K)&&(J=!0)}),J},Q.update=function(K,J){J===void 0&&(J={}),setTimeout(()=>{const ne=function(oe,ce){let{containerId:ue}=ce;const Ae=B.get(ue||P);return Ae&&Ae.getToast(oe)}(K,J);if(ne){const{props:oe,content:ce}=ne,ue={delay:100,...oe,...J,toastId:J.toastId||K,updateId:z$1()};ue.toastId!==K&&(ue.staleId=K);const Ae=ue.render||ce;delete ue.render,H$c(Ae,ue)}},0)},Q.done=K=>{Q.update(K,{progress:1})},Q.onChange=K=>(v$1.on(4,K),()=>{v$1.off(4,K)}),Q.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Q.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},v$1.on(2,K=>{P=K.containerId||K,B.set(P,K),D$2.forEach(J=>{v$1.emit(0,J.content,J.options)}),D$2=[]}).on(3,K=>{B.delete(K.containerId||K),B.size===0&&v$1.off(0).off(1).off(5)});const TOAST_WIDTH=400,UIToastContainer=({autoClose:K=5e3,limit:J=1})=>{const{t:ne}=useTranslation(),oe=useSelector$1(selectIsDemoMode),[ce,ue]=reactExports.useState();reactExports.useEffect(()=>{externalStorage.removeAllToasts()},[]),reactExports.useEffect(()=>{const _e=()=>{ue(externalStorage.getToasts())};return window.addEventListener("storage",_e),()=>{window.removeEventListener("storage",_e)}},[]),reactExports.useEffect(()=>{ce&&Object.keys(ce).forEach(_e=>{const $e=Object.keys(ce[_e]).length;if(Ae(_e,$e)){pe(_e,$e);return}ve(_e)})},[ce]);const Ae=(_e,$e)=>_e!==ToastTypeEnum.INFO&&$e>=3,pe=(_e,$e)=>{Object.keys(ce[_e]).forEach(Fe=>{Q.isActive(Fe)&&Q.dismiss(Fe)});const Ie=`${$e} ${ge(_e)}`;if(Q.isActive(_e)){Q.update(_e,{render:Ie});return}Q[_e](Ie,{toastId:_e,onClose:()=>externalStorage.removeAllTypeToasts(_e),onClick:()=>Q.dismiss(_e)})},ve=_e=>{Q.isActive(_e)||Object.keys(ce[_e]).forEach($e=>{if(Q.isActive($e))return;const{content:Ie,options:Fe}=ce[_e][$e];Q[_e](me(_e,Ie),{...Fe,toastId:$e,onClose:()=>{Q.isActive(_e)||externalStorage.removeToast(_e,$e)},onClick:()=>Q.dismiss($e)})})},me=(_e,$e)=>_e===ToastTypeEnum.ERROR?oe?ne("toast.completedUpperCase"):getErrorMessage($e):$e,ge=_e=>({success:ne("toast.completed"),error:ne("toast.failed"),warning:ne("toast.warnings")})[_e],ye=_e=>({success:jsxRuntimeExports.jsx(j_,{size:"M"}),error:oe?jsxRuntimeExports.jsx(AA,{size:"M"}):jsxRuntimeExports.jsx(Pp,{size:"M"}),info:jsxRuntimeExports.jsx(W5,{size:"M"}),warning:jsxRuntimeExports.jsx(M_,{size:"M"}),default:jsxRuntimeExports.jsx(j_,{size:"M"})})[_e],xe=({closeToast:_e})=>jsxRuntimeExports.jsx("div",{"aria-hidden":!0,className:"toast-close-icon",onClick:_e,children:jsxRuntimeExports.jsx(_c,{})});return jsxRuntimeExports.jsx(k$1,{limit:J,position:"bottom-right",autoClose:K,hideProgressBar:!0,icon:({type:_e})=>ye(_e),toastStyle:{width:TOAST_WIDTH},style:{width:TOAST_WIDTH},closeButton:xe})},SvgLogo=K=>reactExports.createElement("svg",{width:160,height:28,viewBox:"0 0 160 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("path",{d:"M34 13.4172V14.5708C34 17.1665 34 20.988 40.2171 20.988C42.075 20.988 43.9331 20.7717 45.7196 20.267V17.7433H44.9335L42.218 18.4644H41.0032C36.8584 18.4644 36.8584 18.4644 36.8584 14.4266V13.7055C36.8584 9.66781 36.8584 9.66781 41.0032 9.66781H42.218L44.8621 10.3167H45.6481V7.72102C43.8616 7.2163 42.0036 7 40.1456 7C34 7 34 10.8214 34 13.4172Z",fill:"white"}),reactExports.createElement("path",{d:"M56.0557 7H54.6642C48.366 7 48.366 11.182 48.366 13.4172V14.5708C48.366 16.806 48.366 20.988 54.6642 20.988H56.0557C62.354 20.988 62.354 16.806 62.354 14.5708V13.4172C62.354 11.182 62.354 7 56.0557 7ZM59.4245 14.2103C59.4245 18.3923 59.4245 18.3923 55.3966 18.3923C51.4419 18.3923 51.3686 18.3923 51.3686 14.2103V13.7777C51.3686 9.5957 51.3686 9.5957 55.3966 9.5957C59.3513 9.5957 59.4245 9.5957 59.4245 13.7777V14.2103Z",fill:"white"}),reactExports.createElement("path",{d:"M73.8485 17.6616C73.3418 16.0795 73.1246 15.5042 70.1564 7.37811H65.3784V20.61H68.057V9.82313H68.4914C68.781 10.686 69.2153 11.8367 72.4007 20.61H75.3688C78.6265 11.9086 78.9885 10.9018 79.2781 9.82313H79.7124V20.61H82.3908V7.37811H77.613C74.9344 14.4255 74.2829 16.1514 73.8485 17.6616Z",fill:"white"}),reactExports.createElement("path",{d:"M91.1317 7.37811H86.1712V20.61H88.8308V16.9424H91.1317C95.0146 16.9424 97.8908 16.9424 97.8908 12.1244C97.8908 7.37811 95.0146 7.37811 91.1317 7.37811ZM92.4977 14.6412H88.8308V9.75121H92.4977C95.0146 9.75121 95.0146 9.75121 95.0146 12.1963C95.0146 14.6412 95.0146 14.6412 92.4977 14.6412Z",fill:"white"}),reactExports.createElement("path",{d:"M103.554 7.44963L98.647 19.6801V20.61H101.207L102.416 17.5344H109.243L110.453 20.61H113.013V19.6801L108.106 7.37811L103.554 7.44963ZM103.27 15.3172C104.123 13.0285 104.905 10.8112 105.19 9.88143H106.612C106.897 10.8112 108.106 14.1013 108.532 15.3172H103.27Z",fill:"white"}),reactExports.createElement("path",{d:"M113.391 9.75121H118.459V20.61H121.25V9.75121H126.245V7.37811H113.391V9.75121Z",fill:"white"}),reactExports.createElement("path",{d:"M131.538 7.37811H129.269V20.61H131.538V7.37811Z",fill:"white"}),reactExports.createElement("path",{d:"M145.054 13.3468C145.718 12.8434 146.087 12.0524 146.087 11.1894C146.087 8.74444 144.685 7.52194 143.062 7.37811H138.047H135.318V20.61H143.505C144.39 20.61 147.488 19.8908 147.414 16.6548C147.414 15.2165 146.455 13.8502 145.054 13.3468ZM137.973 9.89504H142.472C143.284 9.89504 143.431 10.3265 143.431 11.1894C143.431 12.0524 143.358 12.6277 142.472 12.6277H137.973V9.89504ZM142.546 18.3088H138.047V15.0008H142.62C144.39 15.0008 144.464 15.9357 144.464 16.7267C144.39 17.6616 144.317 18.3088 142.546 18.3088Z",fill:"white"}),reactExports.createElement("path",{d:"M152.711 18.2369V7.37811H150.062V20.61H159.514V18.2369H152.711Z",fill:"white"}),reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.3248 0H19.1041C27.6529 0 27.8989 6.16219 27.9915 8.4838L28 8.6801V10.2668C28 12.2268 28 18.1068 20.6962 18.8535V17.4535C20.6962 16.7068 20.6962 15.8668 20.509 15.1201C23.5991 14.9335 23.5991 14.1868 23.5991 9.80003V9.14678C23.5991 3.8267 23.5055 3.8267 18.2612 3.8267C12.9239 3.8267 12.9239 3.92005 12.9239 9.14678V9.33341C12.9239 10.6401 13.0175 12.0401 13.1111 13.3467C13.1548 13.522 13.2192 13.6972 13.3044 13.8723C13.4008 14.0705 13.5236 14.2687 13.6726 14.4668C13.9539 14.8401 13.9539 16.8935 13.9539 18.4802C11.2382 17.9202 9.17812 15.6801 8.70967 12.9735C8.61607 12.2268 8.52248 11.3868 8.52248 10.6401V9.14678V8.6801C8.52248 6.53341 8.52248 0 17.3248 0ZM19.4775 17.4532V20.0665C19.3839 22.6799 18.5411 28 10.5816 28H8.80232C0 28 0 21.4666 0 19.3198V17.8266C0 15.7732 0 9.89308 7.3979 9.23977V10.6397C7.3979 11.3865 7.3979 12.2265 7.5851 12.9731C4.49499 13.0665 4.49499 13.8132 4.49499 18.1999V18.8532C4.49499 24.1732 4.58859 24.1732 9.83236 24.1732C15.1702 24.1732 15.2638 24.0799 15.2638 18.8532V18.6665C15.2638 18.1289 15.2638 17.3009 15.229 16.2522C15.2153 15.8445 15.1965 15.4035 15.1702 14.9332C15.1702 14.4665 14.983 13.9998 14.7017 13.6266C14.3274 13.1598 14.1402 12.5999 14.2338 12.0398V9.51975C16.7618 10.0798 18.7283 12.1331 19.1967 14.6531C19.3839 15.5865 19.4775 16.5198 19.4775 17.4532Z",fill:"#0288D1"})),SvgLogoDark=K=>reactExports.createElement("svg",{width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("g",{clipPath:"url(#clip0_5553_115136)"},reactExports.createElement("path",{d:"M14 9.5V12.0001C13.9239 12.6425 14.1035 13.289 14.5 13.8C15.1875 14.7167 15 17.3958 15 18.5C15 24.1023 14.0263 24 9.5 24C5.09442 24 3.99121 24.1023 3.99121 18.5C3.99121 13.6677 4.77197 13.0814 8.013 13.0102L8 13V9C-0.00854015 9.512 3.86812e-08 14.252 3.86812e-08 18.5039C3.86812e-08 23 0.10352 28 9.5 28C18.9277 28 19 23 19 18.5039C19 14.8672 19.007 10.8902 14 9.5Z",fill:"#0288D1"}),reactExports.createElement("path",{d:"M18.5 0C9.07227 0 9 5 9 9.49609C9 13.1328 8.993 17.1098 14 18.5V15.9999C14.0761 15.3575 13.8965 14.711 13.5 14.2C12.8125 13.2833 13 10.6042 13 9.5C13 3.89771 13.9737 4 18.5 4C22.9056 4 24.0088 3.89771 24.0088 9.5C24.0088 14.3323 23.228 14.9186 19.987 14.9898L20 15V19C28.0085 18.488 28 13.748 28 9.49609C28 5 27.8965 0 18.5 0Z",fill:"#0288D1"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_5553_115136"},reactExports.createElement("rect",{width:28,height:28,fill:"white"})))),SvgClLogo=K=>reactExports.createElement("svg",{width:160,height:28,viewBox:"0 0 160 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("path",{d:"M34 13.4172V14.5708C34 17.1665 34 20.988 40.2171 20.988C42.075 20.988 43.9331 20.7717 45.7196 20.267V17.7433H44.9335L42.218 18.4644H41.0032C36.8584 18.4644 36.8584 18.4644 36.8584 14.4266V13.7055C36.8584 9.66781 36.8584 9.66781 41.0032 9.66781H42.218L44.8621 10.3167H45.6481V7.72102C43.8616 7.2163 42.0036 7 40.1456 7C34 7 34 10.8214 34 13.4172Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M56.0557 7H54.6642C48.366 7 48.366 11.182 48.366 13.4172V14.5708C48.366 16.806 48.366 20.988 54.6642 20.988H56.0557C62.354 20.988 62.354 16.806 62.354 14.5708V13.4172C62.354 11.182 62.354 7 56.0557 7ZM59.4245 14.2103C59.4245 18.3923 59.4245 18.3923 55.3966 18.3923C51.4419 18.3923 51.3686 18.3923 51.3686 14.2103V13.7777C51.3686 9.5957 51.3686 9.5957 55.3966 9.5957C59.3513 9.5957 59.4245 9.5957 59.4245 13.7777V14.2103Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M73.8485 17.6616C73.3418 16.0795 73.1246 15.5042 70.1564 7.37811H65.3784V20.61H68.057V9.82313H68.4914C68.781 10.686 69.2153 11.8367 72.4007 20.61H75.3688C78.6265 11.9086 78.9885 10.9018 79.2781 9.82313H79.7124V20.61H82.3908V7.37811H77.613C74.9344 14.4255 74.2829 16.1514 73.8485 17.6616Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M91.1317 7.37811H86.1712V20.61H88.8308V16.9424H91.1317C95.0146 16.9424 97.8908 16.9424 97.8908 12.1244C97.8908 7.37811 95.0146 7.37811 91.1317 7.37811ZM92.4977 14.6412H88.8308V9.75121H92.4977C95.0146 9.75121 95.0146 9.75121 95.0146 12.1963C95.0146 14.6412 95.0146 14.6412 92.4977 14.6412Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M103.554 7.44963L98.647 19.6801V20.61H101.207L102.416 17.5344H109.243L110.453 20.61H113.013V19.6801L108.106 7.37811L103.554 7.44963ZM103.27 15.3172C104.123 13.0285 104.905 10.8112 105.19 9.88143H106.612C106.897 10.8112 108.106 14.1013 108.532 15.3172H103.27Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M113.391 9.75121H118.459V20.61H121.25V9.75121H126.245V7.37811H113.391V9.75121Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M131.538 7.37811H129.269V20.61H131.538V7.37811Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M145.054 13.3468C145.718 12.8434 146.087 12.0524 146.087 11.1894C146.087 8.74444 144.685 7.52194 143.062 7.37811H138.047H135.318V20.61H143.505C144.39 20.61 147.488 19.8908 147.414 16.6548C147.414 15.2165 146.455 13.8502 145.054 13.3468ZM137.973 9.89504H142.472C143.284 9.89504 143.431 10.3265 143.431 11.1894C143.431 12.0524 143.358 12.6277 142.472 12.6277H137.973V9.89504ZM142.546 18.3088H138.047V15.0008H142.62C144.39 15.0008 144.464 15.9357 144.464 16.7267C144.39 17.6616 144.317 18.3088 142.546 18.3088Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M152.711 18.2369V7.37811H150.062V20.61H159.514V18.2369H152.711Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.3248 0H19.1041C27.6529 0 27.8989 6.16219 27.9915 8.4838L28 8.6801V10.2668C28 12.2268 28 18.1068 20.6962 18.8535V17.4535C20.6962 16.7068 20.6962 15.8668 20.509 15.1201C23.5991 14.9335 23.5991 14.1868 23.5991 9.80003V9.14678C23.5991 3.8267 23.5055 3.8267 18.2612 3.8267C12.9239 3.8267 12.9239 3.92005 12.9239 9.14678V9.33341C12.9239 10.6401 13.0175 12.0401 13.1111 13.3467C13.1548 13.522 13.2192 13.6972 13.3044 13.8723C13.4008 14.0705 13.5236 14.2687 13.6726 14.4668C13.9539 14.8401 13.9539 16.8935 13.9539 18.4802C11.2382 17.9202 9.17812 15.6801 8.70967 12.9735C8.61607 12.2268 8.52248 11.3868 8.52248 10.6401V9.14678V8.6801C8.52248 6.53341 8.52248 0 17.3248 0ZM19.4775 17.4532V20.0665C19.3839 22.6799 18.5411 28 10.5816 28H8.80232C0 28 0 21.4666 0 19.3198V17.8266C0 15.7732 0 9.89308 7.3979 9.23977V10.6397C7.3979 11.3865 7.3979 12.2265 7.5851 12.9731C4.49499 13.0665 4.49499 13.8132 4.49499 18.1999V18.8532C4.49499 24.1732 4.58859 24.1732 9.83236 24.1732C15.1702 24.1732 15.2638 24.0799 15.2638 18.8532V18.6665C15.2638 18.1289 15.2638 17.3009 15.229 16.2522C15.2153 15.8445 15.1965 15.4035 15.1702 14.9332C15.1702 14.4665 14.983 13.9998 14.7017 13.6266C14.3274 13.1598 14.1402 12.5999 14.2338 12.0398V9.51975C16.7618 10.0798 18.7283 12.1331 19.1967 14.6531C19.3839 15.5865 19.4775 16.5198 19.4775 17.4532Z",fill:"var(--bs-header-logo-color)"})),SvgLogoWhite=K=>reactExports.createElement("svg",{width:162,height:30,viewBox:"0 0 162 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("path",{d:"M35 14.4172V15.5708C35 18.1665 35 21.988 41.2171 21.988C43.075 21.988 44.9331 21.7717 46.7196 21.267V18.7433H45.9335L43.218 19.4644H42.0032C37.8584 19.4644 37.8584 19.4644 37.8584 15.4266V14.7055C37.8584 10.6678 37.8584 10.6678 42.0032 10.6678H43.218L45.8621 11.3167H46.6481V8.72102C44.8616 8.2163 43.0036 8 41.1456 8C35 8 35 11.8214 35 14.4172Z",fill:"white"}),reactExports.createElement("path",{d:"M57.0556 8H55.6642C49.366 8 49.366 12.182 49.366 14.4172V15.5708C49.366 17.806 49.366 21.988 55.6642 21.988H57.0556C63.3539 21.988 63.3539 17.806 63.3539 15.5708V14.4172C63.3539 12.182 63.3539 8 57.0556 8ZM60.4244 15.2103C60.4244 19.3923 60.4245 19.3923 56.3966 19.3923C52.4418 19.3923 52.3686 19.3923 52.3686 15.2103V14.7777C52.3686 10.5957 52.3686 10.5957 56.3966 10.5957C60.3512 10.5957 60.4244 10.5957 60.4244 14.7777V15.2103Z",fill:"white"}),reactExports.createElement("path",{d:"M74.8485 18.6616C74.3418 17.0795 74.1246 16.5042 71.1564 8.37811H66.3784V21.61H69.057V10.8231H69.4914C69.781 11.686 70.2153 12.8367 73.4007 21.61H76.3688C79.6265 12.9086 79.9885 11.9018 80.2781 10.8231H80.7124V21.61H83.3908V8.37811H78.613C75.9344 15.4255 75.2829 17.1514 74.8485 18.6616Z",fill:"white"}),reactExports.createElement("path",{d:"M92.1317 8.37811H87.1713V21.61H89.8308V17.9424H92.1317C96.0146 17.9424 98.8909 17.9424 98.8909 13.1244C98.8909 8.37811 96.0146 8.37811 92.1317 8.37811ZM93.4978 15.6412H89.8308V10.7512H93.4978C96.0146 10.7512 96.0146 10.7512 96.0146 13.1963C96.0146 15.6412 96.0146 15.6412 93.4978 15.6412Z",fill:"white"}),reactExports.createElement("path",{d:"M104.554 8.44963L99.6471 20.6801V21.61H102.207L103.416 18.5344H110.243L111.453 21.61H114.013V20.6801L109.106 8.37811L104.554 8.44963ZM104.27 16.3172C105.123 14.0285 105.905 11.8112 106.19 10.8814H107.612C107.897 11.8112 109.106 15.1013 109.532 16.3172H104.27Z",fill:"white"}),reactExports.createElement("path",{d:"M114.391 10.7512H119.459V21.61H122.25V10.7512H127.245V8.37811H114.391V10.7512Z",fill:"white"}),reactExports.createElement("path",{d:"M132.538 8.37811H130.269V21.61H132.538V8.37811Z",fill:"white"}),reactExports.createElement("path",{d:"M146.054 14.3468C146.718 13.8434 147.087 13.0524 147.087 12.1894C147.087 9.74444 145.685 8.52194 144.062 8.37811H139.047H136.318V21.61H144.505C145.39 21.61 148.488 20.8908 148.415 17.6548C148.415 16.2165 147.455 14.8502 146.054 14.3468ZM138.973 10.895H143.472C144.284 10.895 144.431 11.3265 144.431 12.1894C144.431 13.0524 144.358 13.6277 143.472 13.6277H138.973V10.895ZM143.547 19.3088H139.047V16.0008H143.62C145.39 16.0008 145.464 16.9357 145.464 17.7267C145.39 18.6616 145.317 19.3088 143.547 19.3088Z",fill:"white"}),reactExports.createElement("path",{d:"M153.711 19.2369V8.37811H151.062V21.61H160.514V19.2369H153.711Z",fill:"white"}),reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3248 1H20.1041C28.6529 1 28.8989 7.16219 28.9915 9.4838L29 9.6801V11.2668C29 13.2268 29 19.1068 21.6962 19.8535V18.4535C21.6962 17.7068 21.6962 16.8668 21.509 16.1201C24.5991 15.9335 24.5991 15.1868 24.5991 10.8V10.1468C24.5991 4.8267 24.5055 4.8267 19.2612 4.8267C13.9239 4.8267 13.9239 4.92005 13.9239 10.1468V10.3334C13.9239 11.6401 14.0175 13.0401 14.1111 14.3467C14.1548 14.522 14.2192 14.6972 14.3044 14.8723C14.4008 15.0705 14.5236 15.2687 14.6726 15.4668C14.9539 15.8401 14.9539 17.8935 14.9539 19.4802C12.2382 18.9202 10.1781 16.6801 9.70967 13.9735C9.61607 13.2268 9.52248 12.3868 9.52248 11.6401V10.1468V9.6801C9.52248 7.53341 9.52248 1 18.3248 1ZM20.4775 18.4532V21.0665C20.3839 23.6799 19.5411 29 11.5816 29H9.80232C1 29 1 22.4666 1 20.3198V18.8266C1 16.7732 1 10.8931 8.3979 10.2398V11.6397C8.3979 12.3865 8.3979 13.2265 8.5851 13.9731C5.49499 14.0665 5.49499 14.8132 5.49499 19.1999V19.8532C5.49499 25.1732 5.58859 25.1732 10.8324 25.1732C16.1702 25.1732 16.2638 25.0799 16.2638 19.8532V19.6665C16.2638 19.1289 16.2638 18.3009 16.229 17.2522C16.2153 16.8445 16.1965 16.4035 16.1702 15.9332C16.1702 15.4665 15.983 14.9998 15.7017 14.6266C15.3274 14.1598 15.1402 13.5999 15.2338 13.0398V10.5198C17.7618 11.0798 19.7283 13.1331 20.1967 15.6531C20.3839 16.5865 20.4775 17.5198 20.4775 18.4532Z",fill:"white"})),SvgLogoBlue=K=>reactExports.createElement("svg",{width:162,height:30,viewBox:"0 0 162 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("path",{d:"M35 14.4172V15.5708C35 18.1665 35 21.988 41.2171 21.988C43.075 21.988 44.9331 21.7717 46.7196 21.267V18.7433H45.9335L43.218 19.4644H42.0032C37.8584 19.4644 37.8584 19.4644 37.8584 15.4266V14.7055C37.8584 10.6678 37.8584 10.6678 42.0032 10.6678H43.218L45.8621 11.3167H46.6481V8.72102C44.8616 8.2163 43.0036 8 41.1456 8C35 8 35 11.8214 35 14.4172Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M57.0556 8H55.6642C49.366 8 49.366 12.182 49.366 14.4172V15.5708C49.366 17.806 49.366 21.988 55.6642 21.988H57.0556C63.3539 21.988 63.3539 17.806 63.3539 15.5708V14.4172C63.3539 12.182 63.3539 8 57.0556 8ZM60.4245 15.2103C60.4245 19.3923 60.4245 19.3923 56.3966 19.3923C52.4418 19.3923 52.3686 19.3923 52.3686 15.2103V14.7777C52.3686 10.5957 52.3686 10.5957 56.3966 10.5957C60.3512 10.5957 60.4245 10.5957 60.4245 14.7777V15.2103Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M74.8485 18.6616C74.3418 17.0795 74.1246 16.5042 71.1564 8.37811H66.3784V21.61H69.057V10.8231H69.4914C69.781 11.686 70.2153 12.8367 73.4007 21.61H76.3688C79.6265 12.9086 79.9885 11.9018 80.2781 10.8231H80.7124V21.61H83.3908V8.37811H78.613C75.9344 15.4255 75.2829 17.1514 74.8485 18.6616Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M92.1317 8.37811H87.1713V21.61H89.8308V17.9424H92.1317C96.0146 17.9424 98.8909 17.9424 98.8909 13.1244C98.8909 8.37811 96.0146 8.37811 92.1317 8.37811ZM93.4978 15.6412H89.8308V10.7512H93.4978C96.0146 10.7512 96.0146 10.7512 96.0146 13.1963C96.0146 15.6412 96.0146 15.6412 93.4978 15.6412Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M104.554 8.44963L99.6471 20.6801V21.61H102.207L103.416 18.5344H110.243L111.453 21.61H114.013V20.6801L109.106 8.37811L104.554 8.44963ZM104.27 16.3172C105.123 14.0285 105.905 11.8112 106.19 10.8814H107.612C107.897 11.8112 109.106 15.1013 109.532 16.3172H104.27Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M114.391 10.7512H119.459V21.61H122.25V10.7512H127.245V8.37811H114.391V10.7512Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M132.538 8.37811H130.269V21.61H132.538V8.37811Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M146.054 14.3468C146.718 13.8434 147.087 13.0524 147.087 12.1894C147.087 9.74444 145.685 8.52194 144.062 8.37811H139.047H136.318V21.61H144.505C145.39 21.61 148.488 20.8908 148.415 17.6548C148.415 16.2165 147.455 14.8502 146.054 14.3468ZM138.973 10.895H143.472C144.284 10.895 144.431 11.3265 144.431 12.1894C144.431 13.0524 144.358 13.6277 143.472 13.6277H138.973V10.895ZM143.547 19.3088H139.047V16.0008H143.62C145.39 16.0008 145.464 16.9357 145.464 17.7267C145.39 18.6616 145.317 19.3088 143.547 19.3088Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M153.711 19.2369V8.37811H151.062V21.61H160.514V19.2369H153.711Z",fill:"#466DD0"}),reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3248 1H20.1041C28.6529 1 28.8989 7.16219 28.9915 9.4838L29 9.6801V11.2668C29 13.2268 29 19.1068 21.6962 19.8535V18.4535C21.6962 17.7068 21.6962 16.8668 21.509 16.1201C24.5991 15.9335 24.5991 15.1868 24.5991 10.8V10.1468C24.5991 4.8267 24.5055 4.8267 19.2612 4.8267C13.9239 4.8267 13.9239 4.92005 13.9239 10.1468V10.3334C13.9239 11.6401 14.0175 13.0401 14.1111 14.3467C14.1548 14.522 14.2192 14.6972 14.3044 14.8723C14.4008 15.0705 14.5236 15.2687 14.6726 15.4668C14.9539 15.8401 14.9539 17.8935 14.9539 19.4802C12.2382 18.9202 10.1781 16.6801 9.70967 13.9735C9.61607 13.2268 9.52248 12.3868 9.52248 11.6401V10.1468V9.6801C9.52248 7.53341 9.52248 1 18.3248 1ZM20.4775 18.4532V21.0665C20.3839 23.6799 19.5411 29 11.5816 29H9.80232C1 29 1 22.4666 1 20.3198V18.8266C1 16.7732 1 10.8931 8.3979 10.2398V11.6397C8.3979 12.3865 8.3979 13.2265 8.5851 13.9731C5.49499 14.0665 5.49499 14.8132 5.49499 19.1999V19.8532C5.49499 25.1732 5.58859 25.1732 10.8324 25.1732C16.1702 25.1732 16.2638 25.0799 16.2638 19.8532V19.6665C16.2638 19.1289 16.2638 18.3009 16.229 17.2522C16.2153 16.8445 16.1965 16.4035 16.1702 15.9332C16.1702 15.4665 15.983 14.9998 15.7017 14.6266C15.3274 14.1598 15.1402 13.5999 15.2338 13.0398V10.5198C17.7618 11.0798 19.7283 13.1331 20.1967 15.6531C20.3839 16.5865 20.4775 17.5198 20.4775 18.4532Z",fill:"#466DD0"})),APP_LOGOS={ce:SvgLogo,dark:SvgLogoDark,white:SvgLogoWhite,cl:SvgClLogo,light:SvgLogoBlue},AppLayout=({children:K})=>jsxRuntimeExports.jsx("div",{className:"app-layout",children:K}),ErrorLayout=({title:K,subTitle:J,children:ne})=>{const oe=useSelector$1(selectEnvLabel);return jsxRuntimeExports.jsxs(AppLayout,{children:[jsxRuntimeExports.jsxs("div",{className:"error-layout__header",children:[jsxRuntimeExports.jsx(APP_LOGOS.white,{}),jsxRuntimeExports.jsx(OF,{label:oe})]}),jsxRuntimeExports.jsx("div",{className:"error-layout__body",children:jsxRuntimeExports.jsxs("div",{className:"error-layout__content",children:[jsxRuntimeExports.jsx(R_,{className:"error-layout__content-icon"}),jsxRuntimeExports.jsx("div",{className:"error-layout__title",children:K}),J&&jsxRuntimeExports.jsx("div",{className:"error-layout__subtitle",children:J}),ne]})})]})};let ErrorBoundary$1=class extends reactExports.Component{constructor(){super(...arguments);wr(this,"state",{hasError:!1})}static getDerivedStateFromError(){return externalStorage.clear(),externalStorage.removeAllMainGridScrollPercents(),{hasError:!0}}componentDidCatch(ne,oe){var ue;console.error("Uncaught error:",ne,oe);const ce={Type:HandlerRunTypeEnum.UI_SUPPORT_UTIL,Method:"SaveFrontendError",Keys:[],Arguments:{Error:ne.toString()},userName:(ue=this.props.user)==null?void 0:ue.username};handlerApi.handlerRun(ce)}render(){return this.state.hasError?jsxRuntimeExports.jsx(ErrorLayout,{title:t$5("shared.pleaseReloadPage"),children:jsxRuntimeExports.jsx(rl,{iconBefore:jsxRuntimeExports.jsx(Pk,{}),onClick:()=>window.location.reload(),children:t$5("shared.reloadPage")})}):this.props.children}};const mapStateToProps=K=>({user:selectUser(K)}),ErrorBoundary$2=withTranslation()(connect(mapStateToProps)(ErrorBoundary$1)),THEME_KEYS={dark:"Dark",light:"Light"},createThemeService=()=>{const K=()=>{var Ae;const ce=THEME_KEYS[(Ae=env$1==null?void 0:env$1.defaultTheme)==null?void 0:Ae.toLowerCase()],ue=window.matchMedia("(prefers-color-scheme: dark)").matches?THEME_KEYS.dark:THEME_KEYS.light;ne(ce||ue)},J=ce=>({[THEME_KEYS.dark]:Mp,[THEME_KEYS.light]:dF})[ce]||dF,ne=ce=>{const ue=THEME_KEYS[ce==null?void 0:ce.toLowerCase()]||THEME_KEYS.light;document.documentElement.setAttribute("theme",ue),dispatch$1(setApplicationTheme(ue))};return{initTheme:K,setTheme:ne,getTheme:()=>store.getState().AppStateSliceReducer.applicationTheme,getUikitTheme:J}},themeService=createThemeService(),Logo=()=>{const K=useLocation(),J=APP_LOGOS.cl;return K.pathname.includes("login")||K.pathname.includes("server-error")||K.pathname.includes("server-unavailable")?jsxRuntimeExports.jsx(J,{}):jsxRuntimeExports.jsx(APP_LOGOS.white,{})},container$M="_container_hyxp7_1",innerContainer="_innerContainer_hyxp7_8",header$4="_header_hyxp7_12",logo$1="_logo_hyxp7_17",styles$1G={container:container$M,innerContainer,header:header$4,logo:logo$1},defaultRenderContent=()=>jsxRuntimeExports.jsx(PF,{loading:!0}),AppFallbackSkeleton=({renderContent:K=defaultRenderContent,skipContentLoading:J=!1})=>J?null:jsxRuntimeExports.jsxs("div",{className:cx(styles$1G.container,"content"),children:[jsxRuntimeExports.jsx("div",{className:styles$1G.innerContainer,children:jsxRuntimeExports.jsx("div",{className:styles$1G.header,children:jsxRuntimeExports.jsx("div",{className:styles$1G.logo,children:jsxRuntimeExports.jsx(Logo,{})})})}),K()]}),BaseLayout=()=>{const K=useSelector$1(selectApplicationTheme),J=useNavigate(),[ne,oe]=reactExports.useState(!1),[ce,ue]=reactExports.useState(!1),Ae=reactExports.useMemo(()=>themeService.getUikitTheme(K),[K]),pe=async()=>{themeService.initTheme();try{oe(!0),await authService.init()}catch{J(routes.serverError.path)}finally{oe(!1),ue(!0)}};return reactExports.useEffect(()=>{pe()},[]),reactExports.useEffect(()=>{setNavigate(J)},[J]),reactExports.useEffect(()=>{themeService.setTheme(K)},[K]),ne?jsxRuntimeExports.jsx(AppFallbackSkeleton,{skipContentLoading:!0}):ce?jsxRuntimeExports.jsxs(cF,{theme:Ae,children:[jsxRuntimeExports.jsx(UIToastContainer,{}),jsxRuntimeExports.jsx(ErrorBoundary$2,{children:jsxRuntimeExports.jsx(Outlet,{})})]}):null},overrideComponentsDictionary={[THEME_KEYS.dark]:{},[THEME_KEYS.light]:{}};var eventsource={exports:{}};/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */(function(K,J){(function(ne){var oe=ne.setTimeout,ce=ne.clearTimeout,ue=ne.XMLHttpRequest,Ae=ne.XDomainRequest,pe=ne.ActiveXObject,ve=ne.EventSource,me=ne.document,ge=ne.Promise,ye=ne.fetch,xe=ne.Response,_e=ne.TextDecoder,$e=ne.TextEncoder,Ie=ne.AbortController;if(typeof window<"u"&&typeof me<"u"&&!("readyState"in me)&&me.body==null&&(me.readyState="loading",window.addEventListener("load",function(gt){me.readyState="complete"},!1)),ue==null&&pe!=null&&(ue=function(){return new pe("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(gt){function $t(){}return $t.prototype=gt,new $t}),Date.now||(Date.now=function(){return new Date().getTime()}),Ie==null){var Fe=ye;ye=function(gt,$t){var pt=$t.signal;return Fe(gt,{headers:$t.headers,credentials:$t.credentials,cache:$t.cache}).then(function(vt){var Mt=vt.body.getReader();return pt._reader=Mt,pt._aborted&&pt._reader.cancel(),{status:vt.status,statusText:vt.statusText,headers:vt.headers,body:{getReader:function(){return Mt}}}})},Ie=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function ke(){this.bitsNeeded=0,this.codePoint=0}ke.prototype.decode=function(gt){function $t(Dt,Ht,Bt){if(Bt===1)return Dt>=128>>Ht&&Dt<<Ht<=2047;if(Bt===2)return Dt>=2048>>Ht&&Dt<<Ht<=55295||Dt>=57344>>Ht&&Dt<<Ht<=65535;if(Bt===3)return Dt>=65536>>Ht&&Dt<<Ht<=1114111;throw new Error}function pt(Dt,Ht){if(Dt===6*1)return Ht>>6>15?3:Ht>31?2:1;if(Dt===6*2)return Ht>15?3:2;if(Dt===6*3)return 3;throw new Error}for(var vt=65533,Mt="",St=this.bitsNeeded,_t=this.codePoint,Xt=0;Xt<gt.length;Xt+=1){var Tt=gt[Xt];St!==0&&(Tt<128||Tt>191||!$t(_t<<6|Tt&63,St-6,pt(St,_t)))&&(St=0,_t=vt,Mt+=String.fromCharCode(_t)),St===0?(Tt>=0&&Tt<=127?(St=0,_t=Tt):Tt>=192&&Tt<=223?(St=6*1,_t=Tt&31):Tt>=224&&Tt<=239?(St=6*2,_t=Tt&15):Tt>=240&&Tt<=247?(St=6*3,_t=Tt&7):(St=0,_t=vt),St!==0&&!$t(_t,St,pt(St,_t))&&(St=0,_t=vt)):(St-=6,_t=_t<<6|Tt&63),St===0&&(_t<=65535?Mt+=String.fromCharCode(_t):(Mt+=String.fromCharCode(55296+(_t-65535-1>>10)),Mt+=String.fromCharCode(56320+(_t-65535-1&1023))))}return this.bitsNeeded=St,this.codePoint=_t,Mt};var je=function(){try{return new _e().decode(new $e().encode("test"),{stream:!0})==="test"}catch(gt){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+gt)}return!1};(_e==null||$e==null||!je())&&(_e=ke);var We=function(){};function ze(gt){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=We,this.onload=We,this.onerror=We,this.onreadystatechange=We,this._contentType="",this._xhr=gt,this._sendTimeout=0,this._abort=We}ze.prototype.open=function(gt,$t){this._abort(!0);var pt=this,vt=this._xhr,Mt=1,St=0;this._abort=function(Bt){pt._sendTimeout!==0&&(ce(pt._sendTimeout),pt._sendTimeout=0),(Mt===1||Mt===2||Mt===3)&&(Mt=4,vt.onload=We,vt.onerror=We,vt.onabort=We,vt.onprogress=We,vt.onreadystatechange=We,vt.abort(),St!==0&&(ce(St),St=0),Bt||(pt.readyState=4,pt.onabort(null),pt.onreadystatechange())),Mt=0};var _t=function(){if(Mt===1){var Bt=0,It="",zt=void 0;if("contentType"in vt)Bt=200,It="OK",zt=vt.contentType;else try{Bt=vt.status,It=vt.statusText,zt=vt.getResponseHeader("Content-Type")}catch{Bt=0,It="",zt=void 0}Bt!==0&&(Mt=2,pt.readyState=2,pt.status=Bt,pt.statusText=It,pt._contentType=zt,pt.onreadystatechange())}},Xt=function(){if(_t(),Mt===2||Mt===3){Mt=3;var Bt="";try{Bt=vt.responseText}catch{}pt.readyState=3,pt.responseText=Bt,pt.onprogress()}},Tt=function(Bt,It){if((It==null||It.preventDefault==null)&&(It={preventDefault:We}),Xt(),Mt===1||Mt===2||Mt===3){if(Mt=4,St!==0&&(ce(St),St=0),pt.readyState=4,Bt==="load")pt.onload(It);else if(Bt==="error")pt.onerror(It);else if(Bt==="abort")pt.onabort(It);else throw new TypeError;pt.onreadystatechange()}},Dt=function(Bt){vt!=null&&(vt.readyState===4?(!("onload"in vt)||!("onerror"in vt)||!("onabort"in vt))&&Tt(vt.responseText===""?"error":"load",Bt):vt.readyState===3?"onprogress"in vt||Xt():vt.readyState===2&&_t())},Ht=function(){St=oe(function(){Ht()},500),vt.readyState===3&&Xt()};"onload"in vt&&(vt.onload=function(Bt){Tt("load",Bt)}),"onerror"in vt&&(vt.onerror=function(Bt){Tt("error",Bt)}),"onabort"in vt&&(vt.onabort=function(Bt){Tt("abort",Bt)}),"onprogress"in vt&&(vt.onprogress=Xt),"onreadystatechange"in vt&&(vt.onreadystatechange=function(Bt){Dt(Bt)}),("contentType"in vt||!("ontimeout"in ue.prototype))&&($t+=($t.indexOf("?")===-1?"?":"&")+"padding=true"),vt.open(gt,$t,!0),"readyState"in vt&&(St=oe(function(){Ht()},0))},ze.prototype.abort=function(){this._abort(!1)},ze.prototype.getResponseHeader=function(gt){return this._contentType},ze.prototype.setRequestHeader=function(gt,$t){var pt=this._xhr;"setRequestHeader"in pt&&pt.setRequestHeader(gt,$t)},ze.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},ze.prototype.send=function(){if((!("ontimeout"in ue.prototype)||!("sendAsBinary"in ue.prototype)&&!("mozAnon"in ue.prototype))&&me!=null&&me.readyState!=null&&me.readyState!=="complete"){var gt=this;gt._sendTimeout=oe(function(){gt._sendTimeout=0,gt.send()},4);return}var $t=this._xhr;"withCredentials"in $t&&($t.withCredentials=this.withCredentials);try{$t.send(void 0)}catch(pt){throw pt}};function Xe(gt){return gt.replace(/[A-Z]/g,function($t){return String.fromCharCode($t.charCodeAt(0)+32)})}function Je(gt){for(var $t=Object.create(null),pt=gt.split(`\r
`),vt=0;vt<pt.length;vt+=1){var Mt=pt[vt],St=Mt.split(": "),_t=St.shift(),Xt=St.join(": ");$t[Xe(_t)]=Xt}this._map=$t}Je.prototype.get=function(gt){return this._map[Xe(gt)]},ue!=null&&ue.HEADERS_RECEIVED==null&&(ue.HEADERS_RECEIVED=2);function nt(){}nt.prototype.open=function(gt,$t,pt,vt,Mt,St,_t){gt.open("GET",Mt);var Xt=0;gt.onprogress=function(){var Dt=gt.responseText,Ht=Dt.slice(Xt);Xt+=Ht.length,pt(Ht)},gt.onerror=function(Dt){Dt.preventDefault(),vt(new Error("NetworkError"))},gt.onload=function(){vt(null)},gt.onabort=function(){vt(null)},gt.onreadystatechange=function(){if(gt.readyState===ue.HEADERS_RECEIVED){var Dt=gt.status,Ht=gt.statusText,Bt=gt.getResponseHeader("Content-Type"),It=gt.getAllResponseHeaders();$t(Dt,Ht,Bt,new Je(It))}},gt.withCredentials=St;for(var Tt in _t)Object.prototype.hasOwnProperty.call(_t,Tt)&&gt.setRequestHeader(Tt,_t[Tt]);return gt.send(),gt};function et(gt){this._headers=gt}et.prototype.get=function(gt){return this._headers.get(gt)};function tt(){}tt.prototype.open=function(gt,$t,pt,vt,Mt,St,_t){var Xt=null,Tt=new Ie,Dt=Tt.signal,Ht=new _e;return ye(Mt,{headers:_t,credentials:St?"include":"same-origin",signal:Dt,cache:"no-store"}).then(function(Bt){return Xt=Bt.body.getReader(),$t(Bt.status,Bt.statusText,Bt.headers.get("Content-Type"),new et(Bt.headers)),new ge(function(It,zt){var Pt=function(){Xt.read().then(function(Vt){if(Vt.done)It(void 0);else{var vr=Ht.decode(Vt.value,{stream:!0});pt(vr),Pt()}}).catch(function(Vt){zt(Vt)})};Pt()})}).catch(function(Bt){if(Bt.name!=="AbortError")return Bt}).then(function(Bt){vt(Bt)}),{abort:function(){Xt!=null&&Xt.cancel(),Tt.abort()}}};function st(){this._listeners=Object.create(null)}function qe(gt){oe(function(){throw gt},0)}st.prototype.dispatchEvent=function(gt){gt.target=this;var $t=this._listeners[gt.type];if($t!=null)for(var pt=$t.length,vt=0;vt<pt;vt+=1){var Mt=$t[vt];try{typeof Mt.handleEvent=="function"?Mt.handleEvent(gt):Mt.call(this,gt)}catch(St){qe(St)}}},st.prototype.addEventListener=function(gt,$t){gt=String(gt);var pt=this._listeners,vt=pt[gt];vt==null&&(vt=[],pt[gt]=vt);for(var Mt=!1,St=0;St<vt.length;St+=1)vt[St]===$t&&(Mt=!0);Mt||vt.push($t)},st.prototype.removeEventListener=function(gt,$t){gt=String(gt);var pt=this._listeners,vt=pt[gt];if(vt!=null){for(var Mt=[],St=0;St<vt.length;St+=1)vt[St]!==$t&&Mt.push(vt[St]);Mt.length===0?delete pt[gt]:pt[gt]=Mt}};function Se(gt){this.type=gt,this.target=void 0}function Re(gt,$t){Se.call(this,gt),this.data=$t.data,this.lastEventId=$t.lastEventId}Re.prototype=Object.create(Se.prototype);function Be(gt,$t){Se.call(this,gt),this.status=$t.status,this.statusText=$t.statusText,this.headers=$t.headers}Be.prototype=Object.create(Se.prototype);function Ne(gt,$t){Se.call(this,gt),this.error=$t.error}Ne.prototype=Object.create(Se.prototype);var Ue=-1,Ge=0,Ye=1,Qe=2,Te=-1,Ke=0,rt=1,it=2,at=3,lt=/^text\/event\-stream(;.*)?$/i,ct=1e3,ot=18e6,ft=function(gt,$t){var pt=gt==null?$t:parseInt(gt,10);return pt!==pt&&(pt=$t),dt(pt)},dt=function(gt){return Math.min(Math.max(gt,ct),ot)},mt=function(gt,$t,pt){try{typeof $t=="function"&&$t.call(gt,pt)}catch(vt){qe(vt)}};function kt(gt,$t){st.call(this),$t=$t||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Ot(this,gt,$t)}function wt(){return ue!=null&&"withCredentials"in ue.prototype||Ae==null?new ue:new Ae}var Et=ye!=null&&xe!=null&&"body"in xe.prototype;function Ot(gt,$t,pt){$t=String($t);var vt=!!pt.withCredentials,Mt=pt.lastEventIdQueryParameterName||"lastEventId",St=dt(1e3),_t=ft(pt.heartbeatTimeout,45e3),Xt="",Tt=St,Dt=!1,Ht=0,Bt=pt.headers||{},It=pt.Transport,zt=Et&&It==null?void 0:new ze(It!=null?new It:wt()),Pt=It!=null&&typeof It!="string"?new It:zt==null?new tt:new nt,Vt=void 0,vr=0,qt=Ue,er="",yr="",Lt="",jt="",fr=Ke,Gt=0,Jt=0,ar=function(ir,Ir,tr,cr){if(qt===Ge)if(ir===200&&tr!=null&&lt.test(tr)){qt=Ye,Dt=Date.now(),Tt=St,gt.readyState=Ye;var Or=new Be("open",{status:ir,statusText:Ir,headers:cr});gt.dispatchEvent(Or),mt(gt,gt.onopen,Or)}else{var sr="";ir!==200?(Ir&&(Ir=Ir.replace(/\s+/g," ")),sr="EventSource's response has a status "+ir+" "+Ir+" that is not 200. Aborting the connection."):sr="EventSource's response has a Content-Type specifying an unsupported type: "+(tr==null?"-":tr.replace(/\s+/g," "))+". Aborting the connection.",Er();var Or=new Be("error",{status:ir,statusText:Ir,headers:cr});gt.dispatchEvent(Or),mt(gt,gt.onerror,Or),console.error(sr)}},Wt=function(ir){if(qt===Ye){for(var Ir=-1,tr=0;tr<ir.length;tr+=1){var cr=ir.charCodeAt(tr);(cr===10||cr===13)&&(Ir=tr)}var Or=(Ir!==-1?jt:"")+ir.slice(0,Ir+1);jt=(Ir===-1?jt:"")+ir.slice(Ir+1),ir!==""&&(Dt=Date.now(),Ht+=ir.length);for(var sr=0;sr<Or.length;sr+=1){var cr=Or.charCodeAt(sr);if(fr===Te&&cr===10)fr=Ke;else if(fr===Te&&(fr=Ke),cr===13||cr===10){if(fr!==Ke){fr===rt&&(Jt=sr+1);var dr=Or.slice(Gt,Jt-1),Dr=Or.slice(Jt+(Jt<sr&&Or.charCodeAt(Jt)===32?1:0),sr);dr==="data"?(er+=`
`,er+=Dr):dr==="id"?yr=Dr:dr==="event"?Lt=Dr:dr==="retry"?(St=ft(Dr,St),Tt=St):dr==="heartbeatTimeout"&&(_t=ft(Dr,_t),vr!==0&&(ce(vr),vr=oe(function(){Zt()},_t)))}if(fr===Ke){if(er!==""){Xt=yr,Lt===""&&(Lt="message");var lr=new Re(Lt,{data:er.slice(1),lastEventId:yr});if(gt.dispatchEvent(lr),Lt==="open"?mt(gt,gt.onopen,lr):Lt==="message"?mt(gt,gt.onmessage,lr):Lt==="error"&&mt(gt,gt.onerror,lr),qt===Qe)return}er="",Lt=""}fr=cr===13?Te:Ke}else fr===Ke&&(Gt=sr,fr=rt),fr===rt?cr===58&&(Jt=sr+1,fr=it):fr===it&&(fr=at)}}},nr=function(ir){if(qt===Ye||qt===Ge){qt=Ue,vr!==0&&(ce(vr),vr=0),vr=oe(function(){Zt()},Tt),Tt=dt(Math.min(St*16,Tt*2)),gt.readyState=Ge;var Ir=new Ne("error",{error:ir});gt.dispatchEvent(Ir),mt(gt,gt.onerror,Ir),ir!=null&&console.error(ir)}},Er=function(){qt=Qe,Vt!=null&&(Vt.abort(),Vt=void 0),vr!==0&&(ce(vr),vr=0),gt.readyState=Qe},Zt=function(){if(vr=0,qt!==Ue){if(!Dt&&Vt!=null)nr(new Error("No activity within "+_t+" milliseconds. "+(qt===Ge?"No response received.":Ht+" chars received.")+" Reconnecting.")),Vt!=null&&(Vt.abort(),Vt=void 0);else{var ir=Math.max((Dt||Date.now())+_t-Date.now(),1);Dt=!1,vr=oe(function(){Zt()},ir)}return}Dt=!1,Ht=0,vr=oe(function(){Zt()},_t),qt=Ge,er="",Lt="",yr=Xt,jt="",Gt=0,Jt=0,fr=Ke;var Ir=$t;if($t.slice(0,5)!=="data:"&&$t.slice(0,5)!=="blob:"&&Xt!==""){var tr=$t.indexOf("?");Ir=tr===-1?$t:$t.slice(0,tr+1)+$t.slice(tr+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(Dr,lr){return lr===Mt?"":Dr}),Ir+=($t.indexOf("?")===-1?"?":"&")+Mt+"="+encodeURIComponent(Xt)}var cr=gt.withCredentials,Or={};Or.Accept="text/event-stream";var sr=gt.headers;if(sr!=null)for(var dr in sr)Object.prototype.hasOwnProperty.call(sr,dr)&&(Or[dr]=sr[dr]);try{Vt=Pt.open(zt,ar,Wt,nr,Ir,cr,Or)}catch(Dr){throw Er(),Dr}};gt.url=$t,gt.readyState=Ge,gt.withCredentials=vt,gt.headers=Bt,gt._close=Er,Zt()}kt.prototype=Object.create(st.prototype),kt.prototype.CONNECTING=Ge,kt.prototype.OPEN=Ye,kt.prototype.CLOSED=Qe,kt.prototype.close=function(){this._close()},kt.CONNECTING=Ge,kt.OPEN=Ye,kt.CLOSED=Qe,kt.prototype.withCredentials=void 0;var Rt=ve;ue!=null&&(ve==null||!("withCredentials"in ve.prototype))&&(Rt=kt),function(gt){{var $t=gt(J);$t!==void 0&&(K.exports=$t)}}(function(gt){gt.EventSourcePolyfill=kt,gt.NativeEventSource=ve,gt.EventSource=Rt})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:commonjsGlobal:globalThis)})(eventsource,eventsource.exports);var eventsourceExports=eventsource.exports,SSEEventKindEnum=(K=>(K.LOG="Log",K.ERROR="Error",K.WARNING="Warning",K.TASK_STARTED="TaskStarted",K.TASK_FINISHED="TaskFinished",K))(SSEEventKindEnum||{});const SSE_CONNECTION_EVENT_TYPES=["LOG","ERROR","WARNING","TASK_STARTED","TASK_FINISHED"],SSE_EVENT_TASKS_TYPES=["TaskStarted","TaskFinished"],SSEContext=reactExports.createContext(void 0),useSSEContext=()=>{const K=reactExports.useContext(SSEContext);return K||(console.error("useSSEContext must be used within an SSEProvider"),{error:"SSEContext not found",eventsBatch:[],setEventsBatch:()=>{}})},SSEProvider=({children:K})=>{const J=reactExports.useRef([]),ne=useSelector$1(selectIsAuthenticated),oe=useSelector$1(selectProviders),[ce,ue]=reactExports.useState([]),Ae=ve=>{const me=JSON.parse(ve.data);J.current.push(me)};reactExports.useEffect(()=>{const ve=setInterval(()=>{if(J.current.length>0){const me=J.current;J.current=[],ue(ge=>[...ge,...me])}},100);return()=>clearInterval(ve)},[]),reactExports.useEffect(()=>{if(!ne)return;const ve=oe.length!==0,me=new eventsourceExports.EventSourcePolyfill(sseApi.events(),{withCredentials:ve});return SSE_CONNECTION_EVENT_TYPES.forEach(ge=>{me.addEventListener(ge,Ae)}),()=>{SSE_CONNECTION_EVENT_TYPES.forEach(ge=>{me.removeEventListener(ge,Ae)}),me.close()}},[ne]);const pe=reactExports.useMemo(()=>({eventsBatch:ce,setEventsBatch:ue}),[ce,ue]);return jsxRuntimeExports.jsx(SSEContext.Provider,{value:pe,children:K})};var LogsListViewEnum=(K=>(K.LOGS="logs",K.HANDLERS="handlers",K.ERRORS="errors",K))(LogsListViewEnum||{}),LogsLevelEnum=(K=>(K.CRITICAL="Critical",K.ERROR="Error",K.WARNING="Warning",K.INFO="Info",K.DEBUG="Debug",K))(LogsLevelEnum||{});function memo(K,J,ne){let oe=ne.initialDeps??[],ce;return()=>{var ue,Ae,pe,ve;let me;ne.key&&((ue=ne.debug)!=null&&ue.call(ne))&&(me=Date.now());const ge=K();if(!(ge.length!==oe.length||ge.some((_e,$e)=>oe[$e]!==_e)))return ce;oe=ge;let xe;if(ne.key&&((Ae=ne.debug)!=null&&Ae.call(ne))&&(xe=Date.now()),ce=J(...ge),ne.key&&((pe=ne.debug)!=null&&pe.call(ne))){const _e=Math.round((Date.now()-me)*100)/100,$e=Math.round((Date.now()-xe)*100)/100,Ie=$e/16,Fe=(ke,je)=>{for(ke=String(ke);ke.length<je;)ke=" "+ke;return ke};console.info(`%c ${Fe($e,5)} /${Fe(_e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*Ie,120))}deg 100% 31%);`,ne==null?void 0:ne.key)}return(ve=ne==null?void 0:ne.onChange)==null||ve.call(ne,ce),ce}}function notUndefined(K,J){if(K===void 0)throw new Error("Unexpected undefined");return K}const approxEqual=(K,J)=>Math.abs(K-J)<1,debounce$1=(K,J,ne)=>{let oe;return function(...ce){K.clearTimeout(oe),oe=K.setTimeout(()=>J.apply(this,ce),ne)}},defaultKeyExtractor=K=>K,defaultRangeExtractor=K=>{const J=Math.max(K.startIndex-K.overscan,0),ne=Math.min(K.endIndex+K.overscan,K.count-1),oe=[];for(let ce=J;ce<=ne;ce++)oe.push(ce);return oe},observeElementRect=(K,J)=>{const ne=K.scrollElement;if(!ne)return;const oe=K.targetWindow;if(!oe)return;const ce=Ae=>{const{width:pe,height:ve}=Ae;J({width:Math.round(pe),height:Math.round(ve)})};if(ce(ne.getBoundingClientRect()),!oe.ResizeObserver)return()=>{};const ue=new oe.ResizeObserver(Ae=>{const pe=Ae[0];if(pe!=null&&pe.borderBoxSize){const ve=pe.borderBoxSize[0];if(ve){ce({width:ve.inlineSize,height:ve.blockSize});return}}ce(ne.getBoundingClientRect())});return ue.observe(ne,{box:"border-box"}),()=>{ue.unobserve(ne)}},addEventListenerOptions={passive:!0},supportsScrollend=typeof window>"u"?!0:"onscrollend"in window,observeElementOffset=(K,J)=>{const ne=K.scrollElement;if(!ne)return;const oe=K.targetWindow;if(!oe)return;let ce=0;const ue=supportsScrollend?()=>{}:debounce$1(oe,()=>{J(ce,!1)},K.options.isScrollingResetDelay),Ae=me=>()=>{const{horizontal:ge,isRtl:ye}=K.options;ce=ge?ne.scrollLeft*(ye&&-1||1):ne.scrollTop,ue(),J(ce,me)},pe=Ae(!0),ve=Ae(!1);return ve(),ne.addEventListener("scroll",pe,addEventListenerOptions),ne.addEventListener("scrollend",ve,addEventListenerOptions),()=>{ne.removeEventListener("scroll",pe),ne.removeEventListener("scrollend",ve)}},measureElement=(K,J,ne)=>{if(J!=null&&J.borderBoxSize){const oe=J.borderBoxSize[0];if(oe)return Math.round(oe[ne.options.horizontal?"inlineSize":"blockSize"])}return Math.round(K.getBoundingClientRect()[ne.options.horizontal?"width":"height"])},elementScroll=(K,{adjustments:J=0,behavior:ne},oe)=>{var ce,ue;const Ae=K+J;(ue=(ce=oe.scrollElement)==null?void 0:ce.scrollTo)==null||ue.call(ce,{[oe.options.horizontal?"left":"top"]:Ae,behavior:ne})};class Virtualizer{constructor(J){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let ne=null;const oe=()=>ne||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:ne=new this.targetWindow.ResizeObserver(ce=>{ce.forEach(ue=>{this._measureElement(ue.target,ue)})}));return{disconnect:()=>{var ce;(ce=oe())==null||ce.disconnect(),ne=null},observe:ce=>{var ue;return(ue=oe())==null?void 0:ue.observe(ce,{box:"border-box"})},unobserve:ce=>{var ue;return(ue=oe())==null?void 0:ue.unobserve(ce)}}})(),this.range=null,this.setOptions=ne=>{Object.entries(ne).forEach(([oe,ce])=>{typeof ce>"u"&&delete ne[oe]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:defaultKeyExtractor,rangeExtractor:defaultRangeExtractor,onChange:()=>{},measureElement,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,...ne}},this.notify=ne=>{var oe,ce;(ce=(oe=this.options).onChange)==null||ce.call(oe,this,ne)},this.maybeNotify=memo(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),ne=>{this.notify(ne)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(ne=>ne()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var ne;const oe=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==oe){if(this.cleanup(),!oe){this.maybeNotify();return}this.scrollElement=oe,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((ne=this.scrollElement)==null?void 0:ne.window)??null,this.elementsCache.forEach(ce=>{this.observer.observe(ce)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,ce=>{this.scrollRect=ce,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(ce,ue)=>{this.scrollAdjustments=0,this.scrollDirection=ue?this.getScrollOffset()<ce?"forward":"backward":null,this.scrollOffset=ce,this.isScrolling=ue,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(ne,oe)=>{const ce=new Map,ue=new Map;for(let Ae=oe-1;Ae>=0;Ae--){const pe=ne[Ae];if(ce.has(pe.lane))continue;const ve=ue.get(pe.lane);if(ve==null||pe.end>ve.end?ue.set(pe.lane,pe):pe.end<ve.end&&ce.set(pe.lane,!0),ce.size===this.options.lanes)break}return ue.size===this.options.lanes?Array.from(ue.values()).sort((Ae,pe)=>Ae.end===pe.end?Ae.index-pe.index:Ae.end-pe.end)[0]:void 0},this.getMeasurementOptions=memo(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(ne,oe,ce,ue,Ae)=>(this.pendingMeasuredCacheIndexes=[],{count:ne,paddingStart:oe,scrollMargin:ce,getItemKey:ue,enabled:Ae}),{key:!1}),this.getMeasurements=memo(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:ne,paddingStart:oe,scrollMargin:ce,getItemKey:ue,enabled:Ae},pe)=>{if(!Ae)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(ge=>{this.itemSizeCache.set(ge.key,ge.size)}));const ve=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const me=this.measurementsCache.slice(0,ve);for(let ge=ve;ge<ne;ge++){const ye=ue(ge),xe=this.options.lanes===1?me[ge-1]:this.getFurthestMeasurement(me,ge),_e=xe?xe.end+this.options.gap:oe+ce,$e=pe.get(ye),Ie=typeof $e=="number"?$e:this.options.estimateSize(ge),Fe=_e+Ie,ke=xe?xe.lane:ge%this.options.lanes;me[ge]={index:ge,start:_e,size:Ie,end:Fe,key:ye,lane:ke}}return this.measurementsCache=me,me},{key:!1,debug:()=>this.options.debug}),this.calculateRange=memo(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(ne,oe,ce)=>this.range=ne.length>0&&oe>0?calculateRange({measurements:ne,outerSize:oe,scrollOffset:ce}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=memo(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(ne,oe,ce,ue)=>oe===null?[]:ne({startIndex:oe.startIndex,endIndex:oe.endIndex,overscan:ce,count:ue}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=ne=>{const oe=this.options.indexAttribute,ce=ne.getAttribute(oe);return ce?parseInt(ce,10):(console.warn(`Missing attribute name '${oe}={index}' on measured element.`),-1)},this._measureElement=(ne,oe)=>{const ce=this.indexFromElement(ne),ue=this.measurementsCache[ce];if(!ue)return;const Ae=ue.key,pe=this.elementsCache.get(Ae);pe!==ne&&(pe&&this.observer.unobserve(pe),this.observer.observe(ne),this.elementsCache.set(Ae,ne)),ne.isConnected&&this.resizeItem(ce,this.options.measureElement(ne,oe,this))},this.resizeItem=(ne,oe)=>{const ce=this.measurementsCache[ne];if(!ce)return;const ue=this.itemSizeCache.get(ce.key)??ce.size,Ae=oe-ue;Ae!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(ce,Ae,this):ce.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=Ae,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(ce.index),this.itemSizeCache=new Map(this.itemSizeCache.set(ce.key,oe)),this.notify(!1))},this.measureElement=ne=>{if(!ne){this.elementsCache.forEach((oe,ce)=>{oe.isConnected||(this.observer.unobserve(oe),this.elementsCache.delete(ce))});return}this._measureElement(ne,void 0)},this.getVirtualItems=memo(()=>[this.getIndexes(),this.getMeasurements()],(ne,oe)=>{const ce=[];for(let ue=0,Ae=ne.length;ue<Ae;ue++){const pe=ne[ue],ve=oe[pe];ce.push(ve)}return ce},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=ne=>{const oe=this.getMeasurements();if(oe.length!==0)return notUndefined(oe[findNearestBinarySearch(0,oe.length-1,ce=>notUndefined(oe[ce]).start,ne)])},this.getOffsetForAlignment=(ne,oe)=>{const ce=this.getSize(),ue=this.getScrollOffset();oe==="auto"&&(ne<=ue?oe="start":ne>=ue+ce?oe="end":oe="start"),oe==="start"?ne=ne:oe==="end"?ne=ne-ce:oe==="center"&&(ne=ne-ce/2);const Ae=this.options.horizontal?"scrollWidth":"scrollHeight",ve=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[Ae]:this.scrollElement[Ae]:0)-ce;return Math.max(Math.min(ve,ne),0)},this.getOffsetForIndex=(ne,oe="auto")=>{ne=Math.max(0,Math.min(ne,this.options.count-1));const ce=this.measurementsCache[ne];if(!ce)return;const ue=this.getSize(),Ae=this.getScrollOffset();if(oe==="auto")if(ce.end>=Ae+ue-this.options.scrollPaddingEnd)oe="end";else if(ce.start<=Ae+this.options.scrollPaddingStart)oe="start";else return[Ae,oe];const pe=oe==="end"?ce.end+this.options.scrollPaddingEnd:ce.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(pe,oe),oe]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(ne,{align:oe="start",behavior:ce}={})=>{this.cancelScrollToIndex(),ce==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(ne,oe),{adjustments:void 0,behavior:ce})},this.scrollToIndex=(ne,{align:oe="auto",behavior:ce}={})=>{ne=Math.max(0,Math.min(ne,this.options.count-1)),this.cancelScrollToIndex(),ce==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const ue=this.getOffsetForIndex(ne,oe);if(!ue)return;const[Ae,pe]=ue;this._scrollToOffset(Ae,{adjustments:void 0,behavior:ce}),ce!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(ne))){const[me]=notUndefined(this.getOffsetForIndex(ne,pe));approxEqual(me,this.getScrollOffset())||this.scrollToIndex(ne,{align:pe,behavior:ce})}else this.scrollToIndex(ne,{align:pe,behavior:ce})}))},this.scrollBy=(ne,{behavior:oe}={})=>{this.cancelScrollToIndex(),oe==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+ne,{adjustments:void 0,behavior:oe})},this.getTotalSize=()=>{var ne;const oe=this.getMeasurements();let ce;return oe.length===0?ce=this.options.paddingStart:ce=this.options.lanes===1?((ne=oe[oe.length-1])==null?void 0:ne.end)??0:Math.max(...oe.slice(-this.options.lanes).map(ue=>ue.end)),Math.max(ce-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(ne,{adjustments:oe,behavior:ce})=>{this.options.scrollToFn(ne,{behavior:ce,adjustments:oe},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(J)}}const findNearestBinarySearch=(K,J,ne,oe)=>{for(;K<=J;){const ce=(K+J)/2|0,ue=ne(ce);if(ue<oe)K=ce+1;else if(ue>oe)J=ce-1;else return ce}return K>0?K-1:0};function calculateRange({measurements:K,outerSize:J,scrollOffset:ne}){const oe=K.length-1,ue=findNearestBinarySearch(0,oe,pe=>K[pe].start,ne);let Ae=ue;for(;Ae<oe&&K[Ae].end<ne+J;)Ae++;return{startIndex:ue,endIndex:Ae}}const useIsomorphicLayoutEffect$3=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useVirtualizerBase(K){const J=reactExports.useReducer(()=>({}),{})[1],ne={...K,onChange:(ce,ue)=>{var Ae;ue?reactDomExports.flushSync(J):J(),(Ae=K.onChange)==null||Ae.call(K,ce,ue)}},[oe]=reactExports.useState(()=>new Virtualizer(ne));return oe.setOptions(ne),reactExports.useEffect(()=>oe._didMount(),[]),useIsomorphicLayoutEffect$3(()=>oe._willUpdate()),oe}function useVirtualizer(K){return useVirtualizerBase({observeElementRect,observeElementOffset,scrollToFn:elementScroll,...K})}function useMergeRefs(K){return reactExports.useMemo(()=>K.every(J=>J==null)?null:J=>{K.forEach(ne=>{typeof ne=="function"?ne(J):ne!=null&&(ne.current=J)})},K)}function useResolvedElement(K,J){var ne=reactExports.useRef(null),oe=reactExports.useRef(null);oe.current=J;var ce=reactExports.useRef(null);reactExports.useEffect(function(){ue()});var ue=reactExports.useCallback(function(){var Ae=ce.current,pe=oe.current,ve=Ae||(pe?pe instanceof Element?pe:pe.current:null);ne.current&&ne.current.element===ve&&ne.current.subscriber===K||(ne.current&&ne.current.cleanup&&ne.current.cleanup(),ne.current={element:ve,subscriber:K,cleanup:ve?K(ve):void 0})},[K]);return reactExports.useEffect(function(){return function(){ne.current&&ne.current.cleanup&&(ne.current.cleanup(),ne.current=null)}},[]),reactExports.useCallback(function(Ae){ce.current=Ae,ue()},[ue])}function extractSize(K,J,ne){return K[J]?K[J][0]?K[J][0][ne]:K[J][ne]:J==="contentBoxSize"?K.contentRect[ne==="inlineSize"?"width":"height"]:void 0}function useResizeObserver(K){K===void 0&&(K={});var J=K.onResize,ne=reactExports.useRef(void 0);ne.current=J;var oe=K.round||Math.round,ce=reactExports.useRef(),ue=reactExports.useState({width:void 0,height:void 0}),Ae=ue[0],pe=ue[1],ve=reactExports.useRef(!1);reactExports.useEffect(function(){return ve.current=!1,function(){ve.current=!0}},[]);var me=reactExports.useRef({width:void 0,height:void 0}),ge=useResolvedElement(reactExports.useCallback(function(ye){return(!ce.current||ce.current.box!==K.box||ce.current.round!==oe)&&(ce.current={box:K.box,round:oe,instance:new ResizeObserver(function(xe){var _e=xe[0],$e=K.box==="border-box"?"borderBoxSize":K.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",Ie=extractSize(_e,$e,"inlineSize"),Fe=extractSize(_e,$e,"blockSize"),ke=Ie?oe(Ie):void 0,je=Fe?oe(Fe):void 0;if(me.current.width!==ke||me.current.height!==je){var We={width:ke,height:je};me.current.width=ke,me.current.height=je,ne.current?ne.current(We):ve.current||pe(We)}})}),ce.current.instance.observe(ye,{box:K.box}),function(){ce.current&&ce.current.instance.unobserve(ye)}},[K.box,oe]),K.ref);return reactExports.useMemo(function(){return{ref:ge,width:Ae.width,height:Ae.height}},[ge,Ae.width,Ae.height])}const container$L="_container_1u1ol_1",hidden$2="_hidden_1u1ol_9",styles$1F={container:container$L,hidden:hidden$2},VerticalScroll=reactExports.memo(({isHidden:K,setHidden:J,totalHeight:ne,scrollOffset:oe,scrollToOffset:ce})=>{const ue=reactExports.useRef(null),{ref:Ae,height:pe=0}=useResizeObserver(),ve=useMergeRefs([Ae,ue]);reactExports.useEffect(()=>{!ue.current||ue.current.scrollTop===oe||ue.current.scrollTo({top:oe})},[oe]),reactExports.useEffect(()=>{J==null||J(ne<pe)},[ne,pe]);const me=ge=>{const ye=ge.currentTarget.scrollTop;ye!==oe&&ce(ye)};return jsxRuntimeExports.jsx("div",{ref:ve,className:cx(styles$1F.container,{[styles$1F.hidden]:K}),onScroll:me,children:jsxRuntimeExports.jsx("div",{style:{height:ne},className:styles$1F.container})})});VerticalScroll.displayName="VerticalScroll";const base64ToUint8Array=K=>{const J=atob(K),ne=J.length,oe=new Uint8Array(ne);for(let ce=0;ce<ne;ce++)oe[ce]=J.charCodeAt(ce);return oe},downloadZipFromObject=(K,J)=>{const ne=base64ToUint8Array(K),oe=new Blob([ne],{type:"application/zip"}),ce=URL.createObjectURL(oe),ue=document.createElement("a");ue.href=ce,ue.download=J||"",document.body.appendChild(ue),ue.click(),ue.remove(),URL.revokeObjectURL(ce)},DownloadLogsButton=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectActiveDataset$1),ne=useSelector$1(selectUser),oe=()=>{const ce={Type:HandlerRunTypeEnum.UI_SUPPORT_UTIL,Method:"DownloadLogs",Keys:[],Dataset:J,userName:ne==null?void 0:ne.username};handlerApi.handlerRun(ce).then(ue=>{ue.forEach(Ae=>{const pe=Ae.Result;pe.FileBytes&&downloadZipFromObject(pe.FileBytes,pe.Name)})}).catch(toast.error)};return jsxRuntimeExports.jsx(mf,{title:K("header.downloadLogs"),children:jsxRuntimeExports.jsx(rl,{"data-tid":"download-logs-button",type:"secondary",variant:"ghost",onClick:oe,iconBefore:jsxRuntimeExports.jsx(gD,{size:"M"})})})},dropdown$1="_dropdown_hhp0s_1",allItem="_allItem_hhp0s_5",dropdownItem$2="_dropdownItem_hhp0s_14",title$5="_title_hhp0s_22",filterIcon="_filterIcon_hhp0s_27",styles$1E={dropdown:dropdown$1,allItem,dropdownItem:dropdownItem$2,title:title$5,filterIcon},LogsFilter=({onSetActiveFilters:K,activeFilters:J,initLogsFilters:ne=[],logsFiltersListItems:oe=[]})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(!1),pe=J.length===(ne==null?void 0:ne.length),ve=Ie=>J.includes(Ie),me=Ie=>{K==null||K(Ie)},ge=Ie=>{const Fe=J.includes(Ie)?J.filter(ke=>ke!==Ie):[...J,Ie];me(Fe)},ye=!!J.length&&J.length!==(oe==null?void 0:oe.length),xe=()=>{me((J==null?void 0:J.length)===(oe==null?void 0:oe.length)?[]:ne)},_e=()=>jsxRuntimeExports.jsx(rl,{testid:"logs-filter-icon",variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(zB,{})}),$e=()=>me(ne);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Y_,{open:ue,onOpenChange:Ae,className:styles$1E.dropdown,menu:{items:[{key:ce("logsFilter.all"),label:jsxRuntimeExports.jsxs("div",{"aria-hidden":!0,className:cx(styles$1E.dropdownItem,styles$1E.allItem),onClick:Ie=>Ie.stopPropagation(),children:[jsxRuntimeExports.jsx(pF,{intermediate:ye,value:pe,onClick:xe}),jsxRuntimeExports.jsx("span",{className:styles$1E.title,children:ce("logsFilter.all")})]})},...oe.map(Ie=>({key:Ie.title,label:jsxRuntimeExports.jsxs("div",{"aria-hidden":!0,className:styles$1E.dropdownItem,onClick:Fe=>Fe.stopPropagation(),children:[jsxRuntimeExports.jsx(pF,{value:ve(Ie.value),onChange:()=>ge(Ie.value)}),jsxRuntimeExports.jsx("span",{className:styles$1E.title,children:ce(Ie.title)})]})}))]},children:jsxRuntimeExports.jsx("div",{"aria-hidden":!0,className:styles$1E.filterIcon,onClick:()=>Ae(!ue),children:pe?_e():jsxRuntimeExports.jsx(vF,{size:"sm",color:"info",children:_e()})})}),!pe&&jsxRuntimeExports.jsx(mf,{title:ce("logsFilter.clear"),children:jsxRuntimeExports.jsx(rl,{testid:"logs-clear-filter-icon",variant:"ghost",type:"danger",iconBefore:jsxRuntimeExports.jsx(WB,{}),onClick:$e})})]})},container$K="_container_1559l_1",styles$1D={container:container$K},LogsActions=({onClearLogsList:K,onSetActiveFilters:J,activeFilters:ne,initLogsFilters:oe,logsFiltersListItems:ce,searchValue:ue,onChangeSearchValue:Ae,isFilter:pe=!0})=>{const{t:ve}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:styles$1D.container,children:[jsxRuntimeExports.jsx(Ml,{allowClear:!0,variant:"outlined",prefix:jsxRuntimeExports.jsx(gf$1,{}),placeholder:ve("logs.search"),className:styles$1D.searchInput,value:ue,onChange:Ae}),pe&&jsxRuntimeExports.jsx(LogsFilter,{onSetActiveFilters:J,activeFilters:ne,initLogsFilters:oe,logsFiltersListItems:ce}),!env$1.isSimplifiedBuild&&jsxRuntimeExports.jsx(DownloadLogsButton,{}),jsxRuntimeExports.jsx(mf,{title:ve("logs.eraseLogs"),placement:"topLeft",children:jsxRuntimeExports.jsx(rl,{testid:"erase-logs-button",variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(mB,{}),onClick:K})})]})},getStatusIcon=K=>{switch(K){case LogsLevelEnum.WARNING:return jsxRuntimeExports.jsx(W5,{});case LogsLevelEnum.ERROR:case LogsLevelEnum.CRITICAL:return jsxRuntimeExports.jsx(R_,{});default:return""}},getLogsDateFormat=K=>`${DateFormatUtility.create(K).format(DateFormatEnum.DATE_BULLET_TIME)}`,getLogsTooltipDateFormat=K=>`${DateFormatUtility.create(K).format(DateFormatEnum.DATE)} ${DateFormatUtility.create(K).format(DateFormatEnum.TIME)}`,LogsFlatViewItem=({listItem:K})=>{const{t:J}=useTranslation(),{Level:ne,ReadableTime:oe,Message:ce,RecordTypeName:ue,HandlerName:Ae,TaskRunId:pe,RecordKey:ve}=K,me=(ye,xe)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{children:[ye,": "]}),xe]}),ge=()=>{const ye=ue??ve??Ae??pe;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"logs-flat-view-item__tooltip-date",children:getLogsTooltipDateFormat(oe)}),ce,ye&&jsxRuntimeExports.jsxs("div",{className:"logs-flat-view-item__tooltip-info",children:[jsxRuntimeExports.jsx("br",{}),ue&&me(J("logs.type"),ue),ve&&me(J("logs.key"),ve),Ae&&me(J("logs.handler"),Ae),pe&&me(J("logs.taskId"),pe)]})]})};return jsxRuntimeExports.jsx(mf,{title:ge(),className:"logs-flat-view-item__tooltip",children:jsxRuntimeExports.jsxs("div",{className:cx("logs-flat-view-item",{"logs-flat-view-item__status--warning":ne===LogsLevelEnum.WARNING,"logs-flat-view-item__status--error":ne===LogsLevelEnum.ERROR||ne===LogsLevelEnum.CRITICAL}),children:[jsxRuntimeExports.jsxs("div",{className:"logs-flat-view-item__info",children:[getStatusIcon(ne),jsxRuntimeExports.jsx("div",{className:"logs-flat-view-item__message",children:ce})]}),jsxRuntimeExports.jsx("div",{className:"logs-flat-view-item__timestamp",children:getLogsDateFormat(oe)})]})})},ITEM_HEIGHT=66,LogsFlatViewList=({logsListData:K,onClearLogsList:J,filtersArr:ne,initLogsFilters:oe,onChangeFilters:ce,activeFilters:ue=[],isFilter:Ae=!0})=>{const[pe,ve]=reactExports.useState([]),[me,ge]=reactExports.useState(""),ye=reactExports.useRef(null),xe=useVirtualizer({count:pe.length,getScrollElement:()=>ye.current,estimateSize:()=>ITEM_HEIGHT,paddingEnd:1});reactExports.useEffect(()=>{const Fe=K.filter(ke=>{if(!ke)return;let je=ke.Message.toLowerCase().includes(me.toLowerCase());return Ae&&je&&(je=ue==null?void 0:ue.includes(ke.Level)),je});return ve(Fe),()=>xe.scrollToOffset(0)},[me,ue,K]);const _e=()=>{J(),ve([])},$e=Fe=>{const ke=Fe.deltaY;xe.scrollToOffset(Number(xe.scrollOffset)+ke)},Ie=xe.getTotalSize();return jsxRuntimeExports.jsxs("div",{className:"logs-flat-view",children:[jsxRuntimeExports.jsx(LogsActions,{onClearLogsList:_e,onSetActiveFilters:ce,activeFilters:ue,initLogsFilters:oe,logsFiltersListItems:ne,searchValue:me,onChangeSearchValue:ge,isFilter:Ae}),jsxRuntimeExports.jsxs("div",{className:"logs-flat-view__container",children:[jsxRuntimeExports.jsx("div",{ref:ye,className:"logs-flat-view__container-list",onWheel:$e,children:jsxRuntimeExports.jsx("div",{className:"logs-flat-view__list",style:{height:Math.round(Ie)},children:xe.getVirtualItems().map(Fe=>{const ke=pe[Fe.index];return jsxRuntimeExports.jsx("div",{className:"logs-flat-view__list-item",style:{transform:`translateY(${Fe.start}px)`},children:jsxRuntimeExports.jsx(LogsFlatViewItem,{listItem:ke},Fe.index)},Fe.key)})})}),jsxRuntimeExports.jsx(VerticalScroll,{isHidden:Ie===0,scrollOffset:Number(xe.scrollOffset),totalHeight:Ie,scrollToOffset:xe.scrollToOffset})]})]})},getHandlerRecordName=(K,J)=>J&&K?`${J} > ${K}`:J||K||"",LogsHandlersViewItem=reactExports.memo(({handlerData:K,recordName:J,handlerStatus:ne})=>{const{t:oe}=useTranslation(),[ce,ue]=reactExports.useState(!1),Ae=getHandlerRecordName(K[0].HandlerName,J),pe=K.length>1,ve=()=>ue(ye=>!ye),me=(ye,xe,_e,$e)=>{const{Level:Ie,HandlerName:Fe,Message:ke}=ye;return _e&&ne===RunHandlerStatusCodeEnum.Completed?jsxRuntimeExports.jsx("div",{className:cx({"logs-handlers-view-item__success-status":xe}),children:ke||oe("logs.completedHandler",{handlerName:Fe})}):Ie===LogsLevelEnum.ERROR?jsxRuntimeExports.jsx("div",{className:cx({"logs-handlers-view-item__error-status":xe}),children:ke||oe("logs.failedHandler")}):jsxRuntimeExports.jsx("div",{className:cx("logs-handlers-view-item__info-status",{"logs-handlers-view-item__loading-status":!ce&&!$e}),children:ke})},ge=(ye,xe)=>{const{Level:_e,ReadableTime:$e}=ye,Ie=ne===RunHandlerStatusCodeEnum.Failed&&_e!==LogsLevelEnum.INFO,Fe=ne===RunHandlerStatusCodeEnum.Completed&&xe,ke=!ce&&!Ie&&!Fe;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"logs-handlers-view-item__message",children:[Ie&&jsxRuntimeExports.jsx(R_,{className:"logs-handlers-view-item__error-status"}),Fe&&jsxRuntimeExports.jsx(j_,{className:"logs-handlers-view-item__success-status"}),ke&&jsxRuntimeExports.jsx(D_,{className:"logs-handlers-view-item__spinner"}),jsxRuntimeExports.jsx("div",{className:"logs-handlers-view-item__status",children:jsxRuntimeExports.jsx(mf,{title:me(ye,!1,!1,!0),children:me(ye,!0,xe)})})]}),jsxRuntimeExports.jsx("div",{className:"logs-handlers-view-item__timestamp",children:getLogsDateFormat($e)})]})};return jsxRuntimeExports.jsxs("div",{className:cx("logs-handlers-view-item",{"logs-handlers-view-item__expanded":ce}),children:[jsxRuntimeExports.jsxs("div",{className:"logs-handlers-view-item__header",children:[jsxRuntimeExports.jsxs("div",{className:"logs-handlers-view-item__title",children:[jsxRuntimeExports.jsx(nD,{className:"logs-handlers-view-item__icon"}),Ae]}),pe&&jsxRuntimeExports.jsx(rl,{size:"sm",variant:"ghost",type:"secondary",iconBefore:ce?jsxRuntimeExports.jsx(Ck,{}):jsxRuntimeExports.jsx(Rp,{}),onClick:ve})]}),ce?K.map((ye,xe)=>{const _e=xe===K.length-1;return jsxRuntimeExports.jsx("div",{className:"logs-handlers-view-item__expanded-item",children:ge(ye,_e)},ye.Timestamp)}):ge(K[K.length-1],!0)]})});LogsHandlersViewItem.displayName="LogsHandlersViewItem";const initLogsHandlersViewFilters=[RunHandlerStatusCodeEnum.Submitted,RunHandlerStatusCodeEnum.Running,RunHandlerStatusCodeEnum.Completed,RunHandlerStatusCodeEnum.Failed],logsHandlersViewFiltersList=[{id:1,title:"logsFilter.submitted",value:RunHandlerStatusCodeEnum.Submitted},{id:2,title:"logsFilter.running",value:RunHandlerStatusCodeEnum.Running},{id:3,title:"logsFilter.completed",value:RunHandlerStatusCodeEnum.Completed},{id:4,title:"logsFilter.failed",value:RunHandlerStatusCodeEnum.Failed}],listContent="_listContent_2uvo3_1",styles$1C={listContent},LogsHandlersViewList=({handlersListData:K,onClearHandlersData:J,filtersArr:ne,initLogsFilters:oe,onChangeFilters:ce,activeFilters:ue=[]})=>{const[Ae,pe]=reactExports.useState([]),[ve,me]=reactExports.useState("");return reactExports.useEffect(()=>{const ge=K.filter(ye=>isDefined$2(ye)&&getHandlerRecordName(ye.HandlerName,ye.RecordKey).toLowerCase().includes(ve.toLowerCase())&&ue.includes(ye.Status)&&getLogsDateFormat(ye.ReadableTime||"")!=="Invalid Date");pe(ge)},[ve,ue,K]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LogsActions,{onClearLogsList:J,onSetActiveFilters:ce,activeFilters:ue,initLogsFilters:oe,logsFiltersListItems:logsHandlersViewFiltersList,searchValue:ve,onChangeSearchValue:me}),jsxRuntimeExports.jsx("div",{className:styles$1C.listContent,children:Ae.map(ge=>jsxRuntimeExports.jsx(LogsHandlersViewItem,{handlerData:ge.Logs,recordName:ge.RecordKey,handlerStatus:ge.Status},ge.TaskRunId))})]})},initLogsFlatViewFilters=[LogsLevelEnum.DEBUG,LogsLevelEnum.INFO,LogsLevelEnum.WARNING,LogsLevelEnum.ERROR,LogsLevelEnum.CRITICAL],logsFlatViewFiltersList=[{id:1,title:"logsFilter.debug",value:LogsLevelEnum.DEBUG},{id:2,title:"logsFilter.info",value:LogsLevelEnum.INFO},{id:3,title:"logsFilter.warning",value:LogsLevelEnum.WARNING},{id:4,title:"logsFilter.error",value:LogsLevelEnum.ERROR},{id:5,title:"logsFilter.critical",value:LogsLevelEnum.CRITICAL}];LogsLevelEnum.DEBUG,LogsLevelEnum.WARNING,LogsLevelEnum.ERROR,LogsLevelEnum.CRITICAL;const LogsList=({activeListView:K,logsListData:J,handlersListData:ne,errorLogsListData:oe,handlersFilters:ce,setHandlersFilters:ue,logsFilters:Ae,setLogsFilters:pe,handleClearLogs:ve})=>{switch(K){case LogsListViewEnum.LOGS:return jsxRuntimeExports.jsx(LogsFlatViewList,{logsListData:J,onClearLogsList:ve,filtersArr:logsFlatViewFiltersList,initLogsFilters:initLogsFlatViewFilters,onChangeFilters:pe,activeFilters:Ae});case LogsListViewEnum.HANDLERS:return jsxRuntimeExports.jsx(LogsHandlersViewList,{filtersArr:logsHandlersViewFiltersList,initLogsFilters:initLogsHandlersViewFilters,onChangeFilters:ue,activeFilters:ce,handlersListData:ne,onClearHandlersData:ve});case LogsListViewEnum.ERRORS:return jsxRuntimeExports.jsx(LogsFlatViewList,{isFilter:!1,logsListData:oe,onClearLogsList:ve});default:return null}},getLogsHeaderViewIcons=K=>[{id:"logsRunIcon",icon:jsxRuntimeExports.jsx(nD,{}),label:"logs.handlers",viewStatus:LogsListViewEnum.HANDLERS},{id:"logsSystemIcon",icon:jsxRuntimeExports.jsx(M_,{}),label:"logs.errors",viewStatus:LogsListViewEnum.ERRORS,disabled:K.length===0},{id:"logsBurgerLargeIcon",icon:jsxRuntimeExports.jsx(rA,{}),label:"logs.all",viewStatus:LogsListViewEnum.LOGS}],useLogsPanel=()=>{const K="isLogsPanel",[J,ne]=reactExports.useState(externalStorage.getIsLogsPanel());reactExports.useEffect(()=>(window.addEventListener(K,oe),()=>{window.removeEventListener(K,oe)}),[]);const oe=()=>{ne(externalStorage.getIsLogsPanel())};return{isOpen:J,togglePanel:ue=>{externalStorage.setIsLogsPanel(ue),window.dispatchEvent(new Event(K))}}},Logs=()=>{const{togglePanel:K}=useLogsPanel(),{eventsBatch:J,setEventsBatch:ne}=useSSEContext(),[oe,ce]=reactExports.useState(LogsListViewEnum.HANDLERS),[ue,Ae]=reactExports.useState([]),[pe,ve]=reactExports.useState([]),[me,ge]=reactExports.useState([]),[ye,xe]=reactExports.useState(initLogsHandlersViewFilters),[_e,$e]=reactExports.useState(initLogsFlatViewFilters),Ie=reactExports.useMemo(()=>structuredClone(J),[J]),Fe=reactExports.useRef([]),ke=Ne=>Ne.map(Ue=>{const Ge=structuredClone(Ue),Ye=Fe.current.find(Qe=>Qe.TaskRunId===Ue.TaskRunId);return Ye!=null&&Ye.ReadableTime?{...Ue,ReadableTime:Ye.ReadableTime}:Ge}),je={Type:HandlerRunTypeEnum.UI_LOG_UTIL},We=()=>{handlerApi.handlerRun({...je,Method:"GetErrorLogs"}).then(Ne=>{if(!Ne.length)return;const Ue=Ne.flatMap(Ye=>Ye.Result).reverse(),Ge=ke(Ue);ve(Ge)})},ze=()=>{handlerApi.handlerRun({...je,Method:"GetLogsByTask"}).then(Ne=>{if(!Ne.length)return;const Ue=Ne.flatMap(Ye=>Ye.Result).reverse(),Ge=ke(Ue);ge(Ge)})},Xe=()=>{handlerApi.handlerRun({...je,Method:"GetFlatLogs"}).then(Ne=>{if(!Ne.length)return;const Ue=Ne.flatMap(Ge=>Ge.Result).reverse();Fe.current=Ue,Ae(Ue)}),setTimeout(()=>We(),0),setTimeout(()=>ze(),0)};reactExports.useEffect(()=>{Xe()},[]),reactExports.useEffect(()=>{Ie.length&&(Ae(Ne=>[...Je(Ne,Ie),...ue]),ge(Ne=>tt(Ne,Ie)),ve(Ne=>[...st(Je(Ne,Ie)),...pe]))},[Ie]);const Je=(Ne,Ue)=>{let Ge=[];for(const Ye of Ue){const{EventKind:Qe,Timestamp:Te}=Ye;Qe===SSEEventKindEnum.LOG&&!(Ne!=null&&Ne.find(rt=>(rt==null?void 0:rt.Timestamp)===Te))&&(Ge=[Ye,...Ge])}return Ge},nt=(Ne,Ue)=>Ne.find(Ge=>Ge.Timestamp===Ue),et=Ne=>Ne.map((Ue,Ge)=>Ge===Ne.length-1?{...Ue,Level:LogsLevelEnum.ERROR}:Ue),tt=(Ne,Ue)=>{let Ge=Ne!=null&&Ne.length?[...Ne]:[];return Ue.forEach(Ye=>{const{Status:Qe,ReadableTime:Te="",HandlerName:Ke,TaskRunId:rt,RecordTypeName:it,EventKind:at,RecordKey:lt,Message:ct,Timestamp:ot}=Ye,ft=at===SSEEventKindEnum.LOG,dt=at===SSEEventKindEnum.TASK_FINISHED;if(rt&&(ft||dt)){const mt={ReadableTime:Te,HandlerName:Ke,TaskRunId:rt,Message:ct,Timestamp:ot};if(Ge.find(wt=>(wt==null?void 0:wt.TaskRunId)===rt))Ge.some((wt,Et)=>{const{Logs:Ot,TaskRunId:Rt}=wt;if(Rt===rt){if(nt(Ot,ot))return wt;if(dt)return Ge[Et]={...wt,Status:Qe||RunHandlerStatusCodeEnum.Failed,Logs:et(Ot)},!0;if(ft)return Ge[Et]={...wt,Logs:[...Ot,{...mt,Level:Qe===RunHandlerStatusCodeEnum.Failed?LogsLevelEnum.ERROR:LogsLevelEnum.INFO}]},!0}});else return Ge=[{TaskRunId:rt,RecordTypeName:it,HandlerName:Ke,Status:RunHandlerStatusCodeEnum.Failed,ReadableTime:Te,RecordKey:lt,Logs:[{...mt,Level:LogsLevelEnum.INFO}]},...Ge],!0}return!1}),Ge},st=Ne=>Ne.filter(Ue=>Ue.Level===LogsLevelEnum.ERROR),qe=Ne=>ce(Ne),Se=async()=>{try{await handlerApi.handlerRun({Type:HandlerRunTypeEnum.UI_LOG_UTIL,Method:"ClearLogs"}),Ae([]),ve([]),ge([]),ne([])}catch(Ne){console.error(Ne),Ae([]),ve([]),ge([]),ne([])}},Re=Ne=>xe(Ne),Be=Ne=>$e(Ne);return jsxRuntimeExports.jsxs("div",{className:"logs-panel",children:[jsxRuntimeExports.jsxs("div",{className:"logs-panel__header",children:[jsxRuntimeExports.jsx("div",{className:"logs-panel__header-title",children:t$5("logs.title")}),jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(_c,{}),onClick:()=>K(!1)})]}),jsxRuntimeExports.jsxs("div",{className:"logs-panel__content",children:[jsxRuntimeExports.jsx("div",{className:"logs-panel__tabs",children:getLogsHeaderViewIcons(pe).map(({id:Ne,icon:Ue,label:Ge,viewStatus:Ye,disabled:Qe})=>jsxRuntimeExports.jsxs("div",{"aria-hidden":"true",className:cx("logs-panel__tab",{"logs-panel__tab-active":oe===Ye,"logs-panel__tab-disabled":Qe}),onClick:()=>!Qe&&qe(Ye),children:[Ue,jsxRuntimeExports.jsx("div",{children:t$5(Ge)})]},Ne))}),jsxRuntimeExports.jsx(LogsList,{activeListView:oe,logsListData:ue,handlersListData:me,errorLogsListData:pe,handlersFilters:ye,setHandlersFilters:Re,logsFilters:_e,setLogsFilters:Be,handleClearLogs:Se})]})]})},getNoGridDataTitle=(K,J)=>{switch(K){case LoadingStatusesEnum.ERROR:return J;case LoadingStatusesEnum.SUCCESS:return t$5("noData.inTheReport");default:return""}},isInteractiveDashboard=K=>{var ne,oe;return!!((oe=(ne=K.Implement)==null?void 0:ne.Handlers)==null?void 0:oe.find(ce=>ce.Name==="SendPrompt"))},selectDataset=K=>K.DatasetDataSliceReducer.datasetData,selectMetaData=K=>K.GridTabsDataSliceReducer.tabsData.metaData;var GridModeEnum=(K=>(K.DEFAULT="DEFAULT",K.MAIN="MAIN",K.EDITOR="EDITOR",K.READ_ONLY="READ ONLY",K))(GridModeEnum||{}),GridColumWidth=(K=>(K[K.MIN_WIDTH=50]="MIN_WIDTH",K[K.DEFAULT_WIDTH=150]="DEFAULT_WIDTH",K[K.MAX_WIDTH=400]="MAX_WIDTH",K))(GridColumWidth||{}),BoolEnum=(K=>(K.YES="Y",K.NO="N",K))(BoolEnum||{}),ColumnNameType=(K=>(K.HANDLER_STATUS="handlerStatus",K.FILTER="filter",K))(ColumnNameType||{}),columnIdEnum=(K=>(K.filter="filter",K.handlerStatus="handlerStatus",K))(columnIdEnum||{}),CellRowsCount=(K=>(K[K.ONE=1]="ONE",K[K.FIVE=5]="FIVE",K[K.TWENTY=20]="TWENTY",K[K.HUNDRED=100]="HUNDRED",K))(CellRowsCount||{});const CELL_HEIGHT_ROWS_COUNT=[1,5,20,100],rowsCountArr=CELL_HEIGHT_ROWS_COUNT.map(K=>({label:String(K),value:String(K)})),useRequest=(K,J={})=>{const ne=reactExports.useRef(!0),[oe,ce]=reactExports.useState(LoadingStatusesEnum.INITIAL),[ue,Ae]=reactExports.useState(!1),[pe,ve]=reactExports.useState(J.initState??null),[me,ge]=reactExports.useState(null),ye=async xe=>{var _e,$e;try{ce(LoadingStatusesEnum.LOADING),ge(null);const Ie=await K(xe);return ne.current&&(Ae(!0),ve(Ie),ce(LoadingStatusesEnum.SUCCESS),(_e=J.onSuccess)==null||_e.call(J,Ie)),Ie}catch(Ie){throw($e=J.onError)==null||$e.call(J,Ie),ge(Ie),ce(LoadingStatusesEnum.ERROR),Ie}};return reactExports.useEffect(()=>(J.autorun&&ye(J==null?void 0:J.args),()=>{ne.current=!1}),[]),{fetch:ye,isInitiated:oe===LoadingStatusesEnum.INITIAL,isLoading:oe===LoadingStatusesEnum.LOADING,status:oe,state:pe,hasInitFetch:ue,error:me,hasError:!!me}};var AppContextOpenTabParamsCase=(K=>(K.ChatAbout="ChatAbout",K))(AppContextOpenTabParamsCase||{});const useEditorRequest=()=>{const{t:K}=useTranslation(),J=useRequest(storageApi.getRecord),ne=useRequest(storageApi.saveEntity),oe=useRequest(schemaApi.getType),ce=useSelector$1(selectActiveDataset$1),ue=async({data:ve,recordType:me,isInsert:ge=!1,isToast:ye=!0})=>{try{const xe=await ne.fetch({dataset:ce,data:[{_t:me,...ve}],isInsert:ge});return ye&&toast.success(K("editor.entitySavedSuccessfully")),xe}catch(xe){throw ye&&toast.error(xe),xe}},Ae=async ve=>{try{return await oe.fetch(ve)}catch(me){throw toast.error(me),me}};return{getRecord:{...J,fetch:async ve=>{try{return await J.fetch(ve)}catch(me){throw toast.error(me),me}}},saveEntity:{...ne,fetch:ue},getSchema:{...oe,fetch:Ae}}};function createMainGridService(){const K=new Map;return{register(J){return K.set(J.name,J),this},emit(J){var ne;return K.has(J)&&((ne=K.get(J))==null||ne()),this},clear(){return K.clear(),this}}}const mainGridService=createMainGridService();function restoreLayoutService(){const K=new Map,J=new Map;return{subscribe(ne,oe){return K.has(ne)||K.set(ne,oe),this},unsubscribe(ne){return K.has(ne)&&K.delete(ne),this},emit(){return K.forEach(ne=>{ne()}),this},subscribeHeader(ne,oe){return J.has(ne)||J.set(ne,oe),this},unsubscribeHeader(ne){return J.has(ne)&&J.delete(ne),this},emitHeader(ne,oe){var ce;return J.has(ne)&&((ce=J.get(ne))==null||ce(oe)),this}}}const layoutService=restoreLayoutService(),AppContextWrapper=reactExports.createContext(null),initState$1={isEditorDataChanged:!1,activeEditorTab:EditorTabsEnum.EDITOR,resetDndContextMethodRef:{current:null},cacheTabData:null,showLineHider:!0,isLayoutBtnsDisabled:!1,resetActiveLayoutBtnMethodRef:{current:null},gridControlsRef:{current:null},layoutService:{},mainGridService:{},isReadOnly:!1,isModalOpen:!1,isErrorDataChanged:!1,editorDataChanged:null,appContextRef:null,recordsData:null,defaultLayoutDirection:""},AppContext$1=({children:K})=>{const J=externalStorage.getDefaultLayoutVersion(),ne=reactExports.useRef(initState$1.isEditorDataChanged),[oe,ce]=reactExports.useState(null),{saveEntity:ue}=useEditorRequest(),[Ae,pe]=reactExports.useState(initState$1.activeEditorTab),[ve,me]=reactExports.useState(initState$1.cacheTabData),[ge,ye]=reactExports.useState(""),[xe,_e]=reactExports.useState(""),$e=reactExports.useRef(initState$1.resetDndContextMethodRef.current),[Ie,Fe]=reactExports.useState(initState$1.isLayoutBtnsDisabled),[ke,je]=reactExports.useState(!1),[We,ze]=reactExports.useState(!1),[Xe,Je]=reactExports.useState(!0),[nt,et]=reactExports.useState({}),[tt,st]=reactExports.useState(initState$1.isReadOnly),qe=reactExports.useRef(!1),Se=reactExports.useRef(initState$1.resetActiveLayoutBtnMethodRef.current),Re=reactExports.useRef(null),Be=reactExports.useRef(null),Ne=Et=>{Be.current=Et},Ue=reactExports.useRef(initState$1.gridControlsRef.current),Ge=Et=>{Fe(Et)},Ye=({query:Et,entityData:Ot,entitySchema:Rt,type:gt})=>{if(!Et||!Ot||!Rt||!gt)return;const $t={query:Et,entityData:Ot,entitySchema:Rt};me(pt=>pt!=null&&pt[gt]?(pt[gt]=$t,{...pt}):{...pt,[gt]:$t})},Qe=Et=>{Et&&(ve!=null&&ve[Et])&&(delete ve[Et],me(ve))},Te=(Et,Ot)=>{et(Rt=>({...Rt,[Et]:Ot}))},Ke=(Et,Ot,Rt)=>{Ot(nt[Et])},rt=Et=>{et(Ot=>(delete Ot[Et],Ot))},it=(Et,Ot,Rt,gt)=>{var pt;if(!ne.current){Et();return}Rt&&je(!0);const $t=(pt=Re==null?void 0:Re.current)==null?void 0:pt.validateEditor();Ho.warning({title:instance.t("unsavedChangeModal.title"),content:instance.t("unsavedChangeModal.content"),onOk:vt=>{oe&&ue.fetch({data:oe,recordType:Ot??""}).then(()=>{gt()}),Et(),je(!1),ne.current=!1,ce(null),vt()},testId:"leave-editor",onCancel:vt=>{je(!1),mainGridService.emit("clearSelection"),vt()},okProps:{disabled:$t}})},at=Et=>{if(!ne.current){Et();return}Ho.warning({title:instance.t("unsavedChangeInfoModal.title"),content:instance.t("unsavedChangeInfoModal.content"),cancelText:null,testId:"unsaved-changes"})},lt=Et=>{ne.current=Et},ct=Et=>{ce(Et)},ot=Et=>{qe.current=Et,ze(Et)},ft=Et=>pe(Et),dt=Et=>Je(Et),mt=()=>{var Et;return(Et=$e.current)==null?void 0:Et.callBack()},kt=Et=>{st(Et)},wt=reactExports.useMemo(()=>({state:{isEditorDataChanged:ne.current,activeEditorTab:Ae,cacheTabData:ve,showLineHider:Xe,resetDndContextMethodRef:$e,successMessage:ge,updatedRecordId:xe,isLayoutBtnsDisabled:Ie,resetActiveLayoutBtnMethodRef:Se,gridControlsRef:Ue,layoutService,mainGridService,isReadOnly:tt,isModalOpen:ke,isErrorDataChanged:We,editorDataChanged:oe,appContextRef:Re,recordsData:Be.current,defaultLayoutDirection:J},action:{setIsEditorDataChangedAction:lt,setActiveEditorTabAction:ft,setCacheQueryDataAction:Ye,clearCacheQueryByTypeAction:Qe,setShowLineHiderAction:dt,onConfirmLeaveEditor:it,checkUnsavedEditor:at,callResetDndContextMethod:mt,setSuccessMessage:ye,setUpdatedRecordId:_e,setLayoutBtnsDisabledStatus:Ge,setChangedDataEditorAction:ct,updateIsReadOnly:kt,setIsErrorDataChangedAction:ot,resetDndContextMethodRef:$e,updateRecordsData:Ne},openTabParams:{chatAbout:{setParams:Et=>Te(AppContextOpenTabParamsCase.ChatAbout,Et),getParams:Et=>Ke(AppContextOpenTabParamsCase.ChatAbout,Et),clearParams:()=>rt(AppContextOpenTabParamsCase.ChatAbout)}}}),[ne,Ae,ve,Xe,$e,ge,xe,Ie,Se,Ue,layoutService,mainGridService,tt,ke,We,oe,nt,Re,Be.current]);return jsxRuntimeExports.jsx(AppContextWrapper.Provider,{value:wt,children:K})},useAppContext=()=>{const K=reactExports.useContext(AppContextWrapper);return{state:(K==null?void 0:K.state)||{},action:(K==null?void 0:K.action)||{},openTabParams:(K==null?void 0:K.openTabParams)||{}}},DndContextWrapper=reactExports.createContext(null),initialConfig=returnDefaultConfig([]),initDndContextState={config:initialConfig,configBackup:initialConfig,viewers:[],pinnedHandlers:[],isTypeReadOnly:!1,maximizedTabId:null,layoutDirection:"",initiallyReceivedLayout:!0,blockDnd:!1,leftMouseBtnClicked:!1,isDragging:!1,tabsZone:null,initialTabsZone:null,dropZone:null,targetStackRef:null,draggingLabel:null,startTabIndex:0,endTabIndex:0,selectedGridRow:{key:"",type:""},dropMarker:{current:null},dropPreview:{current:null},managerRef:{current:null},isHorizontalLayoutDirection:!1,headersRef:{current:null},rowsData:[],selectedGridRowKey:"",cellHeight:null,userGuide:{},isRowBorder:externalStorage.getIsRowBorder(),droppableElRef:{current:null},draggingTabRef:{current:null},draggingTabOffsetWidthRef:{current:0},mouseCoord:{x:0,y:0},isWithinTabs:!0,placeholder:null,shouldInsertPlaceholder:!0,isViewersDataLoading:!0,hideEditor:void 0,isLayoutBtnsDisabled:!1,mouseUpHandlerRef:{current:null},isTabExistInStackRef:{current:null},isLayoutRestored:!1,stacksTabsScrollPosition:{current:{}},initiallyHiddenColumns:[],useCache:!1,shouldIgroreHideEditor:!1,pageSize:null,pageIndex:null,toolbarHandler:{},canceledHandlerIds:[],recordStatuses:{},selectRowByKeyWithDelay:{current:null},executedHandlersInfoByRecord:{},lastHandlerStatus:{},newRunHandlers:{},recordTypeState:null,initialTabsScroll:!0,restoreLayoutRef:{current:null},lastRunningTaskRunId:"",recordsTaskRunIds:{},activeTaskRunIds:[],handlers:[],editorHandlers:[]},DndContext=({activeTabId:K,children:J})=>{const{fetch:ne,isLoading:oe}=useRequest(handlerApi.handlerRun),ce=useSelector$1(selectMetaData),ue=useSelector$1(selectUser),Ae=useSelector$1(selectActiveDataset$1),{state:pe}=useAppContext(),ve=reactExports.useRef(),[me,ge]=reactExports.useState([]),[ye,xe]=reactExports.useState([]),[_e,$e]=reactExports.useState({}),[Ie,Fe]=reactExports.useState([]),[ke,je]=reactExports.useState({}),[We,ze]=reactExports.useState({}),[Xe,Je]=reactExports.useState({}),[nt,et]=reactExports.useState(initDndContextState.lastRunningTaskRunId),[tt,st]=reactExports.useState({}),[qe,Se]=reactExports.useState(initDndContextState.config),[Re,Be]=reactExports.useState(initDndContextState.configBackup),[Ne,Ue]=reactExports.useState(initDndContextState.viewers),[Ge,Ye]=reactExports.useState([]),[Qe,Te]=reactExports.useState(initDndContextState.isTypeReadOnly),[Ke,rt]=reactExports.useState(initDndContextState.maximizedTabId),[it,at]=reactExports.useState(pe.defaultLayoutDirection),[lt,ct]=reactExports.useState(initDndContextState.initiallyReceivedLayout),[ot,ft]=reactExports.useState(initDndContextState.recordTypeState),[dt,mt]=reactExports.useState({}),[kt,wt]=reactExports.useState([]),Et=reactExports.useMemo(()=>it===LayoutDirection.HORIZONTAL,[it]),[Ot,Rt]=reactExports.useState(initDndContextState.blockDnd),[gt,$t]=reactExports.useState(initDndContextState.leftMouseBtnClicked),[pt,vt]=reactExports.useState(initDndContextState.isDragging),[Mt,St]=reactExports.useState(initDndContextState.tabsZone),[_t,Xt]=reactExports.useState(initDndContextState.initialTabsZone),[Tt,Dt]=reactExports.useState(initDndContextState.dropZone),[Ht,Bt]=reactExports.useState(initDndContextState.targetStackRef),[It,zt]=reactExports.useState(initDndContextState.draggingLabel),[Pt,Vt]=reactExports.useState(initDndContextState.startTabIndex),[vr,qt]=reactExports.useState(initDndContextState.endTabIndex),[er,yr]=reactExports.useState(initDndContextState.selectedGridRow),[Lt,jt]=reactExports.useState(initDndContextState.rowsData),[fr,Gt]=reactExports.useState(initDndContextState.selectedGridRowKey),[Jt,ar]=reactExports.useState(initDndContextState.cellHeight),[Wt,nr]=reactExports.useState(initDndContextState.userGuide),[Er,Zt]=reactExports.useState(initDndContextState.isRowBorder),[ir,Ir]=reactExports.useState(initDndContextState.mouseCoord),[tr,cr]=reactExports.useState(initDndContextState.isWithinTabs),[Or,sr]=reactExports.useState(initDndContextState.placeholder),[dr,Dr]=reactExports.useState(initDndContextState.shouldInsertPlaceholder),[lr,hr]=reactExports.useState(initDndContextState.hideEditor),[Yr,ur]=reactExports.useState(initDndContextState.isLayoutBtnsDisabled),[pr,Jr]=reactExports.useState(initDndContextState.isLayoutRestored),[Yt,or]=reactExports.useState(initDndContextState.initiallyHiddenColumns),[Fr,kr]=reactExports.useState(initDndContextState.useCache),[Kr,cn]=reactExports.useState(initDndContextState.shouldIgroreHideEditor),[An,_n]=reactExports.useState(initDndContextState.pageSize),[wn,Bn]=reactExports.useState(initDndContextState.pageIndex),[On]=reactExports.useState(initDndContextState.initialTabsScroll),In=reactExports.useRef(initDndContextState.dropMarker.current),Ln=reactExports.useRef(initDndContextState.dropPreview.current),Tn=reactExports.useRef(initDndContextState.managerRef.current),Rn=reactExports.useRef(initDndContextState.restoreLayoutRef.current),$n=reactExports.useRef(initDndContextState.droppableElRef.current),Cn=reactExports.useRef(initDndContextState.draggingTabRef.current),Sn=reactExports.useRef(initDndContextState.draggingTabOffsetWidthRef.current),gn=reactExports.useRef(initDndContextState.mouseUpHandlerRef.current),Mn=reactExports.useRef(initDndContextState.isTabExistInStackRef.current),yn=reactExports.useRef(initDndContextState.stacksTabsScrollPosition.current),Ys=reactExports.useRef(initDndContextState.selectRowByKeyWithDelay.current),pa=Cr=>{if(Cr.isSorted&&!Cr.isSortedDesc)return!1;if(Cr.isSorted&&Cr.isSortedDesc)return!0},Gr=Cr=>{ur(Cr)},ni=()=>{const{Module:Cr,Name:ut}=ce.data;return`${Cr.ModuleName};${ut}`},Un=async({simplifiedConfig:Cr,handlers:ut,readOnly:xt,maximizedTabId:Ct,cellHeight:Nt,userGuideCompleted:Qt,isHideEditorActive:Ut,headers:Kt,updatedColumnsState:Ar,columnsWidths:gr,isLayoutRestored:xr,originalColumns:Rr})=>{var Sr,Br;if(!(!ce.data||!Cr||!ue))try{let br=Ar||(Kt||((Sr=ve.current)==null?void 0:Sr.headers)||[]).reduce((Mr,$r)=>{var jr,hn;return $r.id!==ColumnNameType.FILTER&&$r.id!==ColumnNameType.HANDLER_STATUS?[...Mr,{Id:$r.id,Filter:xr?"":$r.filterValue??"",Hidden:xr?!1:!$r.isVisible,SortDesc:xr?void 0:pa($r),SizeInPercent:Number.parseInt(String(xr?(gr==null?void 0:gr[$r.Header])??((jr=$r.getHeaderProps().style)==null?void 0:jr.width)??150:((hn=$r.getHeaderProps().style)==null?void 0:hn.width)??150),10),MaxSizeInPixels:$r.maxWidth,MinSizeInPixels:$r.minWidth,SizeFixed:!$r.canResize,_t:"ColumnState"}]:Mr},[])||[];xr&&Rr&&br.length&&(br=Rr.map(Mr=>br.find($r=>$r.Id===Mr.id)));const Tr={_t:SimplifiedEnum.UI_TYPE_STATE,ReadOnly:xt,Layout:Cr,User:ue.id,ColumnsState:br.filter(Mr=>Mr!=null)||[],PinnedHandlers:ut||[],MaximizedTabId:Ct||"",MainGridCellHeight:Nt||+env$1.gridMaxLines,UserGuideContent:Wt.userGuideContent||"",UserGuideFormat:Wt.userGuideFormat||"",UserGuideCompleted:Qt??Wt.userGuideCompleted??!1,HideEditor:Ut??lr??!1,UseCache:Fr,Type_:ni(),PageSize:An,PageIndex:wn};(Br=ve.current)!=null&&Br.data&&!Object.hasOwn(ve.current.data,"Layout")&&(ve.current.addLayoutToSettings&&ve.current.addLayoutToSettings(Cr),lt&&ct(!1)),Gr(!0),await storageApi.saveEntity({dataset:Ae,data:[Tr]}).then(()=>{tu(Tr.PinnedHandlers),eA(Tr.MainGridCellHeight),Tr.Type_===(ot==null?void 0:ot.Type_)&&ft(Mr=>Mr?{...Mr,PinnedHandlers:ut}:null)}).finally(()=>{Gr(!1)})}catch(br){toast.error(br)}},Li=({simplifiedConfig:Cr,handlers:ut,MaximizedTabId:xt,cellRowsHeight:Ct,userGuideCompleted:Nt,isHideEditorActive:Qt,headers:Ut,updatedColumnsState:Kt,isLayoutRestored:Ar=!1})=>{var xr,Rr;const gr=getParsedConfig(Re,!0);Ut&&ve.current&&(ve.current.headers=Ut),Un({simplifiedConfig:Cr||gr,handlers:ut||Ge,readOnly:Qe,maximizedTabId:xt||"",cellHeight:Ct||Jt||CellRowsCount.ONE,userGuideCompleted:Nt,isHideEditorActive:Qt,headers:Ut,updatedColumnsState:Kt,columnsWidths:(xr=Rn.current)==null?void 0:xr.columnsWidths,isLayoutRestored:Ar,originalColumns:Ar?(Rr=Rn.current)==null?void 0:Rr.originalColumns:void 0})},Xs=Cr=>{Ue(Cr||[])},tu=Cr=>{Ye(Cr)},Wh=()=>{Ye([])},Up=Cr=>{Te(Cr)},Hp=()=>{Te(!1)},Hf=(Cr,ut=!1)=>{rt(Cr),ut||Li({handlers:Ge,MaximizedTabId:Cr})},jp=()=>{rt(null)},Vp=()=>{Ke!==GridTabEnum.MAIN&&Hf(Ke!==GridTabEnum.MAIN?GridTabEnum.MAIN:"")},Qp=()=>{Ke!==EditorTabsEnum.EDITOR&&Hf(Ke!==EditorTabsEnum.EDITOR?EditorTabsEnum.EDITOR:"")},Yh=Cr=>{at(Cr),K&&externalStorage.setLayoutDirectiom(K,Cr)},Xh=reactExports.useCallback((Cr,ut,xt)=>{switch(!0){case!!xt:return[...(xt==null?void 0:xt.map(Ct=>EDITOR_TABS[Ct]))||[],...Ne];case Cr===EditorTabsEnum.NEW_ENTITY:return[EDITOR_TABS[EditorTabsEnum.NEW_ENTITY]];case Cr===EditorTabsEnum.COPY_ENTITY:return[EDITOR_TABS[EditorTabsEnum.COPY_ENTITY]];case Cr===EditorTabsEnum.SELECT_TYPE:return[EDITOR_TABS[EditorTabsEnum.SELECT_TYPE]];default:{const Ct=ut==="DAG";return[EDITOR_TABS[EditorTabsEnum.EDITOR],...Ct?[EDITOR_TABS[EditorTabsEnum.DAG]]:[],...Ne]}}},[Ne]),Zh=Cr=>{Se(Cr),findParent(Cr,[EditorTabsEnum.NEW_ENTITY,EditorTabsEnum.COPY_ENTITY])||Be(structuredClone(Cr))},Kp=Cr=>{jt(Cr)},qp=Cr=>{Gt(Cr)},Gp=Cr=>{Gt(Cr)},Jh=()=>ar(null),eA=Cr=>ar(Cr),zp=Cr=>{nr(Cr)},Wp=()=>{nr({})},tA=Cr=>{nr({...Wt,userGuideCompleted:Cr})},Yp=Cr=>{Zt(Cr),externalStorage.setIsRowBorder(Cr)},Xp=Cr=>{cr(Cr)},Zp=Cr=>{Ir(Cr)},Jp=async Cr=>{if(K)try{const ut={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"GetRecordPanels",Keys:[],Arguments:{TypeName:(Cr==null?void 0:Cr.type)||K,Key:(Cr==null?void 0:Cr.key)||""},Dataset:Ae,userName:ue==null?void 0:ue.username},Ct=(await ne(ut))[0].Result;let Nt=!0;Xs((Ct==null?void 0:Ct.map(({Name:Qt,Kind:Ut,Persistable:Kt})=>{const Ar={id:Qt,key:Qt,label:Qt,isClosable:Kt,isActive:Nt&&!!Ut,isCurrentlyDragging:!1,isPrimary:Ut};return Ut&&Nt&&(Nt=!1),Ar}))||[])}catch(ut){toast.error(ut)}},jf=Cr=>{hr(Cr)},iA=()=>{at(pe.defaultLayoutDirection),Se(initDndContextState.config),Be(initDndContextState.configBackup),Ue(initDndContextState.viewers),Ye(initDndContextState.pinnedHandlers),Te(initDndContextState.isTypeReadOnly),rt(initDndContextState.maximizedTabId),ct(initDndContextState.initiallyReceivedLayout),Rt(initDndContextState.blockDnd),$t(initDndContextState.leftMouseBtnClicked),vt(initDndContextState.isDragging),St(initDndContextState.tabsZone),Xt(initDndContextState.initialTabsZone),Dt(initDndContextState.dropZone),Bt(initDndContextState.targetStackRef),zt(initDndContextState.draggingLabel),Vt(initDndContextState.startTabIndex),qt(initDndContextState.endTabIndex),yr(initDndContextState.selectedGridRow),jt(initDndContextState.rowsData),Gt(initDndContextState.selectedGridRowKey),ar(initDndContextState.cellHeight),nr(initDndContextState.userGuide),Ir(initDndContextState.mouseCoord),cr(initDndContextState.isWithinTabs),sr(initDndContextState.placeholder),Dr(initDndContextState.shouldInsertPlaceholder),hr(initDndContextState.hideEditor),ft(initDndContextState.recordTypeState),Gr(initDndContextState.isLayoutBtnsDisabled),$n.current=initDndContextState.droppableElRef.current,Cn.current=initDndContextState.draggingTabRef.current,Sn.current=initDndContextState.draggingTabOffsetWidthRef.current,gn.current=initDndContextState.mouseUpHandlerRef.current,Mn.current=initDndContextState.isTabExistInStackRef.current,ve.current=initDndContextState.headersRef.current},$l=Cr=>{or(Cr)},Vf=()=>{or([])};reactExports.useImperativeHandle(pe.resetDndContextMethodRef,()=>({callBack:iA}));const Qf=Cr=>{kr(Cr)},sA=()=>{kr(initDndContextState.useCache)},aA=Cr=>Bn(Cr),e0=Cr=>_n(Cr);reactExports.useEffect(()=>(at(pe.defaultLayoutDirection),cn((ue==null?void 0:ue.roles.includes(UserRole.Developer))||!1),()=>{Se(initDndContextState.config),Be(initDndContextState.configBackup),Ue(initDndContextState.viewers),Ye(initDndContextState.pinnedHandlers),Te(initDndContextState.isTypeReadOnly),rt(initDndContextState.maximizedTabId),at(pe.defaultLayoutDirection),ct(initDndContextState.initiallyReceivedLayout),Rt(initDndContextState.blockDnd),$t(initDndContextState.leftMouseBtnClicked),vt(initDndContextState.isDragging),St(initDndContextState.tabsZone),Xt(initDndContextState.initialTabsZone),Dt(initDndContextState.dropZone),Bt(initDndContextState.targetStackRef),zt(initDndContextState.draggingLabel),Vt(initDndContextState.startTabIndex),qt(initDndContextState.endTabIndex),yr(initDndContextState.selectedGridRow),jt(initDndContextState.rowsData),Gt(initDndContextState.selectedGridRowKey),ar(initDndContextState.cellHeight),nr(initDndContextState.userGuide),Ir(initDndContextState.mouseCoord),cr(initDndContextState.isWithinTabs),sr(initDndContextState.placeholder),Dr(initDndContextState.shouldInsertPlaceholder),hr(initDndContextState.hideEditor),$l(initDndContextState.initiallyHiddenColumns),kr(initDndContextState.useCache),Gr(initDndContextState.isLayoutBtnsDisabled),$n.current=initDndContextState.droppableElRef.current,Cn.current=initDndContextState.draggingTabRef.current,Sn.current=initDndContextState.draggingTabOffsetWidthRef.current,gn.current=initDndContextState.mouseUpHandlerRef.current,Mn.current=initDndContextState.isTabExistInStackRef.current,yn.current=initDndContextState.stacksTabsScrollPosition.current,Ys.current=initDndContextState.selectRowByKeyWithDelay.current,Rn.current=initDndContextState.restoreLayoutRef.current,ve.current=initDndContextState.headersRef.current}),[K]),reactExports.useEffect(()=>(gt&&gn.current&&document.addEventListener("mouseup",gn.current),()=>{gn.current&&document.removeEventListener("mouseup",gn.current)}),[gt]);const Kf=Cr=>{const{tableName:ut,handlerId:xt,data:Ct,statusCode:Nt}=Cr;$e(Qt=>{const Ut=ut in Qt&&xt in Qt[ut]?{...Qt[ut][xt]}:{};return Ct==null||Ct.forEach(({Key:Kt,TaskRunId:Ar})=>{Ut[Kt||xt]={TaskRunId:Ar,StatusCode:Nt}}),{...Qt,[ut]:{...Qt[ut],[xt]:{...Ut}}}})},t0=Cr=>{$e(ut=>{const xt=structuredClone(ut);return Object.keys(xt).forEach(Ct=>{r0(xt[Ct],Cr)}),xt})},r0=(Cr,ut)=>{Object.keys(Cr).forEach(xt=>{n0(Cr[xt],ut)})},n0=(Cr,ut)=>{Object.keys(Cr).forEach(xt=>{const Ct=ut.find(Nt=>Nt.TaskRunId===Cr[xt].TaskRunId);Ct&&(Cr[xt]=Ct)})},qf=Cr=>Fe(Cr),i0=(Cr,ut)=>{je(xt=>{var Qt;let Ct={};const Nt=({Key:Ut,StatusCode:Kt,Message:Ar,TaskRunId:gr})=>{var xr;Ut&&(Ct[Ut]={statusCode:Kt,message:Ar??((xr=xt[Ut])==null?void 0:xr.message)??void 0,taskRunId:gr})};if(ut){for(const Ut in xt){const{statusCode:Kt}=xt[Ut];(Kt===RunHandlerStatusCodeEnum.Running||Kt===RunHandlerStatusCodeEnum.Submitted)&&(Ct[Ut]=xt[Ut])}for(const Ut of Cr)Nt(Ut)}else{Ct={...xt};for(const Ut of Cr){const{Key:Kt,TaskRunId:Ar}=Ut;Kt&&((Qt=Ct[Kt])==null?void 0:Qt.taskRunId)===Ar&&Nt(Ut)}}return Ct})},s0=()=>{$e({}),qf([]),je({}),ze({}),Je({}),st({}),et(""),mt({}),wt([]),ge([]),xe([])},a0=Cr=>{const xt={...ot??{},PinnedHandlers:Cr,User:ue==null?void 0:ue.username,ReadOnly:!1};storageApi.saveEntity({dataset:Ae,data:[xt]}).then(()=>{ft(xt),ni()===(ot==null?void 0:ot.Type_)&&Ye(Cr)})},o0=reactExports.useMemo(()=>({state:{config:qe,configBackup:Re,viewers:Ne,pinnedHandlers:Ge,isTypeReadOnly:Qe,maximizedTabId:Ke,layoutDirection:it,isHorizontalLayoutDirection:Et,initiallyReceivedLayout:lt,blockDnd:Ot,leftMouseBtnClicked:gt,isDragging:pt,tabsZone:Mt,initialTabsZone:_t,dropZone:Tt,targetStackRef:Ht,draggingLabel:It,startTabIndex:Pt,endTabIndex:vr,selectedGridRow:er,dropMarker:In,dropPreview:Ln,managerRef:Tn,headersRef:ve,rowsData:Lt,selectedGridRowKey:fr,cellHeight:Jt,userGuide:Wt,isRowBorder:Er,droppableElRef:$n,draggingTabRef:Cn,draggingTabOffsetWidthRef:Sn,mouseCoord:ir,isWithinTabs:tr,placeholder:Or,shouldInsertPlaceholder:dr,isViewersDataLoading:oe,hideEditor:lr,isLayoutBtnsDisabled:Yr,mouseUpHandlerRef:gn,isTabExistInStackRef:Mn,isLayoutRestored:pr,stacksTabsScrollPosition:yn,initiallyHiddenColumns:Yt,useCache:Fr,shouldIgroreHideEditor:Kr,pageIndex:wn,pageSize:An,toolbarHandler:_e,canceledHandlerIds:Ie,recordStatuses:ke,selectRowByKeyWithDelay:Ys,executedHandlersInfoByRecord:We,lastHandlerStatus:Xe,newRunHandlers:tt,recordTypeState:ot,initialTabsScroll:On,restoreLayoutRef:Rn,lastRunningTaskRunId:nt,recordsTaskRunIds:dt,activeTaskRunIds:kt,handlers:me,editorHandlers:ye},action:{updateViewers:Xs,getEditorTabs:Xh,updatePinnedHandlers:tu,resetPinnedHandlers:Wh,updateIsReadOnly:Up,resetIsReadOnly:Hp,saveUiTypeData:Li,updateMaximizedTabId:Hf,resetMaximizedStates:jp,handleMaximizeGridRow:Vp,handleMaximizeEditorRow:Qp,updateLayoutDirection:Yh,setInitiallyReceivedLayout:ct,setBlockDnd:Rt,setLeftMouseBtnClicked:$t,setIsDragging:vt,setTabsZone:St,setInitialTabsZone:Xt,setDropZone:Dt,setTargetStackRef:Bt,setDraggingLabel:zt,setStartTabIndex:Vt,setEndTabIndex:qt,setSelectedGridRow:yr,updateConfig:Zh,updateGridRowsData:Kp,selectGridRowKey:qp,resetCellHeight:Jh,updateCellHeight:eA,updateUserGuide:zp,resetUserGuide:Wp,changeIsGuideCompleted:tA,onChangeIsRowBorder:Yp,updateMouseCoord:Zp,updateIsWithinTabs:Xp,setPlaceholder:sr,setShouldInsertPlaceholder:Dr,fetchListPanelsData:Jp,updateHideEditorValue:jf,updateIsLayoutBtnsDisabled:Gr,setIsLayoutRestored:Jr,updateInitiallyHiddenColumns:$l,resetInitiallyHiddenColumns:Vf,updateUseCache:Qf,resetUseCache:sA,getSortDesc:pa,updatePageIndex:aA,updatePageSize:e0,setAllHandlerTasksStatus:Kf,setAllTasksStatuses:t0,setAllCanceledHandlerIds:qf,changeRecordStatuses:i0,clearHandlerState:s0,updateSelectedGridRowKey:Gp,setExecutedHandlersInfoByRecord:ze,setLastHandlerStatus:Je,setNewRunHandlers:st,updateRecordPinnedHandlers:a0,setRecordTypeState:ft,setLastRunningTaskRunId:et,setRecordsTaskRunIds:mt,setActiveTaskRunIds:wt,setHandlers:ge,setEditorHandlers:xe}}),[qe,Re,Ne,Ge,Qe,Ke,it,Et,lt,Ot,gt,pt,Mt,_t,Tt,Ht,It,Pt,vr,er,In,Ln,Tn,ve,Lt,fr,Jt,Wt,Er,$n,Cn,Sn,ir,tr,Or,dr,oe,lr,Yr,gn,Mn,pr,yn,Yt,Fr,Kr,wn,An,_e,Ie,ke,Ys,We,Xe,tt,ot,On,Rn,nt,et,dt,mt,kt,wt,ge,xe]);return jsxRuntimeExports.jsx(DndContextWrapper.Provider,{value:o0,children:J})},useDndContext=()=>{const K=reactExports.useContext(DndContextWrapper);return{state:(K==null?void 0:K.state)||{},action:(K==null?void 0:K.action)||{}}},PanelGroupContext=reactExports.createContext(null);PanelGroupContext.displayName="PanelGroupContext";const DATA_ATTRIBUTES={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},PRECISION=10,useIsomorphicLayoutEffect$2=reactExports.useLayoutEffect,useId=c$3.useId,wrappedUseId=typeof useId=="function"?useId:()=>null;let counter=0;function useUniqueId$2(K=null){const J=wrappedUseId(),ne=reactExports.useRef(K||J||null);return ne.current===null&&(ne.current=""+counter++),K??ne.current}function PanelWithForwardedRef({children:K,className:J="",collapsedSize:ne,collapsible:oe,defaultSize:ce,forwardedRef:ue,id:Ae,maxSize:pe,minSize:ve,onCollapse:me,onExpand:ge,onResize:ye,order:xe,style:_e,tagName:$e="div",...Ie}){const Fe=reactExports.useContext(PanelGroupContext);if(Fe===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:ke,expandPanel:je,getPanelSize:We,getPanelStyle:ze,groupId:Xe,isPanelCollapsed:Je,reevaluatePanelConstraints:nt,registerPanel:et,resizePanel:tt,unregisterPanel:st}=Fe,qe=useUniqueId$2(Ae),Se=reactExports.useRef({callbacks:{onCollapse:me,onExpand:ge,onResize:ye},constraints:{collapsedSize:ne,collapsible:oe,defaultSize:ce,maxSize:pe,minSize:ve},id:qe,idIsFromProps:Ae!==void 0,order:xe});reactExports.useRef({didLogMissingDefaultSizeWarning:!1}),useIsomorphicLayoutEffect$2(()=>{const{callbacks:Be,constraints:Ne}=Se.current,Ue={...Ne};Se.current.id=qe,Se.current.idIsFromProps=Ae!==void 0,Se.current.order=xe,Be.onCollapse=me,Be.onExpand=ge,Be.onResize=ye,Ne.collapsedSize=ne,Ne.collapsible=oe,Ne.defaultSize=ce,Ne.maxSize=pe,Ne.minSize=ve,(Ue.collapsedSize!==Ne.collapsedSize||Ue.collapsible!==Ne.collapsible||Ue.maxSize!==Ne.maxSize||Ue.minSize!==Ne.minSize)&&nt(Se.current,Ue)}),useIsomorphicLayoutEffect$2(()=>{const Be=Se.current;return et(Be),()=>{st(Be)}},[xe,qe,et,st]),reactExports.useImperativeHandle(ue,()=>({collapse:()=>{ke(Se.current)},expand:Be=>{je(Se.current,Be)},getId(){return qe},getSize(){return We(Se.current)},isCollapsed(){return Je(Se.current)},isExpanded(){return!Je(Se.current)},resize:Be=>{tt(Se.current,Be)}}),[ke,je,We,Je,qe,tt]);const Re=ze(Se.current,ce);return reactExports.createElement($e,{...Ie,children:K,className:J,id:qe,style:{...Re,..._e},[DATA_ATTRIBUTES.groupId]:Xe,[DATA_ATTRIBUTES.panel]:"",[DATA_ATTRIBUTES.panelCollapsible]:oe||void 0,[DATA_ATTRIBUTES.panelId]:qe,[DATA_ATTRIBUTES.panelSize]:parseFloat(""+Re.flexGrow).toFixed(1)})}const Panel$1=reactExports.forwardRef((K,J)=>reactExports.createElement(PanelWithForwardedRef,{...K,forwardedRef:J}));PanelWithForwardedRef.displayName="Panel";Panel$1.displayName="forwardRef(Panel)";let currentCursorStyle=null,prevRuleIndex=-1,styleElement=null;function getCursorStyle(K,J,ne){const oe=(J&EXCEEDED_HORIZONTAL_MIN)!==0,ce=(J&EXCEEDED_HORIZONTAL_MAX)!==0,ue=(J&EXCEEDED_VERTICAL_MIN)!==0,Ae=(J&EXCEEDED_VERTICAL_MAX)!==0;if(J){if(oe)return ue?"se-resize":Ae?"ne-resize":"e-resize";if(ce)return ue?"sw-resize":Ae?"nw-resize":"w-resize";if(ue)return"s-resize";if(Ae)return"n-resize"}switch(K){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function resetGlobalCursorStyle(){styleElement!==null&&(document.head.removeChild(styleElement),currentCursorStyle=null,styleElement=null,prevRuleIndex=-1)}function setGlobalCursorStyle(K,J,ne){var oe,ce;const ue=getCursorStyle(K,J);if(currentCursorStyle!==ue){if(currentCursorStyle=ue,styleElement===null&&(styleElement=document.createElement("style"),document.head.appendChild(styleElement)),prevRuleIndex>=0){var Ae;(Ae=styleElement.sheet)===null||Ae===void 0||Ae.removeRule(prevRuleIndex)}prevRuleIndex=(oe=(ce=styleElement.sheet)===null||ce===void 0?void 0:ce.insertRule(`*{cursor: ${ue} !important;}`))!==null&&oe!==void 0?oe:-1}}function isKeyDown(K){return K.type==="keydown"}function isPointerEvent(K){return K.type.startsWith("pointer")}function isMouseEvent$1(K){return K.type.startsWith("mouse")}function getResizeEventCoordinates(K){if(isPointerEvent(K)){if(K.isPrimary)return{x:K.clientX,y:K.clientY}}else if(isMouseEvent$1(K))return{x:K.clientX,y:K.clientY};return{x:1/0,y:1/0}}function getInputType(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function intersects(K,J,ne){return K.x<J.x+J.width&&K.x+K.width>J.x&&K.y<J.y+J.height&&K.y+K.height>J.y}function compare(K,J){if(K===J)throw new Error("Cannot compare node with itself");const ne={a:get_ancestors(K),b:get_ancestors(J)};let oe;for(;ne.a.at(-1)===ne.b.at(-1);)K=ne.a.pop(),J=ne.b.pop(),oe=K;assert$1(oe,"Stacking order can only be calculated for elements with a common ancestor");const ce={a:get_z_index(find_stacking_context(ne.a)),b:get_z_index(find_stacking_context(ne.b))};if(ce.a===ce.b){const ue=oe.childNodes,Ae={a:ne.a.at(-1),b:ne.b.at(-1)};let pe=ue.length;for(;pe--;){const ve=ue[pe];if(ve===Ae.a)return 1;if(ve===Ae.b)return-1}}return Math.sign(ce.a-ce.b)}const props=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function is_flex_item(K){var J;const ne=getComputedStyle((J=get_parent(K))!==null&&J!==void 0?J:K).display;return ne==="flex"||ne==="inline-flex"}function creates_stacking_context(K){const J=getComputedStyle(K);return!!(J.position==="fixed"||J.zIndex!=="auto"&&(J.position!=="static"||is_flex_item(K))||+J.opacity<1||"transform"in J&&J.transform!=="none"||"webkitTransform"in J&&J.webkitTransform!=="none"||"mixBlendMode"in J&&J.mixBlendMode!=="normal"||"filter"in J&&J.filter!=="none"||"webkitFilter"in J&&J.webkitFilter!=="none"||"isolation"in J&&J.isolation==="isolate"||props.test(J.willChange)||J.webkitOverflowScrolling==="touch")}function find_stacking_context(K){let J=K.length;for(;J--;){const ne=K[J];if(assert$1(ne,"Missing node"),creates_stacking_context(ne))return ne}return null}function get_z_index(K){return K&&Number(getComputedStyle(K).zIndex)||0}function get_ancestors(K){const J=[];for(;K;)J.push(K),K=get_parent(K);return J}function get_parent(K){const{parentNode:J}=K;return J&&J instanceof ShadowRoot?J.host:J}const EXCEEDED_HORIZONTAL_MIN=1,EXCEEDED_HORIZONTAL_MAX=2,EXCEEDED_VERTICAL_MIN=4,EXCEEDED_VERTICAL_MAX=8,isCoarsePointer=getInputType()==="coarse";let intersectingHandles=[],isPointerDown=!1,ownerDocumentCounts=new Map,panelConstraintFlags=new Map;const registeredResizeHandlers=new Set;function registerResizeHandle(K,J,ne,oe,ce){var ue;const{ownerDocument:Ae}=J,pe={direction:ne,element:J,hitAreaMargins:oe,setResizeHandlerState:ce},ve=(ue=ownerDocumentCounts.get(Ae))!==null&&ue!==void 0?ue:0;return ownerDocumentCounts.set(Ae,ve+1),registeredResizeHandlers.add(pe),updateListeners(),function(){var ge;panelConstraintFlags.delete(K),registeredResizeHandlers.delete(pe);const ye=(ge=ownerDocumentCounts.get(Ae))!==null&&ge!==void 0?ge:1;if(ownerDocumentCounts.set(Ae,ye-1),updateListeners(),ye===1&&ownerDocumentCounts.delete(Ae),intersectingHandles.includes(pe)){const xe=intersectingHandles.indexOf(pe);xe>=0&&intersectingHandles.splice(xe,1),updateCursor(),ce("up",!0,null)}}}function handlePointerDown$1(K){const{target:J}=K,{x:ne,y:oe}=getResizeEventCoordinates(K);isPointerDown=!0,recalculateIntersectingHandles({target:J,x:ne,y:oe}),updateListeners(),intersectingHandles.length>0&&(updateResizeHandlerStates("down",K),updateCursor(),K.preventDefault(),isWithinResizeHandle(J)||K.stopImmediatePropagation())}function handlePointerMove(K){const{x:J,y:ne}=getResizeEventCoordinates(K);if(isPointerDown&&K.buttons===0&&(isPointerDown=!1,updateResizeHandlerStates("up",K)),!isPointerDown){const{target:oe}=K;recalculateIntersectingHandles({target:oe,x:J,y:ne})}updateResizeHandlerStates("move",K),updateCursor(),intersectingHandles.length>0&&K.preventDefault()}function handlePointerUp(K){const{target:J}=K,{x:ne,y:oe}=getResizeEventCoordinates(K);panelConstraintFlags.clear(),isPointerDown=!1,intersectingHandles.length>0&&(K.preventDefault(),isWithinResizeHandle(J)||K.stopImmediatePropagation()),updateResizeHandlerStates("up",K),recalculateIntersectingHandles({target:J,x:ne,y:oe}),updateCursor(),updateListeners()}function isWithinResizeHandle(K){let J=K;for(;J;){if(J.hasAttribute(DATA_ATTRIBUTES.resizeHandle))return!0;J=J.parentElement}return!1}function recalculateIntersectingHandles({target:K,x:J,y:ne}){intersectingHandles.splice(0);let oe=null;(K instanceof HTMLElement||K instanceof SVGElement)&&(oe=K),registeredResizeHandlers.forEach(ce=>{const{element:ue,hitAreaMargins:Ae}=ce,pe=ue.getBoundingClientRect(),{bottom:ve,left:me,right:ge,top:ye}=pe,xe=isCoarsePointer?Ae.coarse:Ae.fine;if(J>=me-xe&&J<=ge+xe&&ne>=ye-xe&&ne<=ve+xe){if(oe!==null&&document.contains(oe)&&ue!==oe&&!ue.contains(oe)&&!oe.contains(ue)&&compare(oe,ue)>0){let $e=oe,Ie=!1;for(;$e&&!$e.contains(ue);){if(intersects($e.getBoundingClientRect(),pe)){Ie=!0;break}$e=$e.parentElement}if(Ie)return}intersectingHandles.push(ce)}})}function reportConstraintsViolation(K,J){panelConstraintFlags.set(K,J)}function updateCursor(){let K=!1,J=!1;intersectingHandles.forEach(oe=>{const{direction:ce}=oe;ce==="horizontal"?K=!0:J=!0});let ne=0;panelConstraintFlags.forEach(oe=>{ne|=oe}),K&&J?setGlobalCursorStyle("intersection",ne):K?setGlobalCursorStyle("horizontal",ne):J?setGlobalCursorStyle("vertical",ne):resetGlobalCursorStyle()}let listenersAbortController;function updateListeners(){var K;(K=listenersAbortController)===null||K===void 0||K.abort(),listenersAbortController=new AbortController;const J={capture:!0,signal:listenersAbortController.signal};registeredResizeHandlers.size&&(isPointerDown?(intersectingHandles.length>0&&ownerDocumentCounts.forEach((ne,oe)=>{const{body:ce}=oe;ne>0&&(ce.addEventListener("contextmenu",handlePointerUp,J),ce.addEventListener("pointerleave",handlePointerMove,J),ce.addEventListener("pointermove",handlePointerMove,J))}),ownerDocumentCounts.forEach((ne,oe)=>{const{body:ce}=oe;ce.addEventListener("pointerup",handlePointerUp,J),ce.addEventListener("pointercancel",handlePointerUp,J)})):ownerDocumentCounts.forEach((ne,oe)=>{const{body:ce}=oe;ne>0&&(ce.addEventListener("pointerdown",handlePointerDown$1,J),ce.addEventListener("pointermove",handlePointerMove,J))}))}function updateResizeHandlerStates(K,J){registeredResizeHandlers.forEach(ne=>{const{setResizeHandlerState:oe}=ne,ce=intersectingHandles.includes(ne);oe(K,ce,J)})}function useForceUpdate(){const[K,J]=reactExports.useState(0);return reactExports.useCallback(()=>J(ne=>ne+1),[])}function assert$1(K,J){if(!K)throw console.error(J),Error(J)}function fuzzyCompareNumbers(K,J,ne=PRECISION){return K.toFixed(ne)===J.toFixed(ne)?0:K>J?1:-1}function fuzzyNumbersEqual$1(K,J,ne=PRECISION){return fuzzyCompareNumbers(K,J,ne)===0}function fuzzyNumbersEqual(K,J,ne){return fuzzyCompareNumbers(K,J,ne)===0}function fuzzyLayoutsEqual(K,J,ne){if(K.length!==J.length)return!1;for(let oe=0;oe<K.length;oe++){const ce=K[oe],ue=J[oe];if(!fuzzyNumbersEqual(ce,ue,ne))return!1}return!0}function resizePanel({panelConstraints:K,panelIndex:J,size:ne}){const oe=K[J];assert$1(oe!=null,`Panel constraints not found for index ${J}`);let{collapsedSize:ce=0,collapsible:ue,maxSize:Ae=100,minSize:pe=0}=oe;if(fuzzyCompareNumbers(ne,pe)<0)if(ue){const ve=(ce+pe)/2;fuzzyCompareNumbers(ne,ve)<0?ne=ce:ne=pe}else ne=pe;return ne=Math.min(Ae,ne),ne=parseFloat(ne.toFixed(PRECISION)),ne}function adjustLayoutByDelta({delta:K,initialLayout:J,panelConstraints:ne,pivotIndices:oe,prevLayout:ce,trigger:ue}){if(fuzzyNumbersEqual(K,0))return J;const Ae=[...J],[pe,ve]=oe;assert$1(pe!=null,"Invalid first pivot index"),assert$1(ve!=null,"Invalid second pivot index");let me=0;if(ue==="keyboard"){{const ye=K<0?ve:pe,xe=ne[ye];assert$1(xe,`Panel constraints not found for index ${ye}`);const{collapsedSize:_e=0,collapsible:$e,minSize:Ie=0}=xe;if($e){const Fe=J[ye];if(assert$1(Fe!=null,`Previous layout not found for panel index ${ye}`),fuzzyNumbersEqual(Fe,_e)){const ke=Ie-Fe;fuzzyCompareNumbers(ke,Math.abs(K))>0&&(K=K<0?0-ke:ke)}}}{const ye=K<0?pe:ve,xe=ne[ye];assert$1(xe,`No panel constraints found for index ${ye}`);const{collapsedSize:_e=0,collapsible:$e,minSize:Ie=0}=xe;if($e){const Fe=J[ye];if(assert$1(Fe!=null,`Previous layout not found for panel index ${ye}`),fuzzyNumbersEqual(Fe,Ie)){const ke=Fe-_e;fuzzyCompareNumbers(ke,Math.abs(K))>0&&(K=K<0?0-ke:ke)}}}}{const ye=K<0?1:-1;let xe=K<0?ve:pe,_e=0;for(;;){const Ie=J[xe];assert$1(Ie!=null,`Previous layout not found for panel index ${xe}`);const ke=resizePanel({panelConstraints:ne,panelIndex:xe,size:100})-Ie;if(_e+=ke,xe+=ye,xe<0||xe>=ne.length)break}const $e=Math.min(Math.abs(K),Math.abs(_e));K=K<0?0-$e:$e}{let xe=K<0?pe:ve;for(;xe>=0&&xe<ne.length;){const _e=Math.abs(K)-Math.abs(me),$e=J[xe];assert$1($e!=null,`Previous layout not found for panel index ${xe}`);const Ie=$e-_e,Fe=resizePanel({panelConstraints:ne,panelIndex:xe,size:Ie});if(!fuzzyNumbersEqual($e,Fe)&&(me+=$e-Fe,Ae[xe]=Fe,me.toFixed(3).localeCompare(Math.abs(K).toFixed(3),void 0,{numeric:!0})>=0))break;K<0?xe--:xe++}}if(fuzzyLayoutsEqual(ce,Ae))return ce;{const ye=K<0?ve:pe,xe=J[ye];assert$1(xe!=null,`Previous layout not found for panel index ${ye}`);const _e=xe+me,$e=resizePanel({panelConstraints:ne,panelIndex:ye,size:_e});if(Ae[ye]=$e,!fuzzyNumbersEqual($e,_e)){let Ie=_e-$e,ke=K<0?ve:pe;for(;ke>=0&&ke<ne.length;){const je=Ae[ke];assert$1(je!=null,`Previous layout not found for panel index ${ke}`);const We=je+Ie,ze=resizePanel({panelConstraints:ne,panelIndex:ke,size:We});if(fuzzyNumbersEqual(je,ze)||(Ie-=ze-je,Ae[ke]=ze),fuzzyNumbersEqual(Ie,0))break;K>0?ke--:ke++}}}const ge=Ae.reduce((ye,xe)=>xe+ye,0);return fuzzyNumbersEqual(ge,100)?Ae:ce}function calculateAriaValues({layout:K,panelsArray:J,pivotIndices:ne}){let oe=0,ce=100,ue=0,Ae=0;const pe=ne[0];assert$1(pe!=null,"No pivot index found"),J.forEach((ye,xe)=>{const{constraints:_e}=ye,{maxSize:$e=100,minSize:Ie=0}=_e;xe===pe?(oe=Ie,ce=$e):(ue+=Ie,Ae+=$e)});const ve=Math.min(ce,100-ue),me=Math.max(oe,100-Ae),ge=K[pe];return{valueMax:ve,valueMin:me,valueNow:ge}}function getResizeHandleElementsForGroup(K,J=document){return Array.from(J.querySelectorAll(`[${DATA_ATTRIBUTES.resizeHandleId}][data-panel-group-id="${K}"]`))}function getResizeHandleElementIndex(K,J,ne=document){const ce=getResizeHandleElementsForGroup(K,ne).findIndex(ue=>ue.getAttribute(DATA_ATTRIBUTES.resizeHandleId)===J);return ce??null}function determinePivotIndices(K,J,ne){const oe=getResizeHandleElementIndex(K,J,ne);return oe!=null?[oe,oe+1]:[-1,-1]}function isHTMLElement$1(K){return K instanceof HTMLElement?!0:typeof K=="object"&&K!==null&&"tagName"in K&&"getAttribute"in K}function getPanelGroupElement(K,J=document){if(isHTMLElement$1(J)&&J.dataset.panelGroupId==K)return J;const ne=J.querySelector(`[data-panel-group][data-panel-group-id="${K}"]`);return ne||null}function getResizeHandleElement(K,J=document){const ne=J.querySelector(`[${DATA_ATTRIBUTES.resizeHandleId}="${K}"]`);return ne||null}function getResizeHandlePanelIds(K,J,ne,oe=document){var ce,ue,Ae,pe;const ve=getResizeHandleElement(J,oe),me=getResizeHandleElementsForGroup(K,oe),ge=ve?me.indexOf(ve):-1,ye=(ce=(ue=ne[ge])===null||ue===void 0?void 0:ue.id)!==null&&ce!==void 0?ce:null,xe=(Ae=(pe=ne[ge+1])===null||pe===void 0?void 0:pe.id)!==null&&Ae!==void 0?Ae:null;return[ye,xe]}function useWindowSplitterPanelGroupBehavior({committedValuesRef:K,eagerValuesRef:J,groupId:ne,layout:oe,panelDataArray:ce,panelGroupElement:ue,setLayout:Ae}){reactExports.useRef({didWarnAboutMissingResizeHandle:!1}),useIsomorphicLayoutEffect$2(()=>{if(!ue)return;const pe=getResizeHandleElementsForGroup(ne,ue);for(let ve=0;ve<ce.length-1;ve++){const{valueMax:me,valueMin:ge,valueNow:ye}=calculateAriaValues({layout:oe,panelsArray:ce,pivotIndices:[ve,ve+1]}),xe=pe[ve];if(xe!=null){const _e=ce[ve];assert$1(_e,`No panel data found for index "${ve}"`),xe.setAttribute("aria-controls",_e.id),xe.setAttribute("aria-valuemax",""+Math.round(me)),xe.setAttribute("aria-valuemin",""+Math.round(ge)),xe.setAttribute("aria-valuenow",ye!=null?""+Math.round(ye):"")}}return()=>{pe.forEach((ve,me)=>{ve.removeAttribute("aria-controls"),ve.removeAttribute("aria-valuemax"),ve.removeAttribute("aria-valuemin"),ve.removeAttribute("aria-valuenow")})}},[ne,oe,ce,ue]),reactExports.useEffect(()=>{if(!ue)return;const pe=J.current;assert$1(pe,"Eager values not found");const{panelDataArray:ve}=pe,me=getPanelGroupElement(ne,ue);assert$1(me!=null,`No group found for id "${ne}"`);const ge=getResizeHandleElementsForGroup(ne,ue);assert$1(ge,`No resize handles found for group id "${ne}"`);const ye=ge.map(xe=>{const _e=xe.getAttribute(DATA_ATTRIBUTES.resizeHandleId);assert$1(_e,"Resize handle element has no handle id attribute");const[$e,Ie]=getResizeHandlePanelIds(ne,_e,ve,ue);if($e==null||Ie==null)return()=>{};const Fe=ke=>{if(!ke.defaultPrevented)switch(ke.key){case"Enter":{ke.preventDefault();const je=ve.findIndex(We=>We.id===$e);if(je>=0){const We=ve[je];assert$1(We,`No panel data found for index ${je}`);const ze=oe[je],{collapsedSize:Xe=0,collapsible:Je,minSize:nt=0}=We.constraints;if(ze!=null&&Je){const et=adjustLayoutByDelta({delta:fuzzyNumbersEqual(ze,Xe)?nt-Xe:Xe-ze,initialLayout:oe,panelConstraints:ve.map(tt=>tt.constraints),pivotIndices:determinePivotIndices(ne,_e,ue),prevLayout:oe,trigger:"keyboard"});oe!==et&&Ae(et)}}break}}};return xe.addEventListener("keydown",Fe),()=>{xe.removeEventListener("keydown",Fe)}});return()=>{ye.forEach(xe=>xe())}},[ue,K,J,ne,oe,ce,Ae])}function areEqual$1(K,J){if(K.length!==J.length)return!1;for(let ne=0;ne<K.length;ne++)if(K[ne]!==J[ne])return!1;return!0}function getResizeEventCursorPosition(K,J){const ne=K==="horizontal",{x:oe,y:ce}=getResizeEventCoordinates(J);return ne?oe:ce}function calculateDragOffsetPercentage(K,J,ne,oe,ce){const ue=ne==="horizontal",Ae=getResizeHandleElement(J,ce);assert$1(Ae,`No resize handle element found for id "${J}"`);const pe=Ae.getAttribute(DATA_ATTRIBUTES.groupId);assert$1(pe,"Resize handle element has no group id attribute");let{initialCursorPosition:ve}=oe;const me=getResizeEventCursorPosition(ne,K),ge=getPanelGroupElement(pe,ce);assert$1(ge,`No group element found for id "${pe}"`);const ye=ge.getBoundingClientRect(),xe=ue?ye.width:ye.height;return(me-ve)/xe*100}function calculateDeltaPercentage(K,J,ne,oe,ce,ue){if(isKeyDown(K)){const Ae=ne==="horizontal";let pe=0;K.shiftKey?pe=100:ce!=null?pe=ce:pe=10;let ve=0;switch(K.key){case"ArrowDown":ve=Ae?0:pe;break;case"ArrowLeft":ve=Ae?-pe:0;break;case"ArrowRight":ve=Ae?pe:0;break;case"ArrowUp":ve=Ae?0:-pe;break;case"End":ve=100;break;case"Home":ve=-100;break}return ve}else return oe==null?0:calculateDragOffsetPercentage(K,J,ne,oe,ue)}function calculateUnsafeDefaultLayout({panelDataArray:K}){const J=Array(K.length),ne=K.map(ue=>ue.constraints);let oe=0,ce=100;for(let ue=0;ue<K.length;ue++){const Ae=ne[ue];assert$1(Ae,`Panel constraints not found for index ${ue}`);const{defaultSize:pe}=Ae;pe!=null&&(oe++,J[ue]=pe,ce-=pe)}for(let ue=0;ue<K.length;ue++){const Ae=ne[ue];assert$1(Ae,`Panel constraints not found for index ${ue}`);const{defaultSize:pe}=Ae;if(pe!=null)continue;const ve=K.length-oe,me=ce/ve;oe++,J[ue]=me,ce-=me}return J}function callPanelCallbacks(K,J,ne){J.forEach((oe,ce)=>{const ue=K[ce];assert$1(ue,`Panel data not found for index ${ce}`);const{callbacks:Ae,constraints:pe,id:ve}=ue,{collapsedSize:me=0,collapsible:ge}=pe,ye=ne[ve];if(ye==null||oe!==ye){ne[ve]=oe;const{onCollapse:xe,onExpand:_e,onResize:$e}=Ae;$e&&$e(oe,ye),ge&&(xe||_e)&&(_e&&(ye==null||fuzzyNumbersEqual$1(ye,me))&&!fuzzyNumbersEqual$1(oe,me)&&_e(),xe&&(ye==null||!fuzzyNumbersEqual$1(ye,me))&&fuzzyNumbersEqual$1(oe,me)&&xe())}})}function compareLayouts(K,J){if(K.length!==J.length)return!1;for(let ne=0;ne<K.length;ne++)if(K[ne]!=J[ne])return!1;return!0}function computePanelFlexBoxStyle({defaultSize:K,dragState:J,layout:ne,panelData:oe,panelIndex:ce,precision:ue=3}){const Ae=ne[ce];let pe;return Ae==null?pe=K!=null?K.toFixed(ue):"1":oe.length===1?pe="1":pe=Ae.toFixed(ue),{flexBasis:0,flexGrow:pe,flexShrink:1,overflow:"hidden",pointerEvents:J!==null?"none":void 0}}function debounce(K,J=10){let ne=null;return(...ce)=>{ne!==null&&clearTimeout(ne),ne=setTimeout(()=>{K(...ce)},J)}}function initializeDefaultStorage(K){try{if(typeof localStorage<"u")K.getItem=J=>localStorage.getItem(J),K.setItem=(J,ne)=>{localStorage.setItem(J,ne)};else throw new Error("localStorage not supported in this environment")}catch(J){console.error(J),K.getItem=()=>null,K.setItem=()=>{}}}function getPanelGroupKey(K){return`react-resizable-panels:${K}`}function getPanelKey(K){return K.map(J=>{const{constraints:ne,id:oe,idIsFromProps:ce,order:ue}=J;return ce?oe:ue?`${ue}:${JSON.stringify(ne)}`:JSON.stringify(ne)}).sort((J,ne)=>J.localeCompare(ne)).join(",")}function loadSerializedPanelGroupState(K,J){try{const ne=getPanelGroupKey(K),oe=J.getItem(ne);if(oe){const ce=JSON.parse(oe);if(typeof ce=="object"&&ce!=null)return ce}}catch{}return null}function loadPanelGroupState(K,J,ne){var oe,ce;const ue=(oe=loadSerializedPanelGroupState(K,ne))!==null&&oe!==void 0?oe:{},Ae=getPanelKey(J);return(ce=ue[Ae])!==null&&ce!==void 0?ce:null}function savePanelGroupState(K,J,ne,oe,ce){var ue;const Ae=getPanelGroupKey(K),pe=getPanelKey(J),ve=(ue=loadSerializedPanelGroupState(K,ce))!==null&&ue!==void 0?ue:{};ve[pe]={expandToSizes:Object.fromEntries(ne.entries()),layout:oe};try{ce.setItem(Ae,JSON.stringify(ve))}catch(me){console.error(me)}}function validatePanelGroupLayout({layout:K,panelConstraints:J}){const ne=[...K],oe=ne.reduce((ue,Ae)=>ue+Ae,0);if(ne.length!==J.length)throw Error(`Invalid ${J.length} panel layout: ${ne.map(ue=>`${ue}%`).join(", ")}`);if(!fuzzyNumbersEqual(oe,100)&&ne.length>0)for(let ue=0;ue<J.length;ue++){const Ae=ne[ue];assert$1(Ae!=null,`No layout data found for index ${ue}`);const pe=100/oe*Ae;ne[ue]=pe}let ce=0;for(let ue=0;ue<J.length;ue++){const Ae=ne[ue];assert$1(Ae!=null,`No layout data found for index ${ue}`);const pe=resizePanel({panelConstraints:J,panelIndex:ue,size:Ae});Ae!=pe&&(ce+=Ae-pe,ne[ue]=pe)}if(!fuzzyNumbersEqual(ce,0))for(let ue=0;ue<J.length;ue++){const Ae=ne[ue];assert$1(Ae!=null,`No layout data found for index ${ue}`);const pe=Ae+ce,ve=resizePanel({panelConstraints:J,panelIndex:ue,size:pe});if(Ae!==ve&&(ce-=ve-Ae,ne[ue]=ve,fuzzyNumbersEqual(ce,0)))break}return ne}const LOCAL_STORAGE_DEBOUNCE_INTERVAL=100,defaultStorage={getItem:K=>(initializeDefaultStorage(defaultStorage),defaultStorage.getItem(K)),setItem:(K,J)=>{initializeDefaultStorage(defaultStorage),defaultStorage.setItem(K,J)}},debounceMap={};function PanelGroupWithForwardedRef({autoSaveId:K=null,children:J,className:ne="",direction:oe,forwardedRef:ce,id:ue=null,onLayout:Ae=null,keyboardResizeBy:pe=null,storage:ve=defaultStorage,style:me,tagName:ge="div",...ye}){const xe=useUniqueId$2(ue),_e=reactExports.useRef(null),[$e,Ie]=reactExports.useState(null),[Fe,ke]=reactExports.useState([]),je=useForceUpdate(),We=reactExports.useRef({}),ze=reactExports.useRef(new Map),Xe=reactExports.useRef(0),Je=reactExports.useRef({autoSaveId:K,direction:oe,dragState:$e,id:xe,keyboardResizeBy:pe,onLayout:Ae,storage:ve}),nt=reactExports.useRef({layout:Fe,panelDataArray:[],panelDataArrayChanged:!1});reactExports.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),reactExports.useImperativeHandle(ce,()=>({getId:()=>Je.current.id,getLayout:()=>{const{layout:it}=nt.current;return it},setLayout:it=>{const{onLayout:at}=Je.current,{layout:lt,panelDataArray:ct}=nt.current,ot=validatePanelGroupLayout({layout:it,panelConstraints:ct.map(ft=>ft.constraints)});areEqual$1(lt,ot)||(ke(ot),nt.current.layout=ot,at&&at(ot),callPanelCallbacks(ct,ot,We.current))}}),[]),useIsomorphicLayoutEffect$2(()=>{Je.current.autoSaveId=K,Je.current.direction=oe,Je.current.dragState=$e,Je.current.id=xe,Je.current.onLayout=Ae,Je.current.storage=ve}),useWindowSplitterPanelGroupBehavior({committedValuesRef:Je,eagerValuesRef:nt,groupId:xe,layout:Fe,panelDataArray:nt.current.panelDataArray,setLayout:ke,panelGroupElement:_e.current}),reactExports.useEffect(()=>{const{panelDataArray:it}=nt.current;if(K){if(Fe.length===0||Fe.length!==it.length)return;let at=debounceMap[K];at==null&&(at=debounce(savePanelGroupState,LOCAL_STORAGE_DEBOUNCE_INTERVAL),debounceMap[K]=at);const lt=[...it],ct=new Map(ze.current);at(K,lt,ct,Fe,ve)}},[K,Fe,ve]),reactExports.useEffect(()=>{});const et=reactExports.useCallback(it=>{const{onLayout:at}=Je.current,{layout:lt,panelDataArray:ct}=nt.current;if(it.constraints.collapsible){const ot=ct.map(kt=>kt.constraints),{collapsedSize:ft=0,panelSize:dt,pivotIndices:mt}=panelDataHelper(ct,it,lt);if(assert$1(dt!=null,`Panel size not found for panel "${it.id}"`),!fuzzyNumbersEqual$1(dt,ft)){ze.current.set(it.id,dt);const wt=findPanelDataIndex(ct,it)===ct.length-1?dt-ft:ft-dt,Et=adjustLayoutByDelta({delta:wt,initialLayout:lt,panelConstraints:ot,pivotIndices:mt,prevLayout:lt,trigger:"imperative-api"});compareLayouts(lt,Et)||(ke(Et),nt.current.layout=Et,at&&at(Et),callPanelCallbacks(ct,Et,We.current))}}},[]),tt=reactExports.useCallback((it,at)=>{const{onLayout:lt}=Je.current,{layout:ct,panelDataArray:ot}=nt.current;if(it.constraints.collapsible){const ft=ot.map(Ot=>Ot.constraints),{collapsedSize:dt=0,panelSize:mt=0,minSize:kt=0,pivotIndices:wt}=panelDataHelper(ot,it,ct),Et=at??kt;if(fuzzyNumbersEqual$1(mt,dt)){const Ot=ze.current.get(it.id),Rt=Ot!=null&&Ot>=Et?Ot:Et,$t=findPanelDataIndex(ot,it)===ot.length-1?mt-Rt:Rt-mt,pt=adjustLayoutByDelta({delta:$t,initialLayout:ct,panelConstraints:ft,pivotIndices:wt,prevLayout:ct,trigger:"imperative-api"});compareLayouts(ct,pt)||(ke(pt),nt.current.layout=pt,lt&&lt(pt),callPanelCallbacks(ot,pt,We.current))}}},[]),st=reactExports.useCallback(it=>{const{layout:at,panelDataArray:lt}=nt.current,{panelSize:ct}=panelDataHelper(lt,it,at);return assert$1(ct!=null,`Panel size not found for panel "${it.id}"`),ct},[]),qe=reactExports.useCallback((it,at)=>{const{panelDataArray:lt}=nt.current,ct=findPanelDataIndex(lt,it);return computePanelFlexBoxStyle({defaultSize:at,dragState:$e,layout:Fe,panelData:lt,panelIndex:ct})},[$e,Fe]),Se=reactExports.useCallback(it=>{const{layout:at,panelDataArray:lt}=nt.current,{collapsedSize:ct=0,collapsible:ot,panelSize:ft}=panelDataHelper(lt,it,at);return assert$1(ft!=null,`Panel size not found for panel "${it.id}"`),ot===!0&&fuzzyNumbersEqual$1(ft,ct)},[]),Re=reactExports.useCallback(it=>{const{layout:at,panelDataArray:lt}=nt.current,{collapsedSize:ct=0,collapsible:ot,panelSize:ft}=panelDataHelper(lt,it,at);return assert$1(ft!=null,`Panel size not found for panel "${it.id}"`),!ot||fuzzyCompareNumbers(ft,ct)>0},[]),Be=reactExports.useCallback(it=>{const{panelDataArray:at}=nt.current;at.push(it),at.sort((lt,ct)=>{const ot=lt.order,ft=ct.order;return ot==null&&ft==null?0:ot==null?-1:ft==null?1:ot-ft}),nt.current.panelDataArrayChanged=!0,je()},[je]);useIsomorphicLayoutEffect$2(()=>{if(nt.current.panelDataArrayChanged){nt.current.panelDataArrayChanged=!1;const{autoSaveId:it,onLayout:at,storage:lt}=Je.current,{layout:ct,panelDataArray:ot}=nt.current;let ft=null;if(it){const mt=loadPanelGroupState(it,ot,lt);mt&&(ze.current=new Map(Object.entries(mt.expandToSizes)),ft=mt.layout)}ft==null&&(ft=calculateUnsafeDefaultLayout({panelDataArray:ot}));const dt=validatePanelGroupLayout({layout:ft,panelConstraints:ot.map(mt=>mt.constraints)});areEqual$1(ct,dt)||(ke(dt),nt.current.layout=dt,at&&at(dt),callPanelCallbacks(ot,dt,We.current))}}),useIsomorphicLayoutEffect$2(()=>{const it=nt.current;return()=>{it.layout=[]}},[]);const Ne=reactExports.useCallback(it=>{let at=!1;const lt=_e.current;return lt&&window.getComputedStyle(lt,null).getPropertyValue("direction")==="rtl"&&(at=!0),function(ot){ot.preventDefault();const ft=_e.current;if(!ft)return()=>null;const{direction:dt,dragState:mt,id:kt,keyboardResizeBy:wt,onLayout:Et}=Je.current,{layout:Ot,panelDataArray:Rt}=nt.current,{initialLayout:gt}=mt??{},$t=determinePivotIndices(kt,it,ft);let pt=calculateDeltaPercentage(ot,it,dt,mt,wt,ft);const vt=dt==="horizontal";vt&&at&&(pt=-pt);const Mt=Rt.map(Xt=>Xt.constraints),St=adjustLayoutByDelta({delta:pt,initialLayout:gt??Ot,panelConstraints:Mt,pivotIndices:$t,prevLayout:Ot,trigger:isKeyDown(ot)?"keyboard":"mouse-or-touch"}),_t=!compareLayouts(Ot,St);(isPointerEvent(ot)||isMouseEvent$1(ot))&&Xe.current!=pt&&(Xe.current=pt,!_t&&pt!==0?vt?reportConstraintsViolation(it,pt<0?EXCEEDED_HORIZONTAL_MIN:EXCEEDED_HORIZONTAL_MAX):reportConstraintsViolation(it,pt<0?EXCEEDED_VERTICAL_MIN:EXCEEDED_VERTICAL_MAX):reportConstraintsViolation(it,0)),_t&&(ke(St),nt.current.layout=St,Et&&Et(St),callPanelCallbacks(Rt,St,We.current))}},[]),Ue=reactExports.useCallback((it,at)=>{const{onLayout:lt}=Je.current,{layout:ct,panelDataArray:ot}=nt.current,ft=ot.map(Ot=>Ot.constraints),{panelSize:dt,pivotIndices:mt}=panelDataHelper(ot,it,ct);assert$1(dt!=null,`Panel size not found for panel "${it.id}"`);const wt=findPanelDataIndex(ot,it)===ot.length-1?dt-at:at-dt,Et=adjustLayoutByDelta({delta:wt,initialLayout:ct,panelConstraints:ft,pivotIndices:mt,prevLayout:ct,trigger:"imperative-api"});compareLayouts(ct,Et)||(ke(Et),nt.current.layout=Et,lt&&lt(Et),callPanelCallbacks(ot,Et,We.current))},[]),Ge=reactExports.useCallback((it,at)=>{const{layout:lt,panelDataArray:ct}=nt.current,{collapsedSize:ot=0,collapsible:ft}=at,{collapsedSize:dt=0,collapsible:mt,maxSize:kt=100,minSize:wt=0}=it.constraints,{panelSize:Et}=panelDataHelper(ct,it,lt);Et!=null&&(ft&&mt&&fuzzyNumbersEqual$1(Et,ot)?fuzzyNumbersEqual$1(ot,dt)||Ue(it,dt):Et<wt?Ue(it,wt):Et>kt&&Ue(it,kt))},[Ue]),Ye=reactExports.useCallback((it,at)=>{const{direction:lt}=Je.current,{layout:ct}=nt.current;if(!_e.current)return;const ot=getResizeHandleElement(it,_e.current);assert$1(ot,`Drag handle element not found for id "${it}"`);const ft=getResizeEventCursorPosition(lt,at);Ie({dragHandleId:it,dragHandleRect:ot.getBoundingClientRect(),initialCursorPosition:ft,initialLayout:ct})},[]),Qe=reactExports.useCallback(()=>{Ie(null)},[]),Te=reactExports.useCallback(it=>{const{panelDataArray:at}=nt.current,lt=findPanelDataIndex(at,it);lt>=0&&(at.splice(lt,1),delete We.current[it.id],nt.current.panelDataArrayChanged=!0,je())},[je]),Ke=reactExports.useMemo(()=>({collapsePanel:et,direction:oe,dragState:$e,expandPanel:tt,getPanelSize:st,getPanelStyle:qe,groupId:xe,isPanelCollapsed:Se,isPanelExpanded:Re,reevaluatePanelConstraints:Ge,registerPanel:Be,registerResizeHandle:Ne,resizePanel:Ue,startDragging:Ye,stopDragging:Qe,unregisterPanel:Te,panelGroupElement:_e.current}),[et,$e,oe,tt,st,qe,xe,Se,Re,Ge,Be,Ne,Ue,Ye,Qe,Te]),rt={display:"flex",flexDirection:oe==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement(PanelGroupContext.Provider,{value:Ke},reactExports.createElement(ge,{...ye,children:J,className:ne,id:ue,ref:_e,style:{...rt,...me},[DATA_ATTRIBUTES.group]:"",[DATA_ATTRIBUTES.groupDirection]:oe,[DATA_ATTRIBUTES.groupId]:xe}))}const PanelGroup=reactExports.forwardRef((K,J)=>reactExports.createElement(PanelGroupWithForwardedRef,{...K,forwardedRef:J}));PanelGroupWithForwardedRef.displayName="PanelGroup";PanelGroup.displayName="forwardRef(PanelGroup)";function findPanelDataIndex(K,J){return K.findIndex(ne=>ne===J||ne.id===J.id)}function panelDataHelper(K,J,ne){const oe=findPanelDataIndex(K,J),ue=oe===K.length-1?[oe-1,oe]:[oe,oe+1],Ae=ne[oe];return{...J.constraints,panelSize:Ae,pivotIndices:ue}}function useWindowSplitterResizeHandlerBehavior({disabled:K,handleId:J,resizeHandler:ne,panelGroupElement:oe}){reactExports.useEffect(()=>{if(K||ne==null||oe==null)return;const ce=getResizeHandleElement(J,oe);if(ce==null)return;const ue=Ae=>{if(!Ae.defaultPrevented)switch(Ae.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{Ae.preventDefault(),ne(Ae);break}case"F6":{Ae.preventDefault();const pe=ce.getAttribute(DATA_ATTRIBUTES.groupId);assert$1(pe,`No group element found for id "${pe}"`);const ve=getResizeHandleElementsForGroup(pe,oe),me=getResizeHandleElementIndex(pe,J,oe);assert$1(me!==null,`No resize element found for id "${J}"`);const ge=Ae.shiftKey?me>0?me-1:ve.length-1:me+1<ve.length?me+1:0;ve[ge].focus();break}}};return ce.addEventListener("keydown",ue),()=>{ce.removeEventListener("keydown",ue)}},[oe,K,J,ne])}function PanelResizeHandle({children:K=null,className:J="",disabled:ne=!1,hitAreaMargins:oe,id:ce,onBlur:ue,onClick:Ae,onDragging:pe,onFocus:ve,onPointerDown:me,onPointerUp:ge,style:ye={},tabIndex:xe=0,tagName:_e="div",...$e}){var Ie,Fe;const ke=reactExports.useRef(null),je=reactExports.useRef({onClick:Ae,onDragging:pe,onPointerDown:me,onPointerUp:ge});reactExports.useEffect(()=>{je.current.onClick=Ae,je.current.onDragging=pe,je.current.onPointerDown=me,je.current.onPointerUp=ge});const We=reactExports.useContext(PanelGroupContext);if(We===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:ze,groupId:Xe,registerResizeHandle:Je,startDragging:nt,stopDragging:et,panelGroupElement:tt}=We,st=useUniqueId$2(ce),[qe,Se]=reactExports.useState("inactive"),[Re,Be]=reactExports.useState(!1),[Ne,Ue]=reactExports.useState(null),Ge=reactExports.useRef({state:qe});useIsomorphicLayoutEffect$2(()=>{Ge.current.state=qe}),reactExports.useEffect(()=>{if(ne)Ue(null);else{const Ke=Je(st);Ue(()=>Ke)}},[ne,st,Je]);const Ye=(Ie=oe==null?void 0:oe.coarse)!==null&&Ie!==void 0?Ie:15,Qe=(Fe=oe==null?void 0:oe.fine)!==null&&Fe!==void 0?Fe:5;reactExports.useEffect(()=>{if(ne||Ne==null)return;const Ke=ke.current;assert$1(Ke,"Element ref not attached");let rt=!1;return registerResizeHandle(st,Ke,ze,{coarse:Ye,fine:Qe},(at,lt,ct)=>{if(!lt){Se("inactive");return}switch(at){case"down":{Se("drag"),rt=!1,assert$1(ct,'Expected event to be defined for "down" action'),nt(st,ct);const{onDragging:ot,onPointerDown:ft}=je.current;ot==null||ot(!0),ft==null||ft();break}case"move":{const{state:ot}=Ge.current;rt=!0,ot!=="drag"&&Se("hover"),assert$1(ct,'Expected event to be defined for "move" action'),Ne(ct);break}case"up":{Se("hover"),et();const{onClick:ot,onDragging:ft,onPointerUp:dt}=je.current;ft==null||ft(!1),dt==null||dt(),rt||ot==null||ot();break}}})},[Ye,ze,ne,Qe,Je,st,Ne,nt,et]),useWindowSplitterResizeHandlerBehavior({disabled:ne,handleId:st,resizeHandler:Ne,panelGroupElement:tt});const Te={touchAction:"none",userSelect:"none"};return reactExports.createElement(_e,{...$e,children:K,className:J,id:ce,onBlur:()=>{Be(!1),ue==null||ue()},onFocus:()=>{Be(!0),ve==null||ve()},ref:ke,role:"separator",style:{...Te,...ye},tabIndex:xe,[DATA_ATTRIBUTES.groupDirection]:ze,[DATA_ATTRIBUTES.groupId]:Xe,[DATA_ATTRIBUTES.resizeHandle]:"",[DATA_ATTRIBUTES.resizeHandleActive]:qe==="drag"?"pointer":Re?"keyboard":void 0,[DATA_ATTRIBUTES.resizeHandleEnabled]:!ne,[DATA_ATTRIBUTES.resizeHandleId]:st,[DATA_ATTRIBUTES.resizeHandleState]:qe})}PanelResizeHandle.displayName="PanelResizeHandle";const makeStack=K=>{var J,ne,oe;return{type:StackEnum.STACK,key:`stack-${(J=K[0])==null?void 0:J.id}`,id:`stack-${(ne=K[0])==null?void 0:ne.id}`,isMainGrid:((oe=K[0])==null?void 0:oe.id)===GridTabEnum.MAIN,size:DefaultPanelSize.DEFAULT,content:K}},standartConfigMock={type:"",key:"",id:"",isMainGrid:!1,size:DefaultPanelSize.FULL_VIEW,content:[]},tabMock={id:"",key:"",label:"",isActive:!1,isClosable:!1,isMainGridTab:!1},isElementType=K=>Object.hasOwn(K,"ColsCount"),defineConfigNodeType=K=>Number(K.ColsCount)===1&&K.Content.length===1?StackEnum.STACK:Number(K.ColsCount)===1&&K.Content.length>1?StackEnum.COLUMN:Number(K.ColsCount)>1&&K.Content.length<=K.ColsCount?StackEnum.ROW:"",defineTopLevelConfigType=K=>K.length===1&&K[0].Content.length===1?StackEnum.STACK:K.length===1&&K[0].Content.length>1?StackEnum.ROW:K.length>1?StackEnum.COLUMN:"",getDeParsedConfig=(K,J=[])=>{var ne;if(Array.isArray(K)){const oe=structuredClone(standartConfigMock);return K.forEach(ce=>{const ue=getDeParsedConfig(ce,J);!Array.isArray(ue)&&ue&&oe.content.push(ue)}),oe.type=defineTopLevelConfigType(K),oe.id=`${oe.type}-${oe.content[0].id.replace(/\s/g,"")}`,oe.key=oe.id,oe.content.length===1?oe.content[0]:oe}if(isElementType(K)){const oe=structuredClone(standartConfigMock);return oe.type=defineConfigNodeType(K),K.Content.forEach(ce=>{const ue=getDeParsedConfig(ce,J);ue&&isConfigType(ue)&&ue.type===oe.type?(oe.isMainGrid=ue.isMainGrid,oe.content.push(...ue.content)):ue&&oe.content.push(ue)}),oe.content.length&&(oe.id=`${oe.type}-${oe.content[0].id.replace(/\s/g,"")}`,oe.key=oe.id),oe}if(!isElementType(K)){const oe=structuredClone(standartConfigMock);return oe.type=StackEnum.STACK,(ne=K.Stack)==null||ne.forEach(ce=>{ce.Key!==GridTabEnum.MAIN&&J.push(ce.Key);const ue={...tabMock};ce.Key===K.Key&&(ue.isActive=!0),ue.id=ce.Key,ue.key=ue.id,ce.Key===EditorTabsEnum.EDITOR?ue.label=EDITOR_TABS[EditorTabsEnum.EDITOR].label:ce.Key===GridTabEnum.MAIN?(ue.isMainGridTab=!0,ue.label=GRID_TAB[GridTabEnum.MAIN].label,oe.isMainGrid=!0):ue.label=ue.id,oe.content.push(ue)}),oe.content.length&&(oe.id=`${oe.type}-${oe.content[0].id.replace(/\s/g,"")}`,oe.key=oe.id),oe}},filterConfigTransitionTabs=K=>{const J=K,ne=oe=>(!isConfigType(oe)||oe.content.length===0||(oe.type==="stack"?oe.content=oe.content.filter(ce=>{const ue=oe.content[0],Ae=ce,pe=Ae.id.includes(EditorTabsEnum.EDITOR_TRANSITION);return pe&&Ae.isActive&&(ue.isActive=!0),!pe}):oe.content=oe.content.map(ce=>ne(ce))),oe);return ne(J)},useDnD=({tabs:K,type:J,selectedGridRow:ne,passedTabs:oe,setTabs:ce,draggableGrid:ue,data:Ae})=>{const{state:pe,action:ve}=useAppContext(),{state:me,action:ge}=useDndContext(),{activeEditorTab:ye}=pe,{config:xe,initiallyReceivedLayout:_e}=me,{setInitiallyReceivedLayout:$e,updateConfig:Ie}=ge,[Fe,ke]=reactExports.useState(!1),[je,We]=reactExports.useState({}),ze=reactExports.useRef([]);reactExports.useEffect(()=>{ve.setActiveEditorTabAction(EditorTabsEnum.EDITOR);const et=structuredClone(xe),tt=filterConfigTransitionTabs(et);Ie(tt);const st=findParent(et,[EditorTabsEnum.EDITOR_TRANSITION]);if(st){st.content=st.content.filter(Se=>(Se.isActive=Se.id===EditorTabsEnum.EDITOR,Se.id!==EditorTabsEnum.EDITOR_TRANSITION));const qe=correctContent(et);Ie(qe)}},[ne==null?void 0:ne.key]);const Xe=(et,tt=[])=>{const st=structuredClone(et),qe=et!=null&&et.length?getDeParsedConfig(st,tt):structuredClone(xe),Se=correctContent(qe),Re=findParent(Se,[EditorTabsEnum.EDITOR]);let Be={},Ne=!0;return Re==null||Re.content.forEach(Ue=>{var Ye;const Ge=Ue;Ge.id===EditorTabsEnum.EDITOR&&Object.keys(Be).length===0&&(Be=Ue,Ge.isActive=!0),Ne&&((Ye=me.viewers.find(Qe=>Qe.id===Ge.id))!=null&&Ye.isPrimary)?(Ge.isActive=!0,Ne=!1,Be.isActive=!1):Ge.id!==EditorTabsEnum.EDITOR&&(Ge.isActive=!1)}),qe},Je=(et,tt=[])=>{var st;return(st=Ae==null?void 0:Ae.Layout)!=null&&st.length&&_e?Xe(Ae.Layout,tt):Fe?(ke(!1),structuredClone(je)):structuredClone(et)},nt=(et,tt)=>{var Be,Ne,Ue,Ge,Ye,Qe;if(ne!=null&&ne.type&&J&&Ae&&!((Be=Ae.Layout)!=null&&Be.length)){let Te={};!tt.find(at=>(at.id===EditorTabsEnum.EDITOR&&(Te=at,at.isActive=!1),at.isPrimary))&&!me.hideEditor&&(Te.isActive=!0);const rt=findParent(xe,[EditorTabsEnum.EDITOR]);rt&&(rt.content=tt);const it=correctContent(xe);it.size=DefaultPanelSize.FULL_VIEW}if((Ne=Ae==null?void 0:Ae.Layout)!=null&&Ne.length&&ye!==EditorTabsEnum.NEW_ENTITY&&ye!==EditorTabsEnum.COPY_ENTITY&&ye!==EditorTabsEnum.SELECT_TYPE){const Te=Je(et,ze.current);_e&&$e(!1);const Ke=correctContent(Te),rt=findParent(Ke,[GridTabEnum.MAIN]),it=findParent(Ke,[EditorTabsEnum.NEW_ENTITY,EditorTabsEnum.COPY_ENTITY,EditorTabsEnum.SELECT_TYPE]);if(it&&(it.content=[...tt],it.id=`${it.type}-${(Ue=it.content[0])==null?void 0:Ue.key.replace(/\s/g,"")}`,it.key=it.id),rt&&(rt.isMainGrid=!0,rt.content.forEach(lt=>{const ct=lt;ct.isActive=ct.id===GridTabEnum.MAIN})),!isAlltabsInLayout(tt,ze.current,ne,J)){const lt=Je(et),ct=it||findParent(lt,[EditorTabsEnum.EDITOR]);if(ct){const ot=me.viewers.filter(wt=>!ze.current.some(Et=>Et===wt.id)),ft=ze.current.filter(wt=>!tt.some(Et=>Et.id===wt));if(ft.length&&ft.forEach(wt=>{const Et=findParent(lt,[wt]);(Et==null?void 0:Et.id)===ct.id?ct.content=ct.content.filter(Ot=>Ot.id!==wt):Et&&isConfigType(Et)&&(Et.content=Et.content.filter(Ot=>Ot.isActive||Ot.id!==wt))}),ot.length){const wt=[];ot.forEach(Et=>{findParent(Ke,[Et.id])===void 0&&wt.push(Et)}),ct.content=[...ct.content,...wt]}let dt={},mt;ct.content.forEach(wt=>{isGridTabDataType(wt)&&wt.id===EditorTabsEnum.EDITOR&&(dt=wt),dt.isActive&&(wt.isActive=dt.id===wt.id),wt.isActive&&(mt=wt)}),mt||(dt.isActive=!0);const kt=findParent(Ke,[EditorTabsEnum.EDITOR]);kt&&(kt.content=ct.content),ze.current=tt.map(wt=>wt.id),ge.saveUiTypeData({simplifiedConfig:getParsedConfig(Ke),handlers:Ae.PinnedHandlers,MaximizedTabId:me.maximizedTabId||""})}}if(me.hideEditor&&!me.shouldIgroreHideEditor){const lt=findParent(Ke,[EditorTabsEnum.EDITOR]);if(lt&&lt.content.length>1){const ct=externalStorage.getViewerActiveTab();if(ct)lt.content.forEach(ot=>{ot.isActive=ot.id===ct});else{const ot=tt.findIndex(ft=>ft.isPrimary);ot>=0?(lt.content[0].isActive=!1,lt.content[ot].isActive=!0):(lt.content[0].isActive=!1,lt.content.find(dt=>isGridTabDataType(dt)&&dt.isActive)||(lt.content[1].isActive=!0))}}}if(Ke.key=`${Ke.type}-${(Ge=Ke.content[0])==null?void 0:Ge.key.replace(/\s/g,"")}`,Ke.id=Ke.key,correctConfigDirection(Ke,me.layoutDirection),findParent(et,[EditorTabsEnum.NEW_ENTITY,EditorTabsEnum.COPY_ENTITY,EditorTabsEnum.SELECT_TYPE])&&me.configBackup.type!==Ke.type){const lt=revertConfigNodesOrientation(structuredClone(Ke),me.layoutDirection);correctContent(lt),Ke.content=lt.content}return Ke}if((Ye=Ae==null?void 0:Ae.Layout)!=null&&Ye.length&&(ye===EditorTabsEnum.NEW_ENTITY||ye===EditorTabsEnum.COPY_ENTITY||ye===EditorTabsEnum.SELECT_TYPE)){We(et),ke(!0);const Te=returnDefaultConfig(tt),Ke=correctContent(Te),rt=findParent(Ke,[GridTabEnum.MAIN]);rt.isMainGrid=!0,rt.content=[rt.content.find(at=>at.id===GridTabEnum.MAIN)],rt.content[0].isActive=!0;const it={type:StackEnum.COLUMN,key:`column-${rt.id}`,id:`column-${rt.id}`,isMainGrid:!1,size:DefaultPanelSize.FULL_VIEW,content:[rt,makeStack(tt)]};return correctConfigDirection(it,me.layoutDirection),it}if(ue===void 0)return makeStack(tt);const st=structuredClone(et),qe=structuredClone(et.content),Se=qe.filter(Te=>!Te.id.includes(GridTabEnum.MAIN));Se.length&&Se.length===1&&Se[0].type===StackEnum.STACK&&(Se[0].content&&Se[0].content.forEach(Te=>{const Ke=tt.find(rt=>rt.id===Te.id);Ke&&(Ke.isActive=Te.isActive)}),Se[0].content=tt,Se[0].id=`${Se[0].type}-${(Qe=tt[0])==null?void 0:Qe.key.replace(/\s/g,"")}`,Se[0].key=Se[0].id,st.content=qe),ze.current=tt.map(Te=>Te.id),correctConfigDirection(st,me.layoutDirection);const Re=findParent(st,[EditorTabsEnum.EDITOR]);if(Re){const Te=Re.content.filter(rt=>isGridTabDataType(rt)),Ke=Te.every(rt=>!rt.isActive);Ke&&me.hideEditor&&me.shouldIgroreHideEditor&&(Te[0].isActive=!0),Ke&&me.hideEditor&&!me.shouldIgroreHideEditor&&Te.length>1&&(Te[1].isActive=!0)}return st};reactExports.useEffect(()=>{var st,qe;const et=ge.getEditorTabs(pe.activeEditorTab,J,oe);me.maximizedTabId&&me.maximizedTabId!==EditorTabsEnum.EDITOR&&et.find(Se=>Se.id===me.maximizedTabId)&&ge.updateMaximizedTabId(EditorTabsEnum.EDITOR,!0);let tt=et.find(Se=>Se.id===K.activeTab)?K.activeTab:(st=et[me.hideEditor&&!me.shouldIgroreHideEditor&&et.length>1?1:0])==null?void 0:st.id;if(et.length&&!me.hideEditor||et.length==1&&me.hideEditor){const Se=et.findIndex(Re=>Re.isPrimary);Se>=0?(et[Se].isActive=!0,tt=et[Se].id):et[0].isActive=!0}else if(et.length>1&&me.hideEditor&&!me.shouldIgroreHideEditor){const Se=externalStorage.getViewerActiveTab();if(Se)et.forEach(Re=>{Re.isActive=Re.id===Se,Re.isActive&&(tt=Re.id)});else{const Re=et.findIndex(Be=>Be.isPrimary);Re>=0?(et[0].isActive=!1,et[Re].isActive=!0,tt=et[Re].id):(et[0].isActive=!1,et[1].isActive=!0,tt=et[1].id)}}ce({activeTab:tt,openedTabs:et}),Ie(nt((qe=Ae==null?void 0:Ae.Layout)!=null&&qe.length?xe:returnDefaultConfig([]),et))},[ye,me.viewers])},filterConfigContent=(K,J)=>{const ne=K;if(!(isConfigType(ne)&&ne.content.length&&(ne.content=ne.content.filter(oe=>filterConfigContent(oe,J)),ne.content.length===0))&&ne.key!==(J==null?void 0:J.key))return ne},findTarget=(K,J)=>{var ne;if(J){if(K.key===J)return K;if((ne=K.content)!=null&&ne.length)for(const oe of K.content){const ce=findTarget(oe,J);if(ce)return ce}}},setActiveFalse=(K,J)=>{K==null||K.content.forEach(ne=>{const oe=ne;oe.id!==J.id&&J.isActive&&(oe.isActive=!1)})},setDraggingTabUndragging=(K,J)=>{const ne=findTarget(K,J.id);ne&&isGridTabDataType(ne)&&(ne.isCurrentlyDragging=!1)},reorderTabs=(K,J,ne)=>{const oe=Array.from(K),[ce]=oe.splice(J,1);return oe.splice(ne,0,ce),oe},droppable$1="_droppable_p0djk_1",top$1="_top_p0djk_5",bottom="_bottom_p0djk_10",left="_left_p0djk_16",right="_right_p0djk_21",maxTop="_maxTop_p0djk_27",maxBottom="_maxBottom_p0djk_33",maxLeft="_maxLeft_p0djk_40",maxRight="_maxRight_p0djk_41",fullWidth="_fullWidth_p0djk_56",overflowHidden="_overflowHidden_p0djk_60",positionAbsolute="_positionAbsolute_p0djk_64",full="_full_p0djk_56",styles$1B={droppable:droppable$1,top:top$1,bottom,left,right,maxTop,maxBottom,maxLeft,maxRight,fullWidth,overflowHidden,positionAbsolute,full},DnDDroppable=({children:K,isAbsolute:J,isTabs:ne,isTop:oe,isBottom:ce,isLeft:ue,isRight:Ae,isSingle:pe,isMaxTop:ve,isMaxBottom:me,isMaxLeft:ge,isMaxRight:ye,stackRef:xe,shouldApplyFullWidth:_e=!0,className:$e})=>{const Ie=reactExports.useRef(null),{state:Fe,action:ke}=useDndContext(),{config:je,leftMouseBtnClicked:We,isDragging:ze,initialTabsZone:Xe,draggingLabel:Je,startTabIndex:nt,endTabIndex:et,dropMarker:tt,dropPreview:st,managerRef:qe,droppableElRef:Se,draggingTabRef:Re,isWithinTabs:Be,placeholder:Ne,isTabExistInStackRef:Ue}=Fe,{updateConfig:Ge,setIsDragging:Ye,setTabsZone:Qe,setDropZone:Te,setTargetStackRef:Ke,setDraggingLabel:rt,setEndTabIndex:it,updateIsWithinTabs:at,setPlaceholder:lt,setShouldInsertPlaceholder:ct}=ke;reactExports.useEffect(()=>{var kt,wt;if(((kt=Ie.current)==null?void 0:kt.dataset.position)==="max-top"&&qe.current){const Et=(wt=qe.current.querySelector(".stack-content"))==null?void 0:wt.getBoundingClientRect();Ie.current.style.top=`${Et==null?void 0:Et.top}px`}},[je,ze]);const ot=reactExports.useCallback(()=>{if(!We||!Ie.current||!tt.current||!st.current)return;if(Ie.current.classList.contains("tabs")){st.current.classList.add("displayNone");const{childElementCount:Et}=Ie.current.querySelector(".ant-tabs-nav-list")||1,Ot=xe&&isConfigType(xe)&&xe.content.some(Rt=>Rt.id===(Je==null?void 0:Je.id));Ue.current=Ot===void 0?null:Ot,it(Ot?Et-1:Et),Qe(Ie.current),Ke(xe),tt.current.classList.add("displayNone");return}Qe(null),tt.current.classList.remove("displayNone"),st.current.classList.remove("displayNone");const kt=Ie.current.getBoundingClientRect(),wt=Ie.current.parentElement.getBoundingClientRect();tt.current.style.top=`${kt.top}px`,Ie.current.classList.contains("right")?tt.current.style.left=`${wt.right-wt.width/2}px`:tt.current.style.left=`${kt.left}px`,Ie.current.classList.contains("left")||Ie.current.classList.contains("right")?tt.current.style.width=`${wt.width/2}px`:tt.current.style.width=Ie.current.classList.contains("single")?"100%":`${kt.width}px`,tt.current.style.height=`${kt.height}px`,Te(Ie.current)},[ze,Je,We]),ft=reactExports.useCallback(()=>{var Et,Ot,Rt,gt,$t,pt,vt,Mt,St,_t,Xt,Tt,Dt,Ht,Bt,It,zt,Pt,Vt,vr,qt,er,yr,Lt;if(!ze||!st.current)return;Ne==null||Ne.remove(),lt(null),ct(!0);const kt=JSON.parse(JSON.stringify(je)),wt=findParent(kt,[Je.id]);if(Je!=null&&Je.isMainGridTab&&(wt.isMainGrid=!1),((Et=Ie.current)==null?void 0:Et.dataset.position)==="left"||((Ot=Ie.current)==null?void 0:Ot.dataset.position)==="right"||((Rt=Ie.current)==null?void 0:Rt.dataset.position)==="top"||((gt=Ie.current)==null?void 0:gt.dataset.position)==="bottom"||(($t=Ie.current)==null?void 0:$t.dataset.position)==="max-left"||((pt=Ie.current)==null?void 0:pt.dataset.position)==="max-right"||((vt=Ie.current)==null?void 0:vt.dataset.position)==="max-bottom"||((Mt=Ie.current)==null?void 0:Mt.dataset.position)==="max-top"){const jt=filterConfigContent(kt,Je);jt.key=`${jt.type}-${(St=jt.content[0])==null?void 0:St.key.replace(/\s/g,"")}`,jt.id=`${jt.type}-${(_t=jt.content[0])==null?void 0:_t.key.replace(/\s/g,"")}`,Je!=null&&Je.isMainGridTab&&(jt.isMainGrid=!1),Je!=null&&Je.isMainGridTab&&jt.content.forEach(ar=>{const Wt=ar;Wt.isMainGrid=!1}),Je.isActive=!0;const fr={type:StackEnum.STACK,key:`stack-${Je.key.replace(/\s/g,"")}`,id:`stack-${Je.key.replace(/\s/g,"")}`,isMainGrid:(Je==null?void 0:Je.isMainGridTab)||!1,content:[Je]},Gt=((Xt=Ie.current)==null?void 0:Xt.dataset.position)==="right"||((Tt=Ie.current)==null?void 0:Tt.dataset.position)==="left"||((Dt=Ie.current)==null?void 0:Dt.dataset.position)==="max-left"||((Ht=Ie.current)==null?void 0:Ht.dataset.position)==="max-right",Jt={type:`${Gt?StackEnum.ROW:StackEnum.COLUMN}`,key:`${Gt?StackEnum.ROW:StackEnum.COLUMN}-1`,id:`${Gt?StackEnum.ROW:StackEnum.COLUMN}-1`,isMainGrid:!1,size:DefaultPanelSize.DEFAULT,content:[]};if(jt.type===StackEnum.ROW||jt.type===StackEnum.COLUMN){const ar=findParent(jt,[xe.key])||xe,Wt=ar.content.findIndex(Zt=>Zt.id===xe.key);Jt.content=[...((Bt=Ie.current)==null?void 0:Bt.dataset.position)==="left"||((It=Ie.current)==null?void 0:It.dataset.position)==="max-left"||((zt=Ie.current)==null?void 0:zt.dataset.position)==="top"||((Pt=Ie.current)==null?void 0:Pt.dataset.position)==="max-top"?[fr,Wt>=0?ar.content[Wt]:jt]:[Wt>=0?ar.content[Wt]:jt,fr]],Wt>=0&&ar.content.splice(Wt,1,Jt),Jt.key=`${Jt.type}-${Jt.content[0].key.replace(/\s/g,"")}`,Jt.id=`${Jt.type}-${Jt.content[0].key.replace(/\s/g,"")}`;const nr=correctContent(Wt>=0?jt:Jt);nr.key=`${nr.type}-${nr.content[0].key.replace(/\s/g,"")}`,nr.id=`${nr.type}-${nr.content[0].key.replace(/\s/g,"")}`;const Er=getParsedConfig(nr,!0);Ge(nr),ke.saveUiTypeData({simplifiedConfig:Er})}else{Jt.content=[...((Vt=Ie.current)==null?void 0:Vt.dataset.position)==="left"||((vr=Ie.current)==null?void 0:vr.dataset.position)==="max-left"||((qt=Ie.current)==null?void 0:qt.dataset.position)==="top"||((er=Ie.current)==null?void 0:er.dataset.position)==="max-top"?[fr,jt]:[jt,fr]],correctContent(Jt),Jt.key=`${Gt?StackEnum.ROW:StackEnum.COLUMN}-${Jt.content[0].key.replace(/\s/g,"")}`,Jt.id=`${Gt?StackEnum.ROW:StackEnum.COLUMN}-${Jt.content[0].key.replace(/\s/g,"")}`;const ar=getParsedConfig(Jt,!0);Ge(Jt),ke.saveUiTypeData({simplifiedConfig:ar})}}if(((yr=Ie.current)==null?void 0:yr.dataset.position)==="tabs"){const jt=findParent(kt,[Je.key]);if(!jt)return;if(jt.key!==xe.key){const ar=findTarget(kt,xe.key);if(!ar)return;ar.content.forEach(Wt=>{const nr=Wt;isGridTabDataType(nr)&&(nr.isActive=!1)}),Je.isActive=!0,ar.isMainGrid=ar.isMainGrid||!!(Je!=null&&Je.isMainGridTab),ar.content.splice(et,0,Je),jt.content.splice(nt,1)}else{Je!=null&&Je.isMainGridTab&&(wt.isMainGrid=!0),setActiveFalse(wt,Je);const ar=reorderTabs(jt.content,nt,et);jt.content=ar}const fr=correctContent(kt);fr.size=DefaultPanelSize.FULL_VIEW,setDraggingTabUndragging(fr,Je);const Gt=getParsedConfig(fr,!0);Ge(fr),ke.saveUiTypeData({simplifiedConfig:Gt});let Jt=(Lt=Ie.current.querySelector(".ant-tabs-nav-list"))==null?void 0:Lt.firstChild;for(;Jt;)Jt.removeAttribute("style"),Jt=Jt.nextSibling;if(Ie.current!==Xe){let ar=Xe==null?void 0:Xe.firstChild;for(;ar;)ar.removeAttribute("style"),ar=ar.nextSibling}}st.current.classList.add("displayNone"),st.current.removeAttribute("style"),Ye(!1),rt(null),at(!0),Ie.current.removeAttribute("style")},[je,Je,ze,nt,et,We,Xe,Be,Ne]),dt=()=>{Se.current=Ie.current,Qe(Ie.current),Ke(xe)},mt=reactExports.useCallback(kt=>{var Et,Ot;if(!ze)return;(Et=Ie.current)!=null&&Et.classList.contains("tabs")&&(it(Number((Ot=Re.current)==null?void 0:Ot.dataset.index)),at(!1));let wt=kt==null?void 0:kt.firstChild;for(;wt;)wt.style.transform="",wt=wt.nextSibling},[xe,ze,Je,Be]);return jsxRuntimeExports.jsx("div",{ref:Ie,className:cx("droppable",{displayNone:!ze&&!ne,[styles$1B.fullWidth]:_e&&ne,[styles$1B.overflowHidden]:_e&&ne,[styles$1B.positionAbsolute]:J,tabs:ne},oe&&styles$1B.top,ce&&styles$1B.bottom,{left:ue,[styles$1B.left]:ue},{right:Ae,[styles$1B.right]:Ae},{single:pe},{[styles$1B.full]:pe,maxTop:ve,[styles$1B.maxTop]:ve},{maxTop:ve,[styles$1B.maxTop]:ve},{maxBottom:me,[styles$1B.maxBottom]:me},{maxLeft:ge,[styles$1B.maxLeft]:ge},{maxRight:ye,[styles$1B.maxRight]:ye},styles$1B.droppable,$e),"data-position":Ae&&"right"||ue&&"left"||oe&&"top"||ce&&"bottom"||ne&&"tabs"||pe&&"single"||ve&&"max-top"||me&&"max-bottom"||ge&&"max-left"||ye&&"max-right",onMouseDown:dt,onMouseEnter:ot,onMouseUp:ft,onMouseLeave:()=>mt(Ie.current),children:K})},DropBox=({position:K,stackRef:J,children:ne,shouldApplyFullWidth:oe=!0,className:ce})=>{switch(K){case DropBoxEnum.GLOBAL:return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isMaxTop:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isMaxBottom:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isMaxLeft:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isMaxRight:!0,stackRef:J})]});case DropBoxEnum.TOP:return jsxRuntimeExports.jsx(DnDDroppable,{isTabs:!0,stackRef:J,shouldApplyFullWidth:oe,className:ce,children:ne});case DropBoxEnum.SINGLE:return jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isSingle:!0,stackRef:J});default:return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isTop:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isBottom:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isLeft:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isRight:!0,stackRef:J})]})}},cleanTypeHelper=K=>(K==null?void 0:K.split(".").pop())||"",container$J="_container_1e3ls_1",wrapper$2="_wrapper_1e3ls_12",icon$1="_icon_1e3ls_19",content$e="_content_1e3ls_26",additionalContent="_additionalContent_1e3ls_32",pagination$2="_pagination_1e3ls_38",styles$1A={container:container$J,wrapper:wrapper$2,icon:icon$1,content:content$e,additionalContent,pagination:pagination$2},NoGridData=K=>{const{NoGridDataInner:J}=useComponentsMapper();return jsxRuntimeExports.jsx(J,{...K})},NoGridDataInner=({content:K,isRefreshButton:J=!1,handleButtonClick:ne,containerClassname:oe,additionalContent:ce,icon:ue,loading:Ae,getPaginationBlock:pe,buttonIcon:ve=jsxRuntimeExports.jsx(Pk,{}),buttonTitle:me="noData.refresh"})=>{const{t:ge}=useTranslation();return jsxRuntimeExports.jsx(PF,{loading:Ae,children:K?jsxRuntimeExports.jsxs("div",{className:cx(styles$1A.container,oe),children:[jsxRuntimeExports.jsxs("div",{className:styles$1A.wrapper,children:[ue&&jsxRuntimeExports.jsx("div",{className:styles$1A.icon,children:ue}),typeof K=="string"?jsxRuntimeExports.jsx("span",{className:styles$1A.content,children:K}):K,ce&&jsxRuntimeExports.jsx("span",{className:styles$1A.additionalContent,children:ce}),J&&jsxRuntimeExports.jsx(rl,{iconBefore:ve,type:"primary",onClick:ne,children:ge(me)})]}),pe==null?void 0:pe(styles$1A.pagination)]}):null})};let Collection$3=class{constructor(J,ne){if(J==null&&ne==null)this._data=[],this._refs=[];else{if(J.length!==ne.length)throw Error("Collection: data length should match references length.");this._data=J,this._refs=ne}}get data(){return this._data}get refs(){return this._refs}get length(){return this._data.length}add(J,ne){this._data.push(J),this._refs.push(ne)}};var collection=Collection$3,helpers,hasRequiredHelpers;function requireHelpers(){if(hasRequiredHelpers)return helpers;hasRequiredHelpers=1;const K=requireError(),J=collection,ne={NUMBER:0,ARRAY:1,BOOLEAN:2,STRING:3,RANGE_REF:4,CELL_REF:5,COLLECTIONS:6,NUMBER_NO_BOOLEAN:10},oe=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142],ce={};Object.keys(ne).forEach(ge=>{ce[ne[ge]]=ge});class ue{constructor(){this.Types=ne,this.type2Number={number:ne.NUMBER,boolean:ne.BOOLEAN,string:ne.STRING,object:-1}}checkFunctionResult(ye){if(typeof ye==="number"){if(isNaN(ye))return K.VALUE;if(!isFinite(ye))return K.NUM}return ye??K.NULL}flattenDeep(ye){return ye.reduce((xe,_e)=>Array.isArray(_e)?xe.concat(this.flattenDeep(_e)):xe.concat(_e),[])}acceptNumber(ye,xe=!0,_e=!0){if(ye instanceof K)return ye;let $e;if(typeof ye=="number")$e=ye;else if(typeof ye=="boolean")if(_e)$e=Number(ye);else throw K.VALUE;else if(typeof ye=="string"){if(ye.length===0||($e=Number(ye),$e!==$e))throw K.VALUE}else if(Array.isArray(ye))if(xe)$e=this.acceptNumber(ye[0][0]);else if(ye[0].length===1)$e=this.acceptNumber(ye[0][0]);else throw K.VALUE;else throw Error("Unknown type in FormulaHelpers.acceptNumber");return $e}flattenParams(ye,xe,_e,$e,Ie=null,Fe=1){if(ye.length<Fe)throw K.ARG_MISSING([xe]);Ie==null&&(Ie=xe===ne.NUMBER?0:xe==null?null:""),ye.forEach(ke=>{const{isCellRef:je,isRangeRef:We,isArray:ze}=ke,Xe=ke.value instanceof J,Je=!je&&!We&&!ze&&!Xe,nt={isLiteral:Je,isCellRef:je,isRangeRef:We,isArray:ze,isUnion:Xe};if(Je)ke.omitted?ke=Ie:ke=this.accept(ke,xe,Ie),$e(ke,nt);else if(je)$e(ke.value,nt);else if(Xe){if(!_e)throw K.VALUE;ke=ke.value.data,ke=this.flattenDeep(ke),ke.forEach(et=>{$e(et,nt)})}else(We||ze)&&(ke=this.flattenDeep(ke.value),ke.forEach(et=>{$e(et,nt)}))})}accept(ye,xe=null,_e,$e=!0,Ie=!1){if(Array.isArray(xe)&&(xe=xe[0]),ye==null&&_e===void 0)throw K.ARG_MISSING([xe]);if(ye==null)return _e;if(typeof ye!="object"||Array.isArray(ye))return ye;const Fe=ye.isArray;if(ye.value!=null&&(ye=ye.value),xe==null)return ye;if(ye instanceof K)throw ye;if(xe===ne.ARRAY){if(Array.isArray(ye))return $e?this.flattenDeep(ye):ye;if(ye instanceof J)throw K.VALUE;if(Ie)return $e?[ye]:[[ye]];throw K.VALUE}else if(xe===ne.COLLECTIONS)return ye;Fe&&(ye=ye[0][0]);const ke=this.type(ye);if(xe===ne.STRING)ke===ne.BOOLEAN?ye=ye?"TRUE":"FALSE":ye=`${ye}`;else if(xe===ne.BOOLEAN){if(ke===ne.STRING)throw K.VALUE;ke===ne.NUMBER&&(ye=!!ye)}else if(xe===ne.NUMBER)ye=this.acceptNumber(ye,!1);else if(xe===ne.NUMBER_NO_BOOLEAN)ye=this.acceptNumber(ye,!1,!1);else throw K.VALUE;return ye}type(ye){let xe=this.type2Number[typeof ye];return xe===-1&&(Array.isArray(ye)?xe=ne.ARRAY:ye.ref?ye.ref.from?xe=ne.RANGE_REF:xe=ne.CELL_REF:ye instanceof J&&(xe=ne.COLLECTIONS)),xe}isRangeRef(ye){return ye.ref&&ye.ref.from}isCellRef(ye){return ye.ref&&!ye.ref.from}retrieveRanges(ye,xe,_e){return _e=me.extend(xe,_e),xe=this.retrieveArg(ye,xe),xe=Ae.accept(xe,ne.ARRAY,void 0,!1,!0),_e!==xe?(_e=this.retrieveArg(ye,_e),_e=Ae.accept(_e,ne.ARRAY,void 0,!1,!0)):_e=xe,[xe,_e]}retrieveArg(ye,xe){if(xe===null)return{value:0,isArray:!1,omitted:!0};const _e=ye.utils.extractRefValue(xe);return{value:_e.val,isArray:_e.isArray,ref:xe.ref}}}const Ae=new ue,pe={isWildCard:ge=>typeof ge=="string"?/[*?]/.test(ge):!1,toRegex:(ge,ye)=>RegExp(ge.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/([^~]??)[?]/g,"$1.").replace(/([^~]??)[*]/g,"$1.*").replace(/~([?*])/g,"$1"),ye)},ve={parse:ge=>{const ye=typeof ge;if(ye==="string"){const xe=ge.toUpperCase();if(xe==="TRUE"||xe==="FALSE")return{op:"=",value:xe==="TRUE"};const _e=ge.match(/(<>|>=|<=|>|<|=)(.*)/);if(_e){let $e=_e[1],Ie;if(isNaN(_e[2])){const Fe=_e[2].toUpperCase();if(Fe==="TRUE"||Fe==="FALSE")Ie=Fe==="TRUE";else if(/#NULL!|#DIV\/0!|#VALUE!|#NAME\?|#NUM!|#N\/A|#REF!/.test(_e[2]))Ie=new K(_e[2]);else if(Ie=_e[2],pe.isWildCard(Ie))return{op:"wc",value:pe.toRegex(Ie),match:$e==="="}}else Ie=Number(_e[2]);return{op:$e,value:Ie}}else return pe.isWildCard(ge)?{op:"wc",value:pe.toRegex(ge),match:!0}:{op:"=",value:ge}}else{if(ye==="boolean"||ye==="number"||Array.isArray(ge)||ge instanceof K)return{op:"=",value:ge};throw Error(`Criteria.parse: type ${typeof ge} not support`)}}},me={columnNumberToName:ge=>{let ye=ge,xe="",_e=0;for(;ye>0;)_e=(ye-1)%26,xe=String.fromCharCode(65+_e)+xe,ye=Math.floor((ye-_e)/26);return xe},columnNameToNumber:ge=>{ge=ge.toUpperCase();const ye=ge.length;let xe=0;for(let _e=0;_e<ye;_e++){const $e=ge.charCodeAt(_e);isNaN($e)||(xe+=($e-64)*26**(ye-_e-1))}return xe},extend:(ge,ye)=>{if(ye==null)return ge;let xe,_e;if(Ae.isCellRef(ge))xe=0,_e=0;else if(Ae.isRangeRef(ge))xe=ge.ref.to.row-ge.ref.from.row,_e=ge.ref.to.col-ge.ref.from.col;else throw Error("Address.extend should not reach here.");return Ae.isCellRef(ye)?(xe>0||_e>0)&&(ye={ref:{from:{col:ye.ref.col,row:ye.ref.row},to:{row:ye.ref.row+xe,col:ye.ref.col+_e}}}):(ye.ref.to.row=ye.ref.from.row+xe,ye.ref.to.col=ye.ref.from.col+_e),ye}};return helpers={FormulaHelpers:Ae,Types:ne,ReversedTypes:ce,Factorials:oe,WildCard:pe,Criteria:ve,Address:me},helpers}var error,hasRequiredError;function requireError(){if(hasRequiredError)return error;hasRequiredError=1;class K extends Error{constructor(ne,oe,ce){if(super(oe),oe==null&&ce==null&&K.errorMap.has(ne))return K.errorMap.get(ne);oe==null&&ce==null?(this._error=ne,K.errorMap.set(ne,this)):this._error=ne,this.details=ce}get error(){return this._error}get name(){return this._error}equals(ne){return ne instanceof K&&ne._error===this._error}toString(){return this._error}}return K.errorMap=new Map,K.DIV0=new K("#DIV/0!"),K.NA=new K("#N/A"),K.NAME=new K("#NAME?"),K.NULL=new K("#NULL!"),K.NUM=new K("#NUM!"),K.REF=new K("#REF!"),K.VALUE=new K("#VALUE!"),K.NOT_IMPLEMENTED=J=>new K("#NAME?",`Function ${J} is not implemented.`),K.TOO_MANY_ARGS=J=>new K("#N/A",`Function ${J} has too many arguments.`),K.ARG_MISSING=J=>{const{Types:ne}=requireHelpers();return new K("#N/A",`Argument type ${J.map(oe=>ne[oe]).join(", ")} is missing.`)},K.ERROR=(J,ne)=>new K("#ERROR!",J,ne),error=K,error}let SSF$1=class{};SSF$1.version="0.10.3";function _strrev(K){let J="",ne=K.length-1;for(;ne>=0;)J+=K.charAt(ne--);return J}function fill(K,J){let ne="";for(;ne.length<J;)ne+=K;return ne}function pad0(K,J){let ne=""+K;return ne.length>=J?ne:fill("0",J-ne.length)+ne}function pad_(K,J){let ne=""+K;return ne.length>=J?ne:fill(" ",J-ne.length)+ne}function rpad_(K,J){let ne=""+K;return ne.length>=J?ne:ne+fill(" ",J-ne.length)}function pad0r1(K,J){let ne=""+Math.round(K);return ne.length>=J?ne:fill("0",J-ne.length)+ne}function pad0r2(K,J){let ne=""+K;return ne.length>=J?ne:fill("0",J-ne.length)+ne}const p2_32=Math.pow(2,32);function pad0r(K,J){if(K>p2_32||K<-p2_32)return pad0r1(K,J);const ne=Math.round(K);return pad0r2(ne,J)}function isgeneral(K,J){return J=J||0,K.length>=7+J&&(K.charCodeAt(J)|32)===103&&(K.charCodeAt(J+1)|32)===101&&(K.charCodeAt(J+2)|32)===110&&(K.charCodeAt(J+3)|32)===101&&(K.charCodeAt(J+4)|32)===114&&(K.charCodeAt(J+5)|32)===97&&(K.charCodeAt(J+6)|32)===108}const days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function init_table(K){K[0]="General",K[1]="0",K[2]="0.00",K[3]="#,##0",K[4]="#,##0.00",K[9]="0%",K[10]="0.00%",K[11]="0.00E+00",K[12]="# ?/?",K[13]="# ??/??",K[14]="m/d/yy",K[15]="d-mmm-yy",K[16]="d-mmm",K[17]="mmm-yy",K[18]="h:mm AM/PM",K[19]="h:mm:ss AM/PM",K[20]="h:mm",K[21]="h:mm:ss",K[22]="m/d/yy h:mm",K[37]="#,##0 ;(#,##0)",K[38]="#,##0 ;[Red](#,##0)",K[39]="#,##0.00;(#,##0.00)",K[40]="#,##0.00;[Red](#,##0.00)",K[45]="mm:ss",K[46]="[h]:mm:ss",K[47]="mmss.0",K[48]="##0.0E+0",K[49]="@",K[56]='"/ "hh""mm""ss" "',K[65535]="General"}const table_fmt={};init_table(table_fmt);function frac(K,J,ne){const oe=K<0?-1:1;let ce=K*oe,ue=0,Ae=1,pe=0,ve=1,me=0,ge=0,ye=Math.floor(ce);for(;me<J&&(ye=Math.floor(ce),pe=ye*Ae+ue,ge=ye*me+ve,!(ce-ye<5e-8));)ce=1/(ce-ye),ue=Ae,Ae=pe,ve=me,me=ge;if(ge>J&&(me>J?(ge=ve,pe=ue):(ge=me,pe=Ae)),!ne)return[0,oe*pe,ge];const xe=Math.floor(oe*pe/ge);return[xe,oe*pe-xe*ge,ge]}function parse_date_code(K,J,ne){if(K>2958465||K<0)return null;let oe=K|0,ce=Math.floor(86400*(K-oe)),ue=0,Ae=[];const pe={D:oe,T:ce,u:86400*(K-oe)-ce,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(pe.u)<1e-6&&(pe.u=0),J&&J.date1904&&(oe+=1462),pe.u>.9999&&(pe.u=0,++ce===86400&&(pe.T=ce=0,++oe,++pe.D)),oe===60)Ae=ne?[1317,10,29]:[1900,2,29],ue=3;else if(oe===0)Ae=ne?[1317,8,29]:[1900,1,0],ue=6;else{oe>60&&--oe;const ve=new Date(1900,0,1);ve.setDate(ve.getDate()+oe-1),Ae=[ve.getFullYear(),ve.getMonth()+1,ve.getDate()],ue=ve.getDay(),oe<60&&(ue=(ue+6)%7),ne&&(ue=fix_hijri())}return pe.y=Ae[0],pe.m=Ae[1],pe.d=Ae[2],pe.S=ce%60,ce=Math.floor(ce/60),pe.M=ce%60,ce=Math.floor(ce/60),pe.H=ce,pe.q=ue,pe}SSF$1.parse_date_code=parse_date_code;const basedate=new Date(1899,11,31,0,0,0),dnthresh=basedate.getTime(),base1904=new Date(1900,2,1,0,0,0);function datenum_local(K,J){let ne=K.getTime();return J?ne-=1461*24*60*60*1e3:K>=base1904&&(ne+=24*60*60*1e3),(ne-(dnthresh+(K.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function general_fmt_int(K){return K.toString(10)}SSF$1._general_int=general_fmt_int;const general_fmt_num=function(){const J=/\.(\d*[1-9])0+$/,ne=/\.0*$/,oe=/\.(\d*[1-9])0+/,ce=/\.0*[Ee]/,ue=/(E[+-])(\d)$/;function Ae(ge){const ye=ge<0?12:11;let xe=me(ge.toFixed(12));return xe.length<=ye||(xe=ge.toPrecision(10),xe.length<=ye)?xe:ge.toExponential(5)}function pe(ge){let ye=ge.toFixed(11).replace(J,".$1");return ye.length>(ge<0?12:11)&&(ye=ge.toPrecision(6)),ye}function ve(ge){for(let ye=0;ye!==ge.length;++ye)if((ge.charCodeAt(ye)|32)===101)return ge.replace(oe,".$1").replace(ce,"E").replace("e","E").replace(ue,"$10$2");return ge}function me(ge){return ge.indexOf(".")>-1?ge.replace(ne,"").replace(J,".$1"):ge}return function(ye){let xe=Math.floor(Math.log(Math.abs(ye))*Math.LOG10E),_e;return xe>=-4&&xe<=-1?_e=ye.toPrecision(10+xe):Math.abs(xe)<=9?_e=Ae(ye):xe===10?_e=ye.toFixed(10).substr(0,12):_e=pe(ye),me(ve(_e))}}();SSF$1._general_num=general_fmt_num;function general_fmt(K,J){switch(typeof K){case"string":return K;case"boolean":return K?"TRUE":"FALSE";case"number":return(K|0)===K?general_fmt_int(K):general_fmt_num(K);case"undefined":return"";case"object":if(K==null)return"";if(K instanceof Date)return format(14,datenum_local(K,J&&J.date1904),J)}throw new Error("unsupported value in General format: "+K)}SSF$1._general=general_fmt;function fix_hijri(){return 0}function write_date(K,J,ne,oe){let ce="",ue=0,Ae=0,pe=ne.y,ve,me=0;switch(K){case 98:pe=ne.y+543;case 121:switch(J.length){case 1:case 2:ve=pe%100,me=2;break;default:ve=pe%1e4,me=4;break}break;case 109:switch(J.length){case 1:case 2:ve=ne.m,me=J.length;break;case 3:return months[ne.m-1][1];case 5:return months[ne.m-1][0];default:return months[ne.m-1][2]}break;case 100:switch(J.length){case 1:case 2:ve=ne.d,me=J.length;break;case 3:return days[ne.q][0];default:return days[ne.q][1]}break;case 104:switch(J.length){case 1:case 2:ve=1+(ne.H+11)%12,me=J.length;break;default:throw"bad hour format: "+J}break;case 72:switch(J.length){case 1:case 2:ve=ne.H,me=J.length;break;default:throw"bad hour format: "+J}break;case 77:switch(J.length){case 1:case 2:ve=ne.M,me=J.length;break;default:throw"bad minute format: "+J}break;case 115:if(J!=="s"&&J!=="ss"&&J!==".0"&&J!==".00"&&J!==".000")throw"bad second format: "+J;return ne.u===0&&(J==="s"||J==="ss")?pad0(ne.S,J.length):(oe>=2?Ae=oe===3?1e3:100:Ae=oe===1?10:1,ue=Math.round(Ae*(ne.S+ne.u)),ue>=60*Ae&&(ue=0),J==="s"?ue===0?"0":""+ue/Ae:(ce=pad0(ue,2+oe),J==="ss"?ce.substr(0,2):"."+ce.substr(2,J.length-1)));case 90:switch(J){case"[h]":case"[hh]":ve=ne.D*24+ne.H;break;case"[m]":case"[mm]":ve=(ne.D*24+ne.H)*60+ne.M;break;case"[s]":case"[ss]":ve=((ne.D*24+ne.H)*60+ne.M)*60+Math.round(ne.S+ne.u);break;default:throw"bad abstime format: "+J}me=J.length===3?1:2;break;case 101:ve=pe,me=1}return me>0?pad0(ve,me):""}function commaify(K){if(K.length<=3)return K;let ne=K.length%3,oe=K.substr(0,ne);for(;ne!==K.length;ne+=3)oe+=(oe.length>0?",":"")+K.substr(ne,3);return oe}const write_num=function(){const J=/%/g;function ne(Xe,Je,nt){const et=Je.replace(J,""),tt=Je.length-et.length;return write_num(Xe,et,nt*Math.pow(10,2*tt))+fill("%",tt)}function oe(Xe,Je,nt){let et=Je.length-1;for(;Je.charCodeAt(et-1)===44;)--et;return write_num(Xe,Je.substr(0,et),nt/Math.pow(10,3*(Je.length-et)))}function ce(Xe,Je){let nt,et=Xe.indexOf("E")-Xe.indexOf(".")-1;if(Xe.match(/^#+0.0E\+0$/)){if(Je===0)return"0.0E+0";if(Je<0)return"-"+ce(Xe,-Je);let tt=Xe.indexOf(".");tt===-1&&(tt=Xe.indexOf("E"));let st=Math.floor(Math.log(Je)*Math.LOG10E)%tt;if(st<0&&(st+=tt),nt=(Je/Math.pow(10,st)).toPrecision(et+1+(tt+st)%tt),nt.indexOf("e")===-1){const qe=Math.floor(Math.log(Je)*Math.LOG10E);for(nt.indexOf(".")===-1?nt=nt.charAt(0)+"."+nt.substr(1)+"E+"+(qe-nt.length+st):nt+="E+"+(qe-st);nt.substr(0,2)==="0.";)nt=nt.charAt(0)+nt.substr(2,tt)+"."+nt.substr(2+tt),nt=nt.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");nt=nt.replace(/\+-/,"-")}nt=nt.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(qe,Se,Re,Be){return Se+Re+Be.substr(0,(tt+st)%tt)+"."+Be.substr(st)+"E"})}else nt=Je.toExponential(et);return Xe.match(/E\+00$/)&&nt.match(/e[+-]\d$/)&&(nt=nt.substr(0,nt.length-1)+"0"+nt.charAt(nt.length-1)),Xe.match(/E\-/)&&nt.match(/e\+/)&&(nt=nt.replace(/e\+/,"e")),nt.replace("e","E")}const ue=/# (\?+)( ?)\/( ?)(\d+)/;function Ae(Xe,Je,nt){const et=parseInt(Xe[4],10),tt=Math.round(Je*et),st=Math.floor(tt/et);let qe=tt-st*et,Se=et;return nt+(st===0?"":""+st)+" "+(qe===0?fill(" ",Xe[1].length+1+Xe[4].length):pad_(qe,Xe[1].length)+Xe[2]+"/"+Xe[3]+pad0(Se,Xe[4].length))}function pe(Xe,Je,nt){return nt+(Je===0?"":""+Je)+fill(" ",Xe[1].length+2+Xe[4].length)}const ve=/^#*0*\.([0#]+)/,me=/\).*[0#]/,ge=/\(###\) ###\\?-####/;function ye(Xe){let Je="",nt;for(let et=0;et!==Xe.length;++et)switch(nt=Xe.charCodeAt(et)){case 35:break;case 63:Je+=" ";break;case 48:Je+="0";break;default:Je+=String.fromCharCode(nt)}return Je}function xe(Xe,Je){const nt=Math.pow(10,Je);return""+Math.round(Xe*nt)/nt}function _e(Xe,Je){return Je<(""+Math.round((Xe-Math.floor(Xe))*Math.pow(10,Je))).length?0:Math.round((Xe-Math.floor(Xe))*Math.pow(10,Je))}function $e(Xe,Je){return Je<(""+Math.round((Xe-Math.floor(Xe))*Math.pow(10,Je))).length?1:0}function Ie(Xe){return Xe<2147483647&&Xe>-2147483648?""+(Xe>=0?Xe|0:Xe-1|0):""+Math.floor(Xe)}function Fe(Xe,Je,nt){if(Xe.charCodeAt(0)===40&&!Je.match(me)){const Ne=Je.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return nt>=0?Fe("n",Ne,nt):"("+Fe("n",Ne,-nt)+")"}if(Je.charCodeAt(Je.length-1)===44)return oe(Xe,Je,nt);if(Je.indexOf("%")!==-1)return ne(Xe,Je,nt);if(Je.indexOf("E")!==-1)return ce(Je,nt);if(Je.charCodeAt(0)===36)return"$"+Fe(Xe,Je.substr(Je.charAt(1)==" "?2:1),nt);let et,tt,st,qe,Se=Math.abs(nt),Re=nt<0?"-":"";if(Je.match(/^00+$/))return Re+pad0r(Se,Je.length);if(Je.match(/^[#?]+$/))return et=pad0r(nt,0),et==="0"&&(et=""),et.length>Je.length?et:ye(Je.substr(0,Je.length-et.length))+et;if(tt=Je.match(ue))return Ae(tt,Se,Re);if(Je.match(/^#+0+$/))return Re+pad0r(Se,Je.length-Je.indexOf("0"));if(tt=Je.match(ve))return et=xe(nt,tt[1].length).replace(/^([^\.]+)$/,"$1."+ye(tt[1])).replace(/\.$/,"."+ye(tt[1])).replace(/\.(\d*)$/,function(Ne,Ue){return"."+Ue+fill("0",ye(tt[1]).length-Ue.length)}),Je.indexOf("0.")!==-1?et:et.replace(/^0\./,".");if(Je=Je.replace(/^#+([0.])/,"$1"),tt=Je.match(/^(0*)\.(#*)$/))return Re+xe(Se,tt[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,tt[1].length?"0.":".");if(tt=Je.match(/^#{1,3},##0(\.?)$/))return Re+commaify(pad0r(Se,0));if(tt=Je.match(/^#,##0\.([#0]*0)$/))return nt<0?"-"+Fe(Xe,Je,-nt):commaify(""+(Math.floor(nt)+$e(nt,tt[1].length)))+"."+pad0(_e(nt,tt[1].length),tt[1].length);if(tt=Je.match(/^#,#*,#0/))return Fe(Xe,Je.replace(/^#,#*,/,""),nt);if(tt=Je.match(/^([0#]+)(\\?-([0#]+))+$/))return et=_strrev(Fe(Xe,Je.replace(/[\\-]/g,""),nt)),st=0,_strrev(_strrev(Je.replace(/\\/g,"")).replace(/[0#]/g,function(Ne){return st<et.length?et.charAt(st++):Ne==="0"?"0":""}));if(Je.match(ge))return et=Fe(Xe,"##########",nt),"("+et.substr(0,3)+") "+et.substr(3,3)+"-"+et.substr(6);let Be="";if(tt=Je.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return st=Math.min(tt[4].length,7),qe=frac(Se,Math.pow(10,st)-1,!1),et=""+Re,Be=write_num("n",tt[1],qe[1]),Be.charAt(Be.length-1)===" "&&(Be=Be.substr(0,Be.length-1)+"0"),et+=Be+tt[2]+"/"+tt[3],Be=rpad_(qe[2],st),Be.length<tt[4].length&&(Be=ye(tt[4].substr(tt[4].length-Be.length))+Be),et+=Be,et;if(tt=Je.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return st=Math.min(Math.max(tt[1].length,tt[4].length),7),qe=frac(Se,Math.pow(10,st)-1,!0),Re+(qe[0]||(qe[1]?"":"0"))+" "+(qe[1]?pad_(qe[1],st)+tt[2]+"/"+tt[3]+rpad_(qe[2],st):fill(" ",2*st+1+tt[2].length+tt[3].length));if(tt=Je.match(/^[#0?]+$/))return et=pad0r(nt,0),Je.length<=et.length?et:ye(Je.substr(0,Je.length-et.length))+et;if(tt=Je.match(/^([#0?]+)\.([#0]+)$/)){et=""+nt.toFixed(Math.min(tt[2].length,10)).replace(/([^0])0+$/,"$1"),st=et.indexOf(".");const Ne=Je.indexOf(".")-st,Ue=Je.length-et.length-Ne;return ye(Je.substr(0,Ne)+et+Je.substr(Je.length-Ue))}if(tt=Je.match(/^00,000\.([#0]*0)$/))return st=_e(nt,tt[1].length),nt<0?"-"+Fe(Xe,Je,-nt):commaify(Ie(nt)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(Ne){return"00,"+(Ne.length<3?pad0(0,3-Ne.length):"")+Ne})+"."+pad0(st,tt[1].length);switch(Je){case"###,##0.00":return Fe(Xe,"#,##0.00",nt);case"###,###":case"##,###":case"#,###":const Ne=commaify(pad0r(Se,0));return Ne!=="0"?Re+Ne:"";case"###,###.00":return Fe(Xe,"###,##0.00",nt).replace(/^0\./,".");case"#,###.00":return Fe(Xe,"#,##0.00",nt).replace(/^0\./,".")}throw new Error("unsupported format |"+Je+"|")}function ke(Xe,Je,nt){let et=Je.length-1;for(;Je.charCodeAt(et-1)===44;)--et;return write_num(Xe,Je.substr(0,et),nt/Math.pow(10,3*(Je.length-et)))}function je(Xe,Je,nt){const et=Je.replace(J,""),tt=Je.length-et.length;return write_num(Xe,et,nt*Math.pow(10,2*tt))+fill("%",tt)}function We(Xe,Je){let nt,et=Xe.indexOf("E")-Xe.indexOf(".")-1;if(Xe.match(/^#+0.0E\+0$/)){if(Je===0)return"0.0E+0";if(Je<0)return"-"+We(Xe,-Je);let tt=Xe.indexOf(".");tt===-1&&(tt=Xe.indexOf("E"));let st=Math.floor(Math.log(Je)*Math.LOG10E)%tt;if(st<0&&(st+=tt),nt=(Je/Math.pow(10,st)).toPrecision(et+1+(tt+st)%tt),!nt.match(/[Ee]/)){const qe=Math.floor(Math.log(Je)*Math.LOG10E);nt.indexOf(".")===-1?nt=nt.charAt(0)+"."+nt.substr(1)+"E+"+(qe-nt.length+st):nt+="E+"+(qe-st),nt=nt.replace(/\+-/,"-")}nt=nt.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(qe,Se,Re,Be){return Se+Re+Be.substr(0,(tt+st)%tt)+"."+Be.substr(st)+"E"})}else nt=Je.toExponential(et);return Xe.match(/E\+00$/)&&nt.match(/e[+-]\d$/)&&(nt=nt.substr(0,nt.length-1)+"0"+nt.charAt(nt.length-1)),Xe.match(/E\-/)&&nt.match(/e\+/)&&(nt=nt.replace(/e\+/,"e")),nt.replace("e","E")}function ze(Xe,Je,nt){if(Xe.charCodeAt(0)===40&&!Je.match(me)){const Ne=Je.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return nt>=0?ze("n",Ne,nt):"("+ze("n",Ne,-nt)+")"}if(Je.charCodeAt(Je.length-1)===44)return ke(Xe,Je,nt);if(Je.indexOf("%")!==-1)return je(Xe,Je,nt);if(Je.indexOf("E")!==-1)return We(Je,nt);if(Je.charCodeAt(0)===36)return"$"+ze(Xe,Je.substr(Je.charAt(1)==" "?2:1),nt);let et,tt,st,qe,Se=Math.abs(nt),Re=nt<0?"-":"";if(Je.match(/^00+$/))return Re+pad0(Se,Je.length);if(Je.match(/^[#?]+$/))return et=""+nt,nt===0&&(et=""),et.length>Je.length?et:ye(Je.substr(0,Je.length-et.length))+et;if(tt=Je.match(ue))return pe(tt,Se,Re);if(Je.match(/^#+0+$/))return Re+pad0(Se,Je.length-Je.indexOf("0"));if(tt=Je.match(ve))return et=(""+nt).replace(/^([^\.]+)$/,"$1."+ye(tt[1])).replace(/\.$/,"."+ye(tt[1])),et=et.replace(/\.(\d*)$/,function(Ne,Ue){return"."+Ue+fill("0",ye(tt[1]).length-Ue.length)}),Je.indexOf("0.")!==-1?et:et.replace(/^0\./,".");if(Je=Je.replace(/^#+([0.])/,"$1"),tt=Je.match(/^(0*)\.(#*)$/))return Re+(""+Se).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,tt[1].length?"0.":".");if(tt=Je.match(/^#{1,3},##0(\.?)$/))return Re+commaify(""+Se);if(tt=Je.match(/^#,##0\.([#0]*0)$/))return nt<0?"-"+ze(Xe,Je,-nt):commaify(""+nt)+"."+fill("0",tt[1].length);if(tt=Je.match(/^#,#*,#0/))return ze(Xe,Je.replace(/^#,#*,/,""),nt);if(tt=Je.match(/^([0#]+)(\\?-([0#]+))+$/))return et=_strrev(ze(Xe,Je.replace(/[\\-]/g,""),nt)),st=0,_strrev(_strrev(Je.replace(/\\/g,"")).replace(/[0#]/g,function(Ne){return st<et.length?et.charAt(st++):Ne==="0"?"0":""}));if(Je.match(ge))return et=ze(Xe,"##########",nt),"("+et.substr(0,3)+") "+et.substr(3,3)+"-"+et.substr(6);let Be="";if(tt=Je.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return st=Math.min(tt[4].length,7),qe=frac(Se,Math.pow(10,st)-1,!1),et=""+Re,Be=write_num("n",tt[1],qe[1]),Be.charAt(Be.length-1)==" "&&(Be=Be.substr(0,Be.length-1)+"0"),et+=Be+tt[2]+"/"+tt[3],Be=rpad_(qe[2],st),Be.length<tt[4].length&&(Be=ye(tt[4].substr(tt[4].length-Be.length))+Be),et+=Be,et;if(tt=Je.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return st=Math.min(Math.max(tt[1].length,tt[4].length),7),qe=frac(Se,Math.pow(10,st)-1,!0),Re+(qe[0]||(qe[1]?"":"0"))+" "+(qe[1]?pad_(qe[1],st)+tt[2]+"/"+tt[3]+rpad_(qe[2],st):fill(" ",2*st+1+tt[2].length+tt[3].length));if(tt=Je.match(/^[#0?]+$/))return et=""+nt,Je.length<=et.length?et:ye(Je.substr(0,Je.length-et.length))+et;if(tt=Je.match(/^([#0]+)\.([#0]+)$/)){et=""+nt.toFixed(Math.min(tt[2].length,10)).replace(/([^0])0+$/,"$1"),st=et.indexOf(".");let Ne=Je.indexOf(".")-st,Ue=Je.length-et.length-Ne;return ye(Je.substr(0,Ne)+et+Je.substr(Je.length-Ue))}if(tt=Je.match(/^00,000\.([#0]*0)$/))return nt<0?"-"+ze(Xe,Je,-nt):commaify(""+nt).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(Ne){return"00,"+(Ne.length<3?pad0(0,3-Ne.length):"")+Ne})+"."+pad0(0,tt[1].length);switch(Je){case"###,###":case"##,###":case"#,###":const Ne=commaify(""+Se);return Ne!=="0"?Re+Ne:"";default:if(Je.match(/\.[0#?]*$/))return ze(Xe,Je.slice(0,Je.lastIndexOf(".")),nt)+ye(Je.slice(Je.lastIndexOf(".")))}throw new Error("unsupported format |"+Je+"|")}return function(Je,nt,et){return(et|0)===et?ze(Je,nt,et):Fe(Je,nt,et)}}();function split_fmt(K){const J=[];let ne=!1,oe=0;for(let ce=0;ce<K.length;++ce)switch(K.charCodeAt(ce)){case 34:ne=!ne;break;case 95:case 42:case 92:++ce;break;case 59:J[J.length]=K.substr(oe,ce-oe),oe=ce+1}if(J[J.length]=K.substr(oe),ne===!0)throw new Error("Format |"+K+"| unterminated string ");return J}SSF$1._split=split_fmt;const abstime=/\[[HhMmSs]*\]/;function fmt_is_date(K){let J=0,ne="",oe="";for(;J<K.length;)switch(ne=K.charAt(J)){case"G":isgeneral(K,J)&&(J+=6),J++;break;case'"':for(;K.charCodeAt(++J)!==34&&J<K.length;)++J;++J;break;case"\\":J+=2;break;case"_":J+=2;break;case"@":++J;break;case"B":case"b":if(K.charAt(J+1)==="1"||K.charAt(J+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":if(K.substr(J,3).toUpperCase()==="A/P"||K.substr(J,5).toUpperCase()==="AM/PM")return!0;++J;break;case"[":for(oe=ne;K.charAt(J++)!=="]"&&J<K.length;)oe+=K.charAt(J);if(oe.match(abstime))return!0;break;case".":case"0":case"#":for(;J<K.length&&("0#?.,E+-%".indexOf(ne=K.charAt(++J))>-1||ne=="\\"&&K.charAt(J+1)=="-"&&"0#".indexOf(K.charAt(J+2))>-1););break;case"?":for(;K.charAt(++J)===ne;);break;case"*":++J,(K.charAt(J)===" "||K.charAt(J)==="*")&&++J;break;case"(":case")":++J;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;J<K.length&&"0123456789".indexOf(K.charAt(++J))>-1;);break;case" ":++J;break;default:++J;break}return!1}SSF$1.is_date=fmt_is_date;function eval_fmt(K,J,ne,oe){let ce=[],ue="",Ae=0,pe="",ve="t",me,ge,ye,xe="H";for(;Ae<K.length;)switch(pe=K.charAt(Ae)){case"G":if(!isgeneral(K,Ae))throw new Error("unrecognized character "+pe+" in "+K);ce[ce.length]={t:"G",v:"General"},Ae+=7;break;case'"':for(ue="";(ye=K.charCodeAt(++Ae))!==34&&Ae<K.length;)ue+=String.fromCharCode(ye);ce[ce.length]={t:"t",v:ue},++Ae;break;case"\\":const Je=K.charAt(++Ae),nt=Je==="("||Je===")"?Je:"t";ce[ce.length]={t:nt,v:Je},++Ae;break;case"_":ce[ce.length]={t:"t",v:" "},Ae+=2;break;case"@":ce[ce.length]={t:"T",v:J},++Ae;break;case"B":case"b":if(K.charAt(Ae+1)==="1"||K.charAt(Ae+1)==="2"){if(me==null&&(me=parse_date_code(J,ne,K.charAt(Ae+1)==="2"),me==null))return"";ce[ce.length]={t:"X",v:K.substr(Ae,2)},ve=pe,Ae+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":pe=pe.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(J<0||me==null&&(me=parse_date_code(J,ne),me==null))return"";for(ue=pe;++Ae<K.length&&K.charAt(Ae).toLowerCase()===pe;)ue+=pe;pe==="m"&&ve.toLowerCase()==="h"&&(pe="M"),pe==="h"&&(pe=xe),ce[ce.length]={t:pe,v:ue},ve=pe;break;case"A":case"a":const et={t:pe,v:pe};if(me==null&&(me=parse_date_code(J,ne)),K.substr(Ae,3).toUpperCase()==="A/P"?(me!=null&&(et.v=me.H>=12?"P":"A"),et.t="T",xe="h",Ae+=3):K.substr(Ae,5).toUpperCase()==="AM/PM"?(me!=null&&(et.v=me.H>=12?"PM":"AM"),et.t="T",Ae+=5,xe="h"):(et.t="t",++Ae),me==null&&et.t==="T")return"";ce[ce.length]=et,ve=pe;break;case"[":for(ue=pe;K.charAt(Ae++)!=="]"&&Ae<K.length;)ue+=K.charAt(Ae);if(ue.slice(-1)!=="]")throw'unterminated "[" block: |'+ue+"|";if(ue.match(abstime)){if(me==null&&(me=parse_date_code(J,ne),me==null))return"";ce[ce.length]={t:"Z",v:ue.toLowerCase()},ve=ue.charAt(1)}else ue.indexOf("$")>-1&&(ue=(ue.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(K)||(ce[ce.length]={t:"t",v:ue}));break;case".":if(me!=null){for(ue=pe;++Ae<K.length&&(pe=K.charAt(Ae))==="0";)ue+=pe;ce[ce.length]={t:"s",v:ue};break}case"0":case"#":for(ue=pe;++Ae<K.length&&"0#?.,E+-%".indexOf(pe=K.charAt(Ae))>-1||pe=="\\"&&K.charAt(Ae+1)=="-"&&Ae<K.length-2&&"0#".indexOf(K.charAt(Ae+2))>-1;)ue+=pe;ce[ce.length]={t:"n",v:ue};break;case"?":for(ue=pe;K.charAt(++Ae)===pe;)ue+=pe;ce[ce.length]={t:pe,v:ue},ve=pe;break;case"*":++Ae,(K.charAt(Ae)===" "||K.charAt(Ae)==="*")&&++Ae;break;case"(":case")":ce[ce.length]={t:oe===1||typeof J=="number"&&J<0?"t":pe,v:pe},++Ae;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(ue=pe;Ae<K.length&&"0123456789".indexOf(K.charAt(++Ae))>-1;)ue+=K.charAt(Ae);ce[ce.length]={t:"D",v:ue};break;case" ":ce[ce.length]={t:pe,v:pe},++Ae;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(pe)===-1)throw new Error("unrecognized character "+pe+" in "+K);ce[ce.length]={t:"t",v:pe},++Ae;break}let _e=0,$e=0,Ie;for(Ae=ce.length-1,ve="t";Ae>=0;--Ae)switch(ce[Ae].t){case"h":case"H":ce[Ae].t=xe,ve="h",_e<1&&(_e=1);break;case"s":(Ie=ce[Ae].v.match(/\.0+$/))&&($e=Math.max($e,Ie[0].length-1)),_e<3&&(_e=3);case"d":case"y":case"M":case"e":ve=ce[Ae].t;break;case"m":ve==="s"&&(ce[Ae].t="M",_e<2&&(_e=2));break;case"X":break;case"Z":_e<1&&ce[Ae].v.match(/[Hh]/)&&(_e=1),_e<2&&ce[Ae].v.match(/[Mm]/)&&(_e=2),_e<3&&ce[Ae].v.match(/[Ss]/)&&(_e=3)}switch(_e){case 0:break;case 1:me.u>=.5&&(me.u=0,++me.S),me.S>=60&&(me.S=0,++me.M),me.M>=60&&(me.M=0,++me.H);break;case 2:me.u>=.5&&(me.u=0,++me.S),me.S>=60&&(me.S=0,++me.M);break}let Fe="",ke;for(Ae=0;Ae<ce.length;++Ae)switch(ce[Ae].t){case"t":case"T":case" ":case"D":break;case"X":ce[Ae].v="",ce[Ae].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":ce[Ae].v=write_date(ce[Ae].t.charCodeAt(0),ce[Ae].v,me,$e),ce[Ae].t="t";break;case"n":case"(":case"?":for(ke=Ae+1;ce[ke]!=null&&((pe=ce[ke].t)==="?"||pe==="D"||(pe===" "||pe==="t")&&ce[ke+1]!=null&&(ce[ke+1].t==="?"||ce[ke+1].t==="t"&&ce[ke+1].v==="/")||ce[Ae].t==="("&&(pe===" "||pe==="n"||pe===")")||pe==="t"&&(ce[ke].v==="/"||ce[ke].v===" "&&ce[ke+1]!=null&&ce[ke+1].t==="?"));)ce[Ae].v+=ce[ke].v,ce[ke]={v:"",t:";"},++ke;Fe+=ce[Ae].v,Ae=ke-1;break;case"G":ce[Ae].t="t",ce[Ae].v=general_fmt(J,ne);break}let je="",We,ze;if(Fe.length>0){Fe.charCodeAt(0)===40?(We=J<0&&Fe.charCodeAt(0)===45?-J:J,ze=write_num("(",Fe,We)):(We=J<0&&oe>1?-J:J,ze=write_num("n",Fe,We),We<0&&ce[0]&&ce[0].t==="t"&&(ze=ze.substr(1),ce[0].v="-"+ce[0].v)),ke=ze.length-1;let Je=ce.length;for(Ae=0;Ae<ce.length;++Ae)if(ce[Ae]!=null&&ce[Ae].t!=="t"&&ce[Ae].v.indexOf(".")>-1){Je=Ae;break}let nt=ce.length;if(Je===ce.length&&ze.indexOf("E")===-1){for(Ae=ce.length-1;Ae>=0;--Ae)ce[Ae]==null||"n?(".indexOf(ce[Ae].t)===-1||(ke>=ce[Ae].v.length-1?(ke-=ce[Ae].v.length,ce[Ae].v=ze.substr(ke+1,ce[Ae].v.length)):ke<0?ce[Ae].v="":(ce[Ae].v=ze.substr(0,ke+1),ke=-1),ce[Ae].t="t",nt=Ae);ke>=0&&nt<ce.length&&(ce[nt].v=ze.substr(0,ke+1)+ce[nt].v)}else if(Je!==ce.length&&ze.indexOf("E")===-1){for(ke=ze.indexOf(".")-1,Ae=Je;Ae>=0;--Ae)if(!(ce[Ae]==null||"n?(".indexOf(ce[Ae].t)===-1)){for(ge=ce[Ae].v.indexOf(".")>-1&&Ae===Je?ce[Ae].v.indexOf(".")-1:ce[Ae].v.length-1,je=ce[Ae].v.substr(ge+1);ge>=0;--ge)ke>=0&&(ce[Ae].v.charAt(ge)==="0"||ce[Ae].v.charAt(ge)==="#")&&(je=ze.charAt(ke--)+je);ce[Ae].v=je,ce[Ae].t="t",nt=Ae}for(ke>=0&&nt<ce.length&&(ce[nt].v=ze.substr(0,ke+1)+ce[nt].v),ke=ze.indexOf(".")+1,Ae=Je;Ae<ce.length;++Ae)if(!(ce[Ae]==null||"n?(".indexOf(ce[Ae].t)===-1&&Ae!==Je)){for(ge=ce[Ae].v.indexOf(".")>-1&&Ae===Je?ce[Ae].v.indexOf(".")+1:0,je=ce[Ae].v.substr(0,ge);ge<ce[Ae].v.length;++ge)ke<ze.length&&(je+=ze.charAt(ke++));ce[Ae].v=je,ce[Ae].t="t",nt=Ae}}}for(Ae=0;Ae<ce.length;++Ae)ce[Ae]!=null&&"n(?".indexOf(ce[Ae].t)>-1&&(We=oe>1&&J<0&&Ae>0&&ce[Ae-1].v==="-"?-J:J,ce[Ae].v=write_num(ce[Ae].t,ce[Ae].v,We),ce[Ae].t="t");let Xe="";for(Ae=0;Ae!==ce.length;++Ae)ce[Ae]!=null&&(Xe+=ce[Ae].v);return Xe}SSF$1._eval=eval_fmt;const cfregex=/\[[=<>]/,cfregex2=/\[([=<>]*)(-?\d+\.?\d*)\]/;function chkcond(K,J){if(J==null)return!1;const ne=parseFloat(J[2]);switch(J[1]){case"=":if(K===ne)return!0;break;case">":if(K>ne)return!0;break;case"<":if(K<ne)return!0;break;case"<>":if(K!==ne)return!0;break;case">=":if(K>=ne)return!0;break;case"<=":if(K<=ne)return!0;break}return!1}function choose_fmt(K,J){let ne=split_fmt(K),oe=ne.length,ce=ne[oe-1].indexOf("@");if(oe<4&&ce>-1&&--oe,ne.length>4)throw new Error("cannot find right format for |"+ne.join("|")+"|");if(typeof J!="number")return[4,ne.length===4||ce>-1?ne[ne.length-1]:"@"];switch(ne.length){case 1:ne=ce>-1?["General","General","General",ne[0]]:[ne[0],ne[0],ne[0],"@"];break;case 2:ne=ce>-1?[ne[0],ne[0],ne[0],ne[1]]:[ne[0],ne[1],ne[0],"@"];break;case 3:ne=ce>-1?[ne[0],ne[1],ne[0],ne[2]]:[ne[0],ne[1],ne[2],"@"];break}const ue=J>0?ne[0]:J<0?ne[1]:ne[2];if(ne[0].indexOf("[")===-1&&ne[1].indexOf("[")===-1)return[oe,ue];if(ne[0].match(cfregex)!=null||ne[1].match(cfregex)!=null){const Ae=ne[0].match(cfregex2),pe=ne[1].match(cfregex2);return chkcond(J,Ae)?[oe,ne[0]]:chkcond(J,pe)?[oe,ne[1]]:[oe,ne[Ae!=null&&pe!=null?2:1]]}return[oe,ue]}function format(K,J,ne){ne==null&&(ne={});let oe="";switch(typeof K){case"string":K==="m/d/yy"&&ne.dateNF?oe=ne.dateNF:oe=K;break;case"number":K===14&&ne.dateNF?oe=ne.dateNF:oe=(ne.table!=null?ne.table:table_fmt)[K];break}if(isgeneral(oe,0))return general_fmt(J,ne);J instanceof Date&&(J=datenum_local(J,ne.date1904));const ce=choose_fmt(oe,J);if(isgeneral(ce[1]))return general_fmt(J,ne);if(J===!0)J="TRUE";else if(J===!1)J="FALSE";else if(J===""||J==null)return"";return eval_fmt(ce[1],J,ne,ce[0])}function load_entry(K,J){if(typeof J!="number"){J=+J||-1;for(let ne=0;ne<392;++ne){if(table_fmt[ne]===void 0){J<0&&(J=ne);continue}if(table_fmt[ne]===K){J=ne;break}}J<0&&(J=391)}return table_fmt[J]=K,J}SSF$1.load=load_entry;SSF$1._table=table_fmt;SSF$1.get_table=function(){return table_fmt};SSF$1.load_table=function(J){for(let ne=0;ne!==392;++ne)J[ne]!==void 0&&load_entry(J[ne],ne)};SSF$1.init_table=init_table;SSF$1.format=format;var ssf$1=SSF$1,src={exports:{}};(function(K){const J="",ne=["","","","","","","","","",""],oe=["","","","","","",""];function ce(ve){let me="";const ge=ve.length,ye=7;if(ge>ye){const xe=ge-ye+1,_e=ve.slice(0,xe),$e=ve.slice(xe);return ce(_e)+""+ce($e)}else for(let xe=0;xe<ge;xe++){const _e=ve[xe];_e>0&&(me+=ne[_e]+oe[ge-xe-1])}return me}function ue(ve){let me=ve;me=me.replace("",""),me=me.replace("","");const ge=5;return me.length>ge&&me.length-me.lastIndexOf("")===ge&&(me=me.substr(0,me.length-ge)+""),me}function Ae(ve,me){let ge="";return ve===""&&me===""?ge=J:ve!==""&&me===""?ge=ve+"":ve===""&&me!==""?ge=me+"":ge=ve+""+me+"",ge}function pe(ve){let me=J;if(isNaN(ve)||ve>=Number.MAX_SAFE_INTEGER)return me;const ge=Math.floor(ve).toString(),ye=Math.round(ve%1*100).toString(),xe=Array.from(ge).map(Number),_e=Array.from(ye).map(Number);let $e=ce(xe),Ie=ce(_e);return $e=ue($e),Ie=ue(Ie),me=Ae($e,Ie),me}K.exports!=null&&(K.exports=pe)})(src);var srcExports=src.exports;const FormulaError$h=requireError(),{FormulaHelpers:FormulaHelpers$e,Types:Types$b,WildCard:WildCard$1}=requireHelpers(),H$b=FormulaHelpers$e,ssf=ssf$1,bahttext=srcExports,charsets={latin:{halfRE:/[!-~]/g,fullRE:/[-]/g,delta:65248},hangul1:{halfRE:/[-]/g,fullRE:/[-]/g,delta:-60921},hangul2:{halfRE:/[-]/g,fullRE:/[-]/g,delta:-61025},kana:{delta:0,half:"",full:""},extras:{delta:0,half:" |",full:""}},toFull=K=>J=>K.delta?String.fromCharCode(J.charCodeAt(0)+K.delta):[...K.full][[...K.half].indexOf(J)],toHalf=K=>J=>K.delta?String.fromCharCode(J.charCodeAt(0)-K.delta):[...K.half][[...K.full].indexOf(J)],re$1=(K,J)=>K[J+"RE"]||new RegExp("["+K[J]+"]","g"),sets=Object.keys(charsets).map(K=>charsets[K]),toFullWidth=K=>sets.reduce((J,ne)=>J.replace(re$1(ne,"half"),toFull(ne)),K),toHalfWidth=K=>sets.reduce((J,ne)=>J.replace(re$1(ne,"full"),toHalf(ne)),K),TextFunctions$2={ASC:K=>(K=H$b.accept(K,Types$b.STRING),toHalfWidth(K)),BAHTTEXT:K=>{K=H$b.accept(K,Types$b.NUMBER);try{return bahttext(K)}catch(J){throw Error(`Error in https://github.com/jojoee/bahttext 
${J.toString()}`)}},CHAR:K=>{if(K=H$b.accept(K,Types$b.NUMBER),K>255||K<1)throw FormulaError$h.VALUE;return String.fromCharCode(K)},CLEAN:K=>(K=H$b.accept(K,Types$b.STRING),K.replace(/[\x00-\x1F]/g,"")),CODE:K=>{if(K=H$b.accept(K,Types$b.STRING),K.length===0)throw FormulaError$h.VALUE;return K.charCodeAt(0)},CONCAT:(...K)=>{let J="";return H$b.flattenParams(K,Types$b.STRING,!1,ne=>{ne=H$b.accept(ne,Types$b.STRING),J+=ne}),J},CONCATENATE:(...K)=>{let J="";if(K.length===0)throw Error("CONCATENATE need at least one argument.");return K.forEach(ne=>{ne=H$b.accept(ne,Types$b.STRING),J+=ne}),J},DBCS:K=>(K=H$b.accept(K,Types$b.STRING),toFullWidth(K)),DOLLAR:(K,J)=>{K=H$b.accept(K,Types$b.NUMBER),J=H$b.accept(J,Types$b.NUMBER,2);const ne=Array(J).fill("0").join("");return ssf.format(`$#,##0.${ne}_);($#,##0.${ne})`,K).trim()},EXACT:(K,J)=>(K=H$b.accept(K,[Types$b.STRING]),J=H$b.accept(J,[Types$b.STRING]),K===J),FIND:(K,J,ne)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.STRING),ne=H$b.accept(ne,Types$b.NUMBER,1),ne<1||ne>J.length)throw FormulaError$h.VALUE;const oe=J.indexOf(K,ne-1);if(oe===-1)throw FormulaError$h.VALUE;return oe+1},FINDB:(...K)=>TextFunctions$2.FIND(...K),FIXED:(K,J,ne)=>{K=H$b.accept(K,Types$b.NUMBER),J=H$b.accept(J,Types$b.NUMBER,2),ne=H$b.accept(ne,Types$b.BOOLEAN,!1);const oe=Array(J).fill("0").join(""),ce=ne?"":"#,";return ssf.format(`${ce}##0.${oe}_);(${ce}##0.${oe})`,K).trim()},LEFT:(K,J)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.NUMBER,1),J<0)throw FormulaError$h.VALUE;return J>K.length?K:K.slice(0,J)},LEFTB:(...K)=>TextFunctions$2.LEFT(...K),LEN:K=>(K=H$b.accept(K,Types$b.STRING),K.length),LENB:(...K)=>TextFunctions$2.LEN(...K),LOWER:K=>(K=H$b.accept(K,Types$b.STRING),K.toLowerCase()),MID:(K,J,ne)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.NUMBER),ne=H$b.accept(ne,Types$b.NUMBER),J>K.length)return"";if(J<1||ne<1)throw FormulaError$h.VALUE;return K.slice(J-1,J+ne-1)},MIDB:(...K)=>TextFunctions$2.MID(...K),NUMBERVALUE:(K,J,ne)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.STRING,"."),ne=H$b.accept(ne,Types$b.STRING,","),K.length===0)return 0;if(J.length===0||ne.length===0||(J=J[0],ne=ne[0],J===ne||K.indexOf(J)<K.lastIndexOf(ne)))throw FormulaError$h.VALUE;const oe=K.replace(ne,"").replace(J,".").replace(/[^\-0-9.%()]/g,"").match(/([(-]*)([0-9]*[.]*[0-9]+)([)]?)([%]*)/);if(!oe)throw FormulaError$h.VALUE;const ce=oe[1].length,ue=oe[3].length,Ae=oe[4].length;let pe=Number(oe[2]);if(ce>1||ce&&!ue||!ce&&ue||isNaN(pe))throw FormulaError$h.VALUE;return pe=pe/100**Ae,ce?-pe:pe},PHONETIC:()=>{},PROPER:K=>(K=H$b.accept(K,[Types$b.STRING]),K=K.toLowerCase(),K=K.charAt(0).toUpperCase()+K.slice(1),K.replace(/(?:[^a-zA-Z])([a-zA-Z])/g,J=>J.toUpperCase())),REPLACE:(K,J,ne,oe)=>{K=H$b.accept(K,[Types$b.STRING]),J=H$b.accept(J,[Types$b.NUMBER]),ne=H$b.accept(ne,[Types$b.NUMBER]),oe=H$b.accept(oe,[Types$b.STRING]);let ce=K.split("");return ce.splice(J-1,ne,oe),ce.join("")},REPLACEB:(...K)=>TextFunctions$2.REPLACE(...K),REPT:(K,J)=>{K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.NUMBER);let ne="";for(let oe=0;oe<J;oe++)ne+=K;return ne},RIGHT:(K,J)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.NUMBER,1),J<0)throw FormulaError$h.VALUE;const ne=K.length;return J>ne?K:K.slice(ne-J)},RIGHTB:(...K)=>TextFunctions$2.RIGHT(...K),SEARCH:(K,J,ne)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.STRING),ne=H$b.accept(ne,Types$b.NUMBER,1),ne<1||ne>J.length)throw FormulaError$h.VALUE;let oe=WildCard$1.isWildCard(K)?WildCard$1.toRegex(K,"i"):K;const ce=J.slice(ne-1).search(oe);if(ce===-1)throw FormulaError$h.VALUE;return ce+ne},SEARCHB:(...K)=>TextFunctions$2.SEARCH(...K),SUBSTITUTE:(...K)=>{},T:K=>(K=H$b.accept(K),typeof K=="string"?K:""),TEXT:(K,J)=>{K=H$b.accept(K,Types$b.NUMBER),J=H$b.accept(J,Types$b.STRING);try{return ssf.format(J,K)}catch(ne){throw console.error(ne),FormulaError$h.VALUE}},TEXTJOIN:(...K)=>{},TRIM:K=>(K=H$b.accept(K,[Types$b.STRING]),K.replace(/^\s+|\s+$/g,"")),UNICHAR:K=>{if(K=H$b.accept(K,[Types$b.NUMBER]),K<=0)throw FormulaError$h.VALUE;return String.fromCharCode(K)},UNICODE:K=>TextFunctions$2.CODE(K)};var text$5=TextFunctions$2;const FormulaError$g=requireError(),{FormulaHelpers:FormulaHelpers$d}=requireHelpers(),Prefix$1={unaryOp:(K,J,ne)=>{let oe=1;if(K.forEach(ce=>{if(ce!=="+")if(ce==="-")oe=-oe;else throw new Error(`Unrecognized prefix: ${ce}`)}),J==null&&(J=0),oe===1)return J;try{J=FormulaHelpers$d.acceptNumber(J,ne)}catch(ce){if(ce instanceof FormulaError$g)Array.isArray(J)&&(J=J[0][0]);else throw ce}return typeof J=="number"&&isNaN(J)?FormulaError$g.VALUE:-J}},Postfix$1={percentOp:(K,J,ne)=>{try{K=FormulaHelpers$d.acceptNumber(K,ne)}catch(oe){if(oe instanceof FormulaError$g)return oe;throw oe}if(J==="%")return K/100;throw new Error(`Unrecognized postfix: ${J}`)}},type2Number={boolean:3,string:2,number:1},Infix$3={compareOp:(K,J,ne,oe,ce)=>{K==null&&(K=0),ne==null&&(ne=0),oe&&(K=K[0][0]),ce&&(ne=ne[0][0]);const ue=typeof K,Ae=typeof ne;if(ue===Ae)switch(J){case"=":return K===ne;case">":return K>ne;case"<":return K<ne;case"<>":return K!==ne;case"<=":return K<=ne;case">=":return K>=ne}else switch(J){case"=":return!1;case">":return type2Number[ue]>type2Number[Ae];case"<":return type2Number[ue]<type2Number[Ae];case"<>":return!0;case"<=":return type2Number[ue]<=type2Number[Ae];case">=":return type2Number[ue]>=type2Number[Ae]}throw Error("Infix.compareOp: Should not reach here.")},concatOp:(K,J,ne,oe,ce)=>{K==null&&(K=""),ne==null&&(ne=""),oe&&(K=K[0][0]),ce&&(ne=ne[0][0]);const ue=typeof K,Ae=typeof ne;return ue==="boolean"&&(K=K?"TRUE":"FALSE"),Ae==="boolean"&&(ne=ne?"TRUE":"FALSE"),""+K+ne},mathOp:(K,J,ne,oe,ce)=>{K==null&&(K=0),ne==null&&(ne=0);try{K=FormulaHelpers$d.acceptNumber(K,oe),ne=FormulaHelpers$d.acceptNumber(ne,ce)}catch(ue){if(ue instanceof FormulaError$g)return ue;throw ue}switch(J){case"+":return K+ne;case"-":return K-ne;case"*":return K*ne;case"/":return ne===0?FormulaError$g.DIV0:K/ne;case"^":return K**ne}throw Error("Infix.mathOp: Should not reach here.")}};var operators={Prefix:Prefix$1,Postfix:Postfix$1,Infix:Infix$3,Operators:{compareOp:["<",">","=","<>","<=",">="],concatOp:["&"],mathOp:["+","-","*","/","^"]}};const FormulaError$f=requireError(),{FormulaHelpers:FormulaHelpers$c,Types:Types$a,Factorials,Criteria:Criteria$1}=requireHelpers(),{Infix:Infix$2}=operators,H$a=FormulaHelpers$c,f$2=[],fd=[];function factorial(K){return K<=100?Factorials[K]:f$2[K]>0?f$2[K]:f$2[K]=factorial(K-1)*K}function factorialDouble(K){return K===1||K===0?1:K===2?2:fd[K]>0?fd[K]:fd[K]=factorialDouble(K-2)*K}const MathFunctions$2={ABS:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.abs(K)),AGGREGATE:(K,J,ne,...oe)=>{},ARABIC:K=>{if(K=H$a.accept(K,Types$a.STRING).toUpperCase(),!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(K))throw new FormulaError$f("#VALUE!","Invalid roman numeral in ARABIC evaluation.");let J=0;return K.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,function(ne){J+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[ne]}),J},BASE:(K,J,ne)=>{if(K=H$a.accept(K,Types$a.NUMBER),K<0||K>=2**53||(J=H$a.accept(J,Types$a.NUMBER),J<2||J>36)||(ne=H$a.accept(ne,Types$a.NUMBER,0),ne<0))throw FormulaError$f.NUM;const oe=K.toString(J).toUpperCase();return new Array(Math.max(ne+1-oe.length,0)).join("0")+oe},CEILING:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),J===0)return 0;if(K/J%1===0)return K;const ne=Math.abs(J),oe=Math.floor(Math.abs(K)/ne);return K<0?J<0?-ne*(oe+1):-ne*oe:(oe+1)*ne},"CEILING.MATH":(K,J,ne)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,K>0?1:-1),ne=H$a.accept(ne,Types$a.NUMBER,0),K>=0)return MathFunctions$2.CEILING(K,J);const oe=ne?J:0;return MathFunctions$2.CEILING(K,J)-oe},"CEILING.PRECISE":(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,1),MathFunctions$2.CEILING(K,Math.abs(J))),COMBIN:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),K<0||J<0||K<J)throw FormulaError$f.NUM;const ne=MathFunctions$2.FACT(K),oe=MathFunctions$2.FACT(J);return ne/oe/MathFunctions$2.FACT(K-J)},COMBINA:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),(K===0||K===1)&&J===0)return 1;if(K<0||J<0)throw FormulaError$f.NUM;return MathFunctions$2.COMBIN(K+J-1,K-1)},DECIMAL:(K,J)=>{if(K=H$a.accept(K,Types$a.STRING),J=H$a.accept(J,Types$a.NUMBER),J=Math.trunc(J),J<2||J>36)throw FormulaError$f.NUM;const ne=parseInt(K,J);if(isNaN(ne))throw FormulaError$f.NUM;return ne},DEGREES:K=>(K=H$a.accept(K,Types$a.NUMBER),K*(180/Math.PI)),EVEN:K=>MathFunctions$2.CEILING(K,-2),EXP:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.exp(K)),FACT:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K=Math.trunc(K),K>170||K<0)throw FormulaError$f.NUM;return K<=100?Factorials[K]:factorial(K)},FACTDOUBLE:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K=Math.trunc(K),K<-1)throw FormulaError$f.NUM;return K===-1?1:factorialDouble(K)},FLOOR:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),J===0)return 0;if(K>0&&J<0)throw FormulaError$f.NUM;if(K/J%1===0)return K;const ne=Math.abs(J),oe=Math.floor(Math.abs(K)/ne);return K<0?J<0?-ne*oe:-ne*(oe+1):oe*ne},"FLOOR.MATH":(K,J,ne)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,K>0?1:-1),ne=H$a.accept(ne,Types$a.NUMBER,0),ne===0||K>=0?MathFunctions$2.FLOOR(K,Math.abs(J)):MathFunctions$2.FLOOR(K,J)+J),"FLOOR.PRECISE":(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,1),MathFunctions$2.FLOOR(K,Math.abs(J))),GCD:(...K)=>{const J=[];H$a.flattenParams(K,null,!1,Ae=>{if(Ae=typeof Ae=="boolean"?NaN:Number(Ae),isNaN(Ae))throw FormulaError$f.VALUE;if(Ae<0||Ae>9007199254740990)throw FormulaError$f.NUM;J.push(Math.trunc(Ae))},0);let ne,oe,ce=K.length,ue=Math.abs(J[0]);for(ne=1;ne<ce;ne++){for(oe=Math.abs(J[ne]);ue&&oe;)ue>oe?ue%=oe:oe%=ue;ue+=oe}return ue},INT:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.floor(K)),"ISO.CEILING":(...K)=>MathFunctions$2["CEILING.PRECISE"](...K),LCM:(...K)=>{const J=[];H$a.flattenParams(K,null,!1,ce=>{if(ce=typeof ce=="boolean"?NaN:Number(ce),isNaN(ce))throw FormulaError$f.VALUE;if(ce<0||ce>9007199254740990)throw FormulaError$f.NUM;J.push(Math.trunc(ce))},1);let ne=J.length,oe=Math.abs(J[0]);for(let ce=1;ce<ne;ce++){let ue=Math.abs(J[ce]),Ae=oe;for(;oe&&ue;)oe>ue?oe%=ue:ue%=oe;oe=Math.abs(Ae*J[ce])/(oe+ue)}return oe},LN:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.log(K)),LOG:(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,10),Math.log(K)/Math.log(J)),LOG10:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.log10(K)),MDETERM:K=>{if(K=H$a.accept(K,Types$a.ARRAY,void 0,!1,!0),K[0].length!==K.length)throw FormulaError$f.VALUE;const J=K.length,ne=K[0].length;let oe=0,ce,ue;if(J===1)return K[0][0];if(J===2)return K[0][0]*K[1][1]-K[0][1]*K[1][0];for(let Ae=0;Ae<ne;Ae++){ce=K[0][Ae],ue=K[0][Ae];for(let pe=1;pe<J;pe++)ue*=K[pe][((Ae+pe)%ne+ne)%ne],ce*=K[pe][((Ae-pe)%ne+ne)%ne];oe+=ue-ce}return oe},MINVERSE:K=>{},MMULT:(K,J)=>{K=H$a.accept(K,Types$a.ARRAY,void 0,!1,!0),J=H$a.accept(J,Types$a.ARRAY,void 0,!1,!0);const ne=K.length,oe=K[0].length,ce=J.length,ue=J[0].length,Ae=new Array(ne);if(oe!==ce)throw FormulaError$f.VALUE;for(let pe=0;pe<ne;pe++){Ae[pe]=new Array(ue);for(let ve=0;ve<ue;ve++){Ae[pe][ve]=0;for(let me=0;me<oe;me++){const ge=K[pe][me],ye=J[me][ve];if(typeof ge!="number"||typeof ye!="number")throw FormulaError$f.VALUE;Ae[pe][ve]+=K[pe][me]*J[me][ve]}}}return Ae},MOD:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),J===0)throw FormulaError$f.DIV0;return K-J*MathFunctions$2.INT(K/J)},MROUND:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),J===0)return 0;if(K>0&&J<0||K<0&&J>0)throw FormulaError$f.NUM;return K/J%1===0?K:Math.round(K/J)*J},MULTINOMIAL:(...K)=>{let J=0,ne=1;return H$a.flattenParams(K,Types$a.NUMBER,!1,oe=>{if(oe<0)throw FormulaError$f.NUM;J+=oe,ne*=factorial(oe)}),factorial(J)/ne},MUNIT:K=>{K=H$a.accept(K,Types$a.NUMBER);const J=[];for(let ne=0;ne<K;ne++){const oe=[];for(let ce=0;ce<K;ce++)ne===ce?oe.push(1):oe.push(0);J.push(oe)}return J},ODD:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K===0)return 1;let J=Math.ceil(Math.abs(K));return J=J&1?J:J+1,K>0?J:-J},PI:()=>Math.PI,POWER:(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),K**J),PRODUCT:(...K)=>{let J=1;return H$a.flattenParams(K,null,!0,(ne,oe)=>{const ce=Number(ne);oe.isLiteral&&!isNaN(ce)?J*=ce:typeof ne=="number"&&(J*=ne)},1),J},QUOTIENT:(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),Math.trunc(K/J)),RADIANS:K=>(K=H$a.accept(K,Types$a.NUMBER),K/180*Math.PI),RAND:()=>Math.random(),RANDBETWEEN:(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),Math.floor(Math.random()*(J-K+1)+K)),ROMAN:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,0),J!==0)throw Error("ROMAN: only allows form=0 (classic form).");const ne=String(K).split(""),oe=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let ce="",ue=3;for(;ue--;)ce=(oe[+ne.pop()+ue*10]||"")+ce;return new Array(+ne.join("")+1).join("M")+ce},ROUND:(K,J)=>{K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER);const ne=Math.pow(10,Math.abs(J)),oe=K>0?1:-1;return J>0?oe*Math.round(Math.abs(K)*ne)/ne:J===0?oe*Math.round(Math.abs(K)):oe*Math.round(Math.abs(K)/ne)*ne},ROUNDDOWN:(K,J)=>{K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER);const ne=Math.pow(10,Math.abs(J)),oe=K>0?1:-1;if(J>0){const ce=1/ne*.5;return oe*Math.round((Math.abs(K)-ce)*ne)/ne}else{if(J===0)return oe*Math.round(Math.abs(K)-.5);{const ce=ne*.5;return oe*Math.round((Math.abs(K)-ce)/ne)*ne}}},ROUNDUP:(K,J)=>{K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER);const ne=Math.pow(10,Math.abs(J)),oe=K>0?1:-1;if(J>0){const ce=1/ne*.5;return oe*Math.round((Math.abs(K)+ce)*ne)/ne}else{if(J===0)return oe*Math.round(Math.abs(K)+.5);{const ce=ne*.5;return oe*Math.round((Math.abs(K)+ce)/ne)*ne}}},SERIESSUM:(K,J,ne,oe)=>{K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),ne=H$a.accept(ne,Types$a.NUMBER);let ce=0,ue;return H$a.flattenParams([oe],Types$a.NUMBER,!1,Ae=>{if(typeof Ae!="number")throw FormulaError$f.VALUE;ce===0?ue=Ae*Math.pow(K,J):ue+=Ae*Math.pow(K,J+ce*ne),ce++}),ue},SIGN:K=>(K=H$a.accept(K,Types$a.NUMBER),K>0?1:K===0?0:-1),SQRT:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K<0)throw FormulaError$f.NUM;return Math.sqrt(K)},SQRTPI:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K<0)throw FormulaError$f.NUM;return Math.sqrt(K*Math.PI)},SUBTOTAL:()=>{},SUM:(...K)=>{let J=0;return H$a.flattenParams(K,Types$a.NUMBER,!0,(ne,oe)=>{(oe.isLiteral||typeof ne=="number")&&(J+=ne)}),J},SUMIF:(K,J,ne,oe)=>{const ce=H$a.retrieveRanges(K,J,oe);J=ce[0],oe=ce[1],ne=H$a.retrieveArg(K,ne);const ue=ne.isArray;ne=Criteria$1.parse(H$a.accept(ne));let Ae=0;return J.forEach((pe,ve)=>{pe.forEach((me,ge)=>{const ye=oe[ve][ge];typeof ye=="number"&&(ne.op==="wc"?ne.match===ne.value.test(me)&&(Ae+=ye):Infix$2.compareOp(me,ne.op,ne.value,Array.isArray(me),ue)&&(Ae+=ye))})}),Ae},SUMIFS:()=>{},SUMPRODUCT:(K,...J)=>{K=H$a.accept(K,Types$a.ARRAY,void 0,!1,!0),J.forEach(oe=>{if(oe=H$a.accept(oe,Types$a.ARRAY,void 0,!1,!0),K[0].length!==oe[0].length||K.length!==oe.length)throw FormulaError$f.VALUE;for(let ce=0;ce<K.length;ce++)for(let ue=0;ue<K[0].length;ue++)typeof K[ce][ue]!="number"&&(K[ce][ue]=0),typeof oe[ce][ue]!="number"&&(oe[ce][ue]=0),K[ce][ue]*=oe[ce][ue]});let ne=0;return K.forEach(oe=>{oe.forEach(ce=>{ne+=ce})}),ne},SUMSQ:(...K)=>{let J=0;return H$a.flattenParams(K,Types$a.NUMBER,!0,(ne,oe)=>{(oe.isLiteral||typeof ne=="number")&&(J+=ne**2)}),J},SUMX2MY2:(K,J)=>{const ne=[],oe=[];let ce=0;if(H$a.flattenParams([K],null,!1,(ue,Ae)=>{ne.push(ue)}),H$a.flattenParams([J],null,!1,(ue,Ae)=>{oe.push(ue)}),ne.length!==oe.length)throw FormulaError$f.NA;for(let ue=0;ue<ne.length;ue++)typeof ne[ue]=="number"&&typeof oe[ue]=="number"&&(ce+=ne[ue]**2-oe[ue]**2);return ce},SUMX2PY2:(K,J)=>{const ne=[],oe=[];let ce=0;if(H$a.flattenParams([K],null,!1,(ue,Ae)=>{ne.push(ue)}),H$a.flattenParams([J],null,!1,(ue,Ae)=>{oe.push(ue)}),ne.length!==oe.length)throw FormulaError$f.NA;for(let ue=0;ue<ne.length;ue++)typeof ne[ue]=="number"&&typeof oe[ue]=="number"&&(ce+=ne[ue]**2+oe[ue]**2);return ce},SUMXMY2:(K,J)=>{const ne=[],oe=[];let ce=0;if(H$a.flattenParams([K],null,!1,(ue,Ae)=>{ne.push(ue)}),H$a.flattenParams([J],null,!1,(ue,Ae)=>{oe.push(ue)}),ne.length!==oe.length)throw FormulaError$f.NA;for(let ue=0;ue<ne.length;ue++)typeof ne[ue]=="number"&&typeof oe[ue]=="number"&&(ce+=(ne[ue]-oe[ue])**2);return ce},TRUNC:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.trunc(K))};var math=MathFunctions$2;const FormulaError$e=requireError(),{FormulaHelpers:FormulaHelpers$b,Types:Types$9}=requireHelpers(),H$9=FormulaHelpers$b,MAX_NUMBER=2**27-1,TrigFunctions$1={ACOS:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K>1||K<-1)throw FormulaError$e.NUM;return Math.acos(K)},ACOSH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K<1)throw FormulaError$e.NUM;return Math.acosh(K)},ACOT:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.PI/2-Math.atan(K)),ACOTH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)<=1)throw FormulaError$e.NUM;return Math.atanh(1/K)},ASIN:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K>1||K<-1)throw FormulaError$e.NUM;return Math.asin(K)},ASINH:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.asinh(K)),ATAN:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.atan(K)),ATAN2:(K,J)=>{if(K=H$9.accept(K,Types$9.NUMBER),J=H$9.accept(J,Types$9.NUMBER),J===0&&K===0)throw FormulaError$e.DIV0;return Math.atan2(J,K)},ATANH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>1)throw FormulaError$e.NUM;return Math.atanh(K)},COS:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return Math.cos(K)},COSH:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.cosh(K)),COT:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;if(K===0)throw FormulaError$e.DIV0;return 1/Math.tan(K)},COTH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K===0)throw FormulaError$e.DIV0;return 1/Math.tanh(K)},CSC:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return 1/Math.sin(K)},CSCH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K===0)throw FormulaError$e.DIV0;return 1/Math.sinh(K)},SEC:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return 1/Math.cos(K)},SECH:K=>(K=H$9.accept(K,Types$9.NUMBER),1/Math.cosh(K)),SIN:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return Math.sin(K)},SINH:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.sinh(K)),TAN:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return Math.tan(K)},TANH:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.tanh(K))};var trigonometry=TrigFunctions$1;const FormulaError$d=requireError(),{FormulaHelpers:FormulaHelpers$a,Types:Types$8}=requireHelpers(),H$8=FormulaHelpers$a;function getNumLogicalValue(K){let J=0,ne=0;return H$8.flattenParams(K,null,!0,oe=>{const ce=typeof oe;ce==="string"?oe==="TRUE"?oe=!0:oe==="FALSE"&&(oe=!1):ce==="number"&&(oe=!!oe),typeof oe=="boolean"&&(oe===!0?J++:ne++)}),[J,ne]}const LogicalFunctions$1={AND:(...K)=>{const[J,ne]=getNumLogicalValue(K);return J===0&&ne===0?FormulaError$d.VALUE:J>0&&ne===0},FALSE:()=>!1,IF:(K,J,ne,oe)=>(J=H$8.accept(J,Types$8.BOOLEAN),ne=H$8.accept(ne),oe=H$8.accept(oe,null,!1),J?ne:oe),IFERROR:(K,J)=>K.value instanceof FormulaError$d?H$8.accept(J):H$8.accept(K),IFNA:function(K,J){if(arguments.length>2)throw FormulaError$d.TOO_MANY_ARGS("IFNA");return FormulaError$d.NA.equals(K.value)?H$8.accept(J):H$8.accept(K)},IFS:(...K)=>{if(K.length%2!==0)return new FormulaError$d("#N/A","IFS expects all arguments after position 0 to be in pairs.");for(let J=0;J<K.length/2;J++){const ne=H$8.accept(K[J*2],Types$8.BOOLEAN),oe=H$8.accept(K[J*2+1]);if(ne)return oe}return FormulaError$d.NA},NOT:K=>(K=H$8.accept(K,Types$8.BOOLEAN),!K),OR:(...K)=>{const[J,ne]=getNumLogicalValue(K);return J===0&&ne===0?FormulaError$d.VALUE:J>0},SWITCH:(...K)=>{},TRUE:()=>!0,XOR:(...K)=>{const[J,ne]=getNumLogicalValue(K);return J===0&&ne===0?FormulaError$d.VALUE:J%2===1}};var logical=LogicalFunctions$1,bessel$1={};(function(K){(function(J){J(typeof DO_NOT_EXPORT_BESSEL>"u"?K:{})})(function(J){J.version="1.0.2";var ne=Math;function oe(ge,ye){for(var xe=0,_e=0;xe<ge.length;++xe)_e=ye*_e+ge[xe];return _e}function ce(ge,ye,xe,_e,$e){if(ye===0)return xe;if(ye===1)return _e;for(var Ie=2/ge,Fe=_e,ke=1;ke<ye;++ke)Fe=_e*ke*Ie+$e*xe,xe=_e,_e=Fe;return Fe}function ue(ge,ye,xe,_e,$e){return function(Fe,ke){if(_e){if(Fe===0)return _e==1?-1/0:1/0;if(Fe<0)return NaN}if(ke===0)return ge(Fe);if(ke===1)return ye(Fe);if(ke<0)return NaN;ke|=0;var je=ge(Fe),We=ye(Fe);return ce(Fe,ke,je,We,$e)}}var Ae=function(){var ge=.636619772,ye=[57568490574,-13362590354,6516196407e-1,-1121442418e-2,77392.33017,-184.9052456].reverse(),xe=[57568490411,1029532985,9494680718e-3,59272.64853,267.8532712,1].reverse(),_e=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),$e=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934935152e-16].reverse();function Ie(Xe){var Je=0,nt=0,et=0,tt=Xe*Xe;if(Xe<8)nt=oe(ye,tt),et=oe(xe,tt),Je=nt/et;else{var st=Xe-.785398164;tt=64/tt,nt=oe(_e,tt),et=oe($e,tt),Je=ne.sqrt(ge/Xe)*(ne.cos(st)*nt-ne.sin(st)*et*8/Xe)}return Je}var Fe=[72362614232,-7895059235,2423968531e-1,-2972611439e-3,15704.4826,-30.16036606].reverse(),ke=[144725228442,2300535178,1858330474e-2,99447.43394,376.9991397,1].reverse(),je=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),We=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function ze(Xe){var Je=0,nt=0,et=0,tt=Xe*Xe,st=ne.abs(Xe)-2.356194491;return Math.abs(Xe)<8?(nt=Xe*oe(Fe,tt),et=oe(ke,tt),Je=nt/et):(tt=64/tt,nt=oe(je,tt),et=oe(We,tt),Je=ne.sqrt(ge/ne.abs(Xe))*(ne.cos(st)*nt-ne.sin(st)*et*8/ne.abs(Xe)),Xe<0&&(Je=-Je)),Je}return function Xe(Je,nt){if(nt=Math.round(nt),!isFinite(Je))return isNaN(Je)?Je:0;if(nt<0)return(nt%2?-1:1)*Xe(Je,-nt);if(Je<0)return(nt%2?-1:1)*Xe(-Je,nt);if(nt===0)return Ie(Je);if(nt===1)return ze(Je);if(Je===0)return 0;var et=0;if(Je>nt)et=ce(Je,nt,Ie(Je),ze(Je),-1);else{for(var tt=2*ne.floor((nt+ne.floor(ne.sqrt(40*nt)))/2),st=!1,qe=0,Se=0,Re=1,Be=0,Ne=2/Je,Ue=tt;Ue>0;Ue--)Be=Ue*Ne*Re-qe,qe=Re,Re=Be,ne.abs(Re)>1e10&&(Re*=1e-10,qe*=1e-10,et*=1e-10,Se*=1e-10),st&&(Se+=Re),st=!st,Ue==nt&&(et=qe);Se=2*Se-Re,et/=Se}return et}}(),pe=function(){var ge=.636619772,ye=[-2957821389,7062834065,-5123598036e-1,1087988129e-2,-86327.92757,228.4622733].reverse(),xe=[40076544269,7452499648e-1,7189466438e-3,47447.2647,226.1030244,1].reverse(),_e=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),$e=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934945152e-16].reverse();function Ie(Xe){var Je=0,nt=0,et=0,tt=Xe*Xe,st=Xe-.785398164;return Xe<8?(nt=oe(ye,tt),et=oe(xe,tt),Je=nt/et+ge*Ae(Xe,0)*ne.log(Xe)):(tt=64/tt,nt=oe(_e,tt),et=oe($e,tt),Je=ne.sqrt(ge/Xe)*(ne.sin(st)*nt+ne.cos(st)*et*8/Xe)),Je}var Fe=[-4900604943e3,127527439e4,-51534381390,7349264551e-1,-4237922726e-3,8511.937935].reverse(),ke=[249958057e5,424441966400,3733650367,2245904002e-2,102042.605,354.9632885,1].reverse(),je=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),We=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function ze(Xe){var Je=0,nt=0,et=0,tt=Xe*Xe,st=Xe-2.356194491;return Xe<8?(nt=Xe*oe(Fe,tt),et=oe(ke,tt),Je=nt/et+ge*(Ae(Xe,1)*ne.log(Xe)-1/Xe)):(tt=64/tt,nt=oe(je,tt),et=oe(We,tt),Je=ne.sqrt(ge/Xe)*(ne.sin(st)*nt+ne.cos(st)*et*8/Xe)),Je}return ue(Ie,ze,"BESSELY",1,-1)}(),ve=function(){var ge=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),ye=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse();function xe(Fe){return Fe<=3.75?oe(ge,Fe*Fe/(3.75*3.75)):ne.exp(ne.abs(Fe))/ne.sqrt(ne.abs(Fe))*oe(ye,3.75/ne.abs(Fe))}var _e=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),$e=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse();function Ie(Fe){return Fe<3.75?Fe*oe(_e,Fe*Fe/(3.75*3.75)):(Fe<0?-1:1)*ne.exp(ne.abs(Fe))/ne.sqrt(ne.abs(Fe))*oe($e,3.75/ne.abs(Fe))}return function Fe(ke,je){if(je=Math.round(je),je===0)return xe(ke);if(je===1)return Ie(ke);if(je<0)return NaN;if(ne.abs(ke)===0)return 0;if(ke==1/0)return 1/0;var We=0,ze,Xe=2/ne.abs(ke),Je=0,nt=1,et=0,tt=2*ne.round((je+ne.round(ne.sqrt(40*je)))/2);for(ze=tt;ze>0;ze--)et=ze*Xe*nt+Je,Je=nt,nt=et,ne.abs(nt)>1e10&&(nt*=1e-10,Je*=1e-10,We*=1e-10),ze==je&&(We=Je);return We*=Fe(ke,0)/nt,ke<0&&je%2?-We:We}}(),me=function(){var ge=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),ye=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse();function xe(Fe){return Fe<=2?-ne.log(Fe/2)*ve(Fe,0)+oe(ge,Fe*Fe/4):ne.exp(-Fe)/ne.sqrt(Fe)*oe(ye,2/Fe)}var _e=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),$e=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();function Ie(Fe){return Fe<=2?ne.log(Fe/2)*ve(Fe,1)+1/Fe*oe(_e,Fe*Fe/4):ne.exp(-Fe)/ne.sqrt(Fe)*oe($e,2/Fe)}return ue(xe,Ie,"BESSELK",2,1)}();J.besselj=Ae,J.bessely=pe,J.besseli=ve,J.besselk=me})})(bessel$1);var jstat={exports:{}};(function(K,J){(function(ne,oe){K.exports=oe()})(commonjsGlobal,function(){var ne=function(oe,ce){var ue=Array.prototype.concat,Ae=Array.prototype.slice,pe=Object.prototype.toString;function ve(je,We){var ze=je>We?je:We;return oe.pow(10,17-~~(oe.log(ze>0?ze:-ze)*oe.LOG10E))}var me=Array.isArray||function(We){return pe.call(We)==="[object Array]"};function ge(je){return pe.call(je)==="[object Function]"}function ye(je){return typeof je=="number"?je-je===0:!1}function xe(je){return ue.apply([],je)}function _e(){return new _e._init(arguments)}_e.fn=_e.prototype,_e._init=function(We){if(me(We[0]))if(me(We[0][0])){ge(We[1])&&(We[0]=_e.map(We[0],We[1]));for(var ze=0;ze<We[0].length;ze++)this[ze]=We[0][ze];this.length=We[0].length}else this[0]=ge(We[1])?_e.map(We[0],We[1]):We[0],this.length=1;else if(ye(We[0]))this[0]=_e.seq.apply(null,We),this.length=1;else{if(We[0]instanceof _e)return _e(We[0].toArray());this[0]=[],this.length=1}return this},_e._init.prototype=_e.prototype,_e._init.constructor=_e,_e.utils={calcRdx:ve,isArray:me,isFunction:ge,isNumber:ye,toVector:xe},_e._random_fn=oe.random,_e.setRandom=function(We){if(typeof We!="function")throw new TypeError("fn is not a function");_e._random_fn=We},_e.extend=function(We){var ze,Xe;if(arguments.length===1){for(Xe in We)_e[Xe]=We[Xe];return this}for(ze=1;ze<arguments.length;ze++)for(Xe in arguments[ze])We[Xe]=arguments[ze][Xe];return We},_e.rows=function(We){return We.length||1},_e.cols=function(We){return We[0].length||1},_e.dimensions=function(We){return{rows:_e.rows(We),cols:_e.cols(We)}},_e.row=function(We,ze){return me(ze)?ze.map(function(Xe){return _e.row(We,Xe)}):We[ze]},_e.rowa=function(We,ze){return _e.row(We,ze)},_e.col=function(We,ze){if(me(ze)){var Xe=_e.arange(We.length).map(function(){return new Array(ze.length)});return ze.forEach(function(et,tt){_e.arange(We.length).forEach(function(st){Xe[st][tt]=We[st][et]})}),Xe}for(var Je=new Array(We.length),nt=0;nt<We.length;nt++)Je[nt]=[We[nt][ze]];return Je},_e.cola=function(We,ze){return _e.col(We,ze).map(function(Xe){return Xe[0]})},_e.diag=function(We){for(var ze=_e.rows(We),Xe=new Array(ze),Je=0;Je<ze;Je++)Xe[Je]=[We[Je][Je]];return Xe},_e.antidiag=function(We){for(var ze=_e.rows(We)-1,Xe=new Array(ze),Je=0;ze>=0;ze--,Je++)Xe[Je]=[We[Je][ze]];return Xe},_e.transpose=function(We){var ze=[],Xe,Je,nt,et,tt;for(me(We[0])||(We=[We]),Je=We.length,nt=We[0].length,tt=0;tt<nt;tt++){for(Xe=new Array(Je),et=0;et<Je;et++)Xe[et]=We[et][tt];ze.push(Xe)}return ze.length===1?ze[0]:ze},_e.map=function(We,ze,Xe){var Je,nt,et,tt,st;for(me(We[0])||(We=[We]),nt=We.length,et=We[0].length,tt=Xe?We:new Array(nt),Je=0;Je<nt;Je++)for(tt[Je]||(tt[Je]=new Array(et)),st=0;st<et;st++)tt[Je][st]=ze(We[Je][st],Je,st);return tt.length===1?tt[0]:tt},_e.cumreduce=function(We,ze,Xe){var Je,nt,et,tt,st;for(me(We[0])||(We=[We]),nt=We.length,et=We[0].length,tt=Xe?We:new Array(nt),Je=0;Je<nt;Je++)for(tt[Je]||(tt[Je]=new Array(et)),et>0&&(tt[Je][0]=We[Je][0]),st=1;st<et;st++)tt[Je][st]=ze(tt[Je][st-1],We[Je][st]);return tt.length===1?tt[0]:tt},_e.alter=function(We,ze){return _e.map(We,ze,!0)},_e.create=function(We,ze,Xe){var Je=new Array(We),nt,et;for(ge(ze)&&(Xe=ze,ze=We),nt=0;nt<We;nt++)for(Je[nt]=new Array(ze),et=0;et<ze;et++)Je[nt][et]=Xe(nt,et);return Je};function $e(){return 0}_e.zeros=function(We,ze){return ye(ze)||(ze=We),_e.create(We,ze,$e)};function Ie(){return 1}_e.ones=function(We,ze){return ye(ze)||(ze=We),_e.create(We,ze,Ie)},_e.rand=function(We,ze){return ye(ze)||(ze=We),_e.create(We,ze,_e._random_fn)};function Fe(je,We){return je===We?1:0}_e.identity=function(We,ze){return ye(ze)||(ze=We),_e.create(We,ze,Fe)},_e.symmetric=function(We){var ze=We.length,Xe,Je;if(We.length!==We[0].length)return!1;for(Xe=0;Xe<ze;Xe++)for(Je=0;Je<ze;Je++)if(We[Je][Xe]!==We[Xe][Je])return!1;return!0},_e.clear=function(We){return _e.alter(We,$e)},_e.seq=function(We,ze,Xe,Je){ge(Je)||(Je=!1);var nt=[],et=ve(We,ze),tt=(ze*et-We*et)/((Xe-1)*et),st=We,qe;for(qe=0;st<=ze&&qe<Xe;qe++,st=(We*et+tt*et*qe)/et)nt.push(Je?Je(st,qe):st);return nt},_e.arange=function(We,ze,Xe){var Je=[],nt;if(Xe=Xe||1,ze===ce&&(ze=We,We=0),We===ze||Xe===0)return[];if(We<ze&&Xe<0)return[];if(We>ze&&Xe>0)return[];if(Xe>0)for(nt=We;nt<ze;nt+=Xe)Je.push(nt);else for(nt=We;nt>ze;nt+=Xe)Je.push(nt);return Je},_e.slice=function(){function je(ze,Xe,Je,nt){var et,tt=[],st=ze.length;if(Xe===ce&&Je===ce&&nt===ce)return _e.copy(ze);if(Xe=Xe||0,Je=Je||ze.length,Xe=Xe>=0?Xe:st+Xe,Je=Je>=0?Je:st+Je,nt=nt||1,Xe===Je||nt===0)return[];if(Xe<Je&&nt<0)return[];if(Xe>Je&&nt>0)return[];if(nt>0)for(et=Xe;et<Je;et+=nt)tt.push(ze[et]);else for(et=Xe;et>Je;et+=nt)tt.push(ze[et]);return tt}function We(ze,Xe){var Je,nt;if(Xe=Xe||{},ye(Xe.row)){if(ye(Xe.col))return ze[Xe.row][Xe.col];var et=_e.rowa(ze,Xe.row);return Je=Xe.col||{},je(et,Je.start,Je.end,Je.step)}if(ye(Xe.col)){var tt=_e.cola(ze,Xe.col);return nt=Xe.row||{},je(tt,nt.start,nt.end,nt.step)}nt=Xe.row||{},Je=Xe.col||{};var st=je(ze,nt.start,nt.end,nt.step);return st.map(function(qe){return je(qe,Je.start,Je.end,Je.step)})}return We}(),_e.sliceAssign=function(We,ze,Xe){var Je,nt;if(ye(ze.row)){if(ye(ze.col))return We[ze.row][ze.col]=Xe;ze.col=ze.col||{},ze.col.start=ze.col.start||0,ze.col.end=ze.col.end||We[0].length,ze.col.step=ze.col.step||1,Je=_e.arange(ze.col.start,oe.min(We.length,ze.col.end),ze.col.step);var et=ze.row;return Je.forEach(function(st,qe){We[et][st]=Xe[qe]}),We}if(ye(ze.col)){ze.row=ze.row||{},ze.row.start=ze.row.start||0,ze.row.end=ze.row.end||We.length,ze.row.step=ze.row.step||1,nt=_e.arange(ze.row.start,oe.min(We[0].length,ze.row.end),ze.row.step);var tt=ze.col;return nt.forEach(function(st,qe){We[st][tt]=Xe[qe]}),We}return Xe[0].length===ce&&(Xe=[Xe]),ze.row.start=ze.row.start||0,ze.row.end=ze.row.end||We.length,ze.row.step=ze.row.step||1,ze.col.start=ze.col.start||0,ze.col.end=ze.col.end||We[0].length,ze.col.step=ze.col.step||1,nt=_e.arange(ze.row.start,oe.min(We.length,ze.row.end),ze.row.step),Je=_e.arange(ze.col.start,oe.min(We[0].length,ze.col.end),ze.col.step),nt.forEach(function(st,qe){Je.forEach(function(Se,Re){We[st][Se]=Xe[qe][Re]})}),We},_e.diagonal=function(We){var ze=_e.zeros(We.length,We.length);return We.forEach(function(Xe,Je){ze[Je][Je]=Xe}),ze},_e.copy=function(We){return We.map(function(ze){return ye(ze)?ze:ze.map(function(Xe){return Xe})})};var ke=_e.prototype;return ke.length=0,ke.push=Array.prototype.push,ke.sort=Array.prototype.sort,ke.splice=Array.prototype.splice,ke.slice=Array.prototype.slice,ke.toArray=function(){return this.length>1?Ae.call(this):Ae.call(this)[0]},ke.map=function(We,ze){return _e(_e.map(this,We,ze))},ke.cumreduce=function(We,ze){return _e(_e.cumreduce(this,We,ze))},ke.alter=function(We){return _e.alter(this,We),this},function(je){for(var We=0;We<je.length;We++)(function(ze){ke[ze]=function(Xe){var Je=this,nt;return Xe?(setTimeout(function(){Xe.call(Je,ke[ze].call(Je))}),this):(nt=_e[ze](this),me(nt)?_e(nt):nt)}})(je[We])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(je){for(var We=0;We<je.length;We++)(function(ze){ke[ze]=function(Xe,Je){var nt=this;return Je?(setTimeout(function(){Je.call(nt,ke[ze].call(nt,Xe))}),this):_e(_e[ze](this,Xe))}})(je[We])}("row col".split(" ")),function(je){for(var We=0;We<je.length;We++)(function(ze){ke[ze]=function(){return _e(_e[ze].apply(null,arguments))}})(je[We])}("create zeros ones rand identity".split(" ")),_e}(Math);return function(oe,ce){var ue=oe.utils.isFunction;function Ae(me,ge){return me-ge}function pe(me,ge,ye){return ce.max(ge,ce.min(me,ye))}oe.sum=function(ge){for(var ye=0,xe=ge.length;--xe>=0;)ye+=ge[xe];return ye},oe.sumsqrd=function(ge){for(var ye=0,xe=ge.length;--xe>=0;)ye+=ge[xe]*ge[xe];return ye},oe.sumsqerr=function(ge){for(var ye=oe.mean(ge),xe=0,_e=ge.length,$e;--_e>=0;)$e=ge[_e]-ye,xe+=$e*$e;return xe},oe.sumrow=function(ge){for(var ye=0,xe=ge.length;--xe>=0;)ye+=ge[xe];return ye},oe.product=function(ge){for(var ye=1,xe=ge.length;--xe>=0;)ye*=ge[xe];return ye},oe.min=function(ge){for(var ye=ge[0],xe=0;++xe<ge.length;)ge[xe]<ye&&(ye=ge[xe]);return ye},oe.max=function(ge){for(var ye=ge[0],xe=0;++xe<ge.length;)ge[xe]>ye&&(ye=ge[xe]);return ye},oe.unique=function(ge){for(var ye={},xe=[],_e=0;_e<ge.length;_e++)ye[ge[_e]]||(ye[ge[_e]]=!0,xe.push(ge[_e]));return xe},oe.mean=function(ge){return oe.sum(ge)/ge.length},oe.meansqerr=function(ge){return oe.sumsqerr(ge)/ge.length},oe.geomean=function(ge){var ye=ge.map(ce.log),xe=oe.mean(ye);return ce.exp(xe)},oe.median=function(ge){var ye=ge.length,xe=ge.slice().sort(Ae);return ye&1?xe[ye/2|0]:(xe[ye/2-1]+xe[ye/2])/2},oe.cumsum=function(ge){return oe.cumreduce(ge,function(ye,xe){return ye+xe})},oe.cumprod=function(ge){return oe.cumreduce(ge,function(ye,xe){return ye*xe})},oe.diff=function(ge){var ye=[],xe=ge.length,_e;for(_e=1;_e<xe;_e++)ye.push(ge[_e]-ge[_e-1]);return ye},oe.rank=function(me){var ge,ye=[],xe={};for(ge=0;ge<me.length;ge++){var _e=me[ge];xe[_e]?xe[_e]++:(xe[_e]=1,ye.push(_e))}var $e=ye.sort(Ae),Ie={},Fe=1;for(ge=0;ge<$e.length;ge++){var _e=$e[ge],ke=xe[_e],je=Fe,We=Fe+ke-1,ze=(je+We)/2;Ie[_e]=ze,Fe+=ke}return me.map(function(Xe){return Ie[Xe]})},oe.mode=function(ge){var ye=ge.length,xe=ge.slice().sort(Ae),_e=1,$e=0,Ie=0,Fe=[],ke;for(ke=0;ke<ye;ke++)xe[ke]===xe[ke+1]?_e++:(_e>$e?(Fe=[xe[ke]],$e=_e,Ie=0):_e===$e&&(Fe.push(xe[ke]),Ie++),_e=1);return Ie===0?Fe[0]:Fe},oe.range=function(ge){return oe.max(ge)-oe.min(ge)},oe.variance=function(ge,ye){return oe.sumsqerr(ge)/(ge.length-(ye?1:0))},oe.pooledvariance=function(ge){var ye=ge.reduce(function(_e,$e){return _e+oe.sumsqerr($e)},0),xe=ge.reduce(function(_e,$e){return _e+$e.length},0);return ye/(xe-ge.length)},oe.deviation=function(me){for(var ge=oe.mean(me),ye=me.length,xe=new Array(ye),_e=0;_e<ye;_e++)xe[_e]=me[_e]-ge;return xe},oe.stdev=function(ge,ye){return ce.sqrt(oe.variance(ge,ye))},oe.pooledstdev=function(ge){return ce.sqrt(oe.pooledvariance(ge))},oe.meandev=function(ge){for(var ye=oe.mean(ge),xe=[],_e=ge.length-1;_e>=0;_e--)xe.push(ce.abs(ge[_e]-ye));return oe.mean(xe)},oe.meddev=function(ge){for(var ye=oe.median(ge),xe=[],_e=ge.length-1;_e>=0;_e--)xe.push(ce.abs(ge[_e]-ye));return oe.median(xe)},oe.coeffvar=function(ge){return oe.stdev(ge)/oe.mean(ge)},oe.quartiles=function(ge){var ye=ge.length,xe=ge.slice().sort(Ae);return[xe[ce.round(ye/4)-1],xe[ce.round(ye/2)-1],xe[ce.round(ye*3/4)-1]]},oe.quantiles=function(ge,ye,xe,_e){var $e=ge.slice().sort(Ae),Ie=[ye.length],Fe=ge.length,ke,je,We,ze,Xe,Je;for(typeof xe>"u"&&(xe=3/8),typeof _e>"u"&&(_e=3/8),ke=0;ke<ye.length;ke++)je=ye[ke],We=xe+je*(1-xe-_e),ze=Fe*je+We,Xe=ce.floor(pe(ze,1,Fe-1)),Je=pe(ze-Xe,0,1),Ie[ke]=(1-Je)*$e[Xe-1]+Je*$e[Xe];return Ie},oe.percentile=function(ge,ye,xe){var _e=ge.slice().sort(Ae),$e=ye*(_e.length+(xe?1:-1))+(xe?0:1),Ie=parseInt($e),Fe=$e-Ie;return Ie+1<_e.length?_e[Ie-1]+Fe*(_e[Ie]-_e[Ie-1]):_e[Ie-1]},oe.percentileOfScore=function(ge,ye,xe){var _e=0,$e=ge.length,Ie=!1,Fe,ke;for(xe==="strict"&&(Ie=!0),ke=0;ke<$e;ke++)Fe=ge[ke],(Ie&&Fe<ye||!Ie&&Fe<=ye)&&_e++;return _e/$e},oe.histogram=function(ge,ye){ye=ye||4;var xe=oe.min(ge),_e=(oe.max(ge)-xe)/ye,$e=ge.length,Ie=[],Fe;for(Fe=0;Fe<ye;Fe++)Ie[Fe]=0;for(Fe=0;Fe<$e;Fe++)Ie[ce.min(ce.floor((ge[Fe]-xe)/_e),ye-1)]+=1;return Ie},oe.covariance=function(ge,ye){var xe=oe.mean(ge),_e=oe.mean(ye),$e=ge.length,Ie=new Array($e),Fe;for(Fe=0;Fe<$e;Fe++)Ie[Fe]=(ge[Fe]-xe)*(ye[Fe]-_e);return oe.sum(Ie)/($e-1)},oe.corrcoeff=function(ge,ye){return oe.covariance(ge,ye)/oe.stdev(ge,1)/oe.stdev(ye,1)},oe.spearmancoeff=function(me,ge){return me=oe.rank(me),ge=oe.rank(ge),oe.corrcoeff(me,ge)},oe.stanMoment=function(ge,ye){for(var xe=oe.mean(ge),_e=oe.stdev(ge),$e=ge.length,Ie=0,Fe=0;Fe<$e;Fe++)Ie+=ce.pow((ge[Fe]-xe)/_e,ye);return Ie/ge.length},oe.skewness=function(ge){return oe.stanMoment(ge,3)},oe.kurtosis=function(ge){return oe.stanMoment(ge,4)-3};var ve=oe.prototype;(function(me){for(var ge=0;ge<me.length;ge++)(function(ye){ve[ye]=function(xe,_e){var $e=[],Ie=0,Fe=this;if(ue(xe)&&(_e=xe,xe=!1),_e)return setTimeout(function(){_e.call(Fe,ve[ye].call(Fe,xe))}),this;if(this.length>1){for(Fe=xe===!0?this:this.transpose();Ie<Fe.length;Ie++)$e[Ie]=oe[ye](Fe[Ie]);return $e}return oe[ye](this[0],xe)}})(me[ge])})("cumsum cumprod".split(" ")),function(me){for(var ge=0;ge<me.length;ge++)(function(ye){ve[ye]=function(xe,_e){var $e=[],Ie=0,Fe=this;if(ue(xe)&&(_e=xe,xe=!1),_e)return setTimeout(function(){_e.call(Fe,ve[ye].call(Fe,xe))}),this;if(this.length>1){for(ye!=="sumrow"&&(Fe=xe===!0?this:this.transpose());Ie<Fe.length;Ie++)$e[Ie]=oe[ye](Fe[Ie]);return xe===!0?oe[ye](oe.utils.toVector($e)):$e}return oe[ye](this[0],xe)}})(me[ge])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(me){for(var ge=0;ge<me.length;ge++)(function(ye){ve[ye]=function(){var xe=[],_e=0,$e=this,Ie=Array.prototype.slice.call(arguments),Fe;if(ue(Ie[Ie.length-1])){Fe=Ie[Ie.length-1];var ke=Ie.slice(0,Ie.length-1);return setTimeout(function(){Fe.call($e,ve[ye].apply($e,ke))}),this}else{Fe=void 0;var je=function(ze){return oe[ye].apply($e,[ze].concat(Ie))}}if(this.length>1){for($e=$e.transpose();_e<$e.length;_e++)xe[_e]=je($e[_e]);return xe}return je(this[0])}})(me[ge])}("quantiles percentileOfScore".split(" "))}(ne,Math),function(oe,ce){oe.gammaln=function(Ae){var pe=0,ve=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],me=1.000000000190015,ge,ye,xe;for(xe=(ye=ge=Ae)+5.5,xe-=(ge+.5)*ce.log(xe);pe<6;pe++)me+=ve[pe]/++ye;return ce.log(2.5066282746310007*me/ge)-xe},oe.loggam=function(Ae){var pe,ve,me,ge,ye,xe,_e,$e=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(pe=Ae,_e=0,Ae==1||Ae==2)return 0;for(Ae<=7&&(_e=ce.floor(7-Ae),pe=Ae+_e),ve=1/(pe*pe),me=2*ce.PI,ye=$e[9],xe=8;xe>=0;xe--)ye*=ve,ye+=$e[xe];if(ge=ye/pe+.5*ce.log(me)+(pe-.5)*ce.log(pe)-pe,Ae<=7)for(xe=1;xe<=_e;xe++)ge-=ce.log(pe-1),pe-=1;return ge},oe.gammafn=function(Ae){var pe=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],ve=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],me=!1,ge=0,ye=0,xe=0,_e=Ae,$e,Ie,Fe,ke;if(Ae>171.6243769536076)return 1/0;if(_e<=0)if(ke=_e%1+36e-17,ke)me=(_e&1?-1:1)*ce.PI/ce.sin(ce.PI*ke),_e=1-_e;else return 1/0;for(Fe=_e,_e<1?Ie=_e++:Ie=(_e-=ge=(_e|0)-1)-1,$e=0;$e<8;++$e)xe=(xe+pe[$e])*Ie,ye=ye*Ie+ve[$e];if(ke=xe/ye+1,Fe<_e)ke/=Fe;else if(Fe>_e)for($e=0;$e<ge;++$e)ke*=_e,_e++;return me&&(ke=me/ke),ke},oe.gammap=function(Ae,pe){return oe.lowRegGamma(Ae,pe)*oe.gammafn(Ae)},oe.lowRegGamma=function(Ae,pe){var ve=oe.gammaln(Ae),me=Ae,ge=1/Ae,ye=ge,xe=pe+1-Ae,_e=1/1e-30,$e=1/xe,Ie=$e,Fe=1,ke=-~(ce.log(Ae>=1?Ae:1/Ae)*8.5+Ae*.4+17),je;if(pe<0||Ae<=0)return NaN;if(pe<Ae+1){for(;Fe<=ke;Fe++)ge+=ye*=pe/++me;return ge*ce.exp(-pe+Ae*ce.log(pe)-ve)}for(;Fe<=ke;Fe++)je=-Fe*(Fe-Ae),xe+=2,$e=je*$e+xe,_e=xe+je/_e,$e=1/$e,Ie*=$e*_e;return 1-Ie*ce.exp(-pe+Ae*ce.log(pe)-ve)},oe.factorialln=function(Ae){return Ae<0?NaN:oe.gammaln(Ae+1)},oe.factorial=function(Ae){return Ae<0?NaN:oe.gammafn(Ae+1)},oe.combination=function(Ae,pe){return Ae>170||pe>170?ce.exp(oe.combinationln(Ae,pe)):oe.factorial(Ae)/oe.factorial(pe)/oe.factorial(Ae-pe)},oe.combinationln=function(Ae,pe){return oe.factorialln(Ae)-oe.factorialln(pe)-oe.factorialln(Ae-pe)},oe.permutation=function(Ae,pe){return oe.factorial(Ae)/oe.factorial(Ae-pe)},oe.betafn=function(Ae,pe){if(!(Ae<=0||pe<=0))return Ae+pe>170?ce.exp(oe.betaln(Ae,pe)):oe.gammafn(Ae)*oe.gammafn(pe)/oe.gammafn(Ae+pe)},oe.betaln=function(Ae,pe){return oe.gammaln(Ae)+oe.gammaln(pe)-oe.gammaln(Ae+pe)},oe.betacf=function(Ae,pe,ve){var me=1e-30,ge=1,ye=pe+ve,xe=pe+1,_e=pe-1,$e=1,Ie=1-ye*Ae/xe,Fe,ke,je,We;for(ce.abs(Ie)<me&&(Ie=me),Ie=1/Ie,We=Ie;ge<=100&&(Fe=2*ge,ke=ge*(ve-ge)*Ae/((_e+Fe)*(pe+Fe)),Ie=1+ke*Ie,ce.abs(Ie)<me&&(Ie=me),$e=1+ke/$e,ce.abs($e)<me&&($e=me),Ie=1/Ie,We*=Ie*$e,ke=-(pe+ge)*(ye+ge)*Ae/((pe+Fe)*(xe+Fe)),Ie=1+ke*Ie,ce.abs(Ie)<me&&(Ie=me),$e=1+ke/$e,ce.abs($e)<me&&($e=me),Ie=1/Ie,je=Ie*$e,We*=je,!(ce.abs(je-1)<3e-7));ge++);return We},oe.gammapinv=function(Ae,pe){var ve=0,me=pe-1,ge=1e-8,ye=oe.gammaln(pe),xe,_e,$e,Ie,Fe,ke,je;if(Ae>=1)return ce.max(100,pe+100*ce.sqrt(pe));if(Ae<=0)return 0;for(pe>1?(ke=ce.log(me),je=ce.exp(me*(ke-1)-ye),Fe=Ae<.5?Ae:1-Ae,$e=ce.sqrt(-2*ce.log(Fe)),xe=(2.30753+$e*.27061)/(1+$e*(.99229+$e*.04481))-$e,Ae<.5&&(xe=-xe),xe=ce.max(.001,pe*ce.pow(1-1/(9*pe)-xe/(3*ce.sqrt(pe)),3))):($e=1-pe*(.253+pe*.12),Ae<$e?xe=ce.pow(Ae/$e,1/pe):xe=1-ce.log(1-(Ae-$e)/(1-$e)));ve<12;ve++){if(xe<=0)return 0;if(_e=oe.lowRegGamma(pe,xe)-Ae,pe>1?$e=je*ce.exp(-(xe-me)+me*(ce.log(xe)-ke)):$e=ce.exp(-xe+me*ce.log(xe)-ye),Ie=_e/$e,xe-=$e=Ie/(1-.5*ce.min(1,Ie*((pe-1)/xe-1))),xe<=0&&(xe=.5*(xe+$e)),ce.abs($e)<ge*xe)break}return xe},oe.erf=function(Ae){var pe=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],ve=pe.length-1,me=!1,ge=0,ye=0,xe,_e,$e,Ie;for(Ae<0&&(Ae=-Ae,me=!0),xe=2/(2+Ae),_e=4*xe-2;ve>0;ve--)$e=ge,ge=_e*ge-ye+pe[ve],ye=$e;return Ie=xe*ce.exp(-Ae*Ae+.5*(pe[0]+_e*ge)-ye),me?Ie-1:1-Ie},oe.erfc=function(Ae){return 1-oe.erf(Ae)},oe.erfcinv=function(Ae){var pe=0,ve,me,ge,ye;if(Ae>=2)return-100;if(Ae<=0)return 100;for(ye=Ae<1?Ae:2-Ae,ge=ce.sqrt(-2*ce.log(ye/2)),ve=-.70711*((2.30753+ge*.27061)/(1+ge*(.99229+ge*.04481))-ge);pe<2;pe++)me=oe.erfc(ve)-ye,ve+=me/(1.1283791670955126*ce.exp(-ve*ve)-ve*me);return Ae<1?ve:-ve},oe.ibetainv=function(Ae,pe,ve){var me=1e-8,ge=pe-1,ye=ve-1,xe=0,_e,$e,Ie,Fe,ke,je,We,ze,Xe,Je,nt;if(Ae<=0)return 0;if(Ae>=1)return 1;for(pe>=1&&ve>=1?(Ie=Ae<.5?Ae:1-Ae,Fe=ce.sqrt(-2*ce.log(Ie)),We=(2.30753+Fe*.27061)/(1+Fe*(.99229+Fe*.04481))-Fe,Ae<.5&&(We=-We),ze=(We*We-3)/6,Xe=2/(1/(2*pe-1)+1/(2*ve-1)),Je=We*ce.sqrt(ze+Xe)/Xe-(1/(2*ve-1)-1/(2*pe-1))*(ze+5/6-2/(3*Xe)),We=pe/(pe+ve*ce.exp(2*Je))):(_e=ce.log(pe/(pe+ve)),$e=ce.log(ve/(pe+ve)),Fe=ce.exp(pe*_e)/pe,ke=ce.exp(ve*$e)/ve,Je=Fe+ke,Ae<Fe/Je?We=ce.pow(pe*Je*Ae,1/pe):We=1-ce.pow(ve*Je*(1-Ae),1/ve)),nt=-oe.gammaln(pe)-oe.gammaln(ve)+oe.gammaln(pe+ve);xe<10;xe++){if(We===0||We===1)return We;if(je=oe.ibeta(We,pe,ve)-Ae,Fe=ce.exp(ge*ce.log(We)+ye*ce.log(1-We)+nt),ke=je/Fe,We-=Fe=ke/(1-.5*ce.min(1,ke*(ge/We-ye/(1-We)))),We<=0&&(We=.5*(We+Fe)),We>=1&&(We=.5*(We+Fe+1)),ce.abs(Fe)<me*We&&xe>0)break}return We},oe.ibeta=function(Ae,pe,ve){var me=Ae===0||Ae===1?0:ce.exp(oe.gammaln(pe+ve)-oe.gammaln(pe)-oe.gammaln(ve)+pe*ce.log(Ae)+ve*ce.log(1-Ae));return Ae<0||Ae>1?!1:Ae<(pe+1)/(pe+ve+2)?me*oe.betacf(Ae,pe,ve)/pe:1-me*oe.betacf(1-Ae,ve,pe)/ve},oe.randn=function(Ae,pe){var ve,me,ge,ye,xe;if(pe||(pe=Ae),Ae)return oe.create(Ae,pe,function(){return oe.randn()});do ve=oe._random_fn(),me=1.7156*(oe._random_fn()-.5),ge=ve-.449871,ye=ce.abs(me)+.386595,xe=ge*ge+ye*(.196*ye-.25472*ge);while(xe>.27597&&(xe>.27846||me*me>-4*ce.log(ve)*ve*ve));return me/ve},oe.randg=function(Ae,pe,ve){var me=Ae,ge,ye,xe,_e,$e,Ie;if(ve||(ve=pe),Ae||(Ae=1),pe)return Ie=oe.zeros(pe,ve),Ie.alter(function(){return oe.randg(Ae)}),Ie;Ae<1&&(Ae+=1),ge=Ae-1/3,ye=1/ce.sqrt(9*ge);do{do $e=oe.randn(),_e=1+ye*$e;while(_e<=0);_e=_e*_e*_e,xe=oe._random_fn()}while(xe>1-.331*ce.pow($e,4)&&ce.log(xe)>.5*$e*$e+ge*(1-_e+ce.log(_e)));if(Ae==me)return ge*_e;do xe=oe._random_fn();while(xe===0);return ce.pow(xe,1/me)*ge*_e},function(ue){for(var Ae=0;Ae<ue.length;Ae++)(function(pe){oe.fn[pe]=function(){return oe(oe.map(this,function(ve){return oe[pe](ve)}))}})(ue[Ae])}("gammaln gammafn factorial factorialln".split(" ")),function(ue){for(var Ae=0;Ae<ue.length;Ae++)(function(pe){oe.fn[pe]=function(){return oe(oe[pe].apply(null,arguments))}})(ue[Ae])}("randn".split(" "))}(ne,Math),function(oe,ce){(function(me){for(var ge=0;ge<me.length;ge++)(function(ye){oe[ye]=function xe(_e,$e,Ie){return this instanceof xe?(this._a=_e,this._b=$e,this._c=Ie,this):new xe(_e,$e,Ie)},oe.fn[ye]=function(xe,_e,$e){var Ie=oe[ye](xe,_e,$e);return Ie.data=this,Ie},oe[ye].prototype.sample=function(xe){var _e=this._a,$e=this._b,Ie=this._c;return xe?oe.alter(xe,function(){return oe[ye].sample(_e,$e,Ie)}):oe[ye].sample(_e,$e,Ie)},function(xe){for(var _e=0;_e<xe.length;_e++)(function($e){oe[ye].prototype[$e]=function(Ie){var Fe=this._a,ke=this._b,je=this._c;return!Ie&&Ie!==0&&(Ie=this.data),typeof Ie!="number"?oe.fn.map.call(Ie,function(We){return oe[ye][$e](We,Fe,ke,je)}):oe[ye][$e](Ie,Fe,ke,je)}})(xe[_e])}("pdf cdf inv".split(" ")),function(xe){for(var _e=0;_e<xe.length;_e++)(function($e){oe[ye].prototype[$e]=function(){return oe[ye][$e](this._a,this._b,this._c)}})(xe[_e])}("mean median mode variance".split(" "))})(me[ge])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),oe.extend(oe.beta,{pdf:function(ge,ye,xe){return ge>1||ge<0?0:ye==1&&xe==1?1:ye<512&&xe<512?ce.pow(ge,ye-1)*ce.pow(1-ge,xe-1)/oe.betafn(ye,xe):ce.exp((ye-1)*ce.log(ge)+(xe-1)*ce.log(1-ge)-oe.betaln(ye,xe))},cdf:function(ge,ye,xe){return ge>1||ge<0?(ge>1)*1:oe.ibeta(ge,ye,xe)},inv:function(ge,ye,xe){return oe.ibetainv(ge,ye,xe)},mean:function(ge,ye){return ge/(ge+ye)},median:function(ge,ye){return oe.ibetainv(.5,ge,ye)},mode:function(ge,ye){return(ge-1)/(ge+ye-2)},sample:function(ge,ye){var xe=oe.randg(ge);return xe/(xe+oe.randg(ye))},variance:function(ge,ye){return ge*ye/(ce.pow(ge+ye,2)*(ge+ye+1))}}),oe.extend(oe.centralF,{pdf:function(ge,ye,xe){var _e,$e,Ie;return ge<0?0:ye<=2?ge===0&&ye<2?1/0:ge===0&&ye===2?1:1/oe.betafn(ye/2,xe/2)*ce.pow(ye/xe,ye/2)*ce.pow(ge,ye/2-1)*ce.pow(1+ye/xe*ge,-(ye+xe)/2):(_e=ye*ge/(xe+ge*ye),$e=xe/(xe+ge*ye),Ie=ye*$e/2,Ie*oe.binomial.pdf((ye-2)/2,(ye+xe-2)/2,_e))},cdf:function(ge,ye,xe){return ge<0?0:oe.ibeta(ye*ge/(ye*ge+xe),ye/2,xe/2)},inv:function(ge,ye,xe){return xe/(ye*(1/oe.ibetainv(ge,ye/2,xe/2)-1))},mean:function(ge,ye){return ye>2?ye/(ye-2):void 0},mode:function(ge,ye){return ge>2?ye*(ge-2)/(ge*(ye+2)):void 0},sample:function(ge,ye){var xe=oe.randg(ge/2)*2,_e=oe.randg(ye/2)*2;return xe/ge/(_e/ye)},variance:function(ge,ye){if(!(ye<=4))return 2*ye*ye*(ge+ye-2)/(ge*(ye-2)*(ye-2)*(ye-4))}}),oe.extend(oe.cauchy,{pdf:function(ge,ye,xe){return xe<0?0:xe/(ce.pow(ge-ye,2)+ce.pow(xe,2))/ce.PI},cdf:function(ge,ye,xe){return ce.atan((ge-ye)/xe)/ce.PI+.5},inv:function(me,ge,ye){return ge+ye*ce.tan(ce.PI*(me-.5))},median:function(ge){return ge},mode:function(ge){return ge},sample:function(ge,ye){return oe.randn()*ce.sqrt(1/(2*oe.randg(.5)))*ye+ge}}),oe.extend(oe.chisquare,{pdf:function(ge,ye){return ge<0?0:ge===0&&ye===2?.5:ce.exp((ye/2-1)*ce.log(ge)-ge/2-ye/2*ce.log(2)-oe.gammaln(ye/2))},cdf:function(ge,ye){return ge<0?0:oe.lowRegGamma(ye/2,ge/2)},inv:function(me,ge){return 2*oe.gammapinv(me,.5*ge)},mean:function(me){return me},median:function(ge){return ge*ce.pow(1-2/(9*ge),3)},mode:function(ge){return ge-2>0?ge-2:0},sample:function(ge){return oe.randg(ge/2)*2},variance:function(ge){return 2*ge}}),oe.extend(oe.exponential,{pdf:function(ge,ye){return ge<0?0:ye*ce.exp(-ye*ge)},cdf:function(ge,ye){return ge<0?0:1-ce.exp(-ye*ge)},inv:function(me,ge){return-ce.log(1-me)/ge},mean:function(me){return 1/me},median:function(me){return 1/me*ce.log(2)},mode:function(){return 0},sample:function(ge){return-1/ge*ce.log(oe._random_fn())},variance:function(me){return ce.pow(me,-2)}}),oe.extend(oe.gamma,{pdf:function(ge,ye,xe){return ge<0?0:ge===0&&ye===1?1/xe:ce.exp((ye-1)*ce.log(ge)-ge/xe-oe.gammaln(ye)-ye*ce.log(xe))},cdf:function(ge,ye,xe){return ge<0?0:oe.lowRegGamma(ye,ge/xe)},inv:function(me,ge,ye){return oe.gammapinv(me,ge)*ye},mean:function(me,ge){return me*ge},mode:function(ge,ye){if(ge>1)return(ge-1)*ye},sample:function(ge,ye){return oe.randg(ge)*ye},variance:function(ge,ye){return ge*ye*ye}}),oe.extend(oe.invgamma,{pdf:function(ge,ye,xe){return ge<=0?0:ce.exp(-(ye+1)*ce.log(ge)-xe/ge-oe.gammaln(ye)+ye*ce.log(xe))},cdf:function(ge,ye,xe){return ge<=0?0:1-oe.lowRegGamma(ye,xe/ge)},inv:function(me,ge,ye){return ye/oe.gammapinv(1-me,ge)},mean:function(me,ge){return me>1?ge/(me-1):void 0},mode:function(ge,ye){return ye/(ge+1)},sample:function(ge,ye){return ye/oe.randg(ge)},variance:function(ge,ye){if(!(ge<=2))return ye*ye/((ge-1)*(ge-1)*(ge-2))}}),oe.extend(oe.kumaraswamy,{pdf:function(ge,ye,xe){return ge===0&&ye===1?xe:ge===1&&xe===1?ye:ce.exp(ce.log(ye)+ce.log(xe)+(ye-1)*ce.log(ge)+(xe-1)*ce.log(1-ce.pow(ge,ye)))},cdf:function(ge,ye,xe){return ge<0?0:ge>1?1:1-ce.pow(1-ce.pow(ge,ye),xe)},inv:function(ge,ye,xe){return ce.pow(1-ce.pow(1-ge,1/xe),1/ye)},mean:function(me,ge){return ge*oe.gammafn(1+1/me)*oe.gammafn(ge)/oe.gammafn(1+1/me+ge)},median:function(ge,ye){return ce.pow(1-ce.pow(2,-1/ye),1/ge)},mode:function(ge,ye){if(ge>=1&&ye>=1&&ge!==1&&ye!==1)return ce.pow((ge-1)/(ge*ye-1),1/ge)},variance:function(){throw new Error("variance not yet implemented")}}),oe.extend(oe.lognormal,{pdf:function(ge,ye,xe){return ge<=0?0:ce.exp(-ce.log(ge)-.5*ce.log(2*ce.PI)-ce.log(xe)-ce.pow(ce.log(ge)-ye,2)/(2*xe*xe))},cdf:function(ge,ye,xe){return ge<0?0:.5+.5*oe.erf((ce.log(ge)-ye)/ce.sqrt(2*xe*xe))},inv:function(me,ge,ye){return ce.exp(-1.4142135623730951*ye*oe.erfcinv(2*me)+ge)},mean:function(ge,ye){return ce.exp(ge+ye*ye/2)},median:function(ge){return ce.exp(ge)},mode:function(ge,ye){return ce.exp(ge-ye*ye)},sample:function(ge,ye){return ce.exp(oe.randn()*ye+ge)},variance:function(ge,ye){return(ce.exp(ye*ye)-1)*ce.exp(2*ge+ye*ye)}}),oe.extend(oe.noncentralt,{pdf:function(ge,ye,xe){var _e=1e-14;return ce.abs(xe)<_e?oe.studentt.pdf(ge,ye):ce.abs(ge)<_e?ce.exp(oe.gammaln((ye+1)/2)-xe*xe/2-.5*ce.log(ce.PI*ye)-oe.gammaln(ye/2)):ye/ge*(oe.noncentralt.cdf(ge*ce.sqrt(1+2/ye),ye+2,xe)-oe.noncentralt.cdf(ge,ye,xe))},cdf:function(ge,ye,xe){var _e=1e-14,$e=200;if(ce.abs(xe)<_e)return oe.studentt.cdf(ge,ye);var Ie=!1;ge<0&&(Ie=!0,xe=-xe);for(var Fe=oe.normal.cdf(-xe,0,1),ke=_e+1,je=ke,We=ge*ge/(ge*ge+ye),ze=0,Xe=ce.exp(-xe*xe/2),Je=ce.exp(-xe*xe/2-.5*ce.log(2)-oe.gammaln(3/2))*xe;ze<$e||je>_e||ke>_e;)je=ke,ze>0&&(Xe*=xe*xe/(2*ze),Je*=xe*xe/(2*(ze+1/2))),ke=Xe*oe.beta.cdf(We,ze+.5,ye/2)+Je*oe.beta.cdf(We,ze+1,ye/2),Fe+=.5*ke,ze++;return Ie?1-Fe:Fe}}),oe.extend(oe.normal,{pdf:function(ge,ye,xe){return ce.exp(-.5*ce.log(2*ce.PI)-ce.log(xe)-ce.pow(ge-ye,2)/(2*xe*xe))},cdf:function(ge,ye,xe){return .5*(1+oe.erf((ge-ye)/ce.sqrt(2*xe*xe)))},inv:function(me,ge,ye){return-1.4142135623730951*ye*oe.erfcinv(2*me)+ge},mean:function(me){return me},median:function(ge){return ge},mode:function(me){return me},sample:function(ge,ye){return oe.randn()*ye+ge},variance:function(me,ge){return ge*ge}}),oe.extend(oe.pareto,{pdf:function(ge,ye,xe){return ge<ye?0:xe*ce.pow(ye,xe)/ce.pow(ge,xe+1)},cdf:function(ge,ye,xe){return ge<ye?0:1-ce.pow(ye/ge,xe)},inv:function(ge,ye,xe){return ye/ce.pow(1-ge,1/xe)},mean:function(ge,ye){if(!(ye<=1))return ye*ce.pow(ge,ye)/(ye-1)},median:function(ge,ye){return ge*(ye*ce.SQRT2)},mode:function(ge){return ge},variance:function(me,ge){if(!(ge<=2))return me*me*ge/(ce.pow(ge-1,2)*(ge-2))}}),oe.extend(oe.studentt,{pdf:function(ge,ye){return ye=ye>1e100?1e100:ye,1/(ce.sqrt(ye)*oe.betafn(.5,ye/2))*ce.pow(1+ge*ge/ye,-((ye+1)/2))},cdf:function(ge,ye){var xe=ye/2;return oe.ibeta((ge+ce.sqrt(ge*ge+ye))/(2*ce.sqrt(ge*ge+ye)),xe,xe)},inv:function(me,ge){var ye=oe.ibetainv(2*ce.min(me,1-me),.5*ge,.5);return ye=ce.sqrt(ge*(1-ye)/ye),me>.5?ye:-ye},mean:function(ge){return ge>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(ge){return oe.randn()*ce.sqrt(ge/(2*oe.randg(ge/2)))},variance:function(ge){return ge>2?ge/(ge-2):ge>1?1/0:void 0}}),oe.extend(oe.weibull,{pdf:function(ge,ye,xe){return ge<0||ye<0||xe<0?0:xe/ye*ce.pow(ge/ye,xe-1)*ce.exp(-ce.pow(ge/ye,xe))},cdf:function(ge,ye,xe){return ge<0?0:1-ce.exp(-ce.pow(ge/ye,xe))},inv:function(me,ge,ye){return ge*ce.pow(-ce.log(1-me),1/ye)},mean:function(me,ge){return me*oe.gammafn(1+1/ge)},median:function(ge,ye){return ge*ce.pow(ce.log(2),1/ye)},mode:function(ge,ye){return ye<=1?0:ge*ce.pow((ye-1)/ye,1/ye)},sample:function(ge,ye){return ge*ce.pow(-ce.log(oe._random_fn()),1/ye)},variance:function(ge,ye){return ge*ge*oe.gammafn(1+2/ye)-ce.pow(oe.weibull.mean(ge,ye),2)}}),oe.extend(oe.uniform,{pdf:function(ge,ye,xe){return ge<ye||ge>xe?0:1/(xe-ye)},cdf:function(ge,ye,xe){return ge<ye?0:ge<xe?(ge-ye)/(xe-ye):1},inv:function(me,ge,ye){return ge+me*(ye-ge)},mean:function(ge,ye){return .5*(ge+ye)},median:function(ge,ye){return oe.mean(ge,ye)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(ge,ye){return ge/2+ye/2+(ye/2-ge/2)*(2*oe._random_fn()-1)},variance:function(ge,ye){return ce.pow(ye-ge,2)/12}});function ue(me,ge,ye,xe){for(var _e=0,$e=1,Ie=1,Fe=1,ke=0,je=0,We;ce.abs((Ie-je)/Ie)>xe;)je=Ie,We=-(ge+ke)*(ge+ye+ke)*me/(ge+2*ke)/(ge+2*ke+1),_e=Ie+We*_e,$e=Fe+We*$e,ke=ke+1,We=ke*(ye-ke)*me/(ge+2*ke-1)/(ge+2*ke),Ie=_e+We*Ie,Fe=$e+We*Fe,_e=_e/Fe,$e=$e/Fe,Ie=Ie/Fe,Fe=1;return Ie/ge}oe.extend(oe.binomial,{pdf:function(ge,ye,xe){return xe===0||xe===1?ye*xe===ge?1:0:oe.combination(ye,ge)*ce.pow(xe,ge)*ce.pow(1-xe,ye-ge)},cdf:function(ge,ye,xe){var _e,$e=1e-10;if(ge<0)return 0;if(ge>=ye)return 1;if(xe<0||xe>1||ye<=0)return NaN;ge=ce.floor(ge);var Ie=xe,Fe=ge+1,ke=ye-ge,je=Fe+ke,We=ce.exp(oe.gammaln(je)-oe.gammaln(ke)-oe.gammaln(Fe)+Fe*ce.log(Ie)+ke*ce.log(1-Ie));return Ie<(Fe+1)/(je+2)?_e=We*ue(Ie,Fe,ke,$e):_e=1-We*ue(1-Ie,ke,Fe,$e),ce.round((1-_e)*(1/$e))/(1/$e)}}),oe.extend(oe.negbin,{pdf:function(ge,ye,xe){return ge!==ge>>>0?!1:ge<0?0:oe.combination(ge+ye-1,ye-1)*ce.pow(1-xe,ge)*ce.pow(xe,ye)},cdf:function(ge,ye,xe){var _e=0,$e=0;if(ge<0)return 0;for(;$e<=ge;$e++)_e+=oe.negbin.pdf($e,ye,xe);return _e}}),oe.extend(oe.hypgeom,{pdf:function(ge,ye,xe,_e){if(ge!==ge|0)return!1;if(ge<0||ge<xe-(ye-_e))return 0;if(ge>_e||ge>xe)return 0;if(xe*2>ye)return _e*2>ye?oe.hypgeom.pdf(ye-xe-_e+ge,ye,ye-xe,ye-_e):oe.hypgeom.pdf(_e-ge,ye,ye-xe,_e);if(_e*2>ye)return oe.hypgeom.pdf(xe-ge,ye,xe,ye-_e);if(xe<_e)return oe.hypgeom.pdf(ge,ye,_e,xe);for(var $e=1,Ie=0,Fe=0;Fe<ge;Fe++){for(;$e>1&&Ie<_e;)$e*=1-xe/(ye-Ie),Ie++;$e*=(_e-Fe)*(xe-Fe)/((Fe+1)*(ye-xe-_e+Fe+1))}for(;Ie<_e;Ie++)$e*=1-xe/(ye-Ie);return ce.min(1,ce.max(0,$e))},cdf:function(ge,ye,xe,_e){if(ge<0||ge<xe-(ye-_e))return 0;if(ge>=_e||ge>=xe)return 1;if(xe*2>ye)return _e*2>ye?oe.hypgeom.cdf(ye-xe-_e+ge,ye,ye-xe,ye-_e):1-oe.hypgeom.cdf(_e-ge-1,ye,ye-xe,_e);if(_e*2>ye)return 1-oe.hypgeom.cdf(xe-ge-1,ye,xe,ye-_e);if(xe<_e)return oe.hypgeom.cdf(ge,ye,_e,xe);for(var $e=1,Ie=1,Fe=0,ke=0;ke<ge;ke++){for(;$e>1&&Fe<_e;){var je=1-xe/(ye-Fe);Ie*=je,$e*=je,Fe++}Ie*=(_e-ke)*(xe-ke)/((ke+1)*(ye-xe-_e+ke+1)),$e+=Ie}for(;Fe<_e;Fe++)$e*=1-xe/(ye-Fe);return ce.min(1,ce.max(0,$e))}}),oe.extend(oe.poisson,{pdf:function(ge,ye){return ye<0||ge%1!==0||ge<0?0:ce.pow(ye,ge)*ce.exp(-ye)/oe.factorial(ge)},cdf:function(ge,ye){var xe=[],_e=0;if(ge<0)return 0;for(;_e<=ge;_e++)xe.push(oe.poisson.pdf(_e,ye));return oe.sum(xe)},mean:function(me){return me},variance:function(me){return me},sampleSmall:function(ge){var ye=1,xe=0,_e=ce.exp(-ge);do xe++,ye*=oe._random_fn();while(ye>_e);return xe-1},sampleLarge:function(ge){var ye=ge,xe,_e,$e,Ie,Fe,ke,je,We,ze,Xe;for(Ie=ce.sqrt(ye),Fe=ce.log(ye),je=.931+2.53*Ie,ke=-.059+.02483*je,We=1.1239+1.1328/(je-3.4),ze=.9277-3.6224/(je-2);;){if(_e=ce.random()-.5,$e=ce.random(),Xe=.5-ce.abs(_e),xe=ce.floor((2*ke/Xe+je)*_e+ye+.43),Xe>=.07&&$e<=ze)return xe;if(!(xe<0||Xe<.013&&$e>Xe)&&ce.log($e)+ce.log(We)-ce.log(ke/(Xe*Xe)+je)<=-ye+xe*Fe-oe.loggam(xe+1))return xe}},sample:function(ge){return ge<10?this.sampleSmall(ge):this.sampleLarge(ge)}}),oe.extend(oe.triangular,{pdf:function(ge,ye,xe,_e){return xe<=ye||_e<ye||_e>xe?NaN:ge<ye||ge>xe?0:ge<_e?2*(ge-ye)/((xe-ye)*(_e-ye)):ge===_e?2/(xe-ye):2*(xe-ge)/((xe-ye)*(xe-_e))},cdf:function(ge,ye,xe,_e){return xe<=ye||_e<ye||_e>xe?NaN:ge<=ye?0:ge>=xe?1:ge<=_e?ce.pow(ge-ye,2)/((xe-ye)*(_e-ye)):1-ce.pow(xe-ge,2)/((xe-ye)*(xe-_e))},inv:function(ge,ye,xe,_e){return xe<=ye||_e<ye||_e>xe?NaN:ge<=(_e-ye)/(xe-ye)?ye+(xe-ye)*ce.sqrt(ge*((_e-ye)/(xe-ye))):ye+(xe-ye)*(1-ce.sqrt((1-ge)*(1-(_e-ye)/(xe-ye))))},mean:function(ge,ye,xe){return(ge+ye+xe)/3},median:function(ge,ye,xe){if(xe<=(ge+ye)/2)return ye-ce.sqrt((ye-ge)*(ye-xe))/ce.sqrt(2);if(xe>(ge+ye)/2)return ge+ce.sqrt((ye-ge)*(xe-ge))/ce.sqrt(2)},mode:function(ge,ye,xe){return xe},sample:function(ge,ye,xe){var _e=oe._random_fn();return _e<(xe-ge)/(ye-ge)?ge+ce.sqrt(_e*(ye-ge)*(xe-ge)):ye-ce.sqrt((1-_e)*(ye-ge)*(ye-xe))},variance:function(ge,ye,xe){return(ge*ge+ye*ye+xe*xe-ge*ye-ge*xe-ye*xe)/18}}),oe.extend(oe.arcsine,{pdf:function(ge,ye,xe){return xe<=ye?NaN:ge<=ye||ge>=xe?0:2/ce.PI*ce.pow(ce.pow(xe-ye,2)-ce.pow(2*ge-ye-xe,2),-.5)},cdf:function(ge,ye,xe){return ge<ye?0:ge<xe?2/ce.PI*ce.asin(ce.sqrt((ge-ye)/(xe-ye))):1},inv:function(me,ge,ye){return ge+(.5-.5*ce.cos(ce.PI*me))*(ye-ge)},mean:function(ge,ye){return ye<=ge?NaN:(ge+ye)/2},median:function(ge,ye){return ye<=ge?NaN:(ge+ye)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(ge,ye){return(ge+ye)/2+(ye-ge)/2*ce.sin(2*ce.PI*oe.uniform.sample(0,1))},variance:function(ge,ye){return ye<=ge?NaN:ce.pow(ye-ge,2)/8}});function Ae(me){return me/ce.abs(me)}oe.extend(oe.laplace,{pdf:function(ge,ye,xe){return xe<=0?0:ce.exp(-ce.abs(ge-ye)/xe)/(2*xe)},cdf:function(ge,ye,xe){return xe<=0?0:ge<ye?.5*ce.exp((ge-ye)/xe):1-.5*ce.exp(-(ge-ye)/xe)},mean:function(me){return me},median:function(me){return me},mode:function(me){return me},variance:function(me,ge){return 2*ge*ge},sample:function(ge,ye){var xe=oe._random_fn()-.5;return ge-ye*Ae(xe)*ce.log(1-2*ce.abs(xe))}});function pe(me,ge,ye){var xe=12,_e=6,$e=-30,Ie=-50,Fe=60,ke=8,je=3,We=2,ze=3,Xe=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],Je=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],nt=me*.5;if(nt>=ke)return 1;var et=2*oe.normal.cdf(nt,0,1,1,0)-1;et>=ce.exp(Ie/ye)?et=ce.pow(et,ye):et=0;var tt;me>je?tt=We:tt=ze;for(var st=nt,qe=(ke-nt)/tt,Se=st+qe,Re=0,Be=ye-1,Ne=1;Ne<=tt;Ne++){for(var Ue=0,Ge=.5*(Se+st),Ye=.5*(Se-st),Qe=1;Qe<=xe;Qe++){var Te,Ke;_e<Qe?(Te=xe-Qe+1,Ke=Xe[Te-1]):(Te=Qe,Ke=-Xe[Te-1]);var rt=Ye*Ke,it=Ge+rt,at=it*it;if(at>Fe)break;var lt=2*oe.normal.cdf(it,0,1,1,0),ct=2*oe.normal.cdf(it,me,1,1,0),ot=lt*.5-ct*.5;ot>=ce.exp($e/Be)&&(ot=Je[Te-1]*ce.exp(-(.5*at))*ce.pow(ot,Be),Ue+=ot)}Ue*=2*Ye*ye/ce.sqrt(2*ce.PI),Re+=Ue,st=Se,Se+=qe}return et+=Re,et<=ce.exp($e/ge)?0:(et=ce.pow(et,ge),et>=1?1:et)}function ve(me,ge,ye){var xe=.322232421088,_e=.099348462606,$e=-1,Ie=.588581570495,Fe=-.342242088547,ke=.531103462366,je=-.204231210125,We=.10353775285,ze=-453642210148e-16,Xe=.0038560700634,Je=.8832,nt=.2368,et=1.214,tt=1.208,st=1.4142,qe=120,Se=.5-.5*me,Re=ce.sqrt(ce.log(1/(Se*Se))),Be=Re+((((Re*ze+je)*Re+Fe)*Re+$e)*Re+xe)/((((Re*Xe+We)*Re+ke)*Re+Ie)*Re+_e);ye<qe&&(Be+=(Be*Be*Be+Be)/ye/4);var Ne=Je-nt*Be;return ye<qe&&(Ne+=-et/ye+tt*Be/ye),Be*(Ne*ce.log(ge-1)+st)}oe.extend(oe.tukey,{cdf:function(ge,ye,xe){var _e=1,$e=ye,Ie=16,Fe=8,ke=-30,je=1e-14,We=100,ze=800,Xe=5e3,Je=25e3,nt=1,et=.5,tt=.25,st=.125,qe=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],Se=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(ge<=0)return 0;if(xe<2||_e<1||$e<2)return NaN;if(!Number.isFinite(ge))return 1;if(xe>Je)return pe(ge,_e,$e);var Re=xe*.5,Be=Re*ce.log(xe)-xe*ce.log(2)-oe.gammaln(Re),Ne=Re-1,Ue=xe*.25,Ge;xe<=We?Ge=nt:xe<=ze?Ge=et:xe<=Xe?Ge=tt:Ge=st,Be+=ce.log(Ge);for(var Ye=0,Qe=1;Qe<=50;Qe++){for(var Te=0,Ke=(2*Qe-1)*Ge,rt=1;rt<=Ie;rt++){var it,at;Fe<rt?(it=rt-Fe-1,at=Be+Ne*ce.log(Ke+qe[it]*Ge)-(qe[it]*Ge+Ke)*Ue):(it=rt-1,at=Be+Ne*ce.log(Ke-qe[it]*Ge)+(qe[it]*Ge-Ke)*Ue);var lt;if(at>=ke){Fe<rt?lt=ge*ce.sqrt((qe[it]*Ge+Ke)*.5):lt=ge*ce.sqrt((-(qe[it]*Ge)+Ke)*.5);var ct=pe(lt,_e,$e),ot=ct*Se[it]*ce.exp(at);Te+=ot}}if(Qe*Ge>=1&&Te<=je)break;Ye+=Te}if(Te>je)throw new Error("tukey.cdf failed to converge");return Ye>1&&(Ye=1),Ye},inv:function(me,ge,ye){var xe=1,_e=ge,$e=1e-4,Ie=50;if(ye<2||xe<1||_e<2)return NaN;if(me<0||me>1)return NaN;if(me===0)return 0;if(me===1)return 1/0;var Fe=ve(me,_e,ye),ke=oe.tukey.cdf(Fe,ge,ye)-me,je;ke>0?je=ce.max(0,Fe-1):je=Fe+1;for(var We=oe.tukey.cdf(je,ge,ye)-me,ze,Xe=1;Xe<Ie;Xe++){ze=je-We*(je-Fe)/(We-ke),ke=We,Fe=je,ze<0&&(ze=0,We=-me),We=oe.tukey.cdf(ze,ge,ye)-me,je=ze;var Je=ce.abs(je-Fe);if(Je<$e)return ze}throw new Error("tukey.inv failed to converge")}})}(ne,Math),function(oe,ce){var ue=Array.prototype.push,Ae=oe.utils.isArray;function pe(ve){return Ae(ve)||ve instanceof oe}oe.extend({add:function(me,ge){return pe(ge)?(pe(ge[0])||(ge=[ge]),oe.map(me,function(ye,xe,_e){return ye+ge[xe][_e]})):oe.map(me,function(ye){return ye+ge})},subtract:function(me,ge){return pe(ge)?(pe(ge[0])||(ge=[ge]),oe.map(me,function(ye,xe,_e){return ye-ge[xe][_e]||0})):oe.map(me,function(ye){return ye-ge})},divide:function(me,ge){return pe(ge)?(pe(ge[0])||(ge=[ge]),oe.multiply(me,oe.inv(ge))):oe.map(me,function(ye){return ye/ge})},multiply:function(me,ge){var ye,xe,_e,$e,Ie,Fe,ke,je;if(me.length===void 0&&ge.length===void 0)return me*ge;if(Ie=me.length,Fe=me[0].length,ke=oe.zeros(Ie,_e=pe(ge)?ge[0].length:Fe),je=0,pe(ge)){for(;je<_e;je++)for(ye=0;ye<Ie;ye++){for($e=0,xe=0;xe<Fe;xe++)$e+=me[ye][xe]*ge[xe][je];ke[ye][je]=$e}return Ie===1&&je===1?ke[0][0]:ke}return oe.map(me,function(We){return We*ge})},outer:function(me,ge){return oe.multiply(me.map(function(ye){return[ye]}),[ge])},dot:function(me,ge){pe(me[0])||(me=[me]),pe(ge[0])||(ge=[ge]);for(var ye=me[0].length===1&&me.length!==1?oe.transpose(me):me,xe=ge[0].length===1&&ge.length!==1?oe.transpose(ge):ge,_e=[],$e=0,Ie=ye.length,Fe=ye[0].length,ke,je;$e<Ie;$e++){for(_e[$e]=[],ke=0,je=0;je<Fe;je++)ke+=ye[$e][je]*xe[$e][je];_e[$e]=ke}return _e.length===1?_e[0]:_e},pow:function(me,ge){return oe.map(me,function(ye){return ce.pow(ye,ge)})},exp:function(me){return oe.map(me,function(ge){return ce.exp(ge)})},log:function(me){return oe.map(me,function(ge){return ce.log(ge)})},abs:function(me){return oe.map(me,function(ge){return ce.abs(ge)})},norm:function(me,ge){var ye=0,xe=0;for(isNaN(ge)&&(ge=2),pe(me[0])&&(me=me[0]);xe<me.length;xe++)ye+=ce.pow(ce.abs(me[xe]),ge);return ce.pow(ye,1/ge)},angle:function(me,ge){return ce.acos(oe.dot(me,ge)/(oe.norm(me)*oe.norm(ge)))},aug:function(me,ge){var ye=[],xe;for(xe=0;xe<me.length;xe++)ye.push(me[xe].slice());for(xe=0;xe<ye.length;xe++)ue.apply(ye[xe],ge[xe]);return ye},inv:function(me){for(var ge=me.length,ye=me[0].length,xe=oe.identity(ge,ye),_e=oe.gauss_jordan(me,xe),$e=[],Ie=0,Fe;Ie<ge;Ie++)for($e[Ie]=[],Fe=ye;Fe<_e[0].length;Fe++)$e[Ie][Fe-ye]=_e[Ie][Fe];return $e},det:function ve(me){if(me.length===2)return me[0][0]*me[1][1]-me[0][1]*me[1][0];for(var ge=0,ye=0;ye<me.length;ye++){for(var xe=[],_e=1;_e<me.length;_e++){xe[_e-1]=[];for(var $e=0;$e<me.length;$e++)$e<ye?xe[_e-1][$e]=me[_e][$e]:$e>ye&&(xe[_e-1][$e-1]=me[_e][$e])}var Ie=ye%2?-1:1;ge+=ve(xe)*me[0][ye]*Ie}return ge},gauss_elimination:function(me,ge){var ye=0,xe=0,_e=me.length,$e=me[0].length,Ie=1,Fe=0,ke=[],je,We,ze,Xe;for(me=oe.aug(me,ge),je=me[0].length,ye=0;ye<_e;ye++){for(We=me[ye][ye],xe=ye,Xe=ye+1;Xe<$e;Xe++)We<ce.abs(me[Xe][ye])&&(We=me[Xe][ye],xe=Xe);if(xe!=ye)for(Xe=0;Xe<je;Xe++)ze=me[ye][Xe],me[ye][Xe]=me[xe][Xe],me[xe][Xe]=ze;for(xe=ye+1;xe<_e;xe++)for(Ie=me[xe][ye]/me[ye][ye],Xe=ye;Xe<je;Xe++)me[xe][Xe]=me[xe][Xe]-Ie*me[ye][Xe]}for(ye=_e-1;ye>=0;ye--){for(Fe=0,xe=ye+1;xe<=_e-1;xe++)Fe=Fe+ke[xe]*me[ye][xe];ke[ye]=(me[ye][je-1]-Fe)/me[ye][ye]}return ke},gauss_jordan:function(me,ge){var ye=oe.aug(me,ge),xe=ye.length,_e=ye[0].length,$e=0,Ie,Fe,ke;for(Fe=0;Fe<xe;Fe++){var je=Fe;for(ke=Fe+1;ke<xe;ke++)ce.abs(ye[ke][Fe])>ce.abs(ye[je][Fe])&&(je=ke);var We=ye[Fe];for(ye[Fe]=ye[je],ye[je]=We,ke=Fe+1;ke<xe;ke++)for($e=ye[ke][Fe]/ye[Fe][Fe],Ie=Fe;Ie<_e;Ie++)ye[ke][Ie]-=ye[Fe][Ie]*$e}for(Fe=xe-1;Fe>=0;Fe--){for($e=ye[Fe][Fe],ke=0;ke<Fe;ke++)for(Ie=_e-1;Ie>Fe-1;Ie--)ye[ke][Ie]-=ye[Fe][Ie]*ye[ke][Fe]/$e;for(ye[Fe][Fe]/=$e,Ie=xe;Ie<_e;Ie++)ye[Fe][Ie]/=$e}return ye},triaUpSolve:function(me,ge){var ye=me[0].length,xe=oe.zeros(1,ye)[0],_e,$e=!1;return ge[0].length!=null&&(ge=ge.map(function(Ie){return Ie[0]}),$e=!0),oe.arange(ye-1,-1,-1).forEach(function(Ie){_e=oe.arange(Ie+1,ye).map(function(Fe){return xe[Fe]*me[Ie][Fe]}),xe[Ie]=(ge[Ie]-oe.sum(_e))/me[Ie][Ie]}),$e?xe.map(function(Ie){return[Ie]}):xe},triaLowSolve:function(me,ge){var ye=me[0].length,xe=oe.zeros(1,ye)[0],_e,$e=!1;return ge[0].length!=null&&(ge=ge.map(function(Ie){return Ie[0]}),$e=!0),oe.arange(ye).forEach(function(Ie){_e=oe.arange(Ie).map(function(Fe){return me[Ie][Fe]*xe[Fe]}),xe[Ie]=(ge[Ie]-oe.sum(_e))/me[Ie][Ie]}),$e?xe.map(function(Ie){return[Ie]}):xe},lu:function(me){var ge=me.length,ye=oe.identity(ge),xe=oe.zeros(me.length,me[0].length),_e;return oe.arange(ge).forEach(function($e){xe[0][$e]=me[0][$e]}),oe.arange(1,ge).forEach(function($e){oe.arange($e).forEach(function(Ie){_e=oe.arange(Ie).map(function(Fe){return ye[$e][Fe]*xe[Fe][Ie]}),ye[$e][Ie]=(me[$e][Ie]-oe.sum(_e))/xe[Ie][Ie]}),oe.arange($e,ge).forEach(function(Ie){_e=oe.arange($e).map(function(Fe){return ye[$e][Fe]*xe[Fe][Ie]}),xe[$e][Ie]=me[_e.length][Ie]-oe.sum(_e)})}),[ye,xe]},cholesky:function(me){var ge=me.length,ye=oe.zeros(me.length,me[0].length),xe;return oe.arange(ge).forEach(function(_e){xe=oe.arange(_e).map(function($e){return ce.pow(ye[_e][$e],2)}),ye[_e][_e]=ce.sqrt(me[_e][_e]-oe.sum(xe)),oe.arange(_e+1,ge).forEach(function($e){xe=oe.arange(_e).map(function(Ie){return ye[_e][Ie]*ye[$e][Ie]}),ye[$e][_e]=(me[_e][$e]-oe.sum(xe))/ye[_e][_e]})}),ye},gauss_jacobi:function(me,ge,ye,xe){for(var _e=0,$e=0,Ie=me.length,Fe=[],ke=[],je=[],We,ze,Xe,Je;_e<Ie;_e++)for(Fe[_e]=[],ke[_e]=[],je[_e]=[],$e=0;$e<Ie;$e++)_e>$e?(Fe[_e][$e]=me[_e][$e],ke[_e][$e]=je[_e][$e]=0):_e<$e?(ke[_e][$e]=me[_e][$e],Fe[_e][$e]=je[_e][$e]=0):(je[_e][$e]=me[_e][$e],Fe[_e][$e]=ke[_e][$e]=0);for(Xe=oe.multiply(oe.multiply(oe.inv(je),oe.add(Fe,ke)),-1),ze=oe.multiply(oe.inv(je),ge),We=ye,Je=oe.add(oe.multiply(Xe,ye),ze),_e=2;ce.abs(oe.norm(oe.subtract(Je,We)))>xe;)We=Je,Je=oe.add(oe.multiply(Xe,We),ze),_e++;return Je},gauss_seidel:function(me,ge,ye,xe){for(var _e=0,$e=me.length,Ie=[],Fe=[],ke=[],je,We,ze,Xe,Je;_e<$e;_e++)for(Ie[_e]=[],Fe[_e]=[],ke[_e]=[],je=0;je<$e;je++)_e>je?(Ie[_e][je]=me[_e][je],Fe[_e][je]=ke[_e][je]=0):_e<je?(Fe[_e][je]=me[_e][je],Ie[_e][je]=ke[_e][je]=0):(ke[_e][je]=me[_e][je],Ie[_e][je]=Fe[_e][je]=0);for(Xe=oe.multiply(oe.multiply(oe.inv(oe.add(ke,Ie)),Fe),-1),ze=oe.multiply(oe.inv(oe.add(ke,Ie)),ge),We=ye,Je=oe.add(oe.multiply(Xe,ye),ze),_e=2;ce.abs(oe.norm(oe.subtract(Je,We)))>xe;)We=Je,Je=oe.add(oe.multiply(Xe,We),ze),_e=_e+1;return Je},SOR:function(me,ge,ye,xe,_e){for(var $e=0,Ie=me.length,Fe=[],ke=[],je=[],We,ze,Xe,Je,nt;$e<Ie;$e++)for(Fe[$e]=[],ke[$e]=[],je[$e]=[],We=0;We<Ie;We++)$e>We?(Fe[$e][We]=me[$e][We],ke[$e][We]=je[$e][We]=0):$e<We?(ke[$e][We]=me[$e][We],Fe[$e][We]=je[$e][We]=0):(je[$e][We]=me[$e][We],Fe[$e][We]=ke[$e][We]=0);for(Je=oe.multiply(oe.inv(oe.add(je,oe.multiply(Fe,_e))),oe.subtract(oe.multiply(je,1-_e),oe.multiply(ke,_e))),Xe=oe.multiply(oe.multiply(oe.inv(oe.add(je,oe.multiply(Fe,_e))),ge),_e),ze=ye,nt=oe.add(oe.multiply(Je,ye),Xe),$e=2;ce.abs(oe.norm(oe.subtract(nt,ze)))>xe;)ze=nt,nt=oe.add(oe.multiply(Je,ze),Xe),$e++;return nt},householder:function(me){for(var ge=me.length,ye=me[0].length,xe=0,_e=[],$e=[],Ie,Fe,ke,je,We;xe<ge-1;xe++){for(Ie=0,je=xe+1;je<ye;je++)Ie+=me[je][xe]*me[je][xe];for(We=me[xe+1][xe]>0?-1:1,Ie=We*ce.sqrt(Ie),Fe=ce.sqrt((Ie*Ie-me[xe+1][xe]*Ie)/2),_e=oe.zeros(ge,1),_e[xe+1][0]=(me[xe+1][xe]-Ie)/(2*Fe),ke=xe+2;ke<ge;ke++)_e[ke][0]=me[ke][xe]/(2*Fe);$e=oe.subtract(oe.identity(ge,ye),oe.multiply(oe.multiply(_e,oe.transpose(_e)),2)),me=oe.multiply($e,oe.multiply(me,$e))}return me},QR:function(){var ve=oe.sum,me=oe.arange;function ge(ye){var xe=ye.length,_e=ye[0].length,$e=oe.zeros(_e,_e);ye=oe.copy(ye);var Ie,Fe,ke;for(Fe=0;Fe<_e;Fe++){for($e[Fe][Fe]=ce.sqrt(ve(me(xe).map(function(je){return ye[je][Fe]*ye[je][Fe]}))),Ie=0;Ie<xe;Ie++)ye[Ie][Fe]=ye[Ie][Fe]/$e[Fe][Fe];for(ke=Fe+1;ke<_e;ke++)for($e[Fe][ke]=ve(me(xe).map(function(je){return ye[je][Fe]*ye[je][ke]})),Ie=0;Ie<xe;Ie++)ye[Ie][ke]=ye[Ie][ke]-ye[Ie][Fe]*$e[Fe][ke]}return[ye,$e]}return ge}(),lstsq:function(){function ve(ge){ge=oe.copy(ge);var ye=ge.length,xe=oe.identity(ye);return oe.arange(ye-1,-1,-1).forEach(function(_e){oe.sliceAssign(xe,{row:_e},oe.divide(oe.slice(xe,{row:_e}),ge[_e][_e])),oe.sliceAssign(ge,{row:_e},oe.divide(oe.slice(ge,{row:_e}),ge[_e][_e])),oe.arange(_e).forEach(function($e){var Ie=oe.multiply(ge[$e][_e],-1),Fe=oe.slice(ge,{row:$e}),ke=oe.multiply(oe.slice(ge,{row:_e}),Ie);oe.sliceAssign(ge,{row:$e},oe.add(Fe,ke));var je=oe.slice(xe,{row:$e}),We=oe.multiply(oe.slice(xe,{row:_e}),Ie);oe.sliceAssign(xe,{row:$e},oe.add(je,We))})}),xe}function me(ge,ye){var xe=!1;ye[0].length===void 0&&(ye=ye.map(function(Je){return[Je]}),xe=!0);var _e=oe.QR(ge),$e=_e[0],Ie=_e[1],Fe=ge[0].length,ke=oe.slice($e,{col:{end:Fe}}),je=oe.slice(Ie,{row:{end:Fe}}),We=ve(je),ze=oe.transpose(ke);ze[0].length===void 0&&(ze=[ze]);var Xe=oe.multiply(oe.multiply(We,ze),ye);return Xe.length===void 0&&(Xe=[[Xe]]),xe?Xe.map(function(Je){return Je[0]}):Xe}return me}(),jacobi:function(me){for(var ge=1,ye=me.length,xe=oe.identity(ye,ye),_e=[],$e,Ie,Fe,ke,je,We,ze,Xe;ge===1;){for(We=me[0][1],ke=0,je=1,Ie=0;Ie<ye;Ie++)for(Fe=0;Fe<ye;Fe++)Ie!=Fe&&We<ce.abs(me[Ie][Fe])&&(We=ce.abs(me[Ie][Fe]),ke=Ie,je=Fe);for(me[ke][ke]===me[je][je]?ze=me[ke][je]>0?ce.PI/4:-ce.PI/4:ze=ce.atan(2*me[ke][je]/(me[ke][ke]-me[je][je]))/2,Xe=oe.identity(ye,ye),Xe[ke][ke]=ce.cos(ze),Xe[ke][je]=-ce.sin(ze),Xe[je][ke]=ce.sin(ze),Xe[je][je]=ce.cos(ze),xe=oe.multiply(xe,Xe),$e=oe.multiply(oe.multiply(oe.inv(Xe),me),Xe),me=$e,ge=0,Ie=1;Ie<ye;Ie++)for(Fe=1;Fe<ye;Fe++)Ie!=Fe&&ce.abs(me[Ie][Fe])>.001&&(ge=1)}for(Ie=0;Ie<ye;Ie++)_e.push(me[Ie][Ie]);return[xe,_e]},rungekutta:function(me,ge,ye,xe,_e,$e){var Ie,Fe,ke,je,We;if($e===2)for(;xe<=ye;)Ie=ge*me(xe,_e),Fe=ge*me(xe+ge,_e+Ie),ke=_e+(Ie+Fe)/2,_e=ke,xe=xe+ge;if($e===4)for(;xe<=ye;)Ie=ge*me(xe,_e),Fe=ge*me(xe+ge/2,_e+Ie/2),je=ge*me(xe+ge/2,_e+Fe/2),We=ge*me(xe+ge,_e+je),ke=_e+(Ie+2*Fe+2*je+We)/6,_e=ke,xe=xe+ge;return _e},romberg:function(me,ge,ye,xe){for(var _e=0,$e=(ye-ge)/2,Ie=[],Fe=[],ke=[],je,We,ze,Xe,Je;_e<xe/2;){for(Je=me(ge),ze=ge,Xe=0;ze<=ye;ze=ze+$e,Xe++)Ie[Xe]=ze;for(je=Ie.length,ze=1;ze<je-1;ze++)Je+=(ze%2!==0?4:2)*me(Ie[ze]);Je=$e/3*(Je+me(ye)),ke[_e]=Je,$e/=2,_e++}for(We=ke.length,je=1;We!==1;){for(ze=0;ze<We-1;ze++)Fe[ze]=(ce.pow(4,je)*ke[ze+1]-ke[ze])/(ce.pow(4,je)-1);We=Fe.length,ke=Fe,Fe=[],je++}return ke},richardson:function(me,ge,ye,xe){function _e(nt,et){for(var tt=0,st=nt.length,qe;tt<st;tt++)nt[tt]===et&&(qe=tt);return qe}for(var $e=ce.abs(ye-me[_e(me,ye)+1]),Ie=0,Fe=[],ke=[],je,We,ze,Xe,Je;xe>=$e;)je=_e(me,ye+xe),We=_e(me,ye),Fe[Ie]=(ge[je]-2*ge[We]+ge[2*We-je])/(xe*xe),xe/=2,Ie++;for(Xe=Fe.length,ze=1;Xe!=1;){for(Je=0;Je<Xe-1;Je++)ke[Je]=(ce.pow(4,ze)*Fe[Je+1]-Fe[Je])/(ce.pow(4,ze)-1);Xe=ke.length,Fe=ke,ke=[],ze++}return Fe},simpson:function(me,ge,ye,xe){for(var _e=(ye-ge)/xe,$e=me(ge),Ie=[],Fe=ge,ke=0,je=1,We;Fe<=ye;Fe=Fe+_e,ke++)Ie[ke]=Fe;for(We=Ie.length;je<We-1;je++)$e+=(je%2!==0?4:2)*me(Ie[je]);return _e/3*($e+me(ye))},hermite:function(me,ge,ye,xe){for(var _e=me.length,$e=0,Ie=0,Fe=[],ke=[],je=[],We=[],ze;Ie<_e;Ie++){for(Fe[Ie]=1,ze=0;ze<_e;ze++)Ie!=ze&&(Fe[Ie]*=(xe-me[ze])/(me[Ie]-me[ze]));for(ke[Ie]=0,ze=0;ze<_e;ze++)Ie!=ze&&(ke[Ie]+=1/(me[Ie]-me[ze]));je[Ie]=(1-2*(xe-me[Ie])*ke[Ie])*(Fe[Ie]*Fe[Ie]),We[Ie]=(xe-me[Ie])*(Fe[Ie]*Fe[Ie]),$e+=je[Ie]*ge[Ie]+We[Ie]*ye[Ie]}return $e},lagrange:function(me,ge,ye){for(var xe=0,_e=0,$e,Ie,Fe=me.length;_e<Fe;_e++){for(Ie=ge[_e],$e=0;$e<Fe;$e++)_e!=$e&&(Ie*=(ye-me[$e])/(me[_e]-me[$e]));xe+=Ie}return xe},cubic_spline:function(me,ge,ye){for(var xe=me.length,_e=0,$e,Ie=[],Fe=[],ke=[],je=[],We=[],ze=[],Xe=[];_e<xe-1;_e++)We[_e]=me[_e+1]-me[_e];for(ke[0]=0,_e=1;_e<xe-1;_e++)ke[_e]=3/We[_e]*(ge[_e+1]-ge[_e])-3/We[_e-1]*(ge[_e]-ge[_e-1]);for(_e=1;_e<xe-1;_e++)Ie[_e]=[],Fe[_e]=[],Ie[_e][_e-1]=We[_e-1],Ie[_e][_e]=2*(We[_e-1]+We[_e]),Ie[_e][_e+1]=We[_e],Fe[_e][0]=ke[_e];for(je=oe.multiply(oe.inv(Ie),Fe),$e=0;$e<xe-1;$e++)ze[$e]=(ge[$e+1]-ge[$e])/We[$e]-We[$e]*(je[$e+1][0]+2*je[$e][0])/3,Xe[$e]=(je[$e+1][0]-je[$e][0])/(3*We[$e]);for($e=0;$e<xe&&!(me[$e]>ye);$e++);return $e-=1,ge[$e]+(ye-me[$e])*ze[$e]+oe.sq(ye-me[$e])*je[$e]+(ye-me[$e])*oe.sq(ye-me[$e])*Xe[$e]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(me){var ge=me.length,ye=me[0].length,xe=0,_e,$e,Ie=[],Fe=[],ke=[],je=[],We=[],ze=[],Xe=[],Je=[],nt=[],et=[];for(xe=0;xe<ge;xe++)Ie[xe]=oe.sum(me[xe])/ye;for(xe=0;xe<ye;xe++)for(Xe[xe]=[],_e=0;_e<ge;_e++)Xe[xe][_e]=me[_e][xe]-Ie[_e];for(Xe=oe.transpose(Xe),xe=0;xe<ge;xe++)for(Je[xe]=[],_e=0;_e<ge;_e++)Je[xe][_e]=oe.dot([Xe[xe]],[Xe[_e]])/(ye-1);for(ke=oe.jacobi(Je),nt=ke[0],Fe=ke[1],et=oe.transpose(nt),xe=0;xe<Fe.length;xe++)for(_e=xe;_e<Fe.length;_e++)Fe[xe]<Fe[_e]&&($e=Fe[xe],Fe[xe]=Fe[_e],Fe[_e]=$e,je=et[xe],et[xe]=et[_e],et[_e]=je);for(ze=oe.transpose(Xe),xe=0;xe<ge;xe++)for(We[xe]=[],_e=0;_e<ze.length;_e++)We[xe][_e]=oe.dot([et[xe]],[ze[_e]]);return[me,Fe,et,We]}}),function(ve){for(var me=0;me<ve.length;me++)(function(ge){oe.fn[ge]=function(ye,xe){var _e=this;return xe?(setTimeout(function(){xe.call(_e,oe.fn[ge].call(_e,ye))},15),this):typeof oe[ge](this,ye)=="number"?oe[ge](this,ye):oe(oe[ge](this,ye))}})(ve[me])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(ne,Math),function(oe,ce){var ue=[].slice,Ae=oe.utils.isNumber,pe=oe.utils.isArray;oe.extend({zscore:function(){var ge=ue.call(arguments);return Ae(ge[1])?(ge[0]-ge[1])/ge[2]:(ge[0]-oe.mean(ge[1]))/oe.stdev(ge[1],ge[2])},ztest:function(){var ge=ue.call(arguments),ye;return pe(ge[1])?(ye=oe.zscore(ge[0],ge[1],ge[3]),ge[2]===1?oe.normal.cdf(-ce.abs(ye),0,1):oe.normal.cdf(-ce.abs(ye),0,1)*2):ge.length>2?(ye=oe.zscore(ge[0],ge[1],ge[2]),ge[3]===1?oe.normal.cdf(-ce.abs(ye),0,1):oe.normal.cdf(-ce.abs(ye),0,1)*2):(ye=ge[0],ge[1]===1?oe.normal.cdf(-ce.abs(ye),0,1):oe.normal.cdf(-ce.abs(ye),0,1)*2)}}),oe.extend(oe.fn,{zscore:function(ge,ye){return(ge-this.mean())/this.stdev(ye)},ztest:function(ge,ye,xe){var _e=ce.abs(this.zscore(ge,xe));return ye===1?oe.normal.cdf(-_e,0,1):oe.normal.cdf(-_e,0,1)*2}}),oe.extend({tscore:function(){var ge=ue.call(arguments);return ge.length===4?(ge[0]-ge[1])/(ge[2]/ce.sqrt(ge[3])):(ge[0]-oe.mean(ge[1]))/(oe.stdev(ge[1],!0)/ce.sqrt(ge[1].length))},ttest:function(){var ge=ue.call(arguments),ye;return ge.length===5?(ye=ce.abs(oe.tscore(ge[0],ge[1],ge[2],ge[3])),ge[4]===1?oe.studentt.cdf(-ye,ge[3]-1):oe.studentt.cdf(-ye,ge[3]-1)*2):Ae(ge[1])?(ye=ce.abs(ge[0]),ge[2]==1?oe.studentt.cdf(-ye,ge[1]-1):oe.studentt.cdf(-ye,ge[1]-1)*2):(ye=ce.abs(oe.tscore(ge[0],ge[1])),ge[2]==1?oe.studentt.cdf(-ye,ge[1].length-1):oe.studentt.cdf(-ye,ge[1].length-1)*2)}}),oe.extend(oe.fn,{tscore:function(ge){return(ge-this.mean())/(this.stdev(!0)/ce.sqrt(this.cols()))},ttest:function(ge,ye){return ye===1?1-oe.studentt.cdf(ce.abs(this.tscore(ge)),this.cols()-1):oe.studentt.cdf(-ce.abs(this.tscore(ge)),this.cols()-1)*2}}),oe.extend({anovafscore:function(){var ge=ue.call(arguments),ye,xe,_e,$e,Ie,Fe,ke,je;if(ge.length===1){for(Ie=new Array(ge[0].length),ke=0;ke<ge[0].length;ke++)Ie[ke]=ge[0][ke];ge=Ie}for(xe=new Array,ke=0;ke<ge.length;ke++)xe=xe.concat(ge[ke]);for(_e=oe.mean(xe),ye=0,ke=0;ke<ge.length;ke++)ye=ye+ge[ke].length*ce.pow(oe.mean(ge[ke])-_e,2);for(ye/=ge.length-1,Fe=0,ke=0;ke<ge.length;ke++)for($e=oe.mean(ge[ke]),je=0;je<ge[ke].length;je++)Fe+=ce.pow(ge[ke][je]-$e,2);return Fe/=xe.length-ge.length,ye/Fe},anovaftest:function(){var ge=ue.call(arguments),ye,xe,_e,$e;if(Ae(ge[0]))return 1-oe.centralF.cdf(ge[0],ge[1],ge[2]);var Ie=oe.anovafscore(ge);for(ye=ge.length-1,_e=0,$e=0;$e<ge.length;$e++)_e=_e+ge[$e].length;return xe=_e-ye-1,1-oe.centralF.cdf(Ie,ye,xe)},ftest:function(ge,ye,xe){return 1-oe.centralF.cdf(ge,ye,xe)}}),oe.extend(oe.fn,{anovafscore:function(){return oe.anovafscore(this.toArray())},anovaftes:function(){var ge=0,ye;for(ye=0;ye<this.length;ye++)ge=ge+this[ye].length;return oe.ftest(this.anovafscore(),this.length-1,ge-this.length)}}),oe.extend({qscore:function(){var ge=ue.call(arguments),ye,xe,_e,$e,Ie;return Ae(ge[0])?(ye=ge[0],xe=ge[1],_e=ge[2],$e=ge[3],Ie=ge[4]):(ye=oe.mean(ge[0]),xe=oe.mean(ge[1]),_e=ge[0].length,$e=ge[1].length,Ie=ge[2]),ce.abs(ye-xe)/(Ie*ce.sqrt((1/_e+1/$e)/2))},qtest:function(){var ge=ue.call(arguments),ye;ge.length===3?(ye=ge[0],ge=ge.slice(1)):ge.length===7?(ye=oe.qscore(ge[0],ge[1],ge[2],ge[3],ge[4]),ge=ge.slice(5)):(ye=oe.qscore(ge[0],ge[1],ge[2]),ge=ge.slice(3));var xe=ge[0],_e=ge[1];return 1-oe.tukey.cdf(ye,_e,xe-_e)},tukeyhsd:function(ge){for(var ye=oe.pooledstdev(ge),xe=ge.map(function(je){return oe.mean(je)}),_e=ge.reduce(function(je,We){return je+We.length},0),$e=[],Ie=0;Ie<ge.length;++Ie)for(var Fe=Ie+1;Fe<ge.length;++Fe){var ke=oe.qtest(xe[Ie],xe[Fe],ge[Ie].length,ge[Fe].length,ye,_e,ge.length);$e.push([[Ie,Fe],ke])}return $e}}),oe.extend({normalci:function(){var ge=ue.call(arguments),ye=new Array(2),xe;return ge.length===4?xe=ce.abs(oe.normal.inv(ge[1]/2,0,1)*ge[2]/ce.sqrt(ge[3])):xe=ce.abs(oe.normal.inv(ge[1]/2,0,1)*oe.stdev(ge[2])/ce.sqrt(ge[2].length)),ye[0]=ge[0]-xe,ye[1]=ge[0]+xe,ye},tci:function(){var ge=ue.call(arguments),ye=new Array(2),xe;return ge.length===4?xe=ce.abs(oe.studentt.inv(ge[1]/2,ge[3]-1)*ge[2]/ce.sqrt(ge[3])):xe=ce.abs(oe.studentt.inv(ge[1]/2,ge[2].length-1)*oe.stdev(ge[2],!0)/ce.sqrt(ge[2].length)),ye[0]=ge[0]-xe,ye[1]=ge[0]+xe,ye},significant:function(ge,ye){return ge<ye}}),oe.extend(oe.fn,{normalci:function(ge,ye){return oe.normalci(ge,ye,this.toArray())},tci:function(ge,ye){return oe.tci(ge,ye,this.toArray())}});function ve(me,ge,ye,xe){if(me>1||ye>1||me<=0||ye<=0)throw new Error("Proportions should be greater than 0 and less than 1");var _e=(me*ge+ye*xe)/(ge+xe),$e=ce.sqrt(_e*(1-_e)*(1/ge+1/xe));return(me-ye)/$e}oe.extend(oe.fn,{oneSidedDifferenceOfProportions:function(ge,ye,xe,_e){var $e=ve(ge,ye,xe,_e);return oe.ztest($e,1)},twoSidedDifferenceOfProportions:function(ge,ye,xe,_e){var $e=ve(ge,ye,xe,_e);return oe.ztest($e,2)}})}(ne,Math),ne.models=function(){function oe(ve){var me=ve[0].length,ge=ne.arange(me).map(function(ye){var xe=ne.arange(me).filter(function(_e){return _e!==ye});return ce(ne.col(ve,ye).map(function(_e){return _e[0]}),ne.col(ve,xe))});return ge}function ce(ve,me){var ge=ve.length,ye=me[0].length-1,xe=ge-ye-1,_e=ne.lstsq(me,ve),$e=ne.multiply(me,_e.map(function(Xe){return[Xe]})).map(function(Xe){return Xe[0]}),Ie=ne.subtract(ve,$e),Fe=ne.mean(ve),ke=ne.sum($e.map(function(Xe){return Math.pow(Xe-Fe,2)})),je=ne.sum(ve.map(function(Xe,Je){return Math.pow(Xe-$e[Je],2)})),We=ke+je,ze=ke/We;return{exog:me,endog:ve,nobs:ge,df_model:ye,df_resid:xe,coef:_e,predict:$e,resid:Ie,ybar:Fe,SST:We,SSE:ke,SSR:je,R2:ze}}function ue(ve){var me=oe(ve.exog),ge=Math.sqrt(ve.SSR/ve.df_resid),ye=me.map(function(Fe){var ke=Fe.SST,je=Fe.R2;return ge/Math.sqrt(ke*(1-je))}),xe=ve.coef.map(function(Fe,ke){return(Fe-0)/ye[ke]}),_e=xe.map(function(Fe){var ke=ne.studentt.cdf(Fe,ve.df_resid);return(ke>.5?1-ke:ke)*2}),$e=ne.studentt.inv(.975,ve.df_resid),Ie=ve.coef.map(function(Fe,ke){var je=$e*ye[ke];return[Fe-je,Fe+je]});return{se:ye,t:xe,p:_e,sigmaHat:ge,interval95:Ie}}function Ae(ve){var me=ve.R2/ve.df_model/((1-ve.R2)/ve.df_resid),ge=function(xe,_e,$e){return ne.beta.cdf(xe/($e/_e+xe),_e/2,$e/2)},ye=1-ge(me,ve.df_model,ve.df_resid);return{F_statistic:me,pvalue:ye}}function pe(ve,me){var ge=ce(ve,me),ye=ue(ge),xe=Ae(ge),_e=1-(1-ge.R2)*((ge.nobs-1)/ge.df_resid);return ge.t=ye,ge.f=xe,ge.adjust_R2=_e,ge}return{ols:pe}}(),ne.extend({buildxmatrix:function(){for(var ce=new Array(arguments.length),ue=0;ue<arguments.length;ue++){var Ae=[1];ce[ue]=Ae.concat(arguments[ue])}return ne(ce)},builddxmatrix:function(){for(var ce=new Array(arguments[0].length),ue=0;ue<arguments[0].length;ue++){var Ae=[1];ce[ue]=Ae.concat(arguments[0][ue])}return ne(ce)},buildjxmatrix:function(ce){for(var ue=new Array(ce.length),Ae=0;Ae<ce.length;Ae++)ue[Ae]=ce[Ae];return ne.builddxmatrix(ue)},buildymatrix:function(ce){return ne(ce).transpose()},buildjymatrix:function(ce){return ce.transpose()},matrixmult:function(ce,ue){var Ae,pe,ve,me,ge;if(ce.cols()==ue.rows()){if(ue.rows()>1){for(me=[],Ae=0;Ae<ce.rows();Ae++)for(me[Ae]=[],pe=0;pe<ue.cols();pe++){for(ge=0,ve=0;ve<ce.cols();ve++)ge+=ce.toArray()[Ae][ve]*ue.toArray()[ve][pe];me[Ae][pe]=ge}return ne(me)}for(me=[],Ae=0;Ae<ce.rows();Ae++)for(me[Ae]=[],pe=0;pe<ue.cols();pe++){for(ge=0,ve=0;ve<ce.cols();ve++)ge+=ce.toArray()[Ae][ve]*ue.toArray()[pe];me[Ae][pe]=ge}return ne(me)}},regress:function(ce,ue){var Ae=ne.xtranspxinv(ce),pe=ce.transpose(),ve=ne.matrixmult(ne(Ae),pe);return ne.matrixmult(ve,ue)},regresst:function(ce,ue,Ae){var pe=ne.regress(ce,ue),ve={};ve.anova={};var me=ne.jMatYBar(ce,pe);ve.yBar=me;var ge=ue.mean();ve.anova.residuals=ne.residuals(ue,me),ve.anova.ssr=ne.ssr(me,ge),ve.anova.msr=ve.anova.ssr/(ce[0].length-1),ve.anova.sse=ne.sse(ue,me),ve.anova.mse=ve.anova.sse/(ue.length-(ce[0].length-1)-1),ve.anova.sst=ne.sst(ue,ge),ve.anova.mst=ve.anova.sst/(ue.length-1),ve.anova.r2=1-ve.anova.sse/ve.anova.sst,ve.anova.r2<0&&(ve.anova.r2=0),ve.anova.fratio=ve.anova.msr/ve.anova.mse,ve.anova.pvalue=ne.anovaftest(ve.anova.fratio,ce[0].length-1,ue.length-(ce[0].length-1)-1),ve.anova.rmse=Math.sqrt(ve.anova.mse),ve.anova.r2adj=1-ve.anova.mse/ve.anova.mst,ve.anova.r2adj<0&&(ve.anova.r2adj=0),ve.stats=new Array(ce[0].length);for(var ye=ne.xtranspxinv(ce),xe,_e,$e,Ie=0;Ie<pe.length;Ie++)xe=Math.sqrt(ve.anova.mse*Math.abs(ye[Ie][Ie])),_e=Math.abs(pe[Ie]/xe),$e=ne.ttest(_e,ue.length-ce[0].length-1,Ae),ve.stats[Ie]=[pe[Ie],xe,_e,$e];return ve.regress=pe,ve},xtranspx:function(ce){return ne.matrixmult(ce.transpose(),ce)},xtranspxinv:function(ce){var ue=ne.matrixmult(ce.transpose(),ce),Ae=ne.inv(ue);return Ae},jMatYBar:function(ce,ue){var Ae=ne.matrixmult(ce,ue);return new ne(Ae)},residuals:function(ce,ue){return ne.matrixsubtract(ce,ue)},ssr:function(ce,ue){for(var Ae=0,pe=0;pe<ce.length;pe++)Ae+=Math.pow(ce[pe]-ue,2);return Ae},sse:function(ce,ue){for(var Ae=0,pe=0;pe<ce.length;pe++)Ae+=Math.pow(ce[pe]-ue[pe],2);return Ae},sst:function(ce,ue){for(var Ae=0,pe=0;pe<ce.length;pe++)Ae+=Math.pow(ce[pe]-ue,2);return Ae},matrixsubtract:function(ce,ue){for(var Ae=new Array(ce.length),pe=0;pe<ce.length;pe++){Ae[pe]=new Array(ce[pe].length);for(var ve=0;ve<ce[pe].length;ve++)Ae[pe][ve]=ce[pe][ve]-ue[pe][ve]}return ne(Ae)}}),ne.jStat=ne,ne})})(jstat);var jstatExports=jstat.exports;const FormulaError$c=requireError(),TextFunctions$1=text$5,{FormulaHelpers:FormulaHelpers$9,Types:Types$7}=requireHelpers(),H$7=FormulaHelpers$9,bessel=bessel$1,jStat$1=jstatExports,MAX_OCT=536870911,MIN_OCT=-536870912,MAX_BIN=511,MIN_BIN=-512,numberRegex=/^\s?[+-]?\s?[0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?\s?$/,IMWithoutRealRegex=/^\s?([+-]?\s?([0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?)?)\s?[ij]\s?$/,IMRegex=/^\s?([+-]?\s?[0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?)\s?([+-]?\s?([0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?)?)\s?[ij]\s?$/;function parseIM(K){K=H$7.accept(K);let J=0,ne=0,oe="i";if(typeof K=="number")return{real:K,im:ne,unit:oe};if(typeof K=="boolean")throw FormulaError$c.VALUE;let ce=K.match(numberRegex);if(ce)return J=Number(ce[0]),{real:J,im:ne,unit:oe};if(ce=K.match(IMWithoutRealRegex),ce)return ne=Number(/^\s?[+-]?\s?$/.test(ce[1])?ce[1]+"1":ce[1]),oe=ce[0].slice(-1),{real:J,im:ne,unit:oe};if(ce=K.match(IMRegex),ce)return J=Number(ce[1]),ne=Number(/^\s?[+-]?\s?$/.test(ce[3])?ce[3]+"1":ce[3]),oe=ce[0].slice(-1),{real:J,im:ne,unit:oe};throw FormulaError$c.NUM}const EngineeringFunctions={BESSELI:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),J=Math.trunc(J),J<0)throw FormulaError$c.NUM;return bessel.besseli(K,J)},BESSELJ:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),J=Math.trunc(J),J<0)throw FormulaError$c.NUM;return bessel.besselj(K,J)},BESSELK:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),J=Math.trunc(J),J<0)throw FormulaError$c.NUM;return bessel.besselk(K,J)},BESSELY:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),J=Math.trunc(J),J<0)throw FormulaError$c.NUM;return bessel.bessely(K,J)},BIN2DEC:K=>{K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN);let J=K.toString();if(J.length>10)throw FormulaError$c.NUM;return J.length===10&&J.substring(0,1)==="1"?parseInt(J.substring(1),2)+MIN_BIN:parseInt(J,2)},BIN2HEX:(K,J)=>{K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,null);const ne=K.toString();if(ne.length>10)throw FormulaError$c.NUM;if(ne.length===10&&ne.substring(0,1)==="1")return(parseInt(ne.substring(1),2)+0xfffffffe00).toString(16).toUpperCase();const oe=parseInt(K,2).toString(16);if(J==null)return oe.toUpperCase();if(J<0)throw FormulaError$c.NUM;if(J=Math.trunc(J),J>=oe.length)return(TextFunctions$1.REPT("0",J-oe.length)+oe).toUpperCase();throw FormulaError$c.NUM},BIN2OCT:(K,J)=>{K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER,null);let ne=K.toString();if(ne.length>10)throw FormulaError$c.NUM;if(ne.length===10&&ne.substr(0,1)==="1")return(parseInt(ne.substr(1),2)+1073741312).toString(8);let oe=parseInt(K,2).toString(8);if(J==null)return oe.toUpperCase();if(J<0)throw FormulaError$c.NUM;if(J=Math.trunc(J),J>=oe.length)return TextFunctions$1.REPT("0",J-oe.length)+oe;throw FormulaError$c.NUM},BITAND:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),K<0||J<0||Math.floor(K)!==K||Math.floor(J)!==J||K>0xffffffffffff||J>0xffffffffffff)throw FormulaError$c.NUM;return K&J},BITLSHIFT:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),J=Math.trunc(J),Math.abs(J)>53||K<0||Math.floor(K)!==K||K>0xffffffffffff)throw FormulaError$c.NUM;const ne=J>=0?K*2**J:Math.trunc(K/2**-J);if(ne>0xffffffffffff)throw FormulaError$c.NUM;return ne},BITOR:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),K<0||J<0||Math.floor(K)!==K||Math.floor(J)!==J||K>0xffffffffffff||J>0xffffffffffff)throw FormulaError$c.NUM;return K|J},BITRSHIFT:(K,J)=>(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),EngineeringFunctions.BITLSHIFT(K,-J)),BITXOR:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),K<0||K>0xffffffffffff||Math.floor(K)!==K||J<0||J>0xffffffffffff||Math.floor(J)!==J)throw FormulaError$c.NUM;return K^J},COMPLEX:(K,J,ne)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),ne=H$7.accept(ne,Types$7.STRING,"i"),ne!=="i"&&ne!=="j")throw FormulaError$c.VALUE;if(K===0&&J===0)return 0;if(K===0)return J===1?ne:J===-1?"-"+ne:J.toString()+ne;if(J===0)return K.toString();{let oe=J>0?"+":"";return J===1?K.toString()+oe+ne:J===-1?K.toString()+oe+"-"+ne:K.toString()+oe+J.toString()+ne}},DEC2BIN:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER,null),K<MIN_BIN||K>MAX_BIN)throw FormulaError$c.NUM;if(K<0)return"1"+TextFunctions$1.REPT("0",9-(512+K).toString(2).length)+(512+K).toString(2);let ne=parseInt(K,10).toString(2);if(J==null)return ne;if(J=Math.trunc(J),J<=0||J<ne.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ne.length)+ne},DEC2HEX:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER,null),K<-549755813888||K>549755813888)throw FormulaError$c.NUM;if(K<0)return(1099511627776+K).toString(16).toUpperCase();let ne=parseInt(K,10).toString(16);if(J==null)return ne.toUpperCase();if(J=Math.trunc(J),J<=0||J<ne.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ne.length)+ne.toUpperCase()},DEC2OCT:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER,null),K<-536870912||K>536870912)throw FormulaError$c.NUM;if(K<0)return(K+1073741824).toString(8);let ne=parseInt(K,10).toString(8);if(J==null)return ne.toUpperCase();if(J=Math.trunc(J),J<=0||J<ne.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ne.length)+ne},DELTA:(K,J)=>(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,0),K===J?1:0),ERF:(K,J)=>(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,0),jStat$1.erf(K)),ERFC:K=>(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),jStat$1.erfc(K)),GESTEP:(K,J)=>(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,0),K>=J?1:0),HEX2BIN:(K,J)=>{if(K=H$7.accept(K,Types$7.STRING),J=H$7.accept(J,Types$7.NUMBER,null),K.length>10||!/^[0-9a-fA-F]*$/.test(K))throw FormulaError$c.NUM;let ne=K.length===10&&K.substr(0,1).toLowerCase()==="f",oe=ne?parseInt(K,16)-1099511627776:parseInt(K,16);if(oe<MIN_BIN||oe>MAX_BIN)throw FormulaError$c.NUM;if(ne)return"1"+TextFunctions$1.REPT("0",9-(oe+512).toString(2).length)+(oe+512).toString(2);let ce=oe.toString(2);if(J==null)return ce;if(J=Math.trunc(J),J<=0||J<ce.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ce.length)+ce},HEX2DEC:K=>{if(K=H$7.accept(K,Types$7.STRING),K.length>10||!/^[0-9a-fA-F]*$/.test(K))throw FormulaError$c.NUM;let J=parseInt(K,16);return J>=549755813888?J-1099511627776:J},HEX2OCT:(K,J)=>{if(K=H$7.accept(K,Types$7.STRING),K.length>10||!/^[0-9a-fA-F]*$/.test(K))throw FormulaError$c.NUM;let ne=EngineeringFunctions.HEX2DEC(K);if(ne>MAX_OCT||ne<MIN_OCT)throw FormulaError$c.NUM;return EngineeringFunctions.DEC2OCT(ne,J)},IMABS:K=>{const{real:J,im:ne}=parseIM(K);return Math.sqrt(Math.pow(J,2)+Math.pow(ne,2))},IMAGINARY:K=>parseIM(K).im,IMARGUMENT:K=>{const{real:J,im:ne}=parseIM(K);if(J===0&&ne===0)throw FormulaError$c.DIV0;return J===0&&ne>0?Math.PI/2:J===0&&ne<0?-Math.PI/2:J<0&&ne===0?Math.PI:J>0&&ne===0?0:J>0?Math.atan(ne/J):J<0&&ne>0?Math.atan(ne/J)+Math.PI:Math.atan(ne/J)-Math.PI},IMCONJUGATE:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);return ne!==0?EngineeringFunctions.COMPLEX(J,-ne,oe):""+J},IMCOS:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.cos(J)*(Math.exp(ne)+Math.exp(-ne))/2,ue=-Math.sin(J)*(Math.exp(ne)-Math.exp(-ne))/2;return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMCOSH:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.cos(ne)*(Math.exp(J)+Math.exp(-J))/2,ue=-Math.sin(ne)*(Math.exp(J)-Math.exp(-J))/2;return EngineeringFunctions.COMPLEX(ce,-ue,oe)},IMCOT:K=>{K=H$7.accept(K);let J=EngineeringFunctions.IMCOS(K),ne=EngineeringFunctions.IMSIN(K);return EngineeringFunctions.IMDIV(J,ne)},IMCSC:K=>(K=H$7.accept(K),EngineeringFunctions.IMDIV("1",EngineeringFunctions.IMSIN(K))),IMCSCH:K=>(K=H$7.accept(K),EngineeringFunctions.IMDIV("1",EngineeringFunctions.IMSINH(K))),IMDIV:(K,J)=>{const ne=parseIM(K),oe=ne.real,ce=ne.im,ue=ne.unit,Ae=parseIM(J),pe=Ae.real,ve=Ae.im,me=Ae.unit;if(pe===0&&ve===0||ue!==me)throw FormulaError$c.NUM;let ge=ue,ye=Math.pow(pe,2)+Math.pow(ve,2);return EngineeringFunctions.COMPLEX((oe*pe+ce*ve)/ye,(ce*pe-oe*ve)/ye,ge)},IMEXP:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.exp(J);return EngineeringFunctions.COMPLEX(ce*Math.cos(ne),ce*Math.sin(ne),oe)},IMLN:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);return EngineeringFunctions.COMPLEX(Math.log(Math.sqrt(Math.pow(J,2)+Math.pow(ne,2))),Math.atan(ne/J),oe)},IMLOG10:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.log(Math.sqrt(Math.pow(J,2)+Math.pow(ne,2)))/Math.log(10),ue=Math.atan(ne/J)/Math.log(10);return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMLOG2:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.log(Math.sqrt(Math.pow(J,2)+Math.pow(ne,2)))/Math.log(2),ue=Math.atan(ne/J)/Math.log(2);return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMPOWER:(K,J)=>{let{unit:ne}=parseIM(K);J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN);let oe=Math.pow(EngineeringFunctions.IMABS(K),J),ce=EngineeringFunctions.IMARGUMENT(K),ue=oe*Math.cos(J*ce),Ae=oe*Math.sin(J*ce);return EngineeringFunctions.COMPLEX(ue,Ae,ne)},IMPRODUCT:(...K)=>{let J,ne=0;return H$7.flattenParams(K,null,!1,oe=>{if(ne===0)J=H$7.accept(oe),parseIM(J);else{const ce=parseIM(J),ue=ce.real,Ae=ce.im,pe=ce.unit,ve=parseIM(oe),me=ve.real,ge=ve.im,ye=ve.unit;if(pe!==ye)throw FormulaError$c.VALUE;J=EngineeringFunctions.COMPLEX(ue*me-Ae*ge,ue*ge+Ae*me)}ne++},1),J},IMREAL:K=>parseIM(K).real,IMSEC:K=>EngineeringFunctions.IMDIV("1",EngineeringFunctions.IMCOS(K)),IMSECH:K=>EngineeringFunctions.IMDIV("1",EngineeringFunctions.IMCOSH(K)),IMSIN:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.sin(J)*(Math.exp(ne)+Math.exp(-ne))/2,ue=Math.cos(J)*(Math.exp(ne)-Math.exp(-ne))/2;return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMSINH:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.cos(ne)*(Math.exp(J)-Math.exp(-J))/2,ue=Math.sin(ne)*(Math.exp(J)+Math.exp(-J))/2;return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMSQRT:K=>{const{unit:J}=parseIM(K);let ne=Math.sqrt(EngineeringFunctions.IMABS(K)),oe=EngineeringFunctions.IMARGUMENT(K);return EngineeringFunctions.COMPLEX(ne*Math.cos(oe/2),ne*Math.sin(oe/2),J)},IMSUB:(K,J)=>{const ne=parseIM(K),oe=ne.real,ce=ne.im,ue=ne.unit,Ae=parseIM(J),pe=Ae.real,ve=Ae.im,me=Ae.unit;if(ue!==me)throw FormulaError$c.VALUE;return EngineeringFunctions.COMPLEX(oe-pe,ce-ve,ue)},IMSUM:(...K)=>{let J=0,ne=0,oe;return H$7.flattenParams(K,null,!1,ce=>{const{real:ue,im:Ae,unit:pe}=parseIM(ce);if(oe||(oe=pe),oe!==pe)throw FormulaError$c.VALUE;J+=ue,ne+=Ae}),EngineeringFunctions.COMPLEX(J,ne,oe)},IMTAN:K=>{const{unit:J}=parseIM(K);return EngineeringFunctions.IMDIV(EngineeringFunctions.IMSIN(K),EngineeringFunctions.IMCOS(K),J)},OCT2BIN:(K,J)=>{if(K=H$7.accept(K,Types$7.STRING),J=H$7.accept(J,Types$7.NUMBER,null),K.length>10||J>10||J!==null&&J<0)throw FormulaError$c.NUM;J=Math.trunc(J);let ne=K.length===10&&K.substring(0,1)==="7",oe=EngineeringFunctions.OCT2DEC(K);if(oe<MIN_BIN||oe>MAX_BIN)return FormulaError$c.NUM;if(ne)return"1"+TextFunctions$1.REPT("0",9-(512+oe).toString(2).length)+(512+oe).toString(2);let ce=oe.toString(2);if(J===0)return ce;if(J<ce.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ce.length)+ce},OCT2DEC:K=>{if(K=H$7.accept(K,Types$7.STRING),K.length>10)throw FormulaError$c.NUM;for(const ne of K)if(ne<"0"||ne>"7")throw FormulaError$c.NUM;let J=parseInt(K,8);return J>=536870912?J-1073741824:J},OCT2HEX:(K,J)=>{if(K=H$7.accept(K,Types$7.STRING),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,null),K.length>10)throw FormulaError$c.NUM;for(const ce of K)if(ce<"0"||ce>"7")throw FormulaError$c.NUM;if(J=Math.trunc(J),J<0||J>10)throw FormulaError$c.NUM;let ne=EngineeringFunctions.OCT2DEC(K),oe=EngineeringFunctions.DEC2HEX(ne);if(J===0)return oe;if(J<oe.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-oe.length)+oe}};var engineering=EngineeringFunctions;const FormulaError$b=requireError(),{FormulaHelpers:FormulaHelpers$8,Types:Types$6,WildCard,Address:Address$3}=requireHelpers(),Collection$2=collection,H$6=FormulaHelpers$8,ReferenceFunctions$1={ADDRESS:(K,J,ne,oe,ce)=>{if(K=H$6.accept(K,Types$6.NUMBER),J=H$6.accept(J,Types$6.NUMBER),ne=H$6.accept(ne,Types$6.NUMBER,1),oe=H$6.accept(oe,Types$6.BOOLEAN,!0),ce=H$6.accept(ce,Types$6.STRING,""),K<1||J<1||ne<1||ne>4)throw FormulaError$b.VALUE;let ue="";return ce.length>0&&(/[^A-Za-z_.\d\u007F-\uFFFF]/.test(ce)?ue+=`'${ce}'!`:ue+=ce+"!"),oe?(ue+=ne===1||ne===3?"$":"",ue+=Address$3.columnNumberToName(J),ue+=ne===1||ne===2?"$":"",ue+=K):(ue+="R",ue+=ne===4||ne===3?`[${K}]`:K,ue+="C",ue+=ne===4||ne===2?`[${J}]`:J),ue},AREAS:K=>(K=H$6.accept(K),K instanceof Collection$2?K.length:1),CHOOSE:(K,...J)=>{},COLUMN:(K,J)=>{if(J==null){if(K.position.col!=null)return K.position.col;throw Error("FormulaParser.parse is called without position parameter.")}else{if(typeof J!="object"||Array.isArray(J))throw FormulaError$b.VALUE;if(H$6.isCellRef(J))return J.ref.col;if(H$6.isRangeRef(J))return J.ref.from.col;throw Error("ReferenceFunctions.COLUMN should not reach here.")}},COLUMNS:(K,J)=>{if(J==null)throw Error("COLUMNS requires one argument");if(typeof J!="object"||Array.isArray(J))throw FormulaError$b.VALUE;if(H$6.isCellRef(J))return 1;if(H$6.isRangeRef(J))return Math.abs(J.ref.from.col-J.ref.to.col)+1;throw Error("ReferenceFunctions.COLUMNS should not reach here.")},HLOOKUP:(K,J,ne,oe)=>{K=H$6.accept(K);try{J=H$6.accept(J,Types$6.ARRAY,void 0,!1)}catch(ue){throw ue instanceof FormulaError$b?FormulaError$b.NA:ue}if(ne=H$6.accept(ne,Types$6.NUMBER),oe=H$6.accept(oe,Types$6.BOOLEAN,!0),ne<1)throw FormulaError$b.VALUE;if(J[ne-1]===void 0)throw FormulaError$b.REF;const ce=typeof K;if(oe){let ue=ce===typeof J[0][0]?J[0][0]:null;for(let Ae=1;Ae<J[0].length;Ae++){const pe=J[0][Ae];if(typeof pe===ce){if(ue>K&&pe>K)throw FormulaError$b.NA;if(pe===K)return J[ne-1][Ae];if(ue!=null&&pe>K&&ue<=K)return J[ne-1][Ae-1];ue=pe}}if(ue==null)throw FormulaError$b.NA;return ue}else{let ue=-1;if(WildCard.isWildCard(K)?ue=J[0].findIndex(Ae=>WildCard.toRegex(K,"i").test(Ae)):ue=J[0].findIndex(Ae=>Ae===K),ue===-1)throw FormulaError$b.NA;return J[ne-1][ue]}},INDEX:(K,J,ne,oe,ce)=>{ne=K.utils.extractRefValue(ne),ne={value:ne.val,isArray:ne.isArray},ne=H$6.accept(ne,Types$6.NUMBER),ne=Math.trunc(ne),oe==null?oe=1:(oe=K.utils.extractRefValue(oe),oe={value:oe.val,isArray:oe.isArray},oe=H$6.accept(oe,Types$6.NUMBER,1),oe=Math.trunc(oe)),ce==null?ce=1:(ce=K.utils.extractRefValue(ce),ce={value:ce.val,isArray:ce.isArray},ce=H$6.accept(ce,Types$6.NUMBER,1),ce=Math.trunc(ce));let ue=J;if(J instanceof Collection$2)ue=J.refs[ce-1];else if(ce>1)throw FormulaError$b.REF;if(ne===0&&oe===0)return ue;if(ne===0){if(H$6.isRangeRef(ue)){if(ue.ref.to.col-ue.ref.from.col<oe-1)throw FormulaError$b.REF;return ue.ref.from.col+=oe-1,ue.ref.to.col=ue.ref.from.col,ue}else if(Array.isArray(ue)){const Ae=[];return ue.forEach(pe=>Ae.push([pe[oe-1]])),Ae}}if(oe===0){if(H$6.isRangeRef(ue)){if(ue.ref.to.row-ue.ref.from.row<ne-1)throw FormulaError$b.REF;return ue.ref.from.row+=ne-1,ue.ref.to.row=ue.ref.from.row,ue}else if(Array.isArray(ue))return ue[oe-1]}if(ne!==0&&oe!==0){if(H$6.isRangeRef(ue)){if(ue=ue.ref,ue.to.row-ue.from.row<ne-1||ue.to.col-ue.from.col<oe-1)throw FormulaError$b.REF;return{ref:{row:ue.from.row+ne-1,col:ue.from.col+oe-1}}}else if(H$6.isCellRef(ue)){if(ue=ue.ref,ne>1||oe>1)throw FormulaError$b.REF;return{ref:{row:ue.row+ne-1,col:ue.col+oe-1}}}else if(Array.isArray(ue)){if(ue.length<ne||ue[0].length<oe)throw FormulaError$b.REF;return ue[ne-1][oe-1]}}},MATCH:()=>{},ROW:(K,J)=>{if(J==null){if(K.position.row!=null)return K.position.row;throw Error("FormulaParser.parse is called without position parameter.")}else{if(typeof J!="object"||Array.isArray(J))throw FormulaError$b.VALUE;if(H$6.isCellRef(J))return J.ref.row;if(H$6.isRangeRef(J))return J.ref.from.row;throw Error("ReferenceFunctions.ROW should not reach here.")}},ROWS:(K,J)=>{if(J==null)throw Error("ROWS requires one argument");if(typeof J!="object"||Array.isArray(J))throw FormulaError$b.VALUE;if(H$6.isCellRef(J))return 1;if(H$6.isRangeRef(J))return Math.abs(J.ref.from.row-J.ref.to.row)+1;throw Error("ReferenceFunctions.ROWS should not reach here.")},TRANSPOSE:K=>{K=H$6.accept(K,Types$6.ARRAY,void 0,!1);const J=[];for(let ne=0;ne<K[0].length;ne++){J[ne]=[];for(let oe=0;oe<K.length;oe++)J[ne][oe]=K[oe][ne]}return J},VLOOKUP:(K,J,ne,oe)=>{K=H$6.accept(K);try{J=H$6.accept(J,Types$6.ARRAY,void 0,!1)}catch(ue){throw ue instanceof FormulaError$b?FormulaError$b.NA:ue}if(ne=H$6.accept(ne,Types$6.NUMBER),oe=H$6.accept(oe,Types$6.BOOLEAN,!0),ne<1)throw FormulaError$b.VALUE;if(J[0][ne-1]===void 0)throw FormulaError$b.REF;const ce=typeof K;if(oe){let ue=ce===typeof J[0][0]?J[0][0]:null;for(let Ae=1;Ae<J.length;Ae++){const pe=J[Ae],ve=J[Ae][0];if(typeof ve===ce){if(ue>K&&ve>K)throw FormulaError$b.NA;if(ve===K)return pe[ne-1];if(ue!=null&&ve>K&&ue<=K)return J[Ae-1][ne-1];ue=ve}}if(ue==null)throw FormulaError$b.NA;return ue}else{let ue=-1;if(WildCard.isWildCard(K)?ue=J.findIndex(Ae=>WildCard.toRegex(K,"i").test(Ae[0])):ue=J.findIndex(Ae=>Ae[0]===K),ue===-1)throw FormulaError$b.NA;return J[ue][ne-1]}}};var reference=ReferenceFunctions$1;const FormulaError$a=requireError(),{FormulaHelpers:FormulaHelpers$7,Types:Types$5}=requireHelpers(),H$5=FormulaHelpers$7,error2Number={"#NULL!":1,"#DIV/0!":2,"#VALUE!":3,"#REF!":4,"#NAME?":5,"#NUM!":6,"#N/A":7},InfoFunctions={CELL:(K,J)=>{},"ERROR.TYPE":K=>{if(K=H$5.accept(K),K instanceof FormulaError$a)return error2Number[K.toString()];throw FormulaError$a.NA},INFO:()=>{},ISBLANK:K=>K.ref?K.value==null||K.value==="":!1,ISERR:K=>(K=H$5.accept(K),K instanceof FormulaError$a&&K.toString()!=="#N/A"),ISERROR:K=>(K=H$5.accept(K),K instanceof FormulaError$a),ISEVEN:K=>(K=H$5.accept(K,Types$5.NUMBER),K=Math.trunc(K),K%2===0),ISLOGICAL:K=>(K=H$5.accept(K),typeof K=="boolean"),ISNA:K=>(K=H$5.accept(K),K instanceof FormulaError$a&&K.toString()==="#N/A"),ISNONTEXT:K=>(K=H$5.accept(K),typeof K!="string"),ISNUMBER:K=>(K=H$5.accept(K),typeof K=="number"),ISREF:K=>!K.ref||H$5.isCellRef(K)&&(K.ref.row>1048576||K.ref.col>16384)||H$5.isRangeRef(K)&&(K.ref.from.row>1048576||K.ref.from.col>16384||K.ref.to.row>1048576||K.ref.to.col>16384)?!1:(K=H$5.accept(K),!(K instanceof FormulaError$a&&K.toString()==="#REF!")),ISTEXT:K=>(K=H$5.accept(K),typeof K=="string"),N:K=>{K=H$5.accept(K);const J=typeof K;if(J==="number")return K;if(J==="boolean")return Number(K);if(K instanceof FormulaError$a)throw K;return 0},NA:()=>{throw FormulaError$a.NA},TYPE:K=>{if(K.ref){if(H$5.isRangeRef(K))return 16;if(H$5.isCellRef(K)&&(K=H$5.accept(K),typeof K=="string"&&K.length===0))return 1}K=H$5.accept(K);const J=typeof K;if(J==="number")return 1;if(J==="string")return 2;if(J==="boolean")return 4;if(K instanceof FormulaError$a)return 16;if(Array.isArray(K))return 64}};var information=InfoFunctions;const FormulaError$9=requireError(),{FormulaHelpers:FormulaHelpers$6,Types:Types$4}=requireHelpers(),H$4=FormulaHelpers$6,jStat=jstatExports,MathFunctions$1=math,SQRT2PI=2.5066282746310002,DistributionFunctions$1={"BETA.DIST":(K,J,ne,oe,ce,ue)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),ce=H$4.accept(ce,Types$4.NUMBER,0),ue=H$4.accept(ue,Types$4.NUMBER,1),J<=0||ne<=0||K<ce||K>ue||ce===ue)throw FormulaError$9.NUM;return K=(K-ce)/(ue-ce),oe?jStat.beta.cdf(K,J,ne):jStat.beta.pdf(K,J,ne)/(ue-ce)},"BETA.INV":(K,J,ne,oe,ce)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.NUMBER,0),ce=H$4.accept(ce,Types$4.NUMBER,1),J<=0||ne<=0||K<=0||K>1)throw FormulaError$9.NUM;return jStat.beta.inv(K,J,ne)*(ce-oe)+oe},"BINOM.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),J<0||ne<0||ne>1||K<0||K>J)throw FormulaError$9.NUM;return oe?jStat.binomial.cdf(K,J,ne):jStat.binomial.pdf(K,J,ne)},"BINOM.DIST.RANGE":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.NUMBER,ne),K<0||J<0||J>1||ne<0||ne>K||oe<ne||oe>K)throw FormulaError$9.NUM;let ce=0;for(let ue=ne;ue<=oe;ue++)ce+=MathFunctions$1.COMBIN(K,ue)*Math.pow(J,ue)*Math.pow(1-J,K-ue);return ce},"BINOM.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||J<0||J>1||ne<0||ne>1)throw FormulaError$9.NUM;let oe=0;for(;oe<=K;){if(jStat.binomial.cdf(oe,K,J)>=ne)return oe;oe++}},"CHISQ.DIST":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),J=Math.trunc(J),K<0||J<1||J>10**10)throw FormulaError$9.NUM;return ne?jStat.chisquare.cdf(K,J):jStat.chisquare.pdf(K,J)},"CHISQ.DIST.RT":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J=Math.trunc(J),K<0||J<1||J>10**10)throw FormulaError$9.NUM;return 1-jStat.chisquare.cdf(K,J)},"CHISQ.INV":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J=Math.trunc(J),K<0||K>1||J<1||J>10**10)throw FormulaError$9.NUM;return jStat.chisquare.inv(K,J)},"CHISQ.INV.RT":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J=Math.trunc(J),K<0||K>1||J<1||J>10**10)throw FormulaError$9.NUM;return jStat.chisquare.inv(1-K,J)},"CHISQ.TEST":(K,J)=>{const ne=H$4.accept(K,Types$4.ARRAY,void 0,!1,!1),oe=H$4.accept(J,Types$4.ARRAY,void 0,!1,!1);if(ne.length!==oe.length||ne[0].length!==oe[0].length||ne.length===1&&ne[0].length===1)throw FormulaError$9.NA;const ce=ne.length,ue=ne[0].length;let Ae=(ce-1)*(ue-1);ce===1?Ae=ue-1:Ae=ce-1;let pe=0;for(let xe=0;xe<ce;xe++)for(let _e=0;_e<ue;_e++)if(!(typeof ne[xe][_e]!="number"||typeof oe[xe][_e]!="number")){if(oe[xe][_e]===0)throw FormulaError$9.DIV0;pe+=Math.pow(ne[xe][_e]-oe[xe][_e],2)/oe[xe][_e]}let ve=Math.exp(-.5*pe);Ae%2===1&&(ve=ve*Math.sqrt(2*pe/Math.PI));let me=Ae;for(;me>=2;)ve=ve*pe/me,me=me-2;let ge=ve,ye=Ae;for(;ge>1e-15*ve;)ye=ye+2,ge=ge*pe/ye,ve=ve+ge;return 1-ve},"CONFIDENCE.NORM":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),ne=Math.trunc(ne),K<=0||K>=1||J<=0||ne<1)throw FormulaError$9.NUM;return jStat.normalci(1,K,J,ne)[1]-1},"CONFIDENCE.T":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),ne=Math.trunc(ne),K<=0||K>=1||J<=0||ne<1)throw FormulaError$9.NUM;if(ne===1)throw FormulaError$9.DIV0;return jStat.tci(1,K,J,ne)[1]-1},CORREL:(K,J)=>{if(K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),K.length!==J.length)throw FormulaError$9.NA;const ne=[],oe=[];for(let ce=0;ce<K.length;ce++)typeof K[ce]!="number"||typeof J[ce]!="number"||(ne.push(K[ce]),oe.push(J[ce]));if(ne.length<=1)throw FormulaError$9.DIV0;return jStat.corrcoeff(ne,oe)},"COVARIANCE.P":(K,J)=>{if(K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),K.length!==J.length)throw FormulaError$9.NA;const ne=[],oe=[];for(let pe=0;pe<K.length;pe++)typeof K[pe]!="number"||typeof J[pe]!="number"||(ne.push(K[pe]),oe.push(J[pe]));const ce=jStat.mean(ne),ue=jStat.mean(oe);let Ae=0;for(let pe=0;pe<ne.length;pe++)Ae+=(ne[pe]-ce)*(oe[pe]-ue);return Ae/ne.length},"COVARIANCE.S":(K,J)=>{if(K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),K.length!==J.length)throw FormulaError$9.NA;const ne=[],oe=[];for(let ce=0;ce<K.length;ce++)typeof K[ce]!="number"||typeof J[ce]!="number"||(ne.push(K[ce]),oe.push(J[ce]));if(ne.length<=1)throw FormulaError$9.DIV0;return jStat.covariance(ne,oe)},DEVSQ:(...K)=>{let J=0,ne=[];H$4.flattenParams(K,Types$4.NUMBER,!0,(ce,ue)=>{typeof ce=="number"&&(J+=ce,ne.push(ce))});const oe=J/ne.length;J=0;for(let ce=0;ce<ne.length;ce++)J+=(ne[ce]-oe)**2;return J},"EXPON.DIST":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.BOOLEAN),K<0||J<=0)throw FormulaError$9.NUM;return ne?jStat.exponential.cdf(K,J):jStat.exponential.pdf(K,J)},"F.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K<0||J<1||ne<1)throw FormulaError$9.NUM;return J=Math.trunc(J),ne=Math.trunc(ne),oe?jStat.centralF.cdf(K,J,ne):jStat.centralF.pdf(K,J,ne)},"F.DIST.RT":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||J<1||ne<1)throw FormulaError$9.NUM;return J=Math.trunc(J),ne=Math.trunc(ne),1-jStat.centralF.cdf(K,J,ne)},"F.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||K>1||J<1||ne<1)throw FormulaError$9.NUM;return J=Math.trunc(J),ne=Math.trunc(ne),jStat.centralF.inv(K,J,ne)},"F.INV.RT":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||K>1||J<1||J>=Math.pow(10,10)||ne<1||ne>=Math.pow(10,10))throw FormulaError$9.NUM;return J=Math.trunc(J),ne=Math.trunc(ne),jStat.centralF.inv(1-K,J,ne)},"F.TEST":(K,J)=>{K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0);const ne=[],oe=[];let ce=0,ue=0;for(let ve=0;ve<Math.max(K.length,J.length);ve++)typeof K[ve]=="number"&&(ne.push(K[ve]),ce+=K[ve]),typeof J[ve]=="number"&&(oe.push(J[ve]),ue+=J[ve]);if(ne.length<=1||oe.length<=1)throw FormulaError$9.DIV0;ce/=ne.length,ue/=oe.length;let Ae=0,pe=0;for(let ve=0;ve<ne.length;ve++)Ae+=(ce-ne[ve])**2;Ae/=ne.length-1;for(let ve=0;ve<oe.length;ve++)pe+=(ue-oe[ve])**2;return pe/=oe.length-1,jStat.centralF.cdf(Ae/pe,ne.length-1,oe.length-1)*2},FISHER:K=>{if(K=H$4.accept(K,Types$4.NUMBER),K<=-1||K>=1)throw FormulaError$9.NUM;return Math.log((1+K)/(1-K))/2},FISHERINV:K=>{K=H$4.accept(K,Types$4.NUMBER);let J=Math.exp(2*K);return(J-1)/(J+1)},FORECAST:(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),ne=H$4.accept(ne,Types$4.ARRAY,void 0,!0,!0),ne.length!==J.length)throw FormulaError$9.NA;const oe=[],ce=[];let ue=!0;for(let xe=0;xe<J.length;xe++)typeof J[xe]!="number"||typeof ne[xe]!="number"||(oe.push(J[xe]),ce.push(ne[xe]),ne[xe]!==ne[0]&&(ue=!1));if(ue)throw FormulaError$9.DIV0;const Ae=jStat.mean(oe),pe=jStat.mean(ce);let ve=0,me=0;for(let xe=0;xe<oe.length;xe++)ve+=(ce[xe]-pe)*(oe[xe]-Ae),me+=(ce[xe]-pe)**2;const ge=ve/me;return Ae-ge*pe+ge*K},"FORECAST.ETS":()=>{},"FORECAST.ETS.CONFINT":()=>{},"FORECAST.ETS.SEASONALITY":()=>{},"FORECAST.ETS.STAT":()=>{},"FORECAST.LINEAR":(...K)=>DistributionFunctions$1.FORECAST(...K),FREQUENCY:(K,J)=>{K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0);const ne=[];for(let ce=0;ce<J.length;ce++)typeof J[ce]=="number"&&ne.push(J[ce]);ne.sort(),ne.push(1/0);const oe=[];for(let ce=0;ce<ne.length;ce++){oe[ce]=[],oe[ce][0]=0;for(let ue=0;ue<K.length;ue++){if(typeof K[ue]!="number")continue;K[ue]<=ne[ce]&&(oe[ce][0]++,K[ue]=null)}}return oe},GAMMA:K=>{if(K=H$4.accept(K,Types$4.NUMBER),K===0||K<0&&K===Math.trunc(K))throw FormulaError$9.NUM;return jStat.gammafn(K)},"GAMMA.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K<0||J<=0||ne<=0)throw FormulaError$9.NUM;return oe?jStat.gamma.cdf(K,J,ne,!0):jStat.gamma.pdf(K,J,ne,!1)},"GAMMA.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||K>1||J<=0||ne<=0)throw FormulaError$9.NUM;return jStat.gamma.inv(K,J,ne)},GAMMALN:K=>{if(K=H$4.accept(K,Types$4.NUMBER),K<=0)throw FormulaError$9.NUM;return jStat.gammaln(K)},"GAMMALN.PRECISE":K=>{if(K=H$4.accept(K,Types$4.NUMBER),K<=0)throw FormulaError$9.NUM;return jStat.gammaln(K)},GAUSS:K=>(K=H$4.accept(K,Types$4.NUMBER),jStat.normal.cdf(K,0,1)-.5),GEOMEAN:(...K)=>{const J=[];return H$4.flattenParams(K,Types$4.NUMBER,!0,(ne,oe)=>{typeof ne=="number"&&J.push(ne)}),jStat.geomean(J)},GROWTH:(K,J,ne,oe)=>{K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0);for(let _e=0;_e<K.length;_e++)if(typeof K[_e]!="number")throw FormulaError$9.VALUE;J=H$4.accept(J,Types$4.ARRAY,null,!0,!0);const ce=J==null;if(J==null){J=[];for(let _e=1;_e<=K.length;_e++)J.push(_e)}else{if(J.length!==K.length)throw FormulaError$9.REF;for(let _e=0;_e<J.length;_e++)if(typeof J[_e]!="number")throw FormulaError$9.VALUE}if(ne=H$4.accept(ne,Types$4.ARRAY,null,!1,!0),ne==null&&ce){ne=[];for(let _e=1;_e<=K.length;_e++)ne.push(_e);ne=[ne]}else ne==null&&(ne=Array.isArray(J[0])?J:[J]);oe=H$4.accept(oe,Types$4.BOOLEAN,!0);const ue=K.length;let Ae=0,pe=0,ve=0,me=0;for(let _e=0;_e<ue;_e++){const $e=J[_e],Ie=Math.log(K[_e]);Ae+=$e,pe+=Ie,ve+=$e*Ie,me+=$e*$e}Ae/=ue,pe/=ue,ve/=ue,me/=ue;let ge,ye;oe?(ge=(ve-Ae*pe)/(me-Ae*Ae),ye=pe-ge*Ae):(ge=ve/me,ye=0);const xe=[];for(let _e=0;_e<ne.length;_e++){xe[_e]=[];for(let $e=0;$e<ne[0].length;$e++){if(typeof ne[_e][$e]!="number")throw FormulaError$9.VALUE;xe[_e][$e]=Math.exp(ye+ge*ne[_e][$e])}}return xe},HARMEAN:(...K)=>{let J=0,ne=0;return H$4.flattenParams(K,Types$4.NUMBER,!0,(oe,ce)=>{typeof oe=="number"&&(ne+=1/oe,J++)}),J/ne},"HYPGEOM.DIST":(K,J,ne,oe,ce)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.NUMBER),ce=H$4.accept(ce,Types$4.BOOLEAN),K=Math.trunc(K),J=Math.trunc(J),ne=Math.trunc(ne),oe=Math.trunc(oe),oe<=0||K<0||J<=0||ne<=0||J>oe||ne>oe||J<K||ne<K||K<J-oe+ne)throw FormulaError$9.NUM;function ue(pe,ve,me,ge){return MathFunctions$1.COMBIN(me,pe)*MathFunctions$1.COMBIN(ge-me,ve-pe)/MathFunctions$1.COMBIN(ge,ve)}function Ae(pe,ve,me,ge){let ye=0;for(let xe=0;xe<=pe;xe++)ye+=ue(xe,ve,me,ge);return ye}return ce?Ae(K,J,ne,oe):ue(K,J,ne,oe)},INTERCEPT:(K,J)=>{if(K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),J.length!==K.length)throw FormulaError$9.NA;const ne=[],oe=[];for(let me=0;me<K.length;me++)typeof K[me]!="number"||typeof J[me]!="number"||(ne.push(K[me]),oe.push(J[me]));if(ne.length<=1)throw FormulaError$9.DIV0;const ce=jStat.mean(ne),ue=jStat.mean(oe);let Ae=0,pe=0;for(let me=0;me<ne.length;me++)Ae+=(oe[me]-ue)*(ne[me]-ce),pe+=(oe[me]-ue)**2;const ve=Ae/pe;return ce-ve*ue},KURT:(...K)=>{let J=0,ne=[];H$4.flattenParams(K,Types$4.NUMBER,!0,(ue,Ae)=>{typeof ue=="number"&&(J+=ue,ne.push(ue))});const oe=ne.length;J/=oe;let ce=0;for(let ue=0;ue<oe;ue++)ce+=Math.pow(ne[ue]-J,4);return ce=ce/Math.pow(jStat.stdev(ne,!0),4),oe*(oe+1)/((oe-1)*(oe-2)*(oe-3))*ce-3*(oe-1)*(oe-1)/((oe-2)*(oe-3))},LINEST:()=>{},LOGEST:()=>{},"LOGNORM.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K<=0||ne<=0)throw FormulaError$9.NUM;return oe?jStat.lognormal.cdf(K,J,ne):jStat.lognormal.pdf(K,J,ne)},"LOGNORM.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<=0||K>=1||ne<=0)throw FormulaError$9.NUM;return jStat.lognormal.inv(K,J,ne)},"MODE.MULT":()=>{},"MODE.SNGL":()=>{},"NEGBINOM.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K=Math.trunc(K),J=Math.trunc(J),ne<0||ne>1||K<0||J<1)throw FormulaError$9.NUM;return oe?jStat.negbin.cdf(K,J,ne):jStat.negbin.pdf(K,J,ne)},"NORM.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),ne<=0)throw FormulaError$9.NUM;return oe?jStat.normal.cdf(K,J,ne):jStat.normal.pdf(K,J,ne)},"NORM.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<=0||K>=1||ne<=0)throw FormulaError$9.NUM;return jStat.normal.inv(K,J,ne)},"NORM.S.DIST":(K,J)=>(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.BOOLEAN),J?jStat.normal.cdf(K,0,1):jStat.normal.pdf(K,0,1)),"NORM.S.INV":K=>{if(K=H$4.accept(K,Types$4.NUMBER),K<=0||K>=1)throw FormulaError$9.NUM;return jStat.normal.inv(K,0,1)},PEARSON:()=>{},"PERCENTILE.EXC":()=>{},"PERCENTILE.INC":()=>{},"PERCENTRANK.EXC":()=>{},"PERCENTRANK.INC":()=>{},PERMUTATIONA:()=>{},PHI:K=>(K=H$4.accept(K,Types$4.NUMBER),Math.exp(-.5*K*K)/SQRT2PI),"POISSON.DIST":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.BOOLEAN),K<0||J<0)throw FormulaError$9.NUM;return K=Math.trunc(K),ne?jStat.poisson.cdf(K,J):jStat.poisson.pdf(K,J)},PROB:()=>{},"QUARTILE.EXC":()=>{},"QUARTILE.INC":()=>{},"RANK.AVG":()=>{},"RANK.EQ":()=>{},RSQ:()=>{},SKEW:()=>{},"SKEW.P":()=>{},SLOPE:()=>{},STANDARDIZE:(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),ne<=0)throw FormulaError$9.NUM;return(K-J)/ne},"STDEV.P":()=>{},"STDEV.S":()=>{},STDEVA:()=>{},STDEVPA:()=>{},STEYX:()=>{},"T.DIST":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.BOOLEAN),J<1)throw FormulaError$9.NUM;return ne?jStat.studentt.cdf(K,J):jStat.studentt.pdf(K,J)},"T.DIST.2T":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J<1||K<0)throw FormulaError$9.NUM;return(1-jStat.studentt.cdf(K,J))*2},"T.DIST.RT":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J<1)throw FormulaError$9.NUM;return 1-jStat.studentt.cdf(K,J)},"T.INV":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),K<=0||K>1||J<1)throw FormulaError$9.NUM;return J=J%1===0?J:Math.trunc(J),jStat.studentt.inv(K,J)},"T.INV.2T":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),K<=0||K>1||J<1)throw FormulaError$9.NUM;return J=J%1===0?J:Math.trunc(J),Math.abs(jStat.studentt.inv(K/2,J))},"T.TEST":()=>{},TREND:()=>{},TRIMMEAN:()=>{},"VAR.P":()=>{},"VAR.S":()=>{},VARA:()=>{},VARPA:()=>{},"WEIBULL.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K<0||J<=0||ne<=0)throw FormulaError$9.NUM;return oe?1-Math.exp(-Math.pow(K/ne,J)):Math.pow(K,J-1)*Math.exp(-Math.pow(K/ne,J))*J/Math.pow(ne,J)},"Z.TEST":()=>{}};var distribution={DistributionFunctions:DistributionFunctions$1};const FormulaError$8=requireError(),{FormulaHelpers:FormulaHelpers$5,Types:Types$3,Criteria,Address:Address$2}=requireHelpers(),{Infix:Infix$1}=operators,H$3=FormulaHelpers$5,{DistributionFunctions}=distribution,StatisticalFunctions$1={AVEDEV:(...K)=>{let J=0;const ne=[];H$3.flattenParams(K,Types$3.NUMBER,!0,(ce,ue)=>{typeof ce=="number"&&(J+=ce,ne.push(ce))});const oe=J/ne.length;J=0;for(let ce=0;ce<ne.length;ce++)J+=Math.abs(ne[ce]-oe);return J/ne.length},AVERAGE:(...K)=>{let J=0,ne=0;return H$3.flattenParams(K,Types$3.NUMBER,!0,(oe,ce)=>{typeof oe=="number"&&(J+=oe,ne++)}),J/ne},AVERAGEA:(...K)=>{let J=0,ne=0;return H$3.flattenParams(K,Types$3.NUMBER,!0,(oe,ce)=>{const ue=typeof oe;ue==="number"?(J+=oe,ne++):ue==="string"&&ne++}),J/ne},AVERAGEIF:(K,J,ne,oe)=>{const ce=H$3.retrieveRanges(K,J,oe);J=ce[0],oe=ce[1],ne=H$3.retrieveArg(K,ne);const ue=ne.isArray;ne=Criteria.parse(H$3.accept(ne));let Ae=0,pe=0;if(J.forEach((ve,me)=>{ve.forEach((ge,ye)=>{const xe=oe[me][ye];typeof xe=="number"&&(ne.op==="wc"?ne.match===ne.value.test(ge)&&(Ae+=xe,pe++):Infix$1.compareOp(ge,ne.op,ne.value,Array.isArray(ge),ue)&&(Ae+=xe,pe++))})}),pe===0)throw FormulaError$8.DIV0;return Ae/pe},AVERAGEIFS:()=>{},COUNT:(...K)=>{let J=0;return H$3.flattenParams(K,null,!0,(ne,oe)=>{(oe.isLiteral&&!isNaN(ne)||typeof ne=="number")&&J++}),J},COUNTIF:(K,J)=>{K=H$3.accept(K,Types$3.ARRAY,void 0,!1,!0);const ne=J.isArray;J=H$3.accept(J);let oe=0;return J=Criteria.parse(J),K.forEach(ce=>{ce.forEach(ue=>{J.op==="wc"?J.match===J.value.test(ue)&&oe++:Infix$1.compareOp(ue,J.op,J.value,Array.isArray(ue),ne)&&oe++})}),oe},LARGE:()=>{},MAX:()=>{},MAXA:()=>{},MAXIFS:()=>{},MEDIAN:()=>{},MIN:()=>{},MINA:()=>{},MINIFS:()=>{},PERMUT:()=>{},PERMUTATIONA:()=>{},SMALL:()=>{}};var statistical=Object.assign(StatisticalFunctions$1,DistributionFunctions);const FormulaError$7=requireError(),{FormulaHelpers:FormulaHelpers$4,Types:Types$2}=requireHelpers(),H$2=FormulaHelpers$4,MS_PER_DAY=1e3*60*60*24,d1900=new Date(Date.UTC(1900,0,1)),WEEK_STARTS=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],WEEK_TYPES=[void 0,[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],void 0,void 0,void 0,void 0,void 0,void 0,void 0,[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],WEEKEND_TYPES=[void 0,[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0],[1],[2],[3],[4],[5],[6]],timeRegex=/^\s*(\d\d?)\s*(:\s*\d\d?)?\s*(:\s*\d\d?)?\s*(pm|am)?\s*$/i,dateRegex1=/^\s*((\d\d?)\s*([-\/])\s*(\d\d?))([\d:.apm\s]*)$/i,dateRegex2=/^\s*((\d\d?)\s*([-/])\s*(jan\w*|feb\w*|mar\w*|apr\w*|may\w*|jun\w*|jul\w*|aug\w*|sep\w*|oct\w*|nov\w*|dec\w*))([\d:.apm\s]*)$/i,dateRegex3=/^\s*((jan\w*|feb\w*|mar\w*|apr\w*|may\w*|jun\w*|jul\w*|aug\w*|sep\w*|oct\w*|nov\w*|dec\w*)\s*([-/])\s*(\d\d?))([\d:.apm\s]*)$/i;function parseSimplifiedDate(K){const J=K.match(dateRegex1),ne=K.match(dateRegex2),oe=K.match(dateRegex3);return J?K=J[1]+J[3]+new Date().getFullYear()+J[5]:ne?K=ne[1]+ne[3]+new Date().getFullYear()+ne[5]:oe&&(K=oe[1]+oe[3]+new Date().getFullYear()+oe[5]),new Date(Date.parse(`${K} UTC`))}function parseTime(K){const J=K.match(timeRegex);if(!J)return;const ne=J[2]?J[2]:":00",oe=J[3]?J[3]:":00",ce=J[4]?" "+J[4]:"",ue=new Date(Date.parse(`1/1/1900 ${J[1]+ne+oe+ce} UTC`));let Ae=new Date;return Ae=new Date(Date.UTC(Ae.getFullYear(),Ae.getMonth(),Ae.getDate(),Ae.getHours(),Ae.getMinutes(),Ae.getSeconds(),Ae.getMilliseconds())),new Date(Date.UTC(Ae.getUTCFullYear(),Ae.getUTCMonth(),Ae.getUTCDate(),ue.getUTCHours(),ue.getUTCMinutes(),ue.getUTCSeconds(),ue.getUTCMilliseconds()))}function toSerial(K){const J=K>-22038912e5?2:1;return Math.floor((K-d1900)/864e5)+J}function toDate(K){if(K<0)throw FormulaError$7.VALUE;return K<=60?new Date(d1900.getTime()+(K-1)*864e5):new Date(d1900.getTime()+(K-2)*864e5)}function parseDateWithExtra(K){if(K instanceof Date)return{date:K};K=H$2.accept(K);let J=!0,ne;return isNaN(K)?(ne=parseTime(K),ne?J=!1:ne=parseSimplifiedDate(K)):(K=Number(K),ne=toDate(K)),{date:ne,isDateGiven:J}}function parseDate(K){return parseDateWithExtra(K).date}function compareDateIgnoreTime(K,J){return K.getUTCFullYear()===J.getUTCFullYear()&&K.getUTCMonth()===J.getUTCMonth()&&K.getUTCDate()===J.getUTCDate()}function isLeapYear(K){return K===1900?!0:new Date(K,1,29).getMonth()===1}const DateFunctions$1={DATE:(K,J,ne)=>{if(K=H$2.accept(K,Types$2.NUMBER),J=H$2.accept(J,Types$2.NUMBER),ne=H$2.accept(ne,Types$2.NUMBER),K<0||K>=1e4)throw FormulaError$7.NUM;return K<1900&&(K+=1900),toSerial(Date.UTC(K,J-1,ne))},DATEDIF:(K,J,ne)=>{if(K=parseDate(K),J=parseDate(J),ne=H$2.accept(ne,Types$2.STRING).toLowerCase(),K>J)throw FormulaError$7.NUM;const oe=J.getUTCFullYear()-K.getUTCFullYear(),ce=J.getUTCMonth()-K.getUTCMonth(),ue=J.getUTCDate()-K.getUTCDate();let Ae;switch(ne){case"y":return Ae=ce<0||ce===0&&ue<0?-1:0,Ae+oe;case"m":return Ae=ue<0?-1:0,oe*12+ce+Ae;case"d":return Math.floor(J-K)/MS_PER_DAY;case"md":return K.setUTCFullYear(J.getUTCFullYear()),ue<0?K.setUTCMonth(J.getUTCMonth()-1):K.setUTCMonth(J.getUTCMonth()),Math.floor(J-K)/MS_PER_DAY;case"ym":return Ae=ue<0?-1:0,(Ae+oe*12+ce)%12;case"yd":return ce<0||ce===0&&ue<0?K.setUTCFullYear(J.getUTCFullYear()-1):K.setUTCFullYear(J.getUTCFullYear()),Math.floor(J-K)/MS_PER_DAY}},DATEVALUE:K=>{K=H$2.accept(K,Types$2.STRING);const{date:J,isDateGiven:ne}=parseDateWithExtra(K);if(!ne)return 0;const oe=toSerial(J);if(oe<0||oe>2958465)throw FormulaError$7.VALUE;return oe},DAY:K=>parseDate(K).getUTCDate(),DAYS:(K,J)=>{K=parseDate(K),J=parseDate(J);let ne=0;return J<-22038912e5&&-22038912e5<K&&(ne=1),Math.floor(K-J)/MS_PER_DAY+ne},DAYS360:(K,J,ne)=>{K=parseDate(K),J=parseDate(J),ne=H$2.accept(ne,Types$2.BOOLEAN,!1),K.getUTCDate()===31&&K.setUTCDate(30),!ne&&K.getUTCDate()<30&&J.getUTCDate()>30?J.setUTCMonth(J.getUTCMonth()+1,1):J.getUTCDate()===31&&J.setUTCDate(30);const oe=J.getUTCFullYear()-K.getUTCFullYear(),ce=J.getUTCMonth()-K.getUTCMonth(),ue=J.getUTCDate()-K.getUTCDate();return ce*30+ue+oe*12*30},EDATE:(K,J)=>(K=parseDate(K),J=H$2.accept(J,Types$2.NUMBER),K.setUTCMonth(K.getUTCMonth()+J),toSerial(K)),EOMONTH:(K,J)=>(K=parseDate(K),J=H$2.accept(J,Types$2.NUMBER),K.setUTCMonth(K.getUTCMonth()+J+1,0),toSerial(K)),HOUR:K=>parseDate(K).getUTCHours(),ISOWEEKNUM:K=>{const J=parseDate(K),ne=new Date(Date.UTC(J.getFullYear(),J.getMonth(),J.getDate())),oe=ne.getUTCDay();ne.setUTCDate(ne.getUTCDate()+4-oe);const ce=new Date(Date.UTC(ne.getUTCFullYear(),0,1));return Math.ceil(((ne-ce)/864e5+1)/7)},MINUTE:K=>parseDate(K).getUTCMinutes(),MONTH:K=>parseDate(K).getUTCMonth()+1,NETWORKDAYS:(K,J,ne)=>{K=parseDate(K),J=parseDate(J);let oe=1;if(K>J){oe=-1;const Ae=K;K=J,J=Ae}const ce=[];ne!=null&&H$2.flattenParams([ne],Types$2.NUMBER,!1,Ae=>{ce.push(parseDate(Ae))});let ue=0;for(;K<=J;){if(K.getUTCDay()!==0&&K.getUTCDay()!==6){let Ae=!1;for(let pe=0;pe<ce.length;pe++)if(compareDateIgnoreTime(K,ce[pe])){Ae=!0;break}Ae||ue++}K.setUTCDate(K.getUTCDate()+1)}return oe*ue},"NETWORKDAYS.INTL":(K,J,ne,oe)=>{K=parseDate(K),J=parseDate(J);let ce=1;if(K>J){ce=-1;const pe=K;K=J,J=pe}if(ne=H$2.accept(ne,null,1),ne==="1111111")return 0;if(typeof ne=="string"&&Number(ne).toString()!==ne){if(ne.length!==7)throw FormulaError$7.VALUE;ne=ne.charAt(6)+ne.slice(0,6);const pe=[];for(let ve=0;ve<ne.length;ve++)ne.charAt(ve)==="1"&&pe.push(ve);ne=pe}else{if(typeof ne!="number")throw FormulaError$7.VALUE;ne=WEEKEND_TYPES[ne]}const ue=[];oe!=null&&H$2.flattenParams([oe],Types$2.NUMBER,!1,pe=>{ue.push(parseDate(pe))});let Ae=0;for(;K<=J;){let pe=!1;for(let ve=0;ve<ne.length;ve++)if(ne[ve]===K.getUTCDay()){pe=!0;break}if(!pe){let ve=!1;for(let me=0;me<ue.length;me++)if(compareDateIgnoreTime(K,ue[me])){ve=!0;break}ve||Ae++}K.setUTCDate(K.getUTCDate()+1)}return ce*Ae},NOW:()=>{const K=new Date;return toSerial(Date.UTC(K.getFullYear(),K.getMonth(),K.getDate(),K.getHours(),K.getMinutes(),K.getSeconds(),K.getMilliseconds()))+(3600*K.getHours()+60*K.getMinutes()+K.getSeconds())/86400},SECOND:K=>parseDate(K).getUTCSeconds(),TIME:(K,J,ne)=>{if(K=H$2.accept(K,Types$2.NUMBER),J=H$2.accept(J,Types$2.NUMBER),ne=H$2.accept(ne,Types$2.NUMBER),K<0||K>32767||J<0||J>32767||ne<0||ne>32767)throw FormulaError$7.NUM;return(3600*K+60*J+ne)/86400},TIMEVALUE:K=>(K=parseDate(K),(3600*K.getUTCHours()+60*K.getUTCMinutes()+K.getUTCSeconds())/86400),TODAY:()=>{const K=new Date;return toSerial(Date.UTC(K.getFullYear(),K.getMonth(),K.getDate()))},WEEKDAY:(K,J)=>{const ne=parseDate(K);J=H$2.accept(J,Types$2.NUMBER,1);const oe=ne.getUTCDay(),ce=WEEK_TYPES[J];if(!ce)throw FormulaError$7.NUM;return ce[oe]},WEEKNUM:(K,J)=>{const ne=parseDate(K);if(J=H$2.accept(J,Types$2.NUMBER,1),J===21)return DateFunctions$1.ISOWEEKNUM(K);const oe=WEEK_STARTS[J],ce=new Date(Date.UTC(ne.getUTCFullYear(),0,1)),ue=ce.getUTCDay()<oe?1:0;return Math.ceil(((ne-ce)/864e5+1)/7)+ue},WORKDAY:(K,J,ne)=>DateFunctions$1["WORKDAY.INTL"](K,J,1,ne),"WORKDAY.INTL":(K,J,ne,oe)=>{if(K=parseDate(K),J=H$2.accept(J,Types$2.NUMBER),ne=H$2.accept(ne,null,1),ne==="1111111")throw FormulaError$7.VALUE;if(typeof ne=="string"&&Number(ne).toString()!==ne){if(ne.length!==7)throw FormulaError$7.VALUE;ne=ne.charAt(6)+ne.slice(0,6);const Ae=[];for(let pe=0;pe<ne.length;pe++)ne.charAt(pe)==="1"&&Ae.push(pe);ne=Ae}else{if(typeof ne!="number")throw FormulaError$7.VALUE;if(ne=WEEKEND_TYPES[ne],ne==null)throw FormulaError$7.NUM}const ce=[];oe!=null&&H$2.flattenParams([oe],Types$2.NUMBER,!1,Ae=>{ce.push(parseDate(Ae))}),K.setUTCDate(K.getUTCDate()+1);let ue=0;for(;ue<J;){let Ae=!1;for(let pe=0;pe<ne.length;pe++)if(ne[pe]===K.getUTCDay()){Ae=!0;break}if(!Ae){let pe=!1;for(let ve=0;ve<ce.length;ve++)if(compareDateIgnoreTime(K,ce[ve])){pe=!0;break}pe||ue++}K.setUTCDate(K.getUTCDate()+1)}return toSerial(K)-1},YEAR:K=>parseDate(K).getUTCFullYear(),YEARFRAC:(K,J,ne)=>{if(K=parseDate(K),J=parseDate(J),K>J){const me=K;K=J,J=me}if(ne=H$2.accept(ne,Types$2.NUMBER,0),ne=Math.trunc(ne),ne<0||ne>4)throw FormulaError$7.VALUE;let oe=K.getUTCDate();const ce=K.getUTCMonth()+1,ue=K.getUTCFullYear();let Ae=J.getUTCDate();const pe=J.getUTCMonth()+1,ve=J.getUTCFullYear();switch(ne){case 0:return oe===31&&Ae===31?(oe=30,Ae=30):oe===31?oe=30:oe===30&&Ae===31&&(Ae=30),Math.abs(Ae+pe*30+ve*360-(oe+ce*30+ue*360))/360;case 1:if(ve-ue<2){const me=isLeapYear(ue)&&ue!==1900?366:365;return DateFunctions$1.DAYS(J,K)/me}else{const me=ve-ue+1,ye=(new Date(ve+1,0,1)-new Date(ue,0,1))/1e3/60/60/24/me;return DateFunctions$1.DAYS(J,K)/ye}case 2:return Math.abs(DateFunctions$1.DAYS(J,K)/360);case 3:return Math.abs(DateFunctions$1.DAYS(J,K)/365);case 4:return Math.abs(Ae+pe*30+ve*360-(oe+ce*30+ue*360))/360}}};var date=DateFunctions$1;const FormulaError$6=requireError(),{FormulaHelpers:FormulaHelpers$3,Types:Types$1}=requireHelpers(),H$1=FormulaHelpers$3,WebFunctions$1={ENCODEURL:K=>encodeURIComponent(H$1.accept(K,Types$1.STRING)),FILTERXML:()=>{},WEBSERVICE:(K,J)=>{throw FormulaError$6.ERROR("WEBSERVICE is not supported in sync mode.")}};var web=WebFunctions$1,VERSION="7.1.2";function isEmpty$1(K){return K&&K.length===0}function keys$3(K){return K==null?[]:Object.keys(K)}function values(K){for(var J=[],ne=Object.keys(K),oe=0;oe<ne.length;oe++)J.push(K[ne[oe]]);return J}function mapValues(K,J){for(var ne=[],oe=keys$3(K),ce=0;ce<oe.length;ce++){var ue=oe[ce];ne.push(J.call(null,K[ue],ue))}return ne}function map$1(K,J){for(var ne=[],oe=0;oe<K.length;oe++)ne.push(J.call(null,K[oe],oe));return ne}function flatten$1(K){for(var J=[],ne=0;ne<K.length;ne++){var oe=K[ne];Array.isArray(oe)?J=J.concat(flatten$1(oe)):J.push(oe)}return J}function first$1(K){return isEmpty$1(K)?void 0:K[0]}function last(K){var J=K&&K.length;return J?K[J-1]:void 0}function forEach(K,J){if(Array.isArray(K))for(var ne=0;ne<K.length;ne++)J.call(null,K[ne],ne);else if(isObject$6(K))for(var oe=keys$3(K),ne=0;ne<oe.length;ne++){var ce=oe[ne],ue=K[ce];J.call(null,ue,ce)}else throw Error("non exhaustive match")}function isString$1(K){return typeof K=="string"}function isUndefined(K){return K===void 0}function isFunction$4(K){return K instanceof Function}function drop$2(K,J){return J===void 0&&(J=1),K.slice(J,K.length)}function dropRight(K,J){return J===void 0&&(J=1),K.slice(0,K.length-J)}function filter$3(K,J){var ne=[];if(Array.isArray(K))for(var oe=0;oe<K.length;oe++){var ce=K[oe];J.call(null,ce)&&ne.push(ce)}return ne}function reject(K,J){return filter$3(K,function(ne){return!J(ne)})}function pick(K,J){for(var ne=Object.keys(K),oe={},ce=0;ce<ne.length;ce++){var ue=ne[ce],Ae=K[ue];J(Ae)&&(oe[ue]=Ae)}return oe}function has$2(K,J){return isObject$6(K)?K.hasOwnProperty(J):!1}function contains$1(K,J){return find$3(K,function(ne){return ne===J})!==void 0}function cloneArr(K){for(var J=[],ne=0;ne<K.length;ne++)J.push(K[ne]);return J}function cloneObj(K){var J={};for(var ne in K)Object.prototype.hasOwnProperty.call(K,ne)&&(J[ne]=K[ne]);return J}function find$3(K,J){for(var ne=0;ne<K.length;ne++){var oe=K[ne];if(J.call(null,oe))return oe}}function findAll(K,J){for(var ne=[],oe=0;oe<K.length;oe++){var ce=K[oe];J.call(null,ce)&&ne.push(ce)}return ne}function reduce$1(K,J,ne){for(var oe=Array.isArray(K),ce=oe?K:values(K),ue=oe?[]:keys$3(K),Ae=ne,pe=0;pe<ce.length;pe++)Ae=J.call(null,Ae,ce[pe],oe?pe:ue[pe]);return Ae}function compact(K){return reject(K,function(J){return J==null})}function uniq(K,J){J===void 0&&(J=function(oe){return oe});var ne=[];return reduce$1(K,function(oe,ce){var ue=J(ce);return contains$1(ne,ue)?oe:(ne.push(ue),oe.concat(ce))},[])}function isArray$5(K){return Array.isArray(K)}function isRegExp(K){return K instanceof RegExp}function isObject$6(K){return K instanceof Object}function every(K,J){for(var ne=0;ne<K.length;ne++)if(!J(K[ne],ne))return!1;return!0}function difference(K,J){return reject(K,function(ne){return contains$1(J,ne)})}function some(K,J){for(var ne=0;ne<K.length;ne++)if(J(K[ne]))return!0;return!1}function indexOf(K,J){for(var ne=0;ne<K.length;ne++)if(K[ne]===J)return ne;return-1}function assign(K){for(var J=[],ne=1;ne<arguments.length;ne++)J[ne-1]=arguments[ne];for(var oe=0;oe<J.length;oe++)for(var ce=J[oe],ue=keys$3(ce),Ae=0;Ae<ue.length;Ae++){var pe=ue[Ae];K[pe]=ce[pe]}return K}function assignNoOverwrite(K){for(var J=[],ne=1;ne<arguments.length;ne++)J[ne-1]=arguments[ne];for(var oe=0;oe<J.length;oe++)for(var ce=J[oe],ue=keys$3(ce),Ae=0;Ae<ue.length;Ae++){var pe=ue[Ae];has$2(K,pe)||(K[pe]=ce[pe])}return K}function defaults$1(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];return assignNoOverwrite.apply(null,[{}].concat(K))}function groupBy(K,J){var ne={};return forEach(K,function(oe){var ce=J(oe),ue=ne[ce];ue?ue.push(oe):ne[ce]=[oe]}),ne}function merge$2(K,J){for(var ne=cloneObj(K),oe=keys$3(J),ce=0;ce<oe.length;ce++){var ue=oe[ce],Ae=J[ue];ne[ue]=Ae}return ne}function NOOP(){}function IDENTITY(K){return K}function packArray(K){for(var J=[],ne=0;ne<K.length;ne++){var oe=K[ne];J.push(oe!==void 0?oe:void 0)}return J}function PRINT_ERROR(K){console&&console.error&&console.error("Error: "+K)}function PRINT_WARNING(K){console&&console.warn&&console.warn("Warning: "+K)}function isES2015MapSupported(){return typeof Map=="function"}function applyMixins(K,J){J.forEach(function(ne){var oe=ne.prototype;Object.getOwnPropertyNames(oe).forEach(function(ce){if(ce!=="constructor"){var ue=Object.getOwnPropertyDescriptor(oe,ce);ue&&(ue.get||ue.set)?Object.defineProperty(K.prototype,ce,ue):K.prototype[ce]=ne.prototype[ce]}})})}function toFastProperties(K){function J(){}J.prototype=K;var ne=new J;function oe(){return typeof ne.bar}return oe(),oe(),K}function peek(K){return K[K.length-1]}function timer$1(K){var J=new Date().getTime(),ne=K(),oe=new Date().getTime(),ce=oe-J;return{time:ce,value:ne}}var regexpToAst={exports:{}};(function(K){(function(J,ne){K.exports?K.exports=ne():J.regexpToAst=ne()})(typeof self<"u"?self:commonjsGlobal,function(){function J(){}J.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},J.prototype.restoreState=function(Ie){this.idx=Ie.idx,this.input=Ie.input,this.groupIdx=Ie.groupIdx},J.prototype.pattern=function(Ie){this.idx=0,this.input=Ie,this.groupIdx=0,this.consumeChar("/");var Fe=this.disjunction();this.consumeChar("/");for(var ke={type:"Flags",loc:{begin:this.idx,end:Ie.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":pe(ke,"global");break;case"i":pe(ke,"ignoreCase");break;case"m":pe(ke,"multiLine");break;case"u":pe(ke,"unicode");break;case"y":pe(ke,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:ke,value:Fe,loc:this.loc(0)}},J.prototype.disjunction=function(){var Ie=[],Fe=this.idx;for(Ie.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),Ie.push(this.alternative());return{type:"Disjunction",value:Ie,loc:this.loc(Fe)}},J.prototype.alternative=function(){for(var Ie=[],Fe=this.idx;this.isTerm();)Ie.push(this.term());return{type:"Alternative",value:Ie,loc:this.loc(Fe)}},J.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},J.prototype.assertion=function(){var Ie=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(Ie)};case"$":return{type:"EndAnchor",loc:this.loc(Ie)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(Ie)};case"B":return{type:"NonWordBoundary",loc:this.loc(Ie)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var Fe;switch(this.popChar()){case"=":Fe="Lookahead";break;case"!":Fe="NegativeLookahead";break}ve(Fe);var ke=this.disjunction();return this.consumeChar(")"),{type:Fe,value:ke,loc:this.loc(Ie)}}me()},J.prototype.quantifier=function(Ie){var Fe,ke=this.idx;switch(this.popChar()){case"*":Fe={atLeast:0,atMost:1/0};break;case"+":Fe={atLeast:1,atMost:1/0};break;case"?":Fe={atLeast:0,atMost:1};break;case"{":var je=this.integerIncludingZero();switch(this.popChar()){case"}":Fe={atLeast:je,atMost:je};break;case",":var We;this.isDigit()?(We=this.integerIncludingZero(),Fe={atLeast:je,atMost:We}):Fe={atLeast:je,atMost:1/0},this.consumeChar("}");break}if(Ie===!0&&Fe===void 0)return;ve(Fe);break}if(!(Ie===!0&&Fe===void 0))return ve(Fe),this.peekChar(0)==="?"?(this.consumeChar("?"),Fe.greedy=!1):Fe.greedy=!0,Fe.type="Quantifier",Fe.loc=this.loc(ke),Fe},J.prototype.atom=function(){var Ie,Fe=this.idx;switch(this.peekChar()){case".":Ie=this.dotAll();break;case"\\":Ie=this.atomEscape();break;case"[":Ie=this.characterClass();break;case"(":Ie=this.group();break}return Ie===void 0&&this.isPatternCharacter()&&(Ie=this.patternCharacter()),ve(Ie),Ie.loc=this.loc(Fe),this.isQuantifier()&&(Ie.quantifier=this.quantifier()),Ie},J.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[ue(`
`),ue("\r"),ue("\u2028"),ue("\u2029")]}},J.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},J.prototype.decimalEscapeAtom=function(){var Ie=this.positiveInteger();return{type:"GroupBackReference",value:Ie}},J.prototype.characterClassEscape=function(){var Ie,Fe=!1;switch(this.popChar()){case"d":Ie=ye;break;case"D":Ie=ye,Fe=!0;break;case"s":Ie=_e;break;case"S":Ie=_e,Fe=!0;break;case"w":Ie=xe;break;case"W":Ie=xe,Fe=!0;break}return ve(Ie),{type:"Set",value:Ie,complement:Fe}},J.prototype.controlEscapeAtom=function(){var Ie;switch(this.popChar()){case"f":Ie=ue("\f");break;case"n":Ie=ue(`
`);break;case"r":Ie=ue("\r");break;case"t":Ie=ue("	");break;case"v":Ie=ue("\v");break}return ve(Ie),{type:"Character",value:Ie}},J.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var Ie=this.popChar();if(/[a-zA-Z]/.test(Ie)===!1)throw Error("Invalid ");var Fe=Ie.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:Fe}},J.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:ue("\0")}},J.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},J.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},J.prototype.identityEscapeAtom=function(){var Ie=this.popChar();return{type:"Character",value:ue(Ie)}},J.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var Ie=this.popChar();return{type:"Character",value:ue(Ie)}}},J.prototype.characterClass=function(){var Ie=[],Fe=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),Fe=!0);this.isClassAtom();){var ke=this.classAtom(),je=ke.type==="Character";if(je&&this.isRangeDash()){this.consumeChar("-");var We=this.classAtom(),ze=We.type==="Character";if(ze){if(We.value<ke.value)throw Error("Range out of order in character class");Ie.push({from:ke.value,to:We.value})}else Ae(ke.value,Ie),Ie.push(ue("-")),Ae(We.value,Ie)}else Ae(ke.value,Ie)}return this.consumeChar("]"),{type:"Set",complement:Fe,value:Ie}},J.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},J.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:ue("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},J.prototype.group=function(){var Ie=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),Ie=!1;break;default:this.groupIdx++;break}var Fe=this.disjunction();this.consumeChar(")");var ke={type:"Group",capturing:Ie,value:Fe};return Ie&&(ke.idx=this.groupIdx),ke},J.prototype.positiveInteger=function(){var Ie=this.popChar();if(ce.test(Ie)===!1)throw Error("Expecting a positive integer");for(;oe.test(this.peekChar(0));)Ie+=this.popChar();return parseInt(Ie,10)},J.prototype.integerIncludingZero=function(){var Ie=this.popChar();if(oe.test(Ie)===!1)throw Error("Expecting an integer");for(;oe.test(this.peekChar(0));)Ie+=this.popChar();return parseInt(Ie,10)},J.prototype.patternCharacter=function(){var Ie=this.popChar();switch(Ie){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:ue(Ie)}}},J.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},J.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},J.prototype.isDigit=function(){return oe.test(this.peekChar(0))},J.prototype.isClassAtom=function(Ie){switch(Ie===void 0&&(Ie=0),this.peekChar(Ie)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},J.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},J.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},J.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},J.prototype.isQuantifier=function(){var Ie=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(Ie)}},J.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},J.prototype.parseHexDigits=function(Ie){for(var Fe="",ke=0;ke<Ie;ke++){var je=this.popChar();if(ne.test(je)===!1)throw Error("Expecting a HexDecimal digits");Fe+=je}var We=parseInt(Fe,16);return{type:"Character",value:We}},J.prototype.peekChar=function(Ie){return Ie===void 0&&(Ie=0),this.input[this.idx+Ie]},J.prototype.popChar=function(){var Ie=this.peekChar(0);return this.consumeChar(),Ie},J.prototype.consumeChar=function(Ie){if(Ie!==void 0&&this.input[this.idx]!==Ie)throw Error("Expected: '"+Ie+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},J.prototype.loc=function(Ie){return{begin:Ie,end:this.idx}};var ne=/[0-9a-fA-F]/,oe=/[0-9]/,ce=/[1-9]/;function ue(Ie){return Ie.charCodeAt(0)}function Ae(Ie,Fe){Ie.length!==void 0?Ie.forEach(function(ke){Fe.push(ke)}):Fe.push(Ie)}function pe(Ie,Fe){if(Ie[Fe]===!0)throw"duplicate flag "+Fe;Ie[Fe]=!0}function ve(Ie){if(Ie===void 0)throw Error("Internal Error - Should never get here!")}function me(){throw Error("Internal Error - Should never get here!")}var ge,ye=[];for(ge=ue("0");ge<=ue("9");ge++)ye.push(ge);var xe=[ue("_")].concat(ye);for(ge=ue("a");ge<=ue("z");ge++)xe.push(ge);for(ge=ue("A");ge<=ue("Z");ge++)xe.push(ge);var _e=[ue(" "),ue("\f"),ue(`
`),ue("\r"),ue("	"),ue("\v"),ue("	"),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue("\u2028"),ue("\u2029"),ue(""),ue(""),ue(""),ue("\uFEFF")];function $e(){}return $e.prototype.visitChildren=function(Ie){for(var Fe in Ie){var ke=Ie[Fe];Ie.hasOwnProperty(Fe)&&(ke.type!==void 0?this.visit(ke):Array.isArray(ke)&&ke.forEach(function(je){this.visit(je)},this))}},$e.prototype.visit=function(Ie){switch(Ie.type){case"Pattern":this.visitPattern(Ie);break;case"Flags":this.visitFlags(Ie);break;case"Disjunction":this.visitDisjunction(Ie);break;case"Alternative":this.visitAlternative(Ie);break;case"StartAnchor":this.visitStartAnchor(Ie);break;case"EndAnchor":this.visitEndAnchor(Ie);break;case"WordBoundary":this.visitWordBoundary(Ie);break;case"NonWordBoundary":this.visitNonWordBoundary(Ie);break;case"Lookahead":this.visitLookahead(Ie);break;case"NegativeLookahead":this.visitNegativeLookahead(Ie);break;case"Character":this.visitCharacter(Ie);break;case"Set":this.visitSet(Ie);break;case"Group":this.visitGroup(Ie);break;case"GroupBackReference":this.visitGroupBackReference(Ie);break;case"Quantifier":this.visitQuantifier(Ie);break}this.visitChildren(Ie)},$e.prototype.visitPattern=function(Ie){},$e.prototype.visitFlags=function(Ie){},$e.prototype.visitDisjunction=function(Ie){},$e.prototype.visitAlternative=function(Ie){},$e.prototype.visitStartAnchor=function(Ie){},$e.prototype.visitEndAnchor=function(Ie){},$e.prototype.visitWordBoundary=function(Ie){},$e.prototype.visitNonWordBoundary=function(Ie){},$e.prototype.visitLookahead=function(Ie){},$e.prototype.visitNegativeLookahead=function(Ie){},$e.prototype.visitCharacter=function(Ie){},$e.prototype.visitSet=function(Ie){},$e.prototype.visitGroup=function(Ie){},$e.prototype.visitGroupBackReference=function(Ie){},$e.prototype.visitQuantifier=function(Ie){},{RegExpParser:J,BaseRegExpVisitor:$e,VERSION:"0.5.0"}})})(regexpToAst);var regexpToAstExports=regexpToAst.exports,regExpAstCache={},regExpParser=new regexpToAstExports.RegExpParser;function getRegExpAst(K){var J=K.toString();if(regExpAstCache.hasOwnProperty(J))return regExpAstCache[J];var ne=regExpParser.pattern(J);return regExpAstCache[J]=ne,ne}function clearRegExpParserCache(){regExpAstCache={}}var __extends$d=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),complementErrorMessage="Complement Sets are not supported for first char optimization",failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function getOptimizedStartCodesIndices(K,J){J===void 0&&(J=!1);try{var ne=getRegExpAst(K),oe=firstCharOptimizedIndices(ne.value,{},ne.flags.ignoreCase);return oe}catch(ue){if(ue.message===complementErrorMessage)J&&PRINT_WARNING(""+failedOptimizationPrefixMsg+("	Unable to optimize: < "+K.toString()+` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var ce="";J&&(ce=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),PRINT_ERROR(failedOptimizationPrefixMsg+`
`+("	Failed parsing: < "+K.toString()+` >
`)+("	Using the regexp-to-ast library version: "+regexpToAstExports.VERSION+`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+ce)}}return[]}function firstCharOptimizedIndices(K,J,ne){switch(K.type){case"Disjunction":for(var oe=0;oe<K.value.length;oe++)firstCharOptimizedIndices(K.value[oe],J,ne);break;case"Alternative":for(var ce=K.value,oe=0;oe<ce.length;oe++){var ue=ce[oe];switch(ue.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var Ae=ue;switch(Ae.type){case"Character":addOptimizedIdxToResult(Ae.value,J,ne);break;case"Set":if(Ae.complement===!0)throw Error(complementErrorMessage);forEach(Ae.value,function(me){if(typeof me=="number")addOptimizedIdxToResult(me,J,ne);else{var ge=me;if(ne===!0)for(var ye=ge.from;ye<=ge.to;ye++)addOptimizedIdxToResult(ye,J,ne);else{for(var ye=ge.from;ye<=ge.to&&ye<minOptimizationVal;ye++)addOptimizedIdxToResult(ye,J,ne);if(ge.to>=minOptimizationVal)for(var xe=ge.from>=minOptimizationVal?ge.from:minOptimizationVal,_e=ge.to,$e=charCodeToOptimizedIndex(xe),Ie=charCodeToOptimizedIndex(_e),Fe=$e;Fe<=Ie;Fe++)J[Fe]=Fe}}});break;case"Group":firstCharOptimizedIndices(Ae.value,J,ne);break;default:throw Error("Non Exhaustive Match")}var pe=Ae.quantifier!==void 0&&Ae.quantifier.atLeast===0;if(Ae.type==="Group"&&isWholeOptional(Ae)===!1||Ae.type!=="Group"&&pe===!1)break}break;default:throw Error("non exhaustive match!")}return values(J)}function addOptimizedIdxToResult(K,J,ne){var oe=charCodeToOptimizedIndex(K);J[oe]=oe,ne===!0&&handleIgnoreCase(K,J)}function handleIgnoreCase(K,J){var ne=String.fromCharCode(K),oe=ne.toUpperCase();if(oe!==ne){var ce=charCodeToOptimizedIndex(oe.charCodeAt(0));J[ce]=ce}else{var ue=ne.toLowerCase();if(ue!==ne){var ce=charCodeToOptimizedIndex(ue.charCodeAt(0));J[ce]=ce}}}function findCode(K,J){return find$3(K.value,function(ne){if(typeof ne=="number")return contains$1(J,ne);var oe=ne;return find$3(J,function(ce){return oe.from<=ce&&ce<=oe.to})!==void 0})}function isWholeOptional(K){return K.quantifier&&K.quantifier.atLeast===0?!0:K.value?isArray$5(K.value)?every(K.value,isWholeOptional):isWholeOptional(K.value):!1}var CharCodeFinder=function(K){__extends$d(J,K);function J(ne){var oe=K.call(this)||this;return oe.targetCharCodes=ne,oe.found=!1,oe}return J.prototype.visitChildren=function(ne){if(this.found!==!0){switch(ne.type){case"Lookahead":this.visitLookahead(ne);return;case"NegativeLookahead":this.visitNegativeLookahead(ne);return}K.prototype.visitChildren.call(this,ne)}},J.prototype.visitCharacter=function(ne){contains$1(this.targetCharCodes,ne.value)&&(this.found=!0)},J.prototype.visitSet=function(ne){ne.complement?findCode(ne,this.targetCharCodes)===void 0&&(this.found=!0):findCode(ne,this.targetCharCodes)!==void 0&&(this.found=!0)},J}(regexpToAstExports.BaseRegExpVisitor);function canMatchCharCode(K,J){if(J instanceof RegExp){var ne=getRegExpAst(J),oe=new CharCodeFinder(K);return oe.visit(ne),oe.found}else return find$3(J,function(ce){return contains$1(K,ce.charCodeAt(0))})!==void 0}var __extends$c=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),PATTERN="PATTERN",DEFAULT_MODE="defaultMode",MODES="modes",SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function analyzeTokenTypes(K,J){J=defaults$1(J,{useSticky:SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(je,We){return We()}});var ne=J.tracer;ne("initCharCodeToOptimizedIndexMap",function(){initCharCodeToOptimizedIndexMap()});var oe;ne("Reject Lexer.NA",function(){oe=reject(K,function(je){return je[PATTERN]===Lexer$1.NA})});var ce=!1,ue;ne("Transform Patterns",function(){ce=!1,ue=map$1(oe,function(je){var We=je[PATTERN];if(isRegExp(We)){var ze=We.source;return ze.length===1&&ze!=="^"&&ze!=="$"&&ze!=="."&&!We.ignoreCase?ze:ze.length===2&&ze[0]==="\\"&&!contains$1(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],ze[1])?ze[1]:J.useSticky?addStickyFlag(We):addStartOfInput(We)}else{if(isFunction$4(We))return ce=!0,{exec:We};if(has$2(We,"exec"))return ce=!0,We;if(typeof We=="string"){if(We.length===1)return We;var Xe=We.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),Je=new RegExp(Xe);return J.useSticky?addStickyFlag(Je):addStartOfInput(Je)}else throw Error("non exhaustive match")}})});var Ae,pe,ve,me,ge;ne("misc mapping",function(){Ae=map$1(oe,function(je){return je.tokenTypeIdx}),pe=map$1(oe,function(je){var We=je.GROUP;if(We!==Lexer$1.SKIPPED){if(isString$1(We))return We;if(isUndefined(We))return!1;throw Error("non exhaustive match")}}),ve=map$1(oe,function(je){var We=je.LONGER_ALT;if(We){var ze=indexOf(oe,We);return ze}}),me=map$1(oe,function(je){return je.PUSH_MODE}),ge=map$1(oe,function(je){return has$2(je,"POP_MODE")})});var ye;ne("Line Terminator Handling",function(){var je=getCharCodes(J.lineTerminatorCharacters);ye=map$1(oe,function(We){return!1}),J.positionTracking!=="onlyOffset"&&(ye=map$1(oe,function(We){if(has$2(We,"LINE_BREAKS"))return We.LINE_BREAKS;if(checkLineBreaksIssues(We,je)===!1)return canMatchCharCode(je,We.PATTERN)}))});var xe,_e,$e,Ie;ne("Misc Mapping #2",function(){xe=map$1(oe,isCustomPattern),_e=map$1(ue,isShortPattern),$e=reduce$1(oe,function(je,We){var ze=We.GROUP;return isString$1(ze)&&ze!==Lexer$1.SKIPPED&&(je[ze]=[]),je},{}),Ie=map$1(ue,function(je,We){return{pattern:ue[We],longerAlt:ve[We],canLineTerminator:ye[We],isCustom:xe[We],short:_e[We],group:pe[We],push:me[We],pop:ge[We],tokenTypeIdx:Ae[We],tokenType:oe[We]}})});var Fe=!0,ke=[];return J.safeMode||ne("First Char Optimization",function(){ke=reduce$1(oe,function(je,We,ze){if(typeof We.PATTERN=="string"){var Xe=We.PATTERN.charCodeAt(0),Je=charCodeToOptimizedIndex(Xe);addToMapOfArrays(je,Je,Ie[ze])}else if(isArray$5(We.START_CHARS_HINT)){var nt;forEach(We.START_CHARS_HINT,function(tt){var st=typeof tt=="string"?tt.charCodeAt(0):tt,qe=charCodeToOptimizedIndex(st);nt!==qe&&(nt=qe,addToMapOfArrays(je,qe,Ie[ze]))})}else if(isRegExp(We.PATTERN))if(We.PATTERN.unicode)Fe=!1,J.ensureOptimizations&&PRINT_ERROR(""+failedOptimizationPrefixMsg+("	Unable to analyze < "+We.PATTERN.toString()+` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var et=getOptimizedStartCodesIndices(We.PATTERN,J.ensureOptimizations);isEmpty$1(et)&&(Fe=!1),forEach(et,function(tt){addToMapOfArrays(je,tt,Ie[ze])})}else J.ensureOptimizations&&PRINT_ERROR(""+failedOptimizationPrefixMsg+("	TokenType: <"+We.name+`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),Fe=!1;return je},[])}),ne("ArrayPacking",function(){ke=packArray(ke)}),{emptyGroups:$e,patternIdxToConfig:Ie,charCodeToPatternIdxToConfig:ke,hasCustom:ce,canBeOptimized:Fe}}function validatePatterns(K,J){var ne=[],oe=findMissingPatterns(K);ne=ne.concat(oe.errors);var ce=findInvalidPatterns(oe.valid),ue=ce.valid;return ne=ne.concat(ce.errors),ne=ne.concat(validateRegExpPattern(ue)),ne=ne.concat(findInvalidGroupType(ue)),ne=ne.concat(findModesThatDoNotExist(ue,J)),ne=ne.concat(findUnreachablePatterns(ue)),ne}function validateRegExpPattern(K){var J=[],ne=filter$3(K,function(oe){return isRegExp(oe[PATTERN])});return J=J.concat(findEndOfInputAnchor(ne)),J=J.concat(findStartOfInputAnchor(ne)),J=J.concat(findUnsupportedFlags(ne)),J=J.concat(findDuplicatePatterns(ne)),J=J.concat(findEmptyMatchRegExps(ne)),J}function findMissingPatterns(K){var J=filter$3(K,function(ce){return!has$2(ce,PATTERN)}),ne=map$1(J,function(ce){return{message:"Token Type: ->"+ce.name+"<- missing static 'PATTERN' property",type:LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[ce]}}),oe=difference(K,J);return{errors:ne,valid:oe}}function findInvalidPatterns(K){var J=filter$3(K,function(ce){var ue=ce[PATTERN];return!isRegExp(ue)&&!isFunction$4(ue)&&!has$2(ue,"exec")&&!isString$1(ue)}),ne=map$1(J,function(ce){return{message:"Token Type: ->"+ce.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[ce]}}),oe=difference(K,J);return{errors:ne,valid:oe}}var end_of_input=/[^\\][\$]/;function findEndOfInputAnchor(K){var J=function(ce){__extends$c(ue,ce);function ue(){var Ae=ce!==null&&ce.apply(this,arguments)||this;return Ae.found=!1,Ae}return ue.prototype.visitEndAnchor=function(Ae){this.found=!0},ue}(regexpToAstExports.BaseRegExpVisitor),ne=filter$3(K,function(ce){var ue=ce[PATTERN];try{var Ae=getRegExpAst(ue),pe=new J;return pe.visit(Ae),pe.found}catch{return end_of_input.test(ue.source)}}),oe=map$1(ne,function(ce){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+ce.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[ce]}});return oe}function findEmptyMatchRegExps(K){var J=filter$3(K,function(oe){var ce=oe[PATTERN];return ce.test("")}),ne=map$1(J,function(oe){return{message:"Token Type: ->"+oe.name+"<- static 'PATTERN' must not match an empty string",type:LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[oe]}});return ne}var start_of_input=/[^\\[][\^]|^\^/;function findStartOfInputAnchor(K){var J=function(ce){__extends$c(ue,ce);function ue(){var Ae=ce!==null&&ce.apply(this,arguments)||this;return Ae.found=!1,Ae}return ue.prototype.visitStartAnchor=function(Ae){this.found=!0},ue}(regexpToAstExports.BaseRegExpVisitor),ne=filter$3(K,function(ce){var ue=ce[PATTERN];try{var Ae=getRegExpAst(ue),pe=new J;return pe.visit(Ae),pe.found}catch{return start_of_input.test(ue.source)}}),oe=map$1(ne,function(ce){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+ce.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[ce]}});return oe}function findUnsupportedFlags(K){var J=filter$3(K,function(oe){var ce=oe[PATTERN];return ce instanceof RegExp&&(ce.multiline||ce.global)}),ne=map$1(J,function(oe){return{message:"Token Type: ->"+oe.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[oe]}});return ne}function findDuplicatePatterns(K){var J=[],ne=map$1(K,function(ue){return reduce$1(K,function(Ae,pe){return ue.PATTERN.source===pe.PATTERN.source&&!contains$1(J,pe)&&pe.PATTERN!==Lexer$1.NA&&(J.push(pe),Ae.push(pe)),Ae},[])});ne=compact(ne);var oe=filter$3(ne,function(ue){return ue.length>1}),ce=map$1(oe,function(ue){var Ae=map$1(ue,function(ve){return ve.name}),pe=first$1(ue).PATTERN;return{message:"The same RegExp pattern ->"+pe+"<-"+("has been used in all of the following Token Types: "+Ae.join(", ")+" <-"),type:LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:ue}});return ce}function findInvalidGroupType(K){var J=filter$3(K,function(oe){if(!has$2(oe,"GROUP"))return!1;var ce=oe.GROUP;return ce!==Lexer$1.SKIPPED&&ce!==Lexer$1.NA&&!isString$1(ce)}),ne=map$1(J,function(oe){return{message:"Token Type: ->"+oe.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[oe]}});return ne}function findModesThatDoNotExist(K,J){var ne=filter$3(K,function(ce){return ce.PUSH_MODE!==void 0&&!contains$1(J,ce.PUSH_MODE)}),oe=map$1(ne,function(ce){var ue="Token Type: ->"+ce.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+ce.PUSH_MODE+"<-which does not exist";return{message:ue,type:LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[ce]}});return oe}function findUnreachablePatterns(K){var J=[],ne=reduce$1(K,function(oe,ce,ue){var Ae=ce.PATTERN;return Ae===Lexer$1.NA||(isString$1(Ae)?oe.push({str:Ae,idx:ue,tokenType:ce}):isRegExp(Ae)&&noMetaChar(Ae)&&oe.push({str:Ae.source,idx:ue,tokenType:ce})),oe},[]);return forEach(K,function(oe,ce){forEach(ne,function(ue){var Ae=ue.str,pe=ue.idx,ve=ue.tokenType;if(ce<pe&&testTokenType(Ae,oe.PATTERN)){var me="Token: ->"+ve.name+`<- can never be matched.
`+("Because it appears AFTER the Token Type ->"+oe.name+"<-")+`in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;J.push({message:me,type:LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[oe,ve]})}})}),J}function testTokenType(K,J){if(isRegExp(J)){var ne=J.exec(K);return ne!==null&&ne.index===0}else{if(isFunction$4(J))return J(K,0,[],{});if(has$2(J,"exec"))return J.exec(K,0,[],{});if(typeof J=="string")return J===K;throw Error("non exhaustive match")}}function noMetaChar(K){var J=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return find$3(J,function(ne){return K.source.indexOf(ne)!==-1})===void 0}function addStartOfInput(K){var J=K.ignoreCase?"i":"";return new RegExp("^(?:"+K.source+")",J)}function addStickyFlag(K){var J=K.ignoreCase?"iy":"y";return new RegExp(""+K.source,J)}function performRuntimeChecks(K,J,ne){var oe=[];return has$2(K,DEFAULT_MODE)||oe.push({message:"A MultiMode Lexer cannot be initialized without a <"+DEFAULT_MODE+`> property in its definition
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),has$2(K,MODES)||oe.push({message:"A MultiMode Lexer cannot be initialized without a <"+MODES+`> property in its definition
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),has$2(K,MODES)&&has$2(K,DEFAULT_MODE)&&!has$2(K.modes,K.defaultMode)&&oe.push({message:"A MultiMode Lexer cannot be initialized with a "+DEFAULT_MODE+": <"+K.defaultMode+`>which does not exist
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),has$2(K,MODES)&&forEach(K.modes,function(ce,ue){forEach(ce,function(Ae,pe){isUndefined(Ae)&&oe.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+("<"+ue+"> at index: <"+pe+`>
`),type:LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),oe}function performWarningRuntimeChecks(K,J,ne){var oe=[],ce=!1,ue=compact(flatten$1(mapValues(K.modes,function(ve){return ve}))),Ae=reject(ue,function(ve){return ve[PATTERN]===Lexer$1.NA}),pe=getCharCodes(ne);return J&&forEach(Ae,function(ve){var me=checkLineBreaksIssues(ve,pe);if(me!==!1){var ge=buildLineBreakIssueMessage(ve,me),ye={message:ge,type:me.issue,tokenType:ve};oe.push(ye)}else has$2(ve,"LINE_BREAKS")?ve.LINE_BREAKS===!0&&(ce=!0):canMatchCharCode(pe,ve.PATTERN)&&(ce=!0)}),J&&!ce&&oe.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),oe}function cloneEmptyGroups(K){var J={},ne=keys$3(K);return forEach(ne,function(oe){var ce=K[oe];if(isArray$5(ce))J[oe]=[];else throw Error("non exhaustive match")}),J}function isCustomPattern(K){var J=K.PATTERN;if(isRegExp(J))return!1;if(isFunction$4(J))return!0;if(has$2(J,"exec"))return!0;if(isString$1(J))return!1;throw Error("non exhaustive match")}function isShortPattern(K){return isString$1(K)&&K.length===1?K.charCodeAt(0):!1}var LineTerminatorOptimizedTester={test:function(K){for(var J=K.length,ne=this.lastIndex;ne<J;ne++){var oe=K.charCodeAt(ne);if(oe===10)return this.lastIndex=ne+1,!0;if(oe===13)return K.charCodeAt(ne+1)===10?this.lastIndex=ne+2:this.lastIndex=ne+1,!0}return!1},lastIndex:0};function checkLineBreaksIssues(K,J){if(has$2(K,"LINE_BREAKS"))return!1;if(isRegExp(K.PATTERN)){try{canMatchCharCode(J,K.PATTERN)}catch(ne){return{issue:LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:ne.message}}return!1}else{if(isString$1(K.PATTERN))return!1;if(isCustomPattern(K))return{issue:LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function buildLineBreakIssueMessage(K,J){if(J.issue===LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+("	The problem is in the <"+K.name+`> Token Type
`)+("	 Root cause: "+J.errMsg+`.
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(J.issue===LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+("	The problem is in the <"+K.name+`> Token Type
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}function getCharCodes(K){var J=map$1(K,function(ne){return isString$1(ne)&&ne.length>0?ne.charCodeAt(0):ne});return J}function addToMapOfArrays(K,J,ne){K[J]===void 0?K[J]=[ne]:K[J].push(ne)}var minOptimizationVal=256;function charCodeToOptimizedIndex(K){return K<minOptimizationVal?K:charCodeToOptimizedIdxMap[K]}var charCodeToOptimizedIdxMap=[];function initCharCodeToOptimizedIndexMap(){if(isEmpty$1(charCodeToOptimizedIdxMap)){charCodeToOptimizedIdxMap=new Array(65536);for(var K=0;K<65536;K++)charCodeToOptimizedIdxMap[K]=K>255?255+~~(K/255):K}}function tokenStructuredMatcher(K,J){var ne=K.tokenTypeIdx;return ne===J.tokenTypeIdx?!0:J.isParent===!0&&J.categoryMatchesMap[ne]===!0}function tokenStructuredMatcherNoCategories(K,J){return K.tokenTypeIdx===J.tokenTypeIdx}var tokenShortNameIdx=1,tokenIdxToClass={};function augmentTokenTypes(K){var J=expandCategories(K);assignTokenDefaultProps(J),assignCategoriesMapProp(J),assignCategoriesTokensProp(J),forEach(J,function(ne){ne.isParent=ne.categoryMatches.length>0})}function expandCategories(K){for(var J=cloneArr(K),ne=K,oe=!0;oe;){ne=compact(flatten$1(map$1(ne,function(ue){return ue.CATEGORIES})));var ce=difference(ne,J);J=J.concat(ce),isEmpty$1(ce)?oe=!1:ne=ce}return J}function assignTokenDefaultProps(K){forEach(K,function(J){hasShortKeyProperty(J)||(tokenIdxToClass[tokenShortNameIdx]=J,J.tokenTypeIdx=tokenShortNameIdx++),hasCategoriesProperty(J)&&!isArray$5(J.CATEGORIES)&&(J.CATEGORIES=[J.CATEGORIES]),hasCategoriesProperty(J)||(J.CATEGORIES=[]),hasExtendingTokensTypesProperty(J)||(J.categoryMatches=[]),hasExtendingTokensTypesMapProperty(J)||(J.categoryMatchesMap={})})}function assignCategoriesTokensProp(K){forEach(K,function(J){J.categoryMatches=[],forEach(J.categoryMatchesMap,function(ne,oe){J.categoryMatches.push(tokenIdxToClass[oe].tokenTypeIdx)})})}function assignCategoriesMapProp(K){forEach(K,function(J){singleAssignCategoriesToksMap([],J)})}function singleAssignCategoriesToksMap(K,J){forEach(K,function(ne){J.categoryMatchesMap[ne.tokenTypeIdx]=!0}),forEach(J.CATEGORIES,function(ne){var oe=K.concat(J);contains$1(oe,ne)||singleAssignCategoriesToksMap(oe,ne)})}function hasShortKeyProperty(K){return has$2(K,"tokenTypeIdx")}function hasCategoriesProperty(K){return has$2(K,"CATEGORIES")}function hasExtendingTokensTypesProperty(K){return has$2(K,"categoryMatches")}function hasExtendingTokensTypesMapProperty(K){return has$2(K,"categoryMatchesMap")}function isTokenType(K){return has$2(K,"tokenTypeIdx")}var defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(K){return"Unable to pop Lexer Mode after encountering Token ->"+K.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(K,J,ne,oe,ce){return"unexpected character: ->"+K.charAt(J)+"<- at offset: "+J+","+(" skipped "+ne+" characters.")}},LexerDefinitionErrorType;(function(K){K[K.MISSING_PATTERN=0]="MISSING_PATTERN",K[K.INVALID_PATTERN=1]="INVALID_PATTERN",K[K.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",K[K.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",K[K.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",K[K.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",K[K.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",K[K.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",K[K.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",K[K.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",K[K.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",K[K.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",K[K.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",K[K.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",K[K.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",K[K.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",K[K.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(LexerDefinitionErrorType||(LexerDefinitionErrorType={}));var DEFAULT_LEXER_CONFIG={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(DEFAULT_LEXER_CONFIG);var Lexer$1=function(){function K(J,ne){var oe=this;if(ne===void 0&&(ne=DEFAULT_LEXER_CONFIG),this.lexerDefinition=J,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},typeof ne=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=merge$2(DEFAULT_LEXER_CONFIG,ne);var ce=this.config.traceInitPerf;ce===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof ce=="number"&&(this.traceInitMaxIdent=ce,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var ue,Ae=!0;oe.TRACE_INIT("Lexer Config handling",function(){if(oe.config.lineTerminatorsPattern===DEFAULT_LEXER_CONFIG.lineTerminatorsPattern)oe.config.lineTerminatorsPattern=LineTerminatorOptimizedTester;else if(oe.config.lineTerminatorCharacters===DEFAULT_LEXER_CONFIG.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(ne.safeMode&&ne.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');oe.trackStartLines=/full|onlyStart/i.test(oe.config.positionTracking),oe.trackEndLines=/full/i.test(oe.config.positionTracking),isArray$5(J)?(ue={modes:{}},ue.modes[DEFAULT_MODE]=cloneArr(J),ue[DEFAULT_MODE]=DEFAULT_MODE):(Ae=!1,ue=cloneObj(J))}),oe.config.skipValidations===!1&&(oe.TRACE_INIT("performRuntimeChecks",function(){oe.lexerDefinitionErrors=oe.lexerDefinitionErrors.concat(performRuntimeChecks(ue,oe.trackStartLines,oe.config.lineTerminatorCharacters))}),oe.TRACE_INIT("performWarningRuntimeChecks",function(){oe.lexerDefinitionWarning=oe.lexerDefinitionWarning.concat(performWarningRuntimeChecks(ue,oe.trackStartLines,oe.config.lineTerminatorCharacters))})),ue.modes=ue.modes?ue.modes:{},forEach(ue.modes,function(ge,ye){ue.modes[ye]=reject(ge,function(xe){return isUndefined(xe)})});var pe=keys$3(ue.modes);if(forEach(ue.modes,function(ge,ye){oe.TRACE_INIT("Mode: <"+ye+"> processing",function(){if(oe.modes.push(ye),oe.config.skipValidations===!1&&oe.TRACE_INIT("validatePatterns",function(){oe.lexerDefinitionErrors=oe.lexerDefinitionErrors.concat(validatePatterns(ge,pe))}),isEmpty$1(oe.lexerDefinitionErrors)){augmentTokenTypes(ge);var xe;oe.TRACE_INIT("analyzeTokenTypes",function(){xe=analyzeTokenTypes(ge,{lineTerminatorCharacters:oe.config.lineTerminatorCharacters,positionTracking:ne.positionTracking,ensureOptimizations:ne.ensureOptimizations,safeMode:ne.safeMode,tracer:oe.TRACE_INIT.bind(oe)})}),oe.patternIdxToConfig[ye]=xe.patternIdxToConfig,oe.charCodeToPatternIdxToConfig[ye]=xe.charCodeToPatternIdxToConfig,oe.emptyGroups=merge$2(oe.emptyGroups,xe.emptyGroups),oe.hasCustom=xe.hasCustom||oe.hasCustom,oe.canModeBeOptimized[ye]=xe.canBeOptimized}})}),oe.defaultMode=ue.defaultMode,!isEmpty$1(oe.lexerDefinitionErrors)&&!oe.config.deferDefinitionErrorsHandling){var ve=map$1(oe.lexerDefinitionErrors,function(ge){return ge.message}),me=ve.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+me)}forEach(oe.lexerDefinitionWarning,function(ge){PRINT_WARNING(ge.message)}),oe.TRACE_INIT("Choosing sub-methods implementations",function(){if(SUPPORT_STICKY?(oe.chopInput=IDENTITY,oe.match=oe.matchWithTest):(oe.updateLastIndex=NOOP,oe.match=oe.matchWithExec),Ae&&(oe.handleModes=NOOP),oe.trackStartLines===!1&&(oe.computeNewColumn=IDENTITY),oe.trackEndLines===!1&&(oe.updateTokenEndLineColumnLocation=NOOP),/full/i.test(oe.config.positionTracking))oe.createTokenInstance=oe.createFullToken;else if(/onlyStart/i.test(oe.config.positionTracking))oe.createTokenInstance=oe.createStartOnlyToken;else if(/onlyOffset/i.test(oe.config.positionTracking))oe.createTokenInstance=oe.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+oe.config.positionTracking+'"');oe.hasCustom?(oe.addToken=oe.addTokenUsingPush,oe.handlePayload=oe.handlePayloadWithCustom):(oe.addToken=oe.addTokenUsingMemberAccess,oe.handlePayload=oe.handlePayloadNoCustom)}),oe.TRACE_INIT("Failed Optimization Warnings",function(){var ge=reduce$1(oe.canModeBeOptimized,function(ye,xe,_e){return xe===!1&&ye.push(_e),ye},[]);if(ne.ensureOptimizations&&!isEmpty$1(ge))throw Error("Lexer Modes: < "+ge.join(", ")+` > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),oe.TRACE_INIT("clearRegExpParserCache",function(){clearRegExpParserCache()}),oe.TRACE_INIT("toFastProperties",function(){toFastProperties(oe)})})}return K.prototype.tokenize=function(J,ne){if(ne===void 0&&(ne=this.defaultMode),!isEmpty$1(this.lexerDefinitionErrors)){var oe=map$1(this.lexerDefinitionErrors,function(Ae){return Ae.message}),ce=oe.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+ce)}var ue=this.tokenizeInternal(J,ne);return ue},K.prototype.tokenizeInternal=function(J,ne){var oe=this,ce,ue,Ae,pe,ve,me,ge,ye,xe,_e,$e,Ie,Fe,ke,je=J,We=je.length,ze=0,Xe=0,Je=this.hasCustom?0:Math.floor(J.length/10),nt=new Array(Je),et=[],tt=this.trackStartLines?1:void 0,st=this.trackStartLines?1:void 0,qe=cloneEmptyGroups(this.emptyGroups),Se=this.trackStartLines,Re=this.config.lineTerminatorsPattern,Be=0,Ne=[],Ue=[],Ge=[],Ye=[];Object.freeze(Ye);var Qe=void 0;function Te(){return Ne}function Ke(Mt){var St=charCodeToOptimizedIndex(Mt),_t=Ue[St];return _t===void 0?Ye:_t}var rt=function(Mt){if(Ge.length===1&&Mt.tokenType.PUSH_MODE===void 0){var St=oe.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Mt);et.push({offset:Mt.startOffset,line:Mt.startLine!==void 0?Mt.startLine:void 0,column:Mt.startColumn!==void 0?Mt.startColumn:void 0,length:Mt.image.length,message:St})}else{Ge.pop();var _t=last(Ge);Ne=oe.patternIdxToConfig[_t],Ue=oe.charCodeToPatternIdxToConfig[_t],Be=Ne.length;var Xt=oe.canModeBeOptimized[_t]&&oe.config.safeMode===!1;Ue&&Xt?Qe=Ke:Qe=Te}};function it(Mt){Ge.push(Mt),Ue=this.charCodeToPatternIdxToConfig[Mt],Ne=this.patternIdxToConfig[Mt],Be=Ne.length,Be=Ne.length;var St=this.canModeBeOptimized[Mt]&&this.config.safeMode===!1;Ue&&St?Qe=Ke:Qe=Te}it.call(this,ne);for(var at;ze<We;){ve=null;var lt=je.charCodeAt(ze),ct=Qe(lt),ot=ct.length;for(ce=0;ce<ot;ce++){at=ct[ce];var ft=at.pattern;me=null;var dt=at.short;if(dt!==!1?lt===dt&&(ve=ft):at.isCustom===!0?(ke=ft.exec(je,ze,nt,qe),ke!==null?(ve=ke[0],ke.payload!==void 0&&(me=ke.payload)):ve=null):(this.updateLastIndex(ft,ze),ve=this.match(ft,J,ze)),ve!==null){if(pe=at.longerAlt,pe!==void 0){var mt=Ne[pe],kt=mt.pattern;ge=null,mt.isCustom===!0?(ke=kt.exec(je,ze,nt,qe),ke!==null?(Ae=ke[0],ke.payload!==void 0&&(ge=ke.payload)):Ae=null):(this.updateLastIndex(kt,ze),Ae=this.match(kt,J,ze)),Ae&&Ae.length>ve.length&&(ve=Ae,me=ge,at=mt)}break}}if(ve!==null){if(ye=ve.length,xe=at.group,xe!==void 0&&(_e=at.tokenTypeIdx,$e=this.createTokenInstance(ve,ze,_e,at.tokenType,tt,st,ye),this.handlePayload($e,me),xe===!1?Xe=this.addToken(nt,Xe,$e):qe[xe].push($e)),J=this.chopInput(J,ye),ze=ze+ye,st=this.computeNewColumn(st,ye),Se===!0&&at.canLineTerminator===!0){var wt=0,Et=void 0,Ot=void 0;Re.lastIndex=0;do Et=Re.test(ve),Et===!0&&(Ot=Re.lastIndex-1,wt++);while(Et===!0);wt!==0&&(tt=tt+wt,st=ye-Ot,this.updateTokenEndLineColumnLocation($e,xe,Ot,wt,tt,st,ye))}this.handleModes(at,rt,it,$e)}else{for(var Rt=ze,gt=tt,$t=st,pt=!1;!pt&&ze<We;)for(je.charCodeAt(ze),J=this.chopInput(J,1),ze++,ue=0;ue<Be;ue++){var vt=Ne[ue],ft=vt.pattern,dt=vt.short;if(dt!==!1?je.charCodeAt(ze)===dt&&(pt=!0):vt.isCustom===!0?pt=ft.exec(je,ze,nt,qe)!==null:(this.updateLastIndex(ft,ze),pt=ft.exec(J)!==null),pt===!0)break}Ie=ze-Rt,Fe=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(je,Rt,Ie,gt,$t),et.push({offset:Rt,line:gt,column:$t,length:Ie,message:Fe})}}return this.hasCustom||(nt.length=Xe),{tokens:nt,groups:qe,errors:et}},K.prototype.handleModes=function(J,ne,oe,ce){if(J.pop===!0){var ue=J.push;ne(ce),ue!==void 0&&oe.call(this,ue)}else J.push!==void 0&&oe.call(this,J.push)},K.prototype.chopInput=function(J,ne){return J.substring(ne)},K.prototype.updateLastIndex=function(J,ne){J.lastIndex=ne},K.prototype.updateTokenEndLineColumnLocation=function(J,ne,oe,ce,ue,Ae,pe){var ve,me;ne!==void 0&&(ve=oe===pe-1,me=ve?-1:0,ce===1&&ve===!0||(J.endLine=ue+me,J.endColumn=Ae-1+-me))},K.prototype.computeNewColumn=function(J,ne){return J+ne},K.prototype.createTokenInstance=function(){return null},K.prototype.createOffsetOnlyToken=function(J,ne,oe,ce){return{image:J,startOffset:ne,tokenTypeIdx:oe,tokenType:ce}},K.prototype.createStartOnlyToken=function(J,ne,oe,ce,ue,Ae){return{image:J,startOffset:ne,startLine:ue,startColumn:Ae,tokenTypeIdx:oe,tokenType:ce}},K.prototype.createFullToken=function(J,ne,oe,ce,ue,Ae,pe){return{image:J,startOffset:ne,endOffset:ne+pe-1,startLine:ue,endLine:ue,startColumn:Ae,endColumn:Ae+pe-1,tokenTypeIdx:oe,tokenType:ce}},K.prototype.addToken=function(J,ne,oe){return 666},K.prototype.addTokenUsingPush=function(J,ne,oe){return J.push(oe),ne},K.prototype.addTokenUsingMemberAccess=function(J,ne,oe){return J[ne]=oe,ne++,ne},K.prototype.handlePayload=function(J,ne){},K.prototype.handlePayloadNoCustom=function(J,ne){},K.prototype.handlePayloadWithCustom=function(J,ne){ne!==null&&(J.payload=ne)},K.prototype.match=function(J,ne,oe){return null},K.prototype.matchWithTest=function(J,ne,oe){var ce=J.test(ne);return ce===!0?ne.substring(oe,J.lastIndex):null},K.prototype.matchWithExec=function(J,ne){var oe=J.exec(ne);return oe!==null?oe[0]:oe},K.prototype.TRACE_INIT=function(J,ne){if(this.traceInitPerf===!0){this.traceInitIndent++;var oe=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(oe+"--> <"+J+">");var ce=timer$1(ne),ue=ce.time,Ae=ce.value,pe=ue>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&pe(oe+"<-- <"+J+"> time: "+ue+"ms"),this.traceInitIndent--,Ae}else return ne()},K.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",K.NA=/NOT_APPLICABLE/,K}();function tokenLabel(K){return hasTokenLabel(K)?K.LABEL:K.name}function tokenName(K){return K.name}function hasTokenLabel(K){return isString$1(K.LABEL)&&K.LABEL!==""}var PARENT="parent",CATEGORIES="categories",LABEL="label",GROUP="group",PUSH_MODE="push_mode",POP_MODE="pop_mode",LONGER_ALT="longer_alt",LINE_BREAKS$1="line_breaks",START_CHARS_HINT="start_chars_hint";function createToken$1(K){return createTokenInternal(K)}function createTokenInternal(K){var J=K.pattern,ne={};if(ne.name=K.name,isUndefined(J)||(ne.PATTERN=J),has$2(K,PARENT))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return has$2(K,CATEGORIES)&&(ne.CATEGORIES=K[CATEGORIES]),augmentTokenTypes([ne]),has$2(K,LABEL)&&(ne.LABEL=K[LABEL]),has$2(K,GROUP)&&(ne.GROUP=K[GROUP]),has$2(K,POP_MODE)&&(ne.POP_MODE=K[POP_MODE]),has$2(K,PUSH_MODE)&&(ne.PUSH_MODE=K[PUSH_MODE]),has$2(K,LONGER_ALT)&&(ne.LONGER_ALT=K[LONGER_ALT]),has$2(K,LINE_BREAKS$1)&&(ne.LINE_BREAKS=K[LINE_BREAKS$1]),has$2(K,START_CHARS_HINT)&&(ne.START_CHARS_HINT=K[START_CHARS_HINT]),ne}var EOF$1=createToken$1({name:"EOF",pattern:Lexer$1.NA});augmentTokenTypes([EOF$1]);function createTokenInstance(K,J,ne,oe,ce,ue,Ae,pe){return{image:J,startOffset:ne,endOffset:oe,startLine:ce,endLine:ue,startColumn:Ae,endColumn:pe,tokenTypeIdx:K.tokenTypeIdx,tokenType:K}}function tokenMatcher(K,J){return tokenStructuredMatcher(K,J)}var __extends$b=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),AbstractProduction=function(){function K(J){this._definition=J}return Object.defineProperty(K.prototype,"definition",{get:function(){return this._definition},set:function(J){this._definition=J},enumerable:!1,configurable:!0}),K.prototype.accept=function(J){J.visit(this),forEach(this.definition,function(ne){ne.accept(J)})},K}(),NonTerminal=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,[])||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return Object.defineProperty(J.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(ne){},enumerable:!1,configurable:!0}),J.prototype.accept=function(ne){ne.visit(this)},J}(AbstractProduction),Rule=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.orgText="",assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),Alternative=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.ignoreAmbiguities=!1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),Option=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),RepetitionMandatory=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),RepetitionMandatoryWithSeparator=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),Repetition=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),RepetitionWithSeparator=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),Alternation=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,oe.ignoreAmbiguities=!1,oe.hasPredicates=!1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return Object.defineProperty(J.prototype,"definition",{get:function(){return this._definition},set:function(ne){this._definition=ne},enumerable:!1,configurable:!0}),J}(AbstractProduction),Terminal=function(){function K(J){this.idx=1,assign(this,pick(J,function(ne){return ne!==void 0}))}return K.prototype.accept=function(J){J.visit(this)},K}();function serializeGrammar(K){return map$1(K,serializeProduction)}function serializeProduction(K){function J(ce){return map$1(ce,serializeProduction)}if(K instanceof NonTerminal)return{type:"NonTerminal",name:K.nonTerminalName,idx:K.idx};if(K instanceof Alternative)return{type:"Alternative",definition:J(K.definition)};if(K instanceof Option)return{type:"Option",idx:K.idx,definition:J(K.definition)};if(K instanceof RepetitionMandatory)return{type:"RepetitionMandatory",idx:K.idx,definition:J(K.definition)};if(K instanceof RepetitionMandatoryWithSeparator)return{type:"RepetitionMandatoryWithSeparator",idx:K.idx,separator:serializeProduction(new Terminal({terminalType:K.separator})),definition:J(K.definition)};if(K instanceof RepetitionWithSeparator)return{type:"RepetitionWithSeparator",idx:K.idx,separator:serializeProduction(new Terminal({terminalType:K.separator})),definition:J(K.definition)};if(K instanceof Repetition)return{type:"Repetition",idx:K.idx,definition:J(K.definition)};if(K instanceof Alternation)return{type:"Alternation",idx:K.idx,definition:J(K.definition)};if(K instanceof Terminal){var ne={type:"Terminal",name:K.terminalType.name,label:tokenLabel(K.terminalType),idx:K.idx},oe=K.terminalType.PATTERN;return K.terminalType.PATTERN&&(ne.pattern=isRegExp(oe)?oe.source:oe),ne}else{if(K instanceof Rule)return{type:"Rule",name:K.name,orgText:K.orgText,definition:J(K.definition)};throw Error("non exhaustive match")}}var RestWalker=function(){function K(){}return K.prototype.walk=function(J,ne){var oe=this;ne===void 0&&(ne=[]),forEach(J.definition,function(ce,ue){var Ae=drop$2(J.definition,ue+1);if(ce instanceof NonTerminal)oe.walkProdRef(ce,Ae,ne);else if(ce instanceof Terminal)oe.walkTerminal(ce,Ae,ne);else if(ce instanceof Alternative)oe.walkFlat(ce,Ae,ne);else if(ce instanceof Option)oe.walkOption(ce,Ae,ne);else if(ce instanceof RepetitionMandatory)oe.walkAtLeastOne(ce,Ae,ne);else if(ce instanceof RepetitionMandatoryWithSeparator)oe.walkAtLeastOneSep(ce,Ae,ne);else if(ce instanceof RepetitionWithSeparator)oe.walkManySep(ce,Ae,ne);else if(ce instanceof Repetition)oe.walkMany(ce,Ae,ne);else if(ce instanceof Alternation)oe.walkOr(ce,Ae,ne);else throw Error("non exhaustive match")})},K.prototype.walkTerminal=function(J,ne,oe){},K.prototype.walkProdRef=function(J,ne,oe){},K.prototype.walkFlat=function(J,ne,oe){var ce=ne.concat(oe);this.walk(J,ce)},K.prototype.walkOption=function(J,ne,oe){var ce=ne.concat(oe);this.walk(J,ce)},K.prototype.walkAtLeastOne=function(J,ne,oe){var ce=[new Option({definition:J.definition})].concat(ne,oe);this.walk(J,ce)},K.prototype.walkAtLeastOneSep=function(J,ne,oe){var ce=restForRepetitionWithSeparator(J,ne,oe);this.walk(J,ce)},K.prototype.walkMany=function(J,ne,oe){var ce=[new Option({definition:J.definition})].concat(ne,oe);this.walk(J,ce)},K.prototype.walkManySep=function(J,ne,oe){var ce=restForRepetitionWithSeparator(J,ne,oe);this.walk(J,ce)},K.prototype.walkOr=function(J,ne,oe){var ce=this,ue=ne.concat(oe);forEach(J.definition,function(Ae){var pe=new Alternative({definition:[Ae]});ce.walk(pe,ue)})},K}();function restForRepetitionWithSeparator(K,J,ne){var oe=[new Option({definition:[new Terminal({terminalType:K.separator})].concat(K.definition)})],ce=oe.concat(J,ne);return ce}var GAstVisitor=function(){function K(){}return K.prototype.visit=function(J){var ne=J;switch(ne.constructor){case NonTerminal:return this.visitNonTerminal(ne);case Alternative:return this.visitAlternative(ne);case Option:return this.visitOption(ne);case RepetitionMandatory:return this.visitRepetitionMandatory(ne);case RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(ne);case RepetitionWithSeparator:return this.visitRepetitionWithSeparator(ne);case Repetition:return this.visitRepetition(ne);case Alternation:return this.visitAlternation(ne);case Terminal:return this.visitTerminal(ne);case Rule:return this.visitRule(ne);default:throw Error("non exhaustive match")}},K.prototype.visitNonTerminal=function(J){},K.prototype.visitAlternative=function(J){},K.prototype.visitOption=function(J){},K.prototype.visitRepetition=function(J){},K.prototype.visitRepetitionMandatory=function(J){},K.prototype.visitRepetitionMandatoryWithSeparator=function(J){},K.prototype.visitRepetitionWithSeparator=function(J){},K.prototype.visitAlternation=function(J){},K.prototype.visitTerminal=function(J){},K.prototype.visitRule=function(J){},K}(),__extends$a=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}();function isSequenceProd(K){return K instanceof Alternative||K instanceof Option||K instanceof Repetition||K instanceof RepetitionMandatory||K instanceof RepetitionMandatoryWithSeparator||K instanceof RepetitionWithSeparator||K instanceof Terminal||K instanceof Rule}function isOptionalProd(K,J){J===void 0&&(J=[]);var ne=K instanceof Option||K instanceof Repetition||K instanceof RepetitionWithSeparator;return ne?!0:K instanceof Alternation?some(K.definition,function(oe){return isOptionalProd(oe,J)}):K instanceof NonTerminal&&contains$1(J,K)?!1:K instanceof AbstractProduction?(K instanceof NonTerminal&&J.push(K),every(K.definition,function(oe){return isOptionalProd(oe,J)})):!1}function isBranchingProd(K){return K instanceof Alternation}function getProductionDslName(K){if(K instanceof NonTerminal)return"SUBRULE";if(K instanceof Option)return"OPTION";if(K instanceof Alternation)return"OR";if(K instanceof RepetitionMandatory)return"AT_LEAST_ONE";if(K instanceof RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(K instanceof RepetitionWithSeparator)return"MANY_SEP";if(K instanceof Repetition)return"MANY";if(K instanceof Terminal)return"CONSUME";throw Error("non exhaustive match")}var DslMethodsCollectorVisitor=function(K){__extends$a(J,K);function J(){var ne=K!==null&&K.apply(this,arguments)||this;return ne.separator="-",ne.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},ne}return J.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},J.prototype.visitTerminal=function(ne){var oe=ne.terminalType.name+this.separator+"Terminal";has$2(this.dslMethods,oe)||(this.dslMethods[oe]=[]),this.dslMethods[oe].push(ne)},J.prototype.visitNonTerminal=function(ne){var oe=ne.nonTerminalName+this.separator+"Terminal";has$2(this.dslMethods,oe)||(this.dslMethods[oe]=[]),this.dslMethods[oe].push(ne)},J.prototype.visitOption=function(ne){this.dslMethods.option.push(ne)},J.prototype.visitRepetitionWithSeparator=function(ne){this.dslMethods.repetitionWithSeparator.push(ne)},J.prototype.visitRepetitionMandatory=function(ne){this.dslMethods.repetitionMandatory.push(ne)},J.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.dslMethods.repetitionMandatoryWithSeparator.push(ne)},J.prototype.visitRepetition=function(ne){this.dslMethods.repetition.push(ne)},J.prototype.visitAlternation=function(ne){this.dslMethods.alternation.push(ne)},J}(GAstVisitor),collectorVisitor=new DslMethodsCollectorVisitor;function collectMethods(K){collectorVisitor.reset(),K.accept(collectorVisitor);var J=collectorVisitor.dslMethods;return collectorVisitor.reset(),J}function first(K){if(K instanceof NonTerminal)return first(K.referencedRule);if(K instanceof Terminal)return firstForTerminal(K);if(isSequenceProd(K))return firstForSequence(K);if(isBranchingProd(K))return firstForBranching(K);throw Error("non exhaustive match")}function firstForSequence(K){for(var J=[],ne=K.definition,oe=0,ce=ne.length>oe,ue,Ae=!0;ce&&Ae;)ue=ne[oe],Ae=isOptionalProd(ue),J=J.concat(first(ue)),oe=oe+1,ce=ne.length>oe;return uniq(J)}function firstForBranching(K){var J=map$1(K.definition,function(ne){return first(ne)});return uniq(flatten$1(J))}function firstForTerminal(K){return[K.terminalType]}var IN$1="_~IN~_",__extends$9=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),ResyncFollowsWalker=function(K){__extends$9(J,K);function J(ne){var oe=K.call(this)||this;return oe.topProd=ne,oe.follows={},oe}return J.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},J.prototype.walkTerminal=function(ne,oe,ce){},J.prototype.walkProdRef=function(ne,oe,ce){var ue=buildBetweenProdsFollowPrefix(ne.referencedRule,ne.idx)+this.topProd.name,Ae=oe.concat(ce),pe=new Alternative({definition:Ae}),ve=first(pe);this.follows[ue]=ve},J}(RestWalker);function computeAllProdsFollows(K){var J={};return forEach(K,function(ne){var oe=new ResyncFollowsWalker(ne).startWalking();assign(J,oe)}),J}function buildBetweenProdsFollowPrefix(K,J){return K.name+J+IN$1}var defaultParserErrorProvider={buildMismatchTokenMessage:function(K){var J=K.expected,ne=K.actual;K.previous,K.ruleName;var oe=hasTokenLabel(J),ce=oe?"--> "+tokenLabel(J)+" <--":"token of type --> "+J.name+" <--",ue="Expecting "+ce+" but found --> '"+ne.image+"' <--";return ue},buildNotAllInputParsedMessage:function(K){var J=K.firstRedundant;return K.ruleName,"Redundant input, expecting EOF but found: "+J.image},buildNoViableAltMessage:function(K){var J=K.expectedPathsPerAlt,ne=K.actual;K.previous;var oe=K.customUserDescription;K.ruleName;var ce="Expecting: ",ue=first$1(ne).image,Ae=`
but found: '`+ue+"'";if(oe)return ce+oe+Ae;var pe=reduce$1(J,function(ye,xe){return ye.concat(xe)},[]),ve=map$1(pe,function(ye){return"["+map$1(ye,function(xe){return tokenLabel(xe)}).join(", ")+"]"}),me=map$1(ve,function(ye,xe){return"  "+(xe+1)+". "+ye}),ge=`one of these possible Token sequences:
`+me.join(`
`);return ce+ge+Ae},buildEarlyExitMessage:function(K){var J=K.expectedIterationPaths,ne=K.actual,oe=K.customUserDescription;K.ruleName;var ce="Expecting: ",ue=first$1(ne).image,Ae=`
but found: '`+ue+"'";if(oe)return ce+oe+Ae;var pe=map$1(J,function(me){return"["+map$1(me,function(ge){return tokenLabel(ge)}).join(",")+"]"}),ve=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+("<"+pe.join(" ,")+">");return ce+ve+Ae}};Object.freeze(defaultParserErrorProvider);var defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(K,J){var ne="Invalid grammar, reference to a rule which is not defined: ->"+J.nonTerminalName+`<-
inside top level rule: ->`+K.name+"<-";return ne}},defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(K,J){function ne(ge){return ge instanceof Terminal?ge.terminalType.name:ge instanceof NonTerminal?ge.nonTerminalName:""}var oe=K.name,ce=first$1(J),ue=ce.idx,Ae=getProductionDslName(ce),pe=ne(ce),ve=ue>0,me="->"+Ae+(ve?ue:"")+"<- "+(pe?"with argument: ->"+pe+"<-":"")+`
                  appears more than once (`+J.length+" times) in the top level rule: ->"+oe+`<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return me=me.replace(/[ \t]+/g," "),me=me.replace(/\s\s+/g,`
`),me},buildNamespaceConflictError:function(K){var J=`Namespace conflict found in grammar.
`+("The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+K.name+`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return J},buildAlternationPrefixAmbiguityError:function(K){var J=map$1(K.prefixPath,function(ce){return tokenLabel(ce)}).join(", "),ne=K.alternation.idx===0?"":K.alternation.idx,oe="Ambiguous alternatives: <"+K.ambiguityIndices.join(" ,")+`> due to common lookahead prefix
`+("in <OR"+ne+"> inside <"+K.topLevelRule.name+`> Rule,
`)+("<"+J+`> may appears as a prefix path in all these alternatives.
`)+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return oe},buildAlternationAmbiguityError:function(K){var J=map$1(K.prefixPath,function(ce){return tokenLabel(ce)}).join(", "),ne=K.alternation.idx===0?"":K.alternation.idx,oe="Ambiguous Alternatives Detected: <"+K.ambiguityIndices.join(" ,")+"> in <OR"+ne+">"+(" inside <"+K.topLevelRule.name+`> Rule,
`)+("<"+J+`> may appears as a prefix path in all these alternatives.
`);return oe=oe+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,oe},buildEmptyRepetitionError:function(K){var J=getProductionDslName(K.repetition);K.repetition.idx!==0&&(J+=K.repetition.idx);var ne="The repetition <"+J+"> within Rule <"+K.topLevelRule.name+`> can never consume any tokens.
This could lead to an infinite loop.`;return ne},buildTokenNameError:function(K){return"deprecated"},buildEmptyAlternationError:function(K){var J="Ambiguous empty alternative: <"+(K.emptyChoiceIdx+1)+">"+(" in <OR"+K.alternation.idx+"> inside <"+K.topLevelRule.name+`> Rule.
`)+"Only the last alternative may be an empty alternative.";return J},buildTooManyAlternativesError:function(K){var J=`An Alternation cannot have more than 256 alternatives:
`+("<OR"+K.alternation.idx+"> inside <"+K.topLevelRule.name+`> Rule.
 has `+(K.alternation.definition.length+1)+" alternatives.");return J},buildLeftRecursionError:function(K){var J=K.topLevelRule.name,ne=map$1(K.leftRecursionPath,function(ue){return ue.name}),oe=J+" --> "+ne.concat([J]).join(" --> "),ce=`Left Recursion found in grammar.
`+("rule: <"+J+`> can be invoked from itself (directly or indirectly)
`)+(`without consuming any Tokens. The grammar path that causes this is: 
 `+oe+`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.`;return ce},buildInvalidRuleNameError:function(K){return"deprecated"},buildDuplicateRuleNameError:function(K){var J;K.topLevelRule instanceof Rule?J=K.topLevelRule.name:J=K.topLevelRule;var ne="Duplicate definition, rule: ->"+J+"<- is already defined in the grammar: ->"+K.grammarName+"<-";return ne}},__extends$8=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}();function resolveGrammar$1(K,J){var ne=new GastRefResolverVisitor(K,J);return ne.resolveRefs(),ne.errors}var GastRefResolverVisitor=function(K){__extends$8(J,K);function J(ne,oe){var ce=K.call(this)||this;return ce.nameToTopRule=ne,ce.errMsgProvider=oe,ce.errors=[],ce}return J.prototype.resolveRefs=function(){var ne=this;forEach(values(this.nameToTopRule),function(oe){ne.currTopLevel=oe,oe.accept(ne)})},J.prototype.visitNonTerminal=function(ne){var oe=this.nameToTopRule[ne.nonTerminalName];if(oe)ne.referencedRule=oe;else{var ce=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,ne);this.errors.push({message:ce,type:ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:ne.nonTerminalName})}},J}(GAstVisitor),__extends$7=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),AbstractNextPossibleTokensWalker=function(K){__extends$7(J,K);function J(ne,oe){var ce=K.call(this)||this;return ce.topProd=ne,ce.path=oe,ce.possibleTokTypes=[],ce.nextProductionName="",ce.nextProductionOccurrence=0,ce.found=!1,ce.isAtEndOfPath=!1,ce}return J.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},J.prototype.walk=function(ne,oe){oe===void 0&&(oe=[]),this.found||K.prototype.walk.call(this,ne,oe)},J.prototype.walkProdRef=function(ne,oe,ce){if(ne.referencedRule.name===this.nextProductionName&&ne.idx===this.nextProductionOccurrence){var ue=oe.concat(ce);this.updateExpectedNext(),this.walk(ne.referencedRule,ue)}},J.prototype.updateExpectedNext=function(){isEmpty$1(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},J}(RestWalker),NextAfterTokenWalker=function(K){__extends$7(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.path=oe,ce.nextTerminalName="",ce.nextTerminalOccurrence=0,ce.nextTerminalName=ce.path.lastTok.name,ce.nextTerminalOccurrence=ce.path.lastTokOccurrence,ce}return J.prototype.walkTerminal=function(ne,oe,ce){if(this.isAtEndOfPath&&ne.terminalType.name===this.nextTerminalName&&ne.idx===this.nextTerminalOccurrence&&!this.found){var ue=oe.concat(ce),Ae=new Alternative({definition:ue});this.possibleTokTypes=first(Ae),this.found=!0}},J}(AbstractNextPossibleTokensWalker),AbstractNextTerminalAfterProductionWalker=function(K){__extends$7(J,K);function J(ne,oe){var ce=K.call(this)||this;return ce.topRule=ne,ce.occurrence=oe,ce.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},ce}return J.prototype.startWalking=function(){return this.walk(this.topRule),this.result},J}(RestWalker),NextTerminalAfterManyWalker=function(K){__extends$7(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.walkMany=function(ne,oe,ce){if(ne.idx===this.occurrence){var ue=first$1(oe.concat(ce));this.result.isEndOfRule=ue===void 0,ue instanceof Terminal&&(this.result.token=ue.terminalType,this.result.occurrence=ue.idx)}else K.prototype.walkMany.call(this,ne,oe,ce)},J}(AbstractNextTerminalAfterProductionWalker),NextTerminalAfterManySepWalker=function(K){__extends$7(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.walkManySep=function(ne,oe,ce){if(ne.idx===this.occurrence){var ue=first$1(oe.concat(ce));this.result.isEndOfRule=ue===void 0,ue instanceof Terminal&&(this.result.token=ue.terminalType,this.result.occurrence=ue.idx)}else K.prototype.walkManySep.call(this,ne,oe,ce)},J}(AbstractNextTerminalAfterProductionWalker),NextTerminalAfterAtLeastOneWalker=function(K){__extends$7(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.walkAtLeastOne=function(ne,oe,ce){if(ne.idx===this.occurrence){var ue=first$1(oe.concat(ce));this.result.isEndOfRule=ue===void 0,ue instanceof Terminal&&(this.result.token=ue.terminalType,this.result.occurrence=ue.idx)}else K.prototype.walkAtLeastOne.call(this,ne,oe,ce)},J}(AbstractNextTerminalAfterProductionWalker),NextTerminalAfterAtLeastOneSepWalker=function(K){__extends$7(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.walkAtLeastOneSep=function(ne,oe,ce){if(ne.idx===this.occurrence){var ue=first$1(oe.concat(ce));this.result.isEndOfRule=ue===void 0,ue instanceof Terminal&&(this.result.token=ue.terminalType,this.result.occurrence=ue.idx)}else K.prototype.walkAtLeastOneSep.call(this,ne,oe,ce)},J}(AbstractNextTerminalAfterProductionWalker);function possiblePathsFrom(K,J,ne){ne===void 0&&(ne=[]),ne=cloneArr(ne);var oe=[],ce=0;function ue(me){return me.concat(drop$2(K,ce+1))}function Ae(me){var ge=possiblePathsFrom(ue(me),J,ne);return oe.concat(ge)}for(;ne.length<J&&ce<K.length;){var pe=K[ce];if(pe instanceof Alternative)return Ae(pe.definition);if(pe instanceof NonTerminal)return Ae(pe.definition);if(pe instanceof Option)oe=Ae(pe.definition);else if(pe instanceof RepetitionMandatory){var ve=pe.definition.concat([new Repetition({definition:pe.definition})]);return Ae(ve)}else if(pe instanceof RepetitionMandatoryWithSeparator){var ve=[new Alternative({definition:pe.definition}),new Repetition({definition:[new Terminal({terminalType:pe.separator})].concat(pe.definition)})];return Ae(ve)}else if(pe instanceof RepetitionWithSeparator){var ve=pe.definition.concat([new Repetition({definition:[new Terminal({terminalType:pe.separator})].concat(pe.definition)})]);oe=Ae(ve)}else if(pe instanceof Repetition){var ve=pe.definition.concat([new Repetition({definition:pe.definition})]);oe=Ae(ve)}else{if(pe instanceof Alternation)return forEach(pe.definition,function(me){isEmpty$1(me.definition)===!1&&(oe=Ae(me.definition))}),oe;if(pe instanceof Terminal)ne.push(pe.terminalType);else throw Error("non exhaustive match")}ce++}return oe.push({partialPath:ne,suffixDef:drop$2(K,ce)}),oe}function nextPossibleTokensAfter(K,J,ne,oe){var ce="EXIT_NONE_TERMINAL",ue=[ce],Ae="EXIT_ALTERNATIVE",pe=!1,ve=J.length,me=ve-oe-1,ge=[],ye=[];for(ye.push({idx:-1,def:K,ruleStack:[],occurrenceStack:[]});!isEmpty$1(ye);){var xe=ye.pop();if(xe===Ae){pe&&last(ye).idx<=me&&ye.pop();continue}var _e=xe.def,$e=xe.idx,Ie=xe.ruleStack,Fe=xe.occurrenceStack;if(!isEmpty$1(_e)){var ke=_e[0];if(ke===ce){var je={idx:$e,def:drop$2(_e),ruleStack:dropRight(Ie),occurrenceStack:dropRight(Fe)};ye.push(je)}else if(ke instanceof Terminal)if($e<ve-1){var We=$e+1,ze=J[We];if(ne(ze,ke.terminalType)){var je={idx:We,def:drop$2(_e),ruleStack:Ie,occurrenceStack:Fe};ye.push(je)}}else if($e===ve-1)ge.push({nextTokenType:ke.terminalType,nextTokenOccurrence:ke.idx,ruleStack:Ie,occurrenceStack:Fe}),pe=!0;else throw Error("non exhaustive match");else if(ke instanceof NonTerminal){var Xe=cloneArr(Ie);Xe.push(ke.nonTerminalName);var Je=cloneArr(Fe);Je.push(ke.idx);var je={idx:$e,def:ke.definition.concat(ue,drop$2(_e)),ruleStack:Xe,occurrenceStack:Je};ye.push(je)}else if(ke instanceof Option){var nt={idx:$e,def:drop$2(_e),ruleStack:Ie,occurrenceStack:Fe};ye.push(nt),ye.push(Ae);var et={idx:$e,def:ke.definition.concat(drop$2(_e)),ruleStack:Ie,occurrenceStack:Fe};ye.push(et)}else if(ke instanceof RepetitionMandatory){var tt=new Repetition({definition:ke.definition,idx:ke.idx}),st=ke.definition.concat([tt],drop$2(_e)),je={idx:$e,def:st,ruleStack:Ie,occurrenceStack:Fe};ye.push(je)}else if(ke instanceof RepetitionMandatoryWithSeparator){var qe=new Terminal({terminalType:ke.separator}),tt=new Repetition({definition:[qe].concat(ke.definition),idx:ke.idx}),st=ke.definition.concat([tt],drop$2(_e)),je={idx:$e,def:st,ruleStack:Ie,occurrenceStack:Fe};ye.push(je)}else if(ke instanceof RepetitionWithSeparator){var nt={idx:$e,def:drop$2(_e),ruleStack:Ie,occurrenceStack:Fe};ye.push(nt),ye.push(Ae);var qe=new Terminal({terminalType:ke.separator}),Se=new Repetition({definition:[qe].concat(ke.definition),idx:ke.idx}),st=ke.definition.concat([Se],drop$2(_e)),et={idx:$e,def:st,ruleStack:Ie,occurrenceStack:Fe};ye.push(et)}else if(ke instanceof Repetition){var nt={idx:$e,def:drop$2(_e),ruleStack:Ie,occurrenceStack:Fe};ye.push(nt),ye.push(Ae);var Se=new Repetition({definition:ke.definition,idx:ke.idx}),st=ke.definition.concat([Se],drop$2(_e)),et={idx:$e,def:st,ruleStack:Ie,occurrenceStack:Fe};ye.push(et)}else if(ke instanceof Alternation)for(var Re=ke.definition.length-1;Re>=0;Re--){var Be=ke.definition[Re],Ne={idx:$e,def:Be.definition.concat(drop$2(_e)),ruleStack:Ie,occurrenceStack:Fe};ye.push(Ne),ye.push(Ae)}else if(ke instanceof Alternative)ye.push({idx:$e,def:ke.definition.concat(drop$2(_e)),ruleStack:Ie,occurrenceStack:Fe});else if(ke instanceof Rule)ye.push(expandTopLevelRule(ke,$e,Ie,Fe));else throw Error("non exhaustive match")}}return ge}function expandTopLevelRule(K,J,ne,oe){var ce=cloneArr(ne);ce.push(K.name);var ue=cloneArr(oe);return ue.push(1),{idx:J,def:K.definition,ruleStack:ce,occurrenceStack:ue}}var __extends$6=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),PROD_TYPE;(function(K){K[K.OPTION=0]="OPTION",K[K.REPETITION=1]="REPETITION",K[K.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",K[K.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",K[K.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",K[K.ALTERNATION=5]="ALTERNATION"})(PROD_TYPE||(PROD_TYPE={}));function getProdType(K){if(K instanceof Option)return PROD_TYPE.OPTION;if(K instanceof Repetition)return PROD_TYPE.REPETITION;if(K instanceof RepetitionMandatory)return PROD_TYPE.REPETITION_MANDATORY;if(K instanceof RepetitionMandatoryWithSeparator)return PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR;if(K instanceof RepetitionWithSeparator)return PROD_TYPE.REPETITION_WITH_SEPARATOR;if(K instanceof Alternation)return PROD_TYPE.ALTERNATION;throw Error("non exhaustive match")}function buildLookaheadFuncForOr(K,J,ne,oe,ce,ue){var Ae=getLookaheadPathsForOr(K,J,ne),pe=areTokenCategoriesNotUsed(Ae)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher;return ue(Ae,oe,pe,ce)}function buildLookaheadFuncForOptionalProd(K,J,ne,oe,ce,ue){var Ae=getLookaheadPathsForOptionalProd(K,J,ce,ne),pe=areTokenCategoriesNotUsed(Ae)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher;return ue(Ae[0],pe,oe)}function buildAlternativesLookAheadFunc(K,J,ne,oe){var ce=K.length,ue=every(K,function(ve){return every(ve,function(me){return me.length===1})});if(J)return function(ve){for(var me=map$1(ve,function(We){return We.GATE}),ge=0;ge<ce;ge++){var ye=K[ge],xe=ye.length,_e=me[ge];if(!(_e!==void 0&&_e.call(this)===!1))e:for(var $e=0;$e<xe;$e++){for(var Ie=ye[$e],Fe=Ie.length,ke=0;ke<Fe;ke++){var je=this.LA(ke+1);if(ne(je,Ie[ke])===!1)continue e}return ge}}};if(ue&&!oe){var Ae=map$1(K,function(ve){return flatten$1(ve)}),pe=reduce$1(Ae,function(ve,me,ge){return forEach(me,function(ye){has$2(ve,ye.tokenTypeIdx)||(ve[ye.tokenTypeIdx]=ge),forEach(ye.categoryMatches,function(xe){has$2(ve,xe)||(ve[xe]=ge)})}),ve},[]);return function(){var ve=this.LA(1);return pe[ve.tokenTypeIdx]}}else return function(){for(var ve=0;ve<ce;ve++){var me=K[ve],ge=me.length;e:for(var ye=0;ye<ge;ye++){for(var xe=me[ye],_e=xe.length,$e=0;$e<_e;$e++){var Ie=this.LA($e+1);if(ne(Ie,xe[$e])===!1)continue e}return ve}}}}function buildSingleAlternativeLookaheadFunction(K,J,ne){var oe=every(K,function(me){return me.length===1}),ce=K.length;if(oe&&!ne){var ue=flatten$1(K);if(ue.length===1&&isEmpty$1(ue[0].categoryMatches)){var Ae=ue[0],pe=Ae.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===pe}}else{var ve=reduce$1(ue,function(me,ge,ye){return me[ge.tokenTypeIdx]=!0,forEach(ge.categoryMatches,function(xe){me[xe]=!0}),me},[]);return function(){var me=this.LA(1);return ve[me.tokenTypeIdx]===!0}}}else return function(){e:for(var me=0;me<ce;me++){for(var ge=K[me],ye=ge.length,xe=0;xe<ye;xe++){var _e=this.LA(xe+1);if(J(_e,ge[xe])===!1)continue e}return!0}return!1}}var RestDefinitionFinderWalker=function(K){__extends$6(J,K);function J(ne,oe,ce){var ue=K.call(this)||this;return ue.topProd=ne,ue.targetOccurrence=oe,ue.targetProdType=ce,ue}return J.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},J.prototype.checkIsTarget=function(ne,oe,ce,ue){return ne.idx===this.targetOccurrence&&this.targetProdType===oe?(this.restDef=ce.concat(ue),!0):!1},J.prototype.walkOption=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.OPTION,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J.prototype.walkAtLeastOne=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.REPETITION_MANDATORY,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J.prototype.walkAtLeastOneSep=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J.prototype.walkMany=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.REPETITION,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J.prototype.walkManySep=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.REPETITION_WITH_SEPARATOR,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J}(RestWalker),InsideDefinitionFinderVisitor=function(K){__extends$6(J,K);function J(ne,oe,ce){var ue=K.call(this)||this;return ue.targetOccurrence=ne,ue.targetProdType=oe,ue.targetRef=ce,ue.result=[],ue}return J.prototype.checkIsTarget=function(ne,oe){ne.idx===this.targetOccurrence&&this.targetProdType===oe&&(this.targetRef===void 0||ne===this.targetRef)&&(this.result=ne.definition)},J.prototype.visitOption=function(ne){this.checkIsTarget(ne,PROD_TYPE.OPTION)},J.prototype.visitRepetition=function(ne){this.checkIsTarget(ne,PROD_TYPE.REPETITION)},J.prototype.visitRepetitionMandatory=function(ne){this.checkIsTarget(ne,PROD_TYPE.REPETITION_MANDATORY)},J.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.checkIsTarget(ne,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR)},J.prototype.visitRepetitionWithSeparator=function(ne){this.checkIsTarget(ne,PROD_TYPE.REPETITION_WITH_SEPARATOR)},J.prototype.visitAlternation=function(ne){this.checkIsTarget(ne,PROD_TYPE.ALTERNATION)},J}(GAstVisitor);function initializeArrayOfArrays(K){for(var J=new Array(K),ne=0;ne<K;ne++)J[ne]=[];return J}function pathToHashKeys(K){for(var J=[""],ne=0;ne<K.length;ne++){for(var oe=K[ne],ce=[],ue=0;ue<J.length;ue++){var Ae=J[ue];ce.push(Ae+"_"+oe.tokenTypeIdx);for(var pe=0;pe<oe.categoryMatches.length;pe++){var ve="_"+oe.categoryMatches[pe];ce.push(Ae+ve)}}J=ce}return J}function isUniquePrefixHash(K,J,ne){for(var oe=0;oe<K.length;oe++)if(oe!==ne)for(var ce=K[oe],ue=0;ue<J.length;ue++){var Ae=J[ue];if(ce[Ae]===!0)return!1}return!0}function lookAheadSequenceFromAlternatives(K,J){for(var ne=map$1(K,function(ge){return possiblePathsFrom([ge],1)}),oe=initializeArrayOfArrays(ne.length),ce=map$1(ne,function(ge){var ye={};return forEach(ge,function(xe){var _e=pathToHashKeys(xe.partialPath);forEach(_e,function($e){ye[$e]=!0})}),ye}),ue=ne,Ae=1;Ae<=J;Ae++){var pe=ue;ue=initializeArrayOfArrays(pe.length);for(var ve=function(ge){for(var ye=pe[ge],xe=0;xe<ye.length;xe++){var _e=ye[xe].partialPath,$e=ye[xe].suffixDef,Ie=pathToHashKeys(_e),Fe=isUniquePrefixHash(ce,Ie,ge);if(Fe||isEmpty$1($e)||_e.length===J){var ke=oe[ge];if(containsPath(ke,_e)===!1){ke.push(_e);for(var je=0;je<Ie.length;je++){var We=Ie[je];ce[ge][We]=!0}}}else{var ze=possiblePathsFrom($e,Ae+1,_e);ue[ge]=ue[ge].concat(ze),forEach(ze,function(Xe){var Je=pathToHashKeys(Xe.partialPath);forEach(Je,function(nt){ce[ge][nt]=!0})})}}},me=0;me<pe.length;me++)ve(me)}return oe}function getLookaheadPathsForOr(K,J,ne,oe){var ce=new InsideDefinitionFinderVisitor(K,PROD_TYPE.ALTERNATION,oe);return J.accept(ce),lookAheadSequenceFromAlternatives(ce.result,ne)}function getLookaheadPathsForOptionalProd(K,J,ne,oe){var ce=new InsideDefinitionFinderVisitor(K,ne);J.accept(ce);var ue=ce.result,Ae=new RestDefinitionFinderWalker(J,K,ne),pe=Ae.startWalking(),ve=new Alternative({definition:ue}),me=new Alternative({definition:pe});return lookAheadSequenceFromAlternatives([ve,me],oe)}function containsPath(K,J){e:for(var ne=0;ne<K.length;ne++){var oe=K[ne];if(oe.length===J.length){for(var ce=0;ce<oe.length;ce++){var ue=J[ce],Ae=oe[ce],pe=ue===Ae||Ae.categoryMatchesMap[ue.tokenTypeIdx]!==void 0;if(pe===!1)continue e}return!0}}return!1}function isStrictPrefixOfPath(K,J){return K.length<J.length&&every(K,function(ne,oe){var ce=J[oe];return ne===ce||ce.categoryMatchesMap[ne.tokenTypeIdx]})}function areTokenCategoriesNotUsed(K){return every(K,function(J){return every(J,function(ne){return every(ne,function(oe){return isEmpty$1(oe.categoryMatches)})})})}var __extends$5=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}();function validateGrammar$1(K,J,ne,oe,ce){var ue=map$1(K,function(_e){return validateDuplicateProductions(_e,oe)}),Ae=map$1(K,function(_e){return validateNoLeftRecursion(_e,_e,oe)}),pe=[],ve=[],me=[];every(Ae,isEmpty$1)&&(pe=map$1(K,function(_e){return validateEmptyOrAlternative(_e,oe)}),ve=map$1(K,function(_e){return validateAmbiguousAlternationAlternatives(_e,J,oe)}),me=validateSomeNonEmptyLookaheadPath(K,J,oe));var ge=checkTerminalAndNoneTerminalsNameSpace(K,ne,oe),ye=map$1(K,function(_e){return validateTooManyAlts(_e,oe)}),xe=map$1(K,function(_e){return validateRuleDoesNotAlreadyExist(_e,K,ce,oe)});return flatten$1(ue.concat(me,Ae,pe,ve,ge,ye,xe))}function validateDuplicateProductions(K,J){var ne=new OccurrenceValidationCollector;K.accept(ne);var oe=ne.allProductions,ce=groupBy(oe,identifyProductionForDuplicates),ue=pick(ce,function(pe){return pe.length>1}),Ae=map$1(values(ue),function(pe){var ve=first$1(pe),me=J.buildDuplicateFoundError(K,pe),ge=getProductionDslName(ve),ye={message:me,type:ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:K.name,dslName:ge,occurrence:ve.idx},xe=getExtraProductionArgument(ve);return xe&&(ye.parameter=xe),ye});return Ae}function identifyProductionForDuplicates(K){return getProductionDslName(K)+"_#_"+K.idx+"_#_"+getExtraProductionArgument(K)}function getExtraProductionArgument(K){return K instanceof Terminal?K.terminalType.name:K instanceof NonTerminal?K.nonTerminalName:""}var OccurrenceValidationCollector=function(K){__extends$5(J,K);function J(){var ne=K!==null&&K.apply(this,arguments)||this;return ne.allProductions=[],ne}return J.prototype.visitNonTerminal=function(ne){this.allProductions.push(ne)},J.prototype.visitOption=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionWithSeparator=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionMandatory=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetition=function(ne){this.allProductions.push(ne)},J.prototype.visitAlternation=function(ne){this.allProductions.push(ne)},J.prototype.visitTerminal=function(ne){this.allProductions.push(ne)},J}(GAstVisitor);function validateRuleDoesNotAlreadyExist(K,J,ne,oe){var ce=[],ue=reduce$1(J,function(pe,ve){return ve.name===K.name?pe+1:pe},0);if(ue>1){var Ae=oe.buildDuplicateRuleNameError({topLevelRule:K,grammarName:ne});ce.push({message:Ae,type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:K.name})}return ce}function validateRuleIsOverridden(K,J,ne){var oe=[],ce;return contains$1(J,K)||(ce="Invalid rule override, rule: ->"+K+"<- cannot be overridden in the grammar: ->"+ne+"<-as it is not defined in any of the super grammars ",oe.push({message:ce,type:ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:K})),oe}function validateNoLeftRecursion(K,J,ne,oe){oe===void 0&&(oe=[]);var ce=[],ue=getFirstNoneTerminal(J.definition);if(isEmpty$1(ue))return[];var Ae=K.name,pe=contains$1(ue,K);pe&&ce.push({message:ne.buildLeftRecursionError({topLevelRule:K,leftRecursionPath:oe}),type:ParserDefinitionErrorType.LEFT_RECURSION,ruleName:Ae});var ve=difference(ue,oe.concat([K])),me=map$1(ve,function(ge){var ye=cloneArr(oe);return ye.push(ge),validateNoLeftRecursion(K,ge,ne,ye)});return ce.concat(flatten$1(me))}function getFirstNoneTerminal(K){var J=[];if(isEmpty$1(K))return J;var ne=first$1(K);if(ne instanceof NonTerminal)J.push(ne.referencedRule);else if(ne instanceof Alternative||ne instanceof Option||ne instanceof RepetitionMandatory||ne instanceof RepetitionMandatoryWithSeparator||ne instanceof RepetitionWithSeparator||ne instanceof Repetition)J=J.concat(getFirstNoneTerminal(ne.definition));else if(ne instanceof Alternation)J=flatten$1(map$1(ne.definition,function(Ae){return getFirstNoneTerminal(Ae.definition)}));else if(!(ne instanceof Terminal))throw Error("non exhaustive match");var oe=isOptionalProd(ne),ce=K.length>1;if(oe&&ce){var ue=drop$2(K);return J.concat(getFirstNoneTerminal(ue))}else return J}var OrCollector=function(K){__extends$5(J,K);function J(){var ne=K!==null&&K.apply(this,arguments)||this;return ne.alternations=[],ne}return J.prototype.visitAlternation=function(ne){this.alternations.push(ne)},J}(GAstVisitor);function validateEmptyOrAlternative(K,J){var ne=new OrCollector;K.accept(ne);var oe=ne.alternations,ce=reduce$1(oe,function(ue,Ae){var pe=dropRight(Ae.definition),ve=map$1(pe,function(me,ge){var ye=nextPossibleTokensAfter([me],[],null,1);return isEmpty$1(ye)?{message:J.buildEmptyAlternationError({topLevelRule:K,alternation:Ae,emptyChoiceIdx:ge}),type:ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:K.name,occurrence:Ae.idx,alternative:ge+1}:null});return ue.concat(compact(ve))},[]);return ce}function validateAmbiguousAlternationAlternatives(K,J,ne){var oe=new OrCollector;K.accept(oe);var ce=oe.alternations;ce=reject(ce,function(Ae){return Ae.ignoreAmbiguities===!0});var ue=reduce$1(ce,function(Ae,pe){var ve=pe.idx,me=pe.maxLookahead||J,ge=getLookaheadPathsForOr(ve,K,me,pe),ye=checkAlternativesAmbiguities(ge,pe,K,ne),xe=checkPrefixAlternativesAmbiguities(ge,pe,K,ne);return Ae.concat(ye,xe)},[]);return ue}var RepetionCollector=function(K){__extends$5(J,K);function J(){var ne=K!==null&&K.apply(this,arguments)||this;return ne.allProductions=[],ne}return J.prototype.visitRepetitionWithSeparator=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionMandatory=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetition=function(ne){this.allProductions.push(ne)},J}(GAstVisitor);function validateTooManyAlts(K,J){var ne=new OrCollector;K.accept(ne);var oe=ne.alternations,ce=reduce$1(oe,function(ue,Ae){return Ae.definition.length>255&&ue.push({message:J.buildTooManyAlternativesError({topLevelRule:K,alternation:Ae}),type:ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:K.name,occurrence:Ae.idx}),ue},[]);return ce}function validateSomeNonEmptyLookaheadPath(K,J,ne){var oe=[];return forEach(K,function(ce){var ue=new RepetionCollector;ce.accept(ue);var Ae=ue.allProductions;forEach(Ae,function(pe){var ve=getProdType(pe),me=pe.maxLookahead||J,ge=pe.idx,ye=getLookaheadPathsForOptionalProd(ge,ce,ve,me),xe=ye[0];if(isEmpty$1(flatten$1(xe))){var _e=ne.buildEmptyRepetitionError({topLevelRule:ce,repetition:pe});oe.push({message:_e,type:ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:ce.name})}})}),oe}function checkAlternativesAmbiguities(K,J,ne,oe){var ce=[],ue=reduce$1(K,function(pe,ve,me){return J.definition[me].ignoreAmbiguities===!0||forEach(ve,function(ge){var ye=[me];forEach(K,function(xe,_e){me!==_e&&containsPath(xe,ge)&&J.definition[_e].ignoreAmbiguities!==!0&&ye.push(_e)}),ye.length>1&&!containsPath(ce,ge)&&(ce.push(ge),pe.push({alts:ye,path:ge}))}),pe},[]),Ae=map$1(ue,function(pe){var ve=map$1(pe.alts,function(ge){return ge+1}),me=oe.buildAlternationAmbiguityError({topLevelRule:ne,alternation:J,ambiguityIndices:ve,prefixPath:pe.path});return{message:me,type:ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:ne.name,occurrence:J.idx,alternatives:[pe.alts]}});return Ae}function checkPrefixAlternativesAmbiguities(K,J,ne,oe){var ce=[],ue=reduce$1(K,function(Ae,pe,ve){var me=map$1(pe,function(ge){return{idx:ve,path:ge}});return Ae.concat(me)},[]);return forEach(ue,function(Ae){var pe=J.definition[Ae.idx];if(pe.ignoreAmbiguities!==!0){var ve=Ae.idx,me=Ae.path,ge=findAll(ue,function(xe){return J.definition[xe.idx].ignoreAmbiguities!==!0&&xe.idx<ve&&isStrictPrefixOfPath(xe.path,me)}),ye=map$1(ge,function(xe){var _e=[xe.idx+1,ve+1],$e=J.idx===0?"":J.idx,Ie=oe.buildAlternationPrefixAmbiguityError({topLevelRule:ne,alternation:J,ambiguityIndices:_e,prefixPath:xe.path});return{message:Ie,type:ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:ne.name,occurrence:$e,alternatives:_e}});ce=ce.concat(ye)}}),ce}function checkTerminalAndNoneTerminalsNameSpace(K,J,ne){var oe=[],ce=map$1(J,function(ue){return ue.name});return forEach(K,function(ue){var Ae=ue.name;if(contains$1(ce,Ae)){var pe=ne.buildNamespaceConflictError(ue);oe.push({message:pe,type:ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:Ae})}}),oe}function resolveGrammar(K){K=defaults$1(K,{errMsgProvider:defaultGrammarResolverErrorProvider});var J={};return forEach(K.rules,function(ne){J[ne.name]=ne}),resolveGrammar$1(J,K.errMsgProvider)}function validateGrammar(K){return K=defaults$1(K,{errMsgProvider:defaultGrammarValidatorErrorProvider}),validateGrammar$1(K.rules,K.maxLookahead,K.tokenTypes,K.errMsgProvider,K.grammarName)}function assignOccurrenceIndices(K){forEach(K.rules,function(J){var ne=new DslMethodsCollectorVisitor;J.accept(ne),forEach(ne.dslMethods,function(oe){forEach(oe,function(ce,ue){ce.idx=ue+1})})})}var __extends$4=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),MISMATCHED_TOKEN_EXCEPTION="MismatchedTokenException",NO_VIABLE_ALT_EXCEPTION="NoViableAltException",EARLY_EXIT_EXCEPTION="EarlyExitException",NOT_ALL_INPUT_PARSED_EXCEPTION="NotAllInputParsedException",RECOGNITION_EXCEPTION_NAMES=[MISMATCHED_TOKEN_EXCEPTION,NO_VIABLE_ALT_EXCEPTION,EARLY_EXIT_EXCEPTION,NOT_ALL_INPUT_PARSED_EXCEPTION];Object.freeze(RECOGNITION_EXCEPTION_NAMES);function isRecognitionException(K){return contains$1(RECOGNITION_EXCEPTION_NAMES,K.name)}var RecognitionException=function(K){__extends$4(J,K);function J(ne,oe){var ce=this.constructor,ue=K.call(this,ne)||this;return ue.token=oe,ue.resyncedTokens=[],Object.setPrototypeOf(ue,ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(ue,ue.constructor),ue}return J}(Error),MismatchedTokenException=function(K){__extends$4(J,K);function J(ne,oe,ce){var ue=K.call(this,ne,oe)||this;return ue.previousToken=ce,ue.name=MISMATCHED_TOKEN_EXCEPTION,ue}return J}(RecognitionException),NoViableAltException=function(K){__extends$4(J,K);function J(ne,oe,ce){var ue=K.call(this,ne,oe)||this;return ue.previousToken=ce,ue.name=NO_VIABLE_ALT_EXCEPTION,ue}return J}(RecognitionException),NotAllInputParsedException$1=function(K){__extends$4(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.name=NOT_ALL_INPUT_PARSED_EXCEPTION,ce}return J}(RecognitionException),EarlyExitException=function(K){__extends$4(J,K);function J(ne,oe,ce){var ue=K.call(this,ne,oe)||this;return ue.previousToken=ce,ue.name=EARLY_EXIT_EXCEPTION,ue}return J}(RecognitionException),EOF_FOLLOW_KEY={},IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";function InRuleRecoveryException(K){this.name=IN_RULE_RECOVERY_EXCEPTION,this.message=K}InRuleRecoveryException.prototype=Error.prototype;var Recoverable=function(){function K(){}return K.prototype.initRecoverable=function(J){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=has$2(J,"recoveryEnabled")?J.recoveryEnabled:DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=attemptInRepetitionRecovery)},K.prototype.getTokenToInsert=function(J){var ne=createTokenInstance(J,"",NaN,NaN,NaN,NaN,NaN,NaN);return ne.isInsertedInRecovery=!0,ne},K.prototype.canTokenTypeBeInsertedInRecovery=function(J){return!0},K.prototype.tryInRepetitionRecovery=function(J,ne,oe,ce){for(var ue=this,Ae=this.findReSyncTokenType(),pe=this.exportLexerState(),ve=[],me=!1,ge=this.LA(1),ye=this.LA(1),xe=function(){var _e=ue.LA(0),$e=ue.errorMessageProvider.buildMismatchTokenMessage({expected:ce,actual:ge,previous:_e,ruleName:ue.getCurrRuleFullName()}),Ie=new MismatchedTokenException($e,ge,ue.LA(0));Ie.resyncedTokens=dropRight(ve),ue.SAVE_ERROR(Ie)};!me;)if(this.tokenMatcher(ye,ce)){xe();return}else if(oe.call(this)){xe(),J.apply(this,ne);return}else this.tokenMatcher(ye,Ae)?me=!0:(ye=this.SKIP_TOKEN(),this.addToResyncTokens(ye,ve));this.importLexerState(pe)},K.prototype.shouldInRepetitionRecoveryBeTried=function(J,ne,oe){return!(oe===!1||J===void 0||ne===void 0||this.tokenMatcher(this.LA(1),J)||this.isBackTracking()||this.canPerformInRuleRecovery(J,this.getFollowsForInRuleRecovery(J,ne)))},K.prototype.getFollowsForInRuleRecovery=function(J,ne){var oe=this.getCurrentGrammarPath(J,ne),ce=this.getNextPossibleTokenTypes(oe);return ce},K.prototype.tryInRuleRecovery=function(J,ne){if(this.canRecoverWithSingleTokenInsertion(J,ne)){var oe=this.getTokenToInsert(J);return oe}if(this.canRecoverWithSingleTokenDeletion(J)){var ce=this.SKIP_TOKEN();return this.consumeToken(),ce}throw new InRuleRecoveryException("sad sad panda")},K.prototype.canPerformInRuleRecovery=function(J,ne){return this.canRecoverWithSingleTokenInsertion(J,ne)||this.canRecoverWithSingleTokenDeletion(J)},K.prototype.canRecoverWithSingleTokenInsertion=function(J,ne){var oe=this;if(!this.canTokenTypeBeInsertedInRecovery(J)||isEmpty$1(ne))return!1;var ce=this.LA(1),ue=find$3(ne,function(Ae){return oe.tokenMatcher(ce,Ae)})!==void 0;return ue},K.prototype.canRecoverWithSingleTokenDeletion=function(J){var ne=this.tokenMatcher(this.LA(2),J);return ne},K.prototype.isInCurrentRuleReSyncSet=function(J){var ne=this.getCurrFollowKey(),oe=this.getFollowSetFromFollowKey(ne);return contains$1(oe,J)},K.prototype.findReSyncTokenType=function(){for(var J=this.flattenFollowSet(),ne=this.LA(1),oe=2;;){var ce=ne.tokenType;if(contains$1(J,ce))return ce;ne=this.LA(oe),oe++}},K.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return EOF_FOLLOW_KEY;var J=this.getLastExplicitRuleShortName(),ne=this.getLastExplicitRuleOccurrenceIndex(),oe=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(J),idxInCallingRule:ne,inRule:this.shortRuleNameToFullName(oe)}},K.prototype.buildFullFollowKeyStack=function(){var J=this,ne=this.RULE_STACK,oe=this.RULE_OCCURRENCE_STACK;return map$1(ne,function(ce,ue){return ue===0?EOF_FOLLOW_KEY:{ruleName:J.shortRuleNameToFullName(ce),idxInCallingRule:oe[ue],inRule:J.shortRuleNameToFullName(ne[ue-1])}})},K.prototype.flattenFollowSet=function(){var J=this,ne=map$1(this.buildFullFollowKeyStack(),function(oe){return J.getFollowSetFromFollowKey(oe)});return flatten$1(ne)},K.prototype.getFollowSetFromFollowKey=function(J){if(J===EOF_FOLLOW_KEY)return[EOF$1];var ne=J.ruleName+J.idxInCallingRule+IN$1+J.inRule;return this.resyncFollows[ne]},K.prototype.addToResyncTokens=function(J,ne){return this.tokenMatcher(J,EOF$1)||ne.push(J),ne},K.prototype.reSyncTo=function(J){for(var ne=[],oe=this.LA(1);this.tokenMatcher(oe,J)===!1;)oe=this.SKIP_TOKEN(),this.addToResyncTokens(oe,ne);return dropRight(ne)},K.prototype.attemptInRepetitionRecovery=function(J,ne,oe,ce,ue,Ae,pe){},K.prototype.getCurrentGrammarPath=function(J,ne){var oe=this.getHumanReadableRuleStack(),ce=cloneArr(this.RULE_OCCURRENCE_STACK),ue={ruleStack:oe,occurrenceStack:ce,lastTok:J,lastTokOccurrence:ne};return ue},K.prototype.getHumanReadableRuleStack=function(){var J=this;return map$1(this.RULE_STACK,function(ne){return J.shortRuleNameToFullName(ne)})},K}();function attemptInRepetitionRecovery(K,J,ne,oe,ce,ue,Ae){var pe=this.getKeyForAutomaticLookahead(oe,ce),ve=this.firstAfterRepMap[pe];if(ve===void 0){var me=this.getCurrRuleFullName(),ge=this.getGAstProductions()[me],ye=new ue(ge,ce);ve=ye.startWalking(),this.firstAfterRepMap[pe]=ve}var xe=ve.token,_e=ve.occurrence,$e=ve.isEndOfRule;this.RULE_STACK.length===1&&$e&&xe===void 0&&(xe=EOF$1,_e=1),this.shouldInRepetitionRecoveryBeTried(xe,_e,Ae)&&this.tryInRepetitionRecovery(K,J,ne,xe)}var BITS_FOR_METHOD_TYPE=4,BITS_FOR_OCCURRENCE_IDX=8,OR_IDX=1<<BITS_FOR_OCCURRENCE_IDX,OPTION_IDX=2<<BITS_FOR_OCCURRENCE_IDX,MANY_IDX=3<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_IDX=4<<BITS_FOR_OCCURRENCE_IDX,MANY_SEP_IDX=5<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_SEP_IDX=6<<BITS_FOR_OCCURRENCE_IDX;function getKeyForAutomaticLookahead(K,J,ne){return ne|J|K}var LooksAhead=function(){function K(){}return K.prototype.initLooksAhead=function(J){this.dynamicTokensEnabled=has$2(J,"dynamicTokensEnabled")?J.dynamicTokensEnabled:DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=has$2(J,"maxLookahead")?J.maxLookahead:DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=isES2015MapSupported()?new Map:[],isES2015MapSupported()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},K.prototype.preComputeLookaheadFunctions=function(J){var ne=this;forEach(J,function(oe){ne.TRACE_INIT(oe.name+" Rule Lookahead",function(){var ce=collectMethods(oe),ue=ce.alternation,Ae=ce.repetition,pe=ce.option,ve=ce.repetitionMandatory,me=ce.repetitionMandatoryWithSeparator,ge=ce.repetitionWithSeparator;forEach(ue,function(ye){var xe=ye.idx===0?"":ye.idx;ne.TRACE_INIT(""+getProductionDslName(ye)+xe,function(){var _e=buildLookaheadFuncForOr(ye.idx,oe,ye.maxLookahead||ne.maxLookahead,ye.hasPredicates,ne.dynamicTokensEnabled,ne.lookAheadBuilderForAlternatives),$e=getKeyForAutomaticLookahead(ne.fullRuleNameToShort[oe.name],OR_IDX,ye.idx);ne.setLaFuncCache($e,_e)})}),forEach(Ae,function(ye){ne.computeLookaheadFunc(oe,ye.idx,MANY_IDX,PROD_TYPE.REPETITION,ye.maxLookahead,getProductionDslName(ye))}),forEach(pe,function(ye){ne.computeLookaheadFunc(oe,ye.idx,OPTION_IDX,PROD_TYPE.OPTION,ye.maxLookahead,getProductionDslName(ye))}),forEach(ve,function(ye){ne.computeLookaheadFunc(oe,ye.idx,AT_LEAST_ONE_IDX,PROD_TYPE.REPETITION_MANDATORY,ye.maxLookahead,getProductionDslName(ye))}),forEach(me,function(ye){ne.computeLookaheadFunc(oe,ye.idx,AT_LEAST_ONE_SEP_IDX,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,ye.maxLookahead,getProductionDslName(ye))}),forEach(ge,function(ye){ne.computeLookaheadFunc(oe,ye.idx,MANY_SEP_IDX,PROD_TYPE.REPETITION_WITH_SEPARATOR,ye.maxLookahead,getProductionDslName(ye))})})})},K.prototype.computeLookaheadFunc=function(J,ne,oe,ce,ue,Ae){var pe=this;this.TRACE_INIT(""+Ae+(ne===0?"":ne),function(){var ve=buildLookaheadFuncForOptionalProd(ne,J,ue||pe.maxLookahead,pe.dynamicTokensEnabled,ce,pe.lookAheadBuilderForOptional),me=getKeyForAutomaticLookahead(pe.fullRuleNameToShort[J.name],oe,ne);pe.setLaFuncCache(me,ve)})},K.prototype.lookAheadBuilderForOptional=function(J,ne,oe){return buildSingleAlternativeLookaheadFunction(J,ne,oe)},K.prototype.lookAheadBuilderForAlternatives=function(J,ne,oe,ce){return buildAlternativesLookAheadFunc(J,ne,oe,ce)},K.prototype.getKeyForAutomaticLookahead=function(J,ne){var oe=this.getLastExplicitRuleShortName();return getKeyForAutomaticLookahead(oe,J,ne)},K.prototype.getLaFuncFromCache=function(J){},K.prototype.getLaFuncFromMap=function(J){return this.lookAheadFuncsCache.get(J)},K.prototype.getLaFuncFromObj=function(J){return this.lookAheadFuncsCache[J]},K.prototype.setLaFuncCache=function(J,ne){},K.prototype.setLaFuncCacheUsingMap=function(J,ne){this.lookAheadFuncsCache.set(J,ne)},K.prototype.setLaFuncUsingObj=function(J,ne){this.lookAheadFuncsCache[J]=ne},K}();function setNodeLocationOnlyOffset(K,J){isNaN(K.startOffset)===!0?(K.startOffset=J.startOffset,K.endOffset=J.endOffset):K.endOffset<J.endOffset&&(K.endOffset=J.endOffset)}function setNodeLocationFull(K,J){isNaN(K.startOffset)===!0?(K.startOffset=J.startOffset,K.startColumn=J.startColumn,K.startLine=J.startLine,K.endOffset=J.endOffset,K.endColumn=J.endColumn,K.endLine=J.endLine):K.endOffset<J.endOffset&&(K.endOffset=J.endOffset,K.endColumn=J.endColumn,K.endLine=J.endLine)}function addTerminalToCst(K,J,ne){K.children[ne]===void 0?K.children[ne]=[J]:K.children[ne].push(J)}function addNoneTerminalToCst(K,J,ne){K.children[J]===void 0?K.children[J]=[ne]:K.children[J].push(ne)}function classNameFromInstance(K){return functionName(K.constructor)}var NAME="name";function functionName(K){var J=K.name;return J||"anonymous"}function defineNameProp(K,J){var ne=Object.getOwnPropertyDescriptor(K,NAME);return isUndefined(ne)||ne.configurable?(Object.defineProperty(K,NAME,{enumerable:!1,configurable:!0,writable:!1,value:J}),!0):!1}function defaultVisit(K,J){for(var ne=keys$3(K),oe=ne.length,ce=0;ce<oe;ce++)for(var ue=ne[ce],Ae=K[ue],pe=Ae.length,ve=0;ve<pe;ve++){var me=Ae[ve];me.tokenTypeIdx===void 0&&this[me.name](me.children,J)}}function createBaseSemanticVisitorConstructor(K,J){var ne=function(){};defineNameProp(ne,K+"BaseSemantics");var oe={visit:function(ce,ue){if(isArray$5(ce)&&(ce=ce[0]),!isUndefined(ce))return this[ce.name](ce.children,ue)},validateVisitor:function(){var ce=validateVisitor(this,J);if(!isEmpty$1(ce)){var ue=map$1(ce,function(Ae){return Ae.msg});throw Error("Errors Detected in CST Visitor <"+functionName(this.constructor)+`>:
	`+(""+ue.join(`

`).replace(/\n/g,`
	`)))}}};return ne.prototype=oe,ne.prototype.constructor=ne,ne._RULE_NAMES=J,ne}function createBaseVisitorConstructorWithDefaults(K,J,ne){var oe=function(){};defineNameProp(oe,K+"BaseSemanticsWithDefaults");var ce=Object.create(ne.prototype);return forEach(J,function(ue){ce[ue]=defaultVisit}),oe.prototype=ce,oe.prototype.constructor=oe,oe}var CstVisitorDefinitionError;(function(K){K[K.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",K[K.MISSING_METHOD=1]="MISSING_METHOD"})(CstVisitorDefinitionError||(CstVisitorDefinitionError={}));function validateVisitor(K,J){var ne=validateMissingCstMethods(K,J),oe=validateRedundantMethods(K,J);return ne.concat(oe)}function validateMissingCstMethods(K,J){var ne=map$1(J,function(oe){if(!isFunction$4(K[oe]))return{msg:"Missing visitor method: <"+oe+"> on "+functionName(K.constructor)+" CST Visitor.",type:CstVisitorDefinitionError.MISSING_METHOD,methodName:oe}});return compact(ne)}var VALID_PROP_NAMES=["constructor","visit","validateVisitor"];function validateRedundantMethods(K,J){var ne=[];for(var oe in K)isFunction$4(K[oe])&&!contains$1(VALID_PROP_NAMES,oe)&&!contains$1(J,oe)&&ne.push({msg:"Redundant visitor method: <"+oe+"> on "+functionName(K.constructor)+` CST Visitor
There is no Grammar Rule corresponding to this method's name.
`,type:CstVisitorDefinitionError.REDUNDANT_METHOD,methodName:oe});return ne}var TreeBuilder=function(){function K(){}return K.prototype.initTreeBuilder=function(J){if(this.CST_STACK=[],this.outputCst=J.outputCst,this.nodeLocationTracking=has$2(J,"nodeLocationTracking")?J.nodeLocationTracking:DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=NOOP,this.cstFinallyStateUpdate=NOOP,this.cstPostTerminal=NOOP,this.cstPostNonTerminal=NOOP,this.cstPostRule=NOOP;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationFull,this.setNodeLocationFromNode=setNodeLocationFull,this.cstPostRule=NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=NOOP,this.setNodeLocationFromNode=NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationOnlyOffset,this.setNodeLocationFromNode=setNodeLocationOnlyOffset,this.cstPostRule=NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=NOOP,this.setNodeLocationFromNode=NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=NOOP,this.setNodeLocationFromNode=NOOP,this.cstPostRule=NOOP,this.setInitialNodeLocation=NOOP;else throw Error('Invalid <nodeLocationTracking> config option: "'+J.nodeLocationTracking+'"')},K.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(J){J.location={startOffset:NaN,endOffset:NaN}},K.prototype.setInitialNodeLocationOnlyOffsetRegular=function(J){J.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},K.prototype.setInitialNodeLocationFullRecovery=function(J){J.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},K.prototype.setInitialNodeLocationFullRegular=function(J){var ne=this.LA(1);J.location={startOffset:ne.startOffset,startLine:ne.startLine,startColumn:ne.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},K.prototype.cstInvocationStateUpdate=function(J,ne){var oe={name:J,children:{}};this.setInitialNodeLocation(oe),this.CST_STACK.push(oe)},K.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},K.prototype.cstPostRuleFull=function(J){var ne=this.LA(0),oe=J.location;oe.startOffset<=ne.startOffset?(oe.endOffset=ne.endOffset,oe.endLine=ne.endLine,oe.endColumn=ne.endColumn):(oe.startOffset=NaN,oe.startLine=NaN,oe.startColumn=NaN)},K.prototype.cstPostRuleOnlyOffset=function(J){var ne=this.LA(0),oe=J.location;oe.startOffset<=ne.startOffset?oe.endOffset=ne.endOffset:oe.startOffset=NaN},K.prototype.cstPostTerminal=function(J,ne){var oe=this.CST_STACK[this.CST_STACK.length-1];addTerminalToCst(oe,ne,J),this.setNodeLocationFromToken(oe.location,ne)},K.prototype.cstPostNonTerminal=function(J,ne){var oe=this.CST_STACK[this.CST_STACK.length-1];addNoneTerminalToCst(oe,ne,J),this.setNodeLocationFromNode(oe.location,J.location)},K.prototype.getBaseCstVisitorConstructor=function(){if(isUndefined(this.baseCstVisitorConstructor)){var J=createBaseSemanticVisitorConstructor(this.className,keys$3(this.gastProductionsCache));return this.baseCstVisitorConstructor=J,J}return this.baseCstVisitorConstructor},K.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(isUndefined(this.baseCstVisitorWithDefaultsConstructor)){var J=createBaseVisitorConstructorWithDefaults(this.className,keys$3(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=J,J}return this.baseCstVisitorWithDefaultsConstructor},K.prototype.getLastExplicitRuleShortName=function(){var J=this.RULE_STACK;return J[J.length-1]},K.prototype.getPreviousExplicitRuleShortName=function(){var J=this.RULE_STACK;return J[J.length-2]},K.prototype.getLastExplicitRuleOccurrenceIndex=function(){var J=this.RULE_OCCURRENCE_STACK;return J[J.length-1]},K}(),LexerAdapter=function(){function K(){}return K.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(K.prototype,"input",{get:function(){return this.tokVector},set:function(J){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=J,this.tokVectorLength=J.length},enumerable:!1,configurable:!0}),K.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):END_OF_FILE},K.prototype.LA=function(J){var ne=this.currIdx+J;return ne<0||this.tokVectorLength<=ne?END_OF_FILE:this.tokVector[ne]},K.prototype.consumeToken=function(){this.currIdx++},K.prototype.exportLexerState=function(){return this.currIdx},K.prototype.importLexerState=function(J){this.currIdx=J},K.prototype.resetLexerState=function(){this.currIdx=-1},K.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},K.prototype.getLexerPosition=function(){return this.exportLexerState()},K}(),RecognizerApi=function(){function K(){}return K.prototype.ACTION=function(J){return J.call(this)},K.prototype.consume=function(J,ne,oe){return this.consumeInternal(ne,J,oe)},K.prototype.subrule=function(J,ne,oe){return this.subruleInternal(ne,J,oe)},K.prototype.option=function(J,ne){return this.optionInternal(ne,J)},K.prototype.or=function(J,ne){return this.orInternal(ne,J)},K.prototype.many=function(J,ne){return this.manyInternal(J,ne)},K.prototype.atLeastOne=function(J,ne){return this.atLeastOneInternal(J,ne)},K.prototype.CONSUME=function(J,ne){return this.consumeInternal(J,0,ne)},K.prototype.CONSUME1=function(J,ne){return this.consumeInternal(J,1,ne)},K.prototype.CONSUME2=function(J,ne){return this.consumeInternal(J,2,ne)},K.prototype.CONSUME3=function(J,ne){return this.consumeInternal(J,3,ne)},K.prototype.CONSUME4=function(J,ne){return this.consumeInternal(J,4,ne)},K.prototype.CONSUME5=function(J,ne){return this.consumeInternal(J,5,ne)},K.prototype.CONSUME6=function(J,ne){return this.consumeInternal(J,6,ne)},K.prototype.CONSUME7=function(J,ne){return this.consumeInternal(J,7,ne)},K.prototype.CONSUME8=function(J,ne){return this.consumeInternal(J,8,ne)},K.prototype.CONSUME9=function(J,ne){return this.consumeInternal(J,9,ne)},K.prototype.SUBRULE=function(J,ne){return this.subruleInternal(J,0,ne)},K.prototype.SUBRULE1=function(J,ne){return this.subruleInternal(J,1,ne)},K.prototype.SUBRULE2=function(J,ne){return this.subruleInternal(J,2,ne)},K.prototype.SUBRULE3=function(J,ne){return this.subruleInternal(J,3,ne)},K.prototype.SUBRULE4=function(J,ne){return this.subruleInternal(J,4,ne)},K.prototype.SUBRULE5=function(J,ne){return this.subruleInternal(J,5,ne)},K.prototype.SUBRULE6=function(J,ne){return this.subruleInternal(J,6,ne)},K.prototype.SUBRULE7=function(J,ne){return this.subruleInternal(J,7,ne)},K.prototype.SUBRULE8=function(J,ne){return this.subruleInternal(J,8,ne)},K.prototype.SUBRULE9=function(J,ne){return this.subruleInternal(J,9,ne)},K.prototype.OPTION=function(J){return this.optionInternal(J,0)},K.prototype.OPTION1=function(J){return this.optionInternal(J,1)},K.prototype.OPTION2=function(J){return this.optionInternal(J,2)},K.prototype.OPTION3=function(J){return this.optionInternal(J,3)},K.prototype.OPTION4=function(J){return this.optionInternal(J,4)},K.prototype.OPTION5=function(J){return this.optionInternal(J,5)},K.prototype.OPTION6=function(J){return this.optionInternal(J,6)},K.prototype.OPTION7=function(J){return this.optionInternal(J,7)},K.prototype.OPTION8=function(J){return this.optionInternal(J,8)},K.prototype.OPTION9=function(J){return this.optionInternal(J,9)},K.prototype.OR=function(J){return this.orInternal(J,0)},K.prototype.OR1=function(J){return this.orInternal(J,1)},K.prototype.OR2=function(J){return this.orInternal(J,2)},K.prototype.OR3=function(J){return this.orInternal(J,3)},K.prototype.OR4=function(J){return this.orInternal(J,4)},K.prototype.OR5=function(J){return this.orInternal(J,5)},K.prototype.OR6=function(J){return this.orInternal(J,6)},K.prototype.OR7=function(J){return this.orInternal(J,7)},K.prototype.OR8=function(J){return this.orInternal(J,8)},K.prototype.OR9=function(J){return this.orInternal(J,9)},K.prototype.MANY=function(J){this.manyInternal(0,J)},K.prototype.MANY1=function(J){this.manyInternal(1,J)},K.prototype.MANY2=function(J){this.manyInternal(2,J)},K.prototype.MANY3=function(J){this.manyInternal(3,J)},K.prototype.MANY4=function(J){this.manyInternal(4,J)},K.prototype.MANY5=function(J){this.manyInternal(5,J)},K.prototype.MANY6=function(J){this.manyInternal(6,J)},K.prototype.MANY7=function(J){this.manyInternal(7,J)},K.prototype.MANY8=function(J){this.manyInternal(8,J)},K.prototype.MANY9=function(J){this.manyInternal(9,J)},K.prototype.MANY_SEP=function(J){this.manySepFirstInternal(0,J)},K.prototype.MANY_SEP1=function(J){this.manySepFirstInternal(1,J)},K.prototype.MANY_SEP2=function(J){this.manySepFirstInternal(2,J)},K.prototype.MANY_SEP3=function(J){this.manySepFirstInternal(3,J)},K.prototype.MANY_SEP4=function(J){this.manySepFirstInternal(4,J)},K.prototype.MANY_SEP5=function(J){this.manySepFirstInternal(5,J)},K.prototype.MANY_SEP6=function(J){this.manySepFirstInternal(6,J)},K.prototype.MANY_SEP7=function(J){this.manySepFirstInternal(7,J)},K.prototype.MANY_SEP8=function(J){this.manySepFirstInternal(8,J)},K.prototype.MANY_SEP9=function(J){this.manySepFirstInternal(9,J)},K.prototype.AT_LEAST_ONE=function(J){this.atLeastOneInternal(0,J)},K.prototype.AT_LEAST_ONE1=function(J){return this.atLeastOneInternal(1,J)},K.prototype.AT_LEAST_ONE2=function(J){this.atLeastOneInternal(2,J)},K.prototype.AT_LEAST_ONE3=function(J){this.atLeastOneInternal(3,J)},K.prototype.AT_LEAST_ONE4=function(J){this.atLeastOneInternal(4,J)},K.prototype.AT_LEAST_ONE5=function(J){this.atLeastOneInternal(5,J)},K.prototype.AT_LEAST_ONE6=function(J){this.atLeastOneInternal(6,J)},K.prototype.AT_LEAST_ONE7=function(J){this.atLeastOneInternal(7,J)},K.prototype.AT_LEAST_ONE8=function(J){this.atLeastOneInternal(8,J)},K.prototype.AT_LEAST_ONE9=function(J){this.atLeastOneInternal(9,J)},K.prototype.AT_LEAST_ONE_SEP=function(J){this.atLeastOneSepFirstInternal(0,J)},K.prototype.AT_LEAST_ONE_SEP1=function(J){this.atLeastOneSepFirstInternal(1,J)},K.prototype.AT_LEAST_ONE_SEP2=function(J){this.atLeastOneSepFirstInternal(2,J)},K.prototype.AT_LEAST_ONE_SEP3=function(J){this.atLeastOneSepFirstInternal(3,J)},K.prototype.AT_LEAST_ONE_SEP4=function(J){this.atLeastOneSepFirstInternal(4,J)},K.prototype.AT_LEAST_ONE_SEP5=function(J){this.atLeastOneSepFirstInternal(5,J)},K.prototype.AT_LEAST_ONE_SEP6=function(J){this.atLeastOneSepFirstInternal(6,J)},K.prototype.AT_LEAST_ONE_SEP7=function(J){this.atLeastOneSepFirstInternal(7,J)},K.prototype.AT_LEAST_ONE_SEP8=function(J){this.atLeastOneSepFirstInternal(8,J)},K.prototype.AT_LEAST_ONE_SEP9=function(J){this.atLeastOneSepFirstInternal(9,J)},K.prototype.RULE=function(J,ne,oe){if(oe===void 0&&(oe=DEFAULT_RULE_CONFIG),contains$1(this.definedRulesNames,J)){var ce=defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:J,grammarName:this.className}),ue={message:ce,type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:J};this.definitionErrors.push(ue)}this.definedRulesNames.push(J);var Ae=this.defineRule(J,ne,oe);return this[J]=Ae,Ae},K.prototype.OVERRIDE_RULE=function(J,ne,oe){oe===void 0&&(oe=DEFAULT_RULE_CONFIG);var ce=[];ce=ce.concat(validateRuleIsOverridden(J,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,ce);var ue=this.defineRule(J,ne,oe);return this[J]=ue,ue},K.prototype.BACKTRACK=function(J,ne){return function(){this.isBackTrackingStack.push(1);var oe=this.saveRecogState();try{return J.apply(this,ne),!0}catch(ce){if(isRecognitionException(ce))return!1;throw ce}finally{this.reloadRecogState(oe),this.isBackTrackingStack.pop()}}},K.prototype.getGAstProductions=function(){return this.gastProductionsCache},K.prototype.getSerializedGastProductions=function(){return serializeGrammar(values(this.gastProductionsCache))},K}(),RecognizerEngine=function(){function K(){}return K.prototype.initRecognizerEngine=function(J,ne){if(this.className=classNameFromInstance(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},has$2(ne,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(isArray$5(J)){if(isEmpty$1(J))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof J[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(isArray$5(J))this.tokensMap=reduce$1(J,function(Ae,pe){return Ae[pe.name]=pe,Ae},{});else if(has$2(J,"modes")&&every(flatten$1(values(J.modes)),isTokenType)){var oe=flatten$1(values(J.modes)),ce=uniq(oe);this.tokensMap=reduce$1(ce,function(Ae,pe){return Ae[pe.name]=pe,Ae},{})}else if(isObject$6(J))this.tokensMap=cloneObj(J);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=EOF$1;var ue=every(values(J),function(Ae){return isEmpty$1(Ae.categoryMatches)});this.tokenMatcher=ue?tokenStructuredMatcherNoCategories:tokenStructuredMatcher,augmentTokenTypes(values(this.tokensMap))},K.prototype.defineRule=function(J,ne,oe){if(this.selfAnalysisDone)throw Error("Grammar rule <"+J+`> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);var ce=has$2(oe,"resyncEnabled")?oe.resyncEnabled:DEFAULT_RULE_CONFIG.resyncEnabled,ue=has$2(oe,"recoveryValueFunc")?oe.recoveryValueFunc:DEFAULT_RULE_CONFIG.recoveryValueFunc,Ae=this.ruleShortNameIdx<<BITS_FOR_METHOD_TYPE+BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[Ae]=J,this.fullRuleNameToShort[J]=Ae;function pe(ge){try{if(this.outputCst===!0){ne.apply(this,ge);var ye=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(ye),ye}else return ne.apply(this,ge)}catch(xe){return this.invokeRuleCatch(xe,ce,ue)}finally{this.ruleFinallyStateUpdate()}}var ve;ve=function(ge,ye){return ge===void 0&&(ge=0),this.ruleInvocationStateUpdate(Ae,J,ge),pe.call(this,ye)};var me="ruleName";return ve[me]=J,ve.originalGrammarAction=ne,ve},K.prototype.invokeRuleCatch=function(J,ne,oe){var ce=this.RULE_STACK.length===1,ue=ne&&!this.isBackTracking()&&this.recoveryEnabled;if(isRecognitionException(J)){var Ae=J;if(ue){var pe=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(pe))if(Ae.resyncedTokens=this.reSyncTo(pe),this.outputCst){var ve=this.CST_STACK[this.CST_STACK.length-1];return ve.recoveredNode=!0,ve}else return oe();else{if(this.outputCst){var ve=this.CST_STACK[this.CST_STACK.length-1];ve.recoveredNode=!0,Ae.partialCstResult=ve}throw Ae}}else{if(ce)return this.moveToTerminatedState(),oe();throw Ae}}else throw J},K.prototype.optionInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(OPTION_IDX,ne);return this.optionInternalLogic(J,ne,oe)},K.prototype.optionInternalLogic=function(J,ne,oe){var ce=this,ue=this.getLaFuncFromCache(oe),Ae,pe;if(J.DEF!==void 0){if(Ae=J.DEF,pe=J.GATE,pe!==void 0){var ve=ue;ue=function(){return pe.call(ce)&&ve.call(ce)}}}else Ae=J;if(ue.call(this)===!0)return Ae.call(this)},K.prototype.atLeastOneInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_IDX,J);return this.atLeastOneInternalLogic(J,ne,oe)},K.prototype.atLeastOneInternalLogic=function(J,ne,oe){var ce=this,ue=this.getLaFuncFromCache(oe),Ae,pe;if(ne.DEF!==void 0){if(Ae=ne.DEF,pe=ne.GATE,pe!==void 0){var ve=ue;ue=function(){return pe.call(ce)&&ve.call(ce)}}}else Ae=ne;if(ue.call(this)===!0)for(var me=this.doSingleRepetition(Ae);ue.call(this)===!0&&me===!0;)me=this.doSingleRepetition(Ae);else throw this.raiseEarlyExitException(J,PROD_TYPE.REPETITION_MANDATORY,ne.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[J,ne],ue,AT_LEAST_ONE_IDX,J,NextTerminalAfterAtLeastOneWalker)},K.prototype.atLeastOneSepFirstInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_SEP_IDX,J);this.atLeastOneSepFirstInternalLogic(J,ne,oe)},K.prototype.atLeastOneSepFirstInternalLogic=function(J,ne,oe){var ce=this,ue=ne.DEF,Ae=ne.SEP,pe=this.getLaFuncFromCache(oe);if(pe.call(this)===!0){ue.call(this);for(var ve=function(){return ce.tokenMatcher(ce.LA(1),Ae)};this.tokenMatcher(this.LA(1),Ae)===!0;)this.CONSUME(Ae),ue.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[J,Ae,ve,ue,NextTerminalAfterAtLeastOneSepWalker],ve,AT_LEAST_ONE_SEP_IDX,J,NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(J,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,ne.ERR_MSG)},K.prototype.manyInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(MANY_IDX,J);return this.manyInternalLogic(J,ne,oe)},K.prototype.manyInternalLogic=function(J,ne,oe){var ce=this,ue=this.getLaFuncFromCache(oe),Ae,pe;if(ne.DEF!==void 0){if(Ae=ne.DEF,pe=ne.GATE,pe!==void 0){var ve=ue;ue=function(){return pe.call(ce)&&ve.call(ce)}}}else Ae=ne;for(var me=!0;ue.call(this)===!0&&me===!0;)me=this.doSingleRepetition(Ae);this.attemptInRepetitionRecovery(this.manyInternal,[J,ne],ue,MANY_IDX,J,NextTerminalAfterManyWalker,me)},K.prototype.manySepFirstInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(MANY_SEP_IDX,J);this.manySepFirstInternalLogic(J,ne,oe)},K.prototype.manySepFirstInternalLogic=function(J,ne,oe){var ce=this,ue=ne.DEF,Ae=ne.SEP,pe=this.getLaFuncFromCache(oe);if(pe.call(this)===!0){ue.call(this);for(var ve=function(){return ce.tokenMatcher(ce.LA(1),Ae)};this.tokenMatcher(this.LA(1),Ae)===!0;)this.CONSUME(Ae),ue.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[J,Ae,ve,ue,NextTerminalAfterManySepWalker],ve,MANY_SEP_IDX,J,NextTerminalAfterManySepWalker)}},K.prototype.repetitionSepSecondInternal=function(J,ne,oe,ce,ue){for(;oe();)this.CONSUME(ne),ce.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[J,ne,oe,ce,ue],oe,AT_LEAST_ONE_SEP_IDX,J,ue)},K.prototype.doSingleRepetition=function(J){var ne=this.getLexerPosition();J.call(this);var oe=this.getLexerPosition();return oe>ne},K.prototype.orInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(OR_IDX,ne),ce=isArray$5(J)?J:J.DEF,ue=this.getLaFuncFromCache(oe),Ae=ue.call(this,ce);if(Ae!==void 0){var pe=ce[Ae];return pe.ALT.call(this)}this.raiseNoAltException(ne,J.ERR_MSG)},K.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var J=this.LA(1),ne=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:J,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new NotAllInputParsedException$1(ne,J))}},K.prototype.subruleInternal=function(J,ne,oe){var ce;try{var ue=oe!==void 0?oe.ARGS:void 0;return ce=J.call(this,ne,ue),this.cstPostNonTerminal(ce,oe!==void 0&&oe.LABEL!==void 0?oe.LABEL:J.ruleName),ce}catch(Ae){this.subruleInternalError(Ae,oe,J.ruleName)}},K.prototype.subruleInternalError=function(J,ne,oe){throw isRecognitionException(J)&&J.partialCstResult!==void 0&&(this.cstPostNonTerminal(J.partialCstResult,ne!==void 0&&ne.LABEL!==void 0?ne.LABEL:oe),delete J.partialCstResult),J},K.prototype.consumeInternal=function(J,ne,oe){var ce;try{var ue=this.LA(1);this.tokenMatcher(ue,J)===!0?(this.consumeToken(),ce=ue):this.consumeInternalError(J,ue,oe)}catch(Ae){ce=this.consumeInternalRecovery(J,ne,Ae)}return this.cstPostTerminal(oe!==void 0&&oe.LABEL!==void 0?oe.LABEL:J.name,ce),ce},K.prototype.consumeInternalError=function(J,ne,oe){var ce,ue=this.LA(0);throw oe!==void 0&&oe.ERR_MSG?ce=oe.ERR_MSG:ce=this.errorMessageProvider.buildMismatchTokenMessage({expected:J,actual:ne,previous:ue,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new MismatchedTokenException(ce,ne,ue))},K.prototype.consumeInternalRecovery=function(J,ne,oe){if(this.recoveryEnabled&&oe.name==="MismatchedTokenException"&&!this.isBackTracking()){var ce=this.getFollowsForInRuleRecovery(J,ne);try{return this.tryInRuleRecovery(J,ce)}catch(ue){throw ue.name===IN_RULE_RECOVERY_EXCEPTION?oe:ue}}else throw oe},K.prototype.saveRecogState=function(){var J=this.errors,ne=cloneArr(this.RULE_STACK);return{errors:J,lexerState:this.exportLexerState(),RULE_STACK:ne,CST_STACK:this.CST_STACK}},K.prototype.reloadRecogState=function(J){this.errors=J.errors,this.importLexerState(J.lexerState),this.RULE_STACK=J.RULE_STACK},K.prototype.ruleInvocationStateUpdate=function(J,ne,oe){this.RULE_OCCURRENCE_STACK.push(oe),this.RULE_STACK.push(J),this.cstInvocationStateUpdate(ne,J)},K.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},K.prototype.getCurrRuleFullName=function(){var J=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[J]},K.prototype.shortRuleNameToFullName=function(J){return this.shortRuleNameToFull[J]},K.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),EOF$1)},K.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},K}(),ErrorHandler=function(){function K(){}return K.prototype.initErrorHandler=function(J){this._errors=[],this.errorMessageProvider=has$2(J,"errorMessageProvider")?J.errorMessageProvider:DEFAULT_PARSER_CONFIG.errorMessageProvider},K.prototype.SAVE_ERROR=function(J){if(isRecognitionException(J))return J.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(J),J;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(K.prototype,"errors",{get:function(){return cloneArr(this._errors)},set:function(J){this._errors=J},enumerable:!1,configurable:!0}),K.prototype.raiseEarlyExitException=function(J,ne,oe){for(var ce=this.getCurrRuleFullName(),ue=this.getGAstProductions()[ce],Ae=getLookaheadPathsForOptionalProd(J,ue,ne,this.maxLookahead),pe=Ae[0],ve=[],me=1;me<=this.maxLookahead;me++)ve.push(this.LA(me));var ge=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:pe,actual:ve,previous:this.LA(0),customUserDescription:oe,ruleName:ce});throw this.SAVE_ERROR(new EarlyExitException(ge,this.LA(1),this.LA(0)))},K.prototype.raiseNoAltException=function(J,ne){for(var oe=this.getCurrRuleFullName(),ce=this.getGAstProductions()[oe],ue=getLookaheadPathsForOr(J,ce,this.maxLookahead),Ae=[],pe=1;pe<=this.maxLookahead;pe++)Ae.push(this.LA(pe));var ve=this.LA(0),me=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:ue,actual:Ae,previous:ve,customUserDescription:ne,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new NoViableAltException(me,this.LA(1),ve))},K}(),ContentAssist=function(){function K(){}return K.prototype.initContentAssist=function(){},K.prototype.computeContentAssist=function(J,ne){var oe=this.gastProductionsCache[J];if(isUndefined(oe))throw Error("Rule ->"+J+"<- does not exist in this grammar.");return nextPossibleTokensAfter([oe],ne,this.tokenMatcher,this.maxLookahead)},K.prototype.getNextPossibleTokenTypes=function(J){var ne=first$1(J.ruleStack),oe=this.getGAstProductions(),ce=oe[ne],ue=new NextAfterTokenWalker(ce,J).startWalking();return ue},K}(),RECORDING_NULL_OBJECT={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(RECORDING_NULL_OBJECT);var HANDLE_SEPARATOR=!0,MAX_METHOD_IDX=Math.pow(2,BITS_FOR_OCCURRENCE_IDX)-1,RFT=createToken$1({name:"RECORDING_PHASE_TOKEN",pattern:Lexer$1.NA});augmentTokenTypes([RFT]);var RECORDING_PHASE_TOKEN=createTokenInstance(RFT,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(RECORDING_PHASE_TOKEN);var RECORDING_PHASE_CSTNODE={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},GastRecorder=function(){function K(){}return K.prototype.initGastRecorder=function(J){this.recordingProdStack=[],this.RECORDING_PHASE=!1},K.prototype.enableRecording=function(){var J=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var ne=function(ce){var ue=ce>0?ce:"";J["CONSUME"+ue]=function(Ae,pe){return this.consumeInternalRecord(Ae,ce,pe)},J["SUBRULE"+ue]=function(Ae,pe){return this.subruleInternalRecord(Ae,ce,pe)},J["OPTION"+ue]=function(Ae){return this.optionInternalRecord(Ae,ce)},J["OR"+ue]=function(Ae){return this.orInternalRecord(Ae,ce)},J["MANY"+ue]=function(Ae){this.manyInternalRecord(ce,Ae)},J["MANY_SEP"+ue]=function(Ae){this.manySepFirstInternalRecord(ce,Ae)},J["AT_LEAST_ONE"+ue]=function(Ae){this.atLeastOneInternalRecord(ce,Ae)},J["AT_LEAST_ONE_SEP"+ue]=function(Ae){this.atLeastOneSepFirstInternalRecord(ce,Ae)}},oe=0;oe<10;oe++)ne(oe);J.consume=function(ce,ue,Ae){return this.consumeInternalRecord(ue,ce,Ae)},J.subrule=function(ce,ue,Ae){return this.subruleInternalRecord(ue,ce,Ae)},J.option=function(ce,ue){return this.optionInternalRecord(ue,ce)},J.or=function(ce,ue){return this.orInternalRecord(ue,ce)},J.many=function(ce,ue){this.manyInternalRecord(ce,ue)},J.atLeastOne=function(ce,ue){this.atLeastOneInternalRecord(ce,ue)},J.ACTION=J.ACTION_RECORD,J.BACKTRACK=J.BACKTRACK_RECORD,J.LA=J.LA_RECORD})},K.prototype.disableRecording=function(){var J=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var ne=0;ne<10;ne++){var oe=ne>0?ne:"";delete J["CONSUME"+oe],delete J["SUBRULE"+oe],delete J["OPTION"+oe],delete J["OR"+oe],delete J["MANY"+oe],delete J["MANY_SEP"+oe],delete J["AT_LEAST_ONE"+oe],delete J["AT_LEAST_ONE_SEP"+oe]}delete J.consume,delete J.subrule,delete J.option,delete J.or,delete J.many,delete J.atLeastOne,delete J.ACTION,delete J.BACKTRACK,delete J.LA})},K.prototype.ACTION_RECORD=function(J){},K.prototype.BACKTRACK_RECORD=function(J,ne){return function(){return!0}},K.prototype.LA_RECORD=function(J){return END_OF_FILE},K.prototype.topLevelRuleRecord=function(J,ne){try{var oe=new Rule({definition:[],name:J});return oe.name=J,this.recordingProdStack.push(oe),ne.call(this),this.recordingProdStack.pop(),oe}catch(ce){if(ce.KNOWN_RECORDER_ERROR!==!0)try{ce.message=ce.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw ce}throw ce}},K.prototype.optionInternalRecord=function(J,ne){return recordProd.call(this,Option,J,ne)},K.prototype.atLeastOneInternalRecord=function(J,ne){recordProd.call(this,RepetitionMandatory,ne,J)},K.prototype.atLeastOneSepFirstInternalRecord=function(J,ne){recordProd.call(this,RepetitionMandatoryWithSeparator,ne,J,HANDLE_SEPARATOR)},K.prototype.manyInternalRecord=function(J,ne){recordProd.call(this,Repetition,ne,J)},K.prototype.manySepFirstInternalRecord=function(J,ne){recordProd.call(this,RepetitionWithSeparator,ne,J,HANDLE_SEPARATOR)},K.prototype.orInternalRecord=function(J,ne){return recordOrProd.call(this,J,ne)},K.prototype.subruleInternalRecord=function(J,ne,oe){if(assertMethodIdxIsValid(ne),!J||has$2(J,"ruleName")===!1){var ce=new Error("<SUBRULE"+getIdxSuffix(ne)+"> argument is invalid"+(" expecting a Parser method reference but got: <"+JSON.stringify(J)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw ce.KNOWN_RECORDER_ERROR=!0,ce}var ue=peek(this.recordingProdStack),Ae=J.ruleName,pe=new NonTerminal({idx:ne,nonTerminalName:Ae,referencedRule:void 0});return ue.definition.push(pe),this.outputCst?RECORDING_PHASE_CSTNODE:RECORDING_NULL_OBJECT},K.prototype.consumeInternalRecord=function(J,ne,oe){if(assertMethodIdxIsValid(ne),!hasShortKeyProperty(J)){var ce=new Error("<CONSUME"+getIdxSuffix(ne)+"> argument is invalid"+(" expecting a TokenType reference but got: <"+JSON.stringify(J)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw ce.KNOWN_RECORDER_ERROR=!0,ce}var ue=peek(this.recordingProdStack),Ae=new Terminal({idx:ne,terminalType:J});return ue.definition.push(Ae),RECORDING_PHASE_TOKEN},K}();function recordProd(K,J,ne,oe){oe===void 0&&(oe=!1),assertMethodIdxIsValid(ne);var ce=peek(this.recordingProdStack),ue=isFunction$4(J)?J:J.DEF,Ae=new K({definition:[],idx:ne});return oe&&(Ae.separator=J.SEP),has$2(J,"MAX_LOOKAHEAD")&&(Ae.maxLookahead=J.MAX_LOOKAHEAD),this.recordingProdStack.push(Ae),ue.call(this),ce.definition.push(Ae),this.recordingProdStack.pop(),RECORDING_NULL_OBJECT}function recordOrProd(K,J){var ne=this;assertMethodIdxIsValid(J);var oe=peek(this.recordingProdStack),ce=isArray$5(K)===!1,ue=ce===!1?K:K.DEF,Ae=new Alternation({definition:[],idx:J,ignoreAmbiguities:ce&&K.IGNORE_AMBIGUITIES===!0});has$2(K,"MAX_LOOKAHEAD")&&(Ae.maxLookahead=K.MAX_LOOKAHEAD);var pe=some(ue,function(ve){return isFunction$4(ve.GATE)});return Ae.hasPredicates=pe,oe.definition.push(Ae),forEach(ue,function(ve){var me=new Alternative({definition:[]});Ae.definition.push(me),has$2(ve,"IGNORE_AMBIGUITIES")?me.ignoreAmbiguities=ve.IGNORE_AMBIGUITIES:has$2(ve,"GATE")&&(me.ignoreAmbiguities=!0),ne.recordingProdStack.push(me),ve.ALT.call(ne),ne.recordingProdStack.pop()}),RECORDING_NULL_OBJECT}function getIdxSuffix(K){return K===0?"":""+K}function assertMethodIdxIsValid(K){if(K<0||K>MAX_METHOD_IDX){var J=new Error("Invalid DSL Method idx value: <"+K+`>
	`+("Idx value must be a none negative value smaller than "+(MAX_METHOD_IDX+1)));throw J.KNOWN_RECORDER_ERROR=!0,J}}var PerformanceTracer=function(){function K(){}return K.prototype.initPerformanceTracer=function(J){if(has$2(J,"traceInitPerf")){var ne=J.traceInitPerf,oe=typeof ne=="number";this.traceInitMaxIdent=oe?ne:1/0,this.traceInitPerf=oe?ne>0:ne}else this.traceInitMaxIdent=0,this.traceInitPerf=DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},K.prototype.TRACE_INIT=function(J,ne){if(this.traceInitPerf===!0){this.traceInitIndent++;var oe=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(oe+"--> <"+J+">");var ce=timer$1(ne),ue=ce.time,Ae=ce.value,pe=ue>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&pe(oe+"<-- <"+J+"> time: "+ue+"ms"),this.traceInitIndent--,Ae}else return ne()},K}(),__extends$3=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),END_OF_FILE=createTokenInstance(EOF$1,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(END_OF_FILE);var DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),ParserDefinitionErrorType;(function(K){K[K.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",K[K.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",K[K.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",K[K.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",K[K.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",K[K.LEFT_RECURSION=5]="LEFT_RECURSION",K[K.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",K[K.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",K[K.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",K[K.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",K[K.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",K[K.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",K[K.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"})(ParserDefinitionErrorType||(ParserDefinitionErrorType={}));function EMPTY_ALT(K){return K===void 0&&(K=void 0),function(){return K}}var Parser$4=function(){function K(J,ne){this.definitionErrors=[],this.selfAnalysisDone=!1;var oe=this;if(oe.initErrorHandler(ne),oe.initLexerAdapter(),oe.initLooksAhead(ne),oe.initRecognizerEngine(J,ne),oe.initRecoverable(ne),oe.initTreeBuilder(ne),oe.initContentAssist(),oe.initGastRecorder(ne),oe.initPerformanceTracer(ne),has$2(ne,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=has$2(ne,"skipValidations")?ne.skipValidations:DEFAULT_PARSER_CONFIG.skipValidations}return K.performSelfAnalysis=function(J){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")},K.prototype.performSelfAnalysis=function(){var J=this;this.TRACE_INIT("performSelfAnalysis",function(){var ne;J.selfAnalysisDone=!0;var oe=J.className;J.TRACE_INIT("toFastProps",function(){toFastProperties(J)}),J.TRACE_INIT("Grammar Recording",function(){try{J.enableRecording(),forEach(J.definedRulesNames,function(ue){var Ae=J[ue],pe=Ae.originalGrammarAction,ve=void 0;J.TRACE_INIT(ue+" Rule",function(){ve=J.topLevelRuleRecord(ue,pe)}),J.gastProductionsCache[ue]=ve})}finally{J.disableRecording()}});var ce=[];if(J.TRACE_INIT("Grammar Resolving",function(){ce=resolveGrammar({rules:values(J.gastProductionsCache)}),J.definitionErrors.push.apply(J.definitionErrors,ce)}),J.TRACE_INIT("Grammar Validations",function(){if(isEmpty$1(ce)&&J.skipValidations===!1){var ue=validateGrammar({rules:values(J.gastProductionsCache),maxLookahead:J.maxLookahead,tokenTypes:values(J.tokensMap),errMsgProvider:defaultGrammarValidatorErrorProvider,grammarName:oe});J.definitionErrors.push.apply(J.definitionErrors,ue)}}),isEmpty$1(J.definitionErrors)&&(J.recoveryEnabled&&J.TRACE_INIT("computeAllProdsFollows",function(){var ue=computeAllProdsFollows(values(J.gastProductionsCache));J.resyncFollows=ue}),J.TRACE_INIT("ComputeLookaheadFunctions",function(){J.preComputeLookaheadFunctions(values(J.gastProductionsCache))})),!K.DEFER_DEFINITION_ERRORS_HANDLING&&!isEmpty$1(J.definitionErrors))throw ne=map$1(J.definitionErrors,function(ue){return ue.message}),new Error(`Parser Definition Errors detected:
 `+ne.join(`
-------------------------------
`))})},K.DEFER_DEFINITION_ERRORS_HANDLING=!1,K}();applyMixins(Parser$4,[Recoverable,LooksAhead,TreeBuilder,LexerAdapter,RecognizerEngine,RecognizerApi,ErrorHandler,ContentAssist,GastRecorder,PerformanceTracer]);var CstParser=function(K){__extends$3(J,K);function J(ne,oe){oe===void 0&&(oe=DEFAULT_PARSER_CONFIG);var ce=this,ue=cloneObj(oe);return ue.outputCst=!0,ce=K.call(this,ne,ue)||this,ce}return J}(Parser$4),EmbeddedActionsParser$1=function(K){__extends$3(J,K);function J(ne,oe){oe===void 0&&(oe=DEFAULT_PARSER_CONFIG);var ce=this,ue=cloneObj(oe);return ue.outputCst=!1,ce=K.call(this,ne,ue)||this,ce}return J}(Parser$4);function createSyntaxDiagramsCode(K,J){var ne=J===void 0?{}:J,oe=ne.resourceBase,ce=oe===void 0?"https://unpkg.com/chevrotain@"+VERSION+"/diagrams/":oe,ue=ne.css,Ae=ue===void 0?"https://unpkg.com/chevrotain@"+VERSION+"/diagrams/diagrams.css":ue,pe=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,ve=`
<link rel='stylesheet' href='`+Ae+`'>
`,me=`
<script src='`+ce+`vendor/railroad-diagrams.js'><\/script>
<script src='`+ce+`src/diagrams_builder.js'><\/script>
<script src='`+ce+`src/diagrams_behavior.js'><\/script>
<script src='`+ce+`src/main.js'><\/script>
`,ge=`
<div id="diagrams" align="center"></div>    
`,ye=`
<script>
    window.serializedGrammar = `+JSON.stringify(K,null,"  ")+`;
<\/script>
`,xe=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`;return pe+ve+me+ge+ye+xe}var NL$1=`
`;function genUmdModule(K){return`
(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['chevrotain'], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like environments that support module.exports,
        // like Node.
        module.exports = factory(require('chevrotain'));
    } else {
        // Browser globals (root is window)
        root.returnExports = factory(root.b);
    }
}(typeof self !== 'undefined' ? self : this, function (chevrotain) {

`+genClass(K)+`
    
return {
    `+K.name+": "+K.name+` 
}
}));
`}function genWrapperFunction(K){return`    
`+genClass(K)+`
return new `+K.name+`(tokenVocabulary, config)    
`}function genClass(K){var J=`
function `+K.name+`(tokenVocabulary, config) {
    // invoke super constructor
    // No support for embedded actions currently, so we can 'hardcode'
    // The use of CstParser.
    chevrotain.CstParser.call(this, tokenVocabulary, config)

    const $ = this

    `+genAllRules(K.rules)+`

    // very important to call this after all the rules have been defined.
    // otherwise the parser may not work correctly as it will lack information
    // derived during the self analysis phase.
    this.performSelfAnalysis(this)
}

// inheritance as implemented in javascript in the previous decade... :(
`+K.name+`.prototype = Object.create(chevrotain.CstParser.prototype)
`+K.name+".prototype.constructor = "+K.name+`    
    `;return J}function genAllRules(K){var J=map$1(K,function(ne){return genRule(ne,1)});return J.join(`
`)}function genRule(K,J){var ne=indent(J,'$.RULE("'+K.name+'", function() {')+NL$1;return ne+=genDefinition(K.definition,J+1),ne+=indent(J+1,"})")+NL$1,ne}function genTerminal(K,J){var ne=K.terminalType.name;return indent(J,"$.CONSUME"+K.idx+"(this.tokensMap."+ne+")"+NL$1)}function genNonTerminal(K,J){return indent(J,"$.SUBRULE"+K.idx+"($."+K.nonTerminalName+")"+NL$1)}function genAlternation(K,J){var ne=indent(J,"$.OR"+K.idx+"([")+NL$1,oe=map$1(K.definition,function(ce){return genSingleAlt(ce,J+1)});return ne+=oe.join(","+NL$1),ne+=NL$1+indent(J,"])"+NL$1),ne}function genSingleAlt(K,J){var ne=indent(J,"{")+NL$1;return ne+=indent(J+1,"ALT: function() {")+NL$1,ne+=genDefinition(K.definition,J+1),ne+=indent(J+1,"}")+NL$1,ne+=indent(J,"}"),ne}function genProd(K,J){if(K instanceof NonTerminal)return genNonTerminal(K,J);if(K instanceof Option)return genDSLRule("OPTION",K,J);if(K instanceof RepetitionMandatory)return genDSLRule("AT_LEAST_ONE",K,J);if(K instanceof RepetitionMandatoryWithSeparator)return genDSLRule("AT_LEAST_ONE_SEP",K,J);if(K instanceof RepetitionWithSeparator)return genDSLRule("MANY_SEP",K,J);if(K instanceof Repetition)return genDSLRule("MANY",K,J);if(K instanceof Alternation)return genAlternation(K,J);if(K instanceof Terminal)return genTerminal(K,J);if(K instanceof Alternative)return genDefinition(K.definition,J);throw Error("non exhaustive match")}function genDSLRule(K,J,ne){var oe=indent(ne,"$."+(K+J.idx)+"(");return J.separator?(oe+="{"+NL$1,oe+=indent(ne+1,"SEP: this.tokensMap."+J.separator.name)+","+NL$1,oe+="DEF: "+genDefFunction(J.definition,ne+2)+NL$1,oe+=indent(ne,"}")+NL$1):oe+=genDefFunction(J.definition,ne+1),oe+=indent(ne,")")+NL$1,oe}function genDefFunction(K,J){var ne="function() {"+NL$1;return ne+=genDefinition(K,J),ne+=indent(J,"}")+NL$1,ne}function genDefinition(K,J){var ne="";return forEach(K,function(oe){ne+=genProd(oe,J+1)}),ne}function indent(K,J){var ne=Array(K*4+1).join(" ");return ne+J}function generateParserFactory(K){var J=genWrapperFunction({name:K.name,rules:K.rules}),ne=new Function("tokenVocabulary","config","chevrotain",J);return function(oe){return ne(K.tokenVocabulary,oe,require("../api"))}}function generateParserModule(K){return genUmdModule({name:K.name,rules:K.rules})}function clearCache(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}var Parser$3=function(){function K(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}return K}();const api$2=Object.freeze(Object.defineProperty({__proto__:null,Alternation,Alternative,CstParser,EMPTY_ALT,EOF:EOF$1,EarlyExitException,EmbeddedActionsParser:EmbeddedActionsParser$1,GAstVisitor,Lexer:Lexer$1,get LexerDefinitionErrorType(){return LexerDefinitionErrorType},MismatchedTokenException,NoViableAltException,NonTerminal,NotAllInputParsedException:NotAllInputParsedException$1,Option,Parser:Parser$3,get ParserDefinitionErrorType(){return ParserDefinitionErrorType},Repetition,RepetitionMandatory,RepetitionMandatoryWithSeparator,RepetitionWithSeparator,Rule,Terminal,VERSION,assignOccurrenceIndices,clearCache,createSyntaxDiagramsCode,createToken:createToken$1,createTokenInstance,defaultGrammarResolverErrorProvider,defaultGrammarValidatorErrorProvider,defaultLexerErrorProvider,defaultParserErrorProvider,generateParserFactory,generateParserModule,isRecognitionException,resolveGrammar,serializeGrammar,serializeProduction,tokenLabel,tokenMatcher,tokenName,validateGrammar},Symbol.toStringTag,{value:"Module"})),require$$4$1=getAugmentedNamespace(api$2),{createToken,Lexer}=require$$4$1,FormulaError$5=requireError(),tokenVocabulary$1={},WhiteSpace=createToken({name:"WhiteSpace",pattern:/\s+/,group:Lexer.SKIPPED}),String$2=createToken({name:"String",pattern:/"(""|[^"])*"/}),SingleQuotedString=createToken({name:"SingleQuotedString",pattern:/'(''|[^'])*'/}),SheetQuoted$1=createToken({name:"SheetQuoted",pattern:/'((?![\\\/\[\]*?:]).)+?'!/}),Function$2=createToken({name:"Function",pattern:/[A-Za-z_]+[A-Za-z_0-9.]*\(/}),FormulaErrorT$1=createToken({name:"FormulaErrorT",pattern:/#NULL!|#DIV\/0!|#VALUE!|#NAME\?|#NUM!|#N\/A/}),RefError$1=createToken({name:"RefError",pattern:/#REF!/}),Name$1=createToken({name:"Name",pattern:/[a-zA-Z_][a-zA-Z0-9_.?]*/}),Sheet$1=createToken({name:"Sheet",pattern:/[A-Za-z_.\d\u007F-\uFFFF]+!/}),Cell$2=createToken({name:"Cell",pattern:/[$]?[A-Za-z]{1,3}[$]?[1-9][0-9]*/,longer_alt:Name$1}),Number$2=createToken({name:"Number",pattern:/[0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?/}),Boolean$2=createToken({name:"Boolean",pattern:/TRUE|FALSE/i}),Column$1=createToken({name:"Column",pattern:/[$]?[A-Za-z]{1,3}/,longer_alt:Name$1}),At=createToken({name:"At",pattern:/@/}),Comma$1=createToken({name:"Comma",pattern:/,/}),Colon$1=createToken({name:"Colon",pattern:/:/}),Semicolon$1=createToken({name:"Semicolon",pattern:/;/}),OpenParen$1=createToken({name:"OpenParen",pattern:/\(/}),CloseParen$1=createToken({name:"CloseParen",pattern:/\)/}),OpenSquareParen=createToken({name:"OpenSquareParen",pattern:/\[/}),CloseSquareParen=createToken({name:"CloseSquareParen",pattern:/]/});createToken({name:"exclamationMark",pattern:/!/});const OpenCurlyParen$1=createToken({name:"OpenCurlyParen",pattern:/{/}),CloseCurlyParen$1=createToken({name:"CloseCurlyParen",pattern:/}/}),QuoteS=createToken({name:"QuoteS",pattern:/'/}),MulOp$1=createToken({name:"MulOp",pattern:/\*/}),PlusOp$1=createToken({name:"PlusOp",pattern:/\+/}),DivOp$1=createToken({name:"DivOp",pattern:/\//}),MinOp$1=createToken({name:"MinOp",pattern:/-/}),ConcatOp$1=createToken({name:"ConcatOp",pattern:/&/}),ExOp$1=createToken({name:"ExOp",pattern:/\^/}),PercentOp$1=createToken({name:"PercentOp",pattern:/%/}),GtOp$1=createToken({name:"GtOp",pattern:/>/}),EqOp$1=createToken({name:"EqOp",pattern:/=/}),LtOp$1=createToken({name:"LtOp",pattern:/</}),NeqOp$1=createToken({name:"NeqOp",pattern:/<>/}),GteOp$1=createToken({name:"GteOp",pattern:/>=/}),LteOp$1=createToken({name:"LteOp",pattern:/<=/}),allTokens$1=[WhiteSpace,String$2,SheetQuoted$1,SingleQuotedString,Function$2,FormulaErrorT$1,RefError$1,Sheet$1,Cell$2,Boolean$2,Column$1,Name$1,Number$2,At,Comma$1,Colon$1,Semicolon$1,OpenParen$1,CloseParen$1,OpenSquareParen,CloseSquareParen,OpenCurlyParen$1,CloseCurlyParen$1,QuoteS,MulOp$1,PlusOp$1,DivOp$1,MinOp$1,ConcatOp$1,ExOp$1,MulOp$1,PercentOp$1,NeqOp$1,GteOp$1,LteOp$1,GtOp$1,EqOp$1,LtOp$1],SelectLexer=new Lexer(allTokens$1,{ensureOptimizations:!0});allTokens$1.forEach(K=>{tokenVocabulary$1[K.name]=K});var lexing={tokenVocabulary:tokenVocabulary$1,lex:function(K){const J=SelectLexer.tokenize(K);if(J.errors.length>0){const ne=J.errors[0],oe=ne.line,ce=ne.column;let ue=`
`+K.split(`
`)[oe-1]+`
`;throw ue+=Array(ce-1).fill(" ").join("")+`^
`,ne.message=ue+`Error at position ${oe}:${ce}
`+ne.message,ne.errorLocation={line:oe,column:ce},FormulaError$5.ERROR(ne.message,ne)}return J}};const lexer$2=lexing,{EmbeddedActionsParser}=require$$4$1,tokenVocabulary=lexer$2.tokenVocabulary,{String:String$1,SheetQuoted,ExcelRefFunction,ExcelConditionalRefFunction,Function:Function$1,FormulaErrorT,RefError,Cell:Cell$1,Sheet,Name,Number:Number$1,Boolean:Boolean$1,Column,Comma,Colon,Semicolon,OpenParen,CloseParen,OpenCurlyParen,CloseCurlyParen,MulOp,PlusOp,DivOp,MinOp,ConcatOp,ExOp,PercentOp,NeqOp,GteOp,LteOp,GtOp,EqOp,LtOp}=lexer$2.tokenVocabulary;class Parsing extends EmbeddedActionsParser{constructor(J,ne){super(tokenVocabulary,{outputCst:!1,maxLookahead:1,skipValidations:!0}),this.utils=ne,this.binaryOperatorsPrecedence=[["^"],["*","/"],["+","-"],["&"],["<",">","=","<>","<=",">="]];const oe=this;oe.RULE("formulaWithBinaryOp",()=>{const ce=[],ue=[oe.SUBRULE(oe.formulaWithPercentOp)];return oe.MANY(()=>{ce.push(oe.OR(oe.c1||(oe.c1=[{ALT:()=>oe.CONSUME(GtOp).image},{ALT:()=>oe.CONSUME(EqOp).image},{ALT:()=>oe.CONSUME(LtOp).image},{ALT:()=>oe.CONSUME(NeqOp).image},{ALT:()=>oe.CONSUME(GteOp).image},{ALT:()=>oe.CONSUME(LteOp).image},{ALT:()=>oe.CONSUME(ConcatOp).image},{ALT:()=>oe.CONSUME(PlusOp).image},{ALT:()=>oe.CONSUME(MinOp).image},{ALT:()=>oe.CONSUME(MulOp).image},{ALT:()=>oe.CONSUME(DivOp).image},{ALT:()=>oe.CONSUME(ExOp).image}]))),ue.push(oe.SUBRULE2(oe.formulaWithPercentOp))}),oe.ACTION(()=>{for(const Ae of this.binaryOperatorsPrecedence)for(let pe=0,ve=ce.length;pe<ve;pe++){const me=ce[pe];Ae.includes(me)&&(ce.splice(pe,1),ue.splice(pe,2,this.utils.applyInfix(ue[pe],me,ue[pe+1])),pe--,ve--)}}),ue[0]}),oe.RULE("plusMinusOp",()=>oe.OR([{ALT:()=>oe.CONSUME(PlusOp).image},{ALT:()=>oe.CONSUME(MinOp).image}])),oe.RULE("formulaWithPercentOp",()=>{let ce=oe.SUBRULE(oe.formulaWithUnaryOp);return oe.OPTION(()=>{const ue=oe.CONSUME(PercentOp).image;ce=oe.ACTION(()=>this.utils.applyPostfix(ce,ue))}),ce}),oe.RULE("formulaWithUnaryOp",()=>{const ce=[];oe.MANY(()=>{const Ae=oe.OR([{ALT:()=>oe.CONSUME(PlusOp).image},{ALT:()=>oe.CONSUME(MinOp).image}]);ce.push(Ae)});const ue=oe.SUBRULE(oe.formulaWithIntersect);return ce.length>0?oe.ACTION(()=>this.utils.applyPrefix(ce,ue)):ue}),oe.RULE("formulaWithIntersect",()=>{let ce=oe.SUBRULE(oe.formulaWithRange);const ue=[ce];return oe.MANY({GATE:()=>{const Ae=oe.LA(0);return oe.LA(1).startOffset>Ae.endOffset+1},DEF:()=>{ue.push(oe.SUBRULE3(oe.formulaWithRange))}}),ue.length>1?oe.ACTION(()=>oe.ACTION(()=>this.utils.applyIntersect(ue))):ce}),oe.RULE("formulaWithRange",()=>{const ce=oe.SUBRULE(oe.formula),ue=[ce];return oe.MANY(()=>{oe.CONSUME(Colon),ue.push(oe.SUBRULE2(oe.formula))}),ue.length>1?oe.ACTION(()=>oe.ACTION(()=>this.utils.applyRange(ue))):ce}),oe.RULE("formula",()=>oe.OR9([{ALT:()=>oe.SUBRULE(oe.referenceWithoutInfix)},{ALT:()=>oe.SUBRULE(oe.paren)},{ALT:()=>oe.SUBRULE(oe.constant)},{ALT:()=>oe.SUBRULE(oe.functionCall)},{ALT:()=>oe.SUBRULE(oe.constantArray)}])),oe.RULE("paren",()=>{oe.CONSUME(OpenParen);let ce;const ue=[];return ue.push(oe.SUBRULE(oe.formulaWithBinaryOp)),oe.MANY(()=>{oe.CONSUME(Comma),ue.push(oe.SUBRULE2(oe.formulaWithBinaryOp))}),ue.length>1?ce=oe.ACTION(()=>this.utils.applyUnion(ue)):ce=ue[0],oe.CONSUME(CloseParen),ce}),oe.RULE("constantArray",()=>{const ce=[[]];let ue=0;return oe.CONSUME(OpenCurlyParen),ce[ue].push(oe.SUBRULE(oe.constantForArray)),oe.MANY(()=>{const Ae=oe.OR([{ALT:()=>oe.CONSUME(Comma).image},{ALT:()=>oe.CONSUME(Semicolon).image}]),pe=oe.SUBRULE2(oe.constantForArray);Ae===","||(ue++,ce[ue]=[]),ce[ue].push(pe)}),oe.CONSUME(CloseCurlyParen),oe.ACTION(()=>this.utils.toArray(ce))}),oe.RULE("constantForArray",()=>oe.OR([{ALT:()=>{const ce=oe.OPTION(()=>oe.SUBRULE(oe.plusMinusOp)),ue=oe.CONSUME(Number$1).image,Ae=oe.ACTION(()=>this.utils.toNumber(ue));return ce?oe.ACTION(()=>this.utils.applyPrefix([ce],Ae)):Ae}},{ALT:()=>{const ce=oe.CONSUME(String$1).image;return oe.ACTION(()=>this.utils.toString(ce))}},{ALT:()=>{const ce=oe.CONSUME(Boolean$1).image;return oe.ACTION(()=>this.utils.toBoolean(ce))}},{ALT:()=>{const ce=oe.CONSUME(FormulaErrorT).image;return oe.ACTION(()=>this.utils.toError(ce))}},{ALT:()=>{const ce=oe.CONSUME(RefError).image;return oe.ACTION(()=>this.utils.toError(ce))}}])),oe.RULE("constant",()=>oe.OR([{ALT:()=>{const ce=oe.CONSUME(Number$1).image;return oe.ACTION(()=>this.utils.toNumber(ce))}},{ALT:()=>{const ce=oe.CONSUME(String$1).image;return oe.ACTION(()=>this.utils.toString(ce))}},{ALT:()=>{const ce=oe.CONSUME(Boolean$1).image;return oe.ACTION(()=>this.utils.toBoolean(ce))}},{ALT:()=>{const ce=oe.CONSUME(FormulaErrorT).image;return oe.ACTION(()=>this.utils.toError(ce))}}])),oe.RULE("functionCall",()=>{const ce=oe.CONSUME(Function$1).image.slice(0,-1),ue=oe.SUBRULE(oe.arguments);return oe.CONSUME(CloseParen),oe.ACTION(()=>J.callFunction(ce,ue))}),oe.RULE("arguments",()=>{oe.MANY2(()=>{oe.CONSUME2(Comma)});const ce=[];return oe.OPTION(()=>{ce.push(oe.SUBRULE(oe.formulaWithBinaryOp)),oe.MANY(()=>{oe.CONSUME1(Comma),ce.push(null),oe.OPTION3(()=>{ce.pop(),ce.push(oe.SUBRULE2(oe.formulaWithBinaryOp))})})}),ce}),oe.RULE("referenceWithoutInfix",()=>oe.OR([{ALT:()=>oe.SUBRULE(oe.referenceItem)},{ALT:()=>{const ce=oe.SUBRULE(oe.prefixName),ue=oe.SUBRULE2(oe.formulaWithRange);return oe.ACTION(()=>{if(this.utils.isFormulaError(ue))return ue;ue.ref.sheet=ce}),ue}}])),oe.RULE("referenceItem",()=>oe.OR([{ALT:()=>{const ce=oe.CONSUME(Cell$1).image;return oe.ACTION(()=>this.utils.parseCellAddress(ce))}},{ALT:()=>{const ce=oe.CONSUME(Name).image;return oe.ACTION(()=>J.getVariable(ce))}},{ALT:()=>{const ce=oe.CONSUME(Column).image;return oe.ACTION(()=>this.utils.parseCol(ce))}},{ALT:()=>{const ce=oe.CONSUME(RefError).image;return oe.ACTION(()=>this.utils.toError(ce))}}])),oe.RULE("prefixName",()=>oe.OR([{ALT:()=>oe.CONSUME(Sheet).image.slice(0,-1)},{ALT:()=>oe.CONSUME(SheetQuoted).image.slice(1,-2).replace(/''/g,"'")}])),this.performSelfAnalysis()}}var parsing={Parser:Parsing};const FormulaError$4=requireError(),{Address:Address$1}=requireHelpers(),{Prefix,Postfix,Infix,Operators}=operators,Collection$1=collection,MAX_ROW$1=1048576,MAX_COLUMN$1=16384,{NotAllInputParsedException}=require$$4$1;let Utils$3=class{constructor(J){this.context=J}columnNameToNumber(J){return Address$1.columnNameToNumber(J)}parseCellAddress(J){const ne=J.match(/([$]?)([A-Za-z]{1,3})([$]?)([1-9][0-9]*)/);return{ref:{address:ne[0],col:this.columnNameToNumber(ne[2]),row:+ne[4]}}}parseRow(J){const ne=+J;if(!Number.isInteger(ne))throw Error("Row number must be integer.");return{ref:{col:void 0,row:+J}}}parseCol(J){return{ref:{col:this.columnNameToNumber(J),row:void 0}}}parseColRange(J,ne){return J=this.columnNameToNumber(J),ne=this.columnNameToNumber(ne),{ref:{from:{col:Math.min(J,ne),row:null},to:{col:Math.max(J,ne),row:null}}}}parseRowRange(J,ne){return{ref:{from:{col:null,row:Math.min(J,ne)},to:{col:null,row:Math.max(J,ne)}}}}_applyPrefix(J,ne,oe){return this.isFormulaError(ne)?ne:Prefix.unaryOp(J,ne,oe)}async applyPrefixAsync(J,ne){const{val:oe,isArray:ce}=this.extractRefValue(await ne);return this._applyPrefix(J,oe,ce)}applyPrefix(J,ne){if(this.context.async)return this.applyPrefixAsync(J,ne);{const{val:oe,isArray:ce}=this.extractRefValue(ne);return this._applyPrefix(J,oe,ce)}}_applyPostfix(J,ne,oe){return this.isFormulaError(J)?J:Postfix.percentOp(J,oe,ne)}async applyPostfixAsync(J,ne){const{val:oe,isArray:ce}=this.extractRefValue(await J);return this._applyPostfix(oe,ce,ne)}applyPostfix(J,ne){if(this.context.async)return this.applyPostfixAsync(J,ne);{const{val:oe,isArray:ce}=this.extractRefValue(J);return this._applyPostfix(oe,ce,ne)}}_applyInfix(J,ne,oe){const ce=J.val,ue=J.isArray,Ae=oe.val,pe=oe.isArray;if(this.isFormulaError(ce))return ce;if(this.isFormulaError(Ae))return Ae;if(Operators.compareOp.includes(ne))return Infix.compareOp(ce,ne,Ae,ue,pe);if(Operators.concatOp.includes(ne))return Infix.concatOp(ce,ne,Ae,ue,pe);if(Operators.mathOp.includes(ne))return Infix.mathOp(ce,ne,Ae,ue,pe);throw new Error(`Unrecognized infix: ${ne}`)}async applyInfixAsync(J,ne,oe){const ce=this.extractRefValue(await J),ue=this.extractRefValue(await oe);return this._applyInfix(ce,ne,ue)}applyInfix(J,ne,oe){if(this.context.async)return this.applyInfixAsync(J,ne,oe);{const ce=this.extractRefValue(J),ue=this.extractRefValue(oe);return this._applyInfix(ce,ne,ue)}}applyIntersect(J){if(this.isFormulaError(J[0]))return J[0];if(!J[0].ref)throw Error(`Expecting a reference, but got ${J[0]}.`);let ne,oe,ce,ue,Ae,pe;const ve=J.shift().ref;if(Ae=ve.sheet,ve.from)ne=Math.max(ve.from.row,ve.to.row),ce=Math.min(ve.from.row,ve.to.row),oe=Math.max(ve.from.col,ve.to.col),ue=Math.min(ve.from.col,ve.to.col);else{if(ve.row===void 0||ve.col===void 0)throw Error("Cannot intersect the whole row or column.");ne=ce=ve.row,oe=ue=ve.col}let me;return J.forEach(ge=>{if(this.isFormulaError(ge))return ge;if(ge=ge.ref,!ge)throw Error(`Expecting a reference, but got ${ge}.`);if(ge.from){const ye=Math.max(ge.from.row,ge.to.row),xe=Math.min(ge.from.row,ge.to.row),_e=Math.max(ge.from.col,ge.to.col),$e=Math.min(ge.from.col,ge.to.col);(xe>ne||ye<ce||$e>oe||_e<ue||Ae!==ge.sheet)&&(me=FormulaError$4.NULL),ne=Math.min(ne,ye),ce=Math.max(ce,xe),oe=Math.min(oe,_e),ue=Math.max(ue,$e)}else{if(ge.row===void 0||ge.col===void 0)throw Error("Cannot intersect the whole row or column.");(ge.row>ne||ge.row<ce||ge.col>oe||ge.col<ue||Ae!==ge.sheet)&&(me=FormulaError$4.NULL),ne=ce=ge.row,oe=ue=ge.col}}),me||(ne===ce&&oe===ue?pe={ref:{sheet:Ae,row:ne,col:oe}}:pe={ref:{sheet:Ae,from:{row:ce,col:ue},to:{row:ne,col:oe}}},pe.ref.sheet||delete pe.ref.sheet,pe)}applyUnion(J){const ne=new Collection$1;for(let oe=0;oe<J.length;oe++){if(this.isFormulaError(J[oe]))return J[oe];ne.add(this.extractRefValue(J[oe]).val,J[oe])}return ne}applyRange(J){let ne,oe=-1,ce=-1,ue=MAX_ROW$1+1,Ae=MAX_COLUMN$1+1;return J.forEach(pe=>{if(this.isFormulaError(pe))return pe;typeof pe=="number"&&(pe=this.parseRow(pe)),pe=pe.ref,pe.row===void 0&&(ue=1,oe=MAX_ROW$1),pe.col===void 0&&(Ae=1,ce=MAX_COLUMN$1),pe.row>oe&&(oe=pe.row),pe.row<ue&&(ue=pe.row),pe.col>ce&&(ce=pe.col),pe.col<Ae&&(Ae=pe.col)}),oe===ue&&ce===Ae?ne={ref:{row:oe,col:ce}}:ne={ref:{from:{row:ue,col:Ae},to:{row:oe,col:ce}}},ne}extractRefValue(J){let ne=J,oe=!1;return Array.isArray(ne)&&(oe=!0),J.ref?{val:this.context.retrieveRef(J),isArray:oe}:{val:ne,isArray:oe}}toArray(J){return J}toNumber(J){return Number(J)}toString(J){return J.substring(1,J.length-1).replace(/""/g,'"')}toBoolean(J){return J==="TRUE"}toError(J){return new FormulaError$4(J.toUpperCase())}isFormulaError(J){return J instanceof FormulaError$4}static formatChevrotainError(J,ne){let oe,ce,ue="";return J instanceof NotAllInputParsedException?(oe=J.token.startLine,ce=J.token.startColumn):(oe=J.previousToken.startLine,ce=J.previousToken.startColumn+1),ue+=`
`+ne.split(`
`)[oe-1]+`
`,ue+=Array(ce-1).fill(" ").join("")+`^
`,ue+=`Error at position ${oe}:${ce}
`+J.message,J.errorLocation={line:oe,column:ce},FormulaError$4.ERROR(ue,J)}};var utils$5=Utils$3;const TextFunctions=text$5,MathFunctions=math,TrigFunctions=trigonometry,LogicalFunctions=logical,EngFunctions=engineering,ReferenceFunctions=reference,InformationFunctions=information,StatisticalFunctions=statistical,DateFunctions=date,WebFunctions=web,FormulaError$3=requireError(),{FormulaHelpers:FormulaHelpers$2}=requireHelpers(),{Parser:Parser$2,allTokens}=parsing,lexer$1=lexing,Utils$2=utils$5;let FormulaParser$2=class{constructor(J,ne=!1){this.logs=[],this.isTest=ne,this.utils=new Utils$2(this),J=Object.assign({functions:{},functionsNeedContext:{},onVariable:()=>null,onCell:()=>0,onRange:()=>[[0]]},J),this.onVariable=J.onVariable,this.functions=Object.assign({},DateFunctions,StatisticalFunctions,InformationFunctions,ReferenceFunctions,EngFunctions,LogicalFunctions,TextFunctions,MathFunctions,TrigFunctions,WebFunctions,J.functions,J.functionsNeedContext),this.onRange=J.onRange,this.onCell=J.onCell,this.funsNullAs0=Object.keys(MathFunctions).concat(Object.keys(TrigFunctions)).concat(Object.keys(LogicalFunctions)).concat(Object.keys(EngFunctions)).concat(Object.keys(ReferenceFunctions)).concat(Object.keys(StatisticalFunctions)).concat(Object.keys(DateFunctions)),this.funsNeedContextAndNoDataRetrieve=["ROW","ROWS","COLUMN","COLUMNS","SUMIF","INDEX","AVERAGEIF","IF"],this.funsNeedContext=[...Object.keys(J.functionsNeedContext),...this.funsNeedContextAndNoDataRetrieve,"INDEX","OFFSET","INDIRECT","IF","CHOOSE","WEBSERVICE"],this.funsPreserveRef=Object.keys(InformationFunctions),this.parser=new Parser$2(this,this.utils)}static get allTokens(){return allTokens}getCell(J){return J.sheet==null&&(J.sheet=this.position?this.position.sheet:void 0),this.onCell(J)}getRange(J){return J.sheet==null&&(J.sheet=this.position?this.position.sheet:void 0),this.onRange(J)}getVariable(J){const ne={ref:this.onVariable(J,this.position.sheet,this.position)};return ne.ref==null?FormulaError$3.NAME:ne}retrieveRef(J){return FormulaHelpers$2.isRangeRef(J)?this.getRange(J.ref):FormulaHelpers$2.isCellRef(J)?this.getCell(J.ref):J}_callFunction(J,ne){J.indexOf("_xlfn.")===0&&(J=J.slice(6)),J=J.toUpperCase();const oe=this.funsNullAs0.includes(J)?0:"";if(this.funsNeedContextAndNoDataRetrieve.includes(J)||(ne=ne.map(ce=>{if(ce===null)return{value:oe,isArray:!1,omitted:!0};const ue=this.utils.extractRefValue(ce);return this.funsPreserveRef.includes(J)?{value:ue.val,isArray:ue.isArray,ref:ce.ref}:{value:ue.val,isArray:ue.isArray,isRangeRef:!!FormulaHelpers$2.isRangeRef(ce),isCellRef:!!FormulaHelpers$2.isCellRef(ce)}})),this.functions[J]){let ce;try{!this.funsNeedContextAndNoDataRetrieve.includes(J)&&!this.funsNeedContext.includes(J)?ce=this.functions[J](...ne):ce=this.functions[J](this,...ne)}catch(ue){if(ue instanceof FormulaError$3)return ue;throw ue}if(ce===void 0){if(this.isTest)return this.logs.includes(J)||this.logs.push(J),{value:0,ref:{}};throw FormulaError$3.NOT_IMPLEMENTED(J)}return ce}else{if(this.isTest)return this.logs.includes(J)||this.logs.push(J),{value:0,ref:{}};throw FormulaError$3.NOT_IMPLEMENTED(J)}}async callFunctionAsync(J,ne){const oe=[];for(const ue of ne)oe.push(await ue);const ce=await this._callFunction(J,oe);return FormulaHelpers$2.checkFunctionResult(ce)}callFunction(J,ne){if(this.async)return this.callFunctionAsync(J,ne);{const oe=this._callFunction(J,ne);return FormulaHelpers$2.checkFunctionResult(oe)}}supportedFunctions(){const J=[];return Object.keys(this.functions).forEach(oe=>{try{if(this.functions[oe](0,0,0,0,0,0,0,0,0,0,0)===void 0)return;J.push(oe)}catch(ce){ce instanceof Error&&J.push(oe)}}),J.sort()}checkFormulaResult(J,ne=!1){const oe=typeof J;if(oe==="number"){if(isNaN(J))return FormulaError$3.VALUE;if(!isFinite(J))return FormulaError$3.NUM;J+=0}else if(oe==="object"){if(J instanceof FormulaError$3)return J;if(ne){if(J.ref&&(J=this.retrieveRef(J)),typeof J=="object"&&!Array.isArray(J)&&J!=null)return FormulaError$3.VALUE}else if(J.ref&&J.ref.row&&!J.ref.from)J=this.retrieveRef(J);else if(J.ref&&J.ref.from&&J.ref.from.col===J.ref.to.col)J=this.retrieveRef({ref:{row:J.ref.from.row,col:J.ref.from.col}});else if(Array.isArray(J))J=J[0][0];else return FormulaError$3.VALUE}return J}parse(J,ne,oe=!1){if(J.length===0)throw Error("Input must not be empty.");this.position=ne,this.async=!1;const ce=lexer$1.lex(J);this.parser.input=ce.tokens;let ue;try{if(ue=this.parser.formulaWithBinaryOp(),ue=this.checkFormulaResult(ue,oe),ue instanceof FormulaError$3)return ue}catch(Ae){throw FormulaError$3.ERROR(Ae.message,Ae)}if(this.parser.errors.length>0){const Ae=this.parser.errors[0];throw Utils$2.formatChevrotainError(Ae,J)}return ue}async parseAsync(J,ne,oe=!1){if(J.length===0)throw Error("Input must not be empty.");this.position=ne,this.async=!0;const ce=lexer$1.lex(J);this.parser.input=ce.tokens;let ue;try{if(ue=await this.parser.formulaWithBinaryOp(),ue=this.checkFormulaResult(ue,oe),ue instanceof FormulaError$3)return ue}catch(Ae){throw FormulaError$3.ERROR(Ae.message,Ae)}if(this.parser.errors.length>0){const Ae=this.parser.errors[0];throw Utils$2.formatChevrotainError(Ae,J)}return ue}};var hooks$1={FormulaParser:FormulaParser$2,FormulaHelpers:FormulaHelpers$2};const FormulaError$2=requireError(),{FormulaHelpers:FormulaHelpers$1,Types,Address}=requireHelpers(),Collection=collection,MAX_ROW=1048576,MAX_COLUMN=16384;let Utils$1=class{constructor(J){this.context=J}columnNameToNumber(J){return Address.columnNameToNumber(J)}parseCellAddress(J){const ne=J.match(/([$]?)([A-Za-z]{1,3})([$]?)([1-9][0-9]*)/);return{ref:{col:this.columnNameToNumber(ne[2]),row:+ne[4]}}}parseRow(J){const ne=+J;if(!Number.isInteger(ne))throw Error("Row number must be integer.");return{ref:{col:void 0,row:+J}}}parseCol(J){return{ref:{col:this.columnNameToNumber(J),row:void 0}}}applyPrefix(J,ne){return this.extractRefValue(ne),0}applyPostfix(J,ne){return this.extractRefValue(J),0}applyInfix(J,ne,oe){return this.extractRefValue(J),this.extractRefValue(oe),0}applyIntersect(J){if(this.isFormulaError(J[0]))return J[0];if(!J[0].ref)throw Error(`Expecting a reference, but got ${J[0]}.`);let ne,oe,ce,ue,Ae,pe;const ve=J.shift().ref;if(Ae=ve.sheet,ve.from)ne=Math.max(ve.from.row,ve.to.row),ce=Math.min(ve.from.row,ve.to.row),oe=Math.max(ve.from.col,ve.to.col),ue=Math.min(ve.from.col,ve.to.col);else{if(ve.row===void 0||ve.col===void 0)throw Error("Cannot intersect the whole row or column.");ne=ce=ve.row,oe=ue=ve.col}let me;return J.forEach(ge=>{if(this.isFormulaError(ge))return ge;if(ge=ge.ref,!ge)throw Error(`Expecting a reference, but got ${ge}.`);if(ge.from){const ye=Math.max(ge.from.row,ge.to.row),xe=Math.min(ge.from.row,ge.to.row),_e=Math.max(ge.from.col,ge.to.col),$e=Math.min(ge.from.col,ge.to.col);(xe>ne||ye<ce||$e>oe||_e<ue||Ae!==ge.sheet)&&(me=FormulaError$2.NULL),ne=Math.min(ne,ye),ce=Math.max(ce,xe),oe=Math.min(oe,_e),ue=Math.max(ue,$e)}else{if(ge.row===void 0||ge.col===void 0)throw Error("Cannot intersect the whole row or column.");(ge.row>ne||ge.row<ce||ge.col>oe||ge.col<ue||Ae!==ge.sheet)&&(me=FormulaError$2.NULL),ne=ce=ge.row,oe=ue=ge.col}}),me||(ne===ce&&oe===ue?pe={ref:{sheet:Ae,row:ne,col:oe}}:pe={ref:{sheet:Ae,from:{row:ce,col:ue},to:{row:ne,col:oe}}},pe.ref.sheet||delete pe.ref.sheet,pe)}applyUnion(J){const ne=new Collection;for(let oe=0;oe<J.length;oe++){if(this.isFormulaError(J[oe]))return J[oe];ne.add(this.extractRefValue(J[oe]).val,J[oe])}return ne}applyRange(J){let ne,oe=-1,ce=-1,ue=MAX_ROW+1,Ae=MAX_COLUMN+1;return J.forEach(pe=>{if(this.isFormulaError(pe))return pe;typeof pe=="number"&&(pe=this.parseRow(pe)),pe=pe.ref,pe.row===void 0&&(ue=1,oe=MAX_ROW),pe.col===void 0&&(Ae=1,ce=MAX_COLUMN),pe.row>oe&&(oe=pe.row),pe.row<ue&&(ue=pe.row),pe.col>ce&&(ce=pe.col),pe.col<Ae&&(Ae=pe.col)}),oe===ue&&ce===Ae?ne={ref:{row:oe,col:ce}}:ne={ref:{from:{row:ue,col:Ae},to:{row:oe,col:ce}}},ne}extractRefValue(J){const ne=Array.isArray(J);return J.ref?{val:this.context.retrieveRef(J),isArray:ne}:{val:J,isArray:ne}}toArray(J){return J}toNumber(J){return Number(J)}toString(J){return J.substring(1,J.length-1).replace(/""/g,'"')}toBoolean(J){return J==="TRUE"}toError(J){return new FormulaError$2(J.toUpperCase())}isFormulaError(J){return J instanceof FormulaError$2}};var utils$4=Utils$1;const FormulaError$1=requireError(),{FormulaHelpers}=requireHelpers(),{Parser:Parser$1}=parsing,lexer=lexing,Utils=utils$4,{formatChevrotainError}=utils$5;let DepParser$1=class{constructor(J){this.data=[],this.utils=new Utils(this),J=Object.assign({onVariable:()=>null},J),this.utils=new Utils(this),this.onVariable=J.onVariable,this.functions={},this.parser=new Parser$1(this,this.utils)}getCell(J){return J.row!=null&&(J.sheet==null&&(J.sheet=this.position?this.position.sheet:void 0),this.data.findIndex(oe=>oe.from&&oe.from.row<=J.row&&oe.to.row>=J.row&&oe.from.col<=J.col&&oe.to.col>=J.col||oe.row===J.row&&oe.col===J.col&&oe.sheet===J.sheet)===-1&&this.data.push(J)),0}getRange(J){return J.from.row!=null&&(J.sheet==null&&(J.sheet=this.position?this.position.sheet:void 0),this.data.findIndex(oe=>oe.from&&oe.from.row===J.from.row&&oe.from.col===J.from.col&&oe.to.row===J.to.row&&oe.to.col===J.to.col)===-1&&this.data.push(J)),[[0]]}getVariable(J){const ne={ref:this.onVariable(J,this.position.sheet)};return ne.ref==null?FormulaError$1.NAME:(FormulaHelpers.isCellRef(ne)?this.getCell(ne.ref):this.getRange(ne.ref),0)}retrieveRef(J){return FormulaHelpers.isRangeRef(J)?this.getRange(J.ref):FormulaHelpers.isCellRef(J)?this.getCell(J.ref):J}callFunction(J,ne){return ne.forEach(oe=>{oe!=null&&this.retrieveRef(oe)}),{value:0,ref:{}}}checkFormulaResult(J){this.retrieveRef(J)}parse(J,ne,oe=!1){if(J.length===0)throw Error("Input must not be empty.");this.data=[],this.position=ne;const ce=lexer.lex(J);this.parser.input=ce.tokens;try{const ue=this.parser.formulaWithBinaryOp();this.checkFormulaResult(ue)}catch(ue){if(!oe)throw FormulaError$1.ERROR(ue.message,ue)}if(this.parser.errors.length>0&&!oe){const ue=this.parser.errors[0];throw formatChevrotainError(ue,J)}return this.data}};var hooks={DepParser:DepParser$1};const{FormulaParser}=hooks$1,{DepParser}=hooks,SSF=ssf$1,FormulaError=requireError();Object.assign(FormulaParser,{MAX_ROW:1048576,MAX_COLUMN:16384,SSF,DepParser,FormulaError,...requireHelpers()});var fastFormulaParser=FormulaParser;const FormulaParser$1=getDefaultExportFromCjs(fastFormulaParser),CONTEXT_VALUE=Symbol(),ORIGINAL_PROVIDER=Symbol(),isSSR=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect,runWithNormalPriority=schedulerExports.unstable_runWithPriority?K=>{try{schedulerExports.unstable_runWithPriority(schedulerExports.unstable_NormalPriority,K)}catch(J){if(J.message==="Not implemented.")K();else throw J}}:K=>K(),createProvider=K=>({value:ne,children:oe})=>{const ce=reactExports.useRef(ne),ue=reactExports.useRef(0),[Ae,pe]=reactExports.useState(null);Ae&&(Ae(ne),pe(null));const ve=reactExports.useRef();if(!ve.current){const me=new Set,ge=(ye,xe)=>{reactDomExports.unstable_batchedUpdates(()=>{ue.current+=1;const _e={n:ue.current};xe!=null&&xe.suspense&&(_e.n*=-1,_e.p=new Promise($e=>{pe(()=>Ie=>{_e.v=Ie,delete _e.p,$e(Ie)})})),me.forEach($e=>$e(_e)),ye()})};ve.current={[CONTEXT_VALUE]:{v:ce,n:ue,l:me,u:ge}}}return useIsomorphicLayoutEffect$1(()=>{ce.current=ne,ue.current+=1,runWithNormalPriority(()=>{ve.current[CONTEXT_VALUE].l.forEach(me=>{me({n:ue.current,v:ne})})})},[ne]),reactExports.createElement(K,{value:ve.current},oe)};function createContext(K){const J=reactExports.createContext({[CONTEXT_VALUE]:{v:{current:K},n:{current:-1},l:new Set,u:ne=>ne()}});return J[ORIGINAL_PROVIDER]=J.Provider,J.Provider=createProvider(J.Provider),delete J.Consumer,J}function useContextSelector(K,J){const ne=reactExports.useContext(K)[CONTEXT_VALUE];process$1;const{v:{current:oe},n:{current:ce},l:ue}=ne,Ae=J(oe),[pe,ve]=reactExports.useReducer((me,ge)=>{if(!ge)return[oe,Ae];if("p"in ge)throw ge.p;if(ge.n===ce)return Object.is(me[1],Ae)?me:[oe,Ae];try{if("v"in ge){if(Object.is(me[0],ge.v))return me;const ye=J(ge.v);return Object.is(me[1],ye)?me:[ge.v,ye]}}catch{}return[...me]},[oe,Ae]);return Object.is(pe[1],Ae)||ve(),useIsomorphicLayoutEffect$1(()=>(ue.add(ve),()=>{ue.delete(ve)}),[ue]),pe[1]}var extendStatics$1=function(K,J){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,oe){ne.__proto__=oe}||function(ne,oe){for(var ce in oe)Object.prototype.hasOwnProperty.call(oe,ce)&&(ne[ce]=oe[ce])},extendStatics$1(K,J)};function __extends$2(K,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");extendStatics$1(K,J);function ne(){this.constructor=K}K.prototype=J===null?Object.create(J):(ne.prototype=J.prototype,new ne)}var __assign$2=function(){return __assign$2=Object.assign||function(J){for(var ne,oe=1,ce=arguments.length;oe<ce;oe++){ne=arguments[oe];for(var ue in ne)Object.prototype.hasOwnProperty.call(ne,ue)&&(J[ue]=ne[ue])}return J},__assign$2.apply(this,arguments)};function __generator$2(K,J){var ne={label:0,sent:function(){if(ue[0]&1)throw ue[1];return ue[1]},trys:[],ops:[]},oe,ce,ue,Ae;return Ae={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function pe(me){return function(ge){return ve([me,ge])}}function ve(me){if(oe)throw new TypeError("Generator is already executing.");for(;Ae&&(Ae=0,me[0]&&(ne=0)),ne;)try{if(oe=1,ce&&(ue=me[0]&2?ce.return:me[0]?ce.throw||((ue=ce.return)&&ue.call(ce),0):ce.next)&&!(ue=ue.call(ce,me[1])).done)return ue;switch(ce=0,ue&&(me=[me[0]&2,ue.value]),me[0]){case 0:case 1:ue=me;break;case 4:return ne.label++,{value:me[1],done:!1};case 5:ne.label++,ce=me[1],me=[0];continue;case 7:me=ne.ops.pop(),ne.trys.pop();continue;default:if(ue=ne.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(me[0]===6||me[0]===2)){ne=0;continue}if(me[0]===3&&(!ue||me[1]>ue[0]&&me[1]<ue[3])){ne.label=me[1];break}if(me[0]===6&&ne.label<ue[1]){ne.label=ue[1],ue=me;break}if(ue&&ne.label<ue[2]){ne.label=ue[2],ne.ops.push(me);break}ue[2]&&ne.ops.pop(),ne.trys.pop();continue}me=J.call(K,ne)}catch(ge){me=[6,ge],ce=0}finally{oe=ue=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}}function __values(K){var J=typeof Symbol=="function"&&Symbol.iterator,ne=J&&K[J],oe=0;if(ne)return ne.call(K);if(K&&typeof K.length=="number")return{next:function(){return K&&oe>=K.length&&(K=void 0),{value:K&&K[oe++],done:!K}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(K,J){var ne=typeof Symbol=="function"&&K[Symbol.iterator];if(!ne)return K;var oe=ne.call(K),ce,ue=[],Ae;try{for(;(J===void 0||J-- >0)&&!(ce=oe.next()).done;)ue.push(ce.value)}catch(pe){Ae={error:pe}}finally{try{ce&&!ce.done&&(ne=oe.return)&&ne.call(oe)}finally{if(Ae)throw Ae.error}}return ue}function __spreadArray$2(K,J,ne){if(arguments.length===2)for(var oe=0,ce=J.length,ue;oe<ce;oe++)(ue||!(oe in J))&&(ue||(ue=Array.prototype.slice.call(J,0,oe)),ue[oe]=J[oe]);return K.concat(ue||Array.prototype.slice.call(J))}var SET_DATA="SET_DATA",SET_CREATE_FORMULA_PARSER="SET_CREATE_FORMULA_PARSER",SELECT_ENTIRE_ROW="SELECT_ENTIRE_ROW",SELECT_ENTIRE_COLUMN="SELECT_ENTIRE_COLUMN",SELECT_ENTIRE_WORKSHEET="SELECT_ENTIRE_WORKSHEET",SET_SELECTION="SET_SELECTION",SELECT="SELECT",ACTIVATE="ACTIVATE",SET_CELL_DATA="SET_CELL_DATA",SET_CELL_DIMENSIONS="SET_CELL_DIMENSIONS",COPY="COPY",CUT="CUT",PASTE="PASTE",EDIT="EDIT",VIEW="VIEW",CLEAR="CLEAR",BLUR="BLUR",KEY_PRESS="KEY_PRESS",KEY_DOWN="KEY_DOWN",DRAG_START="DRAG_START",DRAG_END="DRAG_END",COMMIT="COMMIT";function setData(K){return{type:SET_DATA,payload:{data:K}}}function setCreateFormulaParser(K){return{type:SET_CREATE_FORMULA_PARSER,payload:{createFormulaParser:K}}}function selectEntireRow(K,J){return{type:SELECT_ENTIRE_ROW,payload:{row:K,extend:J}}}function selectEntireColumn(K,J){return{type:SELECT_ENTIRE_COLUMN,payload:{column:K,extend:J}}}function selectEntireWorksheet(){return{type:SELECT_ENTIRE_WORKSHEET}}function setSelection(K){return{type:SET_SELECTION,payload:{selection:K}}}function select$5(K){return{type:SELECT,payload:{point:K}}}function activate(K){return{type:ACTIVATE,payload:{point:K}}}function setCellData(K,J){return{type:SET_CELL_DATA,payload:{active:K,data:J}}}function setCellDimensions(K,J){return{type:SET_CELL_DIMENSIONS,payload:{point:K,dimensions:J}}}function paste(K){return{type:PASTE,payload:{data:K}}}function keyPress(K){return{type:KEY_PRESS,payload:{event:K}}}function keyDown(K){return{type:KEY_DOWN,payload:{event:K}}}function dragStart(){return{type:DRAG_START}}function dragEnd(){return{type:DRAG_END}}function commit$1(K){return{type:COMMIT,payload:{changes:K}}}function copy(){return{type:COPY}}function cut(){return{type:CUT}}function edit$1(){return{type:EDIT}}function view$1(){return{type:VIEW}}function blur$1(){return{type:BLUR}}function get$2(K,J){var ne=J[K.row];if(ne!==void 0)return ne[K.column]}function slice(K,J,ne){for(var oe=[],ce=J.column-K.column,ue=K.row;ue<=J.row;ue++){var Ae=ue-K.row;oe[Ae]=oe[Ae]||Array(ce);for(var pe=K.column;pe<=J.column;pe++)oe[Ae][pe-K.column]=get$2({row:ue,column:pe},ne)}return oe}function set$2(K,J,ne){var oe=__spreadArray$2([],__read$1(ne),!1),ce=ne[0],ue=ce?__spreadArray$2([],__read$1(ce),!1):[];ue.length-1<K.column&&(ue[K.column]=void 0,oe[0]=ue);var Ae=ne[K.row]?__spreadArray$2([],__read$1(ne[K.row]),!1):[];return Ae[K.column]=J,oe[K.row]=Ae,oe}function mutableSet(K,J,ne){var oe=ne[0];oe||(oe=[],ne[0]=oe),K.row in ne||(ne[K.row]=[]),K.column in oe||(oe[K.column]=void 0),ne[K.row][K.column]=J}function unset(K,J){if(!has$1(K,J))return J;var ne=__spreadArray$2([],__read$1(J),!1),oe=__spreadArray$2([],__read$1(J[K.row]),!1);return oe[K.column]=void 0,ne[K.row]=oe,ne}function map(K,J){var ne,oe,ce=[];try{for(var ue=__values(entries(J)),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=__read$1(Ae.value,2),ve=pe[0],me=pe[1];mutableSet(ve,K(me,ve),ce)}}catch(ge){ne={error:ge}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return ce}function entries(K){var J,ne,oe,ce,ue,Ae,pe,ve,me,ge,ye,xe,_e,$e,Ie,Fe,ke;return __generator$2(this,function(je){switch(je.label){case 0:je.trys.push([0,11,12,13]),J=__values(K.entries()),ne=J.next(),je.label=1;case 1:if(ne.done)return[3,10];oe=__read$1(ne.value,2),ce=oe[0],ue=oe[1],je.label=2;case 2:je.trys.push([2,7,8,9]),Ae=(Fe=void 0,__values(ue.entries())),pe=Ae.next(),je.label=3;case 3:return pe.done?[3,6]:(ve=__read$1(pe.value,2),me=ve[0],ge=ve[1],ye={row:ce,column:me},[4,[ye,ge]]);case 4:je.sent(),je.label=5;case 5:return pe=Ae.next(),[3,3];case 6:return[3,9];case 7:return xe=je.sent(),Fe={error:xe},[3,9];case 8:try{pe&&!pe.done&&(ke=Ae.return)&&ke.call(Ae)}finally{if(Fe)throw Fe.error}return[7];case 9:return ne=J.next(),[3,1];case 10:return[3,13];case 11:return _e=je.sent(),$e={error:_e},[3,13];case 12:try{ne&&!ne.done&&(Ie=J.return)&&Ie.call(J)}finally{if($e)throw $e.error}return[7];case 13:return[2]}})}function join$1(K,J,ne){J===void 0&&(J="	"),ne===void 0&&(ne=`
`);for(var oe="",ce=getSize$1(K),ue=ce.rows,Ae=ce.columns,pe=0;pe<ue;pe++){pe&&(oe+=ne);for(var ve=0;ve<Ae;ve++)ve&&(oe+=J),K[pe]&&ve in K[pe]&&(oe+=String(K[pe][ve]))}return oe}function split(K,J,ne,oe){ne===void 0&&(ne="	"),oe===void 0&&(oe=/\r\n|\n|\r/);var ce=K.replace(/"([^"]*?)"/g,function(ue,Ae){return Ae.replace(/\n/g,"\\n")});return ce.split(oe).map(function(ue){return ue.split(ne).map(function(Ae){return Ae.replace(/\\n/g,`
`)}).map(J)})}function has$1(K,J){var ne=J[0];return ne&&K.row>=0&&K.column>=0&&Number.isInteger(K.row)&&Number.isInteger(K.column)&&K.column<ne.length&&K.row<J.length}function getSize$1(K){return{columns:getColumnsCount(K),rows:getRowsCount(K)}}function getRowsCount(K){return K.length}function getColumnsCount(K){var J=K[0];return J?J.length:0}function pad(K,J){var ne=getSize$1(K),oe=ne.rows,ce=ne.columns;if(oe>=J.rows&&ce>=J.columns)return K;var ue={rows:J.rows>oe?J.rows:oe,columns:J.columns>ce?J.columns:ce},Ae=__spreadArray$2([],__read$1(K),!1);if(ue.columns>ce){var pe=ue.columns-ce;Ae=Ae.map(function(ge){return __spreadArray$2(__spreadArray$2([],__read$1(ge),!1),__read$1(Array(pe).fill(void 0)),!1)})}if(ue.rows>oe){var ve=ue.rows-oe,me=Array(ue.columns).fill(void 0);Ae=__spreadArray$2(__spreadArray$2([],__read$1(Ae),!1),__read$1(Array(ve).fill(me)),!1)}return Ae}function toArray(K,J){for(var ne=[],oe=0;oe<K.length;oe++)for(var ce=0;ce<K[oe].length;ce++){var ue=K[oe][ce];ne.push(J?J(ue,{row:oe,column:ce}):ue)}return ne}function maxPoint(K){var J=getSize$1(K);return{row:J.rows-1,column:J.columns-1}}var PointRange=function(){function K(J,ne){this.start={row:Math.min(J.row,ne.row),column:Math.min(J.column,ne.column)},this.end={row:Math.max(J.row,ne.row),column:Math.max(J.column,ne.column)}}return K.prototype[Symbol.iterator]=function(){var J,ne;return __generator$2(this,function(oe){switch(oe.label){case 0:J=this.start.row,oe.label=1;case 1:if(!(J<=this.end.row))return[3,6];ne=this.start.column,oe.label=2;case 2:return ne<=this.end.column?[4,{row:J,column:ne}]:[3,5];case 3:oe.sent(),oe.label=4;case 4:return ne++,[3,2];case 5:return J++,[3,1];case 6:return[2]}})},K.prototype.size=function(){var J=this.end.row+1-this.start.row,ne=this.end.column+1-this.start.column;return J*ne},K.prototype.has=function(J){return J.row>=this.start.row&&J.column>=this.start.column&&J.row<=this.end.row&&J.column<=this.end.column},K.prototype.mask=function(J){return new K({row:J.start.row>this.start.row?J.start.row:this.start.row,column:J.start.column>this.start.column?J.start.column:this.start.column},{row:J.end.row<this.end.row?J.end.row:this.end.row,column:J.end.column<this.end.column?J.end.column:this.end.column})},K.prototype.equals=function(J){return this.start.row===J.start.row&&this.start.column===J.start.column&&this.end.row===J.end.row&&this.end.column===J.end.column},K}();function isEqual$4(K,J){return K.column===J.column&&K.row===J.row}var ORIGIN={row:0,column:0},Selection$2=function(){function K(){}return K}(),EmptySelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.toRange=function(ne){return null},J.prototype.normalizeTo=function(ne){return this},J.prototype.hasEntireRow=function(ne){return!1},J.prototype.hasEntireColumn=function(ne){return!1},J.prototype.size=function(){return 0},J.prototype.has=function(){return!1},J.prototype.equals=function(ne){return ne instanceof J},J}(Selection$2),RangeSelection=function(K){__extends$2(J,K);function J(ne){var oe=K.call(this)||this;return oe.range=ne,oe}return J.prototype.toRange=function(ne){return this.range},J.prototype.normalizeTo=function(ne){var oe=getMatrixRange(ne),ce=new J(this.range.mask(oe));return ce},J.prototype.hasEntireRow=function(ne){return!1},J.prototype.hasEntireColumn=function(ne){return!1},J.prototype.size=function(ne){var oe=this.toRange(ne);return oe?oe.size():0},J.prototype.has=function(ne,oe){var ce=this.toRange(ne);return ce!==null&&ce.has(oe)},J.prototype.equals=function(ne){return ne instanceof J&&this.range.equals(ne.range)},J}(Selection$2),EntireSelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J}(Selection$2),EntireWorksheetSelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.toRange=function(ne){return getMatrixRange(ne)},J.prototype.normalizeTo=function(ne){return this},J.prototype.hasEntireColumn=function(ne){return!0},J.prototype.hasEntireRow=function(ne){return!0},J.prototype.size=function(ne){return getColumnsCount(ne)*getRowsCount(ne)},J.prototype.has=function(ne,oe){return!0},J.prototype.equals=function(ne){return ne instanceof J},J}(EntireSelection),EntireAxisSelection=function(K){__extends$2(J,K);function J(ne,oe){var ce=this;if(!isIndex$2(ne))throw new InvalidIndexError("start");if(!isIndex$2(oe))throw new InvalidIndexError("end");return ce=K.call(this)||this,ce.start=Math.min(ne,oe),ce.end=Math.max(ne,oe),ce}return J.prototype.equals=function(ne){return ne instanceof J&&this.constructor===ne.constructor&&this.start===ne.start&&this.end===ne.end},J}(EntireSelection),EntireRowsSelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.toRange=function(ne){var oe=maxPoint(ne);return new PointRange({row:this.start,column:0},{row:this.end,column:oe.column})},J.prototype.normalizeTo=function(ne){var oe=getRowsCount(ne),ce=new J(Math.max(this.start,0),Math.min(this.end,oe-1));return ce},J.prototype.hasEntireRow=function(ne){return ne>=this.start&&ne<=this.end},J.prototype.hasEntireColumn=function(ne){return!1},J.prototype.size=function(ne){var oe=this.end-this.start+1;return oe*getColumnsCount(ne)},J.prototype.has=function(ne,oe){return oe.row>=this.start&&oe.row<=this.end},J}(EntireAxisSelection),EntireColumnsSelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.toRange=function(ne){var oe=maxPoint(ne);return new PointRange({row:0,column:this.start},{row:oe.row,column:this.end})},J.prototype.normalizeTo=function(ne){var oe=getColumnsCount(ne),ce=new J(Math.max(this.start,0),Math.min(this.end,oe-1));return ce},J.prototype.hasEntireRow=function(ne){return!1},J.prototype.hasEntireColumn=function(ne){return ne>=this.start&&ne<=this.end},J.prototype.size=function(ne){var oe=this.end-this.start+1;return oe*getRowsCount(ne)},J.prototype.has=function(ne,oe){return oe.column>=this.start&&oe.column<=this.end},J}(EntireAxisSelection);function getMatrixRange(K){var J=maxPoint(K);return new PointRange(ORIGIN,J)}function isIndex$2(K){return Number.isInteger(K)&&K>=0}var InvalidIndexError=function(K){__extends$2(J,K);function J(ne){return K.call(this,"".concat(ne," is not a valid index. It must be 0 or a positive integer"))||this}return J}(Error),PLAIN_TEXT_MIME="text/plain",FOCUS_WITHIN_SELECTOR=":focus-within";function moveCursorToEnd(K){K.selectionStart=K.selectionEnd=K.value.length}function range(K,J,ne){J===void 0&&(J=0),ne===void 0&&(ne=1);var oe=[];if(Math.sign(K-J)===-1){for(var ce=J;ce>K;ce-=ne)oe.push(ce);return oe}for(var ce=J;ce<K;ce+=ne)oe.push(ce);return oe}function isActive$1(K,J){return!!(K&&isEqual$4(J,K))}function getOffsetRect(K){return{width:K.offsetWidth,height:K.offsetHeight,left:K.offsetLeft,top:K.offsetTop}}function writeTextToClipboard(K,J){var ne;(ne=K.clipboardData)===null||ne===void 0||ne.setData(PLAIN_TEXT_MIME,J)}function readTextFromClipboard(K){return window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):K.clipboardData&&K.clipboardData.getData?K.clipboardData.getData(PLAIN_TEXT_MIME):""}function getCellDimensions(K,J,ne){var oe=J&&J[K.row],ce=ne&&ne[K.column];return oe&&ce&&__assign$2(__assign$2({},oe),ce)}function getRangeDimensions(K,J,ne){var oe=getCellDimensions(ne.start,K,J),ce=getCellDimensions(ne.end,K,J);return oe&&ce&&{width:ce.left+ce.width-oe.left,height:ce.top+ce.height-oe.top,top:oe.top,left:oe.left}}function getSelectedDimensions(K,J,ne,oe){var ce=oe.toRange(ne);return ce?getRangeDimensions(K,J,ce):void 0}function getCSV(K){var J=map(function(ne){return(ne==null?void 0:ne.value)||""},K);return join$1(J)}function calculateSpreadsheetSize(K,J,ne){var oe=getSize$1(K),ce=oe.columns,ue=oe.rows;return{rows:J?Math.max(ue,J.length):ue,columns:ne?Math.max(ce,ne.length):ce}}function shouldHandleClipboardEvent(K,J){return K!==null&&J==="view"&&isFocusedWithin(K)}function isFocusedWithin(K){return K.matches(FOCUS_WITHIN_SELECTOR)}function hasLineBreaker(K){return typeof K=="string"&&K.includes(`
`)}function toString$2(K){return"".concat(K.row,",").concat(K.column)}function fromString(K){var J=__read$1(K.split(","),2),ne=J[0],oe=J[1];return{row:Number(ne),column:Number(oe)}}var PointSet=function(){function K(J){this.set=J}return K.from=function(J){var ne,oe,ce=new Set;try{for(var ue=__values(J),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=Ae.value;ce.add(toString$2(pe))}}catch(ve){ne={error:ve}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return new K(ce)},K.prototype.has=function(J){return this.set.has(toString$2(J))},Object.defineProperty(K.prototype,"size",{get:function(){return this.set.size},enumerable:!1,configurable:!0}),K.prototype.add=function(J){var ne=new Set(this.set);return ne.add(toString$2(J)),new K(ne)},K.prototype.delete=function(J){var ne=new Set(this.set);return ne.delete(toString$2(J))?new K(ne):this},K.prototype.difference=function(J){var ne,oe,ce=this;try{for(var ue=__values(J),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=Ae.value;ce=ce.delete(pe)}}catch(ve){ne={error:ve}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return ce},K.prototype.union=function(J){var ne,oe,ce=this;try{for(var ue=__values(J),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=Ae.value;ce=ce.add(pe)}}catch(ve){ne={error:ve}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return ce},K.prototype[Symbol.iterator]=function(){var J,ne,oe,ce,ue,Ae;return __generator$2(this,function(pe){switch(pe.label){case 0:pe.trys.push([0,5,6,7]),J=__values(this.set),ne=J.next(),pe.label=1;case 1:return ne.done?[3,4]:(oe=ne.value,[4,fromString(oe)]);case 2:pe.sent(),pe.label=3;case 3:return ne=J.next(),[3,1];case 4:return[3,7];case 5:return ce=pe.sent(),ue={error:ce},[3,7];case 6:try{ne&&!ne.done&&(Ae=J.return)&&Ae.call(J)}finally{if(ue)throw ue.error}return[7];case 7:return[2]}})},K}(),FORMULA_VALUE_PREFIX="=";function isFormulaValue(K){return typeof K=="string"&&K.startsWith(FORMULA_VALUE_PREFIX)&&K.length>1}function extractFormula(K){return K.slice(1)}function createFormulaParser(K,J){return new FormulaParser$1(__assign$2(__assign$2({},J),{onCell:function(ne){var oe={row:ne.row-1,column:ne.col-1},ce=get$2(oe,K);return isNaN(ce==null?void 0:ce.value)?ce==null?void 0:ce.value:Number(ce==null?void 0:ce.value)},onRange:function(ne){var oe=getSize$1(K),ce={row:ne.from.row-1,column:ne.from.col-1},ue={row:Math.min(ne.to.row-1,oe.rows-1),column:Math.min(ne.to.col-1,oe.columns-1)},Ae=slice(ce,ue,K);return toArray(Ae,function(pe){return isNaN(pe==null?void 0:pe.value)?pe==null?void 0:pe.value:Number(pe==null?void 0:pe.value)})}}))}var depParser=new fastFormulaParser.DepParser;function getReferences(K,J,ne){var oe=getSize$1(ne),ce=oe.rows,ue=oe.columns;try{var Ae=depParser.parse(K,convertPointToCellRef(J)),pe=PointSet.from(Ae.flatMap(function(ve){var me="from"in ve;if(me){var ge=ve.from,ye=ve.to,xe={row:ge.row-1,column:ge.col-1},_e={row:Math.min(ye.row-1,ce-1),column:Math.min(ye.col-1,ue-1)},$e=new PointRange(xe,_e);return Array.from($e)}return{row:ve.row-1,column:ve.col-1}}));return pe}catch(ve){if(ve instanceof fastFormulaParser.FormulaError)return PointSet.from([]);throw ve}}function evaluate(K,J,ne){try{var oe=convertPointToCellRef(J),ce=ne.parse(K,oe);return ce instanceof fastFormulaParser.FormulaError?ce.toString():ce}catch(ue){if(ue instanceof fastFormulaParser.FormulaError)return ue.toString();throw ue}}function convertPointToCellRef(K){return{row:K.row+1,col:K.column+1,sheet:"Sheet1"}}var PointGraph=function(){function K(J){J===void 0&&(J=new Map),this.forwards=J}return K.from=function(J){var ne,oe,ce=new Map;try{for(var ue=__values(J),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=__read$1(Ae.value,2),ve=pe[0],me=pe[1];ce.set(toString$2(ve),me)}}catch(ge){ne={error:ge}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return new K(ce)},K.prototype.set=function(J,ne){var oe=new K(new Map(this.forwards));return ne.size===0?(oe.forwards.delete(toString$2(J)),oe):(oe.forwards.set(toString$2(J),ne),oe)},K.prototype.get=function(J){return this.forwards.get(toString$2(J))||PointSet.from([])},K.prototype.getBackwards=function(J){var ne,oe,ce=PointSet.from([]);try{for(var ue=__values(this.forwards),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=__read$1(Ae.value,2),ve=pe[0],me=pe[1];me.has(J)&&(ce=ce.add(fromString(ve)))}}catch(ge){ne={error:ge}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return ce},K.prototype.getBackwardsRecursive=function(J,ne){var oe,ce;ne===void 0&&(ne=PointSet.from([]));var ue=this.getBackwards(J),Ae=ne;try{for(var pe=__values(ue),ve=pe.next();!ve.done;ve=pe.next()){var me=ve.value;Ae.has(me)||(Ae=Ae.add(me),ue=ue.union(this.getBackwardsRecursive(me,Ae)))}}catch(ge){oe={error:ge}}finally{try{ve&&!ve.done&&(ce=pe.return)&&ce.call(pe)}finally{if(oe)throw oe.error}}return ue},K.prototype.hasCircularDependency=function(J){for(var ne,oe,ce=PointSet.from([]),ue=[J];ue.length>0;){var Ae=ue.pop();if(Ae){if(ce.has(Ae))return!0;ce=ce.add(Ae);var pe=this.get(Ae);if(pe)try{for(var ve=(ne=void 0,__values(pe)),me=ve.next();!me.done;me=ve.next()){var ge=me.value;ue.push(ge)}}catch(ye){ne={error:ye}}finally{try{me&&!me.done&&(oe=ve.return)&&oe.call(ve)}finally{if(ne)throw ne.error}}}}return!1},K.prototype[Symbol.iterator]=function(){var J,ne,oe,ce,ue,Ae,pe,ve,me,ge,ye,xe,_e,$e,Ie,Fe,ke;return __generator$2(this,function(je){switch(je.label){case 0:J=new Set,je.label=1;case 1:je.trys.push([1,13,14,15]),ne=__values(this.forwards),oe=ne.next(),je.label=2;case 2:return oe.done?[3,12]:(ce=__read$1(oe.value,2),ue=ce[0],Ae=ce[1],pe=fromString(ue),J.add(ue),[4,[pe,Ae]]);case 3:je.sent(),je.label=4;case 4:je.trys.push([4,9,10,11]),ve=(Fe=void 0,__values(Ae)),me=ve.next(),je.label=5;case 5:return me.done?[3,8]:(ge=me.value,ye=toString$2(ge),!J.has(ye)&&!this.forwards.has(ye)?(J.add(ye),[4,[ge,PointSet.from([])]]):[3,7]);case 6:je.sent(),je.label=7;case 7:return me=ve.next(),[3,5];case 8:return[3,11];case 9:return xe=je.sent(),Fe={error:xe},[3,11];case 10:try{me&&!me.done&&(ke=ve.return)&&ke.call(ve)}finally{if(Fe)throw Fe.error}return[7];case 11:return oe=ne.next(),[3,2];case 12:return[3,15];case 13:return _e=je.sent(),$e={error:_e},[3,15];case 14:try{oe&&!oe.done&&(Ie=ne.return)&&Ie.call(ne)}finally{if($e)throw $e.error}return[7];case 15:return[2]}})},K.prototype.traverseBFSBackwards=function(){var J,ne,oe,ce,ue,pe,Ae,pe,ve,me,ge,ye,xe,_e,$e,Ie;return __generator$2(this,function(Fe){switch(Fe.label){case 0:J=PointSet.from([]),ne=[];try{for(oe=__values(this),ce=oe.next();!ce.done;ce=oe.next())ue=__read$1(ce.value,2),pe=ue[0],Ae=ue[1],Ae.size===0&&(J=J.add(pe),ne.push(pe))}catch(ke){xe={error:ke}}finally{try{ce&&!ce.done&&(_e=oe.return)&&_e.call(oe)}finally{if(xe)throw xe.error}}Fe.label=1;case 1:return ne.length>0?(pe=ne.shift(),pe?[4,pe]:[3,1]):[3,3];case 2:if(Fe.sent(),ve=this.getBackwards(pe),ve.size===0)return[3,1];try{for(me=($e=void 0,__values(ve)),ge=me.next();!ge.done;ge=me.next())ye=ge.value,!J.has(ye)&&this.get(ye).difference(J).size===0&&(ne.push(ye),J=J.add(ye))}catch(ke){$e={error:ke}}finally{try{ge&&!ge.done&&(Ie=me.return)&&Ie.call(me)}finally{if($e)throw $e.error}}return[3,1];case 3:return[2]}})},K}(),Model=function(){function K(J,ne,oe,ce){this.createFormulaParser=J,this.data=ne,this.referenceGraph=oe||createReferenceGraph(ne),this.evaluatedData=ce||createEvaluatedData(ne,this.referenceGraph,this.createFormulaParser)}return K}();function updateCellValue(K,J,ne){var oe=set$2(J,ne,K.data),ce=isFormulaValue(ne.value)?updateReferenceGraph(K.referenceGraph,J,ne,oe):K.referenceGraph,ue=K.createFormulaParser(oe),Ae=evaluateCell(K.evaluatedData,oe,ce,J,ne,ue);return new Model(K.createFormulaParser,oe,ce,Ae)}function updateReferenceGraph(K,J,ne,oe){var ce=getReferences(extractFormula(ne.value),J,oe),ue=K.set(J,ce);return ue}function evaluateCell(K,J,ne,oe,ce,ue){var Ae,pe,ve,me;if(ne.hasCircularDependency(oe)){var ge=PointSet.from([oe]),ye=set$2(oe,__assign$2(__assign$2({},ce),{value:fastFormulaParser.FormulaError.REF}),K);try{for(var xe=__values(ne.getBackwardsRecursive(oe)),_e=xe.next();!_e.done;_e=xe.next()){var $e=_e.value;if(ge.has($e))break;ge=ge.add($e);var Ie=get$2($e,J);Ie&&(ye=set$2($e,__assign$2(__assign$2({},Ie),{value:fastFormulaParser.FormulaError.REF}),ye))}}catch(nt){Ae={error:nt}}finally{try{_e&&!_e.done&&(pe=xe.return)&&pe.call(xe)}finally{if(Ae)throw Ae.error}}return ye}var Fe=K,ke=isFormulaValue(ce.value)?getFormulaComputedValue(ce.value,oe,ue):ce.value,je=__assign$2(__assign$2({},ce),{value:ke});Fe=set$2(oe,je,Fe);try{for(var We=__values(ne.getBackwardsRecursive(oe)),ze=We.next();!ze.done;ze=We.next()){var $e=ze.value,Ie=get$2($e,J);if(Ie){var Xe=isFormulaValue(Ie.value)?getFormulaComputedValue(Ie.value,oe,ue):Ie.value,Je=__assign$2(__assign$2({},Ie),{value:Xe});Fe=set$2($e,Je,Fe)}}}catch(nt){ve={error:nt}}finally{try{ze&&!ze.done&&(me=We.return)&&me.call(We)}finally{if(ve)throw ve.error}}return Fe}function createReferenceGraph(K){var J,ne,oe=[];try{for(var ce=__values(entries(K)),ue=ce.next();!ue.done;ue=ce.next()){var Ae=__read$1(ue.value,2),pe=Ae[0],ve=Ae[1];if(ve&&isFormulaValue(ve.value)){var me=getReferences(extractFormula(ve.value),pe,K);oe.push([pe,me])}}}catch(ge){J={error:ge}}finally{try{ue&&!ue.done&&(ne=ce.return)&&ne.call(ce)}finally{if(J)throw J.error}}return PointGraph.from(oe)}function createEvaluatedData(K,J,ne){var oe,ce,ue=K,Ae=ne(ue);try{for(var pe=__values(J.traverseBFSBackwards()),ve=pe.next();!ve.done;ve=pe.next()){var me=ve.value,ge=get$2(me,K);if(ge&&isFormulaValue(ge.value)){var ye=getFormulaComputedValue(ge.value,me,Ae);ue=set$2(me,__assign$2(__assign$2({},ge),{value:ye}),ue),Ae=ne(ue)}}}catch(xe){oe={error:xe}}finally{try{ve&&!ve.done&&(ce=pe.return)&&ce.call(pe)}finally{if(oe)throw oe.error}}return ue}function getFormulaComputedValue(K,J,ne){var oe=extractFormula(K);try{return evaluate(oe,J,ne)}catch{return fastFormulaParser.FormulaError.REF}}var INITIAL_STATE={active:null,mode:"view",rowDimensions:{},columnDimensions:{},lastChanged:null,hasPasted:!1,cut:!1,dragging:!1,model:new Model(createFormulaParser,[]),selected:new EmptySelection,copied:null,lastCommit:null};function reducer$6(K,J){var ne,oe,ce,ue,Ae,pe;switch(J.type){case SET_DATA:{var ve=J.payload.data,me=K.active&&has$1(K.active,ve)?K.active:null,ge=K.selected.normalizeTo(ve);return __assign$2(__assign$2({},K),{model:new Model(K.model.createFormulaParser,ve),active:me,selected:ge})}case SET_CREATE_FORMULA_PARSER:{var ye=J.payload.createFormulaParser;return __assign$2(__assign$2({},K),{model:new Model(ye,K.model.data)})}case SELECT_ENTIRE_ROW:{var xe=J.payload,_e=xe.row,$e=xe.extend,Ie=K.active;return __assign$2(__assign$2({},K),{selected:$e&&Ie?new EntireRowsSelection(Ie.row,_e):new EntireRowsSelection(_e,_e),active:$e&&Ie?Ie:__assign$2(__assign$2({},ORIGIN),{row:_e}),mode:"view"})}case SELECT_ENTIRE_COLUMN:{var Fe=J.payload,ke=Fe.column,$e=Fe.extend,Ie=K.active;return __assign$2(__assign$2({},K),{selected:$e&&Ie?new EntireColumnsSelection(Ie.column,ke):new EntireColumnsSelection(ke,ke),active:$e&&Ie?Ie:__assign$2(__assign$2({},ORIGIN),{column:ke}),mode:"view"})}case SELECT_ENTIRE_WORKSHEET:return __assign$2(__assign$2({},K),{selected:new EntireWorksheetSelection,active:ORIGIN,mode:"view"});case SET_SELECTION:{var je=J.payload.selection,We=je.toRange(K.model.data),Ie=K.active&&je.has(K.model.data,K.active)?K.active:We==null?void 0:We.start;return __assign$2(__assign$2({},K),{selected:je,active:Ie||null,mode:"view"})}case SELECT:{var ze=J.payload.point;return K.active&&!isActive$1(K.active,ze)?__assign$2(__assign$2({},K),{selected:new RangeSelection(new PointRange(ze,K.active)),mode:"view"}):K}case ACTIVATE:{var ze=J.payload.point;return __assign$2(__assign$2({},K),{selected:new RangeSelection(new PointRange(ze,ze)),active:ze,mode:isActive$1(K.active,ze)?"edit":"view"})}case SET_CELL_DATA:{var Xe=J.payload,Ie=Xe.active,Je=Xe.data;return isActiveReadOnly(K)?K:__assign$2(__assign$2({},K),{model:updateCellValue(K.model,Ie,Je),lastChanged:Ie})}case SET_CELL_DIMENSIONS:{var nt=J.payload,ze=nt.point,et=nt.dimensions,tt=K.rowDimensions[ze.row],st=K.columnDimensions[ze.column];return tt&&st&&tt.top===et.top&&tt.height===et.height&&st.left===et.left&&st.width===et.width?K:__assign$2(__assign$2({},K),{rowDimensions:__assign$2(__assign$2({},K.rowDimensions),(ne={},ne[ze.row]={top:et.top,height:et.height},ne)),columnDimensions:__assign$2(__assign$2({},K.columnDimensions),(oe={},oe[ze.column]={left:et.left,width:et.width},oe))})}case COPY:case CUT:{var qe=K.selected.toRange(K.model.data);return __assign$2(__assign$2({},K),{copied:qe,cut:J.type===CUT,hasPasted:!1})}case PASTE:{var Se=J.payload.data,Ie=K.active;if(!Ie)return K;var Re=split(Se,function($t){return{value:$t}}),Be=getSize$1(Re),qe=K.selected.toRange(K.model.data);if(qe&&Be.rows===1&&Be.columns===1){var Ne=get$2({row:0,column:0},Re),Ue=K.cut&&K.copied?unset(K.copied.start,K.model.data):K.model.data,Ge=[];try{for(var Ye=__values(qe||[]),Qe=Ye.next();!Qe.done;Qe=Ye.next()){var ze=Qe.value,Te=get$2(ze,K.model.data);Ge.push({prevCell:Te||null,nextCell:Ne||null}),Ue=set$2(ze,Ne,Ue)}}catch($t){ce={error:$t}}finally{try{Qe&&!Qe.done&&(ue=Ye.return)&&ue.call(Ye)}finally{if(ce)throw ce.error}}return __assign$2(__assign$2({},K),{model:new Model(createFormulaParser,Ue),copied:null,cut:!1,hasPasted:!0,mode:"view",lastCommit:Ge})}var Ke={rows:Ie.row+Be.rows,columns:Ie.column+Be.columns},rt=pad(K.model.data,Ke),it={data:rt,commit:[]};try{for(var at=__values(entries(Re)),lt=at.next();!lt.done;lt=at.next()){var ct=__read$1(lt.value,2),ze=ct[0],Ne=ct[1],ot=it.commit||[],ft={row:ze.row+Ie.row,column:ze.column+Ie.column},dt=it.data;if(K.cut){if(K.copied){var mt={row:ze.row+K.copied.start.row,column:ze.column+K.copied.start.column};dt=unset(mt,it.data)}ot=__spreadArray$2(__spreadArray$2([],__read$1(ot),!1),[{prevCell:Ne||null,nextCell:null}],!1)}has$1(ft,rt)||(it={data:dt,commit:ot});var Te=get$2(ft,dt)||null;ot=__spreadArray$2(__spreadArray$2([],__read$1(ot),!1),[{prevCell:Te,nextCell:Ne||null}],!1),it.data=set$2(ft,__assign$2(__assign$2({value:void 0},Te),Ne),dt),it.commit=ot}}catch($t){Ae={error:$t}}finally{try{lt&&!lt.done&&(pe=at.return)&&pe.call(at)}finally{if(Ae)throw Ae.error}}return __assign$2(__assign$2({},K),{model:new Model(createFormulaParser,it.data),selected:new RangeSelection(new PointRange(Ie,{row:Ie.row+Be.rows-1,column:Ie.column+Be.columns-1})),copied:null,cut:!1,hasPasted:!0,mode:"view",lastCommit:it.commit})}case EDIT:return edit(K);case VIEW:return view(K);case CLEAR:return clear(K);case BLUR:return blur(K);case KEY_PRESS:{var kt=J.payload.event;if(isActiveReadOnly(K)||kt.metaKey)return K;if(K.mode==="view"&&K.active){var qe=K.selected.toRange(K.model.data);return(qe==null?void 0:qe.size())===1?edit(clear(K)):edit(K)}return K}case KEY_DOWN:{var wt=J.payload.event,Et=getKeyDownHandler(K,wt);return Et?__assign$2(__assign$2({},K),Et(K,wt)):K}case DRAG_START:return __assign$2(__assign$2({},K),{dragging:!0});case DRAG_END:return __assign$2(__assign$2({},K),{dragging:!1});case COMMIT:{var Ot=J.payload.changes;return __assign$2(__assign$2({},K),commit(Ot))}default:throw new Error("Unknown action")}}function edit(K){return isActiveReadOnly(K)?K:__assign$2(__assign$2({},K),{mode:"edit"})}function clear(K){var J,ne;if(!K.active)return K;var oe=function(_e){return _e&&!_e.readOnly},ce=function(_e){return oe(_e)?Object.assign({},_e,{value:void 0}):_e},ue=K.selected.toRange(K.model.data),Ae=[],pe=K.model.data;try{for(var ve=__values(ue||[]),me=ve.next();!me.done;me=ve.next()){var ge=me.value,ye=get$2(ge,K.model.data),xe=ce(ye);Ae.push({prevCell:ye||null,nextCell:xe||null}),pe=set$2(ge,xe,pe)}}catch(_e){J={error:_e}}finally{try{me&&!me.done&&(ne=ve.return)&&ne.call(ve)}finally{if(J)throw J.error}}return __assign$2(__assign$2(__assign$2({},K),{model:new Model(createFormulaParser,pe)}),commit(Ae))}function blur(K){return __assign$2(__assign$2({},K),{active:null,selected:new EmptySelection})}function view(K){return __assign$2(__assign$2({},K),{mode:"view"})}function commit(K){return{lastCommit:K}}var go=function(K,J){return function(ne){if(ne.active){var oe=getSize$1(ne.model.data),ce=ne.active.column+J,ue=ce>=oe.columns,Ae={row:ne.active.row+K+(ue?1:0),column:(ne.active.column+J)%oe.columns};return has$1(Ae,ne.model.data)?__assign$2(__assign$2({},ne),{active:Ae,selected:new RangeSelection(new PointRange(Ae,Ae)),mode:"view"}):__assign$2(__assign$2({},ne),{mode:"view"})}}},keyDownHandlers={ArrowUp:go(-1,0),ArrowDown:go(1,0),ArrowLeft:go(0,-1),ArrowRight:go(0,1),Tab:go(0,1),Enter:edit,Backspace:clear,Delete:clear,Escape:blur},editKeyDownHandlers={Escape:view,Tab:keyDownHandlers.Tab,Enter:keyDownHandlers.ArrowDown},editShiftKeyDownHandlers={Tab:go(0,-1)},Direction$1;(function(K){K.Left="Left",K.Right="Right",K.Top="Top",K.Bottom="Bottom"})(Direction$1||(Direction$1={}));var shiftKeyDownHandlers={ArrowUp:function(K){return __assign$2(__assign$2({},K),{selected:modifyEdge(K.selected,K.active,K.model.data,Direction$1.Top)})},ArrowDown:function(K){return __assign$2(__assign$2({},K),{selected:modifyEdge(K.selected,K.active,K.model.data,Direction$1.Bottom)})},ArrowLeft:function(K){return __assign$2(__assign$2({},K),{selected:modifyEdge(K.selected,K.active,K.model.data,Direction$1.Left)})},ArrowRight:function(K){return __assign$2(__assign$2({},K),{selected:modifyEdge(K.selected,K.active,K.model.data,Direction$1.Right)})},Tab:go(0,-1)},shiftMetaKeyDownHandlers={},metaKeyDownHandlers={};function getKeyDownHandler(K,J){var ne=J.key,oe;return K.mode==="edit"?J.shiftKey?oe=editShiftKeyDownHandlers:oe=editKeyDownHandlers:J.shiftKey&&J.metaKey?oe=shiftMetaKeyDownHandlers:J.shiftKey?oe=shiftKeyDownHandlers:J.metaKey?oe=metaKeyDownHandlers:oe=keyDownHandlers,oe[ne]}function hasKeyDownHandler(K,J){return getKeyDownHandler(K,J)!==void 0}function isActiveReadOnly(K){var J=getActive(K);return!!(J!=null&&J.readOnly)}function getActive(K){var J=K.active&&get$2(K.active,K.model.data);return J||null}function modifyEdge(K,J,ne,oe){if(!J)return K;if(K instanceof RangeSelection){var ce=modifyRangeSelectionEdge(K,J,ne,oe);return ce}return K instanceof EntireColumnsSelection?modifyEntireColumnsSelection(K,J,ne,oe):K instanceof EntireRowsSelection?modifyEntireRowsSelection(K,J,ne,oe):K}function modifyRangeSelectionEdge(K,J,ne,oe){var ce,ue=oe===Direction$1.Left||oe===Direction$1.Right?"column":"row",Ae=oe===Direction$1.Left||oe===Direction$1.Top?"start":"end",pe=Ae==="start"?-1:1,ve=K.range.has(__assign$2(__assign$2({},J),(ce={},ce[ue]=J[ue]+pe*-1,ce))),me=ve?Ae==="start"?"end":"start":Ae,ge=new PointRange(K.range.start,K.range.end);ge[me][ue]+=pe;var ye=new RangeSelection(ge).normalizeTo(ne);return ye}function modifyEntireRowsSelection(K,J,ne,oe){if(oe===Direction$1.Left||oe===Direction$1.Right)return K;var ce=oe===Direction$1.Top?-1:1,ue=oe===Direction$1.Top?"start":"end",Ae=ue==="start"?"end":"start",pe=__assign$2({},K);(oe===Direction$1.Top?K.end>J.row:K.start<J.row)?pe[Ae]=K[Ae]+ce:pe[ue]=K[ue]+ce;var ve=new EntireRowsSelection(Math.max(pe.start,0),Math.max(pe.end,0));return ve.normalizeTo(ne)}function modifyEntireColumnsSelection(K,J,ne,oe){if(oe===Direction$1.Top||oe===Direction$1.Bottom)return K;var ce=oe===Direction$1.Left?-1:1,ue=oe===Direction$1.Left?"start":"end",Ae=ue==="start"?"end":"start",pe=__assign$2({},K);(oe===Direction$1.Left?K.end>J.row:K.start<J.row)?pe[Ae]=K[Ae]+ce:pe[ue]=K[ue]+ce;var ve=new EntireColumnsSelection(Math.max(pe.start,0),Math.max(pe.end,0));return ve.normalizeTo(ne)}var context$1=createContext([INITIAL_STATE,function(){}]),Table=function(K){var J=K.children,ne=K.columns,oe=K.hideColumnIndicators,ce=ne+(oe?0:1),ue=range(ce).map(function(Ae){return reactExports.createElement("col",{key:Ae})});return reactExports.createElement("table",{className:"Spreadsheet__table"},reactExports.createElement("colgroup",null,ue),reactExports.createElement("tbody",null,J))},Row=function(K){return reactExports.createElement("tr",__assign$2({},K))},HeaderRow=function(K){return reactExports.createElement("tr",__assign$2({},K))};function useDispatch(){return useContextSelector(context$1,function(K){var J=__read$1(K,2);J[0];var ne=J[1];return ne})}function useSelector(K){return useContextSelector(context$1,function(J){var ne=__read$1(J,1),oe=ne[0];return K(oe)})}var CornerIndicator=function(K){var J=K.selected,ne=K.onSelect,oe=reactExports.useCallback(function(){ne()},[ne]);return reactExports.createElement("th",{className:cx("Spreadsheet__header",{"Spreadsheet__header--selected":J}),onClick:oe,tabIndex:0})},enhance$3=function(K){return function(ne){var oe=useDispatch(),ce=reactExports.useCallback(function(){return oe(selectEntireWorksheet())},[oe]),ue=useSelector(function(Ae){return Ae.selected instanceof EntireWorksheetSelection});return reactExports.createElement(K,__assign$2({},ne,{selected:ue,onSelect:ce}))}},ColumnIndicator=function(K){var J=K.column,ne=K.label,oe=K.selected,ce=K.onSelect,ue=reactExports.useCallback(function(Ae){ce(J,Ae.shiftKey)},[ce,J]);return reactExports.createElement("th",{className:cx("Spreadsheet__header",{"Spreadsheet__header--selected":oe}),onClick:ue,tabIndex:0},ne!==void 0?ne:columnIndexToLabel(J))},enhance$2=function(K){return function(ne){var oe=useDispatch(),ce=reactExports.useCallback(function(Ae,pe){return oe(selectEntireColumn(Ae,pe))},[oe]),ue=useSelector(function(Ae){return Ae.selected.hasEntireColumn(ne.column)});return reactExports.createElement(K,__assign$2({},ne,{selected:ue,onSelect:ce}))}};function columnIndexToLabel(K){for(var J="",ne=K;ne>=0;)J=String.fromCharCode(65+ne%26)+J,ne=Math.floor(ne/26)-1;return J}var RowIndicator=function(K){var J=K.row,ne=K.label,oe=K.selected,ce=K.onSelect,ue=reactExports.useCallback(function(Ae){ce(J,Ae.shiftKey)},[ce,J]);return reactExports.createElement("th",{className:cx("Spreadsheet__header",{"Spreadsheet__header--selected":oe}),onClick:ue,tabIndex:0},ne!==void 0?ne:J+1)},enhance$1=function(K){return function(ne){var oe=useDispatch(),ce=useSelector(function(Ae){return Ae.selected.hasEntireRow(ne.row)}),ue=reactExports.useCallback(function(Ae,pe){return oe(selectEntireRow(Ae,pe))},[oe]);return reactExports.createElement(K,__assign$2({},ne,{selected:ce,onSelect:ue}))}},Cell=function(K){var J=K.row,ne=K.column,oe=K.DataViewer,ce=K.selected,ue=K.active,Ae=K.dragging,pe=K.mode,ve=K.data,me=K.evaluatedData,ge=K.select,ye=K.activate,xe=K.setCellDimensions,_e=K.setCellData,$e=reactExports.useRef(null),Ie=reactExports.useMemo(function(){return{row:J,column:ne}},[J,ne]),Fe=reactExports.useCallback(function(je){pe==="view"&&(xe(Ie,getOffsetRect(je.currentTarget)),je.shiftKey?ge(Ie):ye(Ie))},[pe,xe,Ie,ge,ye]),ke=reactExports.useCallback(function(je){Ae&&(xe(Ie,getOffsetRect(je.currentTarget)),ge(Ie))},[xe,ge,Ae,Ie]);return reactExports.useEffect(function(){var je=$e.current;ce&&je&&xe(Ie,getOffsetRect(je)),je&&ue&&pe==="view"&&je.focus()},[xe,ce,ue,pe,Ie,ve]),ve&&ve.DataViewer&&(oe=ve.DataViewer),reactExports.createElement("td",{ref:$e,className:cx("Spreadsheet__cell",ve==null?void 0:ve.className,{"Spreadsheet__cell--readonly":ve==null?void 0:ve.readOnly}),onMouseOver:ke,onMouseDown:Fe,tabIndex:0},reactExports.createElement(oe,{row:J,column:ne,cell:ve,evaluatedCell:me,setCellData:_e}))},enhance=function(K){return function(ne){var oe=ne.row,ce=ne.column,ue=useDispatch(),Ae=reactExports.useMemo(function(){return{row:oe,column:ce}},[oe,ce]),pe=reactExports.useCallback(function(je){return ue(setCellData(Ae,je))},[ue,Ae]),ve=reactExports.useCallback(function(je){return ue(select$5(je))},[ue]),me=reactExports.useCallback(function(je){return ue(activate(je))},[ue]),ge=reactExports.useCallback(function(je,We){return ue(setCellDimensions(je,We))},[ue]),ye=useSelector(function(je){return isActive$1(je.active,Ae)}),xe=useSelector(function(je){return ye?je.mode:"view"}),_e=useSelector(function(je){return get$2(Ae,je.model.data)}),$e=useSelector(function(je){return get$2(Ae,je.model.evaluatedData)}),Ie=useSelector(function(je){return je.selected.has(je.model.data,Ae)}),Fe=useSelector(function(je){return je.dragging}),ke=useSelector(function(je){var We;return((We=je.copied)===null||We===void 0?void 0:We.has(Ae))||!1});return reactExports.createElement(K,__assign$2({},ne,{selected:Ie,active:ye,copied:ke,dragging:Fe,mode:xe,evaluatedData:$e,data:_e,select:ve,activate:me,setCellDimensions:ge,setCellData:pe}))}},TRUE_TEXT="TRUE",FALSE_TEXT="FALSE",DataViewer=function(K){var J=K.cell,ne=K.evaluatedCell,oe=getValue$3(J,ne);return typeof oe=="boolean"?reactExports.createElement("span",{className:"Spreadsheet__data-viewer Spreadsheet__data-viewer--boolean"},convertBooleanToText(oe)):reactExports.createElement("span",{className:cx("Spreadsheet__data-viewer",{"Spreadsheet__data-viewer--preserve-breaks":hasLineBreaker(oe)})},oe)};function getValue$3(K,J){var ne,oe=(ne=J==null?void 0:J.value)!==null&&ne!==void 0?ne:K==null?void 0:K.value;return oe&&typeof oe=="object"?oe.toString():oe}function convertBooleanToText(K){return K?TRUE_TEXT:FALSE_TEXT}var DataEditor=function(K){var J,ne=K.onChange,oe=K.cell,ce=reactExports.useRef(null),ue=reactExports.useCallback(function(pe){ne(__assign$2(__assign$2({},oe),{value:pe.target.value}))},[ne,oe]);reactExports.useEffect(function(){ce.current&&moveCursorToEnd(ce.current)},[ce]);var Ae=(J=oe==null?void 0:oe.value)!==null&&J!==void 0?J:"";return reactExports.createElement("div",{className:"Spreadsheet__data-editor"},reactExports.createElement("input",{ref:ce,type:"text",onChange:ue,value:Ae,autoFocus:!0}))},ActiveCell=function(K){var J=reactExports.useRef(null),ne=useDispatch(),oe=reactExports.useCallback(function(je,We){return ne(setCellData(je,We))},[ne]),ce=reactExports.useCallback(function(){return ne(edit$1())},[ne]),ue=reactExports.useCallback(function(je){return ne(commit$1(je))},[ne]),Ae=reactExports.useCallback(function(){ne(view$1())},[ne]),pe=useSelector(function(je){return je.active}),ve=useSelector(function(je){return je.mode}),me=useSelector(function(je){return je.active?get$2(je.active,je.model.data):void 0}),ge=useSelector(function(je){return pe?getCellDimensions(pe,je.rowDimensions,je.columnDimensions):void 0}),ye=reactExports.useMemo(function(){return!pe||!ge},[pe,ge]),xe=reactExports.useRef(void 0),_e=reactExports.useRef(null),$e=reactExports.useRef(void 0),Ie=reactExports.useCallback(function(je){pe&&oe(pe,je)},[oe,pe]);reactExports.useEffect(function(){var je=J.current;!ye&&je&&je.focus()},[J,ye]),reactExports.useEffect(function(){var je=_e.current,We=$e.current;if(_e.current=pe,$e.current=me,!(!je||!We)){var ze=(pe==null?void 0:pe.row)!==je.row||(pe==null?void 0:pe.column)!==je.column,Xe=ve!=="edit";if(ze||Xe){var Je=xe.current;We!==Je?ue([{prevCell:Je||null,nextCell:We}]):!ze&&me!==We&&ue([{prevCell:We,nextCell:me||null}]),xe.current=me}}});var Fe=me&&me.DataEditor||K.DataEditor,ke=me&&me.readOnly;return ye?null:reactExports.createElement("div",{ref:J,className:cx("Spreadsheet__active-cell","Spreadsheet__active-cell--".concat(ve)),style:ge,onClick:ve==="view"&&!ke?ce:void 0,tabIndex:0},ve==="edit"&&pe&&reactExports.createElement(Fe,{row:pe.row,column:pe.column,cell:me,onChange:Ie,exitEditMode:Ae}))},FloatingRect=function(K){var J,ne=K.dimensions,oe=K.dragging,ce=K.hidden,ue=K.variant,Ae=ne||{},pe=Ae.width,ve=Ae.height,me=Ae.top,ge=Ae.left;return reactExports.createElement("div",{className:cx("Spreadsheet__floating-rect",(J={},J["Spreadsheet__floating-rect--".concat(ue)]=ue,J["Spreadsheet__floating-rect--dragging"]=oe,J["Spreadsheet__floating-rect--hidden"]=ce,J)),style:{width:pe,height:ve,top:me,left:ge}})},Selected=function(){var K=useSelector(function(ce){return ce.selected}),J=useSelector(function(ce){return K&&getSelectedDimensions(ce.rowDimensions,ce.columnDimensions,ce.model.data,ce.selected)}),ne=useSelector(function(ce){return ce.dragging}),oe=useSelector(function(ce){return ce.selected.size(ce.model.data)<2});return reactExports.createElement(FloatingRect,{variant:"selected",dimensions:J,dragging:ne,hidden:oe})},Copied=function(){var K=useSelector(function(oe){return oe.copied}),J=useSelector(function(oe){return K&&getRangeDimensions(oe.rowDimensions,oe.columnDimensions,K)}),ne=K===null;return reactExports.createElement(FloatingRect,{variant:"copied",dimensions:J,hidden:ne,dragging:!1})};function styleInject(K,J){J===void 0&&(J={});var ne=J.insertAt;if(!(typeof document>"u")){var oe=document.head||document.getElementsByTagName("head")[0],ce=document.createElement("style");ce.type="text/css",ne==="top"&&oe.firstChild?oe.insertBefore(ce,oe.firstChild):oe.appendChild(ce),ce.styleSheet?ce.styleSheet.cssText=K:ce.appendChild(document.createTextNode(K))}}var css_248z=`.Spreadsheet {
  --background-color: white;
  --text-color: black;
  --readonly-text-color: rgba(0, 0, 0, 0.4);
  --outline-color: #4285f4;
  --outline-background-color: rgba(160, 195, 255, 0.2);
  --border-color: hsl(2deg, 0%, 91%);
  --header-background-color: rgba(0, 0, 0, 0.04);
  --elevation: 0 2px 5px rgba(0, 0, 0, 0.4);

  position: relative;
  overflow: visible;
  background: var(--background-color);
  color: var(--text-color);
  display: inline-block;
}

.Spreadsheet--dark-mode {
  --background-color: black;
  --text-color: white;
  --readonly-text-color: rgba(255, 255, 255, 0.4);
  --header-background-color: rgba(255, 255, 255, 0.04);
  --border-color: hsl(2deg, 0%, 19%);
}

.Spreadsheet__active-cell {
  position: absolute;
  border: 2px solid var(--outline-color);
  box-sizing: border-box;
}

.Spreadsheet__active-cell--edit {
  background: var(--background-color);
  box-shadow: var(--elevation);
}

.Spreadsheet__table {
  border-collapse: collapse;
  table-layout: fixed;
}

.Spreadsheet__cell,
.Spreadsheet__active-cell {
  cursor: cell;
}

.Spreadsheet__cell {
  outline: none;
}

.Spreadsheet__cell--readonly {
  color: var(--readonly-text-color);
}

.Spreadsheet__cell,
.Spreadsheet__header {
  min-width: 6em;
  min-height: 1.9em;
  height: 1.9em;
  max-height: 1.9em;
  border: 1px solid var(--border-color);
  overflow: hidden;
  word-break: keep-all;
  white-space: nowrap;
  text-align: left;
  box-sizing: border-box;
  user-select: none;
}

.Spreadsheet__header {
  background: var(--header-background-color);
  color: var(--readonly-text-color);
  text-align: center;
  font: inherit;
}

.Spreadsheet__header--selected {
  background: #5f6268;
  color: #fff;
}

.Spreadsheet__header,
.Spreadsheet__data-viewer,
.Spreadsheet__data-editor input {
  padding: 4px;
  box-sizing: border-box;
}

.Spreadsheet__data-viewer--preserve-breaks {
  white-space: pre-wrap;
}

.Spreadsheet__data-editor,
.Spreadsheet__data-editor input {
  width: 100%;
  height: 100%;
}

.Spreadsheet__data-editor input {
  font: inherit;
  color: inherit;
  background: none;
  border: none;
  outline: none;
  margin: 0;
}

.Spreadsheet__data-viewer--boolean {
  text-align: center;
}

.Spreadsheet__floating-rect {
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
}

.Spreadsheet__floating-rect--hidden {
  display: none;
}

.Spreadsheet__floating-rect--selected {
  background: var(--outline-background-color);
  border: 2px var(--outline-color) solid;
}

.Spreadsheet__floating-rect--dragging {
  border: none;
}

.Spreadsheet__floating-rect--copied {
  border: 2px var(--outline-color) dashed;
}
`;styleInject(css_248z);var Spreadsheet=function(K){var J,ne=K.className,oe=K.darkMode,ce=K.columnLabels,ue=K.rowLabels,Ae=K.hideColumnIndicators,pe=K.hideRowIndicators,ve=K.onKeyDown,me=K.Table,ge=me===void 0?Table:me,ye=K.Row,xe=ye===void 0?Row:ye,_e=K.HeaderRow,$e=_e===void 0?HeaderRow:_e,Ie=K.DataEditor,Fe=Ie===void 0?DataEditor:Ie,ke=K.DataViewer,je=ke===void 0?DataViewer:ke,We=K.onChange,ze=We===void 0?function(){}:We,Xe=K.onModeChange,Je=Xe===void 0?function(){}:Xe,nt=K.onSelect,et=nt===void 0?function(){}:nt,tt=K.onActivate,st=tt===void 0?function(){}:tt,qe=K.onBlur,Se=qe===void 0?function(){}:qe,Re=K.onCellCommit,Be=Re===void 0?function(){}:Re,Ne=K.onEvaluatedDataChange,Ue=Ne===void 0?function(){}:Ne,Ge=reactExports.useMemo(function(){var ar=K.createFormulaParser||createFormulaParser,Wt=new Model(ar,K.data);return __assign$2(__assign$2({},INITIAL_STATE),{model:Wt,selected:K.selected||INITIAL_STATE.selected})},[K.createFormulaParser,K.data,K.selected]),Ye=reactExports.useReducer(reducer$6,Ge),Qe=__read$1(Ye,2),Te=Qe[0],Ke=Qe[1],rt=reactExports.useMemo(function(){return calculateSpreadsheetSize(Te.model.data,ue,ce)},[Te.model.data,ue,ce]),it=Te.mode,at=reactExports.useRef(null),lt=function(ar){return reactExports.useCallback(function(){for(var Wt=[],nr=0;nr<arguments.length;nr++)Wt[nr]=arguments[nr];return Ke(ar.apply(void 0,__spreadArray$2([],__read$1(Wt),!1)))},[ar])},ct=lt(cut),ot=lt(copy),ft=lt(paste),dt=lt(keyDown),mt=lt(keyPress),kt=lt(dragStart),wt=lt(dragEnd),Et=lt(setData),Ot=lt(setCreateFormulaParser),Rt=lt(blur$1),gt=lt(setSelection),$t=reactExports.useRef(Te.active);reactExports.useEffect(function(){if(Te.active!==$t.current)if(Te.active)st(Te.active);else{var ar=at.current;ar&&isFocusedWithin(ar)&&document.activeElement&&document.activeElement.blur(),Se()}$t.current=Te.active},[st,Se,Te.active]);var pt=reactExports.useRef(Te.model.data);reactExports.useEffect(function(){Te.model.data!==pt.current&&Te.model.data!==K.data&&ze(Te.model.data),pt.current=Te.model.data},[Te.model.data,ze,K.data]);var vt=reactExports.useRef(Te.model.evaluatedData);reactExports.useEffect(function(){var ar,Wt;((ar=Te==null?void 0:Te.model)===null||ar===void 0?void 0:ar.evaluatedData)!==(vt==null?void 0:vt.current)&&Ue((Wt=Te==null?void 0:Te.model)===null||Wt===void 0?void 0:Wt.evaluatedData),vt.current=Te.model.evaluatedData},[(J=Te==null?void 0:Te.model)===null||J===void 0?void 0:J.evaluatedData,Ue]);var Mt=reactExports.useRef(Te.selected);reactExports.useEffect(function(){Te.selected.equals(Mt.current)||(!K.selected||!Te.selected.equals(K.selected))&&et(Te.selected),Mt.current=Te.selected},[Te.selected,et,K.selected]);var St=reactExports.useRef(Te.mode);reactExports.useEffect(function(){Te.mode!==St.current&&Je(Te.mode),St.current=Te.mode},[Te.mode,Je]);var _t=reactExports.useRef(Te.lastCommit);reactExports.useEffect(function(){var ar,Wt;if(Te.lastCommit&&Te.lastCommit!==_t.current)try{for(var nr=__values(Te.lastCommit),Er=nr.next();!Er.done;Er=nr.next()){var Zt=Er.value;Be(Zt.prevCell,Zt.nextCell,Te.lastChanged)}}catch(ir){ar={error:ir}}finally{try{Er&&!Er.done&&(Wt=nr.return)&&Wt.call(nr)}finally{if(ar)throw ar.error}}},[Be,Te.lastChanged,Te.lastCommit]);var Xt=reactExports.useRef(K.selected);reactExports.useEffect(function(){K.selected&&Xt.current&&!K.selected.equals(Xt.current)&&gt(K.selected),Xt.current=K.selected},[K.selected,gt]);var Tt=reactExports.useRef(K.data);reactExports.useEffect(function(){K.data!==Tt.current&&Et(K.data),Tt.current=K.data},[K.data,Et]);var Dt=reactExports.useRef(K.createFormulaParser);reactExports.useEffect(function(){K.createFormulaParser!==Dt.current&&K.createFormulaParser&&Ot(K.createFormulaParser),Dt.current=K.createFormulaParser},[K.createFormulaParser,Ot]);var Ht=reactExports.useCallback(function(ar){var Wt=Te.model,nr=Te.selected,Er=Wt.data,Zt=nr.toRange(Er);if(Zt){var ir=slice(Zt.start,Zt.end,Er),Ir=getCSV(ir);writeTextToClipboard(ar,Ir)}},[Te]),Bt=reactExports.useCallback(function(ar){shouldHandleClipboardEvent(at.current,it)&&(ar.preventDefault(),ar.stopPropagation(),Ht(ar),ct())},[it,Ht,ct]),It=reactExports.useCallback(function(ar){shouldHandleClipboardEvent(at.current,it)&&(ar.preventDefault(),ar.stopPropagation(),Ht(ar),ot())},[it,Ht,ot]),zt=reactExports.useCallback(function(ar){if(shouldHandleClipboardEvent(at.current,it)&&(ar.preventDefault(),ar.stopPropagation(),ar.clipboardData)){var Wt=readTextFromClipboard(ar);ft(Wt)}},[it,ft]),Pt=reactExports.useCallback(function(ar){ar.persist(),ve&&ve(ar),ar.defaultPrevented||(hasKeyDownHandler(Te,ar)&&ar.nativeEvent.preventDefault(),dt(ar))},[Te,ve,dt]),Vt=reactExports.useCallback(function(){wt(),document.removeEventListener("mouseup",Vt)},[wt]),vr=reactExports.useCallback(function(ar){!Te.dragging&&ar.buttons===1&&(kt(),document.addEventListener("mouseup",Vt))},[Te,kt,Vt]),qt=reactExports.useCallback(function(ar){ar.currentTarget.contains(ar.relatedTarget)||Rt()},[Rt]),er=reactExports.useMemo(function(){return enhance(K.Cell||Cell)},[K.Cell]),yr=reactExports.useMemo(function(){return enhance$3(K.CornerIndicator||CornerIndicator)},[K.CornerIndicator]),Lt=reactExports.useMemo(function(){return enhance$1(K.RowIndicator||RowIndicator)},[K.RowIndicator]),jt=reactExports.useMemo(function(){return enhance$2(K.ColumnIndicator||ColumnIndicator)},[K.ColumnIndicator]);reactExports.useEffect(function(){return document.addEventListener("cut",Bt),document.addEventListener("copy",It),document.addEventListener("paste",zt),function(){document.removeEventListener("cut",Bt),document.removeEventListener("copy",It),document.removeEventListener("paste",zt)}},[Bt,It,zt]);var fr=reactExports.useMemo(function(){return reactExports.createElement(ge,{columns:rt.columns,hideColumnIndicators:Ae},reactExports.createElement($e,null,!pe&&!Ae&&reactExports.createElement(yr,null),!Ae&&range(rt.columns).map(function(ar){return ce?reactExports.createElement(jt,{key:ar,column:ar,label:ar in ce?ce[ar]:null}):reactExports.createElement(jt,{key:ar,column:ar})})),range(rt.rows).map(function(ar){return reactExports.createElement(xe,{key:ar,row:ar},!pe&&(ue?reactExports.createElement(Lt,{key:ar,row:ar,label:ar in ue?ue[ar]:null}):reactExports.createElement(Lt,{key:ar,row:ar})),range(rt.columns).map(function(Wt){return reactExports.createElement(er,{key:Wt,row:ar,column:Wt,DataViewer:je})}))}))},[ge,rt.rows,rt.columns,Ae,xe,$e,pe,yr,ce,jt,ue,Lt,er,je]),Gt=reactExports.useMemo(function(){return reactExports.createElement(ActiveCell,{DataEditor:Fe})},[Fe]),Jt=reactExports.useMemo(function(){return reactExports.createElement("div",{ref:at,className:cx("Spreadsheet",ne,{"Spreadsheet--dark-mode":oe}),onKeyPress:mt,onKeyDown:Pt,onMouseMove:vr,onBlur:qt},fr,Gt,reactExports.createElement(Selected,null),reactExports.createElement(Copied,null))},[ne,oe,mt,Pt,vr,qt,fr,Gt]);return reactExports.createElement(context$1.Provider,{value:Ye},Jt)};const ADD_SHEET_WIDTH=45,NAVIGATION_WIDTH=50,ONE_TAP_SCROLL_LENGTH=100,UIExcelSheetBar=({sheetNames:K,currentSheet:J,onCurrentSheetChange:ne})=>{const oe=reactExports.useRef(null),ce=reactExports.useRef(null),[ue,Ae]=reactExports.useState(!0),[pe,ve]=reactExports.useState(!0),[me,ge]=reactExports.useState(!1);reactExports.useEffect(()=>{const Fe=new ResizeObserver(ke=>{ke.forEach(je=>{var ze;const We=((ze=ce.current)==null?void 0:ze.scrollWidth)??0;ge(je.target.clientWidth<We+ADD_SHEET_WIDTH+NAVIGATION_WIDTH),$e()})});return oe.current&&Fe.observe(oe.current),()=>{Fe.disconnect()}},[]);const ye=K.map(Fe=>({key:Fe,label:Fe})),xe=Fe=>{const ke=K.indexOf(Fe);ne(ke),ce.current&&Array.from(ce.current.children)[ke].scrollIntoView({behavior:"smooth"})},_e=Fe=>{const ke=Fe.clientWidth,je=Fe.scrollLeft,We=0,ze=Fe.scrollWidth;return{isLeftEnabled:je>We,isRightEnabled:je+ke<ze,minLeftScroll:We,maxLeftScroll:ze,currentLeftScroll:je,currentClientWidth:ke}},$e=()=>{if(ce.current){const{isLeftEnabled:Fe,isRightEnabled:ke}=_e(ce.current);Ae(Fe),ve(ke)}},Ie=Fe=>{if(ce.current){const{isLeftEnabled:ke,isRightEnabled:je,minLeftScroll:We,maxLeftScroll:ze,currentLeftScroll:Xe,currentClientWidth:Je}=_e(ce.current);if(Fe==="left"){ce.current.scrollLeft=Xe-ONE_TAP_SCROLL_LENGTH>We?Xe-ONE_TAP_SCROLL_LENGTH:We,Ae(ke);return}Fe==="right"&&(ce.current.scrollLeft=Xe+Je+ONE_TAP_SCROLL_LENGTH<ze?Xe+100:ze,ve(je))}};return jsxRuntimeExports.jsxs("nav",{className:"ui-excel-sheet-bar",ref:oe,children:[jsxRuntimeExports.jsx("div",{ref:ce,className:"ui-excel-sheet-bar__sheets",onScroll:$e,children:jsxRuntimeExports.jsx(wF,{variant:"card",isClosable:!1,activeKey:K[J],onChange:xe,items:ye})}),jsxRuntimeExports.jsxs("div",{className:cx("ui-excel-sheet-bar__nav-buttons",{overflowed:me}),children:[jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",disabled:!ue,onClick:()=>Ie("left"),iconBefore:jsxRuntimeExports.jsx(gk,{})}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",disabled:!pe,onClick:()=>Ie("right"),iconBefore:jsxRuntimeExports.jsx(vk,{})})]})]})},UIExcelCornerIndicator=()=>jsxRuntimeExports.jsx("th",{className:"ui-excel-corner-indicator",children:jsxRuntimeExports.jsx("div",{className:"ui-excel-corner-indicator__icon"})}),UIExcel=({workbook:K,className:J,darkMode:ne,readOnly:oe,minRowLength:ce=100})=>{const[ue,Ae]=reactExports.useState(0),pe=K.SheetNames[ue],ve=reactExports.useMemo(()=>XLSX.utils.sheet_to_json(K.Sheets[pe],{header:1,defval:""}).map(xe=>{const _e=Object.values(xe).map(Ie=>({value:Ie,readOnly:!!oe})),$e=COLUMN_LABELS.length-_e.length;if($e>0){const Ie=Array.from({length:$e},()=>({value:"",readOnly:!0}));return[..._e,...Ie]}return _e}),[ue]),me=Array(ce>ve.length?ce:ve.length).fill(0).map((xe,_e)=>`${_e+1}`),ge=xe=>{Ae(xe)},ye=xe=>{(xe.ctrlKey||xe.metaKey)&&(xe.code===KeyboardCode.KeyV||xe.code===KeyboardCode.KeyX)&&xe.preventDefault()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx("ui-excel",J),children:jsxRuntimeExports.jsx(Spreadsheet,{data:ve,columnLabels:COLUMN_LABELS,rowLabels:me,CornerIndicator:UIExcelCornerIndicator,darkMode:ne,onKeyDown:ye})}),jsxRuntimeExports.jsx(UIExcelSheetBar,{sheetNames:K.SheetNames,currentSheet:ue,onCurrentSheetChange:ge})]})},COLUMN_LABELS=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],XlsxViewer=({content:K})=>{const J=useSelector$1(selectApplicationTheme),[ne]=reactExports.useState(()=>XLSX.read(K,{type:"base64"}));return jsxRuntimeExports.jsx(UIExcel,{workbook:ne,darkMode:J===THEME_KEYS.dark,readOnly:!0})},contentWrapper="_contentWrapper_9q3bq_1",styles$1z={contentWrapper},decodeBase64Utf8=K=>{const J=window.atob(K),ne=Uint8Array.from(J,ce=>ce.charCodeAt(0));return new TextDecoder("utf-8").decode(ne)},ContentViewer=({content:K})=>{const J=reactExports.useRef(null),ne=reactExports.useMemo(()=>decodeBase64Utf8(K),[K]);return reactExports.useEffect(()=>{J.current&&(J.current.innerHTML=ne)},[ne]),jsxRuntimeExports.jsx("div",{ref:J,className:styles$1z.contentWrapper})},convertBase64toImage=K=>`data:image/;base64,${K}`,ImageViewer=({content:K})=>jsxRuntimeExports.jsx("div",{className:"image-viewer",children:jsxRuntimeExports.jsx("img",{className:"image-viewer__img",src:convertBase64toImage(K)})}),plotlyWrapper="_plotlyWrapper_1qv34_1",styles$1y={plotlyWrapper,"plot-container":"_plot-container_1qv34_5"},PlotlyViewer=({content:K})=>{const J=reactExports.useRef(null),ne=reactExports.useMemo(()=>decodeURIComponent(escape(window.atob(K))),[K]),oe=reactExports.useCallback(()=>{if(J.current)for(;J.current.firstChild;)J.current.removeChild(J.current.firstChild)},[]);return reactExports.useEffect(()=>{if(J.current){window.Plotly=u$6;const ce=document.createRange().createContextualFragment(ne);J.current.append(ce)}return()=>{window.Plotly=void 0,oe()}},[ne,oe]),jsxRuntimeExports.jsx("div",{ref:J,className:styles$1y.plotlyWrapper})},isNodeJS=typeof process$1=="object"&&process$1+""=="[object process]"&&!process$1.versions.nw&&!(process$1.versions.electron&&process$1.type&&process$1.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(K){Number.isInteger(K)&&(verbosity=K)}function getVerbosityLevel(){return verbosity}function info(K){verbosity>=VerbosityLevel.INFOS&&console.info(`Info: ${K}`)}function warn$2(K){verbosity>=VerbosityLevel.WARNINGS&&console.warn(`Warning: ${K}`)}function unreachable$1(K){throw new Error(K)}function assert(K,J){K||unreachable$1(J)}function _isValidProtocol(K){switch(K==null?void 0:K.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(K,J=null,ne=null){if(!K)return null;if(ne&&typeof K=="string"){if(ne.addDefaultProtocol&&K.startsWith("www.")){const ce=K.match(/\./g);(ce==null?void 0:ce.length)>=2&&(K=`http://${K}`)}if(ne.tryConvertEncoding)try{K=stringToUTF8String(K)}catch{}}const oe=J?URL.parse(K,J):URL.parse(K);return _isValidProtocol(oe)?oe:null}function updateUrlHash(K,J,ne=!1){const oe=URL.parse(K);return oe?(oe.hash=J,oe.href):ne&&createValidAbsoluteUrl(K,"http://example.com")?K.split("#",1)[0]+`${J?`#${J}`:""}`:""}function shadow(K,J,ne,oe=!1){return Object.defineProperty(K,J,{value:ne,enumerable:!oe,configurable:!0,writable:!1}),ne}const BaseException=function(){function J(ne,oe){this.message=ne,this.name=oe}return J.prototype=new Error,J.constructor=J,J}();class PasswordException extends BaseException{constructor(J,ne){super(J,"PasswordException"),this.code=ne}}class UnknownErrorException extends BaseException{constructor(J,ne){super(J,"UnknownErrorException"),this.details=ne}}class InvalidPDFException extends BaseException{constructor(J){super(J,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(J,ne,oe){super(J,"ResponseException"),this.status=ne,this.missing=oe}}class FormatError extends BaseException{constructor(J){super(J,"FormatError")}}class AbortException extends BaseException{constructor(J){super(J,"AbortException")}}function bytesToString(K){(typeof K!="object"||(K==null?void 0:K.length)===void 0)&&unreachable$1("Invalid argument for bytesToString");const J=K.length,ne=8192;if(J<ne)return String.fromCharCode.apply(null,K);const oe=[];for(let ce=0;ce<J;ce+=ne){const ue=Math.min(ce+ne,J),Ae=K.subarray(ce,ue);oe.push(String.fromCharCode.apply(null,Ae))}return oe.join("")}function stringToBytes(K){typeof K!="string"&&unreachable$1("Invalid argument for stringToBytes");const J=K.length,ne=new Uint8Array(J);for(let oe=0;oe<J;++oe)ne[oe]=K.charCodeAt(oe)&255;return ne}function string32(K){return String.fromCharCode(K>>24&255,K>>16&255,K>>8&255,K&255)}function isLittleEndian(){const K=new Uint8Array(4);return K[0]=1,new Uint32Array(K.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:J,userAgent:ne}=navigator;return shadow(this,"platform",{isAndroid:ne.includes("Android"),isLinux:J.includes("Linux"),isMac:J.includes("Mac"),isWindows:J.includes("Win"),isFirefox:ne.includes("Firefox")})}static get isCSSRoundSupported(){var J,ne;return shadow(this,"isCSSRoundSupported",(ne=(J=globalThis.CSS)==null?void 0:J.supports)==null?void 0:ne.call(J,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),K=>K.toString(16).padStart(2,"0"));var To,dA,A0;class Util{static makeHexColor(J,ne,oe){return`#${hexNumbers[J]}${hexNumbers[ne]}${hexNumbers[oe]}`}static domMatrixToTransform(J){return[J.a,J.b,J.c,J.d,J.e,J.f]}static scaleMinMax(J,ne){let oe;J[0]?(J[0]<0&&(oe=ne[0],ne[0]=ne[2],ne[2]=oe),ne[0]*=J[0],ne[2]*=J[0],J[3]<0&&(oe=ne[1],ne[1]=ne[3],ne[3]=oe),ne[1]*=J[3],ne[3]*=J[3]):(oe=ne[0],ne[0]=ne[1],ne[1]=oe,oe=ne[2],ne[2]=ne[3],ne[3]=oe,J[1]<0&&(oe=ne[1],ne[1]=ne[3],ne[3]=oe),ne[1]*=J[1],ne[3]*=J[1],J[2]<0&&(oe=ne[0],ne[0]=ne[2],ne[2]=oe),ne[0]*=J[2],ne[2]*=J[2]),ne[0]+=J[4],ne[1]+=J[5],ne[2]+=J[4],ne[3]+=J[5]}static transform(J,ne){return[J[0]*ne[0]+J[2]*ne[1],J[1]*ne[0]+J[3]*ne[1],J[0]*ne[2]+J[2]*ne[3],J[1]*ne[2]+J[3]*ne[3],J[0]*ne[4]+J[2]*ne[5]+J[4],J[1]*ne[4]+J[3]*ne[5]+J[5]]}static multiplyByDOMMatrix(J,ne){return[J[0]*ne.a+J[2]*ne.b,J[1]*ne.a+J[3]*ne.b,J[0]*ne.c+J[2]*ne.d,J[1]*ne.c+J[3]*ne.d,J[0]*ne.e+J[2]*ne.f+J[4],J[1]*ne.e+J[3]*ne.f+J[5]]}static applyTransform(J,ne,oe=0){const ce=J[oe],ue=J[oe+1];J[oe]=ce*ne[0]+ue*ne[2]+ne[4],J[oe+1]=ce*ne[1]+ue*ne[3]+ne[5]}static applyTransformToBezier(J,ne,oe=0){const ce=ne[0],ue=ne[1],Ae=ne[2],pe=ne[3],ve=ne[4],me=ne[5];for(let ge=0;ge<6;ge+=2){const ye=J[oe+ge],xe=J[oe+ge+1];J[oe+ge]=ye*ce+xe*Ae+ve,J[oe+ge+1]=ye*ue+xe*pe+me}}static applyInverseTransform(J,ne){const oe=J[0],ce=J[1],ue=ne[0]*ne[3]-ne[1]*ne[2];J[0]=(oe*ne[3]-ce*ne[2]+ne[2]*ne[5]-ne[4]*ne[3])/ue,J[1]=(-oe*ne[1]+ce*ne[0]+ne[4]*ne[1]-ne[5]*ne[0])/ue}static axialAlignedBoundingBox(J,ne,oe){const ce=ne[0],ue=ne[1],Ae=ne[2],pe=ne[3],ve=ne[4],me=ne[5],ge=J[0],ye=J[1],xe=J[2],_e=J[3];let $e=ce*ge+ve,Ie=$e,Fe=ce*xe+ve,ke=Fe,je=pe*ye+me,We=je,ze=pe*_e+me,Xe=ze;if(ue!==0||Ae!==0){const Je=ue*ge,nt=ue*xe,et=Ae*ye,tt=Ae*_e;$e+=et,ke+=et,Fe+=tt,Ie+=tt,je+=Je,Xe+=Je,ze+=nt,We+=nt}oe[0]=Math.min(oe[0],$e,Fe,Ie,ke),oe[1]=Math.min(oe[1],je,ze,We,Xe),oe[2]=Math.max(oe[2],$e,Fe,Ie,ke),oe[3]=Math.max(oe[3],je,ze,We,Xe)}static inverseTransform(J){const ne=J[0]*J[3]-J[1]*J[2];return[J[3]/ne,-J[1]/ne,-J[2]/ne,J[0]/ne,(J[2]*J[5]-J[4]*J[3])/ne,(J[4]*J[1]-J[5]*J[0])/ne]}static singularValueDecompose2dScale(J,ne){const oe=J[0],ce=J[1],ue=J[2],Ae=J[3],pe=oe**2+ce**2,ve=oe*ue+ce*Ae,me=ue**2+Ae**2,ge=(pe+me)/2,ye=Math.sqrt(ge**2-(pe*me-ve**2));ne[0]=Math.sqrt(ge+ye||1),ne[1]=Math.sqrt(ge-ye||1)}static normalizeRect(J){const ne=J.slice(0);return J[0]>J[2]&&(ne[0]=J[2],ne[2]=J[0]),J[1]>J[3]&&(ne[1]=J[3],ne[3]=J[1]),ne}static intersect(J,ne){const oe=Math.max(Math.min(J[0],J[2]),Math.min(ne[0],ne[2])),ce=Math.min(Math.max(J[0],J[2]),Math.max(ne[0],ne[2]));if(oe>ce)return null;const ue=Math.max(Math.min(J[1],J[3]),Math.min(ne[1],ne[3])),Ae=Math.min(Math.max(J[1],J[3]),Math.max(ne[1],ne[3]));return ue>Ae?null:[oe,ue,ce,Ae]}static pointBoundingBox(J,ne,oe){oe[0]=Math.min(oe[0],J),oe[1]=Math.min(oe[1],ne),oe[2]=Math.max(oe[2],J),oe[3]=Math.max(oe[3],ne)}static rectBoundingBox(J,ne,oe,ce,ue){ue[0]=Math.min(ue[0],J,oe),ue[1]=Math.min(ue[1],ne,ce),ue[2]=Math.max(ue[2],J,oe),ue[3]=Math.max(ue[3],ne,ce)}static bezierBoundingBox(J,ne,oe,ce,ue,Ae,pe,ve,me){me[0]=Math.min(me[0],J,pe),me[1]=Math.min(me[1],ne,ve),me[2]=Math.max(me[2],J,pe),me[3]=Math.max(me[3],ne,ve),bt(this,To,A0).call(this,J,oe,ue,pe,ne,ce,Ae,ve,3*(-J+3*(oe-ue)+pe),6*(J-2*oe+ue),3*(oe-J),me),bt(this,To,A0).call(this,J,oe,ue,pe,ne,ce,Ae,ve,3*(-ne+3*(ce-Ae)+ve),6*(ne-2*ce+Ae),3*(ce-ne),me)}}To=new WeakSet,dA=function(J,ne,oe,ce,ue,Ae,pe,ve,me,ge){if(me<=0||me>=1)return;const ye=1-me,xe=me*me,_e=xe*me,$e=ye*(ye*(ye*J+3*me*ne)+3*xe*oe)+_e*ce,Ie=ye*(ye*(ye*ue+3*me*Ae)+3*xe*pe)+_e*ve;ge[0]=Math.min(ge[0],$e),ge[1]=Math.min(ge[1],Ie),ge[2]=Math.max(ge[2],$e),ge[3]=Math.max(ge[3],Ie)},A0=function(J,ne,oe,ce,ue,Ae,pe,ve,me,ge,ye,xe){if(Math.abs(me)<1e-12){Math.abs(ge)>=1e-12&&bt(this,To,dA).call(this,J,ne,oe,ce,ue,Ae,pe,ve,-ye/ge,xe);return}const _e=ge**2-4*ye*me;if(_e<0)return;const $e=Math.sqrt(_e),Ie=2*me;bt(this,To,dA).call(this,J,ne,oe,ce,ue,Ae,pe,ve,(-ge+$e)/Ie,xe),bt(this,To,dA).call(this,J,ne,oe,ce,ue,Ae,pe,ve,(-ge-$e)/Ie,xe)},yt(Util,To);function stringToUTF8String(K){return decodeURIComponent(escape(K))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(K){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),K.replaceAll(NormalizeRegex,(J,ne,oe)=>ne?ne.normalize("NFKC"):NormalizationMap.get(oe))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const K=new Uint8Array(32);return crypto.getRandomValues(K),bytesToString(K)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(K,J,ne){if(!Array.isArray(ne)||ne.length<2)return!1;const[oe,ce,...ue]=ne;if(!K(oe)&&!Number.isInteger(oe)||!J(ce))return!1;const Ae=ue.length;let pe=!0;switch(ce.name){case"XYZ":if(Ae<2||Ae>3)return!1;break;case"Fit":case"FitB":return Ae===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(Ae>1)return!1;break;case"FitR":if(Ae!==4)return!1;pe=!1;break;default:return!1}for(const ve of ue)if(!(typeof ve=="number"||pe&&ve===null))return!1;return!0}function MathClamp(K,J,ne){return Math.min(Math.max(K,J),ne)}function toBase64Util(K){return Uint8Array.prototype.toBase64?K.toBase64():btoa(bytesToString(K))}function fromBase64Util(K){return Uint8Array.fromBase64?Uint8Array.fromBase64(K):stringToBytes(atob(K))}typeof Promise.try!="function"&&(Promise.try=function(K,...J){return new Promise(ne=>{ne(K(...J))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(K){return K.reduce((J,ne)=>J+ne,0)});class XfaText{static textContent(J){const ne=[],oe={items:ne,styles:Object.create(null)};function ce(ue){var ve;if(!ue)return;let Ae=null;const pe=ue.name;if(pe==="#text")Ae=ue.value;else if(XfaText.shouldBuildText(pe))(ve=ue==null?void 0:ue.attributes)!=null&&ve.textContent?Ae=ue.attributes.textContent:ue.value&&(Ae=ue.value);else return;if(Ae!==null&&ne.push({str:Ae}),!!ue.children)for(const me of ue.children)ce(me)}return ce(J),oe}static shouldBuildText(J){return!(J==="textarea"||J==="input"||J==="option"||J==="select")}}class XfaLayer{static setupStorage(J,ne,oe,ce,ue){const Ae=ce.getValue(ne,{value:null});switch(oe.name){case"textarea":if(Ae.value!==null&&(J.textContent=Ae.value),ue==="print")break;J.addEventListener("input",pe=>{ce.setValue(ne,{value:pe.target.value})});break;case"input":if(oe.attributes.type==="radio"||oe.attributes.type==="checkbox"){if(Ae.value===oe.attributes.xfaOn?J.setAttribute("checked",!0):Ae.value===oe.attributes.xfaOff&&J.removeAttribute("checked"),ue==="print")break;J.addEventListener("change",pe=>{ce.setValue(ne,{value:pe.target.checked?pe.target.getAttribute("xfaOn"):pe.target.getAttribute("xfaOff")})})}else{if(Ae.value!==null&&J.setAttribute("value",Ae.value),ue==="print")break;J.addEventListener("input",pe=>{ce.setValue(ne,{value:pe.target.value})})}break;case"select":if(Ae.value!==null){J.setAttribute("value",Ae.value);for(const pe of oe.children)pe.attributes.value===Ae.value?pe.attributes.selected=!0:pe.attributes.hasOwnProperty("selected")&&delete pe.attributes.selected}J.addEventListener("input",pe=>{const ve=pe.target.options,me=ve.selectedIndex===-1?"":ve[ve.selectedIndex].value;ce.setValue(ne,{value:me})});break}}static setAttributes({html:J,element:ne,storage:oe=null,intent:ce,linkService:ue}){const{attributes:Ae}=ne,pe=J instanceof HTMLAnchorElement;Ae.type==="radio"&&(Ae.name=`${Ae.name}-${ce}`);for(const[ve,me]of Object.entries(Ae))if(me!=null)switch(ve){case"class":me.length&&J.setAttribute(ve,me.join(" "));break;case"dataId":break;case"id":J.setAttribute("data-element-id",me);break;case"style":Object.assign(J.style,me);break;case"textContent":J.textContent=me;break;default:(!pe||ve!=="href"&&ve!=="newWindow")&&J.setAttribute(ve,me)}pe&&ue.addLinkAttributes(J,Ae.href,Ae.newWindow),oe&&Ae.dataId&&this.setupStorage(J,Ae.dataId,ne,oe)}static render(J){var ye,xe;const ne=J.annotationStorage,oe=J.linkService,ce=J.xfaHtml,ue=J.intent||"display",Ae=document.createElement(ce.name);ce.attributes&&this.setAttributes({html:Ae,element:ce,intent:ue,linkService:oe});const pe=ue!=="richText",ve=J.div;if(ve.append(Ae),J.viewport){const _e=`matrix(${J.viewport.transform.join(",")})`;ve.style.transform=_e}pe&&ve.setAttribute("class","xfaLayer xfaFont");const me=[];if(ce.children.length===0){if(ce.value){const _e=document.createTextNode(ce.value);Ae.append(_e),pe&&XfaText.shouldBuildText(ce.name)&&me.push(_e)}return{textDivs:me}}const ge=[[ce,-1,Ae]];for(;ge.length>0;){const[_e,$e,Ie]=ge.at(-1);if($e+1===_e.children.length){ge.pop();continue}const Fe=_e.children[++ge.at(-1)[1]];if(Fe===null)continue;const{name:ke}=Fe;if(ke==="#text"){const We=document.createTextNode(Fe.value);me.push(We),Ie.append(We);continue}const je=(ye=Fe==null?void 0:Fe.attributes)!=null&&ye.xmlns?document.createElementNS(Fe.attributes.xmlns,ke):document.createElement(ke);if(Ie.append(je),Fe.attributes&&this.setAttributes({html:je,element:Fe,storage:ne,intent:ue,linkService:oe}),((xe=Fe.children)==null?void 0:xe.length)>0)ge.push([Fe,-1,je]);else if(Fe.value){const We=document.createTextNode(Fe.value);pe&&XfaText.shouldBuildText(ke)&&me.push(We),je.append(We)}}for(const _e of ve.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_e.setAttribute("readOnly",!0);return{textDivs:me}}static update(J){const ne=`matrix(${J.viewport.transform.join(",")})`;J.div.style.transform=ne,J.div.hidden=!1}}const SVG_NS="http://www.w3.org/2000/svg",Ll=class Ll{};wr(Ll,"CSS",96),wr(Ll,"PDF",72),wr(Ll,"PDF_TO_CSS_UNITS",Ll.CSS/Ll.PDF);let PixelsPerInch=Ll;async function fetchData(K,J="text"){if(isValidFetchUrl(K,document.baseURI)){const ne=await fetch(K);if(!ne.ok)throw new Error(ne.statusText);switch(J){case"arraybuffer":return ne.arrayBuffer();case"blob":return ne.blob();case"json":return ne.json()}return ne.text()}return new Promise((ne,oe)=>{const ce=new XMLHttpRequest;ce.open("GET",K,!0),ce.responseType=J,ce.onreadystatechange=()=>{if(ce.readyState===XMLHttpRequest.DONE){if(ce.status===200||ce.status===0){switch(J){case"arraybuffer":case"blob":case"json":ne(ce.response);return}ne(ce.responseText);return}oe(new Error(ce.statusText))}},ce.send(null)})}class PageViewport{constructor({viewBox:J,userUnit:ne,scale:oe,rotation:ce,offsetX:ue=0,offsetY:Ae=0,dontFlip:pe=!1}){this.viewBox=J,this.userUnit=ne,this.scale=oe,this.rotation=ce,this.offsetX=ue,this.offsetY=Ae,oe*=ne;const ve=(J[2]+J[0])/2,me=(J[3]+J[1])/2;let ge,ye,xe,_e;switch(ce%=360,ce<0&&(ce+=360),ce){case 180:ge=-1,ye=0,xe=0,_e=1;break;case 90:ge=0,ye=1,xe=1,_e=0;break;case 270:ge=0,ye=-1,xe=-1,_e=0;break;case 0:ge=1,ye=0,xe=0,_e=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}pe&&(xe=-xe,_e=-_e);let $e,Ie,Fe,ke;ge===0?($e=Math.abs(me-J[1])*oe+ue,Ie=Math.abs(ve-J[0])*oe+Ae,Fe=(J[3]-J[1])*oe,ke=(J[2]-J[0])*oe):($e=Math.abs(ve-J[0])*oe+ue,Ie=Math.abs(me-J[1])*oe+Ae,Fe=(J[2]-J[0])*oe,ke=(J[3]-J[1])*oe),this.transform=[ge*oe,ye*oe,xe*oe,_e*oe,$e-ge*oe*ve-xe*oe*me,Ie-ye*oe*ve-_e*oe*me],this.width=Fe,this.height=ke}get rawDims(){const J=this.viewBox;return shadow(this,"rawDims",{pageWidth:J[2]-J[0],pageHeight:J[3]-J[1],pageX:J[0],pageY:J[1]})}clone({scale:J=this.scale,rotation:ne=this.rotation,offsetX:oe=this.offsetX,offsetY:ce=this.offsetY,dontFlip:ue=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:J,rotation:ne,offsetX:oe,offsetY:ce,dontFlip:ue})}convertToViewportPoint(J,ne){const oe=[J,ne];return Util.applyTransform(oe,this.transform),oe}convertToViewportRectangle(J){const ne=[J[0],J[1]];Util.applyTransform(ne,this.transform);const oe=[J[2],J[3]];return Util.applyTransform(oe,this.transform),[ne[0],ne[1],oe[0],oe[1]]}convertToPdfPoint(J,ne){const oe=[J,ne];return Util.applyInverseTransform(oe,this.transform),oe}}class RenderingCancelledException extends BaseException{constructor(J,ne=0){super(J,"RenderingCancelledException"),this.extraDelay=ne}}function isDataScheme(K){const J=K.length;let ne=0;for(;ne<J&&K[ne].trim()==="";)ne++;return K.substring(ne,ne+5).toLowerCase()==="data:"}function isPdfFile(K){return typeof K=="string"&&/\.pdf$/i.test(K)}function getFilenameFromUrl(K){return[K]=K.split(/[#?]/,1),K.substring(K.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(K,J="document.pdf"){if(typeof K!="string")return J;if(isDataScheme(K))return warn$2('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const oe=(pe=>{try{return new URL(pe)}catch{try{return new URL(decodeURIComponent(pe))}catch{try{return new URL(pe,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(pe),"https://foo.bar")}catch{return null}}}}})(K);if(!oe)return J;const ce=pe=>{try{let ve=decodeURIComponent(pe);return ve.includes("/")?(ve=ve.split("/").at(-1),ve.test(/^\.pdf$/i)?ve:pe):ve}catch{return pe}},ue=/\.pdf$/i,Ae=oe.pathname.split("/").at(-1);if(ue.test(Ae))return ce(Ae);if(oe.searchParams.size>0){const pe=Array.from(oe.searchParams.values()).reverse();for(const me of pe)if(ue.test(me))return ce(me);const ve=Array.from(oe.searchParams.keys()).reverse();for(const me of ve)if(ue.test(me))return ce(me)}if(oe.hash){const ve=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(oe.hash);if(ve)return ce(ve[0])}return J}class StatTimer{constructor(){wr(this,"started",Object.create(null));wr(this,"times",[])}time(J){J in this.started&&warn$2(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||warn$2(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let ne=0;for(const{name:oe}of this.times)ne=Math.max(oe.length,ne);for(const{name:oe,start:ce,end:ue}of this.times)J.push(`${oe.padEnd(ne)} ${ue-ce}ms
`);return J.join("")}}function isValidFetchUrl(K,J){const ne=J?URL.parse(K,J):URL.parse(K);return(ne==null?void 0:ne.protocol)==="http:"||(ne==null?void 0:ne.protocol)==="https:"}function noContextMenu(K){K.preventDefault()}function stopEvent(K){K.preventDefault(),K.stopPropagation()}function deprecated(K){console.log("Deprecated API usage: "+K)}var Ad;class PDFDateString{static toDateObject(J){if(J instanceof Date)return J;if(!J||typeof J!="string")return null;Ze(this,Ad)||ht(this,Ad,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ne=Ze(this,Ad).exec(J);if(!ne)return null;const oe=parseInt(ne[1],10);let ce=parseInt(ne[2],10);ce=ce>=1&&ce<=12?ce-1:0;let ue=parseInt(ne[3],10);ue=ue>=1&&ue<=31?ue:1;let Ae=parseInt(ne[4],10);Ae=Ae>=0&&Ae<=23?Ae:0;let pe=parseInt(ne[5],10);pe=pe>=0&&pe<=59?pe:0;let ve=parseInt(ne[6],10);ve=ve>=0&&ve<=59?ve:0;const me=ne[7]||"Z";let ge=parseInt(ne[8],10);ge=ge>=0&&ge<=23?ge:0;let ye=parseInt(ne[9],10)||0;return ye=ye>=0&&ye<=59?ye:0,me==="-"?(Ae+=ge,pe+=ye):me==="+"&&(Ae-=ge,pe-=ye),new Date(Date.UTC(oe,ce,ue,Ae,pe,ve))}}Ad=new WeakMap,yt(PDFDateString,Ad);function getXfaPageViewport(K,{scale:J=1,rotation:ne=0}){const{width:oe,height:ce}=K.attributes.style,ue=[0,0,parseInt(oe),parseInt(ce)];return new PageViewport({viewBox:ue,userUnit:1,scale:J,rotation:ne})}function getRGB(K){if(K.startsWith("#")){const J=parseInt(K.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return K.startsWith("rgb(")?K.slice(4,-1).split(",").map(J=>parseInt(J)):K.startsWith("rgba(")?K.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):(warn$2(`Not a valid color format: "${K}"`),[0,0,0])}function getColorValues(K){const J=document.createElement("span");J.style.visibility="hidden",J.style.colorScheme="only light",document.body.append(J);for(const ne of K.keys()){J.style.color=ne;const oe=window.getComputedStyle(J).color;K.set(ne,getRGB(oe))}J.remove()}function getCurrentTransform(K){const{a:J,b:ne,c:oe,d:ce,e:ue,f:Ae}=K.getTransform();return[J,ne,oe,ce,ue,Ae]}function getCurrentTransformInverse(K){const{a:J,b:ne,c:oe,d:ce,e:ue,f:Ae}=K.getTransform().invertSelf();return[J,ne,oe,ce,ue,Ae]}function setLayerDimensions(K,J,ne=!1,oe=!0){if(J instanceof PageViewport){const{pageWidth:ce,pageHeight:ue}=J.rawDims,{style:Ae}=K,pe=util_FeatureTest.isCSSRoundSupported,ve=`var(--total-scale-factor) * ${ce}px`,me=`var(--total-scale-factor) * ${ue}px`,ge=pe?`round(down, ${ve}, var(--scale-round-x))`:`calc(${ve})`,ye=pe?`round(down, ${me}, var(--scale-round-y))`:`calc(${me})`;!ne||J.rotation%180===0?(Ae.width=ge,Ae.height=ye):(Ae.width=ye,Ae.height=ge)}oe&&K.setAttribute("data-main-rotation",J.rotation)}class OutputScale{constructor(){const{pixelRatio:J}=OutputScale;this.sx=J,this.sy=J}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(J,ne,oe,ce,ue=-1){let Ae=1/0,pe=1/0,ve=1/0;oe=OutputScale.capPixels(oe,ue),oe>0&&(Ae=Math.sqrt(oe/(J*ne))),ce!==-1&&(pe=ce/J,ve=ce/ne);const me=Math.min(Ae,pe,ve);return this.sx>me||this.sy>me?(this.sx=me,this.sy=me,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(J,ne){if(ne>=0){const oe=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+ne/100));return J>0?Math.min(J,oe):oe}return J}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ColorScheme{static get isDarkMode(){var J;return shadow(this,"isDarkMode",!!((J=window==null?void 0:window.matchMedia)!=null&&J.call(window,"(prefers-color-scheme: dark)").matches))}}class CSSConstants{static get commentForegroundColor(){const J=document.createElement("span");J.classList.add("comment","sidebar");const{style:ne}=J;ne.width=ne.height="0",ne.display="none",ne.color="var(--comment-fg-color)",document.body.append(J);const{color:oe}=window.getComputedStyle(J);return J.remove(),shadow(this,"commentForegroundColor",getRGB(oe))}}function applyOpacity(K,J,ne,oe){oe=Math.min(Math.max(oe??1,0),1);const ce=255*(1-oe);return K=Math.round(K*oe+ce),J=Math.round(J*oe+ce),ne=Math.round(ne*oe+ce),[K,J,ne]}function RGBToHSL(K,J){const ne=K[0]/255,oe=K[1]/255,ce=K[2]/255,ue=Math.max(ne,oe,ce),Ae=Math.min(ne,oe,ce),pe=(ue+Ae)/2;if(ue===Ae)J[0]=J[1]=0;else{const ve=ue-Ae;switch(J[1]=pe<.5?ve/(ue+Ae):ve/(2-ue-Ae),ue){case ne:J[0]=((oe-ce)/ve+(oe<ce?6:0))*60;break;case oe:J[0]=((ce-ne)/ve+2)*60;break;case ce:J[0]=((ne-oe)/ve+4)*60;break}}J[2]=pe}function HSLToRGB(K,J){const ne=K[0],oe=K[1],ce=K[2],ue=(1-Math.abs(2*ce-1))*oe,Ae=ue*(1-Math.abs(ne/60%2-1)),pe=ce-ue/2;switch(Math.floor(ne/60)){case 0:J[0]=ue+pe,J[1]=Ae+pe,J[2]=pe;break;case 1:J[0]=Ae+pe,J[1]=ue+pe,J[2]=pe;break;case 2:J[0]=pe,J[1]=ue+pe,J[2]=Ae+pe;break;case 3:J[0]=pe,J[1]=Ae+pe,J[2]=ue+pe;break;case 4:J[0]=Ae+pe,J[1]=pe,J[2]=ue+pe;break;case 5:case 6:J[0]=ue+pe,J[1]=pe,J[2]=Ae+pe;break}}function computeLuminance(K){return K<=.03928?K/12.92:((K+.055)/1.055)**2.4}function contrastRatio(K,J,ne){HSLToRGB(K,ne),ne.map(computeLuminance);const oe=.2126*ne[0]+.7152*ne[1]+.0722*ne[2];HSLToRGB(J,ne),ne.map(computeLuminance);const ce=.2126*ne[0]+.7152*ne[1]+.0722*ne[2];return oe>ce?(oe+.05)/(ce+.05):(ce+.05)/(oe+.05)}const contrastCache=new Map;function findContrastColor(K,J){const ne=K[0]+K[1]*256+K[2]*65536+J[0]*16777216+J[1]*4294967296+J[2]*1099511627776;let oe=contrastCache.get(ne);if(oe)return oe;const ce=new Float32Array(9),ue=ce.subarray(0,3),Ae=ce.subarray(3,6);RGBToHSL(K,Ae);const pe=ce.subarray(6,9);RGBToHSL(J,pe);const ve=pe[2]<.5,me=ve?12:4.5;if(Ae[2]=ve?Math.sqrt(Ae[2]):1-Math.sqrt(1-Ae[2]),contrastRatio(Ae,pe,ue)<me){let ge,ye;ve?(ge=Ae[2],ye=1):(ge=0,ye=Ae[2]);const xe=.005;for(;ye-ge>xe;){const _e=Ae[2]=(ge+ye)/2;ve===contrastRatio(Ae,pe,ue)<me?ge=_e:ye=_e}Ae[2]=ve?ye:ge}return HSLToRGB(Ae,ue),oe=Util.makeHexColor(Math.round(ue[0]*255),Math.round(ue[1]*255),Math.round(ue[2]*255)),contrastCache.set(ne,oe),oe}function renderRichText({html:K,dir:J,className:ne},oe){const ce=document.createDocumentFragment();if(typeof K=="string"){const ue=document.createElement("p");ue.dir=J||"auto";const Ae=K.split(/(?:\r\n?|\n)/);for(let pe=0,ve=Ae.length;pe<ve;++pe){const me=Ae[pe];ue.append(document.createTextNode(me)),pe<ve-1&&ue.append(document.createElement("br"))}ce.append(ue)}else XfaLayer.render({xfaHtml:K,div:ce,intent:"richText"});ce.firstChild.classList.add("richText",ne),oe.append(ce)}var No,Do,Ls,Fs,pd,Oo,du,hu,Gs,gd,vp,Og,Vi,Lg,Fg,ru,Gf;let EditorToolbar$1=(Gs=class{constructor(J){yt(this,Vi);yt(this,No,null);yt(this,Do,null);yt(this,Ls);yt(this,Fs,null);yt(this,pd,null);yt(this,Oo,null);yt(this,du,null);yt(this,hu,null);ht(this,Ls,J),Ze(Gs,gd)||ht(Gs,gd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const J=ht(this,No,document.createElement("div"));J.classList.add("editToolbar","hidden"),J.setAttribute("role","toolbar");const ne=Ze(this,Ls)._uiManager._signal;ne instanceof AbortSignal&&!ne.aborted&&(J.addEventListener("contextmenu",noContextMenu,{signal:ne}),J.addEventListener("pointerdown",bt(Gs,vp,Og),{signal:ne}));const oe=ht(this,Fs,document.createElement("div"));oe.className="buttons",J.append(oe);const ce=Ze(this,Ls).toolbarPosition;if(ce){const{style:ue}=J,Ae=Ze(this,Ls)._uiManager.direction==="ltr"?1-ce[0]:ce[0];ue.insetInlineEnd=`${100*Ae}%`,ue.top=`calc(${100*ce[1]}% + var(--editor-toolbar-vert-offset))`}return J}get div(){return Ze(this,No)}hide(){var J;Ze(this,No).classList.add("hidden"),(J=Ze(this,Do))==null||J.hideDropdown()}show(){var J,ne;Ze(this,No).classList.remove("hidden"),(J=Ze(this,pd))==null||J.shown(),(ne=Ze(this,Oo))==null||ne.shown()}addDeleteButton(){const{editorType:J,_uiManager:ne}=Ze(this,Ls),oe=document.createElement("button");oe.classList.add("basic","deleteButton"),oe.tabIndex=0,oe.setAttribute("data-l10n-id",Ze(Gs,gd)[J]),bt(this,Vi,ru).call(this,oe)&&oe.addEventListener("click",ce=>{ne.delete()},{signal:ne._signal}),Ze(this,Fs).append(oe)}async addAltText(J){const ne=await J.render();bt(this,Vi,ru).call(this,ne),Ze(this,Fs).append(ne,Ze(this,Vi,Gf)),ht(this,pd,J)}addComment(J,ne=null){if(Ze(this,Oo))return;const oe=J.renderForToolbar();if(!oe)return;bt(this,Vi,ru).call(this,oe);const ce=ht(this,du,Ze(this,Vi,Gf));ne?(Ze(this,Fs).insertBefore(oe,ne),Ze(this,Fs).insertBefore(ce,ne)):Ze(this,Fs).append(oe,ce),ht(this,Oo,J),J.toolbar=this}addColorPicker(J){if(Ze(this,Do))return;ht(this,Do,J);const ne=J.renderButton();bt(this,Vi,ru).call(this,ne),Ze(this,Fs).append(ne,Ze(this,Vi,Gf))}async addEditSignatureButton(J){const ne=ht(this,hu,await J.renderEditButton(Ze(this,Ls)));bt(this,Vi,ru).call(this,ne),Ze(this,Fs).append(ne,Ze(this,Vi,Gf))}removeButton(J){var ne,oe;switch(J){case"comment":(ne=Ze(this,Oo))==null||ne.removeToolbarCommentButton(),ht(this,Oo,null),(oe=Ze(this,du))==null||oe.remove(),ht(this,du,null);break}}async addButton(J,ne){switch(J){case"colorPicker":this.addColorPicker(ne);break;case"altText":await this.addAltText(ne);break;case"editSignature":await this.addEditSignatureButton(ne);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(ne);break}}async addButtonBefore(J,ne,oe){const ce=Ze(this,Fs).querySelector(oe);ce&&J==="comment"&&this.addComment(ne,ce)}updateEditSignatureButton(J){Ze(this,hu)&&(Ze(this,hu).title=J)}remove(){var J;Ze(this,No).remove(),(J=Ze(this,Do))==null||J.destroy(),ht(this,Do,null)}},No=new WeakMap,Do=new WeakMap,Ls=new WeakMap,Fs=new WeakMap,pd=new WeakMap,Oo=new WeakMap,du=new WeakMap,hu=new WeakMap,gd=new WeakMap,vp=new WeakSet,Og=function(J){J.stopPropagation()},Vi=new WeakSet,Lg=function(J){Ze(this,Ls)._focusEventsAllowed=!1,stopEvent(J)},Fg=function(J){Ze(this,Ls)._focusEventsAllowed=!0,stopEvent(J)},ru=function(J){const ne=Ze(this,Ls)._uiManager._signal;return!(ne instanceof AbortSignal)||ne.aborted?!1:(J.addEventListener("focusin",bt(this,Vi,Lg).bind(this),{capture:!0,signal:ne}),J.addEventListener("focusout",bt(this,Vi,Fg).bind(this),{capture:!0,signal:ne}),J.addEventListener("contextmenu",noContextMenu,{signal:ne}),!0)},Gf=function(){const J=document.createElement("div");return J.className="divider",J},yt(Gs,vp),yt(Gs,gd,null),Gs);var md,Pl,Ka,Bo,kg,Pg,p0;class FloatingToolbar{constructor(J){yt(this,Bo);yt(this,md,null);yt(this,Pl,null);yt(this,Ka);ht(this,Ka,J)}show(J,ne,oe){const[ce,ue]=bt(this,Bo,Pg).call(this,ne,oe),{style:Ae}=Ze(this,Pl)||ht(this,Pl,bt(this,Bo,kg).call(this));J.append(Ze(this,Pl)),Ae.insetInlineEnd=`${100*ce}%`,Ae.top=`calc(${100*ue}% + var(--editor-toolbar-vert-offset))`}hide(){Ze(this,Pl).remove()}}md=new WeakMap,Pl=new WeakMap,Ka=new WeakMap,Bo=new WeakSet,kg=function(){const J=ht(this,Pl,document.createElement("div"));J.className="editToolbar",J.setAttribute("role","toolbar");const ne=Ze(this,Ka)._signal;ne instanceof AbortSignal&&!ne.aborted&&J.addEventListener("contextmenu",noContextMenu,{signal:ne});const oe=ht(this,md,document.createElement("div"));return oe.className="buttons",J.append(oe),Ze(this,Ka).hasCommentManager()&&bt(this,Bo,p0).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{Ze(this,Ka).commentSelection("floating_button")}),bt(this,Bo,p0).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{Ze(this,Ka).highlightSelection("floating_button")}),J},Pg=function(J,ne){let oe=0,ce=0;for(const ue of J){const Ae=ue.y+ue.height;if(Ae<oe)continue;const pe=ue.x+(ne?ue.width:0);if(Ae>oe){ce=pe,oe=Ae;continue}ne?pe>ce&&(ce=pe):pe<ce&&(ce=pe)}return[ne?1-ce:ce,oe]},p0=function(J,ne,oe,ce){const ue=document.createElement("button");ue.classList.add("basic",J),ue.tabIndex=0,ue.setAttribute("data-l10n-id",ne);const Ae=document.createElement("span");ue.append(Ae),Ae.className="visuallyHidden",Ae.setAttribute("data-l10n-id",oe);const pe=Ze(this,Ka)._signal;pe instanceof AbortSignal&&!pe.aborted&&(ue.addEventListener("contextmenu",noContextMenu,{signal:pe}),ue.addEventListener("click",ce,{signal:pe})),Ze(this,md).append(ue)};function bindEvents$1(K,J,ne){for(const oe of ne)J.addEventListener(oe,K[oe].bind(K))}var yp;class IdManager{constructor(){yt(this,yp,0)}get id(){return`${AnnotationEditorPrefix}${wi(this,yp)._++}`}}yp=new WeakMap;var Au,vd,Ki,pu,hA;const yg=class yg{constructor(){yt(this,pu);yt(this,Au,getUuid());yt(this,vd,0);yt(this,Ki,null)}static get _isSVGFittingCanvas(){const J='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',oe=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),ce=new Image;ce.src=J;const ue=ce.decode().then(()=>(oe.drawImage(ce,0,0,1,1,0,0,1,3),new Uint32Array(oe.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",ue)}async getFromFile(J){const{lastModified:ne,name:oe,size:ce,type:ue}=J;return bt(this,pu,hA).call(this,`${ne}_${oe}_${ce}_${ue}`,J)}async getFromUrl(J){return bt(this,pu,hA).call(this,J,J)}async getFromBlob(J,ne){const oe=await ne;return bt(this,pu,hA).call(this,J,oe)}async getFromId(J){Ze(this,Ki)||ht(this,Ki,new Map);const ne=Ze(this,Ki).get(J);if(!ne)return null;if(ne.bitmap)return ne.refCounter+=1,ne;if(ne.file)return this.getFromFile(ne.file);if(ne.blobPromise){const{blobPromise:oe}=ne;return delete ne.blobPromise,this.getFromBlob(ne.id,oe)}return this.getFromUrl(ne.url)}getFromCanvas(J,ne){Ze(this,Ki)||ht(this,Ki,new Map);let oe=Ze(this,Ki).get(J);if(oe!=null&&oe.bitmap)return oe.refCounter+=1,oe;const ce=new OffscreenCanvas(ne.width,ne.height);return ce.getContext("2d").drawImage(ne,0,0),oe={bitmap:ce.transferToImageBitmap(),id:`image_${Ze(this,Au)}_${wi(this,vd)._++}`,refCounter:1,isSvg:!1},Ze(this,Ki).set(J,oe),Ze(this,Ki).set(oe.id,oe),oe}getSvgUrl(J){const ne=Ze(this,Ki).get(J);return ne!=null&&ne.isSvg?ne.svgUrl:null}deleteId(J){var ce;Ze(this,Ki)||ht(this,Ki,new Map);const ne=Ze(this,Ki).get(J);if(!ne||(ne.refCounter-=1,ne.refCounter!==0))return;const{bitmap:oe}=ne;if(!ne.url&&!ne.file){const ue=new OffscreenCanvas(oe.width,oe.height);ue.getContext("bitmaprenderer").transferFromImageBitmap(oe),ne.blobPromise=ue.convertToBlob()}(ce=oe.close)==null||ce.call(oe),ne.bitmap=null}isValidId(J){return J.startsWith(`image_${Ze(this,Au)}_`)}};Au=new WeakMap,vd=new WeakMap,Ki=new WeakMap,pu=new WeakSet,hA=async function(J,ne){Ze(this,Ki)||ht(this,Ki,new Map);let oe=Ze(this,Ki).get(J);if(oe===null)return null;if(oe!=null&&oe.bitmap)return oe.refCounter+=1,oe;try{oe||(oe={bitmap:null,id:`image_${Ze(this,Au)}_${wi(this,vd)._++}`,refCounter:0,isSvg:!1});let ce;if(typeof ne=="string"?(oe.url=ne,ce=await fetchData(ne,"blob")):ne instanceof File?ce=oe.file=ne:ne instanceof Blob&&(ce=ne),ce.type==="image/svg+xml"){const ue=yg._isSVGFittingCanvas,Ae=new FileReader,pe=new Image,ve=new Promise((me,ge)=>{pe.onload=()=>{oe.bitmap=pe,oe.isSvg=!0,me()},Ae.onload=async()=>{const ye=oe.svgUrl=Ae.result;pe.src=await ue?`${ye}#svgView(preserveAspectRatio(none))`:ye},pe.onerror=Ae.onerror=ge});Ae.readAsDataURL(ce),await ve}else oe.bitmap=await createImageBitmap(ce);oe.refCounter=1}catch(ce){warn$2(ce),oe=null}return Ze(this,Ki).set(J,oe),oe&&Ze(this,Ki).set(oe.id,oe),oe};let ImageManager=yg;var mi,Lo,yd,ui;class CommandManager{constructor(J=128){yt(this,mi,[]);yt(this,Lo,!1);yt(this,yd);yt(this,ui,-1);ht(this,yd,J)}add({cmd:J,undo:ne,post:oe,mustExec:ce,type:ue=NaN,overwriteIfSameType:Ae=!1,keepUndo:pe=!1}){if(ce&&J(),Ze(this,Lo))return;const ve={cmd:J,undo:ne,post:oe,type:ue};if(Ze(this,ui)===-1){Ze(this,mi).length>0&&(Ze(this,mi).length=0),ht(this,ui,0),Ze(this,mi).push(ve);return}if(Ae&&Ze(this,mi)[Ze(this,ui)].type===ue){pe&&(ve.undo=Ze(this,mi)[Ze(this,ui)].undo),Ze(this,mi)[Ze(this,ui)]=ve;return}const me=Ze(this,ui)+1;me===Ze(this,yd)?Ze(this,mi).splice(0,1):(ht(this,ui,me),me<Ze(this,mi).length&&Ze(this,mi).splice(me)),Ze(this,mi).push(ve)}undo(){if(Ze(this,ui)===-1)return;ht(this,Lo,!0);const{undo:J,post:ne}=Ze(this,mi)[Ze(this,ui)];J(),ne==null||ne(),ht(this,Lo,!1),ht(this,ui,Ze(this,ui)-1)}redo(){if(Ze(this,ui)<Ze(this,mi).length-1){ht(this,ui,Ze(this,ui)+1),ht(this,Lo,!0);const{cmd:J,post:ne}=Ze(this,mi)[Ze(this,ui)];J(),ne==null||ne(),ht(this,Lo,!1)}}hasSomethingToUndo(){return Ze(this,ui)!==-1}hasSomethingToRedo(){return Ze(this,ui)<Ze(this,mi).length-1}cleanType(J){if(Ze(this,ui)!==-1){for(let ne=Ze(this,ui);ne>=0;ne--)if(Ze(this,mi)[ne].type!==J){Ze(this,mi).splice(ne+1,Ze(this,ui)-ne),ht(this,ui,ne);return}Ze(this,mi).length=0,ht(this,ui,-1)}}destroy(){ht(this,mi,null)}}mi=new WeakMap,Lo=new WeakMap,yd=new WeakMap,ui=new WeakMap;var xp,Ug;class KeyboardManager{constructor(J){yt(this,xp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ne}=util_FeatureTest.platform;for(const[oe,ce,ue={}]of J)for(const Ae of oe){const pe=Ae.startsWith("mac+");ne&&pe?(this.callbacks.set(Ae.slice(4),{callback:ce,options:ue}),this.allKeys.add(Ae.split("+").at(-1))):!ne&&!pe&&(this.callbacks.set(Ae,{callback:ce,options:ue}),this.allKeys.add(Ae.split("+").at(-1)))}}exec(J,ne){if(!this.allKeys.has(ne.key))return;const oe=this.callbacks.get(bt(this,xp,Ug).call(this,ne));if(!oe)return;const{callback:ce,options:{bubbles:ue=!1,args:Ae=[],checker:pe=null}}=oe;pe&&!pe(J,ne)||(ce.bind(J,...Ae,ne)(),ue||stopEvent(ne))}}xp=new WeakSet,Ug=function(J){J.altKey&&this.buffer.push("alt"),J.ctrlKey&&this.buffer.push("ctrl"),J.metaKey&&this.buffer.push("meta"),J.shiftKey&&this.buffer.push("shift"),this.buffer.push(J.key);const ne=this.buffer.join("+");return this.buffer.length=0,ne};const Ep=class Ep{get _colors(){const J=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(J),shadow(this,"_colors",J)}convert(J){const ne=getRGB(J);if(!window.matchMedia("(forced-colors: active)").matches)return ne;for(const[oe,ce]of this._colors)if(ce.every((ue,Ae)=>ue===ne[Ae]))return Ep._colorsMapping.get(oe);return ne}getHexCode(J){const ne=this._colors.get(J);return ne?Util.makeHexColor(...ne):J}};wr(Ep,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=Ep;var gu,gs,mu,di,Si,vu,ks,yu,Ps,qi,Fo,ko,xu,Po,ma,Us,Ul,xd,Ed,Eu,bd,va,Uo,bu,jo,ya,bp,Vo,wu,wd,Qo,Hl,Cu,Ko,Cd,Ei,qn,qa,qo,Go,Sd,Su,_d,zo,xa,Ga,Td,Rd,Hs,Lr,pA,g0,Hg,jg,zf,Vg,Qg,Kg,m0,qg,v0,y0,Gg,Ji,ja,zg,Wg,x0,Yg,Wf,E0;const lu=class lu{constructor(J,ne,oe,ce,ue,Ae,pe,ve,me,ge,ye,xe,_e,$e,Ie,Fe){yt(this,Lr);yt(this,gu,new AbortController);yt(this,gs,null);yt(this,mu,null);yt(this,di,new Map);yt(this,Si,new Map);yt(this,vu,null);yt(this,ks,null);yt(this,yu,null);yt(this,Ps,new CommandManager);yt(this,qi,null);yt(this,Fo,null);yt(this,ko,null);yt(this,xu,0);yt(this,Po,new Set);yt(this,ma,null);yt(this,Us,null);yt(this,Ul,new Set);wr(this,"_editorUndoBar",null);yt(this,xd,!1);yt(this,Ed,!1);yt(this,Eu,!1);yt(this,bd,null);yt(this,va,null);yt(this,Uo,null);yt(this,bu,null);yt(this,jo,!1);yt(this,ya,null);yt(this,bp,new IdManager);yt(this,Vo,!1);yt(this,wu,!1);yt(this,wd,!1);yt(this,Qo,null);yt(this,Hl,null);yt(this,Cu,null);yt(this,Ko,null);yt(this,Cd,null);yt(this,Ei,AnnotationEditorType.NONE);yt(this,qn,new Set);yt(this,qa,null);yt(this,qo,null);yt(this,Go,null);yt(this,Sd,null);yt(this,Su,null);yt(this,_d,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});yt(this,zo,[0,0]);yt(this,xa,null);yt(this,Ga,null);yt(this,Td,null);yt(this,Rd,null);yt(this,Hs,null);const ke=this._signal=Ze(this,gu).signal;ht(this,Ga,J),ht(this,Td,ne),ht(this,Rd,oe),ht(this,vu,ce),ht(this,qi,ue),ht(this,qo,Ae),ht(this,Su,ve),this._eventBus=pe,pe._on("editingaction",this.onEditingAction.bind(this),{signal:ke}),pe._on("pagechanging",this.onPageChanging.bind(this),{signal:ke}),pe._on("scalechanging",this.onScaleChanging.bind(this),{signal:ke}),pe._on("rotationchanging",this.onRotationChanging.bind(this),{signal:ke}),pe._on("setpreference",this.onSetPreference.bind(this),{signal:ke}),pe._on("switchannotationeditorparams",je=>this.updateParams(je.type,je.value),{signal:ke}),window.addEventListener("pointerdown",()=>{ht(this,wu,!0)},{capture:!0,signal:ke}),window.addEventListener("pointerup",()=>{ht(this,wu,!1)},{capture:!0,signal:ke}),bt(this,Lr,Vg).call(this),bt(this,Lr,Gg).call(this),bt(this,Lr,m0).call(this),ht(this,ks,ve.annotationStorage),ht(this,bd,ve.filterFactory),ht(this,Go,me),ht(this,bu,ge||null),ht(this,xd,ye),ht(this,Ed,xe),ht(this,Eu,_e),ht(this,Cd,$e||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=Ie||null,this._supportsPinchToZoom=Fe!==!1,ue==null||ue.setSidebarUiManager(this)}static get _keyboardManager(){const J=lu.prototype,ne=Ae=>Ze(Ae,Ga).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&Ae.hasSomethingToControl(),oe=(Ae,{target:pe})=>{if(pe instanceof HTMLInputElement){const{type:ve}=pe;return ve!=="text"&&ve!=="number"}return!0},ce=this.TRANSLATE_SMALL,ue=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],J.selectAll,{checker:oe}],[["ctrl+z","mac+meta+z"],J.undo,{checker:oe}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],J.redo,{checker:oe}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],J.delete,{checker:oe}],[["Enter","mac+Enter"],J.addNewEditorFromKeyboard,{checker:(Ae,{target:pe})=>!(pe instanceof HTMLButtonElement)&&Ze(Ae,Ga).contains(pe)&&!Ae.isEnterHandled}],[[" ","mac+ "],J.addNewEditorFromKeyboard,{checker:(Ae,{target:pe})=>!(pe instanceof HTMLButtonElement)&&Ze(Ae,Ga).contains(document.activeElement)}],[["Escape","mac+Escape"],J.unselectAll],[["ArrowLeft","mac+ArrowLeft"],J.translateSelectedEditors,{args:[-ce,0],checker:ne}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],J.translateSelectedEditors,{args:[-ue,0],checker:ne}],[["ArrowRight","mac+ArrowRight"],J.translateSelectedEditors,{args:[ce,0],checker:ne}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],J.translateSelectedEditors,{args:[ue,0],checker:ne}],[["ArrowUp","mac+ArrowUp"],J.translateSelectedEditors,{args:[0,-ce],checker:ne}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],J.translateSelectedEditors,{args:[0,-ue],checker:ne}],[["ArrowDown","mac+ArrowDown"],J.translateSelectedEditors,{args:[0,ce],checker:ne}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],J.translateSelectedEditors,{args:[0,ue],checker:ne}]]))}destroy(){var J,ne,oe,ce,ue,Ae,pe,ve,me;(J=Ze(this,Hs))==null||J.resolve(),ht(this,Hs,null),(ne=Ze(this,gu))==null||ne.abort(),ht(this,gu,null),this._signal=null;for(const ge of Ze(this,Si).values())ge.destroy();Ze(this,Si).clear(),Ze(this,di).clear(),Ze(this,Ul).clear(),(oe=Ze(this,Ko))==null||oe.clear(),ht(this,gs,null),Ze(this,qn).clear(),Ze(this,Ps).destroy(),(ce=Ze(this,vu))==null||ce.destroy(),(ue=Ze(this,qi))==null||ue.destroy(),(Ae=Ze(this,qo))==null||Ae.destroy(),(pe=Ze(this,ya))==null||pe.hide(),ht(this,ya,null),(ve=Ze(this,Cu))==null||ve.destroy(),ht(this,Cu,null),ht(this,mu,null),Ze(this,va)&&(clearTimeout(Ze(this,va)),ht(this,va,null)),Ze(this,xa)&&(clearTimeout(Ze(this,xa)),ht(this,xa,null)),(me=this._editorUndoBar)==null||me.destroy(),ht(this,Su,null)}combinedSignal(J){return AbortSignal.any([this._signal,J.signal])}get mlManager(){return Ze(this,Cd)}get useNewAltTextFlow(){return Ze(this,Ed)}get useNewAltTextWhenAddingImage(){return Ze(this,Eu)}get hcmFilter(){return shadow(this,"hcmFilter",Ze(this,Go)?Ze(this,bd).addHCMFilter(Ze(this,Go).foreground,Ze(this,Go).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(Ze(this,Ga)).direction)}get _highlightColors(){return shadow(this,"_highlightColors",Ze(this,bu)?new Map(Ze(this,bu).split(",").map(J=>(J=J.split("=").map(ne=>ne.trim()),J[1]=J[1].toUpperCase(),J))):null)}get highlightColors(){const{_highlightColors:J}=this;if(!J)return shadow(this,"highlightColors",null);const ne=new Map,oe=!!Ze(this,Go);for(const[ce,ue]of J){const Ae=ce.endsWith("_HCM");if(oe&&Ae){ne.set(ce.replace("_HCM",""),ue);continue}!oe&&!Ae&&ne.set(ce,ue)}return shadow(this,"highlightColors",ne)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,J=>J.reverse())):null)}getNonHCMColor(J){if(!this._highlightColors)return J;const ne=this.highlightColorNames.get(J);return this._highlightColors.get(ne)||J}getNonHCMColorName(J){return this.highlightColorNames.get(J)||J}setCurrentDrawingSession(J){J?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),ht(this,ko,J)}setMainHighlightColorPicker(J){ht(this,Cu,J)}editAltText(J,ne=!1){var oe;(oe=Ze(this,vu))==null||oe.editAltText(this,J,ne)}hasCommentManager(){return!!Ze(this,qi)}editComment(J,ne,oe,ce){var ue;(ue=Ze(this,qi))==null||ue.showDialog(this,J,ne,oe,ce)}selectComment(J,ne){const oe=Ze(this,Si).get(J),ce=oe==null?void 0:oe.getEditorByUID(ne);ce==null||ce.toggleComment(!0,!0)}updateComment(J){var ne;(ne=Ze(this,qi))==null||ne.updateComment(J.getData())}updatePopupColor(J){var ne;(ne=Ze(this,qi))==null||ne.updatePopupColor(J)}removeComment(J){var ne;(ne=Ze(this,qi))==null||ne.removeComments([J.uid])}toggleComment(J,ne,oe=void 0){var ce;(ce=Ze(this,qi))==null||ce.toggleCommentPopup(J,ne,oe)}makeCommentColor(J,ne){var oe;return J&&((oe=Ze(this,qi))==null?void 0:oe.makeCommentColor(J,ne))||null}getCommentDialogElement(){var J;return((J=Ze(this,qi))==null?void 0:J.dialogElement)||null}async waitForEditorsRendered(J){if(Ze(this,Si).has(J-1))return;const{resolve:ne,promise:oe}=Promise.withResolvers(),ce=ue=>{ue.pageNumber===J&&(this._eventBus._off("editorsrendered",ce),ne())};this._eventBus.on("editorsrendered",ce),await oe}getSignature(J){var ne;(ne=Ze(this,qo))==null||ne.getSignature({uiManager:this,editor:J})}get signatureManager(){return Ze(this,qo)}switchToMode(J,ne){this._eventBus.on("annotationeditormodechanged",ne,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:J})}setPreference(J,ne){this._eventBus.dispatch("setpreference",{source:this,name:J,value:ne})}onSetPreference({name:J,value:ne}){switch(J){case"enableNewAltTextWhenAddingImage":ht(this,Eu,ne);break}}onPageChanging({pageNumber:J}){ht(this,xu,J-1)}focusMainContainer(){Ze(this,Ga).focus()}findParent(J,ne){for(const oe of Ze(this,Si).values()){const{x:ce,y:ue,width:Ae,height:pe}=oe.div.getBoundingClientRect();if(J>=ce&&J<=ce+Ae&&ne>=ue&&ne<=ue+pe)return oe}return null}disableUserSelect(J=!1){Ze(this,Td).classList.toggle("noUserSelect",J)}addShouldRescale(J){Ze(this,Ul).add(J)}removeShouldRescale(J){Ze(this,Ul).delete(J)}onScaleChanging({scale:J}){var ne;this.commitOrRemove(),this.viewParameters.realScale=J*PixelsPerInch.PDF_TO_CSS_UNITS;for(const oe of Ze(this,Ul))oe.onScaleChanging();(ne=Ze(this,ko))==null||ne.onScaleChanging()}onRotationChanging({pagesRotation:J}){this.commitOrRemove(),this.viewParameters.rotation=J}highlightSelection(J="",ne=!1){const oe=document.getSelection();if(!oe||oe.isCollapsed)return;const{anchorNode:ce,anchorOffset:ue,focusNode:Ae,focusOffset:pe}=oe,ve=oe.toString(),ge=bt(this,Lr,pA).call(this,oe).closest(".textLayer"),ye=this.getSelectionBoxes(ge);if(!ye)return;oe.empty();const xe=bt(this,Lr,g0).call(this,ge),_e=Ze(this,Ei)===AnnotationEditorType.NONE,$e=()=>{const Ie=xe==null?void 0:xe.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:J,boxes:ye,anchorNode:ce,anchorOffset:ue,focusNode:Ae,focusOffset:pe,text:ve});_e&&this.showAllEditors("highlight",!0,!0),ne&&(Ie==null||Ie.editComment())};if(_e){this.switchToMode(AnnotationEditorType.HIGHLIGHT,$e);return}$e()}commentSelection(J=""){this.highlightSelection(J,!0)}getAndRemoveDataFromAnnotationStorage(J){if(!Ze(this,ks))return null;const ne=`${AnnotationEditorPrefix}${J}`,oe=Ze(this,ks).getRawValue(ne);return oe&&Ze(this,ks).remove(ne),oe}addToAnnotationStorage(J){!J.isEmpty()&&Ze(this,ks)&&!Ze(this,ks).has(J.id)&&Ze(this,ks).setValue(J.id,J)}a11yAlert(J,ne=null){const oe=Ze(this,Rd);oe&&(oe.setAttribute("data-l10n-id",J),ne?oe.setAttribute("data-l10n-args",JSON.stringify(ne)):oe.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Ze(this,jo)&&(ht(this,jo,!1),bt(this,Lr,zf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:J}=document;for(const ne of Ze(this,qn))if(ne.div.contains(J)){ht(this,Hl,[ne,J]),ne._focusEventsAllowed=!1;break}}focus(){if(!Ze(this,Hl))return;const[J,ne]=Ze(this,Hl);ht(this,Hl,null),ne.addEventListener("focusin",()=>{J._focusEventsAllowed=!0},{once:!0,signal:this._signal}),ne.focus()}addEditListeners(){bt(this,Lr,m0).call(this),bt(this,Lr,v0).call(this)}removeEditListeners(){bt(this,Lr,qg).call(this),bt(this,Lr,y0).call(this)}dragOver(J){for(const{type:ne}of J.dataTransfer.items)for(const oe of Ze(this,Us))if(oe.isHandlingMimeForPasting(ne)){J.dataTransfer.dropEffect="copy",J.preventDefault();return}}drop(J){for(const ne of J.dataTransfer.items)for(const oe of Ze(this,Us))if(oe.isHandlingMimeForPasting(ne.type)){oe.paste(ne,this.currentLayer),J.preventDefault();return}}copy(J){var oe;if(J.preventDefault(),(oe=Ze(this,gs))==null||oe.commitOrRemove(),!this.hasSelection)return;const ne=[];for(const ce of Ze(this,qn)){const ue=ce.serialize(!0);ue&&ne.push(ue)}ne.length!==0&&J.clipboardData.setData("application/pdfjs",JSON.stringify(ne))}cut(J){this.copy(J),this.delete()}async paste(J){J.preventDefault();const{clipboardData:ne}=J;for(const ue of ne.items)for(const Ae of Ze(this,Us))if(Ae.isHandlingMimeForPasting(ue.type)){Ae.paste(ue,this.currentLayer);return}let oe=ne.getData("application/pdfjs");if(!oe)return;try{oe=JSON.parse(oe)}catch(ue){warn$2(`paste: "${ue.message}".`);return}if(!Array.isArray(oe))return;this.unselectAll();const ce=this.currentLayer;try{const ue=[];for(const ve of oe){const me=await ce.deserialize(ve);if(!me)return;ue.push(me)}const Ae=()=>{for(const ve of ue)bt(this,Lr,x0).call(this,ve);bt(this,Lr,E0).call(this,ue)},pe=()=>{for(const ve of ue)ve.remove()};this.addCommands({cmd:Ae,undo:pe,mustExec:!0})}catch(ue){warn$2(`paste: "${ue.message}".`)}}keydown(J){!this.isShiftKeyDown&&J.key==="Shift"&&(this.isShiftKeyDown=!0),Ze(this,Ei)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&lu._keyboardManager.exec(this,J)}keyup(J){this.isShiftKeyDown&&J.key==="Shift"&&(this.isShiftKeyDown=!1,Ze(this,jo)&&(ht(this,jo,!1),bt(this,Lr,zf).call(this,"main_toolbar")))}onEditingAction({name:J}){switch(J){case"undo":case"redo":case"delete":case"selectAll":this[J]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(J){J?(bt(this,Lr,Qg).call(this),bt(this,Lr,v0).call(this),bt(this,Lr,Ji).call(this,{isEditing:Ze(this,Ei)!==AnnotationEditorType.NONE,isEmpty:bt(this,Lr,Wf).call(this),hasSomethingToUndo:Ze(this,Ps).hasSomethingToUndo(),hasSomethingToRedo:Ze(this,Ps).hasSomethingToRedo(),hasSelectedEditor:!1})):(bt(this,Lr,Kg).call(this),bt(this,Lr,y0).call(this),bt(this,Lr,Ji).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(J){if(!Ze(this,Us)){ht(this,Us,J);for(const ne of Ze(this,Us))bt(this,Lr,ja).call(this,ne.defaultPropertiesToUpdate)}}getId(){return Ze(this,bp).id}get currentLayer(){return Ze(this,Si).get(Ze(this,xu))}getLayer(J){return Ze(this,Si).get(J)}get currentPageIndex(){return Ze(this,xu)}addLayer(J){Ze(this,Si).set(J.pageIndex,J),Ze(this,Vo)?J.enable():J.disable()}removeLayer(J){Ze(this,Si).delete(J.pageIndex)}async updateMode(J,ne=null,oe=!1,ce=!1,ue=!1){var Ae,pe,ve,me,ge,ye;if(Ze(this,Ei)!==J&&!(Ze(this,Hs)&&(await Ze(this,Hs).promise,!Ze(this,Hs)))){if(ht(this,Hs,Promise.withResolvers()),(Ae=Ze(this,ko))==null||Ae.commitOrRemove(),Ze(this,Ei)===AnnotationEditorType.POPUP&&((pe=Ze(this,qi))==null||pe.hideSidebar()),(ve=Ze(this,qi))==null||ve.destroyPopup(),ht(this,Ei,J),J===AnnotationEditorType.NONE){this.setEditingState(!1),bt(this,Lr,Wg).call(this);for(const xe of Ze(this,di).values())xe.hideStandaloneCommentButton();(me=this._editorUndoBar)==null||me.hide(),this.toggleComment(null),Ze(this,Hs).resolve();return}for(const xe of Ze(this,di).values())xe.addStandaloneCommentButton();J===AnnotationEditorType.SIGNATURE&&await((ge=Ze(this,qo))==null?void 0:ge.loadSignatures()),this.setEditingState(!0),await bt(this,Lr,zg).call(this),this.unselectAll();for(const xe of Ze(this,Si).values())xe.updateMode(J);if(J===AnnotationEditorType.POPUP){Ze(this,mu)||ht(this,mu,await Ze(this,Su).getAnnotationsByType(new Set(Ze(this,Us).map($e=>$e._editorType))));const xe=new Set,_e=[];for(const $e of Ze(this,di).values()){const{annotationElementId:Ie,hasComment:Fe,deleted:ke}=$e;Ie&&xe.add(Ie),Fe&&!ke&&_e.push($e.getData())}for(const $e of Ze(this,mu)){const{id:Ie,popupRef:Fe,contentsObj:ke}=$e;Fe&&(ke!=null&&ke.str)&&!xe.has(Ie)&&!Ze(this,Po).has(Ie)&&_e.push($e)}(ye=Ze(this,qi))==null||ye.showSidebar(_e)}if(!ne){oe&&this.addNewEditorFromKeyboard(),Ze(this,Hs).resolve();return}for(const xe of Ze(this,di).values())xe.uid===ne?(this.setSelected(xe),ue?xe.editComment():ce?xe.enterInEditMode():xe.focus()):xe.unselect();Ze(this,Hs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(J){J.mode!==Ze(this,Ei)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...J})}updateParams(J,ne){if(Ze(this,Us)){switch(J){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(ne);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Ze(this,Sd)||ht(this,Sd,new Map)).set(J,ne),this.showAllEditors("highlight",ne);break}if(this.hasSelection)for(const oe of Ze(this,qn))oe.updateParams(J,ne);else for(const oe of Ze(this,Us))oe.updateDefaultParams(J,ne)}}showAllEditors(J,ne,oe=!1){var ue;for(const Ae of Ze(this,di).values())Ae.editorType===J&&Ae.show(ne);(((ue=Ze(this,Sd))==null?void 0:ue.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==ne&&bt(this,Lr,ja).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,ne]])}enableWaiting(J=!1){if(Ze(this,wd)!==J){ht(this,wd,J);for(const ne of Ze(this,Si).values())J?ne.disableClick():ne.enableClick(),ne.div.classList.toggle("waiting",J)}}*getEditors(J){for(const ne of Ze(this,di).values())ne.pageIndex===J&&(yield ne)}getEditor(J){return Ze(this,di).get(J)}addEditor(J){Ze(this,di).set(J.id,J)}removeEditor(J){var ne,oe;J.div.contains(document.activeElement)&&(Ze(this,va)&&clearTimeout(Ze(this,va)),ht(this,va,setTimeout(()=>{this.focusMainContainer(),ht(this,va,null)},0))),Ze(this,di).delete(J.id),J.annotationElementId&&((ne=Ze(this,Ko))==null||ne.delete(J.annotationElementId)),this.unselect(J),(!J.annotationElementId||!Ze(this,Po).has(J.annotationElementId))&&((oe=Ze(this,ks))==null||oe.remove(J.id))}addDeletedAnnotationElement(J){Ze(this,Po).add(J.annotationElementId),this.addChangedExistingAnnotation(J),J.deleted=!0}isDeletedAnnotationElement(J){return Ze(this,Po).has(J)}removeDeletedAnnotationElement(J){Ze(this,Po).delete(J.annotationElementId),this.removeChangedExistingAnnotation(J),J.deleted=!1}setActiveEditor(J){Ze(this,gs)!==J&&(ht(this,gs,J),J&&bt(this,Lr,ja).call(this,J.propertiesToUpdate))}updateUI(J){Ze(this,Lr,Yg)===J&&bt(this,Lr,ja).call(this,J.propertiesToUpdate)}updateUIForDefaultProperties(J){bt(this,Lr,ja).call(this,J.defaultPropertiesToUpdate)}toggleSelected(J){if(Ze(this,qn).has(J)){Ze(this,qn).delete(J),J.unselect(),bt(this,Lr,Ji).call(this,{hasSelectedEditor:this.hasSelection});return}Ze(this,qn).add(J),J.select(),bt(this,Lr,ja).call(this,J.propertiesToUpdate),bt(this,Lr,Ji).call(this,{hasSelectedEditor:!0})}setSelected(J){var ne;this.updateToolbar({mode:J.mode,editId:J.id}),(ne=Ze(this,ko))==null||ne.commitOrRemove();for(const oe of Ze(this,qn))oe!==J&&oe.unselect();Ze(this,qn).clear(),Ze(this,qn).add(J),J.select(),bt(this,Lr,ja).call(this,J.propertiesToUpdate),bt(this,Lr,Ji).call(this,{hasSelectedEditor:!0})}isSelected(J){return Ze(this,qn).has(J)}get firstSelectedEditor(){return Ze(this,qn).values().next().value}unselect(J){J.unselect(),Ze(this,qn).delete(J),bt(this,Lr,Ji).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Ze(this,qn).size!==0}get isEnterHandled(){return Ze(this,qn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var J;Ze(this,Ps).undo(),bt(this,Lr,Ji).call(this,{hasSomethingToUndo:Ze(this,Ps).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:bt(this,Lr,Wf).call(this)}),(J=this._editorUndoBar)==null||J.hide()}redo(){Ze(this,Ps).redo(),bt(this,Lr,Ji).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Ze(this,Ps).hasSomethingToRedo(),isEmpty:bt(this,Lr,Wf).call(this)})}addCommands(J){Ze(this,Ps).add(J),bt(this,Lr,Ji).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:bt(this,Lr,Wf).call(this)})}cleanUndoStack(J){Ze(this,Ps).cleanType(J)}delete(){var ue;this.commitOrRemove();const J=(ue=this.currentLayer)==null?void 0:ue.endDrawingSession(!0);if(!this.hasSelection&&!J)return;const ne=J?[J]:[...Ze(this,qn)],oe=()=>{var Ae;(Ae=this._editorUndoBar)==null||Ae.show(ce,ne.length===1?ne[0].editorType:ne.length);for(const pe of ne)pe.remove()},ce=()=>{for(const Ae of ne)bt(this,Lr,x0).call(this,Ae)};this.addCommands({cmd:oe,undo:ce,mustExec:!0})}commitOrRemove(){var J;(J=Ze(this,gs))==null||J.commitOrRemove()}hasSomethingToControl(){return Ze(this,gs)||this.hasSelection}selectAll(){for(const J of Ze(this,qn))J.commit();bt(this,Lr,E0).call(this,Ze(this,di).values())}unselectAll(){var J;if(!(Ze(this,gs)&&(Ze(this,gs).commitOrRemove(),Ze(this,Ei)!==AnnotationEditorType.NONE))&&!((J=Ze(this,ko))!=null&&J.commitOrRemove())&&this.hasSelection){for(const ne of Ze(this,qn))ne.unselect();Ze(this,qn).clear(),bt(this,Lr,Ji).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(J,ne,oe=!1){if(oe||this.commitOrRemove(),!this.hasSelection)return;Ze(this,zo)[0]+=J,Ze(this,zo)[1]+=ne;const[ce,ue]=Ze(this,zo),Ae=[...Ze(this,qn)],pe=1e3;Ze(this,xa)&&clearTimeout(Ze(this,xa)),ht(this,xa,setTimeout(()=>{ht(this,xa,null),Ze(this,zo)[0]=Ze(this,zo)[1]=0,this.addCommands({cmd:()=>{for(const ve of Ae)Ze(this,di).has(ve.id)&&(ve.translateInPage(ce,ue),ve.translationDone())},undo:()=>{for(const ve of Ae)Ze(this,di).has(ve.id)&&(ve.translateInPage(-ce,-ue),ve.translationDone())},mustExec:!1})},pe));for(const ve of Ae)ve.translateInPage(J,ne),ve.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ht(this,ma,new Map);for(const J of Ze(this,qn))Ze(this,ma).set(J,{savedX:J.x,savedY:J.y,savedPageIndex:J.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Ze(this,ma))return!1;this.disableUserSelect(!1);const J=Ze(this,ma);ht(this,ma,null);let ne=!1;for(const[{x:ce,y:ue,pageIndex:Ae},pe]of J)pe.newX=ce,pe.newY=ue,pe.newPageIndex=Ae,ne||(ne=ce!==pe.savedX||ue!==pe.savedY||Ae!==pe.savedPageIndex);if(!ne)return!1;const oe=(ce,ue,Ae,pe)=>{if(Ze(this,di).has(ce.id)){const ve=Ze(this,Si).get(pe);ve?ce._setParentAndPosition(ve,ue,Ae):(ce.pageIndex=pe,ce.x=ue,ce.y=Ae)}};return this.addCommands({cmd:()=>{for(const[ce,{newX:ue,newY:Ae,newPageIndex:pe}]of J)oe(ce,ue,Ae,pe)},undo:()=>{for(const[ce,{savedX:ue,savedY:Ae,savedPageIndex:pe}]of J)oe(ce,ue,Ae,pe)},mustExec:!0}),!0}dragSelectedEditors(J,ne){if(Ze(this,ma))for(const oe of Ze(this,ma).keys())oe.drag(J,ne)}rebuild(J){if(J.parent===null){const ne=this.getLayer(J.pageIndex);ne?(ne.changeParent(J),ne.addOrRebuild(J)):(this.addEditor(J),this.addToAnnotationStorage(J),J.rebuild())}else J.parent.addOrRebuild(J)}get isEditorHandlingKeyboard(){var J;return((J=this.getActive())==null?void 0:J.shouldGetKeyboardEvents())||Ze(this,qn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(J){return Ze(this,gs)===J}getActive(){return Ze(this,gs)}getMode(){return Ze(this,Ei)}isEditingMode(){return Ze(this,Ei)!==AnnotationEditorType.NONE}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(J){if(!J)return null;const ne=document.getSelection();for(let me=0,ge=ne.rangeCount;me<ge;me++)if(!J.contains(ne.getRangeAt(me).commonAncestorContainer))return null;const{x:oe,y:ce,width:ue,height:Ae}=J.getBoundingClientRect();let pe;switch(J.getAttribute("data-main-rotation")){case"90":pe=(me,ge,ye,xe)=>({x:(ge-ce)/Ae,y:1-(me+ye-oe)/ue,width:xe/Ae,height:ye/ue});break;case"180":pe=(me,ge,ye,xe)=>({x:1-(me+ye-oe)/ue,y:1-(ge+xe-ce)/Ae,width:ye/ue,height:xe/Ae});break;case"270":pe=(me,ge,ye,xe)=>({x:1-(ge+xe-ce)/Ae,y:(me-oe)/ue,width:xe/Ae,height:ye/ue});break;default:pe=(me,ge,ye,xe)=>({x:(me-oe)/ue,y:(ge-ce)/Ae,width:ye/ue,height:xe/Ae});break}const ve=[];for(let me=0,ge=ne.rangeCount;me<ge;me++){const ye=ne.getRangeAt(me);if(!ye.collapsed)for(const{x:xe,y:_e,width:$e,height:Ie}of ye.getClientRects())$e===0||Ie===0||ve.push(pe(xe,_e,$e,Ie))}return ve.length===0?null:ve}addChangedExistingAnnotation({annotationElementId:J,id:ne}){(Ze(this,yu)||ht(this,yu,new Map)).set(J,ne)}removeChangedExistingAnnotation({annotationElementId:J}){var ne;(ne=Ze(this,yu))==null||ne.delete(J)}renderAnnotationElement(J){var ce;const ne=(ce=Ze(this,yu))==null?void 0:ce.get(J.data.id);if(!ne)return;const oe=Ze(this,ks).getRawValue(ne);oe&&(Ze(this,Ei)===AnnotationEditorType.NONE&&!oe.hasBeenModified||oe.renderAnnotationElement(J))}setMissingCanvas(J,ne,oe){var ue;const ce=(ue=Ze(this,Ko))==null?void 0:ue.get(J);ce&&(ce.setCanvas(ne,oe),Ze(this,Ko).delete(J))}addMissingCanvas(J,ne){(Ze(this,Ko)||ht(this,Ko,new Map)).set(J,ne)}};gu=new WeakMap,gs=new WeakMap,mu=new WeakMap,di=new WeakMap,Si=new WeakMap,vu=new WeakMap,ks=new WeakMap,yu=new WeakMap,Ps=new WeakMap,qi=new WeakMap,Fo=new WeakMap,ko=new WeakMap,xu=new WeakMap,Po=new WeakMap,ma=new WeakMap,Us=new WeakMap,Ul=new WeakMap,xd=new WeakMap,Ed=new WeakMap,Eu=new WeakMap,bd=new WeakMap,va=new WeakMap,Uo=new WeakMap,bu=new WeakMap,jo=new WeakMap,ya=new WeakMap,bp=new WeakMap,Vo=new WeakMap,wu=new WeakMap,wd=new WeakMap,Qo=new WeakMap,Hl=new WeakMap,Cu=new WeakMap,Ko=new WeakMap,Cd=new WeakMap,Ei=new WeakMap,qn=new WeakMap,qa=new WeakMap,qo=new WeakMap,Go=new WeakMap,Sd=new WeakMap,Su=new WeakMap,_d=new WeakMap,zo=new WeakMap,xa=new WeakMap,Ga=new WeakMap,Td=new WeakMap,Rd=new WeakMap,Hs=new WeakMap,Lr=new WeakSet,pA=function({anchorNode:J}){return J.nodeType===Node.TEXT_NODE?J.parentElement:J},g0=function(J){const{currentLayer:ne}=this;if(ne.hasTextLayer(J))return ne;for(const oe of Ze(this,Si).values())if(oe.hasTextLayer(J))return oe;return null},Hg=function(){const J=document.getSelection();if(!J||J.isCollapsed)return;const oe=bt(this,Lr,pA).call(this,J).closest(".textLayer"),ce=this.getSelectionBoxes(oe);ce&&(Ze(this,ya)||ht(this,ya,new FloatingToolbar(this)),Ze(this,ya).show(oe,ce,this.direction==="ltr"))},jg=function(){var ue,Ae,pe;const J=document.getSelection();if(!J||J.isCollapsed){Ze(this,qa)&&((ue=Ze(this,ya))==null||ue.hide(),ht(this,qa,null),bt(this,Lr,Ji).call(this,{hasSelectedText:!1}));return}const{anchorNode:ne}=J;if(ne===Ze(this,qa))return;const ce=bt(this,Lr,pA).call(this,J).closest(".textLayer");if(!ce){Ze(this,qa)&&((Ae=Ze(this,ya))==null||Ae.hide(),ht(this,qa,null),bt(this,Lr,Ji).call(this,{hasSelectedText:!1}));return}if((pe=Ze(this,ya))==null||pe.hide(),ht(this,qa,ne),bt(this,Lr,Ji).call(this,{hasSelectedText:!0}),!(Ze(this,Ei)!==AnnotationEditorType.HIGHLIGHT&&Ze(this,Ei)!==AnnotationEditorType.NONE)&&(Ze(this,Ei)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),ht(this,jo,this.isShiftKeyDown),!this.isShiftKeyDown)){const ve=Ze(this,Ei)===AnnotationEditorType.HIGHLIGHT?bt(this,Lr,g0).call(this,ce):null;if(ve==null||ve.toggleDrawing(),Ze(this,wu)){const me=new AbortController,ge=this.combinedSignal(me),ye=xe=>{xe.type==="pointerup"&&xe.button!==0||(me.abort(),ve==null||ve.toggleDrawing(!0),xe.type==="pointerup"&&bt(this,Lr,zf).call(this,"main_toolbar"))};window.addEventListener("pointerup",ye,{signal:ge}),window.addEventListener("blur",ye,{signal:ge})}else ve==null||ve.toggleDrawing(!0),bt(this,Lr,zf).call(this,"main_toolbar")}},zf=function(J=""){Ze(this,Ei)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(J):Ze(this,xd)&&bt(this,Lr,Hg).call(this)},Vg=function(){document.addEventListener("selectionchange",bt(this,Lr,jg).bind(this),{signal:this._signal})},Qg=function(){if(Ze(this,Uo))return;ht(this,Uo,new AbortController);const J=this.combinedSignal(Ze(this,Uo));window.addEventListener("focus",this.focus.bind(this),{signal:J}),window.addEventListener("blur",this.blur.bind(this),{signal:J})},Kg=function(){var J;(J=Ze(this,Uo))==null||J.abort(),ht(this,Uo,null)},m0=function(){if(Ze(this,Qo))return;ht(this,Qo,new AbortController);const J=this.combinedSignal(Ze(this,Qo));window.addEventListener("keydown",this.keydown.bind(this),{signal:J}),window.addEventListener("keyup",this.keyup.bind(this),{signal:J})},qg=function(){var J;(J=Ze(this,Qo))==null||J.abort(),ht(this,Qo,null)},v0=function(){if(Ze(this,Fo))return;ht(this,Fo,new AbortController);const J=this.combinedSignal(Ze(this,Fo));document.addEventListener("copy",this.copy.bind(this),{signal:J}),document.addEventListener("cut",this.cut.bind(this),{signal:J}),document.addEventListener("paste",this.paste.bind(this),{signal:J})},y0=function(){var J;(J=Ze(this,Fo))==null||J.abort(),ht(this,Fo,null)},Gg=function(){const J=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:J}),document.addEventListener("drop",this.drop.bind(this),{signal:J})},Ji=function(J){Object.entries(J).some(([oe,ce])=>Ze(this,_d)[oe]!==ce)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Ze(this,_d),J)}),Ze(this,Ei)===AnnotationEditorType.HIGHLIGHT&&J.hasSelectedEditor===!1&&bt(this,Lr,ja).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},ja=function(J){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:J})},zg=async function(){if(!Ze(this,Vo)){ht(this,Vo,!0);const J=[];for(const ne of Ze(this,Si).values())J.push(ne.enable());await Promise.all(J);for(const ne of Ze(this,di).values())ne.enable()}},Wg=function(){if(this.unselectAll(),Ze(this,Vo)){ht(this,Vo,!1);for(const J of Ze(this,Si).values())J.disable();for(const J of Ze(this,di).values())J.disable()}},x0=function(J){const ne=Ze(this,Si).get(J.pageIndex);ne?ne.addOrRebuild(J):(this.addEditor(J),this.addToAnnotationStorage(J))},Yg=function(){let J=null;for(J of Ze(this,qn));return J},Wf=function(){if(Ze(this,di).size===0)return!0;if(Ze(this,di).size===1)for(const J of Ze(this,di).values())return J.isEmpty();return!1},E0=function(J){for(const ne of Ze(this,qn))ne.unselect();Ze(this,qn).clear();for(const ne of J)ne.isEmpty()||(Ze(this,qn).add(ne),ne.select());bt(this,Lr,Ji).call(this,{hasSelectedEditor:this.hasSelection})},wr(lu,"TRANSLATE_SMALL",1),wr(lu,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=lu;var Bi,Ea,ea,_u,ba,ms,Tu,wa,ls,za,jl,Ca,Wo,ha,Yf,gA;const es=class es{constructor(J){yt(this,ha);yt(this,Bi,null);yt(this,Ea,!1);yt(this,ea,null);yt(this,_u,null);yt(this,ba,null);yt(this,ms,null);yt(this,Tu,!1);yt(this,wa,null);yt(this,ls,null);yt(this,za,null);yt(this,jl,null);yt(this,Ca,!1);ht(this,ls,J),ht(this,Ca,J._uiManager.useNewAltTextFlow),Ze(es,Wo)||ht(es,Wo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(J){es._l10n??(es._l10n=J)}async render(){const J=ht(this,ea,document.createElement("button"));J.className="altText",J.tabIndex="0";const ne=ht(this,_u,document.createElement("span"));J.append(ne),Ze(this,Ca)?(J.classList.add("new"),J.setAttribute("data-l10n-id",Ze(es,Wo).missing),ne.setAttribute("data-l10n-id",Ze(es,Wo)["missing-label"])):(J.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),ne.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const oe=Ze(this,ls)._uiManager._signal;J.addEventListener("contextmenu",noContextMenu,{signal:oe}),J.addEventListener("pointerdown",ue=>ue.stopPropagation(),{signal:oe});const ce=ue=>{ue.preventDefault(),Ze(this,ls)._uiManager.editAltText(Ze(this,ls)),Ze(this,Ca)&&Ze(this,ls)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Ze(this,ha,Yf)}})};return J.addEventListener("click",ce,{capture:!0,signal:oe}),J.addEventListener("keydown",ue=>{ue.target===J&&ue.key==="Enter"&&(ht(this,Tu,!0),ce(ue))},{signal:oe}),await bt(this,ha,gA).call(this),J}finish(){Ze(this,ea)&&(Ze(this,ea).focus({focusVisible:Ze(this,Tu)}),ht(this,Tu,!1))}isEmpty(){return Ze(this,Ca)?Ze(this,Bi)===null:!Ze(this,Bi)&&!Ze(this,Ea)}hasData(){return Ze(this,Ca)?Ze(this,Bi)!==null||!!Ze(this,za):this.isEmpty()}get guessedText(){return Ze(this,za)}async setGuessedText(J){Ze(this,Bi)===null&&(ht(this,za,J),ht(this,jl,await es._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:J})),bt(this,ha,gA).call(this))}toggleAltTextBadge(J=!1){var ne;if(!Ze(this,Ca)||Ze(this,Bi)){(ne=Ze(this,wa))==null||ne.remove(),ht(this,wa,null);return}if(!Ze(this,wa)){const oe=ht(this,wa,document.createElement("div"));oe.className="noAltTextBadge",Ze(this,ls).div.append(oe)}Ze(this,wa).classList.toggle("hidden",!J)}serialize(J){let ne=Ze(this,Bi);return!J&&Ze(this,za)===ne&&(ne=Ze(this,jl)),{altText:ne,decorative:Ze(this,Ea),guessedText:Ze(this,za),textWithDisclaimer:Ze(this,jl)}}get data(){return{altText:Ze(this,Bi),decorative:Ze(this,Ea)}}set data({altText:J,decorative:ne,guessedText:oe,textWithDisclaimer:ce,cancel:ue=!1}){oe&&(ht(this,za,oe),ht(this,jl,ce)),!(Ze(this,Bi)===J&&Ze(this,Ea)===ne)&&(ue||(ht(this,Bi,J),ht(this,Ea,ne)),bt(this,ha,gA).call(this))}toggle(J=!1){Ze(this,ea)&&(!J&&Ze(this,ms)&&(clearTimeout(Ze(this,ms)),ht(this,ms,null)),Ze(this,ea).disabled=!J)}shown(){Ze(this,ls)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Ze(this,ha,Yf)}})}destroy(){var J,ne;(J=Ze(this,ea))==null||J.remove(),ht(this,ea,null),ht(this,_u,null),ht(this,ba,null),(ne=Ze(this,wa))==null||ne.remove(),ht(this,wa,null)}};Bi=new WeakMap,Ea=new WeakMap,ea=new WeakMap,_u=new WeakMap,ba=new WeakMap,ms=new WeakMap,Tu=new WeakMap,wa=new WeakMap,ls=new WeakMap,za=new WeakMap,jl=new WeakMap,Ca=new WeakMap,Wo=new WeakMap,ha=new WeakSet,Yf=function(){return Ze(this,Bi)&&"added"||Ze(this,Bi)===null&&this.guessedText&&"review"||"missing"},gA=async function(){var ce,ue,Ae;const J=Ze(this,ea);if(!J)return;if(Ze(this,Ca)){if(J.classList.toggle("done",!!Ze(this,Bi)),J.setAttribute("data-l10n-id",Ze(es,Wo)[Ze(this,ha,Yf)]),(ce=Ze(this,_u))==null||ce.setAttribute("data-l10n-id",Ze(es,Wo)[`${Ze(this,ha,Yf)}-label`]),!Ze(this,Bi)){(ue=Ze(this,ba))==null||ue.remove();return}}else{if(!Ze(this,Bi)&&!Ze(this,Ea)){J.classList.remove("done"),(Ae=Ze(this,ba))==null||Ae.remove();return}J.classList.add("done"),J.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let ne=Ze(this,ba);if(!ne){ht(this,ba,ne=document.createElement("span")),ne.className="tooltip",ne.setAttribute("role","tooltip"),ne.id=`alt-text-tooltip-${Ze(this,ls).id}`;const pe=100,ve=Ze(this,ls)._uiManager._signal;ve.addEventListener("abort",()=>{clearTimeout(Ze(this,ms)),ht(this,ms,null)},{once:!0}),J.addEventListener("mouseenter",()=>{ht(this,ms,setTimeout(()=>{ht(this,ms,null),Ze(this,ba).classList.add("show"),Ze(this,ls)._reportTelemetry({action:"alt_text_tooltip"})},pe))},{signal:ve}),J.addEventListener("mouseleave",()=>{var me;Ze(this,ms)&&(clearTimeout(Ze(this,ms)),ht(this,ms,null)),(me=Ze(this,ba))==null||me.classList.remove("show")},{signal:ve})}Ze(this,Ea)?ne.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(ne.removeAttribute("data-l10n-id"),ne.textContent=Ze(this,Bi)),ne.parentNode||J.append(ne);const oe=Ze(this,ls).getElementForAltText();oe==null||oe.setAttribute("aria-describedby",ne.id)},yt(es,Wo,null),wr(es,"_l10n",null);let AltText=es;var Fi,js,Vl,ii,Bd,Ql,ta,Kl,ql,Gl,Id,b0;class Comment{constructor(J){yt(this,Id);yt(this,Fi,null);yt(this,js,null);yt(this,Vl,!1);yt(this,ii,null);yt(this,Bd,null);yt(this,Ql,null);yt(this,ta,null);yt(this,Kl,null);yt(this,ql,!1);yt(this,Gl,null);ht(this,ii,J)}renderForToolbar(){const J=ht(this,js,document.createElement("button"));return J.className="comment",bt(this,Id,b0).call(this,J,!1)}renderForStandalone(){const J=ht(this,Fi,document.createElement("button"));J.className="annotationCommentButton";const ne=Ze(this,ii).commentButtonPosition;if(ne){const{style:oe}=J;oe.insetInlineEnd=`calc(${100*(Ze(this,ii)._uiManager.direction==="ltr"?1-ne[0]:ne[0])}% - var(--comment-button-dim))`,oe.top=`calc(${100*ne[1]}% - var(--comment-button-dim))`;const ce=Ze(this,ii).commentButtonColor;ce&&(oe.backgroundColor=ce)}return bt(this,Id,b0).call(this,J,!0)}focusButton(){setTimeout(()=>{var J;(J=Ze(this,Fi)??Ze(this,js))==null||J.focus()},0)}onUpdatedColor(){if(!Ze(this,Fi))return;const J=Ze(this,ii).commentButtonColor;J&&(Ze(this,Fi).style.backgroundColor=J),Ze(this,ii)._uiManager.updatePopupColor(Ze(this,ii))}get commentButtonWidth(){var J;return(((J=Ze(this,Fi))==null?void 0:J.getBoundingClientRect().width)??0)/Ze(this,ii).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(Ze(this,Gl))return Ze(this,Gl);if(!Ze(this,Fi))return null;const{x:J,y:ne,height:oe}=Ze(this,Fi).getBoundingClientRect(),{x:ce,y:ue,width:Ae,height:pe}=Ze(this,ii).parent.boundingClientRect;return[(J-ce)/Ae,(ne+oe-ue)/pe]}set commentPopupPositionInLayer(J){ht(this,Gl,J)}hasDefaultPopupPosition(){return Ze(this,Gl)===null}removeStandaloneCommentButton(){var J;(J=Ze(this,Fi))==null||J.remove(),ht(this,Fi,null)}removeToolbarCommentButton(){var J;(J=Ze(this,js))==null||J.remove(),ht(this,js,null)}setCommentButtonStates({selected:J,hasPopup:ne}){Ze(this,Fi)&&(Ze(this,Fi).classList.toggle("selected",J),Ze(this,Fi).ariaExpanded=ne)}edit(J){const ne=this.commentPopupPositionInLayer;let oe,ce;if(ne)[oe,ce]=ne;else{[oe,ce]=Ze(this,ii).commentButtonPosition;const{width:ge,height:ye,x:xe,y:_e}=Ze(this,ii);oe=xe+oe*ge,ce=_e+ce*ye}const ue=Ze(this,ii).parent.boundingClientRect,{x:Ae,y:pe,width:ve,height:me}=ue;Ze(this,ii)._uiManager.editComment(Ze(this,ii),Ae+oe*ve,pe+ce*me,{...J,parentDimensions:ue})}finish(){Ze(this,js)&&(Ze(this,js).focus({focusVisible:Ze(this,Vl)}),ht(this,Vl,!1))}isDeleted(){return Ze(this,ql)||Ze(this,ta)===""}isEmpty(){return Ze(this,ta)===null}hasBeenEdited(){return this.isDeleted()||Ze(this,ta)!==Ze(this,Bd)}serialize(){return this.data}get data(){return{text:Ze(this,ta),richText:Ze(this,Ql),date:Ze(this,Kl),deleted:this.isDeleted()}}set data(J){if(J!==Ze(this,ta)&&ht(this,Ql,null),J===null){ht(this,ta,""),ht(this,ql,!0);return}ht(this,ta,J),ht(this,Kl,new Date),ht(this,ql,!1)}setInitialText(J,ne=null){ht(this,Bd,J),this.data=J,ht(this,Kl,null),ht(this,Ql,ne)}shown(){}destroy(){var J,ne;(J=Ze(this,js))==null||J.remove(),ht(this,js,null),(ne=Ze(this,Fi))==null||ne.remove(),ht(this,Fi,null),ht(this,ta,""),ht(this,Ql,null),ht(this,Kl,null),ht(this,ii,null),ht(this,Vl,!1),ht(this,ql,!1)}}Fi=new WeakMap,js=new WeakMap,Vl=new WeakMap,ii=new WeakMap,Bd=new WeakMap,Ql=new WeakMap,ta=new WeakMap,Kl=new WeakMap,ql=new WeakMap,Gl=new WeakMap,Id=new WeakSet,b0=function(J,ne){if(!Ze(this,ii)._uiManager.hasCommentManager())return null;J.tabIndex="0",J.ariaHasPopup="dialog",ne?(J.ariaControls="commentPopup",J.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(J.ariaControlsElements=[Ze(this,ii)._uiManager.getCommentDialogElement()],J.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const oe=Ze(this,ii)._uiManager._signal;if(!(oe instanceof AbortSignal)||oe.aborted)return J;J.addEventListener("contextmenu",noContextMenu,{signal:oe}),ne&&(J.addEventListener("focusin",ue=>{Ze(this,ii)._focusEventsAllowed=!1,stopEvent(ue)},{capture:!0,signal:oe}),J.addEventListener("focusout",ue=>{Ze(this,ii)._focusEventsAllowed=!0,stopEvent(ue)},{capture:!0,signal:oe})),J.addEventListener("pointerdown",ue=>ue.stopPropagation(),{signal:oe});const ce=ue=>{ue.preventDefault(),J===Ze(this,js)?this.edit():Ze(this,ii).toggleComment(!0)};return J.addEventListener("click",ce,{capture:!0,signal:oe}),J.addEventListener("keydown",ue=>{ue.target===J&&ue.key==="Enter"&&(ht(this,Vl,!0),ce(ue))},{signal:oe}),J.addEventListener("pointerenter",()=>{Ze(this,ii).toggleComment(!1,!0)},{signal:oe}),J.addEventListener("pointerleave",()=>{Ze(this,ii).toggleComment(!1,!1)},{signal:oe}),J};var Ru,zl,$d,Md,Nd,Dd,Od,Wa,Wl,Ya,Yl,Xa,Bl,Xg,Zg,Jg;const xg=class xg{constructor({container:J,isPinchingDisabled:ne=null,isPinchingStopped:oe=null,onPinchStart:ce=null,onPinching:ue=null,onPinchEnd:Ae=null,signal:pe}){yt(this,Bl);yt(this,Ru);yt(this,zl,!1);yt(this,$d,null);yt(this,Md);yt(this,Nd);yt(this,Dd);yt(this,Od);yt(this,Wa,null);yt(this,Wl);yt(this,Ya,null);yt(this,Yl);yt(this,Xa,null);ht(this,Ru,J),ht(this,$d,oe),ht(this,Md,ne),ht(this,Nd,ce),ht(this,Dd,ue),ht(this,Od,Ae),ht(this,Yl,new AbortController),ht(this,Wl,AbortSignal.any([pe,Ze(this,Yl).signal])),J.addEventListener("touchstart",bt(this,Bl,Xg).bind(this),{passive:!1,signal:Ze(this,Wl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}destroy(){var J,ne;(J=Ze(this,Yl))==null||J.abort(),ht(this,Yl,null),(ne=Ze(this,Wa))==null||ne.abort(),ht(this,Wa,null)}};Ru=new WeakMap,zl=new WeakMap,$d=new WeakMap,Md=new WeakMap,Nd=new WeakMap,Dd=new WeakMap,Od=new WeakMap,Wa=new WeakMap,Wl=new WeakMap,Ya=new WeakMap,Yl=new WeakMap,Xa=new WeakMap,Bl=new WeakSet,Xg=function(J){var ce,ue,Ae;if((ce=Ze(this,Md))!=null&&ce.call(this))return;if(J.touches.length===1){if(Ze(this,Wa))return;const pe=ht(this,Wa,new AbortController),ve=AbortSignal.any([Ze(this,Wl),pe.signal]),me=Ze(this,Ru),ge={capture:!0,signal:ve,passive:!1},ye=xe=>{var _e;xe.pointerType==="touch"&&((_e=Ze(this,Wa))==null||_e.abort(),ht(this,Wa,null))};me.addEventListener("pointerdown",xe=>{xe.pointerType==="touch"&&(stopEvent(xe),ye(xe))},ge),me.addEventListener("pointerup",ye,ge),me.addEventListener("pointercancel",ye,ge);return}if(!Ze(this,Xa)){ht(this,Xa,new AbortController);const pe=AbortSignal.any([Ze(this,Wl),Ze(this,Xa).signal]),ve=Ze(this,Ru),me={signal:pe,capture:!1,passive:!1};ve.addEventListener("touchmove",bt(this,Bl,Zg).bind(this),me);const ge=bt(this,Bl,Jg).bind(this);ve.addEventListener("touchend",ge,me),ve.addEventListener("touchcancel",ge,me),me.capture=!0,ve.addEventListener("pointerdown",stopEvent,me),ve.addEventListener("pointermove",stopEvent,me),ve.addEventListener("pointercancel",stopEvent,me),ve.addEventListener("pointerup",stopEvent,me),(ue=Ze(this,Nd))==null||ue.call(this)}if(stopEvent(J),J.touches.length!==2||(Ae=Ze(this,$d))!=null&&Ae.call(this)){ht(this,Ya,null);return}let[ne,oe]=J.touches;ne.identifier>oe.identifier&&([ne,oe]=[oe,ne]),ht(this,Ya,{touch0X:ne.screenX,touch0Y:ne.screenY,touch1X:oe.screenX,touch1Y:oe.screenY})},Zg=function(J){var ze;if(!Ze(this,Ya)||J.touches.length!==2)return;stopEvent(J);let[ne,oe]=J.touches;ne.identifier>oe.identifier&&([ne,oe]=[oe,ne]);const{screenX:ce,screenY:ue}=ne,{screenX:Ae,screenY:pe}=oe,ve=Ze(this,Ya),{touch0X:me,touch0Y:ge,touch1X:ye,touch1Y:xe}=ve,_e=ye-me,$e=xe-ge,Ie=Ae-ce,Fe=pe-ue,ke=Math.hypot(Ie,Fe)||1,je=Math.hypot(_e,$e)||1;if(!Ze(this,zl)&&Math.abs(je-ke)<=xg.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(ve.touch0X=ce,ve.touch0Y=ue,ve.touch1X=Ae,ve.touch1Y=pe,!Ze(this,zl)){ht(this,zl,!0);return}const We=[(ce+Ae)/2,(ue+pe)/2];(ze=Ze(this,Dd))==null||ze.call(this,We,je,ke)},Jg=function(J){var ne;J.touches.length>=2||(Ze(this,Xa)&&(Ze(this,Xa).abort(),ht(this,Xa,null),(ne=Ze(this,Od))==null||ne.call(this)),Ze(this,Ya)&&(stopEvent(J),ht(this,Ya,null),ht(this,zl,!1)))};let TouchManager=xg;var Xl,ra,li,ei,Za,Bu,Yo,Ld,ki,Zl,Ja,Sa,Xo,Fd,Jl,vs,kd,tc,eo,_a,Iu,$u,Vs,rc,Pd,wp,Xr,w0,Ud,C0,mA,em,tm,S0,vA,_0,rm,nm,im,T0,sm,B0,am,om,lm,I0,Xf;const pn=class pn{constructor(J){yt(this,Xr);yt(this,Xl,null);yt(this,ra,null);yt(this,li,null);yt(this,ei,null);yt(this,Za,null);yt(this,Bu,!1);yt(this,Yo,null);yt(this,Ld,"");yt(this,ki,null);yt(this,Zl,null);yt(this,Ja,null);yt(this,Sa,null);yt(this,Xo,null);yt(this,Fd,"");yt(this,Jl,!1);yt(this,vs,null);yt(this,kd,!1);yt(this,tc,!1);yt(this,eo,!1);yt(this,_a,null);yt(this,Iu,0);yt(this,$u,0);yt(this,Vs,null);yt(this,rc,null);wr(this,"isSelected",!1);wr(this,"_isCopy",!1);wr(this,"_editToolbar",null);wr(this,"_initialOptions",Object.create(null));wr(this,"_initialData",null);wr(this,"_isVisible",!0);wr(this,"_uiManager",null);wr(this,"_focusEventsAllowed",!0);yt(this,Pd,!1);yt(this,wp,pn._zIndex++);this.parent=J.parent,this.id=J.id,this.width=this.height=null,this.pageIndex=J.parent.pageIndex,this.name=J.name,this.div=null,this._uiManager=J.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=J.isCentered,this._structTreeParentId=null,this.annotationElementId=J.annotationElementId||null,this.creationDate=J.creationDate||new Date,this.modificationDate=J.modificationDate||null;const{rotation:ne,rawDims:{pageWidth:oe,pageHeight:ce,pageX:ue,pageY:Ae}}=this.parent.viewport;this.rotation=ne,this.pageRotation=(360+ne-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[oe,ce],this.pageTranslation=[ue,Ae];const[pe,ve]=this.parentDimensions;this.x=J.x/pe,this.y=J.y/ve,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const J=pn.prototype._resizeWithKeyboard,ne=AnnotationEditorUIManager.TRANSLATE_SMALL,oe=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],J,{args:[-ne,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],J,{args:[-oe,0]}],[["ArrowRight","mac+ArrowRight"],J,{args:[ne,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],J,{args:[oe,0]}],[["ArrowUp","mac+ArrowUp"],J,{args:[0,-ne]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],J,{args:[0,-oe]}],[["ArrowDown","mac+ArrowDown"],J,{args:[0,ne]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],J,{args:[0,oe]}],[["Escape","mac+Escape"],pn.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(J){const ne=new FakeEditor({id:J.parent.getNextId(),parent:J.parent,uiManager:J._uiManager});ne.annotationElementId=J.annotationElementId,ne.deleted=!0,ne._uiManager.addToAnnotationStorage(ne)}static initialize(J,ne){if(pn._l10n??(pn._l10n=J),pn._l10nResizer||(pn._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),pn._borderLineWidth!==-1)return;const oe=getComputedStyle(document.documentElement);pn._borderLineWidth=parseFloat(oe.getPropertyValue("--outline-width"))||0}static updateDefaultParams(J,ne){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(J){return!1}static paste(J,ne){unreachable$1("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Ze(this,Pd)}set _isDraggable(J){var ne;ht(this,Pd,J),(ne=this.div)==null||ne.classList.toggle("draggable",J)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[J,ne]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*ne/(J*2),this.y+=this.width*J/(ne*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*ne/(J*2),this.y-=this.width*J/(ne*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(J){this._uiManager.addCommands(J)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Ze(this,wp)}setParent(J){var ne;J!==null?(this.pageIndex=J.pageIndex,this.pageDimensions=J.pageDimensions):(bt(this,Xr,Xf).call(this),(ne=Ze(this,Sa))==null||ne.remove(),ht(this,Sa,null)),this.parent=J}focusin(J){this._focusEventsAllowed&&(Ze(this,Jl)?ht(this,Jl,!1):this.parent.setSelected(this))}focusout(J){var oe;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const ne=J.relatedTarget;ne!=null&&ne.closest(`#${this.id}`)||(J.preventDefault(),(oe=this.parent)!=null&&oe.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(J,ne,oe,ce){const[ue,Ae]=this.parentDimensions;[oe,ce]=this.screenToPageTranslation(oe,ce),this.x=(J+oe)/ue,this.y=(ne+ce)/Ae,this.fixAndSetPosition()}_moveAfterPaste(J,ne){const[oe,ce]=this.parentDimensions;this.setAt(J*oe,ne*ce,this.width*oe,this.height*ce),this._onTranslated()}translate(J,ne){bt(this,Xr,w0).call(this,this.parentDimensions,J,ne)}translateInPage(J,ne){Ze(this,vs)||ht(this,vs,[this.x,this.y,this.width,this.height]),bt(this,Xr,w0).call(this,this.pageDimensions,J,ne),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(J,ne){Ze(this,vs)||ht(this,vs,[this.x,this.y,this.width,this.height]);const{div:oe,parentDimensions:[ce,ue]}=this;if(this.x+=J/ce,this.y+=ne/ue,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ye,y:xe}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ye,xe)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Ae,y:pe}=this;const[ve,me]=this.getBaseTranslation();Ae+=ve,pe+=me;const{style:ge}=oe;ge.left=`${(100*Ae).toFixed(2)}%`,ge.top=`${(100*pe).toFixed(2)}%`,this._onTranslating(Ae,pe),oe.scrollIntoView({block:"nearest"})}_onTranslating(J,ne){}_onTranslated(J,ne){}get _hasBeenMoved(){return!!Ze(this,vs)&&(Ze(this,vs)[0]!==this.x||Ze(this,vs)[1]!==this.y)}get _hasBeenResized(){return!!Ze(this,vs)&&(Ze(this,vs)[2]!==this.width||Ze(this,vs)[3]!==this.height)}getBaseTranslation(){const[J,ne]=this.parentDimensions,{_borderLineWidth:oe}=pn,ce=oe/J,ue=oe/ne;switch(this.rotation){case 90:return[-ce,ue];case 180:return[ce,ue];case 270:return[ce,-ue];default:return[-ce,-ue]}}get _mustFixPosition(){return!0}fixAndSetPosition(J=this.rotation){const{div:{style:ne},pageDimensions:[oe,ce]}=this;let{x:ue,y:Ae,width:pe,height:ve}=this;if(pe*=oe,ve*=ce,ue*=oe,Ae*=ce,this._mustFixPosition)switch(J){case 0:ue=MathClamp(ue,0,oe-pe),Ae=MathClamp(Ae,0,ce-ve);break;case 90:ue=MathClamp(ue,0,oe-ve),Ae=MathClamp(Ae,pe,ce);break;case 180:ue=MathClamp(ue,pe,oe),Ae=MathClamp(Ae,ve,ce);break;case 270:ue=MathClamp(ue,ve,oe),Ae=MathClamp(Ae,0,ce-pe);break}this.x=ue/=oe,this.y=Ae/=ce;const[me,ge]=this.getBaseTranslation();ue+=me,Ae+=ge,ne.left=`${(100*ue).toFixed(2)}%`,ne.top=`${(100*Ae).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(J,ne){var oe;return bt(oe=pn,Ud,C0).call(oe,J,ne,this.parentRotation)}pageTranslationToScreen(J,ne){var oe;return bt(oe=pn,Ud,C0).call(oe,J,ne,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:J,pageDimensions:[ne,oe]}=this;return[ne*J,oe*J]}setDims(){const{div:{style:J},width:ne,height:oe}=this;J.width=`${(100*ne).toFixed(2)}%`,J.height=`${(100*oe).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(J){return Math.round(J*1e4)/1e4}_onResizing(){}altTextFinish(){var J;(J=Ze(this,li))==null||J.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Ze(this,tc))return this._editToolbar;this._editToolbar=new EditorToolbar$1(this),this.div.append(this._editToolbar.render());const{toolbarButtons:J}=this;if(J)for(const[ne,oe]of J)await this._editToolbar.addButton(ne,oe);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var J;(J=this._editToolbar)==null||J.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var J;(J=this._editToolbar)==null||J.removeButton("comment")}removeEditToolbar(){var J,ne;(J=this._editToolbar)==null||J.remove(),this._editToolbar=null,(ne=Ze(this,li))==null||ne.destroy()}addContainer(J){var oe;const ne=(oe=this._editToolbar)==null?void 0:oe.div;ne?ne.before(J):this.div.append(J)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Ze(this,li)||(AltText.initialize(pn._l10n),ht(this,li,new AltText(this)),Ze(this,Xl)&&(Ze(this,li).data=Ze(this,Xl),ht(this,Xl,null))),Ze(this,li)}get altTextData(){var J;return(J=Ze(this,li))==null?void 0:J.data}set altTextData(J){Ze(this,li)&&(Ze(this,li).data=J)}get guessedAltText(){var J;return(J=Ze(this,li))==null?void 0:J.guessedText}async setGuessedAltText(J){var ne;await((ne=Ze(this,li))==null?void 0:ne.setGuessedText(J))}serializeAltText(J){var ne;return(ne=Ze(this,li))==null?void 0:ne.serialize(J)}hasAltText(){return!!Ze(this,li)&&!Ze(this,li).isEmpty()}hasAltTextData(){var J;return((J=Ze(this,li))==null?void 0:J.hasData())??!1}focusCommentButton(){var J;(J=Ze(this,ei))==null||J.focusButton()}addCommentButton(){return Ze(this,ei)||ht(this,ei,new Comment(this))}addStandaloneCommentButton(){if(Ze(this,Za)){this._uiManager.isEditingMode()&&Ze(this,Za).classList.remove("hidden");return}this.hasComment&&(ht(this,Za,Ze(this,ei).renderForStandalone()),this.div.append(Ze(this,Za)))}removeStandaloneCommentButton(){Ze(this,ei).removeStandaloneCommentButton(),ht(this,Za,null)}hideStandaloneCommentButton(){var J;(J=Ze(this,Za))==null||J.classList.add("hidden")}get comment(){const{data:{richText:J,text:ne,date:oe,deleted:ce}}=Ze(this,ei);return{text:ne,richText:J,date:oe,deleted:ce,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(J){Ze(this,ei)||ht(this,ei,new Comment(this)),Ze(this,ei).data=J,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:J,popupRef:ne,richText:oe}){if(!ne||(Ze(this,ei)||ht(this,ei,new Comment(this)),Ze(this,ei).setInitialText(J,oe),!this.annotationElementId))return;const ce=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);ce&&this.updateFromAnnotationLayer(ce)}get hasEditedComment(){var J;return(J=Ze(this,ei))==null?void 0:J.hasBeenEdited()}get hasDeletedComment(){var J;return(J=Ze(this,ei))==null?void 0:J.isDeleted()}get hasComment(){return!!Ze(this,ei)&&!Ze(this,ei).isEmpty()&&!Ze(this,ei).isDeleted()}async editComment(J){Ze(this,ei)||ht(this,ei,new Comment(this)),Ze(this,ei).edit(J)}toggleComment(J,ne=void 0){this.hasComment&&this._uiManager.toggleComment(this,J,ne)}setSelectedCommentButton(J){Ze(this,ei).setSelectedButton(J)}addComment(J){if(this.hasEditedComment){const[,,,ce]=J.rect,[ue]=this.pageDimensions,[Ae]=this.pageTranslation,pe=Ae+ue+1,ve=ce-100,me=pe+180;J.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[pe,ve,me,ce]}}}updateFromAnnotationLayer({popup:{contents:J,deleted:ne}}){Ze(this,ei).data=ne?null:J}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var Ae;const J=this.div=document.createElement("div");J.setAttribute("data-editor-rotation",(360-this.rotation)%360),J.className=this.name,J.setAttribute("id",this.id),J.tabIndex=Ze(this,Bu)?-1:0,J.setAttribute("role","application"),this.defaultL10nId&&J.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||J.classList.add("hidden"),this.setInForeground(),bt(this,Xr,B0).call(this);const[ne,oe]=this.parentDimensions;this.parentRotation%180!==0&&(J.style.maxWidth=`${(100*oe/ne).toFixed(2)}%`,J.style.maxHeight=`${(100*ne/oe).toFixed(2)}%`);const[ce,ue]=this.getInitialTranslation();return this.translate(ce,ue),bindEvents$1(this,J,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Ze(this,rc)||ht(this,rc,new TouchManager({container:J,isPinchingDisabled:()=>!this.isSelected,onPinchStart:bt(this,Xr,rm).bind(this),onPinching:bt(this,Xr,nm).bind(this),onPinchEnd:bt(this,Xr,im).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(Ae=this._uiManager._editorUndoBar)==null||Ae.hide(),J}pointerdown(J){const{isMac:ne}=util_FeatureTest.platform;if(J.button!==0||J.ctrlKey&&ne){J.preventDefault();return}if(ht(this,Jl,!0),this._isDraggable){bt(this,Xr,sm).call(this,J);return}bt(this,Xr,T0).call(this,J)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Ze(this,_a)&&clearTimeout(Ze(this,_a)),ht(this,_a,setTimeout(()=>{var J;ht(this,_a,null),(J=this.parent)==null||J.moveEditorInDOM(this)},0))}_setParentAndPosition(J,ne,oe){J.changeParent(this),this.x=ne,this.y=oe,this.fixAndSetPosition(),this._onTranslated()}getRect(J,ne,oe=this.rotation){const ce=this.parentScale,[ue,Ae]=this.pageDimensions,[pe,ve]=this.pageTranslation,me=J/ce,ge=ne/ce,ye=this.x*ue,xe=this.y*Ae,_e=this.width*ue,$e=this.height*Ae;switch(oe){case 0:return[ye+me+pe,Ae-xe-ge-$e+ve,ye+me+_e+pe,Ae-xe-ge+ve];case 90:return[ye+ge+pe,Ae-xe+me+ve,ye+ge+$e+pe,Ae-xe+me+_e+ve];case 180:return[ye-me-_e+pe,Ae-xe+ge+ve,ye-me+pe,Ae-xe+ge+$e+ve];case 270:return[ye-ge-$e+pe,Ae-xe-me-_e+ve,ye-ge+pe,Ae-xe-me+ve];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(J,ne){const[oe,ce,ue,Ae]=J,pe=ue-oe,ve=Ae-ce;switch(this.rotation){case 0:return[oe,ne-Ae,pe,ve];case 90:return[oe,ne-ce,ve,pe];case 180:return[ue,ne-ce,pe,ve];case 270:return[ue,ne-Ae,ve,pe];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&pn._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var J;(J=Ze(this,ei))==null||J.onUpdatedColor()}getData(){const{comment:{text:J,color:ne,date:oe,opacity:ce,deleted:ue,richText:Ae},uid:pe,pageIndex:ve,creationDate:me,modificationDate:ge}=this;return{id:pe,pageIndex:ve,rect:this.getPDFRect(),richText:Ae,contentsObj:{str:J},creationDate:me,modificationDate:oe||ge,popupRef:!ue,color:ne,opacity:ce}}onceAdded(J){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),ht(this,tc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),ht(this,tc,!1),!0):!1}isInEditMode(){return Ze(this,tc)}shouldGetKeyboardEvents(){return Ze(this,eo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:J,left:ne,bottom:oe,right:ce}=this.getClientDimensions(),{innerHeight:ue,innerWidth:Ae}=window;return ne<Ae&&ce>0&&J<ue&&oe>0}rebuild(){bt(this,Xr,B0).call(this)}rotate(J){}resize(){}serializeDeleted(){var J;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((J=this._initialData)==null?void 0:J.popupRef)||""}}serialize(J=!1,ne=null){var oe;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((oe=this._initialData)==null?void 0:oe.popupRef)||""}}static async deserialize(J,ne,oe){const ce=new this.prototype.constructor({parent:ne,id:ne.getNextId(),uiManager:oe,annotationElementId:J.annotationElementId,creationDate:J.creationDate,modificationDate:J.modificationDate});ce.rotation=J.rotation,ht(ce,Xl,J.accessibilityData),ce._isCopy=J.isCopy||!1;const[ue,Ae]=ce.pageDimensions,[pe,ve,me,ge]=ce.getRectInCurrentCoords(J.rect,Ae);return ce.x=pe/ue,ce.y=ve/Ae,ce.width=me/ue,ce.height=ge/Ae,ce}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var J,ne;if((J=Ze(this,Xo))==null||J.abort(),ht(this,Xo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Ze(this,_a)&&(clearTimeout(Ze(this,_a)),ht(this,_a,null)),bt(this,Xr,Xf).call(this),this.removeEditToolbar(),Ze(this,Vs)){for(const oe of Ze(this,Vs).values())clearTimeout(oe);ht(this,Vs,null)}this.parent=null,(ne=Ze(this,rc))==null||ne.destroy(),ht(this,rc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(bt(this,Xr,em).call(this),Ze(this,ki).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[J,ne]}=this,[oe,ce,ue,Ae]=this.getPDFRect();return[pn._round(oe+(ue-oe)*J),pn._round(ce+(Ae-ce)*(1-ne))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return Ze(this,ei).commentPopupPositionInLayer}set commentPopupPosition(J){Ze(this,ei).commentPopupPositionInLayer=J}hasDefaultPopupPosition(){return Ze(this,ei).hasDefaultPopupPosition()}get commentButtonWidth(){return Ze(this,ei).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(J){Ze(this,ei).setCommentButtonStates(J)}keydown(J){if(!this.isResizable||J.target!==this.div||J.key!=="Enter")return;this._uiManager.setSelected(this),ht(this,Ja,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const ne=Ze(this,ki).children;if(!Ze(this,ra)){ht(this,ra,Array.from(ne));const Ae=bt(this,Xr,am).bind(this),pe=bt(this,Xr,om).bind(this),ve=this._uiManager._signal;for(const me of Ze(this,ra)){const ge=me.getAttribute("data-resizer-name");me.setAttribute("role","spinbutton"),me.addEventListener("keydown",Ae,{signal:ve}),me.addEventListener("blur",pe,{signal:ve}),me.addEventListener("focus",bt(this,Xr,lm).bind(this,ge),{signal:ve}),me.setAttribute("data-l10n-id",pn._l10nResizer[ge])}}const oe=Ze(this,ra)[0];let ce=0;for(const Ae of ne){if(Ae===oe)break;ce++}const ue=(360-this.rotation+this.parentRotation)%360/90*(Ze(this,ra).length/4);if(ue!==ce){if(ue<ce)for(let pe=0;pe<ce-ue;pe++)Ze(this,ki).append(Ze(this,ki).firstChild);else if(ue>ce)for(let pe=0;pe<ue-ce;pe++)Ze(this,ki).firstChild.before(Ze(this,ki).lastChild);let Ae=0;for(const pe of ne){const me=Ze(this,ra)[Ae++].getAttribute("data-resizer-name");pe.setAttribute("data-l10n-id",pn._l10nResizer[me])}}bt(this,Xr,I0).call(this,0),ht(this,eo,!0),Ze(this,ki).firstChild.focus({focusVisible:!0}),J.preventDefault(),J.stopImmediatePropagation()}_resizeWithKeyboard(J,ne){Ze(this,eo)&&bt(this,Xr,_0).call(this,Ze(this,Fd),{deltaX:J,deltaY:ne,fromKeyboard:!0})}_stopResizingWithKeyboard(){bt(this,Xr,Xf).call(this),this.div.focus()}select(){var J,ne,oe;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(J=this.div)==null||J.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var ce,ue;(ce=this.div)!=null&&ce.classList.contains("selectedEditor")&&((ue=this._editToolbar)==null||ue.show())});return}(ne=this._editToolbar)==null||ne.show(),(oe=Ze(this,li))==null||oe.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var J;return(J=this.div)==null?void 0:J.focus({preventScroll:!0})},0)}unselect(){var J,ne,oe,ce,ue;this.isSelected&&(this.isSelected=!1,(J=Ze(this,ki))==null||J.classList.add("hidden"),(ne=this.div)==null||ne.classList.remove("selectedEditor"),(oe=this.div)!=null&&oe.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(ce=this._editToolbar)==null||ce.hide(),(ue=Ze(this,li))==null||ue.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(J,ne){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(J){J.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Ze(this,kd)}set isEditing(J){ht(this,kd,J),this.parent&&(J?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(J,ne=!1){if(ne){Ze(this,Vs)||ht(this,Vs,new Map);const{action:oe}=J;let ce=Ze(this,Vs).get(oe);ce&&clearTimeout(ce),ce=setTimeout(()=>{this._reportTelemetry(J),Ze(this,Vs).delete(oe),Ze(this,Vs).size===0&&ht(this,Vs,null)},pn._telemetryTimeout),Ze(this,Vs).set(oe,ce);return}J.type||(J.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:J}})}show(J=this._isVisible){this.div.classList.toggle("hidden",!J),this._isVisible=J}enable(){this.div&&(this.div.tabIndex=0),ht(this,Bu,!1)}disable(){this.div&&(this.div.tabIndex=-1),ht(this,Bu,!0)}updateFakeAnnotationElement(J){if(!Ze(this,Sa)&&!this.deleted){ht(this,Sa,J.addFakeAnnotation(this));return}if(this.deleted){Ze(this,Sa).remove(),ht(this,Sa,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&Ze(this,Sa).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(J){if(this.deleted)return J.hide(),null;let ne=J.container.querySelector(".annotationContent");if(!ne)ne=document.createElement("div"),ne.classList.add("annotationContent",this.editorType),J.container.prepend(ne);else if(ne.nodeName==="CANVAS"){const oe=ne;ne=document.createElement("div"),ne.classList.add("annotationContent",this.editorType),oe.before(ne)}return ne}resetAnnotationElement(J){const{firstChild:ne}=J.container;(ne==null?void 0:ne.nodeName)==="DIV"&&ne.classList.contains("annotationContent")&&ne.remove()}};Xl=new WeakMap,ra=new WeakMap,li=new WeakMap,ei=new WeakMap,Za=new WeakMap,Bu=new WeakMap,Yo=new WeakMap,Ld=new WeakMap,ki=new WeakMap,Zl=new WeakMap,Ja=new WeakMap,Sa=new WeakMap,Xo=new WeakMap,Fd=new WeakMap,Jl=new WeakMap,vs=new WeakMap,kd=new WeakMap,tc=new WeakMap,eo=new WeakMap,_a=new WeakMap,Iu=new WeakMap,$u=new WeakMap,Vs=new WeakMap,rc=new WeakMap,Pd=new WeakMap,wp=new WeakMap,Xr=new WeakSet,w0=function([J,ne],oe,ce){[oe,ce]=this.screenToPageTranslation(oe,ce),this.x+=oe/J,this.y+=ce/ne,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ud=new WeakSet,C0=function(J,ne,oe){switch(oe){case 90:return[ne,-J];case 180:return[-J,-ne];case 270:return[-ne,J];default:return[J,ne]}},mA=function(J){switch(J){case 90:{const[ne,oe]=this.pageDimensions;return[0,-ne/oe,oe/ne,0]}case 180:return[-1,0,0,-1];case 270:{const[ne,oe]=this.pageDimensions;return[0,ne/oe,-oe/ne,0]}default:return[1,0,0,1]}},em=function(){if(Ze(this,ki))return;ht(this,ki,document.createElement("div")),Ze(this,ki).classList.add("resizers");const J=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],ne=this._uiManager._signal;for(const oe of J){const ce=document.createElement("div");Ze(this,ki).append(ce),ce.classList.add("resizer",oe),ce.setAttribute("data-resizer-name",oe),ce.addEventListener("pointerdown",bt(this,Xr,tm).bind(this,oe),{signal:ne}),ce.addEventListener("contextmenu",noContextMenu,{signal:ne}),ce.tabIndex=-1}this.div.prepend(Ze(this,ki))},tm=function(J,ne){var ge;ne.preventDefault();const{isMac:oe}=util_FeatureTest.platform;if(ne.button!==0||ne.ctrlKey&&oe)return;(ge=Ze(this,li))==null||ge.toggle(!1);const ce=this._isDraggable;this._isDraggable=!1,ht(this,Zl,[ne.screenX,ne.screenY]);const ue=new AbortController,Ae=this._uiManager.combinedSignal(ue);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",bt(this,Xr,_0).bind(this,J),{passive:!0,capture:!0,signal:Ae}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:Ae}),window.addEventListener("contextmenu",noContextMenu,{signal:Ae}),ht(this,Ja,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const pe=this.parent.div.style.cursor,ve=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(ne.target).cursor;const me=()=>{var ye;ue.abort(),this.parent.togglePointerEvents(!0),(ye=Ze(this,li))==null||ye.toggle(!0),this._isDraggable=ce,this.parent.div.style.cursor=pe,this.div.style.cursor=ve,bt(this,Xr,vA).call(this)};window.addEventListener("pointerup",me,{signal:Ae}),window.addEventListener("blur",me,{signal:Ae})},S0=function(J,ne,oe,ce){this.width=oe,this.height=ce,this.x=J,this.y=ne,this.setDims(),this.fixAndSetPosition(),this._onResized()},vA=function(){if(!Ze(this,Ja))return;const{savedX:J,savedY:ne,savedWidth:oe,savedHeight:ce}=Ze(this,Ja);ht(this,Ja,null);const ue=this.x,Ae=this.y,pe=this.width,ve=this.height;ue===J&&Ae===ne&&pe===oe&&ve===ce||this.addCommands({cmd:bt(this,Xr,S0).bind(this,ue,Ae,pe,ve),undo:bt(this,Xr,S0).bind(this,J,ne,oe,ce),mustExec:!0})},_0=function(J,ne){const[oe,ce]=this.parentDimensions,ue=this.x,Ae=this.y,pe=this.width,ve=this.height,me=pn.MIN_SIZE/oe,ge=pn.MIN_SIZE/ce,ye=bt(this,Xr,mA).call(this,this.rotation),xe=(Ue,Ge)=>[ye[0]*Ue+ye[2]*Ge,ye[1]*Ue+ye[3]*Ge],_e=bt(this,Xr,mA).call(this,360-this.rotation),$e=(Ue,Ge)=>[_e[0]*Ue+_e[2]*Ge,_e[1]*Ue+_e[3]*Ge];let Ie,Fe,ke=!1,je=!1;switch(J){case"topLeft":ke=!0,Ie=(Ue,Ge)=>[0,0],Fe=(Ue,Ge)=>[Ue,Ge];break;case"topMiddle":Ie=(Ue,Ge)=>[Ue/2,0],Fe=(Ue,Ge)=>[Ue/2,Ge];break;case"topRight":ke=!0,Ie=(Ue,Ge)=>[Ue,0],Fe=(Ue,Ge)=>[0,Ge];break;case"middleRight":je=!0,Ie=(Ue,Ge)=>[Ue,Ge/2],Fe=(Ue,Ge)=>[0,Ge/2];break;case"bottomRight":ke=!0,Ie=(Ue,Ge)=>[Ue,Ge],Fe=(Ue,Ge)=>[0,0];break;case"bottomMiddle":Ie=(Ue,Ge)=>[Ue/2,Ge],Fe=(Ue,Ge)=>[Ue/2,0];break;case"bottomLeft":ke=!0,Ie=(Ue,Ge)=>[0,Ge],Fe=(Ue,Ge)=>[Ue,0];break;case"middleLeft":je=!0,Ie=(Ue,Ge)=>[0,Ge/2],Fe=(Ue,Ge)=>[Ue,Ge/2];break}const We=Ie(pe,ve),ze=Fe(pe,ve);let Xe=xe(...ze);const Je=pn._round(ue+Xe[0]),nt=pn._round(Ae+Xe[1]);let et=1,tt=1,st,qe;if(ne.fromKeyboard)({deltaX:st,deltaY:qe}=ne);else{const{screenX:Ue,screenY:Ge}=ne,[Ye,Qe]=Ze(this,Zl);[st,qe]=this.screenToPageTranslation(Ue-Ye,Ge-Qe),Ze(this,Zl)[0]=Ue,Ze(this,Zl)[1]=Ge}if([st,qe]=$e(st/oe,qe/ce),ke){const Ue=Math.hypot(pe,ve);et=tt=Math.max(Math.min(Math.hypot(ze[0]-We[0]-st,ze[1]-We[1]-qe)/Ue,1/pe,1/ve),me/pe,ge/ve)}else je?et=MathClamp(Math.abs(ze[0]-We[0]-st),me,1)/pe:tt=MathClamp(Math.abs(ze[1]-We[1]-qe),ge,1)/ve;const Se=pn._round(pe*et),Re=pn._round(ve*tt);Xe=xe(...Fe(Se,Re));const Be=Je-Xe[0],Ne=nt-Xe[1];Ze(this,vs)||ht(this,vs,[this.x,this.y,this.width,this.height]),this.width=Se,this.height=Re,this.x=Be,this.y=Ne,this.setDims(),this.fixAndSetPosition(),this._onResizing()},rm=function(){var J;ht(this,Ja,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(J=Ze(this,li))==null||J.toggle(!1),this.parent.togglePointerEvents(!1)},nm=function(J,ne,oe){let ue=.7*(oe/ne)+1-.7;if(ue===1)return;const Ae=bt(this,Xr,mA).call(this,this.rotation),pe=(Je,nt)=>[Ae[0]*Je+Ae[2]*nt,Ae[1]*Je+Ae[3]*nt],[ve,me]=this.parentDimensions,ge=this.x,ye=this.y,xe=this.width,_e=this.height,$e=pn.MIN_SIZE/ve,Ie=pn.MIN_SIZE/me;ue=Math.max(Math.min(ue,1/xe,1/_e),$e/xe,Ie/_e);const Fe=pn._round(xe*ue),ke=pn._round(_e*ue);if(Fe===xe&&ke===_e)return;Ze(this,vs)||ht(this,vs,[ge,ye,xe,_e]);const je=pe(xe/2,_e/2),We=pn._round(ge+je[0]),ze=pn._round(ye+je[1]),Xe=pe(Fe/2,ke/2);this.x=We-Xe[0],this.y=ze-Xe[1],this.width=Fe,this.height=ke,this.setDims(),this.fixAndSetPosition(),this._onResizing()},im=function(){var J;(J=Ze(this,li))==null||J.toggle(!0),this.parent.togglePointerEvents(!0),bt(this,Xr,vA).call(this)},T0=function(J){const{isMac:ne}=util_FeatureTest.platform;J.ctrlKey&&!ne||J.shiftKey||J.metaKey&&ne?this.parent.toggleSelected(this):this.parent.setSelected(this)},sm=function(J){const{isSelected:ne}=this;this._uiManager.setUpDragSession();let oe=!1;const ce=new AbortController,ue=this._uiManager.combinedSignal(ce),Ae={capture:!0,passive:!1,signal:ue},pe=me=>{ce.abort(),ht(this,Yo,null),ht(this,Jl,!1),this._uiManager.endDragSession()||bt(this,Xr,T0).call(this,me),oe&&this._onStopDragging()};ne&&(ht(this,Iu,J.clientX),ht(this,$u,J.clientY),ht(this,Yo,J.pointerId),ht(this,Ld,J.pointerType),window.addEventListener("pointermove",me=>{oe||(oe=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:ge,clientY:ye,pointerId:xe}=me;if(xe!==Ze(this,Yo)){stopEvent(me);return}const[_e,$e]=this.screenToPageTranslation(ge-Ze(this,Iu),ye-Ze(this,$u));ht(this,Iu,ge),ht(this,$u,ye),this._uiManager.dragSelectedEditors(_e,$e)},Ae),window.addEventListener("touchmove",stopEvent,Ae),window.addEventListener("pointerdown",me=>{me.pointerType===Ze(this,Ld)&&(Ze(this,rc)||me.isPrimary)&&pe(me),stopEvent(me)},Ae));const ve=me=>{if(!Ze(this,Yo)||Ze(this,Yo)===me.pointerId){pe(me);return}stopEvent(me)};window.addEventListener("pointerup",ve,{signal:ue}),window.addEventListener("blur",ve,{signal:ue})},B0=function(){if(Ze(this,Xo)||!this.div)return;ht(this,Xo,new AbortController);const J=this._uiManager.combinedSignal(Ze(this,Xo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:J}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:J})},am=function(J){pn._resizerKeyboardManager.exec(this,J)},om=function(J){var ne;Ze(this,eo)&&((ne=J.relatedTarget)==null?void 0:ne.parentNode)!==Ze(this,ki)&&bt(this,Xr,Xf).call(this)},lm=function(J){ht(this,Fd,Ze(this,eo)?J:"")},I0=function(J){if(Ze(this,ra))for(const ne of Ze(this,ra))ne.tabIndex=J},Xf=function(){ht(this,eo,!1),bt(this,Xr,I0).call(this,-1),bt(this,Xr,vA).call(this)},yt(pn,Ud),wr(pn,"_l10n",null),wr(pn,"_l10nResizer",null),wr(pn,"_borderLineWidth",-1),wr(pn,"_colorManager",new ColorManager),wr(pn,"_zIndex",1),wr(pn,"_telemetryTimeout",1e3);let AnnotationEditor=pn;class FakeEditor extends AnnotationEditor{constructor(J){super(J),this.annotationElementId=J.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(J){this.h1=J?J&4294967295:SEED,this.h2=J?J&4294967295:SEED}update(J){let ne,oe;if(typeof J=="string"){ne=new Uint8Array(J.length*2),oe=0;for(let Ie=0,Fe=J.length;Ie<Fe;Ie++){const ke=J.charCodeAt(Ie);ke<=255?ne[oe++]=ke:(ne[oe++]=ke>>>8,ne[oe++]=ke&255)}}else if(ArrayBuffer.isView(J))ne=J.slice(),oe=ne.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const ce=oe>>2,ue=oe-ce*4,Ae=new Uint32Array(ne.buffer,0,ce);let pe=0,ve=0,me=this.h1,ge=this.h2;const ye=3432918353,xe=461845907,_e=ye&MASK_LOW,$e=xe&MASK_LOW;for(let Ie=0;Ie<ce;Ie++)Ie&1?(pe=Ae[Ie],pe=pe*ye&MASK_HIGH|pe*_e&MASK_LOW,pe=pe<<15|pe>>>17,pe=pe*xe&MASK_HIGH|pe*$e&MASK_LOW,me^=pe,me=me<<13|me>>>19,me=me*5+3864292196):(ve=Ae[Ie],ve=ve*ye&MASK_HIGH|ve*_e&MASK_LOW,ve=ve<<15|ve>>>17,ve=ve*xe&MASK_HIGH|ve*$e&MASK_LOW,ge^=ve,ge=ge<<13|ge>>>19,ge=ge*5+3864292196);switch(pe=0,ue){case 3:pe^=ne[ce*4+2]<<16;case 2:pe^=ne[ce*4+1]<<8;case 1:pe^=ne[ce*4],pe=pe*ye&MASK_HIGH|pe*_e&MASK_LOW,pe=pe<<15|pe>>>17,pe=pe*xe&MASK_HIGH|pe*$e&MASK_LOW,ce&1?me^=pe:ge^=pe}this.h1=me,this.h2=ge}hexdigest(){let J=this.h1,ne=this.h2;return J^=ne>>>1,J=J*3981806797&MASK_HIGH|J*36045&MASK_LOW,ne=ne*4283543511&MASK_HIGH|((ne<<16|J>>>16)*2950163797&MASK_HIGH)>>>16,J^=ne>>>1,J=J*444984403&MASK_HIGH|J*60499&MASK_LOW,ne=ne*3301882366&MASK_HIGH|((ne<<16|J>>>16)*3120437893&MASK_HIGH)>>>16,J^=ne>>>1,(J>>>0).toString(16).padStart(8,"0")+(ne>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var nc,ic,to,Pi,Cp,cm;class AnnotationStorage{constructor(){yt(this,Cp);yt(this,nc,!1);yt(this,ic,null);yt(this,to,null);yt(this,Pi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(J,ne){const oe=Ze(this,Pi).get(J);return oe===void 0?ne:Object.assign(ne,oe)}getRawValue(J){return Ze(this,Pi).get(J)}remove(J){const ne=Ze(this,Pi).get(J);if(ne!==void 0&&(ne instanceof AnnotationEditor&&Ze(this,to).delete(ne.annotationElementId),Ze(this,Pi).delete(J),Ze(this,Pi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const oe of Ze(this,Pi).values())if(oe instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(J,ne){const oe=Ze(this,Pi).get(J);let ce=!1;if(oe!==void 0)for(const[ue,Ae]of Object.entries(ne))oe[ue]!==Ae&&(ce=!0,oe[ue]=Ae);else ce=!0,Ze(this,Pi).set(J,ne);ce&&bt(this,Cp,cm).call(this),ne instanceof AnnotationEditor&&((Ze(this,to)||ht(this,to,new Map)).set(ne.annotationElementId,ne),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(ne.constructor._type))}has(J){return Ze(this,Pi).has(J)}get size(){return Ze(this,Pi).size}resetModified(){Ze(this,nc)&&(ht(this,nc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(Ze(this,Pi).size===0)return SerializableEmpty;const J=new Map,ne=new MurmurHash3_64,oe=[],ce=Object.create(null);let ue=!1;for(const[Ae,pe]of Ze(this,Pi)){const ve=pe instanceof AnnotationEditor?pe.serialize(!1,ce):pe;ve&&(J.set(Ae,ve),ne.update(`${Ae}:${JSON.stringify(ve)}`),ue||(ue=!!ve.bitmap))}if(ue)for(const Ae of J.values())Ae.bitmap&&oe.push(Ae.bitmap);return J.size>0?{map:J,hash:ne.hexdigest(),transfer:oe}:SerializableEmpty}get editorStats(){let J=null;const ne=new Map;let oe=0,ce=0;for(const ue of Ze(this,Pi).values()){if(!(ue instanceof AnnotationEditor)){ue.popup&&(ue.popup.deleted?ce+=1:oe+=1);continue}ue.isCommentDeleted?ce+=1:ue.hasEditedComment&&(oe+=1);const Ae=ue.telemetryFinalData;if(!Ae)continue;const{type:pe}=Ae;ne.has(pe)||ne.set(pe,Object.getPrototypeOf(ue).constructor),J||(J=Object.create(null));const ve=J[pe]||(J[pe]=new Map);for(const[me,ge]of Object.entries(Ae)){if(me==="type")continue;let ye=ve.get(me);ye||(ye=new Map,ve.set(me,ye));const xe=ye.get(ge)??0;ye.set(ge,xe+1)}}if((ce>0||oe>0)&&(J||(J=Object.create(null)),J.comments={deleted:ce,edited:oe}),!J)return null;for(const[ue,Ae]of ne)J[ue]=Ae.computeTelemetryFinalData(J[ue]);return J}resetModifiedIds(){ht(this,ic,null)}updateEditor(J,ne){var ce;const oe=(ce=Ze(this,to))==null?void 0:ce.get(J);return oe?(oe.updateFromAnnotationLayer(ne),!0):!1}getEditor(J){var ne;return((ne=Ze(this,to))==null?void 0:ne.get(J))||null}get modifiedIds(){if(Ze(this,ic))return Ze(this,ic);const J=[];if(Ze(this,to))for(const ne of Ze(this,to).values())ne.serialize()&&J.push(ne.annotationElementId);return ht(this,ic,{ids:new Set(J),hash:J.join(",")})}[Symbol.iterator](){return Ze(this,Pi).entries()}}nc=new WeakMap,ic=new WeakMap,to=new WeakMap,Pi=new WeakMap,Cp=new WeakSet,cm=function(){Ze(this,nc)||(ht(this,nc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Hd;class PrintAnnotationStorage extends AnnotationStorage{constructor(ne){super();yt(this,Hd);const{map:oe,hash:ce,transfer:ue}=ne.serializable,Ae=structuredClone(oe,ue?{transfer:ue}:null);ht(this,Hd,{map:Ae,hash:ce,transfer:ue})}get print(){unreachable$1("Should not call PrintAnnotationStorage.print")}get serializable(){return Ze(this,Hd)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}Hd=new WeakMap;var Mu;class FontLoader{constructor({ownerDocument:J=globalThis.document,styleElement:ne=null}){yt(this,Mu,new Set);this._document=J,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(J){this.nativeFontFaces.add(J),this._document.fonts.add(J)}removeNativeFontFace(J){this.nativeFontFaces.delete(J),this._document.fonts.delete(J)}insertRule(J){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const ne=this.styleElement.sheet;ne.insertRule(J,ne.cssRules.length)}clear(){for(const J of this.nativeFontFaces)this._document.fonts.delete(J);this.nativeFontFaces.clear(),Ze(this,Mu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:J,disableFontFace:ne,_inspectFont:oe}){if(!(!J||Ze(this,Mu).has(J.loadedName))){if(assert(!ne,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:ce,src:ue,style:Ae}=J,pe=new FontFace(ce,ue,Ae);this.addNativeFontFace(pe);try{await pe.load(),Ze(this,Mu).add(ce),oe==null||oe(J)}catch{warn$2(`Cannot load system font: ${J.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(pe)}return}unreachable$1("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(J){if(J.attached||J.missingFile&&!J.systemFontInfo)return;if(J.attached=!0,J.systemFontInfo){await this.loadSystemFont(J);return}if(this.isFontLoadingAPISupported){const oe=J.createNativeFontFace();if(oe){this.addNativeFontFace(oe);try{await oe.loaded}catch(ce){throw warn$2(`Failed to load font '${oe.family}': '${ce}'.`),J.disableFontFace=!0,ce}}return}const ne=J.createFontFaceRule();if(ne){if(this.insertRule(ne),this.isSyncFontLoadingSupported)return;await new Promise(oe=>{const ce=this._queueLoadingCallback(oe);this._prepareFontLoadEvent(J,ce)})}}get isFontLoadingAPISupported(){var ne;const J=!!((ne=this._document)!=null&&ne.fonts);return shadow(this,"isFontLoadingAPISupported",J)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(J){function ne(){for(assert(!ce.done,"completeRequest() cannot be called twice."),ce.done=!0;oe.length>0&&oe[0].done;){const ue=oe.shift();setTimeout(ue.callback,0)}}const{loadingRequests:oe}=this,ce={done:!1,complete:ne,callback:J};return oe.push(ce),ce}get _loadTestFont(){const J=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",J)}_prepareFontLoadEvent(J,ne){function oe(ze,Xe){return ze.charCodeAt(Xe)<<24|ze.charCodeAt(Xe+1)<<16|ze.charCodeAt(Xe+2)<<8|ze.charCodeAt(Xe+3)&255}function ce(ze,Xe,Je,nt){const et=ze.substring(0,Xe),tt=ze.substring(Xe+Je);return et+nt+tt}let ue,Ae;const pe=this._document.createElement("canvas");pe.width=1,pe.height=1;const ve=pe.getContext("2d");let me=0;function ge(ze,Xe){if(++me>30){warn$2("Load test font never loaded."),Xe();return}if(ve.font="30px "+ze,ve.fillText(".",0,20),ve.getImageData(0,0,1,1).data[3]>0){Xe();return}setTimeout(ge.bind(null,ze,Xe))}const ye=`lt${Date.now()}${this.loadTestFontId++}`;let xe=this._loadTestFont;xe=ce(xe,976,ye.length,ye);const $e=16,Ie=1482184792;let Fe=oe(xe,$e);for(ue=0,Ae=ye.length-3;ue<Ae;ue+=4)Fe=Fe-Ie+oe(ye,ue)|0;ue<ye.length&&(Fe=Fe-Ie+oe(ye+"XXX",ue)|0),xe=ce(xe,$e,4,string32(Fe));const ke=`url(data:font/opentype;base64,${btoa(xe)});`,je=`@font-face {font-family:"${ye}";src:${ke}}`;this.insertRule(je);const We=this._document.createElement("div");We.style.visibility="hidden",We.style.width=We.style.height="10px",We.style.position="absolute",We.style.top=We.style.left="0px";for(const ze of[J.loadedName,ye]){const Xe=this._document.createElement("span");Xe.textContent="Hi",Xe.style.fontFamily=ze,We.append(Xe)}this._document.body.append(We),ge(ye,()=>{We.remove(),ne.complete()})}}Mu=new WeakMap;var Wn;class FontFaceObject{constructor(J,ne=null,oe,ce){yt(this,Wn);this.compiledGlyphs=Object.create(null),ht(this,Wn,J),this._inspectFont=ne,oe&&Object.assign(this,oe),ce&&(this.charProcOperatorList=ce)}createNativeFontFace(){var ne;if(!this.data||this.disableFontFace)return null;let J;if(!this.cssFontInfo)J=new FontFace(this.loadedName,this.data,{});else{const oe={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(oe.style=`oblique ${this.cssFontInfo.italicAngle}deg`),J=new FontFace(this.cssFontInfo.fontFamily,this.data,oe)}return(ne=this._inspectFont)==null||ne.call(this,this),J}createFontFaceRule(){var oe;if(!this.data||this.disableFontFace)return null;const J=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let ne;if(!this.cssFontInfo)ne=`@font-face {font-family:"${this.loadedName}";src:${J}}`;else{let ce=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ce+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),ne=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ce}src:${J}}`}return(oe=this._inspectFont)==null||oe.call(this,this,J),ne}getPathGenerator(J,ne){if(this.compiledGlyphs[ne]!==void 0)return this.compiledGlyphs[ne];const oe=this.loadedName+"_path_"+ne;let ce;try{ce=J.get(oe)}catch(Ae){warn$2(`getPathGenerator - ignoring character: "${Ae}".`)}const ue=new Path2D(ce||"");return this.fontExtraProperties||J.delete(oe),this.compiledGlyphs[ne]=ue}get black(){return Ze(this,Wn).black}get bold(){return Ze(this,Wn).bold}get disableFontFace(){return Ze(this,Wn).disableFontFace??!1}get fontExtraProperties(){return Ze(this,Wn).fontExtraProperties??!1}get isInvalidPDFjsFont(){return Ze(this,Wn).isInvalidPDFjsFont}get isType3Font(){return Ze(this,Wn).isType3Font}get italic(){return Ze(this,Wn).italic}get missingFile(){return Ze(this,Wn).missingFile}get remeasure(){return Ze(this,Wn).remeasure}get vertical(){return Ze(this,Wn).vertical}get ascent(){return Ze(this,Wn).ascent}get defaultWidth(){return Ze(this,Wn).defaultWidth}get descent(){return Ze(this,Wn).descent}get bbox(){return Ze(this,Wn).bbox}get fontMatrix(){return Ze(this,Wn).fontMatrix}get fallbackName(){return Ze(this,Wn).fallbackName}get loadedName(){return Ze(this,Wn).loadedName}get mimetype(){return Ze(this,Wn).mimetype}get name(){return Ze(this,Wn).name}get data(){return Ze(this,Wn).data}clearData(){Ze(this,Wn).clearData()}get cssFontInfo(){return Ze(this,Wn).cssFontInfo}get systemFontInfo(){return Ze(this,Wn).systemFontInfo}get defaultVMetrics(){return Ze(this,Wn).defaultVMetrics}}Wn=new WeakMap;function getUrlProp(K){if(K instanceof URL)return K.href;if(typeof K=="string"){if(isNodeJS)return K;const J=URL.parse(K,window.location);if(J)return J.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(K){if(isNodeJS&&typeof Buffer<"u"&&K instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(K instanceof Uint8Array&&K.byteLength===K.buffer.byteLength)return K;if(typeof K=="string")return stringToBytes(K);if(K instanceof ArrayBuffer||ArrayBuffer.isView(K)||typeof K=="object"&&!isNaN(K==null?void 0:K.length))return new Uint8Array(K);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(K){if(typeof K!="string")return null;if(K.endsWith("/"))return K;throw new Error(`Invalid factory url: "${K}" must include trailing slash.`)}const isRefProxy=K=>typeof K=="object"&&Number.isInteger(K==null?void 0:K.num)&&K.num>=0&&Number.isInteger(K==null?void 0:K.gen)&&K.gen>=0,isNameProxy=K=>typeof K=="object"&&typeof(K==null?void 0:K.name)=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);var ro,Sp;class LoopbackPort{constructor(){yt(this,ro,new Map);yt(this,Sp,Promise.resolve())}postMessage(J,ne){const oe={data:structuredClone(J,ne?{transfer:ne}:null)};Ze(this,Sp).then(()=>{for(const[ce]of Ze(this,ro))ce.call(this,oe)})}addEventListener(J,ne,oe=null){let ce=null;if((oe==null?void 0:oe.signal)instanceof AbortSignal){const{signal:ue}=oe;if(ue.aborted){warn$2("LoopbackPort - cannot use an `aborted` signal.");return}const Ae=()=>this.removeEventListener(J,ne);ce=()=>ue.removeEventListener("abort",Ae),ue.addEventListener("abort",Ae)}Ze(this,ro).set(ne,ce)}removeEventListener(J,ne){const oe=Ze(this,ro).get(ne);oe==null||oe(),Ze(this,ro).delete(ne)}terminate(){for(const[,J]of Ze(this,ro))J==null||J();Ze(this,ro).clear()}}ro=new WeakMap,Sp=new WeakMap;const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(K){if(K instanceof AbortException||K instanceof InvalidPDFException||K instanceof PasswordException||K instanceof ResponseException||K instanceof UnknownErrorException)return K;switch(K instanceof Error||typeof K=="object"&&K!==null||unreachable$1('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),K.name){case"AbortException":return new AbortException(K.message);case"InvalidPDFException":return new InvalidPDFException(K.message);case"PasswordException":return new PasswordException(K.message,K.code);case"ResponseException":return new ResponseException(K.message,K.status,K.missing);case"UnknownErrorException":return new UnknownErrorException(K.message,K.details)}return new UnknownErrorException(K.message,K.toString())}var Nu,Ws,um,fm,dm,yA;class MessageHandler{constructor(J,ne,oe){yt(this,Ws);yt(this,Nu,new AbortController);this.sourceName=J,this.targetName=ne,this.comObj=oe,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),oe.addEventListener("message",bt(this,Ws,um).bind(this),{signal:Ze(this,Nu).signal})}on(J,ne){const oe=this.actionHandler;if(oe[J])throw new Error(`There is already an actionName called "${J}"`);oe[J]=ne}send(J,ne,oe){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:J,data:ne},oe)}sendWithPromise(J,ne,oe){const ce=this.callbackId++,ue=Promise.withResolvers();this.callbackCapabilities[ce]=ue;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:J,callbackId:ce,data:ne},oe)}catch(Ae){ue.reject(Ae)}return ue.promise}sendWithStream(J,ne,oe,ce){const ue=this.streamId++,Ae=this.sourceName,pe=this.targetName,ve=this.comObj;return new ReadableStream({start:me=>{const ge=Promise.withResolvers();return this.streamControllers[ue]={controller:me,startCall:ge,pullCall:null,cancelCall:null,isClosed:!1},ve.postMessage({sourceName:Ae,targetName:pe,action:J,streamId:ue,data:ne,desiredSize:me.desiredSize},ce),ge.promise},pull:me=>{const ge=Promise.withResolvers();return this.streamControllers[ue].pullCall=ge,ve.postMessage({sourceName:Ae,targetName:pe,stream:StreamKind.PULL,streamId:ue,desiredSize:me.desiredSize}),ge.promise},cancel:me=>{assert(me instanceof Error,"cancel must have a valid reason");const ge=Promise.withResolvers();return this.streamControllers[ue].cancelCall=ge,this.streamControllers[ue].isClosed=!0,ve.postMessage({sourceName:Ae,targetName:pe,stream:StreamKind.CANCEL,streamId:ue,reason:wrapReason(me)}),ge.promise}},oe)}destroy(){var J;(J=Ze(this,Nu))==null||J.abort(),ht(this,Nu,null)}}Nu=new WeakMap,Ws=new WeakSet,um=function({data:J}){if(J.targetName!==this.sourceName)return;if(J.stream){bt(this,Ws,dm).call(this,J);return}if(J.callback){const oe=J.callbackId,ce=this.callbackCapabilities[oe];if(!ce)throw new Error(`Cannot resolve callback ${oe}`);if(delete this.callbackCapabilities[oe],J.callback===CallbackKind.DATA)ce.resolve(J.data);else if(J.callback===CallbackKind.ERROR)ce.reject(wrapReason(J.reason));else throw new Error("Unexpected callback case");return}const ne=this.actionHandler[J.action];if(!ne)throw new Error(`Unknown action from worker: ${J.action}`);if(J.callbackId){const oe=this.sourceName,ce=J.sourceName,ue=this.comObj;Promise.try(ne,J.data).then(function(Ae){ue.postMessage({sourceName:oe,targetName:ce,callback:CallbackKind.DATA,callbackId:J.callbackId,data:Ae})},function(Ae){ue.postMessage({sourceName:oe,targetName:ce,callback:CallbackKind.ERROR,callbackId:J.callbackId,reason:wrapReason(Ae)})});return}if(J.streamId){bt(this,Ws,fm).call(this,J);return}ne(J.data)},fm=function(J){const ne=J.streamId,oe=this.sourceName,ce=J.sourceName,ue=this.comObj,Ae=this,pe=this.actionHandler[J.action],ve={enqueue(me,ge=1,ye){if(this.isCancelled)return;const xe=this.desiredSize;this.desiredSize-=ge,xe>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.ENQUEUE,streamId:ne,chunk:me},ye)},close(){this.isCancelled||(this.isCancelled=!0,ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.CLOSE,streamId:ne}),delete Ae.streamSinks[ne])},error(me){assert(me instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.ERROR,streamId:ne,reason:wrapReason(me)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:J.desiredSize,ready:null};ve.sinkCapability.resolve(),ve.ready=ve.sinkCapability.promise,this.streamSinks[ne]=ve,Promise.try(pe,J.data,ve).then(function(){ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.START_COMPLETE,streamId:ne,success:!0})},function(me){ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.START_COMPLETE,streamId:ne,reason:wrapReason(me)})})},dm=function(J){const ne=J.streamId,oe=this.sourceName,ce=J.sourceName,ue=this.comObj,Ae=this.streamControllers[ne],pe=this.streamSinks[ne];switch(J.stream){case StreamKind.START_COMPLETE:J.success?Ae.startCall.resolve():Ae.startCall.reject(wrapReason(J.reason));break;case StreamKind.PULL_COMPLETE:J.success?Ae.pullCall.resolve():Ae.pullCall.reject(wrapReason(J.reason));break;case StreamKind.PULL:if(!pe){ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.PULL_COMPLETE,streamId:ne,success:!0});break}pe.desiredSize<=0&&J.desiredSize>0&&pe.sinkCapability.resolve(),pe.desiredSize=J.desiredSize,Promise.try(pe.onPull||onFn).then(function(){ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.PULL_COMPLETE,streamId:ne,success:!0})},function(me){ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.PULL_COMPLETE,streamId:ne,reason:wrapReason(me)})});break;case StreamKind.ENQUEUE:if(assert(Ae,"enqueue should have stream controller"),Ae.isClosed)break;Ae.controller.enqueue(J.chunk);break;case StreamKind.CLOSE:if(assert(Ae,"close should have stream controller"),Ae.isClosed)break;Ae.isClosed=!0,Ae.controller.close(),bt(this,Ws,yA).call(this,Ae,ne);break;case StreamKind.ERROR:assert(Ae,"error should have stream controller"),Ae.controller.error(wrapReason(J.reason)),bt(this,Ws,yA).call(this,Ae,ne);break;case StreamKind.CANCEL_COMPLETE:J.success?Ae.cancelCall.resolve():Ae.cancelCall.reject(wrapReason(J.reason)),bt(this,Ws,yA).call(this,Ae,ne);break;case StreamKind.CANCEL:if(!pe)break;const ve=wrapReason(J.reason);Promise.try(pe.onCancel||onFn,ve).then(function(){ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.CANCEL_COMPLETE,streamId:ne,success:!0})},function(me){ue.postMessage({sourceName:oe,targetName:ce,stream:StreamKind.CANCEL_COMPLETE,streamId:ne,reason:wrapReason(me)})}),pe.sinkCapability.reject(ve),pe.isCancelled=!0,delete this.streamSinks[ne];break;default:throw new Error("Unexpected stream case")}},yA=async function(J,ne){var oe,ce,ue;await Promise.allSettled([(oe=J.startCall)==null?void 0:oe.promise,(ce=J.pullCall)==null?void 0:ce.promise,(ue=J.cancelCall)==null?void 0:ue.promise]),delete this.streamControllers[ne]};var jd;class BaseCanvasFactory{constructor({enableHWA:J=!1}){yt(this,jd,!1);ht(this,jd,J)}create(J,ne){if(J<=0||ne<=0)throw new Error("Invalid canvas size");const oe=this._createCanvas(J,ne);return{canvas:oe,context:oe.getContext("2d",{willReadFrequently:!Ze(this,jd)})}}reset(J,ne,oe){if(!J.canvas)throw new Error("Canvas is not specified");if(ne<=0||oe<=0)throw new Error("Invalid canvas size");J.canvas.width=ne,J.canvas.height=oe}destroy(J){if(!J.canvas)throw new Error("Canvas is not specified");J.canvas.width=0,J.canvas.height=0,J.canvas=null,J.context=null}_createCanvas(J,ne){unreachable$1("Abstract method `_createCanvas` called.")}}jd=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document,enableHWA:ne=!1}){super({enableHWA:ne}),this._document=J}_createCanvas(J,ne){const oe=this._document.createElement("canvas");return oe.width=J,oe.height=ne,oe}}class BaseCMapReaderFactory{constructor({baseUrl:J=null,isCompressed:ne=!0}){this.baseUrl=J,this.isCompressed=ne}async fetch({name:J}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!J)throw new Error("CMap name must be specified.");const ne=this.baseUrl+J+(this.isCompressed?".bcmap":"");return this._fetch(ne).then(oe=>({cMapData:oe,isCompressed:this.isCompressed})).catch(oe=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${ne}`)})}async _fetch(J){unreachable$1("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(J){const ne=await fetchData(J,this.isCompressed?"arraybuffer":"text");return ne instanceof ArrayBuffer?new Uint8Array(ne):stringToBytes(ne)}}class BaseFilterFactory{addFilter(J){return"none"}addHCMFilter(J,ne){return"none"}addAlphaFilter(J){return"none"}addLuminosityFilter(J){return"none"}addHighlightHCMFilter(J,ne,oe,ce,ue){return"none"}destroy(J=!1){}}var sc,Du,no,io,Gi,ac,oc,Pr,Qi,Zf,nu,xA,iu,hm,$0,su,Jf,ed,M0,td;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:ne,ownerDocument:oe=globalThis.document}){super();yt(this,Pr);yt(this,sc);yt(this,Du);yt(this,no);yt(this,io);yt(this,Gi);yt(this,ac);yt(this,oc,0);ht(this,io,ne),ht(this,Gi,oe)}addFilter(ne){if(!ne)return"none";let oe=Ze(this,Pr,Qi).get(ne);if(oe)return oe;const[ce,ue,Ae]=bt(this,Pr,xA).call(this,ne),pe=ne.length===1?ce:`${ce}${ue}${Ae}`;if(oe=Ze(this,Pr,Qi).get(pe),oe)return Ze(this,Pr,Qi).set(ne,oe),oe;const ve=`g_${Ze(this,io)}_transfer_map_${wi(this,oc)._++}`,me=bt(this,Pr,iu).call(this,ve);Ze(this,Pr,Qi).set(ne,me),Ze(this,Pr,Qi).set(pe,me);const ge=bt(this,Pr,su).call(this,ve);return bt(this,Pr,ed).call(this,ce,ue,Ae,ge),me}addHCMFilter(ne,oe){var $e;const ce=`${ne}-${oe}`,ue="base";let Ae=Ze(this,Pr,Zf).get(ue);if((Ae==null?void 0:Ae.key)===ce||(Ae?(($e=Ae.filter)==null||$e.remove(),Ae.key=ce,Ae.url="none",Ae.filter=null):(Ae={key:ce,url:"none",filter:null},Ze(this,Pr,Zf).set(ue,Ae)),!ne||!oe))return Ae.url;const pe=bt(this,Pr,td).call(this,ne);ne=Util.makeHexColor(...pe);const ve=bt(this,Pr,td).call(this,oe);if(oe=Util.makeHexColor(...ve),Ze(this,Pr,nu).style.color="",ne==="#000000"&&oe==="#ffffff"||ne===oe)return Ae.url;const me=new Array(256);for(let Ie=0;Ie<=255;Ie++){const Fe=Ie/255;me[Ie]=Fe<=.03928?Fe/12.92:((Fe+.055)/1.055)**2.4}const ge=me.join(","),ye=`g_${Ze(this,io)}_hcm_filter`,xe=Ae.filter=bt(this,Pr,su).call(this,ye);bt(this,Pr,ed).call(this,ge,ge,ge,xe),bt(this,Pr,$0).call(this,xe);const _e=(Ie,Fe)=>{const ke=pe[Ie]/255,je=ve[Ie]/255,We=new Array(Fe+1);for(let ze=0;ze<=Fe;ze++)We[ze]=ke+ze/Fe*(je-ke);return We.join(",")};return bt(this,Pr,ed).call(this,_e(0,5),_e(1,5),_e(2,5),xe),Ae.url=bt(this,Pr,iu).call(this,ye),Ae.url}addAlphaFilter(ne){let oe=Ze(this,Pr,Qi).get(ne);if(oe)return oe;const[ce]=bt(this,Pr,xA).call(this,[ne]),ue=`alpha_${ce}`;if(oe=Ze(this,Pr,Qi).get(ue),oe)return Ze(this,Pr,Qi).set(ne,oe),oe;const Ae=`g_${Ze(this,io)}_alpha_map_${wi(this,oc)._++}`,pe=bt(this,Pr,iu).call(this,Ae);Ze(this,Pr,Qi).set(ne,pe),Ze(this,Pr,Qi).set(ue,pe);const ve=bt(this,Pr,su).call(this,Ae);return bt(this,Pr,M0).call(this,ce,ve),pe}addLuminosityFilter(ne){let oe=Ze(this,Pr,Qi).get(ne||"luminosity");if(oe)return oe;let ce,ue;if(ne?([ce]=bt(this,Pr,xA).call(this,[ne]),ue=`luminosity_${ce}`):ue="luminosity",oe=Ze(this,Pr,Qi).get(ue),oe)return Ze(this,Pr,Qi).set(ne,oe),oe;const Ae=`g_${Ze(this,io)}_luminosity_map_${wi(this,oc)._++}`,pe=bt(this,Pr,iu).call(this,Ae);Ze(this,Pr,Qi).set(ne,pe),Ze(this,Pr,Qi).set(ue,pe);const ve=bt(this,Pr,su).call(this,Ae);return bt(this,Pr,hm).call(this,ve),ne&&bt(this,Pr,M0).call(this,ce,ve),pe}addHighlightHCMFilter(ne,oe,ce,ue,Ae){var je;const pe=`${oe}-${ce}-${ue}-${Ae}`;let ve=Ze(this,Pr,Zf).get(ne);if((ve==null?void 0:ve.key)===pe||(ve?((je=ve.filter)==null||je.remove(),ve.key=pe,ve.url="none",ve.filter=null):(ve={key:pe,url:"none",filter:null},Ze(this,Pr,Zf).set(ne,ve)),!oe||!ce))return ve.url;const[me,ge]=[oe,ce].map(bt(this,Pr,td).bind(this));let ye=Math.round(.2126*me[0]+.7152*me[1]+.0722*me[2]),xe=Math.round(.2126*ge[0]+.7152*ge[1]+.0722*ge[2]),[_e,$e]=[ue,Ae].map(bt(this,Pr,td).bind(this));xe<ye&&([ye,xe,_e,$e]=[xe,ye,$e,_e]),Ze(this,Pr,nu).style.color="";const Ie=(We,ze,Xe)=>{const Je=new Array(256),nt=(xe-ye)/Xe,et=We/255,tt=(ze-We)/(255*Xe);let st=0;for(let qe=0;qe<=Xe;qe++){const Se=Math.round(ye+qe*nt),Re=et+qe*tt;for(let Be=st;Be<=Se;Be++)Je[Be]=Re;st=Se+1}for(let qe=st;qe<256;qe++)Je[qe]=Je[st-1];return Je.join(",")},Fe=`g_${Ze(this,io)}_hcm_${ne}_filter`,ke=ve.filter=bt(this,Pr,su).call(this,Fe);return bt(this,Pr,$0).call(this,ke),bt(this,Pr,ed).call(this,Ie(_e[0],$e[0],5),Ie(_e[1],$e[1],5),Ie(_e[2],$e[2],5),ke),ve.url=bt(this,Pr,iu).call(this,Fe),ve.url}destroy(ne=!1){var oe,ce,ue,Ae;ne&&((oe=Ze(this,ac))!=null&&oe.size)||((ce=Ze(this,no))==null||ce.parentNode.parentNode.remove(),ht(this,no,null),(ue=Ze(this,Du))==null||ue.clear(),ht(this,Du,null),(Ae=Ze(this,ac))==null||Ae.clear(),ht(this,ac,null),ht(this,oc,0))}}sc=new WeakMap,Du=new WeakMap,no=new WeakMap,io=new WeakMap,Gi=new WeakMap,ac=new WeakMap,oc=new WeakMap,Pr=new WeakSet,Qi=function(){return Ze(this,Du)||ht(this,Du,new Map)},Zf=function(){return Ze(this,ac)||ht(this,ac,new Map)},nu=function(){if(!Ze(this,no)){const ne=Ze(this,Gi).createElement("div"),{style:oe}=ne;oe.visibility="hidden",oe.contain="strict",oe.width=oe.height=0,oe.position="absolute",oe.top=oe.left=0,oe.zIndex=-1;const ce=Ze(this,Gi).createElementNS(SVG_NS,"svg");ce.setAttribute("width",0),ce.setAttribute("height",0),ht(this,no,Ze(this,Gi).createElementNS(SVG_NS,"defs")),ne.append(ce),ce.append(Ze(this,no)),Ze(this,Gi).body.append(ne)}return Ze(this,no)},xA=function(ne){if(ne.length===1){const me=ne[0],ge=new Array(256);for(let xe=0;xe<256;xe++)ge[xe]=me[xe]/255;const ye=ge.join(",");return[ye,ye,ye]}const[oe,ce,ue]=ne,Ae=new Array(256),pe=new Array(256),ve=new Array(256);for(let me=0;me<256;me++)Ae[me]=oe[me]/255,pe[me]=ce[me]/255,ve[me]=ue[me]/255;return[Ae.join(","),pe.join(","),ve.join(",")]},iu=function(ne){if(Ze(this,sc)===void 0){ht(this,sc,"");const oe=Ze(this,Gi).URL;oe!==Ze(this,Gi).baseURI&&(isDataScheme(oe)?warn$2('#createUrl: ignore "data:"-URL for performance reasons.'):ht(this,sc,updateUrlHash(oe,"")))}return`url(${Ze(this,sc)}#${ne})`},hm=function(ne){const oe=Ze(this,Gi).createElementNS(SVG_NS,"feColorMatrix");oe.setAttribute("type","matrix"),oe.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),ne.append(oe)},$0=function(ne){const oe=Ze(this,Gi).createElementNS(SVG_NS,"feColorMatrix");oe.setAttribute("type","matrix"),oe.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),ne.append(oe)},su=function(ne){const oe=Ze(this,Gi).createElementNS(SVG_NS,"filter");return oe.setAttribute("color-interpolation-filters","sRGB"),oe.setAttribute("id",ne),Ze(this,Pr,nu).append(oe),oe},Jf=function(ne,oe,ce){const ue=Ze(this,Gi).createElementNS(SVG_NS,oe);ue.setAttribute("type","discrete"),ue.setAttribute("tableValues",ce),ne.append(ue)},ed=function(ne,oe,ce,ue){const Ae=Ze(this,Gi).createElementNS(SVG_NS,"feComponentTransfer");ue.append(Ae),bt(this,Pr,Jf).call(this,Ae,"feFuncR",ne),bt(this,Pr,Jf).call(this,Ae,"feFuncG",oe),bt(this,Pr,Jf).call(this,Ae,"feFuncB",ce)},M0=function(ne,oe){const ce=Ze(this,Gi).createElementNS(SVG_NS,"feComponentTransfer");oe.append(ce),bt(this,Pr,Jf).call(this,ce,"feFuncA",ne)},td=function(ne){return Ze(this,Pr,nu).style.color=ne,getRGB(getComputedStyle(Ze(this,Pr,nu)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:J=null}){this.baseUrl=J}async fetch({filename:J}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!J)throw new Error("Font filename must be specified.");const ne=`${this.baseUrl}${J}`;return this._fetch(ne).catch(oe=>{throw new Error(`Unable to load font data at: ${ne}`)})}async _fetch(J){unreachable$1("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(J){const ne=await fetchData(J,"arraybuffer");return new Uint8Array(ne)}}class BaseWasmFactory{constructor({baseUrl:J=null}){this.baseUrl=J}async fetch({filename:J}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!J)throw new Error("Wasm filename must be specified.");const ne=`${this.baseUrl}${J}`;return this._fetch(ne).catch(oe=>{throw new Error(`Unable to load wasm data at: ${ne}`)})}async _fetch(J){unreachable$1("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(J){const ne=await fetchData(J,"arraybuffer");return new Uint8Array(ne)}}isNodeJS&&warn$2("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(K){const ne=await process$1.getBuiltinModule("fs").promises.readFile(K);return new Uint8Array(ne)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(J,ne){return process$1.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(J,ne)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(J){return node_utils_fetchData(J)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(J){return node_utils_fetchData(J)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(J){return node_utils_fetchData(J)}}const FORCED_DEPENDENCY_LABEL="__forcedDependency",{floor,ceil}=Math;function expandBBox(K,J,ne,oe,ce,ue){K[J*4+0]=Math.min(K[J*4+0],ne),K[J*4+1]=Math.min(K[J*4+1],oe),K[J*4+2]=Math.max(K[J*4+2],ce),K[J*4+3]=Math.max(K[J*4+3],ue)}const EMPTY_BBOX=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Ou,Zo;class BBoxReader{constructor(J,ne){yt(this,Ou);yt(this,Zo);ht(this,Ou,J),ht(this,Zo,ne)}get length(){return Ze(this,Ou).length}isEmpty(J){return Ze(this,Ou)[J]===EMPTY_BBOX}minX(J){return Ze(this,Zo)[J*4+0]/256}minY(J){return Ze(this,Zo)[J*4+1]/256}maxX(J){return(Ze(this,Zo)[J*4+2]+1)/256}maxY(J){return(Ze(this,Zo)[J*4+3]+1)/256}}Ou=new WeakMap,Zo=new WeakMap;const ensureDebugMetadata=(K,J)=>{if(!K)return;let ne=K.get(J);return ne||(ne={dependencies:new Set,isRenderingOperation:!1},K.set(J,ne)),ne};var cs,us,lc,na,uc,so,Gn,Yn,ao,fs,Vd,Lu,fc,dc,oo,zi,Ta,Qd,N0;class CanvasDependencyTracker{constructor(J,ne,oe=!1){yt(this,Qd);yt(this,cs,{__proto__:null});yt(this,us,{__proto__:null,transform:[],moveText:[],sameLineText:[],[FORCED_DEPENDENCY_LABEL]:[]});yt(this,lc,new Map);yt(this,na,[]);yt(this,uc,[]);yt(this,so,[[1,0,0,1,0,0]]);yt(this,Gn,[-1/0,-1/0,1/0,1/0]);yt(this,Yn,new Float64Array([1/0,1/0,-1/0,-1/0]));yt(this,ao,-1);yt(this,fs,new Set);yt(this,Vd,new Map);yt(this,Lu,new Map);yt(this,fc);yt(this,dc);yt(this,oo);yt(this,zi);yt(this,Ta);ht(this,fc,J.width),ht(this,dc,J.height),bt(this,Qd,N0).call(this,ne),oe&&ht(this,Ta,new Map)}growOperationsCount(J){J>=Ze(this,zi).length&&bt(this,Qd,N0).call(this,J,Ze(this,zi))}save(J){return ht(this,cs,{__proto__:Ze(this,cs)}),ht(this,us,{__proto__:Ze(this,us),transform:{__proto__:Ze(this,us).transform},moveText:{__proto__:Ze(this,us).moveText},sameLineText:{__proto__:Ze(this,us).sameLineText},[FORCED_DEPENDENCY_LABEL]:{__proto__:Ze(this,us)[FORCED_DEPENDENCY_LABEL]}}),ht(this,Gn,{__proto__:Ze(this,Gn)}),Ze(this,na).push(J),this}restore(J){var ce;const ne=Object.getPrototypeOf(Ze(this,cs));if(ne===null)return this;ht(this,cs,ne),ht(this,us,Object.getPrototypeOf(Ze(this,us))),ht(this,Gn,Object.getPrototypeOf(Ze(this,Gn)));const oe=Ze(this,na).pop();return oe!==void 0&&((ce=ensureDebugMetadata(Ze(this,Ta),J))==null||ce.dependencies.add(oe),Ze(this,zi)[J]=Ze(this,zi)[oe]),this}recordOpenMarker(J){return Ze(this,na).push(J),this}getOpenMarker(){return Ze(this,na).length===0?null:Ze(this,na).at(-1)}recordCloseMarker(J){var oe;const ne=Ze(this,na).pop();return ne!==void 0&&((oe=ensureDebugMetadata(Ze(this,Ta),J))==null||oe.dependencies.add(ne),Ze(this,zi)[J]=Ze(this,zi)[ne]),this}beginMarkedContent(J){return Ze(this,uc).push(J),this}endMarkedContent(J){var oe;const ne=Ze(this,uc).pop();return ne!==void 0&&((oe=ensureDebugMetadata(Ze(this,Ta),J))==null||oe.dependencies.add(ne),Ze(this,zi)[J]=Ze(this,zi)[ne]),this}pushBaseTransform(J){return Ze(this,so).push(Util.multiplyByDOMMatrix(Ze(this,so).at(-1),J.getTransform())),this}popBaseTransform(){return Ze(this,so).length>1&&Ze(this,so).pop(),this}recordSimpleData(J,ne){return Ze(this,cs)[J]=ne,this}recordIncrementalData(J,ne){return Ze(this,us)[J].push(ne),this}resetIncrementalData(J,ne){return Ze(this,us)[J].length=0,this}recordNamedData(J,ne){return Ze(this,lc).set(J,ne),this}recordSimpleDataFromNamed(J,ne,oe){Ze(this,cs)[J]=Ze(this,lc).get(ne)??oe}recordFutureForcedDependency(J,ne){return this.recordIncrementalData(FORCED_DEPENDENCY_LABEL,ne),this}inheritSimpleDataAsFutureForcedDependencies(J){for(const ne of J)ne in Ze(this,cs)&&this.recordFutureForcedDependency(ne,Ze(this,cs)[ne]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const J of Ze(this,fs))this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL,J);return this}resetBBox(J){return Ze(this,ao)!==J&&(ht(this,ao,J),Ze(this,Yn)[0]=1/0,Ze(this,Yn)[1]=1/0,Ze(this,Yn)[2]=-1/0,Ze(this,Yn)[3]=-1/0),this}recordClipBox(J,ne,oe,ce,ue,Ae){const pe=Util.multiplyByDOMMatrix(Ze(this,so).at(-1),ne.getTransform()),ve=[1/0,1/0,-1/0,-1/0];Util.axialAlignedBoundingBox([oe,ue,ce,Ae],pe,ve);const me=Util.intersect(Ze(this,Gn),ve);return me?(Ze(this,Gn)[0]=me[0],Ze(this,Gn)[1]=me[1],Ze(this,Gn)[2]=me[2],Ze(this,Gn)[3]=me[3]):(Ze(this,Gn)[0]=Ze(this,Gn)[1]=1/0,Ze(this,Gn)[2]=Ze(this,Gn)[3]=-1/0),this}recordBBox(J,ne,oe,ce,ue,Ae){const pe=Ze(this,Gn);if(pe[0]===1/0)return this;const ve=Util.multiplyByDOMMatrix(Ze(this,so).at(-1),ne.getTransform());if(pe[0]===-1/0)return Util.axialAlignedBoundingBox([oe,ue,ce,Ae],ve,Ze(this,Yn)),this;const me=[1/0,1/0,-1/0,-1/0];return Util.axialAlignedBoundingBox([oe,ue,ce,Ae],ve,me),Ze(this,Yn)[0]=Math.min(Ze(this,Yn)[0],Math.max(me[0],pe[0])),Ze(this,Yn)[1]=Math.min(Ze(this,Yn)[1],Math.max(me[1],pe[1])),Ze(this,Yn)[2]=Math.max(Ze(this,Yn)[2],Math.min(me[2],pe[2])),Ze(this,Yn)[3]=Math.max(Ze(this,Yn)[3],Math.min(me[3],pe[3])),this}recordCharacterBBox(J,ne,oe,ce=1,ue=0,Ae=0,pe){const ve=oe.bbox;let me,ge;if(ve&&(me=ve[2]!==ve[0]&&ve[3]!==ve[1]&&Ze(this,Lu).get(oe),me!==!1&&(ge=[0,0,0,0],Util.axialAlignedBoundingBox(ve,oe.fontMatrix,ge),(ce!==1||ue!==0||Ae!==0)&&Util.scaleMinMax([ce,0,0,-ce,ue,Ae],ge),me)))return this.recordBBox(J,ne,ge[0],ge[2],ge[1],ge[3]);if(!pe)return this.recordFullPageBBox(J);const ye=pe();return ve&&ge&&me===void 0&&(me=ge[0]<=ue-ye.actualBoundingBoxLeft&&ge[2]>=ue+ye.actualBoundingBoxRight&&ge[1]<=Ae-ye.actualBoundingBoxAscent&&ge[3]>=Ae+ye.actualBoundingBoxDescent,Ze(this,Lu).set(oe,me),me)?this.recordBBox(J,ne,ge[0],ge[2],ge[1],ge[3]):this.recordBBox(J,ne,ue-ye.actualBoundingBoxLeft,ue+ye.actualBoundingBoxRight,Ae-ye.actualBoundingBoxAscent,Ae+ye.actualBoundingBoxDescent)}recordFullPageBBox(J){return Ze(this,Yn)[0]=Math.max(0,Ze(this,Gn)[0]),Ze(this,Yn)[1]=Math.max(0,Ze(this,Gn)[1]),Ze(this,Yn)[2]=Math.min(Ze(this,fc),Ze(this,Gn)[2]),Ze(this,Yn)[3]=Math.min(Ze(this,dc),Ze(this,Gn)[3]),this}getSimpleIndex(J){return Ze(this,cs)[J]}recordDependencies(J,ne){const oe=Ze(this,fs),ce=Ze(this,cs),ue=Ze(this,us);for(const Ae of ne)Ae in Ze(this,cs)?oe.add(ce[Ae]):Ae in ue&&ue[Ae].forEach(oe.add,oe);return this}recordNamedDependency(J,ne){return Ze(this,lc).has(ne)&&Ze(this,fs).add(Ze(this,lc).get(ne)),this}recordOperation(J,ne=!1){if(this.recordDependencies(J,[FORCED_DEPENDENCY_LABEL]),Ze(this,Ta)){const oe=ensureDebugMetadata(Ze(this,Ta),J),{dependencies:ce}=oe;Ze(this,fs).forEach(ce.add,ce),Ze(this,na).forEach(ce.add,ce),Ze(this,uc).forEach(ce.add,ce),ce.delete(J),oe.isRenderingOperation=!0}if(Ze(this,ao)===J){const oe=floor(Ze(this,Yn)[0]*256/Ze(this,fc)),ce=floor(Ze(this,Yn)[1]*256/Ze(this,dc)),ue=ceil(Ze(this,Yn)[2]*256/Ze(this,fc)),Ae=ceil(Ze(this,Yn)[3]*256/Ze(this,dc));expandBBox(Ze(this,oo),J,oe,ce,ue,Ae);for(const pe of Ze(this,fs))pe!==J&&expandBBox(Ze(this,oo),pe,oe,ce,ue,Ae);for(const pe of Ze(this,na))pe!==J&&expandBBox(Ze(this,oo),pe,oe,ce,ue,Ae);for(const pe of Ze(this,uc))pe!==J&&expandBBox(Ze(this,oo),pe,oe,ce,ue,Ae);ne||(Ze(this,fs).clear(),ht(this,ao,-1))}return this}recordShowTextOperation(J,ne=!1){const oe=Array.from(Ze(this,fs));this.recordOperation(J,ne),this.recordIncrementalData("sameLineText",J);for(const ce of oe)this.recordIncrementalData("sameLineText",ce);return this}bboxToClipBoxDropOperation(J,ne=!1){return Ze(this,ao)===J&&(ht(this,ao,-1),Ze(this,Gn)[0]=Math.max(Ze(this,Gn)[0],Ze(this,Yn)[0]),Ze(this,Gn)[1]=Math.max(Ze(this,Gn)[1],Ze(this,Yn)[1]),Ze(this,Gn)[2]=Math.min(Ze(this,Gn)[2],Ze(this,Yn)[2]),Ze(this,Gn)[3]=Math.min(Ze(this,Gn)[3],Ze(this,Yn)[3]),ne||Ze(this,fs).clear()),this}_takePendingDependencies(){const J=Ze(this,fs);return ht(this,fs,new Set),J}_extractOperation(J){const ne=Ze(this,Vd).get(J);return Ze(this,Vd).delete(J),ne}_pushPendingDependencies(J){for(const ne of J)Ze(this,fs).add(ne)}take(){return Ze(this,Lu).clear(),new BBoxReader(Ze(this,zi),Ze(this,oo))}takeDebugMetadata(){return Ze(this,Ta)}}cs=new WeakMap,us=new WeakMap,lc=new WeakMap,na=new WeakMap,uc=new WeakMap,so=new WeakMap,Gn=new WeakMap,Yn=new WeakMap,ao=new WeakMap,fs=new WeakMap,Vd=new WeakMap,Lu=new WeakMap,fc=new WeakMap,dc=new WeakMap,oo=new WeakMap,zi=new WeakMap,Ta=new WeakMap,Qd=new WeakSet,N0=function(J,ne){const oe=new ArrayBuffer(J*4);ht(this,oo,new Uint8ClampedArray(oe)),ht(this,zi,new Uint32Array(oe)),ne&&ne.length>0?(Ze(this,zi).set(ne),Ze(this,zi).fill(EMPTY_BBOX,ne.length)):Ze(this,zi).fill(EMPTY_BBOX)};var ti,hi,ia,Fu,ku;const Eg=class Eg{constructor(J,ne,oe){yt(this,ti);yt(this,hi);yt(this,ia);yt(this,Fu,0);yt(this,ku,0);if(J instanceof Eg&&Ze(J,ia)===!!oe)return J;ht(this,ti,J),ht(this,hi,ne),ht(this,ia,!!oe)}growOperationsCount(){throw new Error("Unreachable")}save(J){return wi(this,ku)._++,Ze(this,ti).save(Ze(this,hi)),this}restore(J){return Ze(this,ku)>0&&(Ze(this,ti).restore(Ze(this,hi)),wi(this,ku)._--),this}recordOpenMarker(J){return wi(this,Fu)._++,this}getOpenMarker(){return Ze(this,Fu)>0?Ze(this,hi):Ze(this,ti).getOpenMarker()}recordCloseMarker(J){return wi(this,Fu)._--,this}beginMarkedContent(J){return this}endMarkedContent(J){return this}pushBaseTransform(J){return Ze(this,ti).pushBaseTransform(J),this}popBaseTransform(){return Ze(this,ti).popBaseTransform(),this}recordSimpleData(J,ne){return Ze(this,ti).recordSimpleData(J,Ze(this,hi)),this}recordIncrementalData(J,ne){return Ze(this,ti).recordIncrementalData(J,Ze(this,hi)),this}resetIncrementalData(J,ne){return Ze(this,ti).resetIncrementalData(J,Ze(this,hi)),this}recordNamedData(J,ne){return this}recordSimpleDataFromNamed(J,ne,oe){return Ze(this,ti).recordSimpleDataFromNamed(J,ne,Ze(this,hi)),this}recordFutureForcedDependency(J,ne){return Ze(this,ti).recordFutureForcedDependency(J,Ze(this,hi)),this}inheritSimpleDataAsFutureForcedDependencies(J){return Ze(this,ti).inheritSimpleDataAsFutureForcedDependencies(J),this}inheritPendingDependenciesAsFutureForcedDependencies(){return Ze(this,ti).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(J){return Ze(this,ia)||Ze(this,ti).resetBBox(Ze(this,hi)),this}recordClipBox(J,ne,oe,ce,ue,Ae){return Ze(this,ia)||Ze(this,ti).recordClipBox(Ze(this,hi),ne,oe,ce,ue,Ae),this}recordBBox(J,ne,oe,ce,ue,Ae){return Ze(this,ia)||Ze(this,ti).recordBBox(Ze(this,hi),ne,oe,ce,ue,Ae),this}recordCharacterBBox(J,ne,oe,ce,ue,Ae,pe){return Ze(this,ia)||Ze(this,ti).recordCharacterBBox(Ze(this,hi),ne,oe,ce,ue,Ae,pe),this}recordFullPageBBox(J){return Ze(this,ia)||Ze(this,ti).recordFullPageBBox(Ze(this,hi)),this}getSimpleIndex(J){return Ze(this,ti).getSimpleIndex(J)}recordDependencies(J,ne){return Ze(this,ti).recordDependencies(Ze(this,hi),ne),this}recordNamedDependency(J,ne){return Ze(this,ti).recordNamedDependency(Ze(this,hi),ne),this}recordOperation(J){return Ze(this,ti).recordOperation(Ze(this,hi),!0),this}recordShowTextOperation(J){return Ze(this,ti).recordShowTextOperation(Ze(this,hi),!0),this}bboxToClipBoxDropOperation(J){return Ze(this,ia)||Ze(this,ti).bboxToClipBoxDropOperation(Ze(this,hi),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};ti=new WeakMap,hi=new WeakMap,ia=new WeakMap,Fu=new WeakMap,ku=new WeakMap;let CanvasNestedDependencyTracker=Eg;const Dependencies={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(K,J){if(!J)return;const ne=J[2]-J[0],oe=J[3]-J[1],ce=new Path2D;ce.rect(J[0],J[1],ne,oe),K.clip(ce)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable$1("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(J){super(),this._type=J[1],this._bbox=J[2],this._colorStops=J[3],this._p0=J[4],this._p1=J[5],this._r0=J[6],this._r1=J[7],this.matrix=null}_createGradient(J){let ne;this._type==="axial"?ne=J.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(ne=J.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const oe of this._colorStops)ne.addColorStop(oe[0],oe[1]);return ne}getPattern(J,ne,oe,ce){let ue;if(ce===PathType.STROKE||ce===PathType.FILL){const Ae=ne.current.getClippedPathBoundingBox(ce,getCurrentTransform(J))||[0,0,0,0],pe=Math.ceil(Ae[2]-Ae[0])||1,ve=Math.ceil(Ae[3]-Ae[1])||1,me=ne.cachedCanvases.getCanvas("pattern",pe,ve),ge=me.context;ge.clearRect(0,0,ge.canvas.width,ge.canvas.height),ge.beginPath(),ge.rect(0,0,ge.canvas.width,ge.canvas.height),ge.translate(-Ae[0],-Ae[1]),oe=Util.transform(oe,[1,0,0,1,Ae[0],Ae[1]]),ge.transform(...ne.baseTransform),this.matrix&&ge.transform(...this.matrix),applyBoundingBox(ge,this._bbox),ge.fillStyle=this._createGradient(ge),ge.fill(),ue=J.createPattern(me.canvas,"no-repeat");const ye=new DOMMatrix(oe);ue.setTransform(ye)}else applyBoundingBox(J,this._bbox),ue=this._createGradient(J);return ue}}function drawTriangle(K,J,ne,oe,ce,ue,Ae,pe){const ve=J.coords,me=J.colors,ge=K.data,ye=K.width*4;let xe;ve[ne+1]>ve[oe+1]&&(xe=ne,ne=oe,oe=xe,xe=ue,ue=Ae,Ae=xe),ve[oe+1]>ve[ce+1]&&(xe=oe,oe=ce,ce=xe,xe=Ae,Ae=pe,pe=xe),ve[ne+1]>ve[oe+1]&&(xe=ne,ne=oe,oe=xe,xe=ue,ue=Ae,Ae=xe);const _e=(ve[ne]+J.offsetX)*J.scaleX,$e=(ve[ne+1]+J.offsetY)*J.scaleY,Ie=(ve[oe]+J.offsetX)*J.scaleX,Fe=(ve[oe+1]+J.offsetY)*J.scaleY,ke=(ve[ce]+J.offsetX)*J.scaleX,je=(ve[ce+1]+J.offsetY)*J.scaleY;if($e>=je)return;const We=me[ue],ze=me[ue+1],Xe=me[ue+2],Je=me[Ae],nt=me[Ae+1],et=me[Ae+2],tt=me[pe],st=me[pe+1],qe=me[pe+2],Se=Math.round($e),Re=Math.round(je);let Be,Ne,Ue,Ge,Ye,Qe,Te,Ke;for(let rt=Se;rt<=Re;rt++){if(rt<Fe){const ot=rt<$e?0:($e-rt)/($e-Fe);Be=_e-(_e-Ie)*ot,Ne=We-(We-Je)*ot,Ue=ze-(ze-nt)*ot,Ge=Xe-(Xe-et)*ot}else{let ot;rt>je?ot=1:Fe===je?ot=0:ot=(Fe-rt)/(Fe-je),Be=Ie-(Ie-ke)*ot,Ne=Je-(Je-tt)*ot,Ue=nt-(nt-st)*ot,Ge=et-(et-qe)*ot}let it;rt<$e?it=0:rt>je?it=1:it=($e-rt)/($e-je),Ye=_e-(_e-ke)*it,Qe=We-(We-tt)*it,Te=ze-(ze-st)*it,Ke=Xe-(Xe-qe)*it;const at=Math.round(Math.min(Be,Ye)),lt=Math.round(Math.max(Be,Ye));let ct=ye*rt+at*4;for(let ot=at;ot<=lt;ot++)it=(Be-ot)/(Be-Ye),it<0?it=0:it>1&&(it=1),ge[ct++]=Ne-(Ne-Qe)*it|0,ge[ct++]=Ue-(Ue-Te)*it|0,ge[ct++]=Ge-(Ge-Ke)*it|0,ge[ct++]=255}}function drawFigure(K,J,ne){const oe=J.coords,ce=J.colors;let ue,Ae;switch(J.type){case"lattice":const pe=J.verticesPerRow,ve=Math.floor(oe.length/pe)-1,me=pe-1;for(ue=0;ue<ve;ue++){let ge=ue*pe;for(let ye=0;ye<me;ye++,ge++)drawTriangle(K,ne,oe[ge],oe[ge+1],oe[ge+pe],ce[ge],ce[ge+1],ce[ge+pe]),drawTriangle(K,ne,oe[ge+pe+1],oe[ge+1],oe[ge+pe],ce[ge+pe+1],ce[ge+1],ce[ge+pe])}break;case"triangles":for(ue=0,Ae=oe.length;ue<Ae;ue+=3)drawTriangle(K,ne,oe[ue],oe[ue+1],oe[ue+2],ce[ue],ce[ue+1],ce[ue+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(J){super(),this._coords=J[2],this._colors=J[3],this._figures=J[4],this._bounds=J[5],this._bbox=J[6],this._background=J[7],this.matrix=null}_createMeshCanvas(J,ne,oe){const pe=Math.floor(this._bounds[0]),ve=Math.floor(this._bounds[1]),me=Math.ceil(this._bounds[2])-pe,ge=Math.ceil(this._bounds[3])-ve,ye=Math.min(Math.ceil(Math.abs(me*J[0]*1.1)),3e3),xe=Math.min(Math.ceil(Math.abs(ge*J[1]*1.1)),3e3),_e=me/ye,$e=ge/xe,Ie={coords:this._coords,colors:this._colors,offsetX:-pe,offsetY:-ve,scaleX:1/_e,scaleY:1/$e},Fe=ye+2*2,ke=xe+2*2,je=oe.getCanvas("mesh",Fe,ke),We=je.context,ze=We.createImageData(ye,xe);if(ne){const Je=ze.data;for(let nt=0,et=Je.length;nt<et;nt+=4)Je[nt]=ne[0],Je[nt+1]=ne[1],Je[nt+2]=ne[2],Je[nt+3]=255}for(const Je of this._figures)drawFigure(ze,Je,Ie);return We.putImageData(ze,2,2),{canvas:je.canvas,offsetX:pe-2*_e,offsetY:ve-2*$e,scaleX:_e,scaleY:$e}}isModifyingCurrentTransform(){return!0}getPattern(J,ne,oe,ce){applyBoundingBox(J,this._bbox);const ue=new Float32Array(2);if(ce===PathType.SHADING)Util.singularValueDecompose2dScale(getCurrentTransform(J),ue);else if(this.matrix){Util.singularValueDecompose2dScale(this.matrix,ue);const[pe,ve]=ue;Util.singularValueDecompose2dScale(ne.baseTransform,ue),ue[0]*=pe,ue[1]*=ve}else Util.singularValueDecompose2dScale(ne.baseTransform,ue);const Ae=this._createMeshCanvas(ue,ce===PathType.SHADING?null:this._background,ne.cachedCanvases);return ce!==PathType.SHADING&&(J.setTransform(...ne.baseTransform),this.matrix&&J.transform(...this.matrix)),J.translate(Ae.offsetX,Ae.offsetY),J.scale(Ae.scaleX,Ae.scaleY),J.createPattern(Ae.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(K){switch(K[0]){case"RadialAxial":return new RadialAxialShadingPattern(K);case"Mesh":return new MeshShadingPattern(K);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${K[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},_p=class _p{constructor(J,ne,oe,ce){this.color=J[1],this.operatorList=J[2],this.matrix=J[3],this.bbox=J[4],this.xstep=J[5],this.ystep=J[6],this.paintType=J[7],this.tilingType=J[8],this.ctx=ne,this.canvasGraphicsFactory=oe,this.baseTransform=ce}createPatternCanvas(J,ne){var Qe,Te;const{bbox:oe,operatorList:ce,paintType:ue,tilingType:Ae,color:pe,canvasGraphicsFactory:ve}=this;let{xstep:me,ystep:ge}=this;me=Math.abs(me),ge=Math.abs(ge),info("TilingType: "+Ae);const ye=oe[0],xe=oe[1],_e=oe[2],$e=oe[3],Ie=_e-ye,Fe=$e-xe,ke=new Float32Array(2);Util.singularValueDecompose2dScale(this.matrix,ke);const[je,We]=ke;Util.singularValueDecompose2dScale(this.baseTransform,ke);const ze=je*ke[0],Xe=We*ke[1];let Je=Ie,nt=Fe,et=!1,tt=!1;const st=Math.ceil(me*ze),qe=Math.ceil(ge*Xe),Se=Math.ceil(Ie*ze),Re=Math.ceil(Fe*Xe);st>=Se?Je=me:et=!0,qe>=Re?nt=ge:tt=!0;const Be=this.getSizeAndScale(Je,this.ctx.canvas.width,ze),Ne=this.getSizeAndScale(nt,this.ctx.canvas.height,Xe),Ue=J.cachedCanvases.getCanvas("pattern",Be.size,Ne.size),Ge=Ue.context,Ye=ve.createCanvasGraphics(Ge,ne);if(Ye.groupLevel=J.groupLevel,this.setFillAndStrokeStyleToContext(Ye,ue,pe),Ge.translate(-Be.scale*ye,-Ne.scale*xe),Ye.transform(0,Be.scale,0,0,Ne.scale,0,0),Ge.save(),(Qe=Ye.dependencyTracker)==null||Qe.save(),this.clipBbox(Ye,ye,xe,_e,$e),Ye.baseTransform=getCurrentTransform(Ye.ctx),Ye.executeOperatorList(ce),Ye.endDrawing(),(Te=Ye.dependencyTracker)==null||Te.restore(),Ge.restore(),et||tt){const Ke=Ue.canvas;et&&(Je=me),tt&&(nt=ge);const rt=this.getSizeAndScale(Je,this.ctx.canvas.width,ze),it=this.getSizeAndScale(nt,this.ctx.canvas.height,Xe),at=rt.size,lt=it.size,ct=J.cachedCanvases.getCanvas("pattern-workaround",at,lt),ot=ct.context,ft=et?Math.floor(Ie/me):0,dt=tt?Math.floor(Fe/ge):0;for(let mt=0;mt<=ft;mt++)for(let kt=0;kt<=dt;kt++)ot.drawImage(Ke,at*mt,lt*kt,at,lt,0,0,at,lt);return{canvas:ct.canvas,scaleX:rt.scale,scaleY:it.scale,offsetX:ye,offsetY:xe}}return{canvas:Ue.canvas,scaleX:Be.scale,scaleY:Ne.scale,offsetX:ye,offsetY:xe}}getSizeAndScale(J,ne,oe){const ce=Math.max(_p.MAX_PATTERN_SIZE,ne);let ue=Math.ceil(J*oe);return ue>=ce?ue=ce:oe=ue/J,{scale:oe,size:ue}}clipBbox(J,ne,oe,ce,ue){const Ae=ce-ne,pe=ue-oe;J.ctx.rect(ne,oe,Ae,pe),Util.axialAlignedBoundingBox([ne,oe,ce,ue],getCurrentTransform(J.ctx),J.current.minMax),J.clip(),J.endPath()}setFillAndStrokeStyleToContext(J,ne,oe){const ce=J.ctx,ue=J.current;switch(ne){case PaintType.COLORED:const{fillStyle:Ae,strokeStyle:pe}=this.ctx;ce.fillStyle=ue.fillColor=Ae,ce.strokeStyle=ue.strokeColor=pe;break;case PaintType.UNCOLORED:ce.fillStyle=ce.strokeStyle=oe,ue.fillColor=ue.strokeColor=oe;break;default:throw new FormatError(`Unsupported paint type: ${ne}`)}}isModifyingCurrentTransform(){return!1}getPattern(J,ne,oe,ce,ue){let Ae=oe;ce!==PathType.SHADING&&(Ae=Util.transform(Ae,ne.baseTransform),this.matrix&&(Ae=Util.transform(Ae,this.matrix)));const pe=this.createPatternCanvas(ne,ue);let ve=new DOMMatrix(Ae);ve=ve.translate(pe.offsetX,pe.offsetY),ve=ve.scale(1/pe.scaleX,1/pe.scaleY);const me=J.createPattern(pe.canvas,"repeat");return me.setTransform(ve),me}};wr(_p,"MAX_PATTERN_SIZE",3e3);let TilingPattern=_p;function convertBlackAndWhiteToRGBA({src:K,srcPos:J=0,dest:ne,width:oe,height:ce,nonBlackColor:ue=4294967295,inverseDecode:Ae=!1}){const pe=util_FeatureTest.isLittleEndian?4278190080:255,[ve,me]=Ae?[ue,pe]:[pe,ue],ge=oe>>3,ye=oe&7,xe=K.length;ne=new Uint32Array(ne.buffer);let _e=0;for(let $e=0;$e<ce;$e++){for(const Fe=J+ge;J<Fe;J++){const ke=J<xe?K[J]:255;ne[_e++]=ke&128?me:ve,ne[_e++]=ke&64?me:ve,ne[_e++]=ke&32?me:ve,ne[_e++]=ke&16?me:ve,ne[_e++]=ke&8?me:ve,ne[_e++]=ke&4?me:ve,ne[_e++]=ke&2?me:ve,ne[_e++]=ke&1?me:ve}if(ye===0)continue;const Ie=J<xe?K[J++]:255;for(let Fe=0;Fe<ye;Fe++)ne[_e++]=Ie&1<<7-Fe?me:ve}return{srcPos:J,destPos:_e}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(K,J){if(K._removeMirroring)throw new Error("Context is already forwarding operations.");K.__originalSave=K.save,K.__originalRestore=K.restore,K.__originalRotate=K.rotate,K.__originalScale=K.scale,K.__originalTranslate=K.translate,K.__originalTransform=K.transform,K.__originalSetTransform=K.setTransform,K.__originalResetTransform=K.resetTransform,K.__originalClip=K.clip,K.__originalMoveTo=K.moveTo,K.__originalLineTo=K.lineTo,K.__originalBezierCurveTo=K.bezierCurveTo,K.__originalRect=K.rect,K.__originalClosePath=K.closePath,K.__originalBeginPath=K.beginPath,K._removeMirroring=()=>{K.save=K.__originalSave,K.restore=K.__originalRestore,K.rotate=K.__originalRotate,K.scale=K.__originalScale,K.translate=K.__originalTranslate,K.transform=K.__originalTransform,K.setTransform=K.__originalSetTransform,K.resetTransform=K.__originalResetTransform,K.clip=K.__originalClip,K.moveTo=K.__originalMoveTo,K.lineTo=K.__originalLineTo,K.bezierCurveTo=K.__originalBezierCurveTo,K.rect=K.__originalRect,K.closePath=K.__originalClosePath,K.beginPath=K.__originalBeginPath,delete K._removeMirroring},K.save=function(){J.save(),this.__originalSave()},K.restore=function(){J.restore(),this.__originalRestore()},K.translate=function(ne,oe){J.translate(ne,oe),this.__originalTranslate(ne,oe)},K.scale=function(ne,oe){J.scale(ne,oe),this.__originalScale(ne,oe)},K.transform=function(ne,oe,ce,ue,Ae,pe){J.transform(ne,oe,ce,ue,Ae,pe),this.__originalTransform(ne,oe,ce,ue,Ae,pe)},K.setTransform=function(ne,oe,ce,ue,Ae,pe){J.setTransform(ne,oe,ce,ue,Ae,pe),this.__originalSetTransform(ne,oe,ce,ue,Ae,pe)},K.resetTransform=function(){J.resetTransform(),this.__originalResetTransform()},K.rotate=function(ne){J.rotate(ne),this.__originalRotate(ne)},K.clip=function(ne){J.clip(ne),this.__originalClip(ne)},K.moveTo=function(ne,oe){J.moveTo(ne,oe),this.__originalMoveTo(ne,oe)},K.lineTo=function(ne,oe){J.lineTo(ne,oe),this.__originalLineTo(ne,oe)},K.bezierCurveTo=function(ne,oe,ce,ue,Ae,pe){J.bezierCurveTo(ne,oe,ce,ue,Ae,pe),this.__originalBezierCurveTo(ne,oe,ce,ue,Ae,pe)},K.rect=function(ne,oe,ce,ue){J.rect(ne,oe,ce,ue),this.__originalRect(ne,oe,ce,ue)},K.closePath=function(){J.closePath(),this.__originalClosePath()},K.beginPath=function(){J.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(J){this.canvasFactory=J,this.cache=Object.create(null)}getCanvas(J,ne,oe){let ce;return this.cache[J]!==void 0?(ce=this.cache[J],this.canvasFactory.reset(ce,ne,oe)):(ce=this.canvasFactory.create(ne,oe),this.cache[J]=ce),ce}delete(J){delete this.cache[J]}clear(){for(const J in this.cache){const ne=this.cache[J];this.canvasFactory.destroy(ne),delete this.cache[J]}}}function drawImageAtIntegerCoords(K,J,ne,oe,ce,ue,Ae,pe,ve,me){const[ge,ye,xe,_e,$e,Ie]=getCurrentTransform(K);if(ye===0&&xe===0){const je=Ae*ge+$e,We=Math.round(je),ze=pe*_e+Ie,Xe=Math.round(ze),Je=(Ae+ve)*ge+$e,nt=Math.abs(Math.round(Je)-We)||1,et=(pe+me)*_e+Ie,tt=Math.abs(Math.round(et)-Xe)||1;return K.setTransform(Math.sign(ge),0,0,Math.sign(_e),We,Xe),K.drawImage(J,ne,oe,ce,ue,0,0,nt,tt),K.setTransform(ge,ye,xe,_e,$e,Ie),[nt,tt]}if(ge===0&&_e===0){const je=pe*xe+$e,We=Math.round(je),ze=Ae*ye+Ie,Xe=Math.round(ze),Je=(pe+me)*xe+$e,nt=Math.abs(Math.round(Je)-We)||1,et=(Ae+ve)*ye+Ie,tt=Math.abs(Math.round(et)-Xe)||1;return K.setTransform(0,Math.sign(ye),Math.sign(xe),0,We,Xe),K.drawImage(J,ne,oe,ce,ue,0,0,tt,nt),K.setTransform(ge,ye,xe,_e,$e,Ie),[tt,nt]}K.drawImage(J,ne,oe,ce,ue,Ae,pe,ve,me);const Fe=Math.hypot(ge,ye),ke=Math.hypot(xe,_e);return[Fe*ve,ke*me]}class CanvasExtraState{constructor(J,ne,oe){wr(this,"alphaIsShape",!1);wr(this,"fontSize",0);wr(this,"fontSizeScale",1);wr(this,"textMatrix",null);wr(this,"textMatrixScale",1);wr(this,"fontMatrix",FONT_IDENTITY_MATRIX);wr(this,"leading",0);wr(this,"x",0);wr(this,"y",0);wr(this,"lineX",0);wr(this,"lineY",0);wr(this,"charSpacing",0);wr(this,"wordSpacing",0);wr(this,"textHScale",1);wr(this,"textRenderingMode",TextRenderingMode.FILL);wr(this,"textRise",0);wr(this,"fillColor","#000000");wr(this,"strokeColor","#000000");wr(this,"patternFill",!1);wr(this,"patternStroke",!1);wr(this,"fillAlpha",1);wr(this,"strokeAlpha",1);wr(this,"lineWidth",1);wr(this,"activeSMask",null);wr(this,"transferMaps","none");oe==null||oe(this),this.clipBox=new Float32Array([0,0,J,ne]),this.minMax=MIN_MAX_INIT.slice()}clone(){const J=Object.create(this);return J.clipBox=this.clipBox.slice(),J.minMax=this.minMax.slice(),J}getPathBoundingBox(J=PathType.FILL,ne=null){const oe=this.minMax.slice();if(J===PathType.STROKE){ne||unreachable$1("Stroke bounding box must include transform."),Util.singularValueDecompose2dScale(ne,XY);const ce=XY[0]*this.lineWidth/2,ue=XY[1]*this.lineWidth/2;oe[0]-=ce,oe[1]-=ue,oe[2]+=ce,oe[3]+=ue}return oe}updateClipFromPath(){const J=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(J||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(J){this.clipBox.set(J,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(J=PathType.FILL,ne=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(J,ne))}}function putBinaryImageData(K,J){if(J instanceof ImageData){K.putImageData(J,0,0);return}const ne=J.height,oe=J.width,ce=ne%FULL_CHUNK_HEIGHT,ue=(ne-ce)/FULL_CHUNK_HEIGHT,Ae=ce===0?ue:ue+1,pe=K.createImageData(oe,FULL_CHUNK_HEIGHT);let ve=0,me;const ge=J.data,ye=pe.data;let xe,_e,$e,Ie;if(J.kind===util_ImageKind.GRAYSCALE_1BPP){const Fe=ge.byteLength,ke=new Uint32Array(ye.buffer,0,ye.byteLength>>2),je=ke.length,We=oe+7>>3,ze=4294967295,Xe=util_FeatureTest.isLittleEndian?4278190080:255;for(xe=0;xe<Ae;xe++){for($e=xe<ue?FULL_CHUNK_HEIGHT:ce,me=0,_e=0;_e<$e;_e++){const Je=Fe-ve;let nt=0;const et=Je>We?oe:Je*8-7,tt=et&-8;let st=0,qe=0;for(;nt<tt;nt+=8)qe=ge[ve++],ke[me++]=qe&128?ze:Xe,ke[me++]=qe&64?ze:Xe,ke[me++]=qe&32?ze:Xe,ke[me++]=qe&16?ze:Xe,ke[me++]=qe&8?ze:Xe,ke[me++]=qe&4?ze:Xe,ke[me++]=qe&2?ze:Xe,ke[me++]=qe&1?ze:Xe;for(;nt<et;nt++)st===0&&(qe=ge[ve++],st=128),ke[me++]=qe&st?ze:Xe,st>>=1}for(;me<je;)ke[me++]=0;K.putImageData(pe,0,xe*FULL_CHUNK_HEIGHT)}}else if(J.kind===util_ImageKind.RGBA_32BPP){for(_e=0,Ie=oe*FULL_CHUNK_HEIGHT*4,xe=0;xe<ue;xe++)ye.set(ge.subarray(ve,ve+Ie)),ve+=Ie,K.putImageData(pe,0,_e),_e+=FULL_CHUNK_HEIGHT;xe<Ae&&(Ie=oe*ce*4,ye.set(ge.subarray(ve,ve+Ie)),K.putImageData(pe,0,_e))}else if(J.kind===util_ImageKind.RGB_24BPP)for($e=FULL_CHUNK_HEIGHT,Ie=oe*$e,xe=0;xe<Ae;xe++){for(xe>=ue&&($e=ce,Ie=oe*$e),me=0,_e=Ie;_e--;)ye[me++]=ge[ve++],ye[me++]=ge[ve++],ye[me++]=ge[ve++],ye[me++]=255;K.putImageData(pe,0,xe*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${J.kind}`)}function putBinaryImageMask(K,J){if(J.bitmap){K.drawImage(J.bitmap,0,0);return}const ne=J.height,oe=J.width,ce=ne%FULL_CHUNK_HEIGHT,ue=(ne-ce)/FULL_CHUNK_HEIGHT,Ae=ce===0?ue:ue+1,pe=K.createImageData(oe,FULL_CHUNK_HEIGHT);let ve=0;const me=J.data,ge=pe.data;for(let ye=0;ye<Ae;ye++){const xe=ye<ue?FULL_CHUNK_HEIGHT:ce;({srcPos:ve}=convertBlackAndWhiteToRGBA({src:me,srcPos:ve,dest:ge,width:oe,height:xe,nonBlackColor:0})),K.putImageData(pe,0,ye*FULL_CHUNK_HEIGHT)}}function copyCtxState(K,J){const ne=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const oe of ne)K[oe]!==void 0&&(J[oe]=K[oe]);K.setLineDash!==void 0&&(J.setLineDash(K.getLineDash()),J.lineDashOffset=K.lineDashOffset)}function resetCtxToDefault(K){K.strokeStyle=K.fillStyle="#000000",K.fillRule="nonzero",K.globalAlpha=1,K.lineWidth=1,K.lineCap="butt",K.lineJoin="miter",K.miterLimit=10,K.globalCompositeOperation="source-over",K.font="10px sans-serif",K.setLineDash!==void 0&&(K.setLineDash([]),K.lineDashOffset=0);const{filter:J}=K;J!=="none"&&J!==""&&(K.filter="none")}function getImageSmoothingEnabled(K,J){if(J)return!0;Util.singularValueDecompose2dScale(K,XY);const ne=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=ne&&XY[1]<=ne}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var Aa,D0,O0,L0;const bg=class bg{constructor(J,ne,oe,ce,ue,{optionalContentConfig:Ae,markedContentStack:pe=null},ve,me,ge){yt(this,Aa);this.ctx=J,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ne,this.objs=oe,this.canvasFactory=ce,this.filterFactory=ue,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=pe||[],this.optionalContentConfig=Ae,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ve,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=me,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=ge??null}getObject(J,ne,oe=null){var ce;return typeof ne=="string"?((ce=this.dependencyTracker)==null||ce.recordNamedDependency(J,ne),ne.startsWith("g_")?this.commonObjs.get(ne):this.objs.get(ne)):oe}beginDrawing({transform:J,viewport:ne,transparency:oe=!1,background:ce=null}){const ue=this.ctx.canvas.width,Ae=this.ctx.canvas.height,pe=this.ctx.fillStyle;if(this.ctx.fillStyle=ce||"#ffffff",this.ctx.fillRect(0,0,ue,Ae),this.ctx.fillStyle=pe,oe){const ve=this.cachedCanvases.getCanvas("transparent",ue,Ae);this.compositeCtx=this.ctx,this.transparentCanvas=ve.canvas,this.ctx=ve.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),J&&(this.ctx.transform(...J),this.outputScaleX=J[0],this.outputScaleY=J[0]),this.ctx.transform(...ne.transform),this.viewportScale=ne.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(J,ne,oe,ce,ue){var ke;const Ae=J.argsArray,pe=J.fnArray;let ve=ne||0;const me=Ae.length;if(me===ve)return ve;const ge=me-ve>EXECUTION_STEPS&&typeof oe=="function",ye=ge?Date.now()+EXECUTION_TIME:0;let xe=0;const _e=this.commonObjs,$e=this.objs;let Ie,Fe;for(;;){if(ce!==void 0&&ve===ce.nextBreakPoint)return ce.breakIt(ve,oe),ve;if(!ue||ue(ve))if(Ie=pe[ve],Fe=Ae[ve]??null,Ie!==OPS.dependency)Fe===null?this[Ie](ve):this[Ie](ve,...Fe);else for(const je of Fe){(ke=this.dependencyTracker)==null||ke.recordNamedData(je,ve);const We=je.startsWith("g_")?_e:$e;if(!We.has(je))return We.get(je,oe),ve}if(ve++,ve===me)return ve;if(ge&&++xe>EXECUTION_STEPS){if(Date.now()>ye)return oe(),ve;xe=0}}}endDrawing(){bt(this,Aa,D0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const J of this._cachedBitmapsMap.values()){for(const ne of J.values())typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement&&(ne.width=ne.height=0);J.clear()}this._cachedBitmapsMap.clear(),bt(this,Aa,O0).call(this)}_scaleImage(J,ne){const oe=J.width??J.displayWidth,ce=J.height??J.displayHeight;let ue=Math.max(Math.hypot(ne[0],ne[1]),1),Ae=Math.max(Math.hypot(ne[2],ne[3]),1),pe=oe,ve=ce,me="prescale1",ge,ye;for(;ue>2&&pe>1||Ae>2&&ve>1;){let xe=pe,_e=ve;ue>2&&pe>1&&(xe=pe>=16384?Math.floor(pe/2)-1||1:Math.ceil(pe/2),ue/=pe/xe),Ae>2&&ve>1&&(_e=ve>=16384?Math.floor(ve/2)-1||1:Math.ceil(ve)/2,Ae/=ve/_e),ge=this.cachedCanvases.getCanvas(me,xe,_e),ye=ge.context,ye.clearRect(0,0,xe,_e),ye.drawImage(J,0,0,pe,ve,0,0,xe,_e),J=ge.canvas,pe=xe,ve=_e,me=me==="prescale1"?"prescale2":"prescale1"}return{img:J,paintWidth:pe,paintHeight:ve}}_createMaskCanvas(J,ne){var st,qe;const oe=this.ctx,{width:ce,height:ue}=ne,Ae=this.current.fillColor,pe=this.current.patternFill,ve=getCurrentTransform(oe);let me,ge,ye,xe;if((ne.bitmap||ne.data)&&ne.count>1){const Se=ne.bitmap||ne.data.buffer;ge=JSON.stringify(pe?ve:[ve.slice(0,4),Ae]),me=this._cachedBitmapsMap.get(Se),me||(me=new Map,this._cachedBitmapsMap.set(Se,me));const Re=me.get(ge);if(Re&&!pe){const Be=Math.round(Math.min(ve[0],ve[2])+ve[4]),Ne=Math.round(Math.min(ve[1],ve[3])+ve[5]);return(st=this.dependencyTracker)==null||st.recordDependencies(J,Dependencies.transformAndFill),{canvas:Re,offsetX:Be,offsetY:Ne}}ye=Re}ye||(xe=this.cachedCanvases.getCanvas("maskCanvas",ce,ue),putBinaryImageMask(xe.context,ne));let _e=Util.transform(ve,[1/ce,0,0,-1/ue,0,0]);_e=Util.transform(_e,[1,0,0,1,0,-ue]);const $e=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,ce,ue],_e,$e);const[Ie,Fe,ke,je]=$e,We=Math.round(ke-Ie)||1,ze=Math.round(je-Fe)||1,Xe=this.cachedCanvases.getCanvas("fillCanvas",We,ze),Je=Xe.context,nt=Ie,et=Fe;Je.translate(-nt,-et),Je.transform(..._e),ye||(ye=this._scaleImage(xe.canvas,getCurrentTransformInverse(Je)),ye=ye.img,me&&pe&&me.set(ge,ye)),Je.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(Je),ne.interpolate),drawImageAtIntegerCoords(Je,ye,0,0,ye.width,ye.height,0,0,ce,ue),Je.globalCompositeOperation="source-in";const tt=Util.transform(getCurrentTransformInverse(Je),[1,0,0,1,-nt,-et]);return Je.fillStyle=pe?Ae.getPattern(oe,this,tt,PathType.FILL,J):Ae,Je.fillRect(0,0,ce,ue),me&&!pe&&(this.cachedCanvases.delete("fillCanvas"),me.set(ge,Xe.canvas)),(qe=this.dependencyTracker)==null||qe.recordDependencies(J,Dependencies.transformAndFill),{canvas:Xe.canvas,offsetX:Math.round(nt),offsetY:Math.round(et)}}setLineWidth(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("lineWidth",J),ne!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=ne,this.ctx.lineWidth=ne}setLineCap(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("lineCap",J),this.ctx.lineCap=LINE_CAP_STYLES[ne]}setLineJoin(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("lineJoin",J),this.ctx.lineJoin=LINE_JOIN_STYLES[ne]}setMiterLimit(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("miterLimit",J),this.ctx.miterLimit=ne}setDash(J,ne,oe){var ue;(ue=this.dependencyTracker)==null||ue.recordSimpleData("dash",J);const ce=this.ctx;ce.setLineDash!==void 0&&(ce.setLineDash(ne),ce.lineDashOffset=oe)}setRenderingIntent(J,ne){}setFlatness(J,ne){}setGState(J,ne){var oe,ce,ue,Ae,pe;for(const[ve,me]of ne)switch(ve){case"LW":this.setLineWidth(J,me);break;case"LC":this.setLineCap(J,me);break;case"LJ":this.setLineJoin(J,me);break;case"ML":this.setMiterLimit(J,me);break;case"D":this.setDash(J,me[0],me[1]);break;case"RI":this.setRenderingIntent(J,me);break;case"FL":this.setFlatness(J,me);break;case"Font":this.setFont(J,me[0],me[1]);break;case"CA":(oe=this.dependencyTracker)==null||oe.recordSimpleData("strokeAlpha",J),this.current.strokeAlpha=me;break;case"ca":(ce=this.dependencyTracker)==null||ce.recordSimpleData("fillAlpha",J),this.ctx.globalAlpha=this.current.fillAlpha=me;break;case"BM":(ue=this.dependencyTracker)==null||ue.recordSimpleData("globalCompositeOperation",J),this.ctx.globalCompositeOperation=me;break;case"SMask":(Ae=this.dependencyTracker)==null||Ae.recordSimpleData("SMask",J),this.current.activeSMask=me?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(pe=this.dependencyTracker)==null||pe.recordSimpleData("filter",J),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(me);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const J=this.inSMaskMode;this.current.activeSMask&&!J?this.beginSMaskMode():!this.current.activeSMask&&J&&this.endSMaskMode()}beginSMaskMode(J){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const ne=this.ctx.canvas.width,oe=this.ctx.canvas.height,ce="smaskGroupAt"+this.groupLevel,ue=this.cachedCanvases.getCanvas(ce,ne,oe);this.suspendedCtx=this.ctx;const Ae=this.ctx=ue.context;Ae.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,Ae),mirrorContextOperations(Ae,this.suspendedCtx),this.setGState(J,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(J){if(!this.current.activeSMask)return;J?(J[0]=Math.floor(J[0]),J[1]=Math.floor(J[1]),J[2]=Math.ceil(J[2]),J[3]=Math.ceil(J[3])):J=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const ne=this.current.activeSMask,oe=this.suspendedCtx;this.composeSMask(oe,ne,this.ctx,J),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(J,ne,oe,ce){const ue=ce[0],Ae=ce[1],pe=ce[2]-ue,ve=ce[3]-Ae;pe===0||ve===0||(this.genericComposeSMask(ne.context,oe,pe,ve,ne.subtype,ne.backdrop,ne.transferMap,ue,Ae,ne.offsetX,ne.offsetY),J.save(),J.globalAlpha=1,J.globalCompositeOperation="source-over",J.setTransform(1,0,0,1,0,0),J.drawImage(oe.canvas,0,0),J.restore())}genericComposeSMask(J,ne,oe,ce,ue,Ae,pe,ve,me,ge,ye){let xe=J.canvas,_e=ve-ge,$e=me-ye;if(Ae)if(_e<0||$e<0||_e+oe>xe.width||$e+ce>xe.height){const Fe=this.cachedCanvases.getCanvas("maskExtension",oe,ce),ke=Fe.context;ke.drawImage(xe,-_e,-$e),ke.globalCompositeOperation="destination-atop",ke.fillStyle=Ae,ke.fillRect(0,0,oe,ce),ke.globalCompositeOperation="source-over",xe=Fe.canvas,_e=$e=0}else{J.save(),J.globalAlpha=1,J.setTransform(1,0,0,1,0,0);const Fe=new Path2D;Fe.rect(_e,$e,oe,ce),J.clip(Fe),J.globalCompositeOperation="destination-atop",J.fillStyle=Ae,J.fillRect(_e,$e,oe,ce),J.restore()}ne.save(),ne.globalAlpha=1,ne.setTransform(1,0,0,1,0,0),ue==="Alpha"&&pe?ne.filter=this.filterFactory.addAlphaFilter(pe):ue==="Luminosity"&&(ne.filter=this.filterFactory.addLuminosityFilter(pe));const Ie=new Path2D;Ie.rect(ve,me,oe,ce),ne.clip(Ie),ne.globalCompositeOperation="destination-in",ne.drawImage(xe,_e,$e,oe,ce,ve,me,oe,ce),ne.restore()}save(J){var oe;this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const ne=this.current;this.stateStack.push(ne),this.current=ne.clone(),(oe=this.dependencyTracker)==null||oe.save(J)}restore(J){var ne;if((ne=this.dependencyTracker)==null||ne.restore(J),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(J,ne,oe,ce,ue,Ae,pe){var ve;(ve=this.dependencyTracker)==null||ve.recordIncrementalData("transform",J),this.ctx.transform(ne,oe,ce,ue,Ae,pe),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(J,ne,oe,ce){let[ue]=oe;if(!ce){ue||(ue=oe[0]=new Path2D),this[ne](J,ue);return}if(this.dependencyTracker!==null){const Ae=ne===OPS.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(J).recordBBox(J,this.ctx,ce[0]-Ae,ce[2]+Ae,ce[1]-Ae,ce[3]+Ae).recordDependencies(J,["transform"])}if(!(ue instanceof Path2D)){const Ae=oe[0]=new Path2D;for(let pe=0,ve=ue.length;pe<ve;)switch(ue[pe++]){case DrawOPS.moveTo:Ae.moveTo(ue[pe++],ue[pe++]);break;case DrawOPS.lineTo:Ae.lineTo(ue[pe++],ue[pe++]);break;case DrawOPS.curveTo:Ae.bezierCurveTo(ue[pe++],ue[pe++],ue[pe++],ue[pe++],ue[pe++],ue[pe++]);break;case DrawOPS.closePath:Ae.closePath();break;default:warn$2(`Unrecognized drawing path operator: ${ue[pe-1]}`);break}ue=Ae}Util.axialAlignedBoundingBox(ce,getCurrentTransform(this.ctx),this.current.minMax),this[ne](J,ue),this._pathStartIdx=J}closePath(J){this.ctx.closePath()}stroke(J,ne,oe=!0){var Ae;const ce=this.ctx,ue=this.current.strokeColor;if(ce.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof ue=="object"&&(ue!=null&&ue.getPattern)){const pe=ue.isModifyingCurrentTransform()?ce.getTransform():null;if(ce.save(),ce.strokeStyle=ue.getPattern(ce,this,getCurrentTransformInverse(ce),PathType.STROKE,J),pe){const ve=new Path2D;ve.addPath(ne,ce.getTransform().invertSelf().multiplySelf(pe)),ne=ve}this.rescaleAndStroke(ne,!1),ce.restore()}else this.rescaleAndStroke(ne,!0);(Ae=this.dependencyTracker)==null||Ae.recordDependencies(J,Dependencies.stroke),oe&&this.consumePath(J,ne,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),ce.globalAlpha=this.current.fillAlpha}closeStroke(J,ne){this.stroke(J,ne)}fill(J,ne,oe=!0){var me,ge,ye;const ce=this.ctx,ue=this.current.fillColor,Ae=this.current.patternFill;let pe=!1;if(Ae){const xe=ue.isModifyingCurrentTransform()?ce.getTransform():null;if((me=this.dependencyTracker)==null||me.save(J),ce.save(),ce.fillStyle=ue.getPattern(ce,this,getCurrentTransformInverse(ce),PathType.FILL,J),xe){const _e=new Path2D;_e.addPath(ne,ce.getTransform().invertSelf().multiplySelf(xe)),ne=_e}pe=!0}const ve=this.current.getClippedPathBoundingBox();this.contentVisible&&ve!==null&&(this.pendingEOFill?(ce.fill(ne,"evenodd"),this.pendingEOFill=!1):ce.fill(ne)),(ge=this.dependencyTracker)==null||ge.recordDependencies(J,Dependencies.fill),pe&&(ce.restore(),(ye=this.dependencyTracker)==null||ye.restore(J)),oe&&this.consumePath(J,ne,ve)}eoFill(J,ne){this.pendingEOFill=!0,this.fill(J,ne)}fillStroke(J,ne){this.fill(J,ne,!1),this.stroke(J,ne,!1),this.consumePath(J,ne)}eoFillStroke(J,ne){this.pendingEOFill=!0,this.fillStroke(J,ne)}closeFillStroke(J,ne){this.fillStroke(J,ne)}closeEOFillStroke(J,ne){this.pendingEOFill=!0,this.fillStroke(J,ne)}endPath(J,ne){this.consumePath(J,ne)}rawFillPath(J,ne){var oe;this.ctx.fill(ne),(oe=this.dependencyTracker)==null||oe.recordDependencies(J,Dependencies.rawFillPath).recordOperation(J)}clip(J){var ne;(ne=this.dependencyTracker)==null||ne.recordFutureForcedDependency("clipMode",J),this.pendingClip=NORMAL_CLIP}eoClip(J){var ne;(ne=this.dependencyTracker)==null||ne.recordFutureForcedDependency("clipMode",J),this.pendingClip=EO_CLIP}beginText(J){var ne;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(ne=this.dependencyTracker)==null||ne.recordOpenMarker(J).resetIncrementalData("sameLineText").resetIncrementalData("moveText",J)}endText(J){const ne=this.pendingTextPaths,oe=this.ctx;if(this.dependencyTracker){const{dependencyTracker:ce}=this;ne!==void 0&&ce.recordFutureForcedDependency("textClip",ce.getOpenMarker()).recordFutureForcedDependency("textClip",J),ce.recordCloseMarker(J)}if(ne!==void 0){const ce=new Path2D,ue=oe.getTransform().invertSelf();for(const{transform:Ae,x:pe,y:ve,fontSize:me,path:ge}of ne)ge&&ce.addPath(ge,new DOMMatrix(Ae).preMultiplySelf(ue).translate(pe,ve).scale(me,-me));oe.clip(ce)}delete this.pendingTextPaths}setCharSpacing(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("charSpacing",J),this.current.charSpacing=ne}setWordSpacing(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("wordSpacing",J),this.current.wordSpacing=ne}setHScale(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("hScale",J),this.current.textHScale=ne/100}setLeading(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("leading",J),this.current.leading=-ne}setFont(J,ne,oe){var ye,xe;(ye=this.dependencyTracker)==null||ye.recordSimpleData("font",J).recordSimpleDataFromNamed("fontObj",ne,J);const ce=this.commonObjs.get(ne),ue=this.current;if(!ce)throw new Error(`Can't find font for ${ne}`);if(ue.fontMatrix=ce.fontMatrix||FONT_IDENTITY_MATRIX,(ue.fontMatrix[0]===0||ue.fontMatrix[3]===0)&&warn$2("Invalid font matrix for font "+ne),oe<0?(oe=-oe,ue.fontDirection=-1):ue.fontDirection=1,this.current.font=ce,this.current.fontSize=oe,ce.isType3Font)return;const Ae=ce.loadedName||"sans-serif",pe=((xe=ce.systemFontInfo)==null?void 0:xe.css)||`"${Ae}", ${ce.fallbackName}`;let ve="normal";ce.black?ve="900":ce.bold&&(ve="bold");const me=ce.italic?"italic":"normal";let ge=oe;oe<MIN_FONT_SIZE?ge=MIN_FONT_SIZE:oe>MAX_FONT_SIZE&&(ge=MAX_FONT_SIZE),this.current.fontSizeScale=oe/ge,this.ctx.font=`${me} ${ve} ${ge}px ${pe}`}setTextRenderingMode(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("textRenderingMode",J),this.current.textRenderingMode=ne}setTextRise(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("textRise",J),this.current.textRise=ne}moveText(J,ne,oe){var ce;(ce=this.dependencyTracker)==null||ce.resetIncrementalData("sameLineText").recordIncrementalData("moveText",J),this.current.x=this.current.lineX+=ne,this.current.y=this.current.lineY+=oe}setLeadingMoveText(J,ne,oe){this.setLeading(J,-oe),this.moveText(J,ne,oe)}setTextMatrix(J,ne){var ce;(ce=this.dependencyTracker)==null||ce.recordSimpleData("textMatrix",J);const{current:oe}=this;oe.textMatrix=ne,oe.textMatrixScale=Math.hypot(ne[0],ne[1]),oe.x=oe.lineX=0,oe.y=oe.lineY=0}nextLine(J){var ne;this.moveText(J,0,this.current.leading),(ne=this.dependencyTracker)==null||ne.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??J)}paintChar(J,ne,oe,ce,ue,Ae){var ke,je,We,ze;const pe=this.ctx,ve=this.current,me=ve.font,ge=ve.textRenderingMode,ye=ve.fontSize/ve.fontSizeScale,xe=ge&TextRenderingMode.FILL_STROKE_MASK,_e=!!(ge&TextRenderingMode.ADD_TO_PATH_FLAG),$e=ve.patternFill&&!me.missingFile,Ie=ve.patternStroke&&!me.missingFile;let Fe;if((me.disableFontFace||_e||$e||Ie)&&!me.missingFile&&(Fe=me.getPathGenerator(this.commonObjs,ne)),Fe&&(me.disableFontFace||$e||Ie)){pe.save(),pe.translate(oe,ce),pe.scale(ye,-ye),(ke=this.dependencyTracker)==null||ke.recordCharacterBBox(J,pe,me);let Xe;if(xe===TextRenderingMode.FILL||xe===TextRenderingMode.FILL_STROKE)if(ue){Xe=pe.getTransform(),pe.setTransform(...ue);const Je=bt(this,Aa,L0).call(this,Fe,Xe,ue);pe.fill(Je)}else pe.fill(Fe);if(xe===TextRenderingMode.STROKE||xe===TextRenderingMode.FILL_STROKE)if(Ae){Xe||(Xe=pe.getTransform()),pe.setTransform(...Ae);const{a:Je,b:nt,c:et,d:tt}=Xe,st=Util.inverseTransform(Ae),qe=Util.transform([Je,nt,et,tt,0,0],st);Util.singularValueDecompose2dScale(qe,XY),pe.lineWidth*=Math.max(XY[0],XY[1])/ye,pe.stroke(bt(this,Aa,L0).call(this,Fe,Xe,Ae))}else pe.lineWidth/=ye,pe.stroke(Fe);pe.restore()}else(xe===TextRenderingMode.FILL||xe===TextRenderingMode.FILL_STROKE)&&(pe.fillText(ne,oe,ce),(je=this.dependencyTracker)==null||je.recordCharacterBBox(J,pe,me,ye,oe,ce,()=>pe.measureText(ne))),(xe===TextRenderingMode.STROKE||xe===TextRenderingMode.FILL_STROKE)&&(this.dependencyTracker&&((We=this.dependencyTracker)==null||We.recordCharacterBBox(J,pe,me,ye,oe,ce,()=>pe.measureText(ne)).recordDependencies(J,Dependencies.stroke)),pe.strokeText(ne,oe,ce));_e&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(pe),x:oe,y:ce,fontSize:ye,path:Fe}),(ze=this.dependencyTracker)==null||ze.recordCharacterBBox(J,pe,me,ye,oe,ce))}get isFontSubpixelAAEnabled(){const{context:J}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);J.scale(1.5,1),J.fillText("I",0,10);const ne=J.getImageData(0,0,10,10).data;let oe=!1;for(let ce=3;ce<ne.length;ce+=4)if(ne[ce]>0&&ne[ce]<255){oe=!0;break}return shadow(this,"isFontSubpixelAAEnabled",oe)}showText(J,ne){var et,tt,st,qe;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(J,Dependencies.showText).resetBBox(J),this.current.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",J).inheritPendingDependenciesAsFutureForcedDependencies());const oe=this.current,ce=oe.font;if(ce.isType3Font){this.showType3Text(J,ne),(et=this.dependencyTracker)==null||et.recordShowTextOperation(J);return}const ue=oe.fontSize;if(ue===0){(tt=this.dependencyTracker)==null||tt.recordOperation(J);return}const Ae=this.ctx,pe=oe.fontSizeScale,ve=oe.charSpacing,me=oe.wordSpacing,ge=oe.fontDirection,ye=oe.textHScale*ge,xe=ne.length,_e=ce.vertical,$e=_e?1:-1,Ie=ce.defaultVMetrics,Fe=ue*oe.fontMatrix[0],ke=oe.textRenderingMode===TextRenderingMode.FILL&&!ce.disableFontFace&&!oe.patternFill;Ae.save(),oe.textMatrix&&Ae.transform(...oe.textMatrix),Ae.translate(oe.x,oe.y+oe.textRise),ge>0?Ae.scale(ye,-1):Ae.scale(ye,1);let je,We;if(oe.patternFill){Ae.save();const Se=oe.fillColor.getPattern(Ae,this,getCurrentTransformInverse(Ae),PathType.FILL,J);je=getCurrentTransform(Ae),Ae.restore(),Ae.fillStyle=Se}if(oe.patternStroke){Ae.save();const Se=oe.strokeColor.getPattern(Ae,this,getCurrentTransformInverse(Ae),PathType.STROKE,J);We=getCurrentTransform(Ae),Ae.restore(),Ae.strokeStyle=Se}let ze=oe.lineWidth;const Xe=oe.textMatrixScale;if(Xe===0||ze===0){const Se=oe.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(Se===TextRenderingMode.STROKE||Se===TextRenderingMode.FILL_STROKE)&&(ze=this.getSinglePixelWidth())}else ze/=Xe;if(pe!==1&&(Ae.scale(pe,pe),ze/=pe),Ae.lineWidth=ze,ce.isInvalidPDFjsFont){const Se=[];let Re=0;for(const Ne of ne)Se.push(Ne.unicode),Re+=Ne.width;const Be=Se.join("");if(Ae.fillText(Be,0,0),this.dependencyTracker!==null){const Ne=Ae.measureText(Be);this.dependencyTracker.recordBBox(J,this.ctx,-Ne.actualBoundingBoxLeft,Ne.actualBoundingBoxRight,-Ne.actualBoundingBoxAscent,Ne.actualBoundingBoxDescent).recordShowTextOperation(J)}oe.x+=Re*Fe*ye,Ae.restore(),this.compose();return}let Je=0,nt;for(nt=0;nt<xe;++nt){const Se=ne[nt];if(typeof Se=="number"){Je+=$e*Se*ue/1e3;continue}let Re=!1;const Be=(Se.isSpace?me:0)+ve,Ne=Se.fontChar,Ue=Se.accent;let Ge,Ye,Qe=Se.width;if(_e){const rt=Se.vmetric||Ie,it=-(Se.vmetric?rt[1]:Qe*.5)*Fe,at=rt[2]*Fe;Qe=rt?-rt[0]:Qe,Ge=it/pe,Ye=(Je+at)/pe}else Ge=Je/pe,Ye=0;let Te;if(ce.remeasure&&Qe>0){Te=Ae.measureText(Ne);const rt=Te.width*1e3/ue*pe;if(Qe<rt&&this.isFontSubpixelAAEnabled){const it=Qe/rt;Re=!0,Ae.save(),Ae.scale(it,1),Ge/=it}else Qe!==rt&&(Ge+=(Qe-rt)/2e3*ue/pe)}if(this.contentVisible&&(Se.isInFont||ce.missingFile)){if(ke&&!Ue)Ae.fillText(Ne,Ge,Ye),(st=this.dependencyTracker)==null||st.recordCharacterBBox(J,Ae,Te?{bbox:null}:ce,ue/pe,Ge,Ye,()=>Te??Ae.measureText(Ne));else if(this.paintChar(J,Ne,Ge,Ye,je,We),Ue){const rt=Ge+ue*Ue.offset.x/pe,it=Ye-ue*Ue.offset.y/pe;this.paintChar(J,Ue.fontChar,rt,it,je,We)}}const Ke=_e?Qe*Fe-Be*ge:Qe*Fe+Be*ge;Je+=Ke,Re&&Ae.restore()}_e?oe.y-=Je:oe.x+=Je*ye,Ae.restore(),this.compose(),(qe=this.dependencyTracker)==null||qe.recordShowTextOperation(J)}showType3Text(J,ne){const oe=this.ctx,ce=this.current,ue=ce.font,Ae=ce.fontSize,pe=ce.fontDirection,ve=ue.vertical?1:-1,me=ce.charSpacing,ge=ce.wordSpacing,ye=ce.textHScale*pe,xe=ce.fontMatrix||FONT_IDENTITY_MATRIX,_e=ne.length,$e=ce.textRenderingMode===TextRenderingMode.INVISIBLE;let Ie,Fe,ke,je;if($e||Ae===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,oe.save(),ce.textMatrix&&oe.transform(...ce.textMatrix),oe.translate(ce.x,ce.y+ce.textRise),oe.scale(ye,pe);const We=this.dependencyTracker;for(this.dependencyTracker=We?new CanvasNestedDependencyTracker(We,J):null,Ie=0;Ie<_e;++Ie){if(Fe=ne[Ie],typeof Fe=="number"){je=ve*Fe*Ae/1e3,this.ctx.translate(je,0),ce.x+=je*ye;continue}const ze=(Fe.isSpace?ge:0)+me,Xe=ue.charProcOperatorList[Fe.operatorListId];Xe?this.contentVisible&&(this.save(),oe.scale(Ae,Ae),oe.transform(...xe),this.executeOperatorList(Xe),this.restore()):warn$2(`Type3 character "${Fe.operatorListId}" is not available.`);const Je=[Fe.width,0];Util.applyTransform(Je,xe),ke=Je[0]*Ae+ze,oe.translate(ke,0),ce.x+=ke*ye}oe.restore(),We&&(this.dependencyTracker=We)}setCharWidth(J,ne,oe){}setCharWidthAndBounds(J,ne,oe,ce,ue,Ae,pe){var me;const ve=new Path2D;ve.rect(ce,ue,Ae-ce,pe-ue),this.ctx.clip(ve),(me=this.dependencyTracker)==null||me.recordBBox(J,this.ctx,ce,Ae,ue,pe).recordClipBox(J,this.ctx,ce,Ae,ue,pe),this.endPath(J)}getColorN_Pattern(J,ne){let oe;if(ne[0]==="TilingPattern"){const ce=this.baseTransform||getCurrentTransform(this.ctx),ue={createCanvasGraphics:(Ae,pe)=>new bg(Ae,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new CanvasNestedDependencyTracker(this.dependencyTracker,pe,!0):null)};oe=new TilingPattern(ne,this.ctx,ue,ce)}else oe=this._getPattern(J,ne[1],ne[2]);return oe}setStrokeColorN(J,...ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("strokeColor",J),this.current.strokeColor=this.getColorN_Pattern(J,ne),this.current.patternStroke=!0}setFillColorN(J,...ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("fillColor",J),this.current.fillColor=this.getColorN_Pattern(J,ne),this.current.patternFill=!0}setStrokeRGBColor(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("strokeColor",J),this.ctx.strokeStyle=this.current.strokeColor=ne,this.current.patternStroke=!1}setStrokeTransparent(J){var ne;(ne=this.dependencyTracker)==null||ne.recordSimpleData("strokeColor",J),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.recordSimpleData("fillColor",J),this.ctx.fillStyle=this.current.fillColor=ne,this.current.patternFill=!1}setFillTransparent(J){var ne;(ne=this.dependencyTracker)==null||ne.recordSimpleData("fillColor",J),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(J,ne,oe=null){let ce;return this.cachedPatterns.has(ne)?ce=this.cachedPatterns.get(ne):(ce=getShadingPattern(this.getObject(J,ne)),this.cachedPatterns.set(ne,ce)),oe&&(ce.matrix=oe),ce}shadingFill(J,ne){var Ae;if(!this.contentVisible)return;const oe=this.ctx;this.save(J);const ce=this._getPattern(J,ne);oe.fillStyle=ce.getPattern(oe,this,getCurrentTransformInverse(oe),PathType.SHADING,J);const ue=getCurrentTransformInverse(oe);if(ue){const{width:pe,height:ve}=oe.canvas,me=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,pe,ve],ue,me);const[ge,ye,xe,_e]=me;this.ctx.fillRect(ge,ye,xe-ge,_e-ye)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(Ae=this.dependencyTracker)==null||Ae.resetBBox(J).recordFullPageBBox(J).recordDependencies(J,Dependencies.transform).recordDependencies(J,Dependencies.fill).recordOperation(J),this.compose(this.current.getClippedPathBoundingBox()),this.restore(J)}beginInlineImage(){unreachable$1("Should not call beginInlineImage")}beginImageData(){unreachable$1("Should not call beginImageData")}paintFormXObjectBegin(J,ne,oe){var ce;if(this.contentVisible&&(this.save(J),this.baseTransformStack.push(this.baseTransform),ne&&this.transform(J,...ne),this.baseTransform=getCurrentTransform(this.ctx),oe)){Util.axialAlignedBoundingBox(oe,this.baseTransform,this.current.minMax);const[ue,Ae,pe,ve]=oe,me=new Path2D;me.rect(ue,Ae,pe-ue,ve-Ae),this.ctx.clip(me),(ce=this.dependencyTracker)==null||ce.recordClipBox(J,this.ctx,ue,pe,Ae,ve),this.endPath(J)}}paintFormXObjectEnd(J){this.contentVisible&&(this.restore(J),this.baseTransform=this.baseTransformStack.pop())}beginGroup(J,ne){var We;if(!this.contentVisible)return;this.save(J),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const oe=this.ctx;ne.isolated||info("TODO: Support non-isolated groups."),ne.knockout&&warn$2("Knockout groups not supported.");const ce=getCurrentTransform(oe);if(ne.matrix&&oe.transform(...ne.matrix),!ne.bbox)throw new Error("Bounding box is required.");let ue=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox(ne.bbox,getCurrentTransform(oe),ue);const Ae=[0,0,oe.canvas.width,oe.canvas.height];ue=Util.intersect(ue,Ae)||[0,0,0,0];const pe=Math.floor(ue[0]),ve=Math.floor(ue[1]),me=Math.max(Math.ceil(ue[2])-pe,1),ge=Math.max(Math.ceil(ue[3])-ve,1);this.current.startNewPathAndClipBox([0,0,me,ge]);let ye="groupAt"+this.groupLevel;ne.smask&&(ye+="_smask_"+this.smaskCounter++%2);const xe=this.cachedCanvases.getCanvas(ye,me,ge),_e=xe.context;_e.translate(-pe,-ve),_e.transform(...ce);let $e=new Path2D;const[Ie,Fe,ke,je]=ne.bbox;if($e.rect(Ie,Fe,ke-Ie,je-Fe),ne.matrix){const ze=new Path2D;ze.addPath($e,new DOMMatrix(ne.matrix)),$e=ze}_e.clip($e),ne.smask&&this.smaskStack.push({canvas:xe.canvas,context:_e,offsetX:pe,offsetY:ve,subtype:ne.smask.subtype,backdrop:ne.smask.backdrop,transferMap:ne.smask.transferMap||null,startTransformInverse:null}),(!ne.smask||this.dependencyTracker)&&(oe.setTransform(1,0,0,1,0,0),oe.translate(pe,ve),oe.save()),copyCtxState(oe,_e),this.ctx=_e,(We=this.dependencyTracker)==null||We.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(oe),this.setGState(J,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(oe),this.groupLevel++}endGroup(J,ne){var ue;if(!this.contentVisible)return;this.groupLevel--;const oe=this.ctx,ce=this.groupStack.pop();if(this.ctx=ce,this.ctx.imageSmoothingEnabled=!1,(ue=this.dependencyTracker)==null||ue.popBaseTransform(),ne.smask)this.tempSMask=this.smaskStack.pop(),this.restore(J),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const Ae=getCurrentTransform(this.ctx);this.restore(J),this.ctx.save(),this.ctx.setTransform(...Ae);const pe=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,oe.canvas.width,oe.canvas.height],Ae,pe),this.ctx.drawImage(oe.canvas,0,0),this.ctx.restore(),this.compose(pe)}}beginAnnotation(J,ne,oe,ce,ue,Ae){if(bt(this,Aa,D0).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(J),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),oe){const pe=oe[2]-oe[0],ve=oe[3]-oe[1];if(Ae&&this.annotationCanvasMap){ce=ce.slice(),ce[4]-=oe[0],ce[5]-=oe[1],oe=oe.slice(),oe[0]=oe[1]=0,oe[2]=pe,oe[3]=ve,Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:me}=this,ge=Math.ceil(pe*this.outputScaleX*me),ye=Math.ceil(ve*this.outputScaleY*me);this.annotationCanvas=this.canvasFactory.create(ge,ye);const{canvas:xe,context:_e}=this.annotationCanvas;this.annotationCanvasMap.set(ne,xe),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_e,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,ve*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath(J);const me=new Path2D;me.rect(oe[0],oe[1],pe,ve),this.ctx.clip(me)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(J,...ce),this.transform(J,...ue)}endAnnotation(J){this.annotationCanvas&&(this.ctx.restore(),bt(this,Aa,O0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(J,ne){var pe;if(!this.contentVisible)return;const oe=ne.count;ne=this.getObject(J,ne.data,ne),ne.count=oe;const ce=this.ctx,ue=this._createMaskCanvas(J,ne),Ae=ue.canvas;ce.save(),ce.setTransform(1,0,0,1,0,0),ce.drawImage(Ae,ue.offsetX,ue.offsetY),(pe=this.dependencyTracker)==null||pe.resetBBox(J).recordBBox(J,this.ctx,ue.offsetX,ue.offsetX+Ae.width,ue.offsetY,ue.offsetY+Ae.height).recordOperation(J),ce.restore(),this.compose()}paintImageMaskXObjectRepeat(J,ne,oe,ce=0,ue=0,Ae,pe){var ye,xe,_e;if(!this.contentVisible)return;ne=this.getObject(J,ne.data,ne);const ve=this.ctx;ve.save();const me=getCurrentTransform(ve);ve.transform(oe,ce,ue,Ae,0,0);const ge=this._createMaskCanvas(J,ne);ve.setTransform(1,0,0,1,ge.offsetX-me[4],ge.offsetY-me[5]),(ye=this.dependencyTracker)==null||ye.resetBBox(J);for(let $e=0,Ie=pe.length;$e<Ie;$e+=2){const Fe=Util.transform(me,[oe,ce,ue,Ae,pe[$e],pe[$e+1]]);ve.drawImage(ge.canvas,Fe[4],Fe[5]),(xe=this.dependencyTracker)==null||xe.recordBBox(J,this.ctx,Fe[4],Fe[4]+ge.canvas.width,Fe[5],Fe[5]+ge.canvas.height)}ve.restore(),this.compose(),(_e=this.dependencyTracker)==null||_e.recordOperation(J)}paintImageMaskXObjectGroup(J,ne){var Ae,pe,ve;if(!this.contentVisible)return;const oe=this.ctx,ce=this.current.fillColor,ue=this.current.patternFill;(Ae=this.dependencyTracker)==null||Ae.resetBBox(J).recordDependencies(J,Dependencies.transformAndFill);for(const me of ne){const{data:ge,width:ye,height:xe,transform:_e}=me,$e=this.cachedCanvases.getCanvas("maskCanvas",ye,xe),Ie=$e.context;Ie.save();const Fe=this.getObject(J,ge,me);putBinaryImageMask(Ie,Fe),Ie.globalCompositeOperation="source-in",Ie.fillStyle=ue?ce.getPattern(Ie,this,getCurrentTransformInverse(oe),PathType.FILL,J):ce,Ie.fillRect(0,0,ye,xe),Ie.restore(),oe.save(),oe.transform(..._e),oe.scale(1,-1),drawImageAtIntegerCoords(oe,$e.canvas,0,0,ye,xe,0,-1,1,1),(pe=this.dependencyTracker)==null||pe.recordBBox(J,oe,0,ye,0,xe),oe.restore()}this.compose(),(ve=this.dependencyTracker)==null||ve.recordOperation(J)}paintImageXObject(J,ne){if(!this.contentVisible)return;const oe=this.getObject(J,ne);if(!oe){warn$2("Dependent image isn't ready yet");return}this.paintInlineImageXObject(J,oe)}paintImageXObjectRepeat(J,ne,oe,ce,ue){if(!this.contentVisible)return;const Ae=this.getObject(J,ne);if(!Ae){warn$2("Dependent image isn't ready yet");return}const pe=Ae.width,ve=Ae.height,me=[];for(let ge=0,ye=ue.length;ge<ye;ge+=2)me.push({transform:[oe,0,0,ce,ue[ge],ue[ge+1]],x:0,y:0,w:pe,h:ve});this.paintInlineImageXObjectGroup(J,Ae,me)}applyTransferMapsToCanvas(J){return this.current.transferMaps!=="none"&&(J.filter=this.current.transferMaps,J.drawImage(J.canvas,0,0),J.filter="none"),J.canvas}applyTransferMapsToBitmap(J){if(this.current.transferMaps==="none")return J.bitmap;const{bitmap:ne,width:oe,height:ce}=J,ue=this.cachedCanvases.getCanvas("inlineImage",oe,ce),Ae=ue.context;return Ae.filter=this.current.transferMaps,Ae.drawImage(ne,0,0),Ae.filter="none",ue.canvas}paintInlineImageXObject(J,ne){var me;if(!this.contentVisible)return;const oe=ne.width,ce=ne.height,ue=this.ctx;this.save(J);const{filter:Ae}=ue;Ae!=="none"&&Ae!==""&&(ue.filter="none"),ue.scale(1/oe,-1/ce);let pe;if(ne.bitmap)pe=this.applyTransferMapsToBitmap(ne);else if(typeof HTMLElement=="function"&&ne instanceof HTMLElement||!ne.data)pe=ne;else{const ye=this.cachedCanvases.getCanvas("inlineImage",oe,ce).context;putBinaryImageData(ye,ne),pe=this.applyTransferMapsToCanvas(ye)}const ve=this._scaleImage(pe,getCurrentTransformInverse(ue));ue.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ue),ne.interpolate),(me=this.dependencyTracker)==null||me.resetBBox(J).recordBBox(J,ue,0,oe,-ce,0).recordDependencies(J,Dependencies.imageXObject).recordOperation(J),drawImageAtIntegerCoords(ue,ve.img,0,0,ve.paintWidth,ve.paintHeight,0,-ce,oe,ce),this.compose(),this.restore(J)}paintInlineImageXObjectGroup(J,ne,oe){var Ae,pe,ve;if(!this.contentVisible)return;const ce=this.ctx;let ue;if(ne.bitmap)ue=ne.bitmap;else{const me=ne.width,ge=ne.height,xe=this.cachedCanvases.getCanvas("inlineImage",me,ge).context;putBinaryImageData(xe,ne),ue=this.applyTransferMapsToCanvas(xe)}(Ae=this.dependencyTracker)==null||Ae.resetBBox(J);for(const me of oe)ce.save(),ce.transform(...me.transform),ce.scale(1,-1),drawImageAtIntegerCoords(ce,ue,me.x,me.y,me.w,me.h,0,-1,1,1),(pe=this.dependencyTracker)==null||pe.recordBBox(J,ce,0,1,-1,0),ce.restore();(ve=this.dependencyTracker)==null||ve.recordOperation(J),this.compose()}paintSolidColorImageMask(J){var ne;this.contentVisible&&((ne=this.dependencyTracker)==null||ne.resetBBox(J).recordBBox(J,this.ctx,0,1,0,1).recordDependencies(J,Dependencies.fill).recordOperation(J),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(J,ne){}markPointProps(J,ne,oe){}beginMarkedContent(J,ne){var oe;(oe=this.dependencyTracker)==null||oe.beginMarkedContent(J),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(J,ne,oe){var ce;(ce=this.dependencyTracker)==null||ce.beginMarkedContent(J),ne==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(oe)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(J){var ne;(ne=this.dependencyTracker)==null||ne.endMarkedContent(J),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(J){}endCompat(J){}consumePath(J,ne,oe){var Ae,pe;const ce=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(oe);const ue=this.ctx;this.pendingClip?(ce||(this.pendingClip===EO_CLIP?ue.clip(ne,"evenodd"):ue.clip(ne)),this.pendingClip=null,(Ae=this.dependencyTracker)==null||Ae.bboxToClipBoxDropOperation(J).recordFutureForcedDependency("clipPath",J)):(pe=this.dependencyTracker)==null||pe.recordOperation(J),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const J=getCurrentTransform(this.ctx);if(J[1]===0&&J[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(J[0]),Math.abs(J[3]));else{const ne=Math.abs(J[0]*J[3]-J[2]*J[1]),oe=Math.hypot(J[0],J[2]),ce=Math.hypot(J[1],J[3]);this._cachedGetSinglePixelWidth=Math.max(oe,ce)/ne}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:J}=this.current,{a:ne,b:oe,c:ce,d:ue}=this.ctx.getTransform();let Ae,pe;if(oe===0&&ce===0){const ve=Math.abs(ne),me=Math.abs(ue);if(ve===me)if(J===0)Ae=pe=1/ve;else{const ge=ve*J;Ae=pe=ge<1?1/ge:1}else if(J===0)Ae=1/ve,pe=1/me;else{const ge=ve*J,ye=me*J;Ae=ge<1?1/ge:1,pe=ye<1?1/ye:1}}else{const ve=Math.abs(ne*ue-oe*ce),me=Math.hypot(ne,oe),ge=Math.hypot(ce,ue);if(J===0)Ae=ge/ve,pe=me/ve;else{const ye=J*ve;Ae=ge>ye?ge/ye:1,pe=me>ye?me/ye:1}}this._cachedScaleForStroking[0]=Ae,this._cachedScaleForStroking[1]=pe}return this._cachedScaleForStroking}rescaleAndStroke(J,ne){const{ctx:oe,current:{lineWidth:ce}}=this,[ue,Ae]=this.getScaleForStroking();if(ue===Ae){oe.lineWidth=(ce||1)*ue,oe.stroke(J);return}const pe=oe.getLineDash();ne&&oe.save(),oe.scale(ue,Ae),SCALE_MATRIX.a=1/ue,SCALE_MATRIX.d=1/Ae;const ve=new Path2D;if(ve.addPath(J,SCALE_MATRIX),pe.length>0){const me=Math.max(ue,Ae);oe.setLineDash(pe.map(ge=>ge/me)),oe.lineDashOffset/=me}oe.lineWidth=ce||1,oe.stroke(ve),ne&&oe.restore()}isContentVisible(){for(let J=this.markedContentStack.length-1;J>=0;J--)if(!this.markedContentStack[J].visible)return!1;return!0}};Aa=new WeakSet,D0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},O0=function(){if(this.pageColors){const J=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(J!=="none"){const ne=this.ctx.filter;this.ctx.filter=J,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=ne}}},L0=function(J,ne,oe){const ce=new Path2D;return ce.addPath(J,new DOMMatrix(oe).invertSelf().multiplySelf(ne)),ce};let CanvasGraphics=bg;for(const K in OPS)CanvasGraphics.prototype[K]!==void 0&&(CanvasGraphics.prototype[OPS[K]]=CanvasGraphics.prototype[K]);var Pu,Uu,Kd,Hu,CA;const cu=class cu{constructor(J){yt(this,Hu);yt(this,Pu);yt(this,Uu);yt(this,Kd);ht(this,Pu,J),ht(this,Uu,new DataView(Ze(this,Pu))),ht(this,Kd,new TextDecoder)}static write(J){const ne=new TextEncoder,oe={};let ce=0;for(const me of cu.strings){const ge=ne.encode(J[me]);oe[me]=ge,ce+=4+ge.length}const ue=new ArrayBuffer(ce),Ae=new Uint8Array(ue),pe=new DataView(ue);let ve=0;for(const me of cu.strings){const ge=oe[me],ye=ge.length;pe.setUint32(ve,ye),Ae.set(ge,ve+4),ve+=4+ye}return assert(ve===ue.byteLength,"CssFontInfo.write: Buffer overflow"),ue}get fontFamily(){return bt(this,Hu,CA).call(this,0)}get fontWeight(){return bt(this,Hu,CA).call(this,1)}get italicAngle(){return bt(this,Hu,CA).call(this,2)}};Pu=new WeakMap,Uu=new WeakMap,Kd=new WeakMap,Hu=new WeakSet,CA=function(J){assert(J<cu.strings.length,"Invalid string index");let ne=0;for(let ce=0;ce<J;ce++)ne+=Ze(this,Uu).getUint32(ne)+4;const oe=Ze(this,Uu).getUint32(ne);return Ze(this,Kd).decode(new Uint8Array(Ze(this,Pu),ne+4,oe))},wr(cu,"strings",["fontFamily","fontWeight","italicAngle"]);let CssFontInfo=cu;var Jo,Ra,hc,pc,rd;const uu=class uu{constructor(J){yt(this,pc);yt(this,Jo);yt(this,Ra);yt(this,hc);ht(this,Jo,J),ht(this,Ra,new DataView(Ze(this,Jo))),ht(this,hc,new TextDecoder)}static write(J){const ne=new TextEncoder,oe={};let ce=0;for(const xe of uu.strings){const _e=ne.encode(J[xe]);oe[xe]=_e,ce+=4+_e.length}ce+=4;let ue,Ae,pe=1+ce;J.style&&(ue=ne.encode(J.style.style),Ae=ne.encode(J.style.weight),pe+=4+ue.length+4+Ae.length);const ve=new ArrayBuffer(pe),me=new Uint8Array(ve),ge=new DataView(ve);let ye=0;ge.setUint8(ye++,J.guessFallback?1:0),ge.setUint32(ye,0),ye+=4,ce=0;for(const xe of uu.strings){const _e=oe[xe],$e=_e.length;ce+=4+$e,ge.setUint32(ye,$e),me.set(_e,ye+4),ye+=4+$e}return ge.setUint32(ye-ce-4,ce),J.style&&(ge.setUint32(ye,ue.length),me.set(ue,ye+4),ye+=4+ue.length,ge.setUint32(ye,Ae.length),me.set(Ae,ye+4),ye+=4+Ae.length),assert(ye<=ve.byteLength,"SubstitionInfo.write: Buffer overflow"),ve.transferToFixedLength(ye)}get guessFallback(){return Ze(this,Ra).getUint8(0)!==0}get css(){return bt(this,pc,rd).call(this,0)}get loadedName(){return bt(this,pc,rd).call(this,1)}get baseFontName(){return bt(this,pc,rd).call(this,2)}get src(){return bt(this,pc,rd).call(this,3)}get style(){let J=1;J+=4+Ze(this,Ra).getUint32(J);const ne=Ze(this,Ra).getUint32(J),oe=Ze(this,hc).decode(new Uint8Array(Ze(this,Jo),J+4,ne));J+=4+ne;const ce=Ze(this,Ra).getUint32(J),ue=Ze(this,hc).decode(new Uint8Array(Ze(this,Jo),J+4,ce));return{style:oe,weight:ue}}};Jo=new WeakMap,Ra=new WeakMap,hc=new WeakMap,pc=new WeakSet,rd=function(J){assert(J<uu.strings.length,"Invalid string index");let ne=5;for(let ce=0;ce<J;ce++)ne+=Ze(this,Ra).getUint32(ne)+4;const oe=Ze(this,Ra).getUint32(ne);return Ze(this,hc).decode(new Uint8Array(Ze(this,Jo),ne+4,oe))},wr(uu,"strings",["css","loadedName","baseFontName","src"]);let SystemFontInfo=uu;var ju,Vu,Qu,Ku,ys,Ba,qd,Xn,gi,Zs,NA,nd;const mn=class mn{constructor({data:J,extra:ne}){yt(this,gi);yt(this,Ba);yt(this,qd);yt(this,Xn);ht(this,Ba,J),ht(this,qd,new TextDecoder),ht(this,Xn,new DataView(Ze(this,Ba))),ne&&Object.assign(this,ne)}get black(){return bt(this,gi,Zs).call(this,0)}get bold(){return bt(this,gi,Zs).call(this,1)}get disableFontFace(){return bt(this,gi,Zs).call(this,2)}get fontExtraProperties(){return bt(this,gi,Zs).call(this,3)}get isInvalidPDFjsFont(){return bt(this,gi,Zs).call(this,4)}get isType3Font(){return bt(this,gi,Zs).call(this,5)}get italic(){return bt(this,gi,Zs).call(this,6)}get missingFile(){return bt(this,gi,Zs).call(this,7)}get remeasure(){return bt(this,gi,Zs).call(this,8)}get vertical(){return bt(this,gi,Zs).call(this,9)}get ascent(){return bt(this,gi,NA).call(this,0)}get defaultWidth(){return bt(this,gi,NA).call(this,1)}get descent(){return bt(this,gi,NA).call(this,2)}get bbox(){let J=Ze(mn,Vu);if(Ze(this,Xn).getUint8(J)===0)return;J+=1;const oe=[];for(let ce=0;ce<4;ce++)oe.push(Ze(this,Xn).getInt16(J,!0)),J+=2;return oe}get fontMatrix(){let J=Ze(mn,Qu);if(Ze(this,Xn).getUint8(J)===0)return;J+=1;const oe=[];for(let ce=0;ce<6;ce++)oe.push(Ze(this,Xn).getFloat64(J,!0)),J+=8;return oe}get defaultVMetrics(){let J=Ze(mn,Ku);if(Ze(this,Xn).getUint8(J)===0)return;J+=1;const oe=[];for(let ce=0;ce<3;ce++)oe.push(Ze(this,Xn).getInt16(J,!0)),J+=2;return oe}get fallbackName(){return bt(this,gi,nd).call(this,0)}get loadedName(){return bt(this,gi,nd).call(this,1)}get mimetype(){return bt(this,gi,nd).call(this,2)}get name(){return bt(this,gi,nd).call(this,3)}get data(){let J=Ze(mn,ys);const ne=Ze(this,Xn).getUint32(J);J+=4+ne;const oe=Ze(this,Xn).getUint32(J);J+=4+oe;const ce=Ze(this,Xn).getUint32(J);J+=4+ce;const ue=Ze(this,Xn).getUint32(J);if(ue!==0)return new Uint8Array(Ze(this,Ba),J+4,ue)}clearData(){let J=Ze(mn,ys);const ne=Ze(this,Xn).getUint32(J);J+=4+ne;const oe=Ze(this,Xn).getUint32(J);J+=4+oe;const ce=Ze(this,Xn).getUint32(J);J+=4+ce;const ue=Ze(this,Xn).getUint32(J);new Uint8Array(Ze(this,Ba),J+4,ue).fill(0),Ze(this,Xn).setUint32(J,0)}get cssFontInfo(){let J=Ze(mn,ys);const ne=Ze(this,Xn).getUint32(J);J+=4+ne;const oe=Ze(this,Xn).getUint32(J);J+=4+oe;const ce=Ze(this,Xn).getUint32(J);if(ce===0)return null;const ue=new Uint8Array(ce);return ue.set(new Uint8Array(Ze(this,Ba),J+4,ce)),new CssFontInfo(ue.buffer)}get systemFontInfo(){let J=Ze(mn,ys);const ne=Ze(this,Xn).getUint32(J);J+=4+ne;const oe=Ze(this,Xn).getUint32(J);if(oe===0)return null;const ce=new Uint8Array(oe);return ce.set(new Uint8Array(Ze(this,Ba),J+4,oe)),new SystemFontInfo(ce.buffer)}static write(J){const ne=J.systemFontInfo?SystemFontInfo.write(J.systemFontInfo):null,oe=J.cssFontInfo?CssFontInfo.write(J.cssFontInfo):null,ce=new TextEncoder,ue={};let Ae=0;for(const Ie of mn.strings)ue[Ie]=ce.encode(J[Ie]),Ae+=4+ue[Ie].length;const pe=Ze(mn,ys)+4+Ae+4+(ne?ne.byteLength:0)+4+(oe?oe.byteLength:0)+4+(J.data?J.data.length:0),ve=new ArrayBuffer(pe),me=new Uint8Array(ve),ge=new DataView(ve);let ye=0;const xe=mn.bools.length;let _e=0,$e=0;for(let Ie=0;Ie<xe;Ie++){const Fe=J[mn.bools[Ie]];_e|=(Fe===void 0?0:Fe?2:1)<<$e,$e+=2,($e===8||Ie===xe-1)&&(ge.setUint8(ye++,_e),_e=0,$e=0)}assert(ye===Ze(mn,ju),"FontInfo.write: Boolean properties offset mismatch");for(const Ie of mn.numbers)ge.setFloat64(ye,J[Ie]),ye+=8;if(assert(ye===Ze(mn,Vu),"FontInfo.write: Number properties offset mismatch"),J.bbox){ge.setUint8(ye++,4);for(const Ie of J.bbox)ge.setInt16(ye,Ie,!0),ye+=2}else ge.setUint8(ye++,0),ye+=2*4;if(assert(ye===Ze(mn,Qu),"FontInfo.write: BBox properties offset mismatch"),J.fontMatrix){ge.setUint8(ye++,6);for(const Ie of J.fontMatrix)ge.setFloat64(ye,Ie,!0),ye+=8}else ge.setUint8(ye++,0),ye+=8*6;if(assert(ye===Ze(mn,Ku),"FontInfo.write: FontMatrix properties offset mismatch"),J.defaultVMetrics){ge.setUint8(ye++,1);for(const Ie of J.defaultVMetrics)ge.setInt16(ye,Ie,!0),ye+=2}else ge.setUint8(ye++,0),ye+=3*2;assert(ye===Ze(mn,ys),"FontInfo.write: DefaultVMetrics properties offset mismatch"),ge.setUint32(Ze(mn,ys),0),ye+=4;for(const Ie of mn.strings){const Fe=ue[Ie],ke=Fe.length;ge.setUint32(ye,ke),me.set(Fe,ye+4),ye+=4+ke}if(ge.setUint32(Ze(mn,ys),ye-Ze(mn,ys)-4),!ne)ge.setUint32(ye,0),ye+=4;else{const Ie=ne.byteLength;ge.setUint32(ye,Ie),assert(ye+4+Ie<=ve.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),me.set(new Uint8Array(ne),ye+4),ye+=4+Ie}if(!oe)ge.setUint32(ye,0),ye+=4;else{const Ie=oe.byteLength;ge.setUint32(ye,Ie),assert(ye+4+Ie<=ve.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),me.set(new Uint8Array(oe),ye+4),ye+=4+Ie}return J.data===void 0?(ge.setUint32(ye,0),ye+=4):(ge.setUint32(ye,J.data.length),me.set(J.data,ye+4),ye+=4+J.data.length),assert(ye<=ve.byteLength,"FontInfo.write: Buffer overflow"),ve.transferToFixedLength(ye)}};ju=new WeakMap,Vu=new WeakMap,Qu=new WeakMap,Ku=new WeakMap,ys=new WeakMap,Ba=new WeakMap,qd=new WeakMap,Xn=new WeakMap,gi=new WeakSet,Zs=function(J){assert(J<mn.bools.length,"Invalid boolean index");const ne=Math.floor(J/4),oe=J*2%8,ce=Ze(this,Xn).getUint8(ne)>>oe&3;return ce===0?void 0:ce===2},NA=function(J){return assert(J<mn.numbers.length,"Invalid number index"),Ze(this,Xn).getFloat64(Ze(mn,ju)+J*8)},nd=function(J){assert(J<mn.strings.length,"Invalid string index");let ne=Ze(mn,ys)+4;for(let ue=0;ue<J;ue++)ne+=Ze(this,Xn).getUint32(ne)+4;const oe=Ze(this,Xn).getUint32(ne),ce=new Uint8Array(oe);return ce.set(new Uint8Array(Ze(this,Ba),ne+4,oe)),Ze(this,qd).decode(ce)},wr(mn,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),wr(mn,"numbers",["ascent","defaultWidth","descent"]),wr(mn,"strings",["fallbackName","loadedName","mimetype","name"]),yt(mn,ju,Math.ceil(mn.bools.length*2/8)),yt(mn,Vu,Ze(mn,ju)+mn.numbers.length*8),yt(mn,Qu,Ze(mn,Vu)+1+2*4),yt(mn,Ku,Ze(mn,Qu)+1+8*6),yt(mn,ys,Ze(mn,Ku)+1+2*3);let FontInfo=mn;var Gd,zd;class GlobalWorkerOptions{static get workerPort(){return Ze(this,Gd)}static set workerPort(J){if(!(typeof Worker<"u"&&J instanceof Worker)&&J!==null)throw new Error("Invalid `workerPort` type.");ht(this,Gd,J)}static get workerSrc(){return Ze(this,zd)}static set workerSrc(J){if(typeof J!="string")throw new Error("Invalid `workerSrc` type.");ht(this,zd,J)}}Gd=new WeakMap,zd=new WeakMap,yt(GlobalWorkerOptions,Gd,null),yt(GlobalWorkerOptions,zd,"");var qu,Wd;class Metadata{constructor({parsedData:J,rawData:ne}){yt(this,qu);yt(this,Wd);ht(this,qu,J),ht(this,Wd,ne)}getRaw(){return Ze(this,Wd)}get(J){return Ze(this,qu).get(J)??null}[Symbol.iterator](){return Ze(this,qu).entries()}}qu=new WeakMap,Wd=new WeakMap;const INTERNAL=Symbol("INTERNAL");var Yd,Xd,Zd,Gu;class OptionalContentGroup{constructor(J,{name:ne,intent:oe,usage:ce,rbGroups:ue}){yt(this,Yd,!1);yt(this,Xd,!1);yt(this,Zd,!1);yt(this,Gu,!0);ht(this,Yd,!!(J&RenderingIntentFlag.DISPLAY)),ht(this,Xd,!!(J&RenderingIntentFlag.PRINT)),this.name=ne,this.intent=oe,this.usage=ce,this.rbGroups=ue}get visible(){if(Ze(this,Zd))return Ze(this,Gu);if(!Ze(this,Gu))return!1;const{print:J,view:ne}=this.usage;return Ze(this,Yd)?(ne==null?void 0:ne.viewState)!=="OFF":Ze(this,Xd)?(J==null?void 0:J.printState)!=="OFF":!0}_setVisible(J,ne,oe=!1){J!==INTERNAL&&unreachable$1("Internal method `_setVisible` called."),ht(this,Zd,oe),ht(this,Gu,ne)}}Yd=new WeakMap,Xd=new WeakMap,Zd=new WeakMap,Gu=new WeakMap;var el,Zn,zu,Wu,Jd,F0;class OptionalContentConfig{constructor(J,ne=RenderingIntentFlag.DISPLAY){yt(this,Jd);yt(this,el,null);yt(this,Zn,new Map);yt(this,zu,null);yt(this,Wu,null);if(this.renderingIntent=ne,this.name=null,this.creator=null,J!==null){this.name=J.name,this.creator=J.creator,ht(this,Wu,J.order);for(const oe of J.groups)Ze(this,Zn).set(oe.id,new OptionalContentGroup(ne,oe));if(J.baseState==="OFF")for(const oe of Ze(this,Zn).values())oe._setVisible(INTERNAL,!1);for(const oe of J.on)Ze(this,Zn).get(oe)._setVisible(INTERNAL,!0);for(const oe of J.off)Ze(this,Zn).get(oe)._setVisible(INTERNAL,!1);ht(this,zu,this.getHash())}}isVisible(J){if(Ze(this,Zn).size===0)return!0;if(!J)return info("Optional content group not defined."),!0;if(J.type==="OCG")return Ze(this,Zn).has(J.id)?Ze(this,Zn).get(J.id).visible:(warn$2(`Optional content group not found: ${J.id}`),!0);if(J.type==="OCMD"){if(J.expression)return bt(this,Jd,F0).call(this,J.expression);if(!J.policy||J.policy==="AnyOn"){for(const ne of J.ids){if(!Ze(this,Zn).has(ne))return warn$2(`Optional content group not found: ${ne}`),!0;if(Ze(this,Zn).get(ne).visible)return!0}return!1}else if(J.policy==="AllOn"){for(const ne of J.ids){if(!Ze(this,Zn).has(ne))return warn$2(`Optional content group not found: ${ne}`),!0;if(!Ze(this,Zn).get(ne).visible)return!1}return!0}else if(J.policy==="AnyOff"){for(const ne of J.ids){if(!Ze(this,Zn).has(ne))return warn$2(`Optional content group not found: ${ne}`),!0;if(!Ze(this,Zn).get(ne).visible)return!0}return!1}else if(J.policy==="AllOff"){for(const ne of J.ids){if(!Ze(this,Zn).has(ne))return warn$2(`Optional content group not found: ${ne}`),!0;if(Ze(this,Zn).get(ne).visible)return!1}return!0}return warn$2(`Unknown optional content policy ${J.policy}.`),!0}return warn$2(`Unknown group type ${J.type}.`),!0}setVisibility(J,ne=!0,oe=!0){var ue;const ce=Ze(this,Zn).get(J);if(!ce){warn$2(`Optional content group not found: ${J}`);return}if(oe&&ne&&ce.rbGroups.length)for(const Ae of ce.rbGroups)for(const pe of Ae)pe!==J&&((ue=Ze(this,Zn).get(pe))==null||ue._setVisible(INTERNAL,!1,!0));ce._setVisible(INTERNAL,!!ne,!0),ht(this,el,null)}setOCGState({state:J,preserveRB:ne}){let oe;for(const ce of J){switch(ce){case"ON":case"OFF":case"Toggle":oe=ce;continue}const ue=Ze(this,Zn).get(ce);if(ue)switch(oe){case"ON":this.setVisibility(ce,!0,ne);break;case"OFF":this.setVisibility(ce,!1,ne);break;case"Toggle":this.setVisibility(ce,!ue.visible,ne);break}}ht(this,el,null)}get hasInitialVisibility(){return Ze(this,zu)===null||this.getHash()===Ze(this,zu)}getOrder(){return Ze(this,Zn).size?Ze(this,Wu)?Ze(this,Wu).slice():[...Ze(this,Zn).keys()]:null}getGroup(J){return Ze(this,Zn).get(J)||null}getHash(){if(Ze(this,el)!==null)return Ze(this,el);const J=new MurmurHash3_64;for(const[ne,oe]of Ze(this,Zn))J.update(`${ne}:${oe.visible}`);return ht(this,el,J.hexdigest())}[Symbol.iterator](){return Ze(this,Zn).entries()}}el=new WeakMap,Zn=new WeakMap,zu=new WeakMap,Wu=new WeakMap,Jd=new WeakSet,F0=function(J){const ne=J.length;if(ne<2)return!0;const oe=J[0];for(let ce=1;ce<ne;ce++){const ue=J[ce];let Ae;if(Array.isArray(ue))Ae=bt(this,Jd,F0).call(this,ue);else if(Ze(this,Zn).has(ue))Ae=Ze(this,Zn).get(ue).visible;else return warn$2(`Optional content group not found: ${ue}`),!0;switch(oe){case"And":if(!Ae)return!1;break;case"Or":if(Ae)return!0;break;case"Not":return!Ae;default:return!0}}return oe==="And"};class PDFDataTransportStream{constructor(J,{disableRange:ne=!1,disableStream:oe=!1}){assert(J,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:ce,initialData:ue,progressiveDone:Ae,contentDispositionFilename:pe}=J;if(this._queuedChunks=[],this._progressiveDone=Ae,this._contentDispositionFilename=pe,(ue==null?void 0:ue.length)>0){const ve=ue instanceof Uint8Array&&ue.byteLength===ue.buffer.byteLength?ue.buffer:new Uint8Array(ue).buffer;this._queuedChunks.push(ve)}this._pdfDataRangeTransport=J,this._isStreamingSupported=!oe,this._isRangeSupported=!ne,this._contentLength=ce,this._fullRequestReader=null,this._rangeReaders=[],J.addRangeListener((ve,me)=>{this._onReceiveData({begin:ve,chunk:me})}),J.addProgressListener((ve,me)=>{this._onProgress({loaded:ve,total:me})}),J.addProgressiveReadListener(ve=>{this._onReceiveData({chunk:ve})}),J.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),J.transportReady()}_onReceiveData({begin:J,chunk:ne}){const oe=ne instanceof Uint8Array&&ne.byteLength===ne.buffer.byteLength?ne.buffer:new Uint8Array(ne).buffer;if(J===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(oe):this._queuedChunks.push(oe);else{const ce=this._rangeReaders.some(function(ue){return ue._begin!==J?!1:(ue._enqueue(oe),!0)});assert(ce,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var J;return((J=this._fullRequestReader)==null?void 0:J._loaded)??0}_onProgress(J){var ne,oe,ce,ue;J.total===void 0?(oe=(ne=this._rangeReaders[0])==null?void 0:ne.onProgress)==null||oe.call(ne,{loaded:J.loaded}):(ue=(ce=this._fullRequestReader)==null?void 0:ce.onProgress)==null||ue.call(ce,{loaded:J.loaded,total:J.total})}_onProgressiveDone(){var J;(J=this._fullRequestReader)==null||J.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(J){const ne=this._rangeReaders.indexOf(J);ne>=0&&this._rangeReaders.splice(ne,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const J=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,J,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(J,ne){if(ne<=this._progressiveDataLength)return null;const oe=new PDFDataTransportStreamRangeReader(this,J,ne);return this._pdfDataRangeTransport.requestDataRange(J,ne),this._rangeReaders.push(oe),oe}cancelAllRequests(J){var ne;(ne=this._fullRequestReader)==null||ne.cancel(J);for(const oe of this._rangeReaders.slice(0))oe.cancel(J);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(J,ne,oe=!1,ce=null){this._stream=J,this._done=oe||!1,this._filename=isPdfFile(ce)?ce:null,this._queuedChunks=ne||[],this._loaded=0;for(const ue of this._queuedChunks)this._loaded+=ue.byteLength;this._requests=[],this._headersReady=Promise.resolve(),J._fullRequestReader=this,this.onProgress=null}_enqueue(J){this._done||(this._requests.length>0?this._requests.shift().resolve({value:J,done:!1}):this._queuedChunks.push(J),this._loaded+=J.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const J=Promise.withResolvers();return this._requests.push(J),J.promise}cancel(J){this._done=!0;for(const ne of this._requests)ne.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(J,ne,oe){this._stream=J,this._begin=ne,this._end=oe,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(J){if(!this._done){if(this._requests.length===0)this._queuedChunk=J;else{this._requests.shift().resolve({value:J,done:!1});for(const oe of this._requests)oe.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const ne=this._queuedChunk;return this._queuedChunk=null,{value:ne,done:!1}}if(this._done)return{value:void 0,done:!0};const J=Promise.withResolvers();return this._requests.push(J),J.promise}cancel(J){this._done=!0;for(const ne of this._requests)ne.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(K){let J=!0,ne=oe("filename\\*","i").exec(K);if(ne){ne=ne[1];let ge=pe(ne);return ge=unescape(ge),ge=ve(ge),ge=me(ge),ue(ge)}if(ne=Ae(K),ne){const ge=me(ne);return ue(ge)}if(ne=oe("filename","i").exec(K),ne){ne=ne[1];let ge=pe(ne);return ge=me(ge),ue(ge)}function oe(ge,ye){return new RegExp("(?:^|;)\\s*"+ge+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',ye)}function ce(ge,ye){if(ge){if(!/^[\x00-\xFF]+$/.test(ye))return ye;try{const xe=new TextDecoder(ge,{fatal:!0}),_e=stringToBytes(ye);ye=xe.decode(_e),J=!1}catch{}}return ye}function ue(ge){return J&&/[\x80-\xff]/.test(ge)&&(ge=ce("utf-8",ge),J&&(ge=ce("iso-8859-1",ge))),ge}function Ae(ge){const ye=[];let xe;const _e=oe("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(xe=_e.exec(ge))!==null;){let[,Ie,Fe,ke]=xe;if(Ie=parseInt(Ie,10),Ie in ye){if(Ie===0)break;continue}ye[Ie]=[Fe,ke]}const $e=[];for(let Ie=0;Ie<ye.length&&Ie in ye;++Ie){let[Fe,ke]=ye[Ie];ke=pe(ke),Fe&&(ke=unescape(ke),Ie===0&&(ke=ve(ke))),$e.push(ke)}return $e.join("")}function pe(ge){if(ge.startsWith('"')){const ye=ge.slice(1).split('\\"');for(let xe=0;xe<ye.length;++xe){const _e=ye[xe].indexOf('"');_e!==-1&&(ye[xe]=ye[xe].slice(0,_e),ye.length=xe+1),ye[xe]=ye[xe].replaceAll(/\\(.)/g,"$1")}ge=ye.join('"')}return ge}function ve(ge){const ye=ge.indexOf("'");if(ye===-1)return ge;const xe=ge.slice(0,ye),$e=ge.slice(ye+1).replace(/^[^']*'/,"");return ce(xe,$e)}function me(ge){return!ge.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ge)?ge:ge.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(ye,xe,_e,$e){if(_e==="q"||_e==="Q")return $e=$e.replaceAll("_"," "),$e=$e.replaceAll(/=([0-9a-fA-F]{2})/g,function(Ie,Fe){return String.fromCharCode(parseInt(Fe,16))}),ce(xe,$e);try{$e=atob($e)}catch{}return ce(xe,$e)})}return""}function createHeaders(K,J){const ne=new Headers;if(!K||!J||typeof J!="object")return ne;for(const oe in J){const ce=J[oe];ce!==void 0&&ne.append(oe,ce)}return ne}function getResponseOrigin(K){var J;return((J=URL.parse(K))==null?void 0:J.origin)??null}function validateRangeRequestCapabilities({responseHeaders:K,isHttp:J,rangeChunkSize:ne,disableRange:oe}){const ce={allowRangeRequests:!1,suggestedLength:void 0},ue=parseInt(K.get("Content-Length"),10);return!Number.isInteger(ue)||(ce.suggestedLength=ue,ue<=2*ne)||oe||!J||K.get("Accept-Ranges")!=="bytes"||(K.get("Content-Encoding")||"identity")!=="identity"||(ce.allowRangeRequests=!0),ce}function extractFilenameFromHeader(K){const J=K.get("Content-Disposition");if(J){let ne=getFilenameFromContentDispositionHeader(J);if(ne.includes("%"))try{ne=decodeURIComponent(ne)}catch{}if(isPdfFile(ne))return ne}return null}function createResponseError(K,J){return new ResponseException(`Unexpected server response (${K}) while retrieving PDF "${J}".`,K,K===404||K===0&&J.startsWith("file:"))}function validateResponseStatus(K){return K===200||K===206}function createFetchOptions(K,J,ne){return{method:"GET",headers:K,signal:ne.signal,mode:"cors",credentials:J?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(K){return K instanceof Uint8Array?K.buffer:K instanceof ArrayBuffer?K:(warn$2(`getArrayBuffer - unexpected data format: ${K}`),new Uint8Array(K).buffer)}class PDFFetchStream{constructor(J){wr(this,"_responseOrigin",null);this.source=J,this.isHttp=/^https?:/i.test(J.url),this.headers=createHeaders(this.isHttp,J.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var J;return((J=this._fullRequestReader)==null?void 0:J._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(J,ne){if(ne<=this._progressiveDataLength)return null;const oe=new PDFFetchStreamRangeReader(this,J,ne);return this._rangeRequestReaders.push(oe),oe}cancelAllRequests(J){var ne;(ne=this._fullRequestReader)==null||ne.cancel(J);for(const oe of this._rangeRequestReaders.slice(0))oe.cancel(J)}}class PDFFetchStreamReader{constructor(J){this._stream=J,this._reader=null,this._loaded=0,this._filename=null;const ne=J.source;this._withCredentials=ne.withCredentials||!1,this._contentLength=ne.length,this._headersCapability=Promise.withResolvers(),this._disableRange=ne.disableRange||!1,this._rangeChunkSize=ne.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ne.disableStream,this._isRangeSupported=!ne.disableRange;const oe=new Headers(J.headers),ce=ne.url;fetch(ce,createFetchOptions(oe,this._withCredentials,this._abortController)).then(ue=>{if(J._responseOrigin=getResponseOrigin(ue.url),!validateResponseStatus(ue.status))throw createResponseError(ue.status,ce);this._reader=ue.body.getReader(),this._headersCapability.resolve();const Ae=ue.headers,{allowRangeRequests:pe,suggestedLength:ve}=validateRangeRequestCapabilities({responseHeaders:Ae,isHttp:J.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=pe,this._contentLength=ve||this._contentLength,this._filename=extractFilenameFromHeader(Ae),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var oe;await this._headersCapability.promise;const{value:J,done:ne}=await this._reader.read();return ne?{value:J,done:ne}:(this._loaded+=J.byteLength,(oe=this.onProgress)==null||oe.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(J),done:!1})}cancel(J){var ne;(ne=this._reader)==null||ne.cancel(J),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(J,ne,oe){this._stream=J,this._reader=null,this._loaded=0;const ce=J.source;this._withCredentials=ce.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!ce.disableStream,this._abortController=new AbortController;const ue=new Headers(J.headers);ue.append("Range",`bytes=${ne}-${oe-1}`);const Ae=ce.url;fetch(Ae,createFetchOptions(ue,this._withCredentials,this._abortController)).then(pe=>{const ve=getResponseOrigin(pe.url);if(ve!==J._responseOrigin)throw new Error(`Expected range response-origin "${ve}" to match "${J._responseOrigin}".`);if(!validateResponseStatus(pe.status))throw createResponseError(pe.status,Ae);this._readCapability.resolve(),this._reader=pe.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var oe;await this._readCapability.promise;const{value:J,done:ne}=await this._reader.read();return ne?{value:J,done:ne}:(this._loaded+=J.byteLength,(oe=this.onProgress)==null||oe.call(this,{loaded:this._loaded}),{value:getArrayBuffer(J),done:!1})}cancel(J){var ne;(ne=this._reader)==null||ne.cancel(J),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(K){const J=K.response;return typeof J!="string"?J:stringToBytes(J).buffer}class NetworkManager{constructor({url:J,httpHeaders:ne,withCredentials:oe}){wr(this,"_responseOrigin",null);this.url=J,this.isHttp=/^https?:/i.test(J),this.headers=createHeaders(this.isHttp,ne),this.withCredentials=oe||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(J){const ne=new XMLHttpRequest,oe=this.currXhrId++,ce=this.pendingRequests[oe]={xhr:ne};ne.open("GET",this.url),ne.withCredentials=this.withCredentials;for(const[ue,Ae]of this.headers)ne.setRequestHeader(ue,Ae);return this.isHttp&&"begin"in J&&"end"in J?(ne.setRequestHeader("Range",`bytes=${J.begin}-${J.end-1}`),ce.expectedStatus=PARTIAL_CONTENT_RESPONSE):ce.expectedStatus=OK_RESPONSE,ne.responseType="arraybuffer",assert(J.onError,"Expected `onError` callback to be provided."),ne.onerror=()=>{J.onError(ne.status)},ne.onreadystatechange=this.onStateChange.bind(this,oe),ne.onprogress=this.onProgress.bind(this,oe),ce.onHeadersReceived=J.onHeadersReceived,ce.onDone=J.onDone,ce.onError=J.onError,ce.onProgress=J.onProgress,ne.send(null),oe}onProgress(J,ne){var ce;const oe=this.pendingRequests[J];oe&&((ce=oe.onProgress)==null||ce.call(oe,ne))}onStateChange(J,ne){const oe=this.pendingRequests[J];if(!oe)return;const ce=oe.xhr;if(ce.readyState>=2&&oe.onHeadersReceived&&(oe.onHeadersReceived(),delete oe.onHeadersReceived),ce.readyState!==4||!(J in this.pendingRequests))return;if(delete this.pendingRequests[J],ce.status===0&&this.isHttp){oe.onError(ce.status);return}const ue=ce.status||OK_RESPONSE;if(!(ue===OK_RESPONSE&&oe.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&ue!==oe.expectedStatus){oe.onError(ce.status);return}const pe=network_getArrayBuffer(ce);if(ue===PARTIAL_CONTENT_RESPONSE){const ve=ce.getResponseHeader("Content-Range"),me=/bytes (\d+)-(\d+)\/(\d+)/.exec(ve);me?oe.onDone({begin:parseInt(me[1],10),chunk:pe}):(warn$2('Missing or invalid "Content-Range" header.'),oe.onError(0))}else pe?oe.onDone({begin:0,chunk:pe}):oe.onError(ce.status)}getRequestXhr(J){return this.pendingRequests[J].xhr}isPendingRequest(J){return J in this.pendingRequests}abortRequest(J){const ne=this.pendingRequests[J].xhr;delete this.pendingRequests[J],ne.abort()}}class PDFNetworkStream{constructor(J){this._source=J,this._manager=new NetworkManager(J),this._rangeChunkSize=J.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(J){const ne=this._rangeRequestReaders.indexOf(J);ne>=0&&this._rangeRequestReaders.splice(ne,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(J,ne){const oe=new PDFNetworkStreamRangeRequestReader(this._manager,J,ne);return oe.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(oe),oe}cancelAllRequests(J){var ne;(ne=this._fullRequestReader)==null||ne.cancel(J);for(const oe of this._rangeRequestReaders.slice(0))oe.cancel(J)}}class PDFNetworkStreamFullRequestReader{constructor(J,ne){this._manager=J,this._url=ne.url,this._fullRequestId=J.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=ne.disableRange||!1,this._contentLength=ne.length,this._rangeChunkSize=ne.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const J=this._fullRequestId,ne=this._manager.getRequestXhr(J);this._manager._responseOrigin=getResponseOrigin(ne.responseURL);const oe=ne.getAllResponseHeaders(),ce=new Headers(oe?oe.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(pe=>{const[ve,...me]=pe.split(": ");return[ve,me.join(": ")]}):[]),{allowRangeRequests:ue,suggestedLength:Ae}=validateRangeRequestCapabilities({responseHeaders:ce,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});ue&&(this._isRangeSupported=!0),this._contentLength=Ae||this._contentLength,this._filename=extractFilenameFromHeader(ce),this._isRangeSupported&&this._manager.abortRequest(J),this._headersCapability.resolve()}_onDone(J){if(J&&(this._requests.length>0?this._requests.shift().resolve({value:J.chunk,done:!1}):this._cachedChunks.push(J.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ne of this._requests)ne.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(J){this._storedError=createResponseError(J,this._url),this._headersCapability.reject(this._storedError);for(const ne of this._requests)ne.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(J){var ne;(ne=this.onProgress)==null||ne.call(this,{loaded:J.loaded,total:J.lengthComputable?J.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const J=Promise.withResolvers();return this._requests.push(J),J.promise}cancel(J){this._done=!0,this._headersCapability.reject(J);for(const ne of this._requests)ne.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(J,ne,oe){this._manager=J,this._url=J.url,this._requestId=J.request({begin:ne,end:oe,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var ne;const J=getResponseOrigin((ne=this._manager.getRequestXhr(this._requestId))==null?void 0:ne.responseURL);J!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${J}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var J;(J=this.onClosed)==null||J.call(this,this)}_onDone(J){const ne=J.chunk;this._requests.length>0?this._requests.shift().resolve({value:ne,done:!1}):this._queuedChunk=ne,this._done=!0;for(const oe of this._requests)oe.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(J){this._storedError??(this._storedError=createResponseError(J,this._url));for(const ne of this._requests)ne.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(J){var ne;this.isStreamingSupported||(ne=this.onProgress)==null||ne.call(this,{loaded:J.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ne=this._queuedChunk;return this._queuedChunk=null,{value:ne,done:!1}}if(this._done)return{value:void 0,done:!0};const J=Promise.withResolvers();return this._requests.push(J),J.promise}cancel(J){this._done=!0;for(const ne of this._requests)ne.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(K){if(urlRegex.test(K))return new URL(K);const J=process$1.getBuiltinModule("url");return new URL(J.pathToFileURL(K))}class PDFNodeStream{constructor(J){this.source=J,this.url=parseUrlOrPath(J.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var J;return((J=this._fullRequestReader)==null?void 0:J._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(J,ne){if(ne<=this._progressiveDataLength)return null;const oe=new PDFNodeStreamFsRangeReader(this,J,ne);return this._rangeRequestReaders.push(oe),oe}cancelAllRequests(J){var ne;(ne=this._fullRequestReader)==null||ne.cancel(J);for(const oe of this._rangeRequestReaders.slice(0))oe.cancel(J)}}class PDFNodeStreamFsFullReader{constructor(J){this._url=J.url,this._done=!1,this._storedError=null,this.onProgress=null;const ne=J.source;this._contentLength=ne.length,this._loaded=0,this._filename=null,this._disableRange=ne.disableRange||!1,this._rangeChunkSize=ne.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!ne.disableStream,this._isRangeSupported=!ne.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const oe=process$1.getBuiltinModule("fs");oe.promises.lstat(this._url).then(ce=>{this._contentLength=ce.size,this._setReadableStream(oe.createReadStream(this._url)),this._headersCapability.resolve()},ce=>{ce.code==="ENOENT"&&(ce=createResponseError(0,this._url.href)),this._storedError=ce,this._headersCapability.reject(ce)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var oe;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const J=this._readableStream.read();return J===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=J.length,(oe=this.onProgress)==null||oe.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(J).buffer,done:!1})}cancel(J){if(!this._readableStream){this._error(J);return}this._readableStream.destroy(J)}_error(J){this._storedError=J,this._readCapability.resolve()}_setReadableStream(J){this._readableStream=J,J.on("readable",()=>{this._readCapability.resolve()}),J.on("end",()=>{J.destroy(),this._done=!0,this._readCapability.resolve()}),J.on("error",ne=>{this._error(ne)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(J,ne,oe){this._url=J.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const ce=J.source;this._isStreamingSupported=!ce.disableStream;const ue=process$1.getBuiltinModule("fs");this._setReadableStream(ue.createReadStream(this._url,{start:ne,end:oe-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var oe;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const J=this._readableStream.read();return J===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=J.length,(oe=this.onProgress)==null||oe.call(this,{loaded:this._loaded}),{value:new Uint8Array(J).buffer,done:!1})}cancel(J){if(!this._readableStream){this._error(J);return}this._readableStream.destroy(J)}_error(J){this._storedError=J,this._readCapability.resolve()}_setReadableStream(J){this._readableStream=J,J.on("readable",()=>{this._readCapability.resolve()}),J.on("end",()=>{J.destroy(),this._done=!0,this._readCapability.resolve()}),J.on("error",ne=>{this._error(ne)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");var xs,eh,k0;class PDFObjects{constructor(){yt(this,eh);yt(this,xs,Object.create(null))}get(J,ne=null){if(ne){const ce=bt(this,eh,k0).call(this,J);return ce.promise.then(()=>ne(ce.data)),null}const oe=Ze(this,xs)[J];if(!oe||oe.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${J}.`);return oe.data}has(J){const ne=Ze(this,xs)[J];return!!ne&&ne.data!==INITIAL_DATA}delete(J){const ne=Ze(this,xs)[J];return!ne||ne.data===INITIAL_DATA?!1:(delete Ze(this,xs)[J],!0)}resolve(J,ne=null){const oe=bt(this,eh,k0).call(this,J);oe.data=ne,oe.resolve()}clear(){var J;for(const ne in Ze(this,xs)){const{data:oe}=Ze(this,xs)[ne];(J=oe==null?void 0:oe.bitmap)==null||J.close()}ht(this,xs,Object.create(null))}*[Symbol.iterator](){for(const J in Ze(this,xs)){const{data:ne}=Ze(this,xs)[J];ne!==INITIAL_DATA&&(yield[J,ne])}}}xs=new WeakMap,eh=new WeakSet,k0=function(J){var ne;return(ne=Ze(this,xs))[J]||(ne[J]={...Promise.withResolvers(),data:INITIAL_DATA})};const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;var Mg,tl,ds,th,rh,gc,lo,nh,ih,mc,Yu,Xu,nl,Zu,sh,Ju,vc,ah,oh,pi,ef,yc,lh,il,tf,Io,Am,pm,P0,Ds,OA,U0,gm,mm;let TextLayer$1=(pi=class{constructor({textContentSource:J,container:ne,viewport:oe}){yt(this,Io);yt(this,tl,Promise.withResolvers());yt(this,ds,null);yt(this,th,!1);yt(this,rh,!!((Mg=globalThis.FontInspector)!=null&&Mg.enabled));yt(this,gc,null);yt(this,lo,null);yt(this,nh,0);yt(this,ih,0);yt(this,mc,null);yt(this,Yu,null);yt(this,Xu,0);yt(this,nl,0);yt(this,Zu,Object.create(null));yt(this,sh,[]);yt(this,Ju,null);yt(this,vc,[]);yt(this,ah,new WeakMap);yt(this,oh,null);var ve;if(J instanceof ReadableStream)ht(this,Ju,J);else if(typeof J=="object")ht(this,Ju,new ReadableStream({start(me){me.enqueue(J),me.close()}}));else throw new Error('No "textContentSource" parameter specified.');ht(this,ds,ht(this,Yu,ne)),ht(this,nl,oe.scale*OutputScale.pixelRatio),ht(this,Xu,oe.rotation),ht(this,lo,{div:null,properties:null,ctx:null});const{pageWidth:ce,pageHeight:ue,pageX:Ae,pageY:pe}=oe.rawDims;ht(this,oh,[1,0,0,-1,-Ae,pe+ue]),ht(this,ih,ce),ht(this,nh,ue),bt(ve=pi,Ds,gm).call(ve),setLayerDimensions(ne,oe),Ze(this,tl).promise.finally(()=>{Ze(pi,tf).delete(this),ht(this,lo,null),ht(this,Zu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:J,isFirefox:ne}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${J&&ne?"Calibri, ":""}sans-serif`],["monospace",`${J&&ne?"Lucida Console, ":""}monospace`]]))}render(){const J=()=>{Ze(this,mc).read().then(({value:ne,done:oe})=>{if(oe){Ze(this,tl).resolve();return}Ze(this,gc)??ht(this,gc,ne.lang),Object.assign(Ze(this,Zu),ne.styles),bt(this,Io,Am).call(this,ne.items),J()},Ze(this,tl).reject)};return ht(this,mc,Ze(this,Ju).getReader()),Ze(pi,tf).add(this),J(),Ze(this,tl).promise}update({viewport:J,onBefore:ne=null}){var ue;const oe=J.scale*OutputScale.pixelRatio,ce=J.rotation;if(ce!==Ze(this,Xu)&&(ne==null||ne(),ht(this,Xu,ce),setLayerDimensions(Ze(this,Yu),{rotation:ce})),oe!==Ze(this,nl)){ne==null||ne(),ht(this,nl,oe);const Ae={div:null,properties:null,ctx:bt(ue=pi,Ds,OA).call(ue,Ze(this,gc))};for(const pe of Ze(this,vc))Ae.properties=Ze(this,ah).get(pe),Ae.div=pe,bt(this,Io,P0).call(this,Ae)}}cancel(){var ne;const J=new AbortException("TextLayer task cancelled.");(ne=Ze(this,mc))==null||ne.cancel(J).catch(()=>{}),ht(this,mc,null),Ze(this,tl).reject(J)}get textDivs(){return Ze(this,vc)}get textContentItemsStr(){return Ze(this,sh)}static cleanup(){if(!(Ze(this,tf).size>0)){Ze(this,ef).clear();for(const{canvas:J}of Ze(this,yc).values())J.remove();Ze(this,yc).clear()}}},tl=new WeakMap,ds=new WeakMap,th=new WeakMap,rh=new WeakMap,gc=new WeakMap,lo=new WeakMap,nh=new WeakMap,ih=new WeakMap,mc=new WeakMap,Yu=new WeakMap,Xu=new WeakMap,nl=new WeakMap,Zu=new WeakMap,sh=new WeakMap,Ju=new WeakMap,vc=new WeakMap,ah=new WeakMap,oh=new WeakMap,ef=new WeakMap,yc=new WeakMap,lh=new WeakMap,il=new WeakMap,tf=new WeakMap,Io=new WeakSet,Am=function(J){var ce,ue;if(Ze(this,th))return;(ue=Ze(this,lo)).ctx??(ue.ctx=bt(ce=pi,Ds,OA).call(ce,Ze(this,gc)));const ne=Ze(this,vc),oe=Ze(this,sh);for(const Ae of J){if(ne.length>MAX_TEXT_DIVS_TO_RENDER){warn$2("Ignoring additional textDivs for performance reasons."),ht(this,th,!0);return}if(Ae.str===void 0){if(Ae.type==="beginMarkedContentProps"||Ae.type==="beginMarkedContent"){const pe=Ze(this,ds);ht(this,ds,document.createElement("span")),Ze(this,ds).classList.add("markedContent"),Ae.id&&Ze(this,ds).setAttribute("id",`${Ae.id}`),pe.append(Ze(this,ds))}else Ae.type==="endMarkedContent"&&ht(this,ds,Ze(this,ds).parentNode);continue}oe.push(Ae.str),bt(this,Io,pm).call(this,Ae)}},pm=function(J){var Ie;const ne=document.createElement("span"),oe={angle:0,canvasWidth:0,hasText:J.str!=="",hasEOL:J.hasEOL,fontSize:0};Ze(this,vc).push(ne);const ce=Util.transform(Ze(this,oh),J.transform);let ue=Math.atan2(ce[1],ce[0]);const Ae=Ze(this,Zu)[J.fontName];Ae.vertical&&(ue+=Math.PI/2);let pe=Ze(this,rh)&&Ae.fontSubstitution||Ae.fontFamily;pe=pi.fontFamilyMap.get(pe)||pe;const ve=Math.hypot(ce[2],ce[3]),me=ve*bt(Ie=pi,Ds,mm).call(Ie,pe,Ae,Ze(this,gc));let ge,ye;ue===0?(ge=ce[4],ye=ce[5]-me):(ge=ce[4]+me*Math.sin(ue),ye=ce[5]-me*Math.cos(ue));const xe="calc(var(--total-scale-factor) *",_e=ne.style;Ze(this,ds)===Ze(this,Yu)?(_e.left=`${(100*ge/Ze(this,ih)).toFixed(2)}%`,_e.top=`${(100*ye/Ze(this,nh)).toFixed(2)}%`):(_e.left=`${xe}${ge.toFixed(2)}px)`,_e.top=`${xe}${ye.toFixed(2)}px)`),_e.fontSize=`${xe}${(Ze(pi,il)*ve).toFixed(2)}px)`,_e.fontFamily=pe,oe.fontSize=ve,ne.setAttribute("role","presentation"),ne.textContent=J.str,ne.dir=J.dir,Ze(this,rh)&&(ne.dataset.fontName=Ae.fontSubstitutionLoadedName||J.fontName),ue!==0&&(oe.angle=ue*(180/Math.PI));let $e=!1;if(J.str.length>1)$e=!0;else if(J.str!==" "&&J.transform[0]!==J.transform[3]){const Fe=Math.abs(J.transform[0]),ke=Math.abs(J.transform[3]);Fe!==ke&&Math.max(Fe,ke)/Math.min(Fe,ke)>1.5&&($e=!0)}if($e&&(oe.canvasWidth=Ae.vertical?J.height:J.width),Ze(this,ah).set(ne,oe),Ze(this,lo).div=ne,Ze(this,lo).properties=oe,bt(this,Io,P0).call(this,Ze(this,lo)),oe.hasText&&Ze(this,ds).append(ne),oe.hasEOL){const Fe=document.createElement("br");Fe.setAttribute("role","presentation"),Ze(this,ds).append(Fe)}},P0=function(J){var pe;const{div:ne,properties:oe,ctx:ce}=J,{style:ue}=ne;let Ae="";if(Ze(pi,il)>1&&(Ae=`scale(${1/Ze(pi,il)})`),oe.canvasWidth!==0&&oe.hasText){const{fontFamily:ve}=ue,{canvasWidth:me,fontSize:ge}=oe;bt(pe=pi,Ds,U0).call(pe,ce,ge*Ze(this,nl),ve);const{width:ye}=ce.measureText(ne.textContent);ye>0&&(Ae=`scaleX(${me*Ze(this,nl)/ye}) ${Ae}`)}oe.angle!==0&&(Ae=`rotate(${oe.angle}deg) ${Ae}`),Ae.length>0&&(ue.transform=Ae)},Ds=new WeakSet,OA=function(J=null){let ne=Ze(this,yc).get(J||(J=""));if(!ne){const oe=document.createElement("canvas");oe.className="hiddenCanvasElement",oe.lang=J,document.body.append(oe),ne=oe.getContext("2d",{alpha:!1,willReadFrequently:!0}),Ze(this,yc).set(J,ne),Ze(this,lh).set(ne,{size:0,family:""})}return ne},U0=function(J,ne,oe){const ce=Ze(this,lh).get(J);ne===ce.size&&oe===ce.family||(J.font=`${ne}px ${oe}`,ce.size=ne,ce.family=oe)},gm=function(){if(Ze(this,il)!==null)return;const J=document.createElement("div");J.style.opacity=0,J.style.lineHeight=1,J.style.fontSize="1px",J.style.position="absolute",J.textContent="X",document.body.append(J),ht(this,il,J.getBoundingClientRect().height),J.remove()},mm=function(J,ne,oe){const ce=Ze(this,ef).get(J);if(ce)return ce;const ue=bt(this,Ds,OA).call(this,oe);ue.canvas.width=ue.canvas.height=DEFAULT_FONT_SIZE,bt(this,Ds,U0).call(this,ue,DEFAULT_FONT_SIZE,J);const Ae=ue.measureText(""),pe=Ae.fontBoundingBoxAscent,ve=Math.abs(Ae.fontBoundingBoxDescent);ue.canvas.width=ue.canvas.height=0;let me=.8;return pe?me=pe/(pe+ve):(util_FeatureTest.platform.isFirefox&&warn$2("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),ne.ascent?me=ne.ascent:ne.descent&&(me=1+ne.descent)),Ze(this,ef).set(J,me),me},yt(pi,Ds),yt(pi,ef,new Map),yt(pi,yc,new Map),yt(pi,lh,new WeakMap),yt(pi,il,null),yt(pi,tf,new Set),pi);const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(K={}){typeof K=="string"||K instanceof URL?K={url:K}:(K instanceof ArrayBuffer||ArrayBuffer.isView(K))&&(K={data:K});const J=new PDFDocumentLoadingTask,{docId:ne}=J,oe=K.url?getUrlProp(K.url):null,ce=K.data?getDataProp(K.data):null,ue=K.httpHeaders||null,Ae=K.withCredentials===!0,pe=K.password??null,ve=K.range instanceof PDFDataRangeTransport$1?K.range:null,me=Number.isInteger(K.rangeChunkSize)&&K.rangeChunkSize>0?K.rangeChunkSize:2**16;let ge=K.worker instanceof PDFWorker?K.worker:null;const ye=K.verbosity,xe=typeof K.docBaseUrl=="string"&&!isDataScheme(K.docBaseUrl)?K.docBaseUrl:null,_e=getFactoryUrlProp(K.cMapUrl),$e=K.cMapPacked!==!1,Ie=K.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),Fe=getFactoryUrlProp(K.iccUrl),ke=getFactoryUrlProp(K.standardFontDataUrl),je=K.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),We=getFactoryUrlProp(K.wasmUrl),ze=K.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),Xe=K.stopAtErrors!==!0,Je=Number.isInteger(K.maxImageSize)&&K.maxImageSize>-1?K.maxImageSize:-1,nt=K.isEvalSupported!==!1,et=typeof K.isOffscreenCanvasSupported=="boolean"?K.isOffscreenCanvasSupported:!isNodeJS,tt=typeof K.isImageDecoderSupported=="boolean"?K.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),st=Number.isInteger(K.canvasMaxAreaInBytes)?K.canvasMaxAreaInBytes:-1,qe=typeof K.disableFontFace=="boolean"?K.disableFontFace:isNodeJS,Se=K.fontExtraProperties===!0,Re=K.enableXfa===!0,Be=K.ownerDocument||globalThis.document,Ne=K.disableRange===!0,Ue=K.disableStream===!0,Ge=K.disableAutoFetch===!0,Ye=K.pdfBug===!0,Qe=K.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),Te=K.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),Ke=K.enableHWA===!0,rt=K.useWasm!==!1,it=ve?ve.length:K.length??NaN,at=typeof K.useSystemFonts=="boolean"?K.useSystemFonts:!isNodeJS&&!qe,lt=typeof K.useWorkerFetch=="boolean"?K.useWorkerFetch:!!(Ie===DOMCMapReaderFactory&&je===DOMStandardFontDataFactory&&ze===DOMWasmFactory&&_e&&ke&&We&&isValidFetchUrl(_e,document.baseURI)&&isValidFetchUrl(ke,document.baseURI)&&isValidFetchUrl(We,document.baseURI)),ct=null;setVerbosityLevel(ye);const ot={canvasFactory:new Qe({ownerDocument:Be,enableHWA:Ke}),filterFactory:new Te({docId:ne,ownerDocument:Be}),cMapReaderFactory:lt?null:new Ie({baseUrl:_e,isCompressed:$e}),standardFontDataFactory:lt?null:new je({baseUrl:ke}),wasmFactory:lt?null:new ze({baseUrl:We})};ge||(ge=PDFWorker.create({verbosity:ye,port:GlobalWorkerOptions.workerPort}),J._worker=ge);const ft={docId:ne,apiVersion:"5.4.296",data:ce,password:pe,disableAutoFetch:Ge,rangeChunkSize:me,length:it,docBaseUrl:xe,enableXfa:Re,evaluatorOptions:{maxImageSize:Je,disableFontFace:qe,ignoreErrors:Xe,isEvalSupported:nt,isOffscreenCanvasSupported:et,isImageDecoderSupported:tt,canvasMaxAreaInBytes:st,fontExtraProperties:Se,useSystemFonts:at,useWasm:rt,useWorkerFetch:lt,cMapUrl:_e,iccUrl:Fe,standardFontDataUrl:ke,wasmUrl:We}},dt={ownerDocument:Be,pdfBug:Ye,styleElement:ct,loadingParams:{disableAutoFetch:Ge,enableXfa:Re}};return ge.promise.then(function(){if(J.destroyed)throw new Error("Loading aborted");if(ge.destroyed)throw new Error("Worker was destroyed");const mt=ge.messageHandler.sendWithPromise("GetDocRequest",ft,ce?[ce.buffer]:null);let kt;if(ve)kt=new PDFDataTransportStream(ve,{disableRange:Ne,disableStream:Ue});else if(!ce){if(!oe)throw new Error("getDocument - no `url` parameter provided.");const wt=isValidFetchUrl(oe)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;kt=new wt({url:oe,length:it,httpHeaders:ue,withCredentials:Ae,rangeChunkSize:me,disableRange:Ne,disableStream:Ue})}return mt.then(wt=>{if(J.destroyed)throw new Error("Loading aborted");if(ge.destroyed)throw new Error("Worker was destroyed");const Et=new MessageHandler(ne,wt,ge.port),Ot=new WorkerTransport(Et,J,kt,dt,ot,Ke);J._transport=Ot,Et.send("Ready",null)})}).catch(J._capability.reject),J}var Tp;const Bp=class Bp{constructor(){wr(this,"_capability",Promise.withResolvers());wr(this,"_transport",null);wr(this,"_worker",null);wr(this,"docId",`d${wi(Bp,Tp)._++}`);wr(this,"destroyed",!1);wr(this,"onPassword",null);wr(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var J,ne,oe,ce;this.destroyed=!0;try{(J=this._worker)!=null&&J.port&&(this._worker._pendingDestroy=!0),await((ne=this._transport)==null?void 0:ne.destroy())}catch(ue){throw(oe=this._worker)!=null&&oe.port&&delete this._worker._pendingDestroy,ue}this._transport=null,(ce=this._worker)==null||ce.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Tp=new WeakMap,yt(Bp,Tp,0);let PDFDocumentLoadingTask=Bp;var xc,ch,uh,fh,hh,Ng;let PDFDataRangeTransport$1=(Ng=class{constructor(J,ne,oe=!1,ce=null){yt(this,xc,Promise.withResolvers());yt(this,ch,[]);yt(this,uh,[]);yt(this,fh,[]);yt(this,hh,[]);this.length=J,this.initialData=ne,this.progressiveDone=oe,this.contentDispositionFilename=ce}addRangeListener(J){Ze(this,hh).push(J)}addProgressListener(J){Ze(this,fh).push(J)}addProgressiveReadListener(J){Ze(this,uh).push(J)}addProgressiveDoneListener(J){Ze(this,ch).push(J)}onDataRange(J,ne){for(const oe of Ze(this,hh))oe(J,ne)}onDataProgress(J,ne){Ze(this,xc).promise.then(()=>{for(const oe of Ze(this,fh))oe(J,ne)})}onDataProgressiveRead(J){Ze(this,xc).promise.then(()=>{for(const ne of Ze(this,uh))ne(J)})}onDataProgressiveDone(){Ze(this,xc).promise.then(()=>{for(const J of Ze(this,ch))J()})}transportReady(){Ze(this,xc).resolve()}requestDataRange(J,ne){unreachable$1("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},xc=new WeakMap,ch=new WeakMap,uh=new WeakMap,fh=new WeakMap,hh=new WeakMap,Ng);class PDFDocumentProxy{constructor(J,ne){this._pdfInfo=J,this._transport=ne}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(J){return this._transport.getPage(J)}getPageIndex(J){return this._transport.getPageIndex(J)}getDestinations(){return this._transport.getDestinations()}getDestination(J){return this._transport.getDestination(J)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(J,ne){return this._transport.getAnnotationsByType(J,ne)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:J="display"}={}){const{renderingIntent:ne}=this._transport.getRenderingIntent(J);return this._transport.getOptionalContentConfig(ne)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(J=!1){return this._transport.startCleanup(J||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(J){return this._transport.cachedPageNumber(J)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var co,Ec,sd;class PDFPageProxy{constructor(J,ne,oe,ce=!1){yt(this,Ec);yt(this,co,!1);this._pageIndex=J,this._pageInfo=ne,this._transport=oe,this._stats=ce?new StatTimer:null,this._pdfBug=ce,this.commonObjs=oe.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:J,rotation:ne=this.rotate,offsetX:oe=0,offsetY:ce=0,dontFlip:ue=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:J,rotation:ne,offsetX:oe,offsetY:ce,dontFlip:ue})}getAnnotations({intent:J="display"}={}){const{renderingIntent:ne}=this._transport.getRenderingIntent(J);return this._transport.getAnnotations(this._pageIndex,ne)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var J;return((J=this._transport._htmlForXfa)==null?void 0:J.children[this._pageIndex])||null}render({canvasContext:J,canvas:ne=J.canvas,viewport:oe,intent:ce="display",annotationMode:ue=AnnotationMode.ENABLE,transform:Ae=null,background:pe=null,optionalContentConfigPromise:ve=null,annotationCanvasMap:me=null,pageColors:ge=null,printAnnotationStorage:ye=null,isEditing:xe=!1,recordOperations:_e=!1,operationsFilter:$e=null}){var tt,st,qe;(tt=this._stats)==null||tt.time("Overall");const Ie=this._transport.getRenderingIntent(ce,ue,ye,xe),{renderingIntent:Fe,cacheKey:ke}=Ie;ht(this,co,!1),ve||(ve=this._transport.getOptionalContentConfig(Fe));let je=this._intentStates.get(ke);je||(je=Object.create(null),this._intentStates.set(ke,je)),je.streamReaderCancelTimeout&&(clearTimeout(je.streamReaderCancelTimeout),je.streamReaderCancelTimeout=null);const We=!!(Fe&RenderingIntentFlag.PRINT);je.displayReadyCapability||(je.displayReadyCapability=Promise.withResolvers(),je.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(st=this._stats)==null||st.time("Page Request"),this._pumpOperatorList(Ie));const ze=!!(this._pdfBug&&((qe=globalThis.StepperManager)!=null&&qe.enabled)),Xe=!this.recordedBBoxes&&(_e||ze),Je=Se=>{var Re,Be;if(je.renderTasks.delete(nt),Xe){const Ne=(Re=nt.gfx)==null?void 0:Re.dependencyTracker.take();Ne&&(nt.stepper&&nt.stepper.setOperatorBBoxes(Ne,nt.gfx.dependencyTracker.takeDebugMetadata()),_e&&(this.recordedBBoxes=Ne))}We&&ht(this,co,!0),bt(this,Ec,sd).call(this),Se?(nt.capability.reject(Se),this._abortOperatorList({intentState:je,reason:Se instanceof Error?Se:new Error(Se)})):nt.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Be=globalThis.Stats)!=null&&Be.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},nt=new InternalRenderTask({callback:Je,params:{canvas:ne,canvasContext:J,dependencyTracker:Xe?new CanvasDependencyTracker(ne,je.operatorList.length,ze):null,viewport:oe,transform:Ae,background:pe},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:me,operatorList:je.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!We,pdfBug:this._pdfBug,pageColors:ge,enableHWA:this._transport.enableHWA,operationsFilter:$e});(je.renderTasks||(je.renderTasks=new Set)).add(nt);const et=nt.task;return Promise.all([je.displayReadyCapability.promise,ve]).then(([Se,Re])=>{var Be;if(this.destroyed){Je();return}if((Be=this._stats)==null||Be.time("Rendering"),!(Re.renderingIntent&Fe))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");nt.initializeGraphics({transparency:Se,optionalContentConfig:Re}),nt.operatorListChanged()}).catch(Je),et}getOperatorList({intent:J="display",annotationMode:ne=AnnotationMode.ENABLE,printAnnotationStorage:oe=null,isEditing:ce=!1}={}){var me;function ue(){pe.operatorList.lastChunk&&(pe.opListReadCapability.resolve(pe.operatorList),pe.renderTasks.delete(ve))}const Ae=this._transport.getRenderingIntent(J,ne,oe,ce,!0);let pe=this._intentStates.get(Ae.cacheKey);pe||(pe=Object.create(null),this._intentStates.set(Ae.cacheKey,pe));let ve;return pe.opListReadCapability||(ve=Object.create(null),ve.operatorListChanged=ue,pe.opListReadCapability=Promise.withResolvers(),(pe.renderTasks||(pe.renderTasks=new Set)).add(ve),pe.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(me=this._stats)==null||me.time("Page Request"),this._pumpOperatorList(Ae)),pe.opListReadCapability.promise}streamTextContent({includeMarkedContent:J=!1,disableNormalization:ne=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:J===!0,disableNormalization:ne===!0},{highWaterMark:100,size(ce){return ce.items.length}})}getTextContent(J={}){if(this._transport._htmlForXfa)return this.getXfa().then(oe=>XfaText.textContent(oe));const ne=this.streamTextContent(J);return new Promise(function(oe,ce){function ue(){Ae.read().then(function({value:ve,done:me}){if(me){oe(pe);return}pe.lang??(pe.lang=ve.lang),Object.assign(pe.styles,ve.styles),pe.items.push(...ve.items),ue()},ce)}const Ae=ne.getReader(),pe={items:[],styles:Object.create(null),lang:null};ue()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const J=[];for(const ne of this._intentStates.values())if(this._abortOperatorList({intentState:ne,reason:new Error("Page was destroyed."),force:!0}),!ne.opListReadCapability)for(const oe of ne.renderTasks)J.push(oe.completed),oe.cancel();return this.objs.clear(),ht(this,co,!1),Promise.all(J)}cleanup(J=!1){ht(this,co,!0);const ne=bt(this,Ec,sd).call(this);return J&&ne&&this._stats&&(this._stats=new StatTimer),ne}_startRenderPage(J,ne){var ce,ue;const oe=this._intentStates.get(ne);oe&&((ce=this._stats)==null||ce.timeEnd("Page Request"),(ue=oe.displayReadyCapability)==null||ue.resolve(J))}_renderPageChunk(J,ne){for(let oe=0,ce=J.length;oe<ce;oe++)ne.operatorList.fnArray.push(J.fnArray[oe]),ne.operatorList.argsArray.push(J.argsArray[oe]);ne.operatorList.lastChunk=J.lastChunk,ne.operatorList.separateAnnots=J.separateAnnots;for(const oe of ne.renderTasks)oe.operatorListChanged();J.lastChunk&&bt(this,Ec,sd).call(this)}_pumpOperatorList({renderingIntent:J,cacheKey:ne,annotationStorageSerializable:oe,modifiedIds:ce}){const{map:ue,transfer:Ae}=oe,ve=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:J,cacheKey:ne,annotationStorage:ue,modifiedIds:ce},Ae).getReader(),me=this._intentStates.get(ne);me.streamReader=ve;const ge=()=>{ve.read().then(({value:ye,done:xe})=>{if(xe){me.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ye,me),ge())},ye=>{if(me.streamReader=null,!this._transport.destroyed){if(me.operatorList){me.operatorList.lastChunk=!0;for(const xe of me.renderTasks)xe.operatorListChanged();bt(this,Ec,sd).call(this)}if(me.displayReadyCapability)me.displayReadyCapability.reject(ye);else if(me.opListReadCapability)me.opListReadCapability.reject(ye);else throw ye}})};ge()}_abortOperatorList({intentState:J,reason:ne,force:oe=!1}){if(J.streamReader){if(J.streamReaderCancelTimeout&&(clearTimeout(J.streamReaderCancelTimeout),J.streamReaderCancelTimeout=null),!oe){if(J.renderTasks.size>0)return;if(ne instanceof RenderingCancelledException){let ce=RENDERING_CANCELLED_TIMEOUT;ne.extraDelay>0&&ne.extraDelay<1e3&&(ce+=ne.extraDelay),J.streamReaderCancelTimeout=setTimeout(()=>{J.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:J,reason:ne,force:!0})},ce);return}}if(J.streamReader.cancel(new AbortException(ne.message)).catch(()=>{}),J.streamReader=null,!this._transport.destroyed){for(const[ce,ue]of this._intentStates)if(ue===J){this._intentStates.delete(ce);break}this.cleanup()}}}get stats(){return this._stats}}co=new WeakMap,Ec=new WeakSet,sd=function(){if(!Ze(this,co)||this.destroyed)return!1;for(const{renderTasks:J,operatorList:ne}of this._intentStates.values())if(J.size>0||!ne.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ht(this,co,!1),!0};var sl,sa,uo,bc,Ip,wc,Cc,ss,FA,vm,ym,ad,rf,jA;const oi=class oi{constructor({name:J=null,port:ne=null,verbosity:oe=getVerbosityLevel()}={}){yt(this,ss);yt(this,sl,Promise.withResolvers());yt(this,sa,null);yt(this,uo,null);yt(this,bc,null);if(this.name=J,this.destroyed=!1,this.verbosity=oe,ne){if(Ze(oi,Cc).has(ne))throw new Error("Cannot use more than one PDFWorker per port.");Ze(oi,Cc).set(ne,this),bt(this,ss,vm).call(this,ne)}else bt(this,ss,ym).call(this)}get promise(){return Ze(this,sl).promise}get port(){return Ze(this,uo)}get messageHandler(){return Ze(this,sa)}destroy(){var J,ne;this.destroyed=!0,(J=Ze(this,bc))==null||J.terminate(),ht(this,bc,null),Ze(oi,Cc).delete(Ze(this,uo)),ht(this,uo,null),(ne=Ze(this,sa))==null||ne.destroy(),ht(this,sa,null)}static create(J){const ne=Ze(this,Cc).get(J==null?void 0:J.port);if(ne){if(ne._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return ne}return new oi(J)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>Ze(this,rf,jA)?Ze(this,rf,jA):(await import(this.workerSrc)).WorkerMessageHandler)())}};sl=new WeakMap,sa=new WeakMap,uo=new WeakMap,bc=new WeakMap,Ip=new WeakMap,wc=new WeakMap,Cc=new WeakMap,ss=new WeakSet,FA=function(){Ze(this,sl).resolve(),Ze(this,sa).send("configure",{verbosity:this.verbosity})},vm=function(J){ht(this,uo,J),ht(this,sa,new MessageHandler("main","worker",J)),Ze(this,sa).on("ready",()=>{}),bt(this,ss,FA).call(this)},ym=function(){if(Ze(oi,wc)||Ze(oi,rf,jA)){bt(this,ss,ad).call(this);return}let{workerSrc:J}=oi;try{oi._isSameOrigin(window.location,J)||(J=oi._createCDNWrapper(new URL(J,window.location).href));const ne=new Worker(J,{type:"module"}),oe=new MessageHandler("main","worker",ne),ce=()=>{ue.abort(),oe.destroy(),ne.terminate(),this.destroyed?Ze(this,sl).reject(new Error("Worker was destroyed")):bt(this,ss,ad).call(this)},ue=new AbortController;ne.addEventListener("error",()=>{Ze(this,bc)||ce()},{signal:ue.signal}),oe.on("test",pe=>{if(ue.abort(),this.destroyed||!pe){ce();return}ht(this,sa,oe),ht(this,uo,ne),ht(this,bc,ne),bt(this,ss,FA).call(this)}),oe.on("ready",pe=>{if(ue.abort(),this.destroyed){ce();return}try{Ae()}catch{bt(this,ss,ad).call(this)}});const Ae=()=>{const pe=new Uint8Array;oe.send("test",pe,[pe.buffer])};Ae();return}catch{info("The worker has been disabled.")}bt(this,ss,ad).call(this)},ad=function(){Ze(oi,wc)||(warn$2("Setting up fake worker."),ht(oi,wc,!0)),oi._setupFakeWorkerGlobal.then(J=>{if(this.destroyed){Ze(this,sl).reject(new Error("Worker was destroyed"));return}const ne=new LoopbackPort;ht(this,uo,ne);const oe=`fake${wi(oi,Ip)._++}`,ce=new MessageHandler(oe+"_worker",oe,ne);J.setup(ce,ne),ht(this,sa,new MessageHandler(oe,oe+"_worker",ne)),bt(this,ss,FA).call(this)}).catch(J=>{Ze(this,sl).reject(new Error(`Setting up fake worker failed: "${J.message}".`))})},rf=new WeakSet,jA=function(){var J;try{return((J=globalThis.pdfjsWorker)==null?void 0:J.WorkerMessageHandler)||null}catch{return null}},yt(oi,rf),yt(oi,Ip,0),yt(oi,wc,!1),yt(oi,Cc,new WeakMap),isNodeJS&&(ht(oi,wc,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),oi._isSameOrigin=(J,ne)=>{const oe=URL.parse(J);if(!(oe!=null&&oe.origin)||oe.origin==="null")return!1;const ce=new URL(ne,oe);return oe.origin===ce.origin},oi._createCDNWrapper=J=>{const ne=`await import("${J}");`;return URL.createObjectURL(new Blob([ne],{type:"text/javascript"}))},oi.fromPort=J=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(J!=null&&J.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return oi.create(J)};let PDFWorker=oi;var fo,Ia,nf,sf,ho,Sc,od;class WorkerTransport{constructor(J,ne,oe,ce,ue,Ae){yt(this,Sc);yt(this,fo,new Map);yt(this,Ia,new Map);yt(this,nf,new Map);yt(this,sf,new Map);yt(this,ho,null);this.messageHandler=J,this.loadingTask=ne,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:ce.ownerDocument,styleElement:ce.styleElement}),this.loadingParams=ce.loadingParams,this._params=ce,this.canvasFactory=ue.canvasFactory,this.filterFactory=ue.filterFactory,this.cMapReaderFactory=ue.cMapReaderFactory,this.standardFontDataFactory=ue.standardFontDataFactory,this.wasmFactory=ue.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=oe,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=Ae,this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(J,ne=AnnotationMode.ENABLE,oe=null,ce=!1,ue=!1){let Ae=RenderingIntentFlag.DISPLAY,pe=SerializableEmpty;switch(J){case"any":Ae=RenderingIntentFlag.ANY;break;case"display":break;case"print":Ae=RenderingIntentFlag.PRINT;break;default:warn$2(`getRenderingIntent - invalid intent: ${J}`)}const ve=Ae&RenderingIntentFlag.PRINT&&oe instanceof PrintAnnotationStorage?oe:this.annotationStorage;switch(ne){case AnnotationMode.DISABLE:Ae+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:Ae+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:Ae+=RenderingIntentFlag.ANNOTATIONS_STORAGE,pe=ve.serializable;break;default:warn$2(`getRenderingIntent - invalid annotationMode: ${ne}`)}ce&&(Ae+=RenderingIntentFlag.IS_EDITING),ue&&(Ae+=RenderingIntentFlag.OPLIST);const{ids:me,hash:ge}=ve.modifiedIds,ye=[Ae,pe.hash,ge];return{renderingIntent:Ae,cacheKey:ye.join("_"),annotationStorageSerializable:pe,modifiedIds:me}}destroy(){var oe;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(oe=Ze(this,ho))==null||oe.reject(new Error("Worker was destroyed during onPassword callback"));const J=[];for(const ce of Ze(this,Ia).values())J.push(ce._destroy());Ze(this,Ia).clear(),Ze(this,nf).clear(),Ze(this,sf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const ne=this.messageHandler.sendWithPromise("Terminate",null);return J.push(ne),Promise.all(J).then(()=>{var ce,ue;this.commonObjs.clear(),this.fontLoader.clear(),Ze(this,fo).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(ce=this._networkStream)==null||ce.cancelAllRequests(new AbortException("Worker was terminated.")),(ue=this.messageHandler)==null||ue.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:J,loadingTask:ne}=this;J.on("GetReader",(oe,ce)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ue=>{this._lastProgress={loaded:ue.loaded,total:ue.total}},ce.onPull=()=>{this._fullReader.read().then(function({value:ue,done:Ae}){if(Ae){ce.close();return}assert(ue instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ce.enqueue(new Uint8Array(ue),1,[ue])}).catch(ue=>{ce.error(ue)})},ce.onCancel=ue=>{this._fullReader.cancel(ue),ce.ready.catch(Ae=>{if(!this.destroyed)throw Ae})}}),J.on("ReaderHeadersReady",async oe=>{var pe;await this._fullReader.headersReady;const{isStreamingSupported:ce,isRangeSupported:ue,contentLength:Ae}=this._fullReader;return(!ce||!ue)&&(this._lastProgress&&((pe=ne.onProgress)==null||pe.call(ne,this._lastProgress)),this._fullReader.onProgress=ve=>{var me;(me=ne.onProgress)==null||me.call(ne,{loaded:ve.loaded,total:ve.total})}),{isStreamingSupported:ce,isRangeSupported:ue,contentLength:Ae}}),J.on("GetRangeReader",(oe,ce)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ue=this._networkStream.getRangeReader(oe.begin,oe.end);if(!ue){ce.close();return}ce.onPull=()=>{ue.read().then(function({value:Ae,done:pe}){if(pe){ce.close();return}assert(Ae instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ce.enqueue(new Uint8Array(Ae),1,[Ae])}).catch(Ae=>{ce.error(Ae)})},ce.onCancel=Ae=>{ue.cancel(Ae),ce.ready.catch(pe=>{if(!this.destroyed)throw pe})}}),J.on("GetDoc",({pdfInfo:oe})=>{this._numPages=oe.numPages,this._htmlForXfa=oe.htmlForXfa,delete oe.htmlForXfa,ne._capability.resolve(new PDFDocumentProxy(oe,this))}),J.on("DocException",oe=>{ne._capability.reject(wrapReason(oe))}),J.on("PasswordRequest",oe=>{ht(this,ho,Promise.withResolvers());try{if(!ne.onPassword)throw wrapReason(oe);const ce=ue=>{ue instanceof Error?Ze(this,ho).reject(ue):Ze(this,ho).resolve({password:ue})};ne.onPassword(ce,oe.code)}catch(ce){Ze(this,ho).reject(ce)}return Ze(this,ho).promise}),J.on("DataLoaded",oe=>{var ce;(ce=ne.onProgress)==null||ce.call(ne,{loaded:oe.length,total:oe.length}),this.downloadInfoCapability.resolve(oe)}),J.on("StartRenderPage",oe=>{if(this.destroyed)return;Ze(this,Ia).get(oe.pageIndex)._startRenderPage(oe.transparency,oe.cacheKey)}),J.on("commonobj",([oe,ce,ue])=>{var Ae;if(this.destroyed||this.commonObjs.has(oe))return null;switch(ce){case"Font":if("error"in ue){const ye=ue.error;warn$2(`Error during font loading: ${ye}`),this.commonObjs.resolve(oe,ye);break}const pe=new FontInfo(ue),ve=this._params.pdfBug&&((Ae=globalThis.FontInspector)!=null&&Ae.enabled)?(ye,xe)=>globalThis.FontInspector.fontAdded(ye,xe):null,me=new FontFaceObject(pe,ve,ue.extra,ue.charProcOperatorList);this.fontLoader.bind(me).catch(()=>J.sendWithPromise("FontFallback",{id:oe})).finally(()=>{!me.fontExtraProperties&&me.data&&me.clearData(),this.commonObjs.resolve(oe,me)});break;case"CopyLocalImage":const{imageRef:ge}=ue;assert(ge,"The imageRef must be defined.");for(const ye of Ze(this,Ia).values())for(const[,xe]of ye.objs)if((xe==null?void 0:xe.ref)===ge)return xe.dataLen?(this.commonObjs.resolve(oe,structuredClone(xe)),xe.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(oe,ue);break;default:throw new Error(`Got unknown common object type ${ce}`)}return null}),J.on("obj",([oe,ce,ue,Ae])=>{var ve;if(this.destroyed)return;const pe=Ze(this,Ia).get(ce);if(!pe.objs.has(oe)){if(pe._intentStates.size===0){(ve=Ae==null?void 0:Ae.bitmap)==null||ve.close();return}switch(ue){case"Image":case"Pattern":pe.objs.resolve(oe,Ae);break;default:throw new Error(`Got unknown object type ${ue}`)}}}),J.on("DocProgress",oe=>{var ce;this.destroyed||(ce=ne.onProgress)==null||ce.call(ne,{loaded:oe.loaded,total:oe.total})}),J.on("FetchBinaryData",async oe=>{if(this.destroyed)throw new Error("Worker was destroyed.");const ce=this[oe.type];if(!ce)throw new Error(`${oe.type} not initialized, see the \`useWorkerFetch\` parameter.`);return ce.fetch(oe)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var oe;this.annotationStorage.size<=0&&warn$2("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:J,transfer:ne}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:J,filename:((oe=this._fullReader)==null?void 0:oe.filename)??null},ne).finally(()=>{this.annotationStorage.resetModified()})}getPage(J){if(!Number.isInteger(J)||J<=0||J>this._numPages)return Promise.reject(new Error("Invalid page request."));const ne=J-1,oe=Ze(this,nf).get(ne);if(oe)return oe;const ce=this.messageHandler.sendWithPromise("GetPage",{pageIndex:ne}).then(ue=>{if(this.destroyed)throw new Error("Transport destroyed");ue.refStr&&Ze(this,sf).set(ue.refStr,J);const Ae=new PDFPageProxy(ne,ue,this,this._params.pdfBug);return Ze(this,Ia).set(ne,Ae),Ae});return Ze(this,nf).set(ne,ce),ce}getPageIndex(J){return isRefProxy(J)?this.messageHandler.sendWithPromise("GetPageIndex",{num:J.num,gen:J.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(J,ne){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:J,intent:ne})}getFieldObjects(){return bt(this,Sc,od).call(this,"GetFieldObjects")}hasJSActions(){return bt(this,Sc,od).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(J){return typeof J!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:J})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(J,ne){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:J,pageIndexesToSkip:ne})}getDocJSActions(){return bt(this,Sc,od).call(this,"GetDocJSActions")}getPageJSActions(J){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:J})}getStructTree(J){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:J})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(J){return bt(this,Sc,od).call(this,"GetOptionalContentConfig").then(ne=>new OptionalContentConfig(ne,J))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const J="GetMetadata",ne=Ze(this,fo).get(J);if(ne)return ne;const oe=this.messageHandler.sendWithPromise(J,null).then(ce=>{var ue,Ae;return{info:ce[0],metadata:ce[1]?new Metadata(ce[1]):null,contentDispositionFilename:((ue=this._fullReader)==null?void 0:ue.filename)??null,contentLength:((Ae=this._fullReader)==null?void 0:Ae.contentLength)??null}});return Ze(this,fo).set(J,oe),oe}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(J=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const ne of Ze(this,Ia).values())if(!ne.cleanup())throw new Error(`startCleanup: Page ${ne.pageNumber} is currently rendering.`);this.commonObjs.clear(),J||this.fontLoader.clear(),Ze(this,fo).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(J){if(!isRefProxy(J))return null;const ne=J.gen===0?`${J.num}R`:`${J.num}R${J.gen}`;return Ze(this,sf).get(ne)??null}}fo=new WeakMap,Ia=new WeakMap,nf=new WeakMap,sf=new WeakMap,ho=new WeakMap,Sc=new WeakSet,od=function(J,ne=null){const oe=Ze(this,fo).get(J);if(oe)return oe;const ce=this.messageHandler.sendWithPromise(J,ne);return Ze(this,fo).set(J,ce),ce};var al;class RenderTask{constructor(J){yt(this,al,null);wr(this,"onContinue",null);wr(this,"onError",null);ht(this,al,J)}get promise(){return Ze(this,al).capability.promise}cancel(J=0){Ze(this,al).cancel(null,J)}get separateAnnots(){const{separateAnnots:J}=Ze(this,al).operatorList;if(!J)return!1;const{annotationCanvasMap:ne}=Ze(this,al);return J.form||J.canvas&&(ne==null?void 0:ne.size)>0}}al=new WeakMap;var ol,Tc;const Fl=class Fl{constructor({callback:J,params:ne,objs:oe,commonObjs:ce,annotationCanvasMap:ue,operatorList:Ae,pageIndex:pe,canvasFactory:ve,filterFactory:me,useRequestAnimationFrame:ge=!1,pdfBug:ye=!1,pageColors:xe=null,enableHWA:_e=!1,operationsFilter:$e=null}){yt(this,ol,null);this.callback=J,this.params=ne,this.objs=oe,this.commonObjs=ce,this.annotationCanvasMap=ue,this.operatorListIdx=null,this.operatorList=Ae,this._pageIndex=pe,this.canvasFactory=ve,this.filterFactory=me,this._pdfBug=ye,this.pageColors=xe,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ge===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=ne.canvas,this._canvasContext=ne.canvas?null:ne.canvasContext,this._enableHWA=_e,this._dependencyTracker=ne.dependencyTracker,this._operationsFilter=$e}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:J=!1,optionalContentConfig:ne}){var ve,me;if(this.cancelled)return;if(this._canvas){if(Ze(Fl,Tc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ze(Fl,Tc).add(this._canvas)}this._pdfBug&&((ve=globalThis.StepperManager)!=null&&ve.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:oe,transform:ce,background:ue,dependencyTracker:Ae}=this.params,pe=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(pe,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:ne},this.annotationCanvasMap,this.pageColors,Ae),this.gfx.beginDrawing({transform:ce,viewport:oe,transparency:J,background:ue}),this.operatorListIdx=0,this.graphicsReady=!0,(me=this.graphicsReadyCallback)==null||me.call(this)}cancel(J=null,ne=0){var oe,ce,ue;this.running=!1,this.cancelled=!0,(oe=this.gfx)==null||oe.endDrawing(),Ze(this,ol)&&(window.cancelAnimationFrame(Ze(this,ol)),ht(this,ol,null)),Ze(Fl,Tc).delete(this._canvas),J||(J=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,ne)),this.callback(J),(ue=(ce=this.task).onError)==null||ue.call(ce,J)}operatorListChanged(){var J,ne;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(J=this.gfx.dependencyTracker)==null||J.growOperationsCount(this.operatorList.fnArray.length),(ne=this.stepper)==null||ne.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?ht(this,ol,window.requestAnimationFrame(()=>{ht(this,ol,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ze(Fl,Tc).delete(this._canvas),this.callback())))}};ol=new WeakMap,Tc=new WeakMap,yt(Fl,Tc,new WeakSet);let InternalRenderTask=Fl;const version$1="5.4.296",build="f56dc8601";var Es,Rc,af,_i,Ah,of,Ao,ph,ll,aa,gh,Jn,j0,V0,Q0,Nl,xm,Mo;const os=class os{constructor({editor:J=null,uiManager:ne=null}){yt(this,Jn);yt(this,Es,null);yt(this,Rc,null);yt(this,af);yt(this,_i,null);yt(this,Ah,!1);yt(this,of,!1);yt(this,Ao,null);yt(this,ph);yt(this,ll,null);yt(this,aa,null);var oe,ce;J?(ht(this,of,!1),ht(this,Ao,J)):ht(this,of,!0),ht(this,aa,(J==null?void 0:J._uiManager)||ne),ht(this,ph,Ze(this,aa)._eventBus),ht(this,af,((oe=J==null?void 0:J.color)==null?void 0:oe.toUpperCase())||((ce=Ze(this,aa))==null?void 0:ce.highlightColors.values().next().value)||"#FFFF98"),Ze(os,gh)||ht(os,gh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],os.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],os.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],os.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],os.prototype._moveToPrevious],[["Home","mac+Home"],os.prototype._moveToBeginning],[["End","mac+End"],os.prototype._moveToEnd]]))}renderButton(){const J=ht(this,Es,document.createElement("button"));J.className="colorPicker",J.tabIndex="0",J.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),J.ariaHasPopup="true",Ze(this,Ao)&&(J.ariaControls=`${Ze(this,Ao).id}_colorpicker_dropdown`);const ne=Ze(this,aa)._signal;J.addEventListener("click",bt(this,Jn,Nl).bind(this),{signal:ne}),J.addEventListener("keydown",bt(this,Jn,Q0).bind(this),{signal:ne});const oe=ht(this,Rc,document.createElement("span"));return oe.className="swatch",oe.ariaHidden="true",oe.style.backgroundColor=Ze(this,af),J.append(oe),J}renderMainDropdown(){const J=ht(this,_i,bt(this,Jn,j0).call(this));return J.ariaOrientation="horizontal",J.ariaLabelledBy="highlightColorPickerLabel",J}_colorSelectFromKeyboard(J){if(J.target===Ze(this,Es)){bt(this,Jn,Nl).call(this,J);return}const ne=J.target.getAttribute("data-color");ne&&bt(this,Jn,V0).call(this,ne,J)}_moveToNext(J){var ne,oe;if(!Ze(this,Jn,Mo)){bt(this,Jn,Nl).call(this,J);return}if(J.target===Ze(this,Es)){(ne=Ze(this,_i).firstChild)==null||ne.focus();return}(oe=J.target.nextSibling)==null||oe.focus()}_moveToPrevious(J){var ne,oe;if(J.target===((ne=Ze(this,_i))==null?void 0:ne.firstChild)||J.target===Ze(this,Es)){Ze(this,Jn,Mo)&&this._hideDropdownFromKeyboard();return}Ze(this,Jn,Mo)||bt(this,Jn,Nl).call(this,J),(oe=J.target.previousSibling)==null||oe.focus()}_moveToBeginning(J){var ne;if(!Ze(this,Jn,Mo)){bt(this,Jn,Nl).call(this,J);return}(ne=Ze(this,_i).firstChild)==null||ne.focus()}_moveToEnd(J){var ne;if(!Ze(this,Jn,Mo)){bt(this,Jn,Nl).call(this,J);return}(ne=Ze(this,_i).lastChild)==null||ne.focus()}hideDropdown(){var J,ne;(J=Ze(this,_i))==null||J.classList.add("hidden"),Ze(this,Es).ariaExpanded="false",(ne=Ze(this,ll))==null||ne.abort(),ht(this,ll,null)}_hideDropdownFromKeyboard(){var J;if(!Ze(this,of)){if(!Ze(this,Jn,Mo)){(J=Ze(this,Ao))==null||J.unselect();return}this.hideDropdown(),Ze(this,Es).focus({preventScroll:!0,focusVisible:Ze(this,Ah)})}}updateColor(J){if(Ze(this,Rc)&&(Ze(this,Rc).style.backgroundColor=J),!Ze(this,_i))return;const ne=Ze(this,aa).highlightColors.values();for(const oe of Ze(this,_i).children)oe.ariaSelected=ne.next().value===J.toUpperCase()}destroy(){var J,ne;(J=Ze(this,Es))==null||J.remove(),ht(this,Es,null),ht(this,Rc,null),(ne=Ze(this,_i))==null||ne.remove(),ht(this,_i,null)}};Es=new WeakMap,Rc=new WeakMap,af=new WeakMap,_i=new WeakMap,Ah=new WeakMap,of=new WeakMap,Ao=new WeakMap,ph=new WeakMap,ll=new WeakMap,aa=new WeakMap,gh=new WeakMap,Jn=new WeakSet,j0=function(){const J=document.createElement("div"),ne=Ze(this,aa)._signal;J.addEventListener("contextmenu",noContextMenu,{signal:ne}),J.className="dropdown",J.role="listbox",J.ariaMultiSelectable="false",J.ariaOrientation="vertical",J.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Ze(this,Ao)&&(J.id=`${Ze(this,Ao).id}_colorpicker_dropdown`);for(const[oe,ce]of Ze(this,aa).highlightColors){const ue=document.createElement("button");ue.tabIndex="0",ue.role="option",ue.setAttribute("data-color",ce),ue.title=oe,ue.setAttribute("data-l10n-id",Ze(os,gh)[oe]);const Ae=document.createElement("span");ue.append(Ae),Ae.className="swatch",Ae.style.backgroundColor=ce,ue.ariaSelected=ce===Ze(this,af),ue.addEventListener("click",bt(this,Jn,V0).bind(this,ce),{signal:ne}),J.append(ue)}return J.addEventListener("keydown",bt(this,Jn,Q0).bind(this),{signal:ne}),J},V0=function(J,ne){ne.stopPropagation(),Ze(this,ph).dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:J}),this.updateColor(J)},Q0=function(J){os._keyboardManager.exec(this,J)},Nl=function(J){if(Ze(this,Jn,Mo)){this.hideDropdown();return}if(ht(this,Ah,J.detail===0),Ze(this,ll)||(ht(this,ll,new AbortController),window.addEventListener("pointerdown",bt(this,Jn,xm).bind(this),{signal:Ze(this,aa).combinedSignal(Ze(this,ll))})),Ze(this,Es).ariaExpanded="true",Ze(this,_i)){Ze(this,_i).classList.remove("hidden");return}const ne=ht(this,_i,bt(this,Jn,j0).call(this));Ze(this,Es).append(ne)},xm=function(J){var ne;(ne=Ze(this,_i))!=null&&ne.contains(J.target)||this.hideDropdown()},Mo=function(){return Ze(this,_i)&&!Ze(this,_i).classList.contains("hidden")},yt(os,gh,null);let ColorPicker=os;var $a,mh,lf,vh;const kl=class kl{constructor(J){yt(this,$a,null);yt(this,mh,null);yt(this,lf,null);ht(this,mh,J),ht(this,lf,J._uiManager),Ze(kl,vh)||ht(kl,vh,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Ze(this,$a))return Ze(this,$a);const{editorType:J,colorType:ne,colorValue:oe}=Ze(this,mh),ce=ht(this,$a,document.createElement("input"));return ce.type="color",ce.value=oe||"#000000",ce.className="basicColorPicker",ce.tabIndex=0,ce.setAttribute("data-l10n-id",Ze(kl,vh)[J]),ce.addEventListener("input",()=>{Ze(this,lf).updateParams(ne,ce.value)},{signal:Ze(this,lf)._signal}),ce}update(J){Ze(this,$a)&&(Ze(this,$a).value=J)}destroy(){var J;(J=Ze(this,$a))==null||J.remove(),ht(this,$a,null)}hideDropdown(){}};$a=new WeakMap,mh=new WeakMap,lf=new WeakMap,vh=new WeakMap,yt(kl,vh,null);let BasicColorPicker=kl;function makeColorComp(K){return Math.floor(Math.max(0,Math.min(1,K))*255).toString(16).padStart(2,"0")}function scaleAndClamp(K){return Math.max(0,Math.min(255,255*K))}class ColorConverters{static CMYK_G([J,ne,oe,ce]){return["G",1-Math.min(1,.3*J+.59*oe+.11*ne+ce)]}static G_CMYK([J]){return["CMYK",0,0,0,1-J]}static G_RGB([J]){return["RGB",J,J,J]}static G_rgb([J]){return J=scaleAndClamp(J),[J,J,J]}static G_HTML([J]){const ne=makeColorComp(J);return`#${ne}${ne}${ne}`}static RGB_G([J,ne,oe]){return["G",.3*J+.59*ne+.11*oe]}static RGB_rgb(J){return J.map(scaleAndClamp)}static RGB_HTML(J){return`#${J.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([J,ne,oe,ce]){return["RGB",1-Math.min(1,J+ce),1-Math.min(1,oe+ce),1-Math.min(1,ne+ce)]}static CMYK_rgb([J,ne,oe,ce]){return[scaleAndClamp(1-Math.min(1,J+ce)),scaleAndClamp(1-Math.min(1,oe+ce)),scaleAndClamp(1-Math.min(1,ne+ce))]}static CMYK_HTML(J){const ne=this.CMYK_RGB(J).slice(1);return this.RGB_HTML(ne)}static RGB_CMYK([J,ne,oe]){const ce=1-J,ue=1-ne,Ae=1-oe,pe=Math.min(ce,ue,Ae);return["CMYK",ce,ue,Ae,pe]}}class BaseSVGFactory{create(J,ne,oe=!1){if(J<=0||ne<=0)throw new Error("Invalid SVG dimensions");const ce=this._createSVG("svg:svg");return ce.setAttribute("version","1.1"),oe||(ce.setAttribute("width",`${J}px`),ce.setAttribute("height",`${ne}px`)),ce.setAttribute("preserveAspectRatio","none"),ce.setAttribute("viewBox",`0 0 ${J} ${ne}`),ce}createElement(J){if(typeof J!="string")throw new Error("Invalid SVG element type");return this._createSVG(J)}_createSVG(J){unreachable$1("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(J){return document.createElementNS(SVG_NS,J)}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(J){switch(J.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(J);case AnnotationType.TEXT:return new TextAnnotationElement(J);case AnnotationType.WIDGET:switch(J.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(J);case"Btn":return J.data.radioButton?new RadioButtonWidgetAnnotationElement(J):J.data.checkBox?new CheckboxWidgetAnnotationElement(J):new PushButtonWidgetAnnotationElement(J);case"Ch":return new ChoiceWidgetAnnotationElement(J);case"Sig":return new SignatureWidgetAnnotationElement(J)}return new WidgetAnnotationElement(J);case AnnotationType.POPUP:return new PopupAnnotationElement(J);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(J);case AnnotationType.LINE:return new LineAnnotationElement(J);case AnnotationType.SQUARE:return new SquareAnnotationElement(J);case AnnotationType.CIRCLE:return new CircleAnnotationElement(J);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(J);case AnnotationType.CARET:return new CaretAnnotationElement(J);case AnnotationType.INK:return new InkAnnotationElement(J);case AnnotationType.POLYGON:return new PolygonAnnotationElement(J);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(J);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(J);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(J);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(J);case AnnotationType.STAMP:return new StampAnnotationElement(J);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(J);default:return new AnnotationElement(J)}}}var Bc,cf,Qs,yh,K0;const wg=class wg{constructor(J,{isRenderable:ne=!1,ignoreBorder:oe=!1,createQuadrilaterals:ce=!1}={}){yt(this,yh);yt(this,Bc,null);yt(this,cf,!1);yt(this,Qs,null);this.isRenderable=ne,this.data=J.data,this.layer=J.layer,this.linkService=J.linkService,this.downloadManager=J.downloadManager,this.imageResourcesPath=J.imageResourcesPath,this.renderForms=J.renderForms,this.svgFactory=J.svgFactory,this.annotationStorage=J.annotationStorage,this.enableComment=J.enableComment,this.enableScripting=J.enableScripting,this.hasJSActions=J.hasJSActions,this._fieldObjects=J.fieldObjects,this.parent=J.parent,ne&&(this.container=this._createContainer(oe)),ce&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:J,richText:ne}){return!!(J!=null&&J.str||ne!=null&&ne.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return wg._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var oe;const{data:J}=this,ne=(oe=this.annotationStorage)==null?void 0:oe.getEditor(J.id);return ne?ne.getData():J}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var pe;const J=(pe=this.annotationStorage)==null?void 0:pe.getEditor(this.data.id);if(J)return J.commentButtonPositionInPage;const{quadPoints:ne,inkLists:oe,rect:ce}=this.data;let ue=-1/0,Ae=-1/0;if((ne==null?void 0:ne.length)>=8){for(let ve=0;ve<ne.length;ve+=8)ne[ve+1]>Ae?(Ae=ne[ve+1],ue=ne[ve+2]):ne[ve+1]===Ae&&(ue=Math.max(ue,ne[ve+2]));return[ue,Ae]}if((oe==null?void 0:oe.length)>=1){for(const ve of oe)for(let me=0,ge=ve.length;me<ge;me+=2)ve[me+1]>Ae?(Ae=ve[me+1],ue=ve[me]):ve[me+1]===Ae&&(ue=Math.max(ue,ve[me]));if(ue!==1/0)return[ue,Ae]}return ce?[ce[2],ce[3]]:null}_normalizePoint(J){const{page:{view:ne},viewport:{rawDims:{pageWidth:oe,pageHeight:ce,pageX:ue,pageY:Ae}}}=this.parent;return J[1]=ne[3]-J[1]+ne[1],J[0]=100*(J[0]-ue)/oe,J[1]=100*(J[1]-Ae)/ce,J}get commentText(){var ne,oe,ce;const{data:J}=this;return((oe=(ne=this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${J.id}`))==null?void 0:ne.popup)==null?void 0:oe.contents)||((ce=J.contentsObj)==null?void 0:ce.str)||""}set commentText(J){const{data:ne}=this,oe={deleted:!J,contents:J||""};this.annotationStorage.updateEditor(ne.id,{popup:oe})||this.annotationStorage.setValue(`${AnnotationEditorPrefix}${ne.id}`,{id:ne.id,annotationType:ne.annotationType,pageIndex:this.parent.page._pageIndex,popup:oe,popupRef:ne.popupRef,modificationDate:new Date}),J||this.removePopup()}removePopup(){var J,ne;(ne=((J=Ze(this,Qs))==null?void 0:J.popup)||this.popup)==null||ne.remove(),ht(this,Qs,this.popup=null)}updateEdited(J){var ue;if(!this.container)return;J.rect&&(Ze(this,Bc)||ht(this,Bc,{rect:this.data.rect.slice(0)}));const{rect:ne,popup:oe}=J;ne&&bt(this,yh,K0).call(this,ne);let ce=((ue=Ze(this,Qs))==null?void 0:ue.popup)||this.popup;!ce&&(oe!=null&&oe.text)&&(this._createPopup(oe),ce=Ze(this,Qs).popup),ce&&(ce.updateEdited(J),oe!=null&&oe.deleted&&(ce.remove(),ht(this,Qs,null),this.popup=null))}resetEdited(){var J;Ze(this,Bc)&&(bt(this,yh,K0).call(this,Ze(this,Bc).rect),(J=Ze(this,Qs))==null||J.popup.resetEdited(),ht(this,Bc,null))}_createContainer(J){const{data:ne,parent:{page:oe,viewport:ce}}=this,ue=document.createElement("section");ue.setAttribute("data-annotation-id",ne.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(ue.tabIndex=0);const{style:Ae}=ue;if(Ae.zIndex=this.parent.zIndex,this.parent.zIndex+=2,ne.alternativeText&&(ue.title=ne.alternativeText),ne.noRotate&&ue.classList.add("norotate"),!ne.rect||this instanceof PopupAnnotationElement){const{rotation:Ie}=ne;return!ne.hasOwnCanvas&&Ie!==0&&this.setRotation(Ie,ue),ue}const{width:pe,height:ve}=this;if(!J&&ne.borderStyle.width>0){Ae.borderWidth=`${ne.borderStyle.width}px`;const Ie=ne.borderStyle.horizontalCornerRadius,Fe=ne.borderStyle.verticalCornerRadius;if(Ie>0||Fe>0){const je=`calc(${Ie}px * var(--total-scale-factor)) / calc(${Fe}px * var(--total-scale-factor))`;Ae.borderRadius=je}else if(this instanceof RadioButtonWidgetAnnotationElement){const je=`calc(${pe}px * var(--total-scale-factor)) / calc(${ve}px * var(--total-scale-factor))`;Ae.borderRadius=je}switch(ne.borderStyle.style){case AnnotationBorderStyleType.SOLID:Ae.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:Ae.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn$2("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn$2("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:Ae.borderBottomStyle="solid";break}const ke=ne.borderColor||null;ke?(ht(this,cf,!0),Ae.borderColor=Util.makeHexColor(ke[0]|0,ke[1]|0,ke[2]|0)):Ae.borderWidth=0}const me=Util.normalizeRect([ne.rect[0],oe.view[3]-ne.rect[1]+oe.view[1],ne.rect[2],oe.view[3]-ne.rect[3]+oe.view[1]]),{pageWidth:ge,pageHeight:ye,pageX:xe,pageY:_e}=ce.rawDims;Ae.left=`${100*(me[0]-xe)/ge}%`,Ae.top=`${100*(me[1]-_e)/ye}%`;const{rotation:$e}=ne;return ne.hasOwnCanvas||$e===0?(Ae.width=`${100*pe/ge}%`,Ae.height=`${100*ve/ye}%`):this.setRotation($e,ue),ue}setRotation(J,ne=this.container){if(!this.data.rect)return;const{pageWidth:oe,pageHeight:ce}=this.parent.viewport.rawDims;let{width:ue,height:Ae}=this;J%180!==0&&([ue,Ae]=[Ae,ue]),ne.style.width=`${100*ue/oe}%`,ne.style.height=`${100*Ae/ce}%`,ne.setAttribute("data-main-rotation",(360-J)%360)}get _commonActions(){const J=(ne,oe,ce)=>{const ue=ce.detail[ne],Ae=ue[0],pe=ue.slice(1);ce.target.style[oe]=ColorConverters[`${Ae}_HTML`](pe),this.annotationStorage.setValue(this.data.id,{[oe]:ColorConverters[`${Ae}_rgb`](pe)})};return shadow(this,"_commonActions",{display:ne=>{const{display:oe}=ne.detail,ce=oe%2===1;this.container.style.visibility=ce?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ce,noPrint:oe===1||oe===2})},print:ne=>{this.annotationStorage.setValue(this.data.id,{noPrint:!ne.detail.print})},hidden:ne=>{const{hidden:oe}=ne.detail;this.container.style.visibility=oe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:oe,noView:oe})},focus:ne=>{setTimeout(()=>ne.target.focus({preventScroll:!1}),0)},userName:ne=>{ne.target.title=ne.detail.userName},readonly:ne=>{ne.target.disabled=ne.detail.readonly},required:ne=>{this._setRequired(ne.target,ne.detail.required)},bgColor:ne=>{J("bgColor","backgroundColor",ne)},fillColor:ne=>{J("fillColor","backgroundColor",ne)},fgColor:ne=>{J("fgColor","color",ne)},textColor:ne=>{J("textColor","color",ne)},borderColor:ne=>{J("borderColor","borderColor",ne)},strokeColor:ne=>{J("strokeColor","borderColor",ne)},rotation:ne=>{const oe=ne.detail.rotation;this.setRotation(oe),this.annotationStorage.setValue(this.data.id,{rotation:oe})}})}_dispatchEventFromSandbox(J,ne){const oe=this._commonActions;for(const ce of Object.keys(ne.detail)){const ue=J[ce]||oe[ce];ue==null||ue(ne)}}_setDefaultPropertiesFromJS(J){if(!this.enableScripting)return;const ne=this.annotationStorage.getRawValue(this.data.id);if(!ne)return;const oe=this._commonActions;for(const[ce,ue]of Object.entries(ne)){const Ae=oe[ce];if(Ae){const pe={detail:{[ce]:ue},target:J};Ae(pe),delete ne[ce]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:J}=this.data;if(!J)return;const[ne,oe,ce,ue]=this.data.rect.map(Ie=>Math.fround(Ie));if(J.length===8){const[Ie,Fe,ke,je]=J.subarray(2,6);if(ce===Ie&&ue===Fe&&ne===ke&&oe===je)return}const{style:Ae}=this.container;let pe;if(Ze(this,cf)){const{borderColor:Ie,borderWidth:Fe}=Ae;Ae.borderWidth=0,pe=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ie}" stroke-width="${Fe}">`],this.container.classList.add("hasBorder")}const ve=ce-ne,me=ue-oe,{svgFactory:ge}=this,ye=ge.createElement("svg");ye.classList.add("quadrilateralsContainer"),ye.setAttribute("width",0),ye.setAttribute("height",0),ye.role="none";const xe=ge.createElement("defs");ye.append(xe);const _e=ge.createElement("clipPath"),$e=`clippath_${this.data.id}`;_e.setAttribute("id",$e),_e.setAttribute("clipPathUnits","objectBoundingBox"),xe.append(_e);for(let Ie=2,Fe=J.length;Ie<Fe;Ie+=8){const ke=J[Ie],je=J[Ie+1],We=J[Ie+2],ze=J[Ie+3],Xe=ge.createElement("rect"),Je=(We-ne)/ve,nt=(ue-je)/me,et=(ke-We)/ve,tt=(je-ze)/me;Xe.setAttribute("x",Je),Xe.setAttribute("y",nt),Xe.setAttribute("width",et),Xe.setAttribute("height",tt),_e.append(Xe),pe==null||pe.push(`<rect vector-effect="non-scaling-stroke" x="${Je}" y="${nt}" width="${et}" height="${tt}"/>`)}Ze(this,cf)&&(pe.push("</g></svg>')"),Ae.backgroundImage=pe.join("")),this.container.append(ye),this.container.style.clipPath=`url(#${$e})`}_createPopup(J=null){const{data:ne}=this;let oe,ce;J?(oe={str:J.text},ce=J.date):(oe=ne.contentsObj,ce=ne.modificationDate);const ue=ht(this,Qs,new PopupAnnotationElement({data:{color:ne.color,titleObj:ne.titleObj,modificationDate:ce,contentsObj:oe,richText:ne.richText,parentRect:ne.rect,borderStyle:0,id:`popup_${ne.id}`,rotation:ne.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(ue.render())}get hasPopupElement(){return!!(Ze(this,Qs)||this.popup||this.data.popupRef)}get extraPopupElement(){return Ze(this,Qs)}render(){unreachable$1("Abstract method `AnnotationElement.render` called")}_getElementsByName(J,ne=null){const oe=[];if(this._fieldObjects){const ce=this._fieldObjects[J];if(ce)for(const{page:ue,id:Ae,exportValues:pe}of ce){if(ue===-1||Ae===ne)continue;const ve=typeof pe=="string"?pe:null,me=document.querySelector(`[data-element-id="${Ae}"]`);if(me&&!GetElementsByNameSet.has(me)){warn$2(`_getElementsByName - element not allowed: ${Ae}`);continue}oe.push({id:Ae,exportValue:ve,domElement:me})}return oe}for(const ce of document.getElementsByName(J)){const{exportValue:ue}=ce,Ae=ce.getAttribute("data-element-id");Ae!==ne&&GetElementsByNameSet.has(ce)&&oe.push({id:Ae,exportValue:ue,domElement:ce})}return oe}show(){var J;this.container&&(this.container.hidden=!1),(J=this.popup)==null||J.maybeShow()}hide(){var J;this.container&&(this.container.hidden=!0),(J=this.popup)==null||J.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const J=this.getElementsToTriggerPopup();if(Array.isArray(J))for(const ne of J)ne.classList.add("highlightArea");else J.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:J,data:{id:ne}}=this;this.container.addEventListener("dblclick",()=>{var oe;(oe=this.linkService.eventBus)==null||oe.dispatch("switchannotationeditormode",{source:this,mode:J,editId:ne,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Bc=new WeakMap,cf=new WeakMap,Qs=new WeakMap,yh=new WeakSet,K0=function(J){const{container:{style:ne},data:{rect:oe,rotation:ce},parent:{viewport:{rawDims:{pageWidth:ue,pageHeight:Ae,pageX:pe,pageY:ve}}}}=this;oe==null||oe.splice(0,4,...J),ne.left=`${100*(J[0]-pe)/ue}%`,ne.top=`${100*(Ae-J[3]+ve)/Ae}%`,ce===0?(ne.width=`${100*(J[2]-J[0])/ue}%`,ne.height=`${100*(J[3]-J[1])/Ae}%`):this.setRotation(ce)};let AnnotationElement=wg;class EditorAnnotationElement extends AnnotationElement{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0}),this.editor=J.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:J}=this;J.hasComment&&(this._createPopup(J.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(J){this.editor.comment=J,J||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Ns,Dl,Em,bm;class LinkAnnotationElement extends AnnotationElement{constructor(ne,oe=null){super(ne,{isRenderable:!0,ignoreBorder:!!(oe!=null&&oe.ignoreBorder),createQuadrilaterals:!0});yt(this,Ns);this.isTooltipOnly=ne.data.isTooltipOnly}render(){const{data:ne,linkService:oe}=this,ce=document.createElement("a");ce.setAttribute("data-element-id",ne.id);let ue=!1;return ne.url?(oe.addLinkAttributes(ce,ne.url,ne.newWindow),ue=!0):ne.action?(this._bindNamedAction(ce,ne.action,ne.overlaidText),ue=!0):ne.attachment?(bt(this,Ns,Em).call(this,ce,ne.attachment,ne.overlaidText,ne.attachmentDest),ue=!0):ne.setOCGState?(bt(this,Ns,bm).call(this,ce,ne.setOCGState,ne.overlaidText),ue=!0):ne.dest?(this._bindLink(ce,ne.dest,ne.overlaidText),ue=!0):(ne.actions&&(ne.actions.Action||ne.actions["Mouse Up"]||ne.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ce,ne),ue=!0),ne.resetForm?(this._bindResetFormAction(ce,ne.resetForm),ue=!0):this.isTooltipOnly&&!ue&&(this._bindLink(ce,""),ue=!0)),this.container.classList.add("linkAnnotation"),ue&&this.container.append(ce),this.container}_bindLink(ne,oe,ce=""){ne.href=this.linkService.getDestinationHash(oe),ne.onclick=()=>(oe&&this.linkService.goToDestination(oe),!1),(oe||oe==="")&&bt(this,Ns,Dl).call(this),ce&&(ne.title=ce)}_bindNamedAction(ne,oe,ce=""){ne.href=this.linkService.getAnchorUrl(""),ne.onclick=()=>(this.linkService.executeNamedAction(oe),!1),ce&&(ne.title=ce),bt(this,Ns,Dl).call(this)}_bindJSAction(ne,oe){ne.href=this.linkService.getAnchorUrl("");const ce=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ue of Object.keys(oe.actions)){const Ae=ce.get(ue);Ae&&(ne[Ae]=()=>{var pe;return(pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:oe.id,name:ue}}),!1})}oe.overlaidText&&(ne.title=oe.overlaidText),ne.onclick||(ne.onclick=()=>!1),bt(this,Ns,Dl).call(this)}_bindResetFormAction(ne,oe){const ce=ne.onclick;if(ce||(ne.href=this.linkService.getAnchorUrl("")),bt(this,Ns,Dl).call(this),!this._fieldObjects){warn$2('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ce||(ne.onclick=()=>!1);return}ne.onclick=()=>{var ye;ce==null||ce();const{fields:ue,refs:Ae,include:pe}=oe,ve=[];if(ue.length!==0||Ae.length!==0){const xe=new Set(Ae);for(const _e of ue){const $e=this._fieldObjects[_e]||[];for(const{id:Ie}of $e)xe.add(Ie)}for(const _e of Object.values(this._fieldObjects))for(const $e of _e)xe.has($e.id)===pe&&ve.push($e)}else for(const xe of Object.values(this._fieldObjects))ve.push(...xe);const me=this.annotationStorage,ge=[];for(const xe of ve){const{id:_e}=xe;switch(ge.push(_e),xe.type){case"text":{const Ie=xe.defaultValue||"";me.setValue(_e,{value:Ie});break}case"checkbox":case"radiobutton":{const Ie=xe.defaultValue===xe.exportValues;me.setValue(_e,{value:Ie});break}case"combobox":case"listbox":{const Ie=xe.defaultValue||"";me.setValue(_e,{value:Ie});break}default:continue}const $e=document.querySelector(`[data-element-id="${_e}"]`);if($e){if(!GetElementsByNameSet.has($e)){warn$2(`_bindResetFormAction - element not allowed: ${_e}`);continue}}else continue;$e.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ye=this.linkService.eventBus)==null||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ge,name:"ResetForm"}})),!1}}}Ns=new WeakSet,Dl=function(){this.container.setAttribute("data-internal-link","")},Em=function(ne,oe,ce="",ue=null){ne.href=this.linkService.getAnchorUrl(""),oe.description?ne.title=oe.description:ce&&(ne.title=ce),ne.onclick=()=>{var Ae;return(Ae=this.downloadManager)==null||Ae.openOrDownloadData(oe.content,oe.filename,ue),!1},bt(this,Ns,Dl).call(this)},bm=function(ne,oe,ce=""){ne.href=this.linkService.getAnchorUrl(""),ne.onclick=()=>(this.linkService.executeSetOCGState(oe),!1),ce&&(ne.title=ce),bt(this,Ns,Dl).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(J){super(J,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const J=document.createElement("img");return J.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",J.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),J.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(J),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(J){var ne;this.data.hasOwnCanvas&&(((ne=J.previousSibling)==null?void 0:ne.nodeName)==="CANVAS"&&(J.previousSibling.hidden=!0),J.hidden=!1)}_getKeyModifier(J){return util_FeatureTest.platform.isMac?J.metaKey:J.ctrlKey}_setEventListener(J,ne,oe,ce,ue){oe.includes("mouse")?J.addEventListener(oe,Ae=>{var pe;(pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ce,value:ue(Ae),shift:Ae.shiftKey,modifier:this._getKeyModifier(Ae)}})}):J.addEventListener(oe,Ae=>{var pe;if(oe==="blur"){if(!ne.focused||!Ae.relatedTarget)return;ne.focused=!1}else if(oe==="focus"){if(ne.focused)return;ne.focused=!0}ue&&((pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ce,value:ue(Ae)}}))})}_setEventListeners(J,ne,oe,ce){var ue,Ae,pe;for(const[ve,me]of oe)(me==="Action"||(ue=this.data.actions)!=null&&ue[me])&&((me==="Focus"||me==="Blur")&&(ne||(ne={focused:!1})),this._setEventListener(J,ne,ve,me,ce),me==="Focus"&&!((Ae=this.data.actions)!=null&&Ae.Blur)?this._setEventListener(J,ne,"blur","Blur",null):me==="Blur"&&!((pe=this.data.actions)!=null&&pe.Focus)&&this._setEventListener(J,ne,"focus","Focus",null))}_setBackgroundColor(J){const ne=this.data.backgroundColor||null;J.style.backgroundColor=ne===null?"transparent":Util.makeHexColor(ne[0],ne[1],ne[2])}_setTextStyle(J){const ne=["left","center","right"],{fontColor:oe}=this.data.defaultAppearanceData,ce=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,ue=J.style;let Ae;const pe=2,ve=me=>Math.round(10*me)/10;if(this.data.multiLine){const me=Math.abs(this.data.rect[3]-this.data.rect[1]-pe),ge=Math.round(me/(LINE_FACTOR*ce))||1,ye=me/ge;Ae=Math.min(ce,ve(ye/LINE_FACTOR))}else{const me=Math.abs(this.data.rect[3]-this.data.rect[1]-pe);Ae=Math.min(ce,ve(me/LINE_FACTOR))}ue.fontSize=`calc(${Ae}px * var(--total-scale-factor))`,ue.color=Util.makeHexColor(oe[0],oe[1],oe[2]),this.data.textAlignment!==null&&(ue.textAlign=ne[this.data.textAlignment])}_setRequired(J,ne){ne?J.setAttribute("required",!0):J.removeAttribute("required"),J.setAttribute("aria-required",ne)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(J){const ne=J.renderForms||J.data.hasOwnCanvas||!J.data.hasAppearance&&!!J.data.fieldValue;super(J,{isRenderable:ne})}setPropertyOnSiblings(J,ne,oe,ce){const ue=this.annotationStorage;for(const Ae of this._getElementsByName(J.name,J.id))Ae.domElement&&(Ae.domElement[ne]=oe),ue.setValue(Ae.id,{[ce]:oe})}render(){var ce,ue;const J=this.annotationStorage,ne=this.data.id;this.container.classList.add("textWidgetAnnotation");let oe=null;if(this.renderForms){const Ae=J.getValue(ne,{value:this.data.fieldValue});let pe=Ae.value||"";const ve=J.getValue(ne,{charLimit:this.data.maxLen}).charLimit;ve&&pe.length>ve&&(pe=pe.slice(0,ve));let me=Ae.formattedValue||((ce=this.data.textContent)==null?void 0:ce.join(`
`))||null;me&&this.data.comb&&(me=me.replaceAll(/\s+/g,""));const ge={userValue:pe,formattedValue:me,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(oe=document.createElement("textarea"),oe.textContent=me??pe,this.data.doNotScroll&&(oe.style.overflowY="hidden")):(oe=document.createElement("input"),oe.type=this.data.password?"password":"text",oe.setAttribute("value",me??pe),this.data.doNotScroll&&(oe.style.overflowX="hidden")),this.data.hasOwnCanvas&&(oe.hidden=!0),GetElementsByNameSet.add(oe),oe.setAttribute("data-element-id",ne),oe.disabled=this.data.readOnly,oe.name=this.data.fieldName,oe.tabIndex=0;const{datetimeFormat:ye,datetimeType:xe,timeStep:_e}=this.data,$e=!!xe&&this.enableScripting;ye&&(oe.title=ye),this._setRequired(oe,this.data.required),ve&&(oe.maxLength=ve),oe.addEventListener("input",Fe=>{J.setValue(ne,{value:Fe.target.value}),this.setPropertyOnSiblings(oe,"value",Fe.target.value,"value"),ge.formattedValue=null}),oe.addEventListener("resetform",Fe=>{const ke=this.data.defaultFieldValue??"";oe.value=ge.userValue=ke,ge.formattedValue=null});let Ie=Fe=>{const{formattedValue:ke}=ge;ke!=null&&(Fe.target.value=ke),Fe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){oe.addEventListener("focus",ke=>{var We;if(ge.focused)return;const{target:je}=ke;if($e&&(je.type=xe,_e&&(je.step=_e)),ge.userValue){const ze=ge.userValue;if($e)if(xe==="time"){const Xe=new Date(ze),Je=[Xe.getHours(),Xe.getMinutes(),Xe.getSeconds()];je.value=Je.map(nt=>nt.toString().padStart(2,"0")).join(":")}else je.value=new Date(ze-TIMEZONE_OFFSET).toISOString().split(xe==="date"?"T":".",1)[0];else je.value=ze}ge.lastCommittedValue=je.value,ge.commitKey=1,(We=this.data.actions)!=null&&We.Focus||(ge.focused=!0)}),oe.addEventListener("updatefromsandbox",ke=>{this.showElementAndHideCanvas(ke.target);const je={value(We){ge.userValue=We.detail.value??"",$e||J.setValue(ne,{value:ge.userValue.toString()}),We.target.value=ge.userValue},formattedValue(We){const{formattedValue:ze}=We.detail;ge.formattedValue=ze,ze!=null&&We.target!==document.activeElement&&(We.target.value=ze);const Xe={formattedValue:ze};$e&&(Xe.value=ze),J.setValue(ne,Xe)},selRange(We){We.target.setSelectionRange(...We.detail.selRange)},charLimit:We=>{var nt;const{charLimit:ze}=We.detail,{target:Xe}=We;if(ze===0){Xe.removeAttribute("maxLength");return}Xe.setAttribute("maxLength",ze);let Je=ge.userValue;!Je||Je.length<=ze||(Je=Je.slice(0,ze),Xe.value=ge.userValue=Je,J.setValue(ne,{value:Je}),(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ne,name:"Keystroke",value:Je,willCommit:!0,commitKey:1,selStart:Xe.selectionStart,selEnd:Xe.selectionEnd}}))}};this._dispatchEventFromSandbox(je,ke)}),oe.addEventListener("keydown",ke=>{var ze;ge.commitKey=1;let je=-1;if(ke.key==="Escape"?je=0:ke.key==="Enter"&&!this.data.multiLine?je=2:ke.key==="Tab"&&(ge.commitKey=3),je===-1)return;const{value:We}=ke.target;ge.lastCommittedValue!==We&&(ge.lastCommittedValue=We,ge.userValue=We,(ze=this.linkService.eventBus)==null||ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ne,name:"Keystroke",value:We,willCommit:!0,commitKey:je,selStart:ke.target.selectionStart,selEnd:ke.target.selectionEnd}}))});const Fe=Ie;Ie=null,oe.addEventListener("blur",ke=>{var ze,Xe;if(!ge.focused||!ke.relatedTarget)return;(ze=this.data.actions)!=null&&ze.Blur||(ge.focused=!1);const{target:je}=ke;let{value:We}=je;if($e){if(We&&xe==="time"){const Je=We.split(":").map(nt=>parseInt(nt,10));We=new Date(2e3,0,1,Je[0],Je[1],Je[2]||0).valueOf(),je.step=""}else We.includes("T")||(We=`${We}T00:00`),We=new Date(We).valueOf();je.type="text"}ge.userValue=We,ge.lastCommittedValue!==We&&((Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ne,name:"Keystroke",value:We,willCommit:!0,commitKey:ge.commitKey,selStart:ke.target.selectionStart,selEnd:ke.target.selectionEnd}})),Fe(ke)}),(ue=this.data.actions)!=null&&ue.Keystroke&&oe.addEventListener("beforeinput",ke=>{var tt;ge.lastCommittedValue=null;const{data:je,target:We}=ke,{value:ze,selectionStart:Xe,selectionEnd:Je}=We;let nt=Xe,et=Je;switch(ke.inputType){case"deleteWordBackward":{const st=ze.substring(0,Xe).match(/\w*[^\w]*$/);st&&(nt-=st[0].length);break}case"deleteWordForward":{const st=ze.substring(Xe).match(/^[^\w]*\w*/);st&&(et+=st[0].length);break}case"deleteContentBackward":Xe===Je&&(nt-=1);break;case"deleteContentForward":Xe===Je&&(et+=1);break}ke.preventDefault(),(tt=this.linkService.eventBus)==null||tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ne,name:"Keystroke",value:ze,change:je||"",willCommit:!1,selStart:nt,selEnd:et}})}),this._setEventListeners(oe,ge,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ke=>ke.target.value)}if(Ie&&oe.addEventListener("blur",Ie),this.data.comb){const ke=(this.data.rect[2]-this.data.rect[0])/ve;oe.classList.add("comb"),oe.style.letterSpacing=`calc(${ke}px * var(--total-scale-factor) - 1ch)`}}else oe=document.createElement("div"),oe.textContent=this.data.fieldValue,oe.style.verticalAlign="middle",oe.style.display="table-cell",this.data.hasOwnCanvas&&(oe.hidden=!0);return this._setTextStyle(oe),this._setBackgroundColor(oe),this._setDefaultPropertiesFromJS(oe),this.container.append(oe),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(J){super(J,{isRenderable:!!J.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(J){super(J,{isRenderable:J.renderForms})}render(){const J=this.annotationStorage,ne=this.data,oe=ne.id;let ce=J.getValue(oe,{value:ne.exportValue===ne.fieldValue}).value;typeof ce=="string"&&(ce=ce!=="Off",J.setValue(oe,{value:ce})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ue=document.createElement("input");return GetElementsByNameSet.add(ue),ue.setAttribute("data-element-id",oe),ue.disabled=ne.readOnly,this._setRequired(ue,this.data.required),ue.type="checkbox",ue.name=ne.fieldName,ce&&ue.setAttribute("checked",!0),ue.setAttribute("exportValue",ne.exportValue),ue.tabIndex=0,ue.addEventListener("change",Ae=>{const{name:pe,checked:ve}=Ae.target;for(const me of this._getElementsByName(pe,oe)){const ge=ve&&me.exportValue===ne.exportValue;me.domElement&&(me.domElement.checked=ge),J.setValue(me.id,{value:ge})}J.setValue(oe,{value:ve})}),ue.addEventListener("resetform",Ae=>{const pe=ne.defaultFieldValue||"Off";Ae.target.checked=pe===ne.exportValue}),this.enableScripting&&this.hasJSActions&&(ue.addEventListener("updatefromsandbox",Ae=>{const pe={value(ve){ve.target.checked=ve.detail.value!=="Off",J.setValue(oe,{value:ve.target.checked})}};this._dispatchEventFromSandbox(pe,Ae)}),this._setEventListeners(ue,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ae=>Ae.target.checked)),this._setBackgroundColor(ue),this._setDefaultPropertiesFromJS(ue),this.container.append(ue),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(J){super(J,{isRenderable:J.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const J=this.annotationStorage,ne=this.data,oe=ne.id;let ce=J.getValue(oe,{value:ne.fieldValue===ne.buttonValue}).value;if(typeof ce=="string"&&(ce=ce!==ne.buttonValue,J.setValue(oe,{value:ce})),ce)for(const Ae of this._getElementsByName(ne.fieldName,oe))J.setValue(Ae.id,{value:!1});const ue=document.createElement("input");if(GetElementsByNameSet.add(ue),ue.setAttribute("data-element-id",oe),ue.disabled=ne.readOnly,this._setRequired(ue,this.data.required),ue.type="radio",ue.name=ne.fieldName,ce&&ue.setAttribute("checked",!0),ue.tabIndex=0,ue.addEventListener("change",Ae=>{const{name:pe,checked:ve}=Ae.target;for(const me of this._getElementsByName(pe,oe))J.setValue(me.id,{value:!1});J.setValue(oe,{value:ve})}),ue.addEventListener("resetform",Ae=>{const pe=ne.defaultFieldValue;Ae.target.checked=pe!=null&&pe===ne.buttonValue}),this.enableScripting&&this.hasJSActions){const Ae=ne.buttonValue;ue.addEventListener("updatefromsandbox",pe=>{const ve={value:me=>{const ge=Ae===me.detail.value;for(const ye of this._getElementsByName(me.target.name)){const xe=ge&&ye.id===oe;ye.domElement&&(ye.domElement.checked=xe),J.setValue(ye.id,{value:xe})}}};this._dispatchEventFromSandbox(ve,pe)}),this._setEventListeners(ue,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],pe=>pe.target.checked)}return this._setBackgroundColor(ue),this._setDefaultPropertiesFromJS(ue),this.container.append(ue),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(J){super(J,{ignoreBorder:J.data.hasAppearance})}render(){const J=super.render();J.classList.add("buttonWidgetAnnotation","pushButton");const ne=J.lastChild;return this.enableScripting&&this.hasJSActions&&ne&&(this._setDefaultPropertiesFromJS(ne),ne.addEventListener("updatefromsandbox",oe=>{this._dispatchEventFromSandbox({},oe)})),J}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(J){super(J,{isRenderable:J.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const J=this.annotationStorage,ne=this.data.id,oe=J.getValue(ne,{value:this.data.fieldValue}),ce=document.createElement("select");GetElementsByNameSet.add(ce),ce.setAttribute("data-element-id",ne),ce.disabled=this.data.readOnly,this._setRequired(ce,this.data.required),ce.name=this.data.fieldName,ce.tabIndex=0;let ue=this.data.combo&&this.data.options.length>0;this.data.combo||(ce.size=this.data.options.length,this.data.multiSelect&&(ce.multiple=!0)),ce.addEventListener("resetform",ge=>{const ye=this.data.defaultFieldValue;for(const xe of ce.options)xe.selected=xe.value===ye});for(const ge of this.data.options){const ye=document.createElement("option");ye.textContent=ge.displayValue,ye.value=ge.exportValue,oe.value.includes(ge.exportValue)&&(ye.setAttribute("selected",!0),ue=!1),ce.append(ye)}let Ae=null;if(ue){const ge=document.createElement("option");ge.value=" ",ge.setAttribute("hidden",!0),ge.setAttribute("selected",!0),ce.prepend(ge),Ae=()=>{ge.remove(),ce.removeEventListener("input",Ae),Ae=null},ce.addEventListener("input",Ae)}const pe=ge=>{const ye=ge?"value":"textContent",{options:xe,multiple:_e}=ce;return _e?Array.prototype.filter.call(xe,$e=>$e.selected).map($e=>$e[ye]):xe.selectedIndex===-1?null:xe[xe.selectedIndex][ye]};let ve=pe(!1);const me=ge=>{const ye=ge.target.options;return Array.prototype.map.call(ye,xe=>({displayValue:xe.textContent,exportValue:xe.value}))};return this.enableScripting&&this.hasJSActions?(ce.addEventListener("updatefromsandbox",ge=>{const ye={value(xe){Ae==null||Ae();const _e=xe.detail.value,$e=new Set(Array.isArray(_e)?_e:[_e]);for(const Ie of ce.options)Ie.selected=$e.has(Ie.value);J.setValue(ne,{value:pe(!0)}),ve=pe(!1)},multipleSelection(xe){ce.multiple=!0},remove(xe){const _e=ce.options,$e=xe.detail.remove;_e[$e].selected=!1,ce.remove($e),_e.length>0&&Array.prototype.findIndex.call(_e,Fe=>Fe.selected)===-1&&(_e[0].selected=!0),J.setValue(ne,{value:pe(!0),items:me(xe)}),ve=pe(!1)},clear(xe){for(;ce.length!==0;)ce.remove(0);J.setValue(ne,{value:null,items:[]}),ve=pe(!1)},insert(xe){const{index:_e,displayValue:$e,exportValue:Ie}=xe.detail.insert,Fe=ce.children[_e],ke=document.createElement("option");ke.textContent=$e,ke.value=Ie,Fe?Fe.before(ke):ce.append(ke),J.setValue(ne,{value:pe(!0),items:me(xe)}),ve=pe(!1)},items(xe){const{items:_e}=xe.detail;for(;ce.length!==0;)ce.remove(0);for(const $e of _e){const{displayValue:Ie,exportValue:Fe}=$e,ke=document.createElement("option");ke.textContent=Ie,ke.value=Fe,ce.append(ke)}ce.options.length>0&&(ce.options[0].selected=!0),J.setValue(ne,{value:pe(!0),items:me(xe)}),ve=pe(!1)},indices(xe){const _e=new Set(xe.detail.indices);for(const $e of xe.target.options)$e.selected=_e.has($e.index);J.setValue(ne,{value:pe(!0)}),ve=pe(!1)},editable(xe){xe.target.disabled=!xe.detail.editable}};this._dispatchEventFromSandbox(ye,ge)}),ce.addEventListener("input",ge=>{var _e;const ye=pe(!0),xe=pe(!1);J.setValue(ne,{value:ye}),ge.preventDefault(),(_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ne,name:"Keystroke",value:ve,change:xe,changeEx:ye,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ce,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ge=>ge.target.value)):ce.addEventListener("input",function(ge){J.setValue(ne,{value:pe(!0)})}),this.data.combo&&this._setTextStyle(ce),this._setBackgroundColor(ce),this._setDefaultPropertiesFromJS(ce),this.container.append(ce),this.container}}var xh,q0;class PopupAnnotationElement extends AnnotationElement{constructor(ne){const{data:oe,elements:ce,parent:ue}=ne,Ae=!!ue._commentManager;super(ne,{isRenderable:!Ae&&AnnotationElement._hasPopupData(oe)});yt(this,xh);if(this.elements=ce,Ae&&AnnotationElement._hasPopupData(oe)){const pe=this.popup=bt(this,xh,q0).call(this);for(const ve of ce)ve.popup=pe}else this.popup=null}render(){const{container:ne}=this;ne.classList.add("popupAnnotation"),ne.role="comment";const oe=this.popup=bt(this,xh,q0).call(this),ce=[];for(const ue of this.elements)ue.popup=oe,ue.container.ariaHasPopup="dialog",ce.push(ue.data.id),ue.addHighlightArea();return this.container.setAttribute("aria-controls",ce.map(ue=>`${AnnotationPrefix}${ue}`).join(",")),this.container}}xh=new WeakSet,q0=function(){return new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var bs,cl,$p,Np,uf,ff,Ai,Ma,ul,Ic,df,hf,Na,ws,po,mo,Ii,vo,fl,Eh,yo,Af,$c,dl,Wi,hl,En,KA,G0,z0,W0,ep,Y0,wm,Cm,Sm,_m,tp,rp,X0;class PopupElement{constructor({container:J,color:ne,elements:oe,titleObj:ce,modificationDate:ue,contentsObj:Ae,richText:pe,parent:ve,rect:me,parentRect:ge,open:ye,commentManager:xe=null}){yt(this,En);yt(this,bs,null);yt(this,cl,bt(this,En,Sm).bind(this));yt(this,$p,bt(this,En,X0).bind(this));yt(this,Np,bt(this,En,rp).bind(this));yt(this,uf,bt(this,En,tp).bind(this));yt(this,ff,null);yt(this,Ai,null);yt(this,Ma,null);yt(this,ul,null);yt(this,Ic,null);yt(this,df,null);yt(this,hf,null);yt(this,Na,!1);yt(this,ws,null);yt(this,po,null);yt(this,mo,null);yt(this,Ii,null);yt(this,vo,null);yt(this,fl,null);yt(this,Eh,null);yt(this,yo,null);yt(this,Af,null);yt(this,$c,null);yt(this,dl,!1);yt(this,Wi,null);yt(this,hl,null);ht(this,Ai,J),ht(this,Af,ce),ht(this,Ma,Ae),ht(this,yo,pe),ht(this,df,ve),ht(this,ff,ne),ht(this,Eh,me),ht(this,hf,ge),ht(this,Ic,oe),ht(this,bs,xe),ht(this,Wi,oe[0]),ht(this,ul,PDFDateString.toDateObject(ue)),this.trigger=oe.flatMap(_e=>_e.getElementsToTriggerPopup()),xe?this.renderCommentButton():(bt(this,En,KA).call(this),Ze(this,Ai).hidden=!0,ye&&bt(this,En,tp).call(this))}renderCommentButton(){if(Ze(this,Ii)||(Ze(this,vo)||bt(this,En,G0).call(this),!Ze(this,vo)))return;const{signal:J}=ht(this,po,new AbortController),ne=!!Ze(this,Wi).extraPopupElement,oe=()=>{Ze(this,bs).toggleCommentPopup(this,!0,void 0,!ne)},ce=()=>{Ze(this,bs).toggleCommentPopup(this,!1,!0,!ne)},ue=()=>{Ze(this,bs).toggleCommentPopup(this,!1,!1)};if(ne){ht(this,Ii,Ze(this,Wi).container);for(const Ae of this.trigger)Ae.ariaHasPopup="dialog",Ae.ariaControls="commentPopup",Ae.addEventListener("keydown",Ze(this,cl),{signal:J}),Ae.addEventListener("click",oe,{signal:J}),Ae.addEventListener("pointerenter",ce,{signal:J}),Ae.addEventListener("pointerleave",ue,{signal:J}),Ae.classList.add("popupTriggerArea")}else{const Ae=ht(this,Ii,document.createElement("button"));Ae.className="annotationCommentButton";const pe=Ze(this,Wi).container;Ae.style.zIndex=pe.style.zIndex+1,Ae.tabIndex=0,Ae.ariaHasPopup="dialog",Ae.ariaControls="commentPopup",Ae.setAttribute("data-l10n-id","pdfjs-show-comment-button"),bt(this,En,W0).call(this),bt(this,En,z0).call(this),Ae.addEventListener("keydown",Ze(this,cl),{signal:J}),Ae.addEventListener("click",oe,{signal:J}),Ae.addEventListener("pointerenter",ce,{signal:J}),Ae.addEventListener("pointerleave",ue,{signal:J}),pe.after(Ae)}}get commentButtonColor(){const{color:J,opacity:ne}=Ze(this,Wi).commentData;return J?Ze(this,df)._commentManager.makeCommentColor(J,ne):null}focusCommentButton(){setTimeout(()=>{var J;(J=Ze(this,Ii))==null||J.focus()},0)}getData(){const{richText:J,color:ne,opacity:oe,creationDate:ce,modificationDate:ue}=Ze(this,Wi).commentData;return{contentsObj:{str:this.comment},richText:J,color:ne,opacity:oe,creationDate:ce,modificationDate:ue}}get elementBeforePopup(){return Ze(this,Ii)}get comment(){return Ze(this,hl)||ht(this,hl,Ze(this,Wi).commentText),Ze(this,hl)}set comment(J){J!==this.comment&&(Ze(this,Wi).commentText=ht(this,hl,J))}get parentBoundingClientRect(){return Ze(this,Wi).layer.getBoundingClientRect()}setCommentButtonStates({selected:J,hasPopup:ne}){Ze(this,Ii)&&(Ze(this,Ii).classList.toggle("selected",J),Ze(this,Ii).ariaExpanded=ne)}setSelectedCommentButton(J){Ze(this,Ii).classList.toggle("selected",J)}get commentPopupPosition(){if(Ze(this,fl))return Ze(this,fl);const{x:J,y:ne,height:oe}=Ze(this,Ii).getBoundingClientRect(),{x:ce,y:ue,width:Ae,height:pe}=Ze(this,Wi).layer.getBoundingClientRect();return[(J-ce)/Ae,(ne+oe-ue)/pe]}set commentPopupPosition(J){ht(this,fl,J)}hasDefaultPopupPosition(){return Ze(this,fl)===null}get commentButtonPosition(){return Ze(this,vo)}get commentButtonWidth(){return Ze(this,Ii).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(J){const[ne,oe]=Ze(this,fl)||this.commentButtonPosition.map(me=>me/100),ce=this.parentBoundingClientRect,{x:ue,y:Ae,width:pe,height:ve}=ce;Ze(this,bs).showDialog(null,this,ue+ne*pe,Ae+oe*ve,{...J,parentDimensions:ce})}render(){var oe,ce;if(Ze(this,ws))return;const J=ht(this,ws,document.createElement("div"));if(J.className="popup",Ze(this,ff)){const ue=J.style.outlineColor=Util.makeHexColor(...Ze(this,ff));J.style.backgroundColor=`color-mix(in srgb, ${ue} 30%, white)`}const ne=document.createElement("span");if(ne.className="header",(oe=Ze(this,Af))!=null&&oe.str){const ue=document.createElement("span");ue.className="title",ne.append(ue),{dir:ue.dir,str:ue.textContent}=Ze(this,Af)}if(J.append(ne),Ze(this,ul)){const ue=document.createElement("time");ue.className="popupDate",ue.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),ue.setAttribute("data-l10n-args",JSON.stringify({dateObj:Ze(this,ul).valueOf()})),ue.dateTime=Ze(this,ul).toISOString(),ne.append(ue)}renderRichText({html:Ze(this,En,ep)||Ze(this,Ma).str,dir:(ce=Ze(this,Ma))==null?void 0:ce.dir,className:"popupContent"},J),Ze(this,Ai).append(J)}updateEdited({rect:J,popup:ne,deleted:oe}){var ce;if(Ze(this,bs)){oe?(this.remove(),ht(this,hl,null)):ne&&(ne.deleted?this.remove():(bt(this,En,W0).call(this),ht(this,hl,ne.text))),J&&(ht(this,vo,null),bt(this,En,G0).call(this),bt(this,En,z0).call(this));return}if(oe||ne!=null&&ne.deleted){this.remove();return}bt(this,En,KA).call(this),Ze(this,$c)||ht(this,$c,{contentsObj:Ze(this,Ma),richText:Ze(this,yo)}),J&&ht(this,mo,null),ne&&ne.text&&(ht(this,yo,bt(this,En,Cm).call(this,ne.text)),ht(this,ul,PDFDateString.toDateObject(ne.date)),ht(this,Ma,null)),(ce=Ze(this,ws))==null||ce.remove(),ht(this,ws,null)}resetEdited(){var J;Ze(this,$c)&&({contentsObj:wi(this,Ma)._,richText:wi(this,yo)._}=Ze(this,$c),ht(this,$c,null),(J=Ze(this,ws))==null||J.remove(),ht(this,ws,null),ht(this,mo,null))}remove(){var J,ne,oe;if((J=Ze(this,po))==null||J.abort(),ht(this,po,null),(ne=Ze(this,ws))==null||ne.remove(),ht(this,ws,null),ht(this,dl,!1),ht(this,Na,!1),(oe=Ze(this,Ii))==null||oe.remove(),ht(this,Ii,null),this.trigger)for(const ce of this.trigger)ce.classList.remove("popupTriggerArea")}forceHide(){ht(this,dl,this.isVisible),Ze(this,dl)&&(Ze(this,Ai).hidden=!0)}maybeShow(){Ze(this,bs)||(bt(this,En,KA).call(this),Ze(this,dl)&&(Ze(this,ws)||bt(this,En,rp).call(this),ht(this,dl,!1),Ze(this,Ai).hidden=!1))}get isVisible(){return Ze(this,bs)?!1:Ze(this,Ai).hidden===!1}}bs=new WeakMap,cl=new WeakMap,$p=new WeakMap,Np=new WeakMap,uf=new WeakMap,ff=new WeakMap,Ai=new WeakMap,Ma=new WeakMap,ul=new WeakMap,Ic=new WeakMap,df=new WeakMap,hf=new WeakMap,Na=new WeakMap,ws=new WeakMap,po=new WeakMap,mo=new WeakMap,Ii=new WeakMap,vo=new WeakMap,fl=new WeakMap,Eh=new WeakMap,yo=new WeakMap,Af=new WeakMap,$c=new WeakMap,dl=new WeakMap,Wi=new WeakMap,hl=new WeakMap,En=new WeakSet,KA=function(){var ne;if(Ze(this,po))return;ht(this,po,new AbortController);const{signal:J}=Ze(this,po);for(const oe of this.trigger)oe.addEventListener("click",Ze(this,uf),{signal:J}),oe.addEventListener("pointerenter",Ze(this,Np),{signal:J}),oe.addEventListener("pointerleave",Ze(this,$p),{signal:J}),oe.classList.add("popupTriggerArea");for(const oe of Ze(this,Ic))(ne=oe.container)==null||ne.addEventListener("keydown",Ze(this,cl),{signal:J})},G0=function(){const J=Ze(this,Ic).find(ne=>ne.hasCommentButton);J&&ht(this,vo,J._normalizePoint(J.commentButtonPosition))},z0=function(){if(Ze(this,Wi).extraPopupElement&&!Ze(this,Wi).editor)return;this.renderCommentButton();const[J,ne]=Ze(this,vo),{style:oe}=Ze(this,Ii);oe.left=`calc(${J}%)`,oe.top=`calc(${ne}% - var(--comment-button-dim))`},W0=function(){Ze(this,Wi).extraPopupElement||(this.renderCommentButton(),Ze(this,Ii).style.backgroundColor=this.commentButtonColor||"")},ep=function(){const J=Ze(this,yo),ne=Ze(this,Ma);return J!=null&&J.str&&(!(ne!=null&&ne.str)||ne.str===J.str)&&Ze(this,yo).html||null},Y0=function(){var J,ne,oe;return((oe=(ne=(J=Ze(this,En,ep))==null?void 0:J.attributes)==null?void 0:ne.style)==null?void 0:oe.fontSize)||0},wm=function(){var J,ne,oe;return((oe=(ne=(J=Ze(this,En,ep))==null?void 0:J.attributes)==null?void 0:ne.style)==null?void 0:oe.color)||null},Cm=function(J){const ne=[],oe={str:J,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:ne}]}},ce={style:{color:Ze(this,En,wm),fontSize:Ze(this,En,Y0)?`calc(${Ze(this,En,Y0)}px * var(--total-scale-factor))`:""}};for(const ue of J.split(`
`))ne.push({name:"span",value:ue,attributes:ce});return oe},Sm=function(J){J.altKey||J.shiftKey||J.ctrlKey||J.metaKey||(J.key==="Enter"||J.key==="Escape"&&Ze(this,Na))&&bt(this,En,tp).call(this)},_m=function(){if(Ze(this,mo)!==null)return;const{page:{view:J},viewport:{rawDims:{pageWidth:ne,pageHeight:oe,pageX:ce,pageY:ue}}}=Ze(this,df);let Ae=!!Ze(this,hf),pe=Ae?Ze(this,hf):Ze(this,Eh);for(const $e of Ze(this,Ic))if(!pe||Util.intersect($e.data.rect,pe)!==null){pe=$e.data.rect,Ae=!0;break}const ve=Util.normalizeRect([pe[0],J[3]-pe[1]+J[1],pe[2],J[3]-pe[3]+J[1]]),ge=Ae?pe[2]-pe[0]+5:0,ye=ve[0]+ge,xe=ve[1];ht(this,mo,[100*(ye-ce)/ne,100*(xe-ue)/oe]);const{style:_e}=Ze(this,Ai);_e.left=`${Ze(this,mo)[0]}%`,_e.top=`${Ze(this,mo)[1]}%`},tp=function(){if(Ze(this,bs)){Ze(this,bs).toggleCommentPopup(this,!1);return}ht(this,Na,!Ze(this,Na)),Ze(this,Na)?(bt(this,En,rp).call(this),Ze(this,Ai).addEventListener("click",Ze(this,uf)),Ze(this,Ai).addEventListener("keydown",Ze(this,cl))):(bt(this,En,X0).call(this),Ze(this,Ai).removeEventListener("click",Ze(this,uf)),Ze(this,Ai).removeEventListener("keydown",Ze(this,cl)))},rp=function(){Ze(this,ws)||this.render(),this.isVisible?Ze(this,Na)&&Ze(this,Ai).classList.add("focused"):(bt(this,En,_m).call(this),Ze(this,Ai).hidden=!1,Ze(this,Ai).style.zIndex=parseInt(Ze(this,Ai).style.zIndex)+1e3)},X0=function(){Ze(this,Ai).classList.remove("focused"),!(Ze(this,Na)||!this.isVisible)&&(Ze(this,Ai).hidden=!0,Ze(this,Ai).style.zIndex=parseInt(Ze(this,Ai).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0}),this.textContent=J.data.textContent,this.textPosition=J.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const J=document.createElement("div");J.classList.add("annotationTextContent"),J.setAttribute("role","comment");for(const ne of this.textContent){const oe=document.createElement("span");oe.textContent=ne,J.append(oe)}this.container.append(J)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var bh;class LineAnnotationElement extends AnnotationElement{constructor(ne){super(ne,{isRenderable:!0,ignoreBorder:!0});yt(this,bh,null)}render(){this.container.classList.add("lineAnnotation");const{data:ne,width:oe,height:ce}=this,ue=this.svgFactory.create(oe,ce,!0),Ae=ht(this,bh,this.svgFactory.createElement("svg:line"));return Ae.setAttribute("x1",ne.rect[2]-ne.lineCoordinates[0]),Ae.setAttribute("y1",ne.rect[3]-ne.lineCoordinates[1]),Ae.setAttribute("x2",ne.rect[2]-ne.lineCoordinates[2]),Ae.setAttribute("y2",ne.rect[3]-ne.lineCoordinates[3]),Ae.setAttribute("stroke-width",ne.borderStyle.width||1),Ae.setAttribute("stroke","transparent"),Ae.setAttribute("fill","transparent"),ue.append(Ae),this.container.append(ue),!ne.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ze(this,bh)}addHighlightArea(){this.container.classList.add("highlightArea")}}bh=new WeakMap;var wh;class SquareAnnotationElement extends AnnotationElement{constructor(ne){super(ne,{isRenderable:!0,ignoreBorder:!0});yt(this,wh,null)}render(){this.container.classList.add("squareAnnotation");const{data:ne,width:oe,height:ce}=this,ue=this.svgFactory.create(oe,ce,!0),Ae=ne.borderStyle.width,pe=ht(this,wh,this.svgFactory.createElement("svg:rect"));return pe.setAttribute("x",Ae/2),pe.setAttribute("y",Ae/2),pe.setAttribute("width",oe-Ae),pe.setAttribute("height",ce-Ae),pe.setAttribute("stroke-width",Ae||1),pe.setAttribute("stroke","transparent"),pe.setAttribute("fill","transparent"),ue.append(pe),this.container.append(ue),!ne.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ze(this,wh)}addHighlightArea(){this.container.classList.add("highlightArea")}}wh=new WeakMap;var Ch;class CircleAnnotationElement extends AnnotationElement{constructor(ne){super(ne,{isRenderable:!0,ignoreBorder:!0});yt(this,Ch,null)}render(){this.container.classList.add("circleAnnotation");const{data:ne,width:oe,height:ce}=this,ue=this.svgFactory.create(oe,ce,!0),Ae=ne.borderStyle.width,pe=ht(this,Ch,this.svgFactory.createElement("svg:ellipse"));return pe.setAttribute("cx",oe/2),pe.setAttribute("cy",ce/2),pe.setAttribute("rx",oe/2-Ae/2),pe.setAttribute("ry",ce/2-Ae/2),pe.setAttribute("stroke-width",Ae||1),pe.setAttribute("stroke","transparent"),pe.setAttribute("fill","transparent"),ue.append(pe),this.container.append(ue),!ne.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ze(this,Ch)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ch=new WeakMap;var Sh;class PolylineAnnotationElement extends AnnotationElement{constructor(ne){super(ne,{isRenderable:!0,ignoreBorder:!0});yt(this,Sh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:ne,vertices:oe,borderStyle:ce,popupRef:ue},width:Ae,height:pe}=this;if(!oe)return this.container;const ve=this.svgFactory.create(Ae,pe,!0);let me=[];for(let ye=0,xe=oe.length;ye<xe;ye+=2){const _e=oe[ye]-ne[0],$e=ne[3]-oe[ye+1];me.push(`${_e},${$e}`)}me=me.join(" ");const ge=ht(this,Sh,this.svgFactory.createElement(this.svgElementName));return ge.setAttribute("points",me),ge.setAttribute("stroke-width",ce.width||1),ge.setAttribute("stroke","transparent"),ge.setAttribute("fill","transparent"),ve.append(ge),this.container.append(ve),!ue&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ze(this,Sh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sh=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(J){super(J),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var _h,Mc,Th,Z0;class InkAnnotationElement extends AnnotationElement{constructor(ne){super(ne,{isRenderable:!0,ignoreBorder:!0});yt(this,Th);yt(this,_h,null);yt(this,Mc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:ne,rotation:oe,inkLists:ce,borderStyle:ue,popupRef:Ae}}=this,{transform:pe,width:ve,height:me}=bt(this,Th,Z0).call(this,oe,ne),ge=this.svgFactory.create(ve,me,!0),ye=ht(this,_h,this.svgFactory.createElement("svg:g"));ge.append(ye),ye.setAttribute("stroke-width",ue.width||1),ye.setAttribute("stroke-linecap","round"),ye.setAttribute("stroke-linejoin","round"),ye.setAttribute("stroke-miterlimit",10),ye.setAttribute("stroke","transparent"),ye.setAttribute("fill","transparent"),ye.setAttribute("transform",pe);for(let xe=0,_e=ce.length;xe<_e;xe++){const $e=this.svgFactory.createElement(this.svgElementName);Ze(this,Mc).push($e),$e.setAttribute("points",ce[xe].join(",")),ye.append($e)}return!Ae&&this.hasPopupData&&this._createPopup(),this.container.append(ge),this._editOnDoubleClick(),this.container}updateEdited(ne){super.updateEdited(ne);const{thickness:oe,points:ce,rect:ue}=ne,Ae=Ze(this,_h);if(oe>=0&&Ae.setAttribute("stroke-width",oe||1),ce)for(let pe=0,ve=Ze(this,Mc).length;pe<ve;pe++)Ze(this,Mc)[pe].setAttribute("points",ce[pe].join(","));if(ue){const{transform:pe,width:ve,height:me}=bt(this,Th,Z0).call(this,this.data.rotation,ue);Ae.parentElement.setAttribute("viewBox",`0 0 ${ve} ${me}`),Ae.setAttribute("transform",pe)}}getElementsToTriggerPopup(){return Ze(this,Mc)}addHighlightArea(){this.container.classList.add("highlightArea")}}_h=new WeakMap,Mc=new WeakMap,Th=new WeakSet,Z0=function(ne,oe){switch(ne){case 90:return{transform:`rotate(90) translate(${-oe[0]},${oe[1]}) scale(1,-1)`,width:oe[3]-oe[1],height:oe[2]-oe[0]};case 180:return{transform:`rotate(180) translate(${-oe[2]},${oe[1]}) scale(1,-1)`,width:oe[2]-oe[0],height:oe[3]-oe[1]};case 270:return{transform:`rotate(270) translate(${-oe[2]},${oe[3]}) scale(1,-1)`,width:oe[3]-oe[1],height:oe[2]-oe[0]};default:return{transform:`translate(${-oe[0]},${oe[3]}) scale(1,-1)`,width:oe[2]-oe[0],height:oe[3]-oe[1]}}};class HighlightAnnotationElement extends AnnotationElement{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:J,popupRef:ne}}=this;if(!ne&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),J){const oe=document.createElement("mark");oe.classList.add("overlaidText"),oe.textContent=J,this.container.append(oe)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:J,popupRef:ne}}=this;if(!ne&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),J){const oe=document.createElement("u");oe.classList.add("overlaidText"),oe.textContent=J,this.container.append(oe)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:J,popupRef:ne}}=this;if(!ne&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),J){const oe=document.createElement("u");oe.classList.add("overlaidText"),oe.textContent=J,this.container.append(oe)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:J,popupRef:ne}}=this;if(!ne&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),J){const oe=document.createElement("s");oe.classList.add("overlaidText"),oe.textContent=J,this.container.append(oe)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Rh,Bh,J0;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(ne){var ce;super(ne,{isRenderable:!0});yt(this,Bh);yt(this,Rh,null);const{file:oe}=this.data;this.filename=oe.filename,this.content=oe.content,(ce=this.linkService.eventBus)==null||ce.dispatch("fileattachmentannotation",{source:this,...oe})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:ne,data:oe}=this;let ce;oe.hasAppearance||oe.fillAlpha===0?ce=document.createElement("div"):(ce=document.createElement("img"),ce.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(oe.name)?"paperclip":"pushpin"}.svg`,oe.fillAlpha&&oe.fillAlpha<1&&(ce.style=`filter: opacity(${Math.round(oe.fillAlpha*100)}%);`)),ce.addEventListener("dblclick",bt(this,Bh,J0).bind(this)),ht(this,Rh,ce);const{isMac:ue}=util_FeatureTest.platform;return ne.addEventListener("keydown",Ae=>{Ae.key==="Enter"&&(ue?Ae.metaKey:Ae.ctrlKey)&&bt(this,Bh,J0).call(this)}),!oe.popupRef&&this.hasPopupData?this._createPopup():ce.classList.add("popupTriggerArea"),ne.append(ce),ne}getElementsToTriggerPopup(){return Ze(this,Rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rh=new WeakMap,Bh=new WeakSet,J0=function(){var ne;(ne=this.downloadManager)==null||ne.openOrDownloadData(this.content,this.filename)};var pf,Nc,vf,Al,Ih,Dc,Il,eg,tg,yf;let AnnotationLayer$1=(yf=class{constructor({div:J,accessibilityManager:ne,annotationCanvasMap:oe,annotationEditorUIManager:ce,page:ue,viewport:Ae,structTreeLayer:pe,commentManager:ve,linkService:me,annotationStorage:ge}){yt(this,Il);yt(this,pf,null);yt(this,Nc,null);yt(this,vf,null);yt(this,Al,new Map);yt(this,Ih,null);yt(this,Dc,null);this.div=J,ht(this,pf,ne),ht(this,Nc,oe),ht(this,Ih,pe||null),ht(this,Dc,me||null),ht(this,vf,ge||new AnnotationStorage),this.page=ue,this.viewport=Ae,this.zIndex=0,this._annotationEditorUIManager=ce,this._commentManager=ve||null}hasEditableAnnotations(){return Ze(this,Al).size>0}async render(J){var Ae,pe,ve;const{annotations:ne}=J,oe=this.div;setLayerDimensions(oe,this.viewport);const ce=new Map,ue={data:null,layer:oe,linkService:Ze(this,Dc),downloadManager:J.downloadManager,imageResourcesPath:J.imageResourcesPath||"",renderForms:J.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:Ze(this,vf),enableComment:J.enableComment===!0,enableScripting:J.enableScripting===!0,hasJSActions:J.hasJSActions,fieldObjects:J.fieldObjects,parent:this,elements:null};for(const me of ne){if(me.noHTML)continue;const ge=me.annotationType===AnnotationType.POPUP;if(ge){const _e=ce.get(me.id);if(!_e)continue;ue.elements=_e}else if(me.rect[2]===me.rect[0]||me.rect[3]===me.rect[1])continue;ue.data=me;const ye=AnnotationElementFactory.create(ue);if(!ye.isRenderable)continue;if(!ge&&me.popupRef){const _e=ce.get(me.popupRef);_e?_e.push(ye):ce.set(me.popupRef,[ye])}const xe=ye.render();me.hidden&&(xe.style.visibility="hidden"),await bt(this,Il,eg).call(this,xe,me.id,ue.elements),(pe=(Ae=ye.extraPopupElement)==null?void 0:Ae.popup)==null||pe.renderCommentButton(),ye._isEditable&&(Ze(this,Al).set(ye.data.id,ye),(ve=this._annotationEditorUIManager)==null||ve.renderAnnotationElement(ye))}bt(this,Il,tg).call(this)}async addLinkAnnotations(J){const ne={data:null,layer:this.div,linkService:Ze(this,Dc),svgFactory:new DOMSVGFactory,parent:this};for(const oe of J){oe.borderStyle||(oe.borderStyle=yf._defaultBorderStyle),ne.data=oe;const ce=AnnotationElementFactory.create(ne);if(!ce.isRenderable)continue;const ue=ce.render();await bt(this,Il,eg).call(this,ue,oe.id,null)}}update({viewport:J}){const ne=this.div;this.viewport=J,setLayerDimensions(ne,{rotation:J.rotation}),bt(this,Il,tg).call(this),ne.hidden=!1}getEditableAnnotations(){return Array.from(Ze(this,Al).values())}getEditableAnnotation(J){return Ze(this,Al).get(J)}addFakeAnnotation(J){var pe;const{div:ne}=this,{id:oe,rotation:ce}=J,ue=new EditorAnnotationElement({data:{id:oe,rect:J.getPDFRect(),rotation:ce},editor:J,layer:ne,parent:this,enableComment:!!this._commentManager,linkService:Ze(this,Dc),annotationStorage:Ze(this,vf)}),Ae=ue.render();return ne.append(Ae),(pe=Ze(this,pf))==null||pe.moveElementInDOM(ne,Ae,Ae,!1),ue.createOrUpdatePopup(),ue}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},pf=new WeakMap,Nc=new WeakMap,vf=new WeakMap,Al=new WeakMap,Ih=new WeakMap,Dc=new WeakMap,Il=new WeakSet,eg=async function(J,ne,oe){var pe,ve;const ce=J.firstChild||J,ue=ce.id=`${AnnotationPrefix}${ne}`,Ae=await((pe=Ze(this,Ih))==null?void 0:pe.getAriaAttributes(ue));if(Ae)for(const[me,ge]of Ae)ce.setAttribute(me,ge);oe?oe.at(-1).container.after(J):(this.div.append(J),(ve=Ze(this,pf))==null||ve.moveElementInDOM(this.div,J,ce,!1))},tg=function(){var ne;if(!Ze(this,Nc))return;const J=this.div;for(const[oe,ce]of Ze(this,Nc)){const ue=J.querySelector(`[data-annotation-id="${oe}"]`);if(!ue)continue;ce.className="annotationContent";const{firstChild:Ae}=ue;Ae?Ae.nodeName==="CANVAS"?Ae.replaceWith(ce):Ae.classList.contains("annotationContent")?Ae.after(ce):Ae.before(ce):ue.append(ce);const pe=Ze(this,Al).get(oe);pe&&(pe._hasNoCanvas?((ne=this._annotationEditorUIManager)==null||ne.setMissingCanvas(oe,ue.id,ce),pe._hasNoCanvas=!1):pe.canvas=ce)}Ze(this,Nc).clear()},yf);const EOL_PATTERN=/\r\n?|\n/g;var Cs,$h,Oc,Ss,bi,Tm,Rm,Bm,np,Ro,ip,sp,Im,rg,$m;const si=class si extends AnnotationEditor{constructor(ne){super({...ne,name:"freeTextEditor"});yt(this,bi);yt(this,Cs,"");yt(this,$h,`${this.id}-editor`);yt(this,Oc,null);yt(this,Ss);wr(this,"_colorPicker",null);this.color=ne.color||si._defaultColor||AnnotationEditor._defaultLineColor,ht(this,Ss,ne.fontSize||si._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const ne=si.prototype,oe=Ae=>Ae.isEmpty(),ce=AnnotationEditorUIManager.TRANSLATE_SMALL,ue=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],ne.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],ne.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],ne._translateEmpty,{args:[-ce,0],checker:oe}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],ne._translateEmpty,{args:[-ue,0],checker:oe}],[["ArrowRight","mac+ArrowRight"],ne._translateEmpty,{args:[ce,0],checker:oe}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],ne._translateEmpty,{args:[ue,0],checker:oe}],[["ArrowUp","mac+ArrowUp"],ne._translateEmpty,{args:[0,-ce],checker:oe}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],ne._translateEmpty,{args:[0,-ue],checker:oe}],[["ArrowDown","mac+ArrowDown"],ne._translateEmpty,{args:[0,ce],checker:oe}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],ne._translateEmpty,{args:[0,ue],checker:oe}]]))}static initialize(ne,oe){AnnotationEditor.initialize(ne,oe);const ce=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ce.getPropertyValue("--freetext-padding"))}static updateDefaultParams(ne,oe){switch(ne){case AnnotationEditorParamsType.FREETEXT_SIZE:si._defaultFontSize=oe;break;case AnnotationEditorParamsType.FREETEXT_COLOR:si._defaultColor=oe;break}}updateParams(ne,oe){switch(ne){case AnnotationEditorParamsType.FREETEXT_SIZE:bt(this,bi,Tm).call(this,oe);break;case AnnotationEditorParamsType.FREETEXT_COLOR:bt(this,bi,Rm).call(this,oe);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,si._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,si._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Ze(this,Ss)],[AnnotationEditorParamsType.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}onUpdatedColor(){var ne;this.editorDiv.style.color=this.color,(ne=this._colorPicker)==null||ne.update(this.color),super.onUpdatedColor()}_translateEmpty(ne,oe){this._uiManager.translateSelectedEditors(ne,oe,!0)}getInitialTranslation(){const ne=this.parentScale;return[-si._internalPadding*ne,-(si._internalPadding+Ze(this,Ss))*ne]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),ht(this,Oc,new AbortController);const ne=this._uiManager.combinedSignal(Ze(this,Oc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:ne}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:ne}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:ne}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:ne}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:ne}),!0}disableEditMode(){var ne;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Ze(this,$h)),this._isDraggable=!0,(ne=Ze(this,Oc))==null||ne.abort(),ht(this,Oc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(ne){this._focusEventsAllowed&&(super.focusin(ne),ne.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(ne){var oe;this.width||(this.enableEditMode(),ne&&this.editorDiv.focus(),(oe=this._initialOptions)!=null&&oe.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const ne=Ze(this,Cs),oe=ht(this,Cs,bt(this,bi,Bm).call(this).trimEnd());if(ne===oe)return;const ce=ue=>{if(ht(this,Cs,ue),!ue){this.remove();return}bt(this,bi,sp).call(this),this._uiManager.rebuild(this),bt(this,bi,np).call(this)};this.addCommands({cmd:()=>{ce(oe)},undo:()=>{ce(ne)},mustExec:!1}),bt(this,bi,np).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(ne){ne.target===this.div&&ne.key==="Enter"&&(this.enterInEditMode(),ne.preventDefault())}editorDivKeydown(ne){si._keyboardManager.exec(this,ne)}editorDivFocus(ne){this.isEditing=!0}editorDivBlur(ne){this.isEditing=!1}editorDivInput(ne){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let ne,oe;(this._isCopy||this.annotationElementId)&&(ne=this.x,oe=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Ze(this,$h)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:ce}=this.editorDiv;if(ce.fontSize=`calc(${Ze(this,Ss)}px * var(--total-scale-factor))`,ce.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[ue,Ae]=this.parentDimensions;if(this.annotationElementId){const{position:pe}=this._initialData;let[ve,me]=this.getInitialTranslation();[ve,me]=this.pageTranslationToScreen(ve,me);const[ge,ye]=this.pageDimensions,[xe,_e]=this.pageTranslation;let $e,Ie;switch(this.rotation){case 0:$e=ne+(pe[0]-xe)/ge,Ie=oe+this.height-(pe[1]-_e)/ye;break;case 90:$e=ne+(pe[0]-xe)/ge,Ie=oe-(pe[1]-_e)/ye,[ve,me]=[me,-ve];break;case 180:$e=ne-this.width+(pe[0]-xe)/ge,Ie=oe-(pe[1]-_e)/ye,[ve,me]=[-ve,-me];break;case 270:$e=ne+(pe[0]-xe-this.height*ye)/ge,Ie=oe+(pe[1]-_e-this.width*ge)/ye,[ve,me]=[-me,ve];break}this.setAt($e*ue,Ie*Ae,ve,me)}else this._moveAfterPaste(ne,oe);bt(this,bi,sp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(ne){var $e,Ie,Fe;const oe=ne.clipboardData||window.clipboardData,{types:ce}=oe;if(ce.length===1&&ce[0]==="text/plain")return;ne.preventDefault();const ue=bt($e=si,Ro,rg).call($e,oe.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!ue)return;const Ae=window.getSelection();if(!Ae.rangeCount)return;this.editorDiv.normalize(),Ae.deleteFromDocument();const pe=Ae.getRangeAt(0);if(!ue.includes(`
`)){pe.insertNode(document.createTextNode(ue)),this.editorDiv.normalize(),Ae.collapseToStart();return}const{startContainer:ve,startOffset:me}=pe,ge=[],ye=[];if(ve.nodeType===Node.TEXT_NODE){const ke=ve.parentElement;if(ye.push(ve.nodeValue.slice(me).replaceAll(EOL_PATTERN,"")),ke!==this.editorDiv){let je=ge;for(const We of this.editorDiv.childNodes){if(We===ke){je=ye;continue}je.push(bt(Ie=si,Ro,ip).call(Ie,We))}}ge.push(ve.nodeValue.slice(0,me).replaceAll(EOL_PATTERN,""))}else if(ve===this.editorDiv){let ke=ge,je=0;for(const We of this.editorDiv.childNodes)je++===me&&(ke=ye),ke.push(bt(Fe=si,Ro,ip).call(Fe,We))}ht(this,Cs,`${ge.join(`
`)}${ue}${ye.join(`
`)}`),bt(this,bi,sp).call(this);const xe=new Range;let _e=Math.sumPrecise(ge.map(ke=>ke.length));for(const{firstChild:ke}of this.editorDiv.childNodes)if(ke.nodeType===Node.TEXT_NODE){const je=ke.nodeValue.length;if(_e<=je){xe.setStart(ke,_e),xe.setEnd(ke,_e);break}_e-=je}Ae.removeAllRanges(),Ae.addRange(xe)}get contentDiv(){return this.editorDiv}getPDFRect(){const ne=si._internalPadding*this.parentScale;return this.getRect(ne,ne)}static async deserialize(ne,oe,ce){var pe;let ue=null;if(ne instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:ve,fontColor:me},rect:ge,rotation:ye,id:xe,popupRef:_e,richText:$e,contentsObj:Ie,creationDate:Fe,modificationDate:ke},textContent:je,textPosition:We,parent:{page:{pageNumber:ze}}}=ne;if(!je||je.length===0)return null;ue=ne={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(me),fontSize:ve,value:je.join(`
`),position:We,pageIndex:ze-1,rect:ge.slice(0),rotation:ye,annotationElementId:xe,id:xe,deleted:!1,popupRef:_e,comment:(Ie==null?void 0:Ie.str)||null,richText:$e,creationDate:Fe,modificationDate:ke}}const Ae=await super.deserialize(ne,oe,ce);return ht(Ae,Ss,ne.fontSize),Ae.color=Util.makeHexColor(...ne.color),ht(Ae,Cs,bt(pe=si,Ro,rg).call(pe,ne.value)),Ae._initialData=ue,ne.comment&&Ae.setCommentData(ne),Ae}serialize(ne=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const oe=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),ce=Object.assign(super.serialize(ne),{color:oe,fontSize:Ze(this,Ss),value:bt(this,bi,Im).call(this)});return this.addComment(ce),ne?(ce.isCopy=!0,ce):this.annotationElementId&&!bt(this,bi,$m).call(this,ce)?null:(ce.id=this.annotationElementId,ce)}renderAnnotationElement(ne){const oe=super.renderAnnotationElement(ne);if(!oe)return null;const{style:ce}=oe;ce.fontSize=`calc(${Ze(this,Ss)}px * var(--total-scale-factor))`,ce.color=this.color,oe.replaceChildren();for(const ue of Ze(this,Cs).split(`
`)){const Ae=document.createElement("div");Ae.append(ue?document.createTextNode(ue):document.createElement("br")),oe.append(Ae)}return ne.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:Ze(this,Cs)}}),oe}resetAnnotationElement(ne){super.resetAnnotationElement(ne),ne.resetEdited()}};Cs=new WeakMap,$h=new WeakMap,Oc=new WeakMap,Ss=new WeakMap,bi=new WeakSet,Tm=function(ne){const oe=ue=>{this.editorDiv.style.fontSize=`calc(${ue}px * var(--total-scale-factor))`,this.translate(0,-(ue-Ze(this,Ss))*this.parentScale),ht(this,Ss,ue),bt(this,bi,np).call(this)},ce=Ze(this,Ss);this.addCommands({cmd:oe.bind(this,ne),undo:oe.bind(this,ce),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Rm=function(ne){const oe=ue=>{this.color=ue,this.onUpdatedColor()},ce=this.color;this.addCommands({cmd:oe.bind(this,ne),undo:oe.bind(this,ce),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Bm=function(){var ce;const ne=[];this.editorDiv.normalize();let oe=null;for(const ue of this.editorDiv.childNodes)(oe==null?void 0:oe.nodeType)===Node.TEXT_NODE&&ue.nodeName==="BR"||(ne.push(bt(ce=si,Ro,ip).call(ce,ue)),oe=ue);return ne.join(`
`)},np=function(){const[ne,oe]=this.parentDimensions;let ce;if(this.isAttachedToDOM)ce=this.div.getBoundingClientRect();else{const{currentLayer:ue,div:Ae}=this,pe=Ae.style.display,ve=Ae.classList.contains("hidden");Ae.classList.remove("hidden"),Ae.style.display="hidden",ue.div.append(this.div),ce=Ae.getBoundingClientRect(),Ae.remove(),Ae.style.display=pe,Ae.classList.toggle("hidden",ve)}this.rotation%180===this.parentRotation%180?(this.width=ce.width/ne,this.height=ce.height/oe):(this.width=ce.height/ne,this.height=ce.width/oe),this.fixAndSetPosition()},Ro=new WeakSet,ip=function(ne){return(ne.nodeType===Node.TEXT_NODE?ne.nodeValue:ne.innerText).replaceAll(EOL_PATTERN,"")},sp=function(){if(this.editorDiv.replaceChildren(),!!Ze(this,Cs))for(const ne of Ze(this,Cs).split(`
`)){const oe=document.createElement("div");oe.append(ne?document.createTextNode(ne):document.createElement("br")),this.editorDiv.append(oe)}},Im=function(){return Ze(this,Cs).replaceAll(""," ")},rg=function(ne){return ne.replaceAll(" ","")},$m=function(ne){const{value:oe,fontSize:ce,color:ue,pageIndex:Ae}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||ne.value!==oe||ne.fontSize!==ce||ne.color.some((pe,ve)=>pe!==ue[ve])||ne.pageIndex!==Ae},yt(si,Ro),wr(si,"_freeTextDefaultContent",""),wr(si,"_internalPadding",0),wr(si,"_defaultColor",null),wr(si,"_defaultFontSize",10),wr(si,"_type","freetext"),wr(si,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=si;var d0;let Outline$1=(d0=class{toSVGPath(){unreachable$1("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable$1("Abstract getter `box` must be implemented.")}serialize(J,ne){unreachable$1("Abstract method `serialize` must be implemented.")}static _rescale(J,ne,oe,ce,ue,Ae){Ae||(Ae=new Float32Array(J.length));for(let pe=0,ve=J.length;pe<ve;pe+=2)Ae[pe]=ne+J[pe]*ce,Ae[pe+1]=oe+J[pe+1]*ue;return Ae}static _rescaleAndSwap(J,ne,oe,ce,ue,Ae){Ae||(Ae=new Float32Array(J.length));for(let pe=0,ve=J.length;pe<ve;pe+=2)Ae[pe]=ne+J[pe+1]*ce,Ae[pe+1]=oe+J[pe]*ue;return Ae}static _translate(J,ne,oe,ce){ce||(ce=new Float32Array(J.length));for(let ue=0,Ae=J.length;ue<Ae;ue+=2)ce[ue]=ne+J[ue],ce[ue+1]=oe+J[ue+1];return ce}static svgRound(J){return Math.round(J*1e4)}static _normalizePoint(J,ne,oe,ce,ue){switch(ue){case 90:return[1-ne/oe,J/ce];case 180:return[1-J/oe,1-ne/ce];case 270:return[ne/oe,1-J/ce];default:return[J/oe,ne/ce]}}static _normalizePagePoint(J,ne,oe){switch(oe){case 90:return[1-ne,J];case 180:return[1-J,1-ne];case 270:return[ne,1-J];default:return[J,ne]}}static createBezierPoints(J,ne,oe,ce,ue,Ae){return[(J+5*oe)/6,(ne+5*ce)/6,(5*oe+ue)/6,(5*ce+Ae)/6,(oe+ue)/2,(ce+Ae)/2]}},wr(d0,"PRECISION",1e-4),d0);var _s,la,xf,Ef,Da,Dn,Lc,Fc,Mh,Nh,bf,wf,pl,Dh,Dp,Op,Ti,ld,Mm,Nm,Dm,Om,Lm,Fm;const Qa=class Qa{constructor({x:J,y:ne},oe,ce,ue,Ae,pe=0){yt(this,Ti);yt(this,_s);yt(this,la,[]);yt(this,xf);yt(this,Ef);yt(this,Da,[]);yt(this,Dn,new Float32Array(18));yt(this,Lc);yt(this,Fc);yt(this,Mh);yt(this,Nh);yt(this,bf);yt(this,wf);yt(this,pl,[]);ht(this,_s,oe),ht(this,wf,ue*ce),ht(this,Ef,Ae),Ze(this,Dn).set([NaN,NaN,NaN,NaN,J,ne],6),ht(this,xf,pe),ht(this,Nh,Ze(Qa,Dh)*ce),ht(this,Mh,Ze(Qa,Op)*ce),ht(this,bf,ce),Ze(this,pl).push(J,ne)}isEmpty(){return isNaN(Ze(this,Dn)[8])}add({x:J,y:ne}){var tt;ht(this,Lc,J),ht(this,Fc,ne);const[oe,ce,ue,Ae]=Ze(this,_s);let[pe,ve,me,ge]=Ze(this,Dn).subarray(8,12);const ye=J-me,xe=ne-ge,_e=Math.hypot(ye,xe);if(_e<Ze(this,Mh))return!1;const $e=_e-Ze(this,Nh),Ie=$e/_e,Fe=Ie*ye,ke=Ie*xe;let je=pe,We=ve;pe=me,ve=ge,me+=Fe,ge+=ke,(tt=Ze(this,pl))==null||tt.push(J,ne);const ze=-ke/$e,Xe=Fe/$e,Je=ze*Ze(this,wf),nt=Xe*Ze(this,wf);return Ze(this,Dn).set(Ze(this,Dn).subarray(2,8),0),Ze(this,Dn).set([me+Je,ge+nt],4),Ze(this,Dn).set(Ze(this,Dn).subarray(14,18),12),Ze(this,Dn).set([me-Je,ge-nt],16),isNaN(Ze(this,Dn)[6])?(Ze(this,Da).length===0&&(Ze(this,Dn).set([pe+Je,ve+nt],2),Ze(this,Da).push(NaN,NaN,NaN,NaN,(pe+Je-oe)/ue,(ve+nt-ce)/Ae),Ze(this,Dn).set([pe-Je,ve-nt],14),Ze(this,la).push(NaN,NaN,NaN,NaN,(pe-Je-oe)/ue,(ve-nt-ce)/Ae)),Ze(this,Dn).set([je,We,pe,ve,me,ge],6),!this.isEmpty()):(Ze(this,Dn).set([je,We,pe,ve,me,ge],6),Math.abs(Math.atan2(We-ve,je-pe)-Math.atan2(ke,Fe))<Math.PI/2?([pe,ve,me,ge]=Ze(this,Dn).subarray(2,6),Ze(this,Da).push(NaN,NaN,NaN,NaN,((pe+me)/2-oe)/ue,((ve+ge)/2-ce)/Ae),[pe,ve,je,We]=Ze(this,Dn).subarray(14,18),Ze(this,la).push(NaN,NaN,NaN,NaN,((je+pe)/2-oe)/ue,((We+ve)/2-ce)/Ae),!0):([je,We,pe,ve,me,ge]=Ze(this,Dn).subarray(0,6),Ze(this,Da).push(((je+5*pe)/6-oe)/ue,((We+5*ve)/6-ce)/Ae,((5*pe+me)/6-oe)/ue,((5*ve+ge)/6-ce)/Ae,((pe+me)/2-oe)/ue,((ve+ge)/2-ce)/Ae),[me,ge,pe,ve,je,We]=Ze(this,Dn).subarray(12,18),Ze(this,la).push(((je+5*pe)/6-oe)/ue,((We+5*ve)/6-ce)/Ae,((5*pe+me)/6-oe)/ue,((5*ve+ge)/6-ce)/Ae,((pe+me)/2-oe)/ue,((ve+ge)/2-ce)/Ae),!0))}toSVGPath(){if(this.isEmpty())return"";const J=Ze(this,Da),ne=Ze(this,la);if(isNaN(Ze(this,Dn)[6])&&!this.isEmpty())return bt(this,Ti,Mm).call(this);const oe=[];oe.push(`M${J[4]} ${J[5]}`);for(let ce=6;ce<J.length;ce+=6)isNaN(J[ce])?oe.push(`L${J[ce+4]} ${J[ce+5]}`):oe.push(`C${J[ce]} ${J[ce+1]} ${J[ce+2]} ${J[ce+3]} ${J[ce+4]} ${J[ce+5]}`);bt(this,Ti,Dm).call(this,oe);for(let ce=ne.length-6;ce>=6;ce-=6)isNaN(ne[ce])?oe.push(`L${ne[ce+4]} ${ne[ce+5]}`):oe.push(`C${ne[ce]} ${ne[ce+1]} ${ne[ce+2]} ${ne[ce+3]} ${ne[ce+4]} ${ne[ce+5]}`);return bt(this,Ti,Nm).call(this,oe),oe.join(" ")}newFreeDrawOutline(J,ne,oe,ce,ue,Ae){return new FreeDrawOutline(J,ne,oe,ce,ue,Ae)}getOutlines(){var ye;const J=Ze(this,Da),ne=Ze(this,la),oe=Ze(this,Dn),[ce,ue,Ae,pe]=Ze(this,_s),ve=new Float32Array((((ye=Ze(this,pl))==null?void 0:ye.length)??0)+2);for(let xe=0,_e=ve.length-2;xe<_e;xe+=2)ve[xe]=(Ze(this,pl)[xe]-ce)/Ae,ve[xe+1]=(Ze(this,pl)[xe+1]-ue)/pe;if(ve[ve.length-2]=(Ze(this,Lc)-ce)/Ae,ve[ve.length-1]=(Ze(this,Fc)-ue)/pe,isNaN(oe[6])&&!this.isEmpty())return bt(this,Ti,Om).call(this,ve);const me=new Float32Array(Ze(this,Da).length+24+Ze(this,la).length);let ge=J.length;for(let xe=0;xe<ge;xe+=2){if(isNaN(J[xe])){me[xe]=me[xe+1]=NaN;continue}me[xe]=J[xe],me[xe+1]=J[xe+1]}ge=bt(this,Ti,Fm).call(this,me,ge);for(let xe=ne.length-6;xe>=6;xe-=6)for(let _e=0;_e<6;_e+=2){if(isNaN(ne[xe+_e])){me[ge]=me[ge+1]=NaN,ge+=2;continue}me[ge]=ne[xe+_e],me[ge+1]=ne[xe+_e+1],ge+=2}return bt(this,Ti,Lm).call(this,me,ge),this.newFreeDrawOutline(me,ve,Ze(this,_s),Ze(this,bf),Ze(this,xf),Ze(this,Ef))}};_s=new WeakMap,la=new WeakMap,xf=new WeakMap,Ef=new WeakMap,Da=new WeakMap,Dn=new WeakMap,Lc=new WeakMap,Fc=new WeakMap,Mh=new WeakMap,Nh=new WeakMap,bf=new WeakMap,wf=new WeakMap,pl=new WeakMap,Dh=new WeakMap,Dp=new WeakMap,Op=new WeakMap,Ti=new WeakSet,ld=function(){const J=Ze(this,Dn).subarray(4,6),ne=Ze(this,Dn).subarray(16,18),[oe,ce,ue,Ae]=Ze(this,_s);return[(Ze(this,Lc)+(J[0]-ne[0])/2-oe)/ue,(Ze(this,Fc)+(J[1]-ne[1])/2-ce)/Ae,(Ze(this,Lc)+(ne[0]-J[0])/2-oe)/ue,(Ze(this,Fc)+(ne[1]-J[1])/2-ce)/Ae]},Mm=function(){const[J,ne,oe,ce]=Ze(this,_s),[ue,Ae,pe,ve]=bt(this,Ti,ld).call(this);return`M${(Ze(this,Dn)[2]-J)/oe} ${(Ze(this,Dn)[3]-ne)/ce} L${(Ze(this,Dn)[4]-J)/oe} ${(Ze(this,Dn)[5]-ne)/ce} L${ue} ${Ae} L${pe} ${ve} L${(Ze(this,Dn)[16]-J)/oe} ${(Ze(this,Dn)[17]-ne)/ce} L${(Ze(this,Dn)[14]-J)/oe} ${(Ze(this,Dn)[15]-ne)/ce} Z`},Nm=function(J){const ne=Ze(this,la);J.push(`L${ne[4]} ${ne[5]} Z`)},Dm=function(J){const[ne,oe,ce,ue]=Ze(this,_s),Ae=Ze(this,Dn).subarray(4,6),pe=Ze(this,Dn).subarray(16,18),[ve,me,ge,ye]=bt(this,Ti,ld).call(this);J.push(`L${(Ae[0]-ne)/ce} ${(Ae[1]-oe)/ue} L${ve} ${me} L${ge} ${ye} L${(pe[0]-ne)/ce} ${(pe[1]-oe)/ue}`)},Om=function(J){const ne=Ze(this,Dn),[oe,ce,ue,Ae]=Ze(this,_s),[pe,ve,me,ge]=bt(this,Ti,ld).call(this),ye=new Float32Array(36);return ye.set([NaN,NaN,NaN,NaN,(ne[2]-oe)/ue,(ne[3]-ce)/Ae,NaN,NaN,NaN,NaN,(ne[4]-oe)/ue,(ne[5]-ce)/Ae,NaN,NaN,NaN,NaN,pe,ve,NaN,NaN,NaN,NaN,me,ge,NaN,NaN,NaN,NaN,(ne[16]-oe)/ue,(ne[17]-ce)/Ae,NaN,NaN,NaN,NaN,(ne[14]-oe)/ue,(ne[15]-ce)/Ae],0),this.newFreeDrawOutline(ye,J,Ze(this,_s),Ze(this,bf),Ze(this,xf),Ze(this,Ef))},Lm=function(J,ne){const oe=Ze(this,la);return J.set([NaN,NaN,NaN,NaN,oe[4],oe[5]],ne),ne+=6},Fm=function(J,ne){const oe=Ze(this,Dn).subarray(4,6),ce=Ze(this,Dn).subarray(16,18),[ue,Ae,pe,ve]=Ze(this,_s),[me,ge,ye,xe]=bt(this,Ti,ld).call(this);return J.set([NaN,NaN,NaN,NaN,(oe[0]-ue)/pe,(oe[1]-Ae)/ve,NaN,NaN,NaN,NaN,me,ge,NaN,NaN,NaN,NaN,ye,xe,NaN,NaN,NaN,NaN,(ce[0]-ue)/pe,(ce[1]-Ae)/ve],ne),ne+=24},yt(Qa,Dh,8),yt(Qa,Dp,2),yt(Qa,Op,Ze(Qa,Dh)+Ze(Qa,Dp));let FreeDrawOutliner=Qa;var Cf,kc,xo,Oh,Ts,Lh,vi,Lp,km;class FreeDrawOutline extends Outline$1{constructor(ne,oe,ce,ue,Ae,pe){super();yt(this,Lp);yt(this,Cf);yt(this,kc,new Float32Array(4));yt(this,xo);yt(this,Oh);yt(this,Ts);yt(this,Lh);yt(this,vi);ht(this,vi,ne),ht(this,Ts,oe),ht(this,Cf,ce),ht(this,Lh,ue),ht(this,xo,Ae),ht(this,Oh,pe),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],bt(this,Lp,km).call(this,pe);const[ve,me,ge,ye]=Ze(this,kc);for(let xe=0,_e=ne.length;xe<_e;xe+=2)ne[xe]=(ne[xe]-ve)/ge,ne[xe+1]=(ne[xe+1]-me)/ye;for(let xe=0,_e=oe.length;xe<_e;xe+=2)oe[xe]=(oe[xe]-ve)/ge,oe[xe+1]=(oe[xe+1]-me)/ye}toSVGPath(){const ne=[`M${Ze(this,vi)[4]} ${Ze(this,vi)[5]}`];for(let oe=6,ce=Ze(this,vi).length;oe<ce;oe+=6){if(isNaN(Ze(this,vi)[oe])){ne.push(`L${Ze(this,vi)[oe+4]} ${Ze(this,vi)[oe+5]}`);continue}ne.push(`C${Ze(this,vi)[oe]} ${Ze(this,vi)[oe+1]} ${Ze(this,vi)[oe+2]} ${Ze(this,vi)[oe+3]} ${Ze(this,vi)[oe+4]} ${Ze(this,vi)[oe+5]}`)}return ne.push("Z"),ne.join(" ")}serialize([ne,oe,ce,ue],Ae){const pe=ce-ne,ve=ue-oe;let me,ge;switch(Ae){case 0:me=Outline$1._rescale(Ze(this,vi),ne,ue,pe,-ve),ge=Outline$1._rescale(Ze(this,Ts),ne,ue,pe,-ve);break;case 90:me=Outline$1._rescaleAndSwap(Ze(this,vi),ne,oe,pe,ve),ge=Outline$1._rescaleAndSwap(Ze(this,Ts),ne,oe,pe,ve);break;case 180:me=Outline$1._rescale(Ze(this,vi),ce,oe,-pe,ve),ge=Outline$1._rescale(Ze(this,Ts),ce,oe,-pe,ve);break;case 270:me=Outline$1._rescaleAndSwap(Ze(this,vi),ce,ue,-pe,-ve),ge=Outline$1._rescaleAndSwap(Ze(this,Ts),ce,ue,-pe,-ve);break}return{outline:Array.from(me),points:[Array.from(ge)]}}get box(){return Ze(this,kc)}newOutliner(ne,oe,ce,ue,Ae,pe=0){return new FreeDrawOutliner(ne,oe,ce,ue,Ae,pe)}getNewOutline(ne,oe){const[ce,ue,Ae,pe]=Ze(this,kc),[ve,me,ge,ye]=Ze(this,Cf),xe=Ae*ge,_e=pe*ye,$e=ce*ge+ve,Ie=ue*ye+me,Fe=this.newOutliner({x:Ze(this,Ts)[0]*xe+$e,y:Ze(this,Ts)[1]*_e+Ie},Ze(this,Cf),Ze(this,Lh),ne,Ze(this,Oh),oe??Ze(this,xo));for(let ke=2;ke<Ze(this,Ts).length;ke+=2)Fe.add({x:Ze(this,Ts)[ke]*xe+$e,y:Ze(this,Ts)[ke+1]*_e+Ie});return Fe.getOutlines()}}Cf=new WeakMap,kc=new WeakMap,xo=new WeakMap,Oh=new WeakMap,Ts=new WeakMap,Lh=new WeakMap,vi=new WeakMap,Lp=new WeakSet,km=function(ne){const oe=Ze(this,vi);let ce=oe[4],ue=oe[5];const Ae=[ce,ue,ce,ue];let pe=ce,ve=ue,me=ce,ge=ue;const ye=ne?Math.max:Math.min,xe=new Float32Array(4);for(let $e=6,Ie=oe.length;$e<Ie;$e+=6){const Fe=oe[$e+4],ke=oe[$e+5];isNaN(oe[$e])?(Util.pointBoundingBox(Fe,ke,Ae),ve>ke?(pe=Fe,ve=ke):ve===ke&&(pe=ye(pe,Fe)),ge<ke?(me=Fe,ge=ke):ge===ke&&(me=ye(me,Fe))):(xe[0]=xe[1]=1/0,xe[2]=xe[3]=-1/0,Util.bezierBoundingBox(ce,ue,...oe.slice($e,$e+6),xe),Util.rectBoundingBox(xe[0],xe[1],xe[2],xe[3],Ae),ve>xe[1]?(pe=xe[0],ve=xe[1]):ve===xe[1]&&(pe=ye(pe,xe[0])),ge<xe[3]?(me=xe[2],ge=xe[3]):ge===xe[3]&&(me=ye(me,xe[2]))),ce=Fe,ue=ke}const _e=Ze(this,kc);_e[0]=Ae[0]-Ze(this,xo),_e[1]=Ae[1]-Ze(this,xo),_e[2]=Ae[2]-Ae[0]+2*Ze(this,xo),_e[3]=Ae[3]-Ae[1]+2*Ze(this,xo),this.firstPoint=[pe,ve],this.lastPoint=[me,ge]};var Fh,kh,Ph,gl,ca,as,Pm,ap,Um,Hm,ng;class HighlightOutliner{constructor(J,ne=0,oe=0,ce=!0){yt(this,as);yt(this,Fh);yt(this,kh);yt(this,Ph);yt(this,gl,[]);yt(this,ca,[]);const ue=[1/0,1/0,-1/0,-1/0],pe=10**-4;for(const{x:Fe,y:ke,width:je,height:We}of J){const ze=Math.floor((Fe-ne)/pe)*pe,Xe=Math.ceil((Fe+je+ne)/pe)*pe,Je=Math.floor((ke-ne)/pe)*pe,nt=Math.ceil((ke+We+ne)/pe)*pe,et=[ze,Je,nt,!0],tt=[Xe,Je,nt,!1];Ze(this,gl).push(et,tt),Util.rectBoundingBox(ze,Je,Xe,nt,ue)}const ve=ue[2]-ue[0]+2*oe,me=ue[3]-ue[1]+2*oe,ge=ue[0]-oe,ye=ue[1]-oe;let xe=ce?-1/0:1/0,_e=1/0;const $e=Ze(this,gl).at(ce?-1:-2),Ie=[$e[0],$e[2]];for(const Fe of Ze(this,gl)){const[ke,je,We,ze]=Fe;!ze&&ce?je<_e?(_e=je,xe=ke):je===_e&&(xe=Math.max(xe,ke)):ze&&!ce&&(je<_e?(_e=je,xe=ke):je===_e&&(xe=Math.min(xe,ke))),Fe[0]=(ke-ge)/ve,Fe[1]=(je-ye)/me,Fe[2]=(We-ye)/me}ht(this,Fh,new Float32Array([ge,ye,ve,me])),ht(this,kh,[xe,_e]),ht(this,Ph,Ie)}getOutlines(){Ze(this,gl).sort((ne,oe)=>ne[0]-oe[0]||ne[1]-oe[1]||ne[2]-oe[2]);const J=[];for(const ne of Ze(this,gl))ne[3]?(J.push(...bt(this,as,ng).call(this,ne)),bt(this,as,Um).call(this,ne)):(bt(this,as,Hm).call(this,ne),J.push(...bt(this,as,ng).call(this,ne)));return bt(this,as,Pm).call(this,J)}}Fh=new WeakMap,kh=new WeakMap,Ph=new WeakMap,gl=new WeakMap,ca=new WeakMap,as=new WeakSet,Pm=function(J){const ne=[],oe=new Set;for(const Ae of J){const[pe,ve,me]=Ae;ne.push([pe,ve,Ae],[pe,me,Ae])}ne.sort((Ae,pe)=>Ae[1]-pe[1]||Ae[0]-pe[0]);for(let Ae=0,pe=ne.length;Ae<pe;Ae+=2){const ve=ne[Ae][2],me=ne[Ae+1][2];ve.push(me),me.push(ve),oe.add(ve),oe.add(me)}const ce=[];let ue;for(;oe.size>0;){const Ae=oe.values().next().value;let[pe,ve,me,ge,ye]=Ae;oe.delete(Ae);let xe=pe,_e=ve;for(ue=[pe,me],ce.push(ue);;){let $e;if(oe.has(ge))$e=ge;else if(oe.has(ye))$e=ye;else break;oe.delete($e),[pe,ve,me,ge,ye]=$e,xe!==pe&&(ue.push(xe,_e,pe,_e===ve?ve:me),xe=pe),_e=_e===ve?me:ve}ue.push(xe,_e)}return new HighlightOutline(ce,Ze(this,Fh),Ze(this,kh),Ze(this,Ph))},ap=function(J){const ne=Ze(this,ca);let oe=0,ce=ne.length-1;for(;oe<=ce;){const ue=oe+ce>>1,Ae=ne[ue][0];if(Ae===J)return ue;Ae<J?oe=ue+1:ce=ue-1}return ce+1},Um=function([,J,ne]){const oe=bt(this,as,ap).call(this,J);Ze(this,ca).splice(oe,0,[J,ne])},Hm=function([,J,ne]){const oe=bt(this,as,ap).call(this,J);for(let ce=oe;ce<Ze(this,ca).length;ce++){const[ue,Ae]=Ze(this,ca)[ce];if(ue!==J)break;if(ue===J&&Ae===ne){Ze(this,ca).splice(ce,1);return}}for(let ce=oe-1;ce>=0;ce--){const[ue,Ae]=Ze(this,ca)[ce];if(ue!==J)break;if(ue===J&&Ae===ne){Ze(this,ca).splice(ce,1);return}}},ng=function(J){const[ne,oe,ce]=J,ue=[[ne,oe,ce]],Ae=bt(this,as,ap).call(this,ce);for(let pe=0;pe<Ae;pe++){const[ve,me]=Ze(this,ca)[pe];for(let ge=0,ye=ue.length;ge<ye;ge++){const[,xe,_e]=ue[ge];if(!(me<=xe||_e<=ve)){if(xe>=ve){if(_e>me)ue[ge][1]=me;else{if(ye===1)return[];ue.splice(ge,1),ge--,ye--}continue}ue[ge][2]=ve,_e>me&&ue.push([ne,me,_e])}}}return ue};var Uh,Sf;class HighlightOutline extends Outline$1{constructor(ne,oe,ce,ue){super();yt(this,Uh);yt(this,Sf);ht(this,Sf,ne),ht(this,Uh,oe),this.firstPoint=ce,this.lastPoint=ue}toSVGPath(){const ne=[];for(const oe of Ze(this,Sf)){let[ce,ue]=oe;ne.push(`M${ce} ${ue}`);for(let Ae=2;Ae<oe.length;Ae+=2){const pe=oe[Ae],ve=oe[Ae+1];pe===ce?(ne.push(`V${ve}`),ue=ve):ve===ue&&(ne.push(`H${pe}`),ce=pe)}ne.push("Z")}return ne.join(" ")}serialize([ne,oe,ce,ue],Ae){const pe=[],ve=ce-ne,me=ue-oe;for(const ge of Ze(this,Sf)){const ye=new Array(ge.length);for(let xe=0;xe<ge.length;xe+=2)ye[xe]=ne+ge[xe]*ve,ye[xe+1]=ue-ge[xe+1]*me;pe.push(ye)}return pe}get box(){return Ze(this,Uh)}get classNamesForOutlining(){return["highlightOutline"]}}Uh=new WeakMap,Sf=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(J,ne,oe,ce,ue,Ae){return new FreeHighlightOutline(J,ne,oe,ce,ue,Ae)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(J,ne,oe,ce,ue,Ae=0){return new FreeHighlightOutliner(J,ne,oe,ce,ue,Ae)}}var _f,Hh,Eo,Pc,jh,hs,Vh,Qh,Uc,Rs,Bs,Ui,Tf,Rf,Yi,Bf,Ks,Kh,xn,ig,op,jm,Vm,Qm,sg,Ol,zs,au,Km,lp,cp,qm,Gm,zm,Wm,Ym;const Qn=class Qn extends AnnotationEditor{constructor(ne){super({...ne,name:"highlightEditor"});yt(this,xn);yt(this,_f,null);yt(this,Hh,0);yt(this,Eo);yt(this,Pc,null);yt(this,jh,null);yt(this,hs,null);yt(this,Vh,null);yt(this,Qh,0);yt(this,Uc,null);yt(this,Rs,null);yt(this,Bs,null);yt(this,Ui,!1);yt(this,Tf,null);yt(this,Rf,null);yt(this,Yi,null);yt(this,Bf,"");yt(this,Ks);yt(this,Kh,"");this.color=ne.color||Qn._defaultColor,ht(this,Ks,ne.thickness||Qn._defaultThickness),this.opacity=ne.opacity||Qn._defaultOpacity,ht(this,Eo,ne.boxes||null),ht(this,Kh,ne.methodOfCreation||""),ht(this,Bf,ne.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",ne.highlightId>-1?(ht(this,Ui,!0),bt(this,xn,op).call(this,ne),bt(this,xn,Ol).call(this)):Ze(this,Eo)&&(ht(this,_f,ne.anchorNode),ht(this,Hh,ne.anchorOffset),ht(this,Vh,ne.focusNode),ht(this,Qh,ne.focusOffset),bt(this,xn,ig).call(this),bt(this,xn,Ol).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const ne=Qn.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],ne._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],ne._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],ne._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],ne._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:Ze(this,Ui)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Ze(this,Ks),methodOfCreation:Ze(this,Kh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(ne){return{numberOfColors:ne.get("color").size}}static initialize(ne,oe){var ce;AnnotationEditor.initialize(ne,oe),Qn._defaultColor||(Qn._defaultColor=((ce=oe.highlightColors)==null?void 0:ce.values().next().value)||"#fff066")}static updateDefaultParams(ne,oe){switch(ne){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Qn._defaultColor=oe;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Qn._defaultThickness=oe;break}}translateInPage(ne,oe){}get toolbarPosition(){return Ze(this,Rf)}get commentButtonPosition(){return Ze(this,Tf)}updateParams(ne,oe){switch(ne){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:bt(this,xn,jm).call(this,oe);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:bt(this,xn,Vm).call(this,oe);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,Qn._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Qn._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||Qn._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Ze(this,Ks)||Qn._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,Ze(this,Ui)]]}onUpdatedColor(){var ne,oe;(ne=this.parent)==null||ne.drawLayer.updateProperties(Ze(this,Bs),{root:{fill:this.color,"fill-opacity":this.opacity}}),(oe=Ze(this,jh))==null||oe.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",ht(this,jh,new ColorPicker({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(bt(this,xn,cp).call(this))}getBaseTranslation(){return[0,0]}getRect(ne,oe){return super.getRect(ne,oe,bt(this,xn,cp).call(this))}onceAdded(ne){this.annotationElementId||this.parent.addUndoableEditor(this),ne&&this.div.focus()}remove(){bt(this,xn,sg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(bt(this,xn,Ol).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(ne){var ce;let oe=!1;this.parent&&!ne?bt(this,xn,sg).call(this):ne&&(bt(this,xn,Ol).call(this,ne),oe=!this.parent&&((ce=this.div)==null?void 0:ce.classList.contains("selectedEditor"))),super.setParent(ne),this.show(this._isVisible),oe&&this.select()}rotate(ne){var ue,Ae,pe;const{drawLayer:oe}=this.parent;let ce;Ze(this,Ui)?(ne=(ne-this.rotation+360)%360,ce=bt(ue=Qn,zs,au).call(ue,Ze(this,Rs).box,ne)):ce=bt(Ae=Qn,zs,au).call(Ae,[this.x,this.y,this.width,this.height],ne),oe.updateProperties(Ze(this,Bs),{bbox:ce,root:{"data-main-rotation":ne}}),oe.updateProperties(Ze(this,Yi),{bbox:bt(pe=Qn,zs,au).call(pe,Ze(this,hs).box,ne),root:{"data-main-rotation":ne}})}render(){if(this.div)return this.div;const ne=super.render();Ze(this,Bf)&&(ne.setAttribute("aria-label",Ze(this,Bf)),ne.setAttribute("role","mark")),Ze(this,Ui)?ne.classList.add("free"):this.div.addEventListener("keydown",bt(this,xn,Km).bind(this),{signal:this._uiManager._signal});const oe=ht(this,Uc,document.createElement("div"));return ne.append(oe),oe.setAttribute("aria-hidden","true"),oe.className="internal",oe.style.clipPath=Ze(this,Pc),this.setDims(this.width,this.height),bindEvents$1(this,Ze(this,Uc),["pointerover","pointerleave"]),this.enableEditing(),ne}pointerover(){var ne;this.isSelected||(ne=this.parent)==null||ne.drawLayer.updateProperties(Ze(this,Yi),{rootClass:{hovered:!0}})}pointerleave(){var ne;this.isSelected||(ne=this.parent)==null||ne.drawLayer.updateProperties(Ze(this,Yi),{rootClass:{hovered:!1}})}_moveCaret(ne){switch(this.parent.unselect(this),ne){case 0:case 2:bt(this,xn,lp).call(this,!0);break;case 1:case 3:bt(this,xn,lp).call(this,!1);break}}select(){var ne;super.select(),Ze(this,Yi)&&((ne=this.parent)==null||ne.drawLayer.updateProperties(Ze(this,Yi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var ne;super.unselect(),Ze(this,Yi)&&((ne=this.parent)==null||ne.drawLayer.updateProperties(Ze(this,Yi),{rootClass:{selected:!1}}),Ze(this,Ui)||bt(this,xn,lp).call(this,!1))}get _mustFixPosition(){return!Ze(this,Ui)}show(ne=this._isVisible){super.show(ne),this.parent&&(this.parent.drawLayer.updateProperties(Ze(this,Bs),{rootClass:{hidden:!ne}}),this.parent.drawLayer.updateProperties(Ze(this,Yi),{rootClass:{hidden:!ne}}))}static startHighlighting(ne,oe,{target:ce,x:ue,y:Ae}){const{x:pe,y:ve,width:me,height:ge}=ce.getBoundingClientRect(),ye=new AbortController,xe=ne.combinedSignal(ye),_e=$e=>{ye.abort(),bt(this,zs,Wm).call(this,ne,$e)};window.addEventListener("blur",_e,{signal:xe}),window.addEventListener("pointerup",_e,{signal:xe}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:xe}),window.addEventListener("contextmenu",noContextMenu,{signal:xe}),ce.addEventListener("pointermove",bt(this,zs,zm).bind(this,ne),{signal:xe}),this._freeHighlight=new FreeHighlightOutliner({x:ue,y:Ae},[pe,ve,me,ge],ne.scale,this._defaultThickness/2,oe,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=ne.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(ne,oe,ce){var Ie,Fe,ke,je;let ue=null;if(ne instanceof HighlightAnnotationElement){const{data:{quadPoints:We,rect:ze,rotation:Xe,id:Je,color:nt,opacity:et,popupRef:tt,richText:st,contentsObj:qe,creationDate:Se,modificationDate:Re},parent:{page:{pageNumber:Be}}}=ne;ue=ne={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(nt),opacity:et,quadPoints:We,boxes:null,pageIndex:Be-1,rect:ze.slice(0),rotation:Xe,annotationElementId:Je,id:Je,deleted:!1,popupRef:tt,richText:st,comment:(qe==null?void 0:qe.str)||null,creationDate:Se,modificationDate:Re}}else if(ne instanceof InkAnnotationElement){const{data:{inkLists:We,rect:ze,rotation:Xe,id:Je,color:nt,borderStyle:{rawWidth:et},popupRef:tt,richText:st,contentsObj:qe,creationDate:Se,modificationDate:Re},parent:{page:{pageNumber:Be}}}=ne;ue=ne={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(nt),thickness:et,inkLists:We,boxes:null,pageIndex:Be-1,rect:ze.slice(0),rotation:Xe,annotationElementId:Je,id:Je,deleted:!1,popupRef:tt,richText:st,comment:(qe==null?void 0:qe.str)||null,creationDate:Se,modificationDate:Re}}const{color:Ae,quadPoints:pe,inkLists:ve,opacity:me}=ne,ge=await super.deserialize(ne,oe,ce);ge.color=Util.makeHexColor(...Ae),ge.opacity=me||1,ve&&ht(ge,Ks,ne.thickness),ge._initialData=ue,ne.comment&&ge.setCommentData(ne);const[ye,xe]=ge.pageDimensions,[_e,$e]=ge.pageTranslation;if(pe){const We=ht(ge,Eo,[]);for(let ze=0;ze<pe.length;ze+=8)We.push({x:(pe[ze]-_e)/ye,y:1-(pe[ze+1]-$e)/xe,width:(pe[ze+2]-pe[ze])/ye,height:(pe[ze+1]-pe[ze+5])/xe});bt(Ie=ge,xn,ig).call(Ie),bt(Fe=ge,xn,Ol).call(Fe),ge.rotate(ge.rotation)}else if(ve){ht(ge,Ui,!0);const We=ve[0],ze={x:We[0]-_e,y:xe-(We[1]-$e)},Xe=new FreeHighlightOutliner(ze,[0,0,ye,xe],1,Ze(ge,Ks)/2,!0,.001);for(let et=0,tt=We.length;et<tt;et+=2)ze.x=We[et]-_e,ze.y=xe-(We[et+1]-$e),Xe.add(ze);const{id:Je,clipPathId:nt}=oe.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:ge.color,"fill-opacity":ge._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:Xe.toSVGPath()}},!0,!0);bt(ke=ge,xn,op).call(ke,{highlightOutlines:Xe.getOutlines(),highlightId:Je,clipPathId:nt}),bt(je=ge,xn,Ol).call(je),ge.rotate(ge.parentRotation)}return ge}serialize(ne=!1){if(this.isEmpty()||ne)return null;if(this.deleted)return this.serializeDeleted();const oe=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),ce=super.serialize(ne);return Object.assign(ce,{color:oe,opacity:this.opacity,thickness:Ze(this,Ks),quadPoints:bt(this,xn,qm).call(this),outlines:bt(this,xn,Gm).call(this,ce.rect)}),this.addComment(ce),this.annotationElementId&&!bt(this,xn,Ym).call(this,ce)?null:(ce.id=this.annotationElementId,ce)}renderAnnotationElement(ne){return this.deleted?(ne.hide(),null):(ne.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};_f=new WeakMap,Hh=new WeakMap,Eo=new WeakMap,Pc=new WeakMap,jh=new WeakMap,hs=new WeakMap,Vh=new WeakMap,Qh=new WeakMap,Uc=new WeakMap,Rs=new WeakMap,Bs=new WeakMap,Ui=new WeakMap,Tf=new WeakMap,Rf=new WeakMap,Yi=new WeakMap,Bf=new WeakMap,Ks=new WeakMap,Kh=new WeakMap,xn=new WeakSet,ig=function(){const ne=new HighlightOutliner(Ze(this,Eo),.001);ht(this,Rs,ne.getOutlines()),[this.x,this.y,this.width,this.height]=Ze(this,Rs).box;const oe=new HighlightOutliner(Ze(this,Eo),.0025,.001,this._uiManager.direction==="ltr");ht(this,hs,oe.getOutlines());const{firstPoint:ce}=Ze(this,Rs);ht(this,Tf,[(ce[0]-this.x)/this.width,(ce[1]-this.y)/this.height]);const{lastPoint:ue}=Ze(this,hs);ht(this,Rf,[(ue[0]-this.x)/this.width,(ue[1]-this.y)/this.height])},op=function({highlightOutlines:ne,highlightId:oe,clipPathId:ce}){var xe,_e;if(ht(this,Rs,ne),ht(this,hs,ne.getNewOutline(Ze(this,Ks)/2+1.5,.0025)),oe>=0)ht(this,Bs,oe),ht(this,Pc,ce),this.parent.drawLayer.finalizeDraw(oe,{bbox:ne.box,path:{d:ne.toSVGPath()}}),ht(this,Yi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Ze(this,hs).box,path:{d:Ze(this,hs).toSVGPath()}},!0));else if(this.parent){const $e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Ze(this,Bs),{bbox:bt(xe=Qn,zs,au).call(xe,Ze(this,Rs).box,($e-this.rotation+360)%360),path:{d:ne.toSVGPath()}}),this.parent.drawLayer.updateProperties(Ze(this,Yi),{bbox:bt(_e=Qn,zs,au).call(_e,Ze(this,hs).box,$e),path:{d:Ze(this,hs).toSVGPath()}})}const[Ae,pe,ve,me]=ne.box;switch(this.rotation){case 0:this.x=Ae,this.y=pe,this.width=ve,this.height=me;break;case 90:{const[$e,Ie]=this.parentDimensions;this.x=pe,this.y=1-Ae,this.width=ve*Ie/$e,this.height=me*$e/Ie;break}case 180:this.x=1-Ae,this.y=1-pe,this.width=ve,this.height=me;break;case 270:{const[$e,Ie]=this.parentDimensions;this.x=1-pe,this.y=Ae,this.width=ve*Ie/$e,this.height=me*$e/Ie;break}}const{firstPoint:ge}=ne;ht(this,Tf,[(ge[0]-Ae)/ve,(ge[1]-pe)/me]);const{lastPoint:ye}=Ze(this,hs);ht(this,Rf,[(ye[0]-Ae)/ve,(ye[1]-pe)/me])},jm=function(ne){const oe=(Ae,pe)=>{this.color=Ae,this.opacity=pe,this.onUpdatedColor()},ce=this.color,ue=this.opacity;this.addCommands({cmd:oe.bind(this,ne,Qn._defaultOpacity),undo:oe.bind(this,ce,ue),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(ne)},!0)},Vm=function(ne){const oe=Ze(this,Ks),ce=ue=>{ht(this,Ks,ue),bt(this,xn,Qm).call(this,ue)};this.addCommands({cmd:ce.bind(this,ne),undo:ce.bind(this,oe),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:ne},!0)},Qm=function(ne){Ze(this,Ui)&&(bt(this,xn,op).call(this,{highlightOutlines:Ze(this,Rs).getNewOutline(ne/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},sg=function(){Ze(this,Bs)===null||!this.parent||(this.parent.drawLayer.remove(Ze(this,Bs)),ht(this,Bs,null),this.parent.drawLayer.remove(Ze(this,Yi)),ht(this,Yi,null))},Ol=function(ne=this.parent){Ze(this,Bs)===null&&({id:wi(this,Bs)._,clipPathId:wi(this,Pc)._}=ne.drawLayer.draw({bbox:Ze(this,Rs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:Ze(this,Ui)},path:{d:Ze(this,Rs).toSVGPath()}},!1,!0),ht(this,Yi,ne.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Ze(this,Ui)},bbox:Ze(this,hs).box,path:{d:Ze(this,hs).toSVGPath()}},Ze(this,Ui))),Ze(this,Uc)&&(Ze(this,Uc).style.clipPath=Ze(this,Pc)))},zs=new WeakSet,au=function([ne,oe,ce,ue],Ae){switch(Ae){case 90:return[1-oe-ue,ne,ue,ce];case 180:return[1-ne-ce,1-oe-ue,ce,ue];case 270:return[oe,1-ne-ce,ue,ce]}return[ne,oe,ce,ue]},Km=function(ne){Qn._keyboardManager.exec(this,ne)},lp=function(ne){if(!Ze(this,_f))return;const oe=window.getSelection();ne?oe.setPosition(Ze(this,_f),Ze(this,Hh)):oe.setPosition(Ze(this,Vh),Ze(this,Qh))},cp=function(){return Ze(this,Ui)?this.rotation:0},qm=function(){if(Ze(this,Ui))return null;const[ne,oe]=this.pageDimensions,[ce,ue]=this.pageTranslation,Ae=Ze(this,Eo),pe=new Float32Array(Ae.length*8);let ve=0;for(const{x:me,y:ge,width:ye,height:xe}of Ae){const _e=me*ne+ce,$e=(1-ge)*oe+ue;pe[ve]=pe[ve+4]=_e,pe[ve+1]=pe[ve+3]=$e,pe[ve+2]=pe[ve+6]=_e+ye*ne,pe[ve+5]=pe[ve+7]=$e-xe*oe,ve+=8}return pe},Gm=function(ne){return Ze(this,Rs).serialize(ne,bt(this,xn,cp).call(this))},zm=function(ne,oe){this._freeHighlight.add(oe)&&ne.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Wm=function(ne,oe){this._freeHighlight.isEmpty()?ne.drawLayer.remove(this._freeHighlightId):ne.createAndAddNewEditor(oe,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Ym=function(ne){const{color:oe}=this._initialData;return this.hasEditedComment||ne.color.some((ce,ue)=>ce!==oe[ue])},yt(Qn,zs),wr(Qn,"_defaultColor",null),wr(Qn,"_defaultOpacity",1),wr(Qn,"_defaultThickness",12),wr(Qn,"_type","highlight"),wr(Qn,"_editorType",AnnotationEditorType.HIGHLIGHT),wr(Qn,"_freeHighlightId",-1),wr(Qn,"_freeHighlight",null),wr(Qn,"_freeHighlightClipId","");let HighlightEditor=Qn;var Hc;class DrawingOptions{constructor(){yt(this,Hc,Object.create(null))}updateProperty(J,ne){this[J]=ne,this.updateSVGProperty(J,ne)}updateProperties(J){if(J)for(const[ne,oe]of Object.entries(J))ne.startsWith("_")||this.updateProperty(ne,oe)}updateSVGProperty(J,ne){Ze(this,Hc)[J]=ne}toSVGProperties(){const J=Ze(this,Hc);return ht(this,Hc,Object.create(null)),{root:J}}reset(){ht(this,Hc,Object.create(null))}updateAll(J=this){this.updateProperties(J)}clone(){unreachable$1("Not implemented")}}Hc=new WeakMap;var Is,If,$i,jc,Vc,ml,vl,yl,Qc,jn,ag,og,lg,cd,Xm,up,ud,ou;const Hr=class Hr extends AnnotationEditor{constructor(ne){super(ne);yt(this,jn);yt(this,Is,null);yt(this,If);wr(this,"_colorPicker",null);wr(this,"_drawId",null);ht(this,If,ne.mustBeCommitted||!1),this._addOutlines(ne)}onUpdatedColor(){var ne;(ne=this._colorPicker)==null||ne.update(this.color),super.onUpdatedColor()}_addOutlines(ne){ne.drawOutlines&&(bt(this,jn,ag).call(this,ne),bt(this,jn,cd).call(this))}static _mergeSVGProperties(ne,oe){const ce=new Set(Object.keys(ne));for(const[ue,Ae]of Object.entries(oe))ce.has(ue)?Object.assign(ne[ue],Ae):ne[ue]=Ae;return ne}static getDefaultDrawingOptions(ne){unreachable$1("Not implemented")}static get typesMap(){unreachable$1("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(ne,oe){const ce=this.typesMap.get(ne);ce&&this._defaultDrawingOptions.updateProperty(ce,oe),this._currentParent&&(Ze(Hr,$i).updateProperty(ce,oe),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(ne,oe){const ce=this.constructor.typesMap.get(ne);ce&&this._updateProperty(ne,ce,oe)}static get defaultPropertiesToUpdate(){const ne=[],oe=this._defaultDrawingOptions;for(const[ce,ue]of this.typesMap)ne.push([ce,oe[ue]]);return ne}get propertiesToUpdate(){const ne=[],{_drawingOptions:oe}=this;for(const[ce,ue]of this.constructor.typesMap)ne.push([ce,oe[ue]]);return ne}_updateProperty(ne,oe,ce){const ue=this._drawingOptions,Ae=ue[oe],pe=ve=>{var ge;ue.updateProperty(oe,ve);const me=Ze(this,Is).updateProperty(oe,ve);me&&bt(this,jn,ud).call(this,me),(ge=this.parent)==null||ge.drawLayer.updateProperties(this._drawId,ue.toSVGProperties()),ne===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:pe.bind(this,ce),undo:pe.bind(this,Ae),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var ne;(ne=this.parent)==null||ne.drawLayer.updateProperties(this._drawId,Hr._mergeSVGProperties(Ze(this,Is).getPathResizingSVGProperties(bt(this,jn,up).call(this)),{bbox:bt(this,jn,ou).call(this)}))}_onResized(){var ne;(ne=this.parent)==null||ne.drawLayer.updateProperties(this._drawId,Hr._mergeSVGProperties(Ze(this,Is).getPathResizedSVGProperties(bt(this,jn,up).call(this)),{bbox:bt(this,jn,ou).call(this)}))}_onTranslating(ne,oe){var ce;(ce=this.parent)==null||ce.drawLayer.updateProperties(this._drawId,{bbox:bt(this,jn,ou).call(this)})}_onTranslated(){var ne;(ne=this.parent)==null||ne.drawLayer.updateProperties(this._drawId,Hr._mergeSVGProperties(Ze(this,Is).getPathTranslatedSVGProperties(bt(this,jn,up).call(this),this.parentDimensions),{bbox:bt(this,jn,ou).call(this)}))}_onStartDragging(){var ne;(ne=this.parent)==null||ne.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var ne;(ne=this.parent)==null||ne.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(ne){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Ze(this,If)&&(ht(this,If,!1),this.commit(),this.parent.setSelected(this),ne&&this.isOnScreen&&this.div.focus())}remove(){bt(this,jn,lg).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(bt(this,jn,cd).call(this),bt(this,jn,ud).call(this,Ze(this,Is).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(ne){var ce;let oe=!1;this.parent&&!ne?(this._uiManager.removeShouldRescale(this),bt(this,jn,lg).call(this)):ne&&(this._uiManager.addShouldRescale(this),bt(this,jn,cd).call(this,ne),oe=!this.parent&&((ce=this.div)==null?void 0:ce.classList.contains("selectedEditor"))),super.setParent(ne),oe&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Hr._mergeSVGProperties({bbox:bt(this,jn,ou).call(this)},Ze(this,Is).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&bt(this,jn,ud).call(this,Ze(this,Is).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let ne,oe;this._isCopy&&(ne=this.x,oe=this.y);const ce=super.render();ce.classList.add("draw");const ue=document.createElement("div");return ce.append(ue),ue.setAttribute("aria-hidden","true"),ue.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(ne,oe),ce}static createDrawerInstance(ne,oe,ce,ue,Ae){unreachable$1("Not implemented")}static startDrawing(ne,oe,ce,ue){var Fe;const{target:Ae,offsetX:pe,offsetY:ve,pointerId:me,pointerType:ge}=ue;if(Ze(Hr,vl)&&Ze(Hr,vl)!==ge)return;const{viewport:{rotation:ye}}=ne,{width:xe,height:_e}=Ae.getBoundingClientRect(),$e=ht(Hr,jc,new AbortController),Ie=ne.combinedSignal($e);if(Ze(Hr,ml)||ht(Hr,ml,me),Ze(Hr,vl)??ht(Hr,vl,ge),window.addEventListener("pointerup",ke=>{var je;Ze(Hr,ml)===ke.pointerId?this._endDraw(ke):(je=Ze(Hr,yl))==null||je.delete(ke.pointerId)},{signal:Ie}),window.addEventListener("pointercancel",ke=>{var je;Ze(Hr,ml)===ke.pointerId?this._currentParent.endDrawingSession():(je=Ze(Hr,yl))==null||je.delete(ke.pointerId)},{signal:Ie}),window.addEventListener("pointerdown",ke=>{Ze(Hr,vl)===ke.pointerType&&((Ze(Hr,yl)||ht(Hr,yl,new Set)).add(ke.pointerId),Ze(Hr,$i).isCancellable()&&(Ze(Hr,$i).removeLastElement(),Ze(Hr,$i).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:Ie}),window.addEventListener("contextmenu",noContextMenu,{signal:Ie}),Ae.addEventListener("pointermove",this._drawMove.bind(this),{signal:Ie}),Ae.addEventListener("touchmove",ke=>{ke.timeStamp===Ze(Hr,Qc)&&stopEvent(ke)},{signal:Ie}),ne.toggleDrawing(),(Fe=oe._editorUndoBar)==null||Fe.hide(),Ze(Hr,$i)){ne.drawLayer.updateProperties(this._currentDrawId,Ze(Hr,$i).startNew(pe,ve,xe,_e,ye));return}oe.updateUIForDefaultProperties(this),ht(Hr,$i,this.createDrawerInstance(pe,ve,xe,_e,ye)),ht(Hr,Vc,this.getDefaultDrawingOptions()),this._currentParent=ne,{id:this._currentDrawId}=ne.drawLayer.draw(this._mergeSVGProperties(Ze(Hr,Vc).toSVGProperties(),Ze(Hr,$i).defaultSVGProperties),!0,!1)}static _drawMove(ne){var Ae;if(ht(Hr,Qc,-1),!Ze(Hr,$i))return;const{offsetX:oe,offsetY:ce,pointerId:ue}=ne;if(Ze(Hr,ml)===ue){if(((Ae=Ze(Hr,yl))==null?void 0:Ae.size)>=1){this._endDraw(ne);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ze(Hr,$i).add(oe,ce)),ht(Hr,Qc,ne.timeStamp),stopEvent(ne)}}static _cleanup(ne){ne&&(this._currentDrawId=-1,this._currentParent=null,ht(Hr,$i,null),ht(Hr,Vc,null),ht(Hr,vl,null),ht(Hr,Qc,NaN)),Ze(Hr,jc)&&(Ze(Hr,jc).abort(),ht(Hr,jc,null),ht(Hr,ml,NaN),ht(Hr,yl,null))}static _endDraw(ne){const oe=this._currentParent;if(oe){if(oe.toggleDrawing(!0),this._cleanup(!1),(ne==null?void 0:ne.target)===oe.div&&oe.drawLayer.updateProperties(this._currentDrawId,Ze(Hr,$i).end(ne.offsetX,ne.offsetY)),this.supportMultipleDrawings){const ce=Ze(Hr,$i),ue=this._currentDrawId,Ae=ce.getLastElement();oe.addCommands({cmd:()=>{oe.drawLayer.updateProperties(ue,ce.setLastElement(Ae))},undo:()=>{oe.drawLayer.updateProperties(ue,ce.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(ne){const oe=this._currentParent;if(!oe)return null;if(oe.toggleDrawing(!0),oe.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!Ze(Hr,$i).isEmpty()){const{pageDimensions:[ce,ue],scale:Ae}=oe,pe=oe.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ze(Hr,$i).getOutlines(ce*Ae,ue*Ae,Ae,this._INNER_MARGIN),drawingOptions:Ze(Hr,Vc),mustBeCommitted:!ne});return this._cleanup(!0),pe}return oe.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(ne){}static deserializeDraw(ne,oe,ce,ue,Ae,pe){unreachable$1("Not implemented")}static async deserialize(ne,oe,ce){var ye,xe;const{rawDims:{pageWidth:ue,pageHeight:Ae,pageX:pe,pageY:ve}}=oe.viewport,me=this.deserializeDraw(pe,ve,ue,Ae,this._INNER_MARGIN,ne),ge=await super.deserialize(ne,oe,ce);return ge.createDrawingOptions(ne),bt(ye=ge,jn,ag).call(ye,{drawOutlines:me}),bt(xe=ge,jn,cd).call(xe),ge.onScaleChanging(),ge.rotate(),ge}serializeDraw(ne){const[oe,ce]=this.pageTranslation,[ue,Ae]=this.pageDimensions;return Ze(this,Is).serialize([oe,ce,ue,Ae],ne)}renderAnnotationElement(ne){return ne.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Is=new WeakMap,If=new WeakMap,$i=new WeakMap,jc=new WeakMap,Vc=new WeakMap,ml=new WeakMap,vl=new WeakMap,yl=new WeakMap,Qc=new WeakMap,jn=new WeakSet,ag=function({drawOutlines:ne,drawId:oe,drawingOptions:ce}){ht(this,Is,ne),this._drawingOptions||(this._drawingOptions=ce),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),oe>=0?(this._drawId=oe,this.parent.drawLayer.finalizeDraw(oe,ne.defaultProperties)):this._drawId=bt(this,jn,og).call(this,ne,this.parent),bt(this,jn,ud).call(this,ne.box)},og=function(ne,oe){const{id:ce}=oe.drawLayer.draw(Hr._mergeSVGProperties(this._drawingOptions.toSVGProperties(),ne.defaultSVGProperties),!1,!1);return ce},lg=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},cd=function(ne=this.parent){if(!(this._drawId!==null&&this.parent===ne)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,ne.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=bt(this,jn,og).call(this,Ze(this,Is),ne)}},Xm=function([ne,oe,ce,ue]){const{parentDimensions:[Ae,pe],rotation:ve}=this;switch(ve){case 90:return[oe,1-ne,ce*(pe/Ae),ue*(Ae/pe)];case 180:return[1-ne,1-oe,ce,ue];case 270:return[1-oe,ne,ce*(pe/Ae),ue*(Ae/pe)];default:return[ne,oe,ce,ue]}},up=function(){const{x:ne,y:oe,width:ce,height:ue,parentDimensions:[Ae,pe],rotation:ve}=this;switch(ve){case 90:return[1-oe,ne,ce*(Ae/pe),ue*(pe/Ae)];case 180:return[1-ne,1-oe,ce,ue];case 270:return[oe,1-ne,ce*(Ae/pe),ue*(pe/Ae)];default:return[ne,oe,ce,ue]}},ud=function(ne){[this.x,this.y,this.width,this.height]=bt(this,jn,Xm).call(this,ne),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},ou=function(){const{x:ne,y:oe,width:ce,height:ue,rotation:Ae,parentRotation:pe,parentDimensions:[ve,me]}=this;switch((Ae*4+pe)/90){case 1:return[1-oe-ue,ne,ue,ce];case 2:return[1-ne-ce,1-oe-ue,ce,ue];case 3:return[oe,1-ne-ce,ue,ce];case 4:return[ne,oe-ce*(ve/me),ue*(me/ve),ce*(ve/me)];case 5:return[1-oe,ne,ce*(ve/me),ue*(me/ve)];case 6:return[1-ne-ue*(me/ve),1-oe,ue*(me/ve),ce*(ve/me)];case 7:return[oe-ce*(ve/me),1-ne-ue*(me/ve),ce*(ve/me),ue*(me/ve)];case 8:return[ne-ce,oe-ue,ce,ue];case 9:return[1-oe,ne-ce,ue,ce];case 10:return[1-ne,1-oe,ce,ue];case 11:return[oe-ue,1-ne,ue,ce];case 12:return[ne-ue*(me/ve),oe,ue*(me/ve),ce*(ve/me)];case 13:return[1-oe-ce*(ve/me),ne-ue*(me/ve),ce*(ve/me),ue*(me/ve)];case 14:return[1-ne,1-oe-ce*(ve/me),ue*(me/ve),ce*(ve/me)];case 15:return[oe,1-ne,ce*(ve/me),ue*(me/ve)];default:return[ne,oe,ce,ue]}},wr(Hr,"_currentDrawId",-1),wr(Hr,"_currentParent",null),yt(Hr,$i,null),yt(Hr,jc,null),yt(Hr,Vc,null),yt(Hr,ml,NaN),yt(Hr,vl,null),yt(Hr,yl,null),yt(Hr,Qc,NaN),wr(Hr,"_INNER_MARGIN",3);let DrawingEditor=Hr;var Oa,Mi,Ni,Kc,$f,ts,Hi,qs,qc,Gc,zc,Mf,fp;class InkDrawOutliner{constructor(J,ne,oe,ce,ue,Ae){yt(this,Mf);yt(this,Oa,new Float64Array(6));yt(this,Mi);yt(this,Ni);yt(this,Kc);yt(this,$f);yt(this,ts);yt(this,Hi,"");yt(this,qs,0);yt(this,qc,new InkDrawOutline);yt(this,Gc);yt(this,zc);ht(this,Gc,oe),ht(this,zc,ce),ht(this,Kc,ue),ht(this,$f,Ae),[J,ne]=bt(this,Mf,fp).call(this,J,ne);const pe=ht(this,Mi,[NaN,NaN,NaN,NaN,J,ne]);ht(this,ts,[J,ne]),ht(this,Ni,[{line:pe,points:Ze(this,ts)}]),Ze(this,Oa).set(pe,0)}updateProperty(J,ne){J==="stroke-width"&&ht(this,$f,ne)}isEmpty(){return!Ze(this,Ni)||Ze(this,Ni).length===0}isCancellable(){return Ze(this,ts).length<=10}add(J,ne){[J,ne]=bt(this,Mf,fp).call(this,J,ne);const[oe,ce,ue,Ae]=Ze(this,Oa).subarray(2,6),pe=J-ue,ve=ne-Ae;return Math.hypot(Ze(this,Gc)*pe,Ze(this,zc)*ve)<=2?null:(Ze(this,ts).push(J,ne),isNaN(oe)?(Ze(this,Oa).set([ue,Ae,J,ne],2),Ze(this,Mi).push(NaN,NaN,NaN,NaN,J,ne),{path:{d:this.toSVGPath()}}):(isNaN(Ze(this,Oa)[0])&&Ze(this,Mi).splice(6,6),Ze(this,Oa).set([oe,ce,ue,Ae,J,ne],0),Ze(this,Mi).push(...Outline$1.createBezierPoints(oe,ce,ue,Ae,J,ne)),{path:{d:this.toSVGPath()}}))}end(J,ne){const oe=this.add(J,ne);return oe||(Ze(this,ts).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(J,ne,oe,ce,ue){ht(this,Gc,oe),ht(this,zc,ce),ht(this,Kc,ue),[J,ne]=bt(this,Mf,fp).call(this,J,ne);const Ae=ht(this,Mi,[NaN,NaN,NaN,NaN,J,ne]);ht(this,ts,[J,ne]);const pe=Ze(this,Ni).at(-1);return pe&&(pe.line=new Float32Array(pe.line),pe.points=new Float32Array(pe.points)),Ze(this,Ni).push({line:Ae,points:Ze(this,ts)}),Ze(this,Oa).set(Ae,0),ht(this,qs,0),this.toSVGPath(),null}getLastElement(){return Ze(this,Ni).at(-1)}setLastElement(J){return Ze(this,Ni)?(Ze(this,Ni).push(J),ht(this,Mi,J.line),ht(this,ts,J.points),ht(this,qs,0),{path:{d:this.toSVGPath()}}):Ze(this,qc).setLastElement(J)}removeLastElement(){if(!Ze(this,Ni))return Ze(this,qc).removeLastElement();Ze(this,Ni).pop(),ht(this,Hi,"");for(let J=0,ne=Ze(this,Ni).length;J<ne;J++){const{line:oe,points:ce}=Ze(this,Ni)[J];ht(this,Mi,oe),ht(this,ts,ce),ht(this,qs,0),this.toSVGPath()}return{path:{d:Ze(this,Hi)}}}toSVGPath(){const J=Outline$1.svgRound(Ze(this,Mi)[4]),ne=Outline$1.svgRound(Ze(this,Mi)[5]);if(Ze(this,ts).length===2)return ht(this,Hi,`${Ze(this,Hi)} M ${J} ${ne} Z`),Ze(this,Hi);if(Ze(this,ts).length<=6){const ce=Ze(this,Hi).lastIndexOf("M");ht(this,Hi,`${Ze(this,Hi).slice(0,ce)} M ${J} ${ne}`),ht(this,qs,6)}if(Ze(this,ts).length===4){const ce=Outline$1.svgRound(Ze(this,Mi)[10]),ue=Outline$1.svgRound(Ze(this,Mi)[11]);return ht(this,Hi,`${Ze(this,Hi)} L ${ce} ${ue}`),ht(this,qs,12),Ze(this,Hi)}const oe=[];Ze(this,qs)===0&&(oe.push(`M ${J} ${ne}`),ht(this,qs,6));for(let ce=Ze(this,qs),ue=Ze(this,Mi).length;ce<ue;ce+=6){const[Ae,pe,ve,me,ge,ye]=Ze(this,Mi).slice(ce,ce+6).map(Outline$1.svgRound);oe.push(`C${Ae} ${pe} ${ve} ${me} ${ge} ${ye}`)}return ht(this,Hi,Ze(this,Hi)+oe.join(" ")),ht(this,qs,Ze(this,Mi).length),Ze(this,Hi)}getOutlines(J,ne,oe,ce){const ue=Ze(this,Ni).at(-1);return ue.line=new Float32Array(ue.line),ue.points=new Float32Array(ue.points),Ze(this,qc).build(Ze(this,Ni),J,ne,oe,Ze(this,Kc),Ze(this,$f),ce),ht(this,Oa,null),ht(this,Mi,null),ht(this,Ni,null),ht(this,Hi,null),Ze(this,qc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Oa=new WeakMap,Mi=new WeakMap,Ni=new WeakMap,Kc=new WeakMap,$f=new WeakMap,ts=new WeakMap,Hi=new WeakMap,qs=new WeakMap,qc=new WeakMap,Gc=new WeakMap,zc=new WeakMap,Mf=new WeakSet,fp=function(J,ne){return Outline$1._normalizePoint(J,ne,Ze(this,Gc),Ze(this,zc),Ze(this,Kc))};var rs,qh,Gh,$s,La,Fa,Nf,Df,Wc,ji,Va,Zm,Jm,ev;class InkDrawOutline extends Outline$1{constructor(){super(...arguments);yt(this,ji);yt(this,rs);yt(this,qh,0);yt(this,Gh);yt(this,$s);yt(this,La);yt(this,Fa);yt(this,Nf);yt(this,Df);yt(this,Wc)}build(ne,oe,ce,ue,Ae,pe,ve){ht(this,La,oe),ht(this,Fa,ce),ht(this,Nf,ue),ht(this,Df,Ae),ht(this,Wc,pe),ht(this,Gh,ve??0),ht(this,$s,ne),bt(this,ji,Jm).call(this)}get thickness(){return Ze(this,Wc)}setLastElement(ne){return Ze(this,$s).push(ne),{path:{d:this.toSVGPath()}}}removeLastElement(){return Ze(this,$s).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const ne=[];for(const{line:oe}of Ze(this,$s)){if(ne.push(`M${Outline$1.svgRound(oe[4])} ${Outline$1.svgRound(oe[5])}`),oe.length===6){ne.push("Z");continue}if(oe.length===12&&isNaN(oe[6])){ne.push(`L${Outline$1.svgRound(oe[10])} ${Outline$1.svgRound(oe[11])}`);continue}for(let ce=6,ue=oe.length;ce<ue;ce+=6){const[Ae,pe,ve,me,ge,ye]=oe.subarray(ce,ce+6).map(Outline$1.svgRound);ne.push(`C${Ae} ${pe} ${ve} ${me} ${ge} ${ye}`)}}return ne.join("")}serialize([ne,oe,ce,ue],Ae){const pe=[],ve=[],[me,ge,ye,xe]=bt(this,ji,Zm).call(this);let _e,$e,Ie,Fe,ke,je,We,ze,Xe;switch(Ze(this,Df)){case 0:Xe=Outline$1._rescale,_e=ne,$e=oe+ue,Ie=ce,Fe=-ue,ke=ne+me*ce,je=oe+(1-ge-xe)*ue,We=ne+(me+ye)*ce,ze=oe+(1-ge)*ue;break;case 90:Xe=Outline$1._rescaleAndSwap,_e=ne,$e=oe,Ie=ce,Fe=ue,ke=ne+ge*ce,je=oe+me*ue,We=ne+(ge+xe)*ce,ze=oe+(me+ye)*ue;break;case 180:Xe=Outline$1._rescale,_e=ne+ce,$e=oe,Ie=-ce,Fe=ue,ke=ne+(1-me-ye)*ce,je=oe+ge*ue,We=ne+(1-me)*ce,ze=oe+(ge+xe)*ue;break;case 270:Xe=Outline$1._rescaleAndSwap,_e=ne+ce,$e=oe+ue,Ie=-ce,Fe=-ue,ke=ne+(1-ge-xe)*ce,je=oe+(1-me-ye)*ue,We=ne+(1-ge)*ce,ze=oe+(1-me)*ue;break}for(const{line:Je,points:nt}of Ze(this,$s))pe.push(Xe(Je,_e,$e,Ie,Fe,Ae?new Array(Je.length):null)),ve.push(Xe(nt,_e,$e,Ie,Fe,Ae?new Array(nt.length):null));return{lines:pe,points:ve,rect:[ke,je,We,ze]}}static deserialize(ne,oe,ce,ue,Ae,{paths:{lines:pe,points:ve},rotation:me,thickness:ge}){const ye=[];let xe,_e,$e,Ie,Fe;switch(me){case 0:Fe=Outline$1._rescale,xe=-ne/ce,_e=oe/ue+1,$e=1/ce,Ie=-1/ue;break;case 90:Fe=Outline$1._rescaleAndSwap,xe=-oe/ue,_e=-ne/ce,$e=1/ue,Ie=1/ce;break;case 180:Fe=Outline$1._rescale,xe=ne/ce+1,_e=-oe/ue,$e=-1/ce,Ie=1/ue;break;case 270:Fe=Outline$1._rescaleAndSwap,xe=oe/ue+1,_e=ne/ce+1,$e=-1/ue,Ie=-1/ce;break}if(!pe){pe=[];for(const je of ve){const We=je.length;if(We===2){pe.push(new Float32Array([NaN,NaN,NaN,NaN,je[0],je[1]]));continue}if(We===4){pe.push(new Float32Array([NaN,NaN,NaN,NaN,je[0],je[1],NaN,NaN,NaN,NaN,je[2],je[3]]));continue}const ze=new Float32Array(3*(We-2));pe.push(ze);let[Xe,Je,nt,et]=je.subarray(0,4);ze.set([NaN,NaN,NaN,NaN,Xe,Je],0);for(let tt=4;tt<We;tt+=2){const st=je[tt],qe=je[tt+1];ze.set(Outline$1.createBezierPoints(Xe,Je,nt,et,st,qe),(tt-2)*3),[Xe,Je,nt,et]=[nt,et,st,qe]}}}for(let je=0,We=pe.length;je<We;je++)ye.push({line:Fe(pe[je].map(ze=>ze??NaN),xe,_e,$e,Ie),points:Fe(ve[je].map(ze=>ze??NaN),xe,_e,$e,Ie)});const ke=new this.prototype.constructor;return ke.build(ye,ce,ue,1,me,ge,Ae),ke}get box(){return Ze(this,rs)}updateProperty(ne,oe){return ne==="stroke-width"?bt(this,ji,ev).call(this,oe):null}updateParentDimensions([ne,oe],ce){const[ue,Ae]=bt(this,ji,Va).call(this);ht(this,La,ne),ht(this,Fa,oe),ht(this,Nf,ce);const[pe,ve]=bt(this,ji,Va).call(this),me=pe-ue,ge=ve-Ae,ye=Ze(this,rs);return ye[0]-=me,ye[1]-=ge,ye[2]+=2*me,ye[3]+=2*ge,ye}updateRotation(ne){return ht(this,qh,ne),{path:{transform:this.rotationTransform}}}get viewBox(){return Ze(this,rs).map(Outline$1.svgRound).join(" ")}get defaultProperties(){const[ne,oe]=Ze(this,rs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline$1.svgRound(ne)} ${Outline$1.svgRound(oe)}`}}}get rotationTransform(){const[,,ne,oe]=Ze(this,rs);let ce=0,ue=0,Ae=0,pe=0,ve=0,me=0;switch(Ze(this,qh)){case 90:ue=oe/ne,Ae=-ne/oe,ve=ne;break;case 180:ce=-1,pe=-1,ve=ne,me=oe;break;case 270:ue=-oe/ne,Ae=ne/oe,me=oe;break;default:return""}return`matrix(${ce} ${ue} ${Ae} ${pe} ${Outline$1.svgRound(ve)} ${Outline$1.svgRound(me)})`}getPathResizingSVGProperties([ne,oe,ce,ue]){const[Ae,pe]=bt(this,ji,Va).call(this),[ve,me,ge,ye]=Ze(this,rs);if(Math.abs(ge-Ae)<=Outline$1.PRECISION||Math.abs(ye-pe)<=Outline$1.PRECISION){const Fe=ne+ce/2-(ve+ge/2),ke=oe+ue/2-(me+ye/2);return{path:{"transform-origin":`${Outline$1.svgRound(ne)} ${Outline$1.svgRound(oe)}`,transform:`${this.rotationTransform} translate(${Fe} ${ke})`}}}const xe=(ce-2*Ae)/(ge-2*Ae),_e=(ue-2*pe)/(ye-2*pe),$e=ge/ce,Ie=ye/ue;return{path:{"transform-origin":`${Outline$1.svgRound(ve)} ${Outline$1.svgRound(me)}`,transform:`${this.rotationTransform} scale(${$e} ${Ie}) translate(${Outline$1.svgRound(Ae)} ${Outline$1.svgRound(pe)}) scale(${xe} ${_e}) translate(${Outline$1.svgRound(-Ae)} ${Outline$1.svgRound(-pe)})`}}}getPathResizedSVGProperties([ne,oe,ce,ue]){const[Ae,pe]=bt(this,ji,Va).call(this),ve=Ze(this,rs),[me,ge,ye,xe]=ve;if(ve[0]=ne,ve[1]=oe,ve[2]=ce,ve[3]=ue,Math.abs(ye-Ae)<=Outline$1.PRECISION||Math.abs(xe-pe)<=Outline$1.PRECISION){const ke=ne+ce/2-(me+ye/2),je=oe+ue/2-(ge+xe/2);for(const{line:We,points:ze}of Ze(this,$s))Outline$1._translate(We,ke,je,We),Outline$1._translate(ze,ke,je,ze);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline$1.svgRound(ne)} ${Outline$1.svgRound(oe)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const _e=(ce-2*Ae)/(ye-2*Ae),$e=(ue-2*pe)/(xe-2*pe),Ie=-_e*(me+Ae)+ne+Ae,Fe=-$e*(ge+pe)+oe+pe;if(_e!==1||$e!==1||Ie!==0||Fe!==0)for(const{line:ke,points:je}of Ze(this,$s))Outline$1._rescale(ke,Ie,Fe,_e,$e,ke),Outline$1._rescale(je,Ie,Fe,_e,$e,je);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline$1.svgRound(ne)} ${Outline$1.svgRound(oe)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([ne,oe],ce){const[ue,Ae]=ce,pe=Ze(this,rs),ve=ne-pe[0],me=oe-pe[1];if(Ze(this,La)===ue&&Ze(this,Fa)===Ae)for(const{line:ge,points:ye}of Ze(this,$s))Outline$1._translate(ge,ve,me,ge),Outline$1._translate(ye,ve,me,ye);else{const ge=Ze(this,La)/ue,ye=Ze(this,Fa)/Ae;ht(this,La,ue),ht(this,Fa,Ae);for(const{line:xe,points:_e}of Ze(this,$s))Outline$1._rescale(xe,ve,me,ge,ye,xe),Outline$1._rescale(_e,ve,me,ge,ye,_e);pe[2]*=ge,pe[3]*=ye}return pe[0]=ne,pe[1]=oe,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline$1.svgRound(ne)} ${Outline$1.svgRound(oe)}`}}}get defaultSVGProperties(){const ne=Ze(this,rs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline$1.svgRound(ne[0])} ${Outline$1.svgRound(ne[1])}`,transform:this.rotationTransform||null},bbox:ne}}}rs=new WeakMap,qh=new WeakMap,Gh=new WeakMap,$s=new WeakMap,La=new WeakMap,Fa=new WeakMap,Nf=new WeakMap,Df=new WeakMap,Wc=new WeakMap,ji=new WeakSet,Va=function(ne=Ze(this,Wc)){const oe=Ze(this,Gh)+ne/2*Ze(this,Nf);return Ze(this,Df)%180===0?[oe/Ze(this,La),oe/Ze(this,Fa)]:[oe/Ze(this,Fa),oe/Ze(this,La)]},Zm=function(){const[ne,oe,ce,ue]=Ze(this,rs),[Ae,pe]=bt(this,ji,Va).call(this,0);return[ne+Ae,oe+pe,ce-2*Ae,ue-2*pe]},Jm=function(){const ne=ht(this,rs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:ue}of Ze(this,$s)){if(ue.length<=12){for(let ve=4,me=ue.length;ve<me;ve+=6)Util.pointBoundingBox(ue[ve],ue[ve+1],ne);continue}let Ae=ue[4],pe=ue[5];for(let ve=6,me=ue.length;ve<me;ve+=6){const[ge,ye,xe,_e,$e,Ie]=ue.subarray(ve,ve+6);Util.bezierBoundingBox(Ae,pe,ge,ye,xe,_e,$e,Ie,ne),Ae=$e,pe=Ie}}const[oe,ce]=bt(this,ji,Va).call(this);ne[0]=MathClamp(ne[0]-oe,0,1),ne[1]=MathClamp(ne[1]-ce,0,1),ne[2]=MathClamp(ne[2]+oe,0,1),ne[3]=MathClamp(ne[3]+ce,0,1),ne[2]-=ne[0],ne[3]-=ne[1]},ev=function(ne){const[oe,ce]=bt(this,ji,Va).call(this);ht(this,Wc,ne);const[ue,Ae]=bt(this,ji,Va).call(this),[pe,ve]=[ue-oe,Ae-ce],me=Ze(this,rs);return me[0]-=pe,me[1]-=ve,me[2]+=2*pe,me[3]+=2*ve,me};class InkDrawingOptions extends DrawingOptions{constructor(J){super(),this._viewParameters=J,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(J,ne){J==="stroke-width"&&(ne??(ne=this["stroke-width"]),ne*=this._viewParameters.realScale),super.updateSVGProperty(J,ne)}clone(){const J=new InkDrawingOptions(this._viewParameters);return J.updateAll(this),J}}var Fp,tv;const fu=class fu extends DrawingEditor{constructor(ne){super({...ne,name:"inkEditor"});yt(this,Fp);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(ne,oe){AnnotationEditor.initialize(ne,oe),this._defaultDrawingOptions=new InkDrawingOptions(oe.viewParameters)}static getDefaultDrawingOptions(ne){const oe=this._defaultDrawingOptions.clone();return oe.updateProperties(ne),oe}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(ne,oe,ce,ue,Ae){return new InkDrawOutliner(ne,oe,ce,ue,Ae,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(ne,oe,ce,ue,Ae,pe){return InkDrawOutline.deserialize(ne,oe,ce,ue,Ae,pe)}static async deserialize(ne,oe,ce){let ue=null;if(ne instanceof InkAnnotationElement){const{data:{inkLists:pe,rect:ve,rotation:me,id:ge,color:ye,opacity:xe,borderStyle:{rawWidth:_e},popupRef:$e,richText:Ie,contentsObj:Fe,creationDate:ke,modificationDate:je},parent:{page:{pageNumber:We}}}=ne;ue=ne={annotationType:AnnotationEditorType.INK,color:Array.from(ye),thickness:_e,opacity:xe,paths:{points:pe},boxes:null,pageIndex:We-1,rect:ve.slice(0),rotation:me,annotationElementId:ge,id:ge,deleted:!1,popupRef:$e,richText:Ie,comment:(Fe==null?void 0:Fe.str)||null,creationDate:ke,modificationDate:je}}const Ae=await super.deserialize(ne,oe,ce);return Ae._initialData=ue,ne.comment&&Ae.setCommentData(ne),Ae}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:ne,_drawingOptions:oe,parent:ce}=this;oe.updateSVGProperty("stroke-width"),ce.drawLayer.updateProperties(ne,oe.toSVGProperties())}static onScaleChangingWhenDrawing(){const ne=this._currentParent;ne&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),ne.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:ne,thickness:oe,opacity:ce}){this._drawingOptions=fu.getDefaultDrawingOptions({stroke:Util.makeHexColor(...ne),"stroke-width":oe,"stroke-opacity":ce})}serialize(ne=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:oe,points:ce}=this.serializeDraw(ne),{_drawingOptions:{stroke:ue,"stroke-opacity":Ae,"stroke-width":pe}}=this,ve=Object.assign(super.serialize(ne),{color:AnnotationEditor._colorManager.convert(ue),opacity:Ae,thickness:pe,paths:{lines:oe,points:ce}});return this.addComment(ve),ne?(ve.isCopy=!0,ve):this.annotationElementId&&!bt(this,Fp,tv).call(this,ve)?null:(ve.id=this.annotationElementId,ve)}renderAnnotationElement(ne){if(this.deleted)return ne.hide(),null;const{points:oe,rect:ce}=this.serializeDraw(!1);return ne.updateEdited({rect:ce,thickness:this._drawingOptions["stroke-width"],points:oe,popup:this.comment}),null}};Fp=new WeakSet,tv=function(ne){const{color:oe,thickness:ce,opacity:ue,pageIndex:Ae}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||ne.color.some((pe,ve)=>pe!==oe[ve])||ne.thickness!==ce||ne.opacity!==ue||ne.pageIndex!==Ae},wr(fu,"_type","ink"),wr(fu,"_editorType",AnnotationEditorType.INK),wr(fu,"_defaultDrawingOptions",null);let InkEditor=fu;class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let J=super.toSVGPath();return J.endsWith("Z")||(J+="Z"),J}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;var Yc,Kn,cg,ua,rv,nv,ug,dp,iv,sv,av,fg,dg,ov;class SignatureExtractor{static extractContoursFromText(J,{fontFamily:ne,fontStyle:oe,fontWeight:ce},ue,Ae,pe,ve){let me=new OffscreenCanvas(1,1),ge=me.getContext("2d",{alpha:!1});const ye=200,xe=ge.font=`${oe} ${ce} ${ye}px ${ne}`,{actualBoundingBoxLeft:_e,actualBoundingBoxRight:$e,actualBoundingBoxAscent:Ie,actualBoundingBoxDescent:Fe,fontBoundingBoxAscent:ke,fontBoundingBoxDescent:je,width:We}=ge.measureText(J),ze=1.5,Xe=Math.ceil(Math.max(Math.abs(_e)+Math.abs($e)||0,We)*ze),Je=Math.ceil(Math.max(Math.abs(Ie)+Math.abs(Fe)||ye,Math.abs(ke)+Math.abs(je)||ye)*ze);me=new OffscreenCanvas(Xe,Je),ge=me.getContext("2d",{alpha:!0,willReadFrequently:!0}),ge.font=xe,ge.filter="grayscale(1)",ge.fillStyle="white",ge.fillRect(0,0,Xe,Je),ge.fillStyle="black",ge.fillText(J,Xe*(ze-1)/2,Je*(3-ze)/2);const nt=bt(this,Kn,fg).call(this,ge.getImageData(0,0,Xe,Je).data),et=bt(this,Kn,av).call(this,nt),tt=bt(this,Kn,dg).call(this,et),st=bt(this,Kn,ug).call(this,nt,Xe,Je,tt);return this.processDrawnLines({lines:{curves:st,width:Xe,height:Je},pageWidth:ue,pageHeight:Ae,rotation:pe,innerMargin:ve,mustSmooth:!0,areContours:!0})}static process(J,ne,oe,ce,ue){const[Ae,pe,ve]=bt(this,Kn,ov).call(this,J),[me,ge]=bt(this,Kn,sv).call(this,Ae,pe,ve,Math.hypot(pe,ve)*Ze(this,Yc).sigmaSFactor,Ze(this,Yc).sigmaR,Ze(this,Yc).kernelSize),ye=bt(this,Kn,dg).call(this,ge),xe=bt(this,Kn,ug).call(this,me,pe,ve,ye);return this.processDrawnLines({lines:{curves:xe,width:pe,height:ve},pageWidth:ne,pageHeight:oe,rotation:ce,innerMargin:ue,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:J,pageWidth:ne,pageHeight:oe,rotation:ce,innerMargin:ue,mustSmooth:Ae,areContours:pe}){ce%180!==0&&([ne,oe]=[oe,ne]);const{curves:ve,width:me,height:ge}=J,ye=J.thickness??0,xe=[],_e=Math.min(ne/me,oe/ge),$e=_e/ne,Ie=_e/oe,Fe=[];for(const{points:je}of ve){const We=Ae?bt(this,Kn,iv).call(this,je):je;if(!We)continue;Fe.push(We);const ze=We.length,Xe=new Float32Array(ze),Je=new Float32Array(3*(ze===2?2:ze-2));if(xe.push({line:Je,points:Xe}),ze===2){Xe[0]=We[0]*$e,Xe[1]=We[1]*Ie,Je.set([NaN,NaN,NaN,NaN,Xe[0],Xe[1]],0);continue}let[nt,et,tt,st]=We;nt*=$e,et*=Ie,tt*=$e,st*=Ie,Xe.set([nt,et,tt,st],0),Je.set([NaN,NaN,NaN,NaN,nt,et],0);for(let qe=4;qe<ze;qe+=2){const Se=Xe[qe]=We[qe]*$e,Re=Xe[qe+1]=We[qe+1]*Ie;Je.set(Outline$1.createBezierPoints(nt,et,tt,st,Se,Re),(qe-2)*3),[nt,et,tt,st]=[tt,st,Se,Re]}}if(xe.length===0)return null;const ke=pe?new ContourDrawOutline:new InkDrawOutline;return ke.build(xe,ne,oe,1,ce,pe?0:ye,ue),{outline:ke,newCurves:Fe,areContours:pe,thickness:ye,width:me,height:ge}}static async compressSignature({outlines:J,areContours:ne,thickness:oe,width:ce,height:ue}){let Ae=1/0,pe=-1/0,ve=0;for(const We of J){ve+=We.length;for(let ze=2,Xe=We.length;ze<Xe;ze++){const Je=We[ze]-We[ze-2];Ae=Math.min(Ae,Je),pe=Math.max(pe,Je)}}let me;Ae>=-128&&pe<=127?me=Int8Array:Ae>=-32768&&pe<=32767?me=Int16Array:me=Int32Array;const ge=J.length,ye=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*ge,xe=new Uint32Array(ye);let _e=0;xe[_e++]=ye*Uint32Array.BYTES_PER_ELEMENT+(ve-2*ge)*me.BYTES_PER_ELEMENT,xe[_e++]=0,xe[_e++]=ce,xe[_e++]=ue,xe[_e++]=ne?0:1,xe[_e++]=Math.max(0,Math.floor(oe??0)),xe[_e++]=ge,xe[_e++]=me.BYTES_PER_ELEMENT;for(const We of J)xe[_e++]=We.length-2,xe[_e++]=We[0],xe[_e++]=We[1];const $e=new CompressionStream("deflate-raw"),Ie=$e.writable.getWriter();await Ie.ready,Ie.write(xe);const Fe=me.prototype.constructor;for(const We of J){const ze=new Fe(We.length-2);for(let Xe=2,Je=We.length;Xe<Je;Xe++)ze[Xe-2]=We[Xe]-We[Xe-2];Ie.write(ze)}Ie.close();const ke=await new Response($e.readable).arrayBuffer(),je=new Uint8Array(ke);return toBase64Util(je)}static async decompressSignature(J){try{const ne=fromBase64Util(J),{readable:oe,writable:ce}=new DecompressionStream("deflate-raw"),ue=ce.getWriter();await ue.ready,ue.write(ne).then(async()=>{await ue.ready,await ue.close()}).catch(()=>{});let Ae=null,pe=0;for await(const We of oe)Ae||(Ae=new Uint8Array(new Uint32Array(We.buffer,0,4)[0])),Ae.set(We,pe),pe+=We.length;const ve=new Uint32Array(Ae.buffer,0,Ae.length>>2),me=ve[1];if(me!==0)throw new Error(`Invalid version: ${me}`);const ge=ve[2],ye=ve[3],xe=ve[4]===0,_e=ve[5],$e=ve[6],Ie=ve[7],Fe=[],ke=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*$e)*Uint32Array.BYTES_PER_ELEMENT;let je;switch(Ie){case Int8Array.BYTES_PER_ELEMENT:je=new Int8Array(Ae.buffer,ke);break;case Int16Array.BYTES_PER_ELEMENT:je=new Int16Array(Ae.buffer,ke);break;case Int32Array.BYTES_PER_ELEMENT:je=new Int32Array(Ae.buffer,ke);break}pe=0;for(let We=0;We<$e;We++){const ze=ve[POINTS_PROPERTIES_NUMBER*We+BASE_HEADER_LENGTH],Xe=new Float32Array(ze+2);Fe.push(Xe);for(let Je=0;Je<POINTS_PROPERTIES_NUMBER-1;Je++)Xe[Je]=ve[POINTS_PROPERTIES_NUMBER*We+BASE_HEADER_LENGTH+Je+1];for(let Je=0;Je<ze;Je++)Xe[Je+2]=Xe[Je]+je[pe++]}return{areContours:xe,thickness:_e,outlines:Fe,width:ge,height:ye}}catch(ne){return warn$2(`decompressSignature: ${ne}`),null}}}Yc=new WeakMap,Kn=new WeakSet,cg=function(J,ne,oe,ce){return oe-=J,ce-=ne,oe===0?ce>0?0:4:oe===1?ce+6:2-ce},ua=new WeakMap,rv=function(J,ne,oe,ce,ue,Ae,pe){const ve=bt(this,Kn,cg).call(this,oe,ce,ue,Ae);for(let me=0;me<8;me++){const ge=(-me+ve-pe+16)%8,ye=Ze(this,ua)[2*ge],xe=Ze(this,ua)[2*ge+1];if(J[(oe+ye)*ne+(ce+xe)]!==0)return ge}return-1},nv=function(J,ne,oe,ce,ue,Ae,pe){const ve=bt(this,Kn,cg).call(this,oe,ce,ue,Ae);for(let me=0;me<8;me++){const ge=(me+ve+pe+16)%8,ye=Ze(this,ua)[2*ge],xe=Ze(this,ua)[2*ge+1];if(J[(oe+ye)*ne+(ce+xe)]!==0)return ge}return-1},ug=function(J,ne,oe,ce){const ue=J.length,Ae=new Int32Array(ue);for(let ge=0;ge<ue;ge++)Ae[ge]=J[ge]<=ce?1:0;for(let ge=1;ge<oe-1;ge++)Ae[ge*ne]=Ae[ge*ne+ne-1]=0;for(let ge=0;ge<ne;ge++)Ae[ge]=Ae[ne*oe-1-ge]=0;let pe=1,ve;const me=[];for(let ge=1;ge<oe-1;ge++){ve=1;for(let ye=1;ye<ne-1;ye++){const xe=ge*ne+ye,_e=Ae[xe];if(_e===0)continue;let $e=ge,Ie=ye;if(_e===1&&Ae[xe-1]===0)pe+=1,Ie-=1;else if(_e>=1&&Ae[xe+1]===0)pe+=1,Ie+=1,_e>1&&(ve=_e);else{_e!==1&&(ve=Math.abs(_e));continue}const Fe=[ye,ge],ke=Ie===ye+1,je={isHole:ke,points:Fe,id:pe,parent:0};me.push(je);let We;for(const qe of me)if(qe.id===ve){We=qe;break}We?We.isHole?je.parent=ke?We.parent:ve:je.parent=ke?ve:We.parent:je.parent=ke?ve:0;const ze=bt(this,Kn,rv).call(this,Ae,ne,ge,ye,$e,Ie,0);if(ze===-1){Ae[xe]=-pe,Ae[xe]!==1&&(ve=Math.abs(Ae[xe]));continue}let Xe=Ze(this,ua)[2*ze],Je=Ze(this,ua)[2*ze+1];const nt=ge+Xe,et=ye+Je;$e=nt,Ie=et;let tt=ge,st=ye;for(;;){const qe=bt(this,Kn,nv).call(this,Ae,ne,tt,st,$e,Ie,1);Xe=Ze(this,ua)[2*qe],Je=Ze(this,ua)[2*qe+1];const Se=tt+Xe,Re=st+Je;Fe.push(Re,Se);const Be=tt*ne+st;if(Ae[Be+1]===0?Ae[Be]=-pe:Ae[Be]===1&&(Ae[Be]=pe),Se===ge&&Re===ye&&tt===nt&&st===et){Ae[xe]!==1&&(ve=Math.abs(Ae[xe]));break}else $e=tt,Ie=st,tt=Se,st=Re}}}return me},dp=function(J,ne,oe,ce){if(oe-ne<=4){for(let nt=ne;nt<oe-2;nt+=2)ce.push(J[nt],J[nt+1]);return}const ue=J[ne],Ae=J[ne+1],pe=J[oe-4]-ue,ve=J[oe-3]-Ae,me=Math.hypot(pe,ve),ge=pe/me,ye=ve/me,xe=ge*Ae-ye*ue,_e=ve/pe,$e=1/me,Ie=Math.atan(_e),Fe=Math.cos(Ie),ke=Math.sin(Ie),je=$e*(Math.abs(Fe)+Math.abs(ke)),We=$e*(1-je+je**2),ze=Math.max(Math.atan(Math.abs(ke+Fe)*We),Math.atan(Math.abs(ke-Fe)*We));let Xe=0,Je=ne;for(let nt=ne+2;nt<oe-2;nt+=2){const et=Math.abs(xe-ge*J[nt+1]+ye*J[nt]);et>Xe&&(Je=nt,Xe=et)}Xe>(me*ze)**2?(bt(this,Kn,dp).call(this,J,ne,Je+2,ce),bt(this,Kn,dp).call(this,J,Je,oe,ce)):ce.push(ue,Ae)},iv=function(J){const ne=[],oe=J.length;return bt(this,Kn,dp).call(this,J,0,oe,ne),ne.push(J[oe-2],J[oe-1]),ne.length<=4?null:ne},sv=function(J,ne,oe,ce,ue,Ae){const pe=new Float32Array(Ae**2),ve=-2*ce**2,me=Ae>>1;for(let Ie=0;Ie<Ae;Ie++){const Fe=(Ie-me)**2;for(let ke=0;ke<Ae;ke++)pe[Ie*Ae+ke]=Math.exp((Fe+(ke-me)**2)/ve)}const ge=new Float32Array(256),ye=-2*ue**2;for(let Ie=0;Ie<256;Ie++)ge[Ie]=Math.exp(Ie**2/ye);const xe=J.length,_e=new Uint8Array(xe),$e=new Uint32Array(256);for(let Ie=0;Ie<oe;Ie++)for(let Fe=0;Fe<ne;Fe++){const ke=Ie*ne+Fe,je=J[ke];let We=0,ze=0;for(let Je=0;Je<Ae;Je++){const nt=Ie+Je-me;if(!(nt<0||nt>=oe))for(let et=0;et<Ae;et++){const tt=Fe+et-me;if(tt<0||tt>=ne)continue;const st=J[nt*ne+tt],qe=pe[Je*Ae+et]*ge[Math.abs(st-je)];We+=st*qe,ze+=qe}}const Xe=_e[ke]=Math.round(We/ze);$e[Xe]++}return[_e,$e]},av=function(J){const ne=new Uint32Array(256);for(const oe of J)ne[oe]++;return ne},fg=function(J){const ne=J.length,oe=new Uint8ClampedArray(ne>>2);let ce=-1/0,ue=1/0;for(let pe=0,ve=oe.length;pe<ve;pe++){const me=oe[pe]=J[pe<<2];ce=Math.max(ce,me),ue=Math.min(ue,me)}const Ae=255/(ce-ue);for(let pe=0,ve=oe.length;pe<ve;pe++)oe[pe]=(oe[pe]-ue)*Ae;return oe},dg=function(J){let ne,oe=-1/0,ce=-1/0;const ue=J.findIndex(ve=>ve!==0);let Ae=ue,pe=ue;for(ne=ue;ne<256;ne++){const ve=J[ne];ve>oe&&(ne-Ae>ce&&(ce=ne-Ae,pe=ne-1),oe=ve,Ae=ne)}for(ne=pe-1;ne>=0&&!(J[ne]>J[ne+1]);ne--);return ne},ov=function(J){const ne=J,{width:oe,height:ce}=J,{maxDim:ue}=Ze(this,Yc);let Ae=oe,pe=ce;if(oe>ue||ce>ue){let xe=oe,_e=ce,$e=Math.log2(Math.max(oe,ce)/ue);const Ie=Math.floor($e);$e=$e===Ie?Ie-1:Ie;for(let ke=0;ke<$e;ke++){Ae=Math.ceil(xe/2),pe=Math.ceil(_e/2);const je=new OffscreenCanvas(Ae,pe);je.getContext("2d").drawImage(J,0,0,xe,_e,0,0,Ae,pe),xe=Ae,_e=pe,J!==ne&&J.close(),J=je.transferToImageBitmap()}const Fe=Math.min(ue/Ae,ue/pe);Ae=Math.round(Ae*Fe),pe=Math.round(pe*Fe)}const me=new OffscreenCanvas(Ae,pe).getContext("2d",{willReadFrequently:!0});me.fillStyle="white",me.fillRect(0,0,Ae,pe),me.filter="grayscale(1)",me.drawImage(J,0,0,J.width,J.height,0,0,Ae,pe);const ge=me.getImageData(0,0,Ae,pe).data;return[bt(this,Kn,fg).call(this,ge),Ae,pe]},yt(SignatureExtractor,Kn),yt(SignatureExtractor,Yc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),yt(SignatureExtractor,ua,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const J=new SignatureOptions;return J.updateAll(this),J}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(J){super(J),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const J=new DrawnSignatureOptions(this._viewParameters);return J.updateAll(this),J}}var xl,ka,El,Xc;const ps=class ps extends DrawingEditor{constructor(ne){super({...ne,mustBeCommitted:!0,name:"signatureEditor"});yt(this,xl,!1);yt(this,ka,null);yt(this,El,null);yt(this,Xc,null);this._willKeepAspectRatio=!0,ht(this,El,ne.signatureData||null),ht(this,ka,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(ne,oe){AnnotationEditor.initialize(ne,oe),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(oe.viewParameters)}static getDefaultDrawingOptions(ne){const oe=this._defaultDrawingOptions.clone();return oe.updateProperties(ne),oe}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Ze(this,ka)}}static computeTelemetryFinalData(ne){const oe=ne.get("hasDescription");return{hasAltText:oe.get(!0)??0,hasNoAltText:oe.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let ne,oe;const{_isCopy:ce}=this;if(ce&&(this._isCopy=!1,ne=this.x,oe=this.y),super.render(),this._drawId===null)if(Ze(this,El)){const{lines:ue,mustSmooth:Ae,areContours:pe,description:ve,uuid:me,heightInPage:ge}=Ze(this,El),{rawDims:{pageWidth:ye,pageHeight:xe},rotation:_e}=this.parent.viewport,$e=SignatureExtractor.processDrawnLines({lines:ue,pageWidth:ye,pageHeight:xe,rotation:_e,innerMargin:ps._INNER_MARGIN,mustSmooth:Ae,areContours:pe});this.addSignature($e,ge,ve,me)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Ze(this,ka)||""}));return ce&&(this._isCopy=!0,this._moveAfterPaste(ne,oe)),this.div}setUuid(ne){ht(this,Xc,ne),this.addEditToolbar()}getUuid(){return Ze(this,Xc)}get description(){return Ze(this,ka)}set description(ne){ht(this,ka,ne),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:ne})),super.addEditToolbar().then(oe=>{oe==null||oe.updateEditSignatureButton(ne)}))}getSignaturePreview(){const{newCurves:ne,areContours:oe,thickness:ce,width:ue,height:Ae}=Ze(this,El),pe=Math.max(ue,Ae),ve=SignatureExtractor.processDrawnLines({lines:{curves:ne.map(me=>({points:me})),thickness:ce,width:ue,height:Ae},pageWidth:pe,pageHeight:pe,rotation:0,innerMargin:0,mustSmooth:!1,areContours:oe});return{areContours:oe,outline:ve.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(ne,oe,ce,ue){const{x:Ae,y:pe}=this,{outline:ve}=ht(this,El,ne);ht(this,xl,ve instanceof ContourDrawOutline),this.description=ce;let me;Ze(this,xl)?me=ps.getDefaultDrawingOptions():(me=ps._defaultDrawnSignatureOptions.clone(),me.updateProperties({"stroke-width":ve.thickness})),this._addOutlines({drawOutlines:ve,drawingOptions:me});const[,ge]=this.pageDimensions;let ye=oe/ge;ye=ye>=1?.5:ye,this.width*=ye/this.height,this.width>=1&&(ye*=.9/this.width,this.width=.9),this.height=ye,this.setDims(),this.x=Ae,this.y=pe,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(ue),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!ue,hasDescription:!!ce}}),this.div.hidden=!1}getFromImage(ne){const{rawDims:{pageWidth:oe,pageHeight:ce},rotation:ue}=this.parent.viewport;return SignatureExtractor.process(ne,oe,ce,ue,ps._INNER_MARGIN)}getFromText(ne,oe){const{rawDims:{pageWidth:ce,pageHeight:ue},rotation:Ae}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(ne,oe,ce,ue,Ae,ps._INNER_MARGIN)}getDrawnSignature(ne){const{rawDims:{pageWidth:oe,pageHeight:ce},rotation:ue}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:ne,pageWidth:oe,pageHeight:ce,rotation:ue,innerMargin:ps._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:ne,thickness:oe}){ne?this._drawingOptions=ps.getDefaultDrawingOptions():(this._drawingOptions=ps._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":oe}))}serialize(ne=!1){if(this.isEmpty())return null;const{lines:oe,points:ce}=this.serializeDraw(ne),{_drawingOptions:{"stroke-width":ue}}=this,Ae=Object.assign(super.serialize(ne),{isSignature:!0,areContours:Ze(this,xl),color:[0,0,0],thickness:Ze(this,xl)?0:ue});return this.addComment(Ae),ne?(Ae.paths={lines:oe,points:ce},Ae.uuid=Ze(this,Xc),Ae.isCopy=!0):Ae.lines=oe,Ze(this,ka)&&(Ae.accessibilityData={type:"Figure",alt:Ze(this,ka)}),Ae}static deserializeDraw(ne,oe,ce,ue,Ae,pe){return pe.areContours?ContourDrawOutline.deserialize(ne,oe,ce,ue,Ae,pe):InkDrawOutline.deserialize(ne,oe,ce,ue,Ae,pe)}static async deserialize(ne,oe,ce){var Ae;const ue=await super.deserialize(ne,oe,ce);return ht(ue,xl,ne.areContours),ue.description=((Ae=ne.accessibilityData)==null?void 0:Ae.alt)||"",ht(ue,Xc,ne.uuid),ue}};xl=new WeakMap,ka=new WeakMap,El=new WeakMap,Xc=new WeakMap,wr(ps,"_type","signature"),wr(ps,"_editorType",AnnotationEditorType.SIGNATURE),wr(ps,"_defaultDrawingOptions",null);let SignatureEditor=ps;var ci,Di,bl,bo,wl,Of,wo,Zc,Pa,Ms,Lf,Vn,dd,hd,hp,Ap,pp,hg,gp,lv;class StampEditor extends AnnotationEditor{constructor(ne){super({...ne,name:"stampEditor"});yt(this,Vn);yt(this,ci,null);yt(this,Di,null);yt(this,bl,null);yt(this,bo,null);yt(this,wl,null);yt(this,Of,"");yt(this,wo,null);yt(this,Zc,!1);yt(this,Pa,null);yt(this,Ms,!1);yt(this,Lf,!1);ht(this,bo,ne.bitmapUrl),ht(this,wl,ne.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(ne,oe){AnnotationEditor.initialize(ne,oe)}static isHandlingMimeForPasting(ne){return SupportedImageMimeTypes.includes(ne)}static paste(ne,oe){oe.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:ne.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var ne;return{type:"stamp",hasAltText:!!((ne=this.altTextData)!=null&&ne.altText)}}static computeTelemetryFinalData(ne){const oe=ne.get("hasAltText");return{hasAltText:oe.get(!0)??0,hasNoAltText:oe.get(!1)??0}}async mlGuessAltText(ne=null,oe=!0){if(this.hasAltTextData())return null;const{mlManager:ce}=this._uiManager;if(!ce)throw new Error("No ML.");if(!await ce.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:ue,width:Ae,height:pe}=ne||this.copyCanvas(null,null,!0).imageData,ve=await ce.guess({name:"altText",request:{data:ue,width:Ae,height:pe,channels:ue.length/(Ae*pe)}});if(!ve)throw new Error("No response from the AI service.");if(ve.error)throw new Error("Error from the AI service.");if(ve.cancel)return null;if(!ve.output)throw new Error("No valid response from the AI service.");const me=ve.output;return await this.setGuessedAltText(me),oe&&!this.hasAltTextData()&&(this.altTextData={alt:me,decorative:!1}),me}remove(){var ne;Ze(this,Di)&&(ht(this,ci,null),this._uiManager.imageManager.deleteId(Ze(this,Di)),(ne=Ze(this,wo))==null||ne.remove(),ht(this,wo,null),Ze(this,Pa)&&(clearTimeout(Ze(this,Pa)),ht(this,Pa,null))),super.remove()}rebuild(){if(!this.parent){Ze(this,Di)&&bt(this,Vn,hp).call(this);return}super.rebuild(),this.div!==null&&(Ze(this,Di)&&Ze(this,wo)===null&&bt(this,Vn,hp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(ne){this._isDraggable=!0,ne&&this.div.focus()}isEmpty(){return!(Ze(this,bl)||Ze(this,ci)||Ze(this,bo)||Ze(this,wl)||Ze(this,Di)||Ze(this,Zc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let ne,oe;return this._isCopy&&(ne=this.x,oe=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Ze(this,Zc)||(Ze(this,ci)?bt(this,Vn,Ap).call(this):bt(this,Vn,hp).call(this)),this._isCopy&&this._moveAfterPaste(ne,oe),this._uiManager.addShouldRescale(this),this.div}setCanvas(ne,oe){const{id:ce,bitmap:ue}=this._uiManager.imageManager.getFromCanvas(ne,oe);oe.remove(),ce&&this._uiManager.imageManager.isValidId(ce)&&(ht(this,Di,ce),ue&&ht(this,ci,ue),ht(this,Zc,!1),bt(this,Vn,Ap).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;Ze(this,Pa)!==null&&clearTimeout(Ze(this,Pa)),ht(this,Pa,setTimeout(()=>{ht(this,Pa,null),bt(this,Vn,hg).call(this)},200))}copyCanvas(ne,oe,ce=!1){ne||(ne=224);const{width:ue,height:Ae}=Ze(this,ci),pe=new OutputScale;let ve=Ze(this,ci),me=ue,ge=Ae,ye=null;if(oe){if(ue>oe||Ae>oe){const nt=Math.min(oe/ue,oe/Ae);me=Math.floor(ue*nt),ge=Math.floor(Ae*nt)}ye=document.createElement("canvas");const _e=ye.width=Math.ceil(me*pe.sx),$e=ye.height=Math.ceil(ge*pe.sy);Ze(this,Ms)||(ve=bt(this,Vn,pp).call(this,_e,$e));const Ie=ye.getContext("2d");Ie.filter=this._uiManager.hcmFilter;let Fe="white",ke="#cfcfd8";this._uiManager.hcmFilter!=="none"?ke="black":ColorScheme.isDarkMode&&(Fe="#8f8f9d",ke="#42414d");const je=15,We=je*pe.sx,ze=je*pe.sy,Xe=new OffscreenCanvas(We*2,ze*2),Je=Xe.getContext("2d");Je.fillStyle=Fe,Je.fillRect(0,0,We*2,ze*2),Je.fillStyle=ke,Je.fillRect(0,0,We,ze),Je.fillRect(We,ze,We,ze),Ie.fillStyle=Ie.createPattern(Xe,"repeat"),Ie.fillRect(0,0,_e,$e),Ie.drawImage(ve,0,0,ve.width,ve.height,0,0,_e,$e)}let xe=null;if(ce){let _e,$e;if(pe.symmetric&&ve.width<ne&&ve.height<ne)_e=ve.width,$e=ve.height;else if(ve=Ze(this,ci),ue>ne||Ae>ne){const ke=Math.min(ne/ue,ne/Ae);_e=Math.floor(ue*ke),$e=Math.floor(Ae*ke),Ze(this,Ms)||(ve=bt(this,Vn,pp).call(this,_e,$e))}const Fe=new OffscreenCanvas(_e,$e).getContext("2d",{willReadFrequently:!0});Fe.drawImage(ve,0,0,ve.width,ve.height,0,0,_e,$e),xe={width:_e,height:$e,data:Fe.getImageData(0,0,_e,$e).data}}return{canvas:ye,width:me,height:ge,imageData:xe}}static async deserialize(ne,oe,ce){var Fe;let ue=null,Ae=!1;if(ne instanceof StampAnnotationElement){const{data:{rect:ke,rotation:je,id:We,structParent:ze,popupRef:Xe,richText:Je,contentsObj:nt,creationDate:et,modificationDate:tt},container:st,parent:{page:{pageNumber:qe}},canvas:Se}=ne;let Re,Be;Se?(delete ne.canvas,{id:Re,bitmap:Be}=ce.imageManager.getFromCanvas(st.id,Se),Se.remove()):(Ae=!0,ne._hasNoCanvas=!0);const Ne=((Fe=await oe._structTree.getAriaAttributes(`${AnnotationPrefix}${We}`))==null?void 0:Fe.get("aria-label"))||"";ue=ne={annotationType:AnnotationEditorType.STAMP,bitmapId:Re,bitmap:Be,pageIndex:qe-1,rect:ke.slice(0),rotation:je,annotationElementId:We,id:We,deleted:!1,accessibilityData:{decorative:!1,altText:Ne},isSvg:!1,structParent:ze,popupRef:Xe,richText:Je,comment:(nt==null?void 0:nt.str)||null,creationDate:et,modificationDate:tt}}const pe=await super.deserialize(ne,oe,ce),{rect:ve,bitmap:me,bitmapUrl:ge,bitmapId:ye,isSvg:xe,accessibilityData:_e}=ne;Ae?(ce.addMissingCanvas(ne.id,pe),ht(pe,Zc,!0)):ye&&ce.imageManager.isValidId(ye)?(ht(pe,Di,ye),me&&ht(pe,ci,me)):ht(pe,bo,ge),ht(pe,Ms,xe);const[$e,Ie]=pe.pageDimensions;return pe.width=(ve[2]-ve[0])/$e,pe.height=(ve[3]-ve[1])/Ie,_e&&(pe.altTextData=_e),pe._initialData=ue,ne.comment&&pe.setCommentData(ne),ht(pe,Lf,!!ue),pe}serialize(ne=!1,oe=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ce=Object.assign(super.serialize(ne),{bitmapId:Ze(this,Di),isSvg:Ze(this,Ms)});if(this.addComment(ce),ne)return ce.bitmapUrl=bt(this,Vn,gp).call(this,!0),ce.accessibilityData=this.serializeAltText(!0),ce.isCopy=!0,ce;const{decorative:ue,altText:Ae}=this.serializeAltText(!1);if(!ue&&Ae&&(ce.accessibilityData={type:"Figure",alt:Ae}),this.annotationElementId){const ve=bt(this,Vn,lv).call(this,ce);return ve.isSame?null:(ve.isSameAltText?delete ce.accessibilityData:ce.accessibilityData.structParent=this._initialData.structParent??-1,ce.id=this.annotationElementId,delete ce.bitmapId,ce)}if(oe===null)return ce;oe.stamps||(oe.stamps=new Map);const pe=Ze(this,Ms)?(ce.rect[2]-ce.rect[0])*(ce.rect[3]-ce.rect[1]):null;if(!oe.stamps.has(Ze(this,Di)))oe.stamps.set(Ze(this,Di),{area:pe,serialized:ce}),ce.bitmap=bt(this,Vn,gp).call(this,!1);else if(Ze(this,Ms)){const ve=oe.stamps.get(Ze(this,Di));pe>ve.area&&(ve.area=pe,ve.serialized.bitmap.close(),ve.serialized.bitmap=bt(this,Vn,gp).call(this,!1))}return ce}renderAnnotationElement(ne){return this.deleted?(ne.hide(),null):(ne.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}ci=new WeakMap,Di=new WeakMap,bl=new WeakMap,bo=new WeakMap,wl=new WeakMap,Of=new WeakMap,wo=new WeakMap,Zc=new WeakMap,Pa=new WeakMap,Ms=new WeakMap,Lf=new WeakMap,Vn=new WeakSet,dd=function(ne,oe=!1){if(!ne){this.remove();return}ht(this,ci,ne.bitmap),oe||(ht(this,Di,ne.id),ht(this,Ms,ne.isSvg)),ne.file&&ht(this,Of,ne.file.name),bt(this,Vn,Ap).call(this)},hd=function(){if(ht(this,bl,null),this._uiManager.enableWaiting(!1),!!Ze(this,wo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Ze(this,ci)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Ze(this,ci)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},hp=function(){if(Ze(this,Di)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Ze(this,Di)).then(ce=>bt(this,Vn,dd).call(this,ce,!0)).finally(()=>bt(this,Vn,hd).call(this));return}if(Ze(this,bo)){const ce=Ze(this,bo);ht(this,bo,null),this._uiManager.enableWaiting(!0),ht(this,bl,this._uiManager.imageManager.getFromUrl(ce).then(ue=>bt(this,Vn,dd).call(this,ue)).finally(()=>bt(this,Vn,hd).call(this)));return}if(Ze(this,wl)){const ce=Ze(this,wl);ht(this,wl,null),this._uiManager.enableWaiting(!0),ht(this,bl,this._uiManager.imageManager.getFromFile(ce).then(ue=>bt(this,Vn,dd).call(this,ue)).finally(()=>bt(this,Vn,hd).call(this)));return}const ne=document.createElement("input");ne.type="file",ne.accept=SupportedImageMimeTypes.join(",");const oe=this._uiManager._signal;ht(this,bl,new Promise(ce=>{ne.addEventListener("change",async()=>{if(!ne.files||ne.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ue=await this._uiManager.imageManager.getFromFile(ne.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),bt(this,Vn,dd).call(this,ue)}ce()},{signal:oe}),ne.addEventListener("cancel",()=>{this.remove(),ce()},{signal:oe})}).finally(()=>bt(this,Vn,hd).call(this))),ne.click()},Ap=function(){var me;const{div:ne}=this;let{width:oe,height:ce}=Ze(this,ci);const[ue,Ae]=this.pageDimensions,pe=.75;if(this.width)oe=this.width*ue,ce=this.height*Ae;else if(oe>pe*ue||ce>pe*Ae){const ge=Math.min(pe*ue/oe,pe*Ae/ce);oe*=ge,ce*=ge}this._uiManager.enableWaiting(!1);const ve=ht(this,wo,document.createElement("canvas"));ve.setAttribute("role","img"),this.addContainer(ve),this.width=oe/ue,this.height=ce/Ae,this.setDims(),(me=this._initialOptions)!=null&&me.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(ne.hidden=!1),bt(this,Vn,hg).call(this),Ze(this,Lf)||(this.parent.addUndoableEditor(this),ht(this,Lf,!0)),this._reportTelemetry({action:"inserted_image"}),Ze(this,Of)&&this.div.setAttribute("aria-description",Ze(this,Of)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},pp=function(ne,oe){const{width:ce,height:ue}=Ze(this,ci);let Ae=ce,pe=ue,ve=Ze(this,ci);for(;Ae>2*ne||pe>2*oe;){const me=Ae,ge=pe;Ae>2*ne&&(Ae=Ae>=16384?Math.floor(Ae/2)-1:Math.ceil(Ae/2)),pe>2*oe&&(pe=pe>=16384?Math.floor(pe/2)-1:Math.ceil(pe/2));const ye=new OffscreenCanvas(Ae,pe);ye.getContext("2d").drawImage(ve,0,0,me,ge,0,0,Ae,pe),ve=ye.transferToImageBitmap()}return ve},hg=function(){const[ne,oe]=this.parentDimensions,{width:ce,height:ue}=this,Ae=new OutputScale,pe=Math.ceil(ce*ne*Ae.sx),ve=Math.ceil(ue*oe*Ae.sy),me=Ze(this,wo);if(!me||me.width===pe&&me.height===ve)return;me.width=pe,me.height=ve;const ge=Ze(this,Ms)?Ze(this,ci):bt(this,Vn,pp).call(this,pe,ve),ye=me.getContext("2d");ye.filter=this._uiManager.hcmFilter,ye.drawImage(ge,0,0,ge.width,ge.height,0,0,pe,ve)},gp=function(ne){if(ne){if(Ze(this,Ms)){const ue=this._uiManager.imageManager.getSvgUrl(Ze(this,Di));if(ue)return ue}const oe=document.createElement("canvas");return{width:oe.width,height:oe.height}=Ze(this,ci),oe.getContext("2d").drawImage(Ze(this,ci),0,0),oe.toDataURL()}if(Ze(this,Ms)){const[oe,ce]=this.pageDimensions,ue=Math.round(this.width*oe*PixelsPerInch.PDF_TO_CSS_UNITS),Ae=Math.round(this.height*ce*PixelsPerInch.PDF_TO_CSS_UNITS),pe=new OffscreenCanvas(ue,Ae);return pe.getContext("2d").drawImage(Ze(this,ci),0,0,Ze(this,ci).width,Ze(this,ci).height,0,0,ue,Ae),pe.transferToImageBitmap()}return structuredClone(Ze(this,ci))},lv=function(ne){var pe;const{pageIndex:oe,accessibilityData:{altText:ce}}=this._initialData,ue=ne.pageIndex===oe,Ae=(((pe=ne.accessibilityData)==null?void 0:pe.alt)||"")===ce;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&ue&&Ae,isSameAltText:Ae}},wr(StampEditor,"_type","stamp"),wr(StampEditor,"_editorType",AnnotationEditorType.STAMP);var Jc,Ff,Cl,Sl,Co,As,_l,kf,Pf,fa,So,Oi,_o,Tl,Uf,Vr,Rl,ri,Ag,cv,ga,pg,gg,mp;const Js=class Js{constructor({uiManager:J,pageIndex:ne,div:oe,structTreeLayer:ce,accessibilityManager:ue,annotationLayer:Ae,drawLayer:pe,textLayer:ve,viewport:me,l10n:ge}){yt(this,ri);yt(this,Jc);yt(this,Ff,!1);yt(this,Cl,null);yt(this,Sl,null);yt(this,Co,null);yt(this,As,new Map);yt(this,_l,!1);yt(this,kf,!1);yt(this,Pf,!1);yt(this,fa,null);yt(this,So,null);yt(this,Oi,null);yt(this,_o,null);yt(this,Tl,null);yt(this,Uf,-1);yt(this,Vr);const ye=[...Ze(Js,Rl).values()];if(!Js._initialized){Js._initialized=!0;for(const xe of ye)xe.initialize(ge,J)}J.registerEditorTypes(ye),ht(this,Vr,J),this.pageIndex=ne,this.div=oe,ht(this,Jc,ue),ht(this,Cl,Ae),this.viewport=me,ht(this,Oi,ve),this.drawLayer=pe,this._structTree=ce,Ze(this,Vr).addLayer(this)}get isEmpty(){return Ze(this,As).size===0}get isInvisible(){return this.isEmpty&&Ze(this,Vr).getMode()===AnnotationEditorType.NONE}updateToolbar(J){Ze(this,Vr).updateToolbar(J)}updateMode(J=Ze(this,Vr).getMode()){switch(bt(this,ri,mp).call(this),J){case AnnotationEditorType.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:ne}=this.div;if(ne.toggle("nonEditing",!1),J===AnnotationEditorType.POPUP)ne.toggle("commentEditing",!0);else{ne.toggle("commentEditing",!1);for(const oe of Ze(Js,Rl).values())ne.toggle(`${oe._type}Editing`,J===oe._editorType)}this.div.hidden=!1}hasTextLayer(J){var ne;return J===((ne=Ze(this,Oi))==null?void 0:ne.div)}setEditingState(J){Ze(this,Vr).setEditingState(J)}addCommands(J){Ze(this,Vr).addCommands(J)}cleanUndoStack(J){Ze(this,Vr).cleanUndoStack(J)}toggleDrawing(J=!1){this.div.classList.toggle("drawing",!J)}togglePointerEvents(J=!1){this.div.classList.toggle("disabled",!J)}toggleAnnotationLayerPointerEvents(J=!1){var ne;(ne=Ze(this,Cl))==null||ne.div.classList.toggle("disabled",!J)}async enable(){var oe;ht(this,Pf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(oe=Ze(this,Tl))==null||oe.abort(),ht(this,Tl,null);const J=new Set;for(const ce of Ze(this,ri,Ag))ce.enableEditing(),ce.show(!0),ce.annotationElementId&&(Ze(this,Vr).removeChangedExistingAnnotation(ce),J.add(ce.annotationElementId));const ne=Ze(this,Cl);if(ne)for(const ce of ne.getEditableAnnotations()){if(ce.hide(),Ze(this,Vr).isDeletedAnnotationElement(ce.data.id)||J.has(ce.data.id))continue;const ue=await this.deserialize(ce);ue&&(this.addOrRebuild(ue),ue.enableEditing())}ht(this,Pf,!1),Ze(this,Vr)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var oe;if(ht(this,kf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),Ze(this,Oi)&&!Ze(this,Tl)){ht(this,Tl,new AbortController);const ce=Ze(this,Vr).combinedSignal(Ze(this,Tl));Ze(this,Oi).div.addEventListener("pointerdown",ue=>{const{clientX:pe,clientY:ve,timeStamp:me}=ue,ge=Ze(this,Uf);if(me-ge>500){ht(this,Uf,me);return}ht(this,Uf,-1);const{classList:ye}=this.div;ye.toggle("getElements",!0);const xe=document.elementsFromPoint(pe,ve);if(ye.toggle("getElements",!1),!this.div.contains(xe[0]))return;let _e;const $e=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const Fe of xe)if($e.test(Fe.id)){_e=Fe.id;break}if(!_e)return;const Ie=Ze(this,As).get(_e);(Ie==null?void 0:Ie.annotationElementId)===null&&(ue.stopPropagation(),ue.preventDefault(),Ie.dblclick(ue))},{signal:ce,capture:!0})}const J=Ze(this,Cl);if(J){const ce=new Map,ue=new Map;for(const pe of Ze(this,ri,Ag)){if(pe.disableEditing(),!pe.annotationElementId){pe.updateFakeAnnotationElement(J);continue}if(pe.serialize()!==null){ce.set(pe.annotationElementId,pe);continue}else ue.set(pe.annotationElementId,pe);(oe=this.getEditableAnnotation(pe.annotationElementId))==null||oe.show(),pe.remove()}const Ae=J.getEditableAnnotations();for(const pe of Ae){const{id:ve}=pe.data;if(Ze(this,Vr).isDeletedAnnotationElement(ve)){pe.updateEdited({deleted:!0});continue}let me=ue.get(ve);if(me){me.resetAnnotationElement(pe),me.show(!1),pe.show();continue}me=ce.get(ve),me&&(Ze(this,Vr).addChangedExistingAnnotation(me),me.renderAnnotationElement(pe)&&me.show(!1)),pe.show()}}bt(this,ri,mp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:ne}=this.div;for(const ce of Ze(Js,Rl).values())ne.remove(`${ce._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),ht(this,kf,!1)}getEditableAnnotation(J){var ne;return((ne=Ze(this,Cl))==null?void 0:ne.getEditableAnnotation(J))||null}setActiveEditor(J){Ze(this,Vr).getActive()!==J&&Ze(this,Vr).setActiveEditor(J)}enableTextSelection(){var J;if(this.div.tabIndex=-1,(J=Ze(this,Oi))!=null&&J.div&&!Ze(this,_o)){ht(this,_o,new AbortController);const ne=Ze(this,Vr).combinedSignal(Ze(this,_o));Ze(this,Oi).div.addEventListener("pointerdown",bt(this,ri,cv).bind(this),{signal:ne}),Ze(this,Oi).div.classList.add("highlighting")}}disableTextSelection(){var J;this.div.tabIndex=0,(J=Ze(this,Oi))!=null&&J.div&&Ze(this,_o)&&(Ze(this,_o).abort(),ht(this,_o,null),Ze(this,Oi).div.classList.remove("highlighting"))}enableClick(){if(Ze(this,Sl))return;ht(this,Sl,new AbortController);const J=Ze(this,Vr).combinedSignal(Ze(this,Sl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:J});const ne=this.pointerup.bind(this);this.div.addEventListener("pointerup",ne,{signal:J}),this.div.addEventListener("pointercancel",ne,{signal:J})}disableClick(){var J;(J=Ze(this,Sl))==null||J.abort(),ht(this,Sl,null)}attach(J){Ze(this,As).set(J.id,J);const{annotationElementId:ne}=J;ne&&Ze(this,Vr).isDeletedAnnotationElement(ne)&&Ze(this,Vr).removeDeletedAnnotationElement(J)}detach(J){var ne;Ze(this,As).delete(J.id),(ne=Ze(this,Jc))==null||ne.removePointerInTextLayer(J.contentDiv),!Ze(this,kf)&&J.annotationElementId&&Ze(this,Vr).addDeletedAnnotationElement(J)}remove(J){this.detach(J),Ze(this,Vr).removeEditor(J),J.div.remove(),J.isAttachedToDOM=!1}changeParent(J){var ne;J.parent!==this&&(J.parent&&J.annotationElementId&&(Ze(this,Vr).addDeletedAnnotationElement(J.annotationElementId),AnnotationEditor.deleteAnnotationElement(J),J.annotationElementId=null),this.attach(J),(ne=J.parent)==null||ne.detach(J),J.setParent(this),J.div&&J.isAttachedToDOM&&(J.div.remove(),this.div.append(J.div)))}add(J){if(!(J.parent===this&&J.isAttachedToDOM)){if(this.changeParent(J),Ze(this,Vr).addEditor(J),this.attach(J),!J.isAttachedToDOM){const ne=J.render();this.div.append(ne),J.isAttachedToDOM=!0}J.fixAndSetPosition(),J.onceAdded(!Ze(this,Pf)),Ze(this,Vr).addToAnnotationStorage(J),J._reportTelemetry(J.telemetryInitialData)}}moveEditorInDOM(J){var oe;if(!J.isAttachedToDOM)return;const{activeElement:ne}=document;J.div.contains(ne)&&!Ze(this,Co)&&(J._focusEventsAllowed=!1,ht(this,Co,setTimeout(()=>{ht(this,Co,null),J.div.contains(document.activeElement)?J._focusEventsAllowed=!0:(J.div.addEventListener("focusin",()=>{J._focusEventsAllowed=!0},{once:!0,signal:Ze(this,Vr)._signal}),ne.focus())},0))),J._structTreeParentId=(oe=Ze(this,Jc))==null?void 0:oe.moveElementInDOM(this.div,J.div,J.contentDiv,!0)}addOrRebuild(J){J.needsToBeRebuilt()?(J.parent||(J.parent=this),J.rebuild(),J.show()):this.add(J)}addUndoableEditor(J){const ne=()=>J._uiManager.rebuild(J),oe=()=>{J.remove()};this.addCommands({cmd:ne,undo:oe,mustExec:!1})}getEditorByUID(J){for(const ne of Ze(this,As).values())if(ne.uid===J)return ne;return null}getNextId(){return Ze(this,Vr).getId()}combinedSignal(J){return Ze(this,Vr).combinedSignal(J)}canCreateNewEmptyEditor(){var J;return(J=Ze(this,ri,ga))==null?void 0:J.canCreateNewEmptyEditor()}async pasteEditor(J,ne){this.updateToolbar(J),await Ze(this,Vr).updateMode(J.mode);const{offsetX:oe,offsetY:ce}=bt(this,ri,gg).call(this),ue=this.getNextId(),Ae=bt(this,ri,pg).call(this,{parent:this,id:ue,x:oe,y:ce,uiManager:Ze(this,Vr),isCentered:!0,...ne});Ae&&this.add(Ae)}async deserialize(J){var ne;return await((ne=Ze(Js,Rl).get(J.annotationType??J.annotationEditorType))==null?void 0:ne.deserialize(J,this,Ze(this,Vr)))||null}createAndAddNewEditor(J,ne,oe={}){const ce=this.getNextId(),ue=bt(this,ri,pg).call(this,{parent:this,id:ce,x:J.offsetX,y:J.offsetY,uiManager:Ze(this,Vr),isCentered:ne,...oe});return ue&&this.add(ue),ue}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(J={}){this.createAndAddNewEditor(bt(this,ri,gg).call(this),!0,J)}setSelected(J){Ze(this,Vr).setSelected(J)}toggleSelected(J){Ze(this,Vr).toggleSelected(J)}unselect(J){Ze(this,Vr).unselect(J)}pointerup(J){var ce;const{isMac:ne}=util_FeatureTest.platform;if(J.button!==0||J.ctrlKey&&ne||J.target!==this.div||!Ze(this,_l)||(ht(this,_l,!1),(ce=Ze(this,ri,ga))!=null&&ce.isDrawer&&Ze(this,ri,ga).supportMultipleDrawings))return;if(!Ze(this,Ff)){ht(this,Ff,!0);return}const oe=Ze(this,Vr).getMode();if(oe===AnnotationEditorType.STAMP||oe===AnnotationEditorType.SIGNATURE){Ze(this,Vr).unselectAll();return}this.createAndAddNewEditor(J,!1)}pointerdown(J){var ce;if(Ze(this,Vr).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),Ze(this,_l)){ht(this,_l,!1);return}const{isMac:ne}=util_FeatureTest.platform;if(J.button!==0||J.ctrlKey&&ne||J.target!==this.div)return;if(ht(this,_l,!0),(ce=Ze(this,ri,ga))!=null&&ce.isDrawer){this.startDrawingSession(J);return}const oe=Ze(this,Vr).getActive();ht(this,Ff,!oe||oe.isEmpty())}startDrawingSession(J){if(this.div.focus({preventScroll:!0}),Ze(this,fa)){Ze(this,ri,ga).startDrawing(this,Ze(this,Vr),!1,J);return}Ze(this,Vr).setCurrentDrawingSession(this),ht(this,fa,new AbortController);const ne=Ze(this,Vr).combinedSignal(Ze(this,fa));this.div.addEventListener("blur",({relatedTarget:oe})=>{oe&&!this.div.contains(oe)&&(ht(this,So,null),this.commitOrRemove())},{signal:ne}),Ze(this,ri,ga).startDrawing(this,Ze(this,Vr),!1,J)}pause(J){if(J){const{activeElement:ne}=document;this.div.contains(ne)&&ht(this,So,ne);return}Ze(this,So)&&setTimeout(()=>{var ne;(ne=Ze(this,So))==null||ne.focus(),ht(this,So,null)},0)}endDrawingSession(J=!1){return Ze(this,fa)?(Ze(this,Vr).setCurrentDrawingSession(null),Ze(this,fa).abort(),ht(this,fa,null),ht(this,So,null),Ze(this,ri,ga).endDrawing(J)):null}findNewParent(J,ne,oe){const ce=Ze(this,Vr).findParent(ne,oe);return ce===null||ce===this?!1:(ce.changeParent(J),!0)}commitOrRemove(){return Ze(this,fa)?(this.endDrawingSession(),!0):!1}onScaleChanging(){Ze(this,fa)&&Ze(this,ri,ga).onScaleChangingWhenDrawing(this)}destroy(){var J,ne;this.commitOrRemove(),((J=Ze(this,Vr).getActive())==null?void 0:J.parent)===this&&(Ze(this,Vr).commitOrRemove(),Ze(this,Vr).setActiveEditor(null)),Ze(this,Co)&&(clearTimeout(Ze(this,Co)),ht(this,Co,null));for(const oe of Ze(this,As).values())(ne=Ze(this,Jc))==null||ne.removePointerInTextLayer(oe.contentDiv),oe.setParent(null),oe.isAttachedToDOM=!1,oe.div.remove();this.div=null,Ze(this,As).clear(),Ze(this,Vr).removeLayer(this)}render({viewport:J}){this.viewport=J,setLayerDimensions(this.div,J);for(const ne of Ze(this,Vr).getEditors(this.pageIndex))this.add(ne),ne.rebuild();this.updateMode()}update({viewport:J}){Ze(this,Vr).commitOrRemove(),bt(this,ri,mp).call(this);const ne=this.viewport.rotation,oe=J.rotation;if(this.viewport=J,setLayerDimensions(this.div,{rotation:oe}),ne!==oe)for(const ce of Ze(this,As).values())ce.rotate(oe)}get pageDimensions(){const{pageWidth:J,pageHeight:ne}=this.viewport.rawDims;return[J,ne]}get scale(){return Ze(this,Vr).viewParameters.realScale}};Jc=new WeakMap,Ff=new WeakMap,Cl=new WeakMap,Sl=new WeakMap,Co=new WeakMap,As=new WeakMap,_l=new WeakMap,kf=new WeakMap,Pf=new WeakMap,fa=new WeakMap,So=new WeakMap,Oi=new WeakMap,_o=new WeakMap,Tl=new WeakMap,Uf=new WeakMap,Vr=new WeakMap,Rl=new WeakMap,ri=new WeakSet,Ag=function(){return Ze(this,As).size!==0?Ze(this,As).values():Ze(this,Vr).getEditors(this.pageIndex)},cv=function(J){Ze(this,Vr).unselectAll();const{target:ne}=J;if(ne===Ze(this,Oi).div||(ne.getAttribute("role")==="img"||ne.classList.contains("endOfContent"))&&Ze(this,Oi).div.contains(ne)){const{isMac:oe}=util_FeatureTest.platform;if(J.button!==0||J.ctrlKey&&oe)return;Ze(this,Vr).showAllEditors("highlight",!0,!0),Ze(this,Oi).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,Ze(this,Vr).direction==="ltr",{target:Ze(this,Oi).div,x:J.x,y:J.y}),Ze(this,Oi).div.addEventListener("pointerup",()=>{Ze(this,Oi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Ze(this,Vr)._signal}),J.preventDefault()}},ga=function(){return Ze(Js,Rl).get(Ze(this,Vr).getMode())},pg=function(J){const ne=Ze(this,ri,ga);return ne?new ne.prototype.constructor(J):null},gg=function(){const{x:J,y:ne,width:oe,height:ce}=this.boundingClientRect,ue=Math.max(0,J),Ae=Math.max(0,ne),pe=Math.min(window.innerWidth,J+oe),ve=Math.min(window.innerHeight,ne+ce),me=(ue+pe)/2-J,ge=(Ae+ve)/2-ne,[ye,xe]=this.viewport.rotation%180===0?[me,ge]:[ge,me];return{offsetX:ye,offsetY:xe}},mp=function(){for(const J of Ze(this,As).values())J.isEmpty()&&J.remove()},wr(Js,"_initialized",!1),yt(Js,Rl,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(J=>[J._editorType,J])));let AnnotationEditorLayer=Js;var da,ns,eu,zh,kp,uv,Ua,mg,fv,vg;const Ci=class Ci{constructor({pageIndex:J}){yt(this,Ua);yt(this,da,null);yt(this,ns,new Map);yt(this,eu,new Map);this.pageIndex=J}setParent(J){if(!Ze(this,da)){ht(this,da,J);return}if(Ze(this,da)!==J){if(Ze(this,ns).size>0)for(const ne of Ze(this,ns).values())ne.remove(),J.append(ne);ht(this,da,J)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(J,ne=!1,oe=!1){const ce=wi(Ci,zh)._++,ue=bt(this,Ua,mg).call(this),Ae=Ci._svgFactory.createElement("defs");ue.append(Ae);const pe=Ci._svgFactory.createElement("path");Ae.append(pe);const ve=`path_p${this.pageIndex}_${ce}`;pe.setAttribute("id",ve),pe.setAttribute("vector-effect","non-scaling-stroke"),ne&&Ze(this,eu).set(ce,pe);const me=oe?bt(this,Ua,fv).call(this,Ae,ve):null,ge=Ci._svgFactory.createElement("use");return ue.append(ge),ge.setAttribute("href",`#${ve}`),this.updateProperties(ue,J),Ze(this,ns).set(ce,ue),{id:ce,clipPathId:`url(#${me})`}}drawOutline(J,ne){const oe=wi(Ci,zh)._++,ce=bt(this,Ua,mg).call(this),ue=Ci._svgFactory.createElement("defs");ce.append(ue);const Ae=Ci._svgFactory.createElement("path");ue.append(Ae);const pe=`path_p${this.pageIndex}_${oe}`;Ae.setAttribute("id",pe),Ae.setAttribute("vector-effect","non-scaling-stroke");let ve;if(ne){const ye=Ci._svgFactory.createElement("mask");ue.append(ye),ve=`mask_p${this.pageIndex}_${oe}`,ye.setAttribute("id",ve),ye.setAttribute("maskUnits","objectBoundingBox");const xe=Ci._svgFactory.createElement("rect");ye.append(xe),xe.setAttribute("width","1"),xe.setAttribute("height","1"),xe.setAttribute("fill","white");const _e=Ci._svgFactory.createElement("use");ye.append(_e),_e.setAttribute("href",`#${pe}`),_e.setAttribute("stroke","none"),_e.setAttribute("fill","black"),_e.setAttribute("fill-rule","nonzero"),_e.classList.add("mask")}const me=Ci._svgFactory.createElement("use");ce.append(me),me.setAttribute("href",`#${pe}`),ve&&me.setAttribute("mask",`url(#${ve})`);const ge=me.cloneNode();return ce.append(ge),me.classList.add("mainOutline"),ge.classList.add("secondaryOutline"),this.updateProperties(ce,J),Ze(this,ns).set(oe,ce),oe}finalizeDraw(J,ne){Ze(this,eu).delete(J),this.updateProperties(J,ne)}updateProperties(J,ne){var ve;if(!ne)return;const{root:oe,bbox:ce,rootClass:ue,path:Ae}=ne,pe=typeof J=="number"?Ze(this,ns).get(J):J;if(pe){if(oe&&bt(this,Ua,vg).call(this,pe,oe),ce&&bt(ve=Ci,kp,uv).call(ve,pe,ce),ue){const{classList:me}=pe;for(const[ge,ye]of Object.entries(ue))me.toggle(ge,ye)}if(Ae){const ge=pe.firstChild.firstChild;bt(this,Ua,vg).call(this,ge,Ae)}}}updateParent(J,ne){if(ne===this)return;const oe=Ze(this,ns).get(J);oe&&(Ze(ne,da).append(oe),Ze(this,ns).delete(J),Ze(ne,ns).set(J,oe))}remove(J){Ze(this,eu).delete(J),Ze(this,da)!==null&&(Ze(this,ns).get(J).remove(),Ze(this,ns).delete(J))}destroy(){ht(this,da,null);for(const J of Ze(this,ns).values())J.remove();Ze(this,ns).clear(),Ze(this,eu).clear()}};da=new WeakMap,ns=new WeakMap,eu=new WeakMap,zh=new WeakMap,kp=new WeakSet,uv=function(J,[ne,oe,ce,ue]){const{style:Ae}=J;Ae.top=`${100*oe}%`,Ae.left=`${100*ne}%`,Ae.width=`${100*ce}%`,Ae.height=`${100*ue}%`},Ua=new WeakSet,mg=function(){const J=Ci._svgFactory.create(1,1,!0);return Ze(this,da).append(J),J.setAttribute("aria-hidden",!0),J},fv=function(J,ne){const oe=Ci._svgFactory.createElement("clipPath");J.append(oe);const ce=`clip_${ne}`;oe.setAttribute("id",ce),oe.setAttribute("clipPathUnits","objectBoundingBox");const ue=Ci._svgFactory.createElement("use");return oe.append(ue),ue.setAttribute("href",`#${ne}`),ue.classList.add("clip"),ce},vg=function(J,ne){for(const[oe,ce]of Object.entries(ne))ce===null?J.removeAttribute(oe):J.setAttribute(oe,ce)},yt(Ci,kp),yt(Ci,zh,0);let DrawLayer=Ci;globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,applyOpacity,build,ColorPicker,createValidAbsoluteUrl,CSSConstants,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$1,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,renderRichText,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util,VerbosityLevel,version:version$1,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,CSSConstants,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$1,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util,VerbosityLevel,XfaLayer,applyOpacity,build,createValidAbsoluteUrl,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,renderRichText,setLayerDimensions,shadow,stopEvent,updateUrlHash,version:version$1},Symbol.toStringTag,{value:"Module"}));function r(K){var J,ne,oe="";if(typeof K=="string"||typeof K=="number")oe+=K;else if(typeof K=="object")if(Array.isArray(K)){var ce=K.length;for(J=0;J<ce;J++)K[J]&&(ne=r(K[J]))&&(oe&&(oe+=" "),oe+=ne)}else for(ne in K)K[ne]&&(oe&&(oe+=" "),oe+=ne);return oe}function clsx(){for(var K,J,ne=0,oe="",ce=arguments.length;ne<ce;ne++)(K=arguments[ne])&&(J=r(K))&&(oe&&(oe+=" "),oe+=J);return oe}var has=Object.prototype.hasOwnProperty;function find$2(K,J,ne){for(ne of K.keys())if(dequal(ne,J))return ne}function dequal(K,J){var ne,oe,ce;if(K===J)return!0;if(K&&J&&(ne=K.constructor)===J.constructor){if(ne===Date)return K.getTime()===J.getTime();if(ne===RegExp)return K.toString()===J.toString();if(ne===Array){if((oe=K.length)===J.length)for(;oe--&&dequal(K[oe],J[oe]););return oe===-1}if(ne===Set){if(K.size!==J.size)return!1;for(oe of K)if(ce=oe,ce&&typeof ce=="object"&&(ce=find$2(J,ce),!ce)||!J.has(ce))return!1;return!0}if(ne===Map){if(K.size!==J.size)return!1;for(oe of K)if(ce=oe[0],ce&&typeof ce=="object"&&(ce=find$2(J,ce),!ce)||!dequal(oe[1],J.get(ce)))return!1;return!0}if(ne===ArrayBuffer)K=new Uint8Array(K),J=new Uint8Array(J);else if(ne===DataView){if((oe=K.byteLength)===J.byteLength)for(;oe--&&K.getInt8(oe)===J.getInt8(oe););return oe===-1}if(ArrayBuffer.isView(K)){if((oe=K.byteLength)===J.byteLength)for(;oe--&&K[oe]===J[oe];);return oe===-1}if(!ne||typeof K=="object"){oe=0;for(ne in K)if(has.call(K,ne)&&++oe&&!has.call(J,ne)||!(ne in J)||!dequal(K[ne],J[ne]))return!1;return Object.keys(J).length===oe}}return K!==K&&J!==J}function makeCancellablePromise(K){let J=!1;return{promise:new Promise((oe,ce)=>{K.then(ue=>!J&&oe(ue)).catch(ue=>!J&&ce(ue))}),cancel(){J=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(K,J){const ne={};for(const oe of allEvents){const ce=K[oe];ce&&(J?ne[oe]=ue=>ce(ue,J(oe)):ne[oe]=ce)}return ne}var prefix$2="Invariant failed";function invariant$1(K,J){if(!K)throw new Error(prefix$2)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),documentContext=reactExports.createContext(null),DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(J){this.pdfDocument=J}setViewer(J){this.pdfViewer=J}setExternalLinkRel(J){this.externalLinkRel=J}setExternalLinkTarget(J){this.externalLinkTarget=J}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant$1(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(J){invariant$1(this.pdfViewer),this.pdfViewer.currentPageNumber=J}get rotation(){return 0}set rotation(J){}addLinkAttributes(J,ne,oe){J.href=ne,J.rel=this.externalLinkRel||DEFAULT_LINK_REL,J.target=oe?"_blank":this.externalLinkTarget||""}goToDestination(J){return new Promise(ne=>{invariant$1(this.pdfDocument),invariant$1(J),typeof J=="string"?this.pdfDocument.getDestination(J).then(ne):Array.isArray(J)?ne(J):J.then(ne)}).then(ne=>{invariant$1(Array.isArray(ne));const oe=ne[0];new Promise(ce=>{invariant$1(this.pdfDocument),oe instanceof Object?this.pdfDocument.getPageIndex(oe).then(ue=>{ce(ue)}).catch(()=>{invariant$1(!1)}):typeof oe=="number"?ce(oe):invariant$1(!1)}).then(ce=>{const ue=ce+1;invariant$1(this.pdfViewer),invariant$1(ue>=1&&ue<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:ne,pageIndex:ce,pageNumber:ue})})})}goToPage(J){const ne=J-1;invariant$1(this.pdfViewer),invariant$1(J>=1&&J<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:ne,pageNumber:J})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(J){this.goToDestination(J)}}function Message$1({children:K,type:J}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${J}`,children:K})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function reducer$5(K,J){switch(J.type){case"RESOLVE":return{value:J.value,error:void 0};case"REJECT":return{value:!1,error:J.error};case"RESET":return{value:void 0,error:void 0};default:return K}}function useResolver(){return reactExports.useReducer(reducer$5,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined$1(K){return typeof K<"u"}function isProvided(K){return isDefined$1(K)&&K!==null}function isString(K){return typeof K=="string"}function isArrayBuffer(K){return K instanceof ArrayBuffer}function isBlob(K){return invariant$1(isBrowser),K instanceof Blob}function isDataURI(K){return isString(K)&&/^data:/.test(K)}function dataURItoByteString(K){invariant$1(isDataURI(K));const[J="",ne=""]=K.split(",");return J.split(";").indexOf("base64")!==-1?atob(ne):unescape(ne)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(K){K!=null&&K.cancel&&K.cancel()}function makePageCallback(K,J){return Object.defineProperty(K,"width",{get(){return this.view[2]*J},configurable:!0}),Object.defineProperty(K,"height",{get(){return this.view[3]*J},configurable:!0}),Object.defineProperty(K,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(K,"originalHeight",{get(){return this.view[3]},configurable:!0}),K}function isCancelException(K){return K.name==="RenderingCancelledException"}function loadFromFile(K){return new Promise((J,ne)=>{const oe=new FileReader;oe.onload=()=>{if(!oe.result)return ne(new Error("Error while reading a file."));J(oe.result)},oe.onerror=ce=>{if(!ce.target)return ne(new Error("Error while reading a file."));const{error:ue}=ce.target;if(!ue)return ne(new Error("Error while reading a file."));switch(ue.code){case ue.NOT_FOUND_ERR:return ne(new Error("Error while reading a file: File not found."));case ue.SECURITY_ERR:return ne(new Error("Error while reading a file: Security error."));case ue.ABORT_ERR:return ne(new Error("Error while reading a file: Aborted."));default:return ne(new Error("Error while reading a file."))}},oe.readAsArrayBuffer(K)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(K,J)=>{switch(J){case PasswordResponses.NEED_PASSWORD:{const ne=prompt("Enter the password to open this PDF file.");K(ne);break}case PasswordResponses.INCORRECT_PASSWORD:{const ne=prompt("Invalid password. Please try again.");K(ne);break}}};function isParameterObject(K){return typeof K=="object"&&K!==null&&("data"in K||"range"in K||"url"in K)}const Document=reactExports.forwardRef(function({children:J,className:ne,error:oe="Failed to load PDF file.",externalLinkRel:ce,externalLinkTarget:ue,file:Ae,inputRef:pe,imageResourcesPath:ve,loading:me="Loading PDF",noData:ge="No PDF file specified.",onItemClick:ye,onLoadError:xe,onLoadProgress:_e,onLoadSuccess:$e,onPassword:Ie=defaultOnPassword,onSourceError:Fe,onSourceSuccess:ke,options:je,renderMode:We,rotate:ze,scale:Xe,...Je},nt){const[et,tt]=useResolver(),{value:st,error:qe}=et,[Se,Re]=useResolver(),{value:Be,error:Ne}=Se,Ue=reactExports.useRef(new LinkService),Ge=reactExports.useRef([]),Ye=reactExports.useRef(void 0),Qe=reactExports.useRef(void 0);Ae&&Ae!==Ye.current&&isParameterObject(Ae)&&(warning$1(!dequal(Ae,Ye.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Ye.current=Ae),je&&je!==Qe.current&&(warning$1(!dequal(je,Qe.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Qe.current=je);const Te=reactExports.useRef({scrollPageIntoView:Et=>{const{dest:Ot,pageNumber:Rt,pageIndex:gt=Rt-1}=Et;if(ye){ye({dest:Ot,pageIndex:gt,pageNumber:Rt});return}const $t=Ge.current[gt];if($t){$t.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Rt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(nt,()=>({linkService:Ue,pages:Ge,viewer:Te}),[]);function Ke(){ke&&ke()}function rt(){qe&&(warning$1(!1,qe.toString()),Fe&&Fe(qe))}function it(){tt({type:"RESET"})}reactExports.useEffect(it,[Ae,tt]);const at=reactExports.useCallback(async()=>{if(!Ae)return null;if(typeof Ae=="string")return isDataURI(Ae)?{data:dataURItoByteString(Ae)}:(displayCORSWarning(),{url:Ae});if(Ae instanceof PDFDataRangeTransport)return{range:Ae};if(isArrayBuffer(Ae))return{data:Ae};if(isBrowser&&isBlob(Ae))return{data:await loadFromFile(Ae)};if(invariant$1(typeof Ae=="object"),invariant$1(isParameterObject(Ae)),"url"in Ae&&typeof Ae.url=="string"){if(isDataURI(Ae.url)){const{url:Et,...Ot}=Ae;return{data:dataURItoByteString(Et),...Ot}}displayCORSWarning()}return Ae},[Ae]);reactExports.useEffect(()=>{const Et=makeCancellablePromise(at());return Et.promise.then(Ot=>{tt({type:"RESOLVE",value:Ot})}).catch(Ot=>{tt({type:"REJECT",error:Ot})}),()=>{cancelRunningTask(Et)}},[at,tt]),reactExports.useEffect(()=>{if(!(typeof st>"u")){if(st===!1){rt();return}Ke()}},[st]);function lt(){Be&&($e&&$e(Be),Ge.current=new Array(Be.numPages),Ue.current.setDocument(Be))}function ct(){Ne&&(warning$1(!1,Ne.toString()),xe&&xe(Ne))}reactExports.useEffect(function(){Re({type:"RESET"})},[Re,st]),reactExports.useEffect(function(){if(!st)return;const Ot=je?{...st,...je}:st,Rt=getDocument(Ot);_e&&(Rt.onProgress=_e),Ie&&(Rt.onPassword=Ie);const gt=Rt,$t=gt.promise.then(pt=>{Re({type:"RESOLVE",value:pt})}).catch(pt=>{gt.destroyed||Re({type:"REJECT",error:pt})});return()=>{$t.finally(()=>gt.destroy())}},[je,Re,st]),reactExports.useEffect(()=>{if(!(typeof Be>"u")){if(Be===!1){ct();return}lt()}},[Be]),reactExports.useEffect(function(){Ue.current.setViewer(Te.current),Ue.current.setExternalLinkRel(ce),Ue.current.setExternalLinkTarget(ue)},[ce,ue]);const ot=reactExports.useCallback((Et,Ot)=>{Ge.current[Et]=Ot},[]),ft=reactExports.useCallback(Et=>{delete Ge.current[Et]},[]),dt=reactExports.useMemo(()=>({imageResourcesPath:ve,linkService:Ue.current,onItemClick:ye,pdf:Be,registerPage:ot,renderMode:We,rotate:ze,scale:Xe,unregisterPage:ft}),[ve,ye,Be,ot,We,ze,Xe,ft]),mt=reactExports.useMemo(()=>makeEventProps(Je,()=>Be),[Je,Be]);function kt(){function Et(Rt){return!!(Rt!=null&&Rt.pdf)}if(!Et(dt))throw new Error("pdf is undefined");const Ot=typeof J=="function"?J(dt):J;return jsxRuntimeExports.jsx(documentContext.Provider,{value:dt,children:Ot})}function wt(){return Ae?Be==null?jsxRuntimeExports.jsx(Message$1,{type:"loading",children:typeof me=="function"?me():me}):Be===!1?jsxRuntimeExports.jsx(Message$1,{type:"error",children:typeof oe=="function"?oe():oe}):kt():jsxRuntimeExports.jsx(Message$1,{type:"no-data",children:typeof ge=="function"?ge():ge})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",ne),ref:pe,...mt,children:wt()})}),outlineContext=reactExports.createContext(null);class Ref{constructor({num:J,gen:ne}){this.num=J,this.gen=ne}toString(){let J=`${this.num}R`;return this.gen!==0&&(J+=this.gen),J}}function useCachedValue(K){const J=reactExports.useRef(void 0),ne=J.current;return isDefined$1(ne)?()=>ne:()=>{const oe=K();return J.current=oe,oe}}function useDocumentContext(){return reactExports.useContext(documentContext)}function useOutlineContext(){return reactExports.useContext(outlineContext)}function OutlineItem(K){const J=useDocumentContext(),ne=useOutlineContext();invariant$1(ne);const oe={...J,...ne,...K},{item:ce,linkService:ue,onItemClick:Ae,pdf:pe,...ve}=oe;invariant$1(pe);const me=useCachedValue(()=>typeof ce.dest=="string"?pe.getDestination(ce.dest):ce.dest),ge=useCachedValue(async()=>{const $e=await me();if(!$e)throw new Error("Destination not found.");const[Ie]=$e;return pe.getPageIndex(new Ref(Ie))}),ye=useCachedValue(async()=>await ge()+1);function xe($e){$e.preventDefault(),invariant$1(Ae||ue),Ae?Promise.all([me(),ge(),ye()]).then(([Ie,Fe,ke])=>{Ae({dest:Ie,pageIndex:Fe,pageNumber:ke})}):ue&&ue.goToDestination(ce.dest)}function _e(){if(!ce.items||!ce.items.length)return null;const{items:$e}=ce;return jsxRuntimeExports.jsx("ul",{children:$e.map((Ie,Fe)=>jsxRuntimeExports.jsx(OutlineItem,{item:Ie,pdf:pe,...ve},typeof Ie.dest=="string"?Ie.dest:Fe))})}return jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("a",{href:"#",onClick:xe,children:ce.title}),_e()]})}function Outline(K){const ne={...useDocumentContext(),...K},{className:oe,inputRef:ce,onItemClick:ue,onLoadError:Ae,onLoadSuccess:pe,pdf:ve,...me}=ne;invariant$1(ve);const[ge,ye]=useResolver(),{value:xe,error:_e}=ge;function $e(){typeof xe>"u"||xe===!1||pe&&pe(xe)}function Ie(){_e&&(warning$1(!1,_e.toString()),Ae&&Ae(_e))}reactExports.useEffect(function(){ye({type:"RESET"})},[ye,ve]),reactExports.useEffect(function(){if(!ve)return;const ze=makeCancellablePromise(ve.getOutline()),Xe=ze;return ze.promise.then(Je=>{ye({type:"RESOLVE",value:Je})}).catch(Je=>{ye({type:"REJECT",error:Je})}),()=>cancelRunningTask(Xe)},[ye,ve]),reactExports.useEffect(()=>{if(xe!==void 0){if(xe===!1){Ie();return}$e()}},[xe]);const Fe=reactExports.useMemo(()=>({onItemClick:ue}),[ue]),ke=reactExports.useMemo(()=>makeEventProps(me,()=>xe),[me,xe]);if(!xe)return null;function je(){return xe?jsxRuntimeExports.jsx("ul",{children:xe.map((We,ze)=>jsxRuntimeExports.jsx(OutlineItem,{item:We,pdf:ve},typeof We.dest=="string"?We.dest:ze))}):null}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Outline",oe),ref:ce,...ke,children:jsxRuntimeExports.jsx(outlineContext.Provider,{value:Fe,children:je()})})}function mergeRefs(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];var ne=K.filter(Boolean);if(ne.length<=1){var oe=ne[0];return oe||null}return function(ue){for(var Ae=0,pe=ne;Ae<pe.length;Ae++){var ve=pe[Ae];typeof ve=="function"?ve(ue):ve&&(ve.current=ue)}}}const pageContext=reactExports.createContext(null);function usePageContext(){return reactExports.useContext(pageContext)}function AnnotationLayer(){const K=useDocumentContext(),J=usePageContext();invariant$1(J);const ne={...K,...J},{imageResourcesPath:oe,linkService:ce,onGetAnnotationsError:ue,onGetAnnotationsSuccess:Ae,onRenderAnnotationLayerError:pe,onRenderAnnotationLayerSuccess:ve,page:me,pdf:ge,renderForms:ye,rotate:xe,scale:_e=1}=ne;invariant$1(ge),invariant$1(me),invariant$1(ce);const[$e,Ie]=useResolver(),{value:Fe,error:ke}=$e,je=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function We(){Fe&&Ae&&Ae(Fe)}function ze(){ke&&(warning$1(!1,ke.toString()),ue&&ue(ke))}reactExports.useEffect(function(){Ie({type:"RESET"})},[Ie,me]),reactExports.useEffect(function(){if(!me)return;const tt=makeCancellablePromise(me.getAnnotations()),st=tt;return tt.promise.then(qe=>{Ie({type:"RESOLVE",value:qe})}).catch(qe=>{Ie({type:"REJECT",error:qe})}),()=>{cancelRunningTask(st)}},[Ie,me]),reactExports.useEffect(()=>{if(Fe!==void 0){if(Fe===!1){ze();return}We()}},[Fe]);function Xe(){ve&&ve()}function Je(et){warning$1(!1,`${et}`),pe&&pe(et)}const nt=reactExports.useMemo(()=>me.getViewport({scale:_e,rotation:xe}),[me,xe,_e]);return reactExports.useEffect(function(){if(!ge||!me||!ce||!Fe)return;const{current:tt}=je;if(!tt)return;const st=nt.clone({dontFlip:!0}),qe={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:ge.annotationStorage,commentManager:null,div:tt,l10n:null,linkService:ce,page:me,structTreeLayer:null,viewport:st},Se={annotations:Fe,annotationStorage:ge.annotationStorage,div:tt,imageResourcesPath:oe,linkService:ce,page:me,renderForms:ye,viewport:st};tt.innerHTML="";try{new AnnotationLayer$1(qe).render(Se),Xe()}catch(Re){Je(Re)}return()=>{}},[Fe,oe,ce,me,ge,ye,nt]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:je})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(K){return K in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(K){return"children"in K}function isStructTreeNodeWithOnlyContentChild(K){return isStructTreeNode(K)?K.children.length===1&&0 in K.children&&"id"in K.children[0]:!1}function getRoleAttributes(K){const J={};if(isStructTreeNode(K)){const{role:ne}=K,oe=ne.match(HEADING_PATTERN);if(oe)J.role="heading",J["aria-level"]=Number(oe[1]);else if(isPdfRole(ne)){const ce=PDF_ROLE_TO_HTML_ROLE[ne];ce&&(J.role=ce)}}return J}function getBaseAttributes(K){const J={};if(isStructTreeNode(K)){if(K.alt!==void 0&&(J["aria-label"]=K.alt),K.lang!==void 0&&(J.lang=K.lang),isStructTreeNodeWithOnlyContentChild(K)){const[ne]=K.children;if(ne){const oe=getBaseAttributes(ne);return{...J,...oe}}}}else"id"in K&&(J["aria-owns"]=K.id);return J}function getAttributes(K){return K?{...getRoleAttributes(K),...getBaseAttributes(K)}:null}function StructTreeItem({className:K,node:J}){const ne=reactExports.useMemo(()=>getAttributes(J),[J]),oe=reactExports.useMemo(()=>!isStructTreeNode(J)||isStructTreeNodeWithOnlyContentChild(J)?null:J.children.map((ce,ue)=>jsxRuntimeExports.jsx(StructTreeItem,{node:ce},ue)),[J]);return jsxRuntimeExports.jsx("span",{className:K,...ne,children:oe})}function StructTree(){const K=usePageContext();invariant$1(K);const{onGetStructTreeError:J,onGetStructTreeSuccess:ne}=K,[oe,ce]=useResolver(),{value:ue,error:Ae}=oe,{customTextRenderer:pe,page:ve}=K;function me(){ue&&ne&&ne(ue)}function ge(){Ae&&(warning$1(!1,Ae.toString()),J&&J(Ae))}return reactExports.useEffect(function(){ce({type:"RESET"})},[ce,ve]),reactExports.useEffect(function(){if(pe||!ve)return;const xe=makeCancellablePromise(ve.getStructTree()),_e=xe;return xe.promise.then($e=>{ce({type:"RESOLVE",value:$e})}).catch($e=>{ce({type:"REJECT",error:$e})}),()=>cancelRunningTask(_e)},[pe,ve,ce]),reactExports.useEffect(()=>{if(ue!==void 0){if(ue===!1){ge();return}me()}},[ue]),ue?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:ue}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas(K){const J=usePageContext();invariant$1(J);const ne={...J,...K},{_className:oe,canvasBackground:ce,devicePixelRatio:ue=getDevicePixelRatio(),onRenderError:Ae,onRenderSuccess:pe,page:ve,renderForms:me,renderTextLayer:ge,rotate:ye,scale:xe}=ne,{canvasRef:_e}=K;invariant$1(ve);const $e=reactExports.useRef(null);function Ie(){ve&&pe&&pe(makePageCallback(ve,xe))}function Fe(ze){isCancelException(ze)||(warning$1(!1,ze.toString()),Ae&&Ae(ze))}const ke=reactExports.useMemo(()=>ve.getViewport({scale:xe*ue,rotation:ye}),[ue,ve,ye,xe]),je=reactExports.useMemo(()=>ve.getViewport({scale:xe,rotation:ye}),[ve,ye,xe]);reactExports.useEffect(function(){if(!ve)return;ve.cleanup();const{current:Xe}=$e;if(!Xe)return;Xe.width=ke.width,Xe.height=ke.height,Xe.style.width=`${Math.floor(je.width)}px`,Xe.style.height=`${Math.floor(je.height)}px`,Xe.style.visibility="hidden";const Je={annotationMode:me?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvas:Xe,canvasContext:Xe.getContext("2d",{alpha:!1}),viewport:ke};ce&&(Je.background=ce);const nt=ve.render(Je),et=nt;return nt.promise.then(()=>{Xe.style.visibility="",Ie()}).catch(Fe),()=>cancelRunningTask(et)},[ce,ve,me,ke,je]);const We=reactExports.useCallback(()=>{const{current:ze}=$e;ze&&(ze.width=0,ze.height=0)},[]);return reactExports.useEffect(()=>We,[We]),jsxRuntimeExports.jsx("canvas",{className:`${oe}__canvas`,dir:"ltr",ref:mergeRefs(_e,$e),style:{display:"block",userSelect:"none"},children:ge?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem$1(K){return"str"in K}function TextLayer(){const K=usePageContext();invariant$1(K);const{customTextRenderer:J,onGetTextError:ne,onGetTextSuccess:oe,onRenderTextLayerError:ce,onRenderTextLayerSuccess:ue,page:Ae,pageIndex:pe,pageNumber:ve,rotate:me,scale:ge}=K;invariant$1(Ae);const[ye,xe]=useResolver(),{value:_e,error:$e}=ye,Ie=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function Fe(){_e&&oe&&oe(_e)}function ke(){$e&&(warning$1(!1,$e.toString()),ne&&ne($e))}reactExports.useEffect(function(){xe({type:"RESET"})},[Ae,xe]),reactExports.useEffect(function(){if(!Ae)return;const et=makeCancellablePromise(Ae.getTextContent()),tt=et;return et.promise.then(st=>{xe({type:"RESOLVE",value:st})}).catch(st=>{xe({type:"REJECT",error:st})}),()=>cancelRunningTask(tt)},[Ae,xe]),reactExports.useEffect(()=>{if(_e!==void 0){if(_e===!1){ke();return}Fe()}},[_e]);const je=reactExports.useCallback(()=>{ue&&ue()},[ue]),We=reactExports.useCallback(nt=>{warning$1(!1,nt.toString()),ce&&ce(nt)},[ce]);function ze(){const nt=Ie.current;nt&&nt.classList.add("selecting")}function Xe(){const nt=Ie.current;nt&&nt.classList.remove("selecting")}const Je=reactExports.useMemo(()=>Ae.getViewport({scale:ge,rotation:me}),[Ae,me,ge]);return reactExports.useLayoutEffect(function(){if(!Ae||!_e)return;const{current:et}=Ie;if(!et)return;et.innerHTML="";const tt=Ae.streamTextContent({includeMarkedContent:!0}),st={container:et,textContentSource:tt,viewport:Je},qe=new TextLayer$1(st),Se=qe;return qe.render().then(()=>{const Re=document.createElement("div");Re.className="endOfContent",et.append(Re);const Be=et.querySelectorAll('[role="presentation"]');if(J){let Ne=0;_e.items.forEach((Ue,Ge)=>{if(!isTextItem$1(Ue))return;const Ye=Be[Ne];if(!Ye)return;const Qe=J({pageIndex:pe,pageNumber:ve,itemIndex:Ge,...Ue});Ye.innerHTML=Qe,Ne+=Ue.str&&Ue.hasEOL?2:1})}je()}).catch(We),()=>cancelRunningTask(Se)},[J,We,je,Ae,pe,ve,_e,Je]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:Xe,onMouseDown:ze,ref:Ie})}const defaultScale=1;function Page(K){const ne={...useDocumentContext(),...K},{_className:oe="react-pdf__Page",_enableRegisterUnregisterPage:ce=!0,canvasBackground:ue,canvasRef:Ae,children:pe,className:ve,customRenderer:me,customTextRenderer:ge,devicePixelRatio:ye,error:xe="Failed to load the page.",height:_e,inputRef:$e,loading:Ie="Loading page",noData:Fe="No page specified.",onGetAnnotationsError:ke,onGetAnnotationsSuccess:je,onGetStructTreeError:We,onGetStructTreeSuccess:ze,onGetTextError:Xe,onGetTextSuccess:Je,onLoadError:nt,onLoadSuccess:et,onRenderAnnotationLayerError:tt,onRenderAnnotationLayerSuccess:st,onRenderError:qe,onRenderSuccess:Se,onRenderTextLayerError:Re,onRenderTextLayerSuccess:Be,pageIndex:Ne,pageNumber:Ue,pdf:Ge,registerPage:Ye,renderAnnotationLayer:Qe=!0,renderForms:Te=!1,renderMode:Ke="canvas",renderTextLayer:rt=!0,rotate:it,scale:at=defaultScale,unregisterPage:lt,width:ct,...ot}=ne,[ft,dt]=useResolver(),{value:mt,error:kt}=ft,wt=reactExports.useRef(null);invariant$1(Ge);const Et=isProvided(Ue)?Ue-1:Ne??null,Ot=Ue??(isProvided(Ne)?Ne+1:null),Rt=it??(mt?mt.rotate:null),gt=reactExports.useMemo(()=>{if(!mt)return null;let Bt=1;const It=at??defaultScale;if(ct||_e){const zt=mt.getViewport({scale:1,rotation:Rt});ct?Bt=ct/zt.width:_e&&(Bt=_e/zt.height)}return It*Bt},[_e,mt,Rt,at,ct]);reactExports.useEffect(function(){return()=>{isProvided(Et)&&ce&&lt&&lt(Et)}},[ce,Ge,Et,lt]);function $t(){if(et){if(!mt||!gt)return;et(makePageCallback(mt,gt))}if(ce&&Ye){if(!isProvided(Et)||!wt.current)return;Ye(Et,wt.current)}}function pt(){kt&&(warning$1(!1,kt.toString()),nt&&nt(kt))}reactExports.useEffect(function(){dt({type:"RESET"})},[dt,Ge,Et]),reactExports.useEffect(function(){if(!Ge||!Ot)return;const It=makeCancellablePromise(Ge.getPage(Ot)),zt=It;return It.promise.then(Pt=>{dt({type:"RESOLVE",value:Pt})}).catch(Pt=>{dt({type:"REJECT",error:Pt})}),()=>cancelRunningTask(zt)},[dt,Ge,Ot]),reactExports.useEffect(()=>{if(mt!==void 0){if(mt===!1){pt();return}$t()}},[mt,gt]);const vt=reactExports.useMemo(()=>isProvided(Et)&&Ot&&isProvided(Rt)&&isProvided(gt)?{_className:oe,canvasBackground:ue,customTextRenderer:ge,devicePixelRatio:ye,onGetAnnotationsError:ke,onGetAnnotationsSuccess:je,onGetStructTreeError:We,onGetStructTreeSuccess:ze,onGetTextError:Xe,onGetTextSuccess:Je,onRenderAnnotationLayerError:tt,onRenderAnnotationLayerSuccess:st,onRenderError:qe,onRenderSuccess:Se,onRenderTextLayerError:Re,onRenderTextLayerSuccess:Be,page:mt,pageIndex:Et,pageNumber:Ot,renderForms:Te,renderTextLayer:rt,rotate:Rt,scale:gt}:null,[oe,ue,ge,ye,ke,je,We,ze,Xe,Je,tt,st,qe,Se,Re,Be,mt,Et,Ot,Te,rt,Rt,gt]),Mt=reactExports.useMemo(()=>makeEventProps(ot,()=>mt&&(gt?makePageCallback(mt,gt):void 0)),[ot,mt,gt]),St=`${Et}@${gt}/${Rt}`;function _t(){switch(Ke){case"custom":return invariant$1(me),jsxRuntimeExports.jsx(me,{},`${St}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:Ae},`${St}_canvas`)}}function Xt(){return rt?jsxRuntimeExports.jsx(TextLayer,{},`${St}_text`):null}function Tt(){return Qe?jsxRuntimeExports.jsx(AnnotationLayer,{},`${St}_annotations`):null}function Dt(){function Bt(zt){return!!(zt!=null&&zt.page)}if(!Bt(vt))throw new Error("page is undefined");const It=typeof pe=="function"?pe(vt):pe;return jsxRuntimeExports.jsxs(pageContext.Provider,{value:vt,children:[_t(),Xt(),Tt(),It]})}function Ht(){return Ot?Ge===null||mt===void 0||mt===null?jsxRuntimeExports.jsx(Message$1,{type:"loading",children:typeof Ie=="function"?Ie():Ie}):Ge===!1||mt===!1?jsxRuntimeExports.jsx(Message$1,{type:"error",children:typeof xe=="function"?xe():xe}):Dt():jsxRuntimeExports.jsx(Message$1,{type:"no-data",children:typeof Fe=="function"?Fe():Fe})}return jsxRuntimeExports.jsx("div",{className:clsx(oe,ve),"data-page-number":Ot,ref:mergeRefs($e,wt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${gt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:ue||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Mt,children:Ht()})}function Thumbnail(K){const ne={...useDocumentContext(),...K},{className:oe,linkService:ce,onItemClick:ue,pageIndex:Ae,pageNumber:pe,pdf:ve}=ne;invariant$1(ve);const me=isProvided(pe)?pe-1:Ae??null,ge=pe??(isProvided(Ae)?Ae+1:null);function ye(Ie){Ie.preventDefault(),!(!isProvided(me)||!ge)&&(invariant$1(ue||ce),ue?ue({pageIndex:me,pageNumber:ge}):ce&&ce.goToPage(ge))}const{className:xe,onItemClick:_e,...$e}=K;return jsxRuntimeExports.jsx("a",{className:clsx("react-pdf__Thumbnail",oe),href:ge?"#":void 0,onClick:ye,children:jsxRuntimeExports.jsx(Page,{...$e,_className:"react-pdf__Thumbnail__page",_enableRegisterUnregisterPage:!1,renderAnnotationLayer:!1,renderTextLayer:!1})})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";const index$3=Object.freeze(Object.defineProperty({__proto__:null,Document,Outline,Page,PasswordResponses,Thumbnail,pdfjs,useDocumentContext,useOutlineContext,usePageContext},Symbol.toStringTag,{value:"Module"}));function throttle(K,J){let ne;const oe=()=>{ne&&(K(...ne),ne=void 0)};return(...ce)=>{const ue=!!ne;ne=ce,!ue&&setTimeout(oe,J)}}function useThrottle(K,J,ne){return reactExports.useMemo(()=>throttle(K,J),ne)}function useToggle(K=!1,J){const[ne,oe]=reactExports.useState(K),ce=reactExports.useMemo(()=>{const ue=!K;return{toggle:()=>oe(ge=>ge===K?ue:K),set:ge=>oe(ge),setLeft:()=>oe(K),setRight:()=>oe(ue)}},[]);return[ne,ce]}function useBoolean(K=!1){const[J,{toggle:ne,set:oe}]=useToggle(!!K),ce=reactExports.useMemo(()=>({toggle:ne,set:pe=>oe(!!pe),setTrue:()=>oe(!0),setFalse:()=>oe(!1)}),[]);return[J,ce]}function useDebounce(K=500){const J=reactExports.useRef(),[ne,oe]=reactExports.useState(!1);return{debounce:({fn:ue,value:Ae})=>{oe(!0),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{ue(Ae),oe(!1)},K)},isLoading:ne}}var ElementWidth=(K=>(K[K.TABS=202]="TABS",K[K.HANDLERS=200]="HANDLERS",K))(ElementWidth||{});const useElementsDimension=({elements:K=[],elementWidth:J=202,reorderOptions:ne,elementGap:oe=0})=>{const ce=reactExports.useRef(null),ue=reactExports.useRef(null),Ae=reactExports.useRef(null),[pe,ve]=reactExports.useState(-1),[me,ge]=reactExports.useState({necessaryWidths:[],dropdownWidth:0}),{debounce:ye}=useDebounce(80);reactExports.useLayoutEffect(()=>{!ce.current||!ue.current||ye({fn:()=>{if(!ce.current||!ue.current)return;const{dropdownWidth:ke,necessaryWidths:je,containerWidth:We}=getPrecalculatedWidths(ce.current,ue.current,K.length,J,Ae,oe),ze=getLastVisibleTabIndex({containerWidth:We,necessaryWidths:je,dropdownWidth:ke,elementsRef:ce});if(ne){const{activeElementIndex:Xe,isCurrentlyDragging:Je,onReorderElements:nt}=ne;ze<K.length-1&&Xe>ze&&!Je&&We&&nt(K,Xe,pe<Xe?Xe-1:pe)}ge({dropdownWidth:ke,necessaryWidths:je}),ve(ze)}})},[K.length,K,pe,ne==null?void 0:ne.activeElementIndex]);const xe=()=>{ce.current&&ye({fn:()=>{var je;if(!ce.current)return;const ke=getLastVisibleTabIndex({containerWidth:(je=ce.current)==null?void 0:je.getBoundingClientRect().width,necessaryWidths:me.necessaryWidths,dropdownWidth:me.dropdownWidth,elementsRef:ce});ke!==pe&&ve(ke)}})},{ref:_e}=useResizeObserver({onResize:xe}),$e=useMergeRefs([_e,ce]),Ie=pe===-1?[]:K.slice(0,pe+1),Fe=K.slice(pe+1);return{elementsRef:$e,dropdownRef:ue,visibleElements:Ie,hiddenElements:Fe,isDropdownButtonVisible:Fe.length>0,measurementRef:Ae}},getPrecalculatedWidths=(K,J,ne,oe,ce,ue)=>{var me,ge;const{width:Ae}=K.getBoundingClientRect(),pe=J.getBoundingClientRect().width||0;let ve=[];return(me=ce==null?void 0:ce.current)!=null&&me.children?Array.from((ge=ce.current)==null?void 0:ge.children).forEach((ye,xe)=>{const $e=ye.offsetWidth,Ie=ve.length>0?ve[xe-1]+ue:0;ve.push(Ie+$e)}):ve=Array(ne).fill(0).reduce((ye,xe,_e)=>{const Ie=oe*_e+oe;return[...ye,Ie]},[]),{dropdownWidth:pe,necessaryWidths:ve,containerWidth:Ae}},getLastVisibleTabIndex=({necessaryWidths:K,containerWidth:J,dropdownWidth:ne,elementsRef:oe})=>{if(K.length===0)return-1;if(K[K.length-1]<J-ne)return K.length-1;if(K[0]+ne>J)return-1;const ce=K.filter((ue,Ae)=>{var pe,ve;if((pe=oe.current)!=null&&pe.childNodes.length&&Ae<=((ve=oe.current)==null?void 0:ve.childNodes.length)){const me=oe.current&&oe.current.childNodes[Ae];if(me&&me.offsetLeft-oe.current.offsetLeft+me.offsetWidth<J-10)return!0;if(me&&me.offsetLeft-oe.current.offsetLeft+me.offsetWidth>=J-10)return!1}return ue<=J});return ce.length?ce.length-1:-1};function getOffsetOfPreviousViewports(K,J){return J.slice(0,K).reduce((ne,oe)=>ne+oe.height,0)}function isTextItem(K){return isObject$9(K)?["str","dir","transform","width","height","fontName","hasEOL"].every(ne=>ne in K):!1}async function getPageContent(K){return(await K.getTextContent()).items.filter(isTextItem).map(ne=>{let oe=ne.str||"";return ne.hasEOL&&(oe+=" "),oe}).join("")}function searchAllMatches(K,J){const ne=new RegExp(escapeStringRegexp(K),"ig");return Array.from(J.matchAll(ne),oe=>{const ce=oe.index||0;return{startIndex:ce,endIndex:ce+oe[0].length}})}const input$2="_input_oww37_1",styles$1x={input:input$2},PdfInputPagination=({page:K,lastPage:J,onChangePage:ne})=>{const[oe,ce]=reactExports.useState(null);reactExports.useEffect(()=>{ce(K)},[K]);const ue=()=>{if(!oe)return ce(K);const pe=oe>J,ve=oe<1;if(Number.isNaN(oe)||pe||ve)return ce(K);oe!==K&&ne(oe)},Ae=pe=>{(pe.code===KeyboardCode.Enter||pe.code===KeyboardCode.NumpadEnter)&&ue()};return jsxRuntimeExports.jsx(CF,{variant:"outlined",className:styles$1x.input,value:oe,onChange:pe=>ce(pe?Number(pe):null),onKeyDown:Ae,onBlur:ue})},container$I="_container_1d3mg_1",pagination$1="_pagination_1d3mg_7",styles$1w={container:container$I,pagination:pagination$1},PDFPagination=({currentPage:K=1,lastPage:J=1,onChangePage:ne})=>{const{t:oe}=useTranslation(),ce=reactExports.useMemo(()=>K===1,[K]),ue=reactExports.useMemo(()=>K===J,[K,J]),Ae=reactExports.useCallback(()=>{ce||ne(K-1)},[ce,K,ne]),pe=reactExports.useCallback(()=>{ue||ne(K+1)},[ue,K,ne]);return jsxRuntimeExports.jsxs("div",{className:styles$1w.container,children:[jsxRuntimeExports.jsx(mf,{title:oe("viewers.pdf.previousPage"),children:jsxRuntimeExports.jsx(rl,{type:"tertiary",iconBefore:jsxRuntimeExports.jsx(fk,{}),disabled:ce,onClick:Ae})}),jsxRuntimeExports.jsx(mf,{title:oe("viewers.pdf.nextPage"),children:jsxRuntimeExports.jsx(rl,{type:"tertiary",iconBefore:jsxRuntimeExports.jsx(Kj,{}),disabled:ue,onClick:pe})}),jsxRuntimeExports.jsxs("div",{className:styles$1w.pagination,children:[jsxRuntimeExports.jsx(PdfInputPagination,{page:K,lastPage:J,onChangePage:ne}),jsxRuntimeExports.jsx("span",{children:"/"}),jsxRuntimeExports.jsx("span",{children:J})]})]})},status="_status_pff8a_1",input$1="_input_pff8a_9",suffix="_suffix_pff8a_13",styles$1v={status,input:input$1,suffix},PdfSearchInput=reactExports.forwardRef((K,J)=>{var Ie,Fe;const{t:ne}=useTranslation(),oe=reactExports.useRef(null),{debounce:ce,isLoading:ue}=useDebounce(),Ae=(((Fe=(Ie=oe.current)==null?void 0:Ie.input)==null?void 0:Fe.value)||"").length>0,pe=K.matchedTermsSize===0,ve=K.matchedTermsSize===0,me=()=>{pe||K.onPreviousMatch()},ge=()=>{ve||K.onNextMatch()},ye=ke=>{var Xe,Je;const je=ke.code===KeyboardCode.Enter||ke.code===KeyboardCode.NumpadEnter,We=((Je=(Xe=oe.current)==null?void 0:Xe.input)==null?void 0:Je.value)||"",ze=K.matchedTermsSize>0;je&&ze&&K.onChangeSearch(We)},xe=()=>{var ke;return(ke=oe.current)==null?void 0:ke.focus()},_e=()=>{var ke;(ke=oe.current)!=null&&ke.input&&(oe.current.input.value="")};reactExports.useImperativeHandle(J,()=>({focus:xe,clear:_e}));const $e=()=>ue?jsxRuntimeExports.jsx(MF,{}):Ae?jsxRuntimeExports.jsxs("div",{className:styles$1v.status,children:[K.currentMatchedTerm," / ",K.matchedTermsSize]}):null;return jsxRuntimeExports.jsx(Ml,{ref:oe,variant:"outlined",className:styles$1v.input,placeholder:ne("viewers.pdf.placeholder")||"",onChange:ke=>ce({fn:K.onChangeSearch,value:ke}),onKeyDown:ye,prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:jsxRuntimeExports.jsxs("div",{className:styles$1v.suffix,children:[$e(),jsxRuntimeExports.jsx(mf,{title:ne("viewers.pdf.previousMatch"),children:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",disabled:pe,onClick:me,iconBefore:jsxRuntimeExports.jsx(gk,{})})}),jsxRuntimeExports.jsx(mf,{title:ne("viewers.pdf.nextMatch"),children:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",disabled:ve,onClick:ge,iconBefore:jsxRuntimeExports.jsx(vk,{})})})]})})});PdfSearchInput.displayName="PdfSearchInput";const PdfSearch=({currentMatchedTerm:K,matchedTermsSize:J,isOpen:ne,onChangeSearch:oe,onNextMatch:ce,onPreviousMatch:ue})=>{const Ae=reactExports.useRef(null);return reactExports.useEffect(()=>{Ae.current&&(ne?Ae.current.focus():(Ae.current.clear(),oe("")))},[ne]),jsxRuntimeExports.jsx(PdfSearchInput,{ref:Ae,currentMatchedTerm:K,matchedTermsSize:J,onNextMatch:ce,onPreviousMatch:ue,onChangeSearch:oe})};class PageCharIndexList{constructor(J=[]){wr(this,"charIndexes",[]);this.charIndexes=J}static createByElements(J){const ne=J.map(oe=>oe.textContent).reduce((oe,ce,ue)=>isString$3(ce)?ce.length===0?oe.concat([{char:" ",charIndexInSpan:0,spanIndex:ue}]):oe.concat(ce.split("").map((Ae,pe)=>({char:Ae,charIndexInSpan:pe,spanIndex:ue}))):oe,[]);return new PageCharIndexList(ne)}get isEmpty(){return this.charIndexes.length===0}get fullText(){return this.charIndexes.map(J=>J.char).join("")}slice(J,ne){const oe=this.charIndexes.slice(J,ne);return new PageCharIndexList(oe)}groupBySpanIndex(){return this.charIndexes.reduce((J,ne)=>({...J,[ne.spanIndex]:(J[ne.spanIndex]||[]).concat([ne])}),{})}}const removeNode=K=>{"remove"in K&&K.remove()},replaceNode=(K,J)=>{var ne;removeNode(K),(ne=J.parentNode)==null||ne.insertBefore(K,J),removeNode(J)},unwrap=K=>{const J=K.parentNode;if(!J)return;const ne=document.createRange();ne.selectNodeContents(K),replaceNode(ne.extractContents(),K),J.normalize()},isVisibleInContainer=(K,J)=>{const ne=K.getBoundingClientRect(),oe=J.getBoundingClientRect();return ne.top>=oe.top&&ne.bottom<=oe.bottom},sortHighlightByPositions=(K,J)=>K.top<J.top?-1:K.top>J.top?1:K.left<J.left?-1:K.left>J.left?1:0,updateHighlightIndexByPosition=K=>{const J=K.slice().sort(sortHighlightByPositions),ne=J.reduce((oe,ce,ue)=>Object.hasOwn(oe,ce.index)?oe:{...oe,[ce.index]:ue},{});return J.map(oe=>({...oe,index:ne[oe.index]}))},PDF_HIGHLIGHT_CLASSNAME="pdf-highlight",highlight="_highlight_89w3m_1",active$2="_active_89w3m_8",styles$1u={highlight,active:active$2},PdfHighlight=({isActive:K,index:J,left:ne,top:oe,height:ce,width:ue})=>jsxRuntimeExports.jsx("div",{"data-index":J,style:{width:ue,height:ce,left:ne,top:oe},className:cx(styles$1u.highlight,PDF_HIGHLIGHT_CLASSNAME,{[styles$1u.active]:K})}),container$H="_container_9mzfj_1",styles$1t={container:container$H},PdfHighlights=({highlights:K,activeIndex:J})=>K.length===0?null:jsxRuntimeExports.jsx("div",{className:styles$1t.container,children:K.map((ne,oe)=>jsxRuntimeExports.jsx(PdfHighlight,{isActive:ne.index===J,...ne},oe))});class CharIndexSpan{constructor(J,ne){wr(this,"charIndexes");wr(this,"elements",[]);this.charIndexes=J,this.elements=ne}toRectWithCoordinates(J){var pe;const{firstChild:ne}=this.element;if(!ne||ne.nodeType!==Node.TEXT_NODE)return null;const oe=((pe=ne.textContent)==null?void 0:pe.length)??0,{start:ce,end:ue}=this.offsets;if(ce>oe||ue+1>oe)return null;const Ae=this.createRange(ne,ce,ue+1);return this.normalizedCoordinatesByParent(J,this.getRectAndCoordinatesByRange(Ae))}normalizedCoordinatesByParent(J,ne){return{...ne,left:ne.left-J.left,top:ne.top-J.top}}getRectAndCoordinatesByRange(J){const ne=document.createElement("span");J.surroundContents(ne);const oe=ne.getBoundingClientRect(),ce={left:oe.left,top:oe.top,height:oe.height,width:oe.width};return unwrap(ne),ce}createRange(J,ne,oe){const ce=document.createRange();return ce.setStart(J,ne),ce.setEnd(J,oe),ce}get offsets(){const J=this.charIndexes[0].charIndexInSpan,ne=this.charIndexes.length===1?J:this.charIndexes[this.charIndexes.length-1].charIndexInSpan;return{start:J,end:ne}}get element(){return this.elements[this.charIndexes[0].spanIndex]}}class CharIndexList{constructor(J){wr(this,"charIndexes");this.charIndexes=J}removeSpacesBetweenWords(){return this.charIndexes=this.charIndexes.filter(J=>J.length!==1||J[0].char.trim()!==""),this}generateRectWithCoordinates(J,ne){return this.charIndexes.reduce((oe,ce)=>{const ue=new CharIndexSpan(ce,ne).toRectWithCoordinates(J);return ue&&oe.push(ue),oe},[])}}const container$G="_container_1p0n0_1",styles$1s={container:container$G},PdfPage=({shouldScroll:K,setScrolled:J,onScrollToOffset:ne,currentMatchedTerm:oe,search:ce,documentRef:ue,containerRef:Ae,pageNumber:pe})=>{const[ve,me]=reactExports.useState([]),ge=(oe==null?void 0:oe.page)===pe?oe.matchIndex:-1;reactExports.useEffect(()=>{const _e=(oe==null?void 0:oe.page)===pe,$e=ve.length===0;if(!_e||!ue.current||!Ae.current||$e||!K)return;const Ie=ue.current.querySelector(`div[data-page-number="${pe}"] .${PDF_HIGHLIGHT_CLASSNAME}[data-index="${oe.matchIndex}"]`);Ie&&!isVisibleInContainer(Ie,Ae.current)&&ne(Ie.offsetTop),J()},[oe,ve,K]);const ye=()=>me([]),xe=reactExports.useCallback(()=>{if(!ce||!ue.current){ye();return}const _e=ue.current.querySelector(`div[data-page-number="${pe}"] .textLayer`);if(!_e)return;const $e=_e.getBoundingClientRect(),Ie=Array.from((_e==null?void 0:_e.querySelectorAll('[role="presentation"]'))||[]),Fe=PageCharIndexList.createByElements(Ie);if(Fe.isEmpty)return;const ke=searchAllMatches(ce,Fe.fullText).map(je=>Fe.slice(je.startIndex,je.endIndex).groupBySpanIndex()).reduce((je,We,ze)=>{const Xe=new CharIndexList(Object.values(We)).removeSpacesBetweenWords().generateRectWithCoordinates($e,Ie).map(Je=>({...Je,index:ze}));return je.concat(Xe)},[]);me(updateHighlightIndexByPosition(ke))},[pe,ce]);return jsxRuntimeExports.jsx(Page,{className:styles$1s.page,pageNumber:pe,loading:jsxRuntimeExports.jsx(PF,{loading:!0}),onRenderTextLayerSuccess:xe,children:jsxRuntimeExports.jsx(PdfHighlights,{highlights:ve,activeIndex:ge})})};function usePDFMatches(){const[K,J]=reactExports.useState([]),[ne,oe]=reactExports.useState(0),[ce,ue]=reactExports.useReducer(xe=>xe+1,0),Ae=K.length,pe=reactExports.useMemo(()=>{const xe=K[ne-1];return xe?{...xe}:void 0},[K,ne,ce]),ve=xe=>{J(xe),oe(xe.length===0?0:1)},me=reactExports.useCallback(()=>{J([]),oe(0)},[]),ge=reactExports.useCallback((xe=!0)=>{oe(_e=>{if(Ae===0||_e===0)return _e;const $e=_e===1;return xe?$e?Ae:_e-1:$e?_e:_e-1}),ue()},[Ae]),ye=reactExports.useCallback((xe=!0)=>{oe(_e=>{if(Ae===0||_e===0)return _e;const $e=_e===Ae;return xe?$e?1:_e+1:$e?_e:_e+1}),ue()},[K.length]);return{currentMatchedTerm:pe,currentMatchedIndex:ne,matchedSize:Ae,previous:ge,next:ye,reset:me,update:ve,forceUpdateCurrentMatchedTerm:ue}}function usePDFSearch({documentRef:K,pdfRef:J}){const[ne,{toggle:oe}]=useBoolean(!1),[ce,ue]=reactExports.useState(""),{currentMatchedTerm:Ae,currentMatchedIndex:pe,matchedSize:ve,reset:me,next:ge,previous:ye,update:xe,forceUpdateCurrentMatchedTerm:_e}=usePDFMatches(),$e=reactExports.useRef([]),Ie=reactExports.useCallback(je=>{$e.current=je},[]),Fe=(je,We,ze)=>{const Xe=We+1;return searchAllMatches(ze,je).map((Je,nt)=>({...Je,page:Xe,matchIndex:nt}))},ke=reactExports.useCallback(je=>{ue(We=>{if(We===je)return ve>1?ge():_e(),je;if(!J.current)return je;if(je){let Xe=[];$e.current.forEach((Je,nt)=>{Xe=Xe.concat(Fe(Je,nt,je))}),xe(Xe)}else me();return je})},[ve]);return reactExports.useEffect(()=>{const je=We=>{(We.ctrlKey||We.metaKey)&&We.code===KeyboardCode.KeyF&&(We.preventDefault(),We.stopPropagation(),oe())};return K.current&&(K.current.setAttribute("tabIndex","-1"),K.current.addEventListener("keydown",je)),()=>{K.current&&(K.current.removeAttribute("tabIndex"),K.current.addEventListener("keydown",je))}},[]),{isShowSearch:ne,onToggleSearch:oe,search:ce,onChangeSearch:ke,onSetTextContents:Ie,currentMatchedTerm:Ae,matchedSize:ve,currentMatchedIndex:pe,onNextMatch:ge,onPreviousMatch:ye}}const document$3="_document_xuamp_1",container$F="_container_xuamp_23",pdfControlsContainer="_pdfControlsContainer_xuamp_31",pdfBlock="_pdfBlock_xuamp_38",virtualizer="_virtualizer_xuamp_45",virtualItem="_virtualItem_xuamp_50",styles$1r={document:document$3,container:container$F,pdfControlsContainer,pdfBlock,virtualizer,virtualItem};GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${version$1}/build/pdf.worker.min.mjs`;const LazyDocument=reactExports.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>index$3),[]).then(K=>({default:K.Document}))),PDFViewer=({content:K})=>{var Se;const J=reactExports.useRef(null),ne=reactExports.useRef(null),oe=reactExports.useRef(null),{isShowSearch:ce,onSetTextContents:ue,currentMatchedTerm:Ae,currentMatchedIndex:pe,matchedSize:ve,onNextMatch:me,search:ge,onChangeSearch:ye,onPreviousMatch:xe}=usePDFSearch({documentRef:J,pdfRef:oe}),_e=reactExports.useRef(new AbortController),[$e,Ie]=reactExports.useState(1),[Fe,ke]=reactExports.useState([]),je=reactExports.useMemo(()=>({cMapUrl:"cmaps/",standardFontDataUrl:"standard_fonts/"}),[]),[We,{setTrue:ze,setFalse:Xe}]=useBoolean(!1),Je=K?`data:application/pdf;base64,${K}`:"",nt=useVirtualizer({scrollPaddingStart:-5,count:Fe.length,getScrollElement:()=>ne.current,estimateSize:reactExports.useCallback(Re=>Fe[Re].height,[Fe])});reactExports.useEffect(()=>()=>{_e.current.abort("Component will unmount")},[]);const et=Re=>{oe.current=Re,_e.current=new AbortController;const{signal:Be}=_e.current,Ne=Array.from({length:Re.numPages},(Ue,Ge)=>Ge+1).map(Ue=>Re.getPage(Ue));makeCancellablePromise$1(Promise.all(Ne).then(Ue=>{const Ge=Ue.map(Qe=>Qe.getViewport({scale:1})),Ye=Ue.map(getPageContent);return Promise.all(Ye).then(Qe=>({viewports:Ge,textContents:Qe}))}).then(({viewports:Ue,textContents:Ge})=>{ke(Ue),ue(Ge)}),Be).catch(Ue=>{isAbortedPromiseError(Ue)||console.error(Ue)})},tt=useThrottle(Re=>{var Ye;const Be=Re.target.scrollTop,Ne=((Ye=ne.current)==null?void 0:Ye.offsetHeight)||0,Ue=Be+Ne/2,Ge=nt.getVirtualItemForOffset(Ue)||nt.getVirtualItems()[0];Ie(Ge.index+1)},100,[nt]),st=reactExports.useCallback(Re=>{const Be=Re-1;nt.scrollToIndex(Be,{align:"start"})},[nt]),qe=reactExports.useCallback((Re,Be)=>{const Ne=getOffsetOfPreviousViewports(Re-1,Fe);nt.scrollToOffset(Ne+Be)},[Fe,nt]);return reactExports.useEffect(()=>{if(!Ae)return;ze();const Re=Ae.page-1;nt.getVirtualItems().some(Ue=>Ue.index===Re)||st(Ae.page)},[Ae,nt]),jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PF,{loading:!0}),children:jsxRuntimeExports.jsxs(LazyDocument,{inputRef:J,className:styles$1r.document,file:Je,options:je,loading:null,onLoadSuccess:et,children:[jsxRuntimeExports.jsx("div",{className:styles$1r.container,children:jsxRuntimeExports.jsxs("div",{className:styles$1r.pdfControlsContainer,children:[jsxRuntimeExports.jsx(PDFPagination,{currentPage:$e,lastPage:(Se=oe==null?void 0:oe.current)==null?void 0:Se.numPages,onChangePage:st}),jsxRuntimeExports.jsx(PdfSearch,{currentMatchedTerm:pe,matchedTermsSize:ve,onPreviousMatch:xe,onNextMatch:me,isOpen:ce,onChangeSearch:ye})]})}),jsxRuntimeExports.jsx("div",{className:styles$1r.pdfBlock,ref:ne,onScroll:tt,children:jsxRuntimeExports.jsx("div",{className:styles$1r.virtualizer,style:{height:nt.getTotalSize()},children:nt.getVirtualItems().map(Re=>jsxRuntimeExports.jsx("div",{className:styles$1r.virtualItem,"data-virtual-index":Re.index,style:{height:Re.size,transform:`translateY(${Re.start}px)`},children:jsxRuntimeExports.jsx(PdfPage,{shouldScroll:We,setScrolled:Xe,currentMatchedTerm:Ae,documentRef:J,containerRef:ne,pageNumber:Re.index+1,search:ge,onScrollToOffset:Be=>qe(Re.index+1,Be)})},Re.key))})})]})})},errorMessage$1="_errorMessage_125hq_1",styles$1q={errorMessage:errorMessage$1},BinaryContentContainer=({FileType:K,FileBytes:J,HtmlBytes:ne,PdfBytes:oe,PngBytes:ce})=>{const{t:ue}=useTranslation();if(J||ne||oe||ce){const Ae=J??ne??oe??ce??"";return(ve=>({[BinaryContentTypesEnum.Png]:jsxRuntimeExports.jsx(ImageViewer,{content:Ae}),[BinaryContentTypesEnum.Jpg]:jsxRuntimeExports.jsx(ImageViewer,{content:Ae}),[BinaryContentTypesEnum.Html]:jsxRuntimeExports.jsx(ContentViewer,{content:Ae}),[BinaryContentTypesEnum.Plotly]:jsxRuntimeExports.jsx(PlotlyViewer,{content:Ae}),[BinaryContentTypesEnum.Pdf]:jsxRuntimeExports.jsx(PDFViewer,{content:Ae}),[BinaryContentTypesEnum.Xlsx]:jsxRuntimeExports.jsx(XlsxViewer,{content:Ae}),[BinaryContentTypesEnum.Csv]:jsxRuntimeExports.jsx(XlsxViewer,{content:Ae})})[ve]||jsxRuntimeExports.jsx("div",{className:styles$1q.errorMessage,children:ue("shared.notSupported")}))(K)}return null};var reactTable={exports:{}},reactTable_production_min={exports:{}};(function(K,J){(function(ne,oe){oe(J,reactExports)})(commonjsGlobal,function(ne,oe){function ce(ut,xt,Ct,Nt,Qt,Ut,Kt){try{var Ar=ut[Ut](Kt),gr=Ar.value}catch(xr){return void Ct(xr)}Ar.done?xt(gr):Promise.resolve(gr).then(Nt,Qt)}function ue(ut){return function(){var xt=this,Ct=arguments;return new Promise(function(Nt,Qt){var Ut=ut.apply(xt,Ct);function Kt(gr){ce(Ut,Nt,Qt,Kt,Ar,"next",gr)}function Ar(gr){ce(Ut,Nt,Qt,Kt,Ar,"throw",gr)}Kt(void 0)})}}function Ae(){return(Ae=Object.assign||function(ut){for(var xt=1;xt<arguments.length;xt++){var Ct=arguments[xt];for(var Nt in Ct)Object.prototype.hasOwnProperty.call(Ct,Nt)&&(ut[Nt]=Ct[Nt])}return ut}).apply(this,arguments)}function pe(ut,xt){if(ut==null)return{};var Ct,Nt,Qt={},Ut=Object.keys(ut);for(Nt=0;Nt<Ut.length;Nt++)Ct=Ut[Nt],xt.indexOf(Ct)>=0||(Qt[Ct]=ut[Ct]);return Qt}function ve(ut){var xt=function(Ct,Nt){if(typeof Ct!="object"||Ct===null)return Ct;var Qt=Ct[Symbol.toPrimitive];if(Qt!==void 0){var Ut=Qt.call(Ct,Nt);if(typeof Ut!="object")return Ut;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ct)}(ut,"string");return typeof xt=="symbol"?xt:String(xt)}oe=oe&&Object.prototype.hasOwnProperty.call(oe,"default")?oe.default:oe;var me={init:"init"},ge=function(ut){var xt=ut.value;return xt===void 0?"":xt},ye=function(){return oe.createElement(oe.Fragment,null,"")},xe={Cell:ge,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function _e(){for(var ut=arguments.length,xt=new Array(ut),Ct=0;Ct<ut;Ct++)xt[Ct]=arguments[Ct];return xt.reduce(function(Nt,Qt){var Ut=Qt.style,Kt=Qt.className;return Nt=Ae({},Nt,{},pe(Qt,["style","className"])),Ut&&(Nt.style=Nt.style?Ae({},Nt.style||{},{},Ut||{}):Ut),Kt&&(Nt.className=Nt.className?Nt.className+" "+Kt:Kt),Nt.className===""&&delete Nt.className,Nt},{})}var $e=function(ut,xt){return xt===void 0&&(xt={}),function(Ct){return Ct===void 0&&(Ct={}),[].concat(ut,[Ct]).reduce(function(Nt,Qt){return function Ut(Kt,Ar,gr){return typeof Ar=="function"?Ut({},Ar(Kt,gr)):Array.isArray(Ar)?_e.apply(void 0,[Kt].concat(Ar)):_e(Kt,Ar)}(Nt,Qt,Ae({},xt,{userProps:Ct}))},{})}},Ie=function(ut,xt,Ct,Nt){return Ct===void 0&&(Ct={}),ut.reduce(function(Qt,Ut){return Ut(Qt,Ct)},xt)},Fe=function(ut,xt,Ct){return Ct===void 0&&(Ct={}),ut.forEach(function(Nt){Nt(xt,Ct)})};function ke(ut,xt,Ct,Nt){ut.findIndex(function(Qt){return Qt.pluginName===Ct}),xt.forEach(function(Qt){ut.findIndex(function(Ut){return Ut.pluginName===Qt})})}function je(ut,xt){return typeof ut=="function"?ut(xt):ut}function We(ut){var xt=oe.useRef();return xt.current=ut,oe.useCallback(function(){return xt.current},[])}var ze=typeof document<"u"?oe.useLayoutEffect:oe.useEffect;function Xe(ut,xt){var Ct=oe.useRef(!1);ze(function(){Ct.current&&ut(),Ct.current=!0},xt)}function Je(ut,xt,Ct){return Ct===void 0&&(Ct={}),function(Nt,Qt){Qt===void 0&&(Qt={});var Ut=typeof Nt=="string"?xt[Nt]:Nt;if(Ut===void 0)throw console.info(xt),new Error("Renderer Error ");return nt(Ut,Ae({},ut,{column:xt},Ct,{},Qt))}}function nt(ut,xt){return function(Nt){return typeof Nt=="function"&&(Qt=Object.getPrototypeOf(Nt)).prototype&&Qt.prototype.isReactComponent;var Qt}(Ct=ut)||typeof Ct=="function"||function(Nt){return typeof Nt=="object"&&typeof Nt.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(Nt.$$typeof.description)}(Ct)?oe.createElement(ut,xt):ut;var Ct}function et(ut,xt,Ct){return Ct===void 0&&(Ct=0),ut.map(function(Nt){return st(Nt=Ae({},Nt,{parent:xt,depth:Ct})),Nt.columns&&(Nt.columns=et(Nt.columns,Nt,Ct+1)),Nt})}function tt(ut){return Ue(ut,"columns")}function st(ut){var xt=ut.id,Ct=ut.accessor,Nt=ut.Header;if(typeof Ct=="string"){xt=xt||Ct;var Qt=Ct.split(".");Ct=function(Ut){return function(Kt,Ar,gr){if(!Ar)return Kt;var xr,Rr=typeof Ar=="function"?Ar:JSON.stringify(Ar),Sr=Re.get(Rr)||function(){var Br=function(br){return function Tr(Mr,$r){if($r===void 0&&($r=[]),Array.isArray(Mr))for(var jr=0;jr<Mr.length;jr+=1)Tr(Mr[jr],$r);else $r.push(Mr);return $r}(br).map(function(Tr){return String(Tr).replace(".","_")}).join(".").replace(rt,".").replace(it,"").split(".")}(Ar);return Re.set(Rr,Br),Br}();try{xr=Sr.reduce(function(Br,br){return Br[br]},Kt)}catch{}return xr!==void 0?xr:gr}(Ut,Qt)}}if(!xt&&typeof Nt=="string"&&Nt&&(xt=Nt),!xt&&ut.columns)throw console.error(ut),new Error('A column ID (or unique "Header" value) is required!');if(!xt)throw console.error(ut),new Error("A column ID (or string accessor) is required!");return Object.assign(ut,{id:xt,accessor:Ct}),ut}function qe(ut,xt){if(!xt)throw new Error;return Object.assign(ut,Ae({Header:ye,Footer:ye},xe,{},xt,{},ut)),Object.assign(ut,{originalWidth:ut.width}),ut}function Se(ut,xt,Ct){Ct===void 0&&(Ct=function(){return{}});for(var Nt=[],Qt=ut,Ut=0,Kt=function(){return Ut++},Ar=function(){var gr={headers:[]},xr=[],Rr=Qt.some(function(Sr){return Sr.parent});Qt.forEach(function(Sr){var Br,br=[].concat(xr).reverse()[0];Rr&&(Sr.parent?Br=Ae({},Sr.parent,{originalId:Sr.parent.id,id:Sr.parent.id+"_"+Kt(),headers:[Sr]},Ct(Sr)):Br=qe(Ae({originalId:Sr.id+"_placeholder",id:Sr.id+"_placeholder_"+Kt(),placeholderOf:Sr,headers:[Sr]},Ct(Sr)),xt),br&&br.originalId===Br.originalId?br.headers.push(Sr):xr.push(Br)),gr.headers.push(Sr)}),Nt.push(gr),Qt=xr};Qt.length;)Ar();return Nt.reverse()}var Re=new Map;function Be(){for(var ut=arguments.length,xt=new Array(ut),Ct=0;Ct<ut;Ct++)xt[Ct]=arguments[Ct];for(var Nt=0;Nt<xt.length;Nt+=1)if(xt[Nt]!==void 0)return xt[Nt]}function Ne(ut){if(typeof ut=="function")return ut}function Ue(ut,xt){var Ct=[];return function Nt(Qt){Qt.forEach(function(Ut){Ut[xt]?Nt(Ut[xt]):Ct.push(Ut)})}(ut),Ct}function Ge(ut,xt){var Ct=xt.manualExpandedKey,Nt=xt.expanded,Qt=xt.expandSubRows,Ut=Qt===void 0||Qt,Kt=[];return ut.forEach(function(Ar){return function gr(xr,Rr){Rr===void 0&&(Rr=!0),xr.isExpanded=xr.original&&xr.original[Ct]||Nt[xr.id],xr.canExpand=xr.subRows&&!!xr.subRows.length,Rr&&Kt.push(xr),xr.subRows&&xr.subRows.length&&xr.isExpanded&&xr.subRows.forEach(function(Sr){return gr(Sr,Ut)})}(Ar)}),Kt}function Ye(ut,xt,Ct){return Ne(ut)||xt[ut]||Ct[ut]||Ct.text}function Qe(ut,xt,Ct){return ut?ut(xt,Ct):xt===void 0}function Te(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var Ke=null,rt=/\[/g,it=/\]/g,at=function(ut){return Ae({role:"table"},ut)},lt=function(ut){return Ae({role:"rowgroup"},ut)},ct=function(ut,xt){var Ct=xt.column;return Ae({key:"header_"+Ct.id,colSpan:Ct.totalVisibleHeaderCount,role:"columnheader"},ut)},ot=function(ut,xt){var Ct=xt.column;return Ae({key:"footer_"+Ct.id,colSpan:Ct.totalVisibleHeaderCount},ut)},ft=function(ut,xt){return Ae({key:"headerGroup_"+xt.index,role:"row"},ut)},dt=function(ut,xt){return Ae({key:"footerGroup_"+xt.index},ut)},mt=function(ut,xt){return Ae({key:"row_"+xt.row.id,role:"row"},ut)},kt=function(ut,xt){var Ct=xt.cell;return Ae({key:"cell_"+Ct.row.id+"_"+Ct.column.id,role:"cell"},ut)};function wt(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[at],getTableBodyProps:[lt],getHeaderGroupProps:[ft],getFooterGroupProps:[dt],getHeaderProps:[ct],getFooterProps:[ot],getRowProps:[mt],getCellProps:[kt],useFinalInstance:[]}}me.resetHiddenColumns="resetHiddenColumns",me.toggleHideColumn="toggleHideColumn",me.setHiddenColumns="setHiddenColumns",me.toggleHideAllColumns="toggleHideAllColumns";var Et=function(ut){ut.getToggleHiddenProps=[Ot],ut.getToggleHideAllColumnsProps=[Rt],ut.stateReducers.push(gt),ut.useInstanceBeforeDimensions.push($t),ut.headerGroupsDeps.push(function(xt,Ct){var Nt=Ct.instance;return[].concat(xt,[Nt.state.hiddenColumns])}),ut.useInstance.push(pt)};Et.pluginName="useColumnVisibility";var Ot=function(ut,xt){var Ct=xt.column;return[ut,{onChange:function(Nt){Ct.toggleHidden(!Nt.target.checked)},style:{cursor:"pointer"},checked:Ct.isVisible,title:"Toggle Column Visible"}]},Rt=function(ut,xt){var Ct=xt.instance;return[ut,{onChange:function(Nt){Ct.toggleHideAllColumns(!Nt.target.checked)},style:{cursor:"pointer"},checked:!Ct.allColumnsHidden&&!Ct.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!Ct.allColumnsHidden&&Ct.state.hiddenColumns.length}]};function gt(ut,xt,Ct,Nt){if(xt.type===me.init)return Ae({hiddenColumns:[]},ut);if(xt.type===me.resetHiddenColumns)return Ae({},ut,{hiddenColumns:Nt.initialState.hiddenColumns||[]});if(xt.type===me.toggleHideColumn){var Qt=(xt.value!==void 0?xt.value:!ut.hiddenColumns.includes(xt.columnId))?[].concat(ut.hiddenColumns,[xt.columnId]):ut.hiddenColumns.filter(function(Ut){return Ut!==xt.columnId});return Ae({},ut,{hiddenColumns:Qt})}return xt.type===me.setHiddenColumns?Ae({},ut,{hiddenColumns:je(xt.value,ut.hiddenColumns)}):xt.type===me.toggleHideAllColumns?Ae({},ut,{hiddenColumns:(xt.value!==void 0?xt.value:!ut.hiddenColumns.length)?Nt.allColumns.map(function(Ut){return Ut.id}):[]}):void 0}function $t(ut){var xt=ut.headers,Ct=ut.state.hiddenColumns;oe.useRef(!1).current;var Nt=0;xt.forEach(function(Qt){return Nt+=function Ut(Kt,Ar){Kt.isVisible=Ar&&!Ct.includes(Kt.id);var gr=0;return Kt.headers&&Kt.headers.length?Kt.headers.forEach(function(xr){return gr+=Ut(xr,Kt.isVisible)}):gr=Kt.isVisible?1:0,Kt.totalVisibleHeaderCount=gr,gr}(Qt,!0)})}function pt(ut){var xt=ut.columns,Ct=ut.flatHeaders,Nt=ut.dispatch,Qt=ut.allColumns,Ut=ut.getHooks,Kt=ut.state.hiddenColumns,Ar=ut.autoResetHiddenColumns,gr=Ar===void 0||Ar,xr=We(ut),Rr=Qt.length===Kt.length,Sr=oe.useCallback(function($r,jr){return Nt({type:me.toggleHideColumn,columnId:$r,value:jr})},[Nt]),Br=oe.useCallback(function($r){return Nt({type:me.setHiddenColumns,value:$r})},[Nt]),br=oe.useCallback(function($r){return Nt({type:me.toggleHideAllColumns,value:$r})},[Nt]),Tr=$e(Ut().getToggleHideAllColumnsProps,{instance:xr()});Ct.forEach(function($r){$r.toggleHidden=function(jr){Nt({type:me.toggleHideColumn,columnId:$r.id,value:jr})},$r.getToggleHiddenProps=$e(Ut().getToggleHiddenProps,{instance:xr(),column:$r})});var Mr=We(gr);Xe(function(){Mr()&&Nt({type:me.resetHiddenColumns})},[Nt,xt]),Object.assign(ut,{allColumnsHidden:Rr,toggleHideColumn:Sr,setHiddenColumns:Br,toggleHideAllColumns:br,getToggleHideAllColumnsProps:Tr})}var vt={},Mt={},St=function(ut,xt,Ct){return ut},_t=function(ut,xt){return ut.subRows||[]},Xt=function(ut,xt,Ct){return""+(Ct?[Ct.id,xt].join("."):xt)},Tt=function(ut){return ut};function Dt(ut){var xt=ut.initialState,Ct=xt===void 0?vt:xt,Nt=ut.defaultColumn,Qt=Nt===void 0?Mt:Nt,Ut=ut.getSubRows,Kt=Ut===void 0?_t:Ut,Ar=ut.getRowId,gr=Ar===void 0?Xt:Ar,xr=ut.stateReducer,Rr=xr===void 0?St:xr,Sr=ut.useControlledState,Br=Sr===void 0?Tt:Sr;return Ae({},pe(ut,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:Ct,defaultColumn:Qt,getSubRows:Kt,getRowId:gr,stateReducer:Rr,useControlledState:Br})}function Ht(ut,xt){xt===void 0&&(xt=0);var Ct=0,Nt=0,Qt=0,Ut=0;return ut.forEach(function(Kt){var Ar=Kt.headers;if(Kt.totalLeft=xt,Ar&&Ar.length){var gr=Ht(Ar,xt),xr=gr[0],Rr=gr[1],Sr=gr[2],Br=gr[3];Kt.totalMinWidth=xr,Kt.totalWidth=Rr,Kt.totalMaxWidth=Sr,Kt.totalFlexWidth=Br}else Kt.totalMinWidth=Kt.minWidth,Kt.totalWidth=Math.min(Math.max(Kt.minWidth,Kt.width),Kt.maxWidth),Kt.totalMaxWidth=Kt.maxWidth,Kt.totalFlexWidth=Kt.canResize?Kt.totalWidth:0;Kt.isVisible&&(xt+=Kt.totalWidth,Ct+=Kt.totalMinWidth,Nt+=Kt.totalWidth,Qt+=Kt.totalMaxWidth,Ut+=Kt.totalFlexWidth)}),[Ct,Nt,Qt,Ut]}function Bt(ut){var xt=ut.data,Ct=ut.rows,Nt=ut.flatRows,Qt=ut.rowsById,Ut=ut.column,Kt=ut.getRowId,Ar=ut.getSubRows,gr=ut.accessValueHooks,xr=ut.getInstance;xt.forEach(function(Rr,Sr){return function Br(br,Tr,Mr,$r,jr){Mr===void 0&&(Mr=0);var hn=br,Qr=Kt(br,Tr,$r),Nr=Qt[Qr];if(Nr)Nr.subRows&&Nr.originalSubRows.forEach(function(Ur,sn){return Br(Ur,sn,Mr+1,Nr)});else if((Nr={id:Qr,original:hn,index:Tr,depth:Mr,cells:[{}]}).cells.map=Te,Nr.cells.filter=Te,Nr.cells.forEach=Te,Nr.cells[0].getCellProps=Te,Nr.values={},jr.push(Nr),Nt.push(Nr),Qt[Qr]=Nr,Nr.originalSubRows=Ar(br,Tr),Nr.originalSubRows){var dn=[];Nr.originalSubRows.forEach(function(Ur,sn){return Br(Ur,sn,Mr+1,Nr,dn)}),Nr.subRows=dn}Ut.accessor&&(Nr.values[Ut.id]=Ut.accessor(br,Tr,Nr,jr,xt)),Nr.values[Ut.id]=Ie(gr,Nr.values[Ut.id],{row:Nr,column:Ut,instance:xr()})}(Rr,Sr,0,void 0,Ct)})}me.resetExpanded="resetExpanded",me.toggleRowExpanded="toggleRowExpanded",me.toggleAllRowsExpanded="toggleAllRowsExpanded";var It=function(ut){ut.getToggleAllRowsExpandedProps=[zt],ut.getToggleRowExpandedProps=[Pt],ut.stateReducers.push(Vt),ut.useInstance.push(vr),ut.prepareRow.push(qt)};It.pluginName="useExpanded";var zt=function(ut,xt){var Ct=xt.instance;return[ut,{onClick:function(Nt){Ct.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},Pt=function(ut,xt){var Ct=xt.row;return[ut,{onClick:function(){Ct.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function Vt(ut,xt,Ct,Nt){if(xt.type===me.init)return Ae({expanded:{}},ut);if(xt.type===me.resetExpanded)return Ae({},ut,{expanded:Nt.initialState.expanded||{}});if(xt.type===me.toggleAllRowsExpanded){var Qt=xt.value,Ut=Nt.rowsById,Kt=Object.keys(Ut).length===Object.keys(ut.expanded).length;if(Qt!==void 0?Qt:!Kt){var Ar={};return Object.keys(Ut).forEach(function(Tr){Ar[Tr]=!0}),Ae({},ut,{expanded:Ar})}return Ae({},ut,{expanded:{}})}if(xt.type===me.toggleRowExpanded){var gr,xr=xt.id,Rr=xt.value,Sr=ut.expanded[xr],Br=Rr!==void 0?Rr:!Sr;if(!Sr&&Br)return Ae({},ut,{expanded:Ae({},ut.expanded,(gr={},gr[xr]=!0,gr))});if(Sr&&!Br){var br=ut.expanded;return br[xr],Ae({},ut,{expanded:pe(br,[xr].map(ve))})}return ut}}function vr(ut){var xt=ut.data,Ct=ut.rows,Nt=ut.rowsById,Qt=ut.manualExpandedKey,Ut=Qt===void 0?"expanded":Qt,Kt=ut.paginateExpandedRows,Ar=Kt===void 0||Kt,gr=ut.expandSubRows,xr=gr===void 0||gr,Rr=ut.autoResetExpanded,Sr=Rr===void 0||Rr,Br=ut.getHooks,br=ut.plugins,Tr=ut.state.expanded,Mr=ut.dispatch;ke(br,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var $r=We(Sr),jr=!!(Object.keys(Nt).length&&Object.keys(Tr).length);jr&&Object.keys(Nt).some(function(Nn){return!Tr[Nn]})&&(jr=!1),Xe(function(){$r()&&Mr({type:me.resetExpanded})},[Mr,xt]);var hn=oe.useCallback(function(Nn,zr){Mr({type:me.toggleRowExpanded,id:Nn,value:zr})},[Mr]),Qr=oe.useCallback(function(Nn){return Mr({type:me.toggleAllRowsExpanded,value:Nn})},[Mr]),Nr=oe.useMemo(function(){return Ar?Ge(Ct,{manualExpandedKey:Ut,expanded:Tr,expandSubRows:xr}):Ct},[Ar,Ct,Ut,Tr,xr]),dn=oe.useMemo(function(){return function(Nn){var zr=0;return Object.keys(Nn).forEach(function(Zr){var Hn=Zr.split(".");zr=Math.max(zr,Hn.length)}),zr}(Tr)},[Tr]),Ur=We(ut),sn=$e(Br().getToggleAllRowsExpandedProps,{instance:Ur()});Object.assign(ut,{preExpandedRows:Ct,expandedRows:Nr,rows:Nr,expandedDepth:dn,isAllRowsExpanded:jr,toggleRowExpanded:hn,toggleAllRowsExpanded:Qr,getToggleAllRowsExpandedProps:sn})}function qt(ut,xt){var Ct=xt.instance.getHooks,Nt=xt.instance;ut.toggleRowExpanded=function(Qt){return Nt.toggleRowExpanded(ut.id,Qt)},ut.getToggleRowExpandedProps=$e(Ct().getToggleRowExpandedProps,{instance:Nt,row:ut})}var er=function(ut,xt,Ct){return ut=ut.filter(function(Nt){return xt.some(function(Qt){var Ut=Nt.values[Qt];return String(Ut).toLowerCase().includes(String(Ct).toLowerCase())})})};er.autoRemove=function(ut){return!ut};var yr=function(ut,xt,Ct){return ut.filter(function(Nt){return xt.some(function(Qt){var Ut=Nt.values[Qt];return Ut===void 0||String(Ut).toLowerCase()===String(Ct).toLowerCase()})})};yr.autoRemove=function(ut){return!ut};var Lt=function(ut,xt,Ct){return ut.filter(function(Nt){return xt.some(function(Qt){var Ut=Nt.values[Qt];return Ut===void 0||String(Ut)===String(Ct)})})};Lt.autoRemove=function(ut){return!ut};var jt=function(ut,xt,Ct){return ut.filter(function(Nt){return xt.some(function(Qt){return Nt.values[Qt].includes(Ct)})})};jt.autoRemove=function(ut){return!ut||!ut.length};var fr=function(ut,xt,Ct){return ut.filter(function(Nt){return xt.some(function(Qt){var Ut=Nt.values[Qt];return Ut&&Ut.length&&Ct.every(function(Kt){return Ut.includes(Kt)})})})};fr.autoRemove=function(ut){return!ut||!ut.length};var Gt=function(ut,xt,Ct){return ut.filter(function(Nt){return xt.some(function(Qt){var Ut=Nt.values[Qt];return Ut&&Ut.length&&Ct.some(function(Kt){return Ut.includes(Kt)})})})};Gt.autoRemove=function(ut){return!ut||!ut.length};var Jt=function(ut,xt,Ct){return ut.filter(function(Nt){return xt.some(function(Qt){var Ut=Nt.values[Qt];return Ct.includes(Ut)})})};Jt.autoRemove=function(ut){return!ut||!ut.length};var ar=function(ut,xt,Ct){return ut.filter(function(Nt){return xt.some(function(Qt){return Nt.values[Qt]===Ct})})};ar.autoRemove=function(ut){return ut===void 0};var Wt=function(ut,xt,Ct){return ut.filter(function(Nt){return xt.some(function(Qt){return Nt.values[Qt]==Ct})})};Wt.autoRemove=function(ut){return ut==null};var nr=function(ut,xt,Ct){var Nt=Ct||[],Qt=Nt[0],Ut=Nt[1];if((Qt=typeof Qt=="number"?Qt:-1/0)>(Ut=typeof Ut=="number"?Ut:1/0)){var Kt=Qt;Qt=Ut,Ut=Kt}return ut.filter(function(Ar){return xt.some(function(gr){var xr=Ar.values[gr];return xr>=Qt&&xr<=Ut})})};nr.autoRemove=function(ut){return!ut||typeof ut[0]!="number"&&typeof ut[1]!="number"};var Er=Object.freeze({__proto__:null,text:er,exactText:yr,exactTextCase:Lt,includes:jt,includesAll:fr,includesSome:Gt,includesValue:Jt,exact:ar,equals:Wt,between:nr});me.resetFilters="resetFilters",me.setFilter="setFilter",me.setAllFilters="setAllFilters";var Zt=function(ut){ut.stateReducers.push(ir),ut.useInstance.push(Ir)};function ir(ut,xt,Ct,Nt){if(xt.type===me.init)return Ae({filters:[]},ut);if(xt.type===me.resetFilters)return Ae({},ut,{filters:Nt.initialState.filters||[]});if(xt.type===me.setFilter){var Qt=xt.columnId,Ut=xt.filterValue,Kt=Nt.allColumns,Ar=Nt.filterTypes,gr=Kt.find(function(Mr){return Mr.id===Qt});if(!gr)throw new Error("React-Table: Could not find a column with id: "+Qt);var xr=Ye(gr.filter,Ar||{},Er),Rr=ut.filters.find(function(Mr){return Mr.id===Qt}),Sr=je(Ut,Rr&&Rr.value);return Qe(xr.autoRemove,Sr,gr)?Ae({},ut,{filters:ut.filters.filter(function(Mr){return Mr.id!==Qt})}):Ae({},ut,Rr?{filters:ut.filters.map(function(Mr){return Mr.id===Qt?{id:Qt,value:Sr}:Mr})}:{filters:[].concat(ut.filters,[{id:Qt,value:Sr}])})}if(xt.type===me.setAllFilters){var Br=xt.filters,br=Nt.allColumns,Tr=Nt.filterTypes;return Ae({},ut,{filters:je(Br,ut.filters).filter(function(Mr){var $r=br.find(function(jr){return jr.id===Mr.id});return!Qe(Ye($r.filter,Tr||{},Er).autoRemove,Mr.value,$r)})})}}function Ir(ut){var xt=ut.data,Ct=ut.rows,Nt=ut.flatRows,Qt=ut.rowsById,Ut=ut.allColumns,Kt=ut.filterTypes,Ar=ut.manualFilters,gr=ut.defaultCanFilter,xr=gr!==void 0&&gr,Rr=ut.disableFilters,Sr=ut.state.filters,Br=ut.dispatch,br=ut.autoResetFilters,Tr=br===void 0||br,Mr=oe.useCallback(function(Ur,sn){Br({type:me.setFilter,columnId:Ur,filterValue:sn})},[Br]),$r=oe.useCallback(function(Ur){Br({type:me.setAllFilters,filters:Ur})},[Br]);Ut.forEach(function(Ur){var sn=Ur.id,Nn=Ur.accessor,zr=Ur.defaultCanFilter,Zr=Ur.disableFilters;Ur.canFilter=Nn?Be(Zr!==!0&&void 0,Rr!==!0&&void 0,!0):Be(zr,xr,!1),Ur.setFilter=function(ln){return Mr(Ur.id,ln)};var Hn=Sr.find(function(ln){return ln.id===sn});Ur.filterValue=Hn&&Hn.value});var jr=oe.useMemo(function(){if(Ar||!Sr.length)return[Ct,Nt,Qt];var Ur=[],sn={};return[function Nn(zr,Zr){Zr===void 0&&(Zr=0);var Hn=zr;return(Hn=Sr.reduce(function(ln,Pn){var kn=Pn.id,zn=Pn.value,qr=Ut.find(function(fi){return fi.id===kn});if(!qr)return ln;Zr===0&&(qr.preFilteredRows=ln);var Fn=Ye(qr.filter,Kt||{},Er);return Fn?(qr.filteredRows=Fn(ln,[kn],zn),qr.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+qr.id+"."),ln)},zr)).forEach(function(ln){Ur.push(ln),sn[ln.id]=ln,ln.subRows&&(ln.subRows=ln.subRows&&ln.subRows.length>0?Nn(ln.subRows,Zr+1):ln.subRows)}),Hn}(Ct),Ur,sn]},[Ar,Sr,Ct,Nt,Qt,Ut,Kt]),hn=jr[0],Qr=jr[1],Nr=jr[2];oe.useMemo(function(){Ut.filter(function(Ur){return!Sr.find(function(sn){return sn.id===Ur.id})}).forEach(function(Ur){Ur.preFilteredRows=hn,Ur.filteredRows=hn})},[hn,Sr,Ut]);var dn=We(Tr);Xe(function(){dn()&&Br({type:me.resetFilters})},[Br,Ar?null:xt]),Object.assign(ut,{preFilteredRows:Ct,preFilteredFlatRows:Nt,preFilteredRowsById:Qt,filteredRows:hn,filteredFlatRows:Qr,filteredRowsById:Nr,rows:hn,flatRows:Qr,rowsById:Nr,setFilter:Mr,setAllFilters:$r})}Zt.pluginName="useFilters",me.resetGlobalFilter="resetGlobalFilter",me.setGlobalFilter="setGlobalFilter";var tr=function(ut){ut.stateReducers.push(cr),ut.useInstance.push(Or)};function cr(ut,xt,Ct,Nt){if(xt.type===me.resetGlobalFilter)return Ae({},ut,{globalFilter:Nt.initialState.globalFilter||void 0});if(xt.type===me.setGlobalFilter){var Qt=xt.filterValue,Ut=Nt.userFilterTypes,Kt=Ye(Nt.globalFilter,Ut||{},Er),Ar=je(Qt,ut.globalFilter);return Qe(Kt.autoRemove,Ar)?(ut.globalFilter,pe(ut,["globalFilter"])):Ae({},ut,{globalFilter:Ar})}}function Or(ut){var xt=ut.data,Ct=ut.rows,Nt=ut.flatRows,Qt=ut.rowsById,Ut=ut.allColumns,Kt=ut.filterTypes,Ar=ut.globalFilter,gr=ut.manualGlobalFilter,xr=ut.state.globalFilter,Rr=ut.dispatch,Sr=ut.autoResetGlobalFilter,Br=Sr===void 0||Sr,br=ut.disableGlobalFilter,Tr=oe.useCallback(function(Nr){Rr({type:me.setGlobalFilter,filterValue:Nr})},[Rr]),Mr=oe.useMemo(function(){if(gr||xr===void 0)return[Ct,Nt,Qt];var Nr=[],dn={},Ur=Ye(Ar,Kt||{},Er);if(!Ur)return console.warn("Could not find a valid 'globalFilter' option."),Ct;Ut.forEach(function(Nn){var zr=Nn.disableGlobalFilter;Nn.canFilter=Be(zr!==!0&&void 0,br!==!0&&void 0,!0)});var sn=Ut.filter(function(Nn){return Nn.canFilter===!0});return[function Nn(zr){return(zr=Ur(zr,sn.map(function(Zr){return Zr.id}),xr)).forEach(function(Zr){Nr.push(Zr),dn[Zr.id]=Zr,Zr.subRows=Zr.subRows&&Zr.subRows.length?Nn(Zr.subRows):Zr.subRows}),zr}(Ct),Nr,dn]},[gr,xr,Ar,Kt,Ut,Ct,Nt,Qt,br]),$r=Mr[0],jr=Mr[1],hn=Mr[2],Qr=We(Br);Xe(function(){Qr()&&Rr({type:me.resetGlobalFilter})},[Rr,gr?null:xt]),Object.assign(ut,{preGlobalFilteredRows:Ct,preGlobalFilteredFlatRows:Nt,preGlobalFilteredRowsById:Qt,globalFilteredRows:$r,globalFilteredFlatRows:jr,globalFilteredRowsById:hn,rows:$r,flatRows:jr,rowsById:hn,setGlobalFilter:Tr,disableGlobalFilter:br})}function sr(ut,xt){return xt.reduce(function(Ct,Nt){return Ct+(typeof Nt=="number"?Nt:0)},0)}tr.pluginName="useGlobalFilter";var dr=Object.freeze({__proto__:null,sum:sr,min:function(ut){var xt=ut[0]||0;return ut.forEach(function(Ct){typeof Ct=="number"&&(xt=Math.min(xt,Ct))}),xt},max:function(ut){var xt=ut[0]||0;return ut.forEach(function(Ct){typeof Ct=="number"&&(xt=Math.max(xt,Ct))}),xt},minMax:function(ut){var xt=ut[0]||0,Ct=ut[0]||0;return ut.forEach(function(Nt){typeof Nt=="number"&&(xt=Math.min(xt,Nt),Ct=Math.max(Ct,Nt))}),xt+".."+Ct},average:function(ut){return sr(0,ut)/ut.length},median:function(ut){if(!ut.length)return null;var xt=Math.floor(ut.length/2),Ct=[].concat(ut).sort(function(Nt,Qt){return Nt-Qt});return ut.length%2!=0?Ct[xt]:(Ct[xt-1]+Ct[xt])/2},unique:function(ut){return Array.from(new Set(ut).values())},uniqueCount:function(ut){return new Set(ut).size},count:function(ut){return ut.length}}),Dr=[],lr={};me.resetGroupBy="resetGroupBy",me.setGroupBy="setGroupBy",me.toggleGroupBy="toggleGroupBy";var hr=function(ut){ut.getGroupByToggleProps=[Yr],ut.stateReducers.push(ur),ut.visibleColumnsDeps.push(function(xt,Ct){var Nt=Ct.instance;return[].concat(xt,[Nt.state.groupBy])}),ut.visibleColumns.push(pr),ut.useInstance.push(Yt),ut.prepareRow.push(or)};hr.pluginName="useGroupBy";var Yr=function(ut,xt){var Ct=xt.header;return[ut,{onClick:Ct.canGroupBy?function(Nt){Nt.persist(),Ct.toggleGroupBy()}:void 0,style:{cursor:Ct.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function ur(ut,xt,Ct,Nt){if(xt.type===me.init)return Ae({groupBy:[]},ut);if(xt.type===me.resetGroupBy)return Ae({},ut,{groupBy:Nt.initialState.groupBy||[]});if(xt.type===me.setGroupBy)return Ae({},ut,{groupBy:xt.value});if(xt.type===me.toggleGroupBy){var Qt=xt.columnId,Ut=xt.value,Kt=Ut!==void 0?Ut:!ut.groupBy.includes(Qt);return Ae({},ut,Kt?{groupBy:[].concat(ut.groupBy,[Qt])}:{groupBy:ut.groupBy.filter(function(Ar){return Ar!==Qt})})}}function pr(ut,xt){var Ct=xt.instance.state.groupBy,Nt=Ct.map(function(Ut){return ut.find(function(Kt){return Kt.id===Ut})}).filter(Boolean),Qt=ut.filter(function(Ut){return!Ct.includes(Ut.id)});return(ut=[].concat(Nt,Qt)).forEach(function(Ut){Ut.isGrouped=Ct.includes(Ut.id),Ut.groupedIndex=Ct.indexOf(Ut.id)}),ut}var Jr={};function Yt(ut){var xt=ut.data,Ct=ut.rows,Nt=ut.flatRows,Qt=ut.rowsById,Ut=ut.allColumns,Kt=ut.flatHeaders,Ar=ut.groupByFn,gr=Ar===void 0?Fr:Ar,xr=ut.manualGroupBy,Rr=ut.aggregations,Sr=Rr===void 0?Jr:Rr,Br=ut.plugins,br=ut.state.groupBy,Tr=ut.dispatch,Mr=ut.autoResetGroupBy,$r=Mr===void 0||Mr,jr=ut.disableGroupBy,hn=ut.defaultCanGroupBy,Qr=ut.getHooks;ke(Br,["useColumnOrder","useFilters"],"useGroupBy");var Nr=We(ut);Ut.forEach(function(qr){var Fn=qr.accessor,fi=qr.defaultGroupBy,Xi=qr.disableGroupBy;qr.canGroupBy=Fn?Be(qr.canGroupBy,Xi!==!0&&void 0,jr!==!0&&void 0,!0):Be(qr.canGroupBy,fi,hn,!1),qr.canGroupBy&&(qr.toggleGroupBy=function(){return ut.toggleGroupBy(qr.id)}),qr.Aggregated=qr.Aggregated||qr.Cell});var dn=oe.useCallback(function(qr,Fn){Tr({type:me.toggleGroupBy,columnId:qr,value:Fn})},[Tr]),Ur=oe.useCallback(function(qr){Tr({type:me.setGroupBy,value:qr})},[Tr]);Kt.forEach(function(qr){qr.getGroupByToggleProps=$e(Qr().getGroupByToggleProps,{instance:Nr(),header:qr})});var sn=oe.useMemo(function(){if(xr||!br.length)return[Ct,Nt,Qt,Dr,lr,Nt,Qt];var qr=br.filter(function(Ri){return Ut.find(function($o){return $o.id===Ri})}),Fn=[],fi={},Xi=[],Wr={},ai=[],yi={},Zi=function Ri($o,Ha,Cg){if(Ha===void 0&&(Ha=0),Ha===qr.length)return $o.map(function(oA){return Ae({},oA,{depth:Ha})});var l0=qr[Ha],dv=gr($o,l0);return Object.entries(dv).map(function(oA,hv){var Sg=oA[0],lA=oA[1],cA=l0+":"+Sg,Tg=Ri(lA,Ha+1,cA=Cg?Cg+">"+cA:cA),Rg=Ha?Ue(lA,"leafRows"):lA,Av=function(Os,c0,gv){var uA={};return Ut.forEach(function(xi){if(qr.includes(xi.id))uA[xi.id]=c0[0]?c0[0].values[xi.id]:null;else{var Bg=typeof xi.aggregate=="function"?xi.aggregate:Sr[xi.aggregate]||dr[xi.aggregate];if(Bg){var mv=c0.map(function(fA){return fA.values[xi.id]}),yv=Os.map(function(fA){var u0=fA.values[xi.id];if(!gv&&xi.aggregateValue){var Ig=typeof xi.aggregateValue=="function"?xi.aggregateValue:Sr[xi.aggregateValue]||dr[xi.aggregateValue];if(!Ig)throw console.info({column:xi}),new Error("React Table: Invalid column.aggregateValue option for column listed above");u0=Ig(u0,fA,xi)}return u0});uA[xi.id]=Bg(yv,mv)}else{if(xi.aggregate)throw console.info({column:xi}),new Error("React Table: Invalid column.aggregate option for column listed above");uA[xi.id]=null}}}),uA}(Rg,lA,Ha),pv={id:cA,isGrouped:!0,groupByID:l0,groupByVal:Sg,values:Av,subRows:Tg,leafRows:Rg,depth:Ha,index:hv};return Tg.forEach(function(Os){Fn.push(Os),fi[Os.id]=Os,Os.isGrouped?(Xi.push(Os),Wr[Os.id]=Os):(ai.push(Os),yi[Os.id]=Os)}),pv})}(Ct);return Zi.forEach(function(Ri){Fn.push(Ri),fi[Ri.id]=Ri,Ri.isGrouped?(Xi.push(Ri),Wr[Ri.id]=Ri):(ai.push(Ri),yi[Ri.id]=Ri)}),[Zi,Fn,fi,Xi,Wr,ai,yi]},[xr,br,Ct,Nt,Qt,Ut,Sr,gr]),Nn=sn[0],zr=sn[1],Zr=sn[2],Hn=sn[3],ln=sn[4],Pn=sn[5],kn=sn[6],zn=We($r);Xe(function(){zn()&&Tr({type:me.resetGroupBy})},[Tr,xr?null:xt]),Object.assign(ut,{preGroupedRows:Ct,preGroupedFlatRow:Nt,preGroupedRowsById:Qt,groupedRows:Nn,groupedFlatRows:zr,groupedRowsById:Zr,onlyGroupedFlatRows:Hn,onlyGroupedRowsById:ln,nonGroupedFlatRows:Pn,nonGroupedRowsById:kn,rows:Nn,flatRows:zr,rowsById:Zr,toggleGroupBy:dn,setGroupBy:Ur})}function or(ut){ut.allCells.forEach(function(xt){var Ct;xt.isGrouped=xt.column.isGrouped&&xt.column.id===ut.groupByID,xt.isPlaceholder=!xt.isGrouped&&xt.column.isGrouped,xt.isAggregated=!xt.isGrouped&&!xt.isPlaceholder&&((Ct=ut.subRows)==null?void 0:Ct.length)})}function Fr(ut,xt){return ut.reduce(function(Ct,Nt,Qt){var Ut=""+Nt.values[xt];return Ct[Ut]=Array.isArray(Ct[Ut])?Ct[Ut]:[],Ct[Ut].push(Nt),Ct},{})}var kr=/([0-9]+)/gm;function Kr(ut,xt){return ut===xt?0:ut>xt?1:-1}function cn(ut,xt,Ct){return[ut.values[Ct],xt.values[Ct]]}function An(ut){return typeof ut=="number"?isNaN(ut)||ut===1/0||ut===-1/0?"":String(ut):typeof ut=="string"?ut:""}var _n=Object.freeze({__proto__:null,alphanumeric:function(ut,xt,Ct){var Nt=cn(ut,xt,Ct),Qt=Nt[0],Ut=Nt[1];for(Qt=An(Qt),Ut=An(Ut),Qt=Qt.split(kr).filter(Boolean),Ut=Ut.split(kr).filter(Boolean);Qt.length&&Ut.length;){var Kt=Qt.shift(),Ar=Ut.shift(),gr=parseInt(Kt,10),xr=parseInt(Ar,10),Rr=[gr,xr].sort();if(isNaN(Rr[0])){if(Kt>Ar)return 1;if(Ar>Kt)return-1}else{if(isNaN(Rr[1]))return isNaN(gr)?-1:1;if(gr>xr)return 1;if(xr>gr)return-1}}return Qt.length-Ut.length},datetime:function(ut,xt,Ct){var Nt=cn(ut,xt,Ct),Qt=Nt[0],Ut=Nt[1];return Kr(Qt=Qt.getTime(),Ut=Ut.getTime())},basic:function(ut,xt,Ct){var Nt=cn(ut,xt,Ct);return Kr(Nt[0],Nt[1])},string:function(ut,xt,Ct){var Nt=cn(ut,xt,Ct),Qt=Nt[0],Ut=Nt[1];for(Qt=Qt.split("").filter(Boolean),Ut=Ut.split("").filter(Boolean);Qt.length&&Ut.length;){var Kt=Qt.shift(),Ar=Ut.shift(),gr=Kt.toLowerCase(),xr=Ar.toLowerCase();if(gr>xr)return 1;if(xr>gr)return-1;if(Kt>Ar)return 1;if(Ar>Kt)return-1}return Qt.length-Ut.length},number:function(ut,xt,Ct){var Nt=cn(ut,xt,Ct),Qt=Nt[0],Ut=Nt[1],Kt=/[^0-9.]/gi;return Kr(Qt=Number(String(Qt).replace(Kt,"")),Ut=Number(String(Ut).replace(Kt,"")))}});me.resetSortBy="resetSortBy",me.setSortBy="setSortBy",me.toggleSortBy="toggleSortBy",me.clearSortBy="clearSortBy",xe.sortType="alphanumeric",xe.sortDescFirst=!1;var wn=function(ut){ut.getSortByToggleProps=[Bn],ut.stateReducers.push(On),ut.useInstance.push(In)};wn.pluginName="useSortBy";var Bn=function(ut,xt){var Ct=xt.instance,Nt=xt.column,Qt=Ct.isMultiSortEvent,Ut=Qt===void 0?function(Kt){return Kt.shiftKey}:Qt;return[ut,{onClick:Nt.canSort?function(Kt){Kt.persist(),Nt.toggleSortBy(void 0,!Ct.disableMultiSort&&Ut(Kt))}:void 0,style:{cursor:Nt.canSort?"pointer":void 0},title:Nt.canSort?"Toggle SortBy":void 0}]};function On(ut,xt,Ct,Nt){if(xt.type===me.init)return Ae({sortBy:[]},ut);if(xt.type===me.resetSortBy)return Ae({},ut,{sortBy:Nt.initialState.sortBy||[]});if(xt.type===me.clearSortBy)return Ae({},ut,{sortBy:ut.sortBy.filter(function(Nr){return Nr.id!==xt.columnId})});if(xt.type===me.setSortBy)return Ae({},ut,{sortBy:xt.sortBy});if(xt.type===me.toggleSortBy){var Qt,Ut=xt.columnId,Kt=xt.desc,Ar=xt.multi,gr=Nt.allColumns,xr=Nt.disableMultiSort,Rr=Nt.disableSortRemove,Sr=Nt.disableMultiRemove,Br=Nt.maxMultiSortColCount,br=Br===void 0?Number.MAX_SAFE_INTEGER:Br,Tr=ut.sortBy,Mr=gr.find(function(Nr){return Nr.id===Ut}).sortDescFirst,$r=Tr.find(function(Nr){return Nr.id===Ut}),jr=Tr.findIndex(function(Nr){return Nr.id===Ut}),hn=Kt!=null,Qr=[];return(Qt=!xr&&Ar?$r?"toggle":"add":jr!==Tr.length-1||Tr.length!==1?"replace":$r?"toggle":"replace")!="toggle"||Rr||hn||Ar&&Sr||!($r&&$r.desc&&!Mr||!$r.desc&&Mr)||(Qt="remove"),Qt==="replace"?Qr=[{id:Ut,desc:hn?Kt:Mr}]:Qt==="add"?(Qr=[].concat(Tr,[{id:Ut,desc:hn?Kt:Mr}])).splice(0,Qr.length-br):Qt==="toggle"?Qr=Tr.map(function(Nr){return Nr.id===Ut?Ae({},Nr,{desc:hn?Kt:!$r.desc}):Nr}):Qt==="remove"&&(Qr=Tr.filter(function(Nr){return Nr.id!==Ut})),Ae({},ut,{sortBy:Qr})}}function In(ut){var xt=ut.data,Ct=ut.rows,Nt=ut.flatRows,Qt=ut.allColumns,Ut=ut.orderByFn,Kt=Ut===void 0?Ln:Ut,Ar=ut.sortTypes,gr=ut.manualSortBy,xr=ut.defaultCanSort,Rr=ut.disableSortBy,Sr=ut.flatHeaders,Br=ut.state.sortBy,br=ut.dispatch,Tr=ut.plugins,Mr=ut.getHooks,$r=ut.autoResetSortBy,jr=$r===void 0||$r;ke(Tr,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var hn=oe.useCallback(function(zr){br({type:me.setSortBy,sortBy:zr})},[br]),Qr=oe.useCallback(function(zr,Zr,Hn){br({type:me.toggleSortBy,columnId:zr,desc:Zr,multi:Hn})},[br]),Nr=We(ut);Sr.forEach(function(zr){var Zr=zr.accessor,Hn=zr.canSort,ln=zr.disableSortBy,Pn=zr.id,kn=Zr?Be(ln!==!0&&void 0,Rr!==!0&&void 0,!0):Be(xr,Hn,!1);zr.canSort=kn,zr.canSort&&(zr.toggleSortBy=function(qr,Fn){return Qr(zr.id,qr,Fn)},zr.clearSortBy=function(){br({type:me.clearSortBy,columnId:zr.id})}),zr.getSortByToggleProps=$e(Mr().getSortByToggleProps,{instance:Nr(),column:zr});var zn=Br.find(function(qr){return qr.id===Pn});zr.isSorted=!!zn,zr.sortedIndex=Br.findIndex(function(qr){return qr.id===Pn}),zr.isSortedDesc=zr.isSorted?zn.desc:void 0});var dn=oe.useMemo(function(){if(gr||!Br.length)return[Ct,Nt];var zr=[],Zr=Br.filter(function(Hn){return Qt.find(function(ln){return ln.id===Hn.id})});return[function Hn(ln){var Pn=Kt(ln,Zr.map(function(kn){var zn=Qt.find(function(fi){return fi.id===kn.id});if(!zn)throw new Error("React-Table: Could not find a column with id: "+kn.id+" while sorting");var qr=zn.sortType,Fn=Ne(qr)||(Ar||{})[qr]||_n[qr];if(!Fn)throw new Error("React-Table: Could not find a valid sortType of '"+qr+"' for column '"+kn.id+"'.");return function(fi,Xi){return Fn(fi,Xi,kn.id,kn.desc)}}),Zr.map(function(kn){var zn=Qt.find(function(qr){return qr.id===kn.id});return zn&&zn.sortInverted?kn.desc:!kn.desc}));return Pn.forEach(function(kn){zr.push(kn),kn.subRows&&kn.subRows.length!==0&&(kn.subRows=Hn(kn.subRows))}),Pn}(Ct),zr]},[gr,Br,Ct,Nt,Qt,Kt,Ar]),Ur=dn[0],sn=dn[1],Nn=We(jr);Xe(function(){Nn()&&br({type:me.resetSortBy})},[gr?null:xt]),Object.assign(ut,{preSortedRows:Ct,preSortedFlatRows:Nt,sortedRows:Ur,sortedFlatRows:sn,rows:Ur,flatRows:sn,setSortBy:hn,toggleSortBy:Qr})}function Ln(ut,xt,Ct){return[].concat(ut).sort(function(Nt,Qt){for(var Ut=0;Ut<xt.length;Ut+=1){var Kt=xt[Ut],Ar=Ct[Ut]===!1||Ct[Ut]==="desc",gr=Kt(Nt,Qt);if(gr!==0)return Ar?-gr:gr}return Ct[0]?Nt.index-Qt.index:Qt.index-Nt.index})}me.resetPage="resetPage",me.gotoPage="gotoPage",me.setPageSize="setPageSize";var Tn=function(ut){ut.stateReducers.push(Rn),ut.useInstance.push($n)};function Rn(ut,xt,Ct,Nt){if(xt.type===me.init)return Ae({pageSize:10,pageIndex:0},ut);if(xt.type===me.resetPage)return Ae({},ut,{pageIndex:Nt.initialState.pageIndex||0});if(xt.type===me.gotoPage){var Qt=Nt.pageCount,Ut=Nt.page,Kt=je(xt.pageIndex,ut.pageIndex),Ar=!1;return Kt>ut.pageIndex?Ar=Qt===-1?Ut.length>=ut.pageSize:Kt<Qt:Kt<ut.pageIndex&&(Ar=Kt>-1),Ar?Ae({},ut,{pageIndex:Kt}):ut}if(xt.type===me.setPageSize){var gr=xt.pageSize,xr=ut.pageSize*ut.pageIndex;return Ae({},ut,{pageIndex:Math.floor(xr/gr),pageSize:gr})}}function $n(ut){var xt=ut.rows,Ct=ut.autoResetPage,Nt=Ct===void 0||Ct,Qt=ut.manualExpandedKey,Ut=Qt===void 0?"expanded":Qt,Kt=ut.plugins,Ar=ut.pageCount,gr=ut.paginateExpandedRows,xr=gr===void 0||gr,Rr=ut.expandSubRows,Sr=Rr===void 0||Rr,Br=ut.state,br=Br.pageSize,Tr=Br.pageIndex,Mr=Br.expanded,$r=Br.globalFilter,jr=Br.filters,hn=Br.groupBy,Qr=Br.sortBy,Nr=ut.dispatch,dn=ut.data,Ur=ut.manualPagination;ke(Kt,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var sn=We(Nt);Xe(function(){sn()&&Nr({type:me.resetPage})},[Nr,Ur?null:dn,$r,jr,hn,Qr]);var Nn=Ur?Ar:Math.ceil(xt.length/br),zr=oe.useMemo(function(){return Nn>0?[].concat(new Array(Nn)).fill(null).map(function(Fn,fi){return fi}):[]},[Nn]),Zr=oe.useMemo(function(){var Fn;if(Ur)Fn=xt;else{var fi=br*Tr,Xi=fi+br;Fn=xt.slice(fi,Xi)}return xr?Fn:Ge(Fn,{manualExpandedKey:Ut,expanded:Mr,expandSubRows:Sr})},[Sr,Mr,Ut,Ur,Tr,br,xr,xt]),Hn=Tr>0,ln=Nn===-1?Zr.length>=br:Tr<Nn-1,Pn=oe.useCallback(function(Fn){Nr({type:me.gotoPage,pageIndex:Fn})},[Nr]),kn=oe.useCallback(function(){return Pn(function(Fn){return Fn-1})},[Pn]),zn=oe.useCallback(function(){return Pn(function(Fn){return Fn+1})},[Pn]),qr=oe.useCallback(function(Fn){Nr({type:me.setPageSize,pageSize:Fn})},[Nr]);Object.assign(ut,{pageOptions:zr,pageCount:Nn,page:Zr,canPreviousPage:Hn,canNextPage:ln,gotoPage:Pn,previousPage:kn,nextPage:zn,setPageSize:qr})}Tn.pluginName="usePagination",me.resetPivot="resetPivot",me.togglePivot="togglePivot";var Cn=function(ut){ut.getPivotToggleProps=[gn],ut.stateReducers.push(Mn),ut.useInstanceAfterData.push(yn),ut.allColumns.push(Ys),ut.accessValue.push(pa),ut.materializedColumns.push(Gr),ut.materializedColumnsDeps.push(ni),ut.visibleColumns.push(Un),ut.visibleColumnsDeps.push(Li),ut.useInstance.push(Xs),ut.prepareRow.push(tu)};Cn.pluginName="usePivotColumns";var Sn=[],gn=function(ut,xt){var Ct=xt.header;return[ut,{onClick:Ct.canPivot?function(Nt){Nt.persist(),Ct.togglePivot()}:void 0,style:{cursor:Ct.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function Mn(ut,xt,Ct,Nt){if(xt.type===me.init)return Ae({pivotColumns:Sn},ut);if(xt.type===me.resetPivot)return Ae({},ut,{pivotColumns:Nt.initialState.pivotColumns||Sn});if(xt.type===me.togglePivot){var Qt=xt.columnId,Ut=xt.value,Kt=Ut!==void 0?Ut:!ut.pivotColumns.includes(Qt);return Ae({},ut,Kt?{pivotColumns:[].concat(ut.pivotColumns,[Qt])}:{pivotColumns:ut.pivotColumns.filter(function(Ar){return Ar!==Qt})})}}function yn(ut){ut.allColumns.forEach(function(xt){xt.isPivotSource=ut.state.pivotColumns.includes(xt.id)})}function Ys(ut,xt){var Ct=xt.instance;return ut.forEach(function(Nt){Nt.isPivotSource=Ct.state.pivotColumns.includes(Nt.id),Nt.uniqueValues=new Set}),ut}function pa(ut,xt){var Ct=xt.column;return Ct.uniqueValues&&ut!==void 0&&Ct.uniqueValues.add(ut),ut}function Gr(ut,xt){var Ct=xt.instance,Nt=Ct.allColumns,Qt=Ct.state;if(!Qt.pivotColumns.length||!Qt.groupBy||!Qt.groupBy.length)return ut;var Ut=Qt.pivotColumns.map(function(gr){return Nt.find(function(xr){return xr.id===gr})}).filter(Boolean),Kt=Nt.filter(function(gr){return!gr.isPivotSource&&!Qt.groupBy.includes(gr.id)&&!Qt.pivotColumns.includes(gr.id)}),Ar=tt(function gr(xr,Rr,Sr){xr===void 0&&(xr=0),Sr===void 0&&(Sr=[]);var Br=Ut[xr];return Br?Array.from(Br.uniqueValues).sort().map(function(br){var Tr=Ae({},Br,{Header:Br.PivotHeader||typeof Br.header=="string"?Br.Header+": "+br:br,isPivotGroup:!0,parent:Rr,depth:xr,id:Rr?Rr.id+"."+Br.id+"."+br:Br.id+"."+br,pivotValue:br});return Tr.columns=gr(xr+1,Tr,[].concat(Sr,[function(Mr){return Mr.values[Br.id]===br}])),Tr}):Kt.map(function(br){return Ae({},br,{canPivot:!1,isPivoted:!0,parent:Rr,depth:xr,id:""+(Rr?Rr.id+"."+br.id:br.id),accessor:function(Tr,Mr,$r){if(Sr.every(function(jr){return jr($r)}))return $r.values[br.id]}})})}());return[].concat(ut,Ar)}function ni(ut,xt){var Ct=xt.instance.state,Nt=Ct.pivotColumns,Qt=Ct.groupBy;return[].concat(ut,[Nt,Qt])}function Un(ut,xt){var Ct=xt.instance.state;return ut=ut.filter(function(Nt){return!Nt.isPivotSource}),Ct.pivotColumns.length&&Ct.groupBy&&Ct.groupBy.length&&(ut=ut.filter(function(Nt){return Nt.isGrouped||Nt.isPivoted})),ut}function Li(ut,xt){var Ct=xt.instance;return[].concat(ut,[Ct.state.pivotColumns,Ct.state.groupBy])}function Xs(ut){var xt=ut.columns,Ct=ut.allColumns,Nt=ut.flatHeaders,Qt=ut.getHooks,Ut=ut.plugins,Kt=ut.dispatch,Ar=ut.autoResetPivot,gr=Ar===void 0||Ar,xr=ut.manaulPivot,Rr=ut.disablePivot,Sr=ut.defaultCanPivot;ke(Ut,["useGroupBy"],"usePivotColumns");var Br=We(ut);Ct.forEach(function(Tr){var Mr=Tr.accessor,$r=Tr.defaultPivot,jr=Tr.disablePivot;Tr.canPivot=Mr?Be(Tr.canPivot,jr!==!0&&void 0,Rr!==!0&&void 0,!0):Be(Tr.canPivot,$r,Sr,!1),Tr.canPivot&&(Tr.togglePivot=function(){return ut.togglePivot(Tr.id)}),Tr.Aggregated=Tr.Aggregated||Tr.Cell}),Nt.forEach(function(Tr){Tr.getPivotToggleProps=$e(Qt().getPivotToggleProps,{instance:Br(),header:Tr})});var br=We(gr);Xe(function(){br()&&Kt({type:me.resetPivot})},[Kt,xr?null:xt]),Object.assign(ut,{togglePivot:function(Tr,Mr){Kt({type:me.togglePivot,columnId:Tr,value:Mr})}})}function tu(ut){ut.allCells.forEach(function(xt){xt.isPivoted=xt.column.isPivoted})}me.resetSelectedRows="resetSelectedRows",me.toggleAllRowsSelected="toggleAllRowsSelected",me.toggleRowSelected="toggleRowSelected",me.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var Wh=function(ut){ut.getToggleRowSelectedProps=[Up],ut.getToggleAllRowsSelectedProps=[Hp],ut.getToggleAllPageRowsSelectedProps=[Hf],ut.stateReducers.push(jp),ut.useInstance.push(Vp),ut.prepareRow.push(Qp)};Wh.pluginName="useRowSelect";var Up=function(ut,xt){var Ct=xt.instance,Nt=xt.row,Qt=Ct.manualRowSelectedKey,Ut=Qt===void 0?"isSelected":Qt;return[ut,{onChange:function(Kt){Nt.toggleRowSelected(Kt.target.checked)},style:{cursor:"pointer"},checked:!(!Nt.original||!Nt.original[Ut])||Nt.isSelected,title:"Toggle Row Selected",indeterminate:Nt.isSomeSelected}]},Hp=function(ut,xt){var Ct=xt.instance;return[ut,{onChange:function(Nt){Ct.toggleAllRowsSelected(Nt.target.checked)},style:{cursor:"pointer"},checked:Ct.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!Ct.isAllRowsSelected&&Object.keys(Ct.state.selectedRowIds).length)}]},Hf=function(ut,xt){var Ct=xt.instance;return[ut,{onChange:function(Nt){Ct.toggleAllPageRowsSelected(Nt.target.checked)},style:{cursor:"pointer"},checked:Ct.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!Ct.isAllPageRowsSelected&&Ct.page.some(function(Nt){var Qt=Nt.id;return Ct.state.selectedRowIds[Qt]}))}]};function jp(ut,xt,Ct,Nt){if(xt.type===me.init)return Ae({selectedRowIds:{}},ut);if(xt.type===me.resetSelectedRows)return Ae({},ut,{selectedRowIds:Nt.initialState.selectedRowIds||{}});if(xt.type===me.toggleAllRowsSelected){var Qt=xt.value,Ut=Nt.isAllRowsSelected,Kt=Nt.rowsById,Ar=Nt.nonGroupedRowsById,gr=Ar===void 0?Kt:Ar,xr=Qt!==void 0?Qt:!Ut,Rr=Object.assign({},ut.selectedRowIds);return xr?Object.keys(gr).forEach(function(Pn){Rr[Pn]=!0}):Object.keys(gr).forEach(function(Pn){delete Rr[Pn]}),Ae({},ut,{selectedRowIds:Rr})}if(xt.type===me.toggleRowSelected){var Sr=xt.id,Br=xt.value,br=Nt.rowsById,Tr=Nt.selectSubRows,Mr=Tr===void 0||Tr,$r=Nt.getSubRows,jr=ut.selectedRowIds[Sr],hn=Br!==void 0?Br:!jr;if(jr===hn)return ut;var Qr=Ae({},ut.selectedRowIds);return function Pn(kn){var zn=br[kn];if(zn&&(zn.isGrouped||(hn?Qr[kn]=!0:delete Qr[kn]),Mr&&$r(zn)))return $r(zn).forEach(function(qr){return Pn(qr.id)})}(Sr),Ae({},ut,{selectedRowIds:Qr})}if(xt.type===me.toggleAllPageRowsSelected){var Nr=xt.value,dn=Nt.page,Ur=Nt.rowsById,sn=Nt.selectSubRows,Nn=sn===void 0||sn,zr=Nt.isAllPageRowsSelected,Zr=Nt.getSubRows,Hn=Nr!==void 0?Nr:!zr,ln=Ae({},ut.selectedRowIds);return dn.forEach(function(Pn){return function kn(zn){var qr=Ur[zn];if(qr.isGrouped||(Hn?ln[zn]=!0:delete ln[zn]),Nn&&Zr(qr))return Zr(qr).forEach(function(Fn){return kn(Fn.id)})}(Pn.id)}),Ae({},ut,{selectedRowIds:ln})}return ut}function Vp(ut){var xt=ut.data,Ct=ut.rows,Nt=ut.getHooks,Qt=ut.plugins,Ut=ut.rowsById,Kt=ut.nonGroupedRowsById,Ar=Kt===void 0?Ut:Kt,gr=ut.autoResetSelectedRows,xr=gr===void 0||gr,Rr=ut.state.selectedRowIds,Sr=ut.selectSubRows,Br=Sr===void 0||Sr,br=ut.dispatch,Tr=ut.page,Mr=ut.getSubRows;ke(Qt,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var $r=oe.useMemo(function(){var Zr=[];return Ct.forEach(function(Hn){var ln=Br?function Pn(kn,zn,qr){if(zn[kn.id])return!0;var Fn=qr(kn);if(Fn&&Fn.length){var fi=!0,Xi=!1;return Fn.forEach(function(Wr){Xi&&!fi||(Pn(Wr,zn,qr)?Xi=!0:fi=!1)}),!!fi||!!Xi&&null}return!1}(Hn,Rr,Mr):!!Rr[Hn.id];Hn.isSelected=!!ln,Hn.isSomeSelected=ln===null,ln&&Zr.push(Hn)}),Zr},[Ct,Br,Rr,Mr]),jr=!!(Object.keys(Ar).length&&Object.keys(Rr).length),hn=jr;jr&&Object.keys(Ar).some(function(Zr){return!Rr[Zr]})&&(jr=!1),jr||Tr&&Tr.length&&Tr.some(function(Zr){var Hn=Zr.id;return!Rr[Hn]})&&(hn=!1);var Qr=We(xr);Xe(function(){Qr()&&br({type:me.resetSelectedRows})},[br,xt]);var Nr=oe.useCallback(function(Zr){return br({type:me.toggleAllRowsSelected,value:Zr})},[br]),dn=oe.useCallback(function(Zr){return br({type:me.toggleAllPageRowsSelected,value:Zr})},[br]),Ur=oe.useCallback(function(Zr,Hn){return br({type:me.toggleRowSelected,id:Zr,value:Hn})},[br]),sn=We(ut),Nn=$e(Nt().getToggleAllRowsSelectedProps,{instance:sn()}),zr=$e(Nt().getToggleAllPageRowsSelectedProps,{instance:sn()});Object.assign(ut,{selectedFlatRows:$r,isAllRowsSelected:jr,isAllPageRowsSelected:hn,toggleRowSelected:Ur,toggleAllRowsSelected:Nr,getToggleAllRowsSelectedProps:Nn,getToggleAllPageRowsSelectedProps:zr,toggleAllPageRowsSelected:dn})}function Qp(ut,xt){var Ct=xt.instance;ut.toggleRowSelected=function(Nt){return Ct.toggleRowSelected(ut.id,Nt)},ut.getToggleRowSelectedProps=$e(Ct.getHooks().getToggleRowSelectedProps,{instance:Ct,row:ut})}var Yh=function(ut){return{}},Xh=function(ut){return{}};me.setRowState="setRowState",me.setCellState="setCellState",me.resetRowState="resetRowState";var Zh=function(ut){ut.stateReducers.push(Kp),ut.useInstance.push(qp),ut.prepareRow.push(Gp)};function Kp(ut,xt,Ct,Nt){var Qt=Nt.initialRowStateAccessor,Ut=Qt===void 0?Yh:Qt,Kt=Nt.initialCellStateAccessor,Ar=Kt===void 0?Xh:Kt,gr=Nt.rowsById;if(xt.type===me.init)return Ae({rowState:{}},ut);if(xt.type===me.resetRowState)return Ae({},ut,{rowState:Nt.initialState.rowState||{}});if(xt.type===me.setRowState){var xr,Rr=xt.rowId,Sr=xt.value,Br=ut.rowState[Rr]!==void 0?ut.rowState[Rr]:Ut(gr[Rr]);return Ae({},ut,{rowState:Ae({},ut.rowState,(xr={},xr[Rr]=je(Sr,Br),xr))})}if(xt.type===me.setCellState){var br,Tr,Mr,$r,jr,hn=xt.rowId,Qr=xt.columnId,Nr=xt.value,dn=ut.rowState[hn]!==void 0?ut.rowState[hn]:Ut(gr[hn]),Ur=(dn==null||(br=dn.cellState)==null?void 0:br[Qr])!==void 0?dn.cellState[Qr]:Ar((Tr=gr[hn])==null||(Mr=Tr.cells)==null?void 0:Mr.find(function(sn){return sn.column.id===Qr}));return Ae({},ut,{rowState:Ae({},ut.rowState,(jr={},jr[hn]=Ae({},dn,{cellState:Ae({},dn.cellState||{},($r={},$r[Qr]=je(Nr,Ur),$r))}),jr))})}}function qp(ut){var xt=ut.autoResetRowState,Ct=xt===void 0||xt,Nt=ut.data,Qt=ut.dispatch,Ut=oe.useCallback(function(gr,xr){return Qt({type:me.setRowState,rowId:gr,value:xr})},[Qt]),Kt=oe.useCallback(function(gr,xr,Rr){return Qt({type:me.setCellState,rowId:gr,columnId:xr,value:Rr})},[Qt]),Ar=We(Ct);Xe(function(){Ar()&&Qt({type:me.resetRowState})},[Nt]),Object.assign(ut,{setRowState:Ut,setCellState:Kt})}function Gp(ut,xt){var Ct=xt.instance,Nt=Ct.initialRowStateAccessor,Qt=Nt===void 0?Yh:Nt,Ut=Ct.initialCellStateAccessor,Kt=Ut===void 0?Xh:Ut,Ar=Ct.state.rowState;ut&&(ut.state=Ar[ut.id]!==void 0?Ar[ut.id]:Qt(ut),ut.setState=function(gr){return Ct.setRowState(ut.id,gr)},ut.cells.forEach(function(gr){ut.state.cellState||(ut.state.cellState={}),gr.state=ut.state.cellState[gr.column.id]!==void 0?ut.state.cellState[gr.column.id]:Kt(gr),gr.setState=function(xr){return Ct.setCellState(ut.id,gr.column.id,xr)}}))}Zh.pluginName="useRowState",me.resetColumnOrder="resetColumnOrder",me.setColumnOrder="setColumnOrder";var Jh=function(ut){ut.stateReducers.push(eA),ut.visibleColumnsDeps.push(function(xt,Ct){var Nt=Ct.instance;return[].concat(xt,[Nt.state.columnOrder])}),ut.visibleColumns.push(zp),ut.useInstance.push(Wp)};function eA(ut,xt,Ct,Nt){return xt.type===me.init?Ae({columnOrder:[]},ut):xt.type===me.resetColumnOrder?Ae({},ut,{columnOrder:Nt.initialState.columnOrder||[]}):xt.type===me.setColumnOrder?Ae({},ut,{columnOrder:je(xt.columnOrder,ut.columnOrder)}):void 0}function zp(ut,xt){var Ct=xt.instance.state.columnOrder;if(!Ct||!Ct.length)return ut;for(var Nt=[].concat(Ct),Qt=[].concat(ut),Ut=[],Kt=function(){var Ar=Nt.shift(),gr=Qt.findIndex(function(xr){return xr.id===Ar});gr>-1&&Ut.push(Qt.splice(gr,1)[0])};Qt.length&&Nt.length;)Kt();return[].concat(Ut,Qt)}function Wp(ut){var xt=ut.dispatch;ut.setColumnOrder=oe.useCallback(function(Ct){return xt({type:me.setColumnOrder,columnOrder:Ct})},[xt])}Jh.pluginName="useColumnOrder",xe.canResize=!0,me.columnStartResizing="columnStartResizing",me.columnResizing="columnResizing",me.columnDoneResizing="columnDoneResizing",me.resetResize="resetResize";var tA=function(ut){ut.getResizerProps=[Yp],ut.getHeaderProps.push({style:{position:"relative"}}),ut.stateReducers.push(Xp),ut.useInstance.push(Jp),ut.useInstanceBeforeDimensions.push(Zp)},Yp=function(ut,xt){var Ct=xt.instance,Nt=xt.header,Qt=Ct.dispatch,Ut=function(Kt,Ar){var gr=!1;if(Kt.type==="touchstart"){if(Kt.touches&&Kt.touches.length>1)return;gr=!0}var xr,Rr,Sr=function(Qr){var Nr=[];return function dn(Ur){Ur.columns&&Ur.columns.length&&Ur.columns.map(dn),Nr.push(Ur)}(Qr),Nr}(Ar).map(function(Qr){return[Qr.id,Qr.totalWidth]}),Br=gr?Math.round(Kt.touches[0].clientX):Kt.clientX,br=function(){window.cancelAnimationFrame(xr),xr=null,Qt({type:me.columnDoneResizing})},Tr=function(){window.cancelAnimationFrame(xr),xr=null,Qt({type:me.columnResizing,clientX:Rr})},Mr=function(Qr){Rr=Qr,xr||(xr=window.requestAnimationFrame(Tr))},$r={mouse:{moveEvent:"mousemove",moveHandler:function(Qr){return Mr(Qr.clientX)},upEvent:"mouseup",upHandler:function(Qr){document.removeEventListener("mousemove",$r.mouse.moveHandler),document.removeEventListener("mouseup",$r.mouse.upHandler),br()}},touch:{moveEvent:"touchmove",moveHandler:function(Qr){return Qr.cancelable&&(Qr.preventDefault(),Qr.stopPropagation()),Mr(Qr.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(Qr){document.removeEventListener($r.touch.moveEvent,$r.touch.moveHandler),document.removeEventListener($r.touch.upEvent,$r.touch.moveHandler),br()}}},jr=gr?$r.touch:$r.mouse,hn=!!function(){if(typeof Ke=="boolean")return Ke;var Qr=!1;try{var Nr={get passive(){return Qr=!0,!1}};window.addEventListener("test",null,Nr),window.removeEventListener("test",null,Nr)}catch{Qr=!1}return Ke=Qr}()&&{passive:!1};document.addEventListener(jr.moveEvent,jr.moveHandler,hn),document.addEventListener(jr.upEvent,jr.upHandler,hn),Qt({type:me.columnStartResizing,columnId:Ar.id,columnWidth:Ar.totalWidth,headerIdWidths:Sr,clientX:Br})};return[ut,{onMouseDown:function(Kt){return Kt.persist()||Ut(Kt,Nt)},onTouchStart:function(Kt){return Kt.persist()||Ut(Kt,Nt)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Xp(ut,xt){if(xt.type===me.init)return Ae({columnResizing:{columnWidths:{}}},ut);if(xt.type===me.resetResize)return Ae({},ut,{columnResizing:{columnWidths:{}}});if(xt.type===me.columnStartResizing){var Ct=xt.clientX,Nt=xt.columnId,Qt=xt.columnWidth,Ut=xt.headerIdWidths;return Ae({},ut,{columnResizing:Ae({},ut.columnResizing,{startX:Ct,headerIdWidths:Ut,columnWidth:Qt,isResizingColumn:Nt})})}if(xt.type===me.columnResizing){var Kt=xt.clientX,Ar=ut.columnResizing,gr=Ar.startX,xr=Ar.columnWidth,Rr=Ar.headerIdWidths,Sr=(Kt-gr)/xr,Br={};return(Rr===void 0?[]:Rr).forEach(function(br){var Tr=br[0],Mr=br[1];Br[Tr]=Math.max(Mr+Mr*Sr,0)}),Ae({},ut,{columnResizing:Ae({},ut.columnResizing,{columnWidths:Ae({},ut.columnResizing.columnWidths,{},Br)})})}return xt.type===me.columnDoneResizing?Ae({},ut,{columnResizing:Ae({},ut.columnResizing,{startX:null,isResizingColumn:null})}):void 0}tA.pluginName="useResizeColumns";var Zp=function(ut){var xt=ut.flatHeaders,Ct=ut.disableResizing,Nt=ut.getHooks,Qt=ut.state.columnResizing,Ut=We(ut);xt.forEach(function(Kt){var Ar=Be(Kt.disableResizing!==!0&&void 0,Ct!==!0&&void 0,!0);Kt.canResize=Ar,Kt.width=Qt.columnWidths[Kt.id]||Kt.originalWidth||Kt.width,Kt.isResizing=Qt.isResizingColumn===Kt.id,Ar&&(Kt.getResizerProps=$e(Nt().getResizerProps,{instance:Ut(),header:Kt}))})};function Jp(ut){var xt=ut.plugins,Ct=ut.dispatch,Nt=ut.autoResetResize,Qt=Nt===void 0||Nt,Ut=ut.columns;ke(xt,["useAbsoluteLayout"],"useResizeColumns");var Kt=We(Qt);Xe(function(){Kt()&&Ct({type:me.resetResize})},[Ut]);var Ar=oe.useCallback(function(){return Ct({type:me.resetResize})},[Ct]);Object.assign(ut,{resetResizing:Ar})}var jf={position:"absolute",top:0},iA=function(ut){ut.getTableBodyProps.push($l),ut.getRowProps.push($l),ut.getHeaderGroupProps.push($l),ut.getFooterGroupProps.push($l),ut.getHeaderProps.push(function(xt,Ct){var Nt=Ct.column;return[xt,{style:Ae({},jf,{left:Nt.totalLeft+"px",width:Nt.totalWidth+"px"})}]}),ut.getCellProps.push(function(xt,Ct){var Nt=Ct.cell;return[xt,{style:Ae({},jf,{left:Nt.column.totalLeft+"px",width:Nt.column.totalWidth+"px"})}]}),ut.getFooterProps.push(function(xt,Ct){var Nt=Ct.column;return[xt,{style:Ae({},jf,{left:Nt.totalLeft+"px",width:Nt.totalWidth+"px"})}]})};iA.pluginName="useAbsoluteLayout";var $l=function(ut,xt){return[ut,{style:{position:"relative",width:xt.instance.totalColumnsWidth+"px"}}]},Vf={display:"inline-block",boxSizing:"border-box"},Qf=function(ut,xt){return[ut,{style:{display:"flex",width:xt.instance.totalColumnsWidth+"px"}}]},sA=function(ut){ut.getRowProps.push(Qf),ut.getHeaderGroupProps.push(Qf),ut.getFooterGroupProps.push(Qf),ut.getHeaderProps.push(function(xt,Ct){var Nt=Ct.column;return[xt,{style:Ae({},Vf,{width:Nt.totalWidth+"px"})}]}),ut.getCellProps.push(function(xt,Ct){var Nt=Ct.cell;return[xt,{style:Ae({},Vf,{width:Nt.column.totalWidth+"px"})}]}),ut.getFooterProps.push(function(xt,Ct){var Nt=Ct.column;return[xt,{style:Ae({},Vf,{width:Nt.totalWidth+"px"})}]})};function aA(ut){ut.getTableProps.push(e0),ut.getRowProps.push(Kf),ut.getHeaderGroupProps.push(Kf),ut.getFooterGroupProps.push(Kf),ut.getHeaderProps.push(t0),ut.getCellProps.push(r0),ut.getFooterProps.push(n0)}sA.pluginName="useBlockLayout",aA.pluginName="useFlexLayout";var e0=function(ut,xt){return[ut,{style:{minWidth:xt.instance.totalColumnsMinWidth+"px"}}]},Kf=function(ut,xt){return[ut,{style:{display:"flex",flex:"1 0 auto",minWidth:xt.instance.totalColumnsMinWidth+"px"}}]},t0=function(ut,xt){var Ct=xt.column;return[ut,{style:{boxSizing:"border-box",flex:Ct.totalFlexWidth?Ct.totalFlexWidth+" 0 auto":void 0,minWidth:Ct.totalMinWidth+"px",width:Ct.totalWidth+"px"}}]},r0=function(ut,xt){var Ct=xt.cell;return[ut,{style:{boxSizing:"border-box",flex:Ct.column.totalFlexWidth+" 0 auto",minWidth:Ct.column.totalMinWidth+"px",width:Ct.column.totalWidth+"px"}}]},n0=function(ut,xt){var Ct=xt.column;return[ut,{style:{boxSizing:"border-box",flex:Ct.totalFlexWidth?Ct.totalFlexWidth+" 0 auto":void 0,minWidth:Ct.totalMinWidth+"px",width:Ct.totalWidth+"px"}}]};function qf(ut){ut.stateReducers.push(o0),ut.getTableProps.push(i0),ut.getHeaderProps.push(s0),ut.getRowProps.push(a0)}me.columnStartResizing="columnStartResizing",me.columnResizing="columnResizing",me.columnDoneResizing="columnDoneResizing",me.resetResize="resetResize",qf.pluginName="useGridLayout";var i0=function(ut,xt){var Ct=xt.instance;return[ut,{style:{display:"grid",gridTemplateColumns:Ct.visibleColumns.map(function(Nt){var Qt;return Ct.state.gridLayout.columnWidths[Nt.id]?Ct.state.gridLayout.columnWidths[Nt.id]+"px":(Qt=Ct.state.columnResizing)!=null&&Qt.isResizingColumn?Ct.state.gridLayout.startWidths[Nt.id]+"px":typeof Nt.width=="number"?Nt.width+"px":Nt.width}).join(" ")}}]},s0=function(ut,xt){var Ct=xt.column;return[ut,{id:"header-cell-"+Ct.id,style:{position:"sticky",gridColumn:"span "+Ct.totalVisibleHeaderCount}}]},a0=function(ut,xt){var Ct=xt.row;return Ct.isExpanded?[ut,{style:{gridColumn:"1 / "+(Ct.cells.length+1)}}]:[ut,{}]};function o0(ut,xt,Ct,Nt){if(xt.type===me.init)return Ae({gridLayout:{columnWidths:{}}},ut);if(xt.type===me.resetResize)return Ae({},ut,{gridLayout:{columnWidths:{}}});if(xt.type===me.columnStartResizing){var Qt=xt.columnId,Ut=xt.headerIdWidths,Kt=Cr(Qt);if(Kt!==void 0){var Ar=Nt.visibleColumns.reduce(function(Nr,dn){var Ur;return Ae({},Nr,((Ur={})[dn.id]=Cr(dn.id),Ur))},{}),gr=Nt.visibleColumns.reduce(function(Nr,dn){var Ur;return Ae({},Nr,((Ur={})[dn.id]=dn.minWidth,Ur))},{}),xr=Nt.visibleColumns.reduce(function(Nr,dn){var Ur;return Ae({},Nr,((Ur={})[dn.id]=dn.maxWidth,Ur))},{}),Rr=Ut.map(function(Nr){var dn=Nr[0];return[dn,Cr(dn)]});return Ae({},ut,{gridLayout:Ae({},ut.gridLayout,{startWidths:Ar,minWidths:gr,maxWidths:xr,headerIdGridWidths:Rr,columnWidth:Kt})})}return ut}if(xt.type===me.columnResizing){var Sr=xt.clientX,Br=ut.columnResizing.startX,br=ut.gridLayout,Tr=br.columnWidth,Mr=br.minWidths,$r=br.maxWidths,jr=br.headerIdGridWidths,hn=(Sr-Br)/Tr,Qr={};return(jr===void 0?[]:jr).forEach(function(Nr){var dn=Nr[0],Ur=Nr[1];Qr[dn]=Math.min(Math.max(Mr[dn],Ur+Ur*hn),$r[dn])}),Ae({},ut,{gridLayout:Ae({},ut.gridLayout,{columnWidths:Ae({},ut.gridLayout.columnWidths,{},Qr)})})}return xt.type===me.columnDoneResizing?Ae({},ut,{gridLayout:Ae({},ut.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function Cr(ut){var xt,Ct=(xt=document.getElementById("header-cell-"+ut))==null?void 0:xt.offsetWidth;if(Ct!==void 0)return Ct}ne._UNSTABLE_usePivotColumns=Cn,ne.actions=me,ne.defaultColumn=xe,ne.defaultGroupByFn=Fr,ne.defaultOrderByFn=Ln,ne.defaultRenderer=ge,ne.emptyRenderer=ye,ne.ensurePluginOrder=ke,ne.flexRender=nt,ne.functionalUpdate=je,ne.loopHooks=Fe,ne.makePropGetter=$e,ne.makeRenderer=Je,ne.reduceHooks=Ie,ne.safeUseLayoutEffect=ze,ne.useAbsoluteLayout=iA,ne.useAsyncDebounce=function(ut,xt){xt===void 0&&(xt=0);var Ct=oe.useRef({}),Nt=We(ut),Qt=We(xt);return oe.useCallback(function(){var Ut=ue(regeneratorRuntime.mark(function Kt(){var Ar,gr,xr,Rr=arguments;return regeneratorRuntime.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:for(Ar=Rr.length,gr=new Array(Ar),xr=0;xr<Ar;xr++)gr[xr]=Rr[xr];return Ct.current.promise||(Ct.current.promise=new Promise(function(Br,br){Ct.current.resolve=Br,Ct.current.reject=br})),Ct.current.timeout&&clearTimeout(Ct.current.timeout),Ct.current.timeout=setTimeout(ue(regeneratorRuntime.mark(function Br(){return regeneratorRuntime.wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return delete Ct.current.timeout,br.prev=1,br.t0=Ct.current,br.next=5,Nt().apply(void 0,gr);case 5:br.t1=br.sent,br.t0.resolve.call(br.t0,br.t1),br.next=12;break;case 9:br.prev=9,br.t2=br.catch(1),Ct.current.reject(br.t2);case 12:return br.prev=12,delete Ct.current.promise,br.finish(12);case 15:case"end":return br.stop()}},Br,null,[[1,9,12,15]])})),Qt()),Sr.abrupt("return",Ct.current.promise);case 5:case"end":return Sr.stop()}},Kt)}));return function(){return Ut.apply(this,arguments)}}(),[Nt,Qt])},ne.useBlockLayout=sA,ne.useColumnOrder=Jh,ne.useExpanded=It,ne.useFilters=Zt,ne.useFlexLayout=aA,ne.useGetLatest=We,ne.useGlobalFilter=tr,ne.useGridLayout=qf,ne.useGroupBy=hr,ne.useMountedLayoutEffect=Xe,ne.usePagination=Tn,ne.useResizeColumns=tA,ne.useRowSelect=Wh,ne.useRowState=Zh,ne.useSortBy=wn,ne.useTable=function(ut){for(var xt=arguments.length,Ct=new Array(xt>1?xt-1:0),Nt=1;Nt<xt;Nt++)Ct[Nt-1]=arguments[Nt];ut=Dt(ut),Ct=[Et].concat(Ct);var Qt=oe.useRef({}),Ut=We(Qt.current);Object.assign(Ut(),Ae({},ut,{plugins:Ct,hooks:wt()})),Ct.filter(Boolean).forEach(function(Wr){Wr(Ut().hooks)});var Kt=We(Ut().hooks);Ut().getHooks=Kt,delete Ut().hooks,Object.assign(Ut(),Ie(Kt().useOptions,Dt(ut)));var Ar=Ut(),gr=Ar.data,xr=Ar.columns,Rr=Ar.initialState,Sr=Ar.defaultColumn,Br=Ar.getSubRows,br=Ar.getRowId,Tr=Ar.stateReducer,Mr=Ar.useControlledState,$r=We(Tr),jr=oe.useCallback(function(Wr,ai){if(!ai.type)throw console.info({action:ai}),new Error("Unknown Action ");return[].concat(Kt().stateReducers,Array.isArray($r())?$r():[$r()]).reduce(function(yi,Zi){return Zi(yi,ai,Wr,Ut())||yi},Wr)},[Kt,$r,Ut]),hn=oe.useReducer(jr,void 0,function(){return jr(Rr,{type:me.init})}),Qr=hn[0],Nr=hn[1],dn=Ie([].concat(Kt().useControlledState,[Mr]),Qr,{instance:Ut()});Object.assign(Ut(),{state:dn,dispatch:Nr});var Ur=oe.useMemo(function(){return et(Ie(Kt().columns,xr,{instance:Ut()}))},[Kt,Ut,xr].concat(Ie(Kt().columnsDeps,[],{instance:Ut()})));Ut().columns=Ur;var sn=oe.useMemo(function(){return Ie(Kt().allColumns,tt(Ur),{instance:Ut()}).map(st)},[Ur,Kt,Ut].concat(Ie(Kt().allColumnsDeps,[],{instance:Ut()})));Ut().allColumns=sn;var Nn=oe.useMemo(function(){for(var Wr=[],ai=[],yi={},Zi=[].concat(sn);Zi.length;){var Ri=Zi.shift();Bt({data:gr,rows:Wr,flatRows:ai,rowsById:yi,column:Ri,getRowId:br,getSubRows:Br,accessValueHooks:Kt().accessValue,getInstance:Ut})}return[Wr,ai,yi]},[sn,gr,br,Br,Kt,Ut]),zr=Nn[0],Zr=Nn[1],Hn=Nn[2];Object.assign(Ut(),{rows:zr,initialRows:[].concat(zr),flatRows:Zr,rowsById:Hn}),Fe(Kt().useInstanceAfterData,Ut());var ln=oe.useMemo(function(){return Ie(Kt().visibleColumns,sn,{instance:Ut()}).map(function(Wr){return qe(Wr,Sr)})},[Kt,sn,Ut,Sr].concat(Ie(Kt().visibleColumnsDeps,[],{instance:Ut()})));sn=oe.useMemo(function(){var Wr=[].concat(ln);return sn.forEach(function(ai){Wr.find(function(yi){return yi.id===ai.id})||Wr.push(ai)}),Wr},[sn,ln]),Ut().allColumns=sn;var Pn=oe.useMemo(function(){return Ie(Kt().headerGroups,Se(ln,Sr),Ut())},[Kt,ln,Sr,Ut].concat(Ie(Kt().headerGroupsDeps,[],{instance:Ut()})));Ut().headerGroups=Pn;var kn=oe.useMemo(function(){return Pn.length?Pn[0].headers:[]},[Pn]);Ut().headers=kn,Ut().flatHeaders=Pn.reduce(function(Wr,ai){return[].concat(Wr,ai.headers)},[]),Fe(Kt().useInstanceBeforeDimensions,Ut());var zn=ln.filter(function(Wr){return Wr.isVisible}).map(function(Wr){return Wr.id}).sort().join("_");ln=oe.useMemo(function(){return ln.filter(function(Wr){return Wr.isVisible})},[ln,zn]),Ut().visibleColumns=ln;var qr=Ht(kn),Fn=qr[0],fi=qr[1],Xi=qr[2];return Ut().totalColumnsMinWidth=Fn,Ut().totalColumnsWidth=fi,Ut().totalColumnsMaxWidth=Xi,Fe(Kt().useInstance,Ut()),[].concat(Ut().flatHeaders,Ut().allColumns).forEach(function(Wr){Wr.render=Je(Ut(),Wr),Wr.getHeaderProps=$e(Kt().getHeaderProps,{instance:Ut(),column:Wr}),Wr.getFooterProps=$e(Kt().getFooterProps,{instance:Ut(),column:Wr})}),Ut().headerGroups=oe.useMemo(function(){return Pn.filter(function(Wr,ai){return Wr.headers=Wr.headers.filter(function(yi){return yi.headers?function Zi(Ri){return Ri.filter(function($o){return $o.headers?Zi($o.headers):$o.isVisible}).length}(yi.headers):yi.isVisible}),!!Wr.headers.length&&(Wr.getHeaderGroupProps=$e(Kt().getHeaderGroupProps,{instance:Ut(),headerGroup:Wr,index:ai}),Wr.getFooterGroupProps=$e(Kt().getFooterGroupProps,{instance:Ut(),headerGroup:Wr,index:ai}),!0)})},[Pn,Ut,Kt]),Ut().footerGroups=[].concat(Ut().headerGroups).reverse(),Ut().prepareRow=oe.useCallback(function(Wr){Wr.getRowProps=$e(Kt().getRowProps,{instance:Ut(),row:Wr}),Wr.allCells=sn.map(function(ai){var yi=Wr.values[ai.id],Zi={column:ai,row:Wr,value:yi};return Zi.getCellProps=$e(Kt().getCellProps,{instance:Ut(),cell:Zi}),Zi.render=Je(Ut(),ai,{row:Wr,cell:Zi,value:yi}),Zi}),Wr.cells=ln.map(function(ai){return Wr.allCells.find(function(yi){return yi.column.id===ai.id})}),Fe(Kt().prepareRow,Wr,{instance:Ut()})},[Kt,Ut,sn,ln]),Ut().getTableProps=$e(Kt().getTableProps,{instance:Ut()}),Ut().getTableBodyProps=$e(Kt().getTableBodyProps,{instance:Ut()}),Fe(Kt().useFinalInstance,Ut()),Ut()},Object.defineProperty(ne,"__esModule",{value:!0})})})(reactTable_production_min,reactTable_production_min.exports);var reactTable_production_minExports=reactTable_production_min.exports;reactTable.exports=reactTable_production_minExports;var reactTableExports=reactTable.exports;const runLocalSearch$1=(K,J)=>K.filter(ne=>searchByName(ne.Header,J)),FilterDropdown=({handleClose:K,columns:J})=>{const{t:ne}=useTranslation(),[oe,ce]=reactExports.useState([]),[ue,Ae]=reactExports.useState(""),[pe,ve]=reactExports.useState([]),[me,ge]=reactExports.useState(!1),ye=reactExports.useMemo(()=>J.filter(Xe=>!Xe.suppressHideColumn),[J]),xe=reactExports.useMemo(()=>ye.filter(Xe=>!Xe.isVisible).map(Xe=>Xe.id),[ye]);reactExports.useEffect(()=>(ce(ye),ve(xe),()=>ve([])),[xe]),reactExports.useEffect(()=>{pe.length===ye.length?ge(!1):ge(!0)},[pe,ye]);const _e=reactExports.useCallback(Xe=>{Xe.code===KeyboardCode.Escape&&K()},[K]);reactExports.useEffect(()=>(document.addEventListener("keydown",_e),()=>{document.removeEventListener("keydown",_e)}),[_e]);const $e=(Xe="")=>{if(!Xe)return;let Je=[...pe];Je.includes(Xe)?Je=Je.filter(nt=>nt!==Xe):Je=[...Je,Xe],Je.length>0?ge(!1):ge(!0),ve(Je)},Ie=Xe=>{const Je=runLocalSearch$1(ye,Xe);Ae(Xe),ce(Je)},Fe=()=>{Ae(""),ce(ye)},ke=()=>{ve(xe),K()},je=()=>{ye.forEach(Xe=>{const Je=pe.includes(Xe.id);Xe.toggleHidden(Je)}),K()},We=Xe=>!pe.includes(Xe),ze=()=>{switch(!0){case me:ve(ye.map(Xe=>Xe.id)),ge(!1);break;default:ve([]),ge(!0)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"filterDropdown",children:[jsxRuntimeExports.jsx(Ml,{variant:"outlined",placeholder:ne("grid.columnFilter.filterPlaceholder")||"",value:ue,onChange:Ie,prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:ue?jsxRuntimeExports.jsx(Pp,{onClick:Fe}):null}),jsxRuntimeExports.jsx(pF,{intermediate:!!pe.length&&pe.length!==ye.length,value:me,onChange:ze,children:ne("checkboxLabex.label")})]}),jsxRuntimeExports.jsx("div",{className:"filterDropdown__dropdownList",children:oe.map(Xe=>jsxRuntimeExports.jsx(pF,{value:We(Xe.id),onChange:()=>$e(Xe.id),children:Xe.render("Header")},Xe.id))}),jsxRuntimeExports.jsxs("div",{className:"filterDropdown__buttonsContainer",children:[jsxRuntimeExports.jsx(rl,{onClick:je,children:ne("buttons.apply")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:ke,children:ne("buttons.cancel")})]})]})},container$E="_container_k0rhm_1",styles$1p={container:container$E},FilterCell=({columns:K})=>{const[J,ne]=reactExports.useState(!1),oe=reactExports.useCallback(()=>ne(!1),[]),ce=()=>jsxRuntimeExports.jsx(FilterDropdown,{columns:K,handleClose:oe});return jsxRuntimeExports.jsx("div",{className:styles$1p.container,children:jsxRuntimeExports.jsx(Y_,{open:J,onOpenChange:()=>ne(ue=>!ue),dropdownRender:ce,children:jsxRuntimeExports.jsx(rl,{size:"sm",variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(zB,{})})})})},FilterInput=({column:K,updateTypeState:J})=>{const{t:ne}=useTranslation(),{filterValue:oe,setFilter:ce,filteredValueMask:ue}=K,[Ae,pe]=ue||[],ve=xe=>{if(K.columnType===ValueTypesEnum$1.Bool){switch(xe.toLowerCase()){case BooleanColumnInputValueEnum.y:ce("true");break;case BooleanColumnInputValueEnum.n:ce("false");break;case"":ce("");break;default:ce(" ")}pe==null||pe(xe)}else ce(xe);ge({fn:()=>J==null?void 0:J(K,xe),value:""})},me=()=>K.columnType===ValueTypesEnum$1.Bool?Ae==null?void 0:Ae.current:oe,{debounce:ge}=useDebounce(400),ye=()=>{ce(""),K.columnType===ValueTypesEnum$1.Bool&&(pe==null||pe("")),J==null||J(K,"")};return reactExports.useEffect(()=>{if(K.columnType===ValueTypesEnum$1.Bool&&oe!==void 0){const xe=String(oe).toLowerCase();switch(xe){case"y":ce("true");break;case"n":ce("false");break;case"":ce("");break;default:ce(" ")}pe==null||pe(xe)}else ce(oe)},[]),jsxRuntimeExports.jsx("div",{className:"table-filter-input",children:jsxRuntimeExports.jsx(Ml,{placeholder:ne("shared.filterInputPlaceholder")||"",value:me()||"",onChange:ve,suffix:oe?jsxRuntimeExports.jsx(Pp,{className:"table-filter-input__cancel-icon",onClick:ye}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),className:oe?"":"table-filter-input__empty"})})},getSelectedRangeCells=(K,J,ne,oe)=>{const{cellIdSplitBy:ce,includeHeaders:ue=!1}=oe,Ae=K.filter(ye=>!ye.suppressHideColumn),pe=new Set(Object.keys(ne).map(ye=>ye.split(ce)[0]).filter((ye,xe,_e)=>_e.indexOf(ye)===xe)),me=Ae.filter(ye=>ye.id&&pe.has(ye.id)).reduce((ye,xe)=>ye.concat(toString$4(xe.Header),"	"),""),ge=J.map(ye=>Ae.filter(xe=>xe.id&&ne[`${xe.id}_${ye.index}`]).reduce((xe,_e)=>{if(_e.id&&_e.id in ye.values){const $e=ye.values[_e.id];return xe.concat(toString$4($e),"	")}return xe},"")).join(`
`).trim();return ue?`${me}
${ge}`:ge},CheckboxSelectionAll=({rows:K,selectedRows:J,onSelectedCheckboxChange:ne})=>{const oe=K.every(ue=>J[ue.index]),ce=ue=>{if(ue){const Ae=K.reduce((pe,ve)=>({...pe,[ve.index]:ue}),{});return ne==null?void 0:ne(Ae)}return ne==null?void 0:ne({})};return K.length>0?jsxRuntimeExports.jsx("div",{className:"checkboxSelectionAll",children:jsxRuntimeExports.jsx(pF,{value:oe,onChange:ce})}):null},CheckboxSelection=({row:K,selectedRows:J,onSelectedCheckboxChange:ne})=>{const oe=ce=>{ce?J[K.index]=!0:delete J[K.index],ne==null||ne(J)};return jsxRuntimeExports.jsx(pF,{value:J[K.index],onChange:oe})};reactTableExports.actions.singleCellSelection="singleCellSelection";reactTableExports.actions.cellRangeSelectionStart="cellRangeSelectionStart";reactTableExports.actions.cellRangeSelecting="cellRangeSelecting";reactTableExports.actions.cellRangeSelectionEnd="cellRangeSelectionEnd";reactTableExports.actions.setSelectedCellIds="setSelectedCellIds";reactTableExports.actions.setCurrentSelectedCellIds="setCurrentSelectedCellIds";reactTableExports.actions.singleFilterCellSelection="singleFilterCellSelection";reactTableExports.actions.deselectCells="deselectCells";reactTableExports.actions.selectCellsArr="selectCellsArr";reactTableExports.actions.filterCellRangeSelecting="filterCellRangeSelecting";reactTableExports.actions.clearState="clearState";reactTableExports.actions.selectAllRowsAllCells="selectAllRowsAllCells";reactTableExports.actions.saveLeaveFilterCellsIds="saveLeaveFilterCellsIds";reactTableExports.actions.selectProvidedRowsCells="selectProvidedRowsCells";reactTableExports.actions.clearSelection="clearSelection";const defaultgetCellRangeSelectionProps=(K,{instance:J,cell:ne,row:oe})=>{var je,We;const{state:{isSelectingCells:ce},dispatch:ue}=J,{allCells:Ae}=oe,pe=Ae.findIndex(ze=>ze.column.id===ColumnNameType.FILTER),ve=(je=Ae[pe!==-1?pe+1:0])==null?void 0:je.id,me=((We=Ae.at(-1))==null?void 0:We.id)||ve,ge=(ze,Xe)=>ue({type:reactTableExports.actions.singleCellSelection,singleCell:ze,event:Xe}),ye=(ze,Xe,Je)=>ue({type:reactTableExports.actions.cellRangeSelectionStart,startCell:ze,event:Xe,rowFirstCell:Je}),xe=(ze,Xe)=>ue({type:reactTableExports.actions.cellRangeSelecting,selectingEndCell:ze,event:Xe}),_e=(ze,Xe)=>ue({type:reactTableExports.actions.cellRangeSelectionEnd,endCell:ze,event:Xe}),$e=(ze,Xe,Je,nt)=>ue({type:reactTableExports.actions.singleFilterCellSelection,startCell:ze,endCell:Xe,row:Je,event:nt}),Ie=(ze,Xe,Je)=>ue({type:reactTableExports.actions.deselectCells,startCell:ze,endCell:Xe,event:Je}),Fe=(ze,Xe,Je)=>ue({type:reactTableExports.actions.filterCellRangeSelecting,endCell:ze,row:Xe,event:Je}),ke=(ze,Xe)=>ue({type:reactTableExports.actions.saveLeaveFilterCellsIds,startCell:ze,endCell:Xe});return[K,{onMouseDown:ze=>{if(ze.persist(),ze.button===ButtonCode.SECONDARY){ge(ne.id,ze);return}ne.column.id===ColumnNameType.FILTER?$e(ve,me,ne.row,ze):ye(ne.id,ze,ve)},onMouseUp:ze=>{ze.persist(),_e(ne.id,ze)},onMouseEnter:ze=>{ce&&(ze.persist(),ne.column.id===ColumnNameType.FILTER?Fe(me,ne.row,ze):xe(ne.id,ze))},onMouseLeave:ze=>{ce&&(ze.persist(),ne.column.id===ColumnNameType.FILTER&&ke(ve,me))},onClick:ze=>{ze.persist(),(ne.column.id===ColumnNameType.FILTER||ze.ctrlKey)&&Ie(ve,me,ze)}}]},getInit=(K,J)=>{var ne;return{...K,selectedCellIds:{...(ne=J.initialState)==null?void 0:ne.selectedCellIds},isSelectingCells:!1,startCellSelection:null,endCellSelection:null,currentSelectedCellIds:{},activeRowStartCell:null,filterSelectedCellIds:{},leaveFilterRowCellsIds:{},startRowFirstCell:null,currentFilterRowCellsSelectedIds:{},cellRangeSelecting:{},freezedSelectedCellIds:{},selectedRowsIds:{},enteredFilterCellRowId:null}},getSingleCellSelection=(K,J)=>Object.keys(K.selectedCellIds).length>0&&K.selectedCellIds[J]?K:{...K,selectedCellIds:{[J]:!0},isSelectingCells:!1},getCellRangeSelectionStart=(K,J)=>{const{startCell:ne,event:oe,rowFirstCell:ce}=J;let ue=Object.assign(K.selectedCellIds,{});const Ae={...ue};return oe.ctrlKey||(ue={[ne]:!0}),{...K,selectedCellIds:{...ue},isSelectingCells:!0,startCellSelection:ne,currentSelectedCellIds:ue,startRowFirstCell:ce,freezedSelectedCellIds:Ae,selectedRowsIds:{}}},getCellRangeSelecting=(K,J,ne,oe)=>{const{selectingEndCell:ce,event:ue}=J,{state:{startCellSelection:Ae},getCellsBetweenId:pe}=ne,ve=pe(Ae,ce),me=Object.assign(K.freezedSelectedCellIds,{});let ge={...K.selectedCellIds};const ye=Object.keys(K.leaveFilterRowCellsIds),xe=()=>{ge={...ge,...ve}},_e=$e=>{for(const Ie of $e)me[Ie]||delete ge[Ie]};return ye.length?ue.ctrlKey?(_e(Object.keys(K.currentFilterRowCellsSelectedIds)),xe()):ge=ve:ue.ctrlKey?(_e(Object.keys(oe.cellRangeSelecting)),xe()):ge=ve,{...K,endCellSelection:ce,currentSelectedCellIds:ve,selectedCellIds:ge,leaveFilterRowCellsIds:{},currentFilterRowCellsSelectedIds:{},cellRangeSelecting:ve,selectedRowsIds:{}}},getCellRangeSelectionEnd=(K,J)=>{const{state:{selectedCellIds:ne,currentSelectedCellIds:oe}}=J;return{...K,selectedCellIds:{...ne,...oe},isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null,filterSelectedCellIds:{},leaveFilterRowCellsIds:{},currentFilterRowCellsSelectedIds:{},cellRangeSelecting:{},freezedSelectedCellIds:{}}},getSelectedCellIds=(K,J)=>{const ne=reactTableExports.functionalUpdate(J.selectedCellIds,K.selectedCellIds);return{...K,selectedCellIds:ne}},getSingleFilterCellSelection=(K,J,ne)=>{const{startCell:oe,endCell:ce,row:ue,event:Ae}=J,{getCellsBetweenId:pe,getRowsBetweenId:ve,state:{currentSelectedCellIds:me,selectedRowsIds:ge},saveSelectedRow:ye}=ne;let xe=pe(oe,ce),_e=ve(oe,ce),$e=Object.assign(K.selectedCellIds,{});const Ie=Object.assign(K.selectedRowsIds,{}),Fe={...$e},ke=(ze,Xe)=>{for(const Je of Xe)ze[Je]=!ze[Je],ze[Je]||delete ze[Je]};Ae.ctrlKey===!0&&(ge[ue.id]?delete Ie[ue.id]:Ie[ue.id]=ye(ue),$e={...me,...$e},ke($e,Object.keys(xe))),Ae.shiftKey===!0&&K.activeRowStartCell&&(xe=pe(K.activeRowStartCell,ce),_e=ve(K.activeRowStartCell,ce),ke($e,Object.keys(xe)));const je=Ae.ctrlKey?$e:xe,We=Ae.ctrlKey?{...Ie,..._e}:{[ue.id]:ye(ue),..._e};return{...K,selectedCellIds:je,currentSelectedCellIds:je,isSelectingCells:!0,startCellSelection:oe,startRowFirstCell:oe,currentFilterRowCellsSelectedIds:xe,freezedSelectedCellIds:Fe,selectedRowsIds:We}},filterCellRangeSelecting=(K,J,ne,oe)=>{const{endCell:ce,row:ue,event:Ae}=J,{getCellsBetweenId:pe,getRowsBetweenId:ve,state:{selectedCellIds:me,selectedRowsIds:ge},saveSelectedRow:ye}=oe;ge[ue.id]&&ne.enteredFilterCellRowId&&ue.id!==ne.enteredFilterCellRowId&&delete ge[ne.enteredFilterCellRowId];const xe=pe(K.startRowFirstCell||K.startCellSelection,ce),_e=ve(K.startRowFirstCell||K.startCellSelection,ce);let $e={...xe};const Ie=Object.assign(K.freezedSelectedCellIds,{});if(Ae.ctrlKey===!0){const Fe={...me};let ke=Object.keys(ne.currentFilterRowCellsSelectedIds);ke.length===0&&(ke=Object.keys(K.cellRangeSelecting));for(const je of ke)!xe[je]&&!Ie[je]&&delete Fe[je];$e={...Fe,...xe}}return{...K,selectedCellIds:$e,currentSelectedCellIds:$e,endCellSelection:ce,filterSelectedCellIds:xe,currentFilterRowCellsSelectedIds:{...K.currentFilterRowCellsSelectedIds,...xe},enteredFilterCellRowId:ue.id,selectedRowsIds:{[ue.id]:ye(ue),..._e}}},saveLeaveFilterCellsIds=(K,J,ne)=>{const{startCell:oe,endCell:ce}=J,{getCellsBetweenId:ue}=ne,Ae=ue(oe,ce);return{...K,leaveFilterRowCellsIds:Ae}},deselectCells=(K,J,ne)=>{const{startCell:oe,endCell:ce,event:ue}=J,{getCellsBetweenId:Ae}=ne,pe=Ae(oe,ce),ve=Object.assign(K.selectedCellIds,{});if(ue.target.tagName==="INPUT"){const me=Object.keys(pe);for(const ge of me)ue.target.checked?ve[ge]=!0:delete ve[ge]}return{...K,selectedCellIds:ve,isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null}},selectCellsArr=(K,J,ne)=>{const{startCell:oe,endCell:ce}=J,{getCellsBetweenId:ue}=ne,Ae=ue(oe,ce);return{...K,selectedCellIds:Ae,isSelectingCells:!1,currentSelectedCellIds:Ae,startCellSelection:oe,endCellSelection:ce}},clearState=K=>({...K,selectedCellIds:{},isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null,currentFilterRowCellsSelectedIds:{},cellRangeSelecting:{},freezedSelectedCellIds:{}}),selectAllRowsAllCells=(K,J)=>{var pe,ve;const{getCellsBetweenId:ne,preSortedFlatRows:oe=[]}=J,ce=oe[0].allCells[1].id,ue=((ve=(pe=oe.at(-1))==null?void 0:pe.allCells.at(-1))==null?void 0:ve.id)||ce,Ae=ne(ce,ue);return{...K,selectedCellIds:Ae,isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null}},setCurrentSelectedCellIds=(K,J)=>({...K,currentSelectedCellIds:J}),selectProvidedRowsCells=(K,J)=>({...K,selectedCellIds:J,isSelectingCells:!1,currentSelectedCellIds:J}),getClearedSelection=K=>({...K,selectedCellIds:{}});function reducer$4(K,J,ne,oe){switch(J.type){case reactTableExports.actions.init:return getInit(K,oe);case reactTableExports.actions.singleCellSelection:return getSingleCellSelection(K,J.singleCell);case reactTableExports.actions.cellRangeSelectionStart:return getCellRangeSelectionStart(K,J);case reactTableExports.actions.cellRangeSelecting:return getCellRangeSelecting(K,J,oe,ne);case reactTableExports.actions.cellRangeSelectionEnd:return getCellRangeSelectionEnd(K,oe);case reactTableExports.actions.setSelectedCellIds:return getSelectedCellIds(K,J);case reactTableExports.actions.singleFilterCellSelection:return getSingleFilterCellSelection(K,J,oe);case reactTableExports.actions.filterCellRangeSelecting:return filterCellRangeSelecting(K,J,ne,oe);case reactTableExports.actions.saveLeaveFilterCellsIds:return saveLeaveFilterCellsIds(K,J,oe);case reactTableExports.actions.deselectCells:return deselectCells(K,J,oe);case reactTableExports.actions.selectCellsArr:return selectCellsArr(K,J,oe);case reactTableExports.actions.clearState:return clearState(K);case reactTableExports.actions.selectAllRowsAllCells:return selectAllRowsAllCells(K,oe);case reactTableExports.actions.setCurrentSelectedCellIds:return setCurrentSelectedCellIds(K,J.selectedCellIds);case reactTableExports.actions.selectProvidedRowsCells:return selectProvidedRowsCells(K,J.selectedCellIds);case reactTableExports.actions.clearSelection:return getClearedSelection(K);default:return}}function useInstance$2(K){const{dispatch:J,allColumns:ne,rows:oe,state:ce}=K,ue=reactExports.useMemo(()=>({}),[]),pe=K.cellIdSplitBy||"_";Object.assign(K,{cellIdSplitBy:pe});const ve=reactExports.useCallback(ze=>J({type:reactTableExports.actions.setSelectedCellIds,selectedCellIds:ze}),[J]),me=reactExports.useCallback(ze=>J({type:reactTableExports.actions.setCurrentSelectedCellIds,selectedCellIds:ze}),[J]),ge=reactExports.useCallback((ze,Xe)=>{if(!ue[ze]||!ue[Xe])return null;const Je=[ue[ze].row.index,ue[Xe].row.index],nt=[];ne.forEach((qe,Se)=>{(qe.id===ue[ze].column.id||qe.id===ue[Xe].column.id)&&nt.push(Se)});const et=[],tt=[];for(let qe=Math.min(...nt);qe<=Math.max(...nt);qe+=1)et.push(ne[qe].id);for(let qe=Math.min(...Je);qe<=Math.max(...Je);qe+=1)tt.push(oe[qe].index);const st={};if(tt.length&&et.length)for(const qe of tt)for(const Se of et){const Re=`${Se}${pe}${qe}`,Be=ue[Re];st[Be.id]=!0}return st},[ne,ue,pe,oe]),ye=ze=>({_key:ze.original._key,_t:ze.original._t,allCells:ze.allCells.map(Xe=>Xe.id).filter(Xe=>!Xe.includes("filter"))}),xe=reactExports.useCallback((ze,Xe)=>{if(!ue[ze]||!ue[Xe])return null;const Je=[ue[ze].row.index,ue[Xe].row.index],nt=[];ne.forEach((qe,Se)=>{(qe.id===ue[ze].column.id||qe.id===ue[Xe].column.id)&&nt.push(Se)});const et=[],tt=[];for(let qe=Math.min(...nt);qe<=Math.max(...nt);qe+=1)et.push(ne[qe].id);for(let qe=Math.min(...Je);qe<=Math.max(...Je);qe+=1)tt.push(oe[qe].index);const st={};if(tt.length&&et.length)for(const qe of tt)for(const Se of et){const Re=`${Se}${pe}${qe}`,Be=ue[Re];st[Be.row.id]=ye(Be.row)}return st},[ne,ue,pe,oe]);Object.assign(K,{getCellsBetweenId:ge,getRowsBetweenId:xe,cellsById:ue,setSelectedCellIds:ve,setCurrentSelectedCellIds:me,rewriteActiveRowStartCell:ze=>{ce.activeRowStartCell=ze},selectNewCellsArr:(ze,Xe)=>{J({type:reactTableExports.actions.selectCellsArr,startCell:ze,endCell:Xe})},clearCellSelectionState:()=>{J({type:reactTableExports.actions.clearState})},selectAllRowsAllCells:()=>{J({type:reactTableExports.actions.selectAllRowsAllCells})},saveSelectedRow:ye,changeSelectedCell:ze=>{ce.selectedCellIds=ze},selectProvidedRowsCells:ze=>{const Xe=ze.reduce((Je,nt)=>(nt.allCells.forEach(et=>{et.id.includes(ColumnNameType.FILTER)||(Je[et.id]=!0)}),Je),{});J({type:reactTableExports.actions.selectProvidedRowsCells,selectedCellIds:Xe})},clearSelection:()=>{J({type:reactTableExports.actions.clearSelection})}})}function prepareRow(K,{instance:{cellsById:J,cellIdSplitBy:ne},instance:oe}){K.allCells.forEach(ce=>{Object.assign(ce,{id:`${ce.column.id}${ne}${K.index}`,getCellRangeSelectionProps:reactTableExports.makePropGetter(oe.getHooks().getCellRangeSelectionProps,{instance:oe,row:K,cell:ce})}),Object.assign(J,{[ce.id]:ce})})}const useCellRangeSelection=K=>{Object.assign(K,{getCellRangeSelectionProps:[defaultgetCellRangeSelectionProps]}),K.stateReducers.push(reducer$4),K.useInstance.push(useInstance$2),K.prepareRow.push(prepareRow)};useCellRangeSelection.pluginName="useCellRangeSelection";reactTableExports.actions.updateSelectedRowsPerPageState="updateSelectedRowsPerPageState";reactTableExports.actions.deletePreviousKey="deletePreviousKey";function reducer$3(K,J){if(J.type===reactTableExports.actions.init)return{...K,selectedRowsPerPageState:{}};if(J.type===reactTableExports.actions.updateSelectedRowsPerPageState){const{newState:ne}=J;return{...K,selectedRowsPerPageState:ne}}if(J.type===reactTableExports.actions.deletePreviousKey){const{oldKey:ne}=J,{selectedRowsPerPageState:oe}=K,ce=structuredClone(oe);return delete ce[ne],{...K,selectedRowsPerPageState:ce}}}function useInstance$1(K){const{dispatch:J}=K;Object.assign(K,{updateSelectedRowsPerPageState:ce=>{J({type:reactTableExports.actions.updateSelectedRowsPerPageState,newState:ce})},deletePrevSelectedCheckbox:ce=>{J({type:reactTableExports.actions.deletePreviousKey,oldKey:ce})}})}const useFilterColumnCheckBox=K=>{K.stateReducers.push(reducer$3),K.useInstance.push(useInstance$1)};useFilterColumnCheckBox.pluginName="useFilterColumnCheckBox";function areInputsEqual$1(K,J){if(K.length!==J.length)return!1;for(var ne=0;ne<K.length;ne++)if(K[ne]!==J[ne])return!1;return!0}function useMemoOne(K,J){var ne=reactExports.useState(function(){return{inputs:J,result:K()}})[0],oe=reactExports.useRef(!0),ce=reactExports.useRef(ne),ue=oe.current||!!(J&&ce.current.inputs&&areInputsEqual$1(J,ce.current.inputs)),Ae=ue?ce.current:{inputs:J,result:K()};return reactExports.useEffect(function(){oe.current=!1,ce.current=Ae},[Ae]),Ae.result}function useCallbackOne(K,J){return useMemoOne(function(){return K},J)}var useMemo=useMemoOne,useCallback=useCallbackOne,getRect=function(J){var ne=J.top,oe=J.right,ce=J.bottom,ue=J.left,Ae=oe-ue,pe=ce-ne,ve={top:ne,right:oe,bottom:ce,left:ue,width:Ae,height:pe,x:ue,y:ne,center:{x:(oe+ue)/2,y:(ce+ne)/2}};return ve},expand=function(J,ne){return{top:J.top-ne.top,left:J.left-ne.left,bottom:J.bottom+ne.bottom,right:J.right+ne.right}},shrink=function(J,ne){return{top:J.top+ne.top,left:J.left+ne.left,bottom:J.bottom-ne.bottom,right:J.right-ne.right}},shift=function(J,ne){return{top:J.top+ne.y,left:J.left+ne.x,bottom:J.bottom+ne.y,right:J.right+ne.x}},noSpacing$1={top:0,right:0,bottom:0,left:0},createBox=function(J){var ne=J.borderBox,oe=J.margin,ce=oe===void 0?noSpacing$1:oe,ue=J.border,Ae=ue===void 0?noSpacing$1:ue,pe=J.padding,ve=pe===void 0?noSpacing$1:pe,me=getRect(expand(ne,ce)),ge=getRect(shrink(ne,Ae)),ye=getRect(shrink(ge,ve));return{marginBox:me,borderBox:getRect(ne),paddingBox:ge,contentBox:ye,margin:ce,border:Ae,padding:ve}},parse$2=function(J){var ne=J.slice(0,-2),oe=J.slice(-2);if(oe!=="px")return 0;var ce=Number(ne);return isNaN(ce)&&invariant$1(!1),ce},getWindowScroll$1=function(){return{x:window.pageXOffset,y:window.pageYOffset}},offset=function(J,ne){var oe=J.borderBox,ce=J.border,ue=J.margin,Ae=J.padding,pe=shift(oe,ne);return createBox({borderBox:pe,border:ce,margin:ue,padding:Ae})},withScroll=function(J,ne){return ne===void 0&&(ne=getWindowScroll$1()),offset(J,ne)},calculateBox=function(J,ne){var oe={top:parse$2(ne.marginTop),right:parse$2(ne.marginRight),bottom:parse$2(ne.marginBottom),left:parse$2(ne.marginLeft)},ce={top:parse$2(ne.paddingTop),right:parse$2(ne.paddingRight),bottom:parse$2(ne.paddingBottom),left:parse$2(ne.paddingLeft)},ue={top:parse$2(ne.borderTopWidth),right:parse$2(ne.borderRightWidth),bottom:parse$2(ne.borderBottomWidth),left:parse$2(ne.borderLeftWidth)};return createBox({borderBox:J,margin:oe,padding:ce,border:ue})},getBox=function(J){var ne=J.getBoundingClientRect(),oe=window.getComputedStyle(J);return calculateBox(ne,oe)},safeIsNaN=Number.isNaN||function(J){return typeof J=="number"&&J!==J};function isEqual$3(K,J){return!!(K===J||safeIsNaN(K)&&safeIsNaN(J))}function areInputsEqual(K,J){if(K.length!==J.length)return!1;for(var ne=0;ne<K.length;ne++)if(!isEqual$3(K[ne],J[ne]))return!1;return!0}function memoizeOne(K,J){J===void 0&&(J=areInputsEqual);var ne=null;function oe(){for(var ce=[],ue=0;ue<arguments.length;ue++)ce[ue]=arguments[ue];if(ne&&ne.lastThis===this&&J(ce,ne.lastArgs))return ne.lastResult;var Ae=K.apply(this,ce);return ne={lastResult:Ae,lastArgs:ce,lastThis:this},Ae}return oe.clear=function(){ne=null},oe}var rafSchd=function(J){var ne=[],oe=null,ce=function(){for(var Ae=arguments.length,pe=new Array(Ae),ve=0;ve<Ae;ve++)pe[ve]=arguments[ve];ne=pe,!oe&&(oe=requestAnimationFrame(function(){oe=null,J.apply(void 0,ne)}))};return ce.cancel=function(){oe&&(cancelAnimationFrame(oe),oe=null)},ce};function log(K,J){}log.bind(null,"warn");log.bind(null,"error");function noop$2$1(){}function getOptions(K,J){return{...K,...J}}function bindEvents(K,J,ne){const oe=J.map(ce=>{const ue=getOptions(ne,ce.options);return K.addEventListener(ce.eventName,ce.fn,ue),function(){K.removeEventListener(ce.eventName,ce.fn,ue)}});return function(){oe.forEach(ue=>{ue()})}}const prefix$1="Invariant failed";class RbdInvariant extends Error{}RbdInvariant.prototype.toString=function(){return this.message};function invariant(K,J){throw new RbdInvariant(prefix$1)}class ErrorBoundary extends React.Component{constructor(...J){super(...J),this.callbacks=null,this.unbind=noop$2$1,this.onWindowError=ne=>{const oe=this.getCallbacks();oe.isDragging()&&oe.tryAbort(),ne.error instanceof RbdInvariant&&ne.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=ne=>{this.callbacks=ne}}componentDidMount(){this.unbind=bindEvents(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(J){if(J instanceof RbdInvariant){this.setState({});return}throw J}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const dragHandleUsageInstructions=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,position$3=K=>K+1,onDragStart=K=>`
  You have lifted an item in position ${position$3(K.source.index)}
`,withLocation=(K,J)=>{const ne=K.droppableId===J.droppableId,oe=position$3(K.index),ce=position$3(J.index);return ne?`
      You have moved the item from position ${oe}
      to position ${ce}
    `:`
    You have moved the item from position ${oe}
    in list ${K.droppableId}
    to list ${J.droppableId}
    in position ${ce}
  `},withCombine=(K,J,ne)=>J.droppableId===ne.droppableId?`
      The item ${K}
      has been combined with ${ne.draggableId}`:`
      The item ${K}
      in list ${J.droppableId}
      has been combined with ${ne.draggableId}
      in list ${ne.droppableId}
    `,onDragUpdate=K=>{const J=K.destination;if(J)return withLocation(K.source,J);const ne=K.combine;return ne?withCombine(K.draggableId,K.source,ne):"You are over an area that cannot be dropped on"},returnedToStart=K=>`
  The item has returned to its starting position
  of ${position$3(K.index)}
`,onDragEnd=K=>{if(K.reason==="CANCEL")return`
      Movement cancelled.
      ${returnedToStart(K.source)}
    `;const J=K.destination,ne=K.combine;return J?`
      You have dropped the item.
      ${withLocation(K.source,J)}
    `:ne?`
      You have dropped the item.
      ${withCombine(K.draggableId,K.source,ne)}
    `:`
    The item has been dropped while not over a drop area.
    ${returnedToStart(K.source)}
  `},preset={dragHandleUsageInstructions,onDragStart,onDragUpdate,onDragEnd};var preset$1=preset;const origin={x:0,y:0},add$1=(K,J)=>({x:K.x+J.x,y:K.y+J.y}),subtract=(K,J)=>({x:K.x-J.x,y:K.y-J.y}),isEqual$1=(K,J)=>K.x===J.x&&K.y===J.y,negate=K=>({x:K.x!==0?-K.x:0,y:K.y!==0?-K.y:0}),patch$1=(K,J,ne=0)=>K==="x"?{x:J,y:ne}:{x:ne,y:J},distance$2=(K,J)=>Math.sqrt((J.x-K.x)**2+(J.y-K.y)**2),closest$1=(K,J)=>Math.min(...J.map(ne=>distance$2(K,ne))),apply=K=>J=>({x:K(J.x),y:K(J.y)});var executeClip=(K,J)=>{const ne=getRect({top:Math.max(J.top,K.top),right:Math.min(J.right,K.right),bottom:Math.min(J.bottom,K.bottom),left:Math.max(J.left,K.left)});return ne.width<=0||ne.height<=0?null:ne};const offsetByPosition=(K,J)=>({top:K.top+J.y,left:K.left+J.x,bottom:K.bottom+J.y,right:K.right+J.x}),getCorners=K=>[{x:K.left,y:K.top},{x:K.right,y:K.top},{x:K.left,y:K.bottom},{x:K.right,y:K.bottom}],noSpacing={top:0,right:0,bottom:0,left:0},scroll$1=(K,J)=>J?offsetByPosition(K,J.scroll.diff.displacement):K,increase=(K,J,ne)=>ne&&ne.increasedBy?{...K,[J.end]:K[J.end]+ne.increasedBy[J.line]}:K,clip=(K,J)=>J&&J.shouldClipSubject?executeClip(J.pageMarginBox,K):getRect(K);var getSubject=({page:K,withPlaceholder:J,axis:ne,frame:oe})=>{const ce=scroll$1(K.marginBox,oe),ue=increase(ce,ne,J),Ae=clip(ue,oe);return{page:K,withPlaceholder:J,active:Ae}},scrollDroppable=(K,J)=>{K.frame||invariant();const ne=K.frame,oe=subtract(J,ne.scroll.initial),ce=negate(oe),ue={...ne,scroll:{initial:ne.scroll.initial,current:J,diff:{value:oe,displacement:ce},max:ne.scroll.max}},Ae=getSubject({page:K.subject.page,withPlaceholder:K.subject.withPlaceholder,axis:K.axis,frame:ue});return{...K,frame:ue,subject:Ae}};const toDroppableMap=memoizeOne(K=>K.reduce((J,ne)=>(J[ne.descriptor.id]=ne,J),{})),toDraggableMap=memoizeOne(K=>K.reduce((J,ne)=>(J[ne.descriptor.id]=ne,J),{})),toDroppableList=memoizeOne(K=>Object.values(K)),toDraggableList=memoizeOne(K=>Object.values(K));var getDraggablesInsideDroppable=memoizeOne((K,J)=>toDraggableList(J).filter(oe=>K===oe.descriptor.droppableId).sort((oe,ce)=>oe.descriptor.index-ce.descriptor.index));function tryGetDestination(K){return K.at&&K.at.type==="REORDER"?K.at.destination:null}function tryGetCombine(K){return K.at&&K.at.type==="COMBINE"?K.at.combine:null}var removeDraggableFromList=memoizeOne((K,J)=>J.filter(ne=>ne.descriptor.id!==K.descriptor.id)),moveToNextCombine=({isMovingForward:K,draggable:J,destination:ne,insideDestination:oe,previousImpact:ce})=>{if(!ne.isCombineEnabled||!tryGetDestination(ce))return null;function Ae(_e){const $e={type:"COMBINE",combine:{draggableId:_e,droppableId:ne.descriptor.id}};return{...ce,at:$e}}const pe=ce.displaced.all,ve=pe.length?pe[0]:null;if(K)return ve?Ae(ve):null;const me=removeDraggableFromList(J,oe);if(!ve){if(!me.length)return null;const _e=me[me.length-1];return Ae(_e.descriptor.id)}const ge=me.findIndex(_e=>_e.descriptor.id===ve);ge===-1&&invariant();const ye=ge-1;if(ye<0)return null;const xe=me[ye];return Ae(xe.descriptor.id)},isHomeOf=(K,J)=>K.descriptor.droppableId===J.descriptor.id;const noDisplacedBy={point:origin,value:0},emptyGroups={invisible:{},visible:{},all:[]},noImpact={displaced:emptyGroups,displacedBy:noDisplacedBy,at:null};var noImpact$1=noImpact,isWithin=(K,J)=>ne=>K<=ne&&ne<=J,isPartiallyVisibleThroughFrame=K=>{const J=isWithin(K.top,K.bottom),ne=isWithin(K.left,K.right);return oe=>{if(J(oe.top)&&J(oe.bottom)&&ne(oe.left)&&ne(oe.right))return!0;const ue=J(oe.top)||J(oe.bottom),Ae=ne(oe.left)||ne(oe.right);if(ue&&Ae)return!0;const ve=oe.top<K.top&&oe.bottom>K.bottom,me=oe.left<K.left&&oe.right>K.right;return ve&&me?!0:ve&&Ae||me&&ue}},isTotallyVisibleThroughFrame=K=>{const J=isWithin(K.top,K.bottom),ne=isWithin(K.left,K.right);return oe=>J(oe.top)&&J(oe.bottom)&&ne(oe.left)&&ne(oe.right)};const vertical={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},horizontal={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var isTotallyVisibleThroughFrameOnAxis=K=>J=>{const ne=isWithin(J.top,J.bottom),oe=isWithin(J.left,J.right);return ce=>K===vertical?ne(ce.top)&&ne(ce.bottom):oe(ce.left)&&oe(ce.right)};const getDroppableDisplaced=(K,J)=>{const ne=J.frame?J.frame.scroll.diff.displacement:origin;return offsetByPosition(K,ne)},isVisibleInDroppable=(K,J,ne)=>J.subject.active?ne(J.subject.active)(K):!1,isVisibleInViewport=(K,J,ne)=>ne(J)(K),isVisible$1=({target:K,destination:J,viewport:ne,withDroppableDisplacement:oe,isVisibleThroughFrameFn:ce})=>{const ue=oe?getDroppableDisplaced(K,J):K;return isVisibleInDroppable(ue,J,ce)&&isVisibleInViewport(ue,ne,ce)},isPartiallyVisible=K=>isVisible$1({...K,isVisibleThroughFrameFn:isPartiallyVisibleThroughFrame}),isTotallyVisible=K=>isVisible$1({...K,isVisibleThroughFrameFn:isTotallyVisibleThroughFrame}),isTotallyVisibleOnAxis=K=>isVisible$1({...K,isVisibleThroughFrameFn:isTotallyVisibleThroughFrameOnAxis(K.destination.axis)}),getShouldAnimate=(K,J,ne)=>{if(typeof ne=="boolean")return ne;if(!J)return!0;const{invisible:oe,visible:ce}=J;if(oe[K])return!1;const ue=ce[K];return ue?ue.shouldAnimate:!0};function getTarget(K,J){const ne=K.page.marginBox,oe={top:J.point.y,right:0,bottom:0,left:J.point.x};return getRect(expand(ne,oe))}function getDisplacementGroups({afterDragging:K,destination:J,displacedBy:ne,viewport:oe,forceShouldAnimate:ce,last:ue}){return K.reduce(function(pe,ve){const me=getTarget(ve,ne),ge=ve.descriptor.id;if(pe.all.push(ge),!isPartiallyVisible({target:me,destination:J,viewport:oe,withDroppableDisplacement:!0}))return pe.invisible[ve.descriptor.id]=!0,pe;const xe=getShouldAnimate(ge,ue,ce),_e={draggableId:ge,shouldAnimate:xe};return pe.visible[ge]=_e,pe},{all:[],visible:{},invisible:{}})}function getIndexOfLastItem(K,J){if(!K.length)return 0;const ne=K[K.length-1].descriptor.index;return J.inHomeList?ne:ne+1}function goAtEnd({insideDestination:K,inHomeList:J,displacedBy:ne,destination:oe}){const ce=getIndexOfLastItem(K,{inHomeList:J});return{displaced:emptyGroups,displacedBy:ne,at:{type:"REORDER",destination:{droppableId:oe.descriptor.id,index:ce}}}}function calculateReorderImpact({draggable:K,insideDestination:J,destination:ne,viewport:oe,displacedBy:ce,last:ue,index:Ae,forceShouldAnimate:pe}){const ve=isHomeOf(K,ne);if(Ae==null)return goAtEnd({insideDestination:J,inHomeList:ve,displacedBy:ce,destination:ne});const me=J.find($e=>$e.descriptor.index===Ae);if(!me)return goAtEnd({insideDestination:J,inHomeList:ve,displacedBy:ce,destination:ne});const ge=removeDraggableFromList(K,J),ye=J.indexOf(me),xe=ge.slice(ye);return{displaced:getDisplacementGroups({afterDragging:xe,destination:ne,displacedBy:ce,last:ue,viewport:oe.frame,forceShouldAnimate:pe}),displacedBy:ce,at:{type:"REORDER",destination:{droppableId:ne.descriptor.id,index:Ae}}}}function didStartAfterCritical(K,J){return!!J.effected[K]}var fromCombine=({isMovingForward:K,destination:J,draggables:ne,combine:oe,afterCritical:ce})=>{if(!J.isCombineEnabled)return null;const ue=oe.draggableId,pe=ne[ue].descriptor.index;return didStartAfterCritical(ue,ce)?K?pe:pe-1:K?pe+1:pe},fromReorder=({isMovingForward:K,isInHomeList:J,insideDestination:ne,location:oe})=>{if(!ne.length)return null;const ce=oe.index,ue=K?ce+1:ce-1,Ae=ne[0].descriptor.index,pe=ne[ne.length-1].descriptor.index,ve=J?pe:pe+1;return ue<Ae||ue>ve?null:ue},moveToNextIndex=({isMovingForward:K,isInHomeList:J,draggable:ne,draggables:oe,destination:ce,insideDestination:ue,previousImpact:Ae,viewport:pe,afterCritical:ve})=>{const me=Ae.at;if(me||invariant(),me.type==="REORDER"){const ye=fromReorder({isMovingForward:K,isInHomeList:J,location:me.destination,insideDestination:ue});return ye==null?null:calculateReorderImpact({draggable:ne,insideDestination:ue,destination:ce,viewport:pe,last:Ae.displaced,displacedBy:Ae.displacedBy,index:ye})}const ge=fromCombine({isMovingForward:K,destination:ce,displaced:Ae.displaced,draggables:oe,combine:me.combine,afterCritical:ve});return ge==null?null:calculateReorderImpact({draggable:ne,insideDestination:ue,destination:ce,viewport:pe,last:Ae.displaced,displacedBy:Ae.displacedBy,index:ge})},getCombinedItemDisplacement=({displaced:K,afterCritical:J,combineWith:ne,displacedBy:oe})=>{const ce=!!(K.visible[ne]||K.invisible[ne]);return didStartAfterCritical(ne,J)?ce?origin:negate(oe.point):ce?oe.point:origin},whenCombining=({afterCritical:K,impact:J,draggables:ne})=>{const oe=tryGetCombine(J);oe||invariant();const ce=oe.draggableId,ue=ne[ce].page.borderBox.center,Ae=getCombinedItemDisplacement({displaced:J.displaced,afterCritical:K,combineWith:ce,displacedBy:J.displacedBy});return add$1(ue,Ae)};const distanceFromStartToBorderBoxCenter=(K,J)=>J.margin[K.start]+J.borderBox[K.size]/2,distanceFromEndToBorderBoxCenter=(K,J)=>J.margin[K.end]+J.borderBox[K.size]/2,getCrossAxisBorderBoxCenter=(K,J,ne)=>J[K.crossAxisStart]+ne.margin[K.crossAxisStart]+ne.borderBox[K.crossAxisSize]/2,goAfter=({axis:K,moveRelativeTo:J,isMoving:ne})=>patch$1(K.line,J.marginBox[K.end]+distanceFromStartToBorderBoxCenter(K,ne),getCrossAxisBorderBoxCenter(K,J.marginBox,ne)),goBefore=({axis:K,moveRelativeTo:J,isMoving:ne})=>patch$1(K.line,J.marginBox[K.start]-distanceFromEndToBorderBoxCenter(K,ne),getCrossAxisBorderBoxCenter(K,J.marginBox,ne)),goIntoStart=({axis:K,moveInto:J,isMoving:ne})=>patch$1(K.line,J.contentBox[K.start]+distanceFromStartToBorderBoxCenter(K,ne),getCrossAxisBorderBoxCenter(K,J.contentBox,ne));var whenReordering=({impact:K,draggable:J,draggables:ne,droppable:oe,afterCritical:ce})=>{const ue=getDraggablesInsideDroppable(oe.descriptor.id,ne),Ae=J.page,pe=oe.axis;if(!ue.length)return goIntoStart({axis:pe,moveInto:oe.page,isMoving:Ae});const{displaced:ve,displacedBy:me}=K,ge=ve.all[0];if(ge){const xe=ne[ge];if(didStartAfterCritical(ge,ce))return goBefore({axis:pe,moveRelativeTo:xe.page,isMoving:Ae});const _e=offset(xe.page,me.point);return goBefore({axis:pe,moveRelativeTo:_e,isMoving:Ae})}const ye=ue[ue.length-1];if(ye.descriptor.id===J.descriptor.id)return Ae.borderBox.center;if(didStartAfterCritical(ye.descriptor.id,ce)){const xe=offset(ye.page,negate(ce.displacedBy.point));return goAfter({axis:pe,moveRelativeTo:xe,isMoving:Ae})}return goAfter({axis:pe,moveRelativeTo:ye.page,isMoving:Ae})},withDroppableDisplacement=(K,J)=>{const ne=K.frame;return ne?add$1(J,ne.scroll.diff.displacement):J};const getResultWithoutDroppableDisplacement=({impact:K,draggable:J,droppable:ne,draggables:oe,afterCritical:ce})=>{const ue=J.page.borderBox.center,Ae=K.at;return!ne||!Ae?ue:Ae.type==="REORDER"?whenReordering({impact:K,draggable:J,draggables:oe,droppable:ne,afterCritical:ce}):whenCombining({impact:K,draggables:oe,afterCritical:ce})};var getPageBorderBoxCenterFromImpact=K=>{const J=getResultWithoutDroppableDisplacement(K),ne=K.droppable;return ne?withDroppableDisplacement(ne,J):J},scrollViewport=(K,J)=>{const ne=subtract(J,K.scroll.initial),oe=negate(ne);return{frame:getRect({top:J.y,bottom:J.y+K.frame.height,left:J.x,right:J.x+K.frame.width}),scroll:{initial:K.scroll.initial,max:K.scroll.max,current:J,diff:{value:ne,displacement:oe}}}};function getDraggables$1(K,J){return K.map(ne=>J[ne])}function tryGetVisible(K,J){for(let ne=0;ne<J.length;ne++){const oe=J[ne].visible[K];if(oe)return oe}return null}var speculativelyIncrease=({impact:K,viewport:J,destination:ne,draggables:oe,maxScrollChange:ce})=>{const ue=scrollViewport(J,add$1(J.scroll.current,ce)),Ae=ne.frame?scrollDroppable(ne,add$1(ne.frame.scroll.current,ce)):ne,pe=K.displaced,ve=getDisplacementGroups({afterDragging:getDraggables$1(pe.all,oe),destination:ne,displacedBy:K.displacedBy,viewport:ue.frame,last:pe,forceShouldAnimate:!1}),me=getDisplacementGroups({afterDragging:getDraggables$1(pe.all,oe),destination:Ae,displacedBy:K.displacedBy,viewport:J.frame,last:pe,forceShouldAnimate:!1}),ge={},ye={},xe=[pe,ve,me];return pe.all.forEach($e=>{const Ie=tryGetVisible($e,xe);if(Ie){ye[$e]=Ie;return}ge[$e]=!0}),{...K,displaced:{all:pe.all,invisible:ge,visible:ye}}},withViewportDisplacement=(K,J)=>add$1(K.scroll.diff.displacement,J),getClientFromPageBorderBoxCenter=({pageBorderBoxCenter:K,draggable:J,viewport:ne})=>{const oe=withViewportDisplacement(ne,K),ce=subtract(oe,J.page.borderBox.center);return add$1(J.client.borderBox.center,ce)},isTotallyVisibleInNewLocation=({draggable:K,destination:J,newPageBorderBoxCenter:ne,viewport:oe,withDroppableDisplacement:ce,onlyOnMainAxis:ue=!1})=>{const Ae=subtract(ne,K.page.borderBox.center),ve={target:offsetByPosition(K.page.borderBox,Ae),destination:J,withDroppableDisplacement:ce,viewport:oe};return ue?isTotallyVisibleOnAxis(ve):isTotallyVisible(ve)},moveToNextPlace=({isMovingForward:K,draggable:J,destination:ne,draggables:oe,previousImpact:ce,viewport:ue,previousPageBorderBoxCenter:Ae,previousClientSelection:pe,afterCritical:ve})=>{if(!ne.isEnabled)return null;const me=getDraggablesInsideDroppable(ne.descriptor.id,oe),ge=isHomeOf(J,ne),ye=moveToNextCombine({isMovingForward:K,draggable:J,destination:ne,insideDestination:me,previousImpact:ce})||moveToNextIndex({isMovingForward:K,isInHomeList:ge,draggable:J,draggables:oe,destination:ne,insideDestination:me,previousImpact:ce,viewport:ue,afterCritical:ve});if(!ye)return null;const xe=getPageBorderBoxCenterFromImpact({impact:ye,draggable:J,droppable:ne,draggables:oe,afterCritical:ve});if(isTotallyVisibleInNewLocation({draggable:J,destination:ne,newPageBorderBoxCenter:xe,viewport:ue.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:xe,draggable:J,viewport:ue}),impact:ye,scrollJumpRequest:null};const $e=subtract(xe,Ae),Ie=speculativelyIncrease({impact:ye,viewport:ue,destination:ne,draggables:oe,maxScrollChange:$e});return{clientSelection:pe,impact:Ie,scrollJumpRequest:$e}};const getKnownActive=K=>{const J=K.subject.active;return J||invariant(),J};var getBestCrossAxisDroppable=({isMovingForward:K,pageBorderBoxCenter:J,source:ne,droppables:oe,viewport:ce})=>{const ue=ne.subject.active;if(!ue)return null;const Ae=ne.axis,pe=isWithin(ue[Ae.start],ue[Ae.end]),ve=toDroppableList(oe).filter(ge=>ge!==ne).filter(ge=>ge.isEnabled).filter(ge=>!!ge.subject.active).filter(ge=>isPartiallyVisibleThroughFrame(ce.frame)(getKnownActive(ge))).filter(ge=>{const ye=getKnownActive(ge);return K?ue[Ae.crossAxisEnd]<ye[Ae.crossAxisEnd]:ye[Ae.crossAxisStart]<ue[Ae.crossAxisStart]}).filter(ge=>{const ye=getKnownActive(ge),xe=isWithin(ye[Ae.start],ye[Ae.end]);return pe(ye[Ae.start])||pe(ye[Ae.end])||xe(ue[Ae.start])||xe(ue[Ae.end])}).sort((ge,ye)=>{const xe=getKnownActive(ge)[Ae.crossAxisStart],_e=getKnownActive(ye)[Ae.crossAxisStart];return K?xe-_e:_e-xe}).filter((ge,ye,xe)=>getKnownActive(ge)[Ae.crossAxisStart]===getKnownActive(xe[0])[Ae.crossAxisStart]);if(!ve.length)return null;if(ve.length===1)return ve[0];const me=ve.filter(ge=>isWithin(getKnownActive(ge)[Ae.start],getKnownActive(ge)[Ae.end])(J[Ae.line]));return me.length===1?me[0]:me.length>1?me.sort((ge,ye)=>getKnownActive(ge)[Ae.start]-getKnownActive(ye)[Ae.start])[0]:ve.sort((ge,ye)=>{const xe=closest$1(J,getCorners(getKnownActive(ge))),_e=closest$1(J,getCorners(getKnownActive(ye)));return xe!==_e?xe-_e:getKnownActive(ge)[Ae.start]-getKnownActive(ye)[Ae.start]})[0]};const getCurrentPageBorderBoxCenter=(K,J)=>{const ne=K.page.borderBox.center;return didStartAfterCritical(K.descriptor.id,J)?subtract(ne,J.displacedBy.point):ne},getCurrentPageBorderBox=(K,J)=>{const ne=K.page.borderBox;return didStartAfterCritical(K.descriptor.id,J)?offsetByPosition(ne,negate(J.displacedBy.point)):ne};var getClosestDraggable=({pageBorderBoxCenter:K,viewport:J,destination:ne,insideDestination:oe,afterCritical:ce})=>oe.filter(Ae=>isTotallyVisible({target:getCurrentPageBorderBox(Ae,ce),destination:ne,viewport:J.frame,withDroppableDisplacement:!0})).sort((Ae,pe)=>{const ve=distance$2(K,withDroppableDisplacement(ne,getCurrentPageBorderBoxCenter(Ae,ce))),me=distance$2(K,withDroppableDisplacement(ne,getCurrentPageBorderBoxCenter(pe,ce)));return ve<me?-1:me<ve?1:Ae.descriptor.index-pe.descriptor.index})[0]||null,getDisplacedBy=memoizeOne(function(J,ne){const oe=ne[J.line];return{value:oe,point:patch$1(J.line,oe)}});const getRequiredGrowthForPlaceholder=(K,J,ne)=>{const oe=K.axis;if(K.descriptor.mode==="virtual")return patch$1(oe.line,J[oe.line]);const ce=K.subject.page.contentBox[oe.size],ve=getDraggablesInsideDroppable(K.descriptor.id,ne).reduce((me,ge)=>me+ge.client.marginBox[oe.size],0)+J[oe.line]-ce;return ve<=0?null:patch$1(oe.line,ve)},withMaxScroll=(K,J)=>({...K,scroll:{...K.scroll,max:J}}),addPlaceholder=(K,J,ne)=>{const oe=K.frame;isHomeOf(J,K)&&invariant(),K.subject.withPlaceholder&&invariant();const ce=getDisplacedBy(K.axis,J.displaceBy).point,ue=getRequiredGrowthForPlaceholder(K,ce,ne),Ae={placeholderSize:ce,increasedBy:ue,oldFrameMaxScroll:K.frame?K.frame.scroll.max:null};if(!oe){const ge=getSubject({page:K.subject.page,withPlaceholder:Ae,axis:K.axis,frame:K.frame});return{...K,subject:ge}}const pe=ue?add$1(oe.scroll.max,ue):oe.scroll.max,ve=withMaxScroll(oe,pe),me=getSubject({page:K.subject.page,withPlaceholder:Ae,axis:K.axis,frame:ve});return{...K,subject:me,frame:ve}},removePlaceholder=K=>{const J=K.subject.withPlaceholder;J||invariant();const ne=K.frame;if(!ne){const Ae=getSubject({page:K.subject.page,axis:K.axis,frame:null,withPlaceholder:null});return{...K,subject:Ae}}const oe=J.oldFrameMaxScroll;oe||invariant();const ce=withMaxScroll(ne,oe),ue=getSubject({page:K.subject.page,axis:K.axis,frame:ce,withPlaceholder:null});return{...K,subject:ue,frame:ce}};var moveToNewDroppable=({previousPageBorderBoxCenter:K,moveRelativeTo:J,insideDestination:ne,draggable:oe,draggables:ce,destination:ue,viewport:Ae,afterCritical:pe})=>{if(!J){if(ne.length)return null;const ye={displaced:emptyGroups,displacedBy:noDisplacedBy,at:{type:"REORDER",destination:{droppableId:ue.descriptor.id,index:0}}},xe=getPageBorderBoxCenterFromImpact({impact:ye,draggable:oe,droppable:ue,draggables:ce,afterCritical:pe}),_e=isHomeOf(oe,ue)?ue:addPlaceholder(ue,oe,ce);return isTotallyVisibleInNewLocation({draggable:oe,destination:_e,newPageBorderBoxCenter:xe,viewport:Ae.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?ye:null}const ve=K[ue.axis.line]<=J.page.borderBox.center[ue.axis.line],me=(()=>{const ye=J.descriptor.index;return J.descriptor.id===oe.descriptor.id||ve?ye:ye+1})(),ge=getDisplacedBy(ue.axis,oe.displaceBy);return calculateReorderImpact({draggable:oe,insideDestination:ne,destination:ue,viewport:Ae,displacedBy:ge,last:emptyGroups,index:me})},moveCrossAxis=({isMovingForward:K,previousPageBorderBoxCenter:J,draggable:ne,isOver:oe,draggables:ce,droppables:ue,viewport:Ae,afterCritical:pe})=>{const ve=getBestCrossAxisDroppable({isMovingForward:K,pageBorderBoxCenter:J,source:oe,droppables:ue,viewport:Ae});if(!ve)return null;const me=getDraggablesInsideDroppable(ve.descriptor.id,ce),ge=getClosestDraggable({pageBorderBoxCenter:J,viewport:Ae,destination:ve,insideDestination:me,afterCritical:pe}),ye=moveToNewDroppable({previousPageBorderBoxCenter:J,destination:ve,draggable:ne,draggables:ce,moveRelativeTo:ge,insideDestination:me,viewport:Ae,afterCritical:pe});if(!ye)return null;const xe=getPageBorderBoxCenterFromImpact({impact:ye,draggable:ne,droppable:ve,draggables:ce,afterCritical:pe});return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:xe,draggable:ne,viewport:Ae}),impact:ye,scrollJumpRequest:null}},whatIsDraggedOver=K=>{const J=K.at;return J?J.type==="REORDER"?J.destination.droppableId:J.combine.droppableId:null};const getDroppableOver$1=(K,J)=>{const ne=whatIsDraggedOver(K);return ne?J[ne]:null};var moveInDirection=({state:K,type:J})=>{const ne=getDroppableOver$1(K.impact,K.dimensions.droppables),oe=!!ne,ce=K.dimensions.droppables[K.critical.droppable.id],ue=ne||ce,Ae=ue.axis.direction,pe=Ae==="vertical"&&(J==="MOVE_UP"||J==="MOVE_DOWN")||Ae==="horizontal"&&(J==="MOVE_LEFT"||J==="MOVE_RIGHT");if(pe&&!oe)return null;const ve=J==="MOVE_DOWN"||J==="MOVE_RIGHT",me=K.dimensions.draggables[K.critical.draggable.id],ge=K.current.page.borderBoxCenter,{draggables:ye,droppables:xe}=K.dimensions;return pe?moveToNextPlace({isMovingForward:ve,previousPageBorderBoxCenter:ge,draggable:me,destination:ue,draggables:ye,viewport:K.viewport,previousClientSelection:K.current.client.selection,previousImpact:K.impact,afterCritical:K.afterCritical}):moveCrossAxis({isMovingForward:ve,previousPageBorderBoxCenter:ge,draggable:me,isOver:ue,draggables:ye,droppables:xe,viewport:K.viewport,afterCritical:K.afterCritical})};function isMovementAllowed(K){return K.phase==="DRAGGING"||K.phase==="COLLECTING"}function isPositionInFrame(K){const J=isWithin(K.top,K.bottom),ne=isWithin(K.left,K.right);return function(ce){return J(ce.y)&&ne(ce.x)}}function getHasOverlap(K,J){return K.left<J.right&&K.right>J.left&&K.top<J.bottom&&K.bottom>J.top}function getFurthestAway({pageBorderBox:K,draggable:J,candidates:ne}){const oe=J.page.borderBox.center,ce=ne.map(ue=>{const Ae=ue.axis,pe=patch$1(ue.axis.line,K.center[Ae.line],ue.page.borderBox.center[Ae.crossAxisLine]);return{id:ue.descriptor.id,distance:distance$2(oe,pe)}}).sort((ue,Ae)=>Ae.distance-ue.distance);return ce[0]?ce[0].id:null}function getDroppableOver({pageBorderBox:K,draggable:J,droppables:ne}){const oe=toDroppableList(ne).filter(ce=>{if(!ce.isEnabled)return!1;const ue=ce.subject.active;if(!ue||!getHasOverlap(K,ue))return!1;if(isPositionInFrame(ue)(K.center))return!0;const Ae=ce.axis,pe=ue.center[Ae.crossAxisLine],ve=K[Ae.crossAxisStart],me=K[Ae.crossAxisEnd],ge=isWithin(ue[Ae.crossAxisStart],ue[Ae.crossAxisEnd]),ye=ge(ve),xe=ge(me);return!ye&&!xe?!0:ye?ve<pe:me>pe});return oe.length?oe.length===1?oe[0].descriptor.id:getFurthestAway({pageBorderBox:K,draggable:J,candidates:oe}):null}const offsetRectByPosition=(K,J)=>getRect(offsetByPosition(K,J));var withDroppableScroll=(K,J)=>{const ne=K.frame;return ne?offsetRectByPosition(J,ne.scroll.diff.value):J};function getIsDisplaced({displaced:K,id:J}){return!!(K.visible[J]||K.invisible[J])}function atIndex({draggable:K,closest:J,inHomeList:ne}){return J?ne&&J.descriptor.index>K.descriptor.index?J.descriptor.index-1:J.descriptor.index:null}var getReorderImpact=({pageBorderBoxWithDroppableScroll:K,draggable:J,destination:ne,insideDestination:oe,last:ce,viewport:ue,afterCritical:Ae})=>{const pe=ne.axis,ve=getDisplacedBy(ne.axis,J.displaceBy),me=ve.value,ge=K[pe.start],ye=K[pe.end],_e=removeDraggableFromList(J,oe).find(Ie=>{const Fe=Ie.descriptor.id,ke=Ie.page.borderBox.center[pe.line],je=didStartAfterCritical(Fe,Ae),We=getIsDisplaced({displaced:ce,id:Fe});return je?We?ye<=ke:ge<ke-me:We?ye<=ke+me:ge<ke})||null,$e=atIndex({draggable:J,closest:_e,inHomeList:isHomeOf(J,ne)});return calculateReorderImpact({draggable:J,insideDestination:oe,destination:ne,viewport:ue,last:ce,displacedBy:ve,index:$e})};const combineThresholdDivisor=4;var getCombineImpact=({draggable:K,pageBorderBoxWithDroppableScroll:J,previousImpact:ne,destination:oe,insideDestination:ce,afterCritical:ue})=>{if(!oe.isCombineEnabled)return null;const Ae=oe.axis,pe=getDisplacedBy(oe.axis,K.displaceBy),ve=pe.value,me=J[Ae.start],ge=J[Ae.end],xe=removeDraggableFromList(K,ce).find($e=>{const Ie=$e.descriptor.id,Fe=$e.page.borderBox,je=Fe[Ae.size]/combineThresholdDivisor,We=didStartAfterCritical(Ie,ue),ze=getIsDisplaced({displaced:ne.displaced,id:Ie});return We?ze?ge>Fe[Ae.start]+je&&ge<Fe[Ae.end]-je:me>Fe[Ae.start]-ve+je&&me<Fe[Ae.end]-ve-je:ze?ge>Fe[Ae.start]+ve+je&&ge<Fe[Ae.end]+ve-je:me>Fe[Ae.start]+je&&me<Fe[Ae.end]-je});return xe?{displacedBy:pe,displaced:ne.displaced,at:{type:"COMBINE",combine:{draggableId:xe.descriptor.id,droppableId:oe.descriptor.id}}}:null},getDragImpact=({pageOffset:K,draggable:J,draggables:ne,droppables:oe,previousImpact:ce,viewport:ue,afterCritical:Ae})=>{const pe=offsetRectByPosition(J.page.borderBox,K),ve=getDroppableOver({pageBorderBox:pe,draggable:J,droppables:oe});if(!ve)return noImpact$1;const me=oe[ve],ge=getDraggablesInsideDroppable(me.descriptor.id,ne),ye=withDroppableScroll(me,pe);return getCombineImpact({pageBorderBoxWithDroppableScroll:ye,draggable:J,previousImpact:ce,destination:me,insideDestination:ge,afterCritical:Ae})||getReorderImpact({pageBorderBoxWithDroppableScroll:ye,draggable:J,destination:me,insideDestination:ge,last:ce.displaced,viewport:ue,afterCritical:Ae})},patchDroppableMap=(K,J)=>({...K,[J.descriptor.id]:J});const clearUnusedPlaceholder=({previousImpact:K,impact:J,droppables:ne})=>{const oe=whatIsDraggedOver(K),ce=whatIsDraggedOver(J);if(!oe||oe===ce)return ne;const ue=ne[oe];if(!ue.subject.withPlaceholder)return ne;const Ae=removePlaceholder(ue);return patchDroppableMap(ne,Ae)};var recomputePlaceholders=({draggable:K,draggables:J,droppables:ne,previousImpact:oe,impact:ce})=>{const ue=clearUnusedPlaceholder({previousImpact:oe,impact:ce,droppables:ne}),Ae=whatIsDraggedOver(ce);if(!Ae)return ue;const pe=ne[Ae];if(isHomeOf(K,pe)||pe.subject.withPlaceholder)return ue;const ve=addPlaceholder(pe,K,J);return patchDroppableMap(ue,ve)},update=({state:K,clientSelection:J,dimensions:ne,viewport:oe,impact:ce,scrollJumpRequest:ue})=>{const Ae=oe||K.viewport,pe=ne||K.dimensions,ve=J||K.current.client.selection,me=subtract(ve,K.initial.client.selection),ge={offset:me,selection:ve,borderBoxCenter:add$1(K.initial.client.borderBoxCenter,me)},ye={selection:add$1(ge.selection,Ae.scroll.current),borderBoxCenter:add$1(ge.borderBoxCenter,Ae.scroll.current),offset:add$1(ge.offset,Ae.scroll.diff.value)},xe={client:ge,page:ye};if(K.phase==="COLLECTING")return{...K,dimensions:pe,viewport:Ae,current:xe};const _e=pe.draggables[K.critical.draggable.id],$e=ce||getDragImpact({pageOffset:ye.offset,draggable:_e,draggables:pe.draggables,droppables:pe.droppables,previousImpact:K.impact,viewport:Ae,afterCritical:K.afterCritical}),Ie=recomputePlaceholders({draggable:_e,impact:$e,previousImpact:K.impact,draggables:pe.draggables,droppables:pe.droppables});return{...K,current:xe,dimensions:{draggables:pe.draggables,droppables:Ie},impact:$e,viewport:Ae,scrollJumpRequest:ue||null,forceShouldAnimate:ue?!1:null}};function getDraggables(K,J){return K.map(ne=>J[ne])}var recompute=({impact:K,viewport:J,draggables:ne,destination:oe,forceShouldAnimate:ce})=>{const ue=K.displaced,Ae=getDraggables(ue.all,ne),pe=getDisplacementGroups({afterDragging:Ae,destination:oe,displacedBy:K.displacedBy,viewport:J.frame,forceShouldAnimate:ce,last:ue});return{...K,displaced:pe}},getClientBorderBoxCenter=({impact:K,draggable:J,droppable:ne,draggables:oe,viewport:ce,afterCritical:ue})=>{const Ae=getPageBorderBoxCenterFromImpact({impact:K,draggable:J,draggables:oe,droppable:ne,afterCritical:ue});return getClientFromPageBorderBoxCenter({pageBorderBoxCenter:Ae,draggable:J,viewport:ce})},refreshSnap=({state:K,dimensions:J,viewport:ne})=>{K.movementMode!=="SNAP"&&invariant();const oe=K.impact,ce=ne||K.viewport,ue=J||K.dimensions,{draggables:Ae,droppables:pe}=ue,ve=Ae[K.critical.draggable.id],me=whatIsDraggedOver(oe);me||invariant();const ge=pe[me],ye=recompute({impact:oe,viewport:ce,destination:ge,draggables:Ae}),xe=getClientBorderBoxCenter({impact:ye,draggable:ve,droppable:ge,draggables:Ae,viewport:ce,afterCritical:K.afterCritical});return update({impact:ye,clientSelection:xe,state:K,dimensions:ue,viewport:ce})},getHomeLocation=K=>({index:K.index,droppableId:K.droppableId}),getLiftEffect=({draggable:K,home:J,draggables:ne,viewport:oe})=>{const ce=getDisplacedBy(J.axis,K.displaceBy),ue=getDraggablesInsideDroppable(J.descriptor.id,ne),Ae=ue.indexOf(K);Ae===-1&&invariant();const pe=ue.slice(Ae+1),ve=pe.reduce((xe,_e)=>(xe[_e.descriptor.id]=!0,xe),{}),me={inVirtualList:J.descriptor.mode==="virtual",displacedBy:ce,effected:ve};return{impact:{displaced:getDisplacementGroups({afterDragging:pe,destination:J,displacedBy:ce,last:null,viewport:oe.frame,forceShouldAnimate:!1}),displacedBy:ce,at:{type:"REORDER",destination:getHomeLocation(K.descriptor)}},afterCritical:me}},patchDimensionMap=(K,J)=>({draggables:K.draggables,droppables:patchDroppableMap(K.droppables,J)}),offsetDraggable=({draggable:K,offset:J,initialWindowScroll:ne})=>{const oe=offset(K.client,J),ce=withScroll(oe,ne);return{...K,placeholder:{...K.placeholder,client:oe},client:oe,page:ce}},getFrame=K=>{const J=K.frame;return J||invariant(),J},adjustAdditionsForScrollChanges=({additions:K,updatedDroppables:J,viewport:ne})=>{const oe=ne.scroll.diff.value;return K.map(ce=>{const ue=ce.descriptor.droppableId,Ae=J[ue],ve=getFrame(Ae).scroll.diff.value,me=add$1(oe,ve);return offsetDraggable({draggable:ce,offset:me,initialWindowScroll:ne.scroll.initial})})},publishWhileDraggingInVirtual=({state:K,published:J})=>{const ne=J.modified.map(ke=>{const je=K.dimensions.droppables[ke.droppableId];return scrollDroppable(je,ke.scroll)}),oe={...K.dimensions.droppables,...toDroppableMap(ne)},ce=toDraggableMap(adjustAdditionsForScrollChanges({additions:J.additions,updatedDroppables:oe,viewport:K.viewport})),ue={...K.dimensions.draggables,...ce};J.removals.forEach(ke=>{delete ue[ke]});const Ae={droppables:oe,draggables:ue},pe=whatIsDraggedOver(K.impact),ve=pe?Ae.droppables[pe]:null,me=Ae.draggables[K.critical.draggable.id],ge=Ae.droppables[K.critical.droppable.id],{impact:ye,afterCritical:xe}=getLiftEffect({draggable:me,home:ge,draggables:ue,viewport:K.viewport}),_e=ve&&ve.isCombineEnabled?K.impact:ye,$e=getDragImpact({pageOffset:K.current.page.offset,draggable:Ae.draggables[K.critical.draggable.id],draggables:Ae.draggables,droppables:Ae.droppables,previousImpact:_e,viewport:K.viewport,afterCritical:xe}),Ie={...K,phase:"DRAGGING",impact:$e,onLiftImpact:ye,dimensions:Ae,afterCritical:xe,forceShouldAnimate:!1};return K.phase==="COLLECTING"?Ie:{...Ie,phase:"DROP_PENDING",reason:K.reason,isWaiting:!1}};const isSnapping=K=>K.movementMode==="SNAP",postDroppableChange=(K,J,ne)=>{const oe=patchDimensionMap(K.dimensions,J);return!isSnapping(K)||ne?update({state:K,dimensions:oe}):refreshSnap({state:K,dimensions:oe})};function removeScrollJumpRequest(K){return K.isDragging&&K.movementMode==="SNAP"?{...K,scrollJumpRequest:null}:K}const idle$2={phase:"IDLE",completed:null,shouldFlush:!1};var reducer$2=(K=idle$2,J)=>{if(J.type==="FLUSH")return{...idle$2,shouldFlush:!0};if(J.type==="INITIAL_PUBLISH"){K.phase!=="IDLE"&&invariant();const{critical:ne,clientSelection:oe,viewport:ce,dimensions:ue,movementMode:Ae}=J.payload,pe=ue.draggables[ne.draggable.id],ve=ue.droppables[ne.droppable.id],me={selection:oe,borderBoxCenter:pe.client.borderBox.center,offset:origin},ge={client:me,page:{selection:add$1(me.selection,ce.scroll.initial),borderBoxCenter:add$1(me.selection,ce.scroll.initial),offset:add$1(me.selection,ce.scroll.diff.value)}},ye=toDroppableList(ue.droppables).every(Ie=>!Ie.isFixedOnPage),{impact:xe,afterCritical:_e}=getLiftEffect({draggable:pe,home:ve,draggables:ue.draggables,viewport:ce});return{phase:"DRAGGING",isDragging:!0,critical:ne,movementMode:Ae,dimensions:ue,initial:ge,current:ge,isWindowScrollAllowed:ye,impact:xe,afterCritical:_e,onLiftImpact:xe,viewport:ce,scrollJumpRequest:null,forceShouldAnimate:null}}if(J.type==="COLLECTION_STARTING")return K.phase==="COLLECTING"||K.phase==="DROP_PENDING"?K:(K.phase!=="DRAGGING"&&invariant(),{...K,phase:"COLLECTING"});if(J.type==="PUBLISH_WHILE_DRAGGING")return K.phase==="COLLECTING"||K.phase==="DROP_PENDING"||invariant(),publishWhileDraggingInVirtual({state:K,published:J.payload});if(J.type==="MOVE"){if(K.phase==="DROP_PENDING")return K;isMovementAllowed(K)||invariant();const{client:ne}=J.payload;return isEqual$1(ne,K.current.client.selection)?K:update({state:K,clientSelection:ne,impact:isSnapping(K)?K.impact:null})}if(J.type==="UPDATE_DROPPABLE_SCROLL"){if(K.phase==="DROP_PENDING"||K.phase==="COLLECTING")return removeScrollJumpRequest(K);isMovementAllowed(K)||invariant();const{id:ne,newScroll:oe}=J.payload,ce=K.dimensions.droppables[ne];if(!ce)return K;const ue=scrollDroppable(ce,oe);return postDroppableChange(K,ue,!1)}if(J.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(K.phase==="DROP_PENDING")return K;isMovementAllowed(K)||invariant();const{id:ne,isEnabled:oe}=J.payload,ce=K.dimensions.droppables[ne];ce||invariant(),ce.isEnabled===oe&&invariant();const ue={...ce,isEnabled:oe};return postDroppableChange(K,ue,!0)}if(J.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(K.phase==="DROP_PENDING")return K;isMovementAllowed(K)||invariant();const{id:ne,isCombineEnabled:oe}=J.payload,ce=K.dimensions.droppables[ne];ce||invariant(),ce.isCombineEnabled===oe&&invariant();const ue={...ce,isCombineEnabled:oe};return postDroppableChange(K,ue,!0)}if(J.type==="MOVE_BY_WINDOW_SCROLL"){if(K.phase==="DROP_PENDING"||K.phase==="DROP_ANIMATING")return K;isMovementAllowed(K)||invariant(),K.isWindowScrollAllowed||invariant();const ne=J.payload.newScroll;if(isEqual$1(K.viewport.scroll.current,ne))return removeScrollJumpRequest(K);const oe=scrollViewport(K.viewport,ne);return isSnapping(K)?refreshSnap({state:K,viewport:oe}):update({state:K,viewport:oe})}if(J.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!isMovementAllowed(K))return K;const ne=J.payload.maxScroll;if(isEqual$1(ne,K.viewport.scroll.max))return K;const oe={...K.viewport,scroll:{...K.viewport.scroll,max:ne}};return{...K,viewport:oe}}if(J.type==="MOVE_UP"||J.type==="MOVE_DOWN"||J.type==="MOVE_LEFT"||J.type==="MOVE_RIGHT"){if(K.phase==="COLLECTING"||K.phase==="DROP_PENDING")return K;K.phase!=="DRAGGING"&&invariant();const ne=moveInDirection({state:K,type:J.type});return ne?update({state:K,impact:ne.impact,clientSelection:ne.clientSelection,scrollJumpRequest:ne.scrollJumpRequest}):K}if(J.type==="DROP_PENDING"){const ne=J.payload.reason;return K.phase!=="COLLECTING"&&invariant(),{...K,phase:"DROP_PENDING",isWaiting:!0,reason:ne}}if(J.type==="DROP_ANIMATE"){const{completed:ne,dropDuration:oe,newHomeClientOffset:ce}=J.payload;return K.phase==="DRAGGING"||K.phase==="DROP_PENDING"||invariant(),{phase:"DROP_ANIMATING",completed:ne,dropDuration:oe,newHomeClientOffset:ce,dimensions:K.dimensions}}if(J.type==="DROP_COMPLETE"){const{completed:ne}=J.payload;return{phase:"IDLE",completed:ne,shouldFlush:!1}}return K};const beforeInitialCapture=K=>({type:"BEFORE_INITIAL_CAPTURE",payload:K}),lift$1=K=>({type:"LIFT",payload:K}),initialPublish=K=>({type:"INITIAL_PUBLISH",payload:K}),publishWhileDragging=K=>({type:"PUBLISH_WHILE_DRAGGING",payload:K}),collectionStarting=()=>({type:"COLLECTION_STARTING",payload:null}),updateDroppableScroll=K=>({type:"UPDATE_DROPPABLE_SCROLL",payload:K}),updateDroppableIsEnabled=K=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:K}),updateDroppableIsCombineEnabled=K=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:K}),move=K=>({type:"MOVE",payload:K}),moveByWindowScroll=K=>({type:"MOVE_BY_WINDOW_SCROLL",payload:K}),updateViewportMaxScroll=K=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:K}),moveUp=()=>({type:"MOVE_UP",payload:null}),moveDown=()=>({type:"MOVE_DOWN",payload:null}),moveRight=()=>({type:"MOVE_RIGHT",payload:null}),moveLeft=()=>({type:"MOVE_LEFT",payload:null}),flush=()=>({type:"FLUSH",payload:null}),animateDrop=K=>({type:"DROP_ANIMATE",payload:K}),completeDrop=K=>({type:"DROP_COMPLETE",payload:K}),drop$1=K=>({type:"DROP",payload:K}),dropPending=K=>({type:"DROP_PENDING",payload:K}),dropAnimationFinished=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var lift=K=>({getState:J,dispatch:ne})=>oe=>ce=>{if(ce.type!=="LIFT"){oe(ce);return}const{id:ue,clientSelection:Ae,movementMode:pe}=ce.payload,ve=J();ve.phase==="DROP_ANIMATING"&&ne(completeDrop({completed:ve.completed})),J().phase!=="IDLE"&&invariant(),ne(flush()),ne(beforeInitialCapture({draggableId:ue,movementMode:pe}));const ge={draggableId:ue,scrollOptions:{shouldPublishImmediately:pe==="SNAP"}},{critical:ye,dimensions:xe,viewport:_e}=K.startPublishing(ge);ne(initialPublish({critical:ye,dimensions:xe,clientSelection:Ae,movementMode:pe,viewport:_e}))},style$1=K=>()=>J=>ne=>{ne.type==="INITIAL_PUBLISH"&&K.dragging(),ne.type==="DROP_ANIMATE"&&K.dropping(ne.payload.completed.result.reason),(ne.type==="FLUSH"||ne.type==="DROP_COMPLETE")&&K.resting(),J(ne)};const curves$1={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},combine={opacity:{drop:0,combining:.7},scale:{drop:.75}},timings={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},outOfTheWayTiming=`${timings.outOfTheWay}s ${curves$1.outOfTheWay}`,transitions={fluid:`opacity ${outOfTheWayTiming}`,snap:`transform ${outOfTheWayTiming}, opacity ${outOfTheWayTiming}`,drop:K=>{const J=`${K}s ${curves$1.drop}`;return`transform ${J}, opacity ${J}`},outOfTheWay:`transform ${outOfTheWayTiming}`,placeholder:`height ${outOfTheWayTiming}, width ${outOfTheWayTiming}, margin ${outOfTheWayTiming}`},moveTo=K=>isEqual$1(K,origin)?void 0:`translate(${K.x}px, ${K.y}px)`,transforms={moveTo,drop:(K,J)=>{const ne=moveTo(K);if(ne)return J?`${ne} scale(${combine.scale.drop})`:ne}},{minDropTime,maxDropTime}=timings,dropTimeRange=maxDropTime-minDropTime,maxDropTimeAtDistance=1500,cancelDropModifier=.6;var getDropDuration=({current:K,destination:J,reason:ne})=>{const oe=distance$2(K,J);if(oe<=0)return minDropTime;if(oe>=maxDropTimeAtDistance)return maxDropTime;const ce=oe/maxDropTimeAtDistance,ue=minDropTime+dropTimeRange*ce,Ae=ne==="CANCEL"?ue*cancelDropModifier:ue;return Number(Ae.toFixed(2))},getNewHomeClientOffset=({impact:K,draggable:J,dimensions:ne,viewport:oe,afterCritical:ce})=>{const{draggables:ue,droppables:Ae}=ne,pe=whatIsDraggedOver(K),ve=pe?Ae[pe]:null,me=Ae[J.descriptor.droppableId],ge=getClientBorderBoxCenter({impact:K,draggable:J,draggables:ue,afterCritical:ce,droppable:ve||me,viewport:oe});return subtract(ge,J.client.borderBox.center)},getDropImpact=({draggables:K,reason:J,lastImpact:ne,home:oe,viewport:ce,onLiftImpact:ue})=>!ne.at||J!=="DROP"?{impact:recompute({draggables:K,impact:ue,destination:oe,viewport:ce,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:ne.at.type==="REORDER"?{impact:ne,didDropInsideDroppable:!0}:{impact:{...ne,displaced:emptyGroups},didDropInsideDroppable:!0};const dropMiddleware=({getState:K,dispatch:J})=>ne=>oe=>{if(oe.type!=="DROP"){ne(oe);return}const ce=K(),ue=oe.payload.reason;if(ce.phase==="COLLECTING"){J(dropPending({reason:ue}));return}if(ce.phase==="IDLE")return;ce.phase==="DROP_PENDING"&&ce.isWaiting&&invariant(),ce.phase==="DRAGGING"||ce.phase==="DROP_PENDING"||invariant();const pe=ce.critical,ve=ce.dimensions,me=ve.draggables[ce.critical.draggable.id],{impact:ge,didDropInsideDroppable:ye}=getDropImpact({reason:ue,lastImpact:ce.impact,afterCritical:ce.afterCritical,onLiftImpact:ce.onLiftImpact,home:ce.dimensions.droppables[ce.critical.droppable.id],viewport:ce.viewport,draggables:ce.dimensions.draggables}),xe=ye?tryGetDestination(ge):null,_e=ye?tryGetCombine(ge):null,$e={index:pe.draggable.index,droppableId:pe.droppable.id},Ie={draggableId:me.descriptor.id,type:me.descriptor.type,source:$e,reason:ue,mode:ce.movementMode,destination:xe,combine:_e},Fe=getNewHomeClientOffset({impact:ge,draggable:me,dimensions:ve,viewport:ce.viewport,afterCritical:ce.afterCritical}),ke={critical:ce.critical,afterCritical:ce.afterCritical,result:Ie,impact:ge};if(!(!isEqual$1(ce.current.client.offset,Fe)||!!Ie.combine)){J(completeDrop({completed:ke}));return}const We=getDropDuration({current:ce.current.client.offset,destination:Fe,reason:ue});J(animateDrop({newHomeClientOffset:Fe,dropDuration:We,completed:ke}))};var drop=dropMiddleware,getWindowScroll=()=>({x:window.pageXOffset,y:window.pageYOffset});function getWindowScrollBinding(K){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:J=>{J.target!==window&&J.target!==window.document||K()}}}function getScrollListener({onWindowScroll:K}){function J(){K(getWindowScroll())}const ne=rafSchd(J),oe=getWindowScrollBinding(ne);let ce=noop$2$1;function ue(){return ce!==noop$2$1}function Ae(){ue()&&invariant(),ce=bindEvents(window,[oe])}function pe(){ue()||invariant(),ne.cancel(),ce(),ce=noop$2$1}return{start:Ae,stop:pe,isActive:ue}}const shouldEnd=K=>K.type==="DROP_COMPLETE"||K.type==="DROP_ANIMATE"||K.type==="FLUSH",scrollListener=K=>{const J=getScrollListener({onWindowScroll:ne=>{K.dispatch(moveByWindowScroll({newScroll:ne}))}});return ne=>oe=>{!J.isActive()&&oe.type==="INITIAL_PUBLISH"&&J.start(),J.isActive()&&shouldEnd(oe)&&J.stop(),ne(oe)}};var scrollListener$1=scrollListener,getExpiringAnnounce=K=>{let J=!1,ne=!1;const oe=setTimeout(()=>{ne=!0}),ce=ue=>{J||ne||(J=!0,K(ue),clearTimeout(oe))};return ce.wasCalled=()=>J,ce},getAsyncMarshal=()=>{const K=[],J=ce=>{const ue=K.findIndex(pe=>pe.timerId===ce);ue===-1&&invariant();const[Ae]=K.splice(ue,1);Ae.callback()};return{add:ce=>{const ue=setTimeout(()=>J(ue)),Ae={timerId:ue,callback:ce};K.push(Ae)},flush:()=>{if(!K.length)return;const ce=[...K];K.length=0,ce.forEach(ue=>{clearTimeout(ue.timerId),ue.callback()})}}};const areLocationsEqual=(K,J)=>K==null&&J==null?!0:K==null||J==null?!1:K.droppableId===J.droppableId&&K.index===J.index,isCombineEqual=(K,J)=>K==null&&J==null?!0:K==null||J==null?!1:K.draggableId===J.draggableId&&K.droppableId===J.droppableId,isCriticalEqual=(K,J)=>{if(K===J)return!0;const ne=K.draggable.id===J.draggable.id&&K.draggable.droppableId===J.draggable.droppableId&&K.draggable.type===J.draggable.type&&K.draggable.index===J.draggable.index,oe=K.droppable.id===J.droppable.id&&K.droppable.type===J.droppable.type;return ne&&oe},withTimings=(K,J)=>{J()},getDragStart=(K,J)=>({draggableId:K.draggable.id,type:K.droppable.type,source:{droppableId:K.droppable.id,index:K.draggable.index},mode:J});function execute(K,J,ne,oe){if(!K){ne(oe(J));return}const ce=getExpiringAnnounce(ne);K(J,{announce:ce}),ce.wasCalled()||ne(oe(J))}var getPublisher=(K,J)=>{const ne=getAsyncMarshal();let oe=null;const ce=(ye,xe)=>{oe&&invariant(),withTimings("onBeforeCapture",()=>{const _e=K().onBeforeCapture;_e&&_e({draggableId:ye,mode:xe})})},ue=(ye,xe)=>{oe&&invariant(),withTimings("onBeforeDragStart",()=>{const _e=K().onBeforeDragStart;_e&&_e(getDragStart(ye,xe))})},Ae=(ye,xe)=>{oe&&invariant();const _e=getDragStart(ye,xe);oe={mode:xe,lastCritical:ye,lastLocation:_e.source,lastCombine:null},ne.add(()=>{withTimings("onDragStart",()=>execute(K().onDragStart,_e,J,preset$1.onDragStart))})},pe=(ye,xe)=>{const _e=tryGetDestination(xe),$e=tryGetCombine(xe);oe||invariant();const Ie=!isCriticalEqual(ye,oe.lastCritical);Ie&&(oe.lastCritical=ye);const Fe=!areLocationsEqual(oe.lastLocation,_e);Fe&&(oe.lastLocation=_e);const ke=!isCombineEqual(oe.lastCombine,$e);if(ke&&(oe.lastCombine=$e),!Ie&&!Fe&&!ke)return;const je={...getDragStart(ye,oe.mode),combine:$e,destination:_e};ne.add(()=>{withTimings("onDragUpdate",()=>execute(K().onDragUpdate,je,J,preset$1.onDragUpdate))})},ve=()=>{oe||invariant(),ne.flush()},me=ye=>{oe||invariant(),oe=null,withTimings("onDragEnd",()=>execute(K().onDragEnd,ye,J,preset$1.onDragEnd))};return{beforeCapture:ce,beforeStart:ue,start:Ae,update:pe,flush:ve,drop:me,abort:()=>{if(!oe)return;const ye={...getDragStart(oe.lastCritical,oe.mode),combine:null,destination:null,reason:"CANCEL"};me(ye)}}},responders=(K,J)=>{const ne=getPublisher(K,J);return oe=>ce=>ue=>{if(ue.type==="BEFORE_INITIAL_CAPTURE"){ne.beforeCapture(ue.payload.draggableId,ue.payload.movementMode);return}if(ue.type==="INITIAL_PUBLISH"){const pe=ue.payload.critical;ne.beforeStart(pe,ue.payload.movementMode),ce(ue),ne.start(pe,ue.payload.movementMode);return}if(ue.type==="DROP_COMPLETE"){const pe=ue.payload.completed.result;ne.flush(),ce(ue),ne.drop(pe);return}if(ce(ue),ue.type==="FLUSH"){ne.abort();return}const Ae=oe.getState();Ae.phase==="DRAGGING"&&ne.update(Ae.critical,Ae.impact)}};const dropAnimationFinishMiddleware=K=>J=>ne=>{if(ne.type!=="DROP_ANIMATION_FINISHED"){J(ne);return}const oe=K.getState();oe.phase!=="DROP_ANIMATING"&&invariant(),K.dispatch(completeDrop({completed:oe.completed}))};var dropAnimationFinish=dropAnimationFinishMiddleware;const dropAnimationFlushOnScrollMiddleware=K=>{let J=null,ne=null;function oe(){ne&&(cancelAnimationFrame(ne),ne=null),J&&(J(),J=null)}return ce=>ue=>{if((ue.type==="FLUSH"||ue.type==="DROP_COMPLETE"||ue.type==="DROP_ANIMATION_FINISHED")&&oe(),ce(ue),ue.type!=="DROP_ANIMATE")return;const Ae={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){K.getState().phase==="DROP_ANIMATING"&&K.dispatch(dropAnimationFinished())}};ne=requestAnimationFrame(()=>{ne=null,J=bindEvents(window,[Ae])})}};var dropAnimationFlushOnScroll=dropAnimationFlushOnScrollMiddleware,dimensionMarshalStopper=K=>()=>J=>ne=>{(ne.type==="DROP_COMPLETE"||ne.type==="FLUSH"||ne.type==="DROP_ANIMATE")&&K.stopPublishing(),J(ne)},focus=K=>{let J=!1;return()=>ne=>oe=>{if(oe.type==="INITIAL_PUBLISH"){J=!0,K.tryRecordFocus(oe.payload.critical.draggable.id),ne(oe),K.tryRestoreFocusRecorded();return}if(ne(oe),!!J){if(oe.type==="FLUSH"){J=!1,K.tryRestoreFocusRecorded();return}if(oe.type==="DROP_COMPLETE"){J=!1;const ce=oe.payload.completed.result;ce.combine&&K.tryShiftRecord(ce.draggableId,ce.combine.draggableId),K.tryRestoreFocusRecorded()}}}};const shouldStop=K=>K.type==="DROP_COMPLETE"||K.type==="DROP_ANIMATE"||K.type==="FLUSH";var autoScroll=K=>J=>ne=>oe=>{if(shouldStop(oe)){K.stop(),ne(oe);return}if(oe.type==="INITIAL_PUBLISH"){ne(oe);const ce=J.getState();ce.phase!=="DRAGGING"&&invariant(),K.start(ce);return}ne(oe),K.scroll(J.getState())};const pendingDrop=K=>J=>ne=>{if(J(ne),ne.type!=="PUBLISH_WHILE_DRAGGING")return;const oe=K.getState();oe.phase==="DROP_PENDING"&&(oe.isWaiting||K.dispatch(drop$1({reason:oe.reason})))};var pendingDrop$1=pendingDrop;const composeEnhancers=compose$2;var createStore$1=({dimensionMarshal:K,focusMarshal:J,styleMarshal:ne,getResponders:oe,announce:ce,autoScroller:ue})=>createStore$2(reducer$2,composeEnhancers(applyMiddleware(style$1(ne),dimensionMarshalStopper(K),lift(K),drop,dropAnimationFinish,dropAnimationFlushOnScroll,pendingDrop$1,autoScroll(ue),scrollListener$1,focus(J),responders(oe,ce))));const clean$1=()=>({additions:{},removals:{},modified:{}});function createPublisher({registry:K,callbacks:J}){let ne=clean$1(),oe=null;const ce=()=>{oe||(J.collectionStarting(),oe=requestAnimationFrame(()=>{oe=null;const{additions:ve,removals:me,modified:ge}=ne,ye=Object.keys(ve).map($e=>K.draggable.getById($e).getDimension(origin)).sort(($e,Ie)=>$e.descriptor.index-Ie.descriptor.index),xe=Object.keys(ge).map($e=>{const Fe=K.droppable.getById($e).callbacks.getScrollWhileDragging();return{droppableId:$e,scroll:Fe}}),_e={additions:ye,removals:Object.keys(me),modified:xe};ne=clean$1(),J.publish(_e)}))};return{add:ve=>{const me=ve.descriptor.id;ne.additions[me]=ve,ne.modified[ve.descriptor.droppableId]=!0,ne.removals[me]&&delete ne.removals[me],ce()},remove:ve=>{const me=ve.descriptor;ne.removals[me.id]=!0,ne.modified[me.droppableId]=!0,ne.additions[me.id]&&delete ne.additions[me.id],ce()},stop:()=>{oe&&(cancelAnimationFrame(oe),oe=null,ne=clean$1())}}}var getMaxScroll=({scrollHeight:K,scrollWidth:J,height:ne,width:oe})=>{const ce=subtract({x:J,y:K},{x:oe,y:ne});return{x:Math.max(0,ce.x),y:Math.max(0,ce.y)}},getDocumentElement=()=>{const K=document.documentElement;return K||invariant(),K},getMaxWindowScroll=()=>{const K=getDocumentElement();return getMaxScroll({scrollHeight:K.scrollHeight,scrollWidth:K.scrollWidth,width:K.clientWidth,height:K.clientHeight})},getViewport=()=>{const K=getWindowScroll(),J=getMaxWindowScroll(),ne=K.y,oe=K.x,ce=getDocumentElement(),ue=ce.clientWidth,Ae=ce.clientHeight,pe=oe+ue,ve=ne+Ae;return{frame:getRect({top:ne,left:oe,right:pe,bottom:ve}),scroll:{initial:K,current:K,max:J,diff:{value:origin,displacement:origin}}}},getInitialPublish=({critical:K,scrollOptions:J,registry:ne})=>{const oe=getViewport(),ce=oe.scroll.current,ue=K.droppable,Ae=ne.droppable.getAllByType(ue.type).map(ge=>ge.callbacks.getDimensionAndWatchScroll(ce,J)),pe=ne.draggable.getAllByType(K.draggable.type).map(ge=>ge.getDimension(ce));return{dimensions:{draggables:toDraggableMap(pe),droppables:toDroppableMap(Ae)},critical:K,viewport:oe}};function shouldPublishUpdate(K,J,ne){return!(ne.descriptor.id===J.id||ne.descriptor.type!==J.type||K.droppable.getById(ne.descriptor.droppableId).descriptor.mode!=="virtual")}var createDimensionMarshal=(K,J)=>{let ne=null;const oe=createPublisher({callbacks:{publish:J.publishWhileDragging,collectionStarting:J.collectionStarting},registry:K}),ce=(xe,_e)=>{K.droppable.exists(xe)||invariant(),ne&&J.updateDroppableIsEnabled({id:xe,isEnabled:_e})},ue=(xe,_e)=>{ne&&(K.droppable.exists(xe)||invariant(),J.updateDroppableIsCombineEnabled({id:xe,isCombineEnabled:_e}))},Ae=(xe,_e)=>{ne&&(K.droppable.exists(xe)||invariant(),J.updateDroppableScroll({id:xe,newScroll:_e}))},pe=(xe,_e)=>{ne&&K.droppable.getById(xe).callbacks.scroll(_e)},ve=()=>{if(!ne)return;oe.stop();const xe=ne.critical.droppable;K.droppable.getAllByType(xe.type).forEach(_e=>_e.callbacks.dragStopped()),ne.unsubscribe(),ne=null},me=xe=>{ne||invariant();const _e=ne.critical.draggable;xe.type==="ADDITION"&&shouldPublishUpdate(K,_e,xe.value)&&oe.add(xe.value),xe.type==="REMOVAL"&&shouldPublishUpdate(K,_e,xe.value)&&oe.remove(xe.value)};return{updateDroppableIsEnabled:ce,updateDroppableIsCombineEnabled:ue,scrollDroppable:pe,updateDroppableScroll:Ae,startPublishing:xe=>{ne&&invariant();const _e=K.draggable.getById(xe.draggableId),$e=K.droppable.getById(_e.descriptor.droppableId),Ie={draggable:_e.descriptor,droppable:$e.descriptor},Fe=K.subscribe(me);return ne={critical:Ie,unsubscribe:Fe},getInitialPublish({critical:Ie,registry:K,scrollOptions:xe.scrollOptions})},stopPublishing:ve}},canStartDrag=(K,J)=>K.phase==="IDLE"?!0:K.phase!=="DROP_ANIMATING"||K.completed.result.draggableId===J?!1:K.completed.result.reason==="DROP",scrollWindow=K=>{window.scrollBy(K.x,K.y)};const getScrollableDroppables=memoizeOne(K=>toDroppableList(K).filter(J=>!(!J.isEnabled||!J.frame))),getScrollableDroppableOver=(K,J)=>getScrollableDroppables(J).find(oe=>(oe.frame||invariant(),isPositionInFrame(oe.frame.pageMarginBox)(K)))||null;var getBestScrollableDroppable=({center:K,destination:J,droppables:ne})=>{if(J){const ce=ne[J];return ce.frame?ce:null}return getScrollableDroppableOver(K,ne)};const defaultAutoScrollerOptions={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:K=>K**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var getDistanceThresholds=(K,J,ne=()=>defaultAutoScrollerOptions)=>{const oe=ne(),ce=K[J.size]*oe.startFromPercentage,ue=K[J.size]*oe.maxScrollAtPercentage;return{startScrollingFrom:ce,maxScrollValueAt:ue}},getPercentage=({startOfRange:K,endOfRange:J,current:ne})=>{const oe=J-K;return oe===0?0:(ne-K)/oe},minScroll=1,getValueFromDistance=(K,J,ne=()=>defaultAutoScrollerOptions)=>{const oe=ne();if(K>J.startScrollingFrom)return 0;if(K<=J.maxScrollValueAt)return oe.maxPixelScroll;if(K===J.startScrollingFrom)return minScroll;const ue=1-getPercentage({startOfRange:J.maxScrollValueAt,endOfRange:J.startScrollingFrom,current:K}),Ae=oe.maxPixelScroll*oe.ease(ue);return Math.ceil(Ae)},dampenValueByTime=(K,J,ne)=>{const oe=ne(),ce=oe.durationDampening.accelerateAt,ue=oe.durationDampening.stopDampeningAt,Ae=J,pe=ue,me=Date.now()-Ae;if(me>=ue)return K;if(me<ce)return minScroll;const ge=getPercentage({startOfRange:ce,endOfRange:pe,current:me}),ye=K*oe.ease(ge);return Math.ceil(ye)},getValue$2=({distanceToEdge:K,thresholds:J,dragStartTime:ne,shouldUseTimeDampening:oe,getAutoScrollerOptions:ce})=>{const ue=getValueFromDistance(K,J,ce);return ue===0?0:oe?Math.max(dampenValueByTime(ue,ne,ce),minScroll):ue},getScrollOnAxis=({container:K,distanceToEdges:J,dragStartTime:ne,axis:oe,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})=>{const Ae=getDistanceThresholds(K,oe,ue);return J[oe.end]<J[oe.start]?getValue$2({distanceToEdge:J[oe.end],thresholds:Ae,dragStartTime:ne,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue}):-1*getValue$2({distanceToEdge:J[oe.start],thresholds:Ae,dragStartTime:ne,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})},adjustForSizeLimits=({container:K,subject:J,proposedScroll:ne})=>{const oe=J.height>K.height,ce=J.width>K.width;return!ce&&!oe?ne:ce&&oe?null:{x:ce?0:ne.x,y:oe?0:ne.y}};const clean=apply(K=>K===0?0:K);var getScroll$1=({dragStartTime:K,container:J,subject:ne,center:oe,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})=>{const Ae={top:oe.y-J.top,right:J.right-oe.x,bottom:J.bottom-oe.y,left:oe.x-J.left},pe=getScrollOnAxis({container:J,distanceToEdges:Ae,dragStartTime:K,axis:vertical,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue}),ve=getScrollOnAxis({container:J,distanceToEdges:Ae,dragStartTime:K,axis:horizontal,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue}),me=clean({x:ve,y:pe});if(isEqual$1(me,origin))return null;const ge=adjustForSizeLimits({container:J,subject:ne,proposedScroll:me});return ge?isEqual$1(ge,origin)?null:ge:null};const smallestSigned=apply(K=>K===0?0:K>0?1:-1),getOverlap=(()=>{const K=(J,ne)=>J<0?J:J>ne?J-ne:0;return({current:J,max:ne,change:oe})=>{const ce=add$1(J,oe),ue={x:K(ce.x,ne.x),y:K(ce.y,ne.y)};return isEqual$1(ue,origin)?null:ue}})(),canPartiallyScroll=({max:K,current:J,change:ne})=>{const oe={x:Math.max(J.x,K.x),y:Math.max(J.y,K.y)},ce=smallestSigned(ne),ue=getOverlap({max:oe,current:J,change:ce});return!ue||ce.x!==0&&ue.x===0||ce.y!==0&&ue.y===0},canScrollWindow=(K,J)=>canPartiallyScroll({current:K.scroll.current,max:K.scroll.max,change:J}),getWindowOverlap=(K,J)=>{if(!canScrollWindow(K,J))return null;const ne=K.scroll.max,oe=K.scroll.current;return getOverlap({current:oe,max:ne,change:J})},canScrollDroppable=(K,J)=>{const ne=K.frame;return ne?canPartiallyScroll({current:ne.scroll.current,max:ne.scroll.max,change:J}):!1},getDroppableOverlap=(K,J)=>{const ne=K.frame;return!ne||!canScrollDroppable(K,J)?null:getOverlap({current:ne.scroll.current,max:ne.scroll.max,change:J})};var getWindowScrollChange=({viewport:K,subject:J,center:ne,dragStartTime:oe,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})=>{const Ae=getScroll$1({dragStartTime:oe,container:K.frame,subject:J,center:ne,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue});return Ae&&canScrollWindow(K,Ae)?Ae:null},getDroppableScrollChange=({droppable:K,subject:J,center:ne,dragStartTime:oe,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})=>{const Ae=K.frame;if(!Ae)return null;const pe=getScroll$1({dragStartTime:oe,container:Ae.pageMarginBox,subject:J,center:ne,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue});return pe&&canScrollDroppable(K,pe)?pe:null},scroll=({state:K,dragStartTime:J,shouldUseTimeDampening:ne,scrollWindow:oe,scrollDroppable:ce,getAutoScrollerOptions:ue})=>{const Ae=K.current.page.borderBoxCenter,ve=K.dimensions.draggables[K.critical.draggable.id].page.marginBox;if(K.isWindowScrollAllowed){const ye=K.viewport,xe=getWindowScrollChange({dragStartTime:J,viewport:ye,subject:ve,center:Ae,shouldUseTimeDampening:ne,getAutoScrollerOptions:ue});if(xe){oe(xe);return}}const me=getBestScrollableDroppable({center:Ae,destination:whatIsDraggedOver(K.impact),droppables:K.dimensions.droppables});if(!me)return;const ge=getDroppableScrollChange({dragStartTime:J,droppable:me,subject:ve,center:Ae,shouldUseTimeDampening:ne,getAutoScrollerOptions:ue});ge&&ce(me.descriptor.id,ge)},createFluidScroller=({scrollWindow:K,scrollDroppable:J,getAutoScrollerOptions:ne=()=>defaultAutoScrollerOptions})=>{const oe=rafSchd(K),ce=rafSchd(J);let ue=null;const Ae=me=>{ue||invariant();const{shouldUseTimeDampening:ge,dragStartTime:ye}=ue;scroll({state:me,scrollWindow:oe,scrollDroppable:ce,dragStartTime:ye,shouldUseTimeDampening:ge,getAutoScrollerOptions:ne})};return{start:me=>{ue&&invariant();const ge=Date.now();let ye=!1;const xe=()=>{ye=!0};scroll({state:me,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:xe,scrollDroppable:xe,getAutoScrollerOptions:ne}),ue={dragStartTime:ge,shouldUseTimeDampening:ye},ye&&Ae(me)},stop:()=>{ue&&(oe.cancel(),ce.cancel(),ue=null)},scroll:Ae}},createJumpScroller=({move:K,scrollDroppable:J,scrollWindow:ne})=>{const oe=(pe,ve)=>{const me=add$1(pe.current.client.selection,ve);K({client:me})},ce=(pe,ve)=>{if(!canScrollDroppable(pe,ve))return ve;const me=getDroppableOverlap(pe,ve);if(!me)return J(pe.descriptor.id,ve),null;const ge=subtract(ve,me);return J(pe.descriptor.id,ge),subtract(ve,ge)},ue=(pe,ve,me)=>{if(!pe||!canScrollWindow(ve,me))return me;const ge=getWindowOverlap(ve,me);if(!ge)return ne(me),null;const ye=subtract(me,ge);return ne(ye),subtract(me,ye)};return pe=>{const ve=pe.scrollJumpRequest;if(!ve)return;const me=whatIsDraggedOver(pe.impact);me||invariant();const ge=ce(pe.dimensions.droppables[me],ve);if(!ge)return;const ye=pe.viewport,xe=ue(pe.isWindowScrollAllowed,ye,ge);xe&&oe(pe,xe)}},createAutoScroller=({scrollDroppable:K,scrollWindow:J,move:ne,getAutoScrollerOptions:oe})=>{const ce=createFluidScroller({scrollWindow:J,scrollDroppable:K,getAutoScrollerOptions:oe}),ue=createJumpScroller({move:ne,scrollWindow:J,scrollDroppable:K});return{scroll:ve=>{if(!(oe().disabled||ve.phase!=="DRAGGING")){if(ve.movementMode==="FLUID"){ce.scroll(ve);return}ve.scrollJumpRequest&&ue(ve)}},start:ce.start,stop:ce.stop}};const prefix="data-rfd",dragHandle=(()=>{const K=`${prefix}-drag-handle`;return{base:K,draggableId:`${K}-draggable-id`,contextId:`${K}-context-id`}})(),draggable=(()=>{const K=`${prefix}-draggable`;return{base:K,contextId:`${K}-context-id`,id:`${K}-id`}})(),droppable=(()=>{const K=`${prefix}-droppable`;return{base:K,contextId:`${K}-context-id`,id:`${K}-id`}})(),scrollContainer={contextId:`${prefix}-scroll-container-context-id`},makeGetSelector=K=>J=>`[${J}="${K}"]`,getStyles=(K,J)=>K.map(ne=>{const oe=ne.styles[J];return oe?`${ne.selector} { ${oe} }`:""}).join(" "),noPointerEvents="pointer-events: none;";var getStyles$1=K=>{const J=makeGetSelector(K),ne=(()=>{const pe=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:J(dragHandle.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:pe,dragging:noPointerEvents,dropAnimating:pe}}})(),oe=(()=>{const pe=`
      transition: ${transitions.outOfTheWay};
    `;return{selector:J(draggable.contextId),styles:{dragging:pe,dropAnimating:pe,userCancel:pe}}})(),ce={selector:J(droppable.contextId),styles:{always:"overflow-anchor: none;"}},Ae=[oe,ne,ce,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:getStyles(Ae,"always"),resting:getStyles(Ae,"resting"),dragging:getStyles(Ae,"dragging"),dropAnimating:getStyles(Ae,"dropAnimating"),userCancel:getStyles(Ae,"userCancel")}};const useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect;var useLayoutEffect=useIsomorphicLayoutEffect;const getHead=()=>{const K=document.querySelector("head");return K||invariant(),K},createStyleEl=K=>{const J=document.createElement("style");return K&&J.setAttribute("nonce",K),J.type="text/css",J};function useStyleMarshal(K,J){const ne=useMemo(()=>getStyles$1(K),[K]),oe=reactExports.useRef(null),ce=reactExports.useRef(null),ue=useCallback(memoizeOne(ye=>{const xe=ce.current;xe||invariant(),xe.textContent=ye}),[]),Ae=useCallback(ye=>{const xe=oe.current;xe||invariant(),xe.textContent=ye},[]);useLayoutEffect(()=>{!oe.current&&!ce.current||invariant();const ye=createStyleEl(J),xe=createStyleEl(J);return oe.current=ye,ce.current=xe,ye.setAttribute(`${prefix}-always`,K),xe.setAttribute(`${prefix}-dynamic`,K),getHead().appendChild(ye),getHead().appendChild(xe),Ae(ne.always),ue(ne.resting),()=>{const _e=$e=>{const Ie=$e.current;Ie||invariant(),getHead().removeChild(Ie),$e.current=null};_e(oe),_e(ce)}},[J,Ae,ue,ne.always,ne.resting,K]);const pe=useCallback(()=>ue(ne.dragging),[ue,ne.dragging]),ve=useCallback(ye=>{if(ye==="DROP"){ue(ne.dropAnimating);return}ue(ne.userCancel)},[ue,ne.dropAnimating,ne.userCancel]),me=useCallback(()=>{ce.current&&ue(ne.resting)},[ue,ne.resting]);return useMemo(()=>({dragging:pe,dropping:ve,resting:me}),[pe,ve,me])}function querySelectorAll(K,J){return Array.from(K.querySelectorAll(J))}var getWindowFromEl=K=>K&&K.ownerDocument&&K.ownerDocument.defaultView?K.ownerDocument.defaultView:window;function isHtmlElement(K){return K instanceof getWindowFromEl(K).HTMLElement}function findDragHandle(K,J){const ne=`[${dragHandle.contextId}="${K}"]`,oe=querySelectorAll(document,ne);if(!oe.length)return null;const ce=oe.find(ue=>ue.getAttribute(dragHandle.draggableId)===J);return!ce||!isHtmlElement(ce)?null:ce}function useFocusMarshal(K){const J=reactExports.useRef({}),ne=reactExports.useRef(null),oe=reactExports.useRef(null),ce=reactExports.useRef(!1),ue=useCallback(function(xe,_e){const $e={id:xe,focus:_e};return J.current[xe]=$e,function(){const Fe=J.current;Fe[xe]!==$e&&delete Fe[xe]}},[]),Ae=useCallback(function(xe){const _e=findDragHandle(K,xe);_e&&_e!==document.activeElement&&_e.focus()},[K]),pe=useCallback(function(xe,_e){ne.current===xe&&(ne.current=_e)},[]),ve=useCallback(function(){oe.current||ce.current&&(oe.current=requestAnimationFrame(()=>{oe.current=null;const xe=ne.current;xe&&Ae(xe)}))},[Ae]),me=useCallback(function(xe){ne.current=null;const _e=document.activeElement;_e&&_e.getAttribute(dragHandle.draggableId)===xe&&(ne.current=xe)},[]);return useLayoutEffect(()=>(ce.current=!0,function(){ce.current=!1;const xe=oe.current;xe&&cancelAnimationFrame(xe)}),[]),useMemo(()=>({register:ue,tryRecordFocus:me,tryRestoreFocusRecorded:ve,tryShiftRecord:pe}),[ue,me,ve,pe])}function createRegistry(){const K={draggables:{},droppables:{}},J=[];function ne(ye){return J.push(ye),function(){const _e=J.indexOf(ye);_e!==-1&&J.splice(_e,1)}}function oe(ye){J.length&&J.forEach(xe=>xe(ye))}function ce(ye){return K.draggables[ye]||null}function ue(ye){const xe=ce(ye);return xe||invariant(),xe}const Ae={register:ye=>{K.draggables[ye.descriptor.id]=ye,oe({type:"ADDITION",value:ye})},update:(ye,xe)=>{const _e=K.draggables[xe.descriptor.id];_e&&_e.uniqueId===ye.uniqueId&&(delete K.draggables[xe.descriptor.id],K.draggables[ye.descriptor.id]=ye)},unregister:ye=>{const xe=ye.descriptor.id,_e=ce(xe);_e&&ye.uniqueId===_e.uniqueId&&(delete K.draggables[xe],K.droppables[ye.descriptor.droppableId]&&oe({type:"REMOVAL",value:ye}))},getById:ue,findById:ce,exists:ye=>!!ce(ye),getAllByType:ye=>Object.values(K.draggables).filter(xe=>xe.descriptor.type===ye)};function pe(ye){return K.droppables[ye]||null}function ve(ye){const xe=pe(ye);return xe||invariant(),xe}const me={register:ye=>{K.droppables[ye.descriptor.id]=ye},unregister:ye=>{const xe=pe(ye.descriptor.id);xe&&ye.uniqueId===xe.uniqueId&&delete K.droppables[ye.descriptor.id]},getById:ve,findById:pe,exists:ye=>!!pe(ye),getAllByType:ye=>Object.values(K.droppables).filter(xe=>xe.descriptor.type===ye)};function ge(){K.draggables={},K.droppables={},J.length=0}return{draggable:Ae,droppable:me,subscribe:ne,clean:ge}}function useRegistry(){const K=useMemo(createRegistry,[]);return reactExports.useEffect(()=>function(){React.version.startsWith("16")||React.version.startsWith("17")?requestAnimationFrame(K.clean):K.clean()},[K]),K}var StoreContext$1=React.createContext(null),getBodyElement=()=>{const K=document.body;return K||invariant(),K};const visuallyHidden={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var visuallyHidden$1=visuallyHidden;const getId=K=>`rfd-announcement-${K}`;function useAnnouncer(K){const J=useMemo(()=>getId(K),[K]),ne=reactExports.useRef(null);return reactExports.useEffect(function(){const ue=document.createElement("div");return ne.current=ue,ue.id=J,ue.setAttribute("aria-live","assertive"),ue.setAttribute("aria-atomic","true"),_extends(ue.style,visuallyHidden$1),getBodyElement().appendChild(ue),function(){setTimeout(function(){const ve=getBodyElement();ve.contains(ue)&&ve.removeChild(ue),ue===ne.current&&(ne.current=null)})}},[J]),useCallback(ce=>{const ue=ne.current;if(ue){ue.textContent=ce;return}},[])}let count$1=0;const defaults={separator:"::"};function useDeprecatedUniqueId(K,J=defaults){return useMemo(()=>`${K}${J.separator}${count$1++}`,[J.separator,K])}function useUniqueId(K,J=defaults){const ne=React.useId();return useMemo(()=>`${K}${J.separator}${ne}`,[J.separator,K,ne])}var useUniqueId$1="useId"in React?useUniqueId:useDeprecatedUniqueId;function getElementId({contextId:K,uniqueId:J}){return`rfd-hidden-text-${K}-${J}`}function useHiddenTextElement({contextId:K,text:J}){const ne=useUniqueId$1("hidden-text",{separator:"-"}),oe=useMemo(()=>getElementId({contextId:K,uniqueId:ne}),[ne,K]);return reactExports.useEffect(function(){const ue=document.createElement("div");return ue.id=oe,ue.textContent=J,ue.style.display="none",getBodyElement().appendChild(ue),function(){const pe=getBodyElement();pe.contains(ue)&&pe.removeChild(ue)}},[oe,J]),oe}var AppContext=React.createContext(null);function usePrevious(K){const J=reactExports.useRef(K);return reactExports.useEffect(()=>{J.current=K}),J}function create$3(){let K=null;function J(){return!!K}function ne(Ae){return Ae===K}function oe(Ae){K&&invariant();const pe={abandon:Ae};return K=pe,pe}function ce(){K||invariant(),K=null}function ue(){K&&(K.abandon(),ce())}return{isClaimed:J,isActive:ne,claim:oe,release:ce,tryAbandon:ue}}function isDragging(K){return K.phase==="IDLE"||K.phase==="DROP_ANIMATING"?!1:K.isDragging}const tab$1=9,enter=13,escape$1=27,space$1=32,pageUp=33,pageDown=34,end=35,home=36,arrowLeft=37,arrowUp=38,arrowRight=39,arrowDown=40,preventedKeys={[enter]:!0,[tab$1]:!0};var preventStandardKeyEvents=K=>{preventedKeys[K.keyCode]&&K.preventDefault()};const supportedEventName=(()=>{const K="visibilitychange";return typeof document>"u"?K:[K,`ms${K}`,`webkit${K}`,`moz${K}`,`o${K}`].find(oe=>`on${oe}`in document)||K})();var supportedPageVisibilityEventName=supportedEventName;const primaryButton=0,sloppyClickThreshold=5;function isSloppyClickThresholdExceeded(K,J){return Math.abs(J.x-K.x)>=sloppyClickThreshold||Math.abs(J.y-K.y)>=sloppyClickThreshold}const idle$1={type:"IDLE"};function getCaptureBindings({cancel:K,completed:J,getPhase:ne,setPhase:oe}){return[{eventName:"mousemove",fn:ce=>{const{button:ue,clientX:Ae,clientY:pe}=ce;if(ue!==primaryButton)return;const ve={x:Ae,y:pe},me=ne();if(me.type==="DRAGGING"){ce.preventDefault(),me.actions.move(ve);return}me.type!=="PENDING"&&invariant();const ge=me.point;if(!isSloppyClickThresholdExceeded(ge,ve))return;ce.preventDefault();const ye=me.actions.fluidLift(ve);oe({type:"DRAGGING",actions:ye})}},{eventName:"mouseup",fn:ce=>{const ue=ne();if(ue.type!=="DRAGGING"){K();return}ce.preventDefault(),ue.actions.drop({shouldBlockNextClick:!0}),J()}},{eventName:"mousedown",fn:ce=>{ne().type==="DRAGGING"&&ce.preventDefault(),K()}},{eventName:"keydown",fn:ce=>{if(ne().type==="PENDING"){K();return}if(ce.keyCode===escape$1){ce.preventDefault(),K();return}preventStandardKeyEvents(ce)}},{eventName:"resize",fn:K},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{ne().type==="PENDING"&&K()}},{eventName:"webkitmouseforcedown",fn:ce=>{const ue=ne();if(ue.type==="IDLE"&&invariant(),ue.actions.shouldRespectForcePress()){K();return}ce.preventDefault()}},{eventName:supportedPageVisibilityEventName,fn:K}]}function useMouseSensor(K){const J=reactExports.useRef(idle$1),ne=reactExports.useRef(noop$2$1),oe=useMemo(()=>({eventName:"mousedown",fn:function(ye){if(ye.defaultPrevented||ye.button!==primaryButton||ye.ctrlKey||ye.metaKey||ye.shiftKey||ye.altKey)return;const xe=K.findClosestDraggableId(ye);if(!xe)return;const _e=K.tryGetLock(xe,Ae,{sourceEvent:ye});if(!_e)return;ye.preventDefault();const $e={x:ye.clientX,y:ye.clientY};ne.current(),me(_e,$e)}}),[K]),ce=useMemo(()=>({eventName:"webkitmouseforcewillbegin",fn:ge=>{if(ge.defaultPrevented)return;const ye=K.findClosestDraggableId(ge);if(!ye)return;const xe=K.findOptionsForDraggable(ye);xe&&(xe.shouldRespectForcePress||K.canGetLock(ye)&&ge.preventDefault())}}),[K]),ue=useCallback(function(){const ye={passive:!1,capture:!0};ne.current=bindEvents(window,[ce,oe],ye)},[ce,oe]),Ae=useCallback(()=>{J.current.type!=="IDLE"&&(J.current=idle$1,ne.current(),ue())},[ue]),pe=useCallback(()=>{const ge=J.current;Ae(),ge.type==="DRAGGING"&&ge.actions.cancel({shouldBlockNextClick:!0}),ge.type==="PENDING"&&ge.actions.abort()},[Ae]),ve=useCallback(function(){const ye={capture:!0,passive:!1},xe=getCaptureBindings({cancel:pe,completed:Ae,getPhase:()=>J.current,setPhase:_e=>{J.current=_e}});ne.current=bindEvents(window,xe,ye)},[pe,Ae]),me=useCallback(function(ye,xe){J.current.type!=="IDLE"&&invariant(),J.current={type:"PENDING",point:xe,actions:ye},ve()},[ve]);useLayoutEffect(function(){return ue(),function(){ne.current()}},[ue])}function noop$1$1(){}const scrollJumpKeys={[pageDown]:!0,[pageUp]:!0,[home]:!0,[end]:!0};function getDraggingBindings(K,J){function ne(){J(),K.cancel()}function oe(){J(),K.drop()}return[{eventName:"keydown",fn:ce=>{if(ce.keyCode===escape$1){ce.preventDefault(),ne();return}if(ce.keyCode===space$1){ce.preventDefault(),oe();return}if(ce.keyCode===arrowDown){ce.preventDefault(),K.moveDown();return}if(ce.keyCode===arrowUp){ce.preventDefault(),K.moveUp();return}if(ce.keyCode===arrowRight){ce.preventDefault(),K.moveRight();return}if(ce.keyCode===arrowLeft){ce.preventDefault(),K.moveLeft();return}if(scrollJumpKeys[ce.keyCode]){ce.preventDefault();return}preventStandardKeyEvents(ce)}},{eventName:"mousedown",fn:ne},{eventName:"mouseup",fn:ne},{eventName:"click",fn:ne},{eventName:"touchstart",fn:ne},{eventName:"resize",fn:ne},{eventName:"wheel",fn:ne,options:{passive:!0}},{eventName:supportedPageVisibilityEventName,fn:ne}]}function useKeyboardSensor(K){const J=reactExports.useRef(noop$1$1),ne=useMemo(()=>({eventName:"keydown",fn:function(ue){if(ue.defaultPrevented||ue.keyCode!==space$1)return;const Ae=K.findClosestDraggableId(ue);if(!Ae)return;const pe=K.tryGetLock(Ae,ge,{sourceEvent:ue});if(!pe)return;ue.preventDefault();let ve=!0;const me=pe.snapLift();J.current();function ge(){ve||invariant(),ve=!1,J.current(),oe()}J.current=bindEvents(window,getDraggingBindings(me,ge),{capture:!0,passive:!1})}}),[K]),oe=useCallback(function(){const ue={passive:!1,capture:!0};J.current=bindEvents(window,[ne],ue)},[ne]);useLayoutEffect(function(){return oe(),function(){J.current()}},[oe])}const idle={type:"IDLE"},timeForLongPress=120,forcePressThreshold=.15;function getWindowBindings({cancel:K,getPhase:J}){return[{eventName:"orientationchange",fn:K},{eventName:"resize",fn:K},{eventName:"contextmenu",fn:ne=>{ne.preventDefault()}},{eventName:"keydown",fn:ne=>{if(J().type!=="DRAGGING"){K();return}ne.keyCode===escape$1&&ne.preventDefault(),K()}},{eventName:supportedPageVisibilityEventName,fn:K}]}function getHandleBindings({cancel:K,completed:J,getPhase:ne}){return[{eventName:"touchmove",options:{capture:!1},fn:oe=>{const ce=ne();if(ce.type!=="DRAGGING"){K();return}ce.hasMoved=!0;const{clientX:ue,clientY:Ae}=oe.touches[0],pe={x:ue,y:Ae};oe.preventDefault(),ce.actions.move(pe)}},{eventName:"touchend",fn:oe=>{const ce=ne();if(ce.type!=="DRAGGING"){K();return}oe.preventDefault(),ce.actions.drop({shouldBlockNextClick:!0}),J()}},{eventName:"touchcancel",fn:oe=>{if(ne().type!=="DRAGGING"){K();return}oe.preventDefault(),K()}},{eventName:"touchforcechange",fn:oe=>{const ce=ne();ce.type==="IDLE"&&invariant();const ue=oe.touches[0];if(!ue||!(ue.force>=forcePressThreshold))return;const pe=ce.actions.shouldRespectForcePress();if(ce.type==="PENDING"){pe&&K();return}if(pe){if(ce.hasMoved){oe.preventDefault();return}K();return}oe.preventDefault()}},{eventName:supportedPageVisibilityEventName,fn:K}]}function useTouchSensor(K){const J=reactExports.useRef(idle),ne=reactExports.useRef(noop$2$1),oe=useCallback(function(){return J.current},[]),ce=useCallback(function(_e){J.current=_e},[]),ue=useMemo(()=>({eventName:"touchstart",fn:function(_e){if(_e.defaultPrevented)return;const $e=K.findClosestDraggableId(_e);if(!$e)return;const Ie=K.tryGetLock($e,pe,{sourceEvent:_e});if(!Ie)return;const Fe=_e.touches[0],{clientX:ke,clientY:je}=Fe,We={x:ke,y:je};ne.current(),ye(Ie,We)}}),[K]),Ae=useCallback(function(){const _e={capture:!0,passive:!1};ne.current=bindEvents(window,[ue],_e)},[ue]),pe=useCallback(()=>{const xe=J.current;xe.type!=="IDLE"&&(xe.type==="PENDING"&&clearTimeout(xe.longPressTimerId),ce(idle),ne.current(),Ae())},[Ae,ce]),ve=useCallback(()=>{const xe=J.current;pe(),xe.type==="DRAGGING"&&xe.actions.cancel({shouldBlockNextClick:!0}),xe.type==="PENDING"&&xe.actions.abort()},[pe]),me=useCallback(function(){const _e={capture:!0,passive:!1},$e={cancel:ve,completed:pe,getPhase:oe},Ie=bindEvents(window,getHandleBindings($e),_e),Fe=bindEvents(window,getWindowBindings($e),_e);ne.current=function(){Ie(),Fe()}},[ve,oe,pe]),ge=useCallback(function(){const _e=oe();_e.type!=="PENDING"&&invariant();const $e=_e.actions.fluidLift(_e.point);ce({type:"DRAGGING",actions:$e,hasMoved:!1})},[oe,ce]),ye=useCallback(function(_e,$e){oe().type!=="IDLE"&&invariant();const Ie=setTimeout(ge,timeForLongPress);ce({type:"PENDING",point:$e,actions:_e,longPressTimerId:Ie}),me()},[me,oe,ce,ge]);useLayoutEffect(function(){return Ae(),function(){ne.current();const $e=oe();$e.type==="PENDING"&&(clearTimeout($e.longPressTimerId),ce(idle))}},[oe,Ae,ce]),useLayoutEffect(function(){return bindEvents(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const interactiveTagNames=["input","button","textarea","select","option","optgroup","video","audio"];function isAnInteractiveElement(K,J){if(J==null)return!1;if(interactiveTagNames.includes(J.tagName.toLowerCase()))return!0;const oe=J.getAttribute("contenteditable");return oe==="true"||oe===""?!0:J===K?!1:isAnInteractiveElement(K,J.parentElement)}function isEventInInteractiveElement(K,J){const ne=J.target;return isHtmlElement(ne)?isAnInteractiveElement(K,ne):!1}var getBorderBoxCenterPosition=K=>getRect(K.getBoundingClientRect()).center;function isElement(K){return K instanceof getWindowFromEl(K).Element}const supportedMatchesName=(()=>{const K="matches";return typeof document>"u"?K:[K,"msMatchesSelector","webkitMatchesSelector"].find(oe=>oe in Element.prototype)||K})();function closestPonyfill(K,J){return K==null?null:K[supportedMatchesName](J)?K:closestPonyfill(K.parentElement,J)}function closest(K,J){return K.closest?K.closest(J):closestPonyfill(K,J)}function getSelector$1(K){return`[${dragHandle.contextId}="${K}"]`}function findClosestDragHandleFromEvent(K,J){const ne=J.target;if(!isElement(ne))return null;const oe=getSelector$1(K),ce=closest(ne,oe);return!ce||!isHtmlElement(ce)?null:ce}function tryGetClosestDraggableIdFromEvent(K,J){const ne=findClosestDragHandleFromEvent(K,J);return ne?ne.getAttribute(dragHandle.draggableId):null}function findDraggable(K,J){const ne=`[${draggable.contextId}="${K}"]`,ce=querySelectorAll(document,ne).find(ue=>ue.getAttribute(draggable.id)===J);return!ce||!isHtmlElement(ce)?null:ce}function preventDefault(K){K.preventDefault()}function isActive({expected:K,phase:J,isLockActive:ne,shouldWarn:oe}){return!(!ne()||K!==J)}function canStart({lockAPI:K,store:J,registry:ne,draggableId:oe}){if(K.isClaimed())return!1;const ce=ne.draggable.findById(oe);return!(!ce||!ce.options.isEnabled||!canStartDrag(J.getState(),oe))}function tryStart({lockAPI:K,contextId:J,store:ne,registry:oe,draggableId:ce,forceSensorStop:ue,sourceEvent:Ae}){if(!canStart({lockAPI:K,store:ne,registry:oe,draggableId:ce}))return null;const ve=oe.draggable.getById(ce),me=findDraggable(J,ve.descriptor.id);if(!me||Ae&&!ve.options.canDragInteractiveElements&&isEventInInteractiveElement(me,Ae))return null;const ge=K.claim(ue||noop$2$1);let ye="PRE_DRAG";function xe(){return ve.options.shouldRespectForcePress}function _e(){return K.isActive(ge)}function $e(Xe,Je){isActive({expected:Xe,phase:ye,isLockActive:_e,shouldWarn:!0})&&ne.dispatch(Je())}const Ie=$e.bind(null,"DRAGGING");function Fe(Xe){function Je(){K.release(),ye="COMPLETED"}ye!=="PRE_DRAG"&&(Je(),invariant()),ne.dispatch(lift$1(Xe.liftActionArgs)),ye="DRAGGING";function nt(et,tt={shouldBlockNextClick:!1}){if(Xe.cleanup(),tt.shouldBlockNextClick){const st=bindEvents(window,[{eventName:"click",fn:preventDefault,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(st)}Je(),ne.dispatch(drop$1({reason:et}))}return{isActive:()=>isActive({expected:"DRAGGING",phase:ye,isLockActive:_e,shouldWarn:!1}),shouldRespectForcePress:xe,drop:et=>nt("DROP",et),cancel:et=>nt("CANCEL",et),...Xe.actions}}function ke(Xe){const Je=rafSchd(et=>{Ie(()=>move({client:et}))});return{...Fe({liftActionArgs:{id:ce,clientSelection:Xe,movementMode:"FLUID"},cleanup:()=>Je.cancel(),actions:{move:Je}}),move:Je}}function je(){const Xe={moveUp:()=>Ie(moveUp),moveRight:()=>Ie(moveRight),moveDown:()=>Ie(moveDown),moveLeft:()=>Ie(moveLeft)};return Fe({liftActionArgs:{id:ce,clientSelection:getBorderBoxCenterPosition(me),movementMode:"SNAP"},cleanup:noop$2$1,actions:Xe})}function We(){isActive({expected:"PRE_DRAG",phase:ye,isLockActive:_e,shouldWarn:!0})&&K.release()}return{isActive:()=>isActive({expected:"PRE_DRAG",phase:ye,isLockActive:_e,shouldWarn:!1}),shouldRespectForcePress:xe,fluidLift:ke,snapLift:je,abort:We}}const defaultSensors=[useMouseSensor,useKeyboardSensor,useTouchSensor];function useSensorMarshal({contextId:K,store:J,registry:ne,customSensors:oe,enableDefaultSensors:ce}){const ue=[...ce?defaultSensors:[],...oe||[]],Ae=reactExports.useState(()=>create$3())[0],pe=useCallback(function(Fe,ke){isDragging(Fe)&&!isDragging(ke)&&Ae.tryAbandon()},[Ae]);useLayoutEffect(function(){let Fe=J.getState();return J.subscribe(()=>{const je=J.getState();pe(Fe,je),Fe=je})},[Ae,J,pe]),useLayoutEffect(()=>Ae.tryAbandon,[Ae.tryAbandon]);const ve=useCallback(Ie=>canStart({lockAPI:Ae,registry:ne,store:J,draggableId:Ie}),[Ae,ne,J]),me=useCallback((Ie,Fe,ke)=>tryStart({lockAPI:Ae,registry:ne,contextId:K,store:J,draggableId:Ie,forceSensorStop:Fe||null,sourceEvent:ke&&ke.sourceEvent?ke.sourceEvent:null}),[K,Ae,ne,J]),ge=useCallback(Ie=>tryGetClosestDraggableIdFromEvent(K,Ie),[K]),ye=useCallback(Ie=>{const Fe=ne.draggable.findById(Ie);return Fe?Fe.options:null},[ne.draggable]),xe=useCallback(function(){Ae.isClaimed()&&(Ae.tryAbandon(),J.getState().phase!=="IDLE"&&J.dispatch(flush()))},[Ae,J]),_e=useCallback(()=>Ae.isClaimed(),[Ae]),$e=useMemo(()=>({canGetLock:ve,tryGetLock:me,findClosestDraggableId:ge,findOptionsForDraggable:ye,tryReleaseLock:xe,isLockClaimed:_e}),[ve,me,ge,ye,xe,_e]);for(let Ie=0;Ie<ue.length;Ie++)ue[Ie]($e)}const createResponders=K=>({onBeforeCapture:J=>{const ne=()=>{K.onBeforeCapture&&K.onBeforeCapture(J)};React.version.startsWith("16")||React.version.startsWith("17")?ne():reactDomExports.flushSync(ne)},onBeforeDragStart:K.onBeforeDragStart,onDragStart:K.onDragStart,onDragEnd:K.onDragEnd,onDragUpdate:K.onDragUpdate}),createAutoScrollerOptions=K=>({...defaultAutoScrollerOptions,...K.autoScrollerOptions,durationDampening:{...defaultAutoScrollerOptions.durationDampening,...K.autoScrollerOptions}});function getStore(K){return K.current||invariant(),K.current}function App(K){const{contextId:J,setCallbacks:ne,sensors:oe,nonce:ce,dragHandleUsageInstructions:ue}=K,Ae=reactExports.useRef(null),pe=usePrevious(K),ve=useCallback(()=>createResponders(pe.current),[pe]),me=useCallback(()=>createAutoScrollerOptions(pe.current),[pe]),ge=useAnnouncer(J),ye=useHiddenTextElement({contextId:J,text:ue}),xe=useStyleMarshal(J,ce),_e=useCallback(st=>{getStore(Ae).dispatch(st)},[]),$e=useMemo(()=>bindActionCreators({publishWhileDragging,updateDroppableScroll,updateDroppableIsEnabled,updateDroppableIsCombineEnabled,collectionStarting},_e),[_e]),Ie=useRegistry(),Fe=useMemo(()=>createDimensionMarshal(Ie,$e),[Ie,$e]),ke=useMemo(()=>createAutoScroller({scrollWindow,scrollDroppable:Fe.scrollDroppable,getAutoScrollerOptions:me,...bindActionCreators({move},_e)}),[Fe.scrollDroppable,_e,me]),je=useFocusMarshal(J),We=useMemo(()=>createStore$1({announce:ge,autoScroller:ke,dimensionMarshal:Fe,focusMarshal:je,getResponders:ve,styleMarshal:xe}),[ge,ke,Fe,je,ve,xe]);Ae.current=We;const ze=useCallback(()=>{const st=getStore(Ae);st.getState().phase!=="IDLE"&&st.dispatch(flush())},[]),Xe=useCallback(()=>{const st=getStore(Ae).getState();return st.phase==="DROP_ANIMATING"?!0:st.phase==="IDLE"?!1:st.isDragging},[]),Je=useMemo(()=>({isDragging:Xe,tryAbort:ze}),[Xe,ze]);ne(Je);const nt=useCallback(st=>canStartDrag(getStore(Ae).getState(),st),[]),et=useCallback(()=>isMovementAllowed(getStore(Ae).getState()),[]),tt=useMemo(()=>({marshal:Fe,focus:je,contextId:J,canLift:nt,isMovementAllowed:et,dragHandleUsageInstructionsId:ye,registry:Ie}),[J,Fe,ye,je,nt,et,Ie]);return useSensorMarshal({contextId:J,store:We,registry:Ie,customSensors:oe||null,enableDefaultSensors:K.enableDefaultSensors!==!1}),reactExports.useEffect(()=>ze,[ze]),React.createElement(AppContext.Provider,{value:tt},React.createElement(Provider$2,{context:StoreContext$1,store:We},K.children))}let count=0;function useDeprecatedUniqueContextId(){return useMemo(()=>`${count++}`,[])}function useUniqueContextId(){return React.useId()}var useUniqueContextId$1="useId"in React?useUniqueContextId:useDeprecatedUniqueContextId;function DragDropContext(K){const J=useUniqueContextId$1(),ne=K.dragHandleUsageInstructions||preset$1.dragHandleUsageInstructions;return React.createElement(ErrorBoundary,null,oe=>React.createElement(App,{nonce:K.nonce,contextId:J,setCallbacks:oe,dragHandleUsageInstructions:ne,enableDefaultSensors:K.enableDefaultSensors,sensors:K.sensors,onBeforeCapture:K.onBeforeCapture,onBeforeDragStart:K.onBeforeDragStart,onDragStart:K.onDragStart,onDragUpdate:K.onDragUpdate,onDragEnd:K.onDragEnd,autoScrollerOptions:K.autoScrollerOptions},K.children))}const zIndexOptions={dragging:5e3,dropAnimating:4500},getDraggingTransition=(K,J)=>J?transitions.drop(J.duration):K?transitions.snap:transitions.fluid,getDraggingOpacity=(K,J)=>{if(K)return J?combine.opacity.drop:combine.opacity.combining},getShouldDraggingAnimate=K=>K.forceShouldAnimate!=null?K.forceShouldAnimate:K.mode==="SNAP";function getDraggingStyle(K){const ne=K.dimension.client,{offset:oe,combineWith:ce,dropping:ue}=K,Ae=!!ce,pe=getShouldDraggingAnimate(K),ve=!!ue,me=ve?transforms.drop(oe,Ae):transforms.moveTo(oe);return{position:"fixed",top:ne.marginBox.top,left:ne.marginBox.left,boxSizing:"border-box",width:ne.borderBox.width,height:ne.borderBox.height,transition:getDraggingTransition(pe,ue),transform:me,opacity:getDraggingOpacity(Ae,ve),zIndex:ve?zIndexOptions.dropAnimating:zIndexOptions.dragging,pointerEvents:"none"}}function getSecondaryStyle(K){return{transform:transforms.moveTo(K.offset),transition:K.shouldAnimateDisplacement?void 0:"none"}}function getStyle$1(K){return K.type==="DRAGGING"?getDraggingStyle(K):getSecondaryStyle(K)}function getDimension$1(K,J,ne=origin){const oe=window.getComputedStyle(J),ce=J.getBoundingClientRect(),ue=calculateBox(ce,oe),Ae=withScroll(ue,ne),pe={client:ue,tagName:J.tagName.toLowerCase(),display:oe.display},ve={x:ue.marginBox.width,y:ue.marginBox.height};return{descriptor:K,placeholder:pe,displaceBy:ve,client:ue,page:Ae}}function useDraggablePublisher(K){const J=useUniqueId$1("draggable"),{descriptor:ne,registry:oe,getDraggableRef:ce,canDragInteractiveElements:ue,shouldRespectForcePress:Ae,isEnabled:pe}=K,ve=useMemo(()=>({canDragInteractiveElements:ue,shouldRespectForcePress:Ae,isEnabled:pe}),[ue,pe,Ae]),me=useCallback(_e=>{const $e=ce();return $e||invariant(),getDimension$1(ne,$e,_e)},[ne,ce]),ge=useMemo(()=>({uniqueId:J,descriptor:ne,options:ve,getDimension:me}),[ne,me,ve,J]),ye=reactExports.useRef(ge),xe=reactExports.useRef(!0);useLayoutEffect(()=>(oe.draggable.register(ye.current),()=>oe.draggable.unregister(ye.current)),[oe.draggable]),useLayoutEffect(()=>{if(xe.current){xe.current=!1;return}const _e=ye.current;ye.current=ge,oe.draggable.update(ge,_e)},[ge,oe.draggable])}var DroppableContext=React.createContext(null);function useRequiredContext(K){const J=reactExports.useContext(K);return J||invariant(),J}function preventHtml5Dnd(K){K.preventDefault()}const Draggable=K=>{const J=reactExports.useRef(null),ne=useCallback((Je=null)=>{J.current=Je},[]),oe=useCallback(()=>J.current,[]),{contextId:ce,dragHandleUsageInstructionsId:ue,registry:Ae}=useRequiredContext(AppContext),{type:pe,droppableId:ve}=useRequiredContext(DroppableContext),me=useMemo(()=>({id:K.draggableId,index:K.index,type:pe,droppableId:ve}),[K.draggableId,K.index,pe,ve]),{children:ge,draggableId:ye,isEnabled:xe,shouldRespectForcePress:_e,canDragInteractiveElements:$e,isClone:Ie,mapped:Fe,dropAnimationFinished:ke}=K;if(!Ie){const Je=useMemo(()=>({descriptor:me,registry:Ae,getDraggableRef:oe,canDragInteractiveElements:$e,shouldRespectForcePress:_e,isEnabled:xe}),[me,Ae,oe,$e,_e,xe]);useDraggablePublisher(Je)}const je=useMemo(()=>xe?{tabIndex:0,role:"button","aria-describedby":ue,"data-rfd-drag-handle-draggable-id":ye,"data-rfd-drag-handle-context-id":ce,draggable:!1,onDragStart:preventHtml5Dnd}:null,[ce,ue,ye,xe]),We=useCallback(Je=>{Fe.type==="DRAGGING"&&Fe.dropping&&Je.propertyName==="transform"&&(React.version.startsWith("16")||React.version.startsWith("17")?ke():reactDomExports.flushSync(ke))},[ke,Fe]),ze=useMemo(()=>{const Je=getStyle$1(Fe),nt=Fe.type==="DRAGGING"&&Fe.dropping?We:void 0;return{innerRef:ne,draggableProps:{"data-rfd-draggable-context-id":ce,"data-rfd-draggable-id":ye,style:Je,onTransitionEnd:nt},dragHandleProps:je}},[ce,je,ye,Fe,We,ne]),Xe=useMemo(()=>({draggableId:me.id,type:me.type,source:{index:me.index,droppableId:me.droppableId}}),[me.droppableId,me.id,me.index,me.type]);return React.createElement(React.Fragment,null,ge(ze,Fe.snapshot,Xe))};var Draggable$1=Draggable,isStrictEqual=(K,J)=>K===J,whatIsDraggedOverFromResult=K=>{const{combine:J,destination:ne}=K;return ne?ne.droppableId:J?J.droppableId:null};const getCombineWithFromResult=K=>K.combine?K.combine.draggableId:null,getCombineWithFromImpact=K=>K.at&&K.at.type==="COMBINE"?K.at.combine.draggableId:null;function getDraggableSelector(){const K=memoizeOne((ce,ue)=>({x:ce,y:ue})),J=memoizeOne((ce,ue,Ae=null,pe=null,ve=null)=>({isDragging:!0,isClone:ue,isDropAnimating:!!ve,dropAnimation:ve,mode:ce,draggingOver:Ae,combineWith:pe,combineTargetFor:null})),ne=memoizeOne((ce,ue,Ae,pe,ve=null,me=null,ge=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:ve,combineWith:me,mode:ue,offset:ce,dimension:Ae,forceShouldAnimate:ge,snapshot:J(ue,pe,ve,me,null)}}));return(ce,ue)=>{if(isDragging(ce)){if(ce.critical.draggable.id!==ue.draggableId)return null;const Ae=ce.current.client.offset,pe=ce.dimensions.draggables[ue.draggableId],ve=whatIsDraggedOver(ce.impact),me=getCombineWithFromImpact(ce.impact),ge=ce.forceShouldAnimate;return ne(K(Ae.x,Ae.y),ce.movementMode,pe,ue.isClone,ve,me,ge)}if(ce.phase==="DROP_ANIMATING"){const Ae=ce.completed;if(Ae.result.draggableId!==ue.draggableId)return null;const pe=ue.isClone,ve=ce.dimensions.draggables[ue.draggableId],me=Ae.result,ge=me.mode,ye=whatIsDraggedOverFromResult(me),xe=getCombineWithFromResult(me),$e={duration:ce.dropDuration,curve:curves$1.drop,moveTo:ce.newHomeClientOffset,opacity:xe?combine.opacity.drop:null,scale:xe?combine.scale.drop:null};return{mapped:{type:"DRAGGING",offset:ce.newHomeClientOffset,dimension:ve,dropping:$e,draggingOver:ye,combineWith:xe,mode:ge,forceShouldAnimate:null,snapshot:J(ge,pe,ye,xe,$e)}}}return null}}function getSecondarySnapshot(K=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:K,combineWith:null}}const atRest={mapped:{type:"SECONDARY",offset:origin,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:getSecondarySnapshot(null)}};function getSecondarySelector(){const K=memoizeOne((Ae,pe)=>({x:Ae,y:pe})),J=memoizeOne(getSecondarySnapshot),ne=memoizeOne((Ae,pe=null,ve)=>({mapped:{type:"SECONDARY",offset:Ae,combineTargetFor:pe,shouldAnimateDisplacement:ve,snapshot:J(pe)}})),oe=Ae=>Ae?ne(origin,Ae,!0):null,ce=(Ae,pe,ve,me)=>{const ge=ve.displaced.visible[Ae],ye=!!(me.inVirtualList&&me.effected[Ae]),xe=tryGetCombine(ve),_e=xe&&xe.draggableId===Ae?pe:null;if(!ge){if(!ye)return oe(_e);if(ve.displaced.invisible[Ae])return null;const Fe=negate(me.displacedBy.point),ke=K(Fe.x,Fe.y);return ne(ke,_e,!0)}if(ye)return oe(_e);const $e=ve.displacedBy.point,Ie=K($e.x,$e.y);return ne(Ie,_e,ge.shouldAnimate)};return(Ae,pe)=>{if(isDragging(Ae))return Ae.critical.draggable.id===pe.draggableId?null:ce(pe.draggableId,Ae.critical.draggable.id,Ae.impact,Ae.afterCritical);if(Ae.phase==="DROP_ANIMATING"){const ve=Ae.completed;return ve.result.draggableId===pe.draggableId?null:ce(pe.draggableId,ve.result.draggableId,ve.impact,ve.afterCritical)}return null}}const makeMapStateToProps$1=()=>{const K=getDraggableSelector(),J=getSecondarySelector();return(oe,ce)=>K(oe,ce)||J(oe,ce)||atRest},mapDispatchToProps$1={dropAnimationFinished},ConnectedDraggable=connect(makeMapStateToProps$1,mapDispatchToProps$1,null,{context:StoreContext$1,areStatePropsEqual:isStrictEqual})(Draggable$1);var ConnectedDraggable$1=ConnectedDraggable;function PrivateDraggable(K){return useRequiredContext(DroppableContext).isUsingCloneFor===K.draggableId&&!K.isClone?null:React.createElement(ConnectedDraggable$1,K)}function PublicDraggable(K){const J=typeof K.isDragDisabled=="boolean"?!K.isDragDisabled:!0,ne=!!K.disableInteractiveElementBlocking,oe=!!K.shouldRespectForcePress;return React.createElement(PrivateDraggable,_extends({},K,{isClone:!1,isEnabled:J,canDragInteractiveElements:ne,shouldRespectForcePress:oe}))}const isEqual$2=K=>J=>K===J,isScroll=isEqual$2("scroll"),isAuto$1=isEqual$2("auto"),isEither=(K,J)=>J(K.overflowX)||J(K.overflowY),isElementScrollable=K=>{const J=window.getComputedStyle(K),ne={overflowX:J.overflowX,overflowY:J.overflowY};return isEither(ne,isScroll)||isEither(ne,isAuto$1)},isBodyScrollable=()=>!1,getClosestScrollable=K=>K==null?null:K===document.body?isBodyScrollable()?K:null:K===document.documentElement?null:isElementScrollable(K)?K:getClosestScrollable(K.parentElement);var getScroll=K=>({x:K.scrollLeft,y:K.scrollTop});const getIsFixed=K=>K?window.getComputedStyle(K).position==="fixed"?!0:getIsFixed(K.parentElement):!1;var getEnv=K=>{const J=getClosestScrollable(K),ne=getIsFixed(K);return{closestScrollable:J,isFixedOnPage:ne}},getDroppableDimension=({descriptor:K,isEnabled:J,isCombineEnabled:ne,isFixedOnPage:oe,direction:ce,client:ue,page:Ae,closest:pe})=>{const ve=(()=>{if(!pe)return null;const{scrollSize:xe,client:_e}=pe,$e=getMaxScroll({scrollHeight:xe.scrollHeight,scrollWidth:xe.scrollWidth,height:_e.paddingBox.height,width:_e.paddingBox.width});return{pageMarginBox:pe.page.marginBox,frameClient:_e,scrollSize:xe,shouldClipSubject:pe.shouldClipSubject,scroll:{initial:pe.scroll,current:pe.scroll,max:$e,diff:{value:origin,displacement:origin}}}})(),me=ce==="vertical"?vertical:horizontal,ge=getSubject({page:Ae,withPlaceholder:null,axis:me,frame:ve});return{descriptor:K,isCombineEnabled:ne,isFixedOnPage:oe,axis:me,isEnabled:J,client:ue,page:Ae,frame:ve,subject:ge}};const getClient=(K,J)=>{const ne=getBox(K);if(!J||K!==J)return ne;const oe=ne.paddingBox.top-J.scrollTop,ce=ne.paddingBox.left-J.scrollLeft,ue=oe+J.scrollHeight,Ae=ce+J.scrollWidth,ve=expand({top:oe,right:Ae,bottom:ue,left:ce},ne.border);return createBox({borderBox:ve,margin:ne.margin,border:ne.border,padding:ne.padding})};var getDimension=({ref:K,descriptor:J,env:ne,windowScroll:oe,direction:ce,isDropDisabled:ue,isCombineEnabled:Ae,shouldClipSubject:pe})=>{const ve=ne.closestScrollable,me=getClient(K,ve),ge=withScroll(me,oe),ye=(()=>{if(!ve)return null;const _e=getBox(ve),$e={scrollHeight:ve.scrollHeight,scrollWidth:ve.scrollWidth};return{client:_e,page:withScroll(_e,oe),scroll:getScroll(ve),scrollSize:$e,shouldClipSubject:pe}})();return getDroppableDimension({descriptor:J,isEnabled:!ue,isCombineEnabled:Ae,isFixedOnPage:ne.isFixedOnPage,direction:ce,client:me,page:ge,closest:ye})};const immediate={passive:!1},delayed={passive:!0};var getListenerOptions=K=>K.shouldPublishImmediately?immediate:delayed;const getClosestScrollableFromDrag=K=>K&&K.env.closestScrollable||null;function useDroppablePublisher(K){const J=reactExports.useRef(null),ne=useRequiredContext(AppContext),oe=useUniqueId$1("droppable"),{registry:ce,marshal:ue}=ne,Ae=usePrevious(K),pe=useMemo(()=>({id:K.droppableId,type:K.type,mode:K.mode}),[K.droppableId,K.mode,K.type]),ve=reactExports.useRef(pe),me=useMemo(()=>memoizeOne((ze,Xe)=>{J.current||invariant();const Je={x:ze,y:Xe};ue.updateDroppableScroll(pe.id,Je)}),[pe.id,ue]),ge=useCallback(()=>{const ze=J.current;return!ze||!ze.env.closestScrollable?origin:getScroll(ze.env.closestScrollable)},[]),ye=useCallback(()=>{const ze=ge();me(ze.x,ze.y)},[ge,me]),xe=useMemo(()=>rafSchd(ye),[ye]),_e=useCallback(()=>{const ze=J.current,Xe=getClosestScrollableFromDrag(ze);if(ze&&Xe||invariant(),ze.scrollOptions.shouldPublishImmediately){ye();return}xe()},[xe,ye]),$e=useCallback((ze,Xe)=>{J.current&&invariant();const Je=Ae.current,nt=Je.getDroppableRef();nt||invariant();const et=getEnv(nt),tt={ref:nt,descriptor:pe,env:et,scrollOptions:Xe};J.current=tt;const st=getDimension({ref:nt,descriptor:pe,env:et,windowScroll:ze,direction:Je.direction,isDropDisabled:Je.isDropDisabled,isCombineEnabled:Je.isCombineEnabled,shouldClipSubject:!Je.ignoreContainerClipping}),qe=et.closestScrollable;return qe&&(qe.setAttribute(scrollContainer.contextId,ne.contextId),qe.addEventListener("scroll",_e,getListenerOptions(tt.scrollOptions))),st},[ne.contextId,pe,_e,Ae]),Ie=useCallback(()=>{const ze=J.current,Xe=getClosestScrollableFromDrag(ze);return ze&&Xe||invariant(),getScroll(Xe)},[]),Fe=useCallback(()=>{const ze=J.current;ze||invariant();const Xe=getClosestScrollableFromDrag(ze);J.current=null,Xe&&(xe.cancel(),Xe.removeAttribute(scrollContainer.contextId),Xe.removeEventListener("scroll",_e,getListenerOptions(ze.scrollOptions)))},[_e,xe]),ke=useCallback(ze=>{const Xe=J.current;Xe||invariant();const Je=getClosestScrollableFromDrag(Xe);Je||invariant(),Je.scrollTop+=ze.y,Je.scrollLeft+=ze.x},[]),je=useMemo(()=>({getDimensionAndWatchScroll:$e,getScrollWhileDragging:Ie,dragStopped:Fe,scroll:ke}),[Fe,$e,Ie,ke]),We=useMemo(()=>({uniqueId:oe,descriptor:pe,callbacks:je}),[je,pe,oe]);useLayoutEffect(()=>(ve.current=We.descriptor,ce.droppable.register(We),()=>{J.current&&Fe(),ce.droppable.unregister(We)}),[je,pe,Fe,We,ue,ce.droppable]),useLayoutEffect(()=>{J.current&&ue.updateDroppableIsEnabled(ve.current.id,!K.isDropDisabled)},[K.isDropDisabled,ue]),useLayoutEffect(()=>{J.current&&ue.updateDroppableIsCombineEnabled(ve.current.id,K.isCombineEnabled)},[K.isCombineEnabled,ue])}function noop$3(){}const empty$4={width:0,height:0,margin:noSpacing},getSize=({isAnimatingOpenOnMount:K,placeholder:J,animate:ne})=>K||ne==="close"?empty$4:{height:J.client.borderBox.height,width:J.client.borderBox.width,margin:J.client.margin},getStyle=({isAnimatingOpenOnMount:K,placeholder:J,animate:ne})=>{const oe=getSize({isAnimatingOpenOnMount:K,placeholder:J,animate:ne});return{display:J.display,boxSizing:"border-box",width:oe.width,height:oe.height,marginTop:oe.margin.top,marginRight:oe.margin.right,marginBottom:oe.margin.bottom,marginLeft:oe.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:ne!=="none"?transitions.placeholder:null}},Placeholder=K=>{const J=reactExports.useRef(null),ne=useCallback(()=>{J.current&&(clearTimeout(J.current),J.current=null)},[]),{animate:oe,onTransitionEnd:ce,onClose:ue,contextId:Ae}=K,[pe,ve]=reactExports.useState(K.animate==="open");reactExports.useEffect(()=>pe?oe!=="open"?(ne(),ve(!1),noop$3):J.current?noop$3:(J.current=setTimeout(()=>{J.current=null,ve(!1)}),ne):noop$3,[oe,pe,ne]);const me=useCallback(ye=>{ye.propertyName==="height"&&(ce(),oe==="close"&&ue())},[oe,ue,ce]),ge=getStyle({isAnimatingOpenOnMount:pe,animate:K.animate,placeholder:K.placeholder});return React.createElement(K.placeholder.tagName,{style:ge,"data-rfd-placeholder-context-id":Ae,onTransitionEnd:me,ref:K.innerRef})};var Placeholder$1=React.memo(Placeholder);class AnimateInOut extends React.PureComponent{constructor(...J){super(...J),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(J,ne){return J.shouldAnimate?J.on?{isVisible:!0,data:J.on,animate:"open"}:ne.isVisible?{isVisible:!0,data:ne.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!J.on,data:J.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const J={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(J)}}const Droppable=K=>{const J=reactExports.useContext(AppContext);J||invariant();const{contextId:ne,isMovementAllowed:oe}=J,ce=reactExports.useRef(null),ue=reactExports.useRef(null),{children:Ae,droppableId:pe,type:ve,mode:me,direction:ge,ignoreContainerClipping:ye,isDropDisabled:xe,isCombineEnabled:_e,snapshot:$e,useClone:Ie,updateViewportMaxScroll:Fe,getContainerForClone:ke}=K,je=useCallback(()=>ce.current,[]),We=useCallback((qe=null)=>{ce.current=qe},[]);useCallback(()=>ue.current,[]);const ze=useCallback((qe=null)=>{ue.current=qe},[]),Xe=useCallback(()=>{oe()&&Fe({maxScroll:getMaxWindowScroll()})},[oe,Fe]);useDroppablePublisher({droppableId:pe,type:ve,mode:me,direction:ge,isDropDisabled:xe,isCombineEnabled:_e,ignoreContainerClipping:ye,getDroppableRef:je});const Je=useMemo(()=>React.createElement(AnimateInOut,{on:K.placeholder,shouldAnimate:K.shouldAnimatePlaceholder},({onClose:qe,data:Se,animate:Re})=>React.createElement(Placeholder$1,{placeholder:Se,onClose:qe,innerRef:ze,animate:Re,contextId:ne,onTransitionEnd:Xe})),[ne,Xe,K.placeholder,K.shouldAnimatePlaceholder,ze]),nt=useMemo(()=>({innerRef:We,placeholder:Je,droppableProps:{"data-rfd-droppable-id":pe,"data-rfd-droppable-context-id":ne}}),[ne,pe,Je,We]),et=Ie?Ie.dragging.draggableId:null,tt=useMemo(()=>({droppableId:pe,type:ve,isUsingCloneFor:et}),[pe,et,ve]);function st(){if(!Ie)return null;const{dragging:qe,render:Se}=Ie,Re=React.createElement(PrivateDraggable,{draggableId:qe.draggableId,index:qe.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Be,Ne)=>Se(Be,Ne,qe));return ReactDOM.createPortal(Re,ke())}return React.createElement(DroppableContext.Provider,{value:tt},Ae(nt,$e),st())};var Droppable$1=Droppable;function getBody(){return document.body||invariant(),document.body}const defaultProps$1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:getBody},attachDefaultPropsToOwnProps=K=>{let J={...K},ne;for(ne in defaultProps$1)K[ne]===void 0&&(J={...J,[ne]:defaultProps$1[ne]});return J},isMatchingType=(K,J)=>K===J.droppable.type,getDraggable=(K,J)=>J.draggables[K.draggable.id],makeMapStateToProps=()=>{const K={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},J={...K,shouldAnimatePlaceholder:!1},ne=memoizeOne(ue=>({draggableId:ue.id,type:ue.type,source:{index:ue.index,droppableId:ue.droppableId}})),oe=memoizeOne((ue,Ae,pe,ve,me,ge)=>{const ye=me.descriptor.id;if(me.descriptor.droppableId===ue){const $e=ge?{render:ge,dragging:ne(me.descriptor)}:null,Ie={isDraggingOver:pe,draggingOverWith:pe?ye:null,draggingFromThisWith:ye,isUsingPlaceholder:!0};return{placeholder:me.placeholder,shouldAnimatePlaceholder:!1,snapshot:Ie,useClone:$e}}if(!Ae)return J;if(!ve)return K;const _e={isDraggingOver:pe,draggingOverWith:ye,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:me.placeholder,shouldAnimatePlaceholder:!0,snapshot:_e,useClone:null}});return(ue,Ae)=>{const pe=attachDefaultPropsToOwnProps(Ae),ve=pe.droppableId,me=pe.type,ge=!pe.isDropDisabled,ye=pe.renderClone;if(isDragging(ue)){const xe=ue.critical;if(!isMatchingType(me,xe))return J;const _e=getDraggable(xe,ue.dimensions),$e=whatIsDraggedOver(ue.impact)===ve;return oe(ve,ge,$e,$e,_e,ye)}if(ue.phase==="DROP_ANIMATING"){const xe=ue.completed;if(!isMatchingType(me,xe.critical))return J;const _e=getDraggable(xe.critical,ue.dimensions);return oe(ve,ge,whatIsDraggedOverFromResult(xe.result)===ve,whatIsDraggedOver(xe.impact)===ve,_e,ye)}if(ue.phase==="IDLE"&&ue.completed&&!ue.shouldFlush){const xe=ue.completed;if(!isMatchingType(me,xe.critical))return J;const _e=whatIsDraggedOver(xe.impact)===ve,$e=!!(xe.impact.at&&xe.impact.at.type==="COMBINE"),Ie=xe.critical.droppable.id===ve;return _e?$e?K:J:Ie?K:J}return J}},mapDispatchToProps={updateViewportMaxScroll},ConnectedDroppable=connect(makeMapStateToProps,mapDispatchToProps,(K,J,ne)=>({...attachDefaultPropsToOwnProps(ne),...K,...J}),{context:StoreContext$1,areStatePropsEqual:isStrictEqual})(Droppable$1);var ConnectedDroppable$1=ConnectedDroppable;const GridContext=reactExports.createContext({}),ScrollCorner=()=>jsxRuntimeExports.jsxs("div",{className:"scrollCorner",children:[jsxRuntimeExports.jsx("div",{className:"scrollCorner__separator"}),jsxRuntimeExports.jsx("div",{})]}),container$D="_container_z0b29_1",columnResizer="_columnResizer_z0b29_8",columnResizerLast="_columnResizerLast_z0b29_21",item="_item_z0b29_34",isResizing="_isResizing_z0b29_39",styles$1o={container:container$D,columnResizer,columnResizerLast,item,isResizing},ColumnResizer=({isResizing:K,lastEl:J=!1,...ne})=>jsxRuntimeExports.jsx("div",{className:cx(styles$1o.container,J?styles$1o.columnResizerLast:styles$1o.columnResizer),...ne,children:jsxRuntimeExports.jsx("div",{className:cx(styles$1o.item,{[styles$1o.isResizing]:K})})}),HeaderWrapperCell=({className:K,isDragOccurring:J,column:ne,snapshot:oe,provided:ce,children:ue,lastEl:Ae=!1})=>{var _e;const pe=reactExports.useRef(null),{key:ve,...me}=ne.getHeaderProps(),ge=reactExports.useCallback(()=>pe.current?pe.current.getBoundingClientRect().width:0,[]),ye=reactExports.useMemo(()=>{if(J){const{isDragging:$e}=oe;return{...ce.draggableProps.style,...!$e&&{width:ge()}}}return{...ne.applyMaxWidth&&{maxWidth:ne.maxWidth}}},[J,ne.applyMaxWidth,ne.maxWidth,oe,ce.draggableProps.style,ge]),xe=reactExports.useCallback($e=>{ce.innerRef($e),pe.current=$e},[ce]);return jsxRuntimeExports.jsxs("div",{...me,children:[jsxRuntimeExports.jsx("div",{className:K,ref:xe,...ce.draggableProps,...ce.dragHandleProps,style:ye,children:ue}),!J&&jsxRuntimeExports.jsx(ColumnResizer,{...(_e=ne.getResizerProps)==null?void 0:_e.call(ne),isResizing:ne.isResizing,lastEl:Ae})]},ve)};var SortOrderEnum=(K=>(K.ASC="asc",K.DESC="desc",K.NONE="none",K))(SortOrderEnum||{});const sortDropdownItems=[{label:"Sort Asc",value:SortOrderEnum.ASC,icon:jsxRuntimeExports.jsx(nB,{})},{label:"Sort Desc",value:SortOrderEnum.DESC,icon:jsxRuntimeExports.jsx(rB,{})},{label:"No Sort",value:SortOrderEnum.NONE,icon:jsxRuntimeExports.jsx(oB,{})}],dropdownItem$1="_dropdownItem_1haqw_1",dropdownItem__active="_dropdownItem__active_1haqw_15",styles$1n={dropdownItem:dropdownItem$1,dropdownItem__active},SortDropdown=({gridRef:K,handleChangeSorting:J,sorting:ne})=>{const[oe,{set:ce}]=useBoolean(!1),ue=(ve,me)=>{ve.stopPropagation(),J(me),ce(!1)},Ae=ve=>{switch(ve){case!1:return SortOrderEnum.ASC;case!0:return SortOrderEnum.DESC;default:return SortOrderEnum.NONE}},pe=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:sortDropdownItems.map(({value:ve,label:me,icon:ge})=>jsxRuntimeExports.jsxs("div",{"aria-hidden":!0,onClick:ye=>ue(ye,ve),className:cx(styles$1n.dropdownItem,{[styles$1n.dropdownItem__active]:Ae(ne)===ve}),children:[ge,jsxRuntimeExports.jsx("span",{children:me})]},ve))});return jsxRuntimeExports.jsx(Y_,{open:oe,onOpenChange:ce,dropdownRender:pe,onClick:ve=>ve.stopPropagation(),children:jsxRuntimeExports.jsx(oa,{testid:"table-header-sort-dropdown-icon",children:jsxRuntimeExports.jsx(rA,{})})})},sorting="_sorting_18tig_1",sortingTitleBlock="_sortingTitleBlock_18tig_11",headerCell="_headerCell_18tig_32",titleBlock="_titleBlock_18tig_45",container$C="_container_18tig_55",header$3="_header_18tig_32",requiredIcon="_requiredIcon_18tig_67",title$4="_title_18tig_45",titleContent="_titleContent_18tig_75",styles$1m={sorting,sortingTitleBlock,headerCell,titleBlock,container:container$C,header:header$3,requiredIcon,title:title$4,titleContent},HeaderCell=({gridRef:K,column:J,sortByProps:ne,gridMode:oe,onSortByChanged:ce})=>{const ue=reactExports.useCallback(pe=>{if(J.canSort)if(pe===SortOrderEnum.NONE)J.clearSortBy(),ce([]);else{const ve=pe===SortOrderEnum.DESC;J.toggleSortBy(ve),ce([{id:J.id,desc:ve}])}},[J]),Ae=()=>J.customHeader?jsxRuntimeExports.jsx("div",{className:styles$1m.titleBlock,children:J.render("Header")}):J.canSort?jsxRuntimeExports.jsxs("div",{className:cx(styles$1m.sortingTitleBlock),"aria-hidden":!0,style:ne.style,onClick:ne.onClick,children:[jsxRuntimeExports.jsxs("div",{className:styles$1m.container,children:[jsxRuntimeExports.jsx("div",{className:styles$1m.header,children:J.render("Header")}),jsxRuntimeExports.jsx("span",{className:styles$1m.requiredIcon,children:oe===GridModeEnum.EDITOR&&J.isRequired&&jsxRuntimeExports.jsx(LF$2,{})})]}),jsxRuntimeExports.jsx("div",{className:styles$1m.sorting,children:jsxRuntimeExports.jsx(SortDropdown,{gridRef:K,handleChangeSorting:ue,sorting:J.isSortedDesc})})]}):jsxRuntimeExports.jsx("div",{className:cx(styles$1m.headerCell,styles$1m.titleBlock),children:jsxRuntimeExports.jsxs("div",{className:styles$1m.titleContent,children:[oe===GridModeEnum.EDITOR&&J.isRequired&&jsxRuntimeExports.jsx(LF$2,{}),jsxRuntimeExports.jsx("div",{className:styles$1m.title,children:J.render("Header")})]})});return jsxRuntimeExports.jsx(mf,{title:J.id===columnIdEnum.filter||J.id===columnIdEnum.handlerStatus?"":J.render("Header"),children:Ae()})},row$4="_row_ns2py_1",container$B="_container_ns2py_8",headerGroup="_headerGroup_ns2py_12",cell$1="_cell_ns2py_16",filterContainer="_filterContainer_ns2py_23",headerWrapper="_headerWrapper_ns2py_28",filter$2="_filter_ns2py_23",scrollCorner="_scrollCorner_ns2py_37",styles$1l={row:row$4,container:container$B,headerGroup,cell:cell$1,filterContainer,headerWrapper,filter:filter$2,scrollCorner},TableHeader=({isTableBodyVerticallyScrollable:K,gridRef:J,isShowCorner:ne,headerGroups:oe,gridMode:ce,onSortByChanged:ue})=>{const{headerRef:Ae,changeOrderColumns:pe}=reactExports.useContext(GridContext),[ve,me]=reactExports.useState(!1),ge=()=>{me(!0)},ye=_e=>{me(!1);const{source:$e,destination:Ie}=_e;if(!Ie)return;const Fe=Ie.index===0,ke=Ie.index+1;pe($e.index,Fe?ke:Ie.index)},xe=(_e,$e,Ie)=>{const Fe=_e.getSortByToggleProps();return jsxRuntimeExports.jsx("div",{className:styles$1l.headerWrapper,children:jsxRuntimeExports.jsx(PublicDraggable,{isDragDisabled:_e.suppressDrag,draggableId:_e.id,index:$e,children:(ke,je)=>jsxRuntimeExports.jsx(HeaderWrapperCell,{isDragOccurring:ve,snapshot:je,provided:ke,column:_e,className:styles$1l.cell,lastEl:Ie.length-1===$e,children:jsxRuntimeExports.jsx(HeaderCell,{gridRef:J,column:_e,sortByProps:Fe,gridMode:ce,onSortByChanged:ue})})},_e.id)},_e.id)};return jsxRuntimeExports.jsxs("div",{ref:Ae,className:styles$1l.row,children:[oe.map((_e,$e)=>{const{key:Ie,...Fe}=_e.getHeaderGroupProps();return jsxRuntimeExports.jsx(DragDropContext,{onBeforeCapture:ge,onDragEnd:ye,children:jsxRuntimeExports.jsx(ConnectedDroppable$1,{droppableId:"droppable",direction:"horizontal",renderClone:(ke,je,We)=>{const ze=oe[$e].headers[We.source.index],Xe=ze.getSortByToggleProps();return jsxRuntimeExports.jsx(HeaderWrapperCell,{isDragOccurring:ve,snapshot:je,provided:ke,column:ze,className:styles$1l.cell,children:jsxRuntimeExports.jsx(HeaderCell,{gridRef:J,column:ze,sortByProps:Xe,gridMode:ce,onSortByChanged:ue})})},children:ke=>jsxRuntimeExports.jsxs("div",{...Fe,ref:ke.innerRef,className:styles$1l.container,children:[jsxRuntimeExports.jsxs("div",{className:styles$1l.headerGroup,children:[_e.headers.map(xe),ke.placeholder,K&&jsxRuntimeExports.jsx("div",{className:styles$1l.scrollCorner})]}),jsxRuntimeExports.jsx("div",{className:styles$1l.filter,children:_e.headers.map(je=>jsxRuntimeExports.jsx("div",{className:styles$1l.headerWrapper,style:{width:je==null?void 0:je.totalWidth},children:je.canFilter?jsxRuntimeExports.jsx("div",{className:cx({[styles$1l.filterContainer]:ce!==GridModeEnum.EDITOR}),style:{width:je==null?void 0:je.totalWidth},children:je.render("Filter")}):null},je==null?void 0:je.id))})]})})},Ie)}),ne&&jsxRuntimeExports.jsx(ScrollCorner,{})]})},ContextMenu=reactExports.createContext({handleOpenContextMenu:()=>{}}),HIDE_EVENT_NAMES=["resize","contextmenu","scroll","blur"],contextMenu="_contextMenu_1d3qn_1",contextMenuItem="_contextMenuItem_1d3qn_13",styles$1k={contextMenu,contextMenuItem},ContextMenuProvider=({children:K})=>{const J=reactExports.useId(),ne=reactExports.useRef(null),[oe,ce]=reactExports.useState(),ue=reactExports.useCallback(ye=>{if(!ye)return;const{items:xe,e:_e}=ye,{clientX:$e,clientY:Ie}=_e,We=Math.max(document.documentElement.clientWidth,window.innerWidth)-170-15;ce({isOpen:!0,position:[Math.min($e,We),Ie],items:xe})},[]),Ae=reactExports.useCallback(ye=>{if(!ye)return;const{e:xe,items:_e}=ye;xe.stopPropagation(),eventManager.emit("[Context menu] hide all").emit(J,{items:_e,e:xe})},[]),pe=reactExports.useCallback(()=>{ce({isOpen:!1,position:[],items:[]})},[]),ve=reactExports.useCallback(ye=>{ye(),pe()},[pe]),me=reactExports.useCallback(ye=>{var _e;((_e=ne.current)==null?void 0:_e.contains(ye.target))||pe()},[pe]);reactExports.useEffect(()=>(eventManager.subscribe(J,ue).subscribe("[Context menu] hide all",pe),()=>{eventManager.unsubscribe(J,ue).unsubscribe("[Context menu] hide all",pe)}),[J]),reactExports.useEffect(()=>{if(oe!=null&&oe.isOpen){for(const ye of HIDE_EVENT_NAMES)globalThis.addEventListener(ye,pe);globalThis.addEventListener("click",me,!0)}return()=>{for(const ye of HIDE_EVENT_NAMES)globalThis.removeEventListener(ye,pe);globalThis.removeEventListener("click",me,!0)}},[pe,oe==null?void 0:oe.isOpen]);const ge=reactExports.useMemo(()=>({handleOpenContextMenu:Ae}),[Ae]);return jsxRuntimeExports.jsxs(ContextMenu.Provider,{value:ge,children:[(oe==null?void 0:oe.isOpen)&&reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{ref:ne,className:styles$1k.contextMenu,style:{left:oe.position[0],top:oe.position[1]},children:oe.items.map(({title:ye,icon:xe,onClick:_e})=>jsxRuntimeExports.jsxs("div",{"aria-hidden":!0,onMouseDown:$e=>handleMouseDown($e,{[ButtonCode.MAIN]:()=>ve(_e)}),className:styles$1k.contextMenuItem,children:[xe,jsxRuntimeExports.jsx("div",{children:ye})]},ye))}),document.body),K]})},useContextMenu=()=>reactExports.useContext(ContextMenu),lineBreakSymbol="_lineBreakSymbol_1b0ap_1",bodyCell="_bodyCell_1b0ap_6",editorCell="_editorCell_1b0ap_18",cellSelected="_cellSelected_1b0ap_22",activelySelected="_activelySelected_1b0ap_26",wordWrapCell="_wordWrapCell_1b0ap_33",rowBorder="_rowBorder_1b0ap_39",dangerCell="_dangerCell_1b0ap_43",numberCell="_numberCell_1b0ap_47",editorBodyCell="_editorBodyCell_1b0ap_51",styles$1j={lineBreakSymbol,bodyCell,editorCell,cellSelected,activelySelected,wordWrapCell,rowBorder,dangerCell,numberCell,editorBodyCell},TableBodyCell$1=reactExports.memo(({cell:K,selectedRangeCells:J,gridMode:ne,isCellActivelySelected:oe,cellRowsCount:ce,isLineBreakSymbol:ue=!1,passedRowClass:Ae})=>{const pe=reactExports.useMemo(()=>K.getCellProps(),[K]),ve=reactExports.useRef(null),me=reactExports.useMemo(()=>({...pe.style,...K.column.applyMaxWidth&&{maxWidth:K.column.maxWidth},...ne===GridModeEnum.EDITOR&&{backgroundColor:"var(--bs-gray-500)"}}),[K.column.applyMaxWidth,K.column.maxWidth,pe.style,ne]),ge=reactExports.useMemo(()=>J[K.id],[K.id,J]),ye=isString$3(K.value)&&isStringifiedTimeStamp(K.value),xe=reactExports.useMemo(()=>{if(ye)return jsxRuntimeExports.jsx("span",{children:K.value.replace(/-7[a-z0-9]+$/,"")});if(ue&&isString$3(K.value)){const ke=K.value.split(`
`).map((je,We,ze)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[je,We<ze.length-1&&jsxRuntimeExports.jsx("span",{className:styles$1j.lineBreakSymbol,children:""})]},We));return jsxRuntimeExports.jsx("span",{children:ke})}return K.render("Cell")},[K.value]),{key:_e,...$e}=pe,Ie=ce&&ce===1&&ne===GridModeEnum.MAIN?!1:isDefined$2(ce),Fe=ye?K.value:xe;return jsxRuntimeExports.jsx(mf,{title:K.column.id===columnIdEnum.filter||K.column.id===columnIdEnum.handlerStatus||isNullable(K.value)||isEmptyString(K.value)||isObject$9(K.value)?"":Fe,status:"info",children:reactExports.createElement("div",{...$e,...K.getCellRangeSelectionProps(),key:_e,ref:ve,style:{...me,WebkitLineClamp:ce||CellRowsCount.ONE},className:cx(Ae,styles$1j.bodyCell,{[styles$1j.editorCell]:ne===GridModeEnum.EDITOR,[styles$1j.cellSelected]:ge&&ne!==GridModeEnum.EDITOR,[styles$1j.activelySelected]:oe,[styles$1j.dangerCell]:K.column.columnType!=="String"&&isNegativeNumber(K.value),[styles$1j.numberCell]:isNumberType(K.column.columnType),[styles$1j.editorBodyCell]:ne===GridModeEnum.EDITOR&&K.column.id!==ColumnNameType.FILTER,[styles$1j.wordWrapCell]:Ie,[styles$1j.rowBorder]:externalStorage.getIsRowBorder()})},xe)})});TableBodyCell$1.displayName="TableBodyCell";const tableRow$1="_tableRow_1ip4v_1",active$1="_active_1ip4v_18",activeRow$1="_activeRow_1ip4v_22",selectedRow="_selectedRow_1ip4v_26",styles$1i={tableRow:tableRow$1,active:active$1,activeRow:activeRow$1,selectedRow},TableRow=reactExports.memo(({style:K,rowIndex:J,row:ne,markedIndex:oe,selectedRangeCells:ce,gridMode:ue,onClick:Ae,onDoubleClick:pe,selectedRowId:ve,selectedRowsRange:me,measureElement:ge,virtualRowIndex:ye,cellRowsCount:xe,isLineBreakSymbol:_e,rowHeight:$e})=>{const Ie=reactExports.useCallback(ze=>ze===ve,[ve]),Fe=reactExports.useMemo(()=>Ie(ne.id)?styles$1i.activeRow:ue!==GridModeEnum.EDITOR&&J===oe&&Object.keys(me).length===0?styles$1i.selectedRow:"",[ue,oe,ne.id,J,ve,Ie]),{key:ke,...je}=ne.getRowProps({style:K}),We=isDefined$2(xe)?Number(xe):xe;return reactExports.createElement("div",{...je,key:ke,ref:ge,"data-index":ye,className:cx(styles$1i.tableRow,{[styles$1i.active]:Ie(ne.id)}),style:{minHeight:`${$e}px`},"data-row-id":ne.id,"data-row-index":J,onClick:Ae,onDoubleClick:pe,"aria-hidden":!0},ne.cells.map(ze=>{const Xe=ze.getCellProps();return jsxRuntimeExports.jsx(TableBodyCell$1,{cell:ze,selectedRangeCells:ce,gridMode:ue,isCellActivelySelected:Ie(ne.id)&&ue!==GridModeEnum.EDITOR&&ce[ze.id],cellRowsCount:We,isLineBreakSymbol:_e,passedRowClass:Fe},Xe.key)}))});TableRow.displayName="TableRow";const body="_body_14cep_1",container$A="_container_14cep_9",content$d="_content_14cep_14",styles$1h={body,container:container$A,content:content$d},TableBody=({isHiddenVerticalScroll:K,setHiddenVerticalScroll:J,isDefaultMarkedIndex:ne,markedIndex:oe,columns:ce,getTableBodyProps:ue,prepareRow:Ae,rows:pe,preFilteredRows:ve,selectedCellIds:me,selectedRangeCells:ge,selectedRowsRange:ye,selectedRowsIds:xe,onSelectedRowsRangeChanged:_e,gridMode:$e,rowHeight:Ie=$e===GridModeEnum.EDITOR?25:28,handleCopySelectedRangeCells:Fe,onRowDoubleClicked:ke,selectedRowId:je,onSelectRowId:We,navigationKeyDownHandler:ze,rewriteActiveRowStartCell:Xe,selectNewCellsArr:Je,selectProvidedRowsCells:nt,selectedRowsPerPage:et,setSelectedRowsPerPage:tt,updateSelectedRowsPerPageState:st,isSelectAllRecordsBtnClicked:qe,setIsSelectAllRecordsBtnClicked:Se,setSelectedCellIds:Re,changeSelectedCell:Be,cellRowsCount:Ne,isLineBreakSymbol:Ue,isRowFocus:Ge,onChangeIsRowFocus:Ye,calculateElementHiehgt:Qe,handleTableBodyScroll:Te,defaultScroll:Ke,setCurrentSelectedCellIds:rt,setMarkedIndex:it})=>{var yr;const at=reactExports.useRef(null),{bodyRef:lt}=reactExports.useContext(GridContext),{t:ct}=useTranslation(),{handleOpenContextMenu:ot}=useContextMenu(),ft=reactExports.useRef(0),dt=Object.keys(xe),[mt,kt]=reactExports.useState(0),{debounce:wt}=useDebounce(100),[Et,Ot]=reactExports.useState(0),[Rt,gt]=reactExports.useState([]),[$t,pt]=reactExports.useState(-1),vt=reactExports.useMemo(()=>ce.filter(Lt=>!Lt.suppressHideColumn).length>0,[ce]);reactExports.useLayoutEffect(()=>{if(!ne&&$e===GridModeEnum.MAIN&&at.current){if(at.current.focus(),et){const Lt={};Object.keys(et).forEach(jt=>{const fr=pe.find(Gt=>Gt.id===jt);if(fr){const Gt=fr.allCells.map(Jt=>Jt.id).filter(Jt=>Jt.includes("filter")?!1:(Lt[Jt]=!0,!0));xe[fr.id]={_key:fr.original._key,_t:fr.original._t,allCells:Gt}}}),Re(Lt)}dt.length&&et&&!Object.keys(et).length&&dt.forEach(Lt=>{delete xe[Lt]})}},[]);const Mt=useVirtualizer({count:pe.length,getScrollElement:()=>lt.current,estimateSize:reactExports.useCallback(()=>Ie,[Ie]),measureElement:isDefined$2(Ne)?Lt=>Math.round((Qe==null?void 0:Qe(Ie,Lt))||Lt.scrollHeight||Ie):reactExports.useCallback(()=>Ie,[Ie]),paddingEnd:1}),St=reactExports.useMemo(()=>pe.reduce((Lt,jt,fr)=>(Lt[jt.id]=fr,Lt),{}),[pe]);reactExports.useEffect(()=>{if(je&&(Ge||isDefined$2(externalStorage.getSelectedRow()))){const Lt=St[je];Mt.scrollToIndex(Lt),Ye==null||Ye(!1)}},[Ge,je,externalStorage.getSelectedRow()]);const _t=Mt.getTotalSize(),Xt=Lt=>{let jt=structuredClone(ye);const fr=structuredClone(et||{}),Gt={...me};Lt.forEach(Jt=>{const ar=ve[Jt];jt[ar.id]?(delete jt[ar.id],delete fr[ar.id],xe[ar.id]&&dt.forEach(Wt=>{const nr=xe[Wt].allCells;for(let Er=0;Er<nr.length;Er++)delete Gt[nr[Er]];delete xe[Wt],delete jt[Wt],delete fr[Wt]})):(jt[ar.id]={_key:ar.original._key,_t:ar.original._t},fr[ar.id]={_key:ar.original._key,_t:ar.original._t},xe[ar.id]&&(jt={...jt,...xe},Object.assign(fr,xe)))}),qe&&(jt=structuredClone(fr),Se==null||Se(!1)),Re(Gt),rt(Gt),_e(jt),st(fr),tt==null||tt(fr)},Tt=(Lt,jt)=>{const[fr,Gt]=[Lt,jt].sort((Jt,ar)=>Jt-ar);return Array.from({length:Gt-fr+1},(Jt,ar)=>ar+fr)},Dt=Lt=>{const jt={};Lt.forEach(fr=>{jt[pe[fr].id]={_key:pe[fr].original._key,_t:pe[fr].original._t}}),_e(jt)},Ht=Lt=>{gt([Lt.index]),je!==Lt.id&&We(Lt.id)};reactExports.useEffect(()=>{const Lt=pe.findIndex(jt=>jt.id===je);if(Lt>=0&&$t<0)pt(Lt);else if(Lt<0&&$t>=0)if(pe.length===$t)Ht(pe[$t-1]),pt($t-1),it($t-1);else{const jt=pe[$t];Ht(jt),it($t)}},[pe]);const Bt=(Lt,jt,fr)=>{const Gt=jt.allCells.findIndex(Wt=>Wt.column.id===ColumnNameType.FILTER),Jt=Lt.target instanceof HTMLInputElement&&Lt.target.type==="checkbox",ar=jt.allCells[Gt!==-1?Gt+1:0].id;if(Lt.shiftKey){const Wt=Tt(Et,fr);Dt(Wt),nt(Wt.map(nr=>pe[nr])),gt(Wt);return}if(Jt||Lt.ctrlKey){Xt([jt.index]),Ot(fr),Xe(ar);return}Ot(fr),pt(fr),Ht(jt),Xe(ar),ft.current===0&&(ft.current=1)},It=Lt=>{Be(Lt);const jt=[];Object.keys(Lt).forEach(fr=>{const Gt=Number.parseInt(fr.split("_")[1],10);!isNaN$1(Gt)&&!jt.includes(Gt)&&jt.push(Gt)}),Ot(jt[0]),gt(jt)},zt=Lt=>{var jt;if(Lt.code==="Space"&&Rt.length&&Xt(Rt),Lt.ctrlKey&&Lt.code===KeyboardCode.KeyA){Lt.preventDefault();const fr=pe.sort((Jt,ar)=>Jt.index-ar.index),Gt=((jt=fr[fr.length-1])==null?void 0:jt.allCells)||[];Je(fr[0].allCells[1].id,Gt[Gt.length-1].id)}Lt.ctrlKey&&Lt.code===KeyboardCode.KeyC&&Fe(),ze(Lt,{selectedCells:ge,updateFn:It})},Pt=reactExports.useMemo(()=>[{title:ct("shared.copy"),icon:jsxRuntimeExports.jsx(jk,{}),onClick:Fe}],[Fe,ct]),Vt=reactExports.useCallback(Lt=>{Lt.preventDefault(),ot({items:Pt,e:Lt})},[Pt,ot]),vr=Lt=>{const jt=Lt.deltaY;Mt.scrollToOffset(Number(Mt.scrollOffset)+jt)},qt=()=>{if(lt.current&&lt.current.scrollTop!==mt){kt(lt.current.scrollTop);const Lt=lt.current.scrollTop/lt.current.scrollHeight*100;Te(Lt)}},er=()=>{lt.current&&(lt.current.scrollTop=lt.current.scrollHeight*((Ke??0)/100))};return reactExports.useEffect(()=>{lt.current&&wt({fn:er})},[lt.current]),jsxRuntimeExports.jsxs("div",{tabIndex:-1,onContextMenu:Vt,onKeyDown:zt,className:styles$1h.body,...ue(),ref:at,"aria-hidden":!0,children:[jsxRuntimeExports.jsx("div",{ref:lt,className:styles$1h.container,onWheel:vr,onScroll:qt,children:jsxRuntimeExports.jsx("div",{className:styles$1h.content,style:{height:Math.round(_t+4)},children:jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Math.round(((yr=Mt.getVirtualItems()[0])==null?void 0:yr.start)??0)-Mt.options.scrollMargin}px)`},children:vt&&Mt.getVirtualItems().map(Lt=>{const jt=pe[Lt.index];return Ae(jt),jsxRuntimeExports.jsx(TableRow,{virtualRowIndex:Lt.index,measureElement:fr=>Mt.measureElement(fr),selectedRowId:je,markedIndex:oe,rowIndex:Lt.index,row:jt,selectedRangeCells:ge,gridMode:$e,onClick:fr=>Bt(fr,jt,Lt.index),onDoubleClick:()=>ke(jt),selectedRowsRange:ye,cellRowsCount:Ne,isLineBreakSymbol:Ue,rowHeight:Ie},Lt.key)})})})}),jsxRuntimeExports.jsx(VerticalScroll,{isHidden:K,setHidden:J,scrollOffset:Number(Mt.scrollOffset),totalHeight:_t,scrollToOffset:Mt.scrollToOffset})]})};class ValueFormatterService{static simpleValueFormatter(J,ne,oe,ce){if(!(isSimpleViewType(J)||BigNumber.isBigNumber(J)))return"";switch(!0){case ne===ValueTypesEnum$1.String:return typeof J>"u"?J:toString$4(J);case isNumberType(ne):return formatNumberValue(J,oe,ne,ce);case ne===ValueTypesEnum$1.Bool:return isBool(J)?J:void 0;case ne===ValueTypesEnum$1.Date:return J?DateFormatUtility.create(String(J)).format(DateFormatEnum.DATE):void 0;case ne===ValueTypesEnum$1.DateTime:return J?DateFormatUtility.create(String(J)).format(DateFormatEnum.DATE_TIME):void 0;case ne===ValueTypesEnum$1.Time:return J?DateFormatUtility.create(String(J),DateFormatEnum.TIME_MS).format(DateFormatEnum.TIME):void 0;default:return typeof J>"u"?J:toString$4(J)}}static flatValueFormat(J){const ne=Object.keys(J).map(oe=>{const ce=J[oe];return isArray$7(ce)?this.arrayValueToString(ce):isObject$9(ce)?this.objectValueToString(ce):ce});return this.getShortValue(ne)}static arrayValueToString(J){const ne=J.map(ue=>isObject$9(ue)?Object.values(ue)[0]:ue),oe=J.slice(1).length;if(isObject$9(ne[0]))return this.objectValueToString(ne[0]);const ce=ne[0]?`${ne[0]}...`:"";return oe>0?`${ne[0]}... + ${oe} more`:`${ce}`}static objectValueToString(J){const ne=Object.values(J)[0],oe=ne?`${ne}...`:"";return isObject$9(ne)?this.flatValueFormat(ne):`${oe}`}static getShortValue(J,ne=4){return J.filter(oe=>oe).map((oe,ce)=>isObject$9(oe)||ce<ne?oe:"...").join("; ")}}const getColumnProps$1=(K,J)=>{var ge,ye,xe,_e,$e;const{Name:ne,Label:oe,Value:ce,Format:ue,Optional:Ae,ReadOnly:pe}=K,ve=(ge=J==null?void 0:J.gridColumns)==null?void 0:ge.find(Ie=>Ie.Header===ne),me=()=>{const Ie={current:""};function Fe(ke){const je=typeof ke=="function"?ke(Ie.current):ke;Ie.current=je}return[Ie,Fe]};return{width:((ye=J==null?void 0:J.columnState)==null?void 0:ye.SizeInPercent)||(ve==null?void 0:ve.width)||GridColumWidth.MIN_WIDTH,maxWidth:((xe=J==null?void 0:J.columnState)==null?void 0:xe.MaxSizeInPixels)||Number.MAX_SAFE_INTEGER,minWidth:((_e=J==null?void 0:J.columnState)==null?void 0:_e.MinSizeInPixels)||GridColumWidth.MIN_WIDTH,disableResizing:(($e=J==null?void 0:J.columnState)==null?void 0:$e.SizeFixed)||!1,id:J==null?void 0:J.columnId,Header:oe||ne,accessor:Ie=>Ie[ne],columnType:ce==null?void 0:ce.Type,isRequired:!Ae,isReadOnly:pe,sortType:getSortTypeByValueType(ce==null?void 0:ce.Type),...(J==null?void 0:J.isColumnFormatter)&&{valueFormatter:(Ie,Fe)=>ValueFormatterService.simpleValueFormatter(Ie,ce==null?void 0:ce.Type,ue,Fe)},Filter:Ie=>FilterInput({...Ie,updateTypeState:J==null?void 0:J.updateTypeState}),filter:(Ie,Fe,ke)=>ke===""?Ie:Ie.filter(je=>Fe.some(We=>{const ze=ValueFormatterService.simpleValueFormatter(je.values[We],ce==null?void 0:ce.Type,ue);return String(ze).toLowerCase().includes(String(ke).toLowerCase())})),filteredValueMask:me()}},getFormattedValue=K=>{const J=isObject$9(K.Value)?Object.values(K.Value)[0]:void 0,ne=isObject$9(K.Value)?Object.keys(K.Value)[0]:void 0;return ValueFormatterService.simpleValueFormatter(J,ne)},getHandlerParams=K=>{var J;if(isObject$9(K)&&isArray$7(K.Extensions)&&K.Extensions[0]){const ne=K.Extensions[0];return{table:(J=ne.TargetTypeName.split(".").at(-1))==null?void 0:J.replace(/Data$/,""),method:ne.HandlerName}}return null},DataHandlerCell=({value:K})=>{const J=useSelector$1(selectActiveDataset$1),ne=useSelector$1(selectUser),{isLoading:oe,fetch:ce}=useRequest(handlerApi.handlerRun),ue=getFormattedValue(K),Ae=()=>{const pe=getHandlerParams(K);pe&&ce({Keys:[],Type:pe.table||"",Method:pe.method,Dataset:J,userName:ne==null?void 0:ne.username})};return jsxRuntimeExports.jsx(rl,{disabled:oe,onClick:Ae,iconBefore:jsxRuntimeExports.jsx(nD,{}),children:ue})},isHandlerExtension=K=>isObject$9(K)&&Object.hasOwn(K,"HandlerName")&&Object.hasOwn(K,"TargetTypeName"),isHandlerData=K=>isObject$9(K)&&isArray$7(K.Extensions)&&isHandlerExtension(K.Extensions[0]),DataCell=K=>isHandlerData(K.value)?jsxRuntimeExports.jsx(DataHandlerCell,{...K}):null;var ValueTypesEnum=(K=>(K.Data="Data",K.Bool="Bool",K.Double="Double",K.Long="Long",K.Int="Int",K.String="String",K.Date="Date",K.Time="Time",K.DateTime="DateTime",K.Key="Key",K.TimeElement="TimeElement",K.DateTimeElement="DateTimeElement",K.Mixed="Mixed",K))(ValueTypesEnum||{});const simpleValueTypes=["String","Bool","Int","Double","Long","Date","Time","DateTime","TimeElement","DateTimeElement","Mixed"],firstLetterToUppercase=K=>K.charAt(0).toUpperCase()+K.slice(1),isSimpleValueType=K=>isDefined$2(K)?simpleValueTypes.some(J=>J===K):!1,isDataValueType=K=>K==="Data",getColumnProps=(K,J,ne,oe)=>{const{Name:ce,Value:ue,Format:Ae,Optional:pe}=K,ve=(ue==null?void 0:ue.Type)&&firstLetterToUppercase(ue.Type);return{id:ce,Header:ce,accessor:ce,columnType:ve,isRequired:!pe,sortType:getSortTypeByValueType(ve),valueFormatter:me=>ValueFormatterService.simpleValueFormatter(me,ve,Ae),...oe&&{columns:oe,disableSortBy:!0,disableFilters:!0},Filter:me=>jsxRuntimeExports.jsx(FilterInput,{...me,...J}),filter:(me,ge,ye)=>ye===""?me:me.filter(xe=>ge.some(_e=>{const $e=ValueFormatterService.simpleValueFormatter(xe.values[_e],ue==null?void 0:ue.Type,Ae);return String($e).toLowerCase().includes(String(ye).toLowerCase())}))}},configSubColumnsArr=(K,J)=>{const ne=[];function oe(ce,ue,Ae,pe,ve){const me={Header:pe,accessor:pe,disableSortBy:!ve,disableFilters:!ve};for(let ge=0;ge<ce.length;ge++){const{Header:ye,columns:xe}=ce[ge];if(ye===Ae){if(xe!=null&&xe.length){if(xe!=null&&xe.find(_e=>_e.Header===pe))return;xe==null||xe.push(me);return}ce[ge].columns=[me]}xe!=null&&xe.length&&oe(xe,ue,Ae,pe,ve)}}return K.forEach(ce=>{const ue=ce.Name.split(J);ue==null||ue.forEach((Ae,pe)=>{const ve=pe===ue.length-1;!ne.length||pe===0&&!ne.find(me=>me.Header===Ae)?ne.push({Header:Ae,accessor:Ae}):oe(ne,ue[0],ue[pe-1],Ae,ve)})}),ne},mapMetadataToGridColumnsHelper$1=(K,J,ne)=>{const oe=Ae=>Ae.split(ne)[0],ce=K.filter(({Value:Ae,Vector:pe,Key:ve})=>(Ae==null?void 0:Ae.Type)&&(isSimpleValueType(Ae.Type)||ve||isDataValueType(Ae.Type))&&!pe);return(()=>{if(ne){const Ae=[];return ce.forEach(pe=>{Ae.find(ve=>oe(ve.Name)===oe(pe.Name))||Ae.push(pe)}),Ae}return ce})().map(Ae=>{var ve;let pe;if(ne){const me=configSubColumnsArr(ce,ne);Ae.Name=oe(Ae.Name),pe=(ve=me.find(ge=>ge.Header===Ae.Name))==null?void 0:ve.columns}return{...getColumnProps(Ae,J,!0,pe),Cell:me=>{var ye;if(isDataValueType((ye=Ae.Value)==null?void 0:ye.Type))return jsxRuntimeExports.jsx(DataCell,{...me});const ge=me.column.valueFormatter?me.column.valueFormatter(me.value):me.value;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ge})}}})},renderCell=K=>{const J=K.column.valueFormatter?K.column.valueFormatter(K.value):K.value;if(K.column.columnType==="Double"){const ne=[];K.column.filteredRows.forEach(ue=>{const Ae=ue.cells.find(pe=>{var ve,me;return((ve=pe.column)==null?void 0:ve.id)===((me=K.column)==null?void 0:me.id)});ne.push(Ae==null?void 0:Ae.value)});const oe=Math.max(...ne.map(ue=>Math.abs(ue))),ce=K.column.valueFormatter?K.column.valueFormatter(K.value,oe):K.value;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ce})}return isBool(J)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:J?BoolEnum.YES:BoolEnum.NO}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:J})},mapMetadataToGridColumnsHelper=(K,J,ne,oe)=>K.filter(({Value:ce,Vector:ue,Key:Ae,Enum:pe,Hidden:ve})=>(isSimpleValueType$1(ce==null?void 0:ce.Type)||Ae||pe)&&!ue&&!ve).map(ce=>{const ue=J==null?void 0:J.find(Ae=>Ae.Id===ce.Name);return{...getColumnProps$1(ce,{columnId:ce.Name,isColumnFormatter:!0,columnState:ue,gridColumns:ne,updateTypeState:oe}),Cell:renderCell}}),getCSVTableTextHelper=(K,J,ne)=>{const oe=K.filter(Ae=>!Ae.suppressHideColumn),ce=oe.map(Ae=>Ae.Header).join(ne),ue=J.map(Ae=>oe.reduce((pe,ve)=>{if(ve.id in Ae.values){const me=Ae.values[ve.id],ge=ve.valueFormatter?ve.valueFormatter(me):me;return pe.concat(toString$4(ge),`"${ne}"`)}return pe},"")).join(`"
"`);return`${ce}
"${ue}"`},exportToCSV=(K,J)=>{const ne=document.createElement("a"),oe=new Date;ne.href=`data:text/plain;charset=utf-8,${encodeURIComponent(K)}`,ne.download=`${J}-${oe.toLocaleDateString()}.csv`,ne.click()},downloadGridCSVHelper=(K,J,ne="Table")=>{const oe=getCSVTableTextHelper(K,J,",");exportToCSV(oe,ne)},defaultGetRowId=(K,J,ne)=>ne?[ne.id,J].join("."):J.toString(),getColumnTypeByCells=(K,J,ne,oe=ValueTypesEnum.String)=>{const ce=[];for(let Ae=K;Ae<ne.length;Ae+=J){const pe=ne[Ae];isObject$9(pe)&&ce.push(pe)}const ue=ce.length!==0&&Object.keys(ce[0]).at(0);return ue?ce.every(Ae=>Object.keys(Ae).at(0)===ue)?ue:ValueTypesEnum.Mixed:oe},borderCellColor="000000",headerCellBgColor="ADD8E6";var ExcelCellType=(K=>(K.STRING="s",K.NUMBER="n",K.ERROR="e",K.DATE="d",K.STUB="z",K))(ExcelCellType||{});const getSheetName=(K,J="...")=>{if(!K)return"Sheet 1";const ne=31;return K.length<=ne?K:K.slice(0,ne-J.length).concat(J)},formatExcelDate=K=>{const J={month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};return K.toLocaleString(void 0,J)},generateHeaderCell=(K,J="s",ne=getDefaultHeaderCellStyles())=>({v:K,t:J,s:ne}),generateCell=(K,J="s",ne=getDefaultCellStyles())=>({v:K,t:J,s:ne}),generateAdditionalInfoCell=(K,J="s",ne=getAdditinalInfoCellStyles())=>({v:K,t:J,s:ne}),getDefaultHeaderCellStyles=()=>({fill:{fgColor:{rgb:headerCellBgColor}},border:{top:{style:"thin",color:{rgb:borderCellColor}},right:{style:"thin",color:{rgb:borderCellColor}},bottom:{style:"thin",color:{rgb:borderCellColor}},left:{style:"thin",color:{rgb:borderCellColor}}}}),getDefaultCellStyles=()=>({border:{top:{style:"thin",color:{rgb:borderCellColor}},right:{style:"thin",color:{rgb:borderCellColor}},bottom:{style:"thin",color:{rgb:borderCellColor}},left:{style:"thin",color:{rgb:borderCellColor}}}}),getAdditinalInfoCellStyles=()=>({font:{color:{rgb:"800080"},italic:!0}}),getColumnWidth=K=>({wch:K}),MAX_CELL_LENGTH=32767,splitLongCells=K=>{const J=[];for(const ne of K){const oe=[[]];for(let ce=0;ce<ne.length;ce++){const ue=ne[ce],Ae=ue==null?void 0:ue.v;if(typeof Ae=="string"&&Ae.length>MAX_CELL_LENGTH){const pe=[];for(let ve=0;ve<Ae.length;ve+=MAX_CELL_LENGTH)pe.push(Ae.slice(ve,ve+MAX_CELL_LENGTH));pe.forEach((ve,me)=>{oe[me]||(oe[me]=Array(ce).fill(null)),oe[me][ce]={...ue,v:ve}})}else oe.forEach((pe,ve)=>{pe[ce]=ve===0?ue:{...ue,v:"",t:"s"}})}J.push(...oe)}return J},exportToExcelFile=({fileName:K,sheetName:J,columnWidths:ne,body:oe})=>{const ce=xlsx_minExports.utils.book_new(),ue=splitLongCells(oe),Ae=xlsx_minExports.utils.aoa_to_sheet(ue),pe=getSheetName(J);Ae["!cols"]=ne,xlsx_minExports.utils.book_append_sheet(ce,Ae,pe),xlsx_minExports.writeFile(ce,K||"Excel_default.xlsx")},generateExcelHeader=K=>K.map(J=>generateHeaderCell(J.Header)),generateExcelBody=(K,J)=>J.map(ne=>K.reduce((oe,ce)=>{if(ce.id in ne.values){const ue=isNumberType(ce.columnType),Ae=ne.values[ce.id],pe=ce.valueFormatter?ce.valueFormatter(Ae):Ae,ve=generateCell((ue?Ae:pe)??"",ue?ExcelCellType.NUMBER:ExcelCellType.STRING);oe.push(ve)}return oe},[])),getExcelAdditionalInfoData=K=>{const J=[];return K.forEach(({name:ne,value:oe})=>{J.push([generateAdditionalInfoCell(ne),generateAdditionalInfoCell(oe)])}),J},downloadGridExcelHelper=(K,J,{sheetName:ne,additionalCells:oe,selectedRowKeys:ce})=>{const ue=K.filter($e=>!$e.suppressHideColumn),Ae=generateExcelHeader(ue),pe=[];J.forEach($e=>{ce.includes($e.id)&&pe.push($e)});const ve=generateExcelBody(ue,pe),me=oe?getExcelAdditionalInfoData(oe):[],ye=`Report_${DateFormatUtility.create().format(DateFormatEnum.DATE)}.xlsx`,xe=Ae.map(()=>getColumnWidth(20)),_e=[...me,Ae,...ve];exportToExcelFile({fileName:ye,sheetName:ne,body:_e,columnWidths:xe})},container$z="_container_1wz1h_1",hidden$1="_hidden_1wz1h_8",corner="_corner_1wz1h_14",scrollbarBackgroundColor="_scrollbarBackgroundColor_1wz1h_19",styles$1g={container:container$z,hidden:hidden$1,corner,scrollbarBackgroundColor},HorizontalScroll=reactExports.memo(({totalColumnsWidth:K,isShowCorner:J,isHidden:ne,setHidden:oe,scrollBodyTo:ce,scrollHeaderTo:ue})=>{const{ref:Ae,width:pe=0}=useResizeObserver();reactExports.useEffect(()=>{oe(K<pe)},[pe,K]);const ve=me=>{const ge=me.currentTarget.scrollLeft;ue({left:ge}),ce({left:ge})};return jsxRuntimeExports.jsxs("div",{ref:Ae,className:cx(styles$1g.container,{[styles$1g.hidden]:ne}),children:[jsxRuntimeExports.jsx("div",{className:cx(styles$1g.scrollbarBackgroundColor),onScroll:ve,children:jsxRuntimeExports.jsx("div",{style:{width:K},className:styles$1g.container})}),J&&jsxRuntimeExports.jsx("div",{className:cx(styles$1g.corner,styles$1g.scrollbarBackgroundColor)})]})});HorizontalScroll.displayName="HorizontalScroll";const DEFAULT_MARKED_INDEX=-1;function useNavigation({selectedRowId:K,onChangeSelectedRowId:J}){const[ne,oe]=reactExports.useState([]),[ce,ue]=reactExports.useState(DEFAULT_MARKED_INDEX),Ae=()=>ne.findIndex(Ie=>Ie.id===K),pe=(Ie,Fe,ke)=>{if(!ke)return;const We=Object.keys(ke.selectedCells).filter(Xe=>Xe.includes(String(Ie))).map(Xe=>{const Je=Xe.split("_");return Je[1]=String(Fe),Je.join("_")}),ze={};We.forEach(Xe=>{ze[Xe]=!0}),ke==null||ke.updateFn(ze)},ve=Ie=>{const ke=ce===DEFAULT_MARKED_INDEX?Ae():ce,je=ke===0?0:ke-1;ue(()=>je),pe(ce,je,Ie);const We=ne.at(je);We&&J(We.id)},me=Ie=>{const Fe=ce===DEFAULT_MARKED_INDEX,ke=ne.length-1,je=Fe?Ae():ce,We=je===ke?ke:je+1;ue(()=>We),pe(ce,We,Ie);const ze=ne.at(We);ze&&J(ze.id)},ge=()=>ue(DEFAULT_MARKED_INDEX),ye=()=>{const Ie=ne.at(ce);Ie&&J(Ie.id)};return{isDefaultMarkedIndex:ce===DEFAULT_MARKED_INDEX,markedIndex:ce,prevMarkedRow:ve,nextMarkedRow:me,resetMarkedRow:ge,onKeyDown:(Ie,Fe)=>{switch(Ie.key){case KeyboardCode.ArrowUp:ve(Fe);break;case KeyboardCode.ArrowDown:me(Fe);break;case KeyboardCode.Enter:case KeyboardCode.NumpadEnter:ye();break}},attachRows:Ie=>{oe(Ie)},updateMarkedIndexOnRowChange:Ie=>{const Fe=ne.findIndex(ke=>ke.id===Ie);ue(Fe)},setMarkedIndex:ue}}const container$y="_container_6f8yp_1",styles$1f={container:container$y},SelectedRowsCounter=reactExports.memo(({areAllRecordsSelected:K,selectedRowsCount:J})=>J===0?null:jsxRuntimeExports.jsx("div",{className:styles$1f.container,children:K?instance.t("selectedRowsCounter.all"):instance.t("selectedRowsCounter.selectedRows",{selectedRowsCount:J})}));SelectedRowsCounter.displayName="SelectedRowsCounter";const spinnerIcon="_spinnerIcon_1fvo4_6",spin$1="_spin_1fvo4_6",successIcon="_successIcon_1fvo4_11",errorIcon="_errorIcon_1fvo4_15",handlerStatusContainer="_handlerStatusContainer_1fvo4_19",styles$1e={spinnerIcon,spin:spin$1,successIcon,errorIcon,handlerStatusContainer},HandlerRecordStatus=reactExports.memo(({row:K})=>{const{state:J}=useDndContext();if(!J.recordStatuses[K.id])return;const{statusCode:ne,message:oe}=J.recordStatuses[K.id],ce=(Ae,pe)=>{switch(Ae){case RunHandlerStatusCodeEnum.Completed:return pe||t$5("grid.successHandler");case RunHandlerStatusCodeEnum.Cancelled:case RunHandlerStatusCodeEnum.Failed:return pe||t$5("grid.errorHandler");default:return pe}},ue=Ae=>{switch(Ae){case RunHandlerStatusCodeEnum.Submitted:case RunHandlerStatusCodeEnum.Running:return jsxRuntimeExports.jsx(D_,{className:styles$1e.spinnerIcon});case RunHandlerStatusCodeEnum.Completed:return jsxRuntimeExports.jsx(j_,{className:styles$1e.successIcon});case RunHandlerStatusCodeEnum.Cancelled:case RunHandlerStatusCodeEnum.Failed:return jsxRuntimeExports.jsx(PA,{className:styles$1e.errorIcon});default:return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}};return jsxRuntimeExports.jsx(mf,{title:ce(ne,oe),children:jsxRuntimeExports.jsx("div",{className:styles$1e.handlerStatusContainer,children:ue(ne)})})});HandlerRecordStatus.displayName="HandlerRecordStatus";reactTableExports.actions.resetLayout="resetLayout";reactTableExports.actions.clearState="clearState";reactTableExports.actions.setFilter="setFilter";reactTableExports.actions.setSelectedCellIds="setSelectedCellIds";const CELL_BOTH_SIDES_PADDING_PX=16,HEADER_CELL_MARGINX_X=8,TABLE_BODY_FONT_SIZE="13px",canvas=document.createElement("canvas"),context=canvas.getContext("2d");context&&(context.font=`${TABLE_BODY_FONT_SIZE} ${getComputedStyle(document.body).fontFamily}`);function reducer$1(K,J,ne,oe,ce){if(J.type===reactTableExports.actions.init){const{data:ue=[],columns:Ae=[]}=ce||{},pe={};return ne.length===0?ue.forEach(ve=>{Ae.forEach(me=>{const ge=Number(me.width),ye=ve[String(me.Header).replace(/\s/g,"")]||"",xe=String(me.Header),_e=(context==null?void 0:context.measureText(String(ye)).width)||0,$e=(context==null?void 0:context.measureText(String(xe)).width)||0;let Ie=Math.ceil(Number(_e)+CELL_BOTH_SIDES_PADDING_PX),Fe=Math.ceil($e+CELL_BOTH_SIDES_PADDING_PX+HEADER_CELL_MARGINX_X);Ie>GridColumWidth.MAX_WIDTH&&(Ie=GridColumWidth.MAX_WIDTH),Fe>GridColumWidth.MAX_WIDTH&&(Fe=GridColumWidth.MAX_WIDTH),Object.hasOwn(pe,String(me.Header))?Ie>Fe&&Ie>pe[String(me.Header)]?pe[String(me.Header)]=Ie:Fe>Ie&&Fe>pe[String(me.Header)]&&(pe[String(me.Header)]=Fe):Ie>Fe?pe[String(me.Header)]=Ie:Fe>Ie&&(pe[String(me.Header)]=Fe),Ie>ge&&Ie>Fe?me.width=Ie:Fe>ge&&Fe>Ie&&(me.width=Fe)})}):Ae.forEach(ve=>{var ge;const me=(ge=ne.find(ye=>ye.Id===ve.id))==null?void 0:ge.SizeInPercent;me&&(pe[String(ve.Header)]=me)}),{...K,columnsWidths:pe,initialColumnsOrder:Ae.map(ve=>ve.id)}}if(J.type===reactTableExports.actions.resetLayout){const{flatHeaders:ue=[],allColumns:Ae=[],setColumnOrder:pe}=ce||{},{columnsWidths:ve,initialColumnsOrder:me}=K;ue.forEach(ye=>{ye.width=ve[String(ye.Header)]||ye.width});const ge=Ae.filter(ye=>!me.find(xe=>xe===ye.id)).map(ye=>ye.id);return pe==null||pe([...ge,...me]),Ae.forEach(ye=>{var xe,_e;(xe=ye.clearSortBy)==null||xe.call(ye),(_e=ye.setFilter)==null||_e.call(ye,"")}),{...K,columnResizing:{columnWidths:{}},selectedRowsIds:{},selectedCellIds:{},isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null,currentFilterRowCellsSelectedIds:{},cellRangeSelecting:{},freezedSelectedCellIds:{},selectedRowsPerPageState:{}}}return K}function useInstance(K){const{dispatch:J}=K;Object.assign(K,{resetLayout:()=>{J({type:reactTableExports.actions.resetLayout})}})}const useRestoreLayout=(K,J)=>{K.stateReducers.push((ne,oe,ce,ue)=>reducer$1(ne,oe,J,ce,ue)),K.useInstance.push(useInstance)};useRestoreLayout.plaginName="useRestoreLayout";const loaderMask="_loaderMask_1jnrn_1",mainGridCell="_mainGridCell_1jnrn_6",container$x="_container_1jnrn_11",cell="_cell_1jnrn_20",containerReadOnly="_containerReadOnly_1jnrn_27",wrapper$1="_wrapper_1jnrn_35",noData$2="_noData_1jnrn_47",primaryBG="_primaryBG_1jnrn_51",secondaryBG="_secondaryBG_1jnrn_55",styles$1d={loaderMask,mainGridCell,container:container$x,cell,containerReadOnly,wrapper:wrapper$1,noData:noData$2,primaryBG,secondaryBG},Grid=reactExports.forwardRef(({initialFilters:K=[],initialSortBy:J=[],className:ne,columns:oe,initiallyHiddenColumns:ce=[],initiallyHideEmptyColumns:ue=!1,data:Ae,variant:pe="primary",isColumnFilter:ve=!0,useCheckboxes:me=!1,isCountRowCellExist:ge,gridName:ye,status:xe=LoadingStatusesEnum.SUCCESS,gridMode:_e=GridModeEnum.DEFAULT,selectedRowsRange:$e={},getRowId:Ie,selectedRowId:Fe,onChangeSelectedRowId:ke,onSelectedCheckboxChange:je,onSelectedRowsRangeChanged:We=()=>{},onRowDoubleClicked:ze=()=>{},onSortingChanged:Xe=()=>{},shouldClearCellsSelection:Je,customFilterCell:nt,selectedCheckbox:et={},selectedRowsPerPage:tt,setSelectedRowsPerPage:st,isSelectAllRecordsBtnClicked:qe,isDeselectAllRecordsBtnClicked:Se,setIsSelectAllRecordsBtnClicked:Re,isRunHandlers:Be=!1,cellRowsCount:Ne,onChangeGridRowsData:Ue,isLineBreakSymbol:Ge=!1,isRowFocus:Ye,onChangeIsRowFocus:Qe,updateSelectedGridRowKey:Te,calculateElementHiehgt:Ke,isReadOnly:rt=!1,columnsState:it=[],getPaginationBlock:at,defaultScroll:lt,onChangeScroll:ct,setSavedFilters:ot,setSavedSortings:ft,registerService:dt,shouldResetMarkedIndex:mt,resetSetShouldResetMarkedIndex:kt},wt)=>{const Et=reactExports.useRef(null),Ot=reactExports.useRef(null),Rt=reactExports.useRef(null),gt=reactExports.useRef(!0),$t=reactExports.useRef(!1),pt=reactExports.useRef(!1),[vt,Mt]=reactExports.useState(!1),[St,_t]=reactExports.useState(!1),[Xt,Tt]=reactExports.useState(""),Dt=Fe??Xt,Ht=ke??Tt,Bt=!vt,It=reactExports.useCallback((Gr,ni,Un)=>Ie?Ie(Gr,ni,Un):defaultGetRowId(Gr,ni,Un),[Ie]);reactExports.useEffect(()=>{gt.current?gt.current=!1:Je&&Zt()},[Je]);const{isDefaultMarkedIndex:zt,markedIndex:Pt,resetMarkedRow:Vt,onKeyDown:vr,attachRows:qt,updateMarkedIndexOnRowChange:er,setMarkedIndex:yr}=useNavigation({selectedRowId:Dt,onChangeSelectedRowId:Ht});reactExports.useEffect(()=>{mt!==void 0&&mt&&(yr(0),kt==null||kt())},[mt]);const Lt=()=>jsxRuntimeExports.jsx("div",{className:cx(styles$1d.container,{[styles$1d.containerReadOnly]:rt})}),{clearSelection:jt,resetLayout:fr,setCurrentSelectedCellIds:Gt,setSelectedCellIds:Jt,changeSelectedCell:ar,updateSelectedRowsPerPageState:Wt,deletePrevSelectedCheckbox:nr,selectAllRowsAllCells:Er,clearCellSelectionState:Zt,selectNewCellsArr:ir,selectProvidedRowsCells:Ir,rewriteActiveRowStartCell:tr,totalColumnsWidth:cr,getTableProps:Or,getTableBodyProps:sr,headerGroups:dr,rows:Dr,preFilteredRows:lr,prepareRow:hr,setColumnOrder:Yr,visibleColumns:ur,cellIdSplitBy:pr,headers:Jr,columns:Yt,state:{selectedCellIds:or,currentSelectedCellIds:Fr,selectedRowsIds:kr,sortBy:Kr,filters:cn,columnsWidths:An,hiddenColumns:_n}}=reactTableExports.useTable({autoResetResize:!1,autoResetFilters:!1,autoResetSortBy:!1,columns:oe,data:Ae,getRowId:It,defaultColumn:{applyMaxWidth:!0,Filter:FilterInput},initialState:{filters:K,sortBy:J,hiddenColumns:ce},stateReducer:(Gr,ni)=>((ni.type===reactTableExports.actions.toggleSortBy||ni.type===reactTableExports.actions.setSortBy)&&Vt(),Gr)},useCellRangeSelection,useFilterColumnCheckBox,Gr=>useRestoreLayout(Gr,it),reactTableExports.useFilters,reactTableExports.useSortBy,reactTableExports.useExpanded,reactTableExports.useColumnOrder,reactTableExports.useResizeColumns,reactTableExports.useBlockLayout,Gr=>{ve&&Gr.allColumns.push(ni=>[{id:"filter",customHeader:!0,suppressDrag:!0,suppressHideColumn:!0,suppressHeaderTooltip:!0,applyMaxWidth:!0,minWidth:45,width:45,maxWidth:45,disableResizing:!0,Header:Un=>{const{isSelectAllRecordsBtnClicked:Li,isDeselectAllRecordsBtnClicked:Xs,selectedCheckbox:tu}=reactExports.useContext(GridContext);return nt?($t.current=!!Li,pt.current=!!Xs,nt({passedColumns:Un.allColumns,gridMode:_e,rows:Un.rows,onSelectedRowsRangeChanged:We,clearCellSelectionState:Zt,selectAllRowsAllCells:Er,updateSelectedRowsPerPageState:Un.updateSelectedRowsPerPageState,passedSelectedRowsPerPage:Un.state.selectedRowsPerPageState,isSelectAllRecordsBtnClicked:Li,isDeselectAllRecordsBtnClicked:Xs})):(ue&&env$1.hideEmptyColumns==="true"&&Un.allColumns.forEach(wn),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FilterCell,{columns:Un.allColumns}),me&&jsxRuntimeExports.jsx(CheckboxSelectionAll,{rows:Un.rows,selectedRows:tu,onSelectedCheckboxChange:je})]}))},Cell:({row:Un})=>{const{selectedRowsRange:Li,selectedCheckbox:Xs}=reactExports.useContext(GridContext);return _e===GridModeEnum.READ_ONLY?null:jsxRuntimeExports.jsxs("div",{className:cx(styles$1d.cell,{[styles$1d.mainGridCell]:_e===GridModeEnum.MAIN}),children:[ge?Un.index+1:null,_e===GridModeEnum.MAIN&&Bn(Li,Un),me&&jsxRuntimeExports.jsx(CheckboxSelection,{row:Un,selectedRows:Xs,onSelectedCheckboxChange:je})]})}},...ni]),Be&&Gr.allColumns.push(ni=>[{id:"handlerStatus",customHeader:!0,suppressDrag:!0,suppressHideColumn:!0,suppressHeaderTooltip:!0,applyMaxWidth:!0,minWidth:30,width:30,maxWidth:30,Header:Lt,Cell:HandlerRecordStatus},...ni])});reactExports.useEffect(()=>{dt==null||dt(jt)},[]);const wn=Gr=>{const ni=Gr.preFilteredRows.some(Un=>{var Li;return isDefined$2((Li=Un.original)==null?void 0:Li[Gr.id])});!Gr.suppressHideColumn&&!ni&&(Gr.isVisible=!1)},Bn=(Gr,ni)=>jsxRuntimeExports.jsx(pF,{value:$t.current&&!pt.current||!!Object.values(Gr).find(Un=>Un._key===ni.original._key),onMouseDown:Un=>Un.stopPropagation()}),On=()=>{if(Dr.forEach(Gr=>{hr(Gr)}),Ue){const Gr=Dr.map(({id:ni,index:Un})=>({id:ni,index:Un}));qt(Dr),Ue(Gr)}};reactExports.useEffect(()=>{Kr.length||cn.some(Gr=>Gr.value)||On()},[Dr,Kr,cn]),reactExports.useEffect(()=>{On(),ot==null||ot(cn),ft==null||ft(Kr)},[Kr,cn]),reactExports.useEffect(()=>{var Un;if(Te==null||Te(Dt),Dt||Dr.length===0)return;const Gr=Dr[0];if(Ht(Gr.id),!(Gr!=null&&Gr.allCells)||Gr.allCells.length===0)return;const ni=Gr.allCells.findIndex(Li=>Li.column.id===ColumnNameType.FILTER);ni&&tr(((Un=Gr.allCells[ni!==-1?ni+1:0])==null?void 0:Un.id)||"")},[Dr]);const In=reactExports.useMemo(()=>({...Fr,...or}),[Fr,or]),Ln=()=>{ke==null||ke(Dr[0].id),Zt()},Tn=Gr=>{Dr.length>0&&(Xe(Dr.length>0?Gr:[]),Ln())},Rn=reactExports.useMemo(()=>({toExcel:Gr=>downloadGridExcelHelper(ur,Dr,Gr),toCSV:()=>downloadGridCSVHelper(ur,Dr,ye)}),[ye,ur,Dr]),$n=Gr=>{nr(Gr)},Cn=reactExports.useCallback(()=>{const Gr=getSelectedRangeCells(oe,Dr,In,{cellIdSplitBy:pr});addDataToClickboard(Gr)},[pr,oe,Dr,In]);reactExports.useImperativeHandle(wt,()=>({exportGridOptions:Rn,deleteOldSelectedRowKey:$n,headers:Jr,updateMarkedIndexOnRowChange:er,resetLayout:fr,gridColumns:Yt,columnsWidths:An,hiddenColumns:_n}));const Sn=reactExports.useCallback((Gr,ni)=>{const Un=ur.map(Xs=>Xs.id),[Li]=Un.splice(Gr,1);Li&&(Un.splice(ni,0,Li),Yr(Un))},[Yr,ur]),gn=reactExports.useCallback(Gr=>{Ot.current&&Ot.current.scrollTo({behavior:"smooth",...Gr})},[]),Mn=reactExports.useCallback(Gr=>{Rt.current&&Rt.current.scrollTo({behavior:"smooth",...Gr})},[]),yn=reactExports.useMemo(()=>({headerRef:Ot,bodyRef:Rt,changeOrderColumns:Sn,selectedRowsRange:$e,isSelectAllRecordsBtnClicked:qe,isDeselectAllRecordsBtnClicked:Se,setIsSelectAllRecordsBtnClicked:Re,selectedCheckbox:et,handleSortByChanged:Tn}),[Ot,Rt,Sn,$e,qe,Se,Re,et,Tn]),Ys=reactExports.useCallback(()=>Or({style:{...Or().style,minWidth:"auto"}}),[Or]),pa=Gr=>{ct==null||ct(Gr)};return jsxRuntimeExports.jsx(PF,{loading:xe===LoadingStatusesEnum.INITIAL||xe===LoadingStatusesEnum.LOADING,children:jsxRuntimeExports.jsx(GridContext.Provider,{value:yn,children:jsxRuntimeExports.jsxs("div",{ref:Et,...Ys(),className:cx({[styles$1d.primaryBG]:pe==="primary",[styles$1d.secondaryBG]:pe==="secondary"},styles$1d.wrapper,ne),children:[jsxRuntimeExports.jsx(TableHeader,{isTableBodyVerticallyScrollable:!vt,gridRef:Et,isShowCorner:Bt,headerGroups:dr,gridMode:_e,onSortByChanged:Tn}),jsxRuntimeExports.jsxs(ContextMenuProvider,{children:[(Dr==null?void 0:Dr.length)>0?jsxRuntimeExports.jsx(TableBody,{isHiddenVerticalScroll:vt,setHiddenVerticalScroll:Mt,isDefaultMarkedIndex:zt,markedIndex:Pt,columns:ur,getTableBodyProps:sr,prepareRow:hr,rows:Dr,preFilteredRows:lr,isInfoCellExist:ve,isCountRowCellExist:ge,selectedCellIds:or,selectedRangeCells:In,selectedRowsRange:$e,selectedRowsIds:kr,onSelectedRowsRangeChanged:We,handleCopySelectedRangeCells:Cn,gridMode:_e,onRowDoubleClicked:ze,selectedRowId:Dt,onSelectRowId:Ht,navigationKeyDownHandler:vr,rewriteActiveRowStartCell:tr,selectNewCellsArr:ir,selectProvidedRowsCells:Ir,selectedRowsPerPage:tt,setSelectedRowsPerPage:st,updateSelectedRowsPerPageState:Wt,isSelectAllRecordsBtnClicked:yn.isSelectAllRecordsBtnClicked,setIsSelectAllRecordsBtnClicked:yn.setIsSelectAllRecordsBtnClicked,setSelectedCellIds:Jt,setCurrentSelectedCellIds:Gt,changeSelectedCell:ar,cellRowsCount:Ne||+env$1.gridMaxLines,isLineBreakSymbol:Ge,isRowFocus:Ye,onChangeIsRowFocus:Qe,calculateElementHiehgt:Ke,handleTableBodyScroll:pa,defaultScroll:lt,setMarkedIndex:yr}):jsxRuntimeExports.jsx("div",{className:styles$1d.noData}),jsxRuntimeExports.jsx(SelectedRowsCounter,{areAllRecordsSelected:$t.current,selectedRowsCount:Object.keys($e).length}),at==null?void 0:at()]}),jsxRuntimeExports.jsx(HorizontalScroll,{isShowCorner:Bt,totalColumnsWidth:cr,isHidden:St,setHidden:_t,scrollBodyTo:Mn,scrollHeaderTo:gn})]})})})});Grid.displayName="Grid";const getColumns$1=(K,J,ne)=>{const oe=K.length,ce=K.map((ue,Ae)=>{const pe=getColumnTypeByCells(Ae,oe,J);return{Name:ue,Value:{Type:pe}}});return mapMetadataToGridColumnsHelper$1(ce,void 0,ne)},isDataType=K=>isObject$9(K)&&Object.hasOwn(K,ValueTypesEnum$1.Data),getRows$1=(K,J)=>{const ne=K.length,oe=[];for(let ce=0;ce<J.length;ce+=ne){const ue=J.slice(ce,ce+ne),Ae=K.reduce((pe,ve,me)=>{const ge=ue[me];if(isDataType(ge))return{...pe,[ve]:ge.Data};const ye=isObject$9(ge)?Object.values(ge).at(0):null;return{...pe,[ve]:ye}},{});oe.push(Ae)}return oe},container$w="_container_i0pii_1",styles$1c={container:container$w},TableViewer=({ColHeaders:K,ValuesContainer:J,MultiHeaderSeparator:ne})=>{const{columns:oe,rows:ce}=reactExports.useMemo(()=>{if(isArrayOfStrings(K)&&isObject$9(J)&&isArray$7(J.Array)){const ue=ne?K.map(Ae=>Ae.split(ne).pop()):K;return{columns:getColumns$1(K,J.Array,ne),rows:getRows$1(ue,J.Array)}}return{columns:[],rows:[]}},[K,J]);return jsxRuntimeExports.jsx("div",{className:styles$1c.container,children:jsxRuntimeExports.jsx(Grid,{columns:oe,data:ce})})},CompositeView=({ColsCount:K,RowsCount:J,Views:ne,onTransition:oe})=>{if(!K||!J||!(ne!=null&&ne.length))return null;const ce=K>1?Array.from({length:J},(ue,Ae)=>ne.slice(Ae*K,(Ae+1)*K)):ne;return jsxRuntimeExports.jsx(PanelGroup,{direction:"vertical",children:ce.map((ue,Ae)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Panel$1,{onResize:resizePlotly,children:isArray$7(ue)&&ue.length>0?jsxRuntimeExports.jsx(PanelGroup,{direction:"horizontal",children:ue.map((pe,ve)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Panel$1,{onResize:resizePlotly,children:jsxRuntimeExports.jsx(Viewers,{activeViewerType:pe._t,data:pe,onTransition:oe})}),ve!==K-1&&jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"})]},ve))}):jsxRuntimeExports.jsx(Viewers,{activeViewerType:ne[Ae]._t,data:ne[Ae],onTransition:oe})}),Ae!==J-1&&jsxRuntimeExports.jsx(PanelResizeHandle,{className:"horizontalPanelResizer"})]},Ae))})},container$v="_container_i0pii_1",styles$1b={container:container$v},FormattedVariantTable=({ColHeaders:K,ValuesContainer:J,MultiHeaderSeparator:ne})=>{const{columns:oe,rows:ce}=reactExports.useMemo(()=>{if(isArrayOfStrings(K)&&isObject$9(J)&&isArray$7(J.Array)){const ue=ne?K.map(Ae=>Ae.split(ne).pop()):K;return{columns:getColumns$1(K,J.Array,ne),rows:getRows$1(ue,J.Array)}}return{columns:[],rows:[]}},[K,J]);return jsxRuntimeExports.jsx("div",{className:styles$1b.container,children:jsxRuntimeExports.jsx(Grid,{columns:oe,data:ce})})};function _arrayLikeToArray$2(K,J){(J==null||J>K.length)&&(J=K.length);for(var ne=0,oe=Array(J);ne<J;ne++)oe[ne]=K[ne];return oe}function _arrayWithHoles$2(K){if(Array.isArray(K))return K}function _defineProperty$3(K,J,ne){return(J=_toPropertyKey(J))in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function _iterableToArrayLimit$2(K,J){var ne=K==null?null:typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(ne!=null){var oe,ce,ue,Ae,pe=[],ve=!0,me=!1;try{if(ue=(ne=ne.call(K)).next,J!==0)for(;!(ve=(oe=ue.call(ne)).done)&&(pe.push(oe.value),pe.length!==J);ve=!0);}catch(ge){me=!0,ce=ge}finally{try{if(!ve&&ne.return!=null&&(Ae=ne.return(),Object(Ae)!==Ae))return}finally{if(me)throw ce}}return pe}}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys$3(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread2$1(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys$3(Object(ne),!0).forEach(function(oe){_defineProperty$3(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys$3(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function _objectWithoutProperties$1(K,J){if(K==null)return{};var ne,oe,ce=_objectWithoutPropertiesLoose$1(K,J);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(K);for(oe=0;oe<ue.length;oe++)ne=ue[oe],J.indexOf(ne)===-1&&{}.propertyIsEnumerable.call(K,ne)&&(ce[ne]=K[ne])}return ce}function _objectWithoutPropertiesLoose$1(K,J){if(K==null)return{};var ne={};for(var oe in K)if({}.hasOwnProperty.call(K,oe)){if(J.indexOf(oe)!==-1)continue;ne[oe]=K[oe]}return ne}function _slicedToArray$2(K,J){return _arrayWithHoles$2(K)||_iterableToArrayLimit$2(K,J)||_unsupportedIterableToArray$2(K,J)||_nonIterableRest$2()}function _toPrimitive(K,J){if(typeof K!="object"||!K)return K;var ne=K[Symbol.toPrimitive];if(ne!==void 0){var oe=ne.call(K,J);if(typeof oe!="object")return oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(K)}function _toPropertyKey(K){var J=_toPrimitive(K,"string");return typeof J=="symbol"?J:J+""}function _unsupportedIterableToArray$2(K,J){if(K){if(typeof K=="string")return _arrayLikeToArray$2(K,J);var ne={}.toString.call(K).slice(8,-1);return ne==="Object"&&K.constructor&&(ne=K.constructor.name),ne==="Map"||ne==="Set"?Array.from(K):ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne)?_arrayLikeToArray$2(K,J):void 0}}function _defineProperty$2(K,J,ne){return J in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function ownKeys$2(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread2(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys$2(Object(ne),!0).forEach(function(oe){_defineProperty$2(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys$2(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function compose$1(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];return function(oe){return J.reduceRight(function(ce,ue){return ue(ce)},oe)}}function curry$1(K){return function J(){for(var ne=this,oe=arguments.length,ce=new Array(oe),ue=0;ue<oe;ue++)ce[ue]=arguments[ue];return ce.length>=K.length?K.apply(this,ce):function(){for(var Ae=arguments.length,pe=new Array(Ae),ve=0;ve<Ae;ve++)pe[ve]=arguments[ve];return J.apply(ne,[].concat(ce,pe))}}}function isObject$5(K){return{}.toString.call(K).includes("Object")}function isEmpty(K){return!Object.keys(K).length}function isFunction$3(K){return typeof K=="function"}function hasOwnProperty$a(K,J){return Object.prototype.hasOwnProperty.call(K,J)}function validateChanges(K,J){return isObject$5(J)||errorHandler$1("changeType"),Object.keys(J).some(function(ne){return!hasOwnProperty$a(K,ne)})&&errorHandler$1("changeField"),J}function validateSelector(K){isFunction$3(K)||errorHandler$1("selectorType")}function validateHandler(K){isFunction$3(K)||isObject$5(K)||errorHandler$1("handlerType"),isObject$5(K)&&Object.values(K).some(function(J){return!isFunction$3(J)})&&errorHandler$1("handlersType")}function validateInitial(K){K||errorHandler$1("initialIsRequired"),isObject$5(K)||errorHandler$1("initialType"),isEmpty(K)&&errorHandler$1("initialContent")}function throwError$1(K,J){throw new Error(K[J]||K.default)}var errorMessages$2={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},errorHandler$1=curry$1(throwError$1)(errorMessages$2),validators$1={changes:validateChanges,selector:validateSelector,handler:validateHandler,initial:validateInitial};function create$2(K){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};validators$1.initial(K),validators$1.handler(J);var ne={current:K},oe=curry$1(didStateUpdate)(ne,J),ce=curry$1(updateState)(ne),ue=curry$1(validators$1.changes)(K),Ae=curry$1(extractChanges)(ne);function pe(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(ge){return ge};return validators$1.selector(me),me(ne.current)}function ve(me){compose$1(oe,ce,ue,Ae)(me)}return[pe,ve]}function extractChanges(K,J){return isFunction$3(J)?J(K.current):J}function updateState(K,J){return K.current=_objectSpread2(_objectSpread2({},K.current),J),J}function didStateUpdate(K,J,ne){return isFunction$3(J)?J(K.current):Object.keys(ne).forEach(function(oe){var ce;return(ce=J[oe])===null||ce===void 0?void 0:ce.call(J,K.current[oe])}),ne}var index$2={create:create$2},config$1={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function curry(K){return function J(){for(var ne=this,oe=arguments.length,ce=new Array(oe),ue=0;ue<oe;ue++)ce[ue]=arguments[ue];return ce.length>=K.length?K.apply(this,ce):function(){for(var Ae=arguments.length,pe=new Array(Ae),ve=0;ve<Ae;ve++)pe[ve]=arguments[ve];return J.apply(ne,[].concat(ce,pe))}}}function isObject$4(K){return{}.toString.call(K).includes("Object")}function validateConfig(K){return K||errorHandler("configIsRequired"),isObject$4(K)||errorHandler("configType"),K.urls?(informAboutDeprecation(),{paths:{vs:K.urls.monacoBase}}):K}function informAboutDeprecation(){console.warn(errorMessages$1.deprecation)}function throwError(K,J){throw new Error(K[J]||K.default)}var errorMessages$1={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},errorHandler=curry(throwError)(errorMessages$1),validators={config:validateConfig},compose=function(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return function(ce){return ne.reduceRight(function(ue,Ae){return Ae(ue)},ce)}};function merge$1(K,J){return Object.keys(J).forEach(function(ne){J[ne]instanceof Object&&K[ne]&&Object.assign(J[ne],merge$1(K[ne],J[ne]))}),_objectSpread2$1(_objectSpread2$1({},K),J)}var CANCELATION_MESSAGE={type:"cancelation",msg:"operation is manually canceled"};function makeCancelable(K){var J=!1,ne=new Promise(function(oe,ce){K.then(function(ue){return J?ce(CANCELATION_MESSAGE):oe(ue)}),K.catch(ce)});return ne.cancel=function(){return J=!0},ne}var _excluded$1=["monaco"],_state$create=index$2.create({config:config$1,isInitialized:!1,resolve:null,reject:null,monaco:null}),_state$create2=_slicedToArray$2(_state$create,2),getState=_state$create2[0],setState=_state$create2[1];function config(K){var J=validators.config(K),ne=J.monaco,oe=_objectWithoutProperties$1(J,_excluded$1);setState(function(ce){return{config:merge$1(ce.config,oe),monaco:ne}})}function init$2(){var K=getState(function(J){var ne=J.monaco,oe=J.isInitialized,ce=J.resolve;return{monaco:ne,isInitialized:oe,resolve:ce}});if(!K.isInitialized){if(setState({isInitialized:!0}),K.monaco)return K.resolve(K.monaco),makeCancelable(wrapperPromise);if(window.monaco&&window.monaco.editor)return storeMonacoInstance(window.monaco),K.resolve(window.monaco),makeCancelable(wrapperPromise);compose(injectScripts,getMonacoLoaderScript)(configureLoader)}return makeCancelable(wrapperPromise)}function injectScripts(K){return document.body.appendChild(K)}function createScript(K){var J=document.createElement("script");return K&&(J.src=K),J}function getMonacoLoaderScript(K){var J=getState(function(oe){var ce=oe.config,ue=oe.reject;return{config:ce,reject:ue}}),ne=createScript("".concat(J.config.paths.vs,"/loader.js"));return ne.onload=function(){return K()},ne.onerror=J.reject,ne}function configureLoader(){var K=getState(function(ne){var oe=ne.config,ce=ne.resolve,ue=ne.reject;return{config:oe,resolve:ce,reject:ue}}),J=window.require;J.config(K.config),J(["vs/editor/editor.main"],function(ne){var oe=ne.m||ne;storeMonacoInstance(oe),K.resolve(oe)},function(ne){K.reject(ne)})}function storeMonacoInstance(K){getState().monaco||setState({monaco:K})}function __getMonacoInstance(){return getState(function(K){var J=K.monaco;return J})}var wrapperPromise=new Promise(function(K,J){return setState({resolve:K,reject:J})}),loader$1={config,init:init$2,__getMonacoInstance},le={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},v=le,ae={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Y$1=ae;function Me({children:K}){return React.createElement("div",{style:Y$1.container},K)}var Z$2=Me,$=Z$2;function Ee({width:K,height:J,isEditorReady:ne,loading:oe,_ref:ce,className:ue,wrapperProps:Ae}){return React.createElement("section",{style:{...v.wrapper,width:K,height:J},...Ae},!ne&&React.createElement($,null,oe),React.createElement("div",{ref:ce,style:{...v.fullWidth,...!ne&&v.hide},className:ue}))}var ee=Ee,H=reactExports.memo(ee);function Ce(K){reactExports.useEffect(K,[])}var k=Ce;function he(K,J,ne=!0){let oe=reactExports.useRef(!0);reactExports.useEffect(oe.current||!ne?()=>{oe.current=!1}:K,J)}var l=he;function D$1(){}function h(K,J,ne,oe){return De(K,oe)||be(K,J,ne,oe)}function De(K,J){return K.editor.getModel(te(K,J))}function be(K,J,ne,oe){return K.editor.createModel(J,ne,oe?te(K,oe):void 0)}function te(K,J){return K.Uri.parse(J)}function Oe({original:K,modified:J,language:ne,originalLanguage:oe,modifiedLanguage:ce,originalModelPath:ue,modifiedModelPath:Ae,keepCurrentOriginalModel:pe=!1,keepCurrentModifiedModel:ve=!1,theme:me="light",loading:ge="Loading...",options:ye={},height:xe="100%",width:_e="100%",className:$e,wrapperProps:Ie={},beforeMount:Fe=D$1,onMount:ke=D$1}){let[je,We]=reactExports.useState(!1),[ze,Xe]=reactExports.useState(!0),Je=reactExports.useRef(null),nt=reactExports.useRef(null),et=reactExports.useRef(null),tt=reactExports.useRef(ke),st=reactExports.useRef(Fe),qe=reactExports.useRef(!1);k(()=>{let Ne=loader$1.init();return Ne.then(Ue=>(nt.current=Ue)&&Xe(!1)).catch(Ue=>(Ue==null?void 0:Ue.type)!=="cancelation"&&console.error("Monaco initialization: error:",Ue)),()=>Je.current?Be():Ne.cancel()}),l(()=>{if(Je.current&&nt.current){let Ne=Je.current.getOriginalEditor(),Ue=h(nt.current,K||"",oe||ne||"text",ue||"");Ue!==Ne.getModel()&&Ne.setModel(Ue)}},[ue],je),l(()=>{if(Je.current&&nt.current){let Ne=Je.current.getModifiedEditor(),Ue=h(nt.current,J||"",ce||ne||"text",Ae||"");Ue!==Ne.getModel()&&Ne.setModel(Ue)}},[Ae],je),l(()=>{let Ne=Je.current.getModifiedEditor();Ne.getOption(nt.current.editor.EditorOption.readOnly)?Ne.setValue(J||""):J!==Ne.getValue()&&(Ne.executeEdits("",[{range:Ne.getModel().getFullModelRange(),text:J||"",forceMoveMarkers:!0}]),Ne.pushUndoStop())},[J],je),l(()=>{var Ne,Ue;(Ue=(Ne=Je.current)==null?void 0:Ne.getModel())==null||Ue.original.setValue(K||"")},[K],je),l(()=>{let{original:Ne,modified:Ue}=Je.current.getModel();nt.current.editor.setModelLanguage(Ne,oe||ne||"text"),nt.current.editor.setModelLanguage(Ue,ce||ne||"text")},[ne,oe,ce],je),l(()=>{var Ne;(Ne=nt.current)==null||Ne.editor.setTheme(me)},[me],je),l(()=>{var Ne;(Ne=Je.current)==null||Ne.updateOptions(ye)},[ye],je);let Se=reactExports.useCallback(()=>{var Ge;if(!nt.current)return;st.current(nt.current);let Ne=h(nt.current,K||"",oe||ne||"text",ue||""),Ue=h(nt.current,J||"",ce||ne||"text",Ae||"");(Ge=Je.current)==null||Ge.setModel({original:Ne,modified:Ue})},[ne,J,ce,K,oe,ue,Ae]),Re=reactExports.useCallback(()=>{var Ne;!qe.current&&et.current&&(Je.current=nt.current.editor.createDiffEditor(et.current,{automaticLayout:!0,...ye}),Se(),(Ne=nt.current)==null||Ne.editor.setTheme(me),We(!0),qe.current=!0)},[ye,me,Se]);reactExports.useEffect(()=>{je&&tt.current(Je.current,nt.current)},[je]),reactExports.useEffect(()=>{!ze&&!je&&Re()},[ze,je,Re]);function Be(){var Ue,Ge,Ye,Qe;let Ne=(Ue=Je.current)==null?void 0:Ue.getModel();pe||((Ge=Ne==null?void 0:Ne.original)==null||Ge.dispose()),ve||((Ye=Ne==null?void 0:Ne.modified)==null||Ye.dispose()),(Qe=Je.current)==null||Qe.dispose()}return React.createElement(H,{width:_e,height:xe,isEditorReady:je,loading:ge,_ref:et,className:$e,wrapperProps:Ie})}var ie=Oe,we=reactExports.memo(ie);function Pe(){let[K,J]=reactExports.useState(loader$1.__getMonacoInstance());return k(()=>{let ne;return K||(ne=loader$1.init(),ne.then(oe=>{J(oe)})),()=>ne==null?void 0:ne.cancel()}),K}var Le=Pe;function He(K){let J=reactExports.useRef();return reactExports.useEffect(()=>{J.current=K},[K]),J.current}var se=He,_=new Map;function Ve({defaultValue:K,defaultLanguage:J,defaultPath:ne,value:oe,language:ce,path:ue,theme:Ae="light",line:pe,loading:ve="Loading...",options:me={},overrideServices:ge={},saveViewState:ye=!0,keepCurrentModel:xe=!1,width:_e="100%",height:$e="100%",className:Ie,wrapperProps:Fe={},beforeMount:ke=D$1,onMount:je=D$1,onChange:We,onValidate:ze=D$1}){let[Xe,Je]=reactExports.useState(!1),[nt,et]=reactExports.useState(!0),tt=reactExports.useRef(null),st=reactExports.useRef(null),qe=reactExports.useRef(null),Se=reactExports.useRef(je),Re=reactExports.useRef(ke),Be=reactExports.useRef(),Ne=reactExports.useRef(oe),Ue=se(ue),Ge=reactExports.useRef(!1),Ye=reactExports.useRef(!1);k(()=>{let Ke=loader$1.init();return Ke.then(rt=>(tt.current=rt)&&et(!1)).catch(rt=>(rt==null?void 0:rt.type)!=="cancelation"&&console.error("Monaco initialization: error:",rt)),()=>st.current?Te():Ke.cancel()}),l(()=>{var rt,it,at,lt;let Ke=h(tt.current,K||oe||"",J||ce||"",ue||ne||"");Ke!==((rt=st.current)==null?void 0:rt.getModel())&&(ye&&_.set(Ue,(it=st.current)==null?void 0:it.saveViewState()),(at=st.current)==null||at.setModel(Ke),ye&&((lt=st.current)==null||lt.restoreViewState(_.get(ue))))},[ue],Xe),l(()=>{var Ke;(Ke=st.current)==null||Ke.updateOptions(me)},[me],Xe),l(()=>{!st.current||oe===void 0||(st.current.getOption(tt.current.editor.EditorOption.readOnly)?st.current.setValue(oe):oe!==st.current.getValue()&&(Ye.current=!0,st.current.executeEdits("",[{range:st.current.getModel().getFullModelRange(),text:oe,forceMoveMarkers:!0}]),st.current.pushUndoStop(),Ye.current=!1))},[oe],Xe),l(()=>{var rt,it;let Ke=(rt=st.current)==null?void 0:rt.getModel();Ke&&ce&&((it=tt.current)==null||it.editor.setModelLanguage(Ke,ce))},[ce],Xe),l(()=>{var Ke;pe!==void 0&&((Ke=st.current)==null||Ke.revealLine(pe))},[pe],Xe),l(()=>{var Ke;(Ke=tt.current)==null||Ke.editor.setTheme(Ae)},[Ae],Xe);let Qe=reactExports.useCallback(()=>{var Ke;if(!(!qe.current||!tt.current)&&!Ge.current){Re.current(tt.current);let rt=ue||ne,it=h(tt.current,oe||K||"",J||ce||"",rt||"");st.current=(Ke=tt.current)==null?void 0:Ke.editor.create(qe.current,{model:it,automaticLayout:!0,...me},ge),ye&&st.current.restoreViewState(_.get(rt)),tt.current.editor.setTheme(Ae),pe!==void 0&&st.current.revealLine(pe),Je(!0),Ge.current=!0}},[K,J,ne,oe,ce,ue,me,ge,ye,Ae,pe]);reactExports.useEffect(()=>{Xe&&Se.current(st.current,tt.current)},[Xe]),reactExports.useEffect(()=>{!nt&&!Xe&&Qe()},[nt,Xe,Qe]),Ne.current=oe,reactExports.useEffect(()=>{var Ke,rt;Xe&&We&&((Ke=Be.current)==null||Ke.dispose(),Be.current=(rt=st.current)==null?void 0:rt.onDidChangeModelContent(it=>{Ye.current||We(st.current.getValue(),it)}))},[Xe,We]),reactExports.useEffect(()=>{if(Xe){let Ke=tt.current.editor.onDidChangeMarkers(rt=>{var at;let it=(at=st.current.getModel())==null?void 0:at.uri;if(it&&rt.find(lt=>lt.path===it.path)){let lt=tt.current.editor.getModelMarkers({resource:it});ze==null||ze(lt)}});return()=>{Ke==null||Ke.dispose()}}return()=>{}},[Xe,ze]);function Te(){var Ke,rt;(Ke=Be.current)==null||Ke.dispose(),xe?ye&&_.set(ue,st.current.saveViewState()):(rt=st.current.getModel())==null||rt.dispose(),st.current.dispose()}return React.createElement(H,{width:_e,height:$e,isEditorReady:Xe,loading:ve,_ref:qe,className:Ie,wrapperProps:Fe})}var fe=Ve,de=reactExports.memo(fe),Ft=de;const index$1=Object.freeze(Object.defineProperty({__proto__:null,DiffEditor:we,Editor:de,default:Ft,loader:loader$1,useMonaco:Le},Symbol.toStringTag,{value:"Module"}));function ok$1(){}function unreachable(){}function stringify$1(K,J){const ne={};return(K[K.length-1]===""?[...K,""]:K).join((ne.padRight?" ":"")+","+(ne.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$2={};function name$1(K,J){return(emptyOptions$2.jsx?nameReJsx:nameRe).test(K)}const re=/[ \t\n\f\r]/g;function whitespace(K){return typeof K=="object"?K.type==="text"?empty$3(K.value):!1:empty$3(K)}function empty$3(K){return K.replace(re,"")===""}class Schema{constructor(J,ne,oe){this.property=J,this.normal=ne,oe&&(this.space=oe)}}Schema.prototype.property={};Schema.prototype.normal={};Schema.prototype.space=null;function merge(K,J){const ne={},oe={};let ce=-1;for(;++ce<K.length;)Object.assign(ne,K[ce].property),Object.assign(oe,K[ce].normal);return new Schema(ne,oe,J)}function normalize$1(K){return K.toLowerCase()}class Info{constructor(J,ne){this.property=J,this.attribute=ne}}Info.prototype.space=null;Info.prototype.boolean=!1;Info.prototype.booleanish=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.number=!1;Info.prototype.commaSeparated=!1;Info.prototype.spaceSeparated=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.mustUseProperty=!1;Info.prototype.defined=!1;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types$2=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types$2);class DefinedInfo extends Info{constructor(J,ne,oe,ce){let ue=-1;if(super(J,ne),mark(this,"space",ce),typeof oe=="number")for(;++ue<checks.length;){const Ae=checks[ue];mark(this,checks[ue],(oe&types$2[Ae])===types$2[Ae])}}}DefinedInfo.prototype.defined=!0;function mark(K,J,ne){ne&&(K[J]=ne)}const own$4={}.hasOwnProperty;function create$1(K){const J={},ne={};let oe;for(oe in K.properties)if(own$4.call(K.properties,oe)){const ce=K.properties[oe],ue=new DefinedInfo(oe,K.transform(K.attributes||{},oe),ce,K.space);K.mustUseProperty&&K.mustUseProperty.includes(oe)&&(ue.mustUseProperty=!0),J[oe]=ue,ne[normalize$1(oe)]=oe,ne[normalize$1(ue.attribute)]=oe}return new Schema(J,ne,K.space)}const xlink=create$1({space:"xlink",transform(K,J){return"xlink:"+J.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),xml=create$1({space:"xml",transform(K,J){return"xml:"+J.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function caseSensitiveTransform(K,J){return J in K?K[J]:J}function caseInsensitiveTransform(K,J){return caseSensitiveTransform(K,J.toLowerCase())}const xmlns=create$1({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:caseInsensitiveTransform,properties:{xmlns:null,xmlnsXLink:null}}),aria=create$1({transform(K,J){return J==="role"?J:"aria-"+J.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null}}),html$2=create$1({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:caseInsensitiveTransform,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:boolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null}}),svg$1=create$1({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:caseSensitiveTransform,properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),valid=/^data[-\w.:]+$/i,dash=/-[a-z]/g,cap$1=/[A-Z]/g;function find$1(K,J){const ne=normalize$1(J);let oe=J,ce=Info;if(ne in K.normal)return K.property[K.normal[ne]];if(ne.length>4&&ne.slice(0,4)==="data"&&valid.test(J)){if(J.charAt(4)==="-"){const ue=J.slice(5).replace(dash,camelcase);oe="data"+ue.charAt(0).toUpperCase()+ue.slice(1)}else{const ue=J.slice(4);if(!dash.test(ue)){let Ae=ue.replace(cap$1,kebab);Ae.charAt(0)!=="-"&&(Ae="-"+Ae),J="data"+Ae}}ce=DefinedInfo}return new ce(oe,J)}function kebab(K){return"-"+K.toLowerCase()}function camelcase(K){return K.charAt(1).toUpperCase()}const hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},html$1=merge([xml,xlink,xmlns,aria,html$2],"html"),svg=merge([xml,xlink,xmlns,aria,svg$1],"svg");function stringify(K){return K.join(" ").trim()}var cjs={},COMMENT_REGEX=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,NEWLINE_REGEX=/\n/g,WHITESPACE_REGEX=/^\s*/,PROPERTY_REGEX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,COLON_REGEX=/^:\s*/,VALUE_REGEX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,SEMICOLON_REGEX=/^[;\s]*/,TRIM_REGEX=/^\s+|\s+$/g,NEWLINE=`
`,FORWARD_SLASH="/",ASTERISK$1="*",EMPTY_STRING="",TYPE_COMMENT="comment",TYPE_DECLARATION="declaration",inlineStyleParser=function(K,J){if(typeof K!="string")throw new TypeError("First argument must be a string");if(!K)return[];J=J||{};var ne=1,oe=1;function ce($e){var Ie=$e.match(NEWLINE_REGEX);Ie&&(ne+=Ie.length);var Fe=$e.lastIndexOf(NEWLINE);oe=~Fe?$e.length-Fe:oe+$e.length}function ue(){var $e={line:ne,column:oe};return function(Ie){return Ie.position=new Ae($e),me(),Ie}}function Ae($e){this.start=$e,this.end={line:ne,column:oe},this.source=J.source}Ae.prototype.content=K;function pe($e){var Ie=new Error(J.source+":"+ne+":"+oe+": "+$e);if(Ie.reason=$e,Ie.filename=J.source,Ie.line=ne,Ie.column=oe,Ie.source=K,!J.silent)throw Ie}function ve($e){var Ie=$e.exec(K);if(Ie){var Fe=Ie[0];return ce(Fe),K=K.slice(Fe.length),Ie}}function me(){ve(WHITESPACE_REGEX)}function ge($e){var Ie;for($e=$e||[];Ie=ye();)Ie!==!1&&$e.push(Ie);return $e}function ye(){var $e=ue();if(!(FORWARD_SLASH!=K.charAt(0)||ASTERISK$1!=K.charAt(1))){for(var Ie=2;EMPTY_STRING!=K.charAt(Ie)&&(ASTERISK$1!=K.charAt(Ie)||FORWARD_SLASH!=K.charAt(Ie+1));)++Ie;if(Ie+=2,EMPTY_STRING===K.charAt(Ie-1))return pe("End of comment missing");var Fe=K.slice(2,Ie-2);return oe+=2,ce(Fe),K=K.slice(Ie),oe+=2,$e({type:TYPE_COMMENT,comment:Fe})}}function xe(){var $e=ue(),Ie=ve(PROPERTY_REGEX);if(Ie){if(ye(),!ve(COLON_REGEX))return pe("property missing ':'");var Fe=ve(VALUE_REGEX),ke=$e({type:TYPE_DECLARATION,property:trim(Ie[0].replace(COMMENT_REGEX,EMPTY_STRING)),value:Fe?trim(Fe[0].replace(COMMENT_REGEX,EMPTY_STRING)):EMPTY_STRING});return ve(SEMICOLON_REGEX),ke}}function _e(){var $e=[];ge($e);for(var Ie;Ie=xe();)Ie!==!1&&($e.push(Ie),ge($e));return $e}return me(),_e()};function trim(K){return K?K.replace(TRIM_REGEX,EMPTY_STRING):EMPTY_STRING}var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(cjs,"__esModule",{value:!0});var _default$1=cjs.default=StyleToObject,inline_style_parser_1=__importDefault$1(inlineStyleParser);function StyleToObject(K,J){var ne=null;if(!K||typeof K!="string")return ne;var oe=(0,inline_style_parser_1.default)(K),ce=typeof J=="function";return oe.forEach(function(ue){if(ue.type==="declaration"){var Ae=ue.property,pe=ue.value;ce?J(Ae,pe,ue):pe&&(ne=ne||{},ne[Ae]=pe)}}),ne}const styleToObject=_default$1.default||_default$1,pointEnd=point$2("end"),pointStart=point$2("start");function point$2(K){return J;function J(ne){const oe=ne&&ne.position&&ne.position[K]||{};if(typeof oe.line=="number"&&oe.line>0&&typeof oe.column=="number"&&oe.column>0)return{line:oe.line,column:oe.column,offset:typeof oe.offset=="number"&&oe.offset>-1?oe.offset:void 0}}}function position$2(K){const J=pointStart(K),ne=pointEnd(K);if(J&&ne)return{start:J,end:ne}}function stringifyPosition(K){return!K||typeof K!="object"?"":"position"in K||"type"in K?position$1(K.position):"start"in K||"end"in K?position$1(K):"line"in K||"column"in K?point$1(K):""}function point$1(K){return index(K&&K.line)+":"+index(K&&K.column)}function position$1(K){return point$1(K&&K.start)+"-"+point$1(K&&K.end)}function index(K){return K&&typeof K=="number"?K:1}class VFileMessage extends Error{constructor(J,ne,oe){super(),typeof ne=="string"&&(oe=ne,ne=void 0);let ce="",ue={},Ae=!1;if(ne&&("line"in ne&&"column"in ne?ue={place:ne}:"start"in ne&&"end"in ne?ue={place:ne}:"type"in ne?ue={ancestors:[ne],place:ne.position}:ue={...ne}),typeof J=="string"?ce=J:!ue.cause&&J&&(Ae=!0,ce=J.message,ue.cause=J),!ue.ruleId&&!ue.source&&typeof oe=="string"){const ve=oe.indexOf(":");ve===-1?ue.ruleId=oe:(ue.source=oe.slice(0,ve),ue.ruleId=oe.slice(ve+1))}if(!ue.place&&ue.ancestors&&ue.ancestors){const ve=ue.ancestors[ue.ancestors.length-1];ve&&(ue.place=ve.position)}const pe=ue.place&&"start"in ue.place?ue.place.start:ue.place;this.ancestors=ue.ancestors||void 0,this.cause=ue.cause||void 0,this.column=pe?pe.column:void 0,this.fatal=void 0,this.file,this.message=ce,this.line=pe?pe.line:void 0,this.name=stringifyPosition(ue.place)||"1:1",this.place=ue.place||void 0,this.reason=this.message,this.ruleId=ue.ruleId||void 0,this.source=ue.source||void 0,this.stack=Ae&&ue.cause&&typeof ue.cause.stack=="string"?ue.cause.stack:"",this.actual,this.expected,this.note,this.url}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,dashSomething=/-([a-z])/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(K,J){if(!J||J.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const ne=J.filePath||void 0;let oe;if(J.development){if(typeof J.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");oe=developmentCreate(ne,J.jsxDEV)}else{if(typeof J.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof J.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");oe=productionCreate(ne,J.jsx,J.jsxs)}const ce={Fragment:J.Fragment,ancestors:[],components:J.components||{},create:oe,elementAttributeNameCase:J.elementAttributeNameCase||"react",evaluater:J.createEvaluater?J.createEvaluater():void 0,filePath:ne,ignoreInvalidStyle:J.ignoreInvalidStyle||!1,passKeys:J.passKeys!==!1,passNode:J.passNode||!1,schema:J.space==="svg"?svg:html$1,stylePropertyNameCase:J.stylePropertyNameCase||"dom",tableCellAlignToStyle:J.tableCellAlignToStyle!==!1},ue=one$2(ce,K,void 0);return ue&&typeof ue!="string"?ue:ce.create(K,ce.Fragment,{children:ue||void 0},void 0)}function one$2(K,J,ne){if(J.type==="element")return element$2(K,J,ne);if(J.type==="mdxFlowExpression"||J.type==="mdxTextExpression")return mdxExpression(K,J);if(J.type==="mdxJsxFlowElement"||J.type==="mdxJsxTextElement")return mdxJsxElement(K,J,ne);if(J.type==="mdxjsEsm")return mdxEsm(K,J);if(J.type==="root")return root$c(K,J,ne);if(J.type==="text")return text$4(K,J)}function element$2(K,J,ne){const oe=K.schema;let ce=oe;J.tagName.toLowerCase()==="svg"&&oe.space==="html"&&(ce=svg,K.schema=ce),K.ancestors.push(J);const ue=findComponentFromName(K,J.tagName,!1),Ae=createElementProps(K,J);let pe=createChildren(K,J);return tableElements.has(J.tagName)&&(pe=pe.filter(function(ve){return typeof ve=="string"?!whitespace(ve):!0})),addNode(K,Ae,ue,J),addChildren(Ae,pe),K.ancestors.pop(),K.schema=oe,K.create(J,ue,Ae,ne)}function mdxExpression(K,J){if(J.data&&J.data.estree&&K.evaluater){const oe=J.data.estree.body[0];return oe.type,K.evaluater.evaluateExpression(oe.expression)}crashEstree(K,J.position)}function mdxEsm(K,J){if(J.data&&J.data.estree&&K.evaluater)return K.evaluater.evaluateProgram(J.data.estree);crashEstree(K,J.position)}function mdxJsxElement(K,J,ne){const oe=K.schema;let ce=oe;J.name==="svg"&&oe.space==="html"&&(ce=svg,K.schema=ce),K.ancestors.push(J);const ue=J.name===null?K.Fragment:findComponentFromName(K,J.name,!0),Ae=createJsxElementProps(K,J),pe=createChildren(K,J);return addNode(K,Ae,ue,J),addChildren(Ae,pe),K.ancestors.pop(),K.schema=oe,K.create(J,ue,Ae,ne)}function root$c(K,J,ne){const oe={};return addChildren(oe,createChildren(K,J)),K.create(J,K.Fragment,oe,ne)}function text$4(K,J){return J.value}function addNode(K,J,ne,oe){typeof ne!="string"&&ne!==K.Fragment&&K.passNode&&(J.node=oe)}function addChildren(K,J){if(J.length>0){const ne=J.length>1?J:J[0];ne&&(K.children=ne)}}function productionCreate(K,J,ne){return oe;function oe(ce,ue,Ae,pe){const me=Array.isArray(Ae.children)?ne:J;return pe?me(ue,Ae,pe):me(ue,Ae)}}function developmentCreate(K,J){return ne;function ne(oe,ce,ue,Ae){const pe=Array.isArray(ue.children),ve=pointStart(oe);return J(ce,ue,Ae,pe,{columnNumber:ve?ve.column-1:void 0,fileName:K,lineNumber:ve?ve.line:void 0},void 0)}}function createElementProps(K,J){const ne={};let oe,ce;for(ce in J.properties)if(ce!=="children"&&own$3.call(J.properties,ce)){const ue=createProperty(K,ce,J.properties[ce]);if(ue){const[Ae,pe]=ue;K.tableCellAlignToStyle&&Ae==="align"&&typeof pe=="string"&&tableCellElement.has(J.tagName)?oe=pe:ne[Ae]=pe}}if(oe){const ue=ne.style||(ne.style={});ue[K.stylePropertyNameCase==="css"?"text-align":"textAlign"]=oe}return ne}function createJsxElementProps(K,J){const ne={};for(const oe of J.attributes)if(oe.type==="mdxJsxExpressionAttribute")if(oe.data&&oe.data.estree&&K.evaluater){const ue=oe.data.estree.body[0];ue.type;const Ae=ue.expression;Ae.type;const pe=Ae.properties[0];pe.type,Object.assign(ne,K.evaluater.evaluateExpression(pe.argument))}else crashEstree(K,J.position);else{const ce=oe.name;let ue;if(oe.value&&typeof oe.value=="object")if(oe.value.data&&oe.value.data.estree&&K.evaluater){const pe=oe.value.data.estree.body[0];pe.type,ue=K.evaluater.evaluateExpression(pe.expression)}else crashEstree(K,J.position);else ue=oe.value===null?!0:oe.value;ne[ce]=ue}return ne}function createChildren(K,J){const ne=[];let oe=-1;const ce=K.passKeys?new Map:emptyMap;for(;++oe<J.children.length;){const ue=J.children[oe];let Ae;if(K.passKeys){const ve=ue.type==="element"?ue.tagName:ue.type==="mdxJsxFlowElement"||ue.type==="mdxJsxTextElement"?ue.name:void 0;if(ve){const me=ce.get(ve)||0;Ae=ve+"-"+me,ce.set(ve,me+1)}}const pe=one$2(K,ue,Ae);pe!==void 0&&ne.push(pe)}return ne}function createProperty(K,J,ne){const oe=find$1(K.schema,J);if(!(ne==null||typeof ne=="number"&&Number.isNaN(ne))){if(Array.isArray(ne)&&(ne=oe.commaSeparated?stringify$1(ne):stringify(ne)),oe.property==="style"){let ce=typeof ne=="object"?ne:parseStyle(K,String(ne));return K.stylePropertyNameCase==="css"&&(ce=transformStylesToCssCasing(ce)),["style",ce]}return[K.elementAttributeNameCase==="react"&&oe.space?hastToReact[oe.property]||oe.property:oe.attribute,ne]}}function parseStyle(K,J){const ne={};try{styleToObject(J,oe)}catch(ce){if(!K.ignoreInvalidStyle){const ue=ce,Ae=new VFileMessage("Cannot parse `style` attribute",{ancestors:K.ancestors,cause:ue,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw Ae.file=K.filePath||void 0,Ae.url=docs+"#cannot-parse-style-attribute",Ae}}return ne;function oe(ce,ue){let Ae=ce;Ae.slice(0,2)!=="--"&&(Ae.slice(0,4)==="-ms-"&&(Ae="ms-"+Ae.slice(4)),Ae=Ae.replace(dashSomething,toCamel)),ne[Ae]=ue}}function findComponentFromName(K,J,ne){let oe;if(!ne)oe={type:"Literal",value:J};else if(J.includes(".")){const ce=J.split(".");let ue=-1,Ae;for(;++ue<ce.length;){const pe=name$1(ce[ue])?{type:"Identifier",name:ce[ue]}:{type:"Literal",value:ce[ue]};Ae=Ae?{type:"MemberExpression",object:Ae,property:pe,computed:!!(ue&&pe.type==="Literal"),optional:!1}:pe}oe=Ae}else oe=name$1(J)&&!/^[a-z]/.test(J)?{type:"Identifier",name:J}:{type:"Literal",value:J};if(oe.type==="Literal"){const ce=oe.value;return own$3.call(K.components,ce)?K.components[ce]:ce}if(K.evaluater)return K.evaluater.evaluateExpression(oe);crashEstree(K)}function crashEstree(K,J){const ne=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:K.ancestors,place:J,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw ne.file=K.filePath||void 0,ne.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",ne}function transformStylesToCssCasing(K){const J={};let ne;for(ne in K)own$3.call(K,ne)&&(J[transformStyleToCssCasing(ne)]=K[ne]);return J}function transformStyleToCssCasing(K){let J=K.replace(cap,toDash);return J.slice(0,3)==="ms-"&&(J="-"+J),J}function toCamel(K,J){return J.toUpperCase()}function toDash(K){return"-"+K.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$1={};function toString$1(K,J){const ne=emptyOptions$1,oe=typeof ne.includeImageAlt=="boolean"?ne.includeImageAlt:!0,ce=typeof ne.includeHtml=="boolean"?ne.includeHtml:!0;return one$1(K,oe,ce)}function one$1(K,J,ne){if(node$1(K)){if("value"in K)return K.type==="html"&&!ne?"":K.value;if(J&&"alt"in K&&K.alt)return K.alt;if("children"in K)return all(K.children,J,ne)}return Array.isArray(K)?all(K,J,ne):""}function all(K,J,ne){const oe=[];let ce=-1;for(;++ce<K.length;)oe[ce]=one$1(K[ce],J,ne);return oe.join("")}function node$1(K){return!!(K&&typeof K=="object")}const element$1=document.createElement("i");function decodeNamedCharacterReference(K){const J="&"+K+";";element$1.innerHTML=J;const ne=element$1.textContent;return ne.charCodeAt(ne.length-1)===59&&K!=="semi"||ne===J?!1:ne}function splice$1(K,J,ne,oe){const ce=K.length;let ue=0,Ae;if(J<0?J=-J>ce?0:ce+J:J=J>ce?ce:J,ne=ne>0?ne:0,oe.length<1e4)Ae=Array.from(oe),Ae.unshift(J,ne),K.splice(...Ae);else for(ne&&K.splice(J,ne);ue<oe.length;)Ae=oe.slice(ue,ue+1e4),Ae.unshift(J,0),K.splice(...Ae),ue+=1e4,J+=1e4}function push(K,J){return K.length>0?(splice$1(K,K.length,0,J),K):J}const hasOwnProperty$9={}.hasOwnProperty;function combineExtensions(K){const J={};let ne=-1;for(;++ne<K.length;)syntaxExtension(J,K[ne]);return J}function syntaxExtension(K,J){let ne;for(ne in J){const ce=(hasOwnProperty$9.call(K,ne)?K[ne]:void 0)||(K[ne]={}),ue=J[ne];let Ae;if(ue)for(Ae in ue){hasOwnProperty$9.call(ce,Ae)||(ce[Ae]=[]);const pe=ue[Ae];constructs(ce[Ae],Array.isArray(pe)?pe:pe?[pe]:[])}}}function constructs(K,J){let ne=-1;const oe=[];for(;++ne<J.length;)(J[ne].add==="after"?K:oe).push(J[ne]);splice$1(K,0,0,oe)}function decodeNumericCharacterReference(K,J){const ne=Number.parseInt(K,J);return ne<9||ne===11||ne>13&&ne<32||ne>126&&ne<160||ne>55295&&ne<57344||ne>64975&&ne<65008||(ne&65535)===65535||(ne&65535)===65534||ne>1114111?"":String.fromCodePoint(ne)}function normalizeIdentifier(K){return K.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(K){return K!==null&&(K<32||K===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(K){return K!==null&&K<-2}function markdownLineEndingOrSpace(K){return K!==null&&(K<0||K===32)}function markdownSpace(K){return K===-2||K===-1||K===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(K){return J;function J(ne){return ne!==null&&ne>-1&&K.test(String.fromCharCode(ne))}}function normalizeUri(K){const J=[];let ne=-1,oe=0,ce=0;for(;++ne<K.length;){const ue=K.charCodeAt(ne);let Ae="";if(ue===37&&asciiAlphanumeric(K.charCodeAt(ne+1))&&asciiAlphanumeric(K.charCodeAt(ne+2)))ce=2;else if(ue<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(ue))||(Ae=String.fromCharCode(ue));else if(ue>55295&&ue<57344){const pe=K.charCodeAt(ne+1);ue<56320&&pe>56319&&pe<57344?(Ae=String.fromCharCode(ue,pe),ce=1):Ae=""}else Ae=String.fromCharCode(ue);Ae&&(J.push(K.slice(oe,ne),encodeURIComponent(Ae)),oe=ne+ce+1,Ae=""),ce&&(ne+=ce,ce=0)}return J.join("")+K.slice(oe)}function factorySpace(K,J,ne,oe){const ce=oe?oe-1:Number.POSITIVE_INFINITY;let ue=0;return Ae;function Ae(ve){return markdownSpace(ve)?(K.enter(ne),pe(ve)):J(ve)}function pe(ve){return markdownSpace(ve)&&ue++<ce?(K.consume(ve),pe):(K.exit(ne),J(ve))}}const content$c={tokenize:initializeContent};function initializeContent(K){const J=K.attempt(this.parser.constructs.contentInitial,oe,ce);let ne;return J;function oe(pe){if(pe===null){K.consume(pe);return}return K.enter("lineEnding"),K.consume(pe),K.exit("lineEnding"),factorySpace(K,J,"linePrefix")}function ce(pe){return K.enter("paragraph"),ue(pe)}function ue(pe){const ve=K.enter("chunkText",{contentType:"text",previous:ne});return ne&&(ne.next=ve),ne=ve,Ae(pe)}function Ae(pe){if(pe===null){K.exit("chunkText"),K.exit("paragraph"),K.consume(pe);return}return markdownLineEnding(pe)?(K.consume(pe),K.exit("chunkText"),ue):(K.consume(pe),Ae)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(K){const J=this,ne=[];let oe=0,ce,ue,Ae;return pe;function pe(We){if(oe<ne.length){const ze=ne[oe];return J.containerState=ze[1],K.attempt(ze[0].continuation,ve,me)(We)}return me(We)}function ve(We){if(oe++,J.containerState._closeFlow){J.containerState._closeFlow=void 0,ce&&je();const ze=J.events.length;let Xe=ze,Je;for(;Xe--;)if(J.events[Xe][0]==="exit"&&J.events[Xe][1].type==="chunkFlow"){Je=J.events[Xe][1].end;break}ke(oe);let nt=ze;for(;nt<J.events.length;)J.events[nt][1].end=Object.assign({},Je),nt++;return splice$1(J.events,Xe+1,0,J.events.slice(ze)),J.events.length=nt,me(We)}return pe(We)}function me(We){if(oe===ne.length){if(!ce)return xe(We);if(ce.currentConstruct&&ce.currentConstruct.concrete)return $e(We);J.interrupt=!!(ce.currentConstruct&&!ce._gfmTableDynamicInterruptHack)}return J.containerState={},K.check(containerConstruct,ge,ye)(We)}function ge(We){return ce&&je(),ke(oe),xe(We)}function ye(We){return J.parser.lazy[J.now().line]=oe!==ne.length,Ae=J.now().offset,$e(We)}function xe(We){return J.containerState={},K.attempt(containerConstruct,_e,$e)(We)}function _e(We){return oe++,ne.push([J.currentConstruct,J.containerState]),xe(We)}function $e(We){if(We===null){ce&&je(),ke(0),K.consume(We);return}return ce=ce||J.parser.flow(J.now()),K.enter("chunkFlow",{contentType:"flow",previous:ue,_tokenizer:ce}),Ie(We)}function Ie(We){if(We===null){Fe(K.exit("chunkFlow"),!0),ke(0),K.consume(We);return}return markdownLineEnding(We)?(K.consume(We),Fe(K.exit("chunkFlow")),oe=0,J.interrupt=void 0,pe):(K.consume(We),Ie)}function Fe(We,ze){const Xe=J.sliceStream(We);if(ze&&Xe.push(null),We.previous=ue,ue&&(ue.next=We),ue=We,ce.defineSkip(We.start),ce.write(Xe),J.parser.lazy[We.start.line]){let Je=ce.events.length;for(;Je--;)if(ce.events[Je][1].start.offset<Ae&&(!ce.events[Je][1].end||ce.events[Je][1].end.offset>Ae))return;const nt=J.events.length;let et=nt,tt,st;for(;et--;)if(J.events[et][0]==="exit"&&J.events[et][1].type==="chunkFlow"){if(tt){st=J.events[et][1].end;break}tt=!0}for(ke(oe),Je=nt;Je<J.events.length;)J.events[Je][1].end=Object.assign({},st),Je++;splice$1(J.events,et+1,0,J.events.slice(nt)),J.events.length=Je}}function ke(We){let ze=ne.length;for(;ze-- >We;){const Xe=ne[ze];J.containerState=Xe[1],Xe[0].exit.call(J,K)}ne.length=We}function je(){ce.write([null]),ue=void 0,ce=void 0,J.containerState._closeFlow=void 0}}function tokenizeContainer(K,J,ne){return factorySpace(K,K.attempt(this.parser.constructs.document,J,ne),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(K){if(K===null||markdownLineEndingOrSpace(K)||unicodeWhitespace(K))return 1;if(unicodePunctuation(K))return 2}function resolveAll(K,J,ne){const oe=[];let ce=-1;for(;++ce<K.length;){const ue=K[ce].resolveAll;ue&&!oe.includes(ue)&&(J=ue(J,ne),oe.push(ue))}return J}const attention={name:"attention",tokenize:tokenizeAttention,resolveAll:resolveAllAttention};function resolveAllAttention(K,J){let ne=-1,oe,ce,ue,Ae,pe,ve,me,ge;for(;++ne<K.length;)if(K[ne][0]==="enter"&&K[ne][1].type==="attentionSequence"&&K[ne][1]._close){for(oe=ne;oe--;)if(K[oe][0]==="exit"&&K[oe][1].type==="attentionSequence"&&K[oe][1]._open&&J.sliceSerialize(K[oe][1]).charCodeAt(0)===J.sliceSerialize(K[ne][1]).charCodeAt(0)){if((K[oe][1]._close||K[ne][1]._open)&&(K[ne][1].end.offset-K[ne][1].start.offset)%3&&!((K[oe][1].end.offset-K[oe][1].start.offset+K[ne][1].end.offset-K[ne][1].start.offset)%3))continue;ve=K[oe][1].end.offset-K[oe][1].start.offset>1&&K[ne][1].end.offset-K[ne][1].start.offset>1?2:1;const ye=Object.assign({},K[oe][1].end),xe=Object.assign({},K[ne][1].start);movePoint(ye,-ve),movePoint(xe,ve),Ae={type:ve>1?"strongSequence":"emphasisSequence",start:ye,end:Object.assign({},K[oe][1].end)},pe={type:ve>1?"strongSequence":"emphasisSequence",start:Object.assign({},K[ne][1].start),end:xe},ue={type:ve>1?"strongText":"emphasisText",start:Object.assign({},K[oe][1].end),end:Object.assign({},K[ne][1].start)},ce={type:ve>1?"strong":"emphasis",start:Object.assign({},Ae.start),end:Object.assign({},pe.end)},K[oe][1].end=Object.assign({},Ae.start),K[ne][1].start=Object.assign({},pe.end),me=[],K[oe][1].end.offset-K[oe][1].start.offset&&(me=push(me,[["enter",K[oe][1],J],["exit",K[oe][1],J]])),me=push(me,[["enter",ce,J],["enter",Ae,J],["exit",Ae,J],["enter",ue,J]]),me=push(me,resolveAll(J.parser.constructs.insideSpan.null,K.slice(oe+1,ne),J)),me=push(me,[["exit",ue,J],["enter",pe,J],["exit",pe,J],["exit",ce,J]]),K[ne][1].end.offset-K[ne][1].start.offset?(ge=2,me=push(me,[["enter",K[ne][1],J],["exit",K[ne][1],J]])):ge=0,splice$1(K,oe-1,ne-oe+3,me),ne=oe+me.length-ge-2;break}}for(ne=-1;++ne<K.length;)K[ne][1].type==="attentionSequence"&&(K[ne][1].type="data");return K}function tokenizeAttention(K,J){const ne=this.parser.constructs.attentionMarkers.null,oe=this.previous,ce=classifyCharacter(oe);let ue;return Ae;function Ae(ve){return ue=ve,K.enter("attentionSequence"),pe(ve)}function pe(ve){if(ve===ue)return K.consume(ve),pe;const me=K.exit("attentionSequence"),ge=classifyCharacter(ve),ye=!ge||ge===2&&ce||ne.includes(ve),xe=!ce||ce===2&&ge||ne.includes(oe);return me._open=!!(ue===42?ye:ye&&(ce||!xe)),me._close=!!(ue===42?xe:xe&&(ge||!ye)),J(ve)}}function movePoint(K,J){K.column+=J,K.offset+=J,K._bufferIndex+=J}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(K,J,ne){let oe=0;return ce;function ce(_e){return K.enter("autolink"),K.enter("autolinkMarker"),K.consume(_e),K.exit("autolinkMarker"),K.enter("autolinkProtocol"),ue}function ue(_e){return asciiAlpha(_e)?(K.consume(_e),Ae):_e===64?ne(_e):me(_e)}function Ae(_e){return _e===43||_e===45||_e===46||asciiAlphanumeric(_e)?(oe=1,pe(_e)):me(_e)}function pe(_e){return _e===58?(K.consume(_e),oe=0,ve):(_e===43||_e===45||_e===46||asciiAlphanumeric(_e))&&oe++<32?(K.consume(_e),pe):(oe=0,me(_e))}function ve(_e){return _e===62?(K.exit("autolinkProtocol"),K.enter("autolinkMarker"),K.consume(_e),K.exit("autolinkMarker"),K.exit("autolink"),J):_e===null||_e===32||_e===60||asciiControl(_e)?ne(_e):(K.consume(_e),ve)}function me(_e){return _e===64?(K.consume(_e),ge):asciiAtext(_e)?(K.consume(_e),me):ne(_e)}function ge(_e){return asciiAlphanumeric(_e)?ye(_e):ne(_e)}function ye(_e){return _e===46?(K.consume(_e),oe=0,ge):_e===62?(K.exit("autolinkProtocol").type="autolinkEmail",K.enter("autolinkMarker"),K.consume(_e),K.exit("autolinkMarker"),K.exit("autolink"),J):xe(_e)}function xe(_e){if((_e===45||asciiAlphanumeric(_e))&&oe++<63){const $e=_e===45?xe:ye;return K.consume(_e),$e}return ne(_e)}}const blankLine={tokenize:tokenizeBlankLine,partial:!0};function tokenizeBlankLine(K,J,ne){return oe;function oe(ue){return markdownSpace(ue)?factorySpace(K,ce,"linePrefix")(ue):ce(ue)}function ce(ue){return ue===null||markdownLineEnding(ue)?J(ue):ne(ue)}}const blockQuote={name:"blockQuote",tokenize:tokenizeBlockQuoteStart,continuation:{tokenize:tokenizeBlockQuoteContinuation},exit};function tokenizeBlockQuoteStart(K,J,ne){const oe=this;return ce;function ce(Ae){if(Ae===62){const pe=oe.containerState;return pe.open||(K.enter("blockQuote",{_container:!0}),pe.open=!0),K.enter("blockQuotePrefix"),K.enter("blockQuoteMarker"),K.consume(Ae),K.exit("blockQuoteMarker"),ue}return ne(Ae)}function ue(Ae){return markdownSpace(Ae)?(K.enter("blockQuotePrefixWhitespace"),K.consume(Ae),K.exit("blockQuotePrefixWhitespace"),K.exit("blockQuotePrefix"),J):(K.exit("blockQuotePrefix"),J(Ae))}}function tokenizeBlockQuoteContinuation(K,J,ne){const oe=this;return ce;function ce(Ae){return markdownSpace(Ae)?factorySpace(K,ue,"linePrefix",oe.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ae):ue(Ae)}function ue(Ae){return K.attempt(blockQuote,J,ne)(Ae)}}function exit(K){K.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(K,J,ne){return oe;function oe(ue){return K.enter("characterEscape"),K.enter("escapeMarker"),K.consume(ue),K.exit("escapeMarker"),ce}function ce(ue){return asciiPunctuation(ue)?(K.enter("characterEscapeValue"),K.consume(ue),K.exit("characterEscapeValue"),K.exit("characterEscape"),J):ne(ue)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(K,J,ne){const oe=this;let ce=0,ue,Ae;return pe;function pe(ye){return K.enter("characterReference"),K.enter("characterReferenceMarker"),K.consume(ye),K.exit("characterReferenceMarker"),ve}function ve(ye){return ye===35?(K.enter("characterReferenceMarkerNumeric"),K.consume(ye),K.exit("characterReferenceMarkerNumeric"),me):(K.enter("characterReferenceValue"),ue=31,Ae=asciiAlphanumeric,ge(ye))}function me(ye){return ye===88||ye===120?(K.enter("characterReferenceMarkerHexadecimal"),K.consume(ye),K.exit("characterReferenceMarkerHexadecimal"),K.enter("characterReferenceValue"),ue=6,Ae=asciiHexDigit,ge):(K.enter("characterReferenceValue"),ue=7,Ae=asciiDigit,ge(ye))}function ge(ye){if(ye===59&&ce){const xe=K.exit("characterReferenceValue");return Ae===asciiAlphanumeric&&!decodeNamedCharacterReference(oe.sliceSerialize(xe))?ne(ye):(K.enter("characterReferenceMarker"),K.consume(ye),K.exit("characterReferenceMarker"),K.exit("characterReference"),J)}return Ae(ye)&&ce++<ue?(K.consume(ye),ge):ne(ye)}}const nonLazyContinuation={tokenize:tokenizeNonLazyContinuation,partial:!0},codeFenced={name:"codeFenced",tokenize:tokenizeCodeFenced,concrete:!0};function tokenizeCodeFenced(K,J,ne){const oe=this,ce={tokenize:Xe,partial:!0};let ue=0,Ae=0,pe;return ve;function ve(Je){return me(Je)}function me(Je){const nt=oe.events[oe.events.length-1];return ue=nt&&nt[1].type==="linePrefix"?nt[2].sliceSerialize(nt[1],!0).length:0,pe=Je,K.enter("codeFenced"),K.enter("codeFencedFence"),K.enter("codeFencedFenceSequence"),ge(Je)}function ge(Je){return Je===pe?(Ae++,K.consume(Je),ge):Ae<3?ne(Je):(K.exit("codeFencedFenceSequence"),markdownSpace(Je)?factorySpace(K,ye,"whitespace")(Je):ye(Je))}function ye(Je){return Je===null||markdownLineEnding(Je)?(K.exit("codeFencedFence"),oe.interrupt?J(Je):K.check(nonLazyContinuation,Ie,ze)(Je)):(K.enter("codeFencedFenceInfo"),K.enter("chunkString",{contentType:"string"}),xe(Je))}function xe(Je){return Je===null||markdownLineEnding(Je)?(K.exit("chunkString"),K.exit("codeFencedFenceInfo"),ye(Je)):markdownSpace(Je)?(K.exit("chunkString"),K.exit("codeFencedFenceInfo"),factorySpace(K,_e,"whitespace")(Je)):Je===96&&Je===pe?ne(Je):(K.consume(Je),xe)}function _e(Je){return Je===null||markdownLineEnding(Je)?ye(Je):(K.enter("codeFencedFenceMeta"),K.enter("chunkString",{contentType:"string"}),$e(Je))}function $e(Je){return Je===null||markdownLineEnding(Je)?(K.exit("chunkString"),K.exit("codeFencedFenceMeta"),ye(Je)):Je===96&&Je===pe?ne(Je):(K.consume(Je),$e)}function Ie(Je){return K.attempt(ce,ze,Fe)(Je)}function Fe(Je){return K.enter("lineEnding"),K.consume(Je),K.exit("lineEnding"),ke}function ke(Je){return ue>0&&markdownSpace(Je)?factorySpace(K,je,"linePrefix",ue+1)(Je):je(Je)}function je(Je){return Je===null||markdownLineEnding(Je)?K.check(nonLazyContinuation,Ie,ze)(Je):(K.enter("codeFlowValue"),We(Je))}function We(Je){return Je===null||markdownLineEnding(Je)?(K.exit("codeFlowValue"),je(Je)):(K.consume(Je),We)}function ze(Je){return K.exit("codeFenced"),J(Je)}function Xe(Je,nt,et){let tt=0;return st;function st(Ne){return Je.enter("lineEnding"),Je.consume(Ne),Je.exit("lineEnding"),qe}function qe(Ne){return Je.enter("codeFencedFence"),markdownSpace(Ne)?factorySpace(Je,Se,"linePrefix",oe.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ne):Se(Ne)}function Se(Ne){return Ne===pe?(Je.enter("codeFencedFenceSequence"),Re(Ne)):et(Ne)}function Re(Ne){return Ne===pe?(tt++,Je.consume(Ne),Re):tt>=Ae?(Je.exit("codeFencedFenceSequence"),markdownSpace(Ne)?factorySpace(Je,Be,"whitespace")(Ne):Be(Ne)):et(Ne)}function Be(Ne){return Ne===null||markdownLineEnding(Ne)?(Je.exit("codeFencedFence"),nt(Ne)):et(Ne)}}}function tokenizeNonLazyContinuation(K,J,ne){const oe=this;return ce;function ce(Ae){return Ae===null?ne(Ae):(K.enter("lineEnding"),K.consume(Ae),K.exit("lineEnding"),ue)}function ue(Ae){return oe.parser.lazy[oe.now().line]?ne(Ae):J(Ae)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={tokenize:tokenizeFurtherStart,partial:!0};function tokenizeCodeIndented(K,J,ne){const oe=this;return ce;function ce(me){return K.enter("codeIndented"),factorySpace(K,ue,"linePrefix",5)(me)}function ue(me){const ge=oe.events[oe.events.length-1];return ge&&ge[1].type==="linePrefix"&&ge[2].sliceSerialize(ge[1],!0).length>=4?Ae(me):ne(me)}function Ae(me){return me===null?ve(me):markdownLineEnding(me)?K.attempt(furtherStart,Ae,ve)(me):(K.enter("codeFlowValue"),pe(me))}function pe(me){return me===null||markdownLineEnding(me)?(K.exit("codeFlowValue"),Ae(me)):(K.consume(me),pe)}function ve(me){return K.exit("codeIndented"),J(me)}}function tokenizeFurtherStart(K,J,ne){const oe=this;return ce;function ce(Ae){return oe.parser.lazy[oe.now().line]?ne(Ae):markdownLineEnding(Ae)?(K.enter("lineEnding"),K.consume(Ae),K.exit("lineEnding"),ce):factorySpace(K,ue,"linePrefix",5)(Ae)}function ue(Ae){const pe=oe.events[oe.events.length-1];return pe&&pe[1].type==="linePrefix"&&pe[2].sliceSerialize(pe[1],!0).length>=4?J(Ae):markdownLineEnding(Ae)?ce(Ae):ne(Ae)}}const codeText={name:"codeText",tokenize:tokenizeCodeText,resolve:resolveCodeText,previous};function resolveCodeText(K){let J=K.length-4,ne=3,oe,ce;if((K[ne][1].type==="lineEnding"||K[ne][1].type==="space")&&(K[J][1].type==="lineEnding"||K[J][1].type==="space")){for(oe=ne;++oe<J;)if(K[oe][1].type==="codeTextData"){K[ne][1].type="codeTextPadding",K[J][1].type="codeTextPadding",ne+=2,J-=2;break}}for(oe=ne-1,J++;++oe<=J;)ce===void 0?oe!==J&&K[oe][1].type!=="lineEnding"&&(ce=oe):(oe===J||K[oe][1].type==="lineEnding")&&(K[ce][1].type="codeTextData",oe!==ce+2&&(K[ce][1].end=K[oe-1][1].end,K.splice(ce+2,oe-ce-2),J-=oe-ce-2,oe=ce+2),ce=void 0);return K}function previous(K){return K!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(K,J,ne){let oe=0,ce,ue;return Ae;function Ae(ye){return K.enter("codeText"),K.enter("codeTextSequence"),pe(ye)}function pe(ye){return ye===96?(K.consume(ye),oe++,pe):(K.exit("codeTextSequence"),ve(ye))}function ve(ye){return ye===null?ne(ye):ye===32?(K.enter("space"),K.consume(ye),K.exit("space"),ve):ye===96?(ue=K.enter("codeTextSequence"),ce=0,ge(ye)):markdownLineEnding(ye)?(K.enter("lineEnding"),K.consume(ye),K.exit("lineEnding"),ve):(K.enter("codeTextData"),me(ye))}function me(ye){return ye===null||ye===32||ye===96||markdownLineEnding(ye)?(K.exit("codeTextData"),ve(ye)):(K.consume(ye),me)}function ge(ye){return ye===96?(K.consume(ye),ce++,ge):ce===oe?(K.exit("codeTextSequence"),K.exit("codeText"),J(ye)):(ue.type="codeTextData",me(ye))}}class SpliceBuffer{constructor(J){this.left=J?[...J]:[],this.right=[]}get(J){if(J<0||J>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+J+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return J<this.left.length?this.left[J]:this.right[this.right.length-J+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(J,ne){const oe=ne??Number.POSITIVE_INFINITY;return oe<this.left.length?this.left.slice(J,oe):J>this.left.length?this.right.slice(this.right.length-oe+this.left.length,this.right.length-J+this.left.length).reverse():this.left.slice(J).concat(this.right.slice(this.right.length-oe+this.left.length).reverse())}splice(J,ne,oe){const ce=ne||0;this.setCursor(Math.trunc(J));const ue=this.right.splice(this.right.length-ce,Number.POSITIVE_INFINITY);return oe&&chunkedPush(this.left,oe),ue.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(J){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(J)}pushMany(J){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,J)}unshift(J){this.setCursor(0),this.right.push(J)}unshiftMany(J){this.setCursor(0),chunkedPush(this.right,J.reverse())}setCursor(J){if(!(J===this.left.length||J>this.left.length&&this.right.length===0||J<0&&this.left.length===0))if(J<this.left.length){const ne=this.left.splice(J,Number.POSITIVE_INFINITY);chunkedPush(this.right,ne.reverse())}else{const ne=this.right.splice(this.left.length+this.right.length-J,Number.POSITIVE_INFINITY);chunkedPush(this.left,ne.reverse())}}}function chunkedPush(K,J){let ne=0;if(J.length<1e4)K.push(...J);else for(;ne<J.length;)K.push(...J.slice(ne,ne+1e4)),ne+=1e4}function subtokenize(K){const J={};let ne=-1,oe,ce,ue,Ae,pe,ve,me;const ge=new SpliceBuffer(K);for(;++ne<ge.length;){for(;ne in J;)ne=J[ne];if(oe=ge.get(ne),ne&&oe[1].type==="chunkFlow"&&ge.get(ne-1)[1].type==="listItemPrefix"&&(ve=oe[1]._tokenizer.events,ue=0,ue<ve.length&&ve[ue][1].type==="lineEndingBlank"&&(ue+=2),ue<ve.length&&ve[ue][1].type==="content"))for(;++ue<ve.length&&ve[ue][1].type!=="content";)ve[ue][1].type==="chunkText"&&(ve[ue][1]._isInFirstContentOfListItem=!0,ue++);if(oe[0]==="enter")oe[1].contentType&&(Object.assign(J,subcontent(ge,ne)),ne=J[ne],me=!0);else if(oe[1]._container){for(ue=ne,ce=void 0;ue--&&(Ae=ge.get(ue),Ae[1].type==="lineEnding"||Ae[1].type==="lineEndingBlank");)Ae[0]==="enter"&&(ce&&(ge.get(ce)[1].type="lineEndingBlank"),Ae[1].type="lineEnding",ce=ue);ce&&(oe[1].end=Object.assign({},ge.get(ce)[1].start),pe=ge.slice(ce,ne),pe.unshift(oe),ge.splice(ce,ne-ce+1,pe))}}return splice$1(K,0,Number.POSITIVE_INFINITY,ge.slice(0)),!me}function subcontent(K,J){const ne=K.get(J)[1],oe=K.get(J)[2];let ce=J-1;const ue=[],Ae=ne._tokenizer||oe.parser[ne.contentType](ne.start),pe=Ae.events,ve=[],me={};let ge,ye,xe=-1,_e=ne,$e=0,Ie=0;const Fe=[Ie];for(;_e;){for(;K.get(++ce)[1]!==_e;);ue.push(ce),_e._tokenizer||(ge=oe.sliceStream(_e),_e.next||ge.push(null),ye&&Ae.defineSkip(_e.start),_e._isInFirstContentOfListItem&&(Ae._gfmTasklistFirstContentOfListItem=!0),Ae.write(ge),_e._isInFirstContentOfListItem&&(Ae._gfmTasklistFirstContentOfListItem=void 0)),ye=_e,_e=_e.next}for(_e=ne;++xe<pe.length;)pe[xe][0]==="exit"&&pe[xe-1][0]==="enter"&&pe[xe][1].type===pe[xe-1][1].type&&pe[xe][1].start.line!==pe[xe][1].end.line&&(Ie=xe+1,Fe.push(Ie),_e._tokenizer=void 0,_e.previous=void 0,_e=_e.next);for(Ae.events=[],_e?(_e._tokenizer=void 0,_e.previous=void 0):Fe.pop(),xe=Fe.length;xe--;){const ke=pe.slice(Fe[xe],Fe[xe+1]),je=ue.pop();ve.push([je,je+ke.length-1]),K.splice(je,2,ke)}for(ve.reverse(),xe=-1;++xe<ve.length;)me[$e+ve[xe][0]]=$e+ve[xe][1],$e+=ve[xe][1]-ve[xe][0]-1;return me}const content$b={tokenize:tokenizeContent,resolve:resolveContent},continuationConstruct={tokenize:tokenizeContinuation,partial:!0};function resolveContent(K){return subtokenize(K),K}function tokenizeContent(K,J){let ne;return oe;function oe(pe){return K.enter("content"),ne=K.enter("chunkContent",{contentType:"content"}),ce(pe)}function ce(pe){return pe===null?ue(pe):markdownLineEnding(pe)?K.check(continuationConstruct,Ae,ue)(pe):(K.consume(pe),ce)}function ue(pe){return K.exit("chunkContent"),K.exit("content"),J(pe)}function Ae(pe){return K.consume(pe),K.exit("chunkContent"),ne.next=K.enter("chunkContent",{contentType:"content",previous:ne}),ne=ne.next,ce}}function tokenizeContinuation(K,J,ne){const oe=this;return ce;function ce(Ae){return K.exit("chunkContent"),K.enter("lineEnding"),K.consume(Ae),K.exit("lineEnding"),factorySpace(K,ue,"linePrefix")}function ue(Ae){if(Ae===null||markdownLineEnding(Ae))return ne(Ae);const pe=oe.events[oe.events.length-1];return!oe.parser.constructs.disable.null.includes("codeIndented")&&pe&&pe[1].type==="linePrefix"&&pe[2].sliceSerialize(pe[1],!0).length>=4?J(Ae):K.interrupt(oe.parser.constructs.flow,ne,J)(Ae)}}function factoryDestination(K,J,ne,oe,ce,ue,Ae,pe,ve){const me=ve||Number.POSITIVE_INFINITY;let ge=0;return ye;function ye(ke){return ke===60?(K.enter(oe),K.enter(ce),K.enter(ue),K.consume(ke),K.exit(ue),xe):ke===null||ke===32||ke===41||asciiControl(ke)?ne(ke):(K.enter(oe),K.enter(Ae),K.enter(pe),K.enter("chunkString",{contentType:"string"}),Ie(ke))}function xe(ke){return ke===62?(K.enter(ue),K.consume(ke),K.exit(ue),K.exit(ce),K.exit(oe),J):(K.enter(pe),K.enter("chunkString",{contentType:"string"}),_e(ke))}function _e(ke){return ke===62?(K.exit("chunkString"),K.exit(pe),xe(ke)):ke===null||ke===60||markdownLineEnding(ke)?ne(ke):(K.consume(ke),ke===92?$e:_e)}function $e(ke){return ke===60||ke===62||ke===92?(K.consume(ke),_e):_e(ke)}function Ie(ke){return!ge&&(ke===null||ke===41||markdownLineEndingOrSpace(ke))?(K.exit("chunkString"),K.exit(pe),K.exit(Ae),K.exit(oe),J(ke)):ge<me&&ke===40?(K.consume(ke),ge++,Ie):ke===41?(K.consume(ke),ge--,Ie):ke===null||ke===32||ke===40||asciiControl(ke)?ne(ke):(K.consume(ke),ke===92?Fe:Ie)}function Fe(ke){return ke===40||ke===41||ke===92?(K.consume(ke),Ie):Ie(ke)}}function factoryLabel(K,J,ne,oe,ce,ue){const Ae=this;let pe=0,ve;return me;function me(_e){return K.enter(oe),K.enter(ce),K.consume(_e),K.exit(ce),K.enter(ue),ge}function ge(_e){return pe>999||_e===null||_e===91||_e===93&&!ve||_e===94&&!pe&&"_hiddenFootnoteSupport"in Ae.parser.constructs?ne(_e):_e===93?(K.exit(ue),K.enter(ce),K.consume(_e),K.exit(ce),K.exit(oe),J):markdownLineEnding(_e)?(K.enter("lineEnding"),K.consume(_e),K.exit("lineEnding"),ge):(K.enter("chunkString",{contentType:"string"}),ye(_e))}function ye(_e){return _e===null||_e===91||_e===93||markdownLineEnding(_e)||pe++>999?(K.exit("chunkString"),ge(_e)):(K.consume(_e),ve||(ve=!markdownSpace(_e)),_e===92?xe:ye)}function xe(_e){return _e===91||_e===92||_e===93?(K.consume(_e),pe++,ye):ye(_e)}}function factoryTitle(K,J,ne,oe,ce,ue){let Ae;return pe;function pe(xe){return xe===34||xe===39||xe===40?(K.enter(oe),K.enter(ce),K.consume(xe),K.exit(ce),Ae=xe===40?41:xe,ve):ne(xe)}function ve(xe){return xe===Ae?(K.enter(ce),K.consume(xe),K.exit(ce),K.exit(oe),J):(K.enter(ue),me(xe))}function me(xe){return xe===Ae?(K.exit(ue),ve(Ae)):xe===null?ne(xe):markdownLineEnding(xe)?(K.enter("lineEnding"),K.consume(xe),K.exit("lineEnding"),factorySpace(K,me,"linePrefix")):(K.enter("chunkString",{contentType:"string"}),ge(xe))}function ge(xe){return xe===Ae||xe===null||markdownLineEnding(xe)?(K.exit("chunkString"),me(xe)):(K.consume(xe),xe===92?ye:ge)}function ye(xe){return xe===Ae||xe===92?(K.consume(xe),ge):ge(xe)}}function factoryWhitespace(K,J){let ne;return oe;function oe(ce){return markdownLineEnding(ce)?(K.enter("lineEnding"),K.consume(ce),K.exit("lineEnding"),ne=!0,oe):markdownSpace(ce)?factorySpace(K,oe,ne?"linePrefix":"lineSuffix")(ce):J(ce)}}const definition={name:"definition",tokenize:tokenizeDefinition},titleBefore={tokenize:tokenizeTitleBefore,partial:!0};function tokenizeDefinition(K,J,ne){const oe=this;let ce;return ue;function ue(_e){return K.enter("definition"),Ae(_e)}function Ae(_e){return factoryLabel.call(oe,K,pe,ne,"definitionLabel","definitionLabelMarker","definitionLabelString")(_e)}function pe(_e){return ce=normalizeIdentifier(oe.sliceSerialize(oe.events[oe.events.length-1][1]).slice(1,-1)),_e===58?(K.enter("definitionMarker"),K.consume(_e),K.exit("definitionMarker"),ve):ne(_e)}function ve(_e){return markdownLineEndingOrSpace(_e)?factoryWhitespace(K,me)(_e):me(_e)}function me(_e){return factoryDestination(K,ge,ne,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(_e)}function ge(_e){return K.attempt(titleBefore,ye,ye)(_e)}function ye(_e){return markdownSpace(_e)?factorySpace(K,xe,"whitespace")(_e):xe(_e)}function xe(_e){return _e===null||markdownLineEnding(_e)?(K.exit("definition"),oe.parser.defined.push(ce),J(_e)):ne(_e)}}function tokenizeTitleBefore(K,J,ne){return oe;function oe(pe){return markdownLineEndingOrSpace(pe)?factoryWhitespace(K,ce)(pe):ne(pe)}function ce(pe){return factoryTitle(K,ue,ne,"definitionTitle","definitionTitleMarker","definitionTitleString")(pe)}function ue(pe){return markdownSpace(pe)?factorySpace(K,Ae,"whitespace")(pe):Ae(pe)}function Ae(pe){return pe===null||markdownLineEnding(pe)?J(pe):ne(pe)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(K,J,ne){return oe;function oe(ue){return K.enter("hardBreakEscape"),K.consume(ue),ce}function ce(ue){return markdownLineEnding(ue)?(K.exit("hardBreakEscape"),J(ue)):ne(ue)}}const headingAtx={name:"headingAtx",tokenize:tokenizeHeadingAtx,resolve:resolveHeadingAtx};function resolveHeadingAtx(K,J){let ne=K.length-2,oe=3,ce,ue;return K[oe][1].type==="whitespace"&&(oe+=2),ne-2>oe&&K[ne][1].type==="whitespace"&&(ne-=2),K[ne][1].type==="atxHeadingSequence"&&(oe===ne-1||ne-4>oe&&K[ne-2][1].type==="whitespace")&&(ne-=oe+1===ne?2:4),ne>oe&&(ce={type:"atxHeadingText",start:K[oe][1].start,end:K[ne][1].end},ue={type:"chunkText",start:K[oe][1].start,end:K[ne][1].end,contentType:"text"},splice$1(K,oe,ne-oe+1,[["enter",ce,J],["enter",ue,J],["exit",ue,J],["exit",ce,J]])),K}function tokenizeHeadingAtx(K,J,ne){let oe=0;return ce;function ce(ge){return K.enter("atxHeading"),ue(ge)}function ue(ge){return K.enter("atxHeadingSequence"),Ae(ge)}function Ae(ge){return ge===35&&oe++<6?(K.consume(ge),Ae):ge===null||markdownLineEndingOrSpace(ge)?(K.exit("atxHeadingSequence"),pe(ge)):ne(ge)}function pe(ge){return ge===35?(K.enter("atxHeadingSequence"),ve(ge)):ge===null||markdownLineEnding(ge)?(K.exit("atxHeading"),J(ge)):markdownSpace(ge)?factorySpace(K,pe,"whitespace")(ge):(K.enter("atxHeadingText"),me(ge))}function ve(ge){return ge===35?(K.consume(ge),ve):(K.exit("atxHeadingSequence"),pe(ge))}function me(ge){return ge===null||ge===35||markdownLineEndingOrSpace(ge)?(K.exit("atxHeadingText"),pe(ge)):(K.consume(ge),me)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={name:"htmlFlow",tokenize:tokenizeHtmlFlow,resolveTo:resolveToHtmlFlow,concrete:!0},blankLineBefore={tokenize:tokenizeBlankLineBefore,partial:!0},nonLazyContinuationStart={tokenize:tokenizeNonLazyContinuationStart,partial:!0};function resolveToHtmlFlow(K){let J=K.length;for(;J--&&!(K[J][0]==="enter"&&K[J][1].type==="htmlFlow"););return J>1&&K[J-2][1].type==="linePrefix"&&(K[J][1].start=K[J-2][1].start,K[J+1][1].start=K[J-2][1].start,K.splice(J-2,2)),K}function tokenizeHtmlFlow(K,J,ne){const oe=this;let ce,ue,Ae,pe,ve;return me;function me(it){return ge(it)}function ge(it){return K.enter("htmlFlow"),K.enter("htmlFlowData"),K.consume(it),ye}function ye(it){return it===33?(K.consume(it),xe):it===47?(K.consume(it),ue=!0,Ie):it===63?(K.consume(it),ce=3,oe.interrupt?J:Te):asciiAlpha(it)?(K.consume(it),Ae=String.fromCharCode(it),Fe):ne(it)}function xe(it){return it===45?(K.consume(it),ce=2,_e):it===91?(K.consume(it),ce=5,pe=0,$e):asciiAlpha(it)?(K.consume(it),ce=4,oe.interrupt?J:Te):ne(it)}function _e(it){return it===45?(K.consume(it),oe.interrupt?J:Te):ne(it)}function $e(it){const at="CDATA[";return it===at.charCodeAt(pe++)?(K.consume(it),pe===at.length?oe.interrupt?J:Se:$e):ne(it)}function Ie(it){return asciiAlpha(it)?(K.consume(it),Ae=String.fromCharCode(it),Fe):ne(it)}function Fe(it){if(it===null||it===47||it===62||markdownLineEndingOrSpace(it)){const at=it===47,lt=Ae.toLowerCase();return!at&&!ue&&htmlRawNames.includes(lt)?(ce=1,oe.interrupt?J(it):Se(it)):htmlBlockNames.includes(Ae.toLowerCase())?(ce=6,at?(K.consume(it),ke):oe.interrupt?J(it):Se(it)):(ce=7,oe.interrupt&&!oe.parser.lazy[oe.now().line]?ne(it):ue?je(it):We(it))}return it===45||asciiAlphanumeric(it)?(K.consume(it),Ae+=String.fromCharCode(it),Fe):ne(it)}function ke(it){return it===62?(K.consume(it),oe.interrupt?J:Se):ne(it)}function je(it){return markdownSpace(it)?(K.consume(it),je):st(it)}function We(it){return it===47?(K.consume(it),st):it===58||it===95||asciiAlpha(it)?(K.consume(it),ze):markdownSpace(it)?(K.consume(it),We):st(it)}function ze(it){return it===45||it===46||it===58||it===95||asciiAlphanumeric(it)?(K.consume(it),ze):Xe(it)}function Xe(it){return it===61?(K.consume(it),Je):markdownSpace(it)?(K.consume(it),Xe):We(it)}function Je(it){return it===null||it===60||it===61||it===62||it===96?ne(it):it===34||it===39?(K.consume(it),ve=it,nt):markdownSpace(it)?(K.consume(it),Je):et(it)}function nt(it){return it===ve?(K.consume(it),ve=null,tt):it===null||markdownLineEnding(it)?ne(it):(K.consume(it),nt)}function et(it){return it===null||it===34||it===39||it===47||it===60||it===61||it===62||it===96||markdownLineEndingOrSpace(it)?Xe(it):(K.consume(it),et)}function tt(it){return it===47||it===62||markdownSpace(it)?We(it):ne(it)}function st(it){return it===62?(K.consume(it),qe):ne(it)}function qe(it){return it===null||markdownLineEnding(it)?Se(it):markdownSpace(it)?(K.consume(it),qe):ne(it)}function Se(it){return it===45&&ce===2?(K.consume(it),Ue):it===60&&ce===1?(K.consume(it),Ge):it===62&&ce===4?(K.consume(it),Ke):it===63&&ce===3?(K.consume(it),Te):it===93&&ce===5?(K.consume(it),Qe):markdownLineEnding(it)&&(ce===6||ce===7)?(K.exit("htmlFlowData"),K.check(blankLineBefore,rt,Re)(it)):it===null||markdownLineEnding(it)?(K.exit("htmlFlowData"),Re(it)):(K.consume(it),Se)}function Re(it){return K.check(nonLazyContinuationStart,Be,rt)(it)}function Be(it){return K.enter("lineEnding"),K.consume(it),K.exit("lineEnding"),Ne}function Ne(it){return it===null||markdownLineEnding(it)?Re(it):(K.enter("htmlFlowData"),Se(it))}function Ue(it){return it===45?(K.consume(it),Te):Se(it)}function Ge(it){return it===47?(K.consume(it),Ae="",Ye):Se(it)}function Ye(it){if(it===62){const at=Ae.toLowerCase();return htmlRawNames.includes(at)?(K.consume(it),Ke):Se(it)}return asciiAlpha(it)&&Ae.length<8?(K.consume(it),Ae+=String.fromCharCode(it),Ye):Se(it)}function Qe(it){return it===93?(K.consume(it),Te):Se(it)}function Te(it){return it===62?(K.consume(it),Ke):it===45&&ce===2?(K.consume(it),Te):Se(it)}function Ke(it){return it===null||markdownLineEnding(it)?(K.exit("htmlFlowData"),rt(it)):(K.consume(it),Ke)}function rt(it){return K.exit("htmlFlow"),J(it)}}function tokenizeNonLazyContinuationStart(K,J,ne){const oe=this;return ce;function ce(Ae){return markdownLineEnding(Ae)?(K.enter("lineEnding"),K.consume(Ae),K.exit("lineEnding"),ue):ne(Ae)}function ue(Ae){return oe.parser.lazy[oe.now().line]?ne(Ae):J(Ae)}}function tokenizeBlankLineBefore(K,J,ne){return oe;function oe(ce){return K.enter("lineEnding"),K.consume(ce),K.exit("lineEnding"),K.attempt(blankLine,J,ne)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(K,J,ne){const oe=this;let ce,ue,Ae;return pe;function pe(Te){return K.enter("htmlText"),K.enter("htmlTextData"),K.consume(Te),ve}function ve(Te){return Te===33?(K.consume(Te),me):Te===47?(K.consume(Te),Xe):Te===63?(K.consume(Te),We):asciiAlpha(Te)?(K.consume(Te),et):ne(Te)}function me(Te){return Te===45?(K.consume(Te),ge):Te===91?(K.consume(Te),ue=0,$e):asciiAlpha(Te)?(K.consume(Te),je):ne(Te)}function ge(Te){return Te===45?(K.consume(Te),_e):ne(Te)}function ye(Te){return Te===null?ne(Te):Te===45?(K.consume(Te),xe):markdownLineEnding(Te)?(Ae=ye,Ge(Te)):(K.consume(Te),ye)}function xe(Te){return Te===45?(K.consume(Te),_e):ye(Te)}function _e(Te){return Te===62?Ue(Te):Te===45?xe(Te):ye(Te)}function $e(Te){const Ke="CDATA[";return Te===Ke.charCodeAt(ue++)?(K.consume(Te),ue===Ke.length?Ie:$e):ne(Te)}function Ie(Te){return Te===null?ne(Te):Te===93?(K.consume(Te),Fe):markdownLineEnding(Te)?(Ae=Ie,Ge(Te)):(K.consume(Te),Ie)}function Fe(Te){return Te===93?(K.consume(Te),ke):Ie(Te)}function ke(Te){return Te===62?Ue(Te):Te===93?(K.consume(Te),ke):Ie(Te)}function je(Te){return Te===null||Te===62?Ue(Te):markdownLineEnding(Te)?(Ae=je,Ge(Te)):(K.consume(Te),je)}function We(Te){return Te===null?ne(Te):Te===63?(K.consume(Te),ze):markdownLineEnding(Te)?(Ae=We,Ge(Te)):(K.consume(Te),We)}function ze(Te){return Te===62?Ue(Te):We(Te)}function Xe(Te){return asciiAlpha(Te)?(K.consume(Te),Je):ne(Te)}function Je(Te){return Te===45||asciiAlphanumeric(Te)?(K.consume(Te),Je):nt(Te)}function nt(Te){return markdownLineEnding(Te)?(Ae=nt,Ge(Te)):markdownSpace(Te)?(K.consume(Te),nt):Ue(Te)}function et(Te){return Te===45||asciiAlphanumeric(Te)?(K.consume(Te),et):Te===47||Te===62||markdownLineEndingOrSpace(Te)?tt(Te):ne(Te)}function tt(Te){return Te===47?(K.consume(Te),Ue):Te===58||Te===95||asciiAlpha(Te)?(K.consume(Te),st):markdownLineEnding(Te)?(Ae=tt,Ge(Te)):markdownSpace(Te)?(K.consume(Te),tt):Ue(Te)}function st(Te){return Te===45||Te===46||Te===58||Te===95||asciiAlphanumeric(Te)?(K.consume(Te),st):qe(Te)}function qe(Te){return Te===61?(K.consume(Te),Se):markdownLineEnding(Te)?(Ae=qe,Ge(Te)):markdownSpace(Te)?(K.consume(Te),qe):tt(Te)}function Se(Te){return Te===null||Te===60||Te===61||Te===62||Te===96?ne(Te):Te===34||Te===39?(K.consume(Te),ce=Te,Re):markdownLineEnding(Te)?(Ae=Se,Ge(Te)):markdownSpace(Te)?(K.consume(Te),Se):(K.consume(Te),Be)}function Re(Te){return Te===ce?(K.consume(Te),ce=void 0,Ne):Te===null?ne(Te):markdownLineEnding(Te)?(Ae=Re,Ge(Te)):(K.consume(Te),Re)}function Be(Te){return Te===null||Te===34||Te===39||Te===60||Te===61||Te===96?ne(Te):Te===47||Te===62||markdownLineEndingOrSpace(Te)?tt(Te):(K.consume(Te),Be)}function Ne(Te){return Te===47||Te===62||markdownLineEndingOrSpace(Te)?tt(Te):ne(Te)}function Ue(Te){return Te===62?(K.consume(Te),K.exit("htmlTextData"),K.exit("htmlText"),J):ne(Te)}function Ge(Te){return K.exit("htmlTextData"),K.enter("lineEnding"),K.consume(Te),K.exit("lineEnding"),Ye}function Ye(Te){return markdownSpace(Te)?factorySpace(K,Qe,"linePrefix",oe.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Te):Qe(Te)}function Qe(Te){return K.enter("htmlTextData"),Ae(Te)}}const labelEnd={name:"labelEnd",tokenize:tokenizeLabelEnd,resolveTo:resolveToLabelEnd,resolveAll:resolveAllLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(K){let J=-1;for(;++J<K.length;){const ne=K[J][1];(ne.type==="labelImage"||ne.type==="labelLink"||ne.type==="labelEnd")&&(K.splice(J+1,ne.type==="labelImage"?4:2),ne.type="data",J++)}return K}function resolveToLabelEnd(K,J){let ne=K.length,oe=0,ce,ue,Ae,pe;for(;ne--;)if(ce=K[ne][1],ue){if(ce.type==="link"||ce.type==="labelLink"&&ce._inactive)break;K[ne][0]==="enter"&&ce.type==="labelLink"&&(ce._inactive=!0)}else if(Ae){if(K[ne][0]==="enter"&&(ce.type==="labelImage"||ce.type==="labelLink")&&!ce._balanced&&(ue=ne,ce.type!=="labelLink")){oe=2;break}}else ce.type==="labelEnd"&&(Ae=ne);const ve={type:K[ue][1].type==="labelLink"?"link":"image",start:Object.assign({},K[ue][1].start),end:Object.assign({},K[K.length-1][1].end)},me={type:"label",start:Object.assign({},K[ue][1].start),end:Object.assign({},K[Ae][1].end)},ge={type:"labelText",start:Object.assign({},K[ue+oe+2][1].end),end:Object.assign({},K[Ae-2][1].start)};return pe=[["enter",ve,J],["enter",me,J]],pe=push(pe,K.slice(ue+1,ue+oe+3)),pe=push(pe,[["enter",ge,J]]),pe=push(pe,resolveAll(J.parser.constructs.insideSpan.null,K.slice(ue+oe+4,Ae-3),J)),pe=push(pe,[["exit",ge,J],K[Ae-2],K[Ae-1],["exit",me,J]]),pe=push(pe,K.slice(Ae+1)),pe=push(pe,[["exit",ve,J]]),splice$1(K,ue,K.length,pe),K}function tokenizeLabelEnd(K,J,ne){const oe=this;let ce=oe.events.length,ue,Ae;for(;ce--;)if((oe.events[ce][1].type==="labelImage"||oe.events[ce][1].type==="labelLink")&&!oe.events[ce][1]._balanced){ue=oe.events[ce][1];break}return pe;function pe(xe){return ue?ue._inactive?ye(xe):(Ae=oe.parser.defined.includes(normalizeIdentifier(oe.sliceSerialize({start:ue.end,end:oe.now()}))),K.enter("labelEnd"),K.enter("labelMarker"),K.consume(xe),K.exit("labelMarker"),K.exit("labelEnd"),ve):ne(xe)}function ve(xe){return xe===40?K.attempt(resourceConstruct,ge,Ae?ge:ye)(xe):xe===91?K.attempt(referenceFullConstruct,ge,Ae?me:ye)(xe):Ae?ge(xe):ye(xe)}function me(xe){return K.attempt(referenceCollapsedConstruct,ge,ye)(xe)}function ge(xe){return J(xe)}function ye(xe){return ue._balanced=!0,ne(xe)}}function tokenizeResource(K,J,ne){return oe;function oe(ye){return K.enter("resource"),K.enter("resourceMarker"),K.consume(ye),K.exit("resourceMarker"),ce}function ce(ye){return markdownLineEndingOrSpace(ye)?factoryWhitespace(K,ue)(ye):ue(ye)}function ue(ye){return ye===41?ge(ye):factoryDestination(K,Ae,pe,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(ye)}function Ae(ye){return markdownLineEndingOrSpace(ye)?factoryWhitespace(K,ve)(ye):ge(ye)}function pe(ye){return ne(ye)}function ve(ye){return ye===34||ye===39||ye===40?factoryTitle(K,me,ne,"resourceTitle","resourceTitleMarker","resourceTitleString")(ye):ge(ye)}function me(ye){return markdownLineEndingOrSpace(ye)?factoryWhitespace(K,ge)(ye):ge(ye)}function ge(ye){return ye===41?(K.enter("resourceMarker"),K.consume(ye),K.exit("resourceMarker"),K.exit("resource"),J):ne(ye)}}function tokenizeReferenceFull(K,J,ne){const oe=this;return ce;function ce(pe){return factoryLabel.call(oe,K,ue,Ae,"reference","referenceMarker","referenceString")(pe)}function ue(pe){return oe.parser.defined.includes(normalizeIdentifier(oe.sliceSerialize(oe.events[oe.events.length-1][1]).slice(1,-1)))?J(pe):ne(pe)}function Ae(pe){return ne(pe)}}function tokenizeReferenceCollapsed(K,J,ne){return oe;function oe(ue){return K.enter("reference"),K.enter("referenceMarker"),K.consume(ue),K.exit("referenceMarker"),ce}function ce(ue){return ue===93?(K.enter("referenceMarker"),K.consume(ue),K.exit("referenceMarker"),K.exit("reference"),J):ne(ue)}}const labelStartImage={name:"labelStartImage",tokenize:tokenizeLabelStartImage,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartImage(K,J,ne){const oe=this;return ce;function ce(pe){return K.enter("labelImage"),K.enter("labelImageMarker"),K.consume(pe),K.exit("labelImageMarker"),ue}function ue(pe){return pe===91?(K.enter("labelMarker"),K.consume(pe),K.exit("labelMarker"),K.exit("labelImage"),Ae):ne(pe)}function Ae(pe){return pe===94&&"_hiddenFootnoteSupport"in oe.parser.constructs?ne(pe):J(pe)}}const labelStartLink={name:"labelStartLink",tokenize:tokenizeLabelStartLink,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartLink(K,J,ne){const oe=this;return ce;function ce(Ae){return K.enter("labelLink"),K.enter("labelMarker"),K.consume(Ae),K.exit("labelMarker"),K.exit("labelLink"),ue}function ue(Ae){return Ae===94&&"_hiddenFootnoteSupport"in oe.parser.constructs?ne(Ae):J(Ae)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(K,J){return ne;function ne(oe){return K.enter("lineEnding"),K.consume(oe),K.exit("lineEnding"),factorySpace(K,J,"linePrefix")}}const thematicBreak$1={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(K,J,ne){let oe=0,ce;return ue;function ue(me){return K.enter("thematicBreak"),Ae(me)}function Ae(me){return ce=me,pe(me)}function pe(me){return me===ce?(K.enter("thematicBreakSequence"),ve(me)):oe>=3&&(me===null||markdownLineEnding(me))?(K.exit("thematicBreak"),J(me)):ne(me)}function ve(me){return me===ce?(K.consume(me),oe++,ve):(K.exit("thematicBreakSequence"),markdownSpace(me)?factorySpace(K,pe,"whitespace")(me):pe(me))}}const list$2={name:"list",tokenize:tokenizeListStart,continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd},listItemPrefixWhitespaceConstruct={tokenize:tokenizeListItemPrefixWhitespace,partial:!0},indentConstruct={tokenize:tokenizeIndent,partial:!0};function tokenizeListStart(K,J,ne){const oe=this,ce=oe.events[oe.events.length-1];let ue=ce&&ce[1].type==="linePrefix"?ce[2].sliceSerialize(ce[1],!0).length:0,Ae=0;return pe;function pe(_e){const $e=oe.containerState.type||(_e===42||_e===43||_e===45?"listUnordered":"listOrdered");if($e==="listUnordered"?!oe.containerState.marker||_e===oe.containerState.marker:asciiDigit(_e)){if(oe.containerState.type||(oe.containerState.type=$e,K.enter($e,{_container:!0})),$e==="listUnordered")return K.enter("listItemPrefix"),_e===42||_e===45?K.check(thematicBreak$1,ne,me)(_e):me(_e);if(!oe.interrupt||_e===49)return K.enter("listItemPrefix"),K.enter("listItemValue"),ve(_e)}return ne(_e)}function ve(_e){return asciiDigit(_e)&&++Ae<10?(K.consume(_e),ve):(!oe.interrupt||Ae<2)&&(oe.containerState.marker?_e===oe.containerState.marker:_e===41||_e===46)?(K.exit("listItemValue"),me(_e)):ne(_e)}function me(_e){return K.enter("listItemMarker"),K.consume(_e),K.exit("listItemMarker"),oe.containerState.marker=oe.containerState.marker||_e,K.check(blankLine,oe.interrupt?ne:ge,K.attempt(listItemPrefixWhitespaceConstruct,xe,ye))}function ge(_e){return oe.containerState.initialBlankLine=!0,ue++,xe(_e)}function ye(_e){return markdownSpace(_e)?(K.enter("listItemPrefixWhitespace"),K.consume(_e),K.exit("listItemPrefixWhitespace"),xe):ne(_e)}function xe(_e){return oe.containerState.size=ue+oe.sliceSerialize(K.exit("listItemPrefix"),!0).length,J(_e)}}function tokenizeListContinuation(K,J,ne){const oe=this;return oe.containerState._closeFlow=void 0,K.check(blankLine,ce,ue);function ce(pe){return oe.containerState.furtherBlankLines=oe.containerState.furtherBlankLines||oe.containerState.initialBlankLine,factorySpace(K,J,"listItemIndent",oe.containerState.size+1)(pe)}function ue(pe){return oe.containerState.furtherBlankLines||!markdownSpace(pe)?(oe.containerState.furtherBlankLines=void 0,oe.containerState.initialBlankLine=void 0,Ae(pe)):(oe.containerState.furtherBlankLines=void 0,oe.containerState.initialBlankLine=void 0,K.attempt(indentConstruct,J,Ae)(pe))}function Ae(pe){return oe.containerState._closeFlow=!0,oe.interrupt=void 0,factorySpace(K,K.attempt(list$2,J,ne),"linePrefix",oe.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(pe)}}function tokenizeIndent(K,J,ne){const oe=this;return factorySpace(K,ce,"listItemIndent",oe.containerState.size+1);function ce(ue){const Ae=oe.events[oe.events.length-1];return Ae&&Ae[1].type==="listItemIndent"&&Ae[2].sliceSerialize(Ae[1],!0).length===oe.containerState.size?J(ue):ne(ue)}}function tokenizeListEnd(K){K.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(K,J,ne){const oe=this;return factorySpace(K,ce,"listItemPrefixWhitespace",oe.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function ce(ue){const Ae=oe.events[oe.events.length-1];return!markdownSpace(ue)&&Ae&&Ae[1].type==="listItemPrefixWhitespace"?J(ue):ne(ue)}}const setextUnderline={name:"setextUnderline",tokenize:tokenizeSetextUnderline,resolveTo:resolveToSetextUnderline};function resolveToSetextUnderline(K,J){let ne=K.length,oe,ce,ue;for(;ne--;)if(K[ne][0]==="enter"){if(K[ne][1].type==="content"){oe=ne;break}K[ne][1].type==="paragraph"&&(ce=ne)}else K[ne][1].type==="content"&&K.splice(ne,1),!ue&&K[ne][1].type==="definition"&&(ue=ne);const Ae={type:"setextHeading",start:Object.assign({},K[ce][1].start),end:Object.assign({},K[K.length-1][1].end)};return K[ce][1].type="setextHeadingText",ue?(K.splice(ce,0,["enter",Ae,J]),K.splice(ue+1,0,["exit",K[oe][1],J]),K[oe][1].end=Object.assign({},K[ue][1].end)):K[oe][1]=Ae,K.push(["exit",Ae,J]),K}function tokenizeSetextUnderline(K,J,ne){const oe=this;let ce;return ue;function ue(me){let ge=oe.events.length,ye;for(;ge--;)if(oe.events[ge][1].type!=="lineEnding"&&oe.events[ge][1].type!=="linePrefix"&&oe.events[ge][1].type!=="content"){ye=oe.events[ge][1].type==="paragraph";break}return!oe.parser.lazy[oe.now().line]&&(oe.interrupt||ye)?(K.enter("setextHeadingLine"),ce=me,Ae(me)):ne(me)}function Ae(me){return K.enter("setextHeadingLineSequence"),pe(me)}function pe(me){return me===ce?(K.consume(me),pe):(K.exit("setextHeadingLineSequence"),markdownSpace(me)?factorySpace(K,ve,"lineSuffix")(me):ve(me))}function ve(me){return me===null||markdownLineEnding(me)?(K.exit("setextHeadingLine"),J(me)):ne(me)}}const flow$1={tokenize:initializeFlow};function initializeFlow(K){const J=this,ne=K.attempt(blankLine,oe,K.attempt(this.parser.constructs.flowInitial,ce,factorySpace(K,K.attempt(this.parser.constructs.flow,ce,K.attempt(content$b,ce)),"linePrefix")));return ne;function oe(ue){if(ue===null){K.consume(ue);return}return K.enter("lineEndingBlank"),K.consume(ue),K.exit("lineEndingBlank"),J.currentConstruct=void 0,ne}function ce(ue){if(ue===null){K.consume(ue);return}return K.enter("lineEnding"),K.consume(ue),K.exit("lineEnding"),J.currentConstruct=void 0,ne}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$3=initializeFactory("text");function initializeFactory(K){return{tokenize:J,resolveAll:createResolver(K==="text"?resolveAllLineSuffixes:void 0)};function J(ne){const oe=this,ce=this.parser.constructs[K],ue=ne.attempt(ce,Ae,pe);return Ae;function Ae(ge){return me(ge)?ue(ge):pe(ge)}function pe(ge){if(ge===null){ne.consume(ge);return}return ne.enter("data"),ne.consume(ge),ve}function ve(ge){return me(ge)?(ne.exit("data"),ue(ge)):(ne.consume(ge),ve)}function me(ge){if(ge===null)return!0;const ye=ce[ge];let xe=-1;if(ye)for(;++xe<ye.length;){const _e=ye[xe];if(!_e.previous||_e.previous.call(oe,oe.previous))return!0}return!1}}}function createResolver(K){return J;function J(ne,oe){let ce=-1,ue;for(;++ce<=ne.length;)ue===void 0?ne[ce]&&ne[ce][1].type==="data"&&(ue=ce,ce++):(!ne[ce]||ne[ce][1].type!=="data")&&(ce!==ue+2&&(ne[ue][1].end=ne[ce-1][1].end,ne.splice(ue+2,ce-ue-2),ce=ue+2),ue=void 0);return K?K(ne,oe):ne}}function resolveAllLineSuffixes(K,J){let ne=0;for(;++ne<=K.length;)if((ne===K.length||K[ne][1].type==="lineEnding")&&K[ne-1][1].type==="data"){const oe=K[ne-1][1],ce=J.sliceStream(oe);let ue=ce.length,Ae=-1,pe=0,ve;for(;ue--;){const me=ce[ue];if(typeof me=="string"){for(Ae=me.length;me.charCodeAt(Ae-1)===32;)pe++,Ae--;if(Ae)break;Ae=-1}else if(me===-2)ve=!0,pe++;else if(me!==-1){ue++;break}}if(pe){const me={type:ne===K.length||ve||pe<2?"lineSuffix":"hardBreakTrailing",start:{line:oe.end.line,column:oe.end.column-pe,offset:oe.end.offset-pe,_index:oe.start._index+ue,_bufferIndex:ue?Ae:oe.start._bufferIndex+Ae},end:Object.assign({},oe.end)};oe.end=Object.assign({},me.start),oe.start.offset===oe.end.offset?Object.assign(oe,me):(K.splice(ne,0,["enter",me,J],["exit",me,J]),ne+=2)}ne++}return K}function createTokenizer(K,J,ne){let oe=Object.assign(ne?Object.assign({},ne):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const ce={},ue=[];let Ae=[],pe=[];const ve={consume:je,enter:We,exit:ze,attempt:nt(Xe),check:nt(Je),interrupt:nt(Je,{interrupt:!0})},me={previous:null,code:null,containerState:{},events:[],parser:K,sliceStream:_e,sliceSerialize:xe,now:$e,defineSkip:Ie,write:ye};let ge=J.tokenize.call(me,ve);return J.resolveAll&&ue.push(J),me;function ye(qe){return Ae=push(Ae,qe),Fe(),Ae[Ae.length-1]!==null?[]:(et(J,0),me.events=resolveAll(ue,me.events,me),me.events)}function xe(qe,Se){return serializeChunks(_e(qe),Se)}function _e(qe){return sliceChunks(Ae,qe)}function $e(){const{line:qe,column:Se,offset:Re,_index:Be,_bufferIndex:Ne}=oe;return{line:qe,column:Se,offset:Re,_index:Be,_bufferIndex:Ne}}function Ie(qe){ce[qe.line]=qe.column,st()}function Fe(){let qe;for(;oe._index<Ae.length;){const Se=Ae[oe._index];if(typeof Se=="string")for(qe=oe._index,oe._bufferIndex<0&&(oe._bufferIndex=0);oe._index===qe&&oe._bufferIndex<Se.length;)ke(Se.charCodeAt(oe._bufferIndex));else ke(Se)}}function ke(qe){ge=ge(qe)}function je(qe){markdownLineEnding(qe)?(oe.line++,oe.column=1,oe.offset+=qe===-3?2:1,st()):qe!==-1&&(oe.column++,oe.offset++),oe._bufferIndex<0?oe._index++:(oe._bufferIndex++,oe._bufferIndex===Ae[oe._index].length&&(oe._bufferIndex=-1,oe._index++)),me.previous=qe}function We(qe,Se){const Re=Se||{};return Re.type=qe,Re.start=$e(),me.events.push(["enter",Re,me]),pe.push(Re),Re}function ze(qe){const Se=pe.pop();return Se.end=$e(),me.events.push(["exit",Se,me]),Se}function Xe(qe,Se){et(qe,Se.from)}function Je(qe,Se){Se.restore()}function nt(qe,Se){return Re;function Re(Be,Ne,Ue){let Ge,Ye,Qe,Te;return Array.isArray(Be)?rt(Be):"tokenize"in Be?rt([Be]):Ke(Be);function Ke(ct){return ot;function ot(ft){const dt=ft!==null&&ct[ft],mt=ft!==null&&ct.null,kt=[...Array.isArray(dt)?dt:dt?[dt]:[],...Array.isArray(mt)?mt:mt?[mt]:[]];return rt(kt)(ft)}}function rt(ct){return Ge=ct,Ye=0,ct.length===0?Ue:it(ct[Ye])}function it(ct){return ot;function ot(ft){return Te=tt(),Qe=ct,ct.partial||(me.currentConstruct=ct),ct.name&&me.parser.constructs.disable.null.includes(ct.name)?lt():ct.tokenize.call(Se?Object.assign(Object.create(me),Se):me,ve,at,lt)(ft)}}function at(ct){return qe(Qe,Te),Ne}function lt(ct){return Te.restore(),++Ye<Ge.length?it(Ge[Ye]):Ue}}}function et(qe,Se){qe.resolveAll&&!ue.includes(qe)&&ue.push(qe),qe.resolve&&splice$1(me.events,Se,me.events.length-Se,qe.resolve(me.events.slice(Se),me)),qe.resolveTo&&(me.events=qe.resolveTo(me.events,me))}function tt(){const qe=$e(),Se=me.previous,Re=me.currentConstruct,Be=me.events.length,Ne=Array.from(pe);return{restore:Ue,from:Be};function Ue(){oe=qe,me.previous=Se,me.currentConstruct=Re,me.events.length=Be,pe=Ne,st()}}function st(){oe.line in ce&&oe.column<2&&(oe.column=ce[oe.line],oe.offset+=ce[oe.line]-1)}}function sliceChunks(K,J){const ne=J.start._index,oe=J.start._bufferIndex,ce=J.end._index,ue=J.end._bufferIndex;let Ae;if(ne===ce)Ae=[K[ne].slice(oe,ue)];else{if(Ae=K.slice(ne,ce),oe>-1){const pe=Ae[0];typeof pe=="string"?Ae[0]=pe.slice(oe):Ae.shift()}ue>0&&Ae.push(K[ce].slice(0,ue))}return Ae}function serializeChunks(K,J){let ne=-1;const oe=[];let ce;for(;++ne<K.length;){const ue=K[ne];let Ae;if(typeof ue=="string")Ae=ue;else switch(ue){case-5:{Ae="\r";break}case-4:{Ae=`
`;break}case-3:{Ae=`\r
`;break}case-2:{Ae=J?" ":"	";break}case-1:{if(!J&&ce)continue;Ae=" ";break}default:Ae=String.fromCharCode(ue)}ce=ue===-2,oe.push(Ae)}return oe.join("")}const document$1={42:list$2,43:list$2,45:list$2,48:list$2,49:list$2,50:list$2,51:list$2,52:list$2,53:list$2,54:list$2,55:list$2,56:list$2,57:list$2,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$1,45:[setextUnderline,thematicBreak$1],60:htmlFlow,61:setextUnderline,95:thematicBreak$1,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$2={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$2},Symbol.toStringTag,{value:"Module"}));function parse$1(K){const ne=combineExtensions([defaultConstructs,...(K||{}).extensions||[]]),oe={defined:[],lazy:{},constructs:ne,content:ce(content$c),document:ce(document$2),flow:ce(flow$1),string:ce(string$1),text:ce(text$3)};return oe;function ce(ue){return Ae;function Ae(pe){return createTokenizer(oe,ue,pe)}}}function postprocess(K){for(;!subtokenize(K););return K}const search=/[\0\t\n\r]/g;function preprocess(){let K=1,J="",ne=!0,oe;return ce;function ce(ue,Ae,pe){const ve=[];let me,ge,ye,xe,_e;for(ue=J+(typeof ue=="string"?ue.toString():new TextDecoder(Ae||void 0).decode(ue)),ye=0,J="",ne&&(ue.charCodeAt(0)===65279&&ye++,ne=void 0);ye<ue.length;){if(search.lastIndex=ye,me=search.exec(ue),xe=me&&me.index!==void 0?me.index:ue.length,_e=ue.charCodeAt(xe),!me){J=ue.slice(ye);break}if(_e===10&&ye===xe&&oe)ve.push(-3),oe=void 0;else switch(oe&&(ve.push(-5),oe=void 0),ye<xe&&(ve.push(ue.slice(ye,xe)),K+=xe-ye),_e){case 0:{ve.push(65533),K++;break}case 9:{for(ge=Math.ceil(K/4)*4,ve.push(-2);K++<ge;)ve.push(-1);break}case 10:{ve.push(-4),K=1;break}default:oe=!0,K=1}ye=xe+1}return pe&&(oe&&ve.push(-5),J&&ve.push(J),ve.push(null)),ve}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(K){return K.replace(characterEscapeOrReference,decode$2)}function decode$2(K,J,ne){if(J)return J;if(ne.charCodeAt(0)===35){const ce=ne.charCodeAt(1),ue=ce===120||ce===88;return decodeNumericCharacterReference(ne.slice(ue?2:1),ue?16:10)}return decodeNamedCharacterReference(ne)||K}const own$2={}.hasOwnProperty;function fromMarkdown(K,J,ne){return typeof J!="string"&&(ne=J,J=void 0),compiler(ne)(postprocess(parse$1(ne).document().write(preprocess()(K,J,!0))))}function compiler(K){const J={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:ue(vt),autolinkProtocol:tt,autolinkEmail:tt,atxHeading:ue(Rt),blockQuote:ue(mt),characterEscape:tt,characterReference:tt,codeFenced:ue(kt),codeFencedFenceInfo:Ae,codeFencedFenceMeta:Ae,codeIndented:ue(kt,Ae),codeText:ue(wt,Ae),codeTextData:tt,data:tt,codeFlowValue:tt,definition:ue(Et),definitionDestinationString:Ae,definitionLabelString:Ae,definitionTitleString:Ae,emphasis:ue(Ot),hardBreakEscape:ue(gt),hardBreakTrailing:ue(gt),htmlFlow:ue($t,Ae),htmlFlowData:tt,htmlText:ue($t,Ae),htmlTextData:tt,image:ue(pt),label:Ae,link:ue(vt),listItem:ue(St),listItemValue:xe,listOrdered:ue(Mt,ye),listUnordered:ue(Mt),paragraph:ue(_t),reference:it,referenceString:Ae,resourceDestinationString:Ae,resourceTitleString:Ae,setextHeading:ue(Rt),strong:ue(Xt),thematicBreak:ue(Dt)},exit:{atxHeading:ve(),atxHeadingSequence:Xe,autolink:ve(),autolinkEmail:dt,autolinkProtocol:ft,blockQuote:ve(),characterEscapeValue:st,characterReferenceMarkerHexadecimal:lt,characterReferenceMarkerNumeric:lt,characterReferenceValue:ct,characterReference:ot,codeFenced:ve(Fe),codeFencedFence:Ie,codeFencedFenceInfo:_e,codeFencedFenceMeta:$e,codeFlowValue:st,codeIndented:ve(ke),codeText:ve(Ne),codeTextData:st,data:st,definition:ve(),definitionDestinationString:ze,definitionLabelString:je,definitionTitleString:We,emphasis:ve(),hardBreakEscape:ve(Se),hardBreakTrailing:ve(Se),htmlFlow:ve(Re),htmlFlowData:st,htmlText:ve(Be),htmlTextData:st,image:ve(Ge),label:Qe,labelText:Ye,lineEnding:qe,link:ve(Ue),listItem:ve(),listOrdered:ve(),listUnordered:ve(),paragraph:ve(),referenceString:at,resourceDestinationString:Te,resourceTitleString:Ke,resource:rt,setextHeading:ve(et),setextHeadingLineSequence:nt,setextHeadingText:Je,strong:ve(),thematicBreak:ve()}};configure(J,(K||{}).mdastExtensions||[]);const ne={};return oe;function oe(Ht){let Bt={type:"root",children:[]};const It={stack:[Bt],tokenStack:[],config:J,enter:pe,exit:me,buffer:Ae,resume:ge,data:ne},zt=[];let Pt=-1;for(;++Pt<Ht.length;)if(Ht[Pt][1].type==="listOrdered"||Ht[Pt][1].type==="listUnordered")if(Ht[Pt][0]==="enter")zt.push(Pt);else{const Vt=zt.pop();Pt=ce(Ht,Vt,Pt)}for(Pt=-1;++Pt<Ht.length;){const Vt=J[Ht[Pt][0]];own$2.call(Vt,Ht[Pt][1].type)&&Vt[Ht[Pt][1].type].call(Object.assign({sliceSerialize:Ht[Pt][2].sliceSerialize},It),Ht[Pt][1])}if(It.tokenStack.length>0){const Vt=It.tokenStack[It.tokenStack.length-1];(Vt[1]||defaultOnError).call(It,void 0,Vt[0])}for(Bt.position={start:point(Ht.length>0?Ht[0][1].start:{line:1,column:1,offset:0}),end:point(Ht.length>0?Ht[Ht.length-2][1].end:{line:1,column:1,offset:0})},Pt=-1;++Pt<J.transforms.length;)Bt=J.transforms[Pt](Bt)||Bt;return Bt}function ce(Ht,Bt,It){let zt=Bt-1,Pt=-1,Vt=!1,vr,qt,er,yr;for(;++zt<=It;){const Lt=Ht[zt];switch(Lt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Lt[0]==="enter"?Pt++:Pt--,yr=void 0;break}case"lineEndingBlank":{Lt[0]==="enter"&&(vr&&!yr&&!Pt&&!er&&(er=zt),yr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:yr=void 0}if(!Pt&&Lt[0]==="enter"&&Lt[1].type==="listItemPrefix"||Pt===-1&&Lt[0]==="exit"&&(Lt[1].type==="listUnordered"||Lt[1].type==="listOrdered")){if(vr){let jt=zt;for(qt=void 0;jt--;){const fr=Ht[jt];if(fr[1].type==="lineEnding"||fr[1].type==="lineEndingBlank"){if(fr[0]==="exit")continue;qt&&(Ht[qt][1].type="lineEndingBlank",Vt=!0),fr[1].type="lineEnding",qt=jt}else if(!(fr[1].type==="linePrefix"||fr[1].type==="blockQuotePrefix"||fr[1].type==="blockQuotePrefixWhitespace"||fr[1].type==="blockQuoteMarker"||fr[1].type==="listItemIndent"))break}er&&(!qt||er<qt)&&(vr._spread=!0),vr.end=Object.assign({},qt?Ht[qt][1].start:Lt[1].end),Ht.splice(qt||zt,0,["exit",vr,Lt[2]]),zt++,It++}if(Lt[1].type==="listItemPrefix"){const jt={type:"listItem",_spread:!1,start:Object.assign({},Lt[1].start),end:void 0};vr=jt,Ht.splice(zt,0,["enter",jt,Lt[2]]),zt++,It++,er=void 0,yr=!0}}}return Ht[Bt][1]._spread=Vt,It}function ue(Ht,Bt){return It;function It(zt){pe.call(this,Ht(zt),zt),Bt&&Bt.call(this,zt)}}function Ae(){this.stack.push({type:"fragment",children:[]})}function pe(Ht,Bt,It){this.stack[this.stack.length-1].children.push(Ht),this.stack.push(Ht),this.tokenStack.push([Bt,It]),Ht.position={start:point(Bt.start),end:void 0}}function ve(Ht){return Bt;function Bt(It){Ht&&Ht.call(this,It),me.call(this,It)}}function me(Ht,Bt){const It=this.stack.pop(),zt=this.tokenStack.pop();if(zt)zt[0].type!==Ht.type&&(Bt?Bt.call(this,Ht,zt[0]):(zt[1]||defaultOnError).call(this,Ht,zt[0]));else throw new Error("Cannot close `"+Ht.type+"` ("+stringifyPosition({start:Ht.start,end:Ht.end})+"): its not open");It.position.end=point(Ht.end)}function ge(){return toString$1(this.stack.pop())}function ye(){this.data.expectingFirstListItemValue=!0}function xe(Ht){if(this.data.expectingFirstListItemValue){const Bt=this.stack[this.stack.length-2];Bt.start=Number.parseInt(this.sliceSerialize(Ht),10),this.data.expectingFirstListItemValue=void 0}}function _e(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.lang=Ht}function $e(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.meta=Ht}function Ie(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function Fe(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.value=Ht.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function ke(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.value=Ht.replace(/(\r?\n|\r)$/g,"")}function je(Ht){const Bt=this.resume(),It=this.stack[this.stack.length-1];It.label=Bt,It.identifier=normalizeIdentifier(this.sliceSerialize(Ht)).toLowerCase()}function We(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.title=Ht}function ze(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.url=Ht}function Xe(Ht){const Bt=this.stack[this.stack.length-1];if(!Bt.depth){const It=this.sliceSerialize(Ht).length;Bt.depth=It}}function Je(){this.data.setextHeadingSlurpLineEnding=!0}function nt(Ht){const Bt=this.stack[this.stack.length-1];Bt.depth=this.sliceSerialize(Ht).codePointAt(0)===61?1:2}function et(){this.data.setextHeadingSlurpLineEnding=void 0}function tt(Ht){const It=this.stack[this.stack.length-1].children;let zt=It[It.length-1];(!zt||zt.type!=="text")&&(zt=Tt(),zt.position={start:point(Ht.start),end:void 0},It.push(zt)),this.stack.push(zt)}function st(Ht){const Bt=this.stack.pop();Bt.value+=this.sliceSerialize(Ht),Bt.position.end=point(Ht.end)}function qe(Ht){const Bt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const It=Bt.children[Bt.children.length-1];It.position.end=point(Ht.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&J.canContainEols.includes(Bt.type)&&(tt.call(this,Ht),st.call(this,Ht))}function Se(){this.data.atHardBreak=!0}function Re(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.value=Ht}function Be(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.value=Ht}function Ne(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.value=Ht}function Ue(){const Ht=this.stack[this.stack.length-1];if(this.data.inReference){const Bt=this.data.referenceType||"shortcut";Ht.type+="Reference",Ht.referenceType=Bt,delete Ht.url,delete Ht.title}else delete Ht.identifier,delete Ht.label;this.data.referenceType=void 0}function Ge(){const Ht=this.stack[this.stack.length-1];if(this.data.inReference){const Bt=this.data.referenceType||"shortcut";Ht.type+="Reference",Ht.referenceType=Bt,delete Ht.url,delete Ht.title}else delete Ht.identifier,delete Ht.label;this.data.referenceType=void 0}function Ye(Ht){const Bt=this.sliceSerialize(Ht),It=this.stack[this.stack.length-2];It.label=decodeString(Bt),It.identifier=normalizeIdentifier(Bt).toLowerCase()}function Qe(){const Ht=this.stack[this.stack.length-1],Bt=this.resume(),It=this.stack[this.stack.length-1];if(this.data.inReference=!0,It.type==="link"){const zt=Ht.children;It.children=zt}else It.alt=Bt}function Te(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.url=Ht}function Ke(){const Ht=this.resume(),Bt=this.stack[this.stack.length-1];Bt.title=Ht}function rt(){this.data.inReference=void 0}function it(){this.data.referenceType="collapsed"}function at(Ht){const Bt=this.resume(),It=this.stack[this.stack.length-1];It.label=Bt,It.identifier=normalizeIdentifier(this.sliceSerialize(Ht)).toLowerCase(),this.data.referenceType="full"}function lt(Ht){this.data.characterReferenceType=Ht.type}function ct(Ht){const Bt=this.sliceSerialize(Ht),It=this.data.characterReferenceType;let zt;It?(zt=decodeNumericCharacterReference(Bt,It==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):zt=decodeNamedCharacterReference(Bt);const Pt=this.stack[this.stack.length-1];Pt.value+=zt}function ot(Ht){const Bt=this.stack.pop();Bt.position.end=point(Ht.end)}function ft(Ht){st.call(this,Ht);const Bt=this.stack[this.stack.length-1];Bt.url=this.sliceSerialize(Ht)}function dt(Ht){st.call(this,Ht);const Bt=this.stack[this.stack.length-1];Bt.url="mailto:"+this.sliceSerialize(Ht)}function mt(){return{type:"blockquote",children:[]}}function kt(){return{type:"code",lang:null,meta:null,value:""}}function wt(){return{type:"inlineCode",value:""}}function Et(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ot(){return{type:"emphasis",children:[]}}function Rt(){return{type:"heading",depth:0,children:[]}}function gt(){return{type:"break"}}function $t(){return{type:"html",value:""}}function pt(){return{type:"image",title:null,url:"",alt:null}}function vt(){return{type:"link",title:null,url:"",children:[]}}function Mt(Ht){return{type:"list",ordered:Ht.type==="listOrdered",start:null,spread:Ht._spread,children:[]}}function St(Ht){return{type:"listItem",spread:Ht._spread,checked:null,children:[]}}function _t(){return{type:"paragraph",children:[]}}function Xt(){return{type:"strong",children:[]}}function Tt(){return{type:"text",value:""}}function Dt(){return{type:"thematicBreak"}}}function point(K){return{line:K.line,column:K.column,offset:K.offset}}function configure(K,J){let ne=-1;for(;++ne<J.length;){const oe=J[ne];Array.isArray(oe)?configure(K,oe):extension(K,oe)}}function extension(K,J){let ne;for(ne in J)if(own$2.call(J,ne))switch(ne){case"canContainEols":{const oe=J[ne];oe&&K[ne].push(...oe);break}case"transforms":{const oe=J[ne];oe&&K[ne].push(...oe);break}case"enter":case"exit":{const oe=J[ne];oe&&Object.assign(K[ne],oe);break}}}function defaultOnError(K,J){throw K?new Error("Cannot close `"+K.type+"` ("+stringifyPosition({start:K.start,end:K.end})+"): a different token (`"+J.type+"`, "+stringifyPosition({start:J.start,end:J.end})+") is open"):new Error("Cannot close document, a token (`"+J.type+"`, "+stringifyPosition({start:J.start,end:J.end})+") is still open")}function remarkParse(K){const J=this;J.parser=ne;function ne(oe){return fromMarkdown(oe,{...J.data("settings"),...K,extensions:J.data("micromarkExtensions")||[],mdastExtensions:J.data("fromMarkdownExtensions")||[]})}}function blockquote(K,J){const ne={type:"element",tagName:"blockquote",properties:{},children:K.wrap(K.all(J),!0)};return K.patch(J,ne),K.applyData(J,ne)}function hardBreak(K,J){const ne={type:"element",tagName:"br",properties:{},children:[]};return K.patch(J,ne),[K.applyData(J,ne),{type:"text",value:`
`}]}function code(K,J){const ne=J.value?J.value+`
`:"",oe={};J.lang&&(oe.className=["language-"+J.lang]);let ce={type:"element",tagName:"code",properties:oe,children:[{type:"text",value:ne}]};return J.meta&&(ce.data={meta:J.meta}),K.patch(J,ce),ce=K.applyData(J,ce),ce={type:"element",tagName:"pre",properties:{},children:[ce]},K.patch(J,ce),ce}function strikethrough(K,J){const ne={type:"element",tagName:"del",properties:{},children:K.all(J)};return K.patch(J,ne),K.applyData(J,ne)}function emphasis(K,J){const ne={type:"element",tagName:"em",properties:{},children:K.all(J)};return K.patch(J,ne),K.applyData(J,ne)}function footnoteReference(K,J){const ne=typeof K.options.clobberPrefix=="string"?K.options.clobberPrefix:"user-content-",oe=String(J.identifier).toUpperCase(),ce=normalizeUri(oe.toLowerCase()),ue=K.footnoteOrder.indexOf(oe);let Ae,pe=K.footnoteCounts.get(oe);pe===void 0?(pe=0,K.footnoteOrder.push(oe),Ae=K.footnoteOrder.length):Ae=ue+1,pe+=1,K.footnoteCounts.set(oe,pe);const ve={type:"element",tagName:"a",properties:{href:"#"+ne+"fn-"+ce,id:ne+"fnref-"+ce+(pe>1?"-"+pe:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(Ae)}]};K.patch(J,ve);const me={type:"element",tagName:"sup",properties:{},children:[ve]};return K.patch(J,me),K.applyData(J,me)}function heading(K,J){const ne={type:"element",tagName:"h"+J.depth,properties:{},children:K.all(J)};return K.patch(J,ne),K.applyData(J,ne)}function html(K,J){if(K.options.allowDangerousHtml){const ne={type:"raw",value:J.value};return K.patch(J,ne),K.applyData(J,ne)}}function revert(K,J){const ne=J.referenceType;let oe="]";if(ne==="collapsed"?oe+="[]":ne==="full"&&(oe+="["+(J.label||J.identifier)+"]"),J.type==="imageReference")return[{type:"text",value:"!["+J.alt+oe}];const ce=K.all(J),ue=ce[0];ue&&ue.type==="text"?ue.value="["+ue.value:ce.unshift({type:"text",value:"["});const Ae=ce[ce.length-1];return Ae&&Ae.type==="text"?Ae.value+=oe:ce.push({type:"text",value:oe}),ce}function imageReference(K,J){const ne=String(J.identifier).toUpperCase(),oe=K.definitionById.get(ne);if(!oe)return revert(K,J);const ce={src:normalizeUri(oe.url||""),alt:J.alt};oe.title!==null&&oe.title!==void 0&&(ce.title=oe.title);const ue={type:"element",tagName:"img",properties:ce,children:[]};return K.patch(J,ue),K.applyData(J,ue)}function image$1(K,J){const ne={src:normalizeUri(J.url)};J.alt!==null&&J.alt!==void 0&&(ne.alt=J.alt),J.title!==null&&J.title!==void 0&&(ne.title=J.title);const oe={type:"element",tagName:"img",properties:ne,children:[]};return K.patch(J,oe),K.applyData(J,oe)}function inlineCode(K,J){const ne={type:"text",value:J.value.replace(/\r?\n|\r/g," ")};K.patch(J,ne);const oe={type:"element",tagName:"code",properties:{},children:[ne]};return K.patch(J,oe),K.applyData(J,oe)}function linkReference(K,J){const ne=String(J.identifier).toUpperCase(),oe=K.definitionById.get(ne);if(!oe)return revert(K,J);const ce={href:normalizeUri(oe.url||"")};oe.title!==null&&oe.title!==void 0&&(ce.title=oe.title);const ue={type:"element",tagName:"a",properties:ce,children:K.all(J)};return K.patch(J,ue),K.applyData(J,ue)}function link(K,J){const ne={href:normalizeUri(J.url)};J.title!==null&&J.title!==void 0&&(ne.title=J.title);const oe={type:"element",tagName:"a",properties:ne,children:K.all(J)};return K.patch(J,oe),K.applyData(J,oe)}function listItem$2(K,J,ne){const oe=K.all(J),ce=ne?listLoose(ne):listItemLoose(J),ue={},Ae=[];if(typeof J.checked=="boolean"){const ge=oe[0];let ye;ge&&ge.type==="element"&&ge.tagName==="p"?ye=ge:(ye={type:"element",tagName:"p",properties:{},children:[]},oe.unshift(ye)),ye.children.length>0&&ye.children.unshift({type:"text",value:" "}),ye.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:J.checked,disabled:!0},children:[]}),ue.className=["task-list-item"]}let pe=-1;for(;++pe<oe.length;){const ge=oe[pe];(ce||pe!==0||ge.type!=="element"||ge.tagName!=="p")&&Ae.push({type:"text",value:`
`}),ge.type==="element"&&ge.tagName==="p"&&!ce?Ae.push(...ge.children):Ae.push(ge)}const ve=oe[oe.length-1];ve&&(ce||ve.type!=="element"||ve.tagName!=="p")&&Ae.push({type:"text",value:`
`});const me={type:"element",tagName:"li",properties:ue,children:Ae};return K.patch(J,me),K.applyData(J,me)}function listLoose(K){let J=!1;if(K.type==="list"){J=K.spread||!1;const ne=K.children;let oe=-1;for(;!J&&++oe<ne.length;)J=listItemLoose(ne[oe])}return J}function listItemLoose(K){const J=K.spread;return J??K.children.length>1}function list$1(K,J){const ne={},oe=K.all(J);let ce=-1;for(typeof J.start=="number"&&J.start!==1&&(ne.start=J.start);++ce<oe.length;){const Ae=oe[ce];if(Ae.type==="element"&&Ae.tagName==="li"&&Ae.properties&&Array.isArray(Ae.properties.className)&&Ae.properties.className.includes("task-list-item")){ne.className=["contains-task-list"];break}}const ue={type:"element",tagName:J.ordered?"ol":"ul",properties:ne,children:K.wrap(oe,!0)};return K.patch(J,ue),K.applyData(J,ue)}function paragraph(K,J){const ne={type:"element",tagName:"p",properties:{},children:K.all(J)};return K.patch(J,ne),K.applyData(J,ne)}function root$b(K,J){const ne={type:"root",children:K.wrap(K.all(J))};return K.patch(J,ne),K.applyData(J,ne)}function strong(K,J){const ne={type:"element",tagName:"strong",properties:{},children:K.all(J)};return K.patch(J,ne),K.applyData(J,ne)}function table(K,J){const ne=K.all(J),oe=ne.shift(),ce=[];if(oe){const Ae={type:"element",tagName:"thead",properties:{},children:K.wrap([oe],!0)};K.patch(J.children[0],Ae),ce.push(Ae)}if(ne.length>0){const Ae={type:"element",tagName:"tbody",properties:{},children:K.wrap(ne,!0)},pe=pointStart(J.children[1]),ve=pointEnd(J.children[J.children.length-1]);pe&&ve&&(Ae.position={start:pe,end:ve}),ce.push(Ae)}const ue={type:"element",tagName:"table",properties:{},children:K.wrap(ce,!0)};return K.patch(J,ue),K.applyData(J,ue)}function tableRow(K,J,ne){const oe=ne?ne.children:void 0,ue=(oe?oe.indexOf(J):1)===0?"th":"td",Ae=ne&&ne.type==="table"?ne.align:void 0,pe=Ae?Ae.length:J.children.length;let ve=-1;const me=[];for(;++ve<pe;){const ye=J.children[ve],xe={},_e=Ae?Ae[ve]:void 0;_e&&(xe.align=_e);let $e={type:"element",tagName:ue,properties:xe,children:[]};ye&&($e.children=K.all(ye),K.patch(ye,$e),$e=K.applyData(ye,$e)),me.push($e)}const ge={type:"element",tagName:"tr",properties:{},children:K.wrap(me,!0)};return K.patch(J,ge),K.applyData(J,ge)}function tableCell(K,J){const ne={type:"element",tagName:"td",properties:{},children:K.all(J)};return K.patch(J,ne),K.applyData(J,ne)}const tab=9,space=32;function trimLines(K){const J=String(K),ne=/\r?\n|\r/g;let oe=ne.exec(J),ce=0;const ue=[];for(;oe;)ue.push(trimLine(J.slice(ce,oe.index),ce>0,!0),oe[0]),ce=oe.index+oe[0].length,oe=ne.exec(J);return ue.push(trimLine(J.slice(ce),ce>0,!1)),ue.join("")}function trimLine(K,J,ne){let oe=0,ce=K.length;if(J){let ue=K.codePointAt(oe);for(;ue===tab||ue===space;)oe++,ue=K.codePointAt(oe)}if(ne){let ue=K.codePointAt(ce-1);for(;ue===tab||ue===space;)ce--,ue=K.codePointAt(ce-1)}return ce>oe?K.slice(oe,ce):""}function text$1(K,J){const ne={type:"text",value:trimLines(String(J.value))};return K.patch(J,ne),K.applyData(J,ne)}function thematicBreak(K,J){const ne={type:"element",tagName:"hr",properties:{},children:[]};return K.patch(J,ne),K.applyData(J,ne)}const handlers={blockquote,break:hardBreak,code,delete:strikethrough,emphasis,footnoteReference,heading,html,imageReference,image:image$1,inlineCode,linkReference,link,listItem:listItem$2,list:list$1,paragraph,root:root$b,strong,table,tableCell,tableRow,text:text$1,thematicBreak,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env=typeof self=="object"?self:globalThis,deserializer=(K,J)=>{const ne=(ce,ue)=>(K.set(ue,ce),ce),oe=ce=>{if(K.has(ce))return K.get(ce);const[ue,Ae]=J[ce];switch(ue){case PRIMITIVE:case VOID:return ne(Ae,ce);case ARRAY:{const pe=ne([],ce);for(const ve of Ae)pe.push(oe(ve));return pe}case OBJECT:{const pe=ne({},ce);for(const[ve,me]of Ae)pe[oe(ve)]=oe(me);return pe}case DATE:return ne(new Date(Ae),ce);case REGEXP:{const{source:pe,flags:ve}=Ae;return ne(new RegExp(pe,ve),ce)}case MAP:{const pe=ne(new Map,ce);for(const[ve,me]of Ae)pe.set(oe(ve),oe(me));return pe}case SET:{const pe=ne(new Set,ce);for(const ve of Ae)pe.add(oe(ve));return pe}case ERROR:{const{name:pe,message:ve}=Ae;return ne(new env[pe](ve),ce)}case BIGINT:return ne(BigInt(Ae),ce);case"BigInt":return ne(Object(BigInt(Ae)),ce)}return ne(new env[ue](Ae),ce)};return oe},deserialize=K=>deserializer(new Map,K)(0),EMPTY="",{toString}={},{keys:keys$2}=Object,typeOf=K=>{const J=typeof K;if(J!=="object"||!K)return[PRIMITIVE,J];const ne=toString.call(K).slice(8,-1);switch(ne){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY]}return ne.includes("Array")?[ARRAY,ne]:ne.includes("Error")?[ERROR,ne]:[OBJECT,ne]},shouldSkip=([K,J])=>K===PRIMITIVE&&(J==="function"||J==="symbol"),serializer=(K,J,ne,oe)=>{const ce=(Ae,pe)=>{const ve=oe.push(Ae)-1;return ne.set(pe,ve),ve},ue=Ae=>{if(ne.has(Ae))return ne.get(Ae);let[pe,ve]=typeOf(Ae);switch(pe){case PRIMITIVE:{let ge=Ae;switch(ve){case"bigint":pe=BIGINT,ge=Ae.toString();break;case"function":case"symbol":if(K)throw new TypeError("unable to serialize "+ve);ge=null;break;case"undefined":return ce([VOID],Ae)}return ce([pe,ge],Ae)}case ARRAY:{if(ve)return ce([ve,[...Ae]],Ae);const ge=[],ye=ce([pe,ge],Ae);for(const xe of Ae)ge.push(ue(xe));return ye}case OBJECT:{if(ve)switch(ve){case"BigInt":return ce([ve,Ae.toString()],Ae);case"Boolean":case"Number":case"String":return ce([ve,Ae.valueOf()],Ae)}if(J&&"toJSON"in Ae)return ue(Ae.toJSON());const ge=[],ye=ce([pe,ge],Ae);for(const xe of keys$2(Ae))(K||!shouldSkip(typeOf(Ae[xe])))&&ge.push([ue(xe),ue(Ae[xe])]);return ye}case DATE:return ce([pe,Ae.toISOString()],Ae);case REGEXP:{const{source:ge,flags:ye}=Ae;return ce([pe,{source:ge,flags:ye}],Ae)}case MAP:{const ge=[],ye=ce([pe,ge],Ae);for(const[xe,_e]of Ae)(K||!(shouldSkip(typeOf(xe))||shouldSkip(typeOf(_e))))&&ge.push([ue(xe),ue(_e)]);return ye}case SET:{const ge=[],ye=ce([pe,ge],Ae);for(const xe of Ae)(K||!shouldSkip(typeOf(xe)))&&ge.push(ue(xe));return ye}}const{message:me}=Ae;return ce([pe,{name:ve,message:me}],Ae)};return ue},serialize=(K,{json:J,lossy:ne}={})=>{const oe=[];return serializer(!(J||ne),!!J,new Map,oe)(K),oe},structuredClone$1=typeof structuredClone=="function"?(K,J)=>J&&("json"in J||"lossy"in J)?deserialize(serialize(K,J)):structuredClone(K):(K,J)=>deserialize(serialize(K,J));function defaultFootnoteBackContent(K,J){const ne=[{type:"text",value:""}];return J>1&&ne.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(J)}]}),ne}function defaultFootnoteBackLabel(K,J){return"Back to reference "+(K+1)+(J>1?"-"+J:"")}function footer$3(K){const J=typeof K.options.clobberPrefix=="string"?K.options.clobberPrefix:"user-content-",ne=K.options.footnoteBackContent||defaultFootnoteBackContent,oe=K.options.footnoteBackLabel||defaultFootnoteBackLabel,ce=K.options.footnoteLabel||"Footnotes",ue=K.options.footnoteLabelTagName||"h2",Ae=K.options.footnoteLabelProperties||{className:["sr-only"]},pe=[];let ve=-1;for(;++ve<K.footnoteOrder.length;){const me=K.footnoteById.get(K.footnoteOrder[ve]);if(!me)continue;const ge=K.all(me),ye=String(me.identifier).toUpperCase(),xe=normalizeUri(ye.toLowerCase());let _e=0;const $e=[],Ie=K.footnoteCounts.get(ye);for(;Ie!==void 0&&++_e<=Ie;){$e.length>0&&$e.push({type:"text",value:" "});let je=typeof ne=="string"?ne:ne(ve,_e);typeof je=="string"&&(je={type:"text",value:je}),$e.push({type:"element",tagName:"a",properties:{href:"#"+J+"fnref-"+xe+(_e>1?"-"+_e:""),dataFootnoteBackref:"",ariaLabel:typeof oe=="string"?oe:oe(ve,_e),className:["data-footnote-backref"]},children:Array.isArray(je)?je:[je]})}const Fe=ge[ge.length-1];if(Fe&&Fe.type==="element"&&Fe.tagName==="p"){const je=Fe.children[Fe.children.length-1];je&&je.type==="text"?je.value+=" ":Fe.children.push({type:"text",value:" "}),Fe.children.push(...$e)}else ge.push(...$e);const ke={type:"element",tagName:"li",properties:{id:J+"fn-"+xe},children:K.wrap(ge,!0)};K.patch(me,ke),pe.push(ke)}if(pe.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:ue,properties:{...structuredClone$1(Ae),id:"footnote-label"},children:[{type:"text",value:ce}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:K.wrap(pe,!0)},{type:"text",value:`
`}]}}const convert=function(K){if(K==null)return ok;if(typeof K=="function")return castFactory(K);if(typeof K=="object")return Array.isArray(K)?anyFactory(K):propsFactory(K);if(typeof K=="string")return typeFactory(K);throw new Error("Expected function, string, or object as test")};function anyFactory(K){const J=[];let ne=-1;for(;++ne<K.length;)J[ne]=convert(K[ne]);return castFactory(oe);function oe(...ce){let ue=-1;for(;++ue<J.length;)if(J[ue].apply(this,ce))return!0;return!1}}function propsFactory(K){const J=K;return castFactory(ne);function ne(oe){const ce=oe;let ue;for(ue in K)if(ce[ue]!==J[ue])return!1;return!0}}function typeFactory(K){return castFactory(J);function J(ne){return ne&&ne.type===K}}function castFactory(K){return J;function J(ne,oe,ce){return!!(looksLikeANode(ne)&&K.call(this,ne,typeof oe=="number"?oe:void 0,ce||void 0))}}function ok(){return!0}function looksLikeANode(K){return K!==null&&typeof K=="object"&&"type"in K}function color$3(K){return K}const empty$2=[],CONTINUE=!0,EXIT=!1,SKIP$2="skip";function visitParents(K,J,ne,oe){let ce;typeof J=="function"&&typeof ne!="function"?(oe=ne,ne=J):ce=J;const ue=convert(ce),Ae=oe?-1:1;pe(K,void 0,[])();function pe(ve,me,ge){const ye=ve&&typeof ve=="object"?ve:{};if(typeof ye.type=="string"){const _e=typeof ye.tagName=="string"?ye.tagName:typeof ye.name=="string"?ye.name:void 0;Object.defineProperty(xe,"name",{value:"node ("+(ve.type+(_e?"<"+_e+">":""))+")"})}return xe;function xe(){let _e=empty$2,$e,Ie,Fe;if((!J||ue(ve,me,ge[ge.length-1]||void 0))&&(_e=toResult(ne(ve,ge)),_e[0]===EXIT))return _e;if("children"in ve&&ve.children){const ke=ve;if(ke.children&&_e[0]!==SKIP$2)for(Ie=(oe?ke.children.length:-1)+Ae,Fe=ge.concat(ke);Ie>-1&&Ie<ke.children.length;){const je=ke.children[Ie];if($e=pe(je,Ie,Fe)(),$e[0]===EXIT)return $e;Ie=typeof $e[1]=="number"?$e[1]:Ie+Ae}}return _e}}}function toResult(K){return Array.isArray(K)?K:typeof K=="number"?[CONTINUE,K]:K==null?empty$2:[K]}function visit(K,J,ne,oe){let ce,ue,Ae;typeof J=="function"&&typeof ne!="function"?(ue=void 0,Ae=J,ce=ne):(ue=J,Ae=ne,ce=oe),visitParents(K,ue,pe,ce);function pe(ve,me){const ge=me[me.length-1],ye=ge?ge.children.indexOf(ve):void 0;return Ae(ve,ye,ge)}}const own$1={}.hasOwnProperty,emptyOptions={};function createState(K,J){const ne=J||emptyOptions,oe=new Map,ce=new Map,ue=new Map,Ae={...handlers,...ne.handlers},pe={all:me,applyData,definitionById:oe,footnoteById:ce,footnoteCounts:ue,footnoteOrder:[],handlers:Ae,one:ve,options:ne,patch,wrap:wrap$1};return visit(K,function(ge){if(ge.type==="definition"||ge.type==="footnoteDefinition"){const ye=ge.type==="definition"?oe:ce,xe=String(ge.identifier).toUpperCase();ye.has(xe)||ye.set(xe,ge)}}),pe;function ve(ge,ye){const xe=ge.type,_e=pe.handlers[xe];if(own$1.call(pe.handlers,xe)&&_e)return _e(pe,ge,ye);if(pe.options.passThrough&&pe.options.passThrough.includes(xe)){if("children"in ge){const{children:Ie,...Fe}=ge,ke=structuredClone$1(Fe);return ke.children=pe.all(ge),ke}return structuredClone$1(ge)}return(pe.options.unknownHandler||defaultUnknownHandler)(pe,ge,ye)}function me(ge){const ye=[];if("children"in ge){const xe=ge.children;let _e=-1;for(;++_e<xe.length;){const $e=pe.one(xe[_e],ge);if($e){if(_e&&xe[_e-1].type==="break"&&(!Array.isArray($e)&&$e.type==="text"&&($e.value=trimMarkdownSpaceStart($e.value)),!Array.isArray($e)&&$e.type==="element")){const Ie=$e.children[0];Ie&&Ie.type==="text"&&(Ie.value=trimMarkdownSpaceStart(Ie.value))}Array.isArray($e)?ye.push(...$e):ye.push($e)}}}return ye}}function patch(K,J){K.position&&(J.position=position$2(K))}function applyData(K,J){let ne=J;if(K&&K.data){const oe=K.data.hName,ce=K.data.hChildren,ue=K.data.hProperties;if(typeof oe=="string")if(ne.type==="element")ne.tagName=oe;else{const Ae="children"in ne?ne.children:[ne];ne={type:"element",tagName:oe,properties:{},children:Ae}}ne.type==="element"&&ue&&Object.assign(ne.properties,structuredClone$1(ue)),"children"in ne&&ne.children&&ce!==null&&ce!==void 0&&(ne.children=ce)}return ne}function defaultUnknownHandler(K,J){const ne=J.data||{},oe="value"in J&&!(own$1.call(ne,"hProperties")||own$1.call(ne,"hChildren"))?{type:"text",value:J.value}:{type:"element",tagName:"div",properties:{},children:K.all(J)};return K.patch(J,oe),K.applyData(J,oe)}function wrap$1(K,J){const ne=[];let oe=-1;for(J&&ne.push({type:"text",value:`
`});++oe<K.length;)oe&&ne.push({type:"text",value:`
`}),ne.push(K[oe]);return J&&K.length>0&&ne.push({type:"text",value:`
`}),ne}function trimMarkdownSpaceStart(K){let J=0,ne=K.charCodeAt(J);for(;ne===9||ne===32;)J++,ne=K.charCodeAt(J);return K.slice(J)}function toHast(K,J){const ne=createState(K,J),oe=ne.one(K,void 0),ce=footer$3(ne),ue=Array.isArray(oe)?{type:"root",children:oe}:oe||{type:"root",children:[]};return ce&&ue.children.push({type:"text",value:`
`},ce),ue}function remarkRehype(K,J){return K&&"run"in K?async function(ne,oe){const ce=toHast(ne,{file:oe,...J});await K.run(ce,oe)}:function(ne,oe){return toHast(ne,{file:oe,...K||J})}}function bail(K){if(K)throw K}var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,isArray$4=function(J){return typeof Array.isArray=="function"?Array.isArray(J):toStr.call(J)==="[object Array]"},isPlainObject$1=function(J){if(!J||toStr.call(J)!=="[object Object]")return!1;var ne=hasOwn.call(J,"constructor"),oe=J.constructor&&J.constructor.prototype&&hasOwn.call(J.constructor.prototype,"isPrototypeOf");if(J.constructor&&!ne&&!oe)return!1;var ce;for(ce in J);return typeof ce>"u"||hasOwn.call(J,ce)},setProperty=function(J,ne){defineProperty&&ne.name==="__proto__"?defineProperty(J,ne.name,{enumerable:!0,configurable:!0,value:ne.newValue,writable:!0}):J[ne.name]=ne.newValue},getProperty=function(J,ne){if(ne==="__proto__")if(hasOwn.call(J,ne)){if(gOPD)return gOPD(J,ne).value}else return;return J[ne]},extend$1=function K(){var J,ne,oe,ce,ue,Ae,pe=arguments[0],ve=1,me=arguments.length,ge=!1;for(typeof pe=="boolean"&&(ge=pe,pe=arguments[1]||{},ve=2),(pe==null||typeof pe!="object"&&typeof pe!="function")&&(pe={});ve<me;++ve)if(J=arguments[ve],J!=null)for(ne in J)oe=getProperty(pe,ne),ce=getProperty(J,ne),pe!==ce&&(ge&&ce&&(isPlainObject$1(ce)||(ue=isArray$4(ce)))?(ue?(ue=!1,Ae=oe&&isArray$4(oe)?oe:[]):Ae=oe&&isPlainObject$1(oe)?oe:{},setProperty(pe,{name:ne,newValue:K(ge,Ae,ce)})):typeof ce<"u"&&setProperty(pe,{name:ne,newValue:ce}));return pe};const extend$2=getDefaultExportFromCjs(extend$1);function isPlainObject(K){if(typeof K!="object"||K===null)return!1;const J=Object.getPrototypeOf(K);return(J===null||J===Object.prototype||Object.getPrototypeOf(J)===null)&&!(Symbol.toStringTag in K)&&!(Symbol.iterator in K)}function trough(){const K=[],J={run:ne,use:oe};return J;function ne(...ce){let ue=-1;const Ae=ce.pop();if(typeof Ae!="function")throw new TypeError("Expected function as last argument, not "+Ae);pe(null,...ce);function pe(ve,...me){const ge=K[++ue];let ye=-1;if(ve){Ae(ve);return}for(;++ye<ce.length;)(me[ye]===null||me[ye]===void 0)&&(me[ye]=ce[ye]);ce=me,ge?wrap(ge,pe)(...me):Ae(null,...me)}}function oe(ce){if(typeof ce!="function")throw new TypeError("Expected `middelware` to be a function, not "+ce);return K.push(ce),J}}function wrap(K,J){let ne;return oe;function oe(...Ae){const pe=K.length>Ae.length;let ve;pe&&Ae.push(ce);try{ve=K.apply(this,Ae)}catch(me){const ge=me;if(pe&&ne)throw ge;return ce(ge)}pe||(ve&&ve.then&&typeof ve.then=="function"?ve.then(ue,ce):ve instanceof Error?ce(ve):ue(ve))}function ce(Ae,...pe){ne||(ne=!0,J(Ae,...pe))}function ue(Ae){ce(null,Ae)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(K,J){if(J!==void 0&&typeof J!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(K);let ne=0,oe=-1,ce=K.length,ue;if(J===void 0||J.length===0||J.length>K.length){for(;ce--;)if(K.codePointAt(ce)===47){if(ue){ne=ce+1;break}}else oe<0&&(ue=!0,oe=ce+1);return oe<0?"":K.slice(ne,oe)}if(J===K)return"";let Ae=-1,pe=J.length-1;for(;ce--;)if(K.codePointAt(ce)===47){if(ue){ne=ce+1;break}}else Ae<0&&(ue=!0,Ae=ce+1),pe>-1&&(K.codePointAt(ce)===J.codePointAt(pe--)?pe<0&&(oe=ce):(pe=-1,oe=Ae));return ne===oe?oe=Ae:oe<0&&(oe=K.length),K.slice(ne,oe)}function dirname(K){if(assertPath$1(K),K.length===0)return".";let J=-1,ne=K.length,oe;for(;--ne;)if(K.codePointAt(ne)===47){if(oe){J=ne;break}}else oe||(oe=!0);return J<0?K.codePointAt(0)===47?"/":".":J===1&&K.codePointAt(0)===47?"//":K.slice(0,J)}function extname(K){assertPath$1(K);let J=K.length,ne=-1,oe=0,ce=-1,ue=0,Ae;for(;J--;){const pe=K.codePointAt(J);if(pe===47){if(Ae){oe=J+1;break}continue}ne<0&&(Ae=!0,ne=J+1),pe===46?ce<0?ce=J:ue!==1&&(ue=1):ce>-1&&(ue=-1)}return ce<0||ne<0||ue===0||ue===1&&ce===ne-1&&ce===oe+1?"":K.slice(ce,ne)}function join(...K){let J=-1,ne;for(;++J<K.length;)assertPath$1(K[J]),K[J]&&(ne=ne===void 0?K[J]:ne+"/"+K[J]);return ne===void 0?".":normalize(ne)}function normalize(K){assertPath$1(K);const J=K.codePointAt(0)===47;let ne=normalizeString(K,!J);return ne.length===0&&!J&&(ne="."),ne.length>0&&K.codePointAt(K.length-1)===47&&(ne+="/"),J?"/"+ne:ne}function normalizeString(K,J){let ne="",oe=0,ce=-1,ue=0,Ae=-1,pe,ve;for(;++Ae<=K.length;){if(Ae<K.length)pe=K.codePointAt(Ae);else{if(pe===47)break;pe=47}if(pe===47){if(!(ce===Ae-1||ue===1))if(ce!==Ae-1&&ue===2){if(ne.length<2||oe!==2||ne.codePointAt(ne.length-1)!==46||ne.codePointAt(ne.length-2)!==46){if(ne.length>2){if(ve=ne.lastIndexOf("/"),ve!==ne.length-1){ve<0?(ne="",oe=0):(ne=ne.slice(0,ve),oe=ne.length-1-ne.lastIndexOf("/")),ce=Ae,ue=0;continue}}else if(ne.length>0){ne="",oe=0,ce=Ae,ue=0;continue}}J&&(ne=ne.length>0?ne+"/..":"..",oe=2)}else ne.length>0?ne+="/"+K.slice(ce+1,Ae):ne=K.slice(ce+1,Ae),oe=Ae-ce-1;ce=Ae,ue=0}else pe===46&&ue>-1?ue++:ue=-1}return ne}function assertPath$1(K){if(typeof K!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(K))}const minproc={cwd};function cwd(){return"/"}function isUrl(K){return!!(K!==null&&typeof K=="object"&&"href"in K&&K.href&&"protocol"in K&&K.protocol&&K.auth===void 0)}function urlToPath(K){if(typeof K=="string")K=new URL(K);else if(!isUrl(K)){const J=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+K+"`");throw J.code="ERR_INVALID_ARG_TYPE",J}if(K.protocol!=="file:"){const J=new TypeError("The URL must be of scheme file");throw J.code="ERR_INVALID_URL_SCHEME",J}return getPathFromURLPosix(K)}function getPathFromURLPosix(K){if(K.hostname!==""){const oe=new TypeError('File URL host must be "localhost" or empty on darwin');throw oe.code="ERR_INVALID_FILE_URL_HOST",oe}const J=K.pathname;let ne=-1;for(;++ne<J.length;)if(J.codePointAt(ne)===37&&J.codePointAt(ne+1)===50){const oe=J.codePointAt(ne+2);if(oe===70||oe===102){const ce=new TypeError("File URL path must not include encoded / characters");throw ce.code="ERR_INVALID_FILE_URL_PATH",ce}}return decodeURIComponent(J)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(J){let ne;J?isUrl(J)?ne={path:J}:typeof J=="string"||isUint8Array$1(J)?ne={value:J}:ne=J:ne={},this.cwd="cwd"in ne?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let oe=-1;for(;++oe<order.length;){const ue=order[oe];ue in ne&&ne[ue]!==void 0&&ne[ue]!==null&&(this[ue]=ue==="history"?[...ne[ue]]:ne[ue])}let ce;for(ce in ne)order.includes(ce)||(this[ce]=ne[ce])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(J){assertNonEmpty(J,"basename"),assertPart(J,"basename"),this.path=minpath.join(this.dirname||"",J)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(J){assertPath(this.basename,"dirname"),this.path=minpath.join(J||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(J){if(assertPart(J,"extname"),assertPath(this.dirname,"extname"),J){if(J.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(J.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(J||""))}get path(){return this.history[this.history.length-1]}set path(J){isUrl(J)&&(J=urlToPath(J)),assertNonEmpty(J,"path"),this.path!==J&&this.history.push(J)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(J){assertNonEmpty(J,"stem"),assertPart(J,"stem"),this.path=minpath.join(this.dirname||"",J+(this.extname||""))}fail(J,ne,oe){const ce=this.message(J,ne,oe);throw ce.fatal=!0,ce}info(J,ne,oe){const ce=this.message(J,ne,oe);return ce.fatal=void 0,ce}message(J,ne,oe){const ce=new VFileMessage(J,ne,oe);return this.path&&(ce.name=this.path+":"+ce.name,ce.file=this.path),ce.fatal=!1,this.messages.push(ce),ce}toString(J){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(J||void 0).decode(this.value)}}function assertPart(K,J){if(K&&K.includes(minpath.sep))throw new Error("`"+J+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(K,J){if(!K)throw new Error("`"+J+"` cannot be empty")}function assertPath(K,J){if(!K)throw new Error("Setting `"+J+"` requires `path` to be set too")}function isUint8Array$1(K){return!!(K&&typeof K=="object"&&"byteLength"in K&&"byteOffset"in K)}const CallableInstance=function(K){const oe=this.constructor.prototype,ce=oe[K],ue=function(){return ce.apply(ue,arguments)};return Object.setPrototypeOf(ue,oe),ue},own={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const J=new Processor;let ne=-1;for(;++ne<this.attachers.length;){const oe=this.attachers[ne];J.use(...oe)}return J.data(extend$2(!0,{},this.namespace)),J}data(J,ne){return typeof J=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[J]=ne,this):own.call(this.namespace,J)&&this.namespace[J]||void 0:J?(assertUnfrozen("data",this.frozen),this.namespace=J,this):this.namespace}freeze(){if(this.frozen)return this;const J=this;for(;++this.freezeIndex<this.attachers.length;){const[ne,...oe]=this.attachers[this.freezeIndex];if(oe[0]===!1)continue;oe[0]===!0&&(oe[0]=void 0);const ce=ne.call(J,...oe);typeof ce=="function"&&this.transformers.use(ce)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(J){this.freeze();const ne=vfile(J),oe=this.parser||this.Parser;return assertParser("parse",oe),oe(String(ne),ne)}process(J,ne){const oe=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),ne?ce(void 0,ne):new Promise(ce);function ce(ue,Ae){const pe=vfile(J),ve=oe.parse(pe);oe.run(ve,pe,function(ge,ye,xe){if(ge||!ye||!xe)return me(ge);const _e=ye,$e=oe.stringify(_e,xe);looksLikeAValue($e)?xe.value=$e:xe.result=$e,me(ge,xe)});function me(ge,ye){ge||!ye?Ae(ge):ue?ue(ye):ne(void 0,ye)}}}processSync(J){let ne=!1,oe;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(J,ce),assertDone("processSync","process",ne),oe;function ce(ue,Ae){ne=!0,bail(ue),oe=Ae}}run(J,ne,oe){assertNode(J),this.freeze();const ce=this.transformers;return!oe&&typeof ne=="function"&&(oe=ne,ne=void 0),oe?ue(void 0,oe):new Promise(ue);function ue(Ae,pe){const ve=vfile(ne);ce.run(J,ve,me);function me(ge,ye,xe){const _e=ye||J;ge?pe(ge):Ae?Ae(_e):oe(void 0,_e,xe)}}}runSync(J,ne){let oe=!1,ce;return this.run(J,ne,ue),assertDone("runSync","run",oe),ce;function ue(Ae,pe){bail(Ae),ce=pe,oe=!0}}stringify(J,ne){this.freeze();const oe=vfile(ne),ce=this.compiler||this.Compiler;return assertCompiler("stringify",ce),assertNode(J),ce(J,oe)}use(J,...ne){const oe=this.attachers,ce=this.namespace;if(assertUnfrozen("use",this.frozen),J!=null)if(typeof J=="function")ve(J,ne);else if(typeof J=="object")Array.isArray(J)?pe(J):Ae(J);else throw new TypeError("Expected usable value, not `"+J+"`");return this;function ue(me){if(typeof me=="function")ve(me,[]);else if(typeof me=="object")if(Array.isArray(me)){const[ge,...ye]=me;ve(ge,ye)}else Ae(me);else throw new TypeError("Expected usable value, not `"+me+"`")}function Ae(me){if(!("plugins"in me)&&!("settings"in me))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");pe(me.plugins),me.settings&&(ce.settings=extend$2(!0,ce.settings,me.settings))}function pe(me){let ge=-1;if(me!=null)if(Array.isArray(me))for(;++ge<me.length;){const ye=me[ge];ue(ye)}else throw new TypeError("Expected a list of plugins, not `"+me+"`")}function ve(me,ge){let ye=-1,xe=-1;for(;++ye<oe.length;)if(oe[ye][0]===me){xe=ye;break}if(xe===-1)oe.push([me,...ge]);else if(ge.length>0){let[_e,...$e]=ge;const Ie=oe[xe][1];isPlainObject(Ie)&&isPlainObject(_e)&&(_e=extend$2(!0,Ie,_e)),oe[xe]=[me,_e,...$e]}}}}const unified=new Processor().freeze();function assertParser(K,J){if(typeof J!="function")throw new TypeError("Cannot `"+K+"` without `parser`")}function assertCompiler(K,J){if(typeof J!="function")throw new TypeError("Cannot `"+K+"` without `compiler`")}function assertUnfrozen(K,J){if(J)throw new Error("Cannot call `"+K+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(K){if(!isPlainObject(K)||typeof K.type!="string")throw new TypeError("Expected node, got `"+K+"`")}function assertDone(K,J,ne){if(!ne)throw new Error("`"+K+"` finished async. Use `"+J+"` instead")}function vfile(K){return looksLikeAVFile(K)?K:new VFile(K)}function looksLikeAVFile(K){return!!(K&&typeof K=="object"&&"message"in K&&"messages"in K)}function looksLikeAValue(K){return typeof K=="string"||isUint8Array(K)}function isUint8Array(K){return!!(K&&typeof K=="object"&&"byteLength"in K&&"byteOffset"in K)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(K){const J=K.allowedElements,ne=K.allowElement,oe=K.children||"",ce=K.className,ue=K.components,Ae=K.disallowedElements,pe=K.rehypePlugins||emptyPlugins,ve=K.remarkPlugins||emptyPlugins,me=K.remarkRehypeOptions?{...K.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions,ge=K.skipHtml,ye=K.unwrapDisallowed,xe=K.urlTransform||defaultUrlTransform,_e=unified().use(remarkParse).use(ve).use(remarkRehype,me).use(pe),$e=new VFile;typeof oe=="string"&&($e.value=oe);for(const je of deprecations)Object.hasOwn(K,je.from)&&(""+je.from+(je.to?"use `"+je.to+"` instead":"remove it")+changelog+je.id,void 0);const Ie=_e.parse($e);let Fe=_e.runSync(Ie,$e);return ce&&(Fe={type:"element",tagName:"div",properties:{className:ce},children:Fe.type==="root"?Fe.children:[Fe]}),visit(Fe,ke),toJsxRuntime(Fe,{Fragment:jsxRuntimeExports.Fragment,components:ue,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function ke(je,We,ze){if(je.type==="raw"&&ze&&typeof We=="number")return ge?ze.children.splice(We,1):ze.children[We]={type:"text",value:je.value},We;if(je.type==="element"){let Xe;for(Xe in urlAttributes)if(Object.hasOwn(urlAttributes,Xe)&&Object.hasOwn(je.properties,Xe)){const Je=je.properties[Xe],nt=urlAttributes[Xe];(nt===null||nt.includes(je.tagName))&&(je.properties[Xe]=xe(String(Je||""),Xe,je))}}if(je.type==="element"){let Xe=J?!J.includes(je.tagName):Ae?Ae.includes(je.tagName):!1;if(!Xe&&ne&&typeof We=="number"&&(Xe=!ne(je,We,ze)),Xe&&ze&&typeof We=="number")return ye&&je.children?ze.children.splice(We,1,...je.children):ze.children.splice(We,1),We}}}function defaultUrlTransform(K){const J=K.indexOf(":"),ne=K.indexOf("?"),oe=K.indexOf("#"),ce=K.indexOf("/");return J<0||ce>-1&&J>ce||ne>-1&&J>ne||oe>-1&&J>oe||safeProtocol.test(K.slice(0,J))?K:""}const LazyEditor=reactExports.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>index$1),void 0).then(K=>({default:K.Editor}))),CodeEditor=({isReadonly:K=!1,code:J,language:ne,onChange:oe,onValidate:ce,wordWrap:ue,isAutoFocus:Ae=!1,cursorPosition:pe,onChangeCursorPosition:ve})=>{loader$1.config({monaco});const me=reactExports.useRef(null),ge=useSelector$1(selectApplicationTheme),{debounce:ye}=useDebounce(),[xe,_e]=reactExports.useState("");reactExports.useEffect(()=>{me.current&&pe&&xe!==J&&(me.current.setPosition(new Position$1(pe.lineNumber,pe.column)),_e(J||""))},[J,pe,xe]);const $e=ge===THEME_KEYS.dark?"vs-dark":THEME_KEYS[ge.toLocaleLowerCase()];if(ne===LanguageEnum.Markdown)return jsxRuntimeExports.jsx("div",{className:"markdown-viewer",children:jsxRuntimeExports.jsx(Markdown,{children:J})});const Ie=ke=>{Ae&&ke.focus(),me.current=ke,ke.onDidChangeCursorPosition(Fe)},Fe=ke=>{const{lineNumber:je,column:We}=ke.position;ve==null||ve(new Position$1(je,We))};return jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PF,{loading:!0}),children:jsxRuntimeExports.jsx(LazyEditor,{loading:null,className:"code-editor",language:ne==null?void 0:ne.toLowerCase(),defaultValue:"",value:J,theme:$e,width:"100%",height:"100%",onMount:Ie,onChange:ke=>{oe&&ye({fn:()=>oe(ke),value:ke})},onValidate:ce,options:{scrollBeyondLastLine:!1,readOnly:K,wordWrap:ue?"on":"off",minimap:{enabled:!1},scrollbar:{verticalScrollbarSize:12,horizontalScrollbarSize:12}}})})},container$u="_container_i0pii_1",styles$1a={container:container$u},ScriptViewer=({data:K})=>{const{Body:J,Language:ne,WordWrap:oe}=K,[ce,ue]=reactExports.useState("");reactExports.useEffect(()=>{J&&ue(J.join(`
`))},[J]);const Ae=pe=>{pe&&ue(pe)};return ce?jsxRuntimeExports.jsx("div",{className:styles$1a.container,children:jsxRuntimeExports.jsx(CodeEditor,{isReadonly:!0,code:ce,language:ne,wordWrap:oe,onChange:Ae})}):null},ROW_COLUMN_NAME="Row Col",generateRowColumn=K=>{const J=K.find(isObject$9),ne=J?Object.keys(J)[0]:"String";return{Name:ROW_COLUMN_NAME,Value:{Type:ne}}},getColumns=(K,J,ne)=>{const oe=K.length,ce=K.map((ue,Ae)=>{const pe=getColumnTypeByCells(Ae,oe,ne),ve=Object.values(ue)[0];return{Name:toString$4(ve),Value:{Type:pe}}});return mapMetadataToGridColumnsHelper$1([generateRowColumn(J),...ce])},getRows=(K,J,ne)=>{const oe=[],ce=K.length;for(let ue=0;ue<J.length;ue+=1){const Ae=J[ue],pe=isObject$9(Ae)?Object.values(Ae).at(0):null,ve={[ROW_COLUMN_NAME]:pe},me=ue*ce,ye=ne.slice(me,me+ce).reduce((xe,_e,$e)=>{const Ie=K[$e].String,Fe=isObject$9(_e)?Object.values(_e).at(0):null;return{...xe,[Ie]:Fe}},{});oe.push({...ve,...ye})}return oe},container$t="_container_i0pii_1",styles$19={container:container$t},MatrixViewer=({ColHeaders:K,ValuesContainer:J,RowHeadersContainer:ne})=>{const{columns:oe,rows:ce}=reactExports.useMemo(()=>isArrayOfObjects(K)&&isObject$9(J)&&isArray$7(J.Array)&&isObject$9(ne)&&isArray$7(ne.Array)?{columns:getColumns(K,ne.Array,J.Array),rows:getRows(K,ne.Array,J.Array)}:{columns:[],rows:[]},[K,ne,J]);return jsxRuntimeExports.jsx("div",{className:styles$19.container,children:jsxRuntimeExports.jsx(Grid,{columns:oe,data:ce})})},deepClone=K=>{if(K===null)return null;const ne=(oe=>BigNumber.isBigNumber(oe)?new BigNumber(oe.toString()):{...oe})(K);return Object.keys(ne).forEach(oe=>ne[oe]=typeof K[oe]=="object"?deepClone(K[oe]):K[oe]),Array.isArray(K)&&K.length?(ne.length=K.length)&&Array.from(ne):Array.isArray(K)?Array.from(K):ne},getPropByPath=(K,J=[])=>J.length===0?K:J.reduce((ne,oe)=>{if(!oe)return ne;const ce=ne==null?void 0:ne[oe];return isDefined$2(ce)?ce:null},K),dataToString=(K,J=5)=>{if(isObject$9(K)){const ne=objectToStringArray(K,J);return trimArray(ne,J-1)}if(isArray$7(K)){const ne=arrayToStringArray(K,J);return trimArray(ne,J-1)}return toString$4(K)},excludeKeyList=["_t"],objectToStringArray=(K,J=4,ne=excludeKeyList)=>{var ce;const oe=(ce=Object.entries(K))==null?void 0:ce.reduce((ue,[Ae,pe])=>(ne.includes(Ae)||ue.push(pe),ue),[]);return arrayToStringArray(oe,J)},arrayToStringArray=(K,J=4)=>[...K].reduce((ne,oe,ce,ue)=>ne.length>=J?(ue.splice(1),ne):isObject$9(oe)?[...ne,...objectToStringArray(oe,J-ne.length)]:isArray$7(oe)?[...ne,...arrayToStringArray(oe,J-ne.length)]:(isDefined$2(oe)&&ne.push(toString$4(oe)),ne),[]),trimArray=(K,J=4)=>{const ne=K.slice(0,J);return K.length>J&&ne.push("..."),ne.join("; ")};var ErrorTypesEnum=(K=>(K.REQUIRED="required",K.VALIDATE="validate",K))(ErrorTypesEnum||{});const useValidation=({isRequired:K,type:J})=>{const{t:ne}=useTranslation(),[oe,ce]=reactExports.useState();return{validate:reactExports.useCallback(Ae=>{const ve=(()=>{switch(!0){case((!isDefined$2(Ae)||isEmptyString(Ae))&&K):return{type:ErrorTypesEnum.REQUIRED,message:ne("validationMessage.fieldRequired")};case(J===ValueTypesEnum$1.Bool&&!isStringBool(Ae)&&!isNullable(Ae)):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.boolValue")};case(J===ValueTypesEnum$1.Int&&!isInt(Ae)&&toString$4(Ae).length>0):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.intValue")};case(J===ValueTypesEnum$1.Date&&isString$3(Ae)&&!DateFormatUtility.create(Ae).isValid()):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.dateValue")};case(J===ValueTypesEnum$1.Time&&isString$3(Ae)&&!DateFormatUtility.create(Ae,DateFormatEnum.TIME_MS).isValid()):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.timeValue")};case(J===ValueTypesEnum$1.DateTime&&isString$3(Ae)&&!DateFormatUtility.create(Ae).isValid()):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.dateTimeValue")};default:return}})();return ce(ve),ve},[K,ne,J]),validateError:oe}};var VariantType=(K=>(K.Missing="Missing",K.Int="Int",K.Double="Double",K.Time="Time",K.Date="Date",K.DateTime="DateTime",K.String="String",K.Bool="Bool",K.Key="Key",K))(VariantType||{});const VariantSelectList=({children:K})=>jsxRuntimeExports.jsx("div",{className:"variant-select-list",children:K}),VariantSelectListItem=({title:K,children:J})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"variant-select-list__item-title",children:K}),jsxRuntimeExports.jsx("div",{className:"variant-select-list__item-value",children:J})]}),select$4="_select_1bjy5_1",styles$18={select:select$4},BooleanValue=({value:K,isRequired:J,isDisable:ne,onChange:oe,testId:ce})=>{const ue=reactExports.useMemo(()=>[...J?[]:[{label:"(none)",value:"null"}],{label:"Y",value:"true"},{label:"N",value:"false"}],[J]),Ae=()=>isBool(K)?K?"true":"false":isNullable(K)?"(none)":"",pe=me=>me==="null"?null:me==="true",ve=me=>{oe(pe(me))};return jsxRuntimeExports.jsx(xF,{testid:ce,className:styles$18.select,variant:"borderless",disabled:ne,value:Ae(),options:ue,onChange:ve})},useEditorState=()=>{const K=reactExports.useContext(EditorContextWrapper);return{event:(K==null?void 0:K.event)||{},state:(K==null?void 0:K.state)||{},action:(K==null?void 0:K.action)||{},fetch:(K==null?void 0:K.fetch)||{},request:(K==null?void 0:K.request)||{},i18n:(K==null?void 0:K.i18n)||{},isHandler:(K==null?void 0:K.isHandler)||!1}};var SchemaType=(K=>(K.Enum="Enum",K.GenericKey="GenericKey",K.GenericKeyList="GenericKeyList",K.GenericData="GenericData",K.GenericDataList="GenericDataList",K.SimpleKey="SimpleKey",K.SimpleKeyList="SimpleKeyList",K.Variant="Variant",K.VariantList="VariantList",K.Successor="Successor",K.Dict="Dict",K.BinaryContent="FileData",K.Data="Data",K.Key="Key",K.NdFloatVector="NdFloatVector",K.NdFloatMatrix="NdFloatMatrix",K))(SchemaType||{});const fileDataModuleName="cl.runtime.file.file_data.FileData",fileDataModuleNameR2="cl.FileData",fileDataModuleNameR1="Cl.Runtime.View.FileData",getCellProps=({schemaElement:K,path:J=[],keys:ne})=>{var Ae,pe,ve,me,ge,ye,xe,_e,$e,Ie,Fe;const oe=!!K.Vector,ce=isNullable(K.Key)&&isObject$9(K)&&!oe&&((Ae=K.Data)==null?void 0:Ae.Name)||void 0,ue=getSchemaType(K);return{key:K.Name,label:K.Label||K.Name,isVector:oe,schemaType:ue,elementKey:K.Name,valueType:(pe=K.Value)==null?void 0:pe.Type,description:K.Comment,isRequired:!K.Optional,successor:ce,isKey:!!(ne!=null&&ne.includes(K.Name)),isFlat:(ue==="GenericData"||!!K.Data)&&!oe,moduleName:(ve=K.Data)==null?void 0:ve.Name,keyName:(me=K.Key)==null?void 0:me.Name,keyModuleName:(ge=K.Key)==null?void 0:ge.Module.ModuleName,path:[...J,K.Name],enumSelector:getSelector((xe=(ye=K==null?void 0:K.Enum)==null?void 0:ye.Module)==null?void 0:xe.ModuleName,(_e=K==null?void 0:K.Enum)==null?void 0:_e.Name),selector:getSelector((Ie=($e=K==null?void 0:K.Data)==null?void 0:$e.Module)==null?void 0:Ie.ModuleName,(Fe=K==null?void 0:K.Data)==null?void 0:Fe.Name),isReadOnly:!!K.ReadOnly}},getSchemaType=K=>{var ue,Ae,pe,ve,me;const J=!!K.Key,ne=!!K.Vector,oe=isNullable(K.Key)&&isObject$9(K)&&!ne&&((ue=K.Data)==null?void 0:ue.Name)||void 0,ce=getSelector((pe=(Ae=K==null?void 0:K.Data)==null?void 0:Ae.Module)==null?void 0:pe.ModuleName,(ve=K==null?void 0:K.Data)==null?void 0:ve.Name)||"";if([fileDataModuleName,fileDataModuleNameR1,fileDataModuleNameR2].includes(ce))return"FileData";if(oe)return"Successor";if(K!=null&&K.Enum)return"Enum";if(J)return ne?"SimpleKeyList":"SimpleKey";switch((me=K.Value)==null?void 0:me.Type){case"Data":return ne?"GenericDataList":"GenericData";case"Key":return ne?"GenericKeyList":"GenericKey";case"Variant":return ne?"VariantList":"Variant";case"Dict":return"Dict";case"NdFloatVector":return"NdFloatVector";case"NdFloatMatrix":return"NdFloatMatrix";default:return null}},getSelector=(K,J)=>K&&J?`${K}.${J}`:void 0,removeLastPart=K=>{const J=K.lastIndexOf(".");return J===-1?K:K.substring(0,J)},getBreadcrumbProps=({schemaElement:K,path:J,editorData:ne,editorSchema:oe})=>{var pe,ve,me,ge,ye,xe,_e,$e;if(!K)return null;const ce=!!K.Vector,ue=getSchemaType(K);return{path:J,schemaType:ue,selector:(()=>{var Ie,Fe,ke,je,We,ze;if(ue===SchemaType.Successor){const Xe=getPropByPath(ne,J),Je=(Xe==null?void 0:Xe._t)??((Ie=K==null?void 0:K.Data)==null?void 0:Ie.Name)??"",nt=Object.keys(oe??{}).find(et=>cleanTypeHelper(et)===Je)??"";return getSelector(removeLastPart(nt)??((ke=(Fe=K==null?void 0:K.Data)==null?void 0:Fe.Module)==null?void 0:ke.ModuleName),cleanTypeHelper(nt)??Je)??""}if(ue===SchemaType.GenericData&&oe){const Xe=getPropByPath(ne,J);return getFullSchemaByName(oe,Xe==null?void 0:Xe._t)}return getSelector((We=(je=K==null?void 0:K.Data)==null?void 0:je.Module)==null?void 0:We.ModuleName,(ze=K==null?void 0:K.Data)==null?void 0:ze.Name)||""})(),title:K.Label||K.Name,valueType:(pe=K.Value)==null?void 0:pe.Type,moduleName:(ve=K.Data)==null?void 0:ve.Name,keyName:(me=K.Key)==null?void 0:me.Name,keyModuleName:(ge=K.Key)==null?void 0:ge.Module.ModuleName,enumSelector:getSelector((xe=(ye=K==null?void 0:K.Enum)==null?void 0:ye.Module)==null?void 0:xe.ModuleName,(_e=K==null?void 0:K.Enum)==null?void 0:_e.Name),isVector:ce,isFlat:((($e=K.Value)==null?void 0:$e.Type)==="Data"||!!K.Data)&&!ce,isRequired:!K.Optional,isReadOnly:!!(K!=null&&K.ReadOnly)}},getFullSchemaByName=(K,J)=>{var ne;return!K||!J?"":((ne=Object.keys(K))==null?void 0:ne.find(oe=>{var ce;return((ce=oe.split("."))==null?void 0:ce.at(-1))===J}))||""},getSchemaNameByType=(K,J)=>{var ne;return!K||!J?"":((ne=Object.keys(K))==null?void 0:ne.find(oe=>{var ce;return((ce=oe.split("."))==null?void 0:ce.at(-1))===J}))||""},parseValueFromCode=K=>K==null?void 0:K.replaceAll(/\r?\n|\n\r?/g,`
`),valueEditorViewString="_valueEditorViewString_bb54d_1",styles$17={valueEditorViewString},ValueEditorViewString=({value:K,isReadonly:J,onChange:ne})=>{const[oe,ce]=reactExports.useState(new Position$1(1,1)),ue=pe=>{ne(parseValueFromCode(pe))},Ae=pe=>{ce(pe)};return jsxRuntimeExports.jsx("div",{className:styles$17.valueEditorViewString,children:jsxRuntimeExports.jsx(CodeEditor,{code:K,isReadonly:J,onChange:ue,language:LanguageEnum.Plaintext,wordWrap:!0,cursorPosition:oe,onChangeCursorPosition:Ae})})},valueEditorViewCollection=["String"],ValueEditorView=({isReadOnly:K,value:J})=>{const{action:ne}=useEditorState(),{state:oe}=useEditorTabState(),{path:ce,valueType:ue}=oe.tab,Ae=pe=>ce&&ne.updateEditorData({path:ce,updateValue:pe});return ue==="String"?jsxRuntimeExports.jsx(ValueEditorViewString,{value:J,isReadonly:K,onChange:Ae}):null},getTabParamsByPath=({path:K,rootSchema:J,editorSchema:ne,editorData:oe})=>{const ce={title:"Not found",path:[],selector:""},ue={title:"Root",path:[],isFlat:!0,selector:J};return(K==null?void 0:K.reduce((Ae,pe,ve)=>{var xe;if(!Ae)return null;const me=[...K].splice(0,ve+1),ge=ne==null?void 0:ne[Ae==null?void 0:Ae.selector],ye=(xe=ge==null?void 0:ge.Elements)==null?void 0:xe.find(_e=>(_e==null?void 0:_e.Name)===pe);if(ye)return getBreadcrumbProps({schemaElement:ye,editorData:oe,path:me,editorSchema:ne});if(Ae!=null&&Ae.valueType&&valueEditorViewCollection.includes(Ae.valueType))return{...Ae,isVector:!1,path:me};if((Ae==null?void 0:Ae.valueType)==="Dict"){const _e=getPropByPath(oe,me);if(isArray$7(_e))return{path:me,schemaType:SchemaType.VariantList,selector:"",title:`${me}`,isVector:!0,isFlat:!1,valueType:"Dict"}}if((Ae==null?void 0:Ae.schemaType)===SchemaType.GenericDataList){const _e=getPropByPath(oe,me);if(_e!=null&&_e._t&&ne)return{path:me,schemaType:SchemaType.GenericData,selector:getSchemaNameByType(ne,_e._t),title:`${me}`,isFlat:!0,isVector:!1}}return Ae},ue))||ce},EditorTabContextWrapper=reactExports.createContext(null),EditorTabContext=({children:K})=>{var ge;const{state:J}=useEditorState(),{breadcrumbsData:ne,editorData:oe,editorSchema:ce,rootSchema:ue}=J,Ae=(ge=ne==null?void 0:ne.breadcrumbs[ne.activeIndex])==null?void 0:ge.path,pe=reactExports.useMemo(()=>getTabParamsByPath({path:Ae,rootSchema:ue,editorData:oe,editorSchema:ce}),[oe,Ae]),ve=ye=>{pe.selector=ye},me=reactExports.useMemo(()=>({state:{isActive:!0,tabIndex:ne.activeIndex,tab:pe,breadcrumbPath:Ae},setSelector:ve}),[ne.activeIndex,pe,Ae,ve]);return jsxRuntimeExports.jsx(EditorTabContextWrapper.Provider,{value:me,children:K})},useEditorTabState=()=>{const K=reactExports.useContext(EditorTabContextWrapper);return{state:(K==null?void 0:K.state)||{},setSelector:K==null?void 0:K.setSelector}},regExLineBreak=/[\r\n]/,isMultiLineText=K=>regExLineBreak.test(K),getFirstLine=K=>K.split(regExLineBreak)[0].trim().concat("...")||"",StringValue=({path:K=[],useTabEditor:J=!1,elementName:ne,value:oe,onChange:ce,readOnly:ue,testId:Ae,...pe})=>{const{action:ve}=useEditorState(),{state:me}=useEditorTabState(),{t:ge}=useTranslation(),[ye,xe]=reactExports.useState(),[_e,$e]=reactExports.useState(!1),[Ie,Fe]=reactExports.useState(!1),[ke,je]=reactExports.useState(!1),We=()=>{ce==null||ce(ye||""),$e(!1)},ze=()=>ke?oe:isMultiLineText(oe)?getFirstLine(oe):oe,Xe=()=>{if(!ue){if(J){ve.openEditorTabAction({path:K},me.tabIndex);return}xe(oe),$e(!0)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ml,{...pe,variant:"borderless",readOnly:ue,testId:Ae,value:ze(),onChange:ce,onFocus:()=>je(!0),onBlur:()=>je(!1),suffix:jsxRuntimeExports.jsx(oa,{testid:"edit-icon",onClick:Xe,children:jsxRuntimeExports.jsx(EA,{})})}),jsxRuntimeExports.jsxs(Ho,{title:ge("editor.edit"),open:_e,onClose:()=>$e(!1),children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(CodeEditor,{code:ye,isReadonly:ue,onChange:xe,onValidate:Je=>Fe(!!Je.length),language:LanguageEnum.Plaintext})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"string-value",onCancel:()=>$e(!1),okText:ge("buttons.save"),cancelText:ge("buttons.cancel"),onOk:We,okProps:{disabled:Ie||ue}})]})]})},VariantSelectValue__notSupport="_VariantSelectValue__notSupport_19lus_1",styles$16={VariantSelectValue__notSupport},getViewFormatByType=K=>({Date:"YYYY-MM-DD",Time:"HH:mm:ss",DateTime:"YYYY-MM-DD HH:mm:ss"})[K]||"YYYY-MM-DD",getBluredFormatByType=K=>({Date:"YYYY-MM-DD",Time:"HH:mm:ss.SSS",DateTime:"YYYY-MM-DDTHH:mm:ss.SSS[Z]"})[K]||"YYYY-MM-DD",getReturnDateFormat=(K,J)=>({Date:J.format("YYYY-MM-DD"),Time:J.format("HH:mm:ss.SSS"),DateTime:J.format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")})[K]||J.format("YYYY-MM-DD");var DateValueFormat=(K=>(K.Date="YYYY-MM-DD",K.DateTime="YYYY-MM-DD HH:mm:ss",K.DateTimeISO="YYYY-MM-DDTHH:mm:ss.SSS[Z]",K.Time="HH:mm:ss",K.TimeMs="HH:mm:ss.SSS",K))(DateValueFormat||{});const DateValue=({readOnly:K,value:J,valueType:ne,status:oe,onChange:ce,testId:ue})=>{const Ae=getViewFormatByType(ne),pe=reactExports.useMemo(()=>J?dayjs(J,Ae):null,[J]),ve=ge=>{const ye=ge?getReturnDateFormat(ne,ge):null;ce==null||ce(ye)},me=ge=>{const xe=ge.target.value,_e=dayjs(xe,Ae);_e.isValid()&&(ce==null||ce(_e.format(getBluredFormatByType(ne))))};return jsxRuntimeExports.jsx(bF,{testid:ue,variant:"borderless",format:{format:Ae,type:K?void 0:"mask"},status:oe,showTime:ne==="DateTime",picker:ne==="Time"?"time":"date",readOnly:K,value:pe,onChange:ve,onBlur:me,disabled:K})},ParseGenericValue={toDomainType:K=>isString$3(K)?K.split(";")[0].replace(/Key$/,""):"",toDomainRecord:K=>isString$3(K)?K.split(";").slice(1).join(";"):"",toDtoValue:(K,J)=>`${K};${J}`,toDtoType:K=>isString$3(K)?`${K}Key`:""},GenericTableCell=({children:K,ellipsis:J=!0,title:ne,onDoubleClick:oe,onClick:ce})=>{const ue=()=>isString$3(ne)?ne:"";return jsxRuntimeExports.jsx("div",{title:ue(),className:"generic-table-cell",onDoubleClick:oe,onClick:ce,"aria-hidden":!0,children:jsxRuntimeExports.jsx("div",{className:cx({"generic-table-cell_ellipsis":J}),children:K})})},GenericTableType=({height:K=250,type:J,colWidth:ne=200,onChange:oe,updateLoadingStatus:ce})=>{const ue=reactExports.useRef(null),{request:Ae}=useEditorState(),{state:pe,isLoading:ve,hasInitFetch:me,isInitiated:ge}=useRequest(Ae.getTypes,{onError:toast.error,onSuccess:$e=>{var Ie;return!J&&oe((Ie=$e==null?void 0:$e[0])==null?void 0:Ie.Name)},autorun:!0}),ye=reactExports.useMemo(()=>pe==null?void 0:pe.findIndex($e=>$e.Name===J),[pe,J]);reactExports.useEffect(()=>{var $e;ye&&(($e=ue==null?void 0:ue.current)==null||$e.scrollTo({index:ye}))},[me]);const xe=reactExports.useMemo(()=>[{key:"Name",dataIndex:"Name",title:"Types",width:ne,render:$e=>jsxRuntimeExports.jsx(GenericTableCell,{title:$e,children:$e})}],[]),_e=reactExports.useMemo(()=>pe||void 0,[pe]);return reactExports.useEffect(()=>{!ve&&!ge&&(xe!=null&&xe.length)&&(_e!=null&&_e.length)&&setTimeout(()=>{ce==null||ce(!1)},100)},[ve,ge,xe,_e]),jsxRuntimeExports.jsx(SF,{tableRef:ue,useSearch:!0,virtual:!0,loading:ve,rowKey:"Name",scroll:{x:ne,y:K},dataSource:_e,columns:xe,selectedRowIndex:ye,onChangeSelectedRowIndex:($e,Ie)=>oe(Ie.Name)})},GenericRecordsContext=reactExports.createContext(void 0),GenericRecordsProvider=({children:K})=>{const{request:J}=useEditorState(),{state:ne,fetch:oe,isLoading:ce,hasInitFetch:ue,isInitiated:Ae}=useRequest(J.getSelectRecords,{onError:toast.error}),pe=reactExports.useMemo(()=>({state:ne,fetch:oe,isLoading:ce,hasInitFetch:ue,isInitiated:Ae}),[ne,oe,ce,ue,Ae]);return jsxRuntimeExports.jsx(GenericRecordsContext.Provider,{value:pe,children:K})},useGenericRecordsContext=()=>{const K=reactExports.useContext(GenericRecordsContext);if(!K)throw new Error("useGenericRecordsContext must be used within a GenericRecordsProvider");return K},GenericTableRecord=({tableHeight:K=250,colWidth:J=150,recordKey:ne,onChange:oe,onSelect:ce,cellHeight:ue=1,updateLoadingStatus:Ae})=>{const pe=reactExports.useRef(null),{state:ve,isLoading:me,hasInitFetch:ge,isInitiated:ye}=useGenericRecordsContext(),xe=reactExports.useMemo(()=>{var ke;return(ke=ve==null?void 0:ve.data)==null?void 0:ke.findIndex(je=>je._key===ne)},[ve,ne]);reactExports.useEffect(()=>{var ke;xe&&((ke=pe==null?void 0:pe.current)==null||ke.scrollTo({index:xe}))},[ge]);const _e=(ke,je,We)=>jsxRuntimeExports.jsx(GenericTableCell,{title:ke,onDoubleClick:()=>We(je==null?void 0:je._key),children:ke}),$e=ke=>{var je;return(je=ke==null?void 0:ke.Elements)==null?void 0:je.reduce((We,ze)=>{const{Value:Xe,Key:Je,Enum:nt,Hidden:et,Vector:tt,Name:st}=ze;return(isSimpleValueType$1(Xe==null?void 0:Xe.Type)||Je||nt)&&!tt&&!et&&We.push({key:st,dataIndex:st,title:st,minWidth:J,render:(qe,Se)=>_e(qe,Se,ce)}),We},[])},Ie=reactExports.useMemo(()=>{var je,We,ze;if(!((je=ve==null?void 0:ve.schema)!=null&&je.rootType))return;const ke=(ze=(We=ve==null?void 0:ve.schema)==null?void 0:We.typeList)==null?void 0:ze[ve.schema.rootType];return $e(ke)},[ve]),Fe=()=>Ie!=null&&Ie.length?(Ie==null?void 0:Ie.length)*J:J;return reactExports.useEffect(()=>{!me&&!ye&&(Ie!=null&&Ie.length)&&(ve!=null&&ve.data.length)&&setTimeout(()=>{Ae==null||Ae(!1)},100)},[me,ye,Ie,ve]),jsxRuntimeExports.jsx(SF,{tableRef:pe,useSearch:!0,virtual:!0,loading:me,scroll:{x:Fe(),y:K},dataSource:ve==null?void 0:ve.data,rowKey:"_key",columns:Ie,selectedRowIndex:xe,onChangeSelectedRowIndex:(ke,je)=>oe(je._key),cellHeight:ue})},limit=1e3,skip=0,GenericKeyModal=({isOpen:K,initialGenericType:J,initialGenericRecordKey:ne,onSubmit:oe,onClose:ce})=>{var qe;const{t:ue}=useTranslation(),Ae=reactExports.useRef(null),[pe,ve]=reactExports.useState(J),[me,ge]=reactExports.useState(200),[ye,xe]=reactExports.useState(ne),[_e,$e]=reactExports.useState(1),Ie=reactExports.useRef(null),[Fe,ke]=reactExports.useState(!0),[je,We]=reactExports.useState(!0),{state:ze,isLoading:Xe,fetch:Je}=useGenericRecordsContext(),nt=!(ze!=null&&ze.data.length)&&!Xe;reactExports.useEffect(()=>{pe&&Je({params:{type:pe,skip,limit,table_format:!0}})},[pe]),reactExports.useEffect(()=>{if(!Ae.current)return;const Se=new ResizeObserver(()=>{var Ne;const Be=(Ne=Ae==null?void 0:Ae.current)==null?void 0:Ne.clientHeight;Be&&ge(Be-24)});return Se.observe(Ae.current),()=>Se==null?void 0:Se.disconnect()},[]);const et=Se=>{ve(Se),xe(void 0)},tt=Se=>{!pe||!Se||(oe({type:pe,recordKey:Se}),ce())},st=()=>{!pe||!ye||(oe({type:pe,recordKey:ye}),ce())};return jsxRuntimeExports.jsxs(Ho,{open:K,size:"lg",defaultHeight:400,title:ue("editor.modalHeader"),onClose:ce,children:[jsxRuntimeExports.jsxs(Ho.Body,{children:[Fe&&je&&jsxRuntimeExports.jsx(HF,{className:"generic-key-modal__loader"}),jsxRuntimeExports.jsx("div",{ref:Ae,className:cx("generic-key-modal",{invisible:Fe&&je}),children:jsxRuntimeExports.jsxs(Mj,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Lj,{className:"generic-key-modal__panel",defaultSize:40,order:1,children:jsxRuntimeExports.jsx(GenericTableType,{height:me,type:pe,onChange:et,updateLoadingStatus:Se=>ke(Se)})}),jsxRuntimeExports.jsx($F,{}),jsxRuntimeExports.jsx(Lj,{className:"generic-key-modal__panel",defaultSize:60,order:2,children:jsxRuntimeExports.jsx("div",{className:"generic-key-modal__right-side",children:nt?jsxRuntimeExports.jsx(NoGridData,{content:jsxRuntimeExports.jsx("span",{className:"generic-key-modal__no-data-content",children:ue("noData.noData")}),icon:jsxRuntimeExports.jsx(Pp,{size:"XL"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{ref:Ie,className:"generic-key-modal__cell-height-container",children:[ue("grid.cellHeight"),jsxRuntimeExports.jsx(xF,{className:"generic-key-modal__select",value:_e,options:rowsCountArr,onChange:Se=>$e(Se)})]}),pe&&jsxRuntimeExports.jsx(GenericTableRecord,{tableHeight:me-(((qe=Ie.current)==null?void 0:qe.clientHeight)??0),recordType:pe,recordKey:ye,onChange:xe,onSelect:tt,cellHeight:_e,updateLoadingStatus:Se=>We(Se)})]})})})]})})]}),!Fe&&!je&&jsxRuntimeExports.jsx(Ho.Footer,{testId:"generic-key",okText:ue("buttons.apply"),cancelText:ue("buttons.cancel"),onCancel:ce,onOk:st,okProps:{disabled:!ye||!pe}})]})},GenericKeySelect=({value:K,isReadOnly:J,error:ne,prefixElement:oe,testId:ce,onChange:ue})=>{const[Ae,pe]=reactExports.useState(!1),{initialGenericType:ve,initialGenericRecordKey:me}=reactExports.useMemo(()=>({initialGenericType:ParseGenericValue.toDomainType(K),initialGenericRecordKey:ParseGenericValue.toDomainRecord(K)}),[K]),ge=()=>{pe(!0)},ye=xe=>{const _e=ParseGenericValue.toDtoType(xe.type),$e=ParseGenericValue.toDtoValue(_e,xe.recordKey);ue($e)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ml,{readOnly:!0,testId:ce,variant:"borderless",status:ne?"error":"default",value:K,suffix:jsxRuntimeExports.jsx(oa,{testid:"edit-icon",onClick:ge,disabled:J,children:jsxRuntimeExports.jsx(EA,{})}),prefix:oe}),Ae&&jsxRuntimeExports.jsx(GenericRecordsProvider,{children:jsxRuntimeExports.jsx(GenericKeyModal,{initialGenericType:ve,initialGenericRecordKey:me,isOpen:Ae,onClose:()=>pe(!1),onSubmit:ye})})]})},VariantSelectValue=({isError:K,type:J,value:ne,onChange:oe})=>(()=>{const ue=K?"error":void 0;switch(J){case VariantType.String:return jsxRuntimeExports.jsx(StringValue,{elementName:J,value:ne||"",onChange:oe});case VariantType.Bool:return jsxRuntimeExports.jsx(BooleanValue,{value:ne,onChange:oe});case VariantType.Int:return jsxRuntimeExports.jsx(CF,{variant:"borderless",status:ue,value:ne,onChange:oe});case VariantType.Double:return jsxRuntimeExports.jsx(CF,{variant:"borderless",status:ue,value:ne,onChange:oe});case VariantType.Date:return jsxRuntimeExports.jsx(DateValue,{valueType:"Date",status:ue,value:ne,onChange:oe});case VariantType.Time:return jsxRuntimeExports.jsx(DateValue,{valueType:"Time",status:ue,value:ne,onChange:oe});case VariantType.DateTime:return jsxRuntimeExports.jsx(DateValue,{valueType:"DateTime",status:ue,value:ne,onChange:oe});case VariantType.Key:return jsxRuntimeExports.jsx(GenericKeySelect,{error:K,value:ne||"",onChange:oe});default:return jsxRuntimeExports.jsx("div",{className:styles$16.VariantSelectValue__notSupport,children:"Type not supported"})}})(),VariantSelectContent=({variantType:K,value:J,isError:ne,onChangeValue:oe,onChangeType:ce})=>{const ue=reactExports.useMemo(()=>Object.keys(VariantType).map(pe=>({value:pe,label:pe})),[]),Ae=pe=>{ce(pe??VariantType.Missing)};return jsxRuntimeExports.jsxs(VariantSelectList,{children:[jsxRuntimeExports.jsx(VariantSelectListItem,{title:"Type",children:jsxRuntimeExports.jsx(xF,{variant:"borderless",value:K,options:ue,onChange:Ae})}),K&&K!==VariantType.Missing&&jsxRuntimeExports.jsx(VariantSelectListItem,{title:"Value",children:jsxRuntimeExports.jsx(VariantSelectValue,{value:J,type:K,isError:ne,onChange:oe})})]})},VariantSelectModal=({variantType:K,value:J,isRequiredValue:ne,isOpen:oe,onClose:ce,onSubmit:ue})=>{const{t:Ae}=useTranslation();return jsxRuntimeExports.jsx(Ho,{size:"md",title:Ae("confirmationModal.variantSelect.title"),open:oe,onClose:ce,children:jsxRuntimeExports.jsx(VariantSelectModalContent,{value:J,variantType:K,isRequiredValue:ne,onClose:ce,onSubmit:ue})})},VariantSelectModalContent=({variantType:K,value:J,isRequiredValue:ne,onClose:oe,onSubmit:ce})=>{const{t:ue}=useTranslation(),[Ae,pe]=reactExports.useState(!1),[ve,me]=reactExports.useState(K),[ge,ye]=reactExports.useState(J),{validate:xe}=useValidation({type:ve===VariantType.Missing?void 0:ve,isRequired:ne}),_e=()=>{if(!ve)return;const Fe=ve===VariantType.Missing?null:{[ve]:ge};ce(Fe)},$e=Fe=>{ye(Fe),pe(!!xe(Fe))},Ie=Fe=>{me(Fe),pe(!1),ye(null)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(VariantSelectContent,{isError:Ae,variantType:ve,value:ge,onChangeType:Ie,onChangeValue:$e})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"variant",okText:ue("buttons.save"),cancelText:ue("buttons.cancel"),onCancel:oe,onOk:_e,okProps:{disabled:Ae}})]})},doubleNumberRegExp=/^[+-]?\d+(\.\d+)?$/,intNumberRegExp=/^\d+$/,dateNumberRegExp=/(\d{4})-(\d{2})-(\d{2})/,VariantSelect=({variantType:K,value:J,isRequiredValue:ne=!1,isReadOnly:oe,selectOnFocus:ce,onChange:ue,testId:Ae="variant-select"})=>{const[pe,ve]=reactExports.useState(!1),me=()=>!oe&&ve(!0),ge=()=>ve(!1),ye=$e=>{ue($e),ge()},xe=()=>{switch(K){case VariantType.Time:return isString$3(J)?DateFormatUtility.create(J,DateFormatEnum.TIME_MS).format(DateFormatEnum.TIME):"";case VariantType.Bool:return isNullable(J)?"(none)":J?"Y":"N";case VariantType.DateTime:return isString$3(J)?DateFormatUtility.create(J).format(DateFormatEnum.DATE_TIME):"";default:return dataToString(J)}},_e=$e=>{ue({[(Fe=>intNumberRegExp.test(Fe)?VariantType.Int:doubleNumberRegExp.test(Fe)?VariantType.Double:dateNumberRegExp.test(Fe)?VariantType.Date:Fe?VariantType.String:VariantType.Missing)($e)]:$e})};return jsxRuntimeExports.jsxs("div",{className:"variant-select",children:[jsxRuntimeExports.jsx(Ml,{testId:Ae,variant:"borderless",value:xe(),onChange:_e,readOnly:oe,selectOnFocus:ce}),jsxRuntimeExports.jsxs("div",{"data-tid":`${Ae}-edit-button`,"aria-hidden":"true",className:"variant-select__variant",onClick:me,children:[jsxRuntimeExports.jsx("div",{"aria-hidden":"true",className:"variant-select__variant-name",children:K??VariantType.Missing}),jsxRuntimeExports.jsx(oa,{children:jsxRuntimeExports.jsx(EA,{})})]}),jsxRuntimeExports.jsx(VariantSelectModal,{value:J,variantType:K??VariantType.Missing,isRequiredValue:ne,isOpen:pe,onClose:ge,onSubmit:ye})]})};var DictionaryViewType=(K=>(K.Flat="Flat",K.List="List",K))(DictionaryViewType||{});const DictionaryViewValueCell=({isReadonly:K=!1,value:J,path:ne})=>{var ve,me;const{action:oe}=useEditorState(),{state:ce}=useEditorTabState(),ue=isArray$7(J)?"List":"Flat",Ae=ge=>{oe.updateEditorData({path:ne,updateValue:ge})};if(ue==="Flat"){const ge=J,ye=ge&&((ve=Object.keys(ge))==null?void 0:ve[0])||"",xe=(ge&&((me=Object.values(ge))==null?void 0:me[0]))??"";return jsxRuntimeExports.jsx(VariantSelect,{isReadOnly:K,selectOnFocus:!0,variantType:ye,value:xe,onChange:Ae})}const pe=()=>oe.openEditorTabAction({path:ne},ce.tabIndex);return ue==="List"?jsxRuntimeExports.jsx(Ml,{selectOnFocus:!0,prefix:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",testid:"dictionary-view-drill-icon",onClick:pe,iconAfter:jsxRuntimeExports.jsx(dT,{})}),readOnly:!0,variant:"borderless",value:dataToString(J)}):null};var EditorValidationType=(K=>(K.IsRequired="isRequired",K))(EditorValidationType||{});const isRequiredValidation=K=>isArray$7(K)?K.length>0:isBool(K)?!0:isString$3(K)?!!K.trim():isDefined$2(K),isRequiredSchema=K=>K.Optional?null:EditorValidationType.IsRequired,validationRules=()=>({[EditorValidationType.IsRequired]:{validate:isRequiredValidation,schemaRule:isRequiredSchema,message:instance.t("validationMessage.fieldRequired")}}),getValidationRulesBySchema=K=>Object.values(validationRules()).reduce((J,ne)=>{const oe=ne.schemaRule(K);return oe&&J.push(oe),J},[]),validateValueBySchema=(K,J)=>{var ce;const ne=validationRules(),oe=(ce=K.rules)==null?void 0:ce.find(ue=>{var Ae;return!((Ae=ne[ue])!=null&&Ae.validate(J))});return oe?{rule:oe,path:K.path,message:ne[oe].message}:null},getValidationSchemaByPath=({schema:K,rootSchema:J,editorData:ne,path:oe})=>{if(!K||!J||!oe)return null;const ce=(Ae,pe)=>({rules:getValidationRulesBySchema(Ae),path:pe}),ue=(Ae,pe)=>{var je,We,ze,Xe,Je,nt,et,tt,st,qe;const ve=K[Ae];if(!ve)return null;const me=(je=ve==null?void 0:ve.Elements)==null?void 0:je.find(Se=>Se.Name===oe[pe]),ge=oe.slice(0,pe+1),ye=oe.slice(0,pe+2),xe=pe+1===oe.length;if(!me)return{rules:[],path:ge};if(xe)return ce(me,ge);const _e=`${(ze=(We=me==null?void 0:me.Data)==null?void 0:We.Module)==null?void 0:ze.ModuleName}.${(Xe=me==null?void 0:me.Data)==null?void 0:Xe.Name}`===fileDataModuleName,$e=!!me.Vector,Ie=!_e&&$e&&((nt=(Je=me==null?void 0:me.Data)==null?void 0:Je.Module)==null?void 0:nt.ModuleName),Fe=$e&&((tt=(et=me==null?void 0:me.Key)==null?void 0:et.Module)==null?void 0:tt.ModuleName),ke=!$e&&((qe=(st=me==null?void 0:me.Data)==null?void 0:st.Module)==null?void 0:qe.ModuleName);if(_e)return ce(me,ge);if(Ie){const Se=pe+2,Re=`${me.Data.Module.ModuleName}.${me.Data.Name}`;return ue(Re,Se)}return ke?ue((()=>{var Be;const Re=(Be=getPropByPath(ne,ge))==null?void 0:Be._t;if(Re){const Ne=`${me.Data.Module.ModuleName}.${Re}`;if(K[Ne])return Ne}return`${me.Data.Module.ModuleName}.${me.Data.Name}`})(),pe+1):Fe||$e?ce(me,ye):ce(me,ge)};return ue(J,0)},validate=({schema:K,rootSchema:J,editorData:ne,path:oe,value:ce})=>{const ue=getValidationSchemaByPath({schema:K,path:oe,rootSchema:J,editorData:ne});return ue!=null&&ue.rules?validateValueBySchema(ue,ce):null},isExistError=({data:K,schema:J,rootSchemaName:ne})=>{const oe=(ce,ue)=>{const Ae=()=>!!validate({schema:J,path:ue,rootSchema:ne,editorData:K,value:ce});return isArray$7(ce)?ce.length?ce.some((pe,ve)=>oe(pe,[...ue,ve.toString()])):Ae():isObject$9(ce)?Object.entries(ce).some(([pe,ve])=>oe(ve,[...ue,pe])):Ae()};return oe(K,[])},validateEditorData=({data:K,rootSchemaName:J,schema:ne})=>{const oe={},ce=(ue,Ae)=>{const pe=()=>{const ve=validate({schema:ne,path:Ae,rootSchema:J,editorData:K,value:ue});ve&&(oe[ve.path.toString()]=ve)};if(isArray$7(ue)){if(!ue.length){pe();return}ue.forEach((ve,me)=>{ce(ve,[...Ae,me.toString()])});return}if(isObject$9(ue)){Object.entries(ue).forEach(([ve,me])=>{ce(me,[...Ae,ve])});return}pe()};return ce(K,[]),oe},defaultEditorI18n={submitBtnText:"Submit",cancelBtnText:"Discard",copyBtnText:"Save & Next"};var SetValueByPathType=(K=>(K.AddToArray="addToArray",K.SetValue="setValue",K))(SetValueByPathType||{});const setValueByPath=({object:K,value:J,pathList:ne,withCreate:oe=!0,addType:ce="setValue",addedIndex:ue,currentSchema:Ae,editorSchema:pe})=>{var xe,_e,$e,Ie;if(!(isObject$9(K)||isArray$7(K))||!ne)return null;const ve=deepClone(K),me=[...ne];let ge=ve;for(;me.length>1;){const Fe=me.shift();if(!Fe||!(isObject$9(ve)||isArray$7(ve)))return null;const ke=($e=(_e=(xe=Ae==null?void 0:Ae.Elements)==null?void 0:xe.find(ze=>ze.Name===ne[ne.indexOf(Fe??"")]))==null?void 0:_e.Data)==null?void 0:$e.Name,je=pe?Object.keys(pe).find(ze=>cleanTypeHelper(ze)===ke):void 0,We=je?(Ie=pe==null?void 0:pe[je].Elements)==null?void 0:Ie.map(ze=>({Name:ze.Name})):[];!ge[Fe]&&oe&&(ge[Fe]=ke&&We?{_t:ke,...Object.fromEntries(We.map(({Name:ze})=>[ze,null]))}:{}),ge=ge[Fe]}const ye=me[me.length-1];if(!ye||!(isObject$9(ge)||isArray$7(ge)))return null;if(ce==="setValue")return ge[ye]=J,ve;if(ce==="addToArray"){const Fe=ge[ye]??(ge[ye]=[]);return isArray$7(Fe)?(isDefined$2(ue)?Fe.splice(ue,0,J):Fe.push(J),ve):null}return null},createEmptyDataBySchema=(K,J)=>!K||!J?null:(oe=>{var ue;const ce=K[oe];return ce&&((ue=ce==null?void 0:ce.Elements)==null?void 0:ue.reduce((Ae,pe)=>(Ae[pe.Name]=null,Ae),{}))||null})(J),isParentPath=(K,J)=>{const ne=K.split(","),oe=J.split(",");return ne.length>=oe.length?!1:ne.every((ce,ue)=>ce===oe[ue])};function useLatest(K){const J=reactExports.useRef(K);return reactExports.useEffect(()=>{J.current=K}),J}const EditorContextWrapper=reactExports.createContext(null),initState={isReadOnly:!1,isDisableKeyFields:!1,editorSchema:null,editorData:null,rootSchema:"",originalEditorData:null,breadcrumbsData:{breadcrumbs:[],activeIndex:0},allTypes:null,editorToolbarRef:null,validationError:{}},EditorContext=({isReadOnly:K=initState.isReadOnly,isDisableKeyFields:J=initState.isDisableKeyFields,requestConfig:ne,event:oe,i18n:ce,children:ue,dataset:Ae,isHandler:pe=!1})=>{const{state:ve}=useAppContext(),[me,ge]=reactExports.useState(initState.editorToolbarRef),[ye,xe]=reactExports.useState(initState.editorSchema),[_e,$e]=reactExports.useState(initState.editorData),[Ie,Fe]=reactExports.useState(initState.rootSchema),[ke,je]=reactExports.useState(initState.originalEditorData),[We,ze]=reactExports.useState(initState.breadcrumbsData),[Xe,Je]=reactExports.useState(initState.allTypes),[nt,et]=reactExports.useState(initState.validationError),tt=useLatest(_e),st=reactExports.useMemo(()=>ne,[ne]),qe=reactExports.useMemo(()=>oe,[oe]),Se=reactExports.useMemo(()=>ce?{...defaultEditorI18n,...ce}:defaultEditorI18n,[ce]),Re=reactExports.useRef({}),Be=reactExports.useRef({}),Ne=({rootSchemaName:gt,schema:$t,data:pt,breadcrumbs:vt})=>{const Mt=pt||createEmptyDataBySchema($t,gt);return $e(Mt),je(Mt),xe($t),Fe(gt),et({}),Ge({initBreadcrumb:vt,editorData:Mt}),{data:Mt,schema:$t,rootSchemaName:gt}},Ue=gt=>{var $t;ze(gt),($t=qe==null?void 0:qe.onChangeBreadcrumbs)==null||$t.call(qe,gt)},Ge=({initBreadcrumb:gt,editorData:$t})=>{const pt={breadcrumbs:[{path:[]}],activeIndex:0};Ue((()=>{var St;if(!(gt!=null&&gt.breadcrumbs))return pt;const Mt=(St=gt==null?void 0:gt.breadcrumbs)==null?void 0:St.findIndex(_t=>!getPropByPath($t,_t.path));return Mt>0?{breadcrumbs:gt.breadcrumbs.slice(0,Mt),activeIndex:Mt-1}:gt})())},Ye=reactExports.useCallback(async gt=>{if(!gt)return[];if(Re.current[gt])return Re.current[gt];let $t=[];if(Be.current[gt])$t=await Be.current[gt];else{const vt=st.getTypeHierarchy({name:gt});Be.current[gt]=vt,$t=await vt}const pt=($t==null?void 0:$t.map(({Label:vt,Name:Mt})=>({label:vt,value:Mt})))||[];return Re.current[gt]=pt,delete Be.current[gt],pt},[st]),Qe=gt=>{Je(gt)},Te=(gt,$t)=>{if(!ye)return;Object.keys(nt).find(Mt=>isParentPath(Mt,gt.toString()))&&Ke();const vt=validate({schema:ye,path:gt,rootSchema:Ie,editorData:_e,value:$t});vt?(nt[gt.toString()]=vt,et(structuredClone(nt))):nt!=null&&nt[gt.toString()]&&(delete nt[gt.toString()],et(structuredClone(nt)))},Ke=()=>{if(!ye)return!1;const gt=validateEditorData({data:tt.current,schema:ye,rootSchemaName:Ie});return et(gt),Object.keys(gt).length>0};reactExports.useImperativeHandle(ve.appContextRef,()=>({validateEditor:Ke}),[Ke]);const rt=gt=>{et($t=>{const pt=gt.toString();return Object.keys($t).forEach(vt=>{vt.startsWith(pt)&&delete nt[vt]}),$t})},it=gt=>$e(gt),at=({path:gt,updateValue:$t})=>{if(getPropByPath(_e,gt)===$t||!ye)return;isObject$9($t)&&"_t"in $t&&rt(gt);const pt=setValueByPath({object:_e,value:$t,pathList:gt,addType:SetValueByPathType.SetValue,currentSchema:ye[Ie],editorSchema:ye});pt&&(Te(gt,$t),$e(pt))},lt=gt=>{Ue({...We,activeIndex:gt})},ct=gt=>{const{breadcrumbs:$t,activeIndex:pt}=We,vt=$t.slice(0,gt),Mt=pt>=vt.length?vt.length-1:pt;Ue({breadcrumbs:vt,activeIndex:Mt})},ot=(gt,$t)=>{const{breadcrumbs:pt}=We,vt=$t+1;We.breadcrumbs.splice(vt,pt.length-vt,{...gt}),Ue({breadcrumbs:[...We.breadcrumbs],activeIndex:vt})},ft=({path:gt,selector:$t,index:pt})=>{const vt=ye&&$t?{...createEmptyDataBySchema(ye,$t),_t:cleanTypeHelper($t)}:null,Mt=setValueByPath({object:_e,pathList:gt,value:vt,addType:SetValueByPathType.AddToArray,addedIndex:pt});Mt&&(rt(gt),$e(Mt))},dt=()=>{var vt;const{activeIndex:gt,breadcrumbs:$t}=We,pt=gt+1;(vt=$t==null?void 0:$t[pt])!=null&&vt.path&&(getPropByPath(_e,$t[pt].path)||ct(pt))},mt=({path:gt,index:$t})=>{const pt=getPropByPath(_e,gt);if(isArray$7(pt)&&pt.length){dt();const vt=pt==null?void 0:pt.filter((St,_t)=>!$t.includes(_t)),Mt=setValueByPath({object:_e,value:vt,pathList:gt,addType:SetValueByPathType.SetValue});rt(gt),$e(Mt)}},kt=({path:gt,from:$t,to:pt})=>{const vt=getPropByPath(_e,gt);if(!isArray$7(vt)||!vt.length||!isDefined$2($t)||!isDefined$2(pt))return!1;dt();const Mt=vt[$t];return vt.splice($t,1),vt.splice(pt,0,Mt),rt(gt),$e(deepClone(_e)),!0},wt=({path:gt,type:$t,index:pt})=>{const vt={key:"",value:$t===DictionaryViewType.Flat?{}:[]},Mt=setValueByPath({object:_e,pathList:gt,value:vt,addType:SetValueByPathType.AddToArray,addedIndex:pt});Mt&&(rt(gt),$e(Mt))},Et=async({type:gt})=>{try{const $t=await st.getSchema({name:gt});return xe(pt=>({...pt,...$t.typeList})),$t}catch($t){toast.error($t)}return null},Rt={state:{isReadOnly:K,isDisableKeyFields:J,rootSchema:Ie,editorData:_e,editorSchema:ye,originalEditorData:ke,breadcrumbsData:We,allTypes:Xe,editorToolbarRef:me,validationError:nt},action:{initEditor:Ne,setEditorDataAction:it,updateEditorData:at,switchTabAction:lt,closeTabAction:ct,openEditorTabAction:ot,addListElementAction:ft,addDictElementAction:wt,removeListElementAction:mt,moveListElementAction:kt,setAllTypesAction:Qe,setEditorToolbarRef:ge,validateEditor:Ke},fetch:{getAdditionalSchema:Et,getFlatWithTypeDataFetch:async({type:gt})=>{const $t=await Et({type:gt});if($t){const pt=createEmptyDataBySchema($t.typeList,$t.rootType);if(isObject$9(pt))return{...pt,_t:gt}}return null},getModuleSuccessorOptions:Ye},event:qe,request:st,i18n:Se,dataset:Ae,isHandler:pe};return jsxRuntimeExports.jsx(EditorContextWrapper.Provider,{value:Rt,children:ue})},footer$2="_footer_1epqs_1",actions$1="_actions_1epqs_13",buttons="_buttons_1epqs_17",styles$15={footer:footer$2,actions:actions$1,buttons},EditorFooter=({isSubmitDisabled:K=!1,isCancelDisabled:J=!1,onSubmit:ne,onCancel:oe,isCopyBtn:ce,onCopy:ue,footerActions:Ae})=>{const{state:pe,i18n:ve}=useEditorState();if(pe.isReadOnly)return null;const me=ge=>ge.replaceAll(" ","-").toLocaleLowerCase();return jsxRuntimeExports.jsxs("div",{className:styles$15.footer,children:[jsxRuntimeExports.jsx("div",{className:styles$15.actions,children:Ae}),jsxRuntimeExports.jsxs("div",{className:styles$15.buttons,children:[jsxRuntimeExports.jsx(rl,{onClick:ne,disabled:K,testid:`${me(ve==null?void 0:ve.submitBtnText)}-button`,children:ve==null?void 0:ve.submitBtnText}),ce&&jsxRuntimeExports.jsx(rl,{onClick:ue,testid:`${me(ve==null?void 0:ve.copyBtnText)}-button`,children:ve==null?void 0:ve.copyBtnText}),oe&&jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:oe,disabled:J,testid:`${me(ve==null?void 0:ve.cancelBtnText)}-button`,children:ve==null?void 0:ve.cancelBtnText})]})]})},TableToolbar$1="_TableToolbar_1w4k8_1",TableToolbar__item="_TableToolbar__item_1w4k8_4",styles$14={TableToolbar:TableToolbar$1,TableToolbar__item},TableToolbar=({items:K})=>jsxRuntimeExports.jsx("div",{className:styles$14.TableToolbar,children:K==null?void 0:K.map(J=>jsxRuntimeExports.jsxs("div",{"aria-hidden":!0,className:cx(styles$14.TableToolbar__item),onClick:()=>{var ne;return!(J!=null&&J.isDisabled)&&((ne=J.onClick)==null?void 0:ne.call(J))},children:[(J==null?void 0:J.menu)&&jsxRuntimeExports.jsx(Y_,{menu:J.menu,children:jsxRuntimeExports.jsx(mf,{title:J.tooltipContent,children:jsxRuntimeExports.jsx(rl,{iconAfter:J.icon,"data-tid":J.testId,variant:"ghost",type:"secondary",disabled:J.isDisabled})})}),!(J!=null&&J.menu)&&jsxRuntimeExports.jsx(mf,{title:J.tooltipContent,children:jsxRuntimeExports.jsx(rl,{iconAfter:J.icon,"data-tid":J.testId,variant:"ghost",type:"secondary",disabled:J.isDisabled})})]},J.key))}),BreadcrumbToolbar=({itemKey:K,parentPathLength:J,currentBreadcrumb:ne})=>{const{t:oe}=useTranslation(),{state:ce,action:ue}=useEditorState(),Ae=(ce==null?void 0:ce.editorData)[ne.path[0]],pe=Array.isArray(Ae)&&Ae.length>K+1,ve=[...ne.path],me=[{key:"moveUp",icon:jsxRuntimeExports.jsx(aF,{}),tooltipContent:oe("editor.breadcrumbs.moveUp"),isDisabled:Number(K)<=0,onClick:()=>{const ge=ve.length-2;ve[ge]=(K-1).toString(),ue.closeTabAction(J+1),ue.openEditorTabAction({path:ve},1)}},{key:"moveDown",icon:jsxRuntimeExports.jsx(iF,{}),tooltipContent:oe("editor.breadcrumbs.moveDown"),isDisabled:!pe,onClick:()=>{const ge=ve.length-J;ve[ge]=(K+1).toString(),ue.closeTabAction(J+1),ue.openEditorTabAction({path:ve},1)}}];return jsxRuntimeExports.jsx(TableToolbar,{items:me})},getFullSchema=(K,J)=>{if(K.editorSchema)return Object.keys(K.editorSchema).find(ne=>cleanTypeHelper(ne)===J)},getMultiplySchemas=(K,J)=>{if(!K||!J.editorSchema)return null;const ne=Array.isArray(K)?K:[K],oe=new Set(ne.filter(Ae=>Ae).map(Ae=>Ae._t)),ce=[];if(oe.forEach(Ae=>{const pe=getFullSchema(J,Ae);if(pe&&J.editorSchema){const ve=J.editorSchema[pe];ce.push(ve)}}),ce.length<=1)return null;const ue={Elements:[],Module:{ModuleName:""},Name:"",Label:"",Comment:"",DisplayKind:SchemaDisplayKind.Basic};return ce.forEach(Ae=>{var pe;(pe=Ae.Elements)==null||pe.forEach(ve=>{var me,ge;(me=ue.Elements)!=null&&me.some(ye=>ye.Name===ve.Name)||(ge=ue.Elements)==null||ge.push(ve)})}),ue},EditorBreadcrumbs=()=>{const{state:K,action:J}=useEditorState(),{editorData:ne}=K,{activeIndex:oe,breadcrumbs:ce}=K.breadcrumbsData,ue=ce[ce.length-1],Ae=ue.path.length-ue.path.findIndex(Fe=>!isNaN$1(Number(Fe))),pe=ne==null?void 0:ne[ue.path[0]],ve=getPropByPath(K.editorData,[...ue.path.slice(0,oe)]),me=!!getMultiplySchemas(ne==null?void 0:ne[ue.path[0]],K),ge=isArray$7(pe),ye=ce.length>2&&!isArray$7(ve)&&!me&&ge&&isDefined$2(ve)&&ue.path[0]!=="AbstractDataList",{t:xe}=useTranslation(),_e=(Fe,ke=2)=>{if(!(Fe!=null&&Fe.length))return"Root";if(Fe.length>ke){const je=Fe.slice(-ke);return isNumericString(je[0])?je.toReversed().join("[")+"]":je.join(".")}return Fe.join(".")},$e={testId:`editor-breadcrumbs-${oe+1}`,label:jsxRuntimeExports.jsx(oF,{}),itemKey:oe>=0?[...[...Array(ce.length).keys()].filter(Fe=>Fe!==0)]:"",isClosable:!1,toolTipBreadcrumb:xe("editor.breadcrumbs.closeAll")},Ie=reactExports.useMemo(()=>ce==null?void 0:ce.map((Fe,ke)=>({testId:`editor-breadcrumbs-${ke}`,label:_e(Fe.path),itemKey:ke.toString()})),[K.breadcrumbsData]);return jsxRuntimeExports.jsxs("div",{className:"editor-breadcrumb",children:[jsxRuntimeExports.jsx(gF,{activeKey:oe.toString(),items:ce.length>1?[...Ie,$e]:[],onClick:Fe=>isArray$7(Fe)?Fe.toReversed().forEach(ke=>J.closeTabAction(ke)):J.switchTabAction(Number.parseInt(Fe)),onClose:Fe=>J.closeTabAction(Number.parseInt(Fe))}),ye&&jsxRuntimeExports.jsx("div",{className:"breadcrumbs_arrows",children:jsxRuntimeExports.jsx(BreadcrumbToolbar,{itemKey:Number.parseInt(ue.path[ue.path.length-Ae]),parentPathLength:Ae,currentBreadcrumb:ue})})]})},CodeEditorModal=({data:K,isReadOnly:J=!1,isOpen:ne=!1,onClose:oe,onSave:ce})=>{const{t:ue}=useTranslation(),[Ae,pe]=reactExports.useState(""),[ve,me]=reactExports.useState(!0);reactExports.useEffect(()=>{K&&ne&&(pe(serialize$1(K,void 0,2)),me(!0))},[K,ne]);const ge=_e=>{_e&&pe(_e),me(!1)},ye=_e=>{_e.length>0&&me(!0)},xe=()=>{Ae&&(ce==null||ce(deserialize$1(Ae)))};return jsxRuntimeExports.jsxs(Ho,{size:"lg",title:ue("editor.openJSONEditor"),open:ne,onClose:oe,defaultHeight:600,children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(CodeEditor,{isReadonly:J,code:Ae,language:LanguageEnum.Json,onChange:ge,onValidate:ye,isAutoFocus:!0})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"code-editor",onCancel:oe,okText:!J&&ue("buttons.save"),cancelText:ue("buttons.cancel"),onOk:xe,okProps:{disabled:ve}})]})},EditorActionJson=()=>{const{t:K}=useTranslation(),{state:J,event:ne}=useEditorState(),[oe,ce]=reactExports.useState(!1),ue=Ae=>{var pe;return(pe=ne==null?void 0:ne.onSubmit)==null?void 0:pe.call(ne,{data:Ae})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(mf,{title:K("editorToolbar.json"),children:jsxRuntimeExports.jsx(rl,{testid:"editor-action-json",iconAfter:jsxRuntimeExports.jsx(AD,{}),variant:"ghost",type:"secondary",onClick:()=>ce(!0)})}),jsxRuntimeExports.jsx(CodeEditorModal,{isReadOnly:J.isReadOnly,data:J.editorData,isOpen:oe,onClose:()=>ce(!1),onSave:ue})]})},EditorErrorTooltip=({errors:K,errorLimit:J=3,children:ne})=>{const oe=reactExports.useMemo(()=>K==null?void 0:K.map(ue=>({id:v4(),text:ue})),[K]),ce=()=>jsxRuntimeExports.jsx("div",{className:"editor-error-tooltip",children:oe==null?void 0:oe.slice(0,J).map(ue=>jsxRuntimeExports.jsx("div",{className:"editor-error-tooltip__error-item",children:ue.text},ue.id))});return jsxRuntimeExports.jsx(mf,{title:K.length?ce():"",children:ne})},EditorActionError=()=>{const{t:K}=useTranslation(),{state:J}=useEditorState(),ne=Object.keys(J.validationError),oe=`${K("editor.validation.containErrors")} [${ne.length}]`;return jsxRuntimeExports.jsx(EditorErrorTooltip,{errors:[oe],children:jsxRuntimeExports.jsx(rl,{iconAfter:jsxRuntimeExports.jsx(M_,{}),variant:"ghost",type:"danger",testid:"editor-action-error"})})},EditorToolbar=({children:K})=>jsxRuntimeExports.jsx("div",{className:"editor-toolbar",children:K});EditorToolbar.Group=({children:K,isRight:J=!1})=>jsxRuntimeExports.jsx("div",{className:cx("editor-toolbar__group",{"editor-toolbar":J}),children:K});EditorToolbar.Group.displayName="ToolbarGroup";EditorToolbar.Divider=()=>jsxRuntimeExports.jsx("div",{className:"editor-toolbar__divider"});EditorToolbar.Divider.displayName="ToolbarDivider";const EditorActionToolbarContainer=()=>{const{action:K}=useEditorState();return jsxRuntimeExports.jsx("div",{ref:K.setEditorToolbarRef})},EditorActionRefresh=()=>{const{t:K}=useTranslation(),{event:J}=useEditorState();return jsxRuntimeExports.jsx(mf,{title:K("editorToolbar.refresh"),children:jsxRuntimeExports.jsx(rl,{iconAfter:jsxRuntimeExports.jsx(Pk,{}),variant:"ghost",type:"secondary",onClick:J==null?void 0:J.onRefresh})})},EditorHeaderAction=({clearIcon:K})=>{var Ae;const{event:J,state:ne,action:oe}=useEditorState(),ce=!!((Ae=Object.keys(ne.validationError))!=null&&Ae.length),ue=[{view:jsxRuntimeExports.jsx(EditorActionToolbarContainer,{}),isShow:!!oe.setEditorToolbarRef,dividedAfter:!0},{view:jsxRuntimeExports.jsx(EditorActionRefresh,{}),isShow:!!(J!=null&&J.onRefresh)},{view:jsxRuntimeExports.jsx(EditorActionJson,{}),isShow:!1},{view:jsxRuntimeExports.jsx(EditorActionError,{}),isShow:ce}];return jsxRuntimeExports.jsxs(EditorToolbar,{children:[ue==null?void 0:ue.map((pe,ve)=>pe.isShow&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[pe.dividedBefore&&jsxRuntimeExports.jsx(EditorToolbar.Divider,{}),jsxRuntimeExports.jsx(EditorToolbar.Group,{children:pe.view},ve),pe.dividedAfter&&jsxRuntimeExports.jsx(EditorToolbar.Divider,{})]},ve)),K]})},EditorHeader=({clearIcon:K})=>jsxRuntimeExports.jsxs("div",{className:"editor-header",children:[jsxRuntimeExports.jsx("div",{className:"editor-header__left",children:jsxRuntimeExports.jsx(EditorBreadcrumbs,{})}),jsxRuntimeExports.jsx("div",{className:"editor-header__right",children:jsxRuntimeExports.jsx(EditorHeaderAction,{clearIcon:K})})]}),EditorFlatTable=({children:K})=>jsxRuntimeExports.jsxs("table",{className:"editor-flat-table",children:[jsxRuntimeExports.jsxs("colgroup",{children:[jsxRuntimeExports.jsx("col",{className:"editor-flat-table__label-column-size"}),jsxRuntimeExports.jsx("col",{className:"editor-flat-table__value-column-size"})]}),jsxRuntimeExports.jsx("tbody",{children:K})]});EditorFlatTable.Row=({children:K,isSelected:J})=>jsxRuntimeExports.jsx("tr",{tabIndex:-1,className:cx("editor-flat-table__tr",{"editor-flat-table__tr_selected":J}),children:K});EditorFlatTable.Row.displayName="EditorFlatTableRow";EditorFlatTable.Cell=({children:K})=>jsxRuntimeExports.jsx("td",{className:"editor-flat-table__td",children:K});EditorFlatTable.Cell.displayName="EditorFlatTableCell";const TransitionIcon=({data:K,testid:J})=>{const{event:ne}=useEditorState(),oe=reactExports.useMemo(()=>({type:ParseGenericValue.toDomainType(K),key:ParseGenericValue.toDomainRecord(K)}),[K]),ce=()=>{var ue;(ue=ne==null?void 0:ne.onTransition)==null||ue.call(ne,oe)};return!(oe!=null&&oe.key)||!(oe!=null&&oe.type)||!(ne!=null&&ne.onTransition)?null:jsxRuntimeExports.jsx(oa,{testid:J,onClick:ce,children:jsxRuntimeExports.jsx(mT,{})})},useValidationError=({path:K})=>{const{state:J}=useEditorState(),ne=()=>{var Ae;if(K)return(Ae=J.validationError)==null?void 0:Ae[K.toString()]},oe=()=>{if(!(J!=null&&J.validationError)||!K)return[];const Ae=Object.values(J.validationError);return K.length?Ae.filter(pe=>K.every((ve,me)=>ve===pe.path[me])):Ae},ce=reactExports.useMemo(()=>{var Ae;return(Ae=oe())==null?void 0:Ae.map(pe=>`${pe.path.join(".")} - ${pe.message}`)},[J.validationError,K]),ue=reactExports.useMemo(()=>{const Ae=ne();return Ae?[Ae.message]:ce},[J.validationError,K]);return{nestedErrorList:ce,errorList:ue}},EditorDrillIcon=({isDisable:K,testid:J,onClick:ne})=>jsxRuntimeExports.jsx(oa,{testid:J,disabled:K,onClick:ne,children:jsxRuntimeExports.jsx(dT,{})}),EditorKeyCell=({row:K})=>{const{isFlat:J,isVector:ne,description:oe,isRequired:ce,isKey:ue,value:Ae,path:pe,valueType:ve,keyName:me,schemaType:ge,label:ye}=K.original,{theme:xe}=uF(),{action:_e,event:$e,isHandler:Ie}=useEditorState(),{state:Fe}=useEditorTabState(),{errorList:ke}=useValidationError({path:pe}),je=()=>{_e.openEditorTabAction({path:pe},Fe.tabIndex)},We=()=>{var Je;me&&isString$3(Ae)&&((Je=$e==null?void 0:$e.onTransition)==null||Je.call($e,{type:me,key:Ae}))},ze=()=>{const Je=ge===SchemaType.GenericData||ge===SchemaType.Successor||ge===SchemaType.GenericDataList,nt=ge===SchemaType.GenericKey&&isString$3(Ae),et=ge===SchemaType.SimpleKey&&Ae&&($e==null?void 0:$e.onTransition),tt=ve===ValueTypesEnum$1.Dict,st=ge!==SchemaType.BinaryContent&&!Je&&!nt&&(J||ne||tt)||ge===SchemaType.NdFloatMatrix||ge===SchemaType.NdFloatVector,qe=!Ie&&(!Ae||!(Ae!=null&&Ae._t))&&ue||(ge===SchemaType.GenericData||ge===SchemaType.GenericDataList)&&!Ae;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[et&&jsxRuntimeExports.jsx(oa,{testid:"transition",onClick:We,children:jsxRuntimeExports.jsx(mT,{})}),nt&&jsxRuntimeExports.jsx(TransitionIcon,{data:Ae,testid:"transition"}),st&&jsxRuntimeExports.jsx(EditorDrillIcon,{testid:"drill-down",onClick:je}),Je&&jsxRuntimeExports.jsx(EditorDrillIcon,{testid:"drill-down",isDisable:qe,onClick:je})]})},Xe=()=>(ke==null?void 0:ke.length)>0&&jsxRuntimeExports.jsx(EditorErrorTooltip,{errors:ke,children:jsxRuntimeExports.jsx(rl,{size:"sm",iconAfter:jsxRuntimeExports.jsx(M_,{}),variant:"ghost",type:"danger"})});return jsxRuntimeExports.jsxs("div",{title:oe,className:"editor-key-cell",children:[jsxRuntimeExports.jsxs("div",{className:"editor-key-cell__info",children:[jsxRuntimeExports.jsx("div",{"data-tid":`editor-key-${ye}`,className:"editor-key-cell__label",children:ye}),ce&&jsxRuntimeExports.jsx(LF$2,{}),ue&&jsxRuntimeExports.jsx("span",{"data-tid":`editor-key-${ye}`,children:jsxRuntimeExports.jsx(nA,{color:xe.palette.orange.a700,size:"XS"})})]}),jsxRuntimeExports.jsxs("div",{className:"editor-key-cell__actions",children:[Xe(),ze()]})]})},EditorNewRecord=({recordType:K,editorData:J,onSubmit:ne,onClose:oe})=>{const{request:ce,i18n:ue,dataset:Ae}=useEditorState(),pe=useRequest(ce.getSchema,{autorun:!0,args:{name:K}}),ve=useRequest(ce.saveRecord);if(pe.isLoading)return jsxRuntimeExports.jsx(PF,{loading:!0});if(!pe.state)return jsxRuntimeExports.jsx(RF,{});const me=({data:ge})=>{ve.fetch({dataset:Ae,data:[{_t:K,...ge}]}).then(ye=>{ne==null||ne(ye[0].Key)}).catch(toast.error)};return jsxRuntimeExports.jsx(Editor,{dataset:Ae,data:J,schema:pe.state.typeList,rootSchemaName:pe.state.rootType,onCancel:oe,onSubmit:me,requestConfig:ce,i18n:ue,isCancelDisabled:!1})},KeySelectCreateModal=({isOpen:K,onClose:J,schemaName:ne,onSubmit:oe})=>{const{t:ce}=useTranslation();return jsxRuntimeExports.jsx(Ho,{open:K,defaultHeight:450,title:ce("editor.entityModalHeader"),onClose:J,children:jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(EditorNewRecord,{recordType:ne,onClose:J,onSubmit:oe})})})},KeySelectCopyModal=({isOpen:K,onClose:J,schemaName:ne,data:oe,onSubmit:ce})=>{const{t:ue}=useTranslation();return jsxRuntimeExports.jsx(Ho,{open:K,defaultHeight:450,title:ue("editor.copyEntity"),onClose:J,children:jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(EditorNewRecord,{recordType:ne,editorData:oe,onClose:J,onSubmit:ce})})})},KeySelectToolbar=({schemaName:K,data:J,onSubmit:ne})=>{const{t:oe}=useTranslation(),[ce,ue]=reactExports.useState(!1),[Ae,pe]=reactExports.useState(!1),ve=env$1.isSimplifiedBuild?[]:[{key:"createRecord",icon:jsxRuntimeExports.jsx(Dk,{}),tooltipContent:oe("editor.createEntity"),onClick:()=>ue(!0)},{key:"createCopyRecord",icon:jsxRuntimeExports.jsx(jk,{}),tooltipContent:oe("editor.copyEntity"),isDisabled:!J,onClick:()=>pe(!0)}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TableToolbar,{items:ve}),!env$1.isSimplifiedBuild&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(KeySelectCreateModal,{schemaName:K,isOpen:ce,onClose:()=>ue(!1),onSubmit:ne}),jsxRuntimeExports.jsx(KeySelectCopyModal,{schemaName:K,data:J,isOpen:Ae,onClose:()=>pe(!1),onSubmit:ne})]})]})},LIMIT$1=1e3,SKIP$1=0,KeySelectModal=({schemaName:K,defaultKey:J,isOpen:ne,onClose:oe,onSubmit:ce})=>{var ke;const{t:ue}=useTranslation(),[Ae,pe]=reactExports.useState(),{state:ve}=useRequest(handlerApi.handlerRun,{autorun:!0,args:{Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectTable",Keys:[],Arguments:{Skip:SKIP$1,Limit:LIMIT$1,TableName:K}},onError:toast.error}),me=(ke=ve==null?void 0:ve[0])==null?void 0:ke.Result,ge=me&&{data:me.Data,schema:{rootType:convertRootSchema(me.Schema,me.BaseType),typeList:me.Schema}};reactExports.useEffect(()=>{var We;const je=(We=ge==null?void 0:ge.data)==null?void 0:We.findIndex(ze=>(ze==null?void 0:ze._key)===J);je&&je>=0&&pe(je)},[ve,J]);const ye=reactExports.useCallback(je=>je&&ce(je),[ce]),xe=reactExports.useCallback((je,We)=>jsxRuntimeExports.jsx("div",{className:"key-select-modal__table-cell",onDoubleClick:()=>ye(We==null?void 0:We._key),"aria-hidden":!0,children:je}),[ye]),_e=reactExports.useMemo(()=>{var We;const je=(We=ge==null?void 0:ge.schema.typeList[ge.schema.rootType])==null?void 0:We.Elements;return je==null?void 0:je.map(ze=>({key:ze==null?void 0:ze.Name,dataIndex:ze==null?void 0:ze.Name,title:ze==null?void 0:ze.Name,minWidth:200,render:xe}))},[ge]),$e=reactExports.useMemo(()=>{const je=ge==null?void 0:ge.data;return je?je.map(We=>{for(const[ze,Xe]of Object.entries(We))typeof Xe=="object"&&(We[ze]="");return{key:We._key,...We}}):[]},[ge]),Ie=reactExports.useMemo(()=>{var ze;if(!isNumber$2(Ae))return;const je=["_key","_t"],We=structuredClone((ze=ge==null?void 0:ge.data)==null?void 0:ze[Ae]);if(We)for(const Xe of je)delete We[Xe];return We},[Ae,ve]),Fe=()=>{var We;if(!(ge!=null&&ge.data)||!isNumber$2(Ae))return;const je=(We=ge.data[Ae])==null?void 0:We._key;je&&ce(je)};return jsxRuntimeExports.jsxs(Ho,{open:ne,defaultHeight:450,title:ue("editor.modalHeader"),onClose:oe,children:[jsxRuntimeExports.jsx("div",{className:"key-select-modal__toolbar",children:jsxRuntimeExports.jsx(KeySelectToolbar,{schemaName:K,data:Ie,onSubmit:ce})}),jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(SF,{useSearch:!0,dataSource:$e,columns:_e,selectedRowIndex:Ae,onChangeSelectedRowIndex:pe})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"key-select",onCancel:oe,onOk:Fe,cancelText:ue("buttons.cancel"),okText:ue("buttons.apply")})]})},LIMIT=1e3,SKIP=0,KeySelect=({value:K,isReadOnly:J,isVector:ne,schemaModuleName:oe,schemaName:ce,onChange:ue,testId:Ae})=>{const{event:pe,dataset:ve}=useEditorState(),[me,ge]=reactExports.useState(!1),{request:ye}=useEditorState(),{state:xe,fetch:_e,isLoading:$e}=useRequest(ye.getSelectRecords),Ie=()=>{!ce||xe||_e({params:{type:ce,skip:SKIP,limit:LIMIT,table_format:!0,dataset:ve}}).catch(toast.error)},Fe=reactExports.useMemo(()=>{var ze;return(ze=xe==null?void 0:xe.data)!=null&&ze.length?xe.data.map(Xe=>({label:Xe._key,value:Xe._key})):[]},[xe]),ke=ze=>ue==null?void 0:ue(ze||null),je=ze=>{ke(ze),ge(!1)},We=()=>{if(ne&&ce&&K&&(pe!=null&&pe.onTransition))return jsxRuntimeExports.jsx(oa,{testid:"arrow-icon",onClick:()=>{var ze;return(ze=pe.onTransition)==null?void 0:ze.call(pe,{type:ce,key:K})},children:jsxRuntimeExports.jsx(mT,{})})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(hF,{testId:`${Ae}-input`,selectOnFocus:!0,deselectOnEsc:!0,variant:"borderless",readOnly:J,isLoading:$e,value:K,options:Fe,prefix:We(),onChange:ke,onOpen:Ie,suffix:jsxRuntimeExports.jsx(oa,{testid:"navigate-button",disabled:J,onClick:()=>ge(!0),children:jsxRuntimeExports.jsx(PB,{})})}),me&&oe&&ce&&jsxRuntimeExports.jsx(KeySelectModal,{schemaName:ce,defaultKey:K,isOpen:me,onClose:()=>ge(!1),onSubmit:je})]})},GenericDataValue=({value:K,isReadOnly:J,type:ne,path:oe,onChange:ce,testId:ue})=>{const{action:Ae,state:pe,fetch:ve,request:me}=useEditorState(),{state:ge}=useEditorTabState(),{fetch:ye}=useRequest(me.getTypes);reactExports.useEffect(()=>{pe.allTypes||ye().then(Ae.setAllTypesAction).catch(toast.error),ne&&ve.getAdditionalSchema({type:ne})},[]);const xe=reactExports.useMemo(()=>dataToString(K),[K]),_e=reactExports.useMemo(()=>pe.allTypes?pe.allTypes.map(Fe=>({value:Fe.Name,label:Fe.Label,module:Fe.Module})):null,[pe.allTypes]),$e=Fe=>{Fe&&ve.getFlatWithTypeDataFetch({type:Fe}).then(ke=>ke&&(ce==null?void 0:ce(ke)))},Ie=()=>{if(!(!oe||!ne))return jsxRuntimeExports.jsx(EditorDrillIcon,{testid:`${ue}-drill-icon`,onClick:()=>Ae.openEditorTabAction({path:oe},ge.tabIndex)})};return jsxRuntimeExports.jsxs("div",{className:"generic-data-value",children:[jsxRuntimeExports.jsx(Ml,{testId:`${ue}-input`,selectOnFocus:!0,readOnly:!0,variant:"borderless",value:xe,prefix:Ie()}),_e&&jsxRuntimeExports.jsx(xF,{testid:`${ue}-select`,variant:"borderless",disabled:J,value:ne,options:_e,onChange:$e})]})},SuccessorValue=({value:K,currentSuccessor:J,schemaSuccessor:ne,isReadOnly:oe,onChange:ce,testId:ue,moduleName:Ae,successorIndex:pe})=>{const{fetch:ve,request:me}=useEditorState(),ge=useRequest(me.getTypeHierarchy),[ye,xe]=reactExports.useState([]),{state:_e}=useEditorState(),{state:$e}=useEditorTabState(),Ie=$e.breadcrumbPath,{editorData:Fe}=_e,[ke,je]=reactExports.useState(J),We=reactExports.useMemo(()=>Fe&&getPropByPath(Fe,Ie),[Fe,Ie]);reactExports.useEffect(()=>{je(J)},[J]),reactExports.useEffect(()=>{ne&&ge.fetch({name:ne}),Ae&&ve.getModuleSuccessorOptions(Ae).then(Xe=>{xe(Xe),!Xe.find(Je=>Je.value===J)&&cleanTypeHelper($e.tab.selector)===Ae&&(je(Xe[0].value),ze(Xe[0].value))}),ke&&ve.getAdditionalSchema({type:ke})},[ke,ye,Ae]);const ze=async Xe=>{if(!(!Xe||Xe===ke)){if(isArray$7(We)){const Je=await Promise.all(We.map(async(nt,et)=>et===pe?await ve.getFlatWithTypeDataFetch({type:Xe}):nt));ce==null||ce(Je)}else{const Je=await ve.getFlatWithTypeDataFetch({type:Xe});ce==null||ce(Je)}je(Xe)}};return jsxRuntimeExports.jsxs("div",{className:"editor-successor-value",children:[jsxRuntimeExports.jsx(Ml,{readOnly:!0,selectOnFocus:!0,testId:`${ue}-input`,value:K,variant:"borderless"}),ye&&jsxRuntimeExports.jsx(xF,{testid:`${ue}-select-module`,className:"editor-successor-value__select",variant:"borderless",disabled:oe,value:ke,options:ye,onChange:ze})]})},EnumValue=({enumSelector:K,value:J="",isDisable:ne,onChange:oe,testId:ce})=>{const{state:ue}=useEditorState(),Ae=reactExports.useMemo(()=>{var ve,me;const pe=K&&((me=(ve=ue.editorSchema)==null?void 0:ve[K])==null?void 0:me.Items)||[];return[{label:"(none)",value:""},...pe.map(ge=>({label:ge.Label||ge.Name,value:ge.Name}))]},[K,ue.editorSchema]);return jsxRuntimeExports.jsx(xF,{testid:ce,variant:"borderless",disabled:ne,value:J,options:Ae,onChange:pe=>oe(pe||null)})},BinaryValue=({value:K,isReadOnly:J,isMultiply:ne=!1,onChange:oe,testId:ce})=>{const ue=async pe=>{oe(await convertFilesToBinaryData(pe,ne))},Ae=reactExports.useMemo(()=>isArray$7(K)?dataToString(K==null?void 0:K.map(pe=>pe.Name)):(K==null?void 0:K.Name)||"",[K]);return jsxRuntimeExports.jsx(yF,{variant:"borderless",value:Ae,onChange:ue,multiply:ne,readOnly:J,testId:ce})},convertFilesToBinaryData=async(K,J)=>{if(!K)return null;const ne=K==null?void 0:K.map(ue=>ue.name),oe=K==null?void 0:K.map(fileToBase64$1),ce=await Promise.all(oe);return J?ce==null?void 0:ce.map((ue,Ae)=>({Name:ne[Ae],FileBytes:ue,_t:"FileData"})):{Name:ne[0],FileBytes:ce[0],_t:"FileData"}},handleNumberChangeHelper=(K,J,ne,oe,ce)=>{if(J)return;const ue=String(K??"");ne(ue),oe({fn:()=>ce(ue===""?null:Number(ue))})},handleStringChangeHelper=(K,J,ne,oe,ce)=>{J||(ne(K),oe({fn:()=>ce(K)}))},TableBodyCell=({path:K,schemaType:J,keyModuleName:ne,keyName:oe,elementName:ce,originalValue:ue,successor:Ae,valueType:pe,isVector:ve,isViewOnly:me,isRequired:ge,isReadOnly:ye,isReadOnlyHint:xe,prefixElement:_e,suffixElement:$e,enumSelector:Ie,successorIndex:Fe,onChange:ke})=>{const{t:je}=useTranslation(),{debounce:We}=useDebounce(300),{errorList:ze}=useValidationError({path:K}),[Xe,Je]=reactExports.useState(String(ue??"")),{state:nt}=useEditorTabState(),et=!!ye||!!me,tt=ze.length>0;reactExports.useEffect(()=>{Je(String(ue??""))},[ue]);const st=Ge=>{handleNumberChangeHelper(Ge,et,Je,We,ke)},qe=Ge=>{handleStringChangeHelper(Ge,et,Je,We,ke)},Se=()=>jsxRuntimeExports.jsx(BinaryValue,{value:ue,isMultiply:ve,isReadOnly:ye,onChange:ke,testId:"editor-binary-value"}),Re=()=>{const Ge=ue,Ye=cleanTypeHelper(Ge==null?void 0:Ge._t);return jsxRuntimeExports.jsx(SuccessorValue,{testId:"editor-successor-value",schemaSuccessor:Ae||"",isReadOnly:et,value:dataToString(ue),currentSuccessor:Ye,onChange:ke,moduleName:nt.tab.moduleName,successorIndex:Fe})},Be=()=>jsxRuntimeExports.jsx(KeySelect,{testId:"editor-key-select-value",isReadOnly:et,isVector:ve,schemaName:oe,schemaModuleName:ne,value:Xe,onChange:ke}),Ne=()=>{const Ge=ue,Ye=cleanTypeHelper(Ge==null?void 0:Ge._t);return jsxRuntimeExports.jsx(GenericDataValue,{testId:"editor-generic-data-value",isReadOnly:et,path:ve?K:void 0,type:Ye,value:Ge,onChange:ke})},Ue=()=>{var Ge,Ye;switch(!0){case J===SchemaType.BinaryContent:return Se();case(nt.tab.moduleName&&nt.tabIndex>0&&ce==="Type"):return Re();case J===SchemaType.SimpleKey:return Be();case(pe===ValueTypesEnum$1.Dict&&J!==SchemaType.Variant):return jsxRuntimeExports.jsx(Ml,{testId:"editor-dict-value",variant:"borderless",selectOnFocus:!0,value:dataToString(ue),suffix:$e});case J===SchemaType.GenericData:return Ne();case J===SchemaType.GenericKey:return jsxRuntimeExports.jsx(GenericKeySelect,{testId:"editor-generic-key-value",isReadOnly:et,prefixElement:_e,value:ue||"",onChange:ke});case J===SchemaType.Variant:{const Qe=isObject$9(ue)?(Ge=Object.keys(ue))==null?void 0:Ge[0]:null,Te=Qe?ue==null?void 0:ue[Qe]:null;return jsxRuntimeExports.jsx(VariantSelect,{testId:"editor-variant-value",selectOnFocus:!0,isReadOnly:ye,variantType:Qe,value:Te,onChange:ke})}case(pe===ValueTypesEnum$1.String&&!ve):return jsxRuntimeExports.jsx(StringValue,{deselectOnEsc:!0,blurOnEnter:!0,useTabEditor:!0,path:K,elementName:ce,value:Xe,onChange:qe,readOnly:et,testId:"editor-string-value"});case(pe===ValueTypesEnum$1.Bool&&!ve):return jsxRuntimeExports.jsx(BooleanValue,{testId:"editor-boolean-value",value:ue,onChange:ke,isDisable:et,isRequired:ge});case(J===SchemaType.Enum&&!ve):return jsxRuntimeExports.jsx(EnumValue,{testId:"editor-enum-value",value:ue,onChange:ke,isDisable:et,enumSelector:Ie});case(isDateType(pe)&&!me):return jsxRuntimeExports.jsx(DateValue,{readOnly:et,value:ue,valueType:pe,onChange:ke,testId:`editor-${(Ye=pe||"date")==null?void 0:Ye.toLowerCase()}-value`});case((pe===ValueTypesEnum$1.Int||pe===VariantType.Double)&&!me):return jsxRuntimeExports.jsx(CF,{testid:"editor-number-value",variant:"borderless",useHighlightNegative:!0,selectOnFocus:!0,deselectOnEsc:!0,blurOnEnter:!0,value:Xe,readOnly:et,prefix:_e,onChange:st});case me:return jsxRuntimeExports.jsx(Ml,{testId:"editor-view-only-value",selectOnFocus:!0,value:dataToString(ue),variant:"borderless",readOnly:et,prefix:_e,suffix:$e});case(J===SchemaType.NdFloatVector||J===SchemaType.NdFloatMatrix):return jsxRuntimeExports.jsx(Ml,{testId:"editor-ndfloatvector-value",variant:"borderless",readOnly:!0,value:ue?dataToString(ue.values):""});default:return jsxRuntimeExports.jsx(Ml,{testId:"editor-tempValue",selectOnFocus:!0,deselectOnEsc:!0,blurOnEnter:!0,value:Xe,variant:"borderless",readOnly:et,prefix:_e,suffix:$e,onChange:qe})}};return xe?jsxRuntimeExports.jsx(mf,{title:je("editor.readonlyHint"),children:jsxRuntimeExports.jsx("div",{className:"table-body-cell",children:Ue()})}):jsxRuntimeExports.jsx(EditorErrorTooltip,{errors:ze,children:jsxRuntimeExports.jsx("div",{className:cx("table-body-cell",{"table-body-cell__error":tt}),children:Ue()})})},useComplexCell=({value:K,isKey:J,isFlat:ne,isVector:oe,isReadOnly:ce})=>{const{state:ue}=useEditorState();return{checkViewOnly:()=>oe||ne,checkReadOnly:()=>J&&ue.isDisableKeyFields||ue.isReadOnly||ce}},EditorLengthIcon=({length:K})=>K?jsxRuntimeExports.jsx("div",{"data-tid":"editor-length-icon",className:"editor-length-icon",children:`[${K}]`}):null,FlatCell=({value:K,row:J})=>{const{action:ne}=useEditorState(),{path:oe}=J.original,{checkViewOnly:ce,checkReadOnly:ue}=useComplexCell({...J.original,value:K}),Ae=ve=>{ne.updateEditorData({path:oe,updateValue:ve})},pe=ve=>isArray$7(ve)?ve.map(me=>isString$3(me)?dayjs(me,DateValueFormat.Time).format(DateValueFormat.Time):me):ve;return jsxRuntimeExports.jsx(TableBodyCell,{path:oe,enumSelector:J.original.enumSelector,elementName:J.original.elementKey,originalValue:J.original.valueType===ValueTypesEnum$1.Time?pe(K):K,keyName:J.original.keyName,keyModuleName:J.original.keyModuleName,schemaType:J.original.schemaType,successor:J.original.successor,valueType:J.original.valueType,isVector:J.original.isVector,isRequired:J.original.isRequired,isViewOnly:ce(),isReadOnly:ue(),isReadOnlyHint:J.original.isReadOnly,isFlatCell:!0,suffixElement:isArray$7(K)&&jsxRuntimeExports.jsx(EditorLengthIcon,{length:K.length}),successorIndex:J.original.successorIndex,onChange:Ae},oe.toString())},FlatTableView=({data:K,successorIndex:J})=>{var $e,Ie;const{state:ne}=useEditorTabState(),{state:oe,fetch:ce}=useEditorState(),ue=(Ie=($e=oe.breadcrumbsData.breadcrumbs)==null?void 0:$e[ne.tabIndex+1])==null?void 0:Ie.path,[Ae,pe]=reactExports.useState(!0),[ve,me]=reactExports.useState([]),ge=!!ne.tabIndex&&!ne.tab.isReadOnly&&(ve==null?void 0:ve.length)>1&&!(ne.tabIndex>1&&!ve.some(Fe=>Fe.value===cleanTypeHelper(ne.tab.selector)));reactExports.useEffect(()=>{ne.tab.moduleName&&ce.getModuleSuccessorOptions(ne.tab.moduleName).then(me)},[ne.tab.moduleName]),reactExports.useEffect(()=>{pe((!K||K.length===0)&&cleanTypeHelper(ne.tab.selector)!=="RuleProcessorParameters")},[K]);const ye={value:{_t:cleanTypeHelper(ne.tab.selector)},key:"Type",label:"Type",isVector:!1,schemaType:null,elementKey:"Type",valueType:ValueTypesEnum.String,description:"ID String element",isRequired:!1,isKey:!1,isFlat:!1,path:ne.tab.path,moduleName:ne.tab.moduleName,selector:ne.tab.selector,isReadOnly:!1,successorIndex:J},{rows:xe,prepareRow:_e}=reactTableExports.useTable({columns:columns$1,data:ge?[ye,...K]:K},Fe=>{Fe.prepareRow.push(ke=>{var je;Object.assign(ke,{isRowExpanded:((je=ke.original.path)==null?void 0:je.toString())===(ue==null?void 0:ue.toString())})})});return jsxRuntimeExports.jsx(EditorFlatTable,{children:xe.map(Fe=>(_e(Fe),jsxRuntimeExports.jsx(PF,{loading:Ae,children:jsxRuntimeExports.jsx(EditorFlatTable.Row,{isSelected:Fe.isRowExpanded,children:Fe.cells.map(ke=>jsxRuntimeExports.jsx(EditorFlatTable.Cell,{children:ke.render("Cell")},ke.getCellProps().key))},Fe.id)},Fe.id)))})},columns$1=[{id:"key",accessor:"key",Cell:EditorKeyCell},{id:"value",accessor:"value",Cell:FlatCell}],ComplexView=({data:K={},schema:J})=>{const{state:ne}=useEditorTabState(),oe=ne.breadcrumbPath,ce=reactExports.useMemo(()=>{var ue;return(ue=J==null?void 0:J.Elements)==null?void 0:ue.reduce((Ae,pe)=>(pe.Hidden||Ae.push({value:K==null?void 0:K[pe.Name],...getCellProps({schemaElement:pe,keys:J.Keys,path:oe})}),Ae),[])},[K,J,oe]);return J?ce?jsxRuntimeExports.jsx(FlatTableView,{data:ce}):jsxRuntimeExports.jsx(RF,{title:"Empty view data"}):jsxRuntimeExports.jsx(RF,{title:"Empty view schema"})},SimpleCell=({rowIndex:K,value:J})=>{const{action:ne,state:oe}=useEditorState(),{state:ce}=useEditorTabState(),{keyName:ue,keyModuleName:Ae,valueType:pe,title:ve,schemaType:me,enumSelector:ge,isReadOnly:ye,isRequired:xe}=ce.tab,_e=reactExports.useMemo(()=>[...ce.breadcrumbPath,K.toString()],[ce.breadcrumbPath]),$e=Ie=>{ne.updateEditorData({path:_e,updateValue:Ie})};return jsxRuntimeExports.jsx("div",{title:dataToString(J),className:"simple-cell",children:jsxRuntimeExports.jsx(TableBodyCell,{path:_e,keyName:ue,keyModuleName:Ae,enumSelector:ge,isRequired:xe,isReadOnly:oe.isReadOnly||ye,schemaType:convertSchemaType(me),elementName:ve,originalValue:J,valueType:pe,prefixElement:jsxRuntimeExports.jsx(TransitionIcon,{data:J}),onChange:$e},_e.toString())})},convertSchemaType=K=>{switch(K){case SchemaType.VariantList:return SchemaType.Variant;case SchemaType.GenericDataList:return SchemaType.GenericData;case SchemaType.GenericKeyList:return SchemaType.GenericKey;case SchemaType.SimpleKeyList:return SchemaType.SimpleKey;default:return K}},getSpecificElementFromSchema=(K,J,ne)=>{var oe;if(!(!K.editorSchema||!J||!ne))return(oe=J==null?void 0:J.Elements)==null?void 0:oe.find(ce=>ce.Name===ne)},ArrayToolbar=({arrayLength:K,selectedIndex:J,selectedGroup:ne,onSelectedIndexChange:oe,onSelectedGroupChange:ce,isAbstractData:ue,isGridView:Ae,handleChangeView:pe,pathAdd:ve})=>{var it,at,lt,ct,ot,ft;const{action:me,fetch:ge,state:ye}=useEditorState(),{state:xe}=useEditorTabState(),{t:_e}=useTranslation(),{path:$e,selector:Ie}=xe.tab,[Fe,ke]=reactExports.useState([]),[je,We]=reactExports.useState(null),ze=isArray$7(J)?J:[J],Xe=ze.length>1,Je=isNullable(J),nt=!K,et=reactExports.useRef(xe.tab.selector),tt=xe.breadcrumbPath[xe.tabIndex],st=getFullSchema(ye,cleanTypeHelper(et.current)),qe=(it=ye==null?void 0:ye.editorSchema)==null?void 0:it[st??""],Se=getSpecificElementFromSchema(ye,qe,tt),Re=((ot=(ct=(lt=(at=ye.breadcrumbsData)==null?void 0:at.breadcrumbs)==null?void 0:lt[ye.breadcrumbsData.activeIndex+1])==null?void 0:ct.path)==null?void 0:ot[xe.tabIndex])??"",Be=ue?xe.tab.moduleName:((ft=et.current)==null?void 0:ft.trim())||Ie;reactExports.useEffect(()=>{et.current!==(Se==null?void 0:Se._t)&&xe.tabIndex>1&&(et.current=(Se==null?void 0:Se._t)??""),!(et.current!==xe.tab.selector&&xe.tabIndex>=2)&&(et.current=xe.tab.selector)},[xe.tabIndex,xe.tab.selector,xe.breadcrumbPath]),reactExports.useEffect(()=>{!isArray$7(J)&&J+1>K&&K>0&&oe(K-1)},[K]),reactExports.useEffect(()=>{xe.tab.moduleName&&ge.getModuleSuccessorOptions(cleanTypeHelper(ue?xe.tab.moduleName:et.current)).then(ke)},[xe.breadcrumbPath,xe.tabIndex]),reactExports.useEffect(()=>{if(!je)return;const dt=getFullSchema(ye,je);dt&&(me.addListElementAction({path:$e,selector:dt}),We(null))},[ye,je]);const Ne=()=>ne.length&&!Xe&&!isArray$7(J)||!Ae?ne:ze,Ue=()=>ce==null?void 0:ce([]),Ge=()=>{me.addListElementAction({path:ve??$e,selector:Be})},Ye=()=>{me.addListElementAction({path:$e,index:ze[0],selector:Ie})},Qe=()=>{const dt=ze[0]-1;me.moveListElementAction({path:$e,from:ze[0],to:dt})&&oe(dt)},Te=()=>{const dt=ze[0]+1;me.moveListElementAction({path:$e,from:ze[0],to:dt})&&oe(dt)},Ke=()=>{me.removeListElementAction({path:xe.breadcrumbPath,index:Ne()}),Ne().includes(Number.parseInt(Re))&&me.closeTabAction(xe.tabIndex+1),oe([]),Ue()},rt=[...ue?[{key:"Switch",icon:Ae?jsxRuntimeExports.jsx(tF,{}):jsxRuntimeExports.jsx(nF,{}),tooltipContent:_e(Ae?"editor.listToolbar.grid":"editor.listToolbar.list"),isDisabled:!1,onClick:pe}]:[],{key:"addElement",icon:jsxRuntimeExports.jsx(Dk,{}),tooltipContent:_e("editor.listToolbar.add"),onClick:ue?void 0:Ge,menu:Fe.length>1?{items:Fe.map(dt=>({key:(dt==null?void 0:dt.value)??"",label:dt.label??""})),onClick:({key:dt})=>{ge.getAdditionalSchema({type:dt}),We(dt)}}:void 0,testId:"toolbar-add-element-button"},{key:"insertRow",icon:jsxRuntimeExports.jsx(DA,{}),tooltipContent:_e("editor.listToolbar.insertRow"),isDisabled:Je||nt,onClick:Ye,testId:"toolbar-insert-row-button"},{key:"moveUp",icon:jsxRuntimeExports.jsx(TA,{}),tooltipContent:_e("editor.listToolbar.moveRowUp"),isDisabled:Je||nt||ze[0]===0||Xe,onClick:Qe,testId:"toolbar-move-up-button"},{key:"moveDown",icon:jsxRuntimeExports.jsx(kA,{}),tooltipContent:_e("editor.listToolbar.moveRowDown"),isDisabled:Je||nt||ze[0]+1===K||Xe,onClick:Te,testId:"toolbar-move-down-button"},{key:"deleteElement",icon:jsxRuntimeExports.jsx(Tk,{}),tooltipContent:_e("editor.listToolbar.remove"),isDisabled:Je||nt,onClick:Ke,testId:"toolbar-delete-element-button"}];return(ue||!Ae)&&jsxRuntimeExports.jsx(TableToolbar,{items:rt})},NoData="_NoData_1mq8p_1",NoDataIcon="_NoDataIcon_1mq8p_10",NoDataMessage="_NoDataMessage_1mq8p_15",styles$13={NoData,NoDataIcon,NoDataMessage},EmptyAbstractData=()=>jsxRuntimeExports.jsxs("div",{className:styles$13.NoData,children:[jsxRuntimeExports.jsx("div",{className:styles$13.NoDataIcon,children:jsxRuntimeExports.jsx(lF,{width:"48px",height:"48px"})}),jsxRuntimeExports.jsx("span",{className:styles$13.NoDataMessage,children:"No Data"})]}),componentsRender=K=>isNullable(K)?{body:{wrapper:()=>null},header:{wrapper:()=>null}}:K.length?{}:{header:{wrapper:()=>null}},abstractObjectTable="_abstractObjectTable_1m5lg_1",abstractObjectHeader="_abstractObjectHeader_1m5lg_9",toggleButton="_toggleButton_1m5lg_15",icon="_icon_1m5lg_22",NoDataWrapper$1="_NoDataWrapper_1m5lg_26",title$3="_title_1m5lg_30",styles$12={abstractObjectTable,abstractObjectHeader,toggleButton,icon,NoDataWrapper:NoDataWrapper$1,title:title$3},ComplexVectorSimpleList=({data:K})=>{const{state:J}=useEditorState(),{state:ne}=useEditorTabState(),{tab:oe,isActive:ce,breadcrumbPath:ue}=ne,[Ae,pe]=reactExports.useState(0),[ve,me]=reactExports.useState([]),ge=!(K!=null&&K.length),{memoColumnsUikit:ye,memoDataUikit:xe}=reactExports.useMemo(()=>{const $e=[{key:oe.title,dataIndex:oe.title,title:`${oe.title} ${oe!=null&&oe.isRequired?"*":""}`,render:(Fe,ke,je)=>jsxRuntimeExports.jsx(SimpleCell,{value:Fe,rowIndex:je}),minWidth:200}],Ie=(K==null?void 0:K.map((Fe,ke)=>({key:ke,[oe.title]:Fe})))||[];return{memoColumnsUikit:$e,memoDataUikit:Ie}},[K,ue]),_e=()=>!J.editorToolbarRef||!ce||J.isReadOnly?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(ArrayToolbar,{arrayLength:xe.length,selectedIndex:Ae,selectedGroup:ve,onSelectedGroupChange:me,onSelectedIndexChange:pe}),J.editorToolbarRef);return jsxRuntimeExports.jsxs("div",{className:ge?styles$12.NoDataWrapper:void 0,children:[_e(),jsxRuntimeExports.jsx(SF,{dataSource:xe,columns:ye,selectedRowIndex:Ae,onChangeSelectedRowIndex:pe,components:componentsRender(K),locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},rowSelection:{type:"checkbox",selectedRowKeys:ve,onChange:$e=>me($e)},className:ge?"no-data":void 0})]})},DictionaryViewToolbar=({isReadonly:K,path:J,selectedIndex:ne,arrayLength:oe,selectedGroup:ce,onSelectedIndexChange:ue,onSelectedGroupChange:Ae})=>{const{t:pe}=useTranslation(),{action:ve}=useEditorState(),me=isNullable(ne),ge=!oe;reactExports.useEffect(()=>{ne+1>oe&&oe>0&&ue(oe-1)},[oe]);const ye=()=>ce!=null&&ce.length?ce:[ne],xe=()=>Ae==null?void 0:Ae([]),_e=()=>{const ke=ne-1;ve.moveListElementAction({path:J,from:ne,to:ke})&&ue(ke)},$e=()=>{const ke=ne+1;ve.moveListElementAction({path:J,from:ne,to:ke})&&ue(ke)},Ie=()=>{ve.removeListElementAction({path:J,index:ye()}),xe()},Fe=[{key:"addElement",icon:jsxRuntimeExports.jsx(Dk,{}),isDisabled:K,tooltipContent:pe("editor.listToolbar.add"),menu:{items:[{key:"addDictElement",label:pe("editor.listToolbar.addValue"),onClick:()=>ve.addDictElementAction({path:J,type:DictionaryViewType.Flat})},{key:"addVectorDictElement",label:pe("editor.listToolbar.addVector"),onClick:()=>ve.addDictElementAction({path:J,type:DictionaryViewType.List})}]}},{key:"insertRow",icon:jsxRuntimeExports.jsx(DA,{}),tooltipContent:pe("editor.listToolbar.insertRow"),isDisabled:me||ge,menu:{items:[{key:"addDictElement",label:pe("editor.listToolbar.insertValue"),onClick:()=>ve.addDictElementAction({path:J,type:DictionaryViewType.Flat,index:ne})},{key:"addVectorDictElement",label:pe("editor.listToolbar.insertVector"),onClick:()=>ve.addDictElementAction({path:J,type:DictionaryViewType.List,index:ne})}]}},{key:"moveUp",icon:jsxRuntimeExports.jsx(TA,{}),tooltipContent:pe("editor.listToolbar.moveRowUp"),isDisabled:me||ge||ne===0,onClick:_e},{key:"moveDown",icon:jsxRuntimeExports.jsx(kA,{}),tooltipContent:pe("editor.listToolbar.moveRowDown"),isDisabled:me||ge||ne+1===oe,onClick:$e},{key:"deleteElement",icon:jsxRuntimeExports.jsx(Tk,{}),isDisabled:K||me||ge,tooltipContent:pe("editor.listToolbar.remove"),onClick:Ie}];return jsxRuntimeExports.jsx(TableToolbar,{items:Fe})},DictionaryViewKeyCell=({isReadonly:K=!1,dictKey:J,path:ne})=>{const{action:oe}=useEditorState(),ce=ue=>{oe.updateEditorData({path:ne,updateValue:ue})};return jsxRuntimeExports.jsx(StringValue,{readOnly:K,selectOnFocus:!0,elementName:J,value:J,onChange:ce})},NoDataWrapper="_NoDataWrapper_1gg1j_1",styles$11={NoDataWrapper},DictionaryView=({isReadonly:K=!1,data:J})=>{const{state:ne}=useEditorState(),{state:oe}=useEditorTabState(),[ce,ue]=reactExports.useState(0),[Ae,pe]=reactExports.useState([]),ve=oe.breadcrumbPath,me=!(J!=null&&J.length),ge=reactExports.useMemo(()=>(J==null?void 0:J.map(($e,Ie)=>({key:Ie,dictKey:($e==null?void 0:$e.key)||"",dictValue:$e!=null&&$e.value?$e.value:null})))||[],[J]),ye=reactExports.useMemo(()=>[{key:"key",dataIndex:"key",width:200,title:"Key",render:($e,Ie,Fe)=>jsxRuntimeExports.jsx(DictionaryViewKeyCell,{isReadonly:K,dictKey:Ie.dictKey,path:xe(Fe,DictionaryDataPath.Key)})},{key:"value",dataIndex:"value",minWidth:400,title:"Value",render:($e,Ie,Fe)=>jsxRuntimeExports.jsx(DictionaryViewValueCell,{isReadonly:K,value:Ie.dictValue,path:xe(Fe,DictionaryDataPath.Value)})}],[ve]),xe=($e,Ie)=>[...ve,$e.toString(),Ie],_e=()=>!ne.editorToolbarRef||!oe.isActive?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(DictionaryViewToolbar,{path:ve,isReadonly:K,arrayLength:ge.length,selectedIndex:ce,selectedGroup:Ae,onSelectedGroupChange:pe,onSelectedIndexChange:ue}),ne.editorToolbarRef);return jsxRuntimeExports.jsxs("div",{className:me?styles$11.NoDataWrapper:void 0,children:[!K&&_e(),jsxRuntimeExports.jsx(SF,{dataSource:ge,columns:me?[]:ye,selectedRowIndex:ce,onChangeSelectedRowIndex:ue,components:componentsRender(J),locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},rowSelection:{type:"checkbox",selectedRowKeys:Ae,onChange:$e=>pe($e)},className:me?"no-data":void 0})]})},ComplexVectorCell=({path:K,cellProps:J,currentTabIndex:ne,rowIndex:oe,elementName:ce,isRequired:ue,value:Ae})=>{const{action:pe}=useEditorState(),ve=((J==null?void 0:J.isVector)||(J==null?void 0:J.isFlat)&&!(J!=null&&J.isReadOnly))&&isDefined$2(oe),{checkReadOnly:me,checkViewOnly:ge}=useComplexCell({value:Ae,isKey:J.isKey,isFlat:J.isFlat,isVector:J.isVector,isReadOnly:J.isReadOnly}),ye=_e=>{pe.updateEditorData({path:K,updateValue:_e})},xe=()=>pe.openEditorTabAction({path:K},ne);return jsxRuntimeExports.jsx(TableBodyCell,{isVector:J==null?void 0:J.isVector,keyName:J==null?void 0:J.keyName,keyModuleName:J==null?void 0:J.keyModuleName,path:K,elementName:ce,originalValue:Ae,schemaType:J==null?void 0:J.schemaType,enumSelector:J==null?void 0:J.enumSelector,valueType:J==null?void 0:J.valueType,isRequired:ue,isReadOnly:me(),isViewOnly:ge(),isReadOnlyHint:J.isReadOnly,suffixElement:isArray$7(Ae)&&jsxRuntimeExports.jsx(EditorLengthIcon,{length:Ae.length}),prefixElement:ve&&jsxRuntimeExports.jsx(EditorDrillIcon,{testid:"complex-vector-drill-icon",onClick:xe}),onChange:ye},K.toString())},ComplexVectorViewGrid=({data:K,schema:J})=>{const{state:ne}=useEditorState(),{state:oe}=useEditorTabState(),[ce,ue]=reactExports.useState(0),[Ae,pe]=reactExports.useState([]),ve=oe.breadcrumbPath,me=reactExports.useMemo(()=>getMultiplySchemas(K,ne)??J,[K]),ge=!(K!=null&&K.length),ye=(Ie,Fe,ke,je)=>{const We={...getCellProps({schemaElement:Ie,path:ve,keys:J.Keys})},ze=[...ve,je.toString(),Ie.Name];return jsxRuntimeExports.jsx(ComplexVectorCell,{cellProps:We,path:ze,currentTabIndex:oe.tabIndex,rowIndex:je,value:Fe,isRequired:!!(Ie!=null&&Ie.Optional),elementName:Ie.Name})},xe=reactExports.useMemo(()=>{var Ie;return(Ie=me==null?void 0:me.Elements)==null?void 0:Ie.reduce((Fe,ke)=>(ke.Hidden||Fe.push({key:ke.Name,dataIndex:ke.Name,title:jsxRuntimeExports.jsxs("div",{className:styles$12.title,children:[jsxRuntimeExports.jsx("span",{children:ke.Name}),!ke.Optional&&jsxRuntimeExports.jsx(LF$2,{})]}),minWidth:150,render:(je,We,ze)=>ye(ke,je,We,ze)}),Fe),[])},[J,me,ve]),_e=reactExports.useMemo(()=>isArray$7(K)?K.reduce((Ie,Fe,ke)=>(Ie.push({key:ke,...Fe}),Ie),[]):[],[K]),$e=()=>!ne.editorToolbarRef||!oe.isActive||ne.isReadOnly?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(ArrayToolbar,{arrayLength:_e.length,selectedIndex:ce,selectedGroup:Ae,onSelectedGroupChange:pe,onSelectedIndexChange:ue}),ne.editorToolbarRef);return jsxRuntimeExports.jsxs("div",{className:ge?styles$12.NoDataWrapper:void 0,children:[$e(),jsxRuntimeExports.jsx(SF,{dataSource:_e,columns:xe,selectedRowIndex:ce,onChangeSelectedRowIndex:ue,components:componentsRender(isArray$7(K)?K:[]),locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},rowSelection:{type:"checkbox",selectedRowKeys:Ae,onChange:Ie=>pe(Ie)},className:ge?"no-data":void 0})]})},createCellProps=(K,J,ne)=>getCellProps({schemaElement:{...{Name:K,Value:{Type:K}},_t:J._t,Comment:""},path:ne}),HeaderAbstractWrapper=({isOpen:K,setIsOpen:J,children:ne,...oe})=>jsxRuntimeExports.jsxs("thead",{...oe,className:styles$12.abstractObjectHeader,children:[ne,jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx(rl,{onClick:()=>J(ce=>!ce),variant:"ghost",className:styles$12.toggleButton,size:"sm",children:K?jsxRuntimeExports.jsx(fk,{className:styles$12.icon}):jsxRuntimeExports.jsx(Kj,{className:styles$12.icon})})})]}),HeaderWrapper=({isOpen:K,setIsOpen:J,children:ne,...oe})=>jsxRuntimeExports.jsx(HeaderAbstractWrapper,{...oe,isOpen:K,setIsOpen:J,children:ne}),useHandleObjectOrPrimitive=()=>{const{state:K}=useEditorState(),{state:J}=useEditorTabState(),{editorSchema:ne}=K;return(oe,ce,ue)=>{var ge,ye;const Ae=oe.split("Element")[0];let pe=null;const ve=ne?ne[getFullSchema(K,ce._t)]:null;pe=(ge=ve==null?void 0:ve.Elements)==null?void 0:ge.find(xe=>xe.Name===oe);const me=isObject$9(ce[oe]);return{...ue,value:ce[oe],valueType:Ae,moduleName:cleanTypeHelper(J.tab.selector)===ce._t?oe:ce._t,isFlat:oe.includes("Data")||me,selector:oe,successor:oe,schemaType:pe?getCellProps({schemaElement:pe,path:J.breadcrumbPath,keys:ve==null?void 0:ve.Keys}).schemaType:Ae,enumSelector:(pe==null?void 0:pe._t)??"",keyModuleName:((ye=pe==null?void 0:pe.Key)==null?void 0:ye.Module.ModuleName)??"",keyName:cleanTypeHelper(pe==null?void 0:pe._t)??"",isRequired:!(pe!=null&&pe.Optional)}}},ComplexVectorAbstractViewGrid=({data:K,schema:J,indexTable:ne,setSelectedIndex:oe,isGridView:ce=[!1],setIsGridView:ue,isPrevViewAbstract:Ae,gridTrigger:pe,selectedCheckbox:ve,setSelectedCheckbox:me})=>{var Se,Re,Be;const{state:ge}=useEditorState(),{breadcrumbsData:ye}=ge,{state:xe,setSelector:_e}=useEditorTabState(),[$e,Ie]=reactExports.useState(!0),Fe=xe.breadcrumbPath,ke=reactExports.useRef(),je=ce[xe.tabIndex],We=useHandleObjectOrPrimitive(),ze=Ne=>xe.tabIndex<=1&&je?jsxRuntimeExports.jsx(HeaderWrapper,{...Ne,isOpen:$e,setIsOpen:Ie}):null,Xe=Ne=>({key:Ne._t,dataIndex:Ne._t,title:`${Ne._t} ${Ne!=null&&Ne.isRequired?"*":""}`,render:je?void 0:(Ue,Ge,Ye)=>jsxRuntimeExports.jsx(ComplexVectorCell,{cellProps:{...Ne,isReadOnly:!Object.keys(Ge).includes(Ne.elementKey)&&xe.breadcrumbPath.length<=2},path:Fe[Fe.length-1].includes("List")?[...Fe,Ye.toString(),Ne.elementKey]:[...Fe,Ne.elementKey],currentTabIndex:xe.tabIndex,rowIndex:Ye,value:Ue,isRequired:!!(Ne!=null&&Ne.isRequired),elementName:Ne.elementKey}),minWidth:150}),Je=(Ne,Ue,Ge)=>Ne?{...Ge,value:Ne,moduleName:Ue._t??Ne,isFlat:!0,path:[...Ge.path]}:{},nt=((Be=(Se=ye==null?void 0:ye.breadcrumbs)==null?void 0:Se[ye.activeIndex])==null?void 0:Be.path[((Re=ye==null?void 0:ye.breadcrumbs)==null?void 0:Re[ye.activeIndex].path.length)-1])==="DataList";reactExports.useEffect(()=>{pe&&(ke.current=!0),ue==null||ue(Ne=>{const Ue=[...Ne],Ge=xe.tabIndex;return nt&&je&&ye.activeIndex>1?(Ue[Ge]=!1,Ue):!pe&&!je&&ye.activeIndex===1&&!ke.current||!nt&&!je&&ye.activeIndex>1?(Ue[Ge]=Ae,Ue):Ne})},[ye.activeIndex,nt,je]);const et=(Ne,Ue)=>Ne?Object.keys(Ne).flatMap(Ge=>{if(Ge==="_t"||Ge==="uuid")return[];const Ye=createCellProps(Ge,Ne,Ue.length>2&&Ue.includes("DataList")?[...Ue,"0"]:Ue);return isArray$7(Ne[Ge])?Je(Ne[Ge],Ne[Ge][0]??{_t:Ne._t},Ye):[We(Ge,Ne,Ye)]}):[],tt=reactExports.useMemo(()=>{if(!K||!K[0])return;const Ne=isArray$7(K)?K:[K];if(je)return Ne.reduce((Ge,Ye)=>(Ge.push(Xe(Ye)),Ge),[]);const Ue=Fe.length>2&&!isArray$7(K)?Fe:[...Fe,ne.toString()];return Ne.flatMap(Ge=>et(Ge,Ue)).reduce((Ge,Ye)=>(Ge.some(Qe=>Qe.key===Ye.key)||Ge.push(Xe({...Ye,_t:Ye.elementKey})),Ge),[])},[K,J,Fe,ne]),st=Ne=>{const Ue=Ne;me==null||me(Ue),oe(Ge=>{const Ye=isArray$7(Ge)?Ge:[Ge];return je?Ue.length>0?Ye.includes(ne)?Ye:[...Ye,ne]:Ye.filter(Qe=>Qe!==ne):Ue})},qe=reactExports.useMemo(()=>{if(!K||!K[0])return;if(je){const Ue=Fe.length>2&&isArray$7(K)?Fe:[...Fe,ne.toString()];return K.flatMap(Ge=>et(Ge,Ue))}return(isArray$7(K)?K:[K]).map((Ue,Ge)=>({key:Ge,...Ue}))},[K,Fe,ne,ce]);return!je&&_e&&(qe==null||qe.forEach(Ne=>{const{_t:Ue}=Ne;_e(Ue?`Cl.Platform.Samples.Schema.DataClasses.${Ue}`:"")})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:je&&!isNullable(tt)?"abstract-wrapper":styles$12.NoDataWrapper,children:[jsxRuntimeExports.jsxs("div",{className:je&&isArray$7(K)&&!isNullable(K[0])?styles$12.abstractObjectTable:void 0,children:[je&&(tt==null?void 0:tt.map(Ne=>(_e&&_e(Ne.key?`Cl.Platform.Samples.Schema.DataClasses.${Ne.key.toString()}`:""),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(SF,{dataSource:tt??[],columns:[Ne],pagination:!1,locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},components:{body:{wrapper:()=>null},header:{wrapper:ze}},rowSelection:{type:"checkbox",onChange:st}}),je&&$e&&jsxRuntimeExports.jsx(FlatTableView,{data:qe,successorIndex:ne})]},Ne.key)))),!je&&jsxRuntimeExports.jsx(SF,{dataSource:qe??[],columns:tt,pagination:!1,components:componentsRender(qe),locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},rowSelection:isNullable(tt)?{type:"radio"}:{type:"checkbox",selectedRowKeys:ve,onChange:st}})]}),isNullable(qe)&&jsxRuntimeExports.jsx(SF,{dataSource:[],components:{header:{wrapper:()=>null}},locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},columns:[],className:"no-data"})]})})},NdArrayView=({data:K})=>{const{shape:J,values:ne}=K,oe=J[0],ce=J.length===1?1:J[1],{state:ue}=useEditorTabState(),Ae=ue.breadcrumbPath,pe=Array.from({length:oe},(me,ge)=>{const ye={key:ge};for(let xe=0;xe<ce;xe++){const _e=ge*ce+xe;ye[`col${xe}`]=ne[_e]}return ye}),ve=Array.from({length:ce},(me,ge)=>{const ye=createCellProps(ge.toString(),{_t:ue.tab.schemaType,DataList:[]},Ae);return{dataIndex:`col${ge}`,key:`col${ge}`,render:(xe,_e,$e)=>{const Ie=$e*ce+ge;return jsxRuntimeExports.jsx(ComplexVectorCell,{cellProps:{...ye,valueType:"Int"},path:[...Ae,"values",Ie.toString()],currentTabIndex:ue.tabIndex,rowIndex:$e,value:xe,isRequired:!!ge,elementName:ge.toString()})}}});return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(SF,{dataSource:pe,columns:ve,pagination:!1,components:{header:{wrapper:()=>null}}})})},EditorView=()=>{const{t:K}=useTranslation(),{state:J,action:ne}=useEditorState(),{state:oe}=useEditorTabState(),{editorData:ce,editorSchema:ue,isReadOnly:Ae}=J,{tab:pe}=oe,ve=oe.breadcrumbPath,me=ue==null?void 0:ue[pe.selector],[ge,ye]=reactExports.useState([]),[xe,_e]=reactExports.useState([!0]),$e=pe.valueType&&!pe.isVector&&valueEditorViewCollection.includes(pe.valueType),Ie=pe.schemaType===SchemaType.Dict,Fe=pe.isFlat&&me,ke=(pe==null?void 0:pe.isVector)&&me,je=(pe==null?void 0:pe.isVector)&&!me,We=reactExports.useRef(xe[oe.tabIndex]),[ze,Xe]=reactExports.useState(!1),Je=(pe==null?void 0:pe.schemaType)===SchemaType.NdFloatMatrix||(pe==null?void 0:pe.schemaType)===SchemaType.NdFloatVector,[nt,et]=reactExports.useState([]),tt=reactExports.useMemo(()=>{if(ce){const Re=getPropByPath(ce,ve);return Array.isArray(Re)&&oe.tab.title==="AbstractDataList"&&xe[oe.tabIndex]?Re.map(Be=>({...Be,uuid:v4()})):Re}},[ce,ve,oe.tabIndex,ze,We]),st=()=>{_e(Re=>{const Be=[...Re],Ne=oe.tabIndex;return Be[Ne]=!Be[Ne],Be}),Xe(!ze)},qe=()=>{if($e)return jsxRuntimeExports.jsx(ValueEditorView,{isReadOnly:Ae,value:tt});if(Fe)return jsxRuntimeExports.jsx(ComplexView,{data:tt,schema:me});if(Ie)return jsxRuntimeExports.jsx(DictionaryView,{data:tt,isReadonly:Ae});if(ke&&oe.tab.title!=="AbstractDataList")return jsxRuntimeExports.jsx(ComplexVectorViewGrid,{data:tt,schema:me});if(ke&&oe.tab.title==="AbstractDataList"){if(xe[oe.tabIndex]){let Re=Array.isArray(tt)?tt:[tt];return Re=oe.breadcrumbPath[oe.tabIndex-1]!=="AbstractDataList"?Re.map(Be=>{var Ne,Ue,Ge;if(!Be){if(!ce||!(J!=null&&J.editorSchema))return Be;const Ye=(Ge=(Ue=ce==null?void 0:ce[pe.title])==null?void 0:Ue[(Ne=oe.breadcrumbPath)==null?void 0:Ne[oe.tabIndex-1]])==null?void 0:Ge._t;if(!Ye)return Be;const Qe=J.editorSchema[getFullSchema(J,Ye.toString())];if(!Qe.Elements)return Be;const Te=Qe.Elements.find(at=>at.Name===ve[ve.length-1]);if(!Te)return Be;const Ke=J.editorSchema[getFullSchema(J,cleanTypeHelper(Te._t)??"")];if(!Ke.Elements)return Be;const rt=Ke==null?void 0:Ke.Elements.reduce((at,lt)=>(at[lt.Name]="",at),{}),it=oe.breadcrumbPath[oe.breadcrumbPath.length-1].split("Data")[1]==="List"?[]:{...rt,_t:cleanTypeHelper(Te._t)};return ne.updateEditorData({path:ve,updateValue:it}),it}return Be}):Re,Re=Re.length?Re:[null],jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Se(),Re.map((Be,Ne)=>{const Ue=(Be==null?void 0:Be.uuid)??Ne,Ge=Be?{...Be}:null;return jsxRuntimeExports.jsx(ComplexVectorAbstractViewGrid,{data:Ge?[Ge]:null,schema:me,indexTable:Ne,selectedIndex:ge,setSelectedIndex:ye,isGridView:xe,setIsGridView:_e,isPrevViewAbstract:We.current,gridTrigger:ze,setGridTrigger:Xe,selectedCheckbox:nt,setSelectedCheckbox:et},Ue??Ne)})]})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Se(),jsxRuntimeExports.jsx(ComplexVectorAbstractViewGrid,{data:tt,schema:me,indexTable:0,selectedIndex:ge,setSelectedIndex:ye,isGridView:xe,setIsGridView:_e,isPrevViewAbstract:We.current,gridTrigger:ze,setGridTrigger:Xe,selectedCheckbox:nt,setSelectedCheckbox:et})]})}return je?jsxRuntimeExports.jsx(ComplexVectorSimpleList,{data:Array.isArray(tt)?tt:[]}):Je?jsxRuntimeExports.jsx(NdArrayView,{data:tt}):jsxRuntimeExports.jsx(RF,{title:K("shared.somethingWentWrong")})},Se=()=>!J.editorToolbarRef||!oe.isActive||J.isReadOnly?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(ArrayToolbar,{arrayLength:(Array.isArray(tt)?tt:[tt]).length,selectedIndex:ge,selectedGroup:[],onSelectedGroupChange:et,onSelectedIndexChange:ye,isAbstractData:oe.breadcrumbPath.length<2&&oe.breadcrumbPath[oe.tabIndex-1]==="AbstractDataList",isGridView:xe[oe.tabIndex],handleChangeView:st,pathAdd:[...ve]}),J.editorToolbarRef);return qe()},editorViewScroll="_editorViewScroll_2d93f_1",editorViewScroll__content="_editorViewScroll__content_2d93f_6",editorViewScroll__goDown="_editorViewScroll__goDown_2d93f_12",editorViewScroll__goUp="_editorViewScroll__goUp_2d93f_12",editorViewScroll__goDown_allowed="_editorViewScroll__goDown_allowed_2d93f_24",editorViewScroll__goUp_allowed="_editorViewScroll__goUp_allowed_2d93f_24",children$2="_children_2d93f_33",noIcon="_noIcon_2d93f_38",styles$10={editorViewScroll,editorViewScroll__content,editorViewScroll__goDown,editorViewScroll__goUp,editorViewScroll__goDown_allowed,editorViewScroll__goUp_allowed,children:children$2,noIcon},SCROLL_BOTTOM_OFFSET=5,EditorViewScroll=({children:K,minGoDownHeight:J=100,noIcon:ne=!1})=>{const oe=reactExports.useRef(null),[ce,ue]=reactExports.useState(!1),[Ae,pe]=reactExports.useState(!1),ve=ye=>{ue(ye.scrollHeight>ye.clientHeight&&ye.clientHeight>J)};reactExports.useEffect(()=>{const ye=new ResizeObserver(xe=>{const _e=xe[0].target;ve(_e)});return oe.current&&ye.observe(oe.current),()=>{oe.current&&ye.unobserve(oe.current)}},[]);const me=ye=>{const xe=ye.currentTarget;if(xe){const _e=xe.scrollTop+xe.clientHeight;ve(xe),pe(_e>=xe.scrollHeight-SCROLL_BOTTOM_OFFSET&&_e<=xe.scrollHeight+SCROLL_BOTTOM_OFFSET)}},ge=()=>{oe.current&&oe.current.scrollTo({top:Ae?0:oe.current.scrollHeight,behavior:"smooth"})};return ne?jsxRuntimeExports.jsx("div",{className:styles$10.noIcon,children:K}):jsxRuntimeExports.jsxs("div",{className:styles$10.editorViewScroll,children:[jsxRuntimeExports.jsx("div",{ref:oe,onScroll:me,className:styles$10.editorViewScroll__content,children:jsxRuntimeExports.jsx("div",{className:styles$10.children,children:K})}),jsxRuntimeExports.jsx(oa,{className:cx({[styles$10.editorViewScroll__goDown]:!Ae,[styles$10.editorViewScroll__goUp]:Ae,[styles$10.editorViewScroll__goDown_allowed]:ce}),onClick:ge,children:jsxRuntimeExports.jsx(RA,{size:"M"})})]})},EditorContent$1=()=>jsxRuntimeExports.jsx("div",{className:"editor-content",children:jsxRuntimeExports.jsx(EditorTabContext,{children:jsxRuntimeExports.jsx(EditorViewScroll,{children:jsxRuntimeExports.jsx(EditorView,{})})})}),editor$1="_editor_15kja_1",styles$$={editor:editor$1},EditorComponent=({data:K,schema:J,breadcrumbs:ne,rootSchemaName:oe,isCancelDisabled:ce,isSubmitDisabled:ue,isCopyBtn:Ae,clearIcon:pe,className:ve,footerActions:me})=>{const{state:ge,action:ye,event:xe}=useEditorState(),{state:_e,action:$e}=useAppContext(),{editorData:Ie,editorSchema:Fe,originalEditorData:ke}=ge,je=Object.keys(ge.validationError).length>0,We=ke!==Ie,ze=useLatest(Ie),Xe=ce===!1?ce:!We,Je=ue===!1?ue:!We||je;reactExports.useEffect(()=>{var st;(st=xe==null?void 0:xe.onChangeData)==null||st.call(xe,We),$e.setChangedDataEditorAction(ge.editorData)},[We,ge.editorData]),reactExports.useEffect(()=>{!We||!_e.isModalOpen||$e.setIsErrorDataChangedAction(ye.validateEditor())},[We,_e.isModalOpen]),reactExports.useEffect(()=>{var st;if(J&&oe){const qe=ye.initEditor({schema:J,data:K,rootSchemaName:oe,breadcrumbs:ne});isExistError(qe)||(st=xe==null?void 0:xe.onInit)==null||st.call(xe,{data:qe.data})}},[K,J,oe]);const nt=()=>{setTimeout(()=>{var st;ye.validateEditor()||((st=xe==null?void 0:xe.onSubmit)==null||st.call(xe,{data:ze.current}))},300)},et=()=>{setTimeout(()=>{var st;ye.validateEditor()||((st=xe==null?void 0:xe.onCopy)==null||st.call(xe,{data:ze.current}))},300)},tt=st=>{(st.ctrlKey||st.metaKey)&&st.code===KeyboardCode.KeyS&&(st.preventDefault(),nt())};return!Ie||!Fe?null:jsxRuntimeExports.jsxs("div",{className:cx(styles$$.editor,ve),onKeyDown:tt,"aria-hidden":"true",children:[jsxRuntimeExports.jsx(EditorHeader,{clearIcon:pe}),jsxRuntimeExports.jsx(EditorContent$1,{}),jsxRuntimeExports.jsx(EditorFooter,{isCancelDisabled:Xe,isSubmitDisabled:Je,onSubmit:nt,onCancel:xe==null?void 0:xe.onCancel,isCopyBtn:Ae,onCopy:et,footerActions:me})]})},Editor=({dataset:K,readOnly:J=initState.isReadOnly,isDisableKeyFields:ne=initState.isDisableKeyFields,requestConfig:oe,i18n:ce,onTransition:ue,onInit:Ae,onCancel:pe,onSubmit:ve,onChangeData:me,onRefresh:ge,onChangeBreadcrumbs:ye,onCopy:xe,isHandler:_e=!1,...$e})=>jsxRuntimeExports.jsx(EditorContext,{isDisableKeyFields:ne,isReadOnly:J,requestConfig:oe,i18n:ce,event:{onCancel:pe,onSubmit:ve,onChangeData:me,onRefresh:ge,onInit:Ae,onTransition:ue,onChangeBreadcrumbs:ye,onCopy:xe},dataset:K,isHandler:_e,children:jsxRuntimeExports.jsx(EditorComponent,{...$e})}),EditorInstance=K=>{const{t:J}=useTranslation();return jsxRuntimeExports.jsx(Editor,{requestConfig:{getSchema:schemaApi.getType,getTypes:schemaApi.getTypes,getTypeHierarchy:schemaApi.getTypeHierarchy,getSelectRecords:storageApi.select,saveRecord:storageApi.saveEntity},i18n:{submitBtnText:J("buttons.save"),cancelBtnText:J("buttons.discard"),copyBtnText:J("buttons.saveAndNext")},dataset:K.dataset,...K})},EditorViewer=({recordType:K,editorData:J,onTransition:ne})=>{const{getSchema:oe}=useEditorRequest();return reactExports.useEffect(()=>{K&&oe.fetch({name:K})},[K]),oe.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):!oe.state||!J?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(EditorInstance,{readOnly:!0,data:J,schema:oe.state.typeList,rootSchemaName:oe.state.rootType,onTransition:ne})},getTypeOfFirstElementHelper=K=>{const J=K.at(0);if(J){const{_t:ne}=J;return ne}return null},container$s="_container_i0pii_1",styles$_={container:container$s},InstanceListViewer=({data:K})=>{const{status:J,fetch:ne,state:oe}=useRequest(schemaApi.getType),ce=()=>{const Ae=getTypeOfFirstElementHelper(K);Ae&&ne({name:Ae}).catch(toast.error)};reactExports.useEffect(ce,[K]);const ue=reactExports.useMemo(()=>{if(!oe)return[];const Ae=oe.typeList[oe.rootType];return isArray$7(Ae==null?void 0:Ae.Elements)?mapMetadataToGridColumnsHelper(Ae.Elements):[]},[oe]);return jsxRuntimeExports.jsx(PF,{loading:isLoading([J]),children:jsxRuntimeExports.jsx("div",{className:styles$_.container,children:jsxRuntimeExports.jsx(Grid,{columns:ue,data:K})})})},wrapper="_wrapper_1inu1_1",viewerItem="_viewerItem_1inu1_7",active="_active_1inu1_21",styles$Z={wrapper,viewerItem,active},ViewersList=({viewersList:K,activeViewerName:J,handleActiveViewer:ne})=>{const oe=reactExports.useRef(null),ce=pe=>{var ve;pe.code===KeyboardCode.Tab&&(pe.preventDefault(),(ve=oe.current)==null||ve.focus())};reactExports.useEffect(()=>(window.addEventListener("keydown",ce),()=>{window.removeEventListener("keydown",ce)}),[]);const ue=pe=>{const ve=K.findIndex(ge=>{var ye;return((ye=ge.Name)==null?void 0:ye.String)===J});let me;ve!==-1&&(pe.code===KeyboardCode.ArrowDown&&(me=K[ve+1]),pe.code===KeyboardCode.ArrowUp&&(me=K[ve-1]),me&&ne(me))},Ae=pe=>pe.Name&&Object.hasOwn(pe.Name,"String")&&J===pe.Name.String||J===pe.Name;return jsxRuntimeExports.jsx("div",{className:styles$Z.wrapper,tabIndex:0,onKeyDown:ue,ref:oe,children:K.map(pe=>{var ve;return jsxRuntimeExports.jsx("div",{className:cx(styles$Z.viewerItem,{[styles$Z.active]:Ae(pe)}),onClick:()=>ne(pe),"aria-hidden":!0,children:((ve=pe.Name)==null?void 0:ve.String)||pe.ViewName||String(pe.Name)||""},v4())})})},listPanel="_listPanel_1ejsm_1",viewersPanel="_viewersPanel_1ejsm_12",styles$Y={listPanel,viewersPanel},filterViewersHelper=(K,J)=>K.filter(ne=>{var oe;return searchByName((oe=ne.Name)==null?void 0:oe.String,J)}),ElementListViewer=({viewerKey:K,viewerType:J,data:ne,onTransition:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(ne),[pe,ve]=reactExports.useState(ne[0]),[me,ge]=reactExports.useState(""),ye=$e=>{const Ie=filterViewersHelper(ne,$e);ge($e),Ae(Ie)},xe=$e=>{ve($e)},_e=()=>pe.Name&&Object.hasOwn(pe.Name,"String")&&pe.Name.String||pe.Name&&String(pe.Name)||"";return jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",children:[jsxRuntimeExports.jsxs(Panel$1,{defaultSize:25,minSize:25,className:styles$Y.listPanel,onResize:resizePlotly,children:[jsxRuntimeExports.jsx(Ml,{variant:"outlined",prefix:jsxRuntimeExports.jsx(gf$1,{}),placeholder:ce("grid.columnFilter.filterPlaceholder")||"",value:me,onChange:ye}),jsxRuntimeExports.jsx(ViewersList,{viewersList:ue,activeViewerName:_e(),handleActiveViewer:xe})]}),jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{className:styles$Y.viewersPanel,minSize:50,onResize:resizePlotly,children:jsxRuntimeExports.jsx(Viewers,{panelKey:K,panelType:J,activeViewerType:pe==null?void 0:pe._t,data:pe,onTransition:oe})})]})},checkSimpleTypesHelper=K=>{const J=Object.values(ViewerTypesEnum),ne=new Map;return K.every(oe=>{const{_t:ce}=oe;if(ne.has(ce))return ne.get(ce);const ue=cleanTypeHelper(ce),Ae=J.indexOf(ue)===-1;return ne.set(ce,Ae),Ae})},ListContentContainer=({viewerKey:K,viewerType:J,data:ne,onTransition:oe})=>checkSimpleTypesHelper(ne)?jsxRuntimeExports.jsx(InstanceListViewer,{data:ne}):jsxRuntimeExports.jsx(ElementListViewer,{viewerKey:K,viewerType:J,data:ne,onTransition:oe}),divider$3="_divider_1hqrl_1",styles$X={divider:divider$3},DefaultViewer=({viewerKey:K,viewerType:J,data:ne,onTransition:oe})=>{if(isArrayViewOfType(ne))return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$X.divider}),jsxRuntimeExports.jsx(ListContentContainer,{viewerKey:K,viewerType:J,data:ne,onTransition:oe})]});const ce=cleanTypeHelper(ne==null?void 0:ne._t);return ce?jsxRuntimeExports.jsx(EditorViewer,{editorData:ne,recordType:ce,onTransition:oe}):null},useTabParams=()=>{const K=useSelector$1(selectOpenedTabs),J=useSelector$1(selectActiveTab);return{activeTab:reactExports.useMemo(()=>{const ce=K.find(ue=>ue.id===J);if(ce)return{id:ce.id,key:ce.key,label:ce.label,dynamicType:ce.dynamicType,tableKey:ce.tableKey}},[J,K]),setActiveTab:ce=>{dispatch$1(setActiveTab({id:ce}))}}},EditorViewerWithParams=({editorData:K,partSchemaName:J,isReadOnly:ne,recordType:oe,onSubmit:ce})=>{const{t:ue}=useTranslation(),{getSchema:Ae}=useEditorRequest(),[pe,ve]=reactExports.useState(null);reactExports.useEffect(()=>{oe&&J&&Ae.fetch({name:oe}).then(xe=>{var _e;ve({data:K,schema:xe.typeList,rootSchemaName:((_e=Object.keys(xe.typeList))==null?void 0:_e.find($e=>$e.endsWith(J)))||""})})},[oe,J,K]);const me=({data:xe})=>!K&&(ce==null?void 0:ce(xe)),ge=({data:xe})=>ce==null?void 0:ce(xe),ye=reactExports.useMemo(()=>{var xe,_e;return(_e=(xe=pe==null?void 0:pe.schema)==null?void 0:xe[pe.rootSchemaName].Elements)==null?void 0:_e.every($e=>$e.Optional)},[pe==null?void 0:pe.schema,pe==null?void 0:pe.rootSchemaName]);return Ae.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):pe?jsxRuntimeExports.jsx(EditorInstance,{...pe,readOnly:ne,i18n:{submitBtnText:ue("buttons.apply")},onInit:me,onSubmit:ge,isSubmitDisabled:!ye}):jsxRuntimeExports.jsx(RF,{})},editorViewer="_editorViewer_deg0n_1",viewerData="_viewerData_deg0n_8",styles$W={editorViewer,viewerData},ParamsViewer=reactExports.memo(({activeTab:K,panelKey:J,panelType:ne,panelWithParamsName:oe})=>{var nt;const ce=reactExports.useRef(null),ue=useSelector$1(selectDataset),{eventsBatch:Ae}=useSSEContext(),pe=useSelector$1(selectUser),{activeTab:ve}=useTabParams(),{state:me}=useDndContext(),ye=useSelector$1(selectIsReadonly)||me.isTypeReadOnly,xe=reactExports.useMemo(()=>JSON.parse(JSON.stringify(Ae)),[Ae]),_e=`${J}${oe}`,[$e,Ie]=reactExports.useState(!1),[Fe,ke]=reactExports.useState(externalStorage.getParamsViewers()),[je,We]=reactExports.useState(null);reactExports.useEffect(()=>{ce.current&&ce.current.setLayout([50,50])},[K]),reactExports.useEffect(()=>{Ie(!1)},[oe]),reactExports.useEffect(()=>{xe.length!==0&&xe.forEach(et=>{if(SSE_EVENT_TASKS_TYPES.includes(et.EventKind)&&je&&je.taskRunId===et.TaskRunId){const{Status:tt,TaskRunId:st}=et;tt===RunHandlerStatusCodeEnum.Completed?ze(st,je==null?void 0:je.data):(tt===RunHandlerStatusCodeEnum.Failed||tt===RunHandlerStatusCodeEnum.Cancelled)&&(Ie(!1),externalStorage.removeParamsViewer(_e))}})},[xe]);const ze=(et,tt)=>{const st={dataset:ue.activeDatasetName,taskRunIds:[et]};handlerApi.runTasksResult(st).then(qe=>{qe.length&&(externalStorage.setParamsViewers(_e,{editorData:tt,viewerData:qe[0].Result}),Ie(!1))}).finally(()=>Ie(!1))},Xe=et=>{const tt={dataset:ue.activeDatasetName,type:(ve==null?void 0:ve.id)||"",keys:J?[J]:[],method:oe||"",args:et,userName:pe==null?void 0:pe.username};handlerApi.runTasks(tt).then(st=>{st[0].TaskRunId&&(Ie(!0),We({taskRunId:st[0].TaskRunId,data:et}),ke({...Fe,[_e]:{editorData:et,viewerData:null}}))}).catch(()=>{Ie(!1)})};if(!(ve!=null&&ve.id))return null;const Je=()=>{var tt;if($e)return jsxRuntimeExports.jsx(PF,{loading:!0});const et=(tt=externalStorage.getParamsViewers()[_e])==null?void 0:tt.viewerData;return jsxRuntimeExports.jsx(Viewers,{activeViewerType:et==null?void 0:et._t,data:et})};return jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",ref:ce,children:[jsxRuntimeExports.jsx(Panel$1,{className:styles$W.editorViewer,onResize:resizePlotly,minSize:25,defaultSize:25,children:jsxRuntimeExports.jsx(EditorViewerWithParams,{isReadOnly:ye,recordType:ne||ve.id,partSchemaName:`${oe}Args`,editorData:(nt=Fe==null?void 0:Fe[_e])==null?void 0:nt.editorData,onSubmit:Xe})}),jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{className:styles$W.viewerData,minSize:25,defaultSize:75,children:Je()})]})});ParamsViewer.displayName="ParamsViewer";const ViewHandlerActionWrapper=({Action:K,viewerKey:J,viewerType:ne,dataset:oe,children:ce})=>{var pe;const ue=useSelector$1(selectUser),Ae=useRequest(handlerApi.handlerRun);return reactExports.useEffect(()=>{Ae.fetch({Keys:[J],Type:ne,Method:K==null?void 0:K.Handler,Arguments:K==null?void 0:K.Arguments,Dataset:oe,userName:ue==null?void 0:ue.username})},[K,J,ne]),ce({status:Ae.status,data:(pe=Ae.state)==null?void 0:pe[0].Result})},ViewHandlerAction=reactExports.memo(({Action:K,viewerKey:J,viewerType:ne,dataset:oe,onTransition:ce})=>!K||!ne||!J||isNullable(oe)?null:jsxRuntimeExports.jsx(ViewHandlerActionWrapper,{Action:K,viewerType:ne,viewerKey:J,dataset:oe,children:({status:ue,data:Ae})=>{if(isLoading([ue]))return jsxRuntimeExports.jsx(PF,{loading:!0});if(isNullable(Ae))return null;const ve=isArray$7(Ae)?void 0:Ae._t;return jsxRuntimeExports.jsx(Viewers,{activeViewerType:ve,panelKey:J,panelType:ne,data:Ae,onTransition:ce})}}));ViewHandlerAction.displayName="ViewHandlerAction";function cc(K){if(typeof K=="string"||typeof K=="number")return""+K;let J="";if(Array.isArray(K))for(let ne=0,oe;ne<K.length;ne++)(oe=cc(K[ne]))!==""&&(J+=(J&&" ")+oe);else for(let ne in K)K[ne]&&(J+=(J&&" ")+ne);return J}const __vite_import_meta_env__={BASE_URL:"/",CL_API_HOST:"",CL_API_PORT:"",CL_API_PREFIX:"",CL_API_PROTOCOL:"",CL_API_URL:"",CL_APP_NAME:"UI React",CL_APP_PREFIX_BASENAME:"",CL_APP_TITLE:"CompatibL UI",CL_BASENAME:"/app",CL_BUILD_ENV:"C:\\CL.Build.Utilities\\bin",CL_CHAT_ABOUT_ON:"true",CL_DEFAULT_THEME:"Blue",CL_FEEDBACK_EMAIL:"ui.tracking@compatibl.com",CL_FRONTEND_VERSION:"Default version",CL_FULL_SCREEN_HANDLERS:"true",CL_FULL_SCREEN_NAVIGATION:"true",CL_GOOGLE_TAG_MANAGER_ID:"",CL_GRID_MAX_LINES:"1",CL_HIDE_EMPTY_COLUMNS:"true",CL_LOCAL_BUILD:"true",CL_REFRESH_ON_ALL_HANDLERS:"false",CL_SCHEMA_VERSION:"1.9.0",CL_SIMPLIFIED_BUILD:"true",DEV:!1,MODE:"prod",PROD:!0,SSR:!1},createStoreImpl=K=>{let J;const ne=new Set,oe=(ge,ye)=>{const xe=typeof ge=="function"?ge(J):ge;if(!Object.is(xe,J)){const _e=J;J=ye??(typeof xe!="object"||xe===null)?xe:Object.assign({},J,xe),ne.forEach($e=>$e(J,_e))}},ce=()=>J,ve={setState:oe,getState:ce,getInitialState:()=>me,subscribe:ge=>(ne.add(ge),()=>ne.delete(ge)),destroy:()=>{(__vite_import_meta_env__?"prod":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),ne.clear()}},me=J=K(oe,ce,ve);return ve},createStore=K=>K?createStoreImpl(K):createStoreImpl,{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$2=K=>K;function useStoreWithEqualityFn(K,J=identity$2,ne){const oe=useSyncExternalStoreWithSelector(K.subscribe,K.getState,K.getServerState||K.getInitialState,J,ne);return useDebugValue(oe),oe}const createWithEqualityFnImpl=(K,J)=>{const ne=createStore(K),oe=(ce,ue=J)=>useStoreWithEqualityFn(ne,ce,ue);return Object.assign(oe,ne),oe},createWithEqualityFn=(K,J)=>K?createWithEqualityFnImpl(K,J):createWithEqualityFnImpl;function shallow$1(K,J){if(Object.is(K,J))return!0;if(typeof K!="object"||K===null||typeof J!="object"||J===null)return!1;if(K instanceof Map&&J instanceof Map){if(K.size!==J.size)return!1;for(const[oe,ce]of K)if(!Object.is(ce,J.get(oe)))return!1;return!0}if(K instanceof Set&&J instanceof Set){if(K.size!==J.size)return!1;for(const oe of K)if(!J.has(oe))return!1;return!0}const ne=Object.keys(K);if(ne.length!==Object.keys(J).length)return!1;for(const oe of ne)if(!Object.prototype.hasOwnProperty.call(J,oe)||!Object.is(K[oe],J[oe]))return!1;return!0}var noop$2={value:()=>{}};function dispatch(){for(var K=0,J=arguments.length,ne={},oe;K<J;++K){if(!(oe=arguments[K]+"")||oe in ne||/[\s.]/.test(oe))throw new Error("illegal type: "+oe);ne[oe]=[]}return new Dispatch(ne)}function Dispatch(K){this._=K}function parseTypenames$1(K,J){return K.trim().split(/^|\s+/).map(function(ne){var oe="",ce=ne.indexOf(".");if(ce>=0&&(oe=ne.slice(ce+1),ne=ne.slice(0,ce)),ne&&!J.hasOwnProperty(ne))throw new Error("unknown type: "+ne);return{type:ne,name:oe}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(K,J){var ne=this._,oe=parseTypenames$1(K+"",ne),ce,ue=-1,Ae=oe.length;if(arguments.length<2){for(;++ue<Ae;)if((ce=(K=oe[ue]).type)&&(ce=get$1(ne[ce],K.name)))return ce;return}if(J!=null&&typeof J!="function")throw new Error("invalid callback: "+J);for(;++ue<Ae;)if(ce=(K=oe[ue]).type)ne[ce]=set$1(ne[ce],K.name,J);else if(J==null)for(ce in ne)ne[ce]=set$1(ne[ce],K.name,null);return this},copy:function(){var K={},J=this._;for(var ne in J)K[ne]=J[ne].slice();return new Dispatch(K)},call:function(K,J){if((ce=arguments.length-2)>0)for(var ne=new Array(ce),oe=0,ce,ue;oe<ce;++oe)ne[oe]=arguments[oe+2];if(!this._.hasOwnProperty(K))throw new Error("unknown type: "+K);for(ue=this._[K],oe=0,ce=ue.length;oe<ce;++oe)ue[oe].value.apply(J,ne)},apply:function(K,J,ne){if(!this._.hasOwnProperty(K))throw new Error("unknown type: "+K);for(var oe=this._[K],ce=0,ue=oe.length;ce<ue;++ce)oe[ce].value.apply(J,ne)}};function get$1(K,J){for(var ne=0,oe=K.length,ce;ne<oe;++ne)if((ce=K[ne]).name===J)return ce.value}function set$1(K,J,ne){for(var oe=0,ce=K.length;oe<ce;++oe)if(K[oe].name===J){K[oe]=noop$2,K=K.slice(0,oe).concat(K.slice(oe+1));break}return ne!=null&&K.push({name:J,value:ne}),K}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(K){var J=K+="",ne=J.indexOf(":");return ne>=0&&(J=K.slice(0,ne))!=="xmlns"&&(K=K.slice(ne+1)),namespaces.hasOwnProperty(J)?{space:namespaces[J],local:K}:K}function creatorInherit(K){return function(){var J=this.ownerDocument,ne=this.namespaceURI;return ne===xhtml&&J.documentElement.namespaceURI===xhtml?J.createElement(K):J.createElementNS(ne,K)}}function creatorFixed(K){return function(){return this.ownerDocument.createElementNS(K.space,K.local)}}function creator(K){var J=namespace(K);return(J.local?creatorFixed:creatorInherit)(J)}function none(){}function selector(K){return K==null?none:function(){return this.querySelector(K)}}function selection_select(K){typeof K!="function"&&(K=selector(K));for(var J=this._groups,ne=J.length,oe=new Array(ne),ce=0;ce<ne;++ce)for(var ue=J[ce],Ae=ue.length,pe=oe[ce]=new Array(Ae),ve,me,ge=0;ge<Ae;++ge)(ve=ue[ge])&&(me=K.call(ve,ve.__data__,ge,ue))&&("__data__"in ve&&(me.__data__=ve.__data__),pe[ge]=me);return new Selection$1(oe,this._parents)}function array(K){return K==null?[]:Array.isArray(K)?K:Array.from(K)}function empty$1(){return[]}function selectorAll(K){return K==null?empty$1:function(){return this.querySelectorAll(K)}}function arrayAll(K){return function(){return array(K.apply(this,arguments))}}function selection_selectAll(K){typeof K=="function"?K=arrayAll(K):K=selectorAll(K);for(var J=this._groups,ne=J.length,oe=[],ce=[],ue=0;ue<ne;++ue)for(var Ae=J[ue],pe=Ae.length,ve,me=0;me<pe;++me)(ve=Ae[me])&&(oe.push(K.call(ve,ve.__data__,me,Ae)),ce.push(ve));return new Selection$1(oe,ce)}function matcher(K){return function(){return this.matches(K)}}function childMatcher(K){return function(J){return J.matches(K)}}var find=Array.prototype.find;function childFind(K){return function(){return find.call(this.children,K)}}function childFirst(){return this.firstElementChild}function selection_selectChild(K){return this.select(K==null?childFirst:childFind(typeof K=="function"?K:childMatcher(K)))}var filter$1=Array.prototype.filter;function children$1(){return Array.from(this.children)}function childrenFilter(K){return function(){return filter$1.call(this.children,K)}}function selection_selectChildren(K){return this.selectAll(K==null?children$1:childrenFilter(typeof K=="function"?K:childMatcher(K)))}function selection_filter(K){typeof K!="function"&&(K=matcher(K));for(var J=this._groups,ne=J.length,oe=new Array(ne),ce=0;ce<ne;++ce)for(var ue=J[ce],Ae=ue.length,pe=oe[ce]=[],ve,me=0;me<Ae;++me)(ve=ue[me])&&K.call(ve,ve.__data__,me,ue)&&pe.push(ve);return new Selection$1(oe,this._parents)}function sparse(K){return new Array(K.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(K,J){this.ownerDocument=K.ownerDocument,this.namespaceURI=K.namespaceURI,this._next=null,this._parent=K,this.__data__=J}EnterNode.prototype={constructor:EnterNode,appendChild:function(K){return this._parent.insertBefore(K,this._next)},insertBefore:function(K,J){return this._parent.insertBefore(K,J)},querySelector:function(K){return this._parent.querySelector(K)},querySelectorAll:function(K){return this._parent.querySelectorAll(K)}};function constant$3(K){return function(){return K}}function bindIndex(K,J,ne,oe,ce,ue){for(var Ae=0,pe,ve=J.length,me=ue.length;Ae<me;++Ae)(pe=J[Ae])?(pe.__data__=ue[Ae],oe[Ae]=pe):ne[Ae]=new EnterNode(K,ue[Ae]);for(;Ae<ve;++Ae)(pe=J[Ae])&&(ce[Ae]=pe)}function bindKey(K,J,ne,oe,ce,ue,Ae){var pe,ve,me=new Map,ge=J.length,ye=ue.length,xe=new Array(ge),_e;for(pe=0;pe<ge;++pe)(ve=J[pe])&&(xe[pe]=_e=Ae.call(ve,ve.__data__,pe,J)+"",me.has(_e)?ce[pe]=ve:me.set(_e,ve));for(pe=0;pe<ye;++pe)_e=Ae.call(K,ue[pe],pe,ue)+"",(ve=me.get(_e))?(oe[pe]=ve,ve.__data__=ue[pe],me.delete(_e)):ne[pe]=new EnterNode(K,ue[pe]);for(pe=0;pe<ge;++pe)(ve=J[pe])&&me.get(xe[pe])===ve&&(ce[pe]=ve)}function datum(K){return K.__data__}function selection_data(K,J){if(!arguments.length)return Array.from(this,datum);var ne=J?bindKey:bindIndex,oe=this._parents,ce=this._groups;typeof K!="function"&&(K=constant$3(K));for(var ue=ce.length,Ae=new Array(ue),pe=new Array(ue),ve=new Array(ue),me=0;me<ue;++me){var ge=oe[me],ye=ce[me],xe=ye.length,_e=arraylike(K.call(ge,ge&&ge.__data__,me,oe)),$e=_e.length,Ie=pe[me]=new Array($e),Fe=Ae[me]=new Array($e),ke=ve[me]=new Array(xe);ne(ge,ye,Ie,Fe,ke,_e,J);for(var je=0,We=0,ze,Xe;je<$e;++je)if(ze=Ie[je]){for(je>=We&&(We=je+1);!(Xe=Fe[We])&&++We<$e;);ze._next=Xe||null}}return Ae=new Selection$1(Ae,oe),Ae._enter=pe,Ae._exit=ve,Ae}function arraylike(K){return typeof K=="object"&&"length"in K?K:Array.from(K)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(K,J,ne){var oe=this.enter(),ce=this,ue=this.exit();return typeof K=="function"?(oe=K(oe),oe&&(oe=oe.selection())):oe=oe.append(K+""),J!=null&&(ce=J(ce),ce&&(ce=ce.selection())),ne==null?ue.remove():ne(ue),oe&&ce?oe.merge(ce).order():ce}function selection_merge(K){for(var J=K.selection?K.selection():K,ne=this._groups,oe=J._groups,ce=ne.length,ue=oe.length,Ae=Math.min(ce,ue),pe=new Array(ce),ve=0;ve<Ae;++ve)for(var me=ne[ve],ge=oe[ve],ye=me.length,xe=pe[ve]=new Array(ye),_e,$e=0;$e<ye;++$e)(_e=me[$e]||ge[$e])&&(xe[$e]=_e);for(;ve<ce;++ve)pe[ve]=ne[ve];return new Selection$1(pe,this._parents)}function selection_order(){for(var K=this._groups,J=-1,ne=K.length;++J<ne;)for(var oe=K[J],ce=oe.length-1,ue=oe[ce],Ae;--ce>=0;)(Ae=oe[ce])&&(ue&&Ae.compareDocumentPosition(ue)^4&&ue.parentNode.insertBefore(Ae,ue),ue=Ae);return this}function selection_sort(K){K||(K=ascending);function J(ye,xe){return ye&&xe?K(ye.__data__,xe.__data__):!ye-!xe}for(var ne=this._groups,oe=ne.length,ce=new Array(oe),ue=0;ue<oe;++ue){for(var Ae=ne[ue],pe=Ae.length,ve=ce[ue]=new Array(pe),me,ge=0;ge<pe;++ge)(me=Ae[ge])&&(ve[ge]=me);ve.sort(J)}return new Selection$1(ce,this._parents).order()}function ascending(K,J){return K<J?-1:K>J?1:K>=J?0:NaN}function selection_call(){var K=arguments[0];return arguments[0]=this,K.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var K=this._groups,J=0,ne=K.length;J<ne;++J)for(var oe=K[J],ce=0,ue=oe.length;ce<ue;++ce){var Ae=oe[ce];if(Ae)return Ae}return null}function selection_size(){let K=0;for(const J of this)++K;return K}function selection_empty(){return!this.node()}function selection_each(K){for(var J=this._groups,ne=0,oe=J.length;ne<oe;++ne)for(var ce=J[ne],ue=0,Ae=ce.length,pe;ue<Ae;++ue)(pe=ce[ue])&&K.call(pe,pe.__data__,ue,ce);return this}function attrRemove$1(K){return function(){this.removeAttribute(K)}}function attrRemoveNS$1(K){return function(){this.removeAttributeNS(K.space,K.local)}}function attrConstant$1(K,J){return function(){this.setAttribute(K,J)}}function attrConstantNS$1(K,J){return function(){this.setAttributeNS(K.space,K.local,J)}}function attrFunction$1(K,J){return function(){var ne=J.apply(this,arguments);ne==null?this.removeAttribute(K):this.setAttribute(K,ne)}}function attrFunctionNS$1(K,J){return function(){var ne=J.apply(this,arguments);ne==null?this.removeAttributeNS(K.space,K.local):this.setAttributeNS(K.space,K.local,ne)}}function selection_attr(K,J){var ne=namespace(K);if(arguments.length<2){var oe=this.node();return ne.local?oe.getAttributeNS(ne.space,ne.local):oe.getAttribute(ne)}return this.each((J==null?ne.local?attrRemoveNS$1:attrRemove$1:typeof J=="function"?ne.local?attrFunctionNS$1:attrFunction$1:ne.local?attrConstantNS$1:attrConstant$1)(ne,J))}function defaultView(K){return K.ownerDocument&&K.ownerDocument.defaultView||K.document&&K||K.defaultView}function styleRemove$1(K){return function(){this.style.removeProperty(K)}}function styleConstant$1(K,J,ne){return function(){this.style.setProperty(K,J,ne)}}function styleFunction$1(K,J,ne){return function(){var oe=J.apply(this,arguments);oe==null?this.style.removeProperty(K):this.style.setProperty(K,oe,ne)}}function selection_style(K,J,ne){return arguments.length>1?this.each((J==null?styleRemove$1:typeof J=="function"?styleFunction$1:styleConstant$1)(K,J,ne??"")):styleValue(this.node(),K)}function styleValue(K,J){return K.style.getPropertyValue(J)||defaultView(K).getComputedStyle(K,null).getPropertyValue(J)}function propertyRemove(K){return function(){delete this[K]}}function propertyConstant(K,J){return function(){this[K]=J}}function propertyFunction(K,J){return function(){var ne=J.apply(this,arguments);ne==null?delete this[K]:this[K]=ne}}function selection_property(K,J){return arguments.length>1?this.each((J==null?propertyRemove:typeof J=="function"?propertyFunction:propertyConstant)(K,J)):this.node()[K]}function classArray(K){return K.trim().split(/^|\s+/)}function classList(K){return K.classList||new ClassList(K)}function ClassList(K){this._node=K,this._names=classArray(K.getAttribute("class")||"")}ClassList.prototype={add:function(K){var J=this._names.indexOf(K);J<0&&(this._names.push(K),this._node.setAttribute("class",this._names.join(" ")))},remove:function(K){var J=this._names.indexOf(K);J>=0&&(this._names.splice(J,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(K){return this._names.indexOf(K)>=0}};function classedAdd(K,J){for(var ne=classList(K),oe=-1,ce=J.length;++oe<ce;)ne.add(J[oe])}function classedRemove(K,J){for(var ne=classList(K),oe=-1,ce=J.length;++oe<ce;)ne.remove(J[oe])}function classedTrue(K){return function(){classedAdd(this,K)}}function classedFalse(K){return function(){classedRemove(this,K)}}function classedFunction(K,J){return function(){(J.apply(this,arguments)?classedAdd:classedRemove)(this,K)}}function selection_classed(K,J){var ne=classArray(K+"");if(arguments.length<2){for(var oe=classList(this.node()),ce=-1,ue=ne.length;++ce<ue;)if(!oe.contains(ne[ce]))return!1;return!0}return this.each((typeof J=="function"?classedFunction:J?classedTrue:classedFalse)(ne,J))}function textRemove(){this.textContent=""}function textConstant$1(K){return function(){this.textContent=K}}function textFunction$1(K){return function(){var J=K.apply(this,arguments);this.textContent=J??""}}function selection_text(K){return arguments.length?this.each(K==null?textRemove:(typeof K=="function"?textFunction$1:textConstant$1)(K)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(K){return function(){this.innerHTML=K}}function htmlFunction(K){return function(){var J=K.apply(this,arguments);this.innerHTML=J??""}}function selection_html(K){return arguments.length?this.each(K==null?htmlRemove:(typeof K=="function"?htmlFunction:htmlConstant)(K)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(K){var J=typeof K=="function"?K:creator(K);return this.select(function(){return this.appendChild(J.apply(this,arguments))})}function constantNull(){return null}function selection_insert(K,J){var ne=typeof K=="function"?K:creator(K),oe=J==null?constantNull:typeof J=="function"?J:selector(J);return this.select(function(){return this.insertBefore(ne.apply(this,arguments),oe.apply(this,arguments)||null)})}function remove(){var K=this.parentNode;K&&K.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var K=this.cloneNode(!1),J=this.parentNode;return J?J.insertBefore(K,this.nextSibling):K}function selection_cloneDeep(){var K=this.cloneNode(!0),J=this.parentNode;return J?J.insertBefore(K,this.nextSibling):K}function selection_clone(K){return this.select(K?selection_cloneDeep:selection_cloneShallow)}function selection_datum(K){return arguments.length?this.property("__data__",K):this.node().__data__}function contextListener(K){return function(J){K.call(this,J,this.__data__)}}function parseTypenames(K){return K.trim().split(/^|\s+/).map(function(J){var ne="",oe=J.indexOf(".");return oe>=0&&(ne=J.slice(oe+1),J=J.slice(0,oe)),{type:J,name:ne}})}function onRemove(K){return function(){var J=this.__on;if(J){for(var ne=0,oe=-1,ce=J.length,ue;ne<ce;++ne)ue=J[ne],(!K.type||ue.type===K.type)&&ue.name===K.name?this.removeEventListener(ue.type,ue.listener,ue.options):J[++oe]=ue;++oe?J.length=oe:delete this.__on}}}function onAdd(K,J,ne){return function(){var oe=this.__on,ce,ue=contextListener(J);if(oe){for(var Ae=0,pe=oe.length;Ae<pe;++Ae)if((ce=oe[Ae]).type===K.type&&ce.name===K.name){this.removeEventListener(ce.type,ce.listener,ce.options),this.addEventListener(ce.type,ce.listener=ue,ce.options=ne),ce.value=J;return}}this.addEventListener(K.type,ue,ne),ce={type:K.type,name:K.name,value:J,listener:ue,options:ne},oe?oe.push(ce):this.__on=[ce]}}function selection_on(K,J,ne){var oe=parseTypenames(K+""),ce,ue=oe.length,Ae;if(arguments.length<2){var pe=this.node().__on;if(pe){for(var ve=0,me=pe.length,ge;ve<me;++ve)for(ce=0,ge=pe[ve];ce<ue;++ce)if((Ae=oe[ce]).type===ge.type&&Ae.name===ge.name)return ge.value}return}for(pe=J?onAdd:onRemove,ce=0;ce<ue;++ce)this.each(pe(oe[ce],J,ne));return this}function dispatchEvent(K,J,ne){var oe=defaultView(K),ce=oe.CustomEvent;typeof ce=="function"?ce=new ce(J,ne):(ce=oe.document.createEvent("Event"),ne?(ce.initEvent(J,ne.bubbles,ne.cancelable),ce.detail=ne.detail):ce.initEvent(J,!1,!1)),K.dispatchEvent(ce)}function dispatchConstant(K,J){return function(){return dispatchEvent(this,K,J)}}function dispatchFunction(K,J){return function(){return dispatchEvent(this,K,J.apply(this,arguments))}}function selection_dispatch(K,J){return this.each((typeof J=="function"?dispatchFunction:dispatchConstant)(K,J))}function*selection_iterator(){for(var K=this._groups,J=0,ne=K.length;J<ne;++J)for(var oe=K[J],ce=0,ue=oe.length,Ae;ce<ue;++ce)(Ae=oe[ce])&&(yield Ae)}var root$a=[null];function Selection$1(K,J){this._groups=K,this._parents=J}function selection(){return new Selection$1([[document.documentElement]],root$a)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select$3(K){return typeof K=="string"?new Selection$1([[document.querySelector(K)]],[document.documentElement]):new Selection$1([[K]],root$a)}function sourceEvent(K){let J;for(;J=K.sourceEvent;)K=J;return K}function pointer(K,J){if(K=sourceEvent(K),J===void 0&&(J=K.currentTarget),J){var ne=J.ownerSVGElement||J;if(ne.createSVGPoint){var oe=ne.createSVGPoint();return oe.x=K.clientX,oe.y=K.clientY,oe=oe.matrixTransform(J.getScreenCTM().inverse()),[oe.x,oe.y]}if(J.getBoundingClientRect){var ce=J.getBoundingClientRect();return[K.clientX-ce.left-J.clientLeft,K.clientY-ce.top-J.clientTop]}}return[K.pageX,K.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(K){K.stopImmediatePropagation()}function noevent$1(K){K.preventDefault(),K.stopImmediatePropagation()}function dragDisable(K){var J=K.document.documentElement,ne=select$3(K).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in J?ne.on("selectstart.drag",noevent$1,nonpassivecapture):(J.__noselect=J.style.MozUserSelect,J.style.MozUserSelect="none")}function yesdrag(K,J){var ne=K.document.documentElement,oe=select$3(K).on("dragstart.drag",null);J&&(oe.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){oe.on("click.drag",null)},0)),"onselectstart"in ne?oe.on("selectstart.drag",null):(ne.style.MozUserSelect=ne.__noselect,delete ne.__noselect)}const constant$2=K=>()=>K;function DragEvent(K,{sourceEvent:J,subject:ne,target:oe,identifier:ce,active:ue,x:Ae,y:pe,dx:ve,dy:me,dispatch:ge}){Object.defineProperties(this,{type:{value:K,enumerable:!0,configurable:!0},sourceEvent:{value:J,enumerable:!0,configurable:!0},subject:{value:ne,enumerable:!0,configurable:!0},target:{value:oe,enumerable:!0,configurable:!0},identifier:{value:ce,enumerable:!0,configurable:!0},active:{value:ue,enumerable:!0,configurable:!0},x:{value:Ae,enumerable:!0,configurable:!0},y:{value:pe,enumerable:!0,configurable:!0},dx:{value:ve,enumerable:!0,configurable:!0},dy:{value:me,enumerable:!0,configurable:!0},_:{value:ge}})}DragEvent.prototype.on=function(){var K=this._.on.apply(this._,arguments);return K===this._?this:K};function defaultFilter$1(K){return!K.ctrlKey&&!K.button}function defaultContainer(){return this.parentNode}function defaultSubject(K,J){return J??{x:K.x,y:K.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var K=defaultFilter$1,J=defaultContainer,ne=defaultSubject,oe=defaultTouchable$1,ce={},ue=dispatch("start","drag","end"),Ae=0,pe,ve,me,ge,ye=0;function xe(ze){ze.on("mousedown.drag",_e).filter(oe).on("touchstart.drag",Fe).on("touchmove.drag",ke,nonpassive).on("touchend.drag touchcancel.drag",je).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _e(ze,Xe){if(!(ge||!K.call(this,ze,Xe))){var Je=We(this,J.call(this,ze,Xe),ze,Xe,"mouse");Je&&(select$3(ze.view).on("mousemove.drag",$e,nonpassivecapture).on("mouseup.drag",Ie,nonpassivecapture),dragDisable(ze.view),nopropagation$1(ze),me=!1,pe=ze.clientX,ve=ze.clientY,Je("start",ze))}}function $e(ze){if(noevent$1(ze),!me){var Xe=ze.clientX-pe,Je=ze.clientY-ve;me=Xe*Xe+Je*Je>ye}ce.mouse("drag",ze)}function Ie(ze){select$3(ze.view).on("mousemove.drag mouseup.drag",null),yesdrag(ze.view,me),noevent$1(ze),ce.mouse("end",ze)}function Fe(ze,Xe){if(K.call(this,ze,Xe)){var Je=ze.changedTouches,nt=J.call(this,ze,Xe),et=Je.length,tt,st;for(tt=0;tt<et;++tt)(st=We(this,nt,ze,Xe,Je[tt].identifier,Je[tt]))&&(nopropagation$1(ze),st("start",ze,Je[tt]))}}function ke(ze){var Xe=ze.changedTouches,Je=Xe.length,nt,et;for(nt=0;nt<Je;++nt)(et=ce[Xe[nt].identifier])&&(noevent$1(ze),et("drag",ze,Xe[nt]))}function je(ze){var Xe=ze.changedTouches,Je=Xe.length,nt,et;for(ge&&clearTimeout(ge),ge=setTimeout(function(){ge=null},500),nt=0;nt<Je;++nt)(et=ce[Xe[nt].identifier])&&(nopropagation$1(ze),et("end",ze,Xe[nt]))}function We(ze,Xe,Je,nt,et,tt){var st=ue.copy(),qe=pointer(tt||Je,Xe),Se,Re,Be;if((Be=ne.call(ze,new DragEvent("beforestart",{sourceEvent:Je,target:xe,identifier:et,active:Ae,x:qe[0],y:qe[1],dx:0,dy:0,dispatch:st}),nt))!=null)return Se=Be.x-qe[0]||0,Re=Be.y-qe[1]||0,function Ne(Ue,Ge,Ye){var Qe=qe,Te;switch(Ue){case"start":ce[et]=Ne,Te=Ae++;break;case"end":delete ce[et],--Ae;case"drag":qe=pointer(Ye||Ge,Xe),Te=Ae;break}st.call(Ue,ze,new DragEvent(Ue,{sourceEvent:Ge,subject:Be,target:xe,identifier:et,active:Te,x:qe[0]+Se,y:qe[1]+Re,dx:qe[0]-Qe[0],dy:qe[1]-Qe[1],dispatch:st}),nt)}}return xe.filter=function(ze){return arguments.length?(K=typeof ze=="function"?ze:constant$2(!!ze),xe):K},xe.container=function(ze){return arguments.length?(J=typeof ze=="function"?ze:constant$2(ze),xe):J},xe.subject=function(ze){return arguments.length?(ne=typeof ze=="function"?ze:constant$2(ze),xe):ne},xe.touchable=function(ze){return arguments.length?(oe=typeof ze=="function"?ze:constant$2(!!ze),xe):oe},xe.on=function(){var ze=ue.on.apply(ue,arguments);return ze===ue?xe:ze},xe.clickDistance=function(ze){return arguments.length?(ye=(ze=+ze)*ze,xe):Math.sqrt(ye)},xe}function define(K,J,ne){K.prototype=J.prototype=ne,ne.constructor=K}function extend(K,J){var ne=Object.create(K.prototype);for(var oe in J)ne[oe]=J[oe];return ne}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$2,{copy(K){return Object.assign(new this.constructor,this,K)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$2(K){var J,ne;return K=(K+"").trim().toLowerCase(),(J=reHex.exec(K))?(ne=J[1].length,J=parseInt(J[1],16),ne===6?rgbn(J):ne===3?new Rgb(J>>8&15|J>>4&240,J>>4&15|J&240,(J&15)<<4|J&15,1):ne===8?rgba(J>>24&255,J>>16&255,J>>8&255,(J&255)/255):ne===4?rgba(J>>12&15|J>>8&240,J>>8&15|J>>4&240,J>>4&15|J&240,((J&15)<<4|J&15)/255):null):(J=reRgbInteger.exec(K))?new Rgb(J[1],J[2],J[3],1):(J=reRgbPercent.exec(K))?new Rgb(J[1]*255/100,J[2]*255/100,J[3]*255/100,1):(J=reRgbaInteger.exec(K))?rgba(J[1],J[2],J[3],J[4]):(J=reRgbaPercent.exec(K))?rgba(J[1]*255/100,J[2]*255/100,J[3]*255/100,J[4]):(J=reHslPercent.exec(K))?hsla(J[1],J[2]/100,J[3]/100,1):(J=reHslaPercent.exec(K))?hsla(J[1],J[2]/100,J[3]/100,J[4]):named.hasOwnProperty(K)?rgbn(named[K]):K==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(K){return new Rgb(K>>16&255,K>>8&255,K&255,1)}function rgba(K,J,ne,oe){return oe<=0&&(K=J=ne=NaN),new Rgb(K,J,ne,oe)}function rgbConvert(K){return K instanceof Color||(K=color$2(K)),K?(K=K.rgb(),new Rgb(K.r,K.g,K.b,K.opacity)):new Rgb}function rgb$1(K,J,ne,oe){return arguments.length===1?rgbConvert(K):new Rgb(K,J,ne,oe??1)}function Rgb(K,J,ne,oe){this.r=+K,this.g=+J,this.b=+ne,this.opacity=+oe}define(Rgb,rgb$1,extend(Color,{brighter(K){return K=K==null?brighter:Math.pow(brighter,K),new Rgb(this.r*K,this.g*K,this.b*K,this.opacity)},darker(K){return K=K==null?darker:Math.pow(darker,K),new Rgb(this.r*K,this.g*K,this.b*K,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const K=clampa(this.opacity);return`${K===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${K===1?")":`, ${K})`}`}function clampa(K){return isNaN(K)?1:Math.max(0,Math.min(1,K))}function clampi(K){return Math.max(0,Math.min(255,Math.round(K)||0))}function hex(K){return K=clampi(K),(K<16?"0":"")+K.toString(16)}function hsla(K,J,ne,oe){return oe<=0?K=J=ne=NaN:ne<=0||ne>=1?K=J=NaN:J<=0&&(K=NaN),new Hsl(K,J,ne,oe)}function hslConvert(K){if(K instanceof Hsl)return new Hsl(K.h,K.s,K.l,K.opacity);if(K instanceof Color||(K=color$2(K)),!K)return new Hsl;if(K instanceof Hsl)return K;K=K.rgb();var J=K.r/255,ne=K.g/255,oe=K.b/255,ce=Math.min(J,ne,oe),ue=Math.max(J,ne,oe),Ae=NaN,pe=ue-ce,ve=(ue+ce)/2;return pe?(J===ue?Ae=(ne-oe)/pe+(ne<oe)*6:ne===ue?Ae=(oe-J)/pe+2:Ae=(J-ne)/pe+4,pe/=ve<.5?ue+ce:2-ue-ce,Ae*=60):pe=ve>0&&ve<1?0:Ae,new Hsl(Ae,pe,ve,K.opacity)}function hsl$1(K,J,ne,oe){return arguments.length===1?hslConvert(K):new Hsl(K,J,ne,oe??1)}function Hsl(K,J,ne,oe){this.h=+K,this.s=+J,this.l=+ne,this.opacity=+oe}define(Hsl,hsl$1,extend(Color,{brighter(K){return K=K==null?brighter:Math.pow(brighter,K),new Hsl(this.h,this.s,this.l*K,this.opacity)},darker(K){return K=K==null?darker:Math.pow(darker,K),new Hsl(this.h,this.s,this.l*K,this.opacity)},rgb(){var K=this.h%360+(this.h<0)*360,J=isNaN(K)||isNaN(this.s)?0:this.s,ne=this.l,oe=ne+(ne<.5?ne:1-ne)*J,ce=2*ne-oe;return new Rgb(hsl2rgb(K>=240?K-240:K+120,ce,oe),hsl2rgb(K,ce,oe),hsl2rgb(K<120?K+240:K-120,ce,oe),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const K=clampa(this.opacity);return`${K===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${K===1?")":`, ${K})`}`}}));function clamph(K){return K=(K||0)%360,K<0?K+360:K}function clampt(K){return Math.max(0,Math.min(1,K||0))}function hsl2rgb(K,J,ne){return(K<60?J+(ne-J)*K/60:K<180?ne:K<240?J+(ne-J)*(240-K)/60:J)*255}const constant$1=K=>()=>K;function linear(K,J){return function(ne){return K+ne*J}}function exponential(K,J,ne){return K=Math.pow(K,ne),J=Math.pow(J,ne)-K,ne=1/ne,function(oe){return Math.pow(K+oe*J,ne)}}function gamma(K){return(K=+K)==1?nogamma:function(J,ne){return ne-J?exponential(J,ne,K):constant$1(isNaN(J)?ne:J)}}function nogamma(K,J){var ne=J-K;return ne?linear(K,ne):constant$1(isNaN(K)?J:K)}const interpolateRgb=function K(J){var ne=gamma(J);function oe(ce,ue){var Ae=ne((ce=rgb$1(ce)).r,(ue=rgb$1(ue)).r),pe=ne(ce.g,ue.g),ve=ne(ce.b,ue.b),me=nogamma(ce.opacity,ue.opacity);return function(ge){return ce.r=Ae(ge),ce.g=pe(ge),ce.b=ve(ge),ce.opacity=me(ge),ce+""}}return oe.gamma=K,oe}(1);function interpolateNumber(K,J){return K=+K,J=+J,function(ne){return K*(1-ne)+J*ne}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(K){return function(){return K}}function one(K){return function(J){return K(J)+""}}function interpolateString(K,J){var ne=reA.lastIndex=reB.lastIndex=0,oe,ce,ue,Ae=-1,pe=[],ve=[];for(K=K+"",J=J+"";(oe=reA.exec(K))&&(ce=reB.exec(J));)(ue=ce.index)>ne&&(ue=J.slice(ne,ue),pe[Ae]?pe[Ae]+=ue:pe[++Ae]=ue),(oe=oe[0])===(ce=ce[0])?pe[Ae]?pe[Ae]+=ce:pe[++Ae]=ce:(pe[++Ae]=null,ve.push({i:Ae,x:interpolateNumber(oe,ce)})),ne=reB.lastIndex;return ne<J.length&&(ue=J.slice(ne),pe[Ae]?pe[Ae]+=ue:pe[++Ae]=ue),pe.length<2?ve[0]?one(ve[0].x):zero(J):(J=ve.length,function(me){for(var ge=0,ye;ge<J;++ge)pe[(ye=ve[ge]).i]=ye.x(me);return pe.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(K,J,ne,oe,ce,ue){var Ae,pe,ve;return(Ae=Math.sqrt(K*K+J*J))&&(K/=Ae,J/=Ae),(ve=K*ne+J*oe)&&(ne-=K*ve,oe-=J*ve),(pe=Math.sqrt(ne*ne+oe*oe))&&(ne/=pe,oe/=pe,ve/=pe),K*oe<J*ne&&(K=-K,J=-J,ve=-ve,Ae=-Ae),{translateX:ce,translateY:ue,rotate:Math.atan2(J,K)*degrees,skewX:Math.atan(ve)*degrees,scaleX:Ae,scaleY:pe}}var svgNode;function parseCss(K){const J=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(K+"");return J.isIdentity?identity$1:decompose(J.a,J.b,J.c,J.d,J.e,J.f)}function parseSvg(K){return K==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",K),!(K=svgNode.transform.baseVal.consolidate()))?identity$1:(K=K.matrix,decompose(K.a,K.b,K.c,K.d,K.e,K.f))}function interpolateTransform(K,J,ne,oe){function ce(me){return me.length?me.pop()+" ":""}function ue(me,ge,ye,xe,_e,$e){if(me!==ye||ge!==xe){var Ie=_e.push("translate(",null,J,null,ne);$e.push({i:Ie-4,x:interpolateNumber(me,ye)},{i:Ie-2,x:interpolateNumber(ge,xe)})}else(ye||xe)&&_e.push("translate("+ye+J+xe+ne)}function Ae(me,ge,ye,xe){me!==ge?(me-ge>180?ge+=360:ge-me>180&&(me+=360),xe.push({i:ye.push(ce(ye)+"rotate(",null,oe)-2,x:interpolateNumber(me,ge)})):ge&&ye.push(ce(ye)+"rotate("+ge+oe)}function pe(me,ge,ye,xe){me!==ge?xe.push({i:ye.push(ce(ye)+"skewX(",null,oe)-2,x:interpolateNumber(me,ge)}):ge&&ye.push(ce(ye)+"skewX("+ge+oe)}function ve(me,ge,ye,xe,_e,$e){if(me!==ye||ge!==xe){var Ie=_e.push(ce(_e)+"scale(",null,",",null,")");$e.push({i:Ie-4,x:interpolateNumber(me,ye)},{i:Ie-2,x:interpolateNumber(ge,xe)})}else(ye!==1||xe!==1)&&_e.push(ce(_e)+"scale("+ye+","+xe+")")}return function(me,ge){var ye=[],xe=[];return me=K(me),ge=K(ge),ue(me.translateX,me.translateY,ge.translateX,ge.translateY,ye,xe),Ae(me.rotate,ge.rotate,ye,xe),pe(me.skewX,ge.skewX,ye,xe),ve(me.scaleX,me.scaleY,ge.scaleX,ge.scaleY,ye,xe),me=ge=null,function(_e){for(var $e=-1,Ie=xe.length,Fe;++$e<Ie;)ye[(Fe=xe[$e]).i]=Fe.x(_e);return ye.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(K){return((K=Math.exp(K))+1/K)/2}function sinh(K){return((K=Math.exp(K))-1/K)/2}function tanh(K){return((K=Math.exp(2*K))-1)/(K+1)}const interpolateZoom=function K(J,ne,oe){function ce(ue,Ae){var pe=ue[0],ve=ue[1],me=ue[2],ge=Ae[0],ye=Ae[1],xe=Ae[2],_e=ge-pe,$e=ye-ve,Ie=_e*_e+$e*$e,Fe,ke;if(Ie<epsilon2)ke=Math.log(xe/me)/J,Fe=function(nt){return[pe+nt*_e,ve+nt*$e,me*Math.exp(J*nt*ke)]};else{var je=Math.sqrt(Ie),We=(xe*xe-me*me+oe*Ie)/(2*me*ne*je),ze=(xe*xe-me*me-oe*Ie)/(2*xe*ne*je),Xe=Math.log(Math.sqrt(We*We+1)-We),Je=Math.log(Math.sqrt(ze*ze+1)-ze);ke=(Je-Xe)/J,Fe=function(nt){var et=nt*ke,tt=cosh(Xe),st=me/(ne*je)*(tt*tanh(J*et+Xe)-sinh(Xe));return[pe+st*_e,ve+st*$e,me*tt/cosh(J*et+Xe)]}}return Fe.duration=ke*1e3*J/Math.SQRT2,Fe}return ce.rho=function(ue){var Ae=Math.max(.001,+ue),pe=Ae*Ae,ve=pe*pe;return K(Ae,pe,ve)},ce}(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(K){setTimeout(K,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(K,J,ne){if(typeof K!="function")throw new TypeError("callback is not a function");ne=(ne==null?now():+ne)+(J==null?0:+J),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=K,this._time=ne,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(K,J,ne){var oe=new Timer;return oe.restart(K,J,ne),oe}function timerFlush(){now(),++frame;for(var K=taskHead,J;K;)(J=clockNow-K._time)>=0&&K._call.call(void 0,J),K=K._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var K=clock.now(),J=K-clockLast;J>pokeDelay&&(clockSkew-=J,clockLast=K)}function nap(){for(var K,J=taskHead,ne,oe=1/0;J;)J._call?(oe>J._time&&(oe=J._time),K=J,J=J._next):(ne=J._next,J._next=null,J=K?K._next=ne:taskHead=ne);taskTail=K,sleep(oe)}function sleep(K){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var J=K-clockNow;J>24?(K<1/0&&(timeout$1=setTimeout(wake,K-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(K,J,ne){var oe=new Timer;return J=J==null?0:+J,oe.restart(ce=>{oe.stop(),K(ce+J)},J,ne),oe}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(K,J,ne,oe,ce,ue){var Ae=K.__transition;if(!Ae)K.__transition={};else if(ne in Ae)return;create(K,ne,{name:J,index:oe,group:ce,on:emptyOn,tween:emptyTween,time:ue.time,delay:ue.delay,duration:ue.duration,ease:ue.ease,timer:null,state:CREATED})}function init$1(K,J){var ne=get(K,J);if(ne.state>CREATED)throw new Error("too late; already scheduled");return ne}function set(K,J){var ne=get(K,J);if(ne.state>STARTED)throw new Error("too late; already running");return ne}function get(K,J){var ne=K.__transition;if(!ne||!(ne=ne[J]))throw new Error("transition not found");return ne}function create(K,J,ne){var oe=K.__transition,ce;oe[J]=ne,ne.timer=timer(ue,0,ne.time);function ue(me){ne.state=SCHEDULED,ne.timer.restart(Ae,ne.delay,ne.time),ne.delay<=me&&Ae(me-ne.delay)}function Ae(me){var ge,ye,xe,_e;if(ne.state!==SCHEDULED)return ve();for(ge in oe)if(_e=oe[ge],_e.name===ne.name){if(_e.state===STARTED)return timeout(Ae);_e.state===RUNNING?(_e.state=ENDED,_e.timer.stop(),_e.on.call("interrupt",K,K.__data__,_e.index,_e.group),delete oe[ge]):+ge<J&&(_e.state=ENDED,_e.timer.stop(),_e.on.call("cancel",K,K.__data__,_e.index,_e.group),delete oe[ge])}if(timeout(function(){ne.state===STARTED&&(ne.state=RUNNING,ne.timer.restart(pe,ne.delay,ne.time),pe(me))}),ne.state=STARTING,ne.on.call("start",K,K.__data__,ne.index,ne.group),ne.state===STARTING){for(ne.state=STARTED,ce=new Array(xe=ne.tween.length),ge=0,ye=-1;ge<xe;++ge)(_e=ne.tween[ge].value.call(K,K.__data__,ne.index,ne.group))&&(ce[++ye]=_e);ce.length=ye+1}}function pe(me){for(var ge=me<ne.duration?ne.ease.call(null,me/ne.duration):(ne.timer.restart(ve),ne.state=ENDING,1),ye=-1,xe=ce.length;++ye<xe;)ce[ye].call(K,ge);ne.state===ENDING&&(ne.on.call("end",K,K.__data__,ne.index,ne.group),ve())}function ve(){ne.state=ENDED,ne.timer.stop(),delete oe[J];for(var me in oe)return;delete K.__transition}}function interrupt(K,J){var ne=K.__transition,oe,ce,ue=!0,Ae;if(ne){J=J==null?null:J+"";for(Ae in ne){if((oe=ne[Ae]).name!==J){ue=!1;continue}ce=oe.state>STARTING&&oe.state<ENDING,oe.state=ENDED,oe.timer.stop(),oe.on.call(ce?"interrupt":"cancel",K,K.__data__,oe.index,oe.group),delete ne[Ae]}ue&&delete K.__transition}}function selection_interrupt(K){return this.each(function(){interrupt(this,K)})}function tweenRemove(K,J){var ne,oe;return function(){var ce=set(this,K),ue=ce.tween;if(ue!==ne){oe=ne=ue;for(var Ae=0,pe=oe.length;Ae<pe;++Ae)if(oe[Ae].name===J){oe=oe.slice(),oe.splice(Ae,1);break}}ce.tween=oe}}function tweenFunction(K,J,ne){var oe,ce;if(typeof ne!="function")throw new Error;return function(){var ue=set(this,K),Ae=ue.tween;if(Ae!==oe){ce=(oe=Ae).slice();for(var pe={name:J,value:ne},ve=0,me=ce.length;ve<me;++ve)if(ce[ve].name===J){ce[ve]=pe;break}ve===me&&ce.push(pe)}ue.tween=ce}}function transition_tween(K,J){var ne=this._id;if(K+="",arguments.length<2){for(var oe=get(this.node(),ne).tween,ce=0,ue=oe.length,Ae;ce<ue;++ce)if((Ae=oe[ce]).name===K)return Ae.value;return null}return this.each((J==null?tweenRemove:tweenFunction)(ne,K,J))}function tweenValue(K,J,ne){var oe=K._id;return K.each(function(){var ce=set(this,oe);(ce.value||(ce.value={}))[J]=ne.apply(this,arguments)}),function(ce){return get(ce,oe).value[J]}}function interpolate(K,J){var ne;return(typeof J=="number"?interpolateNumber:J instanceof color$2?interpolateRgb:(ne=color$2(J))?(J=ne,interpolateRgb):interpolateString)(K,J)}function attrRemove(K){return function(){this.removeAttribute(K)}}function attrRemoveNS(K){return function(){this.removeAttributeNS(K.space,K.local)}}function attrConstant(K,J,ne){var oe,ce=ne+"",ue;return function(){var Ae=this.getAttribute(K);return Ae===ce?null:Ae===oe?ue:ue=J(oe=Ae,ne)}}function attrConstantNS(K,J,ne){var oe,ce=ne+"",ue;return function(){var Ae=this.getAttributeNS(K.space,K.local);return Ae===ce?null:Ae===oe?ue:ue=J(oe=Ae,ne)}}function attrFunction(K,J,ne){var oe,ce,ue;return function(){var Ae,pe=ne(this),ve;return pe==null?void this.removeAttribute(K):(Ae=this.getAttribute(K),ve=pe+"",Ae===ve?null:Ae===oe&&ve===ce?ue:(ce=ve,ue=J(oe=Ae,pe)))}}function attrFunctionNS(K,J,ne){var oe,ce,ue;return function(){var Ae,pe=ne(this),ve;return pe==null?void this.removeAttributeNS(K.space,K.local):(Ae=this.getAttributeNS(K.space,K.local),ve=pe+"",Ae===ve?null:Ae===oe&&ve===ce?ue:(ce=ve,ue=J(oe=Ae,pe)))}}function transition_attr(K,J){var ne=namespace(K),oe=ne==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(K,typeof J=="function"?(ne.local?attrFunctionNS:attrFunction)(ne,oe,tweenValue(this,"attr."+K,J)):J==null?(ne.local?attrRemoveNS:attrRemove)(ne):(ne.local?attrConstantNS:attrConstant)(ne,oe,J))}function attrInterpolate(K,J){return function(ne){this.setAttribute(K,J.call(this,ne))}}function attrInterpolateNS(K,J){return function(ne){this.setAttributeNS(K.space,K.local,J.call(this,ne))}}function attrTweenNS(K,J){var ne,oe;function ce(){var ue=J.apply(this,arguments);return ue!==oe&&(ne=(oe=ue)&&attrInterpolateNS(K,ue)),ne}return ce._value=J,ce}function attrTween(K,J){var ne,oe;function ce(){var ue=J.apply(this,arguments);return ue!==oe&&(ne=(oe=ue)&&attrInterpolate(K,ue)),ne}return ce._value=J,ce}function transition_attrTween(K,J){var ne="attr."+K;if(arguments.length<2)return(ne=this.tween(ne))&&ne._value;if(J==null)return this.tween(ne,null);if(typeof J!="function")throw new Error;var oe=namespace(K);return this.tween(ne,(oe.local?attrTweenNS:attrTween)(oe,J))}function delayFunction(K,J){return function(){init$1(this,K).delay=+J.apply(this,arguments)}}function delayConstant(K,J){return J=+J,function(){init$1(this,K).delay=J}}function transition_delay(K){var J=this._id;return arguments.length?this.each((typeof K=="function"?delayFunction:delayConstant)(J,K)):get(this.node(),J).delay}function durationFunction(K,J){return function(){set(this,K).duration=+J.apply(this,arguments)}}function durationConstant(K,J){return J=+J,function(){set(this,K).duration=J}}function transition_duration(K){var J=this._id;return arguments.length?this.each((typeof K=="function"?durationFunction:durationConstant)(J,K)):get(this.node(),J).duration}function easeConstant(K,J){if(typeof J!="function")throw new Error;return function(){set(this,K).ease=J}}function transition_ease(K){var J=this._id;return arguments.length?this.each(easeConstant(J,K)):get(this.node(),J).ease}function easeVarying(K,J){return function(){var ne=J.apply(this,arguments);if(typeof ne!="function")throw new Error;set(this,K).ease=ne}}function transition_easeVarying(K){if(typeof K!="function")throw new Error;return this.each(easeVarying(this._id,K))}function transition_filter(K){typeof K!="function"&&(K=matcher(K));for(var J=this._groups,ne=J.length,oe=new Array(ne),ce=0;ce<ne;++ce)for(var ue=J[ce],Ae=ue.length,pe=oe[ce]=[],ve,me=0;me<Ae;++me)(ve=ue[me])&&K.call(ve,ve.__data__,me,ue)&&pe.push(ve);return new Transition(oe,this._parents,this._name,this._id)}function transition_merge(K){if(K._id!==this._id)throw new Error;for(var J=this._groups,ne=K._groups,oe=J.length,ce=ne.length,ue=Math.min(oe,ce),Ae=new Array(oe),pe=0;pe<ue;++pe)for(var ve=J[pe],me=ne[pe],ge=ve.length,ye=Ae[pe]=new Array(ge),xe,_e=0;_e<ge;++_e)(xe=ve[_e]||me[_e])&&(ye[_e]=xe);for(;pe<oe;++pe)Ae[pe]=J[pe];return new Transition(Ae,this._parents,this._name,this._id)}function start(K){return(K+"").trim().split(/^|\s+/).every(function(J){var ne=J.indexOf(".");return ne>=0&&(J=J.slice(0,ne)),!J||J==="start"})}function onFunction(K,J,ne){var oe,ce,ue=start(J)?init$1:set;return function(){var Ae=ue(this,K),pe=Ae.on;pe!==oe&&(ce=(oe=pe).copy()).on(J,ne),Ae.on=ce}}function transition_on(K,J){var ne=this._id;return arguments.length<2?get(this.node(),ne).on.on(K):this.each(onFunction(ne,K,J))}function removeFunction(K){return function(){var J=this.parentNode;for(var ne in this.__transition)if(+ne!==K)return;J&&J.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(K){var J=this._name,ne=this._id;typeof K!="function"&&(K=selector(K));for(var oe=this._groups,ce=oe.length,ue=new Array(ce),Ae=0;Ae<ce;++Ae)for(var pe=oe[Ae],ve=pe.length,me=ue[Ae]=new Array(ve),ge,ye,xe=0;xe<ve;++xe)(ge=pe[xe])&&(ye=K.call(ge,ge.__data__,xe,pe))&&("__data__"in ge&&(ye.__data__=ge.__data__),me[xe]=ye,schedule(me[xe],J,ne,xe,me,get(ge,ne)));return new Transition(ue,this._parents,J,ne)}function transition_selectAll(K){var J=this._name,ne=this._id;typeof K!="function"&&(K=selectorAll(K));for(var oe=this._groups,ce=oe.length,ue=[],Ae=[],pe=0;pe<ce;++pe)for(var ve=oe[pe],me=ve.length,ge,ye=0;ye<me;++ye)if(ge=ve[ye]){for(var xe=K.call(ge,ge.__data__,ye,ve),_e,$e=get(ge,ne),Ie=0,Fe=xe.length;Ie<Fe;++Ie)(_e=xe[Ie])&&schedule(_e,J,ne,Ie,xe,$e);ue.push(xe),Ae.push(ge)}return new Transition(ue,Ae,J,ne)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(K,J){var ne,oe,ce;return function(){var ue=styleValue(this,K),Ae=(this.style.removeProperty(K),styleValue(this,K));return ue===Ae?null:ue===ne&&Ae===oe?ce:ce=J(ne=ue,oe=Ae)}}function styleRemove(K){return function(){this.style.removeProperty(K)}}function styleConstant(K,J,ne){var oe,ce=ne+"",ue;return function(){var Ae=styleValue(this,K);return Ae===ce?null:Ae===oe?ue:ue=J(oe=Ae,ne)}}function styleFunction(K,J,ne){var oe,ce,ue;return function(){var Ae=styleValue(this,K),pe=ne(this),ve=pe+"";return pe==null&&(ve=pe=(this.style.removeProperty(K),styleValue(this,K))),Ae===ve?null:Ae===oe&&ve===ce?ue:(ce=ve,ue=J(oe=Ae,pe))}}function styleMaybeRemove(K,J){var ne,oe,ce,ue="style."+J,Ae="end."+ue,pe;return function(){var ve=set(this,K),me=ve.on,ge=ve.value[ue]==null?pe||(pe=styleRemove(J)):void 0;(me!==ne||ce!==ge)&&(oe=(ne=me).copy()).on(Ae,ce=ge),ve.on=oe}}function transition_style(K,J,ne){var oe=(K+="")=="transform"?interpolateTransformCss:interpolate;return J==null?this.styleTween(K,styleNull(K,oe)).on("end.style."+K,styleRemove(K)):typeof J=="function"?this.styleTween(K,styleFunction(K,oe,tweenValue(this,"style."+K,J))).each(styleMaybeRemove(this._id,K)):this.styleTween(K,styleConstant(K,oe,J),ne).on("end.style."+K,null)}function styleInterpolate(K,J,ne){return function(oe){this.style.setProperty(K,J.call(this,oe),ne)}}function styleTween(K,J,ne){var oe,ce;function ue(){var Ae=J.apply(this,arguments);return Ae!==ce&&(oe=(ce=Ae)&&styleInterpolate(K,Ae,ne)),oe}return ue._value=J,ue}function transition_styleTween(K,J,ne){var oe="style."+(K+="");if(arguments.length<2)return(oe=this.tween(oe))&&oe._value;if(J==null)return this.tween(oe,null);if(typeof J!="function")throw new Error;return this.tween(oe,styleTween(K,J,ne??""))}function textConstant(K){return function(){this.textContent=K}}function textFunction(K){return function(){var J=K(this);this.textContent=J??""}}function transition_text(K){return this.tween("text",typeof K=="function"?textFunction(tweenValue(this,"text",K)):textConstant(K==null?"":K+""))}function textInterpolate(K){return function(J){this.textContent=K.call(this,J)}}function textTween(K){var J,ne;function oe(){var ce=K.apply(this,arguments);return ce!==ne&&(J=(ne=ce)&&textInterpolate(ce)),J}return oe._value=K,oe}function transition_textTween(K){var J="text";if(arguments.length<1)return(J=this.tween(J))&&J._value;if(K==null)return this.tween(J,null);if(typeof K!="function")throw new Error;return this.tween(J,textTween(K))}function transition_transition(){for(var K=this._name,J=this._id,ne=newId(),oe=this._groups,ce=oe.length,ue=0;ue<ce;++ue)for(var Ae=oe[ue],pe=Ae.length,ve,me=0;me<pe;++me)if(ve=Ae[me]){var ge=get(ve,J);schedule(ve,K,ne,me,Ae,{time:ge.time+ge.delay+ge.duration,delay:0,duration:ge.duration,ease:ge.ease})}return new Transition(oe,this._parents,K,ne)}function transition_end(){var K,J,ne=this,oe=ne._id,ce=ne.size();return new Promise(function(ue,Ae){var pe={value:Ae},ve={value:function(){--ce===0&&ue()}};ne.each(function(){var me=set(this,oe),ge=me.on;ge!==K&&(J=(K=ge).copy(),J._.cancel.push(pe),J._.interrupt.push(pe),J._.end.push(ve)),me.on=J}),ce===0&&ue()})}var id=0;function Transition(K,J,ne,oe){this._groups=K,this._parents=J,this._name=ne,this._id=oe}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(K){return((K*=2)<=1?K*K*K:(K-=2)*K*K+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(K,J){for(var ne;!(ne=K.__transition)||!(ne=ne[J]);)if(!(K=K.parentNode))throw new Error(`transition ${J} not found`);return ne}function selection_transition(K){var J,ne;K instanceof Transition?(J=K._id,K=K._name):(J=newId(),(ne=defaultTiming).time=now(),K=K==null?null:K+"");for(var oe=this._groups,ce=oe.length,ue=0;ue<ce;++ue)for(var Ae=oe[ue],pe=Ae.length,ve,me=0;me<pe;++me)(ve=Ae[me])&&schedule(ve,K,J,me,Ae,ne||inherit(ve,J));return new Transition(oe,this._parents,K,J)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const constant=K=>()=>K;function ZoomEvent(K,{sourceEvent:J,target:ne,transform:oe,dispatch:ce}){Object.defineProperties(this,{type:{value:K,enumerable:!0,configurable:!0},sourceEvent:{value:J,enumerable:!0,configurable:!0},target:{value:ne,enumerable:!0,configurable:!0},transform:{value:oe,enumerable:!0,configurable:!0},_:{value:ce}})}function Transform(K,J,ne){this.k=K,this.x=J,this.y=ne}Transform.prototype={constructor:Transform,scale:function(K){return K===1?this:new Transform(this.k*K,this.x,this.y)},translate:function(K,J){return K===0&J===0?this:new Transform(this.k,this.x+this.k*K,this.y+this.k*J)},apply:function(K){return[K[0]*this.k+this.x,K[1]*this.k+this.y]},applyX:function(K){return K*this.k+this.x},applyY:function(K){return K*this.k+this.y},invert:function(K){return[(K[0]-this.x)/this.k,(K[1]-this.y)/this.k]},invertX:function(K){return(K-this.x)/this.k},invertY:function(K){return(K-this.y)/this.k},rescaleX:function(K){return K.copy().domain(K.range().map(this.invertX,this).map(K.invert,K))},rescaleY:function(K){return K.copy().domain(K.range().map(this.invertY,this).map(K.invert,K))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(K){K.stopImmediatePropagation()}function noevent(K){K.preventDefault(),K.stopImmediatePropagation()}function defaultFilter(K){return(!K.ctrlKey||K.type==="wheel")&&!K.button}function defaultExtent(){var K=this;return K instanceof SVGElement?(K=K.ownerSVGElement||K,K.hasAttribute("viewBox")?(K=K.viewBox.baseVal,[[K.x,K.y],[K.x+K.width,K.y+K.height]]):[[0,0],[K.width.baseVal.value,K.height.baseVal.value]]):[[0,0],[K.clientWidth,K.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(K){return-K.deltaY*(K.deltaMode===1?.05:K.deltaMode?1:.002)*(K.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(K,J,ne){var oe=K.invertX(J[0][0])-ne[0][0],ce=K.invertX(J[1][0])-ne[1][0],ue=K.invertY(J[0][1])-ne[0][1],Ae=K.invertY(J[1][1])-ne[1][1];return K.translate(ce>oe?(oe+ce)/2:Math.min(0,oe)||Math.max(0,ce),Ae>ue?(ue+Ae)/2:Math.min(0,ue)||Math.max(0,Ae))}function zoom(){var K=defaultFilter,J=defaultExtent,ne=defaultConstrain,oe=defaultWheelDelta,ce=defaultTouchable,ue=[0,1/0],Ae=[[-1/0,-1/0],[1/0,1/0]],pe=250,ve=interpolateZoom,me=dispatch("start","zoom","end"),ge,ye,xe,_e=500,$e=150,Ie=0,Fe=10;function ke(Be){Be.property("__zoom",defaultTransform).on("wheel.zoom",et,{passive:!1}).on("mousedown.zoom",tt).on("dblclick.zoom",st).filter(ce).on("touchstart.zoom",qe).on("touchmove.zoom",Se).on("touchend.zoom touchcancel.zoom",Re).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}ke.transform=function(Be,Ne,Ue,Ge){var Ye=Be.selection?Be.selection():Be;Ye.property("__zoom",defaultTransform),Be!==Ye?Xe(Be,Ne,Ue,Ge):Ye.interrupt().each(function(){Je(this,arguments).event(Ge).start().zoom(null,typeof Ne=="function"?Ne.apply(this,arguments):Ne).end()})},ke.scaleBy=function(Be,Ne,Ue,Ge){ke.scaleTo(Be,function(){var Ye=this.__zoom.k,Qe=typeof Ne=="function"?Ne.apply(this,arguments):Ne;return Ye*Qe},Ue,Ge)},ke.scaleTo=function(Be,Ne,Ue,Ge){ke.transform(Be,function(){var Ye=J.apply(this,arguments),Qe=this.__zoom,Te=Ue==null?ze(Ye):typeof Ue=="function"?Ue.apply(this,arguments):Ue,Ke=Qe.invert(Te),rt=typeof Ne=="function"?Ne.apply(this,arguments):Ne;return ne(We(je(Qe,rt),Te,Ke),Ye,Ae)},Ue,Ge)},ke.translateBy=function(Be,Ne,Ue,Ge){ke.transform(Be,function(){return ne(this.__zoom.translate(typeof Ne=="function"?Ne.apply(this,arguments):Ne,typeof Ue=="function"?Ue.apply(this,arguments):Ue),J.apply(this,arguments),Ae)},null,Ge)},ke.translateTo=function(Be,Ne,Ue,Ge,Ye){ke.transform(Be,function(){var Qe=J.apply(this,arguments),Te=this.__zoom,Ke=Ge==null?ze(Qe):typeof Ge=="function"?Ge.apply(this,arguments):Ge;return ne(identity.translate(Ke[0],Ke[1]).scale(Te.k).translate(typeof Ne=="function"?-Ne.apply(this,arguments):-Ne,typeof Ue=="function"?-Ue.apply(this,arguments):-Ue),Qe,Ae)},Ge,Ye)};function je(Be,Ne){return Ne=Math.max(ue[0],Math.min(ue[1],Ne)),Ne===Be.k?Be:new Transform(Ne,Be.x,Be.y)}function We(Be,Ne,Ue){var Ge=Ne[0]-Ue[0]*Be.k,Ye=Ne[1]-Ue[1]*Be.k;return Ge===Be.x&&Ye===Be.y?Be:new Transform(Be.k,Ge,Ye)}function ze(Be){return[(+Be[0][0]+ +Be[1][0])/2,(+Be[0][1]+ +Be[1][1])/2]}function Xe(Be,Ne,Ue,Ge){Be.on("start.zoom",function(){Je(this,arguments).event(Ge).start()}).on("interrupt.zoom end.zoom",function(){Je(this,arguments).event(Ge).end()}).tween("zoom",function(){var Ye=this,Qe=arguments,Te=Je(Ye,Qe).event(Ge),Ke=J.apply(Ye,Qe),rt=Ue==null?ze(Ke):typeof Ue=="function"?Ue.apply(Ye,Qe):Ue,it=Math.max(Ke[1][0]-Ke[0][0],Ke[1][1]-Ke[0][1]),at=Ye.__zoom,lt=typeof Ne=="function"?Ne.apply(Ye,Qe):Ne,ct=ve(at.invert(rt).concat(it/at.k),lt.invert(rt).concat(it/lt.k));return function(ot){if(ot===1)ot=lt;else{var ft=ct(ot),dt=it/ft[2];ot=new Transform(dt,rt[0]-ft[0]*dt,rt[1]-ft[1]*dt)}Te.zoom(null,ot)}})}function Je(Be,Ne,Ue){return!Ue&&Be.__zooming||new nt(Be,Ne)}function nt(Be,Ne){this.that=Be,this.args=Ne,this.active=0,this.sourceEvent=null,this.extent=J.apply(Be,Ne),this.taps=0}nt.prototype={event:function(Be){return Be&&(this.sourceEvent=Be),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Be,Ne){return this.mouse&&Be!=="mouse"&&(this.mouse[1]=Ne.invert(this.mouse[0])),this.touch0&&Be!=="touch"&&(this.touch0[1]=Ne.invert(this.touch0[0])),this.touch1&&Be!=="touch"&&(this.touch1[1]=Ne.invert(this.touch1[0])),this.that.__zoom=Ne,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Be){var Ne=select$3(this.that).datum();me.call(Be,this.that,new ZoomEvent(Be,{sourceEvent:this.sourceEvent,target:ke,type:Be,transform:this.that.__zoom,dispatch:me}),Ne)}};function et(Be,...Ne){if(!K.apply(this,arguments))return;var Ue=Je(this,Ne).event(Be),Ge=this.__zoom,Ye=Math.max(ue[0],Math.min(ue[1],Ge.k*Math.pow(2,oe.apply(this,arguments)))),Qe=pointer(Be);if(Ue.wheel)(Ue.mouse[0][0]!==Qe[0]||Ue.mouse[0][1]!==Qe[1])&&(Ue.mouse[1]=Ge.invert(Ue.mouse[0]=Qe)),clearTimeout(Ue.wheel);else{if(Ge.k===Ye)return;Ue.mouse=[Qe,Ge.invert(Qe)],interrupt(this),Ue.start()}noevent(Be),Ue.wheel=setTimeout(Te,$e),Ue.zoom("mouse",ne(We(je(Ge,Ye),Ue.mouse[0],Ue.mouse[1]),Ue.extent,Ae));function Te(){Ue.wheel=null,Ue.end()}}function tt(Be,...Ne){if(xe||!K.apply(this,arguments))return;var Ue=Be.currentTarget,Ge=Je(this,Ne,!0).event(Be),Ye=select$3(Be.view).on("mousemove.zoom",rt,!0).on("mouseup.zoom",it,!0),Qe=pointer(Be,Ue),Te=Be.clientX,Ke=Be.clientY;dragDisable(Be.view),nopropagation(Be),Ge.mouse=[Qe,this.__zoom.invert(Qe)],interrupt(this),Ge.start();function rt(at){if(noevent(at),!Ge.moved){var lt=at.clientX-Te,ct=at.clientY-Ke;Ge.moved=lt*lt+ct*ct>Ie}Ge.event(at).zoom("mouse",ne(We(Ge.that.__zoom,Ge.mouse[0]=pointer(at,Ue),Ge.mouse[1]),Ge.extent,Ae))}function it(at){Ye.on("mousemove.zoom mouseup.zoom",null),yesdrag(at.view,Ge.moved),noevent(at),Ge.event(at).end()}}function st(Be,...Ne){if(K.apply(this,arguments)){var Ue=this.__zoom,Ge=pointer(Be.changedTouches?Be.changedTouches[0]:Be,this),Ye=Ue.invert(Ge),Qe=Ue.k*(Be.shiftKey?.5:2),Te=ne(We(je(Ue,Qe),Ge,Ye),J.apply(this,Ne),Ae);noevent(Be),pe>0?select$3(this).transition().duration(pe).call(Xe,Te,Ge,Be):select$3(this).call(ke.transform,Te,Ge,Be)}}function qe(Be,...Ne){if(K.apply(this,arguments)){var Ue=Be.touches,Ge=Ue.length,Ye=Je(this,Ne,Be.changedTouches.length===Ge).event(Be),Qe,Te,Ke,rt;for(nopropagation(Be),Te=0;Te<Ge;++Te)Ke=Ue[Te],rt=pointer(Ke,this),rt=[rt,this.__zoom.invert(rt),Ke.identifier],Ye.touch0?!Ye.touch1&&Ye.touch0[2]!==rt[2]&&(Ye.touch1=rt,Ye.taps=0):(Ye.touch0=rt,Qe=!0,Ye.taps=1+!!ge);ge&&(ge=clearTimeout(ge)),Qe&&(Ye.taps<2&&(ye=rt[0],ge=setTimeout(function(){ge=null},_e)),interrupt(this),Ye.start())}}function Se(Be,...Ne){if(this.__zooming){var Ue=Je(this,Ne).event(Be),Ge=Be.changedTouches,Ye=Ge.length,Qe,Te,Ke,rt;for(noevent(Be),Qe=0;Qe<Ye;++Qe)Te=Ge[Qe],Ke=pointer(Te,this),Ue.touch0&&Ue.touch0[2]===Te.identifier?Ue.touch0[0]=Ke:Ue.touch1&&Ue.touch1[2]===Te.identifier&&(Ue.touch1[0]=Ke);if(Te=Ue.that.__zoom,Ue.touch1){var it=Ue.touch0[0],at=Ue.touch0[1],lt=Ue.touch1[0],ct=Ue.touch1[1],ot=(ot=lt[0]-it[0])*ot+(ot=lt[1]-it[1])*ot,ft=(ft=ct[0]-at[0])*ft+(ft=ct[1]-at[1])*ft;Te=je(Te,Math.sqrt(ot/ft)),Ke=[(it[0]+lt[0])/2,(it[1]+lt[1])/2],rt=[(at[0]+ct[0])/2,(at[1]+ct[1])/2]}else if(Ue.touch0)Ke=Ue.touch0[0],rt=Ue.touch0[1];else return;Ue.zoom("touch",ne(We(Te,Ke,rt),Ue.extent,Ae))}}function Re(Be,...Ne){if(this.__zooming){var Ue=Je(this,Ne).event(Be),Ge=Be.changedTouches,Ye=Ge.length,Qe,Te;for(nopropagation(Be),xe&&clearTimeout(xe),xe=setTimeout(function(){xe=null},_e),Qe=0;Qe<Ye;++Qe)Te=Ge[Qe],Ue.touch0&&Ue.touch0[2]===Te.identifier?delete Ue.touch0:Ue.touch1&&Ue.touch1[2]===Te.identifier&&delete Ue.touch1;if(Ue.touch1&&!Ue.touch0&&(Ue.touch0=Ue.touch1,delete Ue.touch1),Ue.touch0)Ue.touch0[1]=this.__zoom.invert(Ue.touch0[0]);else if(Ue.end(),Ue.taps===2&&(Te=pointer(Te,this),Math.hypot(ye[0]-Te[0],ye[1]-Te[1])<Fe)){var Ke=select$3(this).on("dblclick.zoom");Ke&&Ke.apply(this,arguments)}}}return ke.wheelDelta=function(Be){return arguments.length?(oe=typeof Be=="function"?Be:constant(+Be),ke):oe},ke.filter=function(Be){return arguments.length?(K=typeof Be=="function"?Be:constant(!!Be),ke):K},ke.touchable=function(Be){return arguments.length?(ce=typeof Be=="function"?Be:constant(!!Be),ke):ce},ke.extent=function(Be){return arguments.length?(J=typeof Be=="function"?Be:constant([[+Be[0][0],+Be[0][1]],[+Be[1][0],+Be[1][1]]]),ke):J},ke.scaleExtent=function(Be){return arguments.length?(ue[0]=+Be[0],ue[1]=+Be[1],ke):[ue[0],ue[1]]},ke.translateExtent=function(Be){return arguments.length?(Ae[0][0]=+Be[0][0],Ae[1][0]=+Be[1][0],Ae[0][1]=+Be[0][1],Ae[1][1]=+Be[1][1],ke):[[Ae[0][0],Ae[0][1]],[Ae[1][0],Ae[1][1]]]},ke.constrain=function(Be){return arguments.length?(ne=Be,ke):ne},ke.duration=function(Be){return arguments.length?(pe=+Be,ke):pe},ke.interpolate=function(Be){return arguments.length?(ve=Be,ke):ve},ke.on=function(){var Be=me.on.apply(me,arguments);return Be===me?ke:Be},ke.clickDistance=function(Be){return arguments.length?(Ie=(Be=+Be)*Be,ke):Math.sqrt(Ie)},ke.tapDistance=function(Be){return arguments.length?(Fe=+Be,ke):Fe},ke}const StoreContext=reactExports.createContext(null),Provider$1=StoreContext.Provider,errorMessages={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:K=>`Node type "${K}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:K=>`The old edge with id=${K} does not exist.`,error009:K=>`Marker type "${K}" doesn't exist.`,error008:(K,J)=>`Couldn't create edge for ${K?"target":"source"} handle id: "${K?J.targetHandle:J.sourceHandle}", edge id: ${J.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:K=>`Edge type "${K}" not found. Using fallback type "default".`,error012:K=>`Node with id "${K}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},zustandErrorMessage=errorMessages.error001();function useStore(K,J){const ne=reactExports.useContext(StoreContext);if(ne===null)throw new Error(zustandErrorMessage);return useStoreWithEqualityFn(ne,K,J)}const useStoreApi=()=>{const K=reactExports.useContext(StoreContext);if(K===null)throw new Error(zustandErrorMessage);return reactExports.useMemo(()=>({getState:K.getState,setState:K.setState,subscribe:K.subscribe,destroy:K.destroy}),[K])},selector$g=K=>K.userSelectionActive?"none":"all";function Panel({position:K,children:J,className:ne,style:oe,...ce}){const ue=useStore(selector$g),Ae=`${K}`.split("-");return React.createElement("div",{className:cc(["react-flow__panel",ne,...Ae]),style:{...oe,pointerEvents:ue},...ce},J)}function Attribution({proOptions:K,position:J="bottom-right"}){return K!=null&&K.hideAttribution?null:React.createElement(Panel,{position:J,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},React.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const EdgeText=({x:K,y:J,label:ne,labelStyle:oe={},labelShowBg:ce=!0,labelBgStyle:ue={},labelBgPadding:Ae=[2,4],labelBgBorderRadius:pe=2,children:ve,className:me,...ge})=>{const ye=reactExports.useRef(null),[xe,_e]=reactExports.useState({x:0,y:0,width:0,height:0}),$e=cc(["react-flow__edge-textwrapper",me]);return reactExports.useEffect(()=>{if(ye.current){const Ie=ye.current.getBBox();_e({x:Ie.x,y:Ie.y,width:Ie.width,height:Ie.height})}},[ne]),typeof ne>"u"||!ne?null:React.createElement("g",{transform:`translate(${K-xe.width/2} ${J-xe.height/2})`,className:$e,visibility:xe.width?"visible":"hidden",...ge},ce&&React.createElement("rect",{width:xe.width+2*Ae[0],x:-Ae[0],y:-Ae[1],height:xe.height+2*Ae[1],className:"react-flow__edge-textbg",style:ue,rx:pe,ry:pe}),React.createElement("text",{className:"react-flow__edge-text",y:xe.height/2,dy:"0.3em",ref:ye,style:oe},ne),ve)};var EdgeText$1=reactExports.memo(EdgeText);const getDimensions=K=>({width:K.offsetWidth,height:K.offsetHeight}),clamp=(K,J=0,ne=1)=>Math.min(Math.max(K,J),ne),clampPosition=(K={x:0,y:0},J)=>({x:clamp(K.x,J[0][0],J[1][0]),y:clamp(K.y,J[0][1],J[1][1])}),calcAutoPanVelocity=(K,J,ne)=>K<J?clamp(Math.abs(K-J),1,50)/50:K>ne?-clamp(Math.abs(K-ne),1,50)/50:0,calcAutoPan=(K,J)=>{const ne=calcAutoPanVelocity(K.x,35,J.width-35)*20,oe=calcAutoPanVelocity(K.y,35,J.height-35)*20;return[ne,oe]},getHostForElement=K=>{var J;return((J=K.getRootNode)==null?void 0:J.call(K))||(window==null?void 0:window.document)},getBoundsOfBoxes=(K,J)=>({x:Math.min(K.x,J.x),y:Math.min(K.y,J.y),x2:Math.max(K.x2,J.x2),y2:Math.max(K.y2,J.y2)}),rectToBox=({x:K,y:J,width:ne,height:oe})=>({x:K,y:J,x2:K+ne,y2:J+oe}),boxToRect=({x:K,y:J,x2:ne,y2:oe})=>({x:K,y:J,width:ne-K,height:oe-J}),nodeToRect=K=>({...K.positionAbsolute||{x:0,y:0},width:K.width||0,height:K.height||0}),getOverlappingArea=(K,J)=>{const ne=Math.max(0,Math.min(K.x+K.width,J.x+J.width)-Math.max(K.x,J.x)),oe=Math.max(0,Math.min(K.y+K.height,J.y+J.height)-Math.max(K.y,J.y));return Math.ceil(ne*oe)},isRectObject=K=>isNumeric(K.width)&&isNumeric(K.height)&&isNumeric(K.x)&&isNumeric(K.y),isNumeric=K=>!isNaN(K)&&isFinite(K),internalsSymbol=Symbol.for("internals"),elementSelectionKeys=["Enter"," ","Escape"],devWarn=(K,J)=>{},isReactKeyboardEvent=K=>"nativeEvent"in K;function isInputDOMNode(K){var ce,ue;const J=isReactKeyboardEvent(K)?K.nativeEvent:K,ne=((ue=(ce=J.composedPath)==null?void 0:ce.call(J))==null?void 0:ue[0])||K.target;return["INPUT","SELECT","TEXTAREA"].includes(ne==null?void 0:ne.nodeName)||(ne==null?void 0:ne.hasAttribute("contenteditable"))||!!(ne!=null&&ne.closest(".nokey"))}const isMouseEvent=K=>"clientX"in K,getEventPosition=(K,J)=>{var ue,Ae;const ne=isMouseEvent(K),oe=ne?K.clientX:(ue=K.touches)==null?void 0:ue[0].clientX,ce=ne?K.clientY:(Ae=K.touches)==null?void 0:Ae[0].clientY;return{x:oe-((J==null?void 0:J.left)??0),y:ce-((J==null?void 0:J.top)??0)}},isMacOs=()=>{var K;return typeof navigator<"u"&&((K=navigator==null?void 0:navigator.userAgent)==null?void 0:K.indexOf("Mac"))>=0},BaseEdge=({id:K,path:J,labelX:ne,labelY:oe,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:ve,labelBgBorderRadius:me,style:ge,markerEnd:ye,markerStart:xe,interactionWidth:_e=20})=>React.createElement(React.Fragment,null,React.createElement("path",{id:K,style:ge,d:J,fill:"none",className:"react-flow__edge-path",markerEnd:ye,markerStart:xe}),_e&&React.createElement("path",{d:J,fill:"none",strokeOpacity:0,strokeWidth:_e,className:"react-flow__edge-interaction"}),ce&&isNumeric(ne)&&isNumeric(oe)?React.createElement(EdgeText$1,{x:ne,y:oe,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:ve,labelBgBorderRadius:me}):null);BaseEdge.displayName="BaseEdge";function getMouseHandler$1(K,J,ne){return ne===void 0?ne:oe=>{const ce=J().edges.find(ue=>ue.id===K);ce&&ne(oe,{...ce})}}function getEdgeCenter({sourceX:K,sourceY:J,targetX:ne,targetY:oe}){const ce=Math.abs(ne-K)/2,ue=ne<K?ne+ce:ne-ce,Ae=Math.abs(oe-J)/2,pe=oe<J?oe+Ae:oe-Ae;return[ue,pe,ce,Ae]}function getBezierEdgeCenter({sourceX:K,sourceY:J,targetX:ne,targetY:oe,sourceControlX:ce,sourceControlY:ue,targetControlX:Ae,targetControlY:pe}){const ve=K*.125+ce*.375+Ae*.375+ne*.125,me=J*.125+ue*.375+pe*.375+oe*.125,ge=Math.abs(ve-K),ye=Math.abs(me-J);return[ve,me,ge,ye]}var ConnectionMode;(function(K){K.Strict="strict",K.Loose="loose"})(ConnectionMode||(ConnectionMode={}));var PanOnScrollMode;(function(K){K.Free="free",K.Vertical="vertical",K.Horizontal="horizontal"})(PanOnScrollMode||(PanOnScrollMode={}));var SelectionMode;(function(K){K.Partial="partial",K.Full="full"})(SelectionMode||(SelectionMode={}));var ConnectionLineType;(function(K){K.Bezier="default",K.Straight="straight",K.Step="step",K.SmoothStep="smoothstep",K.SimpleBezier="simplebezier"})(ConnectionLineType||(ConnectionLineType={}));var MarkerType;(function(K){K.Arrow="arrow",K.ArrowClosed="arrowclosed"})(MarkerType||(MarkerType={}));var Position;(function(K){K.Left="left",K.Top="top",K.Right="right",K.Bottom="bottom"})(Position||(Position={}));function getControl({pos:K,x1:J,y1:ne,x2:oe,y2:ce}){return K===Position.Left||K===Position.Right?[.5*(J+oe),ne]:[J,.5*(ne+ce)]}function getSimpleBezierPath({sourceX:K,sourceY:J,sourcePosition:ne=Position.Bottom,targetX:oe,targetY:ce,targetPosition:ue=Position.Top}){const[Ae,pe]=getControl({pos:ne,x1:K,y1:J,x2:oe,y2:ce}),[ve,me]=getControl({pos:ue,x1:oe,y1:ce,x2:K,y2:J}),[ge,ye,xe,_e]=getBezierEdgeCenter({sourceX:K,sourceY:J,targetX:oe,targetY:ce,sourceControlX:Ae,sourceControlY:pe,targetControlX:ve,targetControlY:me});return[`M${K},${J} C${Ae},${pe} ${ve},${me} ${oe},${ce}`,ge,ye,xe,_e]}const SimpleBezierEdge=reactExports.memo(({sourceX:K,sourceY:J,targetX:ne,targetY:oe,sourcePosition:ce=Position.Bottom,targetPosition:ue=Position.Top,label:Ae,labelStyle:pe,labelShowBg:ve,labelBgStyle:me,labelBgPadding:ge,labelBgBorderRadius:ye,style:xe,markerEnd:_e,markerStart:$e,interactionWidth:Ie})=>{const[Fe,ke,je]=getSimpleBezierPath({sourceX:K,sourceY:J,sourcePosition:ce,targetX:ne,targetY:oe,targetPosition:ue});return React.createElement(BaseEdge,{path:Fe,labelX:ke,labelY:je,label:Ae,labelStyle:pe,labelShowBg:ve,labelBgStyle:me,labelBgPadding:ge,labelBgBorderRadius:ye,style:xe,markerEnd:_e,markerStart:$e,interactionWidth:Ie})});SimpleBezierEdge.displayName="SimpleBezierEdge";const handleDirections={[Position.Left]:{x:-1,y:0},[Position.Right]:{x:1,y:0},[Position.Top]:{x:0,y:-1},[Position.Bottom]:{x:0,y:1}},getDirection=({source:K,sourcePosition:J=Position.Bottom,target:ne})=>J===Position.Left||J===Position.Right?K.x<ne.x?{x:1,y:0}:{x:-1,y:0}:K.y<ne.y?{x:0,y:1}:{x:0,y:-1},distance$1=(K,J)=>Math.sqrt(Math.pow(J.x-K.x,2)+Math.pow(J.y-K.y,2));function getPoints({source:K,sourcePosition:J=Position.Bottom,target:ne,targetPosition:oe=Position.Top,center:ce,offset:ue}){const Ae=handleDirections[J],pe=handleDirections[oe],ve={x:K.x+Ae.x*ue,y:K.y+Ae.y*ue},me={x:ne.x+pe.x*ue,y:ne.y+pe.y*ue},ge=getDirection({source:ve,sourcePosition:J,target:me}),ye=ge.x!==0?"x":"y",xe=ge[ye];let _e=[],$e,Ie;const Fe={x:0,y:0},ke={x:0,y:0},[je,We,ze,Xe]=getEdgeCenter({sourceX:K.x,sourceY:K.y,targetX:ne.x,targetY:ne.y});if(Ae[ye]*pe[ye]===-1){$e=ce.x??je,Ie=ce.y??We;const nt=[{x:$e,y:ve.y},{x:$e,y:me.y}],et=[{x:ve.x,y:Ie},{x:me.x,y:Ie}];Ae[ye]===xe?_e=ye==="x"?nt:et:_e=ye==="x"?et:nt}else{const nt=[{x:ve.x,y:me.y}],et=[{x:me.x,y:ve.y}];if(ye==="x"?_e=Ae.x===xe?et:nt:_e=Ae.y===xe?nt:et,J===oe){const Re=Math.abs(K[ye]-ne[ye]);if(Re<=ue){const Be=Math.min(ue-1,ue-Re);Ae[ye]===xe?Fe[ye]=(ve[ye]>K[ye]?-1:1)*Be:ke[ye]=(me[ye]>ne[ye]?-1:1)*Be}}if(J!==oe){const Re=ye==="x"?"y":"x",Be=Ae[ye]===pe[Re],Ne=ve[Re]>me[Re],Ue=ve[Re]<me[Re];(Ae[ye]===1&&(!Be&&Ne||Be&&Ue)||Ae[ye]!==1&&(!Be&&Ue||Be&&Ne))&&(_e=ye==="x"?nt:et)}const tt={x:ve.x+Fe.x,y:ve.y+Fe.y},st={x:me.x+ke.x,y:me.y+ke.y},qe=Math.max(Math.abs(tt.x-_e[0].x),Math.abs(st.x-_e[0].x)),Se=Math.max(Math.abs(tt.y-_e[0].y),Math.abs(st.y-_e[0].y));qe>=Se?($e=(tt.x+st.x)/2,Ie=_e[0].y):($e=_e[0].x,Ie=(tt.y+st.y)/2)}return[[K,{x:ve.x+Fe.x,y:ve.y+Fe.y},..._e,{x:me.x+ke.x,y:me.y+ke.y},ne],$e,Ie,ze,Xe]}function getBend(K,J,ne,oe){const ce=Math.min(distance$1(K,J)/2,distance$1(J,ne)/2,oe),{x:ue,y:Ae}=J;if(K.x===ue&&ue===ne.x||K.y===Ae&&Ae===ne.y)return`L${ue} ${Ae}`;if(K.y===Ae){const me=K.x<ne.x?-1:1,ge=K.y<ne.y?1:-1;return`L ${ue+ce*me},${Ae}Q ${ue},${Ae} ${ue},${Ae+ce*ge}`}const pe=K.x<ne.x?1:-1,ve=K.y<ne.y?-1:1;return`L ${ue},${Ae+ce*ve}Q ${ue},${Ae} ${ue+ce*pe},${Ae}`}function getSmoothStepPath({sourceX:K,sourceY:J,sourcePosition:ne=Position.Bottom,targetX:oe,targetY:ce,targetPosition:ue=Position.Top,borderRadius:Ae=5,centerX:pe,centerY:ve,offset:me=20}){const[ge,ye,xe,_e,$e]=getPoints({source:{x:K,y:J},sourcePosition:ne,target:{x:oe,y:ce},targetPosition:ue,center:{x:pe,y:ve},offset:me});return[ge.reduce((Fe,ke,je)=>{let We="";return je>0&&je<ge.length-1?We=getBend(ge[je-1],ke,ge[je+1],Ae):We=`${je===0?"M":"L"}${ke.x} ${ke.y}`,Fe+=We,Fe},""),ye,xe,_e,$e]}const SmoothStepEdge=reactExports.memo(({sourceX:K,sourceY:J,targetX:ne,targetY:oe,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:ve,labelBgBorderRadius:me,style:ge,sourcePosition:ye=Position.Bottom,targetPosition:xe=Position.Top,markerEnd:_e,markerStart:$e,pathOptions:Ie,interactionWidth:Fe})=>{const[ke,je,We]=getSmoothStepPath({sourceX:K,sourceY:J,sourcePosition:ye,targetX:ne,targetY:oe,targetPosition:xe,borderRadius:Ie==null?void 0:Ie.borderRadius,offset:Ie==null?void 0:Ie.offset});return React.createElement(BaseEdge,{path:ke,labelX:je,labelY:We,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:ve,labelBgBorderRadius:me,style:ge,markerEnd:_e,markerStart:$e,interactionWidth:Fe})});SmoothStepEdge.displayName="SmoothStepEdge";const StepEdge=reactExports.memo(K=>{var J;return React.createElement(SmoothStepEdge,{...K,pathOptions:reactExports.useMemo(()=>{var ne;return{borderRadius:0,offset:(ne=K.pathOptions)==null?void 0:ne.offset}},[(J=K.pathOptions)==null?void 0:J.offset])})});StepEdge.displayName="StepEdge";function getStraightPath({sourceX:K,sourceY:J,targetX:ne,targetY:oe}){const[ce,ue,Ae,pe]=getEdgeCenter({sourceX:K,sourceY:J,targetX:ne,targetY:oe});return[`M ${K},${J}L ${ne},${oe}`,ce,ue,Ae,pe]}const StraightEdge=reactExports.memo(({sourceX:K,sourceY:J,targetX:ne,targetY:oe,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:ve,labelBgBorderRadius:me,style:ge,markerEnd:ye,markerStart:xe,interactionWidth:_e})=>{const[$e,Ie,Fe]=getStraightPath({sourceX:K,sourceY:J,targetX:ne,targetY:oe});return React.createElement(BaseEdge,{path:$e,labelX:Ie,labelY:Fe,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:ve,labelBgBorderRadius:me,style:ge,markerEnd:ye,markerStart:xe,interactionWidth:_e})});StraightEdge.displayName="StraightEdge";function calculateControlOffset(K,J){return K>=0?.5*K:J*25*Math.sqrt(-K)}function getControlWithCurvature({pos:K,x1:J,y1:ne,x2:oe,y2:ce,c:ue}){switch(K){case Position.Left:return[J-calculateControlOffset(J-oe,ue),ne];case Position.Right:return[J+calculateControlOffset(oe-J,ue),ne];case Position.Top:return[J,ne-calculateControlOffset(ne-ce,ue)];case Position.Bottom:return[J,ne+calculateControlOffset(ce-ne,ue)]}}function getBezierPath({sourceX:K,sourceY:J,sourcePosition:ne=Position.Bottom,targetX:oe,targetY:ce,targetPosition:ue=Position.Top,curvature:Ae=.25}){const[pe,ve]=getControlWithCurvature({pos:ne,x1:K,y1:J,x2:oe,y2:ce,c:Ae}),[me,ge]=getControlWithCurvature({pos:ue,x1:oe,y1:ce,x2:K,y2:J,c:Ae}),[ye,xe,_e,$e]=getBezierEdgeCenter({sourceX:K,sourceY:J,targetX:oe,targetY:ce,sourceControlX:pe,sourceControlY:ve,targetControlX:me,targetControlY:ge});return[`M${K},${J} C${pe},${ve} ${me},${ge} ${oe},${ce}`,ye,xe,_e,$e]}const BezierEdge=reactExports.memo(({sourceX:K,sourceY:J,targetX:ne,targetY:oe,sourcePosition:ce=Position.Bottom,targetPosition:ue=Position.Top,label:Ae,labelStyle:pe,labelShowBg:ve,labelBgStyle:me,labelBgPadding:ge,labelBgBorderRadius:ye,style:xe,markerEnd:_e,markerStart:$e,pathOptions:Ie,interactionWidth:Fe})=>{const[ke,je,We]=getBezierPath({sourceX:K,sourceY:J,sourcePosition:ce,targetX:ne,targetY:oe,targetPosition:ue,curvature:Ie==null?void 0:Ie.curvature});return React.createElement(BaseEdge,{path:ke,labelX:je,labelY:We,label:Ae,labelStyle:pe,labelShowBg:ve,labelBgStyle:me,labelBgPadding:ge,labelBgBorderRadius:ye,style:xe,markerEnd:_e,markerStart:$e,interactionWidth:Fe})});BezierEdge.displayName="BezierEdge";const NodeIdContext=reactExports.createContext(null),Provider=NodeIdContext.Provider;NodeIdContext.Consumer;const useNodeId=()=>reactExports.useContext(NodeIdContext),isEdge$1=K=>"id"in K&&"source"in K&&"target"in K,getEdgeId=({source:K,sourceHandle:J,target:ne,targetHandle:oe})=>`reactflow__edge-${K}${J||""}-${ne}${oe||""}`,getMarkerId=(K,J)=>typeof K>"u"?"":typeof K=="string"?K:`${J?`${J}__`:""}${Object.keys(K).sort().map(oe=>`${oe}=${K[oe]}`).join("&")}`,connectionExists=(K,J)=>J.some(ne=>ne.source===K.source&&ne.target===K.target&&(ne.sourceHandle===K.sourceHandle||!ne.sourceHandle&&!K.sourceHandle)&&(ne.targetHandle===K.targetHandle||!ne.targetHandle&&!K.targetHandle)),addEdge=(K,J)=>{if(!K.source||!K.target)return J;let ne;return isEdge$1(K)?ne={...K}:ne={...K,id:getEdgeId(K)},connectionExists(ne,J)?J:J.concat(ne)},pointToRendererPoint=({x:K,y:J},[ne,oe,ce],ue,[Ae,pe])=>{const ve={x:(K-ne)/ce,y:(J-oe)/ce};return ue?{x:Ae*Math.round(ve.x/Ae),y:pe*Math.round(ve.y/pe)}:ve},rendererPointToPoint=({x:K,y:J},[ne,oe,ce])=>({x:K*ce+ne,y:J*ce+oe}),getNodePositionWithOrigin=(K,J=[0,0])=>{if(!K)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const ne=(K.width??0)*J[0],oe=(K.height??0)*J[1],ce={x:K.position.x-ne,y:K.position.y-oe};return{...ce,positionAbsolute:K.positionAbsolute?{x:K.positionAbsolute.x-ne,y:K.positionAbsolute.y-oe}:ce}},getNodesBounds=(K,J=[0,0])=>{if(K.length===0)return{x:0,y:0,width:0,height:0};const ne=K.reduce((oe,ce)=>{const{x:ue,y:Ae}=getNodePositionWithOrigin(ce,J).positionAbsolute;return getBoundsOfBoxes(oe,rectToBox({x:ue,y:Ae,width:ce.width||0,height:ce.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return boxToRect(ne)},getNodesInside=(K,J,[ne,oe,ce]=[0,0,1],ue=!1,Ae=!1,pe=[0,0])=>{const ve={x:(J.x-ne)/ce,y:(J.y-oe)/ce,width:J.width/ce,height:J.height/ce},me=[];return K.forEach(ge=>{const{width:ye,height:xe,selectable:_e=!0,hidden:$e=!1}=ge;if(Ae&&!_e||$e)return!1;const{positionAbsolute:Ie}=getNodePositionWithOrigin(ge,pe),Fe={x:Ie.x,y:Ie.y,width:ye||0,height:xe||0},ke=getOverlappingArea(ve,Fe),je=typeof ye>"u"||typeof xe>"u"||ye===null||xe===null,We=ue&&ke>0,ze=(ye||0)*(xe||0);(je||We||ke>=ze||ge.dragging)&&me.push(ge)}),me},getConnectedEdges=(K,J)=>{const ne=K.map(oe=>oe.id);return J.filter(oe=>ne.includes(oe.source)||ne.includes(oe.target))},getViewportForBounds=(K,J,ne,oe,ce,ue=.1)=>{const Ae=J/(K.width*(1+ue)),pe=ne/(K.height*(1+ue)),ve=Math.min(Ae,pe),me=clamp(ve,oe,ce),ge=K.x+K.width/2,ye=K.y+K.height/2,xe=J/2-ge*me,_e=ne/2-ye*me;return{x:xe,y:_e,zoom:me}},getD3Transition=(K,J=0)=>K.transition().duration(J);function getHandles(K,J,ne,oe){return(J[ne]||[]).reduce((ce,ue)=>{var Ae,pe;return`${K.id}-${ue.id}-${ne}`!==oe&&ce.push({id:ue.id||null,type:ne,nodeId:K.id,x:(((Ae=K.positionAbsolute)==null?void 0:Ae.x)??0)+ue.x+ue.width/2,y:(((pe=K.positionAbsolute)==null?void 0:pe.y)??0)+ue.y+ue.height/2}),ce},[])}function getClosestHandle(K,J,ne,oe,ce,ue){const{x:Ae,y:pe}=getEventPosition(K),me=J.elementsFromPoint(Ae,pe).find($e=>$e.classList.contains("react-flow__handle"));if(me){const $e=me.getAttribute("data-nodeid");if($e){const Ie=getHandleType(void 0,me),Fe=me.getAttribute("data-handleid"),ke=ue({nodeId:$e,id:Fe,type:Ie});if(ke){const je=ce.find(We=>We.nodeId===$e&&We.type===Ie&&We.id===Fe);return{handle:{id:Fe,type:Ie,nodeId:$e,x:(je==null?void 0:je.x)||ne.x,y:(je==null?void 0:je.y)||ne.y},validHandleResult:ke}}}}let ge=[],ye=1/0;if(ce.forEach($e=>{const Ie=Math.sqrt(($e.x-ne.x)**2+($e.y-ne.y)**2);if(Ie<=oe){const Fe=ue($e);Ie<=ye&&(Ie<ye?ge=[{handle:$e,validHandleResult:Fe}]:Ie===ye&&ge.push({handle:$e,validHandleResult:Fe}),ye=Ie)}}),!ge.length)return{handle:null,validHandleResult:defaultResult()};if(ge.length===1)return ge[0];const xe=ge.some(({validHandleResult:$e})=>$e.isValid),_e=ge.some(({handle:$e})=>$e.type==="target");return ge.find(({handle:$e,validHandleResult:Ie})=>_e?$e.type==="target":xe?Ie.isValid:!0)||ge[0]}const nullConnection={source:null,target:null,sourceHandle:null,targetHandle:null},defaultResult=()=>({handleDomNode:null,isValid:!1,connection:nullConnection,endHandle:null});function isValidHandle(K,J,ne,oe,ce,ue,Ae){const pe=ce==="target",ve=Ae.querySelector(`.react-flow__handle[data-id="${K==null?void 0:K.nodeId}-${K==null?void 0:K.id}-${K==null?void 0:K.type}"]`),me={...defaultResult(),handleDomNode:ve};if(ve){const ge=getHandleType(void 0,ve),ye=ve.getAttribute("data-nodeid"),xe=ve.getAttribute("data-handleid"),_e=ve.classList.contains("connectable"),$e=ve.classList.contains("connectableend"),Ie={source:pe?ye:ne,sourceHandle:pe?xe:oe,target:pe?ne:ye,targetHandle:pe?oe:xe};me.connection=Ie,_e&&$e&&(J===ConnectionMode.Strict?pe&&ge==="source"||!pe&&ge==="target":ye!==ne||xe!==oe)&&(me.endHandle={nodeId:ye,handleId:xe,type:ge},me.isValid=ue(Ie))}return me}function getHandleLookup({nodes:K,nodeId:J,handleId:ne,handleType:oe}){return K.reduce((ce,ue)=>{if(ue[internalsSymbol]){const{handleBounds:Ae}=ue[internalsSymbol];let pe=[],ve=[];Ae&&(pe=getHandles(ue,Ae,"source",`${J}-${ne}-${oe}`),ve=getHandles(ue,Ae,"target",`${J}-${ne}-${oe}`)),ce.push(...pe,...ve)}return ce},[])}function getHandleType(K,J){return K||(J!=null&&J.classList.contains("target")?"target":J!=null&&J.classList.contains("source")?"source":null)}function resetRecentHandle(K){K==null||K.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function getConnectionStatus(K,J){let ne=null;return J?ne="valid":K&&!J&&(ne="invalid"),ne}function handlePointerDown({event:K,handleId:J,nodeId:ne,onConnect:oe,isTarget:ce,getState:ue,setState:Ae,isValidConnection:pe,edgeUpdaterType:ve,onReconnectEnd:me}){const ge=getHostForElement(K.target),{connectionMode:ye,domNode:xe,autoPanOnConnect:_e,connectionRadius:$e,onConnectStart:Ie,panBy:Fe,getNodes:ke,cancelConnection:je}=ue();let We=0,ze;const{x:Xe,y:Je}=getEventPosition(K),nt=ge==null?void 0:ge.elementFromPoint(Xe,Je),et=getHandleType(ve,nt),tt=xe==null?void 0:xe.getBoundingClientRect();if(!tt||!et)return;let st,qe=getEventPosition(K,tt),Se=!1,Re=null,Be=!1,Ne=null;const Ue=getHandleLookup({nodes:ke(),nodeId:ne,handleId:J,handleType:et}),Ge=()=>{if(!_e)return;const[Te,Ke]=calcAutoPan(qe,tt);Fe({x:Te,y:Ke}),We=requestAnimationFrame(Ge)};Ae({connectionPosition:qe,connectionStatus:null,connectionNodeId:ne,connectionHandleId:J,connectionHandleType:et,connectionStartHandle:{nodeId:ne,handleId:J,type:et},connectionEndHandle:null}),Ie==null||Ie(K,{nodeId:ne,handleId:J,handleType:et});function Ye(Te){const{transform:Ke}=ue();qe=getEventPosition(Te,tt);const{handle:rt,validHandleResult:it}=getClosestHandle(Te,ge,pointToRendererPoint(qe,Ke,!1,[1,1]),$e,Ue,at=>isValidHandle(at,ye,ne,J,ce?"target":"source",pe,ge));if(ze=rt,Se||(Ge(),Se=!0),Ne=it.handleDomNode,Re=it.connection,Be=it.isValid,Ae({connectionPosition:ze&&Be?rendererPointToPoint({x:ze.x,y:ze.y},Ke):qe,connectionStatus:getConnectionStatus(!!ze,Be),connectionEndHandle:it.endHandle}),!ze&&!Be&&!Ne)return resetRecentHandle(st);Re.source!==Re.target&&Ne&&(resetRecentHandle(st),st=Ne,Ne.classList.add("connecting","react-flow__handle-connecting"),Ne.classList.toggle("valid",Be),Ne.classList.toggle("react-flow__handle-valid",Be))}function Qe(Te){var Ke,rt;(ze||Ne)&&Re&&Be&&(oe==null||oe(Re)),(rt=(Ke=ue()).onConnectEnd)==null||rt.call(Ke,Te),ve&&(me==null||me(Te)),resetRecentHandle(st),je(),cancelAnimationFrame(We),Se=!1,Be=!1,Re=null,Ne=null,ge.removeEventListener("mousemove",Ye),ge.removeEventListener("mouseup",Qe),ge.removeEventListener("touchmove",Ye),ge.removeEventListener("touchend",Qe)}ge.addEventListener("mousemove",Ye),ge.addEventListener("mouseup",Qe),ge.addEventListener("touchmove",Ye),ge.addEventListener("touchend",Qe)}const alwaysValid=()=>!0,selector$f=K=>({connectionStartHandle:K.connectionStartHandle,connectOnClick:K.connectOnClick,noPanClassName:K.noPanClassName}),connectingSelector=(K,J,ne)=>oe=>{const{connectionStartHandle:ce,connectionEndHandle:ue,connectionClickStartHandle:Ae}=oe;return{connecting:(ce==null?void 0:ce.nodeId)===K&&(ce==null?void 0:ce.handleId)===J&&(ce==null?void 0:ce.type)===ne||(ue==null?void 0:ue.nodeId)===K&&(ue==null?void 0:ue.handleId)===J&&(ue==null?void 0:ue.type)===ne,clickConnecting:(Ae==null?void 0:Ae.nodeId)===K&&(Ae==null?void 0:Ae.handleId)===J&&(Ae==null?void 0:Ae.type)===ne}},Handle=reactExports.forwardRef(({type:K="source",position:J=Position.Top,isValidConnection:ne,isConnectable:oe=!0,isConnectableStart:ce=!0,isConnectableEnd:ue=!0,id:Ae,onConnect:pe,children:ve,className:me,onMouseDown:ge,onTouchStart:ye,...xe},_e)=>{var tt,st;const $e=Ae||null,Ie=K==="target",Fe=useStoreApi(),ke=useNodeId(),{connectOnClick:je,noPanClassName:We}=useStore(selector$f,shallow$1),{connecting:ze,clickConnecting:Xe}=useStore(connectingSelector(ke,$e,K),shallow$1);ke||(st=(tt=Fe.getState()).onError)==null||st.call(tt,"010",errorMessages.error010());const Je=qe=>{const{defaultEdgeOptions:Se,onConnect:Re,hasDefaultEdges:Be}=Fe.getState(),Ne={...Se,...qe};if(Be){const{edges:Ue,setEdges:Ge}=Fe.getState();Ge(addEdge(Ne,Ue))}Re==null||Re(Ne),pe==null||pe(Ne)},nt=qe=>{if(!ke)return;const Se=isMouseEvent(qe);ce&&(Se&&qe.button===0||!Se)&&handlePointerDown({event:qe,handleId:$e,nodeId:ke,onConnect:Je,isTarget:Ie,getState:Fe.getState,setState:Fe.setState,isValidConnection:ne||Fe.getState().isValidConnection||alwaysValid}),Se?ge==null||ge(qe):ye==null||ye(qe)},et=qe=>{const{onClickConnectStart:Se,onClickConnectEnd:Re,connectionClickStartHandle:Be,connectionMode:Ne,isValidConnection:Ue}=Fe.getState();if(!ke||!Be&&!ce)return;if(!Be){Se==null||Se(qe,{nodeId:ke,handleId:$e,handleType:K}),Fe.setState({connectionClickStartHandle:{nodeId:ke,type:K,handleId:$e}});return}const Ge=getHostForElement(qe.target),Ye=ne||Ue||alwaysValid,{connection:Qe,isValid:Te}=isValidHandle({nodeId:ke,id:$e,type:K},Ne,Be.nodeId,Be.handleId||null,Be.type,Ye,Ge);Te&&Je(Qe),Re==null||Re(qe),Fe.setState({connectionClickStartHandle:null})};return React.createElement("div",{"data-handleid":$e,"data-nodeid":ke,"data-handlepos":J,"data-id":`${ke}-${$e}-${K}`,className:cc(["react-flow__handle",`react-flow__handle-${J}`,"nodrag",We,me,{source:!Ie,target:Ie,connectable:oe,connectablestart:ce,connectableend:ue,connecting:Xe,connectionindicator:oe&&(ce&&!ze||ue&&ze)}]),onMouseDown:nt,onTouchStart:nt,onClick:je?et:void 0,ref:_e,...xe},ve)});Handle.displayName="Handle";var Handle$1=reactExports.memo(Handle);const DefaultNode=({data:K,isConnectable:J,targetPosition:ne=Position.Top,sourcePosition:oe=Position.Bottom})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:ne,isConnectable:J}),K==null?void 0:K.label,React.createElement(Handle$1,{type:"source",position:oe,isConnectable:J}));DefaultNode.displayName="DefaultNode";var DefaultNode$1=reactExports.memo(DefaultNode);const InputNode=({data:K,isConnectable:J,sourcePosition:ne=Position.Bottom})=>React.createElement(React.Fragment,null,K==null?void 0:K.label,React.createElement(Handle$1,{type:"source",position:ne,isConnectable:J}));InputNode.displayName="InputNode";var InputNode$1=reactExports.memo(InputNode);const OutputNode=({data:K,isConnectable:J,targetPosition:ne=Position.Top})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:ne,isConnectable:J}),K==null?void 0:K.label);OutputNode.displayName="OutputNode";var OutputNode$1=reactExports.memo(OutputNode);const GroupNode=()=>null;GroupNode.displayName="GroupNode";const selector$e=K=>({selectedNodes:K.getNodes().filter(J=>J.selected),selectedEdges:K.edges.filter(J=>J.selected).map(J=>({...J}))}),selectId=K=>K.id;function areEqual(K,J){return shallow$1(K.selectedNodes.map(selectId),J.selectedNodes.map(selectId))&&shallow$1(K.selectedEdges.map(selectId),J.selectedEdges.map(selectId))}const SelectionListener=reactExports.memo(({onSelectionChange:K})=>{const J=useStoreApi(),{selectedNodes:ne,selectedEdges:oe}=useStore(selector$e,areEqual);return reactExports.useEffect(()=>{const ce={nodes:ne,edges:oe};K==null||K(ce),J.getState().onSelectionChange.forEach(ue=>ue(ce))},[ne,oe,K]),null});SelectionListener.displayName="SelectionListener";const changeSelector=K=>!!K.onSelectionChange;function Wrapper$1({onSelectionChange:K}){const J=useStore(changeSelector);return K||J?React.createElement(SelectionListener,{onSelectionChange:K}):null}const selector$d=K=>({setNodes:K.setNodes,setEdges:K.setEdges,setDefaultNodesAndEdges:K.setDefaultNodesAndEdges,setMinZoom:K.setMinZoom,setMaxZoom:K.setMaxZoom,setTranslateExtent:K.setTranslateExtent,setNodeExtent:K.setNodeExtent,reset:K.reset});function useStoreUpdater(K,J){reactExports.useEffect(()=>{typeof K<"u"&&J(K)},[K])}function useDirectStoreUpdater(K,J,ne){reactExports.useEffect(()=>{typeof J<"u"&&ne({[K]:J})},[J])}const StoreUpdater=({nodes:K,edges:J,defaultNodes:ne,defaultEdges:oe,onConnect:ce,onConnectStart:ue,onConnectEnd:Ae,onClickConnectStart:pe,onClickConnectEnd:ve,nodesDraggable:me,nodesConnectable:ge,nodesFocusable:ye,edgesFocusable:xe,edgesUpdatable:_e,elevateNodesOnSelect:$e,minZoom:Ie,maxZoom:Fe,nodeExtent:ke,onNodesChange:je,onEdgesChange:We,elementsSelectable:ze,connectionMode:Xe,snapGrid:Je,snapToGrid:nt,translateExtent:et,connectOnClick:tt,defaultEdgeOptions:st,fitView:qe,fitViewOptions:Se,onNodesDelete:Re,onEdgesDelete:Be,onNodeDrag:Ne,onNodeDragStart:Ue,onNodeDragStop:Ge,onSelectionDrag:Ye,onSelectionDragStart:Qe,onSelectionDragStop:Te,noPanClassName:Ke,nodeOrigin:rt,rfId:it,autoPanOnConnect:at,autoPanOnNodeDrag:lt,onError:ct,connectionRadius:ot,isValidConnection:ft,nodeDragThreshold:dt})=>{const{setNodes:mt,setEdges:kt,setDefaultNodesAndEdges:wt,setMinZoom:Et,setMaxZoom:Ot,setTranslateExtent:Rt,setNodeExtent:gt,reset:$t}=useStore(selector$d,shallow$1),pt=useStoreApi();return reactExports.useEffect(()=>{const vt=oe==null?void 0:oe.map(Mt=>({...Mt,...st}));return wt(ne,vt),()=>{$t()}},[]),useDirectStoreUpdater("defaultEdgeOptions",st,pt.setState),useDirectStoreUpdater("connectionMode",Xe,pt.setState),useDirectStoreUpdater("onConnect",ce,pt.setState),useDirectStoreUpdater("onConnectStart",ue,pt.setState),useDirectStoreUpdater("onConnectEnd",Ae,pt.setState),useDirectStoreUpdater("onClickConnectStart",pe,pt.setState),useDirectStoreUpdater("onClickConnectEnd",ve,pt.setState),useDirectStoreUpdater("nodesDraggable",me,pt.setState),useDirectStoreUpdater("nodesConnectable",ge,pt.setState),useDirectStoreUpdater("nodesFocusable",ye,pt.setState),useDirectStoreUpdater("edgesFocusable",xe,pt.setState),useDirectStoreUpdater("edgesUpdatable",_e,pt.setState),useDirectStoreUpdater("elementsSelectable",ze,pt.setState),useDirectStoreUpdater("elevateNodesOnSelect",$e,pt.setState),useDirectStoreUpdater("snapToGrid",nt,pt.setState),useDirectStoreUpdater("snapGrid",Je,pt.setState),useDirectStoreUpdater("onNodesChange",je,pt.setState),useDirectStoreUpdater("onEdgesChange",We,pt.setState),useDirectStoreUpdater("connectOnClick",tt,pt.setState),useDirectStoreUpdater("fitViewOnInit",qe,pt.setState),useDirectStoreUpdater("fitViewOnInitOptions",Se,pt.setState),useDirectStoreUpdater("onNodesDelete",Re,pt.setState),useDirectStoreUpdater("onEdgesDelete",Be,pt.setState),useDirectStoreUpdater("onNodeDrag",Ne,pt.setState),useDirectStoreUpdater("onNodeDragStart",Ue,pt.setState),useDirectStoreUpdater("onNodeDragStop",Ge,pt.setState),useDirectStoreUpdater("onSelectionDrag",Ye,pt.setState),useDirectStoreUpdater("onSelectionDragStart",Qe,pt.setState),useDirectStoreUpdater("onSelectionDragStop",Te,pt.setState),useDirectStoreUpdater("noPanClassName",Ke,pt.setState),useDirectStoreUpdater("nodeOrigin",rt,pt.setState),useDirectStoreUpdater("rfId",it,pt.setState),useDirectStoreUpdater("autoPanOnConnect",at,pt.setState),useDirectStoreUpdater("autoPanOnNodeDrag",lt,pt.setState),useDirectStoreUpdater("onError",ct,pt.setState),useDirectStoreUpdater("connectionRadius",ot,pt.setState),useDirectStoreUpdater("isValidConnection",ft,pt.setState),useDirectStoreUpdater("nodeDragThreshold",dt,pt.setState),useStoreUpdater(K,mt),useStoreUpdater(J,kt),useStoreUpdater(Ie,Et),useStoreUpdater(Fe,Ot),useStoreUpdater(et,Rt),useStoreUpdater(ke,gt),null},style={display:"none"},ariaLiveStyle={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ARIA_NODE_DESC_KEY="react-flow__node-desc",ARIA_EDGE_DESC_KEY="react-flow__edge-desc",ARIA_LIVE_MESSAGE="react-flow__aria-live",selector$c=K=>K.ariaLiveMessage;function AriaLiveMessage({rfId:K}){const J=useStore(selector$c);return React.createElement("div",{id:`${ARIA_LIVE_MESSAGE}-${K}`,"aria-live":"assertive","aria-atomic":"true",style:ariaLiveStyle},J)}function A11yDescriptions({rfId:K,disableKeyboardA11y:J}){return React.createElement(React.Fragment,null,React.createElement("div",{id:`${ARIA_NODE_DESC_KEY}-${K}`,style},"Press enter or space to select a node.",!J&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),React.createElement("div",{id:`${ARIA_EDGE_DESC_KEY}-${K}`,style},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!J&&React.createElement(AriaLiveMessage,{rfId:K}))}var useKeyPress=(K=null,J={actInsideInputWithModifier:!0})=>{const[ne,oe]=reactExports.useState(!1),ce=reactExports.useRef(!1),ue=reactExports.useRef(new Set([])),[Ae,pe]=reactExports.useMemo(()=>{if(K!==null){const me=(Array.isArray(K)?K:[K]).filter(ye=>typeof ye=="string").map(ye=>ye.split("+")),ge=me.reduce((ye,xe)=>ye.concat(...xe),[]);return[me,ge]}return[[],[]]},[K]);return reactExports.useEffect(()=>{const ve=typeof document<"u"?document:null,me=(J==null?void 0:J.target)||ve;if(K!==null){const ge=_e=>{if(ce.current=_e.ctrlKey||_e.metaKey||_e.shiftKey,(!ce.current||ce.current&&!J.actInsideInputWithModifier)&&isInputDOMNode(_e))return!1;const Ie=useKeyOrCode(_e.code,pe);ue.current.add(_e[Ie]),isMatchingKey(Ae,ue.current,!1)&&(_e.preventDefault(),oe(!0))},ye=_e=>{if((!ce.current||ce.current&&!J.actInsideInputWithModifier)&&isInputDOMNode(_e))return!1;const Ie=useKeyOrCode(_e.code,pe);isMatchingKey(Ae,ue.current,!0)?(oe(!1),ue.current.clear()):ue.current.delete(_e[Ie]),_e.key==="Meta"&&ue.current.clear(),ce.current=!1},xe=()=>{ue.current.clear(),oe(!1)};return me==null||me.addEventListener("keydown",ge),me==null||me.addEventListener("keyup",ye),window.addEventListener("blur",xe),()=>{me==null||me.removeEventListener("keydown",ge),me==null||me.removeEventListener("keyup",ye),window.removeEventListener("blur",xe)}}},[K,oe]),ne};function isMatchingKey(K,J,ne){return K.filter(oe=>ne||oe.length===J.size).some(oe=>oe.every(ce=>J.has(ce)))}function useKeyOrCode(K,J){return J.includes(K)?"code":"key"}function calculateXYZPosition(K,J,ne,oe){var pe,ve;const ce=K.parentNode||K.parentId;if(!ce)return ne;const ue=J.get(ce),Ae=getNodePositionWithOrigin(ue,oe);return calculateXYZPosition(ue,J,{x:(ne.x??0)+Ae.x,y:(ne.y??0)+Ae.y,z:(((pe=ue[internalsSymbol])==null?void 0:pe.z)??0)>(ne.z??0)?((ve=ue[internalsSymbol])==null?void 0:ve.z)??0:ne.z??0},oe)}function updateAbsoluteNodePositions(K,J,ne){K.forEach(oe=>{var ue;const ce=oe.parentNode||oe.parentId;if(ce&&!K.has(ce))throw new Error(`Parent node ${ce} not found`);if(ce||ne!=null&&ne[oe.id]){const{x:Ae,y:pe,z:ve}=calculateXYZPosition(oe,K,{...oe.position,z:((ue=oe[internalsSymbol])==null?void 0:ue.z)??0},J);oe.positionAbsolute={x:Ae,y:pe},oe[internalsSymbol].z=ve,ne!=null&&ne[oe.id]&&(oe[internalsSymbol].isParent=!0)}})}function createNodeInternals(K,J,ne,oe){const ce=new Map,ue={},Ae=oe?1e3:0;return K.forEach(pe=>{var _e;const ve=(isNumeric(pe.zIndex)?pe.zIndex:0)+(pe.selected?Ae:0),me=J.get(pe.id),ge={...pe,positionAbsolute:{x:pe.position.x,y:pe.position.y}},ye=pe.parentNode||pe.parentId;ye&&(ue[ye]=!0);const xe=(me==null?void 0:me.type)&&(me==null?void 0:me.type)!==pe.type;Object.defineProperty(ge,internalsSymbol,{enumerable:!1,value:{handleBounds:xe||(_e=me==null?void 0:me[internalsSymbol])==null?void 0:_e.handleBounds,z:ve}}),ce.set(pe.id,ge)}),updateAbsoluteNodePositions(ce,ne,ue),ce}function fitView(K,J={}){const{getNodes:ne,width:oe,height:ce,minZoom:ue,maxZoom:Ae,d3Zoom:pe,d3Selection:ve,fitViewOnInitDone:me,fitViewOnInit:ge,nodeOrigin:ye}=K(),xe=J.initial&&!me&&ge;if(pe&&ve&&(xe||!J.initial)){const $e=ne().filter(Fe=>{var je;const ke=J.includeHiddenNodes?Fe.width&&Fe.height:!Fe.hidden;return(je=J.nodes)!=null&&je.length?ke&&J.nodes.some(We=>We.id===Fe.id):ke}),Ie=$e.every(Fe=>Fe.width&&Fe.height);if($e.length>0&&Ie){const Fe=getNodesBounds($e,ye),{x:ke,y:je,zoom:We}=getViewportForBounds(Fe,oe,ce,J.minZoom??ue,J.maxZoom??Ae,J.padding??.1),ze=identity.translate(ke,je).scale(We);return typeof J.duration=="number"&&J.duration>0?pe.transform(getD3Transition(ve,J.duration),ze):pe.transform(ve,ze),!0}}return!1}function handleControlledNodeSelectionChange(K,J){return K.forEach(ne=>{const oe=J.get(ne.id);oe&&J.set(oe.id,{...oe,[internalsSymbol]:oe[internalsSymbol],selected:ne.selected})}),new Map(J)}function handleControlledEdgeSelectionChange(K,J){return J.map(ne=>{const oe=K.find(ce=>ce.id===ne.id);return oe&&(ne.selected=oe.selected),ne})}function updateNodesAndEdgesSelections({changedNodes:K,changedEdges:J,get:ne,set:oe}){const{nodeInternals:ce,edges:ue,onNodesChange:Ae,onEdgesChange:pe,hasDefaultNodes:ve,hasDefaultEdges:me}=ne();K!=null&&K.length&&(ve&&oe({nodeInternals:handleControlledNodeSelectionChange(K,ce)}),Ae==null||Ae(K)),J!=null&&J.length&&(me&&oe({edges:handleControlledEdgeSelectionChange(J,ue)}),pe==null||pe(J))}const noop$1=()=>{},initialViewportHelper={zoomIn:noop$1,zoomOut:noop$1,zoomTo:noop$1,getZoom:()=>1,setViewport:noop$1,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:noop$1,fitBounds:noop$1,project:K=>K,screenToFlowPosition:K=>K,flowToScreenPosition:K=>K,viewportInitialized:!1},selector$b=K=>({d3Zoom:K.d3Zoom,d3Selection:K.d3Selection}),useViewportHelper=()=>{const K=useStoreApi(),{d3Zoom:J,d3Selection:ne}=useStore(selector$b,shallow$1);return reactExports.useMemo(()=>ne&&J?{zoomIn:ce=>J.scaleBy(getD3Transition(ne,ce==null?void 0:ce.duration),1.2),zoomOut:ce=>J.scaleBy(getD3Transition(ne,ce==null?void 0:ce.duration),1/1.2),zoomTo:(ce,ue)=>J.scaleTo(getD3Transition(ne,ue==null?void 0:ue.duration),ce),getZoom:()=>K.getState().transform[2],setViewport:(ce,ue)=>{const[Ae,pe,ve]=K.getState().transform,me=identity.translate(ce.x??Ae,ce.y??pe).scale(ce.zoom??ve);J.transform(getD3Transition(ne,ue==null?void 0:ue.duration),me)},getViewport:()=>{const[ce,ue,Ae]=K.getState().transform;return{x:ce,y:ue,zoom:Ae}},fitView:ce=>fitView(K.getState,ce),setCenter:(ce,ue,Ae)=>{const{width:pe,height:ve,maxZoom:me}=K.getState(),ge=typeof(Ae==null?void 0:Ae.zoom)<"u"?Ae.zoom:me,ye=pe/2-ce*ge,xe=ve/2-ue*ge,_e=identity.translate(ye,xe).scale(ge);J.transform(getD3Transition(ne,Ae==null?void 0:Ae.duration),_e)},fitBounds:(ce,ue)=>{const{width:Ae,height:pe,minZoom:ve,maxZoom:me}=K.getState(),{x:ge,y:ye,zoom:xe}=getViewportForBounds(ce,Ae,pe,ve,me,(ue==null?void 0:ue.padding)??.1),_e=identity.translate(ge,ye).scale(xe);J.transform(getD3Transition(ne,ue==null?void 0:ue.duration),_e)},project:ce=>{const{transform:ue,snapToGrid:Ae,snapGrid:pe}=K.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),pointToRendererPoint(ce,ue,Ae,pe)},screenToFlowPosition:ce=>{const{transform:ue,snapToGrid:Ae,snapGrid:pe,domNode:ve}=K.getState();if(!ve)return ce;const{x:me,y:ge}=ve.getBoundingClientRect(),ye={x:ce.x-me,y:ce.y-ge};return pointToRendererPoint(ye,ue,Ae,pe)},flowToScreenPosition:ce=>{const{transform:ue,domNode:Ae}=K.getState();if(!Ae)return ce;const{x:pe,y:ve}=Ae.getBoundingClientRect(),me=rendererPointToPoint(ce,ue);return{x:me.x+pe,y:me.y+ve}},viewportInitialized:!0}:initialViewportHelper,[J,ne])};function useReactFlow(){const K=useViewportHelper(),J=useStoreApi(),ne=reactExports.useCallback(()=>J.getState().getNodes().map(Ie=>({...Ie})),[]),oe=reactExports.useCallback(Ie=>J.getState().nodeInternals.get(Ie),[]),ce=reactExports.useCallback(()=>{const{edges:Ie=[]}=J.getState();return Ie.map(Fe=>({...Fe}))},[]),ue=reactExports.useCallback(Ie=>{const{edges:Fe=[]}=J.getState();return Fe.find(ke=>ke.id===Ie)},[]),Ae=reactExports.useCallback(Ie=>{const{getNodes:Fe,setNodes:ke,hasDefaultNodes:je,onNodesChange:We}=J.getState(),ze=Fe(),Xe=typeof Ie=="function"?Ie(ze):Ie;if(je)ke(Xe);else if(We){const Je=Xe.length===0?ze.map(nt=>({type:"remove",id:nt.id})):Xe.map(nt=>({item:nt,type:"reset"}));We(Je)}},[]),pe=reactExports.useCallback(Ie=>{const{edges:Fe=[],setEdges:ke,hasDefaultEdges:je,onEdgesChange:We}=J.getState(),ze=typeof Ie=="function"?Ie(Fe):Ie;if(je)ke(ze);else if(We){const Xe=ze.length===0?Fe.map(Je=>({type:"remove",id:Je.id})):ze.map(Je=>({item:Je,type:"reset"}));We(Xe)}},[]),ve=reactExports.useCallback(Ie=>{const Fe=Array.isArray(Ie)?Ie:[Ie],{getNodes:ke,setNodes:je,hasDefaultNodes:We,onNodesChange:ze}=J.getState();if(We){const Je=[...ke(),...Fe];je(Je)}else if(ze){const Xe=Fe.map(Je=>({item:Je,type:"add"}));ze(Xe)}},[]),me=reactExports.useCallback(Ie=>{const Fe=Array.isArray(Ie)?Ie:[Ie],{edges:ke=[],setEdges:je,hasDefaultEdges:We,onEdgesChange:ze}=J.getState();if(We)je([...ke,...Fe]);else if(ze){const Xe=Fe.map(Je=>({item:Je,type:"add"}));ze(Xe)}},[]),ge=reactExports.useCallback(()=>{const{getNodes:Ie,edges:Fe=[],transform:ke}=J.getState(),[je,We,ze]=ke;return{nodes:Ie().map(Xe=>({...Xe})),edges:Fe.map(Xe=>({...Xe})),viewport:{x:je,y:We,zoom:ze}}},[]),ye=reactExports.useCallback(({nodes:Ie,edges:Fe})=>{const{nodeInternals:ke,getNodes:je,edges:We,hasDefaultNodes:ze,hasDefaultEdges:Xe,onNodesDelete:Je,onEdgesDelete:nt,onNodesChange:et,onEdgesChange:tt}=J.getState(),st=(Ie||[]).map(Ne=>Ne.id),qe=(Fe||[]).map(Ne=>Ne.id),Se=je().reduce((Ne,Ue)=>{const Ge=Ue.parentNode||Ue.parentId,Ye=!st.includes(Ue.id)&&Ge&&Ne.find(Te=>Te.id===Ge);return(typeof Ue.deletable=="boolean"?Ue.deletable:!0)&&(st.includes(Ue.id)||Ye)&&Ne.push(Ue),Ne},[]),Re=We.filter(Ne=>typeof Ne.deletable=="boolean"?Ne.deletable:!0),Be=Re.filter(Ne=>qe.includes(Ne.id));if(Se||Be){const Ne=getConnectedEdges(Se,Re),Ue=[...Be,...Ne],Ge=Ue.reduce((Ye,Qe)=>(Ye.includes(Qe.id)||Ye.push(Qe.id),Ye),[]);if((Xe||ze)&&(Xe&&J.setState({edges:We.filter(Ye=>!Ge.includes(Ye.id))}),ze&&(Se.forEach(Ye=>{ke.delete(Ye.id)}),J.setState({nodeInternals:new Map(ke)}))),Ge.length>0&&(nt==null||nt(Ue),tt&&tt(Ge.map(Ye=>({id:Ye,type:"remove"})))),Se.length>0&&(Je==null||Je(Se),et)){const Ye=Se.map(Qe=>({id:Qe.id,type:"remove"}));et(Ye)}}},[]),xe=reactExports.useCallback(Ie=>{const Fe=isRectObject(Ie),ke=Fe?null:J.getState().nodeInternals.get(Ie.id);return!Fe&&!ke?[null,null,Fe]:[Fe?Ie:nodeToRect(ke),ke,Fe]},[]),_e=reactExports.useCallback((Ie,Fe=!0,ke)=>{const[je,We,ze]=xe(Ie);return je?(ke||J.getState().getNodes()).filter(Xe=>{if(!ze&&(Xe.id===We.id||!Xe.positionAbsolute))return!1;const Je=nodeToRect(Xe),nt=getOverlappingArea(Je,je);return Fe&&nt>0||nt>=je.width*je.height}):[]},[]),$e=reactExports.useCallback((Ie,Fe,ke=!0)=>{const[je]=xe(Ie);if(!je)return!1;const We=getOverlappingArea(je,Fe);return ke&&We>0||We>=je.width*je.height},[]);return reactExports.useMemo(()=>({...K,getNodes:ne,getNode:oe,getEdges:ce,getEdge:ue,setNodes:Ae,setEdges:pe,addNodes:ve,addEdges:me,toObject:ge,deleteElements:ye,getIntersectingNodes:_e,isNodeIntersecting:$e}),[K,ne,oe,ce,ue,Ae,pe,ve,me,ge,ye,_e,$e])}const deleteKeyOptions={actInsideInputWithModifier:!1};var useGlobalKeyHandler=({deleteKeyCode:K,multiSelectionKeyCode:J})=>{const ne=useStoreApi(),{deleteElements:oe}=useReactFlow(),ce=useKeyPress(K,deleteKeyOptions),ue=useKeyPress(J);reactExports.useEffect(()=>{if(ce){const{edges:Ae,getNodes:pe}=ne.getState(),ve=pe().filter(ge=>ge.selected),me=Ae.filter(ge=>ge.selected);oe({nodes:ve,edges:me}),ne.setState({nodesSelectionActive:!1})}},[ce]),reactExports.useEffect(()=>{ne.setState({multiSelectionActive:ue})},[ue])};function useResizeHandler(K){const J=useStoreApi();reactExports.useEffect(()=>{let ne;const oe=()=>{var ue,Ae;if(!K.current)return;const ce=getDimensions(K.current);(ce.height===0||ce.width===0)&&((Ae=(ue=J.getState()).onError)==null||Ae.call(ue,"004",errorMessages.error004())),J.setState({width:ce.width||500,height:ce.height||500})};return oe(),window.addEventListener("resize",oe),K.current&&(ne=new ResizeObserver(()=>oe()),ne.observe(K.current)),()=>{window.removeEventListener("resize",oe),ne&&K.current&&ne.unobserve(K.current)}},[])}const containerStyle={position:"absolute",width:"100%",height:"100%",top:0,left:0},viewChanged=(K,J)=>K.x!==J.x||K.y!==J.y||K.zoom!==J.k,eventToFlowTransform=K=>({x:K.x,y:K.y,zoom:K.k}),isWrappedWithClass=(K,J)=>K.target.closest(`.${J}`),isRightClickPan=(K,J)=>J===2&&Array.isArray(K)&&K.includes(2),wheelDelta=K=>{const J=K.ctrlKey&&isMacOs()?10:1;return-K.deltaY*(K.deltaMode===1?.05:K.deltaMode?1:.002)*J},selector$a=K=>({d3Zoom:K.d3Zoom,d3Selection:K.d3Selection,d3ZoomHandler:K.d3ZoomHandler,userSelectionActive:K.userSelectionActive}),ZoomPane=({onMove:K,onMoveStart:J,onMoveEnd:ne,onPaneContextMenu:oe,zoomOnScroll:ce=!0,zoomOnPinch:ue=!0,panOnScroll:Ae=!1,panOnScrollSpeed:pe=.5,panOnScrollMode:ve=PanOnScrollMode.Free,zoomOnDoubleClick:me=!0,elementsSelectable:ge,panOnDrag:ye=!0,defaultViewport:xe,translateExtent:_e,minZoom:$e,maxZoom:Ie,zoomActivationKeyCode:Fe,preventScrolling:ke=!0,children:je,noWheelClassName:We,noPanClassName:ze})=>{const Xe=reactExports.useRef(),Je=useStoreApi(),nt=reactExports.useRef(!1),et=reactExports.useRef(!1),tt=reactExports.useRef(null),st=reactExports.useRef({x:0,y:0,zoom:0}),{d3Zoom:qe,d3Selection:Se,d3ZoomHandler:Re,userSelectionActive:Be}=useStore(selector$a,shallow$1),Ne=useKeyPress(Fe),Ue=reactExports.useRef(0),Ge=reactExports.useRef(!1),Ye=reactExports.useRef();return useResizeHandler(tt),reactExports.useEffect(()=>{if(tt.current){const Qe=tt.current.getBoundingClientRect(),Te=zoom().scaleExtent([$e,Ie]).translateExtent(_e),Ke=select$3(tt.current).call(Te),rt=identity.translate(xe.x,xe.y).scale(clamp(xe.zoom,$e,Ie)),it=[[0,0],[Qe.width,Qe.height]],at=Te.constrain()(rt,it,_e);Te.transform(Ke,at),Te.wheelDelta(wheelDelta),Je.setState({d3Zoom:Te,d3Selection:Ke,d3ZoomHandler:Ke.on("wheel.zoom"),transform:[at.x,at.y,at.k],domNode:tt.current.closest(".react-flow")})}},[]),reactExports.useEffect(()=>{Se&&qe&&(Ae&&!Ne&&!Be?Se.on("wheel.zoom",Qe=>{if(isWrappedWithClass(Qe,We))return!1;Qe.preventDefault(),Qe.stopImmediatePropagation();const Te=Se.property("__zoom").k||1;if(Qe.ctrlKey&&ue){const ft=pointer(Qe),dt=wheelDelta(Qe),mt=Te*Math.pow(2,dt);qe.scaleTo(Se,mt,ft,Qe);return}const Ke=Qe.deltaMode===1?20:1;let rt=ve===PanOnScrollMode.Vertical?0:Qe.deltaX*Ke,it=ve===PanOnScrollMode.Horizontal?0:Qe.deltaY*Ke;!isMacOs()&&Qe.shiftKey&&ve!==PanOnScrollMode.Vertical&&(rt=Qe.deltaY*Ke,it=0),qe.translateBy(Se,-(rt/Te)*pe,-(it/Te)*pe,{internal:!0});const at=eventToFlowTransform(Se.property("__zoom")),{onViewportChangeStart:lt,onViewportChange:ct,onViewportChangeEnd:ot}=Je.getState();clearTimeout(Ye.current),Ge.current||(Ge.current=!0,J==null||J(Qe,at),lt==null||lt(at)),Ge.current&&(K==null||K(Qe,at),ct==null||ct(at),Ye.current=setTimeout(()=>{ne==null||ne(Qe,at),ot==null||ot(at),Ge.current=!1},150))},{passive:!1}):typeof Re<"u"&&Se.on("wheel.zoom",function(Qe,Te){if(!ke&&Qe.type==="wheel"&&!Qe.ctrlKey||isWrappedWithClass(Qe,We))return null;Qe.preventDefault(),Re.call(this,Qe,Te)},{passive:!1}))},[Be,Ae,ve,Se,qe,Re,Ne,ue,ke,We,J,K,ne]),reactExports.useEffect(()=>{qe&&qe.on("start",Qe=>{var rt,it;if(!Qe.sourceEvent||Qe.sourceEvent.internal)return null;Ue.current=(rt=Qe.sourceEvent)==null?void 0:rt.button;const{onViewportChangeStart:Te}=Je.getState(),Ke=eventToFlowTransform(Qe.transform);nt.current=!0,st.current=Ke,((it=Qe.sourceEvent)==null?void 0:it.type)==="mousedown"&&Je.setState({paneDragging:!0}),Te==null||Te(Ke),J==null||J(Qe.sourceEvent,Ke)})},[qe,J]),reactExports.useEffect(()=>{qe&&(Be&&!nt.current?qe.on("zoom",null):Be||qe.on("zoom",Qe=>{var Ke;const{onViewportChange:Te}=Je.getState();if(Je.setState({transform:[Qe.transform.x,Qe.transform.y,Qe.transform.k]}),et.current=!!(oe&&isRightClickPan(ye,Ue.current??0)),(K||Te)&&!((Ke=Qe.sourceEvent)!=null&&Ke.internal)){const rt=eventToFlowTransform(Qe.transform);Te==null||Te(rt),K==null||K(Qe.sourceEvent,rt)}}))},[Be,qe,K,ye,oe]),reactExports.useEffect(()=>{qe&&qe.on("end",Qe=>{if(!Qe.sourceEvent||Qe.sourceEvent.internal)return null;const{onViewportChangeEnd:Te}=Je.getState();if(nt.current=!1,Je.setState({paneDragging:!1}),oe&&isRightClickPan(ye,Ue.current??0)&&!et.current&&oe(Qe.sourceEvent),et.current=!1,(ne||Te)&&viewChanged(st.current,Qe.transform)){const Ke=eventToFlowTransform(Qe.transform);st.current=Ke,clearTimeout(Xe.current),Xe.current=setTimeout(()=>{Te==null||Te(Ke),ne==null||ne(Qe.sourceEvent,Ke)},Ae?150:0)}})},[qe,Ae,ye,ne,oe]),reactExports.useEffect(()=>{qe&&qe.filter(Qe=>{const Te=Ne||ce,Ke=ue&&Qe.ctrlKey;if((ye===!0||Array.isArray(ye)&&ye.includes(1))&&Qe.button===1&&Qe.type==="mousedown"&&(isWrappedWithClass(Qe,"react-flow__node")||isWrappedWithClass(Qe,"react-flow__edge")))return!0;if(!ye&&!Te&&!Ae&&!me&&!ue||Be||!me&&Qe.type==="dblclick"||isWrappedWithClass(Qe,We)&&Qe.type==="wheel"||isWrappedWithClass(Qe,ze)&&(Qe.type!=="wheel"||Ae&&Qe.type==="wheel"&&!Ne)||!ue&&Qe.ctrlKey&&Qe.type==="wheel"||!Te&&!Ae&&!Ke&&Qe.type==="wheel"||!ye&&(Qe.type==="mousedown"||Qe.type==="touchstart")||Array.isArray(ye)&&!ye.includes(Qe.button)&&Qe.type==="mousedown")return!1;const rt=Array.isArray(ye)&&ye.includes(Qe.button)||!Qe.button||Qe.button<=1;return(!Qe.ctrlKey||Qe.type==="wheel")&&rt})},[Be,qe,ce,ue,Ae,me,ye,ge,Ne]),React.createElement("div",{className:"react-flow__renderer",ref:tt,style:containerStyle},je)},selector$9=K=>({userSelectionActive:K.userSelectionActive,userSelectionRect:K.userSelectionRect});function UserSelection(){const{userSelectionActive:K,userSelectionRect:J}=useStore(selector$9,shallow$1);return K&&J?React.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:J.width,height:J.height,transform:`translate(${J.x}px, ${J.y}px)`}}):null}function handleParentExpand(K,J){const ne=J.parentNode||J.parentId,oe=K.find(ce=>ce.id===ne);if(oe){const ce=J.position.x+J.width-oe.width,ue=J.position.y+J.height-oe.height;if(ce>0||ue>0||J.position.x<0||J.position.y<0){if(oe.style={...oe.style},oe.style.width=oe.style.width??oe.width,oe.style.height=oe.style.height??oe.height,ce>0&&(oe.style.width+=ce),ue>0&&(oe.style.height+=ue),J.position.x<0){const Ae=Math.abs(J.position.x);oe.position.x=oe.position.x-Ae,oe.style.width+=Ae,J.position.x=0}if(J.position.y<0){const Ae=Math.abs(J.position.y);oe.position.y=oe.position.y-Ae,oe.style.height+=Ae,J.position.y=0}oe.width=oe.style.width,oe.height=oe.style.height}}}function applyChanges(K,J){if(K.some(oe=>oe.type==="reset"))return K.filter(oe=>oe.type==="reset").map(oe=>oe.item);const ne=K.filter(oe=>oe.type==="add").map(oe=>oe.item);return J.reduce((oe,ce)=>{const ue=K.filter(pe=>pe.id===ce.id);if(ue.length===0)return oe.push(ce),oe;const Ae={...ce};for(const pe of ue)if(pe)switch(pe.type){case"select":{Ae.selected=pe.selected;break}case"position":{typeof pe.position<"u"&&(Ae.position=pe.position),typeof pe.positionAbsolute<"u"&&(Ae.positionAbsolute=pe.positionAbsolute),typeof pe.dragging<"u"&&(Ae.dragging=pe.dragging),Ae.expandParent&&handleParentExpand(oe,Ae);break}case"dimensions":{typeof pe.dimensions<"u"&&(Ae.width=pe.dimensions.width,Ae.height=pe.dimensions.height),typeof pe.updateStyle<"u"&&(Ae.style={...Ae.style||{},...pe.dimensions}),typeof pe.resizing=="boolean"&&(Ae.resizing=pe.resizing),Ae.expandParent&&handleParentExpand(oe,Ae);break}case"remove":return oe}return oe.push(Ae),oe},ne)}function applyNodeChanges(K,J){return applyChanges(K,J)}function applyEdgeChanges(K,J){return applyChanges(K,J)}const createSelectionChange=(K,J)=>({id:K,type:"select",selected:J});function getSelectionChanges(K,J){return K.reduce((ne,oe)=>{const ce=J.includes(oe.id);return!oe.selected&&ce?(oe.selected=!0,ne.push(createSelectionChange(oe.id,!0))):oe.selected&&!ce&&(oe.selected=!1,ne.push(createSelectionChange(oe.id,!1))),ne},[])}const wrapHandler=(K,J)=>ne=>{ne.target===J.current&&(K==null||K(ne))},selector$8=K=>({userSelectionActive:K.userSelectionActive,elementsSelectable:K.elementsSelectable,dragging:K.paneDragging}),Pane=reactExports.memo(({isSelecting:K,selectionMode:J=SelectionMode.Full,panOnDrag:ne,onSelectionStart:oe,onSelectionEnd:ce,onPaneClick:ue,onPaneContextMenu:Ae,onPaneScroll:pe,onPaneMouseEnter:ve,onPaneMouseMove:me,onPaneMouseLeave:ge,children:ye})=>{const xe=reactExports.useRef(null),_e=useStoreApi(),$e=reactExports.useRef(0),Ie=reactExports.useRef(0),Fe=reactExports.useRef(),{userSelectionActive:ke,elementsSelectable:je,dragging:We}=useStore(selector$8,shallow$1),ze=()=>{_e.setState({userSelectionActive:!1,userSelectionRect:null}),$e.current=0,Ie.current=0},Xe=Re=>{ue==null||ue(Re),_e.getState().resetSelectedElements(),_e.setState({nodesSelectionActive:!1})},Je=Re=>{if(Array.isArray(ne)&&(ne!=null&&ne.includes(2))){Re.preventDefault();return}Ae==null||Ae(Re)},nt=pe?Re=>pe(Re):void 0,et=Re=>{const{resetSelectedElements:Be,domNode:Ne}=_e.getState();if(Fe.current=Ne==null?void 0:Ne.getBoundingClientRect(),!je||!K||Re.button!==0||Re.target!==xe.current||!Fe.current)return;const{x:Ue,y:Ge}=getEventPosition(Re,Fe.current);Be(),_e.setState({userSelectionRect:{width:0,height:0,startX:Ue,startY:Ge,x:Ue,y:Ge}}),oe==null||oe(Re)},tt=Re=>{const{userSelectionRect:Be,nodeInternals:Ne,edges:Ue,transform:Ge,onNodesChange:Ye,onEdgesChange:Qe,nodeOrigin:Te,getNodes:Ke}=_e.getState();if(!K||!Fe.current||!Be)return;_e.setState({userSelectionActive:!0,nodesSelectionActive:!1});const rt=getEventPosition(Re,Fe.current),it=Be.startX??0,at=Be.startY??0,lt={...Be,x:rt.x<it?rt.x:it,y:rt.y<at?rt.y:at,width:Math.abs(rt.x-it),height:Math.abs(rt.y-at)},ct=Ke(),ot=getNodesInside(Ne,lt,Ge,J===SelectionMode.Partial,!0,Te),ft=getConnectedEdges(ot,Ue).map(mt=>mt.id),dt=ot.map(mt=>mt.id);if($e.current!==dt.length){$e.current=dt.length;const mt=getSelectionChanges(ct,dt);mt.length&&(Ye==null||Ye(mt))}if(Ie.current!==ft.length){Ie.current=ft.length;const mt=getSelectionChanges(Ue,ft);mt.length&&(Qe==null||Qe(mt))}_e.setState({userSelectionRect:lt})},st=Re=>{if(Re.button!==0)return;const{userSelectionRect:Be}=_e.getState();!ke&&Be&&Re.target===xe.current&&(Xe==null||Xe(Re)),_e.setState({nodesSelectionActive:$e.current>0}),ze(),ce==null||ce(Re)},qe=Re=>{ke&&(_e.setState({nodesSelectionActive:$e.current>0}),ce==null||ce(Re)),ze()},Se=je&&(K||ke);return React.createElement("div",{className:cc(["react-flow__pane",{dragging:We,selection:K}]),onClick:Se?void 0:wrapHandler(Xe,xe),onContextMenu:wrapHandler(Je,xe),onWheel:wrapHandler(nt,xe),onMouseEnter:Se?void 0:ve,onMouseDown:Se?et:void 0,onMouseMove:Se?tt:me,onMouseUp:Se?st:void 0,onMouseLeave:Se?qe:ge,ref:xe,style:containerStyle},ye,React.createElement(UserSelection,null))});Pane.displayName="Pane";function isParentSelected(K,J){const ne=K.parentNode||K.parentId;if(!ne)return!1;const oe=J.get(ne);return oe?oe.selected?!0:isParentSelected(oe,J):!1}function hasSelector(K,J,ne){let oe=K;do{if(oe!=null&&oe.matches(J))return!0;if(oe===ne.current)return!1;oe=oe.parentElement}while(oe);return!1}function getDragItems(K,J,ne,oe){return Array.from(K.values()).filter(ce=>(ce.selected||ce.id===oe)&&(!ce.parentNode||ce.parentId||!isParentSelected(ce,K))&&(ce.draggable||J&&typeof ce.draggable>"u")).map(ce=>{var ue,Ae;return{id:ce.id,position:ce.position||{x:0,y:0},positionAbsolute:ce.positionAbsolute||{x:0,y:0},distance:{x:ne.x-(((ue=ce.positionAbsolute)==null?void 0:ue.x)??0),y:ne.y-(((Ae=ce.positionAbsolute)==null?void 0:Ae.y)??0)},delta:{x:0,y:0},extent:ce.extent,parentNode:ce.parentNode||ce.parentId,parentId:ce.parentNode||ce.parentId,width:ce.width,height:ce.height,expandParent:ce.expandParent}})}function clampNodeExtent(K,J){return!J||J==="parent"?J:[J[0],[J[1][0]-(K.width||0),J[1][1]-(K.height||0)]]}function calcNextPosition(K,J,ne,oe,ce=[0,0],ue){const Ae=clampNodeExtent(K,K.extent||oe);let pe=Ae;const ve=K.parentNode||K.parentId;if(K.extent==="parent"&&!K.expandParent)if(ve&&K.width&&K.height){const ye=ne.get(ve),{x:xe,y:_e}=getNodePositionWithOrigin(ye,ce).positionAbsolute;pe=ye&&isNumeric(xe)&&isNumeric(_e)&&isNumeric(ye.width)&&isNumeric(ye.height)?[[xe+K.width*ce[0],_e+K.height*ce[1]],[xe+ye.width-K.width+K.width*ce[0],_e+ye.height-K.height+K.height*ce[1]]]:pe}else ue==null||ue("005",errorMessages.error005()),pe=Ae;else if(K.extent&&ve&&K.extent!=="parent"){const ye=ne.get(ve),{x:xe,y:_e}=getNodePositionWithOrigin(ye,ce).positionAbsolute;pe=[[K.extent[0][0]+xe,K.extent[0][1]+_e],[K.extent[1][0]+xe,K.extent[1][1]+_e]]}let me={x:0,y:0};if(ve){const ye=ne.get(ve);me=getNodePositionWithOrigin(ye,ce).positionAbsolute}const ge=pe&&pe!=="parent"?clampPosition(J,pe):J;return{position:{x:ge.x-me.x,y:ge.y-me.y},positionAbsolute:ge}}function getEventHandlerParams({nodeId:K,dragItems:J,nodeInternals:ne}){const oe=J.map(ce=>({...ne.get(ce.id),position:ce.position,positionAbsolute:ce.positionAbsolute}));return[K?oe.find(ce=>ce.id===K):oe[0],oe]}const getHandleBounds=(K,J,ne,oe)=>{const ce=J.querySelectorAll(K);if(!ce||!ce.length)return null;const ue=Array.from(ce),Ae=J.getBoundingClientRect(),pe={x:Ae.width*oe[0],y:Ae.height*oe[1]};return ue.map(ve=>{const me=ve.getBoundingClientRect();return{id:ve.getAttribute("data-handleid"),position:ve.getAttribute("data-handlepos"),x:(me.left-Ae.left-pe.x)/ne,y:(me.top-Ae.top-pe.y)/ne,...getDimensions(ve)}})};function getMouseHandler(K,J,ne){return ne===void 0?ne:oe=>{const ce=J().nodeInternals.get(K);ce&&ne(oe,{...ce})}}function handleNodeClick({id:K,store:J,unselect:ne=!1,nodeRef:oe}){const{addSelectedNodes:ce,unselectNodesAndEdges:ue,multiSelectionActive:Ae,nodeInternals:pe,onError:ve}=J.getState(),me=pe.get(K);if(!me){ve==null||ve("012",errorMessages.error012(K));return}J.setState({nodesSelectionActive:!1}),me.selected?(ne||me.selected&&Ae)&&(ue({nodes:[me],edges:[]}),requestAnimationFrame(()=>{var ge;return(ge=oe==null?void 0:oe.current)==null?void 0:ge.blur()})):ce([K])}function useGetPointerPosition(){const K=useStoreApi();return reactExports.useCallback(({sourceEvent:ne})=>{const{transform:oe,snapGrid:ce,snapToGrid:ue}=K.getState(),Ae=ne.touches?ne.touches[0].clientX:ne.clientX,pe=ne.touches?ne.touches[0].clientY:ne.clientY,ve={x:(Ae-oe[0])/oe[2],y:(pe-oe[1])/oe[2]};return{xSnapped:ue?ce[0]*Math.round(ve.x/ce[0]):ve.x,ySnapped:ue?ce[1]*Math.round(ve.y/ce[1]):ve.y,...ve}},[])}function wrapSelectionDragFunc(K){return(J,ne,oe)=>K==null?void 0:K(J,oe)}function useDrag({nodeRef:K,disabled:J=!1,noDragClassName:ne,handleSelector:oe,nodeId:ce,isSelectable:ue,selectNodesOnDrag:Ae}){const pe=useStoreApi(),[ve,me]=reactExports.useState(!1),ge=reactExports.useRef([]),ye=reactExports.useRef({x:null,y:null}),xe=reactExports.useRef(0),_e=reactExports.useRef(null),$e=reactExports.useRef({x:0,y:0}),Ie=reactExports.useRef(null),Fe=reactExports.useRef(!1),ke=reactExports.useRef(!1),je=reactExports.useRef(!1),We=useGetPointerPosition();return reactExports.useEffect(()=>{if(K!=null&&K.current){const ze=select$3(K.current),Xe=({x:et,y:tt})=>{const{nodeInternals:st,onNodeDrag:qe,onSelectionDrag:Se,updateNodePositions:Re,nodeExtent:Be,snapGrid:Ne,snapToGrid:Ue,nodeOrigin:Ge,onError:Ye}=pe.getState();ye.current={x:et,y:tt};let Qe=!1,Te={x:0,y:0,x2:0,y2:0};if(ge.current.length>1&&Be){const rt=getNodesBounds(ge.current,Ge);Te=rectToBox(rt)}if(ge.current=ge.current.map(rt=>{const it={x:et-rt.distance.x,y:tt-rt.distance.y};Ue&&(it.x=Ne[0]*Math.round(it.x/Ne[0]),it.y=Ne[1]*Math.round(it.y/Ne[1]));const at=[[Be[0][0],Be[0][1]],[Be[1][0],Be[1][1]]];ge.current.length>1&&Be&&!rt.extent&&(at[0][0]=rt.positionAbsolute.x-Te.x+Be[0][0],at[1][0]=rt.positionAbsolute.x+(rt.width??0)-Te.x2+Be[1][0],at[0][1]=rt.positionAbsolute.y-Te.y+Be[0][1],at[1][1]=rt.positionAbsolute.y+(rt.height??0)-Te.y2+Be[1][1]);const lt=calcNextPosition(rt,it,st,at,Ge,Ye);return Qe=Qe||rt.position.x!==lt.position.x||rt.position.y!==lt.position.y,rt.position=lt.position,rt.positionAbsolute=lt.positionAbsolute,rt}),!Qe)return;Re(ge.current,!0,!0),me(!0);const Ke=ce?qe:wrapSelectionDragFunc(Se);if(Ke&&Ie.current){const[rt,it]=getEventHandlerParams({nodeId:ce,dragItems:ge.current,nodeInternals:st});Ke(Ie.current,rt,it)}},Je=()=>{if(!_e.current)return;const[et,tt]=calcAutoPan($e.current,_e.current);if(et!==0||tt!==0){const{transform:st,panBy:qe}=pe.getState();ye.current.x=(ye.current.x??0)-et/st[2],ye.current.y=(ye.current.y??0)-tt/st[2],qe({x:et,y:tt})&&Xe(ye.current)}xe.current=requestAnimationFrame(Je)},nt=et=>{var Ge;const{nodeInternals:tt,multiSelectionActive:st,nodesDraggable:qe,unselectNodesAndEdges:Se,onNodeDragStart:Re,onSelectionDragStart:Be}=pe.getState();ke.current=!0;const Ne=ce?Re:wrapSelectionDragFunc(Be);(!Ae||!ue)&&!st&&ce&&((Ge=tt.get(ce))!=null&&Ge.selected||Se()),ce&&ue&&Ae&&handleNodeClick({id:ce,store:pe,nodeRef:K});const Ue=We(et);if(ye.current=Ue,ge.current=getDragItems(tt,qe,Ue,ce),Ne&&ge.current){const[Ye,Qe]=getEventHandlerParams({nodeId:ce,dragItems:ge.current,nodeInternals:tt});Ne(et.sourceEvent,Ye,Qe)}};if(J)ze.on(".drag",null);else{const et=drag().on("start",tt=>{const{domNode:st,nodeDragThreshold:qe}=pe.getState();qe===0&&nt(tt),je.current=!1;const Se=We(tt);ye.current=Se,_e.current=(st==null?void 0:st.getBoundingClientRect())||null,$e.current=getEventPosition(tt.sourceEvent,_e.current)}).on("drag",tt=>{var Re,Be;const st=We(tt),{autoPanOnNodeDrag:qe,nodeDragThreshold:Se}=pe.getState();if(tt.sourceEvent.type==="touchmove"&&tt.sourceEvent.touches.length>1&&(je.current=!0),!je.current){if(!Fe.current&&ke.current&&qe&&(Fe.current=!0,Je()),!ke.current){const Ne=st.xSnapped-(((Re=ye==null?void 0:ye.current)==null?void 0:Re.x)??0),Ue=st.ySnapped-(((Be=ye==null?void 0:ye.current)==null?void 0:Be.y)??0);Math.sqrt(Ne*Ne+Ue*Ue)>Se&&nt(tt)}(ye.current.x!==st.xSnapped||ye.current.y!==st.ySnapped)&&ge.current&&ke.current&&(Ie.current=tt.sourceEvent,$e.current=getEventPosition(tt.sourceEvent,_e.current),Xe(st))}}).on("end",tt=>{if(!(!ke.current||je.current)&&(me(!1),Fe.current=!1,ke.current=!1,cancelAnimationFrame(xe.current),ge.current)){const{updateNodePositions:st,nodeInternals:qe,onNodeDragStop:Se,onSelectionDragStop:Re}=pe.getState(),Be=ce?Se:wrapSelectionDragFunc(Re);if(st(ge.current,!1,!1),Be){const[Ne,Ue]=getEventHandlerParams({nodeId:ce,dragItems:ge.current,nodeInternals:qe});Be(tt.sourceEvent,Ne,Ue)}}}).filter(tt=>{const st=tt.target;return!tt.button&&(!ne||!hasSelector(st,`.${ne}`,K))&&(!oe||hasSelector(st,oe,K))});return ze.call(et),()=>{ze.on(".drag",null)}}}},[K,J,ne,oe,ue,pe,ce,Ae,We]),ve}function useUpdateNodePositions(){const K=useStoreApi();return reactExports.useCallback(ne=>{const{nodeInternals:oe,nodeExtent:ce,updateNodePositions:ue,getNodes:Ae,snapToGrid:pe,snapGrid:ve,onError:me,nodesDraggable:ge}=K.getState(),ye=Ae().filter(je=>je.selected&&(je.draggable||ge&&typeof je.draggable>"u")),xe=pe?ve[0]:5,_e=pe?ve[1]:5,$e=ne.isShiftPressed?4:1,Ie=ne.x*xe*$e,Fe=ne.y*_e*$e,ke=ye.map(je=>{if(je.positionAbsolute){const We={x:je.positionAbsolute.x+Ie,y:je.positionAbsolute.y+Fe};pe&&(We.x=ve[0]*Math.round(We.x/ve[0]),We.y=ve[1]*Math.round(We.y/ve[1]));const{positionAbsolute:ze,position:Xe}=calcNextPosition(je,We,oe,ce,void 0,me);je.position=Xe,je.positionAbsolute=ze}return je});ue(ke,!0,!1)},[])}const arrowKeyDiffs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wrapNode=K=>{const J=({id:ne,type:oe,data:ce,xPos:ue,yPos:Ae,xPosOrigin:pe,yPosOrigin:ve,selected:me,onClick:ge,onMouseEnter:ye,onMouseMove:xe,onMouseLeave:_e,onContextMenu:$e,onDoubleClick:Ie,style:Fe,className:ke,isDraggable:je,isSelectable:We,isConnectable:ze,isFocusable:Xe,selectNodesOnDrag:Je,sourcePosition:nt,targetPosition:et,hidden:tt,resizeObserver:st,dragHandle:qe,zIndex:Se,isParent:Re,noDragClassName:Be,noPanClassName:Ne,initialized:Ue,disableKeyboardA11y:Ge,ariaLabel:Ye,rfId:Qe,hasHandleBounds:Te})=>{const Ke=useStoreApi(),rt=reactExports.useRef(null),it=reactExports.useRef(null),at=reactExports.useRef(nt),lt=reactExports.useRef(et),ct=reactExports.useRef(oe),ot=We||je||ge||ye||xe||_e,ft=useUpdateNodePositions(),dt=getMouseHandler(ne,Ke.getState,ye),mt=getMouseHandler(ne,Ke.getState,xe),kt=getMouseHandler(ne,Ke.getState,_e),wt=getMouseHandler(ne,Ke.getState,$e),Et=getMouseHandler(ne,Ke.getState,Ie),Ot=$t=>{const{nodeDragThreshold:pt}=Ke.getState();if(We&&(!Je||!je||pt>0)&&handleNodeClick({id:ne,store:Ke,nodeRef:rt}),ge){const vt=Ke.getState().nodeInternals.get(ne);vt&&ge($t,{...vt})}},Rt=$t=>{if(!isInputDOMNode($t)&&!Ge)if(elementSelectionKeys.includes($t.key)&&We){const pt=$t.key==="Escape";handleNodeClick({id:ne,store:Ke,unselect:pt,nodeRef:rt})}else je&&me&&Object.prototype.hasOwnProperty.call(arrowKeyDiffs,$t.key)&&(Ke.setState({ariaLiveMessage:`Moved selected node ${$t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~ue}, y: ${~~Ae}`}),ft({x:arrowKeyDiffs[$t.key].x,y:arrowKeyDiffs[$t.key].y,isShiftPressed:$t.shiftKey}))};reactExports.useEffect(()=>()=>{it.current&&(st==null||st.unobserve(it.current),it.current=null)},[]),reactExports.useEffect(()=>{if(rt.current&&!tt){const $t=rt.current;(!Ue||!Te||it.current!==$t)&&(it.current&&(st==null||st.unobserve(it.current)),st==null||st.observe($t),it.current=$t)}},[tt,Ue,Te]),reactExports.useEffect(()=>{const $t=ct.current!==oe,pt=at.current!==nt,vt=lt.current!==et;rt.current&&($t||pt||vt)&&($t&&(ct.current=oe),pt&&(at.current=nt),vt&&(lt.current=et),Ke.getState().updateNodeDimensions([{id:ne,nodeElement:rt.current,forceUpdate:!0}]))},[ne,oe,nt,et]);const gt=useDrag({nodeRef:rt,disabled:tt||!je,noDragClassName:Be,handleSelector:qe,nodeId:ne,isSelectable:We,selectNodesOnDrag:Je});return tt?null:React.createElement("div",{className:cc(["react-flow__node",`react-flow__node-${oe}`,{[Ne]:je},ke,{selected:me,selectable:We,parent:Re,dragging:gt}]),ref:rt,style:{zIndex:Se,transform:`translate(${pe}px,${ve}px)`,pointerEvents:ot?"all":"none",visibility:Ue?"visible":"hidden",...Fe},"data-id":ne,"data-testid":`rf__node-${ne}`,onMouseEnter:dt,onMouseMove:mt,onMouseLeave:kt,onContextMenu:wt,onClick:Ot,onDoubleClick:Et,onKeyDown:Xe?Rt:void 0,tabIndex:Xe?0:void 0,role:Xe?"button":void 0,"aria-describedby":Ge?void 0:`${ARIA_NODE_DESC_KEY}-${Qe}`,"aria-label":Ye},React.createElement(Provider,{value:ne},React.createElement(K,{id:ne,data:ce,type:oe,xPos:ue,yPos:Ae,selected:me,isConnectable:ze,sourcePosition:nt,targetPosition:et,dragging:gt,dragHandle:qe,zIndex:Se})))};return J.displayName="NodeWrapper",reactExports.memo(J)};const selector$7=K=>{const J=K.getNodes().filter(ne=>ne.selected);return{...getNodesBounds(J,K.nodeOrigin),transformString:`translate(${K.transform[0]}px,${K.transform[1]}px) scale(${K.transform[2]})`,userSelectionActive:K.userSelectionActive}};function NodesSelection({onSelectionContextMenu:K,noPanClassName:J,disableKeyboardA11y:ne}){const oe=useStoreApi(),{width:ce,height:ue,x:Ae,y:pe,transformString:ve,userSelectionActive:me}=useStore(selector$7,shallow$1),ge=useUpdateNodePositions(),ye=reactExports.useRef(null);if(reactExports.useEffect(()=>{var $e;ne||($e=ye.current)==null||$e.focus({preventScroll:!0})},[ne]),useDrag({nodeRef:ye}),me||!ce||!ue)return null;const xe=K?$e=>{const Ie=oe.getState().getNodes().filter(Fe=>Fe.selected);K($e,Ie)}:void 0,_e=$e=>{Object.prototype.hasOwnProperty.call(arrowKeyDiffs,$e.key)&&ge({x:arrowKeyDiffs[$e.key].x,y:arrowKeyDiffs[$e.key].y,isShiftPressed:$e.shiftKey})};return React.createElement("div",{className:cc(["react-flow__nodesselection","react-flow__container",J]),style:{transform:ve}},React.createElement("div",{ref:ye,className:"react-flow__nodesselection-rect",onContextMenu:xe,tabIndex:ne?void 0:-1,onKeyDown:ne?void 0:_e,style:{width:ce,height:ue,top:pe,left:Ae}}))}var NodesSelection$1=reactExports.memo(NodesSelection);const selector$6=K=>K.nodesSelectionActive,FlowRenderer=({children:K,onPaneClick:J,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ce,onPaneContextMenu:ue,onPaneScroll:Ae,deleteKeyCode:pe,onMove:ve,onMoveStart:me,onMoveEnd:ge,selectionKeyCode:ye,selectionOnDrag:xe,selectionMode:_e,onSelectionStart:$e,onSelectionEnd:Ie,multiSelectionKeyCode:Fe,panActivationKeyCode:ke,zoomActivationKeyCode:je,elementsSelectable:We,zoomOnScroll:ze,zoomOnPinch:Xe,panOnScroll:Je,panOnScrollSpeed:nt,panOnScrollMode:et,zoomOnDoubleClick:tt,panOnDrag:st,defaultViewport:qe,translateExtent:Se,minZoom:Re,maxZoom:Be,preventScrolling:Ne,onSelectionContextMenu:Ue,noWheelClassName:Ge,noPanClassName:Ye,disableKeyboardA11y:Qe})=>{const Te=useStore(selector$6),Ke=useKeyPress(ye),rt=useKeyPress(ke),it=rt||st,at=rt||Je,lt=Ke||xe&&it!==!0;return useGlobalKeyHandler({deleteKeyCode:pe,multiSelectionKeyCode:Fe}),React.createElement(ZoomPane,{onMove:ve,onMoveStart:me,onMoveEnd:ge,onPaneContextMenu:ue,elementsSelectable:We,zoomOnScroll:ze,zoomOnPinch:Xe,panOnScroll:at,panOnScrollSpeed:nt,panOnScrollMode:et,zoomOnDoubleClick:tt,panOnDrag:!Ke&&it,defaultViewport:qe,translateExtent:Se,minZoom:Re,maxZoom:Be,zoomActivationKeyCode:je,preventScrolling:Ne,noWheelClassName:Ge,noPanClassName:Ye},React.createElement(Pane,{onSelectionStart:$e,onSelectionEnd:Ie,onPaneClick:J,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ce,onPaneContextMenu:ue,onPaneScroll:Ae,panOnDrag:it,isSelecting:!!lt,selectionMode:_e},K,Te&&React.createElement(NodesSelection$1,{onSelectionContextMenu:Ue,noPanClassName:Ye,disableKeyboardA11y:Qe})))};FlowRenderer.displayName="FlowRenderer";var FlowRenderer$1=reactExports.memo(FlowRenderer);function useVisibleNodes(K){return useStore(reactExports.useCallback(ne=>K?getNodesInside(ne.nodeInternals,{x:0,y:0,width:ne.width,height:ne.height},ne.transform,!0):ne.getNodes(),[K]))}function createNodeTypes(K){const J={input:wrapNode(K.input||InputNode$1),default:wrapNode(K.default||DefaultNode$1),output:wrapNode(K.output||OutputNode$1),group:wrapNode(K.group||GroupNode)},ne={},oe=Object.keys(K).filter(ce=>!["input","default","output","group"].includes(ce)).reduce((ce,ue)=>(ce[ue]=wrapNode(K[ue]||DefaultNode$1),ce),ne);return{...J,...oe}}const getPositionWithOrigin=({x:K,y:J,width:ne,height:oe,origin:ce})=>!ne||!oe?{x:K,y:J}:ce[0]<0||ce[1]<0||ce[0]>1||ce[1]>1?{x:K,y:J}:{x:K-ne*ce[0],y:J-oe*ce[1]},selector$5=K=>({nodesDraggable:K.nodesDraggable,nodesConnectable:K.nodesConnectable,nodesFocusable:K.nodesFocusable,elementsSelectable:K.elementsSelectable,updateNodeDimensions:K.updateNodeDimensions,onError:K.onError}),NodeRenderer=K=>{const{nodesDraggable:J,nodesConnectable:ne,nodesFocusable:oe,elementsSelectable:ce,updateNodeDimensions:ue,onError:Ae}=useStore(selector$5,shallow$1),pe=useVisibleNodes(K.onlyRenderVisibleElements),ve=reactExports.useRef(),me=reactExports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const ge=new ResizeObserver(ye=>{const xe=ye.map(_e=>({id:_e.target.getAttribute("data-id"),nodeElement:_e.target,forceUpdate:!0}));ue(xe)});return ve.current=ge,ge},[]);return reactExports.useEffect(()=>()=>{var ge;(ge=ve==null?void 0:ve.current)==null||ge.disconnect()},[]),React.createElement("div",{className:"react-flow__nodes",style:containerStyle},pe.map(ge=>{var Xe,Je,nt;let ye=ge.type||"default";K.nodeTypes[ye]||(Ae==null||Ae("003",errorMessages.error003(ye)),ye="default");const xe=K.nodeTypes[ye]||K.nodeTypes.default,_e=!!(ge.draggable||J&&typeof ge.draggable>"u"),$e=!!(ge.selectable||ce&&typeof ge.selectable>"u"),Ie=!!(ge.connectable||ne&&typeof ge.connectable>"u"),Fe=!!(ge.focusable||oe&&typeof ge.focusable>"u"),ke=K.nodeExtent?clampPosition(ge.positionAbsolute,K.nodeExtent):ge.positionAbsolute,je=(ke==null?void 0:ke.x)??0,We=(ke==null?void 0:ke.y)??0,ze=getPositionWithOrigin({x:je,y:We,width:ge.width??0,height:ge.height??0,origin:K.nodeOrigin});return React.createElement(xe,{key:ge.id,id:ge.id,className:ge.className,style:ge.style,type:ye,data:ge.data,sourcePosition:ge.sourcePosition||Position.Bottom,targetPosition:ge.targetPosition||Position.Top,hidden:ge.hidden,xPos:je,yPos:We,xPosOrigin:ze.x,yPosOrigin:ze.y,selectNodesOnDrag:K.selectNodesOnDrag,onClick:K.onNodeClick,onMouseEnter:K.onNodeMouseEnter,onMouseMove:K.onNodeMouseMove,onMouseLeave:K.onNodeMouseLeave,onContextMenu:K.onNodeContextMenu,onDoubleClick:K.onNodeDoubleClick,selected:!!ge.selected,isDraggable:_e,isSelectable:$e,isConnectable:Ie,isFocusable:Fe,resizeObserver:me,dragHandle:ge.dragHandle,zIndex:((Xe=ge[internalsSymbol])==null?void 0:Xe.z)??0,isParent:!!((Je=ge[internalsSymbol])!=null&&Je.isParent),noDragClassName:K.noDragClassName,noPanClassName:K.noPanClassName,initialized:!!ge.width&&!!ge.height,rfId:K.rfId,disableKeyboardA11y:K.disableKeyboardA11y,ariaLabel:ge.ariaLabel,hasHandleBounds:!!((nt=ge[internalsSymbol])!=null&&nt.handleBounds)})}))};NodeRenderer.displayName="NodeRenderer";var NodeRenderer$1=reactExports.memo(NodeRenderer);const shiftX=(K,J,ne)=>ne===Position.Left?K-J:ne===Position.Right?K+J:K,shiftY=(K,J,ne)=>ne===Position.Top?K-J:ne===Position.Bottom?K+J:K,EdgeUpdaterClassName="react-flow__edgeupdater",EdgeAnchor=({position:K,centerX:J,centerY:ne,radius:oe=10,onMouseDown:ce,onMouseEnter:ue,onMouseOut:Ae,type:pe})=>React.createElement("circle",{onMouseDown:ce,onMouseEnter:ue,onMouseOut:Ae,className:cc([EdgeUpdaterClassName,`${EdgeUpdaterClassName}-${pe}`]),cx:shiftX(J,oe,K),cy:shiftY(ne,oe,K),r:oe,stroke:"transparent",fill:"transparent"}),alwaysValidConnection=()=>!0;var wrapEdge=K=>{const J=({id:ne,className:oe,type:ce,data:ue,onClick:Ae,onEdgeDoubleClick:pe,selected:ve,animated:me,label:ge,labelStyle:ye,labelShowBg:xe,labelBgStyle:_e,labelBgPadding:$e,labelBgBorderRadius:Ie,style:Fe,source:ke,target:je,sourceX:We,sourceY:ze,targetX:Xe,targetY:Je,sourcePosition:nt,targetPosition:et,elementsSelectable:tt,hidden:st,sourceHandleId:qe,targetHandleId:Se,onContextMenu:Re,onMouseEnter:Be,onMouseMove:Ne,onMouseLeave:Ue,reconnectRadius:Ge,onReconnect:Ye,onReconnectStart:Qe,onReconnectEnd:Te,markerEnd:Ke,markerStart:rt,rfId:it,ariaLabel:at,isFocusable:lt,isReconnectable:ct,pathOptions:ot,interactionWidth:ft,disableKeyboardA11y:dt})=>{const mt=reactExports.useRef(null),[kt,wt]=reactExports.useState(!1),[Et,Ot]=reactExports.useState(!1),Rt=useStoreApi(),gt=reactExports.useMemo(()=>`url('#${getMarkerId(rt,it)}')`,[rt,it]),$t=reactExports.useMemo(()=>`url('#${getMarkerId(Ke,it)}')`,[Ke,it]);if(st)return null;const pt=Vt=>{var jt;const{edges:vr,addSelectedEdges:qt,unselectNodesAndEdges:er,multiSelectionActive:yr}=Rt.getState(),Lt=vr.find(fr=>fr.id===ne);Lt&&(tt&&(Rt.setState({nodesSelectionActive:!1}),Lt.selected&&yr?(er({nodes:[],edges:[Lt]}),(jt=mt.current)==null||jt.blur()):qt([ne])),Ae&&Ae(Vt,Lt))},vt=getMouseHandler$1(ne,Rt.getState,pe),Mt=getMouseHandler$1(ne,Rt.getState,Re),St=getMouseHandler$1(ne,Rt.getState,Be),_t=getMouseHandler$1(ne,Rt.getState,Ne),Xt=getMouseHandler$1(ne,Rt.getState,Ue),Tt=(Vt,vr)=>{if(Vt.button!==0)return;const{edges:qt,isValidConnection:er}=Rt.getState(),yr=vr?je:ke,Lt=(vr?Se:qe)||null,jt=vr?"target":"source",fr=er||alwaysValidConnection,Gt=vr,Jt=qt.find(nr=>nr.id===ne);Ot(!0),Qe==null||Qe(Vt,Jt,jt);const ar=nr=>{Ot(!1),Te==null||Te(nr,Jt,jt)};handlePointerDown({event:Vt,handleId:Lt,nodeId:yr,onConnect:nr=>Ye==null?void 0:Ye(Jt,nr),isTarget:Gt,getState:Rt.getState,setState:Rt.setState,isValidConnection:fr,edgeUpdaterType:jt,onReconnectEnd:ar})},Dt=Vt=>Tt(Vt,!0),Ht=Vt=>Tt(Vt,!1),Bt=()=>wt(!0),It=()=>wt(!1),zt=!tt&&!Ae,Pt=Vt=>{var vr;if(!dt&&elementSelectionKeys.includes(Vt.key)&&tt){const{unselectNodesAndEdges:qt,addSelectedEdges:er,edges:yr}=Rt.getState();Vt.key==="Escape"?((vr=mt.current)==null||vr.blur(),qt({edges:[yr.find(jt=>jt.id===ne)]})):er([ne])}};return React.createElement("g",{className:cc(["react-flow__edge",`react-flow__edge-${ce}`,oe,{selected:ve,animated:me,inactive:zt,updating:kt}]),onClick:pt,onDoubleClick:vt,onContextMenu:Mt,onMouseEnter:St,onMouseMove:_t,onMouseLeave:Xt,onKeyDown:lt?Pt:void 0,tabIndex:lt?0:void 0,role:lt?"button":"img","data-testid":`rf__edge-${ne}`,"aria-label":at===null?void 0:at||`Edge from ${ke} to ${je}`,"aria-describedby":lt?`${ARIA_EDGE_DESC_KEY}-${it}`:void 0,ref:mt},!Et&&React.createElement(K,{id:ne,source:ke,target:je,selected:ve,animated:me,label:ge,labelStyle:ye,labelShowBg:xe,labelBgStyle:_e,labelBgPadding:$e,labelBgBorderRadius:Ie,data:ue,style:Fe,sourceX:We,sourceY:ze,targetX:Xe,targetY:Je,sourcePosition:nt,targetPosition:et,sourceHandleId:qe,targetHandleId:Se,markerStart:gt,markerEnd:$t,pathOptions:ot,interactionWidth:ft}),ct&&React.createElement(React.Fragment,null,(ct==="source"||ct===!0)&&React.createElement(EdgeAnchor,{position:nt,centerX:We,centerY:ze,radius:Ge,onMouseDown:Dt,onMouseEnter:Bt,onMouseOut:It,type:"source"}),(ct==="target"||ct===!0)&&React.createElement(EdgeAnchor,{position:et,centerX:Xe,centerY:Je,radius:Ge,onMouseDown:Ht,onMouseEnter:Bt,onMouseOut:It,type:"target"})))};return J.displayName="EdgeWrapper",reactExports.memo(J)};function createEdgeTypes(K){const J={default:wrapEdge(K.default||BezierEdge),straight:wrapEdge(K.bezier||StraightEdge),step:wrapEdge(K.step||StepEdge),smoothstep:wrapEdge(K.step||SmoothStepEdge),simplebezier:wrapEdge(K.simplebezier||SimpleBezierEdge)},ne={},oe=Object.keys(K).filter(ce=>!["default","bezier"].includes(ce)).reduce((ce,ue)=>(ce[ue]=wrapEdge(K[ue]||BezierEdge),ce),ne);return{...J,...oe}}function getHandlePosition(K,J,ne=null){const oe=((ne==null?void 0:ne.x)||0)+J.x,ce=((ne==null?void 0:ne.y)||0)+J.y,ue=(ne==null?void 0:ne.width)||J.width,Ae=(ne==null?void 0:ne.height)||J.height;switch(K){case Position.Top:return{x:oe+ue/2,y:ce};case Position.Right:return{x:oe+ue,y:ce+Ae/2};case Position.Bottom:return{x:oe+ue/2,y:ce+Ae};case Position.Left:return{x:oe,y:ce+Ae/2}}}function getHandle(K,J){return K?K.length===1||!J?K[0]:J&&K.find(ne=>ne.id===J)||null:null}const getEdgePositions=(K,J,ne,oe,ce,ue)=>{const Ae=getHandlePosition(ne,K,J),pe=getHandlePosition(ue,oe,ce);return{sourceX:Ae.x,sourceY:Ae.y,targetX:pe.x,targetY:pe.y}};function isEdgeVisible({sourcePos:K,targetPos:J,sourceWidth:ne,sourceHeight:oe,targetWidth:ce,targetHeight:ue,width:Ae,height:pe,transform:ve}){const me={x:Math.min(K.x,J.x),y:Math.min(K.y,J.y),x2:Math.max(K.x+ne,J.x+ce),y2:Math.max(K.y+oe,J.y+ue)};me.x===me.x2&&(me.x2+=1),me.y===me.y2&&(me.y2+=1);const ge=rectToBox({x:(0-ve[0])/ve[2],y:(0-ve[1])/ve[2],width:Ae/ve[2],height:pe/ve[2]}),ye=Math.max(0,Math.min(ge.x2,me.x2)-Math.max(ge.x,me.x)),xe=Math.max(0,Math.min(ge.y2,me.y2)-Math.max(ge.y,me.y));return Math.ceil(ye*xe)>0}function getNodeData(K){var oe,ce,ue,Ae,pe;const J=((oe=K==null?void 0:K[internalsSymbol])==null?void 0:oe.handleBounds)||null,ne=J&&(K==null?void 0:K.width)&&(K==null?void 0:K.height)&&typeof((ce=K==null?void 0:K.positionAbsolute)==null?void 0:ce.x)<"u"&&typeof((ue=K==null?void 0:K.positionAbsolute)==null?void 0:ue.y)<"u";return[{x:((Ae=K==null?void 0:K.positionAbsolute)==null?void 0:Ae.x)||0,y:((pe=K==null?void 0:K.positionAbsolute)==null?void 0:pe.y)||0,width:(K==null?void 0:K.width)||0,height:(K==null?void 0:K.height)||0},J,!!ne]}const defaultEdgeTree=[{level:0,isMaxLevel:!0,edges:[]}];function groupEdgesByZLevel(K,J,ne=!1){let oe=-1;const ce=K.reduce((Ae,pe)=>{var ge,ye;const ve=isNumeric(pe.zIndex);let me=ve?pe.zIndex:0;if(ne){const xe=J.get(pe.target),_e=J.get(pe.source),$e=pe.selected||(xe==null?void 0:xe.selected)||(_e==null?void 0:_e.selected),Ie=Math.max(((ge=_e==null?void 0:_e[internalsSymbol])==null?void 0:ge.z)||0,((ye=xe==null?void 0:xe[internalsSymbol])==null?void 0:ye.z)||0,1e3);me=(ve?pe.zIndex:0)+($e?Ie:0)}return Ae[me]?Ae[me].push(pe):Ae[me]=[pe],oe=me>oe?me:oe,Ae},{}),ue=Object.entries(ce).map(([Ae,pe])=>{const ve=+Ae;return{edges:pe,level:ve,isMaxLevel:ve===oe}});return ue.length===0?defaultEdgeTree:ue}function useVisibleEdges(K,J,ne){const oe=useStore(reactExports.useCallback(ce=>K?ce.edges.filter(ue=>{const Ae=J.get(ue.source),pe=J.get(ue.target);return(Ae==null?void 0:Ae.width)&&(Ae==null?void 0:Ae.height)&&(pe==null?void 0:pe.width)&&(pe==null?void 0:pe.height)&&isEdgeVisible({sourcePos:Ae.positionAbsolute||{x:0,y:0},targetPos:pe.positionAbsolute||{x:0,y:0},sourceWidth:Ae.width,sourceHeight:Ae.height,targetWidth:pe.width,targetHeight:pe.height,width:ce.width,height:ce.height,transform:ce.transform})}):ce.edges,[K,J]));return groupEdgesByZLevel(oe,J,ne)}const ArrowSymbol=({color:K="none",strokeWidth:J=1})=>React.createElement("polyline",{style:{stroke:K,strokeWidth:J},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ArrowClosedSymbol=({color:K="none",strokeWidth:J=1})=>React.createElement("polyline",{style:{stroke:K,fill:K,strokeWidth:J},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),MarkerSymbols={[MarkerType.Arrow]:ArrowSymbol,[MarkerType.ArrowClosed]:ArrowClosedSymbol};function useMarkerSymbol(K){const J=useStoreApi();return reactExports.useMemo(()=>{var ce,ue;return Object.prototype.hasOwnProperty.call(MarkerSymbols,K)?MarkerSymbols[K]:((ue=(ce=J.getState()).onError)==null||ue.call(ce,"009",errorMessages.error009(K)),null)},[K])}const Marker=({id:K,type:J,color:ne,width:oe=12.5,height:ce=12.5,markerUnits:ue="strokeWidth",strokeWidth:Ae,orient:pe="auto-start-reverse"})=>{const ve=useMarkerSymbol(J);return ve?React.createElement("marker",{className:"react-flow__arrowhead",id:K,markerWidth:`${oe}`,markerHeight:`${ce}`,viewBox:"-10 -10 20 20",markerUnits:ue,orient:pe,refX:"0",refY:"0"},React.createElement(ve,{color:ne,strokeWidth:Ae})):null},markerSelector=({defaultColor:K,rfId:J})=>ne=>{const oe=[];return ne.edges.reduce((ce,ue)=>([ue.markerStart,ue.markerEnd].forEach(Ae=>{if(Ae&&typeof Ae=="object"){const pe=getMarkerId(Ae,J);oe.includes(pe)||(ce.push({id:pe,color:Ae.color||K,...Ae}),oe.push(pe))}}),ce),[]).sort((ce,ue)=>ce.id.localeCompare(ue.id))},MarkerDefinitions=({defaultColor:K,rfId:J})=>{const ne=useStore(reactExports.useCallback(markerSelector({defaultColor:K,rfId:J}),[K,J]),(oe,ce)=>!(oe.length!==ce.length||oe.some((ue,Ae)=>ue.id!==ce[Ae].id)));return React.createElement("defs",null,ne.map(oe=>React.createElement(Marker,{id:oe.id,key:oe.id,type:oe.type,color:oe.color,width:oe.width,height:oe.height,markerUnits:oe.markerUnits,strokeWidth:oe.strokeWidth,orient:oe.orient})))};MarkerDefinitions.displayName="MarkerDefinitions";var MarkerDefinitions$1=reactExports.memo(MarkerDefinitions);const selector$4=K=>({nodesConnectable:K.nodesConnectable,edgesFocusable:K.edgesFocusable,edgesUpdatable:K.edgesUpdatable,elementsSelectable:K.elementsSelectable,width:K.width,height:K.height,connectionMode:K.connectionMode,nodeInternals:K.nodeInternals,onError:K.onError}),EdgeRenderer=({defaultMarkerColor:K,onlyRenderVisibleElements:J,elevateEdgesOnSelect:ne,rfId:oe,edgeTypes:ce,noPanClassName:ue,onEdgeContextMenu:Ae,onEdgeMouseEnter:pe,onEdgeMouseMove:ve,onEdgeMouseLeave:me,onEdgeClick:ge,onEdgeDoubleClick:ye,onReconnect:xe,onReconnectStart:_e,onReconnectEnd:$e,reconnectRadius:Ie,children:Fe,disableKeyboardA11y:ke})=>{const{edgesFocusable:je,edgesUpdatable:We,elementsSelectable:ze,width:Xe,height:Je,connectionMode:nt,nodeInternals:et,onError:tt}=useStore(selector$4,shallow$1),st=useVisibleEdges(J,et,ne);return Xe?React.createElement(React.Fragment,null,st.map(({level:qe,edges:Se,isMaxLevel:Re})=>React.createElement("svg",{key:qe,style:{zIndex:qe},width:Xe,height:Je,className:"react-flow__edges react-flow__container"},Re&&React.createElement(MarkerDefinitions$1,{defaultColor:K,rfId:oe}),React.createElement("g",null,Se.map(Be=>{const[Ne,Ue,Ge]=getNodeData(et.get(Be.source)),[Ye,Qe,Te]=getNodeData(et.get(Be.target));if(!Ge||!Te)return null;let Ke=Be.type||"default";ce[Ke]||(tt==null||tt("011",errorMessages.error011(Ke)),Ke="default");const rt=ce[Ke]||ce.default,it=nt===ConnectionMode.Strict?Qe.target:(Qe.target??[]).concat(Qe.source??[]),at=getHandle(Ue.source,Be.sourceHandle),lt=getHandle(it,Be.targetHandle),ct=(at==null?void 0:at.position)||Position.Bottom,ot=(lt==null?void 0:lt.position)||Position.Top,ft=!!(Be.focusable||je&&typeof Be.focusable>"u"),dt=Be.reconnectable||Be.updatable,mt=typeof xe<"u"&&(dt||We&&typeof dt>"u");if(!at||!lt)return tt==null||tt("008",errorMessages.error008(at,Be)),null;const{sourceX:kt,sourceY:wt,targetX:Et,targetY:Ot}=getEdgePositions(Ne,at,ct,Ye,lt,ot);return React.createElement(rt,{key:Be.id,id:Be.id,className:cc([Be.className,ue]),type:Ke,data:Be.data,selected:!!Be.selected,animated:!!Be.animated,hidden:!!Be.hidden,label:Be.label,labelStyle:Be.labelStyle,labelShowBg:Be.labelShowBg,labelBgStyle:Be.labelBgStyle,labelBgPadding:Be.labelBgPadding,labelBgBorderRadius:Be.labelBgBorderRadius,style:Be.style,source:Be.source,target:Be.target,sourceHandleId:Be.sourceHandle,targetHandleId:Be.targetHandle,markerEnd:Be.markerEnd,markerStart:Be.markerStart,sourceX:kt,sourceY:wt,targetX:Et,targetY:Ot,sourcePosition:ct,targetPosition:ot,elementsSelectable:ze,onContextMenu:Ae,onMouseEnter:pe,onMouseMove:ve,onMouseLeave:me,onClick:ge,onEdgeDoubleClick:ye,onReconnect:xe,onReconnectStart:_e,onReconnectEnd:$e,reconnectRadius:Ie,rfId:oe,ariaLabel:Be.ariaLabel,isFocusable:ft,isReconnectable:mt,pathOptions:"pathOptions"in Be?Be.pathOptions:void 0,interactionWidth:Be.interactionWidth,disableKeyboardA11y:ke})})))),Fe):null};EdgeRenderer.displayName="EdgeRenderer";var EdgeRenderer$1=reactExports.memo(EdgeRenderer);const selector$3=K=>`translate(${K.transform[0]}px,${K.transform[1]}px) scale(${K.transform[2]})`;function Viewport({children:K}){const J=useStore(selector$3);return React.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:J}},K)}function useOnInitHandler(K){const J=useReactFlow(),ne=reactExports.useRef(!1);reactExports.useEffect(()=>{!ne.current&&J.viewportInitialized&&K&&(setTimeout(()=>K(J),1),ne.current=!0)},[K,J.viewportInitialized])}const oppositePosition={[Position.Left]:Position.Right,[Position.Right]:Position.Left,[Position.Top]:Position.Bottom,[Position.Bottom]:Position.Top},ConnectionLine=({nodeId:K,handleType:J,style:ne,type:oe=ConnectionLineType.Bezier,CustomComponent:ce,connectionStatus:ue})=>{var Je,nt,et;const{fromNode:Ae,handleId:pe,toX:ve,toY:me,connectionMode:ge}=useStore(reactExports.useCallback(tt=>({fromNode:tt.nodeInternals.get(K),handleId:tt.connectionHandleId,toX:(tt.connectionPosition.x-tt.transform[0])/tt.transform[2],toY:(tt.connectionPosition.y-tt.transform[1])/tt.transform[2],connectionMode:tt.connectionMode}),[K]),shallow$1),ye=(Je=Ae==null?void 0:Ae[internalsSymbol])==null?void 0:Je.handleBounds;let xe=ye==null?void 0:ye[J];if(ge===ConnectionMode.Loose&&(xe=xe||(ye==null?void 0:ye[J==="source"?"target":"source"])),!Ae||!xe)return null;const _e=pe?xe.find(tt=>tt.id===pe):xe[0],$e=_e?_e.x+_e.width/2:(Ae.width??0)/2,Ie=_e?_e.y+_e.height/2:Ae.height??0,Fe=(((nt=Ae.positionAbsolute)==null?void 0:nt.x)??0)+$e,ke=(((et=Ae.positionAbsolute)==null?void 0:et.y)??0)+Ie,je=_e==null?void 0:_e.position,We=je?oppositePosition[je]:null;if(!je||!We)return null;if(ce)return React.createElement(ce,{connectionLineType:oe,connectionLineStyle:ne,fromNode:Ae,fromHandle:_e,fromX:Fe,fromY:ke,toX:ve,toY:me,fromPosition:je,toPosition:We,connectionStatus:ue});let ze="";const Xe={sourceX:Fe,sourceY:ke,sourcePosition:je,targetX:ve,targetY:me,targetPosition:We};return oe===ConnectionLineType.Bezier?[ze]=getBezierPath(Xe):oe===ConnectionLineType.Step?[ze]=getSmoothStepPath({...Xe,borderRadius:0}):oe===ConnectionLineType.SmoothStep?[ze]=getSmoothStepPath(Xe):oe===ConnectionLineType.SimpleBezier?[ze]=getSimpleBezierPath(Xe):ze=`M${Fe},${ke} ${ve},${me}`,React.createElement("path",{d:ze,fill:"none",className:"react-flow__connection-path",style:ne})};ConnectionLine.displayName="ConnectionLine";const selector$2=K=>({nodeId:K.connectionNodeId,handleType:K.connectionHandleType,nodesConnectable:K.nodesConnectable,connectionStatus:K.connectionStatus,width:K.width,height:K.height});function ConnectionLineWrapper({containerStyle:K,style:J,type:ne,component:oe}){const{nodeId:ce,handleType:ue,nodesConnectable:Ae,width:pe,height:ve,connectionStatus:me}=useStore(selector$2,shallow$1);return!(ce&&ue&&pe&&Ae)?null:React.createElement("svg",{style:K,width:pe,height:ve,className:"react-flow__edges react-flow__connectionline react-flow__container"},React.createElement("g",{className:cc(["react-flow__connection",me])},React.createElement(ConnectionLine,{nodeId:ce,handleType:ue,style:J,type:ne,CustomComponent:oe,connectionStatus:me})))}function useNodeOrEdgeTypes(K,J){return reactExports.useRef(null),useStoreApi(),reactExports.useMemo(()=>J(K),[K])}const GraphView=({nodeTypes:K,edgeTypes:J,onMove:ne,onMoveStart:oe,onMoveEnd:ce,onInit:ue,onNodeClick:Ae,onEdgeClick:pe,onNodeDoubleClick:ve,onEdgeDoubleClick:me,onNodeMouseEnter:ge,onNodeMouseMove:ye,onNodeMouseLeave:xe,onNodeContextMenu:_e,onSelectionContextMenu:$e,onSelectionStart:Ie,onSelectionEnd:Fe,connectionLineType:ke,connectionLineStyle:je,connectionLineComponent:We,connectionLineContainerStyle:ze,selectionKeyCode:Xe,selectionOnDrag:Je,selectionMode:nt,multiSelectionKeyCode:et,panActivationKeyCode:tt,zoomActivationKeyCode:st,deleteKeyCode:qe,onlyRenderVisibleElements:Se,elementsSelectable:Re,selectNodesOnDrag:Be,defaultViewport:Ne,translateExtent:Ue,minZoom:Ge,maxZoom:Ye,preventScrolling:Qe,defaultMarkerColor:Te,zoomOnScroll:Ke,zoomOnPinch:rt,panOnScroll:it,panOnScrollSpeed:at,panOnScrollMode:lt,zoomOnDoubleClick:ct,panOnDrag:ot,onPaneClick:ft,onPaneMouseEnter:dt,onPaneMouseMove:mt,onPaneMouseLeave:kt,onPaneScroll:wt,onPaneContextMenu:Et,onEdgeContextMenu:Ot,onEdgeMouseEnter:Rt,onEdgeMouseMove:gt,onEdgeMouseLeave:$t,onReconnect:pt,onReconnectStart:vt,onReconnectEnd:Mt,reconnectRadius:St,noDragClassName:_t,noWheelClassName:Xt,noPanClassName:Tt,elevateEdgesOnSelect:Dt,disableKeyboardA11y:Ht,nodeOrigin:Bt,nodeExtent:It,rfId:zt})=>{const Pt=useNodeOrEdgeTypes(K,createNodeTypes),Vt=useNodeOrEdgeTypes(J,createEdgeTypes);return useOnInitHandler(ue),React.createElement(FlowRenderer$1,{onPaneClick:ft,onPaneMouseEnter:dt,onPaneMouseMove:mt,onPaneMouseLeave:kt,onPaneContextMenu:Et,onPaneScroll:wt,deleteKeyCode:qe,selectionKeyCode:Xe,selectionOnDrag:Je,selectionMode:nt,onSelectionStart:Ie,onSelectionEnd:Fe,multiSelectionKeyCode:et,panActivationKeyCode:tt,zoomActivationKeyCode:st,elementsSelectable:Re,onMove:ne,onMoveStart:oe,onMoveEnd:ce,zoomOnScroll:Ke,zoomOnPinch:rt,zoomOnDoubleClick:ct,panOnScroll:it,panOnScrollSpeed:at,panOnScrollMode:lt,panOnDrag:ot,defaultViewport:Ne,translateExtent:Ue,minZoom:Ge,maxZoom:Ye,onSelectionContextMenu:$e,preventScrolling:Qe,noDragClassName:_t,noWheelClassName:Xt,noPanClassName:Tt,disableKeyboardA11y:Ht},React.createElement(Viewport,null,React.createElement(EdgeRenderer$1,{edgeTypes:Vt,onEdgeClick:pe,onEdgeDoubleClick:me,onlyRenderVisibleElements:Se,onEdgeContextMenu:Ot,onEdgeMouseEnter:Rt,onEdgeMouseMove:gt,onEdgeMouseLeave:$t,onReconnect:pt,onReconnectStart:vt,onReconnectEnd:Mt,reconnectRadius:St,defaultMarkerColor:Te,noPanClassName:Tt,elevateEdgesOnSelect:!!Dt,disableKeyboardA11y:Ht,rfId:zt},React.createElement(ConnectionLineWrapper,{style:je,type:ke,component:We,containerStyle:ze})),React.createElement("div",{className:"react-flow__edgelabel-renderer"}),React.createElement(NodeRenderer$1,{nodeTypes:Pt,onNodeClick:Ae,onNodeDoubleClick:ve,onNodeMouseEnter:ge,onNodeMouseMove:ye,onNodeMouseLeave:xe,onNodeContextMenu:_e,selectNodesOnDrag:Be,onlyRenderVisibleElements:Se,noPanClassName:Tt,noDragClassName:_t,disableKeyboardA11y:Ht,nodeOrigin:Bt,nodeExtent:It,rfId:zt})))};GraphView.displayName="GraphView";var GraphView$1=reactExports.memo(GraphView);const infiniteExtent=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],initialState$1={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:infiniteExtent,nodeExtent:infiniteExtent,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ConnectionMode.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:devWarn,isValidConnection:void 0},createRFStore=()=>createWithEqualityFn((K,J)=>({...initialState$1,setNodes:ne=>{const{nodeInternals:oe,nodeOrigin:ce,elevateNodesOnSelect:ue}=J();K({nodeInternals:createNodeInternals(ne,oe,ce,ue)})},getNodes:()=>Array.from(J().nodeInternals.values()),setEdges:ne=>{const{defaultEdgeOptions:oe={}}=J();K({edges:ne.map(ce=>({...oe,...ce}))})},setDefaultNodesAndEdges:(ne,oe)=>{const ce=typeof ne<"u",ue=typeof oe<"u",Ae=ce?createNodeInternals(ne,new Map,J().nodeOrigin,J().elevateNodesOnSelect):new Map;K({nodeInternals:Ae,edges:ue?oe:[],hasDefaultNodes:ce,hasDefaultEdges:ue})},updateNodeDimensions:ne=>{const{onNodesChange:oe,nodeInternals:ce,fitViewOnInit:ue,fitViewOnInitDone:Ae,fitViewOnInitOptions:pe,domNode:ve,nodeOrigin:me}=J(),ge=ve==null?void 0:ve.querySelector(".react-flow__viewport");if(!ge)return;const ye=window.getComputedStyle(ge),{m22:xe}=new window.DOMMatrixReadOnly(ye.transform),_e=ne.reduce((Ie,Fe)=>{const ke=ce.get(Fe.id);if(ke!=null&&ke.hidden)ce.set(ke.id,{...ke,[internalsSymbol]:{...ke[internalsSymbol],handleBounds:void 0}});else if(ke){const je=getDimensions(Fe.nodeElement);!!(je.width&&je.height&&(ke.width!==je.width||ke.height!==je.height||Fe.forceUpdate))&&(ce.set(ke.id,{...ke,[internalsSymbol]:{...ke[internalsSymbol],handleBounds:{source:getHandleBounds(".source",Fe.nodeElement,xe,me),target:getHandleBounds(".target",Fe.nodeElement,xe,me)}},...je}),Ie.push({id:ke.id,type:"dimensions",dimensions:je}))}return Ie},[]);updateAbsoluteNodePositions(ce,me);const $e=Ae||ue&&!Ae&&fitView(J,{initial:!0,...pe});K({nodeInternals:new Map(ce),fitViewOnInitDone:$e}),(_e==null?void 0:_e.length)>0&&(oe==null||oe(_e))},updateNodePositions:(ne,oe=!0,ce=!1)=>{const{triggerNodeChanges:ue}=J(),Ae=ne.map(pe=>{const ve={id:pe.id,type:"position",dragging:ce};return oe&&(ve.positionAbsolute=pe.positionAbsolute,ve.position=pe.position),ve});ue(Ae)},triggerNodeChanges:ne=>{const{onNodesChange:oe,nodeInternals:ce,hasDefaultNodes:ue,nodeOrigin:Ae,getNodes:pe,elevateNodesOnSelect:ve}=J();if(ne!=null&&ne.length){if(ue){const me=applyNodeChanges(ne,pe()),ge=createNodeInternals(me,ce,Ae,ve);K({nodeInternals:ge})}oe==null||oe(ne)}},addSelectedNodes:ne=>{const{multiSelectionActive:oe,edges:ce,getNodes:ue}=J();let Ae,pe=null;oe?Ae=ne.map(ve=>createSelectionChange(ve,!0)):(Ae=getSelectionChanges(ue(),ne),pe=getSelectionChanges(ce,[])),updateNodesAndEdgesSelections({changedNodes:Ae,changedEdges:pe,get:J,set:K})},addSelectedEdges:ne=>{const{multiSelectionActive:oe,edges:ce,getNodes:ue}=J();let Ae,pe=null;oe?Ae=ne.map(ve=>createSelectionChange(ve,!0)):(Ae=getSelectionChanges(ce,ne),pe=getSelectionChanges(ue(),[])),updateNodesAndEdgesSelections({changedNodes:pe,changedEdges:Ae,get:J,set:K})},unselectNodesAndEdges:({nodes:ne,edges:oe}={})=>{const{edges:ce,getNodes:ue}=J(),Ae=ne||ue(),pe=oe||ce,ve=Ae.map(ge=>(ge.selected=!1,createSelectionChange(ge.id,!1))),me=pe.map(ge=>createSelectionChange(ge.id,!1));updateNodesAndEdgesSelections({changedNodes:ve,changedEdges:me,get:J,set:K})},setMinZoom:ne=>{const{d3Zoom:oe,maxZoom:ce}=J();oe==null||oe.scaleExtent([ne,ce]),K({minZoom:ne})},setMaxZoom:ne=>{const{d3Zoom:oe,minZoom:ce}=J();oe==null||oe.scaleExtent([ce,ne]),K({maxZoom:ne})},setTranslateExtent:ne=>{var oe;(oe=J().d3Zoom)==null||oe.translateExtent(ne),K({translateExtent:ne})},resetSelectedElements:()=>{const{edges:ne,getNodes:oe}=J(),ue=oe().filter(pe=>pe.selected).map(pe=>createSelectionChange(pe.id,!1)),Ae=ne.filter(pe=>pe.selected).map(pe=>createSelectionChange(pe.id,!1));updateNodesAndEdgesSelections({changedNodes:ue,changedEdges:Ae,get:J,set:K})},setNodeExtent:ne=>{const{nodeInternals:oe}=J();oe.forEach(ce=>{ce.positionAbsolute=clampPosition(ce.position,ne)}),K({nodeExtent:ne,nodeInternals:new Map(oe)})},panBy:ne=>{const{transform:oe,width:ce,height:ue,d3Zoom:Ae,d3Selection:pe,translateExtent:ve}=J();if(!Ae||!pe||!ne.x&&!ne.y)return!1;const me=identity.translate(oe[0]+ne.x,oe[1]+ne.y).scale(oe[2]),ge=[[0,0],[ce,ue]],ye=Ae==null?void 0:Ae.constrain()(me,ge,ve);return Ae.transform(pe,ye),oe[0]!==ye.x||oe[1]!==ye.y||oe[2]!==ye.k},cancelConnection:()=>K({connectionNodeId:initialState$1.connectionNodeId,connectionHandleId:initialState$1.connectionHandleId,connectionHandleType:initialState$1.connectionHandleType,connectionStatus:initialState$1.connectionStatus,connectionStartHandle:initialState$1.connectionStartHandle,connectionEndHandle:initialState$1.connectionEndHandle}),reset:()=>K({...initialState$1})}),Object.is),ReactFlowProvider=({children:K})=>{const J=reactExports.useRef(null);return J.current||(J.current=createRFStore()),React.createElement(Provider$1,{value:J.current},K)};ReactFlowProvider.displayName="ReactFlowProvider";const Wrapper=({children:K})=>reactExports.useContext(StoreContext)?React.createElement(React.Fragment,null,K):React.createElement(ReactFlowProvider,null,K);Wrapper.displayName="ReactFlowWrapper";const defaultNodeTypes={input:InputNode$1,default:DefaultNode$1,output:OutputNode$1,group:GroupNode},defaultEdgeTypes={default:BezierEdge,straight:StraightEdge,step:StepEdge,smoothstep:SmoothStepEdge,simplebezier:SimpleBezierEdge},initNodeOrigin=[0,0],initSnapGrid=[15,15],initDefaultViewport={x:0,y:0,zoom:1},wrapperStyle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ReactFlow=reactExports.forwardRef(({nodes:K,edges:J,defaultNodes:ne,defaultEdges:oe,className:ce,nodeTypes:ue=defaultNodeTypes,edgeTypes:Ae=defaultEdgeTypes,onNodeClick:pe,onEdgeClick:ve,onInit:me,onMove:ge,onMoveStart:ye,onMoveEnd:xe,onConnect:_e,onConnectStart:$e,onConnectEnd:Ie,onClickConnectStart:Fe,onClickConnectEnd:ke,onNodeMouseEnter:je,onNodeMouseMove:We,onNodeMouseLeave:ze,onNodeContextMenu:Xe,onNodeDoubleClick:Je,onNodeDragStart:nt,onNodeDrag:et,onNodeDragStop:tt,onNodesDelete:st,onEdgesDelete:qe,onSelectionChange:Se,onSelectionDragStart:Re,onSelectionDrag:Be,onSelectionDragStop:Ne,onSelectionContextMenu:Ue,onSelectionStart:Ge,onSelectionEnd:Ye,connectionMode:Qe=ConnectionMode.Strict,connectionLineType:Te=ConnectionLineType.Bezier,connectionLineStyle:Ke,connectionLineComponent:rt,connectionLineContainerStyle:it,deleteKeyCode:at="Backspace",selectionKeyCode:lt="Shift",selectionOnDrag:ct=!1,selectionMode:ot=SelectionMode.Full,panActivationKeyCode:ft="Space",multiSelectionKeyCode:dt=isMacOs()?"Meta":"Control",zoomActivationKeyCode:mt=isMacOs()?"Meta":"Control",snapToGrid:kt=!1,snapGrid:wt=initSnapGrid,onlyRenderVisibleElements:Et=!1,selectNodesOnDrag:Ot=!0,nodesDraggable:Rt,nodesConnectable:gt,nodesFocusable:$t,nodeOrigin:pt=initNodeOrigin,edgesFocusable:vt,edgesUpdatable:Mt,elementsSelectable:St,defaultViewport:_t=initDefaultViewport,minZoom:Xt=.5,maxZoom:Tt=2,translateExtent:Dt=infiniteExtent,preventScrolling:Ht=!0,nodeExtent:Bt,defaultMarkerColor:It="#b1b1b7",zoomOnScroll:zt=!0,zoomOnPinch:Pt=!0,panOnScroll:Vt=!1,panOnScrollSpeed:vr=.5,panOnScrollMode:qt=PanOnScrollMode.Free,zoomOnDoubleClick:er=!0,panOnDrag:yr=!0,onPaneClick:Lt,onPaneMouseEnter:jt,onPaneMouseMove:fr,onPaneMouseLeave:Gt,onPaneScroll:Jt,onPaneContextMenu:ar,children:Wt,onEdgeContextMenu:nr,onEdgeDoubleClick:Er,onEdgeMouseEnter:Zt,onEdgeMouseMove:ir,onEdgeMouseLeave:Ir,onEdgeUpdate:tr,onEdgeUpdateStart:cr,onEdgeUpdateEnd:Or,onReconnect:sr,onReconnectStart:dr,onReconnectEnd:Dr,reconnectRadius:lr=10,edgeUpdaterRadius:hr=10,onNodesChange:Yr,onEdgesChange:ur,noDragClassName:pr="nodrag",noWheelClassName:Jr="nowheel",noPanClassName:Yt="nopan",fitView:or=!1,fitViewOptions:Fr,connectOnClick:kr=!0,attributionPosition:Kr,proOptions:cn,defaultEdgeOptions:An,elevateNodesOnSelect:_n=!0,elevateEdgesOnSelect:wn=!1,disableKeyboardA11y:Bn=!1,autoPanOnConnect:On=!0,autoPanOnNodeDrag:In=!0,connectionRadius:Ln=20,isValidConnection:Tn,onError:Rn,style:$n,id:Cn,nodeDragThreshold:Sn,...gn},Mn)=>{const yn=Cn||"1";return React.createElement("div",{...gn,style:{...$n,...wrapperStyle},ref:Mn,className:cc(["react-flow",ce]),"data-testid":"rf__wrapper",id:Cn},React.createElement(Wrapper,null,React.createElement(GraphView$1,{onInit:me,onMove:ge,onMoveStart:ye,onMoveEnd:xe,onNodeClick:pe,onEdgeClick:ve,onNodeMouseEnter:je,onNodeMouseMove:We,onNodeMouseLeave:ze,onNodeContextMenu:Xe,onNodeDoubleClick:Je,nodeTypes:ue,edgeTypes:Ae,connectionLineType:Te,connectionLineStyle:Ke,connectionLineComponent:rt,connectionLineContainerStyle:it,selectionKeyCode:lt,selectionOnDrag:ct,selectionMode:ot,deleteKeyCode:at,multiSelectionKeyCode:dt,panActivationKeyCode:ft,zoomActivationKeyCode:mt,onlyRenderVisibleElements:Et,selectNodesOnDrag:Ot,defaultViewport:_t,translateExtent:Dt,minZoom:Xt,maxZoom:Tt,preventScrolling:Ht,zoomOnScroll:zt,zoomOnPinch:Pt,zoomOnDoubleClick:er,panOnScroll:Vt,panOnScrollSpeed:vr,panOnScrollMode:qt,panOnDrag:yr,onPaneClick:Lt,onPaneMouseEnter:jt,onPaneMouseMove:fr,onPaneMouseLeave:Gt,onPaneScroll:Jt,onPaneContextMenu:ar,onSelectionContextMenu:Ue,onSelectionStart:Ge,onSelectionEnd:Ye,onEdgeContextMenu:nr,onEdgeDoubleClick:Er,onEdgeMouseEnter:Zt,onEdgeMouseMove:ir,onEdgeMouseLeave:Ir,onReconnect:sr??tr,onReconnectStart:dr??cr,onReconnectEnd:Dr??Or,reconnectRadius:lr??hr,defaultMarkerColor:It,noDragClassName:pr,noWheelClassName:Jr,noPanClassName:Yt,elevateEdgesOnSelect:wn,rfId:yn,disableKeyboardA11y:Bn,nodeOrigin:pt,nodeExtent:Bt}),React.createElement(StoreUpdater,{nodes:K,edges:J,defaultNodes:ne,defaultEdges:oe,onConnect:_e,onConnectStart:$e,onConnectEnd:Ie,onClickConnectStart:Fe,onClickConnectEnd:ke,nodesDraggable:Rt,nodesConnectable:gt,nodesFocusable:$t,edgesFocusable:vt,edgesUpdatable:Mt,elementsSelectable:St,elevateNodesOnSelect:_n,minZoom:Xt,maxZoom:Tt,nodeExtent:Bt,onNodesChange:Yr,onEdgesChange:ur,snapToGrid:kt,snapGrid:wt,connectionMode:Qe,translateExtent:Dt,connectOnClick:kr,defaultEdgeOptions:An,fitView:or,fitViewOptions:Fr,onNodesDelete:st,onEdgesDelete:qe,onNodeDragStart:nt,onNodeDrag:et,onNodeDragStop:tt,onSelectionDrag:Be,onSelectionDragStart:Re,onSelectionDragStop:Ne,noPanClassName:Yt,nodeOrigin:pt,rfId:yn,autoPanOnConnect:On,autoPanOnNodeDrag:In,onError:Rn,connectionRadius:Ln,isValidConnection:Tn,nodeDragThreshold:Sn}),React.createElement(Wrapper$1,{onSelectionChange:Se}),Wt,React.createElement(Attribution,{proOptions:cn,position:Kr}),React.createElement(A11yDescriptions,{rfId:yn,disableKeyboardA11y:Bn})))});ReactFlow.displayName="ReactFlow";function createUseItemsState(K){return J=>{const[ne,oe]=reactExports.useState(J),ce=reactExports.useCallback(ue=>oe(Ae=>K(ue,Ae)),[]);return[ne,oe,ce]}}const useNodesState=createUseItemsState(applyNodeChanges),useEdgesState=createUseItemsState(applyEdgeChanges),placeholder$1="_placeholder_1hk2d_1",styles$V={placeholder:placeholder$1},DagActionPlaceholder=reactExports.memo(({placeholder:K="Please select a node or line to interact with them."})=>jsxRuntimeExports.jsx("p",{className:styles$V.placeholder,children:K}));DagActionPlaceholder.displayName="DagActionPlaceholder";const EditorDag=({editorData:K,recordType:J,recordKey:ne,onCancel:oe,onUpdate:ce})=>{const{getRecord:ue}=useEditorRequest(),[Ae,pe]=reactExports.useState("");reactExports.useEffect(()=>{J&&ne&&ue.fetch({key:ne,type:J}).then(me=>{var ge;pe(((ge=Object.keys(me.schema.typeList))==null?void 0:ge.find(ye=>ye.endsWith("Node")))||"")})},[J,ne]);const ve=({data:me})=>ce==null?void 0:ce(me);return ue.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):!ue.state||!Ae||!K?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(EditorInstance,{data:K,schema:ue.state.schema.typeList,rootSchemaName:Ae,onCancel:oe,onSubmit:ve})},EditorNewDag=({recordType:K,onCancel:J,onUpdate:ne})=>{const{getSchema:oe}=useEditorRequest(),[ce,ue]=reactExports.useState("");reactExports.useEffect(()=>{K&&oe.fetch({name:K}).then(pe=>{var ve;ue(((ve=Object.keys(pe.typeList))==null?void 0:ve.find(me=>me.endsWith("Node")))||"")})},[K]);const Ae=({data:pe})=>ne==null?void 0:ne(pe);return oe.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):!oe.state||!ce?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(EditorInstance,{schema:oe.state.typeList,rootSchemaName:ce,onCancel:J,onSubmit:Ae})};var DagNodeFormVariant=(K=>(K.CREATE="create",K.UPDATE="update",K))(DagNodeFormVariant||{});const DagNodeForm=reactExports.memo(({variant:K,type:J,selectedRowKey:ne,initialValues:oe,onSubmit:ce,onCancel:ue})=>K===DagNodeFormVariant.CREATE?jsxRuntimeExports.jsx(EditorNewDag,{recordType:J,onCancel:ue,onUpdate:pe=>ce(pe)}):jsxRuntimeExports.jsx(EditorDag,{editorData:oe,recordKey:ne,recordType:J,onCancel:ue,onUpdate:pe=>ce(pe)}));DagNodeForm.displayName="DagNodeForm";const DagEdgeForm=reactExports.memo(({type:K,selectedRowKey:J,initialValues:ne,onCancel:oe,onSubmit:ce})=>jsxRuntimeExports.jsx(EditorDag,{editorData:ne,recordKey:J,recordType:K,onCancel:oe,onUpdate:ue=>ce(ue)}));DagEdgeForm.displayName="DagEdgeForm";const mapNodeToDTO=K=>({_t:"DAGNode",Id_:K.id,Position:{X:K.position.x,Y:K.position.y},Data:{Label:K.data.label}}),mapNodesToDTOs=K=>K.map(mapNodeToDTO),mapNodeToDomain=K=>{const{Label:J,...ne}=K.Data;return{id:K.Id_,position:{x:K.Position.X,y:K.Position.Y},data:{label:J,meta:ne}}},mapEdgeToDTO=K=>({Id_:K.id,Source:K.source,Target:K.target,Label:K.label}),mapEdgesToDTOs=K=>K.map(mapEdgeToDTO),mapNodesToDomain=K=>K.map(mapNodeToDomain),mapEdgeToDomain=K=>({id:K.Id_,source:K.Source,target:K.Target,label:K.Label}),mapEdgesToDomain=K=>(K==null?void 0:K.map(mapEdgeToDomain))??{},isNodeRemoveChange=K=>K.type==="remove",DagContext=reactExports.createContext({});function useDagContext(){const K=reactExports.useContext(DagContext);if(K==null)throw new Error("Cannot find Dag context");return K}var ActionMode=(K=>(K[K.NONE=0]="NONE",K[K.ADD_NODE=1]="ADD_NODE",K[K.EDIT_NODE=2]="EDIT_NODE",K[K.EDIT_EDGE=3]="EDIT_EDGE",K))(ActionMode||{});const container$r="_container_f1grn_1",actions="_actions_f1grn_8",styles$U={container:container$r,actions},DagActions=({selectedRowKey:K})=>{const{type:J,actionMode:ne,selected:oe,resetActionMode:ce,addNode:ue,updateSelectedNode:Ae,updateSelectedEdge:pe}=useDagContext(),ve=reactExports.useMemo(()=>{const ye=oe.edges[0];return ye?mapEdgeToDTO(ye):void 0},[oe.edges]),me=reactExports.useMemo(()=>{const ye=oe.nodes[0];return ye?mapNodeToDTO(ye):void 0},[oe.nodes]),ge=ye=>{switch(ye){case ActionMode.ADD_NODE:return jsxRuntimeExports.jsx(DagNodeForm,{variant:DagNodeFormVariant.CREATE,type:J,selectedRowKey:K,onSubmit:ue,onCancel:ce});case ActionMode.EDIT_NODE:return jsxRuntimeExports.jsx(DagNodeForm,{variant:DagNodeFormVariant.UPDATE,selectedRowKey:K,type:J,initialValues:me,onSubmit:Ae,onCancel:ce},me==null?void 0:me.Id_);case ActionMode.EDIT_EDGE:return jsxRuntimeExports.jsx(DagEdgeForm,{type:J,selectedRowKey:K,initialValues:ve,onSubmit:pe,onCancel:ce},ve==null?void 0:ve.Id_);default:return jsxRuntimeExports.jsx(DagActionPlaceholder,{})}};return jsxRuntimeExports.jsxs("div",{className:styles$U.container,children:[jsxRuntimeExports.jsx("h5",{className:styles$U.actions,children:"Actions"}),ge(ne)]})},useDebounceValue=(K,J=500)=>{const[ne,oe]=reactExports.useState(K);return reactExports.useEffect(()=>{const ce=setTimeout(()=>{oe(K)},J);return()=>{clearTimeout(ce)}},[K,J]),ne},DagProvider=({type:K,pointer:J,isReadonly:ne,children:oe})=>{const ce=useSelector$1(selectActiveDataset$1),ue=reactExports.useRef(!0),Ae=reactExports.useRef(),[pe,ve,me]=useNodesState([]),[ge,ye,xe]=useEdgesState([]),[_e,$e]=reactExports.useState({nodes:[],edges:[]}),[Ie,Fe]=reactExports.useState(ActionMode.NONE),[ke,je]=reactExports.useState(!1),We=reactExports.useMemo(()=>({nodes:mapNodesToDTOs(pe),edges:mapEdgesToDTOs(ge)}),[pe,ge]),ze=useDebounceValue(We),Xe=reactExports.useCallback(Ge=>ye(Ye=>addEdge(Ge,Ye)),[ye]),Je=reactExports.useCallback(Ge=>{ne||me(Ge)},[ne]),nt=reactExports.useCallback(Ge=>{ne||xe(Ge)},[ne]),et=()=>{ue.current=!0,storageApi.getRecord({type:K,key:J,dataset:ce}).then(Ge=>{const Ye=Ge.data;Ae.current=Ye,ve(mapNodesToDomain(Ye.Nodes)),ye(mapEdgesToDomain(Ye.Edges))}).finally(()=>{ue.current=!1})},tt=reactExports.useCallback(Ge=>{ne||ve(Ye=>{const Qe={id:Ge.Id_,position:{x:Ge.Position.X,y:Ge.Position.Y},data:{label:Ge.Data.Label}};return Ye.concat([Qe])})},[ne]),st=reactExports.useCallback(Ge=>{ne||ve(Ye=>Ye.map(Qe=>Qe.id===Ge.Id_?{...Qe,position:{x:Ge.Position.X,y:Ge.Position.Y},data:{label:Ge.Data.Label}}:Qe))},[ne]),qe=reactExports.useCallback(Ge=>{ne||ye(Ye=>Ye.map(Qe=>Qe.id===Ge.Id_?{...Qe,target:Ge.Target,source:Ge.Source,label:Ge.Label}:Qe))},[ne]),Se=reactExports.useCallback(()=>Fe(ActionMode.ADD_NODE),[]),Re=reactExports.useCallback(()=>Fe(ActionMode.NONE),[]),Be=reactExports.useCallback(Ge=>{Fe(()=>Ge.nodes[0]?ActionMode.EDIT_NODE:Ge.edges[0]?ActionMode.EDIT_EDGE:ActionMode.NONE),$e(Ge)},[]),Ne=reactExports.useCallback(Ge=>{const Ye=Ae.current;if(!Ye)throw new Error('Cannot save DAG object because "DAG ref" is empty');je(!0),storageApi.saveEntity({dataset:ce,data:[{...Ye,Nodes:Ge.nodes,Edges:Ge.edges}]}).finally(()=>je(!1))},[J]);reactExports.useEffect(et,[]),reactExports.useEffect(()=>{ue.current||ne||Ne(ze)},[ze,ne]);const Ue=reactExports.useMemo(()=>({isReadonly:ne,isUpdating:ke,pointer:J,type:K,actionMode:Ie,activateAddNodeMode:Se,resetActionMode:Re,nodes:pe,edges:ge,setNodes:ve,setEdges:ye,onNodesChange:Je,onEdgesChange:nt,addNode:tt,updateSelectedNode:st,updateSelectedEdge:qe,onConnect:Xe,selected:_e,onSelectionChange:Be}),[ne,ke,J,K,Ie,Se,Re,pe,ge,ve,ye,Je,nt,tt,st,qe,Xe,_e,Be]);return jsxRuntimeExports.jsx(DagContext.Provider,{value:Ue,children:oe})},viewer="_viewer_tw82m_1",styles$T={viewer},proOptions={hideAttribution:!0},DagViewer$1=({className:K,nodes:J,edges:ne,onNodesChange:oe,onEdgesChange:ce,onConnect:ue,onSelectionChange:Ae})=>ne.length===0||!Array.isArray(ne)?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(ReactFlow,{className:cx(styles$T.viewer,K),nodes:J,edges:ne,onNodesChange:oe,onEdgesChange:ce,onConnect:ue,onSelectionChange:Ae,proOptions,fitView:!0}),DagContent=({className:K})=>{const{nodes:J,edges:ne,onNodesChange:oe,onEdgesChange:ce,onConnect:ue,onSelectionChange:Ae}=useDagContext();return jsxRuntimeExports.jsx(DagViewer$1,{className:K,nodes:J,edges:ne,onNodesChange:oe,onEdgesChange:ce,onConnect:ue,onSelectionChange:Ae})},buttonContainer="_buttonContainer_i0eks_1",zoomButtons="_zoomButtons_i0eks_8",styles$S={buttonContainer,zoomButtons},DagToolbar=()=>{const{t:K}=useTranslation(),{isUpdating:J,activateAddNodeMode:ne}=useDagContext(),{zoomIn:oe,zoomOut:ce}=useReactFlow(),ue=()=>oe(),Ae=()=>ce();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:styles$S.buttonContainer,children:[jsxRuntimeExports.jsx(rl,{iconBefore:jsxRuntimeExports.jsx(Dk,{}),onClick:ne,children:K("editor.addDagNode")}),jsxRuntimeExports.jsxs("div",{className:styles$S.zoomButtons,children:[jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:ue,iconBefore:jsxRuntimeExports.jsx(BB$1,{})}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:Ae,iconBefore:jsxRuntimeExports.jsx(AB,{})})]})]}),J&&jsxRuntimeExports.jsx(PF,{loading:!0})]})},container$q="_container_euh7c_1",content$a="_content_euh7c_7",dagContent="_dagContent_euh7c_14",dagActions="_dagActions_euh7c_18",styles$R={container:container$q,content:content$a,dagContent,dagActions},Dag=reactExports.memo(({type:K,selectedRowKey:J,isReadonly:ne=!1})=>jsxRuntimeExports.jsx(ReactFlowProvider,{children:jsxRuntimeExports.jsx(DagProvider,{type:K,pointer:J,isReadonly:ne,children:jsxRuntimeExports.jsx("div",{className:styles$R.container,children:jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Panel$1,{id:"flow-viewer-content",order:1,defaultSize:60,children:jsxRuntimeExports.jsxs("div",{className:styles$R.content,children:[!ne&&jsxRuntimeExports.jsx(DagToolbar,{}),jsxRuntimeExports.jsx(DagContent,{className:styles$R.dagContent})]})}),!ne&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{id:"flow-viewer-actions",order:1,minSize:0,maxSize:40,className:styles$R.dagActions,children:jsxRuntimeExports.jsx(DagActions,{selectedRowKey:J})})]})]})})})}));Dag.displayName="Dag";const DagDictionaryCellFlat=({variantType:K="Missing",value:J})=>{const oe=(()=>{switch(K){case"Time":return isString$3(J)?DateFormatUtility.create(J,DateFormatEnum.TIME_MS).format(DateFormatEnum.TIME):"";case"Bool":return J?"Y":"N";case"DateTime":return isString$3(J)?DateFormatUtility.create(J).format(DateFormatEnum.DATE_TIME):"";default:return dataToString(J)}})();return jsxRuntimeExports.jsxs("div",{className:"dag-dictionary-cell-flat",children:[jsxRuntimeExports.jsx(mf,{title:oe,children:jsxRuntimeExports.jsx(Ml,{readOnly:!0,selectOnFocus:!0,variant:"borderless",value:oe})}),jsxRuntimeExports.jsx(mf,{title:K,children:jsxRuntimeExports.jsx("div",{className:"dag-dictionary-cell-flat__variant",children:jsxRuntimeExports.jsx("div",{className:"dag-dictionary-cell-flat__variant-name",children:K})})})]})},DagDictionaryViewValueCell=({value:K})=>{var ne,oe;const J=isArray$7(K)?"List":"Flat";if(J==="Flat"){const ce=K,ue=ce&&((ne=Object.keys(ce))==null?void 0:ne[0])||"",Ae=(ce&&((oe=Object.values(ce))==null?void 0:oe[0]))??"";return jsxRuntimeExports.jsx(DagDictionaryCellFlat,{variantType:ue,value:Ae})}return J==="List"?jsxRuntimeExports.jsx(Ml,{selectOnFocus:!0,readOnly:!0,variant:"borderless",value:dataToString(K)}):null},dagDictionaryViewKeyCell="_dagDictionaryViewKeyCell_12cik_1",styles$Q={dagDictionaryViewKeyCell},DagDictionaryViewKeyCell=({value:K,title:J})=>{const[ne,{setFalse:oe,setTrue:ce}]=useBoolean(!1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(mf,{title:K,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Ml,{variant:"borderless",selectOnFocus:!0,readOnly:!0,value:K,suffix:jsxRuntimeExports.jsx(EA,{onClick:ce})})})}),jsxRuntimeExports.jsx(Ho,{open:ne,title:J,onClose:oe,children:jsxRuntimeExports.jsx(Ho.Body,{className:styles$Q.dagDictionaryViewKeyCell,children:jsxRuntimeExports.jsx(CodeEditor,{isReadonly:!0,code:K,language:LanguageEnum.Plaintext})})})]})},KeyCell=K=>jsxRuntimeExports.jsx(DagDictionaryViewKeyCell,{title:K.value.dictKey,value:K.value.dictKey}),ValueCell=K=>jsxRuntimeExports.jsx(DagDictionaryViewValueCell,{value:K.value.dictValue}),DagDictionaryView=({data:K})=>{const[J,ne]=reactExports.useState(0),[oe,ce]=reactExports.useState({}),ue=reactExports.useMemo(()=>(K==null?void 0:K.map(pe=>({dictKey:(pe==null?void 0:pe.key)||"",dictValue:pe!=null&&pe.value?pe.value:null})))||[],[K]),Ae=reactExports.useMemo(()=>[{id:"key",accessor:pe=>pe,width:200,Header:"Key",Cell:KeyCell},{id:"value",width:400,accessor:pe=>pe,Header:"Value",Cell:ValueCell}],[]);return jsxRuntimeExports.jsx(Grid,{gridMode:GridModeEnum.EDITOR,columns:Ae,data:ue,selectedRowId:J.toString(),onChangeSelectedRowId:pe=>ne(+pe),selectedCheckbox:oe,onSelectedCheckboxChange:ce})},DagViewerNodeDetails=({node:K})=>{var ne,oe;const J=(ne=K.data.meta)!=null&&ne.NodeData&&isArray$7((oe=K.data.meta)==null?void 0:oe.NodeData)?K.data.meta.NodeData:[];return jsxRuntimeExports.jsxs("div",{className:"dag-viewer-node-details",children:[jsxRuntimeExports.jsx("div",{className:"dag-viewer-node-details__label",children:K.data.label}),jsxRuntimeExports.jsx("div",{className:"dag-viewer-node-details__dictionary",children:J.length===0?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(DagDictionaryView,{data:J})})]})},DagViewer=({Nodes:K,Edges:J})=>{const[ne,,oe]=useNodesState(mapNodesToDomain(K)),ce=mapEdgesToDomain(J),[ue,Ae]=reactExports.useState(),pe=reactExports.useCallback(me=>{const ge=me.filter(ye=>!isNodeRemoveChange(ye));oe(ge)},[]),ve=reactExports.useCallback(me=>Ae(me.nodes[0]),[]);return jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Panel$1,{id:"dag-viewer",order:1,defaultSize:60,children:jsxRuntimeExports.jsx(DagViewer$1,{nodes:ne,edges:ce,onNodesChange:pe,onSelectionChange:ve})}),ue&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{id:"dag-viewer-node-details",order:1,minSize:0,maxSize:40,children:jsxRuntimeExports.jsx(DagViewerNodeDetails,{node:ue})})]})]})},divider$2="_divider_1o73b_1",viewerContainer="_viewerContainer_1o73b_5",styles$P={divider:divider$2,viewerContainer},Viewers=({activeTab:K,activeViewerType:J,data:ne,panelKey:oe,panelWithParamsName:ce,panelType:ue,onTransition:Ae,onRefresh:pe})=>{const ve=useSelector$1(selectActiveDataset$1),me=useSelector$1(selectActiveEnvironment),ge=useSelector$1(selectUser),ye=useSelector$1(selectIsDemoMode),xe=useSelector$1(selectApplicationTheme);return ce?jsxRuntimeExports.jsx(ParamsViewer,{activeTab:K,panelKey:oe,panelType:ue,panelWithParamsName:ce}):ne?($e=>{const Ie=cleanTypeHelper($e),Fe={[ViewerTypesEnum.VariantTree]:jsxRuntimeExports.jsx("div",{children:"VariantTree"}),[ViewerTypesEnum.VariantTable]:!isArray$7(ne)&&jsxRuntimeExports.jsx(TableViewer,{...ne}),[ViewerTypesEnum.BinaryContent]:!isArray$7(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne}),[ViewerTypesEnum.VariantMatrix]:!isArray$7(ne)&&jsxRuntimeExports.jsx(MatrixViewer,{...ne}),[ViewerTypesEnum.ViewContainer]:!isArray$7(ne)&&jsxRuntimeExports.jsx(CompositeView,{...ne,onTransition:Ae}),[ViewerTypesEnum.Script]:!isArray$7(ne)&&jsxRuntimeExports.jsx(ScriptViewer,{data:ne}),[ViewerTypesEnum.FormattedVariantTable]:!isArray$7(ne)&&jsxRuntimeExports.jsx(FormattedVariantTable,{...ne}),[ViewerTypesEnum.DAG]:!isArray$7(ne)&&jsxRuntimeExports.jsx(DagViewer,{...ne}),[ViewerTypesEnum.ViewHandlerAction]:!isArray$7(ne)&&jsxRuntimeExports.jsx(ViewHandlerAction,{dataset:ve,viewerKey:oe,viewerType:ue,...ne,onTransition:Ae}),[ViewerTypesEnum.UIViewer]:!isArray$7(ne)&&jsxRuntimeExports.jsx($A,{data:ne,dataset:ve,dataSource:me,panelType:ue,panelKey:oe,activeTab:K,theme:xe,isDemoMode:ye,apiUrl:env$1.apiUrl,onRefresh:pe,toast,onTransition:Ae,axiosClient:axiosMain,userName:ge==null?void 0:ge.username,userKeys:externalStorage.getSecretKeys((ge==null?void 0:ge.username)??"")}),[ViewerTypesEnum.Dag]:!isArray$7(ne)&&jsxRuntimeExports.jsx(DagViewer,{...ne}),[ViewerTypesEnum.HtmlView]:!isArray$7(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne,FileType:"Html"}),[ViewerTypesEnum.PdfView]:!isArray$7(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne,FileType:"Pdf"}),[ViewerTypesEnum.PngView]:!isArray$7(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne,FileType:"Png"}),[ViewerTypesEnum.CsvView]:!isArray$7(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne,FileType:"Csv"}),[ViewerTypesEnum.EmptyView]:null}[Ie];return Fe?jsxRuntimeExports.jsxs("div",{className:styles$P.viewerContainer,children:[jsxRuntimeExports.jsx("div",{className:styles$P.divider}),Fe]}):Fe===null?null:jsxRuntimeExports.jsx(DefaultViewer,{viewerType:ue,viewerKey:oe,data:ne,onTransition:Ae})})(J):jsxRuntimeExports.jsx(NoGridData,{content:t$5("noData.noData"),additionalContent:t$5("noData.emptyViewer"),icon:jsxRuntimeExports.jsx(Pp,{size:"Full"})})},selectGridSchema=K=>K.GridTabsDataSliceReducer.tabsData.metaData,ViewerContainer=({activeTab:K,panelKey:J,panelType:ne,onTransition:oe})=>{var Je,nt,et;const ce=reactExports.useRef(0),ue=useSelector$1(selectActiveDataset$1),Ae=useSelector$1(selectUser),{state:pe,action:ve}=useDndContext(),{isLoading:me,state:ge,fetch:ye,hasError:xe,isInitiated:_e}=useRequest(handlerApi.handlerRun),{data:$e}=useSelector$1(selectGridSchema),Ie=(et=(nt=(Je=$e.Declare)==null?void 0:Je.Handlers)==null?void 0:nt.find(({Label:tt,Type:st,Params:qe})=>tt===K&&st===HandlerType.VIEWER&&!!qe))==null?void 0:et.Name,[Fe,ke]=reactExports.useState(null),je=async tt=>{const st=++ce.current;ve.updateIsLayoutBtnsDisabled(!0);const qe={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"LoadRecordPanel",Keys:[],Arguments:{TypeName:ne,Key:J,PanelId:K},Dataset:ue,userName:Ae==null?void 0:Ae.username};await ye(qe).then(Se=>{st===ce.current&&ke({activeTab:K,result:Se[0].Result})}).finally(()=>{ve.updateIsLayoutBtnsDisabled(!1),tt==null||tt()})};reactExports.useEffect(()=>{Ie||je()},[J,ne,K]);const We=tt=>{var st,qe;return isObject$9(tt==null?void 0:tt.ViewOf)?(st=tt==null?void 0:tt.ViewOf)==null?void 0:st._t:tt&&Object.hasOwn(tt,"Record")&&isObject$9(tt==null?void 0:tt.Record)?(qe=tt==null?void 0:tt.Record)==null?void 0:qe._t:isArray$7(tt==null?void 0:tt.Records)?tt==null?void 0:tt._t:(tt==null?void 0:tt._t)||""},ze=tt=>tt&&Object.hasOwn(tt,"ViewOf")?tt==null?void 0:tt.ViewOf:tt&&Object.hasOwn(tt,"Record")?tt==null?void 0:tt.Record:tt&&Object.hasOwn(tt,"Records")?tt==null?void 0:tt.Records:tt||void 0;if(xe||(ge==null?void 0:ge[0].StatusCode)===RunHandlerStatusCodeEnum.Failed)return jsxRuntimeExports.jsx(NoGridData,{content:"Data for this view is not yet available - refresh to try again",handleButtonClick:()=>{je()},isRefreshButton:!0});const Xe=me||!Ie&&(_e||(Fe==null?void 0:Fe.activeTab)!==K);return jsxRuntimeExports.jsx(PF,{loading:Xe,children:jsxRuntimeExports.jsx(Viewers,{activeTab:K,panelType:ne,panelKey:J,panelWithParamsName:Ie,activeViewerType:We((Fe==null?void 0:Fe.result)||null),data:ze((Fe==null?void 0:Fe.result)||null),onTransition:oe,onRefresh:()=>{var tt;je((tt=pe.headersRef.current)==null?void 0:tt.handleEntitiesRefresh)}})})},columns=[{Header:"Type Name",accessor:"typeName",id:"typeName",Filter:FilterInput},{Header:"Package",accessor:"package",id:"package",Filter:FilterInput},{Header:"Module",accessor:"module",id:"module",Filter:FilterInput}],getRowsHelper=K=>K==null?void 0:K.map(J=>columns.reduce((ne,oe,ce)=>({...ne,[oe.id]:ce===0?J.Label:J.Name}),{})),EditorButtonsGroup=({submitTitle:K,onSubmit:J,onCancel:ne,isCancelDisabled:oe,isSubmitDisabled:ce})=>{const{t:ue}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"editor-buttons-group",children:[jsxRuntimeExports.jsx(rl,{onClick:J,disabled:ce,children:ue(K)}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:ne,disabled:oe,children:ue("buttons.cancel")})]})},EditorSelectSuccessor=({type:K,onApplySuccessorType:J})=>{const{action:ne}=useAppContext(),[oe,ce]=reactExports.useState(),[ue,Ae]=reactExports.useState(),pe=useRequest(schemaApi.getTypeHierarchy),ve=async()=>{try{const ke=(await pe.fetch({name:K})).filter(je=>je.Name!==K);ce(ke)}catch(Fe){toast.error(Fe)}};reactExports.useEffect(()=>{ve()},[K]);const me=getRowsHelper(oe),ge=Fe=>{if(!Fe)return;const{module:ke}=Fe.original;Ae(ke)},ye=Fe=>Fe.module,xe=Fe=>{ne.setActiveEditorTabAction(EditorTabsEnum.NEW_ENTITY),J(Fe)},_e=Fe=>{if(Fe){const{module:ke}=Fe.original;ge(Fe),xe(ke)}},$e=()=>{ue&&xe(ue)},Ie=()=>{ne.setActiveEditorTabAction(EditorTabsEnum.EDITOR)};return jsxRuntimeExports.jsx(PF,{loading:pe.isLoading||!me,children:jsxRuntimeExports.jsxs("div",{className:"editor-select-successor",children:[jsxRuntimeExports.jsx(Grid,{columns,data:me||[],isColumnFilter:!1,getRowId:ye,selectedRowId:ue,onChangeSelectedRowId:Ae,onRowDoubleClicked:_e}),jsxRuntimeExports.jsx(EditorButtonsGroup,{submitTitle:"buttons.apply",onSubmit:$e,onCancel:Ie})]})})},EditorEntity=({isDisableKeyFields:K,dataset:J,isReadOnly:ne,recordType:oe,recordKey:ce,breadcrumbs:ue,onUpdate:Ae,onTransition:pe,onChangeBreadcrumbs:ve,isEntityLoading:me,hasInitFetch:ge,entityState:ye,getEditorData:xe})=>{const{action:_e,state:$e}=useAppContext(),{saveEntity:Ie}=useEditorRequest(),{t:Fe}=useTranslation();reactExports.useEffect(()=>{ce!==$e.updatedRecordId&&_e.setSuccessMessage("")},[ce,$e.updatedRecordId]);const ke=()=>{xe(oe,ce)},je=({data:We})=>{Ie.fetch({data:We,recordType:oe}).then(ze=>{xe(oe,ce),Ae==null||Ae({oldKey:ce,newKey:ze[0].Key}),_e.setIsEditorDataChangedAction(!1),_e.setSuccessMessage(Fe("editor.entitySavedSuccessfully")),_e.setUpdatedRecordId(ce||""),setTimeout(()=>{_e.setSuccessMessage("")},5e3)}).catch(()=>_e.setSuccessMessage(""))};return me||!ge?jsxRuntimeExports.jsx(PF,{loading:!0}):ye!=null&&ye.data?jsxRuntimeExports.jsx(EditorInstance,{dataset:J,breadcrumbs:ue,isDisableKeyFields:K,readOnly:ne,data:ye.data,schema:ye.schema.typeList,rootSchemaName:ye.schema.rootType,onTransition:pe,onCancel:ke,onSubmit:je,onChangeBreadcrumbs:ve,onChangeData:_e.setIsEditorDataChangedAction,message:$e.successMessage}):jsxRuntimeExports.jsx(RF,{})},EditorNewEntity=({recordType:K,recordKey:J,onUpdate:ne,onCancel:oe})=>{const ce=useSelector$1(selectGridSchema),{action:ue}=useAppContext(),{getSchema:Ae,saveEntity:pe}=useEditorRequest();reactExports.useEffect(()=>{K&&Ae.fetch({name:K})},[K]);const ve=({data:ge})=>{pe.fetch({data:ge,recordType:K,isInsert:!0}).then(ye=>{ne==null||ne({oldKey:J,newKey:ye[0].Key})})},me=()=>{ue.setActiveEditorTabAction(ce.data.Kind===KindTypeModel.ABSTRACT?EditorTabsEnum.SELECT_TYPE:EditorTabsEnum.EDITOR),oe==null||oe()};return Ae.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):Ae.state?jsxRuntimeExports.jsx(EditorInstance,{schema:Ae.state.typeList,rootSchemaName:Ae.state.rootType,onCancel:me,onSubmit:ve,isCancelDisabled:!1}):jsxRuntimeExports.jsx(RF,{})},EditorSingleton=({recordType:K,dataset:J,isReadOnly:ne,onUpdate:oe})=>{const{getRecord:ce,saveEntity:ue}=useEditorRequest();reactExports.useEffect(()=>{K&&pe()},[K,J]);const Ae=({data:ve})=>{ue.fetch({data:ve,recordType:K}).then(me=>{oe==null||oe({newKey:me[0].Key})})},pe=()=>{ce.fetch({key:"",type:K,dataset:J})};return ce.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):ce.state?jsxRuntimeExports.jsx(EditorInstance,{readOnly:ne,data:ce.state.data,schema:ce.state.schema.typeList,rootSchemaName:ce.state.schema.rootType,onCancel:pe,onSubmit:Ae}):jsxRuntimeExports.jsx(RF,{})},createCopyDataWithoutKeyFieldsBySchema=(K,J)=>{var ce;const ne=K.typeList[K.rootType],oe=deepClone(J);return(ce=ne.Keys)==null||ce.forEach(ue=>{oe[ue]&&(oe[ue]=null)}),oe},EditorCopyEntity=({dataset:K,recordType:J,recordKey:ne,onUpdate:oe,onCancel:ce})=>{const{action:ue}=useAppContext(),{getRecord:Ae,saveEntity:pe}=useEditorRequest();reactExports.useEffect(()=>{J&&ne&&ve()},[J,K,ne]);const ve=xe=>{Ae.fetch({key:ne,type:J,dataset:K})},me=({data:xe})=>{pe.fetch({data:xe,recordType:J,isInsert:!0}).then(_e=>{oe==null||oe({oldKey:ne,newKey:_e[0].Key})})},ge=()=>{ue.setActiveEditorTabAction(EditorTabsEnum.EDITOR),ce==null||ce()},ye=reactExports.useMemo(()=>Ae.state?createCopyDataWithoutKeyFieldsBySchema(Ae.state.schema,Ae.state.data):null,[Ae.state]);return Ae.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):!Ae.state||!ye?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(EditorInstance,{data:ye,schema:Ae.state.schema.typeList,rootSchemaName:Ae.state.schema.rootType,onCancel:ge,onSubmit:me,isCancelDisabled:!1})},EditorTabContent=({activeTab:K,type:J,transitionTab:ne,selectedGridRow:oe,successorType:ce,breadcrumbs:ue,onChangeBreadcrumbs:Ae,onTransition:pe,onApplySuccessorType:ve,onUpdate:me,isEntityLoading:ge,hasInitFetch:ye,entityState:xe,getEditorData:_e})=>{const{state:$e,action:Ie}=useAppContext(),{state:Fe,action:ke}=useDndContext(),{activeEditorTab:je}=$e,We=useSelector$1(selectMetaData),ze=useSelector$1(selectIsReadonly),Xe=useSelector$1(selectActiveDataset$1),Je=ze||Fe.isTypeReadOnly,nt=tt=>{me==null||me(tt),Ie.setActiveEditorTabAction(EditorTabsEnum.EDITOR),Fe.maximizedTabId&&ke.updateMaximizedTabId(`stack-${EditorTabsEnum.EDITOR}`,!0)},et=()=>{Fe.maximizedTabId&&ke.updateMaximizedTabId("",!0)};return We.data.DisplayKind===SchemaDisplayKind.Singleton?jsxRuntimeExports.jsx(EditorSingleton,{dataset:Xe,isReadOnly:Je,recordType:J,onUpdate:nt}):K!=null&&K.includes(EditorTabsEnum.EDITOR_TRANSITION)&&(ne!=null&&ne.type)&&(ne!=null&&ne.key)?jsxRuntimeExports.jsx(EditorEntity,{isDisableKeyFields:!0,isReadOnly:Je,recordType:ne.type,recordKey:ne.key,onTransition:pe,isEntityLoading:ge,hasInitFetch:ye,entityState:xe,getEditorData:_e},K):K===EditorTabsEnum.EDITOR&&K===je?jsxRuntimeExports.jsx(EditorEntity,{dataset:Xe,isReadOnly:Je,recordType:J,recordKey:(oe==null?void 0:oe.key)||"",breadcrumbs:ue,onChangeBreadcrumbs:Ae,onUpdate:nt,onTransition:pe,isEntityLoading:ge,hasInitFetch:ye,entityState:xe,getEditorData:_e}):K===EditorTabsEnum.NEW_ENTITY&&K===je?jsxRuntimeExports.jsx(EditorNewEntity,{recordType:ce??J,recordKey:oe==null?void 0:oe.key,onUpdate:nt,onCancel:et}):K===EditorTabsEnum.COPY_ENTITY&&K===je&&(oe!=null&&oe.key)?jsxRuntimeExports.jsx(EditorCopyEntity,{recordType:oe.type??J,recordKey:oe.key,onUpdate:nt,onCancel:et}):K===EditorTabsEnum.SELECT_TYPE?jsxRuntimeExports.jsx(EditorSelectSuccessor,{type:J,onApplySuccessorType:ve}):K===EditorTabsEnum.DAG&&(oe!=null&&oe.type)&&oe.key?jsxRuntimeExports.jsx(Dag,{type:oe.type,selectedRowKey:oe.key}):K&&!EDITOR_TABS[K]?jsxRuntimeExports.jsx(ViewerContainer,{panelKey:oe==null?void 0:oe.key,panelType:J,activeTab:K,onTransition:pe}):jsxRuntimeExports.jsx(NoGridData,{content:t$5("noData.inTheReport")})},styleDraggingTab=K=>{const{blockPointer:J,tab:ne,event:oe,originalPositionX:ce,originalPositionY:ue,dropPreview:Ae,tabInitialLeftPosition:pe}=K,ve=oe.clientX-ce,me=oe.clientY-ue,ge=Ae;ne.style.display="flex",ne.style.width=`${ne.offsetWidth}px`,ne.style.height=`${ne.offsetHeight}px`,ne.style.left=`${pe}px`,ne.style.position="fixed",ne.style.top=`${ne.offsetTop}px`,J&&(ne.style.pointerEvents="none"),ne.style.transform=`translate(${ve}px, ${me}px)`,ne.style.zIndex="5000",ge&&!ge.classList.contains("displayNone")&&(ge.style.pointerEvents="none",ge.style.position="fixed",ge.style.top=`${ne.offsetTop||ge.style.top}px`,ge.style.left=`${ne.offsetLeft||ge.style.left}px`,ge.style.transform=`translate(${ve}px, ${me}px)`,ne.style.display="none")},container$p="_container_adjvv_1",sliding="_sliding_adjvv_5",styles$O={container:container$p,sliding},DnDDraggable=({className:K,children:J,index:ne,openedTabs:oe,onCloseTab:ce,stackRef:ue,isActiveTab:Ae=!1})=>{const{state:pe,action:ve}=useDndContext(),{config:me,blockDnd:ge,leftMouseBtnClicked:ye,isDragging:xe,tabsZone:_e,initialTabsZone:$e,dropZone:Ie,targetStackRef:Fe,draggingLabel:ke,startTabIndex:je,endTabIndex:We,dropPreview:ze,dropMarker:Xe,draggingTabRef:Je,draggingTabOffsetWidthRef:nt,mouseCoord:et,isWithinTabs:tt,placeholder:st,shouldInsertPlaceholder:qe,mouseUpHandlerRef:Se,isTabExistInStackRef:Re}=pe,{updateConfig:Be,setLeftMouseBtnClicked:Ne,setIsDragging:Ue,setInitialTabsZone:Ge,setDraggingLabel:Ye,setStartTabIndex:Qe,setEndTabIndex:Te,updateMouseCoord:Ke,updateIsWithinTabs:rt,setPlaceholder:it,setShouldInsertPlaceholder:at}=ve,[lt,ct]=reactExports.useState(0),[ot,ft]=reactExports.useState(0),[dt,mt]=reactExports.useState(!1),[kt,wt]=reactExports.useState(!0),[Et,Ot]=reactExports.useState(void 0),Rt=reactExports.useRef(!0),gt=reactExports.useRef(null),$t=reactExports.useRef(0),pt=reactExports.useRef(!0),vt=reactExports.useRef(null),Mt=reactExports.useRef(0),St=reactExports.useRef(0),_t=(It,zt)=>{var qt,er;const Pt=((qt=Je.current)==null?void 0:qt.closest(".droppable"))===zt,Vt=Array.from(((er=zt.querySelector(".ant-tabs-nav-list"))==null?void 0:er.childNodes)||[]).filter(yr=>yr.dataset.index!==void 0),vr=Vt.findIndex(yr=>yr===Je.current);Vt.forEach((yr,Lt)=>{var sr,dr,Dr;const jt=Lt>vr?nt.current:0,fr=((sr=yr.closest(".droppable"))==null?void 0:sr.offsetLeft)-St.current,Gt=Re.current?0:Number((dr=yr.parentNode.style.left.match(/(-?[0-9\.]+)/g))==null?void 0:dr[0])||0,Jt=Math.round(fr+yr.offsetLeft+yr.offsetWidth/(Lt===0?1:2)+jt-et.x),ar=It.clientX>fr+yr.offsetLeft+Gt,Wt=It.clientX<fr+yr.offsetLeft+yr.offsetWidth/2+Gt,nr=It.clientX>fr+yr.offsetLeft+yr.offsetWidth/2+Gt,Er=It.clientX<fr+yr.offsetLeft+yr.offsetWidth+Gt,Zt=It.clientX>fr+yr.offsetLeft+Je.current.offsetWidth+Gt,ir=It.clientX<yr.offsetLeft+fr+yr.offsetWidth/2+Je.current.offsetWidth+Gt,Ir=It.clientX>fr+yr.offsetLeft+yr.offsetWidth/2+Je.current.offsetWidth+Gt,tr=It.clientX>fr+yr.offsetLeft+Gt,cr=It.clientX<fr+yr.offsetLeft+yr.offsetWidth+Gt,Or=It.clientX<fr+yr.offsetLeft+yr.offsetWidth+Je.current.offsetWidth+Gt;if(vr>=0)ar&&Wt&&Lt<vr&&Lt!==0?Te(Lt):nr&&Er&&Lt<vr&&Lt!==0?Te(Lt+1):ar&&Er&&Lt===0?Te(Lt):Lt>vr&&Zt&&ir?Te(Lt-1):(Lt>vr&&Ir&&Or||Lt===vr&&tr&&cr)&&Te(Lt);else{const lr=(Dr=yr.getAttribute("style"))!=null&&Dr.includes("transform")?Je.current.offsetWidth:0,hr=It.clientX<yr.offsetLeft+yr.offsetWidth/2+lr+Gt;Lt===0&&ar&&Er?Te(Lt):Lt===0&&ar&&hr?Te(Lt+1):Lt!==0&&ar&&Wt?Te(Lt):Lt!==0&&nr&&Er&&Te(Lt+1)}It.clientX-(et.x-(pt.current&&Pt?0:jt)+(Re.current?0:Gt))<=Jt?yr.style.transform=`translate(${nt.current}px, 0px)`:yr.style.transform=""})},Xt=(It,zt)=>{for(;$t.current<=0;)_t(It,zt),$t.current=$t.current+1},Tt=reactExports.useCallback(It=>{var Gt,Jt,ar,Wt,nr;if(!vt.current)return;!xe&&(Math.abs(et.x-It.clientX)>5||Math.abs(et.y-It.clientY)>5)&&Ue(!0);const zt=It.target.closest(".tab-wrapper"),Pt=It.target.closest(".droppable");if((Pt==null?void 0:Pt.dataset.position)==="tabs"){if(Xt(It,Pt),zt&&zt!==Je.current){const Er=Number((Gt=zt.parentNode.style.left.match(/(-?[0-9\.]+)/g))==null?void 0:Gt[0])||0;Re.current&&(St.current=Math.abs(Er)),(Jt=zt==null?void 0:zt.getAttribute("style"))!=null&&Jt.includes("transform")?It.clientX>Math.round(Je.current.offsetWidth+zt.offsetLeft+(Number(zt==null?void 0:zt.dataset.index)===0?0:zt.offsetWidth/2)+Er)&&($t.current=0,Xt(It,Pt)):(It.clientX<Math.round(((ar=zt.closest(".droppable"))==null?void 0:ar.offsetLeft)+zt.offsetLeft+zt.offsetWidth/(Number(zt==null?void 0:zt.dataset.index)===0?1:2))&&($t.current=0,Xt(It,Pt)),pt.current===!1&&It.clientX>Math.round(((Wt=zt.closest(".droppable"))==null?void 0:Wt.offsetLeft)+zt.offsetLeft+zt.offsetWidth/(Number(zt==null?void 0:zt.dataset.index)===0?1:2))&&($t.current=0,Xt(It,Pt),pt.current=!0))}}else pt.current===!0&&(pt.current=!1);const Vt={blockPointer:!0,tab:vt.current,event:It,originalPositionX:lt,originalPositionY:ot,dropPreview:ze.current,tabInitialLeftPosition:Mt.current};if(styleDraggingTab(Vt),!document.elementFromPoint(It.clientX,It.clientY))return;Pt||(nr=Xe.current)==null||nr.classList.add("displayNone");const qt=JSON.parse(JSON.stringify(me)),er=findParent(qt,[ke.id]);if(!er)return;const yr=je===er.content.length-(pe.hideEditor&&!pe.shouldIgroreHideEditor?2:1)?je-1:je+1,Lt=pe.hideEditor&&!pe.shouldIgroreHideEditor?1:0,jt=er.content[je+Lt],fr=er.content[yr+Lt];jt&&fr&&isGridTabDataType(jt)&&jt.isActive&&isGridTabDataType(fr)&&kt&&(Math.abs(et.x-It.clientX)>5||Math.abs(et.y-It.clientY)>5)&&(fr.isActive=!0,jt.isCurrentlyDragging=!0,Be(qt),wt(!1))},[lt,ot,vt.current,ke,ye,_e,Fe,dt,ze,kt,ge,$e,Et,et,tt,xe,Rt.current]),Dt=reactExports.useCallback(()=>{var Vt,vr,qt;if(document.body.style.cursor="auto",pt.current=!0,$t.current=0,rt(!0),Ke({x:0,y:0}),Ne(!1),!vt.current)return;st&&!qe&&(st.remove(),it(null),at(!0),Rt.current=!0);let It=vt.current,zt=It;for(;It;)It.classList.remove("active"),It.removeAttribute("style"),It=It.previousSibling;for(;zt;)zt.classList.remove("active"),zt.removeAttribute("style"),zt=zt.nextSibling;let Pt=_e==null?void 0:_e.firstChild;for(;Pt;)Pt.removeAttribute("style"),Pt=Pt.nextSibling;if(vt.current.removeAttribute("style"),(Vt=document.activeElement)==null||Vt.blur(),vt.current=null,(vr=ze.current)==null||vr.classList.add("displayNone"),(qt=Xe.current)==null||qt.classList.add("displayNone"),wt(!0),ke&&xe){const er=structuredClone(me),yr=findParent(er,[ke.id]);yr&&(yr.content.forEach(Lt=>{Lt.isCurrentlyDragging=!1,Lt.isActive=Lt.id===ke.id}),Be(er)),Je.current=null,Ue(!1)}},[xe,je,We,vt.current,Ie,ke,ye,_e,Fe,ze,kt,Xe,ge,$e,me,tt,st,qe,Rt.current]),Ht=It=>{It.preventDefault()};reactExports.useEffect(()=>{qe&&!Rt.current&&(Rt.current=!0)},[qe,Rt.current]),reactExports.useEffect(()=>{ye&&_e===null&&gt.current&&(gt.current.style.transform="",Je.current&&Te(Number(Je.current.dataset.index)))},[_e]),reactExports.useEffect(()=>(ye&&(document.addEventListener("mousemove",Tt),window.addEventListener("selectstart",Ht)),()=>{document.removeEventListener("mousemove",Tt),window.removeEventListener("selectstart",Ht)}),[lt,ot,je,We,Tt,Dt,Ie,ke,ye,ge,tt,xe]),reactExports.useEffect(()=>{!ye&&ke&&(Ue(!1),mt(!1))},[ye,ke]);const Bt=reactExports.useCallback(It=>{var yr;if(document.body.style.cursor="grabbing",ge||!gt.current){document.body.style.cursor="auto";return}Se.current=Dt;const zt=gt.current.parentNode,Pt=window.getComputedStyle(zt).left.match(/(-?[0-9\.]+)/g);if(zt.style.left=`${Pt[0]}px`,St.current=Math.abs(Number(Pt[0])),Ke({x:It.clientX,y:It.clientY}),Je.current=gt.current,nt.current=gt.current.offsetWidth,It.button===ButtonCode.MIDDLE){const Lt=(yr=gt.current)==null?void 0:yr.dataset.index;Lt&&oe[Number(Lt)].isClosable&&handleMouseDown(It,{[ButtonCode.MIDDLE]:ce}),document.body.style.cursor="auto";return}if(vt.current=gt.current,!vt.current)return;const Vt=vt.current.parentNode,vr=Vt==null?void 0:Vt.childNodes;Ot(vr),Ge(Vt),Ne(!0),Ye(oe[+vt.current.dataset.index]),Qe(+vt.current.dataset.index),Te(+vt.current.dataset.index),ct(It.pageX),ft(It.pageY);const qt=vt.current.getBoundingClientRect();Mt.current=qt.left;const er={blockPointer:!1,tab:vt.current,event:It.nativeEvent,originalPositionX:It.pageX,originalPositionY:It.pageY,tabInitialLeftPosition:Mt.current};Xe.current&&(Xe.current.style.top=`${er.tab.offsetTop+er.tab.offsetHeight}px`),Re.current=!0},[vt.current,je,We,lt,ot,ye,me,Xe,ge,$e]);return jsxRuntimeExports.jsx("div",{className:cx(styles$O.container,{displayNone:(ue==null?void 0:ue.id.includes("main"))&&ue.content.length===1&&!xe},K,{[styles$O.sliding]:xe&&gt.current!==Je.current}),"data-index":ne,"data-tid":Ae?"draggable-tab-active":"draggable-tab",onMouseDown:It=>Bt(It),onMouseUp:()=>{nt.current=0},ref:gt,children:J})},EditorTabs=({activeTabs:K,activeTab:J,tabs:ne,onChangeTab:oe,onCloseTab:ce,stackRef:ue})=>{var Re,Be;const{t:Ae}=useTranslation(),{state:pe,action:ve}=useAppContext(),{state:me,action:ge}=useDndContext(),{config:ye,selectedGridRow:xe,leftMouseBtnClicked:_e}=me,{updateConfig:$e}=ge,{debounce:Ie}=useDebounce(200),Fe=reactExports.useRef(null),je=useSelector$1(selectMetaData).data.DisplayKind===SchemaDisplayKind.Dashboard,We=Ne=>{const{label:Ue,id:Ge,isClosable:Ye,key:Qe,disableActions:Te}=Ne;return{isActive:Ge===J||(K==null?void 0:K.some(Ke=>Ke===Ge))||!1,label:Ae(Ue),isClosable:Ye,disableActions:Te,role:"tab",isRecordTab:Qe.includes(EditorTabsEnum.EDITOR_TRANSITION),isDashboardTab:je,isDnDTab:!0,onClick:()=>{J!==Ge&&oe(Ne),J!==Ge&&!pe.showLineHider&&ve.setShowLineHiderAction(!0)},onCloseTab:Ke=>{var rt;if(Ke==null||Ke.stopPropagation(),J===Ge&&!pe.showLineHider&&ve.setShowLineHiderAction(!0),Ye!==!1&&(ce==null||ce(Ne)),ue&&(xe!=null&&xe.type)){const it=structuredClone(ye),at=findParent(it,[Ne.id]),lt=at.content.findIndex(dt=>dt.id===Ne.id),ct=findTarget(at,EditorTabsEnum.EDITOR);ct&&Ne.isActive&&isGridTabDataType(ct)?ct.isActive=!0:at.content.length-1>lt&&Ne.isActive?at.content[lt+1].isActive=!0:at.content.length>1&&at.content.length-1===lt&&Ne.isActive&&(at.content[lt-1].isActive=!0),at.content.splice(lt,1);const ot=correctContent(it);ot.id=`${ot.type}-${(rt=ot.content[0])==null?void 0:rt.key.replace(/\s/g,"")}`,ot.key=ot.id;const ft=getParsedConfig(ot,!0);$e(ot),ge.saveUiTypeData({simplifiedConfig:ft})}}}},ze=(Re=ue==null?void 0:ue.content.find(Ne=>Ne.isActive&&!Ne.isCurrentlyDragging))==null?void 0:Re.id,Xe=ne.map(Ne=>({...Ne,...We(Ne),closable:Ne.isClosable})),Je=Ne=>{const Ue=Xe.find(Ge=>Ge.id===Ne);Ue==null||Ue.onClick()},nt=Ne=>{var Ge;const Ue=Xe.find(Ye=>Ye.id===Ne);(Ge=Ue==null?void 0:Ue.onCloseTab)==null||Ge.call(Ue)},et=reactExports.useRef(null),tt=reactExports.useRef(ue&&((Be=me.stacksTabsScrollPosition.current)==null?void 0:Be[ue==null?void 0:ue.id])||0);reactExports.useEffect(()=>{const Ne=Fe.current;if(!Ne)return;const Ue=new ResizeObserver(()=>{ze&&Ie({fn:()=>Se(ze,!1)})});return Ue.observe(Ne),()=>Ue.disconnect()},[ze]),reactExports.useEffect(()=>{var Ne,Ue;!et.current||!me.isLayoutRestored||(((Ue=(Ne=et.current)==null?void 0:Ne.firstChild)==null?void 0:Ue.firstChild).style.left="0px",tt.current=0,ue&&(me.stacksTabsScrollPosition.current[ue.id]=tt.current),ge.setIsLayoutRestored(!1))},[me.isLayoutRestored]),reactExports.useEffect(()=>{var Ue,Ge,Ye,Qe,Te,Ke;const Ne=ue==null?void 0:ue.content.findIndex(rt=>rt.isActive);if(Ne>=0&&et.current){const rt=(Ge=(Ue=et.current.firstChild)==null?void 0:Ue.firstChild)==null?void 0:Ge.childNodes[Ne],it=rt.getBoundingClientRect(),at=((Ye=et.current)==null?void 0:Ye.firstChild).offsetWidth;if(at<it.width||at===0&&it.width===0)return;const lt=at>rt.offsetLeft+it.width,ct=lt?0:at-rt.offsetLeft-it.width,ot=!lt&&((Qe=et.current.querySelector(".ant-tabs-nav-operations"))==null?void 0:Qe.getBoundingClientRect().width)||0;((Ke=(Te=et.current)==null?void 0:Te.firstChild)==null?void 0:Ke.firstChild).style.left=`${ct-ot}px`,tt.current=ct-ot}return()=>{var rt;et.current&&(((rt=et.current.firstChild)==null?void 0:rt.firstChild).style.left="0px"),ue&&(me.stacksTabsScrollPosition.current[ue.id]=0)}},[]),reactExports.useEffect(()=>{var Ue,Ge;const Ne=Ye=>{var Te,Ke,rt,it,at;const Qe=((Ke=(Te=et.current)==null?void 0:Te.firstChild)==null?void 0:Ke.firstChild).offsetWidth-((rt=et.current)==null?void 0:rt.firstChild).offsetWidth;tt.current>=0&&Ye.deltaY<0||-tt.current>=Qe&&Ye.deltaY>0||(tt.current-=Ye.deltaY,tt.current>0?tt.current=0:Qe+tt.current<Ye.deltaY&&Ye.deltaY>0&&(tt.current-=Qe+tt.current),((at=(it=et.current)==null?void 0:it.firstChild)==null?void 0:at.firstChild).style.left=`${tt.current}px`)};return(Ge=(Ue=et.current)==null?void 0:Ue.firstChild)==null||Ge.addEventListener("wheel",Ne),()=>{var Ye,Qe;(Qe=(Ye=et.current)==null?void 0:Ye.firstChild)==null||Qe.removeEventListener("wheel",Ne)}},[et.current,tt.current]),reactExports.useEffect(()=>{var Ne,Ue;((Ue=(Ne=et.current)==null?void 0:Ne.firstChild)==null?void 0:Ue.firstChild).style.left=`${tt.current}px`},[et.current]);const st=Ne=>{var Ge,Ye,Qe;const Ue=Xe.findIndex(Te=>Te.id===Ne);return(Qe=(Ye=(Ge=et.current)==null?void 0:Ge.firstChild)==null?void 0:Ye.firstChild)==null?void 0:Qe.children[Ue]},qe=(Ne,Ue)=>{var Qe;const Ge=((Qe=et.current)==null?void 0:Qe.firstChild).offsetWidth;return Ge>Ne.offsetLeft+Ue.width?0:Ge-Ne.offsetLeft-Ue.width},Se=(Ne,Ue)=>{var Te,Ke;const Ge=st(Ne);if(!Ge)return;const Ye=Ge.getBoundingClientRect();Ue&&Je(Ne);const Qe=qe(Ge,Ye);((Ke=(Te=et.current)==null?void 0:Te.firstChild)==null?void 0:Ke.firstChild).style.left=`${Qe}px`,tt.current=Qe,ue&&(me.stacksTabsScrollPosition.current[ue.id]=tt.current)};return jsxRuntimeExports.jsx("div",{ref:Fe,children:jsxRuntimeExports.jsx(DropBox,{position:DropBoxEnum.TOP,stackRef:ue,className:"drop-box-editor",children:jsxRuntimeExports.jsx(wF,{testId:"editor-tabs",className:cx("non-scrollable",{draggable:_e}),variant:"card",items:Xe,activeKey:ze,onClose:nt,renderTabBar:(Ne,Ue)=>{const Ge={...Ne,ref:et};return Ge.onTabClick=Ye=>Se(Ye,!0),jsxRuntimeExports.jsx(Ue,{...Ge,children:Ye=>{const Qe=Xe.findIndex(Te=>Te.id===Ye.key);return jsxRuntimeExports.jsx(DnDDraggable,{index:Qe,openedTabs:ne,onCloseTab:Xe[Qe].onCloseTab,stackRef:ue,className:"drop-box-editor__tab",isActiveTab:Xe[Qe].isActive,children:Ye},Ye.key)}})}})})})};var RecordEvent=(K=>(K.UpdateRecord="Update",K))(RecordEvent||{});const recordEventManager=createEventManager(),container$o="_container_1xmi4_1",content$9="_content_1xmi4_10",styles$N={container:container$o,content:content$9},useAppSelector=useSelector$1,useAppDispatch=()=>useDispatch$1(),button="_button_larhw_1",styles$M={button},CancelButton=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectActiveDataset$1),{action:ne}=useDndContext(),oe=ce=>{ce.stopPropagation(),handlerApi.cancelAll(J).then(ue=>{if(!ue.length)return;const Ae=ue.map(pe=>pe.TaskRunId);ne.setAllCanceledHandlerIds(Ae),ne.setAllTasksStatuses(ue),ne.changeRecordStatuses(ue)}).catch(toast.error)};return jsxRuntimeExports.jsx(mf,{title:K("header.cancelButton.tooltip"),children:jsxRuntimeExports.jsx(rl,{onClick:oe,type:"danger",variant:"ghost",testid:"cancel-all-handlers-btn",className:styles$M.button,children:K("gridToolbar.stopAll")})})},text="_text_89kl0_1",styles$L={text},HighlightTextMatch=({text:K,searchText:J,isTypesSearch:ne=!1})=>{const oe=new RegExp(`(${escapeStringRegexp(J)})`,"gi"),ce=me=>me.replaceAll(" ","").toLowerCase(),ue=ce(J),Ae=(me,ge)=>jsxRuntimeExports.jsx("span",{className:styles$L.text,children:me},ge);if(!J)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K});const pe=K.split(" ").map(me=>me.charAt(0)).join("").toLowerCase(),ve=()=>{const me=[];let ge=J;return K.split(" ").forEach((ye,xe)=>{var _e;ye[0].toLowerCase()===((_e=ge[0])==null?void 0:_e.toLowerCase())?(ge=ge.substring(1),me.push(Ae(ye[0],xe),`${ye.substring(1)} `)):me.push(`${ye} `)}),me};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ne&&pe.includes(J.toLowerCase())?ve().map(me=>me):K.split(oe).map((me,ge)=>ce(me)===ue?Ae(me,ge):me)})},getHandlerIcon=(K,J)=>{const ne=J?jsxRuntimeExports.jsx(LA,{}):jsxRuntimeExports.jsx(nD,{});switch(K){case LoadingStatusesEnum.LOADING:return jsxRuntimeExports.jsx(D_,{className:"handler-loading-icon"});case LoadingStatusesEnum.SUCCESS:return jsxRuntimeExports.jsx(j_,{className:"handler-success-icon"});case LoadingStatusesEnum.ERROR:return jsxRuntimeExports.jsx(PA,{className:"handler-error-icon"});default:return ne}},cancelIcon="_cancelIcon_cjq34_1",title$2="_title_cjq34_9",loadingStatus="_loadingStatus_cjq34_14",successStatus="_successStatus_cjq34_18",errorStatus="_errorStatus_cjq34_22",dropdownMenu="_dropdownMenu_cjq34_26",itemsList="_itemsList_cjq34_32",dropdownItem="_dropdownItem_cjq34_38",styles$K={cancelIcon,title:title$2,loadingStatus,successStatus,errorStatus,dropdownMenu,itemsList,dropdownItem},HandlersDropdown=({handlers:K,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce=!1,isSearch:ue,searchText:Ae="",children:pe,isOpenMenu:ve,setIsOpenMenu:me,setSearch:ge})=>{const{t:ye}=useTranslation(),{state:xe}=useDndContext(),_e=(Fe,ke)=>{oe(Fe,ke)},$e=Fe=>Fe.map(ke=>{var Se;const{isStatic:je,key:We,id:ze,name:Xe,isDisable:Je,comment:nt,isPinned:et,isHidden:tt}=ke,st=(Se=xe.executedHandlersInfoByRecord[We])==null?void 0:Se.status,qe=st===LoadingStatusesEnum.LOADING;return{key:ze,prefix:getHandlerIcon(st,je),suffix:qe&&!env$1.isLocalBuild?jsxRuntimeExports.jsx(Pp,{className:styles$K.cancelIcon,onClick:()=>_e(ze,je)}):void 0,title:ue?jsxRuntimeExports.jsx(HighlightTextMatch,{text:Xe,searchText:Ae}):Xe,titleClassName:cx(styles$K.title,{[styles$K.loadingStatus]:qe,[styles$K.successStatus]:st===LoadingStatusesEnum.SUCCESS,[styles$K.errorStatus]:st===LoadingStatusesEnum.ERROR}),description:nt||"",isDisabled:Je||ce,isHidden:tt,onClick:()=>{!qe&&!Je&&!ce&&(ne(ke),ge==null||ge(""),ve&&me(!1))},actions:jsxRuntimeExports.jsx(rl,{variant:"ghost",iconAfter:et?jsxRuntimeExports.jsx(fB,{}):jsxRuntimeExports.jsx(vB,{}),type:et?"primary":"secondary",onClick:()=>J(ke),disabled:ce}),className:styles$K.dropdownItem}}),Ie=()=>jsxRuntimeExports.jsx("div",{className:styles$K.dropdownMenu,children:K!=null&&K.length?jsxRuntimeExports.jsx(EF,{items:$e(K),maxCharacters:80,className:styles$K.itemsList}):ye("typeToolbar.emptyRunHanlers")});return jsxRuntimeExports.jsx(Y_,{open:ve,onOpenChange:me,dropdownRender:Ie,children:pe})};var HandlersTypeEnum=(K=>(K.MainGrid="MainGrid",K.Editor="Editor",K))(HandlersTypeEnum||{}),HandlerContentTypeEnum=(K=>(K.BinaryContent="FileData",K.UiNavigationLink="UiNavigationLink",K.ExternalLink="ExternalLink",K))(HandlerContentTypeEnum||{});const handlerContainer="_handlerContainer_19ams_1",handlerInput="_handlerInput_19ams_6",styles$J={handlerContainer,handlerInput},RunHandlers=({handlers:K=[],onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce=!1,lastHandlerStatus:ue,selectedRowKey:Ae,handlersType:pe})=>{const{t:ve}=useTranslation(),[me,ge]=reactExports.useState(""),[ye,xe]=reactExports.useState(!1),_e=Fe=>{ye||xe(!0),ge(Fe)},$e=K.filter(Fe=>Fe.name.toLocaleLowerCase().includes(me.toLocaleLowerCase())),Ie=()=>!ue||isEmpty$2(ue)?jsxRuntimeExports.jsx(gf$1,{}):isString$3(ue)?getHandlerIcon(ue):ue.hasOwnProperty(Ae)?getHandlerIcon(ue[Ae]):getHandlerIcon(ue.static);return jsxRuntimeExports.jsx(HandlersDropdown,{handlers:$e,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce,isSearch:!0,searchText:me,isOpenMenu:ye,setIsOpenMenu:xe,setSearch:ge,children:jsxRuntimeExports.jsx("div",{className:styles$J.handlerContainer,"data-tid":"run-handlers-dropdown",children:jsxRuntimeExports.jsx(Ml,{variant:"outlined",status:"default",prefix:Ie(),suffix:ye?jsxRuntimeExports.jsx(Ck,{}):jsxRuntimeExports.jsx(Rp,{}),placeholder:ve(pe===HandlersTypeEnum.MainGrid?"gridToolbar.commonTasks":"gridToolbar.recordTasks")||"",className:styles$J.handlerInput,value:me,onChange:_e,testId:"run-handlers-dropdown-input"})})})},defaultRenderName=K=>K,Handler=({handler:K,onCancelHandler:J,handlerExecutionInfo:ne,onRunHandler:oe,readOnly:ce,renderName:ue=defaultRenderName})=>{const Ae=ne==null?void 0:ne.status,pe=Ae===LoadingStatusesEnum.LOADING,ve=me=>{me.stopPropagation(),J(K.id,K.isStatic)};return jsxRuntimeExports.jsxs("div",{onClick:()=>!pe&&!K.isDisable&&!ce&&oe(),className:cx("pinned-handler",{"pinned-handler__loading":pe,"pinned-handler__disabled":K.isDisable||ce,"pinned-handler__success":Ae===LoadingStatusesEnum.SUCCESS,"pinned-handler__error":Ae===LoadingStatusesEnum.ERROR}),"aria-hidden":!0,children:[jsxRuntimeExports.jsx(mf,{title:K.name||K.comment,children:jsxRuntimeExports.jsxs("div",{className:"pinned-handler__content",children:[getHandlerIcon(ne==null?void 0:ne.status,K.isStatic),jsxRuntimeExports.jsx("span",{className:cx(pe?"pinned-handler__content-name-loading":"pinned-handler__content-name"),children:ue(K.name)})]})}),pe&&!env$1.isLocalBuild?jsxRuntimeExports.jsx("div",{className:"pinned-handler__cancel-icon",onClick:ve,"aria-hidden":!0,children:jsxRuntimeExports.jsx(Pp,{})}):null]})},container$n="_container_z0tyt_1",hiddenHandlers="_hiddenHandlers_z0tyt_8",visibleElements="_visibleElements_z0tyt_15",visibleButton="_visibleButton_z0tyt_22",styles$I={container:container$n,hiddenHandlers,visibleElements,visibleButton},PinnedHandlers=({pinnedHandlers:K,onHandlerClick:J,onCancelHandler:ne,onPinHandler:oe,isReadOnly:ce=!1})=>{const{state:ue}=useDndContext(),{elementsRef:Ae,visibleElements:pe,hiddenElements:ve,isDropdownButtonVisible:me,dropdownRef:ge,measurementRef:ye}=useElementsDimension({elements:K,elementWidth:ElementWidth.HANDLERS,elementGap:10}),[xe,_e]=reactExports.useState(!1),$e=Ie=>({handler:Ie,handlerExecutionInfo:ue.executedHandlersInfoByRecord[Ie.key],onRunHandler:()=>J(Ie),onCancelHandler:ne});return jsxRuntimeExports.jsxs("div",{className:styles$I.container,children:[jsxRuntimeExports.jsx("div",{ref:ye,className:styles$I.hiddenHandlers,children:K.map(Ie=>reactExports.createElement(Handler,{...$e(Ie),key:Ie.id,readOnly:ce}))}),jsxRuntimeExports.jsx("div",{ref:Ae,className:styles$I.visibleElements,children:pe.map(Ie=>reactExports.createElement(Handler,{...$e(Ie),key:Ie.id,readOnly:ce}))}),me&&jsxRuntimeExports.jsx("div",{ref:ge,className:styles$I.visibleButton,children:jsxRuntimeExports.jsx(HandlersDropdown,{handlers:ve,onPinHandler:oe,onHandlerClick:J,onCancelHandler:ne,isReadOnly:ce,isOpenMenu:xe,setIsOpenMenu:_e,children:jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",iconAfter:jsxRuntimeExports.jsx(P_,{})})})})]})},container$m="_container_1cshp_1",hidden="_hidden_1cshp_10",styles$H={container:container$m,hidden},HandlersContainer=({handlers:K,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce=!1,lastHandlerStatus:ue,runningHandlerRunIds:Ae,selectedRowKey:pe,pinnedHandlers:ve,handlersType:me})=>{const ge=ve.map(ye=>K==null?void 0:K.find(xe=>xe.id===ye)).filter(ye=>isDefined$2(ye));return jsxRuntimeExports.jsxs("div",{className:styles$H.container,children:[jsxRuntimeExports.jsx(RunHandlers,{handlers:K,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce,lastHandlerStatus:ue,selectedRowKey:pe,handlersType:me}),ve&&jsxRuntimeExports.jsx(PinnedHandlers,{pinnedHandlers:ge,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce}),Ae.length!==0&&jsxRuntimeExports.jsx(CancelButton,{})]})},EditorHandler=({partSchemaName:K,schemaType:J,selectedRecordType:ne,onSubmit:oe,onCancel:ce})=>{var ye;const{t:ue}=useTranslation(),{getSchema:Ae}=useEditorRequest(),[pe,ve]=reactExports.useState(null),me=(ye=pe==null?void 0:pe.schema[pe==null?void 0:pe.rootSchemaName].Elements)==null?void 0:ye.every(xe=>xe.Optional);reactExports.useEffect(()=>{(ne||J)&&K&&Ae.fetch({name:ne||J}).then(xe=>{var _e;ve({schema:xe.typeList,rootSchemaName:((_e=Object.keys(xe.typeList))==null?void 0:_e.find($e=>$e.endsWith(K)))||"",isHandler:!0})})},[J,K]);const ge=({data:xe})=>oe==null?void 0:oe(xe);return Ae.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):pe?jsxRuntimeExports.jsx(EditorInstance,{...pe,i18n:{submitBtnText:ue("buttons.execute")},onCancel:ce,onSubmit:ge,isSubmitDisabled:!me,isCancelDisabled:!1}):jsxRuntimeExports.jsx(RF,{})},HandlerWithParamsModal=({schemaType:K,selectedRowType:J,selectedHandlerWithParams:ne,onExecuteHandler:oe,onClose:ce})=>{const ue=Ae=>{oe(ne,Ae),ce()};return jsxRuntimeExports.jsx(Ho,{open:!0,size:"lg",defaultHeight:285,title:ne.name,onClose:ce,children:jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(EditorHandler,{schemaType:K,selectedRecordType:J,partSchemaName:`${ne.id}Args`,onCancel:ce,onSubmit:ue})})})},getRunHandlerKey=(K,J,ne,oe)=>`${K}-${ne?"static":oe}-${J}`,getRunHandlersBySchema=(K,J,ne,oe=[],ce,ue)=>{var ve,me;const Ae=((me=(ve=K.Declare)==null?void 0:ve.Handlers)==null?void 0:me.filter(ge=>(ce||!ge.Hidden)&&ge.Type===HandlerType.JOB).map(ge=>({name:ge.Label,id:ge.Name,type:ge.Type,isStatic:ge.Static,hasParams:!!ge.Params,key:getRunHandlerKey(ge.Name,J,ge.Static,ne),isPinned:!!(oe!=null&&oe.includes(ge.Name)),isDisable:ge.Static?!1:!ne,isHidden:!1,executedInfo:void 0,return:ge.Return,comment:ge.Comment})))||[],pe=Ae==null?void 0:Ae.map(ge=>({...ge,isHidden:!ge.isStatic}));return(ue==null?void 0:ue.length)===0?pe:Ae},updateCurrectHandlers=(K,J,ne,oe=[],ce)=>K.map(ue=>({...ue,key:getRunHandlerKey(ue.id,J,ue.isStatic,ne),isPinned:!!(oe!=null&&oe.includes(ue.id)),isDisable:ue.isStatic?!1:!ne,isHidden:(ce==null?void 0:ce.length)===0&&!ue.isStatic})),downloadDecodedData=(K,J)=>{const ne=atob(K);if(!ne)return;const oe=new Array(ne.length);for(let pe=0;pe<ne.length;pe++)oe[pe]=ne.charCodeAt(pe);const ce=new Uint8Array(oe),ue=new Blob([ce],{type:"application/octet-stream"}),Ae=document.createElement("a");Ae.href=URL.createObjectURL(ue),Ae.download=J,document.body.appendChild(Ae),Ae.click(),Ae.remove()},downloadJsonObject=(K,J)=>{const ne=JSON.stringify(K,null,2),oe=new Blob([ne],{type:"application/json"}),ce=document.createElement("a");ce.href=URL.createObjectURL(oe),ce.download=J,document.body.appendChild(ce),ce.click(),ce.remove()},keysPicker=(K,...J)=>{const ne=[];return J.forEach(oe=>{K[oe]&&ne.push(K[oe])}),ne.find(oe=>oe!=null)},HandlersBlock=({selectedRow:K,selectedRangeRows:J,activeTypeTab:ne,handlersType:oe,schema:ce,pinnedHandlers:ue,fetchEntities:Ae,data:pe,handlers:ve,onChangeHandlers:me})=>{var Rt;const ge=reactExports.useRef(!1),{state:ye,action:xe}=useDndContext(),_e=useSelector$1(selectActiveDataset$1),{action:$e,state:Ie}=useAppContext(),Fe=useSelector$1(selectUser),ke=useSelector$1(selectIsReadonly),je=useSelector$1(selectFullScreenMode),{eventsBatch:We}=useSSEContext(),ze=useAppDispatch(),{t:Xe}=useTranslation(),{fetch:Je}=useRequest(schemaApi.getType),{setActiveTab:nt}=useTabParams(),{schemaTypes:et}=useSelector$1(selectSchemaTypes),tt=reactExports.useRef({}),[st,qe]=reactExports.useState(),[Se,Re]=reactExports.useState([]),Be=!!(ve!=null&&ve.length),Ne=((Rt=Object.keys(J||{}))==null?void 0:Rt.length)>1,Ue=ke||ye.isTypeReadOnly,Ge=reactExports.useMemo(()=>structuredClone(We),[We]),Ye=Fe==null?void 0:Fe.roles.includes(UserRole.Developer);reactExports.useEffect(()=>{if(ce){const gt=getRunHandlersBySchema(ce,oe,K.key,ue,Ye,pe);gt!=null&&gt.length&&me($t=>$t.length===0?gt??[]:updateCurrectHandlers($t,oe,K.key,ue,pe))}},[K.key,ue,oe,ce,Ye,pe]);const Qe=({runHandler:gt,newEvent:$t,TaskRunId:pt,updatedExecutedHandlerData:vt})=>{var St;const Mt=gt.return;if(ye.activeTaskRunIds.includes(pt)){if(xe.setActiveTaskRunIds(_t=>_t.filter(Xt=>Xt!==pt)),((St=Mt==null?void 0:Mt.Data)==null?void 0:St.Name)===HandlerContentTypeEnum.UiNavigationLink)return $t.RecordTypeName===ne&&!tt.current[pt]&&(tt.current={...tt.current,[pt]:!0},ot(pt,gt)),vt;tt.current[pt]||(tt.current={...tt.current,[pt]:!0},it(pt,gt.name))}};reactExports.useEffect(()=>{if(!Ge.length)return;const gt=[];let $t={...ye.newRunHandlers};xe.setExecutedHandlersInfoByRecord(pt=>{var Mt,St;let vt={...pt};for(const _t of Ge)if(SSE_EVENT_TASKS_TYPES.includes(_t.EventKind)&&((Mt=$t[oe])!=null&&Mt[_t.TaskRunId])){const{TaskRunId:Xt,RecordKey:Tt,Status:Dt}=_t,Ht=$t[oe][Xt].executableHandler,Bt=Dt??RunHandlerStatusCodeEnum.Running;vt={...vt,[getRunHandlerKey(Ht.id,oe,Ht.isStatic,Tt)]:{data:{},status:rt(Bt),error:""}},xe.changeRecordStatuses([{Key:Tt,StatusCode:Bt,TaskRunId:Xt}]),$t={...$t,[oe]:{...$t[oe],[Xt]:{...(St=$t[oe])==null?void 0:St[Xt],statusCode:Bt}}},_t.EventKind==SSEEventKindEnum.TASK_FINISHED&&gt.push(_t.TaskRunId),(Bt===RunHandlerStatusCodeEnum.Completed||Bt===RunHandlerStatusCodeEnum.Cancelled)&&isDefined$2(Ht.return)&&Qe({runHandler:Ht,newEvent:_t,TaskRunId:Xt,updatedExecutedHandlerData:vt})}return vt}),xe.setNewRunHandlers(pt=>({...pt,...$t})),Re(pt=>pt.filter(vt=>!gt.includes(vt)))},[Ge]),reactExports.useEffect(()=>{var pt,vt,Mt;if(!Ge.length||Object.keys(ye.recordsTaskRunIds).length===0)return;let gt=structuredClone(ye.newRunHandlers),$t=structuredClone(ye.recordsTaskRunIds);for(let St=Ge.length-1;St>=0;St--){const _t=Ge[St];if(_t.EventKind===SSEEventKindEnum.TASK_FINISHED&&((pt=gt[oe])!=null&&pt[_t.TaskRunId])){const Xt=_t.Status===RunHandlerStatusCodeEnum.Failed||_t.Status===RunHandlerStatusCodeEnum.Cancelled,Tt=Xt?LoadingStatusesEnum.ERROR:LoadingStatusesEnum.SUCCESS,Dt=(vt=gt[oe])==null?void 0:vt[_t.TaskRunId].executableHandler;env$1.isRefreshOnHandlerSuccess&&Se.length&&!(Dt!=null&&Dt.return)&&!Xt&&_t.RecordKey===K.key&&$t[_t.RecordKey].includes(_t.TaskRunId)&&(Ae==null||Ae()),$t={...$t,[_t.RecordKey]:(Mt=$t[_t.RecordKey])==null?void 0:Mt.filter(Ht=>Ht!==_t.TaskRunId)},_t.TaskRunId===ye.lastRunningTaskRunId&&Te(_t.RecordKey,Tt)}}xe.setRecordsTaskRunIds(St=>({...St,...$t}))},[Ge]),reactExports.useEffect(()=>{var gt;if(!(ge.current||!(ve!=null&&ve.length))&&oe===HandlersTypeEnum.MainGrid&&(pe==null?void 0:pe.length)===0&&ue!=null&&ue.length){ge.current=!0;const $t=(ve==null?void 0:ve.filter(vt=>vt.isStatic).map(vt=>vt.id))??[],pt=ue.filter(vt=>$t.includes(vt));(gt=xe.saveUiTypeData)==null||gt.call(xe,{handlers:pt}),xe.updatePinnedHandlers(pt)}},[pe==null?void 0:pe.length,oe,ue,ve]);const Te=(gt,$t)=>{xe.setLastHandlerStatus(pt=>{const vt=isObject$9(pt[oe])??{},Mt=!gt&&oe===HandlersTypeEnum.Editor?{...Object.fromEntries(Object.keys(vt).map(St=>[St,$t])),static:$t}:{...pt[oe],[gt]:$t};return{...pt,[oe]:oe===HandlersTypeEnum.MainGrid?$t:Mt}})},Ke=()=>je?env$1.isFullScreenHandlers:Be&&!ke,rt=gt=>{switch(gt){case RunHandlerStatusCodeEnum.Completed:return LoadingStatusesEnum.SUCCESS;case RunHandlerStatusCodeEnum.Failed:case RunHandlerStatusCodeEnum.Cancelled:return LoadingStatusesEnum.ERROR;default:return LoadingStatusesEnum.LOADING}},it=(gt,$t)=>{const pt={dataset:_e,taskRunIds:[gt]};handlerApi.runTasksResult(pt).then(vt=>{const Mt=vt[0].Result;if(!isNullable(Mt))if(Mt._t===HandlerContentTypeEnum.BinaryContent)downloadDecodedData(Mt.FileBytes,Mt.Name||"");else if(Mt._t.endsWith(HandlerContentTypeEnum.ExternalLink))window.open(Mt.Url,"_blank","noopener,noreferrer");else{const _t=`${DateFormatUtility.create().format(DateFormatEnum.DATE_TIME_MS)} ${vt[0].Key} ${$t}`;downloadJsonObject(Mt,_t)}})},at=(gt,$t)=>{var St;const pt=J&&((St=Object.values(J))==null?void 0:St.map(_t=>({...gt,key:getRunHandlerKey(gt.id,oe,gt.isStatic,_t._key),rowKey:_t._key}))),vt=[],Mt=()=>{switch(!0){case gt.isStatic:return;case vt.length!==0:return vt;case isDefined$2(K.key):return[K.key];default:return}};if(pt)for(const _t of pt)vt.push(_t.rowKey);handlerApi.runTasks({dataset:_e,type:ne,keys:Mt()||[],method:gt.id,args:$t||{},userName:Fe==null?void 0:Fe.username}).then(_t=>{var It;const Xt=_t.map(zt=>({...zt,StatusCode:RunHandlerStatusCodeEnum.Submitted})),Tt={},Dt={...ye.executedHandlersInfoByRecord},Ht=[];Tt[oe]||(Tt[oe]={});for(const zt of _t)Tt[oe][zt.TaskRunId]={key:zt.Key,statusCode:RunHandlerStatusCodeEnum.Submitted,executableHandler:gt},Dt[getRunHandlerKey(gt.id,oe,gt.isStatic,zt.Key)]={data:{},status:rt(RunHandlerStatusCodeEnum.Submitted),error:""},Ht.push(zt.TaskRunId);xe.setRecordsTaskRunIds(zt=>{const Pt={};for(const Vt of _t)Pt[Vt.Key]=[...zt[Vt.Key]??[],Vt.TaskRunId];return{...zt,...Pt}}),xe.setAllHandlerTasksStatus({tableName:ne,handlerId:gt.id,data:_t,statusCode:RunHandlerStatusCodeEnum.Submitted}),Re(zt=>[...zt,...Ht]);const Bt=Ht.at(-1);Bt&&((It=xe.setLastRunningTaskRunId)==null||It.call(xe,Bt)),xe.setActiveTaskRunIds(zt=>[...zt,...Ht]),xe.setNewRunHandlers(zt=>{const Pt=structuredClone(zt);for(const Vt in Tt)Object.hasOwn(Pt,Vt)?Pt[Vt]={...Pt[Vt],...Tt[Vt]}:Pt[Vt]={...Tt[Vt]};return Pt}),xe.setExecutedHandlersInfoByRecord(Dt),Te(gt.isStatic?void 0:K.key,LoadingStatusesEnum.LOADING),xe.changeRecordStatuses(Xt,!0)}).catch(()=>{xe.setAllHandlerTasksStatus({tableName:ne,handlerId:gt.id,data:[],statusCode:RunHandlerStatusCodeEnum.Failed})})},lt=gt=>Je({name:gt}).then($t=>{ne!==gt&&$e.callResetDndContextMethod(gt),!Ie.showLineHider&&$e.setShowLineHiderAction(!0);const pt=$t.typeList[$t.rootType],vt=[...(et==null?void 0:et.Tables)??[],...(et==null?void 0:et.Types)??[]].find(Mt=>Mt.id===gt);if(ze(updateActiveTypeMetadata(pt)),vt){const{id:Mt,label:St,tableKey:_t,tableName:Xt}=vt;ze(openTab({id:Mt,key:Mt,label:St,tableKey:_t,tableName:Xt}))}nt(gt)}).catch(toast.error),ct=()=>{setTimeout(()=>{externalStorage.clearSelectedRow(),externalStorage.clearViewerActiveTab()},2e3)},ot=(gt,$t)=>{const pt={dataset:_e,taskRunIds:[gt]};return handlerApi.runTasksResult(pt).then(vt=>{const Mt=vt[0].Result,St=keysPicker(Mt,"Type_","type_");if(St&&St==ne&&lt(St),Mt!=null&&Mt.View||Mt!=null&&Mt.view){const Xt=structuredClone(ye.config),Tt=findParent(Xt,[EditorTabsEnum.EDITOR]);if(Tt)for(const Dt of Tt.content)Dt.isActive=Dt.id===((Mt==null?void 0:Mt.View)||(Mt==null?void 0:Mt.view));xe.updateConfig(Xt)}const _t=()=>{const Xt=Xe("grid.recordNavigationModal.content",{handlerName:$t.name}),Tt=Mt!=null&&Mt.Key?Xe("grid.recordNavigationModal.forRecordKey",{recordKey:Mt==null?void 0:Mt.Key}):"",Dt=Xe("grid.recordNavigationModal.viewResults");return`${Xt}${Tt}${Dt}`};Ho.info({testId:"record-navigation",title:Xe("grid.recordNavigationModal.title",{handlerName:$t.name}),content:_t(),defaultHeight:200,okText:Xe("buttons.proceed"),onOk:Xt=>{var Dt,Ht;const Tt=St===ne;if(St){const Bt=keysPicker(Mt,"key","Key");Bt&&(Tt?(xe.selectGridRowKey(Bt),(Ht=(Dt=ye.headersRef.current)==null?void 0:Dt.updateMarkedIndexOnRowChange)==null||Ht.call(Dt,Bt)):externalStorage.setSelectedRow(Bt)),Tt||lt(St)}if(Mt!=null&&typeof Mt!="string"&&Mt){const Bt=keysPicker(Mt,"view","View");Bt&&externalStorage.setViewerActiveTab(Bt)}ct(),Xt()}})})},ft=(gt,$t)=>{var Mt;if(!K.key&&!$t)return;const pt=$t?gt:K.key??"",vt=(Mt=ye.toolbarHandler[ne][gt][pt])==null?void 0:Mt.TaskRunId;handlerApi.cancel({dataset:_e,taskRunIds:[vt]})},dt=gt=>ue.includes(gt)?ue.filter($t=>$t!==gt):[gt,...ue],mt=gt=>{me($t=>{const pt=gt.id,vt=$t==null?void 0:$t.map(Mt=>Mt.id===pt?{...Mt,isPinned:!Mt.isPinned}:Mt);return vt&&(oe===HandlersTypeEnum.MainGrid&&xe.saveUiTypeData({handlers:dt(pt)}),oe===HandlersTypeEnum.Editor&&xe.updateRecordPinnedHandlers(dt(pt))),vt})},kt=gt=>{var $t;Ho.info({testId:"executing-handlers",title:Xe("confirmationModal.executingHandlers.title"),content:Xe("confirmationModal.executingHandlers.confirmationTexts",{numberOfItems:($t=Object.keys(J||{}))==null?void 0:$t.length}),okText:Xe("buttons.run"),onOk:pt=>{gt!=null&&gt.hasParams?Et(gt):at(gt),pt()}})},wt=gt=>{$e.checkUnsavedEditor(()=>{Ue||(Ne&&!gt.isStatic?kt(gt):gt.hasParams?Et(gt):at(gt))})},Et=gt=>{qe(gt)},Ot=()=>qe(void 0);return!Ke()||!(ve!=null&&ve.length)?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HandlersContainer,{handlers:ve,onPinHandler:mt,onHandlerClick:wt,onCancelHandler:ft,isReadOnly:Ue,lastHandlerStatus:ye.lastHandlerStatus[oe],runningHandlerRunIds:Se,selectedRowKey:K.key??"",pinnedHandlers:ue,handlersType:oe}),st&&jsxRuntimeExports.jsx(HandlerWithParamsModal,{schemaType:ne,selectedRowType:K.type,selectedHandlerWithParams:st,onExecuteHandler:at,onClose:Ot})]})},EditorContentInner=({isLoading:K=!1,type:J,selectedGridRow:ne,stackRef:oe,onUpdate:ce,isDashboardType:ue=!1,containerClassname:Ae,selectedRangeRows:pe,fetchEntities:ve})=>{var Ue,Ge,Ye;const{action:me}=useAppContext(),{state:ge,action:ye}=useDndContext(),{config:xe}=ge,{updateConfig:_e}=ye,{getRecord:$e}=useEditorRequest(),Ie=useSelector$1(selectActiveDataset$1),Fe=useSelector$1(selectUser),ke=useAppDispatch(),[je,We]=reactExports.useState(),[ze,Xe]=reactExports.useState(),Je=reactExports.useRef(xe),nt=reactExports.useRef({});reactExports.useEffect(()=>{Je.current=xe},[xe]),reactExports.useEffect(()=>{const Qe=()=>ce==null?void 0:ce();recordEventManager.subscribe(RecordEvent.UpdateRecord,Qe)},[]),reactExports.useEffect(()=>{if(externalStorage.getViewerActiveTab()&&ge.viewers.length){const Qe=ge.viewers.find(Te=>Te.label===externalStorage.getViewerActiveTab());Qe&&st({...Qe,isActive:!0})}},[externalStorage.getViewerActiveTab(),ge.viewers]),reactExports.useEffect(()=>{if(ne!=null&&ne.type&&ne.key&&ne.key!==nt.current.key){nt.current=ne;const Qe=oe.content.find(rt=>rt.isActive),{key:Te,type:Ke}=(Qe==null?void 0:Qe.transitionData)||{};et(Ke,Te)}},[ne,Ie]);const et=(Qe,Te)=>{$e.fetch({key:Te??(ne==null?void 0:ne.key),type:Qe??(ne==null?void 0:ne.type)??"",dataset:Ie}).then(Ke=>{const{_t:rt}=Ke.data||{};if(rt){if(rt===SimplifiedEnum.UI_APP_STATE){const it=Ke.data,{ReadOnly:at}=it;at!==void 0&&ke(updateAppReadOnly(at))}ge.editorHandlers.length||storageApi.getRecord({type:SimplifiedEnum.UI_TYPE_STATE,key:`cl;${rt};${Fe==null?void 0:Fe.username}`,ignoreNotFound:!0,module:"Cl.Runtime.Backend.Core"}).then(it=>{const at=it.data;ye.setRecordTypeState({_t:SimplifiedEnum.UI_TYPE_STATE,Type_:`cl;${rt}`,...at})})}})},tt=Qe=>{We(Qe)},st=Qe=>{const Te=structuredClone(Je.current),Ke=findParent(Te,[Qe.key]);if(Ke){Ke.content.forEach(it=>{it.isCurrentlyDragging=!1,it.isActive=it.key===Qe.key}),_e(Te);const rt=getParsedConfig(Te,!0);ye.saveUiTypeData({simplifiedConfig:rt,handlers:ge.pinnedHandlers})}},qe=(Ue=oe.content)==null?void 0:Ue.find(Qe=>Qe.isActive&&!Qe.isCurrentlyDragging),Se=Qe=>Qe==null?void 0:Qe.filter(Te=>Te.isActive).map(Te=>Te.id),Re=Qe=>{et(Qe.type,Qe.key);const Te=structuredClone(Je.current),Ke=`${EditorTabsEnum.EDITOR_TRANSITION}-${Qe.key}-${v4()}`,rt=findTarget(Te,oe.key);if(rt){const it=rt.content.some(ot=>ot.id.includes(Qe.key)),at=rt.content.findIndex(ot=>ot.isActive);rt.content=rt.content.map(ot=>({...ot,isActive:it&&ot.id.includes(Qe.key)})),it||rt.content.splice(at+1,0,{...EDITOR_TABS[EditorTabsEnum.EDITOR_TRANSITION],id:Ke,key:Ke,disableActions:!0,label:Qe.key,transitionData:Qe,isActive:!0});const lt=correctContent(Te,!0);_e(lt);const ct=getParsedConfig(lt,!0);ye.saveUiTypeData({simplifiedConfig:ct})}},Be=Qe=>{var rt;if(!(Qe!=null&&Qe.key))return;et();const Te=structuredClone(Je.current),Ke=findTarget(Te,oe.key);if(Ke){const it=Ke.content,at=it.findIndex(lt=>lt.key===Qe.key);if((rt=it[at])!=null&&rt.isActive){const lt=it.findIndex(ct=>ct.key===EditorTabsEnum.EDITOR);it[lt>=0?lt:0].isActive=!0}Ke.content.splice(at,1),_e(Te)}},Ne=Qe=>{const{type:Te,key:Ke}=Qe.transitionData||{};et(Te,Ke),(qe==null?void 0:qe.key)===EditorTabsEnum.EDITOR?me.onConfirmLeaveEditor(()=>st(Qe)):st(Qe)};return jsxRuntimeExports.jsx(PF,{loading:!J||K,children:jsxRuntimeExports.jsxs("div",{className:cx(styles$N.container,Ae),"data-tid":"editor-content",children:[ne&&jsxRuntimeExports.jsx(HandlersBlock,{selectedRow:ne,selectedRangeRows:pe,activeTypeTab:J,handlersType:HandlersTypeEnum.Editor,schema:(Ge=$e.state)==null?void 0:Ge.schema.typeList[$e.state.schema.rootType],pinnedHandlers:((Ye=ge.recordTypeState)==null?void 0:Ye.PinnedHandlers)||[],fetchEntities:ve,handlers:ge.editorHandlers,onChangeHandlers:ye.setEditorHandlers}),(!ue||oe.content.length>1)&&jsxRuntimeExports.jsx(EditorTabs,{onCloseTab:Be,activeTabs:Se(oe.content),activeTab:qe==null?void 0:qe.key,tabs:ge.hideEditor&&!ge.shouldIgroreHideEditor?oe.content.filter(Qe=>Qe.id!==EditorTabsEnum.EDITOR):oe.content,onChangeTab:Ne,stackRef:oe}),jsxRuntimeExports.jsxs("div",{"data-tid":"editor-tab-content",className:styles$N.content,children:[jsxRuntimeExports.jsx(DropBox,{position:DropBoxEnum.INNER,stackRef:oe}),jsxRuntimeExports.jsx(EditorTabContent,{activeTab:qe==null?void 0:qe.key,transitionTab:qe==null?void 0:qe.transitionData,type:J,selectedGridRow:ne,successorType:je,breadcrumbs:ze,onChangeBreadcrumbs:Xe,onApplySuccessorType:tt,onUpdate:ce,onTransition:Qe=>me.onConfirmLeaveEditor(()=>Re(Qe)),isEntityLoading:$e.isLoading,hasInitFetch:$e.hasInitFetch,entityState:$e.state,getEditorData:et})]})]})})},EditorContent=K=>{const{EditorContentInner:J}=useComponentsMapper();return jsxRuntimeExports.jsx(J,{...K})},container$l="_container_kuuk5_1",editorContainer="_editorContainer_kuuk5_7",styles$G={container:container$l,editorContainer},DraggableEditorContainer=({isLoading:K,type:J,selectedGridRow:ne,stackRef:oe,isSingleTabStackDragging:ce,configType:ue,onUpdate:Ae,isDashboardType:pe=!1,isHiddenEditor:ve=!1,selectedRangeRows:me,fetchEntities:ge})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ue===StackEnum.STACK&&ce&&jsxRuntimeExports.jsx(DropBox,{position:DropBoxEnum.SINGLE,stackRef:oe}),jsxRuntimeExports.jsx("div",{className:cx(styles$G.container,{displayNone:ve}),children:jsxRuntimeExports.jsx(EditorContent,{isLoading:K,type:J,selectedGridRow:ne,stackRef:oe,onUpdate:Ae,isDashboardType:pe,containerClassname:styles$G.editorContainer,selectedRangeRows:me,fetchEntities:ge})})]}),container$k="_container_3layh_1",content$8="_content_3layh_11",styles$F={container:container$k,content:content$8},DropPreview=({activeTab:K,draggingTab:J,showToolbar:ne})=>{const oe=()=>{};return!J||!K?jsxRuntimeExports.jsx(NoGridData,{content:t$5("noData.noData"),additionalContent:t$5("noData.emptyViewer"),icon:jsxRuntimeExports.jsx(Pp,{size:"Full"})}):jsxRuntimeExports.jsxs("div",{className:styles$F.container,children:[jsxRuntimeExports.jsx(EditorTabs,{activeTab:K,tabs:[J],onChangeTab:oe}),jsxRuntimeExports.jsxs("div",{className:cx("stack-content",styles$F.content),children:[ne&&jsxRuntimeExports.jsx(Ac,{children:jsxRuntimeExports.jsx(mf,{title:t$5("editorToolbar.json")||"",children:jsxRuntimeExports.jsx("span",{"data-tid":"drop-preview-json-icon",children:jsxRuntimeExports.jsx(AD,{})})})}),jsxRuntimeExports.jsx(PF,{loading:!0})]})]})},container$j="_container_1e0ln_1",stacks="_stacks_1e0ln_7",dashed="_dashed_1e0ln_13",singleDragging="_singleDragging_1e0ln_23",previewWindow="_previewWindow_1e0ln_27",row$3="_row_1e0ln_33",column="_column_1e0ln_37",element="_element_1e0ln_42",styles$E={container:container$j,stacks,dashed,singleDragging,previewWindow,row:row$3,column,element},DraggableContainer=reactExports.forwardRef(({isLoading:K,type:J,tabs:ne,showEditor:oe,draggableGrid:ce,onUpdate:ue,isDashboardType:Ae=!1,data:pe,fetchEntities:ve},me)=>{const ye="stack-main",xe=useSelector$1(selectMetaData),{state:_e}=useAppContext(),{state:$e,action:Ie}=useDndContext(),{isDragging:Fe,draggingLabel:ke,selectedGridRow:je,dropMarker:We,dropPreview:ze,managerRef:Xe,config:Je}=$e,nt=!!$e.maximizedTabId,[et,tt]=reactExports.useState({activeTab:void 0,openedTabs:[]}),st=reactExports.useRef(null);reactExports.useEffect(()=>{var Ne;$e.isLayoutRestored&&((Ne=st.current)==null||Ne.resize(50))},[$e.isLayoutRestored]),useDnD({tabs:et,type:J,passedTabs:ne,setTabs:tt,draggableGrid:ce,selectedGridRow:je,data:pe}),reactExports.useEffect(()=>{var Ne;Fe||(Ne=We.current)==null||Ne.removeAttribute("style")},[Fe]),reactExports.useEffect(()=>{Ie.setBlockDnd(nt)},[nt]),reactExports.useEffect(()=>{resizePlotly()},[nt]);const qe=reactExports.useCallback(Ne=>{if($e.maximizedTabId===EditorTabsEnum.EDITOR){if(Ne===Je||findTarget(Ne,$e.maximizedTabId))return!1;if(findTarget(Ne,GridTabEnum.MAIN))return!0;const Ue=findParent(Je,[Ne.id]);return Ue&&Ue!==Je?qe(Ue):Ue&&!findTarget(Ue,GridTabEnum.MAIN)}return $e.hideEditor&&Ne.content.length===1&&!$e.shouldIgroreHideEditor?findTarget(Ne,EditorTabsEnum.EDITOR)!==void 0:!!($e.maximizedTabId&&!findTarget(Ne,$e.maximizedTabId))},[$e.maximizedTabId]),Se=reactExports.useCallback(Ne=>!Fe||!ke?!1:!!(Ne.content.length===1&&findTarget(Ne,ke.id)),[Fe,ke,Je]),Re=Ne=>ce==null?void 0:ce({tabs:Ne.content,stackRef:Ne,type:J});reactExports.useImperativeHandle(me,()=>({config:Je,getSortDesc:Ie.getSortDesc}));const Be=reactExports.useCallback(Ne=>{if(Je.id===Ne.id&&Je.type!==StackEnum.STACK&&findTarget(Je,ye)&&!Ie.getEditorTabs(_e.activeEditorTab,J,ne).find(Ue=>Ue.id===EditorTabsEnum.EDITOR||Ue.id===EditorTabsEnum.NEW_ENTITY||Ue.id===EditorTabsEnum.COPY_ENTITY||Ue.id===EditorTabsEnum.SELECT_TYPE)||Je.content.length===0)return jsxRuntimeExports.jsx(PF,{loading:!0});if(!oe){const Ue=findTarget(Ne,ye);return Re(Ue||Ne)}if(Ne.type===StackEnum.STACK&&!Ne.isMainGrid)return jsxRuntimeExports.jsx(PF,{loading:K,children:jsxRuntimeExports.jsx(DraggableEditorContainer,{isLoading:K,type:J,selectedGridRow:je,stackRef:Ne,onUpdate:ue,isSingleTabStackDragging:Se(Ne),configType:Je.type,isDashboardType:Ae,isHiddenEditor:$e.hideEditor&&!$e.shouldIgroreHideEditor&&Ne.content.length===1&&xe.data.DisplayKind!==SchemaDisplayKind.Singleton&&findTarget(Ne,EditorTabsEnum.EDITOR)!==void 0,fetchEntities:ve})});if(Ne.type===StackEnum.STACK&&Ne.isMainGrid&&ce)return Re(Ne);if(Ne.type==="row"||Ne.type==="column"&&oe)return jsxRuntimeExports.jsx("div",{id:Ne.id,className:cx(Ne.type==="row"?styles$E.row:styles$E.column,styles$E.element),children:jsxRuntimeExports.jsx(PanelGroup,{direction:Ne.type==="row"?"horizontal":"vertical",className:styles$E.group,children:Ne.content.map((Ue,Ge,{length:Ye})=>{const Qe=qe(Ue),Te=Ue.type!=="row",Ke=Ue.type===StackEnum.STACK&&Ue.isMainGrid&&$e.maximizedTabId===GridTabEnum.MAIN;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Panel$1,{ref:rt=>{rt&&Ue.id===ye&&(st.current=rt)},minSize:0,maxSize:100,collapsible:!0,className:cx({displayNone:Qe},{[styles$E.singleDragging]:Se(Ue)}),onResize:resizePlotly,children:Be(Ue)}),Ge<Ye-1&&jsxRuntimeExports.jsx(PanelResizeHandle,{hitAreaMargins:{coarse:-1,fine:-1},className:cx(Ne.type==="row"?"verticalPanelResizer":"horizontalPanelResizer",{displayNone:Te&&Qe||Ke})})]},Ge)})})},Ne.key)},[ce,je,Je,Fe,$e.hideEditor,$e.maximizedTabId]);return jsxRuntimeExports.jsxs("div",{ref:Xe,className:cx("manager",styles$E.container),children:[jsxRuntimeExports.jsx("div",{className:cx("editor-container",styles$E.stacks),children:Be(Je)}),jsxRuntimeExports.jsx("div",{ref:ze,className:cx("preview","displayNone",styles$E.previewWindow),children:jsxRuntimeExports.jsx(DropPreview,{showToolbar:!0,activeTab:ke==null?void 0:ke.id,draggingTab:ke,selectedGridRow:je,type:J})}),jsxRuntimeExports.jsx("div",{ref:We,className:cx(styles$E.dashed,"displayNone")})]})});DraggableContainer.displayName="DraggableContainer";var Direction=(K=>(K.Horizontal="Horizontal",K.Vertical="Vertical",K))(Direction||{});const useKeyboardNavigation=({itemsCount:K,isFirstSelected:J=!0,direction:ne="Vertical",isPreventDefaultEvent:oe=!0})=>{const ce=J?0:-1,[ue,Ae]=reactExports.useState(ce),pe=()=>{Ae(ye=>(ye+1)%K)},ve=()=>{Ae(ye=>ye===ce?K-1:(ye-1)%K)};return{focusedIndex:ue,defaultFocusedIndex:ce,handleKeyDown:ye=>{ne==="Vertical"&&(ye.code===KeyboardCode.ArrowDown&&(oe&&ye.preventDefault(),pe()),ye.code===KeyboardCode.ArrowUp&&(oe&&ye.preventDefault(),ve())),ne==="Horizontal"&&(ye.code===KeyboardCode.ArrowRight&&(oe&&ye.preventDefault(),pe()),ye.code===KeyboardCode.ArrowLeft&&(oe&&ye.preventDefault(),ve()))},resetFocusIndex:()=>{Ae(ce)},setFocusedIndex:Ae,incrementIndex:pe}},animatedBackground="_animatedBackground_18xx4_9",placeHolderShimmer="_placeHolderShimmer_18xx4_1",styles$D={animatedBackground,placeHolderShimmer},ProgressBarSpinner=()=>jsxRuntimeExports.jsx("div",{className:styles$D.animatedBackground}),container$i="_container_ai02b_1",header$2="_header_ai02b_8",headerActive="_headerActive_ai02b_22",sortIcon="_sortIcon_ai02b_26",content$7="_content_ai02b_31",noData$1="_noData_ai02b_41",groupTitle="_groupTitle_ai02b_45",progressBar="_progressBar_ai02b_59",row$2="_row_ai02b_68",activeRow="_activeRow_ai02b_83",focusedRow="_focusedRow_ai02b_98",titleContainer="_titleContainer_ai02b_103",styles$C={container:container$i,header:header$2,headerActive,sortIcon,content:content$7,noData:noData$1,groupTitle,progressBar,row:row$2,activeRow,focusedRow,titleContainer},DropdownSection=reactExports.forwardRef(({searchText:K,title:J,items:ne,activeTab:oe,onClick:ce,isLoading:ue=!1,isActive:Ae,focusedItemIndex:pe},ve)=>{const{t:me}=useTranslation(),ge=!ue&&ne,ye=reactExports.useRef(null),[xe,_e]=reactExports.useState(!1),[$e,Ie]=reactExports.useState([...ne||[]]),[Fe,ke]=reactExports.useState($e),[je,We]=reactExports.useState(SortOrderEnum.NONE),ze=()=>{ke(ne||[]),Ie(ne||[])};reactExports.useImperativeHandle(ve,()=>({...ve.current,[J]:ze})),reactExports.useEffect(()=>{ze()},[ne]),reactExports.useEffect(()=>{const Je=ye.current;if(Je&&Ae&&pe!==-1){const nt=Je.querySelector(`[data-item-index="${pe}"]`);nt&&nt.scrollIntoView({block:"center"})}},[pe,Ae]),reactExports.useEffect(()=>{ye.current&&oe&&setTimeout(()=>{var nt;const Je=(nt=ye.current)==null?void 0:nt.querySelector('[data-active="true"]');Je&&Je.scrollIntoView({block:"center",behavior:"smooth"})},100)},[oe,Fe]);const Xe=[{key:SortOrderEnum.ASC,label:me("grid.sorting.asc"),icon:jsxRuntimeExports.jsx(nB,{}),onClick:()=>{const Je=[...$e];Je.sort((nt,et)=>nt.label>et.label?1:nt.label<et.label?-1:0),ke(Je),We(SortOrderEnum.ASC)}},{key:SortOrderEnum.DESC,label:me("grid.sorting.desc"),icon:jsxRuntimeExports.jsx(rB,{}),onClick:()=>{const Je=[...$e];Je.sort((nt,et)=>nt.label>et.label?-1:nt.label<et.label?1:0),ke(Je),We(SortOrderEnum.DESC)}},{key:SortOrderEnum.NONE,label:me("grid.sorting.none"),icon:jsxRuntimeExports.jsx(oB,{}),onClick:()=>{ke($e),We(SortOrderEnum.NONE)}}];return jsxRuntimeExports.jsxs("div",{className:styles$C.container,children:[jsxRuntimeExports.jsx("div",{className:cx(styles$C.header,{[styles$C.headerActive]:Ae}),children:jsxRuntimeExports.jsxs("div",{className:styles$C.titleContainer,children:[J,jsxRuntimeExports.jsx(Y_,{open:xe,onOpenChange:Je=>{_e(Je)},menu:{items:Xe,selectedKeys:[je]},getPopupContainer:Je=>Je.closest(".dropdownContainer"),placement:"bottomRight",children:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(oa,{testid:"dropdown-section-sorting-icon",children:jsxRuntimeExports.jsx(rA,{})})})})]})}),jsxRuntimeExports.jsx("div",{className:styles$C.content,ref:ye,children:ge?Fe.map((Je,nt)=>{const{label:et}=Je,tt=Je.key===oe,st=nt===pe;return jsxRuntimeExports.jsx("div",{"aria-hidden":"true","data-item-index":nt,"data-active":tt||void 0,className:cx(styles$C.row,{[styles$C.activeRow]:tt,[styles$C.focusedRow]:st}),title:et,onClick:()=>ce(Je),children:K?jsxRuntimeExports.jsx(HighlightTextMatch,{text:et,searchText:K,isTypesSearch:!0}):et},Je.id)}):jsxRuntimeExports.jsxs("div",{className:styles$C.progressBar,children:[jsxRuntimeExports.jsx("span",{className:styles$C.noData,children:me("noData.loading")}),jsxRuntimeExports.jsx(ProgressBarSpinner,{})]})})]})});DropdownSection.displayName="DropdownSection";const searchContainer$1="_searchContainer_xvs14_1",dropdownSections$1="_dropdownSections_xvs14_7",inputContainer="_inputContainer_xvs14_14",input="_input_xvs14_14",noData="_noData_xvs14_23",styles$B={searchContainer:searchContainer$1,dropdownSections:dropdownSections$1,inputContainer,input,noData},editor="_editor_10c3g_1",footer$1="_footer_10c3g_6",message="_message_10c3g_14",messageSuccess="_messageSuccess_10c3g_23",messageError="_messageError_10c3g_27",checkbox="_checkbox_10c3g_31",styles$A={editor,footer:footer$1,message,messageSuccess,messageError,checkbox},CreateEntityModal=({isOpen:K,setIsModalOpen:J,selectedType:ne,baseType:oe,recordKey:ce,title:ue,isCheckboxAction:Ae=!1})=>{const pe=useSelector$1(selectMetaData),{t:ve}=useTranslation(),{getSchema:me,saveEntity:ge,getRecord:ye}=useEditorRequest(),{fetch:xe}=useRequest(schemaApi.getType),{activeTab:_e,setActiveTab:$e}=useTabParams(),Ie=useSelector$1(selectActiveDataset$1),[Fe,ke]=reactExports.useState(null),[je,We]=reactExports.useState(),[ze,Xe]=reactExports.useState(null),[Je,nt]=reactExports.useState(!1);reactExports.useEffect(()=>(ne&&me.fetch({name:ne}).then(Be=>{var Ne;ke({schema:Be.typeList,rootSchemaName:((Ne=Object.keys(Be.typeList))==null?void 0:Ne.find(Ue=>Ue.endsWith(ne)))??""})}),()=>{ke(null)}),[ne]),reactExports.useEffect(()=>{K||(Xe(null),We(null),nt(!1))},[K]),reactExports.useEffect(()=>{ce&&et(ce)},[ce]),reactExports.useEffect(()=>{ye.state&&We(ye.state.data)},[ye.state]),reactExports.useEffect(()=>{if(ze==="SUCCESS"){const Be=setTimeout(()=>{Xe(null)},5e3);return()=>clearTimeout(Be)}},[ze]);const et=Be=>{ye.fetch({key:Be,type:ne,dataset:Ie})},tt=({data:Be},Ne,Ue)=>{Xe(null),!ge.isLoading&&ne&&ge.fetch({data:Be,recordType:ne,isToast:!1}).then(async()=>{const{response:Ge}=await dispatch$1(getSchemaTypes()).unwrap(),Ye=filterSchemaTypes(Ge[0].Result),Qe=[...Ye.Tables,...Ye.Types].find(Te=>Te.id===ne);if(((Qe==null?void 0:Qe.tableKey)===((_e==null?void 0:_e.tableKey)||(_e==null?void 0:_e.id))||(Qe==null?void 0:Qe.id)===((_e==null?void 0:_e.tableKey)||(_e==null?void 0:_e.id)))&&xe({name:oe||pe.data.Name||ne}).then(Te=>{const Ke=Te.typeList[Te.rootType];dispatch$1(updateActiveTypeMetadata(Ke))}),Ne)We(Be),J(!0);else if(Ue&&Qe){const{id:Te,label:Ke,tableKey:rt,tableName:it}=Qe;dispatch$1(openTab({id:Te,key:Te,label:Ke,tableKey:rt,tableName:it})),$e(ne),dispatch$1(saveAppState(Ie)),st()}else st();Xe("SUCCESS")}).catch(()=>Xe("ERROR"))},st=()=>J(!1),qe=()=>We({}),Se=()=>Fe?jsxRuntimeExports.jsx(EditorInstance,{...Fe,className:styles$A.editor,data:je,i18n:{submitBtnText:ve("buttons.saveAndClose"),copyBtnText:ve("buttons.saveAndNext"),cancelBtnText:ve("buttons.cancel")},onCancel:st,onSubmit:Be=>tt(Be,!1,Je),onCopy:Be=>tt(Be,!0),isSubmitDisabled:!1,isCancelDisabled:!1,isCopyBtn:!0,clearIcon:jsxRuntimeExports.jsx(mf,{title:ve("newEntity.clearAllFields"),children:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(mB,{}),onClick:qe})}),footerActions:Ae&&jsxRuntimeExports.jsx(pF,{className:styles$A.checkbox,value:Je,onChange:nt,testid:"create-new-entity-checkbox",children:ve("newEntity.openNewTable")})}):jsxRuntimeExports.jsx(RF,{}),Re=()=>{switch(ze){case"SUCCESS":return jsxRuntimeExports.jsxs("div",{className:cx(styles$A.message,styles$A.messageSuccess),children:[jsxRuntimeExports.jsx(j_,{size:"XS"}),ve("newEntity.success")]});case"ERROR":return jsxRuntimeExports.jsxs("div",{className:cx(styles$A.message,styles$A.messageError),children:[jsxRuntimeExports.jsx(R_,{size:"XS"}),ve("newEntity.error")]});default:return null}};return jsxRuntimeExports.jsxs(Ho,{open:K,defaultHeight:350,title:ue??ve("newEntity.create"),onClose:()=>J(!1),minWidthConstraints:600,minHeightConstraints:350,children:[jsxRuntimeExports.jsx(Ho.Body,{children:Se()}),jsxRuntimeExports.jsx(Ho.Footer,{okText:null,cancelText:null,className:styles$A.footer,renderFooterActions:Re()})]})},CreateEntityButton=()=>{const{t:K}=useTranslation(),{activeTab:J}=useTabParams(),ne=reactExports.useRef(null),[oe,ce]=reactExports.useState(!1),[ue,Ae]=reactExports.useState([]),[pe,ve]=reactExports.useState(""),[me,ge]=reactExports.useState([]),[ye,xe]=reactExports.useState([]),[_e,$e]=reactExports.useState(!1),[Ie,Fe]=reactExports.useState(""),[ke,je]=reactExports.useState(SortOrderEnum.NONE);reactExports.useEffect(()=>{schemaApi.getTypes().then(nt=>{if(nt.length===0)return;const et=[];nt.forEach(({Label:st,Kind:qe,Name:Se})=>qe!==SchemaTypeKind.TABLE&&et.push({value:Se,label:st}));const tt=et.findIndex(st=>st.label===(J==null?void 0:J.label));if(tt>0){const[st]=et.splice(tt,1);et.unshift(st)}Ae(et)})},[]),reactExports.useEffect(()=>{const nt=ue.filter(et=>et.label.toLowerCase().includes(pe.toLowerCase()));ge(nt)},[ue,pe]);const We=()=>{ye.length&&ge([...ye]),xe([]),je(SortOrderEnum.NONE)};reactExports.useEffect(()=>{oe?setTimeout(()=>{var nt;(nt=ne.current)==null||nt.focus()},0):(ve(""),je(SortOrderEnum.NONE))},[oe]);const ze=[{key:SortOrderEnum.ASC,label:K("grid.sorting.asc"),icon:jsxRuntimeExports.jsx(nB,{}),onClick:()=>{!ye.length&&xe(me);const nt=[...me];nt.sort((et,tt)=>et.label>tt.label?1:et.label<tt.label?-1:0),ge(nt),je(SortOrderEnum.ASC)}},{key:SortOrderEnum.DESC,label:K("grid.sorting.desc"),icon:jsxRuntimeExports.jsx(rB,{}),onClick:()=>{!ye.length&&xe(me);const nt=[...me];nt.sort((et,tt)=>et.label>tt.label?-1:et.label<tt.label?1:0),ge(nt),je(SortOrderEnum.DESC)}},{key:SortOrderEnum.NONE,label:K("grid.sorting.none"),icon:jsxRuntimeExports.jsx(oB,{}),onClick:We}],Xe=nt=>{$e(!0),ce(!1),Fe(nt)},Je=()=>jsxRuntimeExports.jsxs("div",{className:"create-entity-dropdown__menu",children:[jsxRuntimeExports.jsx(Ml,{ref:ne,testId:"add-new-entity-filter",variant:"outlined",status:"default",placeholder:K("shared.filterInputPlaceholder")||"",allowClear:!0,onChange:ve,value:pe,prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:jsxRuntimeExports.jsx(Y_,{menu:{items:ze,selectedKeys:[ke]},children:jsxRuntimeExports.jsx(rA,{})})}),jsxRuntimeExports.jsx("div",{className:"create-entity-dropdown__menu-list",children:me.map(({value:nt,label:et})=>jsxRuntimeExports.jsx("div",{"aria-hidden":"true",className:cx("create-entity-dropdown__menu-item",{"create-entity-dropdown__menu-item--active":nt===(J==null?void 0:J.label)||et===(J==null?void 0:J.label)}),onClick:()=>Xe(nt),children:et},nt))})]});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Y_,{testid:"add-new-entity-dropdown",open:oe,onOpenChange:()=>ce(nt=>!nt),dropdownRender:Je,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(mf,{title:K("newEntity.add"),children:jsxRuntimeExports.jsx(rl,{className:"create-entity-button",type:"transparent",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(Dk,{}),testid:"add-new-entity-button"})})})}),_e&&jsxRuntimeExports.jsx(CreateEntityModal,{baseType:"",isOpen:_e,setIsModalOpen:$e,selectedType:Ie,isCheckboxAction:!0})]})},PAGINATION_LIMIT=1e3;function usePagination({initPageSize:K,initPageIndex:J}){const ne=isNullable(J)?1:J+1,[oe,ce]=reactExports.useState(ne),[ue,Ae]=reactExports.useState(ne),[pe,ve]=reactExports.useState({start:1,end:K||PAGINATION_LIMIT}),[me,ge]=reactExports.useState(!1),[ye,xe]=reactExports.useState(!1),_e=reactExports.useRef(!0),[$e,Ie]=reactExports.useState(!1),Fe=oe===1,ke=K||PAGINATION_LIMIT,je=()=>ke+1,We=Ue=>(Ue-1)*ke,ze=()=>We(oe),Xe=Ue=>Ue.slice(0,ke),Je=reactExports.useCallback(Ue=>{if($e)return pe;const Ge=Ue.length,Ye=(oe-1)*ke+(Ge?1:0),Qe=Ye+(Ge?Ge-1:0);return{start:Ye,end:Qe}},[$e]);return{isAvailableNextPageRef:_e,isInitialPage:Fe,page:oe,onRevertPrevPage:()=>{Ie(!0),ce(ue)},setPage:ce,isAvailableNextPage:me,isAvailablePreviousPage:ye,getSkipByCurrentPage:ze,getLimit:je,sliceEntitiesByLimit:Xe,getSkipByPage:We,updatePagination:Ue=>{const Ge=Ue.length;ge(Ge>ke),xe(Ge?oe>1:!1)},onResetPage:()=>{Ae(oe),ce(1)},onPreviousPage:()=>{if(!ye||$e)return;const Ue=oe-1;Ie(!0),Ae(oe),ce(Ue)},onFirstPage:()=>{ye&&(Ie(!0),Ae(oe),ce(1))},onNextPage:()=>{if(!me||$e)return;const Ue=oe+1;Ie(!0),Ae(oe),ce(Ue)},generateRangeByEntities:Je,reset:()=>{Ie(!1)},isPageDataLoading:$e,updateRange:Ue=>{const Ge=oe===1?oe:(oe-1)*ke+1;ve({start:Ge,end:Ge+Ue-1})},onChangeCurrentPage:Ue=>{Ie(!0),Ae(oe),ce(Ue)}}}const HeaderSearch=()=>{var Et;const{t:K}=useTranslation(),J=useAppDispatch(),{searchTypes:ne}=useSelector$1(selectSchemaTypes),oe=useSelector$1(selectActiveDataset$1),ce=useSelector$1(selectFullScreenMode),ue=reactExports.useRef(null),[Ae,pe]=reactExports.useState(""),[ve,me]=reactExports.useState(""),[ge,ye]=reactExports.useState(!1),[xe,_e]=reactExports.useState(),[$e,Ie]=reactExports.useState(!1),{fetch:Fe}=useRequest(handlerApi.handlerRun),{state:ke,action:je}=useDndContext(),We=useSelector$1(selectIsReadonly),{activeTab:ze,setActiveTab:Xe}=useTabParams(),{state:Je,action:nt}=useAppContext(),et=reactExports.useRef({}),tt=[...(xe==null?void 0:xe.Tables)??[],...(xe==null?void 0:xe.Types)??[]],st=[{title:K("header.tabgroups.tables"),items:(xe==null?void 0:xe.Tables)||[]},{title:K("header.tabgroups.types"),items:(xe==null?void 0:xe.Types)||[]},{title:K("header.tabgroups.filters"),items:(xe==null?void 0:xe.Filters)||[],isHide:!((Et=xe==null?void 0:xe.Filters)!=null&&Et.length)}];reactExports.useEffect(()=>{[...(xe==null?void 0:xe.Tables)||[],...(xe==null?void 0:xe.Types)||[]].length===0&&at(1)},[xe]),reactExports.useEffect(()=>{me((ze==null?void 0:ze.label)||"")},[ze==null?void 0:ze.label]);const qe=Ot=>{const Rt={Limit:PAGINATION_LIMIT+1,Skip:0};return Ot.tableKey?{Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectType",Arguments:{TypeName:Ot.id,...Rt}}:{Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectTable",Arguments:{TableName:Ot.id,...Rt}}},Se=Ot=>{(ze==null?void 0:ze.id)!==Ot.id&&(nt.onConfirmLeaveEditor(()=>{Fe(qe(Ot)).then(Rt=>{var St;const gt=Rt[0].Result;nt.updateRecordsData(gt);const $t=convertSchemaTypeDtoToModel(gt.Schema,gt.BaseType);(St=ue.current)==null||St.blur(),nt.callResetDndContextMethod(Ot.id),!Je.showLineHider&&nt.setShowLineHiderAction(!0);const pt=$t.typeList[$t.rootType],vt=pt.Name,Mt=pt.Module.ModuleName;ye(!1),J(updateActiveTypeMetadata(pt)),J(openTab(Ot)),je.clearHandlerState(),ze!=null&&ze.id&&J(getDatasetData({type:vt,module:Mt})),Xe(Ot.id),ce&&pt.DisplayKind!==SchemaDisplayKind.Basic&&J(setFullScreenMode(!1)),J(saveAppState(oe))}).catch(toast.error)}),Ye())},Re=Ot=>(ne==null?void 0:ne.Tables.find(Rt=>Rt.key.toLowerCase()===Ot.toLowerCase().replaceAll(" ","")))??null,Be=Ot=>{var gt,$t,pt;const Rt=Ot.code===KeyboardCode.Enter||Ot.code===KeyboardCode.NumpadEnter;if(Ot.code===KeyboardCode.Tab&&(Ot.preventDefault(),lt()),$e&&rt(Ot),dt(Ot),Ot.code===KeyboardCode.Escape&&(Ot.preventDefault(),Ye(),(gt=ue.current)==null||gt.blur()),Rt){if(ot>-1)return Ot.preventDefault(),st[Ke].items[ot]&&Se(st[Ke].items[ot]);const vt=((pt=($t=ue.current)==null?void 0:$t.input)==null?void 0:pt.value)||"",Mt=Re(vt);Mt&&(Ot.preventDefault(),Se({id:Mt.key,key:Mt.key,label:Mt.label,tableKey:Mt.tableKey,tableName:Mt.tableName}))}},Ne=()=>{st.forEach(Ot=>{var Rt,gt;(gt=(Rt=et.current)==null?void 0:Rt[Ot.title])==null||gt.call(Rt)})};reactExports.useEffect(()=>{const Ot=Rt=>{var gt;(Rt.ctrlKey||Rt.metaKey)&&Rt.code===KeyboardCode.KeyF&&(Rt.preventDefault(),(gt=ue.current)==null||gt.focus(),ye(!0))};return window.addEventListener("keydown",Ot),()=>window.removeEventListener("keydown",Ot)},[]),reactExports.useEffect(()=>{J(getSchemaTypes({isInitLoad:!0}))},[J]),reactExports.useEffect(()=>{ne&&ve!==(ze==null?void 0:ze.label)?Te(ve):_e(ne)},[ne]),reactExports.useEffect(()=>{!ge&&J(removeSearchTypes())},[ge]),reactExports.useEffect(()=>{Te(ve),mt(),Ie(()=>!1)},[ve]),reactExports.useEffect(()=>{const Ot=gt=>{Ue(gt)||(ge&&Ye(),Ne()),ue.current&&gt.target===ue.current.input&&(!ge&&ye(!0),Ge())},Rt=()=>{ge&&Ye(),Ne()};return ge||(it(),mt()),document.addEventListener("mousedown",Ot),document.addEventListener("closesearchmenu",Rt),()=>{document.removeEventListener("mousedown",Ot),document.removeEventListener("closesearchmenu",Rt)}},[ge]);const Ue=Ot=>Ot.target.closest(".dropdownContainer"),Ge=()=>!ge&&J(getSchemaTypes()),Ye=Ot=>{ye(!1),me((ze==null?void 0:ze.label)||"")},Qe=Ot=>{var Rt;ve&&((Rt=ue.current)==null||Rt.select()),Ot.stopPropagation(),Ge(),ye(!0),mt(),it(),Ie(()=>!1)},Te=Ot=>{if(!(ne!=null&&ne.Tables)||!ne.Types)return;const Rt=Ot.trim().replace(/ +/g," ");pe(Rt);const gt=filterTypeHelper(ne.Tables,Rt),$t=filterTypeHelper(ne.Types,Rt);_e({...ne,Tables:gt,Types:$t})},{focusedIndex:Ke,handleKeyDown:rt,resetFocusIndex:it,setFocusedIndex:at,incrementIndex:lt}=useKeyboardNavigation({itemsCount:st==null?void 0:st.length,direction:Direction.Horizontal}),ct=reactExports.useMemo(()=>st[Ke].items.length,[Ke]),{focusedIndex:ot,defaultFocusedIndex:ft,handleKeyDown:dt,resetFocusIndex:mt}=useKeyboardNavigation({itemsCount:ct,isFirstSelected:!1,direction:Direction.Vertical});reactExports.useEffect(()=>{mt()},[Ke]),reactExports.useEffect(()=>{ot!==ft&&Ie(()=>!0)},[ot]);const kt=()=>ne?(tt==null?void 0:tt.length)===0&&jsxRuntimeExports.jsx("div",{className:styles$B.noData,children:K("noData.noData")}):jsxRuntimeExports.jsx("div",{className:styles$B.noData,children:jsxRuntimeExports.jsx(HF,{isLoading:!0,isMessageShown:!1})}),wt=()=>jsxRuntimeExports.jsxs("div",{className:styles$B.dropdownSections,children:[st.map((Ot,Rt)=>{if(Ot.isHide)return null;const gt=Rt===Ke;return et.current&&(et.current[Ot.title]=()=>{}),jsxRuntimeExports.jsx(DropdownSection,{ref:et,searchText:Ae,title:Ot.title,activeTab:ze==null?void 0:ze.id,items:Ot.items,onClick:Se,focusedItemIndex:gt?ot:-1,isActive:gt},Ot.title)}),kt()]});return jsxRuntimeExports.jsxs("div",{"data-tid":"search-types",className:styles$B.searchContainer,children:[jsxRuntimeExports.jsx(Y_,{testid:"types-container",placement:"bottomLeft",className:"dropdownContainer",open:ge,dropdownRender:wt}),jsxRuntimeExports.jsxs("div",{className:styles$B.inputContainer,children:[jsxRuntimeExports.jsx(Ml,{ref:ue,variant:"outlined",placeholder:K("header.input.placeholder")||"",status:"transparent",prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:ge?jsxRuntimeExports.jsx(Ck,{}):jsxRuntimeExports.jsx(Rp,{}),onChange:Ot=>{Ot&&ge===!1&&ye(!0),me(Ot)},onKeyDown:Be,value:ve,onFocus:Qe,className:styles$B.input}),!We&&!ke.isTypeReadOnly&&jsxRuntimeExports.jsx(CreateEntityButton,{})]})]})},toolbar="_toolbar_918zb_1",typeToolbar="_typeToolbar_918zb_7",logo="_logo_918zb_12",fullScreenMode$1="_fullScreenMode_918zb_19",styles$z={toolbar,typeToolbar,logo,fullScreenMode:fullScreenMode$1},TypeToolbarInner=({containerClassname:K})=>{const J=useSelector$1(selectEnvLabel),ne=useSelector$1(selectFullScreenMode);return!useSelector$1(selectIsDatasetSupport)&&!ne?null:jsxRuntimeExports.jsxs("div",{"data-tid":"type-toolbar",className:cx(styles$z.toolbar,{[styles$z.fullScreenMode]:ne},styles$z.typeToolbar,K),children:[ne&&jsxRuntimeExports.jsxs("div",{className:styles$z.logo,children:[jsxRuntimeExports.jsx(Logo,{}),jsxRuntimeExports.jsx(OF,{label:J})]}),ne&&env$1.isFullScreenNavigation&&jsxRuntimeExports.jsx(HeaderSearch,{})]})},TypeToolbar=K=>{const{TypeToolbarInner:J}=useComponentsMapper();return jsxRuntimeExports.jsx(J,{...K})},DashboardTypeContainer=({type:K})=>{const{action:J}=useDndContext();return reactExports.useEffect(()=>{J.fetchListPanelsData()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TypeToolbar,{}),jsxRuntimeExports.jsx(DraggableContainer,{type:K,tabs:[],showEditor:!0,isDashboardType:!0})]})},QueryBuilderContext=reactExports.createContext({});function useQueryBuilderContext(){const K=reactExports.useContext(QueryBuilderContext);if(K==null)throw new Error("QueryBuilder components must be wrapped in <QueryBuilderProvider>");return K}const container$h="_container_154cz_1",label$2="_label_154cz_7",styles$y={container:container$h,label:label$2},QueryBuilderIndexDropdown=({selectClassName:K})=>{const{t:J}=useTranslation(),{selectedIndex:ne,selectIndex:oe,indexes:ce}=useQueryBuilderContext(),ue=reactExports.useMemo(()=>ce.find(Ae=>Ae.value===ne),[ce,ne]);return jsxRuntimeExports.jsxs("div",{className:styles$y.container,children:[jsxRuntimeExports.jsx("div",{className:styles$y.label,children:J("queryBuilder.label")}),jsxRuntimeExports.jsx(xF,{className:K,variant:"outlined",placeholder:J("queryBuilder.select"),value:ue==null?void 0:ue.value,options:ce,onChange:oe})]})},QueryBuilderIntroduction=({isCloseIcon:K,onCancel:J})=>{const{t:ne}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"query-builder-introduction",children:[K&&jsxRuntimeExports.jsx("div",{className:"query-builder-introduction__close-icon",children:jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",onClick:J,iconBefore:jsxRuntimeExports.jsx(_c,{})})}),jsxRuntimeExports.jsx("div",{className:"query-builder-introduction__icon",children:jsxRuntimeExports.jsx(mD,{height:"24",width:"24"})}),jsxRuntimeExports.jsx("div",{className:"query-builder-introduction__title",children:ne("queryBuilder.introduction")}),jsxRuntimeExports.jsx(QueryBuilderIndexDropdown,{selectClassName:"query-builder-introduction__select"})]})},QueryBuilderToolbar=reactExports.memo(()=>{const{t:K}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"query-builder-toolbar",children:[jsxRuntimeExports.jsx("div",{className:"query-builder-toolbar__title",children:K("queryBuilder.title")}),jsxRuntimeExports.jsx(QueryBuilderIndexDropdown,{selectClassName:"query-builder-toolbar__select"})]})});QueryBuilderToolbar.displayName="QueryBuilderToolbar";const container$g="_container_1ilxl_1",rigthButtons="_rigthButtons_1ilxl_7",styles$x={container:container$g,rigthButtons},QueryBuilderActions=({isApplyDisabled:K=!1,onResetAll:J,onCancel:ne,onApply:oe})=>{const{t:ce}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:styles$x.container,children:[jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(_c,{}),onClick:ne,children:ce("shared.close")}),jsxRuntimeExports.jsxs("div",{className:styles$x.rigthButtons,children:[jsxRuntimeExports.jsx(rl,{disabled:K,onClick:oe,children:ce("queryBuilder.apply")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:J,children:ce("queryBuilder.resetAll")})]})]})},container$f="_container_1968s_1",row$1="_row_1968s_7",styles$w={container:container$f,row:row$1},QueryBuilderTable=({rows:K,renderKeyCell:J,renderConditionCell:ne,renderValueCell:oe})=>{const[ce,ue]=reactExports.useState(0),Ae=pe=>{pe!==ce&&ue(pe)};return reactExports.useEffect(()=>{ce>K.length-1&&ue(0)},[K.length,ce]),jsxRuntimeExports.jsx("div",{className:styles$w.container,children:K.map((pe,ve)=>jsxRuntimeExports.jsxs("div",{className:styles$w.row,onClick:()=>Ae(ve),"aria-hidden":!0,children:[J({key:pe.key,isActive:ve===ce}),ne(pe),oe(pe)]},pe.key))})},key$3="_key_149cn_1",focusedKey="_focusedKey_149cn_13",styles$v={key:key$3,focusedKey},QueryBuilderKeyCell=({key:K})=>jsxRuntimeExports.jsx("div",{className:cx(styles$v.key,{[styles$v.focusedKey]:styles$v.focusedKey}),children:K});function mapSchemaToElements(K,J){return isArray$7(K.Elements)?K.Elements.reduce((ne,oe)=>{var me,ge,ye,xe,_e,$e;const ce=oe.Filterable,ue=isArray$7(K.Keys)?K.Keys.includes(oe.Name):!1,Ae=(_e=(xe=(ye=(ge=J[`${(me=oe.Key)==null?void 0:me.Module.ModuleName}.${oe.Name}`])==null?void 0:ge.Elements)==null?void 0:ye[0])==null?void 0:xe.Value)==null?void 0:_e.Type,pe=(($e=oe.Value)==null?void 0:$e.Type)||Ae,ve=[ValueTypesEnum$1.String,ValueTypesEnum$1.Int,ValueTypesEnum$1.Double,ValueTypesEnum$1.Long,ValueTypesEnum$1.Bool,ValueTypesEnum$1.Date,ValueTypesEnum$1.Time,ValueTypesEnum$1.DateTime].includes(pe);return(ce||ue)&&ve&&!oe.Vector&&ne.push(oe),ne},[]):[]}const generateOptionsBySchemaType=K=>{switch(K){case ValueTypesEnum$1.String:return[{label:"Contains",value:QueryOperatorEnum.Contains},{label:"Equals",value:QueryOperatorEnum.Equal},{label:"Ends With",value:QueryOperatorEnum.EndsWith},{label:"Starts With",value:QueryOperatorEnum.StartsWith}];case ValueTypesEnum$1.Int:case ValueTypesEnum$1.Double:case ValueTypesEnum$1.Long:return[{label:"Equals",value:QueryOperatorEnum.Equal},{label:"Not Equals",value:QueryOperatorEnum.NotEqual},{label:"Less Than",value:QueryOperatorEnum.Less},{label:"Less Than Or Equal",value:QueryOperatorEnum.LessOrEqual},{label:"Greater Than Or Equal",value:QueryOperatorEnum.MoreOrEqual},{label:"Greater Than",value:QueryOperatorEnum.More}];case ValueTypesEnum$1.Bool:return[{label:"Equals",value:QueryOperatorEnum.Equal},{label:"Not Equals",value:QueryOperatorEnum.NotEqual}];case ValueTypesEnum$1.Date:case ValueTypesEnum$1.Time:case ValueTypesEnum$1.DateTime:return[{label:"Equals",value:QueryOperatorEnum.Equal},{label:"Not Equals",value:QueryOperatorEnum.NotEqual},{label:"From",value:QueryOperatorEnum.MoreOrEqual},{label:"To",value:QueryOperatorEnum.LessOrEqual}];default:return[]}},generateValueBySchemaType=K=>{switch(K){case ValueTypesEnum$1.String:return"";case ValueTypesEnum$1.Int:case ValueTypesEnum$1.Double:case ValueTypesEnum$1.Long:case ValueTypesEnum$1.Bool:case ValueTypesEnum$1.Date:case ValueTypesEnum$1.Time:case ValueTypesEnum$1.DateTime:return null;default:throw new Error(`Cannot generate value by current schema - ${K}`)}},getTypeBySchema=K=>{var J;return((J=K==null?void 0:K.Value)==null?void 0:J.Type)||ValueTypesEnum$1.String},generateValueWithConditionBySchema=K=>{var ue;const J=getTypeBySchema(K),oe=((ue=generateOptionsBySchemaType(J).at(0))==null?void 0:ue.value)??QueryOperatorEnum.Contains;return{value:generateValueBySchemaType(J),condition:oe}};function validateValueBySchemaType({value:K},J){switch(getTypeBySchema(J)){case ValueTypesEnum$1.Int:case ValueTypesEnum$1.Double:case ValueTypesEnum$1.Long:return!!(BigNumber.isBigNumber(K)||isNumber$2(K));case ValueTypesEnum$1.Bool:return isBool(K);case ValueTypesEnum$1.Date:case ValueTypesEnum$1.Time:case ValueTypesEnum$1.DateTime:return!!K;default:return!!K}}const QueryBuilderConditionCell=({type:K,condition:J,onChangeCondition:ne})=>{const oe=generateOptionsBySchemaType(K),ce=oe.find(ue=>ue.value===J);return jsxRuntimeExports.jsx(xF,{value:ce==null?void 0:ce.value,options:oe,onChange:ne})},QueryBuilderDateInput=({value:K,onChange:J})=>{const ne=K?DateFormatUtility.create(K).toInstance():null,oe=ce=>{J(ce!=null&&ce.isValid?ce.format(DateFormatEnum.DATE):(ce==null?void 0:ce.toString())??null)};return jsxRuntimeExports.jsx(bF,{value:ne,onChange:oe})},QueryBuilderDateTimeInput=({value:K,onChange:J})=>{const ne=K?DateFormatUtility.create(K).toInstance():null,oe=ce=>{J(ce!=null&&ce.isValid?ce.toISOString():(ce==null?void 0:ce.toString())??null)};return jsxRuntimeExports.jsx(bF,{showTime:!0,value:ne,onChange:oe})},QueryBuilderBoolInput=({value:K,onChange:J})=>{const ne=reactExports.useMemo(()=>[{label:"Y",value:"true"},{label:"N",value:"false"}],[]),oe=ne.find(ce=>ce.value===`${K}`);return jsxRuntimeExports.jsx(xF,{value:oe==null?void 0:oe.value,options:ne,onChange:ce=>J(ce==="true")})},QueryBuilderTimeInput=({value:K,onChange:J})=>{const ne=K?DateFormatUtility.create(K,DateFormatEnum.TIME).toInstance():null,oe=ce=>{J(ce!=null&&ce.isValid?ce.format(DateFormatEnum.TIME_MS):(ce==null?void 0:ce.toString())??null)};return jsxRuntimeExports.jsx(bF,{picker:"time",value:ne,onChange:oe})},QueryBuilderValueCell=({isOptional:K,type:J,value:ne,onChangeValue:oe})=>{switch(J){case ValueTypesEnum$1.Int:case ValueTypesEnum$1.Double:case ValueTypesEnum$1.Long:return jsxRuntimeExports.jsx(CF,{value:ne,onChange:oe});case ValueTypesEnum$1.String:return jsxRuntimeExports.jsx(Ml,{value:ne,onChange:oe});case ValueTypesEnum$1.Bool:return jsxRuntimeExports.jsx(QueryBuilderBoolInput,{isOptional:K,value:ne,onChange:oe});case ValueTypesEnum$1.Date:return jsxRuntimeExports.jsx(QueryBuilderDateInput,{value:ne,onChange:oe});case ValueTypesEnum$1.DateTime:return jsxRuntimeExports.jsx(QueryBuilderDateTimeInput,{value:ne,onChange:oe});case ValueTypesEnum$1.Time:return jsxRuntimeExports.jsx(QueryBuilderTimeInput,{value:ne,onChange:oe});default:return null}},mapQueryToRows=(K,J,ne)=>Object.keys(K).map(oe=>{const ce=K[oe],ue=J[oe],Ae=getTypeBySchema(ue),pe=me=>{ce.condition!==me&&ne(oe,{value:ce.value,condition:me})},ve=me=>{ce.value!==me&&ne(oe,{value:me,condition:ce.condition})};return{type:Ae,key:oe,isOptional:(ue==null?void 0:ue.Optional)??!1,condition:ce.condition,onChangeCondition:pe,value:ce.value,onChangeValue:ve}}),container$e="_container_hpytv_1",styles$u={container:container$e},QueryBuilderEditor=({query:K,schemaDictionary:J,updateValueByKey:ne})=>{const oe=reactExports.useMemo(()=>mapQueryToRows(K,J,ne),[K,J,ne]);return jsxRuntimeExports.jsx("div",{className:styles$u.container,children:jsxRuntimeExports.jsx(QueryBuilderTable,{rows:oe,renderKeyCell:QueryBuilderKeyCell,renderConditionCell:QueryBuilderConditionCell,renderValueCell:QueryBuilderValueCell})})},container$d="_container_1jjcs_1",styles$t={container:container$d},QueryBuilderContent=({onCancel:K,onApply:J})=>{const{validQuery:ne,query:oe,schemaDictionary:ce,updateValueByKey:ue,reset:Ae}=useQueryBuilderContext();return jsxRuntimeExports.jsxs("div",{className:styles$t.container,children:[jsxRuntimeExports.jsx(QueryBuilderToolbar,{}),jsxRuntimeExports.jsx(QueryBuilderEditor,{schemaDictionary:ce,query:oe,updateValueByKey:ue}),jsxRuntimeExports.jsx(QueryBuilderActions,{isApplyDisabled:!ne,onResetAll:Ae,onApply:()=>J(oe),onCancel:K})]})},CUSTOM_INDEX="custom",generateSchemaDictionaryByElements=K=>K.reduce((J,ne)=>(J[ne.Name]=ne,J),{}),QueryBuilderProvider=({initialQuery:K,elements:J,children:ne,onReset:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(K),[pe,ve]=reactExports.useState(()=>Object.keys(K).at(0)),me=!pe,ge=reactExports.useMemo(()=>{const ke=J.map(je=>({label:je.Name,value:je.Name}));return ke.length>0&&ke.push({label:ce("queryBuilder.customIndex"),value:CUSTOM_INDEX}),ke},[J]),ye=reactExports.useMemo(()=>generateSchemaDictionaryByElements(J),[J]),xe=reactExports.useMemo(()=>Object.keys(ue).some(ke=>{const je=ue[ke],We=ye[ke];return validateValueBySchemaType(je,We)}),[ue,ye]),_e=reactExports.useCallback(ke=>{ve(je=>{if(je===ke)return je;let We={};if(ke===CUSTOM_INDEX)We=Object.keys(ye).reduce((ze,Xe)=>{const Je=ye[Xe];return{...ze,[Xe]:generateValueWithConditionBySchema(Je)}},{});else{const ze=ke?ye[ke]:void 0;We=ke?{[ke]:generateValueWithConditionBySchema(ze)}:{}}return Ae(We),ke})},[ye]),$e=reactExports.useCallback((ke,je)=>{Ae(We=>Object.hasOwn(We,ke)?{...We,[ke]:je}:We)},[]),Ie=reactExports.useCallback(()=>{ve(void 0),Ae({}),oe()},[]),Fe=reactExports.useMemo(()=>({validQuery:xe,schemaDictionary:ye,indexes:ge,query:ue,selectedIndex:pe,selectIndex:_e,isShowIntroductionSection:me,updateValueByKey:$e,reset:Ie}),[xe,ye,ge,ue,pe,_e,me,$e,Ie]);return jsxRuntimeExports.jsx(QueryBuilderContext.Provider,{value:Fe,children:ne(Fe)})},content$6="_content_4x1bp_1",styles$s={content:content$6},QueryBuilder=reactExports.memo(({initialQuery:K,elements:J,onCancel:ne,onApply:oe,onReset:ce,isCloseIcon:ue=!1})=>jsxRuntimeExports.jsx(QueryBuilderProvider,{initialQuery:K,elements:J,onReset:ce,children:Ae=>jsxRuntimeExports.jsx("div",{className:styles$s.content,children:Ae.isShowIntroductionSection?jsxRuntimeExports.jsx(QueryBuilderIntroduction,{isCloseIcon:ue,onCancel:ne}):jsxRuntimeExports.jsx(QueryBuilderContent,{onCancel:ne,onApply:oe})})}));QueryBuilder.displayName="QueryBuilder";const container$c="_container_22peh_1",content$5="_content_22peh_9",styles$r={container:container$c,content:content$5},DraggableGridContainer=({selectedGridRow:K,tabs:J,stackRef:ne,type:oe,children:ce,onUpdate:ue})=>{const{state:Ae,action:pe}=useDndContext(),{config:ve}=Ae,{updateConfig:me}=pe,{getRecord:ge}=useEditorRequest(),ye=useSelector$1(selectActiveDataset$1),[xe,_e]=reactExports.useState(),$e=We=>{ge.fetch({key:We??(K==null?void 0:K.key),type:(K==null?void 0:K.type)??"",dataset:ye})},Ie=We=>{_e(We)},Fe=We=>{const ze=structuredClone(ve),Xe=`${EditorTabsEnum.EDITOR_TRANSITION}-${We.key}-${v4()}`,Je=findTarget(ze,ne.key);if(Je){const nt=Je.content.some(st=>st.id.includes(We.key));Je.content=Je.content.map(st=>({...st,isActive:nt&&st.id.includes(We.key)})),nt||Je.content.push({...EDITOR_TABS[EditorTabsEnum.EDITOR_TRANSITION],id:Xe,key:Xe,disableActions:!0,label:We.key,transitionData:We,isActive:!0});const et=correctContent(ze,!0);me(et);const tt=getParsedConfig(et,!0);pe.saveUiTypeData({simplifiedConfig:tt})}},je=(We=>We==null?void 0:We.find(ze=>ze.isActive&&!ze.isCurrentlyDragging))(J||[]);return jsxRuntimeExports.jsx("div",{className:styles$r.container,children:jsxRuntimeExports.jsx("div",{"data-tid":"draggable-grid-container",className:cx("stack-content",styles$r.content),children:(je==null?void 0:je.key)===GridTabEnum.MAIN?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ce}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DropBox,{position:DropBoxEnum.INNER,stackRef:ne}),jsxRuntimeExports.jsx(EditorTabContent,{activeTab:je==null?void 0:je.key,transitionTab:je==null?void 0:je.transitionData,type:oe||"",selectedGridRow:K,successorType:xe,onApplySuccessorType:Ie,onTransition:Fe,onUpdate:ue,isEntityLoading:ge.isLoading,hasInitFetch:ge.hasInitFetch,entityState:ge.state,getEditorData:$e})]})})})},InfoModalWithCheckbox=({isOpen:K,title:J,content:ne,onClose:oe,onConfirm:ce,defaultWidth:ue})=>{const{t:Ae}=useTranslation(),[pe,ve]=reactExports.useState(!0);reactExports.useEffect(()=>{K&&ve(!0)},[K]);const me=()=>ce(pe);return jsxRuntimeExports.jsxs(Ho,{isResizable:!1,title:J,onClose:oe,open:K,defaultHeight:180,defaultWidth:ue||460,minHeightConstraints:180,minWidthConstraints:460,size:"md",children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsxs("div",{className:"info-modal-with-checkbox__container",children:[jsxRuntimeExports.jsx("div",{className:"info-modal-with-checkbox__icon",children:jsxRuntimeExports.jsx(W5,{size:"Full"})}),ne]})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"info-with-checkbox",renderFooterActions:({cancelBtn:ge,okBtn:ye})=>jsxRuntimeExports.jsxs("div",{className:"info-modal-with-checkbox__footer",children:[jsxRuntimeExports.jsxs("label",{className:"info-modal-with-checkbox__checkbox-wrapper",children:[jsxRuntimeExports.jsx(pF,{value:pe,onChange:xe=>ve(xe)}),Ae("confirmationModal.withDependencies")]}),jsxRuntimeExports.jsxs("div",{className:"info-modal-with-checkbox__footer-btn",children:[ye,ge]})]}),onCancel:oe,onOk:me,okText:Ae("buttons.yes"),cancelText:Ae("buttons.no")})]})},ContentHandlersModal=({handlers:K,isOpen:J,onClose:ne,onApply:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(null),pe=reactExports.useMemo(()=>K.map(me=>({label:me.Label,value:me.Name})),[K]),ve=()=>{const me=K.find(ge=>ge.Name===((ue==null?void 0:ue.value)||ue));if(!me)throw new Error("Cannot apply empty handler");oe({handler:me}),ne()};return jsxRuntimeExports.jsxs(Ho,{size:"sm",open:J,title:ce("chat.contentHandlersModal.title")??"",onClose:ne,children:[jsxRuntimeExports.jsx(Ho.Body,{className:"content-handlers-modal",children:jsxRuntimeExports.jsx(q_.Group,{name:"content-handlers-modal-choice-list",options:pe,value:ue,onChange:Ae})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"content-handlers",okText:ce("buttons.apply"),onOk:ve,okProps:{disabled:!ue},cancelText:ce("buttons.cancel"),onCancel:ne})]})};var ContentHandlerAttachmentEnum=(K=>(K.Attachment="Attachment",K.MessageInput="MessageInput",K))(ContentHandlerAttachmentEnum||{});const types$1={"application/prs.cww":["cww"],"application/prs.xsf+xml":["xsf"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["*xfdf"],"application/vnd.age":["age"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["*fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["*mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.pwg-xhtml-print+xml":["xhtm"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml","uo"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["*prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["*sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["*aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif","btf"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.cld":["cld"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.pytha.pyox":["pyo","pyox"],"model/vnd.sap.vds":["vds"],"model/vnd.usda":["usda"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.familysearch.gedcom":["ged"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};Object.freeze(types$1);const types={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(types);var __classPrivateFieldGet=function(K,J,ne,oe){if(ne==="a"&&!oe)throw new TypeError("Private accessor was defined without a getter");if(typeof J=="function"?K!==J||!oe:!J.has(K))throw new TypeError("Cannot read private member from an object whose class did not declare it");return ne==="m"?oe:ne==="a"?oe.call(K):oe?oe.value:J.get(K)},_Mime_extensionToType,_Mime_typeToExtension,_Mime_typeToExtensions;class Mime{constructor(...J){_Mime_extensionToType.set(this,new Map),_Mime_typeToExtension.set(this,new Map),_Mime_typeToExtensions.set(this,new Map);for(const ne of J)this.define(ne)}define(J,ne=!1){for(let[oe,ce]of Object.entries(J)){oe=oe.toLowerCase(),ce=ce.map(pe=>pe.toLowerCase()),__classPrivateFieldGet(this,_Mime_typeToExtensions,"f").has(oe)||__classPrivateFieldGet(this,_Mime_typeToExtensions,"f").set(oe,new Set);const ue=__classPrivateFieldGet(this,_Mime_typeToExtensions,"f").get(oe);let Ae=!0;for(let pe of ce){const ve=pe.startsWith("*");if(pe=ve?pe.slice(1):pe,ue==null||ue.add(pe),Ae&&__classPrivateFieldGet(this,_Mime_typeToExtension,"f").set(oe,pe),Ae=!1,ve)continue;const me=__classPrivateFieldGet(this,_Mime_extensionToType,"f").get(pe);if(me&&me!=oe&&!ne)throw new Error(`"${oe} -> ${pe}" conflicts with "${me} -> ${pe}". Pass \`force=true\` to override this definition.`);__classPrivateFieldGet(this,_Mime_extensionToType,"f").set(pe,oe)}}return this}getType(J){if(typeof J!="string")return null;const ne=J.replace(/^.*[/\\]/,"").toLowerCase(),oe=ne.replace(/^.*\./,"").toLowerCase(),ce=ne.length<J.length;return!(oe.length<ne.length-1)&&ce?null:__classPrivateFieldGet(this,_Mime_extensionToType,"f").get(oe)??null}getExtension(J){var ne;return typeof J!="string"?null:(J=(ne=J==null?void 0:J.split)==null?void 0:ne.call(J,";")[0],(J&&__classPrivateFieldGet(this,_Mime_typeToExtension,"f").get(J.trim().toLowerCase()))??null)}getAllExtensions(J){return typeof J!="string"?null:__classPrivateFieldGet(this,_Mime_typeToExtensions,"f").get(J.toLowerCase())??null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(const J of __classPrivateFieldGet(this,_Mime_typeToExtensions,"f").values())Object.freeze(J);return this}_getTestState(){return{types:__classPrivateFieldGet(this,_Mime_extensionToType,"f"),extensions:__classPrivateFieldGet(this,_Mime_typeToExtension,"f")}}}_Mime_extensionToType=new WeakMap,_Mime_typeToExtension=new WeakMap,_Mime_typeToExtensions=new WeakMap;const mime=new Mime(types,types$1)._freeze(),contentHandlersConverter={toDomain:K=>{const J=(K==null?void 0:K.filter(ce=>ce.Type===HandlerType.CONTENT))||[],ne=J.length>0,oe=J.length>1;return{handlers:J,isExist:ne,isMultiChoice:oe}}},getFilename=(K,J,ne="txt")=>`${K}-${J}.${ne}`,contentHandlerApi={async getContentHandlers(K){var oe;if(isNullable(K.dataset)||isNullable(K.environment))throw new Error('Cannot execute request because one of these parameters is empty: "dataset" or "environment"');const J=await storageApi.getRecord(K),ne=J.schema.typeList[J.schema.rootType];return contentHandlersConverter.toDomain((oe=ne.Declare)==null?void 0:oe.Handlers)},async runContentHandler(K){if(isNullable(K.dataset)||isNullable(K.environment))throw new Error('Cannot execute request because one of these parameters is empty: "dataset" or "environment"');const J={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"LoadRecordContent",Keys:[],Arguments:{Key:K.key,ContentId:K.handler.Label,TypeName:K.type},Dataset:K.dataset,userName:K.userName},oe=(await handlerApi.handlerRun(J))[0].Result;if(oe.Bytes_){const ce=base64ToBytes(oe.Bytes_),ue=getMimeTypeFromBuffer(ce)||"plain/text",Ae=new Blob([ce],{type:ue}),pe=mime.getExtension(ue)||"txt",ve=getFilename(K.type,K.key,pe);return{attachmentType:oe.AttachmentType,content:new File([Ae],ve)}}if(oe.BinaryContent){const ce=base64ToBytes(oe.BinaryContent.Content),ue=getMimeTypeFromBuffer(ce)||"plain/text",Ae=new Blob([ce],{type:ue}),pe=mime.getExtension(ue)||"txt",ve=getFilename(K.type,K.key,pe);return{attachmentType:oe.AttachmentType,content:new File([Ae],ve)}}if(oe.Instruction)return{attachmentType:oe.AttachmentType,content:oe.Instruction};if(oe.Text){if(oe.AttachmentType===ContentHandlerAttachmentEnum.Attachment){const ce=new Blob([oe.Text],{type:"plain/text"}),ue=getFilename(K.type,K.key),Ae=new File([ce],ue);return{attachmentType:oe.AttachmentType,content:Ae}}return{attachmentType:oe.AttachmentType,content:oe.Text}}throw new Error(`Cannot create request handler by handler - ${K.handler.Name}`)}},CHAT_KEY="ChatDashboard",CHAT_LABEL="Chat Dashboard",ChatAboutContent=({type:K,selectedGridRowKey:J,isDisabled:ne,testid:oe})=>{var Xe;const{t:ce}=useTranslation(),ue=useSelector$1(selectActiveEnvironment),Ae=useSelector$1(selectActiveDataset$1),pe=useDispatch$1(),{data:ve}=useSelector$1(selectGridSchema),me=useSelector$1(selectUser),{activeTab:ge,setActiveTab:ye}=useTabParams(),{openTabParams:xe}=useAppContext(),[_e,{setTrue:$e,setFalse:Ie}]=useBoolean(!1),Fe=contentHandlersConverter.toDomain((Xe=ve.Declare)==null?void 0:Xe.Handlers),ke=ne||!Fe.isExist,je=()=>{ge!=null&&ge.id&&(ye(ge.id),xe.chatAbout.clearParams())},We=async Je=>{if(!J)return;const nt=await contentHandlerApi.runContentHandler({handler:Je.handler,key:J,type:K,dataset:Ae,environment:ue,userName:me==null?void 0:me.username});pe(openTab({id:CHAT_KEY,key:CHAT_KEY,label:CHAT_LABEL})),ye(CHAT_KEY),xe.chatAbout.setParams({data:nt,handleMoveToPreviousTab:je})},ze=()=>{if(Fe.isMultiChoice){$e();return}We({handler:Fe.handlers[0]})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(mf,{title:ce("gridToolbar.chatAbout")||"",children:jsxRuntimeExports.jsx(rl,{iconAfter:jsxRuntimeExports.jsx(bA,{}),onClick:ze,disabled:ke,testid:oe,type:"secondary",variant:"ghost"})}),_e&&jsxRuntimeExports.jsx(ContentHandlersModal,{isOpen:!0,handlers:Fe.handlers,onClose:Ie,onApply:We})]})},container$b="_container_1e0u3_6",handlerInfo="_handlerInfo_1e0u3_12",infoIcon="_infoIcon_1e0u3_20",content$4="_content_1e0u3_24",icons$1="_icons_1e0u3_30",group="_group_1e0u3_35",dropdownList="_dropdownList_1e0u3_53",iconBadge="_iconBadge_1e0u3_59",endBlock="_endBlock_1e0u3_63",dropdown="_dropdown_1e0u3_53",spin="_spin_1e0u3_1",styles$q={container:container$b,handlerInfo,infoIcon,content:content$4,icons:icons$1,group,dropdownList,iconBadge,endBlock,dropdown,spin};var ToolbarActionIconStatus=(K=>(K.SUCCESS="success",K.ERROR="error",K))(ToolbarActionIconStatus||{});const GridSettingsModal=({isOpen:K,toggleModal:J,cellRowsCount:ne,dndContextAction:oe,isRowBorder:ce,onChangeIsRowBorder:ue})=>{const{t:Ae}=useTranslation();return jsxRuntimeExports.jsxs(Ho,{size:"sm",title:Ae("grid.settings"),open:K,onClose:J,children:[jsxRuntimeExports.jsxs(Ho.Body,{className:"grid-settings",children:[jsxRuntimeExports.jsxs("div",{className:"grid-settings__row",children:[Ae("grid.cellHeight"),jsxRuntimeExports.jsx(xF,{size:"sm",className:"grid-settings__select",testid:"cell-height-dropdown",variant:"outlined",options:rowsCountArr,value:ne,onChange:pe=>{oe.saveUiTypeData({cellRowsHeight:Number(pe)}),pe>CellRowsCount.ONE&&ue(!0)},defaultValue:CellRowsCount.ONE})]}),jsxRuntimeExports.jsxs("div",{className:"grid-settings__row",children:[Ae("grid.rowBorder"),jsxRuntimeExports.jsx(mF,{value:ce,onChange:ue,testid:"row-border-toggle"})]})]}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"grid-settings",onCancel:J,okText:null,cancelText:Ae("buttons.close")})]})},dropdownSections="_dropdownSections_17ejz_1",footer="_footer_17ejz_8",clearButton="_clearButton_17ejz_13",filter="_filter_17ejz_17",filterButton="_filterButton_17ejz_22",filterLabel="_filterLabel_17ejz_27",placeholder="_placeholder_17ejz_40",styles$p={dropdownSections,footer,clearButton,filter,filterButton,filterLabel,placeholder},TypesFilter=()=>{var Je,nt;const{t:K}=useTranslation(),{schemaTypes:J,status:ne}=useSelector$1(selectSchemaTypes),{activeTab:oe,setActiveTab:ce}=useTabParams(),{state:ue,action:Ae}=useAppContext(),{fetch:pe}=useRequest(handlerApi.handlerRun),ve=useSelector$1(selectFullScreenMode),me=useSelector$1(selectActiveDataset$1),[ge,ye]=reactExports.useState(!1),[xe,_e]=reactExports.useState(),$e=()=>{const et=(oe==null?void 0:oe.tableKey)||(oe==null?void 0:oe.id);return xe==null?void 0:xe.Types.filter(tt=>tt.tableKey===et)},Ie=[{title:K("header.tabgroups.types"),items:$e()||[],isLoading:ne===LoadingStatusesEnum.LOADING},{title:K("header.tabgroups.filters"),items:(xe==null?void 0:xe.Filters)||[],isLoading:ne===LoadingStatusesEnum.LOADING,isHide:!((Je=xe==null?void 0:xe.Filters)!=null&&Je.length)}],Fe=Ie.every(et=>et.items.length===0);reactExports.useEffect(()=>{_e(J)},[ge,J]);const ke=et=>{(oe==null?void 0:oe.id)===et.id&&!et.tableKey||Ae.onConfirmLeaveEditor(()=>{pe({Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectType",Arguments:{TypeName:et.id}}).then(tt=>{const st=tt[0].Result,qe=convertSchemaTypeDtoToModel(st.Schema,st.BaseType);Ae.callResetDndContextMethod(et.id),!ue.showLineHider&&Ae.setShowLineHiderAction(!0);const Se=qe.typeList[qe.rootType],Re=Se.Name,Be=Se.Module.ModuleName;dispatch$1(updateActiveTypeMetadata(Se)),dispatch$1(openTab(et)),oe!=null&&oe.id&&dispatch$1(getDatasetData({type:Re,module:Be})),ce(et.id),ye(!1),ve&&Se.DisplayKind!==SchemaDisplayKind.Basic&&dispatch$1(setFullScreenMode(!1)),dispatch$1(saveAppState(me))}).catch(toast.error)})},je=()=>{if(!(oe!=null&&oe.tableKey))return;const et=J.Tables.find(tt=>tt.id===(oe==null?void 0:oe.tableKey));et&&ke(et)},We=oe!=null&&oe.tableKey?(nt=xe==null?void 0:xe.Types.find(et=>et.id===oe.id))==null?void 0:nt.label:"",ze=()=>We?jsxRuntimeExports.jsx(mf,{title:We,children:jsxRuntimeExports.jsx("span",{className:styles$p.filterLabel,children:We})}):jsxRuntimeExports.jsx("span",{className:cx(styles$p.filterLabel,styles$p.placeholder),children:K("header.tabgroups.filter")}),Xe=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$p.dropdownSections,children:Ie.map(({isHide:et,title:tt,items:st})=>et?null:jsxRuntimeExports.jsx(DropdownSection,{title:tt,activeTab:oe==null?void 0:oe.id,items:st,onClick:ke},tt))}),jsxRuntimeExports.jsx("div",{className:styles$p.footer,children:jsxRuntimeExports.jsx(rl,{size:"sm",variant:"ghost",type:"primary",testid:"filter-types-clear-icon",disabled:!We,className:styles$p.clearButton,iconBefore:jsxRuntimeExports.jsx(WB,{}),onClick:je,children:K("header.tabgroups.clear")})})]});return Fe?null:jsxRuntimeExports.jsx(Y_,{testid:"filter-types-container",open:ge,onOpenChange:()=>ye(et=>!et),dropdownRender:Xe,children:jsxRuntimeExports.jsxs("div",{className:styles$p.filter,"aria-hidden":!0,onClick:()=>ye(!0),children:[jsxRuntimeExports.jsx(rl,{testid:"filter-types-btn",size:"sm",variant:"ghost",type:ge?"primary":"secondary",iconBefore:jsxRuntimeExports.jsx(zB,{}),className:styles$p.filterButton}),ze()]})})},dropdownBtn="_dropdownBtn_10shk_1",open="_open_10shk_6",styles$o={dropdownBtn,open},ExportDropdown=({dropdown:K})=>{var ce;const[J,ne]=reactExports.useState(!1),oe=ue=>{ne(ue)};return jsxRuntimeExports.jsx(Y_,{open:J,onOpenChange:oe,menu:{items:(ce=K.dropdownItems)==null?void 0:ce.map(({name:ue,actionHandler:Ae,icon:pe,isDisabled:ve})=>({key:ue,label:ue,onClick:Ae,icon:pe,disabled:ve}))},children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(rl,{iconAfter:jsxRuntimeExports.jsx(Rp,{className:cx({[styles$o.open]:J})}),type:"secondary",variant:"ghost",className:styles$o.dropdownBtn,testid:K.testid,children:K.title})})})};var define_process_env_default={};const GridToolbar=({selectedRow:K,entities:J,isQueryApplied:ne,onExportGridOptions:oe,showQueryBuilder:ce,typeViewSettings:ue,selectedRangeRows:Ae,onDeleteSelectedRangeRows:pe,deleteEntitiesStatus:ve,onExportBulkEntities:me,onSaveRecordPermanently:ge,savePermanentlyStatus:ye,onRefresh:xe,isSelectAllRecordsBtnClicked:_e,selectAllRecords:$e,deselectAllRecords:Ie,cellRowsCount:Fe,isRowBorder:ke,onChangeIsRowBorder:je,activeTypeTab:We,successors:ze,fetchEntities:Xe,isEntityModalOpen:Je,setIsEntityModalOpen:nt,setActiveRecord:et,setActiveType:tt,setModalTitle:st})=>{var St,_t;const{t:qe}=useTranslation(),{action:Se,state:Re}=useAppContext(),{state:Be,action:Ne}=useDndContext(),{cacheTabData:Ue}=Re,[Ge,{toggle:Ye}]=useBoolean(),[Qe,{toggle:Te}]=useBoolean(),[Ke,{toggle:rt}]=useBoolean();useTabParams();const{data:it}=useSelector$1(selectGridSchema),at=useSelector$1(selectUser),lt=useSelector$1(selectMetaData),ct=useSelector$1(selectActiveDataset$1),ot=useSelector$1(selectIsReadonly),ft=ot||Be.isTypeReadOnly,dt=Object.keys(Ae).length,mt=J.length===0,kt=((St=Ue==null?void 0:Ue[We])==null?void 0:St.query)||null;reactExports.useEffect(()=>{Je||(et(""),tt(""))});const wt=Xt=>{st(qe("newEntity.create")),tt(Xt),nt(!0)},Et=Xt=>{me(!!Xt),Ye()},Ot=Xt=>{ge(!!Xt),Te()},Rt=()=>{var Ht,Bt,It;const Tt=[{name:"Export time:",value:formatExcelDate(new Date)},{name:"Type:",value:((Ht=lt==null?void 0:lt.data)==null?void 0:Ht.Name)||"no active type"},{name:"Dataset:",value:ct||"no active dataset"}],Dt=()=>dt?Object.keys(Ae):K.key?[K.key]:[];oe().toExcel({sheetName:((It=(Bt=lt==null?void 0:lt.data)==null?void 0:Bt.Module)==null?void 0:It.ModuleName)||"Sheet 1",selectedRowKeys:Dt(),additionalCells:Tt})},gt=()=>_e?0:dt!==0?dt:1,$t=[{groupId:v4(),icons:[{tooltipPlaceholder:qe("shared.refresh")||"",actionHandler:xe,testid:"refresh-data-button",icon:jsxRuntimeExports.jsx(Pk,{})}]},{groupId:v4(),icons:[{isDisabled:mt,isHide:((_t=ue.LayoutSettings)==null?void 0:_t.HideEditor)||ft,tooltipPlaceholder:qe(_e?"gridToolbar.deselectAllRecords":"gridToolbar.selectAllRecords"),actionHandler:_e?Ie:$e,testid:"select-all-records-button",icon:_e?jsxRuntimeExports.jsx(GB,{}):jsxRuntimeExports.jsx(UB,{})},{isDisabled:ot||ze.length===0,isHide:ue.ReadOnly||ft,tooltipPlaceholder:qe("gridToolbar.addNewEntity")||"",actionHandler:()=>ze.length===1&&wt(ze[0].Name),testid:"add-new-entity-button",icon:jsxRuntimeExports.jsx(VA,{}),dropdown:{isHide:ze.length===1,items:ze.map(({Name:Xt,Label:Tt})=>({key:Xt,label:Tt})),actionHandler:wt}},{isDisabled:J.length===0||!K.key,isHide:ue.ReadOnly||ft,tooltipPlaceholder:qe("gridToolbar.copyEntity")||"",actionHandler:()=>Se.onConfirmLeaveEditor(()=>{K.key&&(st(qe("newEntity.copy")),et(K.key),tt(K.type??""),nt(!0))}),testid:"copy-entity-button",icon:jsxRuntimeExports.jsx(_A,{})},{isDisabled:mt,isHide:ue.ReadOnly||ft,tooltipPlaceholder:dt<2?qe("gridToolbar.deleteSelectedEntity"):qe("gridToolbar.deleteSelectedEntities",{numberOfItems:`${_e?"All":dt} `}),actionHandler:()=>Ho.delete({title:qe("confirmationModal.deleteRecords.title"),content:dt<2?qe("confirmationModal.deleteRecords.confirmationTextOneEntity"):qe("confirmationModal.deleteRecords.confirmationTexts",{numberOfItems:dt!==0?dt:1}),defaultHeight:200,onOk:Xt=>{pe(),Xt(),Se.setIsEditorDataChangedAction(!1)},testId:"delete-record"}),isBadge:dt!==0,status:ve,testid:"delete-entity-button",icon:jsxRuntimeExports.jsx(Tk,{})},{isDisabled:mt,isHide:!(at!=null&&at.roles.includes(UserRole.Developer))||env$1.isSimplifiedBuild,tooltipPlaceholder:dt<2?qe("gridToolbar.savePermanentlyEntity"):qe("gridToolbar.savePermanentlyEntities",{numberOfItems:`${_e?"All":dt} `}),actionHandler:Te,isBadge:dt!==0,status:ye,testid:"save-permanently-button",icon:jsxRuntimeExports.jsx(Ak,{})},{tooltipPlaceholder:qe("gridToolbar.chatAbout")||"",isHide:define_process_env_default.CL_CHAT_ABOUT_ON==="false"||env$1.isSimplifiedBuild,component:jsxRuntimeExports.jsx(ChatAboutContent,{type:We,selectedGridRowKey:K.key,isDisabled:mt,testid:"chat-about-button"}),testid:"chat-about-button",icon:jsxRuntimeExports.jsx(bA,{})}]},{groupId:v4(),dropdown:{title:qe("gridToolbar.export")||"",isVisible:!0,testid:"export-button",dropdownItems:[{name:qe("gridToolbar.excel")||"",isDisabled:mt,actionHandler:()=>Ho.info({title:qe("confirmationModal.export.title"),content:qe("confirmationModal.export.exportEntity",{count:gt()}),onOk:Xt=>{Rt(),Xt()},defaultHeight:200,testId:"export-entity"}),icon:jsxRuntimeExports.jsx(ok$2,{})}]}}];env$1.isSimplifiedBuild||$t.unshift({groupId:v4(),icons:[{className:ne||kt?"text-warning":void 0,tooltipPlaceholder:qe("gridToolbar.query")||"",actionHandler:ce,isDisabled:ne||kt?!1:mt,testid:"query-button",icon:jsxRuntimeExports.jsx(mD,{})}]});const pt=(Xt,Tt)=>{switch(Tt){case ToolbarActionIconStatus.SUCCESS:return`'${Xt}' ${qe("gridToolbar.completed")}`;case ToolbarActionIconStatus.ERROR:return`'${Xt}' ${qe("gridToolbar.failed")}`;default:return Xt}},vt=(Xt,Tt)=>{var Dt;return jsxRuntimeExports.jsx(Y_,{menu:{items:(Dt=Xt==null?void 0:Xt.items)==null?void 0:Dt.map(Ht=>({...Ht,onClick:()=>Xt.actionHandler(Ht.key)}))},className:styles$q.dropdown,children:Tt})},Mt=(Xt,Tt,Dt,Ht)=>Xt||Tt?jsxRuntimeExports.jsx(vF,{color:Tt??"info",className:styles$q.iconBadge,children:Dt}):Ht??Dt;return jsxRuntimeExports.jsxs("div",{className:styles$q.container,"data-tid":"main-grid-toolbar",children:[jsxRuntimeExports.jsx(HandlersBlock,{selectedRow:K,selectedRangeRows:Ae,activeTypeTab:We,handlersType:HandlersTypeEnum.MainGrid,schema:it,pinnedHandlers:Be.pinnedHandlers,fetchEntities:Xe,data:J,handlers:Be.handlers,onChangeHandlers:Ne.setHandlers}),jsxRuntimeExports.jsxs("div",{className:styles$q.content,children:[jsxRuntimeExports.jsx("div",{className:styles$q.icons,children:$t.map(({groupName:Xt,groupId:Tt,icons:Dt,dropdown:Ht})=>jsxRuntimeExports.jsxs("div",{className:styles$q.group,children:[Xt&&jsxRuntimeExports.jsx("span",{children:qe(Xt||"")}),Dt==null?void 0:Dt.map(({className:Bt,isDisabled:It,tooltipPlaceholder:zt,actionHandler:Pt,isHide:Vt,component:vr,isBadge:qt,testid:er,icon:yr,status:Lt,dropdown:jt})=>{const fr=jsxRuntimeExports.jsx(mf,{title:pt(zt,Lt),status:Lt||void 0,open:isDefined$2(Lt)||void 0,children:jsxRuntimeExports.jsx(rl,{iconAfter:yr,testid:er,type:"secondary",variant:"ghost",disabled:It,onClick:Pt,className:Bt})});return jsxRuntimeExports.jsx(reactExports.Fragment,{children:jt&&!jt.isHide?vt(jt,fr):!Vt&&Mt(qt,Lt,fr,vr)},v4())}),Ht&&Ht.isVisible&&jsxRuntimeExports.jsx(ExportDropdown,{dropdown:Ht})]},Tt))}),jsxRuntimeExports.jsxs("div",{className:styles$q.endBlock,children:[jsxRuntimeExports.jsx(TypesFilter,{}),jsxRuntimeExports.jsx(mf,{title:qe("grid.settings"),children:jsxRuntimeExports.jsx(rl,{type:Ke?"primary":"secondary",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(VD,{}),onClick:rt,testid:"grid-settings-button"})})]})]}),jsxRuntimeExports.jsx(InfoModalWithCheckbox,{title:qe("confirmationModal.export.title"),isOpen:Ge,content:qe("confirmationModal.export.exportEntity",{count:gt()}),onClose:Ye,onConfirm:Et,defaultWidth:460}),jsxRuntimeExports.jsx(InfoModalWithCheckbox,{title:qe("confirmationModal.savePermanently.title"),isOpen:Qe,content:qe("confirmationModal.savePermanently.exportEntity",{count:gt()}),onClose:Te,onConfirm:Ot}),jsxRuntimeExports.jsx(GridSettingsModal,{isOpen:Ke,toggleModal:rt,cellRowsCount:Fe,dndContextAction:Ne,isRowBorder:ke,onChangeIsRowBorder:je})]})},UserGuideModal=()=>{const{t:K}=useTranslation(),{state:J,action:ne}=useDndContext(),{userGuideCompleted:oe,userGuideFormat:ce,userGuideContent:ue}=J.userGuide,[Ae,pe]=reactExports.useState(!oe),[ve,me]=reactExports.useState(!!oe),ge=()=>{pe(!1),ve&&(ne.saveUiTypeData({userGuideCompleted:ve}),ne.changeIsGuideCompleted(ve))};if(!(oe||!ue))return jsxRuntimeExports.jsxs(Ho,{size:"lg",defaultHeight:400,open:Ae,onClose:()=>pe(!Ae),title:K("userGuideModal.title"),children:[jsxRuntimeExports.jsx(Ho.Body,{className:"user-guide-modal__body",children:ce===LanguageEnum.Markdown?jsxRuntimeExports.jsx("div",{className:"user-guide-modal__markdown-viewer",children:jsxRuntimeExports.jsx(Markdown,{children:ue})}):jsxRuntimeExports.jsx(ContentViewer,{content:ue})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"user-guide",okText:K("buttons.ok"),onOk:ge,renderFooterActions:({okBtn:ye})=>jsxRuntimeExports.jsxs("div",{className:"user-guide-modal__footer",children:[jsxRuntimeExports.jsx(pF,{value:ve,onChange:()=>me(!ve),children:K("userGuideModal.doNotShowAgain")}),ye]})})]})},GridPagination=({className:K,range:J,isAvailableNextPage:ne,isAvailablePreviousPage:oe,onPrev:ce,onNext:ue,onFirst:Ae,isGridPageDataLoading:pe})=>{const{t:ve}=useTranslation(),me=pe||!oe||J.start===1,ge=pe||!ne,[ye,xe]=reactExports.useState(!1),[_e,$e]=reactExports.useState(!1),[Ie,Fe]=reactExports.useState(!1);return reactExports.useEffect(()=>{(!oe&&(ye||_e)||J.start===1)&&(xe(!1),$e(!1))},[oe,J.start]),jsxRuntimeExports.jsxs("div",{className:cx(K,"grid-pagination"),children:[jsxRuntimeExports.jsx(mf,{open:ye&&oe,title:ve("grid.pagination.firstPage"),onOpenChange:ke=>{(!oe||J.start===1)&&ke||xe(ke)},children:jsxRuntimeExports.jsx(rl,{size:"sm",iconAfter:jsxRuntimeExports.jsx(MA,{}),onClick:Ae,testid:"go-to-first-page-button",disabled:me,type:"secondary",variant:"ghost"})}),jsxRuntimeExports.jsx(mf,{open:_e&&oe,title:ve("grid.pagination.previousPage"),onOpenChange:ke=>{(!oe||J.start===1)&&ke||$e(ke)},children:jsxRuntimeExports.jsx(rl,{size:"sm",iconAfter:jsxRuntimeExports.jsx(gk,{}),disabled:me,onClick:ce,testid:"go-to-prev-page-button",type:"secondary",variant:"ghost"})}),jsxRuntimeExports.jsx(mf,{open:Ie,title:ve("grid.pagination.nextPage"),onOpenChange:ke=>{ne&&Fe(ke)},children:jsxRuntimeExports.jsx(rl,{size:"sm",iconAfter:jsxRuntimeExports.jsx(vk,{}),disabled:ge,onClick:ue,testid:"go-to-next-page-button",type:"secondary",variant:"ghost"})}),jsxRuntimeExports.jsxs("span",{className:"grid-pagination__counter",children:[J.start," - ",J.end]})]})},PageNavigation=({page:K,onChangeCurrentPage:J,isPageDataLoading:ne,isAvailableNextPage:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(),pe=()=>{if(K===ue||!ue){Ae(void 0);return}J(ue),Ae(void 0)},ve=me=>{(me.code===KeyboardCode.Enter||me.code===KeyboardCode.NumpadEnter)&&pe()};return reactExports.useEffect(()=>{K!==ue&&Ae(void 0)},[K]),K===1&&(ne||!oe)?null:jsxRuntimeExports.jsxs("div",{className:"grid-page-navigation",children:[jsxRuntimeExports.jsx("div",{className:"grid-page-navigation__label",children:ce("grid.pagination.jumpToPage")}),jsxRuntimeExports.jsx(CF,{variant:"outlined",className:"grid-page-navigation__input",value:ue,onChange:me=>Ae(me?Number(me):void 0),onKeyDown:ve}),jsxRuntimeExports.jsx(rl,{size:"sm",variant:"ghost",className:"grid-page-navigation__button",onClick:pe,children:ce("grid.pagination.go")})]})};function useQueryBuilder(K=!1){const[J,{setTrue:ne,setFalse:oe}]=useBoolean(K),[ce,ue]=reactExports.useState({});return{isApplied:reactExports.useMemo(()=>!isEmpty$2(ce),[ce]),isShow:J,query:ce,mapQueryToDTO:()=>Object.keys(ce).reduce((ye,xe)=>{const{condition:_e,value:$e}=ce[xe];return isNullable($e)?ye:{...ye,[xe]:{[_e]:$e}}},{}),generateElementsBySchema:(ye,xe)=>ye&&xe?mapSchemaToElements(ye,xe):[],close:oe,show:ne,apply:ye=>ue({...ye}),reset:()=>ue({})}}const initialSelectedRow={key:void 0,type:void 0};function useEntities({tabSchema:K,useCache:J=!1,columnsState:ne,gridColumns:oe,updateTypeState:ce,cellHeight:ue,initPageSize:Ae,initPageIndex:pe,tabResult:ve,resetTabResult:me}){var nr;const{state:ge,action:ye}=useAppContext(),{state:xe,action:_e}=useDndContext(),$e=(K==null?void 0:K.Name)&&((nr=ge.cacheTabData)==null?void 0:nr[K.Name])||null,Ie=usePagination({initPageSize:Ae,initPageIndex:pe}),Fe=useQueryBuilder(!!$e),ke=useSelector$1(selectActiveDataset$1),je=useSelector$1(selectUser),{activeTab:We}=useTabParams(),[ze,Xe]=reactExports.useReducer(Er=>Er+1,0),Je=reactExports.useRef(0),nt=reactExports.useRef(0),et=reactExports.useRef(!0),[tt,st]=reactExports.useState(void 0),[qe,Se]=reactExports.useState({}),{debounce:Re,isLoading:Be}=useDebounce(),[Ne,Ue]=reactExports.useState(initialSelectedRow),[Ge,Ye]=reactExports.useState({}),[Qe,Te]=reactExports.useState({}),[Ke,rt]=reactExports.useState([]),[it,at]=reactExports.useState(!1),[lt,ct]=reactExports.useState(!1),{fetch:ot,isLoading:ft}=useRequest(storageApi.deleteEntities),{fetch:dt,isLoading:mt,status:kt,error:wt}=useRequest(handlerApi.handlerRun),[Et,Ot]=reactExports.useState(!1),[Rt,gt]=reactExports.useState(null),[$t,pt]=reactExports.useState(null),[vt,Mt]=reactExports.useState(!1),St=()=>{Mt(!1)},_t=reactExports.useRef({...initialSelectedRow}),Xt=Object.values(Ge).length!==0,Tt=reactExports.useRef(!1),Dt=mt||ft||xe.isViewersDataLoading,Ht=reactExports.useMemo(()=>mapMetadataToGridColumnsHelper((tt==null?void 0:tt.Elements)||[],ne,oe,ce),[tt,ne,ue]),Bt=()=>{Ue(initialSelectedRow),_e.setSelectedGridRow(initialSelectedRow),_e.selectGridRowKey(initialSelectedRow.key||"")},It=()=>Ye({}),zt=reactExports.useCallback(Er=>Er==null?void 0:Er._key,[]),Pt=Er=>{const Zt=Ke.find(Ir=>zt(Ir)===Er);if(!Zt||!K)return;_t.current.key=Zt._key,_t.current.type=Zt._t;const ir={key:Zt._key,type:Zt._t};Ue(ir),_e.setSelectedGridRow(ir),_e.selectGridRowKey(ir.key),Er!==Ne.key&&_e.fetchListPanelsData({type:K.Name,key:Zt._key})},Vt=Er=>{const Zt=Ie.getLimit(),ir=Ie.getSkipByCurrentPage(),Ir={Limit:Zt,Skip:ir},tr=Object.keys(Fe.mapQueryToDTO()).length?{QueryDict:Fe.mapQueryToDTO()}:{};return Er.tableKey?{Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectType",Arguments:{TypeName:Er.id,...Ir,...tr}}:{Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectTable",Arguments:{TableName:Er.id,...Ir,...tr}}},vr=Er=>{const Zt=Er,ir=convertSchemaTypeDtoToModel(Zt.Schema,Zt.BaseType),Ir=ir.typeList[ir.rootType];J&&Fe.isApplied&&(Zt.Data.length?ye.setCacheQueryDataAction({type:K.Name,query:Fe.query,entityData:Zt.Data,entitySchema:Ir}):ye.clearCacheQueryByTypeAction(K.Name)),Ie.updatePagination(Zt.Data),st(Ir),Se(ir.typeList);const tr=Ie.sliceEntitiesByLimit(Zt.Data);if(!tr.find(Or=>zt(Or)===Ne.key)&&_t.current.key===""&&Bt(),rt(tr),Ne.key||Er!=null&&Er.Data.length){const Or=Ne.key||(Er==null?void 0:Er.Data[0]._key),sr=tr.find(dr=>zt(dr)===Or);sr&&K&&_e.fetchListPanelsData({type:K.Name,key:sr._key})}nt.current=tr.length},qt=Er=>{if(!(!K||!We||Tt.current))if(ve){if(ve.Data.length){const{_key:Zt,_t:ir}=ve.Data[0];Ue({key:Zt,type:ir})}vr(ve),me(),Ie.updateRange(nt.current),Ie.reset(),Er==null||Er()}else Tt.current=!0,dt(Vt(We)).then(Zt=>{vr(Zt[0].Result)}).catch(Zt=>{toast.error(Zt),externalStorage.clearLayoutDirection()}).finally(()=>{Ie.updateRange(nt.current),Ie.reset(),Er==null||Er(),Tt.current=!1})},er=()=>{const Er=[{Key:Ne.key,Type:Ne.type}],ir=Xt?(Ir=>Object.values(Ir).map(({_key:tr,_t:cr})=>({Key:tr,Type:cr})))(Ge):Er;ot({data:ir,dataset:ke||""}).then(()=>{if(gt(ToolbarActionIconStatus.SUCCESS),ir.some(tr=>tr.Key===Ne.key)){const tr=ir.map(sr=>sr.Key),cr=Ke.find(sr=>tr.indexOf(sr._key)===-1),Or=cr?{key:cr._key,type:cr._t}:initialSelectedRow;Ue(Or),Mt(!0),_e.setSelectedGridRow(Or),_e.selectGridRowKey(Or.key||"")}It(),Ie.onResetPage(),Object.keys(Ge).length===Je.current?Fe.reset():Xe()}).catch(()=>gt(ToolbarActionIconStatus.ERROR)).finally(()=>setTimeout(()=>gt(null),5e3))},yr=async Er=>{const Zt=Xt?Object.keys(Ge):[Ne.key],ir={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"ExportRecords",Arguments:{TypeToExport:Ne.type,Keys:Zt,WithDependencies:Er},Dataset:ke,userName:je==null?void 0:je.username};try{(await handlerApi.handlerRun(ir)).forEach(tr=>{const cr=tr.Result;cr.FileBytes&&downloadZipFromObject(cr.FileBytes,cr.Name)})}catch(Ir){toast.error(Ir)}},Lt=async Er=>{const Zt=Xt?Object.keys(Ge):[Ne.key],ir={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"SavePermanently",Arguments:{TypeToExport:Ne.type,Keys:Zt,WithDependencies:Er},Dataset:ke,userName:je==null?void 0:je.username};await handlerApi.handlerRun(ir).then(()=>pt(ToolbarActionIconStatus.SUCCESS)).catch(()=>pt(ToolbarActionIconStatus.ERROR)).finally(()=>setTimeout(()=>pt(null),5e3))},jt=Er=>{Pt(Er),_e.updateSelectedGridRowKey(Er),Re({value:"",fn:()=>{}}),externalStorage.removeAllParamsViewers()},fr=Er=>{Fe.apply(Er),Ie.onResetPage()},Gt=()=>{Ie.onResetPage(),Fe.reset(),K!=null&&K.Name&&ye.clearCacheQueryByTypeAction(K.Name)},Jt=Er=>{Ye(Zt=>{const ir=structuredClone(Zt);return delete ir[Er],ir})};reactExports.useEffect(()=>{if(et.current&&$e){et.current=!1,Ie.updatePagination($e.entityData);const Er=Ie.sliceEntitiesByLimit($e.entityData);st($e.entitySchema),rt(Er)}else qt();_t.current.key="",_t.current.type=""},[K,Ie.page,Fe.query,ze]);const ar=()=>{at(!0),ct(!1)},Wt=()=>{at(!1),ct(!0)};return reactExports.useEffect(()=>{!it&&lt&&ct(!1)},[it,lt]),{resetSetShouldResetMarkedIndex:St,shouldResetMarkedIndex:vt,isSelectedLoading:Be,loading:Dt,status:kt,columns:Ht,entities:Ke,error:wt?getErrorMessage(wt):"",selectedRow:Ne,getRowId:zt,selectedRangeRows:Ge,selectRangeRows:Ye,fetch:qt,selectRow:Ue,selectRowByKeyWithDelay:jt,deleteSelectedRangeRows:er,deleteEntitiesStatus:Rt,exportBulkEntities:yr,savePermanentlyStatus:$t,saveRecordPermanently:Lt,selectedRowsPerPage:Qe,setSelectedRowsPerPage:Te,isSelectAllRecordsBtnClicked:it,isDeselectAllRecordsBtnClicked:lt,setIsSelectAllRecordsBtnClicked:at,selectAllRecords:ar,deselectAllRecords:Wt,maxEntitiesCountRef:Je,removeSelectionRowByKey:Jt,pagination:{range:Ie.generateRangeByEntities(Ke),isAvailableNextPage:Ie.isAvailableNextPage,isAvailablePreviousPage:Ie.isAvailablePreviousPage,onNextPage:Ie.onNextPage,onPreviousPage:Ie.onPreviousPage,onFirstPage:Ie.onFirstPage,isAvailableNextPageRef:Ie.isAvailableNextPageRef,page:Ie.page,isPageDataLoading:Ie.isPageDataLoading,onChangeCurrentPage:Ie.onChangeCurrentPage,onRevertPrevPage:Ie.onRevertPrevPage},isRowFocus:Et,setIsRowFocus:Ot,queryBuilder:{query:Fe.query,isQueryApplied:Fe.isApplied,renderQueryBuilderHeader:Fe.renderHeader,queryBuilderElements:Fe.generateElementsBySchema(tt,qe),isShowQueryBuilder:Fe.isShow,showQueryBuilder:Fe.show,closeQueryBuilder:Fe.close,resetQuery:Gt,applyQuery:fr}}}var ViewersMetadataType=(K=>(K.PRIMARY_DASHBOARD="PrimaryDashboard",K.DASHBOARD="Dashboard",K.DETAILS="Details",K))(ViewersMetadataType||{});const selectPrioritizedPanel=K=>{let J;for(const ne of K){const oe=ne==null?void 0:ne.Kind;if(oe===ViewersMetadataType.PRIMARY_DASHBOARD)return ne;oe===ViewersMetadataType.DASHBOARD&&(J=ne)}return J};function useNewTab(){const{activeTab:K}=useTabParams(),J=useSelector$1(selectUser),ne=useDispatch$1(),oe=useSelector$1(selectActiveDataset$1),ce=useRequest(handlerApi.handlerRun);return{handler:reactExports.useCallback(Ae=>{if(!K||!oe)return;const pe=Ae.id,ve={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"GetRecordPanels",Keys:[],Arguments:{TypeName:K.id,Key:pe},Dataset:oe,userName:J==null?void 0:J.username};ce.fetch(ve).then(me=>selectPrioritizedPanel(me[0].Result)).then(me=>{if(!me)return;const ge={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"LoadRecordPanel",Keys:[],Arguments:{TypeName:K.id,Key:pe,PanelId:me.Name},userName:J==null?void 0:J.username};return ce.fetch(ge).then(ye=>{const xe=ye[0].Result,_e=getViewerTypeHelper(xe),$e=`${_e}: ${pe}`;ne(openTab({id:pe,label:$e,key:_e,dynamicType:{type:me.Kind,id:pe}}))})})},[K==null?void 0:K.id,oe])}}function useSorting(K){const J=reactExports.useCallback(oe=>externalStorage.setSortByKey(K,oe),[K]),ne=()=>externalStorage.clearSortByKey(K);return reactExports.useEffect(()=>ne,[]),{onChanged:J}}function useViewSettings(K,J=!1){const{state:ne,action:oe}=useDndContext(),ce=useSelector$1(selectUser),{fetch:ue,state:Ae,hasInitFetch:pe,isLoading:ve,status:me}=useRequest(storageApi.getTypeViewSettings),[ge,ye]=reactExports.useState({LayoutSettings:{HideEditor:!1},ReadOnly:!1,UseCache:!1}),[xe,_e]=reactExports.useState(!1),$e=reactExports.useCallback(()=>{if(!K||!ce)return;oe.resetCellHeight(),oe.resetPinnedHandlers(),oe.resetIsReadOnly(),oe.resetMaximizedStates(),oe.resetUserGuide(),oe.resetInitiallyHiddenColumns(),oe.resetUseCache(),externalStorage.getLayoutDirection(K.Name)||externalStorage.setLayoutDirectiom(K.Name,ne.layoutDirection);const{Name:je,Module:We}=K;ue({type:je,module:We.ModuleName,user:ce.id}).then(ze=>{var Qe,Te;const{PinnedHandlers:Xe,ReadOnly:Je,MaximizedTabId:nt,MainGridCellHeight:et,UserGuideContent:tt,UserGuideFormat:st,UserGuideCompleted:qe,HideEditor:Se,ColumnsState:Re,UseCache:Be=!1,PageIndex:Ne,PageSize:Ue}=ze||{};let Ge=[...Re||[]];Ge!=null&&Ge.some(Ke=>Ke===null)&&(Ge=Ge.filter(Ke=>Ke!==null)),(Je||nt)&&(ye(Ke=>({...Ke,ReadOnly:Je||!1,maximizedTabId:nt})),_e(Ke=>!Ke)),oe.updatePinnedHandlers(Xe||[]);const Ye=J||Je||!1;!Ye&&((Qe=K.Inherit)!=null&&Qe.Name)?ue({type:(Te=K.Inherit)==null?void 0:Te.Name,module:We.ModuleName,user:ce.id}).then(Ke=>{const{ReadOnly:rt}=Ke||{};oe.updateIsReadOnly(rt||!1)}):oe.updateIsReadOnly(Ye),oe.updateMaximizedTabId(nt||"",!0),oe.updateCellHeight(et||+env$1.gridMaxLines),oe.updateUserGuide({userGuideContent:tt,userGuideFormat:st,userGuideCompleted:!!qe}),oe.updateHideEditorValue(Se),oe.updateInitiallyHiddenColumns((Ge==null?void 0:Ge.reduce((Ke,rt)=>rt!=null&&rt.Hidden?[...Ke,rt.Id]:Ke,[]))||[]),oe.updateUseCache(Be),Ne&&oe.updatePageIndex(Ne),Ue&&oe.updatePageSize(Ue)})},[K,pe]);reactExports.useEffect($e,[K]);const Ie=ke=>{ye({...ge,Layout:ke}),_e(je=>!je)};return{typeViewSettings:reactExports.useMemo(()=>{var je;let ke=structuredClone(Ae);return ke||(ke={}),ke.ColumnsState=((je=ke.ColumnsState)==null?void 0:je.filter(We=>We!==null))||[],{...ge,...ke}},[xe,Ae]),addLayoutToSettings:Ie,isInitFetch:!pe,isViewSettingsLoading:ve,viewSettingsStatus:me}}const runLocalSearch=(K,J)=>K.filter(ne=>searchByName(ne.Header,J)),MainGridFilterDropdown=reactExports.forwardRef(({handleClose:K,columns:J,handleTypeUpdate:ne,updateInitiallyHiddenColumns:oe,hiddenColumns:ce,setHiddenColumns:ue},Ae)=>{const{t:pe}=useTranslation(),[ve,me]=reactExports.useState([]),[ge,ye]=reactExports.useState(""),[xe,_e]=reactExports.useState(!1),$e=reactExports.useMemo(()=>J.filter(et=>!et.suppressHideColumn),[J]),Ie=reactExports.useMemo(()=>$e.filter(et=>env$1.hideEmptyColumns==="false"?!1:!et.isVisible).map(et=>et.id),[$e]);reactExports.useEffect(()=>(me($e),ue(Ie),_e(Ie.length===0),()=>ue([])),[Ie]);const Fe=reactExports.useCallback(et=>{et.code===KeyboardCode.Escape&&K()},[K]);reactExports.useEffect(()=>(document.addEventListener("keydown",Fe),()=>{document.removeEventListener("keydown",Fe)}),[Fe]);const ke=(et="")=>{if(!et)return;let tt=[...ce];tt.includes(et)?tt=tt.filter(st=>st!==et):tt=[...tt,et],tt.length>0?_e(!1):_e(!0),ue(tt)},je=et=>{const tt=runLocalSearch($e,et);ye(et),me(tt)},We=()=>{ye(""),me($e)},ze=()=>{ue(Ie),_e(Ie.length===0),K()},Xe=()=>{const et=J.map(tt=>{if(!tt.suppressHideColumn){const st=ce.includes(tt.id);return tt.toggleHidden(st),{...tt,isVisible:!st}}return{...tt}});K(),ne({headers:et}),oe(ce)},Je=et=>!ce.includes(et),nt=()=>{if(xe){ue($e.map(et=>et.id)),_e(!1);return}ue([]),_e(!0)};return reactExports.useImperativeHandle(Ae,()=>({restoreDefaultLayout:()=>{ue([]),_e(!0),$e.forEach(et=>{et.toggleHidden(!1)})}})),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"mainGridFilterDropdown",children:[jsxRuntimeExports.jsx(Ml,{variant:"outlined",placeholder:pe("grid.columnFilter.filterPlaceholder")||"",value:ge,onChange:je,prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:ge?jsxRuntimeExports.jsx(Pp,{onClick:We}):null}),jsxRuntimeExports.jsx(pF,{intermediate:!!ce.length&&ce.length!==$e.length,value:xe,onChange:nt,children:pe("checkboxLabex.label")})]}),jsxRuntimeExports.jsx("div",{className:"mainGridFilterDropdown__dropdownList",children:ve.map(et=>jsxRuntimeExports.jsx(pF,{value:Je(et.id),onChange:()=>ke(et.id),children:et.render("Header")},et.id))}),jsxRuntimeExports.jsxs("div",{className:"mainGridFilterDropdown__buttonsContainer",children:[jsxRuntimeExports.jsx(rl,{onClick:Xe,children:pe("buttons.apply")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:ze,children:pe("buttons.cancel")})]})]})});MainGridFilterDropdown.displayName="MainGridFilterDropdown";const container$a="_container_1qe4o_1",checkboxContainer="_checkboxContainer_1qe4o_13",styles$n={container:container$a,checkboxContainer},MainGridFilterCell=reactExports.forwardRef(({columns:K,gridMode:J,rows:ne,onSelectedRowsRangeChanged:oe,clearCellSelectionState:ce,selectAllRowsAllCells:ue,maxEntitiesCount:Ae,isAvailableNextPageState:pe,maxRangeCounter:ve,selectedRowsPerPage:me,setSelectedRowsPerPage:ge,updateSelectedRowsPerPageState:ye,isSelectAllRecordsBtnClicked:xe,isDeselectAllRecordsBtnClicked:_e,setIsSelectAllRecordsBtnClicked:$e,handleTypeUpdate:Ie,updateInitiallyHiddenColumns:Fe},ke)=>{const[je,We]=reactExports.useState(!1),ze=reactExports.useRef(null),{selectedRowsRange:Xe}=reactExports.useContext(GridContext),Je=Object.keys(Xe).length,[nt,et]=reactExports.useState(!1),[tt,st]=reactExports.useState(!1),[qe,Se]=reactExports.useState([]);reactExports.useEffect(()=>{if(!ze.current)return;const Te={},Ke=structuredClone(Xe);ne.forEach(at=>{!xe&&Xe[at.id]&&(Te[at.id]=structuredClone(Xe[at.id])),xe&&!Xe[at.id]&&(Ke[at.id]={_key:at.original._key,_t:at.original._t}),xe&&(Te[at.id]={_key:at.original._key,_t:at.original._t})}),xe&&!_e?oe(Ke):!xe&&_e&&oe({});const it=xe&&!_e||!xe&&!_e?Te:{};ye(it),ge(it),st(xe&&!_e?Object.keys(Te).length===ne.length:!1)},[ve,xe,_e]),reactExports.useEffect(()=>{if(!ze.current)return;const Te=Object.keys(Xe).length!==0,Ke=Object.keys(Xe).length===Ae,rt=Te&&Ke&&!pe||xe;ze.current.checked=rt,ze.current.indeterminate=Je>0&&!rt&&!xe,et(Je>0&&!rt&&!xe),st(xe&&!_e?!0:Object.keys(me).length===ne.length)},[ne.length,Xe,me,xe,_e]);const Re=reactExports.useCallback(()=>We(!1),[]),Be=()=>{const Te=structuredClone(Xe),Ke={};ne.forEach(rt=>{const{_key:it,_t:at}=rt.original;Te[rt.id]={_key:it,_t:at},Ke[rt.id]={_key:it,_t:at}}),oe(Te),ye(Ke),ge(Ke),ue(),st(!0)},Ne=reactExports.useCallback(()=>{const Te=structuredClone(Xe),Ke={};ne.forEach(rt=>{Te[rt.id]||(Te[rt.id]={_key:rt.original._key,_t:rt.original._t}),Ke[rt.id]={_key:rt.original._key,_t:rt.original._t}}),oe(Te),ye(Ke),ge(Ke),st(!0),ue()},[Xe]),Ue=reactExports.useCallback(()=>{const Te=structuredClone(Xe);ne.forEach(({id:Ke})=>{Te[Ke]&&delete Te[Ke]}),oe(Te),ye({}),ge({}),st(!1),ce()},[Xe]),Ge=reactExports.useCallback(Te=>{const Ke=ne.length===Je,rt=ne.length!==Je&&Je!==0;if((Ke||rt)&&!Te.ctrlKey){oe({}),ye({}),ge({}),ce(),st(!1),xe&&$e(!1);return}if(!tt&&Te.ctrlKey){Ne();return}if(tt&&Te.ctrlKey){Ue();return}Be()},[Je,oe,ne.length,tt,xe]),Ye=()=>{const Te=[];K.forEach(Ke=>{env$1.hideEmptyColumns!=="false"&&(Ke.isVisible||Te.push(Ke.id))}),Se(Te)},Qe=()=>jsxRuntimeExports.jsx(MainGridFilterDropdown,{ref:ke,columns:K,handleClose:Re,handleTypeUpdate:Ie,updateInitiallyHiddenColumns:Fe,hiddenColumns:qe,setHiddenColumns:Se});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx(styles$n.container),children:jsxRuntimeExports.jsx(Y_,{testid:"main-grid-filter-dropdown",open:je,onOpenChange:Te=>{We(Te),Te||Ye()},dropdownRender:Qe,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(rl,{testid:"main-grid-filter-icon",variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(zB,{})})})})}),J===GridModeEnum.MAIN&&jsxRuntimeExports.jsx("div",{className:styles$n.checkboxContainer,children:jsxRuntimeExports.jsx(pF,{value:tt,intermediate:nt,onClick:Ge,checkboxRef:ze})})]})});MainGridFilterCell.displayName="MainGridFilterCell";const panelGroup="_panelGroup_456bh_1",queryBuilder="_queryBuilder_456bh_6",gridPanel="_gridPanel_456bh_11",logsPanel$1="_logsPanel_456bh_16",pagination="_pagination_456bh_20",styles$m={panelGroup,queryBuilder,gridPanel,logsPanel:logsPanel$1,pagination},MainTypeContainer=({activeTypeTab:K,metaData:J,tabResult:ne,resetTabResult:oe})=>{var lr,hr,Yr,ur,pr,Jr;const{action:ce,state:ue}=useAppContext(),{state:Ae,action:pe}=useDndContext(),ve=useRequest(schemaApi.getTypeHierarchy),me=useSelector$1(selectIsReadonly),ge=useSelector$1(selectGridSchema),ye=me||Ae.isTypeReadOnly,xe=reactExports.useRef(),_e=reactExports.useRef(),[$e,Ie]=reactExports.useState([]),[Fe,ke]=reactExports.useState([]),[je,We]=reactExports.useState([]),[ze,Xe]=reactExports.useState(!1),[Je,nt]=reactExports.useState(""),[et,tt]=reactExports.useState(""),[st,qe]=reactExports.useState(""),{typeViewSettings:Se,addLayoutToSettings:Re,isInitFetch:Be}=useViewSettings(J.data,me),Ne=Yt=>{if(Yt.columnType===ValueTypesEnum$1.Bool){const or=Yt.filterValue;switch(or){case"true":return BooleanColumnInputValueEnum.y;case"false":return BooleanColumnInputValueEnum.n;default:return or}}else return Yt.filterValue},Ue=(Yt,or)=>{const Fr=xe.current.headers.reduce((kr,Kr)=>{var cn,An;return Kr.id!==ColumnNameType.FILTER?[...kr,{Id:Kr.id,Filter:(Kr.id===Yt.id?or:Ne(Kr))||"",Hidden:((cn=xe.current.hiddenColumns)==null?void 0:cn.some(_n=>_n===Kr.id))||!1,SortDesc:_e.current.getSortDesc(Kr),SizeInPercent:Number.parseInt(String(((An=Kr.getHeaderProps().style)==null?void 0:An.width)||150),10),MaxSizeInPixels:Kr.maxWidth,MinSizeInPixels:Kr.minWidth,SizeFixed:!Kr.canResize,_t:"ColumnState"}]:kr},[]);pe.saveUiTypeData({simplifiedConfig:getParsedConfig(_e.current.config),updatedColumnsState:Fr})},Ge=reactExports.useRef(),{resetSetShouldResetMarkedIndex:Ye,shouldResetMarkedIndex:Qe,queryBuilder:Te,pagination:Ke,status:rt,loading:it,isSelectedLoading:at,columns:lt,entities:ct,error:ot,selectedRow:ft,selectedRangeRows:dt,selectRangeRows:mt,fetch:kt,selectRow:wt,getRowId:Et,selectRowByKeyWithDelay:Ot,deleteSelectedRangeRows:Rt,deleteEntitiesStatus:gt,exportBulkEntities:$t,saveRecordPermanently:pt,savePermanentlyStatus:vt,selectedRowsPerPage:Mt,setSelectedRowsPerPage:St,isSelectAllRecordsBtnClicked:_t,isDeselectAllRecordsBtnClicked:Xt,setIsSelectAllRecordsBtnClicked:Tt,selectAllRecords:Dt,deselectAllRecords:Ht,maxEntitiesCountRef:Bt,removeSelectionRowByKey:It,isRowFocus:zt,setIsRowFocus:Pt}=useEntities({tabSchema:J.data,useCache:Se.UseCache,columnsState:Se.ColumnsState,gridColumns:((lr=xe.current)==null?void 0:lr.gridColumns)||[],updateTypeState:Ue,cellHeight:Ae.cellHeight,initPageSize:Ae.pageSize,initPageIndex:Ae.pageIndex,tabResult:ne,resetTabResult:oe}),{onChanged:Vt}=useSorting(K),{handler:vr}=useNewTab(),{isOpen:qt}=useLogsPanel();reactExports.useImperativeHandle(Ae.headersRef,()=>{var Yt,or;return{headers:((Yt=xe.current)==null?void 0:Yt.headers)||[],data:Se,addLayoutToSettings:Re,selectRowByKeyWithDelay:Ot,updateMarkedIndexOnRowChange:(or=xe.current)==null?void 0:or.updateMarkedIndexOnRowChange,handleEntitiesRefresh:kt}},[(hr=xe.current)==null?void 0:hr.headers]);const er=me||Ae.isTypeReadOnly,yr=((Yr=ue.cacheTabData)==null?void 0:Yr[K])||null,Lt=(pr=(ur=J.data.Declare)==null?void 0:ur.Handlers)==null?void 0:pr.filter(Yt=>Yt.Type===HandlerType.JOB),jt=isDefined$2(Lt)&&Lt.length!==0&&!er;reactExports.useEffect(()=>{ce.onConfirmLeaveEditor(()=>{Ot(Ae.selectedGridRowKey),Pt(!0)})},[Ae.selectedGridRowKey]),reactExports.useEffect(()=>{var Yt;Ae.maximizedTabId===EditorTabsEnum.EDITOR&&!ft.key&&ct.length!==0&&Ot((Yt=ct[0])==null?void 0:Yt._key)},[Ae.maximizedTabId,ct]),reactExports.useEffect(()=>{isDefined$2(externalStorage.getSelectedRow())&&Ot(externalStorage.getSelectedRow())},[Ae.selectedGridRowKey,externalStorage.getSelectedRow()]);const fr=async Yt=>{try{const or=await ve.fetch({name:Yt});We(or)}catch(or){console.error(or)}};reactExports.useEffect(()=>{K&&fr(K)},[K]),reactExports.useImperativeHandle(Ae.selectRowByKeyWithDelay,()=>({setIsRowFocus:Pt,selectRowByKeyWithDelay:Ot}));const Gt=()=>{ce.setActiveEditorTabAction(ge.data.Kind===KindTypeModel.ABSTRACT?EditorTabsEnum.SELECT_TYPE:EditorTabsEnum.EDITOR)};reactExports.useImperativeHandle(Ae.restoreLayoutRef,()=>{var Yt;return{restoreLayoutRef:()=>{var or,Fr;(or=xe.current)==null||or.resetLayout(),(Fr=Ge.current)==null||Fr.restoreDefaultLayout(),Ke.onFirstPage(),Ke.page===1&&ce.onConfirmLeaveEditor(()=>Ot(Et(ct[0]))),mt({}),Tt(!1),lt.forEach(kr=>{if(kr.columnType===ValueTypesEnum$1.Bool){const[,Kr]=kr.filteredValueMask||[];Kr==null||Kr("")}})},columnsWidths:((Yt=xe.current)==null?void 0:Yt.columnsWidths)||{},originalColumns:lt}});const Jt=reactExports.useCallback(()=>xe.current.exportGridOptions,[]),ar=Yt=>{kt(()=>{var or,Fr;if(Yt!=null&&Yt.oldKey){const kr=Yt.oldKey;xe.current.deleteOldSelectedRowKey(kr),It(kr)}Yt!=null&&Yt.newKey&&(wt(kr=>({...kr,key:Yt.newKey||""})),(Fr=(or=Ae.headersRef.current)==null?void 0:or.updateMarkedIndexOnRowChange)==null||Fr.call(or,Yt.newKey))})},Wt=Yt=>{Yt&&ar(Yt),Gt()},nr=(Yt,or)=>Ae.maximizedTabId===EditorTabsEnum.EDITOR?Yt:or==null?void 0:or.getBoundingClientRect().height,Er=()=>{ce.setActiveEditorTabAction(EditorTabsEnum.EDITOR),kt()},Zt=()=>Te.isShowQueryBuilder?Te.closeQueryBuilder():Te.showQueryBuilder(),ir=Yt=>jsxRuntimeExports.jsxs("div",{className:cx(styles$m.pagination,Yt),children:[jsxRuntimeExports.jsx(GridPagination,{isGridPageDataLoading:Ke.isPageDataLoading,isAvailableNextPage:Ke.isAvailableNextPage,isAvailablePreviousPage:Ke.isAvailablePreviousPage,range:Ke.range,page:Ke.page,onNext:Ke.onNextPage,onPrev:Ke.onPreviousPage,onFirst:Ke.onFirstPage}),jsxRuntimeExports.jsx(PageNavigation,{page:Ke.page,onChangeCurrentPage:Ke.onChangeCurrentPage,isPageDataLoading:Ke.isPageDataLoading,isAvailableNextPage:Ke.isAvailableNextPage})]}),Ir=Yt=>{externalStorage.setMainGridScrollPercent({[J.data.Name]:Yt})},tr=()=>{const Yt=[EditorTabsEnum.NEW_ENTITY,EditorTabsEnum.SELECT_TYPE],or=Ke.page!==1,Fr=it||Be;return Yt.includes(ue.activeEditorTab)?jsxRuntimeExports.jsx(DraggableEditorContainer,{isLoading:!1,type:J.data.Name,stackRef:makeStack([EDITOR_TABS[ue.activeEditorTab]]),onUpdate:Wt,isSingleTabStackDragging:!0,configType:StackEnum.STACK,selectedRangeRows:dt,fetchEntities:kt}):or?jsxRuntimeExports.jsx(PF,{loading:Fr,children:jsxRuntimeExports.jsx(NoGridData,{content:t$5("noData.pageNotExist"),isRefreshButton:!0,handleButtonClick:Ke.onRevertPrevPage,icon:jsxRuntimeExports.jsx(Pp,{size:"Full"}),additionalContent:t$5("noData.returnToPrevPage"),getPaginationBlock:ir,buttonIcon:jsxRuntimeExports.jsx(Nk,{}),buttonTitle:"noData.return"})}):jsxRuntimeExports.jsx(PF,{loading:Fr,children:jsxRuntimeExports.jsx(NoGridData,{content:getNoGridDataTitle(rt,ot)||t$5("noData.inTheReport"),isRefreshButton:!0,handleButtonClick:kt,icon:jsxRuntimeExports.jsx(Pp,{size:"Full"}),additionalContent:t$5("noData.details"),getPaginationBlock:ir})})},cr=({passedColumns:Yt,gridMode:or,rows:Fr,onSelectedRowsRangeChanged:kr,clearCellSelectionState:Kr,selectAllRowsAllCells:cn,updateSelectedRowsPerPageState:An,passedSelectedRowsPerPage:_n,isSelectAllRecordsBtnClicked:wn,isDeselectAllRecordsBtnClicked:Bn})=>(Ke.range.end>Bt.current&&(Bt.current=Ke.range.end),!Ke.isAvailableNextPage&&Ke.isAvailableNextPageRef.current&&(Ke.isAvailableNextPageRef.current=!1),jsxRuntimeExports.jsx(MainGridFilterCell,{ref:Ge,columns:Yt,gridMode:or,rows:Fr,onSelectedRowsRangeChanged:kr,clearCellSelectionState:Kr,selectAllRowsAllCells:cn,maxEntitiesCount:Bt.current,isAvailableNextPageState:Ke.isAvailableNextPageRef.current,maxRangeCounter:Ke.range.end,selectedRowsPerPage:_n,setSelectedRowsPerPage:St,updateSelectedRowsPerPageState:An,isSelectAllRecordsBtnClicked:!!wn,isDeselectAllRecordsBtnClicked:!!Bn,setIsSelectAllRecordsBtnClicked:Tt,handleTypeUpdate:pe.saveUiTypeData,updateInitiallyHiddenColumns:pe.updateInitiallyHiddenColumns})),Or=reactExports.useMemo(()=>{var or;const Yt={filters:[],sortings:[]};if(!Se.ColumnsState)return Yt;for(let Fr=0;Fr<((or=Se.ColumnsState)==null?void 0:or.length);Fr++){const kr=Se.ColumnsState[Fr];kr.Filter&&Yt.filters.push({id:kr.Id,value:kr.Filter}),Yt.sortings.push({id:kr.Id,desc:kr.SortDesc??void 0})}return Yt},[Se]),sr=()=>jsxRuntimeExports.jsx(Grid,{initialFilters:$e.length?$e:Or.filters,initialSortBy:Fe.length?Fe:Or.sortings,setSavedFilters:Ie,setSavedSortings:ke,ref:xe,columns:lt,initiallyHideEmptyColumns:!0,initiallyHiddenColumns:Ae.initiallyHiddenColumns,data:ct,gridName:K,gridMode:er?GridModeEnum.READ_ONLY:GridModeEnum.MAIN,selectedRowId:ft.key,selectedRowsRange:dt,getRowId:Et,onRowDoubleClicked:vr,onChangeSelectedRowId:Yt=>{ce.onConfirmLeaveEditor(()=>{Ot(Yt),xe.current.updateMarkedIndexOnRowChange(Yt)},ft.key,!0,kt)},onSelectedRowsRangeChanged:Yt=>{Yt&&mt(Yt)},onSortingChanged:Vt,shouldClearCellsSelection:it,customFilterCell:cr,selectedRowsPerPage:Mt,setSelectedRowsPerPage:St,isSelectAllRecordsBtnClicked:_t,isDeselectAllRecordsBtnClicked:Xt,setIsSelectAllRecordsBtnClicked:Tt,isRunHandlers:jt,cellRowsCount:Ae.cellHeight,onChangeGridRowsData:pe.updateGridRowsData,isLineBreakSymbol:!0,isRowFocus:zt,onChangeIsRowFocus:Pt,updateSelectedGridRowKey:Yt=>{pe.selectGridRowKey(Yt)},calculateElementHiehgt:nr,isReadOnly:ye,getPaginationBlock:ir,defaultScroll:externalStorage.getMainGridScrollPercent(J.data.Name),onChangeScroll:Ir,registerService:ue.mainGridService.register,clearService:ue.mainGridService.clear,shouldResetMarkedIndex:Qe,resetSetShouldResetMarkedIndex:Ye}),dr=()=>jsxRuntimeExports.jsx("div",{className:styles$m.panelGroup,children:jsxRuntimeExports.jsxs(PanelGroup,{direction:Ae.isHorizontalLayoutDirection?"horizontal":"vertical",children:[Te.isShowQueryBuilder&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Panel$1,{id:"main-type-container-query-builder",minSize:30,defaultSize:40,maxSize:70,order:1,className:styles$m.queryBuilder,children:jsxRuntimeExports.jsx(QueryBuilder,{initialQuery:(yr==null?void 0:yr.query)||Te.query,elements:Te.queryBuilderElements,onCancel:Te.closeQueryBuilder,onApply:Te.applyQuery,onReset:Te.resetQuery,isCloseIcon:!0})}),jsxRuntimeExports.jsx(PanelResizeHandle,{hitAreaMargins:{coarse:-1,fine:-1},className:Ae.isHorizontalLayoutDirection?"verticalPanelResizer":"horizontalPanelResizer"})]}),jsxRuntimeExports.jsxs(Panel$1,{id:"main-type-container-grid",order:2,className:styles$m.gridPanel,children:[jsxRuntimeExports.jsx(GridToolbar,{selectedRow:ft,entities:ct,isQueryApplied:Te.isQueryApplied,selectedRangeRows:dt,onExportGridOptions:Jt,showQueryBuilder:Zt,typeViewSettings:Se,onDeleteSelectedRangeRows:Rt,deleteEntitiesStatus:gt,onExportBulkEntities:$t,onSaveRecordPermanently:pt,savePermanentlyStatus:vt,onRefresh:Er,isSelectAllRecordsBtnClicked:_t,selectAllRecords:Dt,deselectAllRecords:Ht,cellRowsCount:Ae.cellHeight,isRowBorder:Ae.isRowBorder,onChangeIsRowBorder:pe.onChangeIsRowBorder,activeTypeTab:K,fetchEntities:kt,successors:je,isEntityModalOpen:ze,setIsEntityModalOpen:Xe,setActiveRecord:nt,setActiveType:tt,setModalTitle:qe}),ct.length?sr():tr()]})]})}),Dr=({tabs:Yt,stackRef:or,type:Fr})=>jsxRuntimeExports.jsx(DraggableGridContainer,{selectedGridRow:ft,tabs:Yt,stackRef:or,type:Fr,onUpdate:ar,children:dr()});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(UserGuideModal,{}),jsxRuntimeExports.jsx(TypeToolbar,{}),jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Panel$1,{id:"main-grid-panel",order:1,minSize:60,defaultSize:100,children:jsxRuntimeExports.jsx(DraggableContainer,{ref:_e,isLoading:at||(ft==null?void 0:ft.key)===void 0&&(ft==null?void 0:ft.type)===void 0||it,type:J.data.Name,showEditor:!((Jr=Se.LayoutSettings)!=null&&Jr.HideEditor||ct.length===0),draggableGrid:Dr,onUpdate:ar,data:Se,fetchEntities:kt})}),qt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(PanelResizeHandle,{hitAreaMargins:{coarse:-1,fine:-1},className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{id:"logs-panel",order:2,defaultSize:20,minSize:20,className:styles$m.logsPanel,children:jsxRuntimeExports.jsx(Logs,{})})]})]}),ze&&jsxRuntimeExports.jsx(CreateEntityModal,{isOpen:ze,setIsModalOpen:Xe,selectedType:et,baseType:K,recordKey:Je,title:st})]})},SingletonContainer=({type:K,moduleName:J,metaData:ne})=>{const{fetch:oe,state:ce,isLoading:ue}=useRequest(handlerApi.handlerRun),{fetch:Ae}=useRequest(storageApi.getTypeViewSettings),pe=useSelector$1(selectUser),{activeTab:ve}=useTabParams(),{action:me}=useDndContext(),[ge,ye]=reactExports.useState([]),xe=Ie=>Ie.tableKey?{Method:"SelectType",Type:HandlerRunTypeEnum.DATA_SERVICE,Arguments:{TypeName:Ie.id,Limit:1}}:{Method:"SelectTable",Type:HandlerRunTypeEnum.DATA_SERVICE,Arguments:{TableName:Ie.id,Limit:1}},_e=async()=>{if(ye([]),K&&(ve==null?void 0:ve.key)===K)try{const Fe=(await oe(xe(ve)))[0].Result;ye([Fe.Data.length===0?EditorTabsEnum.NEW_ENTITY:EditorTabsEnum.EDITOR])}catch(Ie){toast.error(Ie)}},$e=()=>{_e()};return reactExports.useEffect(()=>{if(!ne.data||!pe)return;const{Name:Ie,Module:Fe}=ne.data;Ae({type:Ie,module:Fe.ModuleName,user:pe.id}).then(ke=>{const{HideEditor:je}=ke||{};me.updateHideEditorValue(je)})},[]),reactExports.useEffect(()=>{K&&_e()},[K,J]),!ce||ue||ge.length===0?null:jsxRuntimeExports.jsx("div",{className:"singleton-container",children:jsxRuntimeExports.jsx(DraggableContainer,{type:K,tabs:ge,onUpdate:$e,showEditor:!0})})},TabItemContent=({activeTab:K,options:J})=>{var We,ze,Xe,Je;const{t:ne}=useTranslation(),oe=useAppDispatch(),ce=useSelector$1(selectMetaData),ue=useSelector$1(selectDataset),{InteractiveDashboardContainer:Ae}=useComponentsMapper(),{state:pe,action:ve}=useAppContext(),[me,ge]=reactExports.useState(""),[ye,xe]=reactExports.useState(null),_e=ce.data.DisplayKind===SchemaDisplayKind.Dashboard,$e=()=>{xe(null)},Ie=nt=>{const et={Limit:PAGINATION_LIMIT+1,Skip:0};return nt.tableKey?{Type:HandlerRunTypeEnum.DATA_SERVICE,Arguments:{TypeName:nt.id,...et},Method:"SelectType"}:{Type:HandlerRunTypeEnum.DATA_SERVICE,Arguments:{TableName:nt.id,...et},Method:"SelectTable"}},Fe=reactExports.useRef();reactExports.useEffect(()=>{if(pe.recordsData){const nt=pe.recordsData;xe(nt),ge(nt.BaseType),oe(getActiveTypeMetadata({activeTab:K.id,basetype:nt.BaseType})),ve.updateRecordsData(null);return}Fe.current=Ie(K),handlerApi.handlerRun(Fe.current).then(nt=>{var st,qe,Se,Re;const et=Ie(K),tt=nt[0].Result;xe(tt),(((qe=(st=Fe.current)==null?void 0:st.Arguments)==null?void 0:qe.TypeName)===("TypeName"in et.Arguments&&et.Arguments.TypeName)||((Re=(Se=Fe.current)==null?void 0:Se.Arguments)==null?void 0:Re.TableName)===("TableName"in et.Arguments&&et.Arguments.TableName))&&(ge(tt.BaseType),oe(getActiveTypeMetadata({activeTab:K.id,basetype:tt.BaseType})))})},[K.id]),reactExports.useEffect(()=>{ce.data.Name&&oe(getDatasetData({type:ce.data.Name,module:ce.data.Module.ModuleName}))},[ce.data.Name]);const ke=reactExports.useMemo(()=>isLoading([ce.status,ue.status])||me!==ce.data.Name,[ue.status,ce.status,ce.data.Name,me]);return reactExports.useMemo(()=>isError([ue.status,ce.status]),[ue.status,ce.status])?jsxRuntimeExports.jsx(NoGridData,{content:ne("noData.contactAdministrator")}):ke?jsxRuntimeExports.jsx(PF,{loading:!0}):((We=ce==null?void 0:ce.data)==null?void 0:We.DisplayKind)===SchemaDisplayKind.Singleton?jsxRuntimeExports.jsx(SingletonContainer,{type:(ze=ce==null?void 0:ce.data)==null?void 0:ze.Name,moduleName:(Je=(Xe=ce==null?void 0:ce.data)==null?void 0:Xe.Module)==null?void 0:Je.ModuleName,metaData:ce},K.id):_e||J.isDynamicDashboard||J.isDynamicPrimaryDashboard?isInteractiveDashboard(ce.data)||J.isDynamicPrimaryDashboard?jsxRuntimeExports.jsx(Ae,{type:K.id,chatKey:J.dynamicId}):jsxRuntimeExports.jsx(DashboardTypeContainer,{type:me},me):_e?jsxRuntimeExports.jsx(NoGridData,{content:ne("noData.contactAdministrator")}):jsxRuntimeExports.jsx(MainTypeContainer,{activeTypeTab:me,metaData:ce,tabResult:ye,resetTabResult:$e},me)},RecordEditorModal=({data:K,isReadOnly:J,isOpen:ne,onClose:oe,onSave:ce})=>{const{t:ue}=useTranslation(),[Ae,pe]=reactExports.useState(""),[ve,me]=reactExports.useState(!0);reactExports.useEffect(()=>{K&&ne&&(pe(serialize$1(K,void 0,2)),me(!0))},[K,ne]);const ge=_e=>{_e&&pe(_e),me(!1)},ye=_e=>{_e.length>0&&me(!0)},xe=()=>{Ae&&(ce==null||ce(deserialize$1(Ae)))};return jsxRuntimeExports.jsxs(Ho,{size:"lg",title:ue("editor.openJSONEditor"),open:ne,onClose:oe,defaultHeight:600,children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(CodeEditor,{isReadonly:J,code:Ae,language:LanguageEnum.Json,onChange:ge,onValidate:ye,isAutoFocus:!0})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"record-editor",onCancel:oe,okText:!J&&ue("buttons.save"),cancelText:ue("buttons.cancel"),onOk:xe,okProps:{disabled:ve}})]})},RecordEditor=({recordKey:K,recordType:J,isOpen:ne,onClose:oe,onSave:ce})=>{var me;const ue=useSelector$1(selectActiveDataset$1),{getRecord:Ae,saveEntity:pe}=useEditorRequest();reactExports.useEffect(()=>{J&&K&&ne&&Ae.fetch({key:K,type:J,dataset:ue})},[ne]);const ve=async ge=>{if(!(!J||!K))try{await pe.fetch({data:ge,recordType:J}),ce==null||ce()}catch{}};return jsxRuntimeExports.jsx(RecordEditorModal,{isOpen:ne,onClose:oe,onSave:ve,data:(me=Ae.state)==null?void 0:me.data})},GridTabsLayoutController=({isDashboard:K=!1})=>{var Xe,Je,nt,et;const{t:J}=useTranslation(),{state:ne}=useDndContext(),{action:oe}=useAppContext(),[ce,ue]=reactExports.useState(!1),[Ae,pe]=reactExports.useState(!1),[ve,me]=reactExports.useState(!1),[ge,ye]=reactExports.useState(!1),xe=ne.rowsData.findIndex(tt=>tt.id===ne.selectedGridRowKey),_e=xe===ne.rowsData.length-1||ne.rowsData.length===1;reactExports.useEffect(()=>{xe===0&&pe(!1),xe===ne.rowsData.length-1&&me(!1)},[xe]);const $e=()=>{xe<1||oe.onConfirmLeaveEditor(()=>{var st,qe,Se,Re;const tt=ne.rowsData[xe-1].id;(st=ne.headersRef.current)==null||st.selectRowByKeyWithDelay(tt),(Se=(qe=ne.headersRef.current)==null?void 0:qe.updateMarkedIndexOnRowChange)==null||Se.call(qe,tt),(Re=ne.selectRowByKeyWithDelay.current)==null||Re.setIsRowFocus(!0)})},Ie=()=>{_e||oe.onConfirmLeaveEditor(()=>{var st,qe,Se,Re;const tt=ne.rowsData[xe+1].id;(st=ne.headersRef.current)==null||st.selectRowByKeyWithDelay(tt),(Se=(qe=ne.headersRef.current)==null?void 0:qe.updateMarkedIndexOnRowChange)==null||Se.call(qe,tt),(Re=ne.selectRowByKeyWithDelay.current)==null||Re.setIsRowFocus(!0)})};if(K)return null;const Fe=tt=>tt?jsxRuntimeExports.jsx(Ck,{size:"XS"}):jsxRuntimeExports.jsx(Rp,{size:"XS"}),ke=xe<1,je=[{key:"nextRecord",title:J("recordNavigation.nextRecord"),description:J("recordNavigation.moveToTheNext"),prefix:jsxRuntimeExports.jsx(Rp,{}),isDisabled:_e,onClick:Ie},{key:"prevRecord",title:J("recordNavigation.prevRecord"),description:J("recordNavigation.moveToThePrev"),prefix:jsxRuntimeExports.jsx(Ck,{}),isDisabled:ke,onClick:$e},{key:"editRecord",title:J("recordNavigation.editRecord"),description:J("recordNavigation.editRecordDescription"),isDisabled:!((Xe=ne.selectedGridRow)!=null&&Xe.type)||!((Je=ne.selectedGridRow)!=null&&Je.key),prefix:jsxRuntimeExports.jsx(AD,{}),onClick:()=>ye(!0)}],We=()=>{ye(!1),recordEventManager.emit(RecordEvent.UpdateRecord)},ze=()=>jsxRuntimeExports.jsx(EF,{items:je});return jsxRuntimeExports.jsxs("div",{className:"grid-tabs","data-tid":"layout-panel",children:[jsxRuntimeExports.jsx(RecordEditor,{recordType:(nt=ne.selectedGridRow)==null?void 0:nt.type,recordKey:(et=ne.selectedGridRow)==null?void 0:et.key,isOpen:ge,onSave:We,onClose:()=>ye(!1)}),jsxRuntimeExports.jsxs("div",{className:"grid-tabs__prev-next-buttons",children:[jsxRuntimeExports.jsx(Y_,{className:"grid-tabs__prev-next-buttons-dropdown",open:ce,onOpenChange:ue,placement:"bottom",dropdownRender:ze,children:jsxRuntimeExports.jsx(rl,{type:"transparent",variant:"ghost",size:"sm",iconAfter:Fe(ce),onClick:()=>ue(!ce),children:J("recordNavigation.record")})}),jsxRuntimeExports.jsx(mf,{open:ve,title:J("recordNavigation.nextRecord"),onOpenChange:tt=>{_e&&tt||me(tt)},children:jsxRuntimeExports.jsx(rl,{type:"transparent",variant:"ghost",size:"sm",disabled:_e,iconBefore:jsxRuntimeExports.jsx(uT,{}),onClick:Ie,testid:"go-to-next-record-button",className:"grid-tabs__button"})}),jsxRuntimeExports.jsx(mf,{open:Ae&&xe!==0,title:J("recordNavigation.prevRecord"),onOpenChange:tt=>{ke&&tt||pe(tt)},children:jsxRuntimeExports.jsx(rl,{type:"transparent",variant:"ghost",size:"sm",disabled:ke,iconBefore:jsxRuntimeExports.jsx(pT,{}),onClick:$e,testid:"go-to-prev-record-button",className:"grid-tabs__button"})})]})]})},tabs="_tabs_1hy2c_1",tabAction="_tabAction_1hy2c_5",styles$l={tabs,tabAction},GridTabs=({activeTabId:K})=>{const{setActiveTab:J}=useTabParams(),{t:ne}=useTranslation(),oe=useSelector$1(selectActiveDataset$1),ce=useAppDispatch(),{action:ue,state:Ae}=useAppContext(),pe=useSelector$1(selectMetaData),ve=useSelector$1(selectOpenedTabs),{action:me}=useDndContext(),ge=useSelector$1(selectFullScreenMode),[ye,xe]=reactExports.useState(null),_e=ve.map(Xe=>({...Xe,closable:!0})),$e=pe.data.DisplayKind===SchemaDisplayKind.Dashboard,Ie=()=>{Ae.activeEditorTab!==EditorTabsEnum.EDITOR&&ue.setActiveEditorTabAction(EditorTabsEnum.EDITOR)},Fe=Xe=>{ue.onConfirmLeaveEditor(()=>{var Je,nt;if(ue.clearCacheQueryByTypeAction(Xe),ce(closeTab({id:Xe})),externalStorage.removeMainGridScrollPercent(Xe),Xe===K){const et=_e.findIndex(st=>st.id===Xe),tt=((Je=_e[et+1])==null?void 0:Je.id)||((nt=_e[et-1])==null?void 0:nt.id);_e.length>1&&ce(updateActiveTabIndex({id:tt})),J(tt),Ie()}else _e.forEach(({id:et})=>et===K&&ce(updateActiveTabIndex({id:K})));ce(saveAppState(oe)),me.clearHandlerState()})},ke=Xe=>{ue.onConfirmLeaveEditor(()=>{J(Xe),ce(saveAppState(oe)),ce(removeMetaData()),Ie(),me.resetCellHeight(),me.clearHandlerState()})};if(ge)return null;const je=(Xe,Je)=>`tab-${Xe}-dropdown-item-${Je.replace(/\s+/g,"")}`,We=[{key:"1",label:ne("grid.tabs.closeTab"),onClick:()=>ye&&Fe(ye),"data-tid":je(0,ne("grid.tabs.closeTab")),children:null},{key:"2",label:ne("grid.tabs.closeOtherTabs"),onClick:()=>{const Xe=_e.filter(Je=>Je.id===ye);ce(setTabs(Xe)),ye&&(J(ye),ce(updateActiveTabIndex({id:ye})),ce(saveAppState(oe)),Ie())},"data-tid":je(1,ne("grid.tabs.closeOtherTabs")),children:null},{key:"3",label:ne("grid.tabs.closeAllTabs"),onClick:()=>{J(""),ce(setTabs([])),Ie()},"data-tid":je(2,ne("grid.tabs.closeAllTabs")),children:null}],ze=Xe=>{const Je=Xe===ye;return jsxRuntimeExports.jsx("div",{tabIndex:-2,onClick:nt=>nt.stopPropagation(),"aria-hidden":"true",children:jsxRuntimeExports.jsx(Y_,{open:Je,onOpenChange:()=>xe(null),placement:"bottom",menu:{items:We},children:jsxRuntimeExports.jsx("div",{"aria-hidden":"true",className:styles$l.tabAction,"data-tid":`tab-${Xe}-dropdown`,onClick:nt=>{nt.stopPropagation(),xe(Je?null:Xe)},children:Je?jsxRuntimeExports.jsx(Ck,{}):jsxRuntimeExports.jsx(Rp,{})})})})};return jsxRuntimeExports.jsx(wF,{className:styles$l.tabs,variant:"borderless",tabBarExtraContent:jsxRuntimeExports.jsx(GridTabsLayoutController,{isDashboard:$e}),activeKey:K,onChange:ke,items:_e,renderActions:ze,onClose:Fe,renderTabBar:(Xe,Je)=>jsxRuntimeExports.jsx(Je,{...Xe,children:nt=>{var et;return jsxRuntimeExports.jsx(mf,{title:((et=_e.find(tt=>tt.id===nt.key))==null?void 0:et.label)||"",children:nt})}})})},infoMessage="_infoMessage_1oygr_1",infoMessageTitle="_infoMessageTitle_1oygr_12",infoMessageSubtitle="_infoMessageSubtitle_1oygr_19",tabContent="_tabContent_1oygr_26",noTypesSelected="_noTypesSelected_1oygr_34",infoMessageIcon="_infoMessageIcon_1oygr_38",noDataContainer="_noDataContainer_1oygr_44",logsPanel="_logsPanel_1oygr_49",container$9="_container_1oygr_53",content$3="_content_1oygr_61",styles$k={infoMessage,infoMessageTitle,infoMessageSubtitle,tabContent,noTypesSelected,infoMessageIcon,noDataContainer,logsPanel,container:container$9,content:content$3},Main=({gridTabsContainerClassname:K,mainTabContentClassname:J})=>{const{t:ne}=useTranslation(),{activeTab:oe}=useTabParams(),{schemaTypes:ce,status:ue}=useSelector$1(selectSchemaTypes),{isOpen:Ae}=useLogsPanel(),pe=reactExports.useMemo(()=>Object.keys(ce).some(xe=>{const _e=xe;return isArray$7(ce[_e])&&ce[_e].length>0}),[ce]),ve=()=>pe?{type:"noTypesSelected",content:jsxRuntimeExports.jsxs("div",{className:styles$k.infoMessage,children:[jsxRuntimeExports.jsx("div",{className:styles$k.infoMessageIcon,children:jsxRuntimeExports.jsx(gf$1,{size:"Full"})}),jsxRuntimeExports.jsx("span",{className:styles$k.infoMessageTitle,children:ne("grid.useSearch")}),jsxRuntimeExports.jsx("span",{className:styles$k.infoMessageSubtitle,children:ne("grid.pressControlF")})]})}:{type:"Administrator",content:ne("grid.pleaseContantTheAdministrator")},{content:me,type:ge}=ve(),ye=()=>{var xe,_e,$e;return oe!=null&&oe.id?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:K,"data-tid":"main-tabs-container",children:jsxRuntimeExports.jsx(GridTabs,{activeTabId:oe.id})}),jsxRuntimeExports.jsx("div",{"data-tid":`${oe.id}-tab-content`,className:cx(styles$k.tabContent,J),children:jsxRuntimeExports.jsx(TabItemContent,{activeTab:oe,options:{dynamicId:(xe=oe.dynamicType)==null?void 0:xe.id,isDynamicDashboard:((_e=oe.dynamicType)==null?void 0:_e.type)===ViewersMetadataType.DASHBOARD,isDynamicPrimaryDashboard:(($e=oe.dynamicType)==null?void 0:$e.type)===ViewersMetadataType.PRIMARY_DASHBOARD}})})]}):Object.keys(ce).length!==0?jsxRuntimeExports.jsxs(Mj,{direction:"horizontal",className:styles$k.noDataContainer,children:[jsxRuntimeExports.jsx(Lj,{order:1,minSize:30,children:jsxRuntimeExports.jsx(NoGridData,{containerClassname:styles$k[ge],content:me,loading:ue===LoadingStatusesEnum.LOADING})}),Ae&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx($F,{}),jsxRuntimeExports.jsx(Lj,{id:"logs-panel",order:2,defaultSize:20,minSize:20,className:styles$k.logsPanel,children:jsxRuntimeExports.jsx(Logs,{})})]})]}):null};return jsxRuntimeExports.jsx("div",{className:styles$k.container,children:jsxRuntimeExports.jsx("div",{className:styles$k.content,children:ye()})})},select$2="_select_1ditm_1",styles$j={select:select$2},DatasetButton=()=>{const K=useAppDispatch(),J=useSelector$1(selectOpenedTabs),{rowsData:ne,activeDatasetName:oe}=useSelector$1(selectDatasetData),[ce,ue]=reactExports.useState([]),Ae=()=>{if(ce.length)return oe||ce[0].Name};reactExports.useEffect(()=>{J.length===0?ue([]):ne.length!==0&&ue(ne)},[J,ne,oe]);const pe=()=>ce.map(({Name:me})=>({label:me,value:me})),ve=me=>{me!==oe&&K(selectDataset$1(!oe||oe==="Root"?"":oe))};return jsxRuntimeExports.jsx(xF,{className:styles$j.select,testid:"dataset-button",variant:"outlined",status:"transparent",disabled:ce.length===0,value:Ae(),prefix:jsxRuntimeExports.jsx(lk,{}),options:pe(),onChange:ve})},select$1="_select_1ditm_1",styles$i={select:select$1},EnvironmentButton=()=>{const K=useSelector$1(selectActiveEnvironment),J=useSelector$1(selectEnvironmentList),ne=reactExports.useMemo(()=>J==null?void 0:J.map(({Name:ce})=>({label:ce,value:ce})),[J]),oe=ce=>{ce!==K&&dispatch$1(setActiveEnvironment(ce))};return K&&jsxRuntimeExports.jsx(xF,{className:styles$i.select,variant:"outlined",status:"transparent",value:K,prefix:jsxRuntimeExports.jsx(WT,{}),options:ne,onChange:oe,testid:"environment-button"})},FullScreenLayoutSettingsButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),ne=useSelector$1(selectMetaData),{state:oe}=useAppContext(),{state:ce,action:ue}=useDndContext(),[Ae,pe]=reactExports.useState(!1),ve=()=>{var $e,Ie;const ye=ue.getEditorTabs(oe.activeEditorTab,ne.data.Name),xe=returnDefaultConfig(ye),_e=findParent(xe,[EditorTabsEnum.EDITOR]);if(_e&&_e.content.forEach((Fe,ke,je)=>{ce.hideEditor?ce.hideEditor&&je.length>1&&ke===1&&(Fe.isActive=!0):Fe.isActive=Fe.id===EditorTabsEnum.EDITOR}),!(oe.activeEditorTab===EditorTabsEnum.NEW_ENTITY||oe.activeEditorTab===EditorTabsEnum.COPY_ENTITY||oe.activeEditorTab===EditorTabsEnum.SELECT_TYPE)){const Fe=getParsedConfig(xe,!0);ue.resetMaximizedStates(),ue.saveUiTypeData({simplifiedConfig:Fe,handlers:ce.pinnedHandlers,MaximizedTabId:"",isLayoutRestored:!0})}correctConfigDirection(xe,oe.defaultLayoutDirection),ue.updateConfig(xe),ue.setIsLayoutRestored(!0),(Ie=($e=ce.restoreLayoutRef.current)==null?void 0:$e.restoreLayoutRef)==null||Ie.call($e)},me=[{key:"1",title:J("confirmationModal.restoreLayout.title"),description:J("confirmationModal.restoreLayout.description"),prefix:jsxRuntimeExports.jsx(Nk,{}),onClick:()=>{pe(!1),Ho.info({title:J("confirmationModal.restoreLayout.title"),content:J("confirmationModal.restoreLayout.confirmationText"),onOk:ye=>{ue.updateLayoutDirection(LayoutDirection.HORIZONTAL),ve(),ye()},testId:"restore-layout"})}}],ge=()=>jsxRuntimeExports.jsx(EF,{items:me});return jsxRuntimeExports.jsx(mf,{title:J("gridToolbar.settings"),children:jsxRuntimeExports.jsx("div",{className:"full-screen-layout-settings-button",children:jsxRuntimeExports.jsx(Y_,{className:"grid-tabs__prev-next-buttons-dropdown",open:Ae,onOpenChange:pe,placement:"bottom",dropdownRender:ge,children:jsxRuntimeExports.jsx(rl,{testid:"full-screen-layout-settings-button",size:"sm",type:"transparent",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(VD,{}),disabled:ce.isLayoutBtnsDisabled||K})})})})},RecordNavigationSelect=()=>{const{t:K}=useTranslation(),J=reactExports.useRef(null),{state:ne}=useDndContext(),[oe,ce]=reactExports.useState(!1),[ue,Ae]=reactExports.useState(""),[pe,ve]=reactExports.useState([]),{rowsData:me,selectedGridRowKey:ge,headersRef:ye}=ne,xe=Fe=>(Fe==null?void 0:Fe.map(({id:ke})=>({value:ke,label:ke})))||[];reactExports.useEffect(()=>{ve(xe(me))},[me]),reactExports.useEffect(()=>{oe?setTimeout(()=>{var Fe;(Fe=J.current)==null||Fe.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})},0):(ve(xe(me)),Ae(""))},[oe]);const _e=Fe=>{var ke,je,We;(ke=ye.current)==null||ke.selectRowByKeyWithDelay(Fe),(We=(je=ye.current)==null?void 0:je.updateMarkedIndexOnRowChange)==null||We.call(je,Fe),ve(xe(me))},$e=Fe=>{Ae(Fe);const ke=xe(me).filter(je=>je.label.toLowerCase().includes(Fe.toLowerCase()));ve(ke)},Ie=()=>jsxRuntimeExports.jsxs("div",{className:"record-navigation-dropdown__menu",children:[jsxRuntimeExports.jsx(Ml,{className:"record-navigation-dropdown__input",variant:"outlined",placeholder:K("shared.filterInputPlaceholder")||"",prefix:jsxRuntimeExports.jsx(gf$1,{}),value:ue,onChange:$e}),jsxRuntimeExports.jsx("div",{className:"record-navigation-dropdown__menu-list",children:pe.length!==0?pe.map(({value:Fe,label:ke})=>jsxRuntimeExports.jsx("div",{"aria-hidden":"true",ref:ge===Fe?J:null,className:cx("record-navigation-dropdown__menu-item",{"record-navigation-dropdown__menu-item--active":Fe===ge||ke===ge}),onClick:()=>{_e(Fe),ce(!1)},children:ke},Fe)):jsxRuntimeExports.jsx("div",{className:"record-navigation-dropdown__menu-item-no-data",children:K("noData.noData")})})]});return jsxRuntimeExports.jsx(Y_,{className:"record-navigation-dropdown",placement:"bottom",open:oe,onOpenChange:ce,dropdownRender:Ie,children:jsxRuntimeExports.jsxs("div",{className:"record-navigation-dropdown__record",children:[K("header.record"),oe?jsxRuntimeExports.jsx(Ck,{}):jsxRuntimeExports.jsx(Rp,{})]})})},FullScreenModeButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),ne=useSelector$1(selectUser),oe=useSelector$1(selectApplicationTheme),ce=useSelector$1(selectOpenedTabs),ue=useSelector$1(selectActiveTabIndex),Ae=useSelector$1(selectIsReadonly),pe=useSelector$1(selectActiveDataset$1),ve=useSelector$1(selectFullScreenMode),me=()=>{storageApi.saveEntity({dataset:pe||"",data:[{ApplicationTheme:oe,OpenedTabs:generateTabsParams(ce),ActiveTabIndex:ue,User:(ne==null?void 0:ne.username)||null,ReadOnly:Ae??!1,FullScreenMode:!ve,_t:"UiAppState"}]}).then(()=>{dispatch$1(setFullScreenMode(!ve))}).catch(toast.error)};return jsxRuntimeExports.jsx(mf,{title:J("header.userInfo.fullScreenMode"),children:jsxRuntimeExports.jsx(rl,{testid:`full-screen-mode${ve?"-active":""}`,size:"sm",type:"transparent",variant:"ghost",disabled:K,onClick:me,iconBefore:ve?jsxRuntimeExports.jsx(Lk,{}):jsxRuntimeExports.jsx(Ik,{})})})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(K,J){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,oe){ne.__proto__=oe}||function(ne,oe){for(var ce in oe)Object.prototype.hasOwnProperty.call(oe,ce)&&(ne[ce]=oe[ce])},extendStatics(K,J)};function __extends$1(K,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");extendStatics(K,J);function ne(){this.constructor=K}K.prototype=J===null?Object.create(J):(ne.prototype=J.prototype,new ne)}var __assign$1=function(){return __assign$1=Object.assign||function(J){for(var ne,oe=1,ce=arguments.length;oe<ce;oe++){ne=arguments[oe];for(var ue in ne)Object.prototype.hasOwnProperty.call(ne,ue)&&(J[ue]=ne[ue])}return J},__assign$1.apply(this,arguments)};function __awaiter$1(K,J,ne,oe){function ce(ue){return ue instanceof ne?ue:new ne(function(Ae){Ae(ue)})}return new(ne||(ne=Promise))(function(ue,Ae){function pe(ge){try{me(oe.next(ge))}catch(ye){Ae(ye)}}function ve(ge){try{me(oe.throw(ge))}catch(ye){Ae(ye)}}function me(ge){ge.done?ue(ge.value):ce(ge.value).then(pe,ve)}me((oe=oe.apply(K,[])).next())})}function __generator$1(K,J){var ne={label:0,sent:function(){if(ue[0]&1)throw ue[1];return ue[1]},trys:[],ops:[]},oe,ce,ue,Ae;return Ae={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function pe(me){return function(ge){return ve([me,ge])}}function ve(me){if(oe)throw new TypeError("Generator is already executing.");for(;ne;)try{if(oe=1,ce&&(ue=me[0]&2?ce.return:me[0]?ce.throw||((ue=ce.return)&&ue.call(ce),0):ce.next)&&!(ue=ue.call(ce,me[1])).done)return ue;switch(ce=0,ue&&(me=[me[0]&2,ue.value]),me[0]){case 0:case 1:ue=me;break;case 4:return ne.label++,{value:me[1],done:!1};case 5:ne.label++,ce=me[1],me=[0];continue;case 7:me=ne.ops.pop(),ne.trys.pop();continue;default:if(ue=ne.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(me[0]===6||me[0]===2)){ne=0;continue}if(me[0]===3&&(!ue||me[1]>ue[0]&&me[1]<ue[3])){ne.label=me[1];break}if(me[0]===6&&ne.label<ue[1]){ne.label=ue[1],ue=me;break}if(ue&&ne.label<ue[2]){ne.label=ue[2],ne.ops.push(me);break}ue[2]&&ne.ops.pop(),ne.trys.pop();continue}me=J.call(K,ne)}catch(ge){me=[6,ge],ce=0}finally{oe=ue=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}}function __spreadArray$1(K,J,ne){if(arguments.length===2)for(var oe=0,ce=J.length,ue;oe<ce;oe++)(ue||!(oe in J))&&(ue||(ue=Array.prototype.slice.call(J,0,oe)),ue[oe]=J[oe]);return K.concat(ue||J)}var Bounds=function(){function K(J,ne,oe,ce){this.left=J,this.top=ne,this.width=oe,this.height=ce}return K.prototype.add=function(J,ne,oe,ce){return new K(this.left+J,this.top+ne,this.width+oe,this.height+ce)},K.fromClientRect=function(J,ne){return new K(ne.left+J.windowBounds.left,ne.top+J.windowBounds.top,ne.width,ne.height)},K.fromDOMRectList=function(J,ne){var oe=Array.from(ne).find(function(ce){return ce.width!==0});return oe?new K(oe.left+J.windowBounds.left,oe.top+J.windowBounds.top,oe.width,oe.height):K.EMPTY},K.EMPTY=new K(0,0,0,0),K}(),parseBounds=function(K,J){return Bounds.fromClientRect(K,J.getBoundingClientRect())},parseDocumentSize=function(K){var J=K.body,ne=K.documentElement;if(!J||!ne)throw new Error("Unable to get document size");var oe=Math.max(Math.max(J.scrollWidth,ne.scrollWidth),Math.max(J.offsetWidth,ne.offsetWidth),Math.max(J.clientWidth,ne.clientWidth)),ce=Math.max(Math.max(J.scrollHeight,ne.scrollHeight),Math.max(J.offsetHeight,ne.offsetHeight),Math.max(J.clientHeight,ne.clientHeight));return new Bounds(0,0,oe,ce)},toCodePoints$1=function(K){for(var J=[],ne=0,oe=K.length;ne<oe;){var ce=K.charCodeAt(ne++);if(ce>=55296&&ce<=56319&&ne<oe){var ue=K.charCodeAt(ne++);(ue&64512)===56320?J.push(((ce&1023)<<10)+(ue&1023)+65536):(J.push(ce),ne--)}else J.push(ce)}return J},fromCodePoint$1=function(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];if(String.fromCodePoint)return String.fromCodePoint.apply(String,K);var ne=K.length;if(!ne)return"";for(var oe=[],ce=-1,ue="";++ce<ne;){var Ae=K[ce];Ae<=65535?oe.push(Ae):(Ae-=65536,oe.push((Ae>>10)+55296,Ae%1024+56320)),(ce+1===ne||oe.length>16384)&&(ue+=String.fromCharCode.apply(String,oe),oe.length=0)}return ue},chars$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++)lookup$2[chars$2.charCodeAt(i$2)]=i$2;var chars$1$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++)lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;var decode$1=function(K){var J=K.length*.75,ne=K.length,oe,ce=0,ue,Ae,pe,ve;K[K.length-1]==="="&&(J--,K[K.length-2]==="="&&J--);var me=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(J):new Array(J),ge=Array.isArray(me)?me:new Uint8Array(me);for(oe=0;oe<ne;oe+=4)ue=lookup$1$1[K.charCodeAt(oe)],Ae=lookup$1$1[K.charCodeAt(oe+1)],pe=lookup$1$1[K.charCodeAt(oe+2)],ve=lookup$1$1[K.charCodeAt(oe+3)],ge[ce++]=ue<<2|Ae>>4,ge[ce++]=(Ae&15)<<4|pe>>2,ge[ce++]=(pe&3)<<6|ve&63;return me},polyUint16Array$1=function(K){for(var J=K.length,ne=[],oe=0;oe<J;oe+=2)ne.push(K[oe+1]<<8|K[oe]);return ne},polyUint32Array$1=function(K){for(var J=K.length,ne=[],oe=0;oe<J;oe+=4)ne.push(K[oe+3]<<24|K[oe+2]<<16|K[oe+1]<<8|K[oe]);return ne},UTRIE2_SHIFT_2$1=5,UTRIE2_SHIFT_1$1=11,UTRIE2_INDEX_SHIFT$1=2,UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1,UTRIE2_LSCP_INDEX_2_OFFSET$1=65536>>UTRIE2_SHIFT_2$1,UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1,UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1,UTRIE2_LSCP_INDEX_2_LENGTH$1=1024>>UTRIE2_SHIFT_2$1,UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=32,UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=65536>>UTRIE2_SHIFT_1$1,UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1,UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1,slice16$1=function(K,J,ne){return K.slice?K.slice(J,ne):new Uint16Array(Array.prototype.slice.call(K,J,ne))},slice32$1=function(K,J,ne){return K.slice?K.slice(J,ne):new Uint32Array(Array.prototype.slice.call(K,J,ne))},createTrieFromBase64$1=function(K,J){var ne=decode$1(K),oe=Array.isArray(ne)?polyUint32Array$1(ne):new Uint32Array(ne),ce=Array.isArray(ne)?polyUint16Array$1(ne):new Uint16Array(ne),ue=24,Ae=slice16$1(ce,ue/2,oe[4]/2),pe=oe[5]===2?slice16$1(ce,(ue+oe[4])/2):slice32$1(oe,Math.ceil((ue+oe[4])/4));return new Trie$1(oe[0],oe[1],oe[2],oe[3],Ae,pe)},Trie$1=function(){function K(J,ne,oe,ce,ue,Ae){this.initialValue=J,this.errorValue=ne,this.highStart=oe,this.highValueIndex=ce,this.index=ue,this.data=Ae}return K.prototype.get=function(J){var ne;if(J>=0){if(J<55296||J>56319&&J<=65535)return ne=this.index[J>>UTRIE2_SHIFT_2$1],ne=(ne<<UTRIE2_INDEX_SHIFT$1)+(J&UTRIE2_DATA_MASK$1),this.data[ne];if(J<=65535)return ne=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(J-55296>>UTRIE2_SHIFT_2$1)],ne=(ne<<UTRIE2_INDEX_SHIFT$1)+(J&UTRIE2_DATA_MASK$1),this.data[ne];if(J<this.highStart)return ne=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(J>>UTRIE2_SHIFT_1$1),ne=this.index[ne],ne+=J>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1,ne=this.index[ne],ne=(ne<<UTRIE2_INDEX_SHIFT$1)+(J&UTRIE2_DATA_MASK$1),this.data[ne];if(J<=1114111)return this.data[this.highValueIndex]}return this.errorValue},K}(),chars$3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$3=0;i$3<chars$3.length;i$3++)lookup$3[chars$3.charCodeAt(i$3)]=i$3;var base64$1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LETTER_NUMBER_MODIFIER=50,BK=1,CR$1=2,LF$1=3,CM=4,NL=5,WJ=7,ZW=8,GL=9,SP=10,ZWJ$1=11,B2=12,BA=13,BB=14,HY=15,CB=16,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,QU=23,IS=24,NU=25,PO=26,PR=27,SY=28,AI=29,AL=30,CJ=31,EB=32,EM=33,H2$1=34,H3$1=35,HL=36,ID=37,JL=38,JV=39,JT=40,RI$1=41,SA=42,XX=43,ea_OP=[9001,65288],BREAK_MANDATORY="!",BREAK_NOT_ALLOWED$1="",BREAK_ALLOWED$1="",UnicodeTrie$1=createTrieFromBase64$1(base64$1),ALPHABETICS=[AL,HL],HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL],SPACE$1=[SP,ZW],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2$1,H3$1],HYPHEN=[HY,BA],codePointsToCharacterClasses=function(K,J){J===void 0&&(J="strict");var ne=[],oe=[],ce=[];return K.forEach(function(ue,Ae){var pe=UnicodeTrie$1.get(ue);if(pe>LETTER_NUMBER_MODIFIER?(ce.push(!0),pe-=LETTER_NUMBER_MODIFIER):ce.push(!1),["normal","auto","loose"].indexOf(J)!==-1&&[8208,8211,12316,12448].indexOf(ue)!==-1)return oe.push(Ae),ne.push(CB);if(pe===CM||pe===ZWJ$1){if(Ae===0)return oe.push(Ae),ne.push(AL);var ve=ne[Ae-1];return LINE_BREAKS.indexOf(ve)===-1?(oe.push(oe[Ae-1]),ne.push(ve)):(oe.push(Ae),ne.push(AL))}if(oe.push(Ae),pe===CJ)return ne.push(J==="strict"?NS:ID);if(pe===SA||pe===AI)return ne.push(AL);if(pe===XX)return ue>=131072&&ue<=196605||ue>=196608&&ue<=262141?ne.push(ID):ne.push(AL);ne.push(pe)}),[oe,ne,ce]},isAdjacentWithSpaceIgnored=function(K,J,ne,oe){var ce=oe[ne];if(Array.isArray(K)?K.indexOf(ce)!==-1:K===ce)for(var ue=ne;ue<=oe.length;){ue++;var Ae=oe[ue];if(Ae===J)return!0;if(Ae!==SP)break}if(ce===SP)for(var ue=ne;ue>0;){ue--;var pe=oe[ue];if(Array.isArray(K)?K.indexOf(pe)!==-1:K===pe)for(var ve=ne;ve<=oe.length;){ve++;var Ae=oe[ve];if(Ae===J)return!0;if(Ae!==SP)break}if(pe!==SP)break}return!1},previousNonSpaceClassType=function(K,J){for(var ne=K;ne>=0;){var oe=J[ne];if(oe===SP)ne--;else return oe}return 0},_lineBreakAtIndex=function(K,J,ne,oe,ce){if(ne[oe]===0)return BREAK_NOT_ALLOWED$1;var ue=oe-1;if(Array.isArray(ce)&&ce[ue]===!0)return BREAK_NOT_ALLOWED$1;var Ae=ue-1,pe=ue+1,ve=J[ue],me=Ae>=0?J[Ae]:0,ge=J[pe];if(ve===CR$1&&ge===LF$1)return BREAK_NOT_ALLOWED$1;if(HARD_LINE_BREAKS.indexOf(ve)!==-1)return BREAK_MANDATORY;if(HARD_LINE_BREAKS.indexOf(ge)!==-1||SPACE$1.indexOf(ge)!==-1)return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(ue,J)===ZW)return BREAK_ALLOWED$1;if(UnicodeTrie$1.get(K[ue])===ZWJ$1||(ve===EB||ve===EM)&&UnicodeTrie$1.get(K[pe])===ZWJ$1||ve===WJ||ge===WJ||ve===GL||[SP,BA,HY].indexOf(ve)===-1&&ge===GL||[CL,CP,EX,IS,SY].indexOf(ge)!==-1||previousNonSpaceClassType(ue,J)===OP||isAdjacentWithSpaceIgnored(QU,OP,ue,J)||isAdjacentWithSpaceIgnored([CL,CP],NS,ue,J)||isAdjacentWithSpaceIgnored(B2,B2,ue,J))return BREAK_NOT_ALLOWED$1;if(ve===SP)return BREAK_ALLOWED$1;if(ve===QU||ge===QU)return BREAK_NOT_ALLOWED$1;if(ge===CB||ve===CB)return BREAK_ALLOWED$1;if([BA,HY,NS].indexOf(ge)!==-1||ve===BB||me===HL&&HYPHEN.indexOf(ve)!==-1||ve===SY&&ge===HL||ge===IN||ALPHABETICS.indexOf(ge)!==-1&&ve===NU||ALPHABETICS.indexOf(ve)!==-1&&ge===NU||ve===PR&&[ID,EB,EM].indexOf(ge)!==-1||[ID,EB,EM].indexOf(ve)!==-1&&ge===PO||ALPHABETICS.indexOf(ve)!==-1&&PREFIX_POSTFIX.indexOf(ge)!==-1||PREFIX_POSTFIX.indexOf(ve)!==-1&&ALPHABETICS.indexOf(ge)!==-1||[PR,PO].indexOf(ve)!==-1&&(ge===NU||[OP,HY].indexOf(ge)!==-1&&J[pe+1]===NU)||[OP,HY].indexOf(ve)!==-1&&ge===NU||ve===NU&&[NU,SY,IS].indexOf(ge)!==-1)return BREAK_NOT_ALLOWED$1;if([NU,SY,IS,CL,CP].indexOf(ge)!==-1)for(var ye=ue;ye>=0;){var xe=J[ye];if(xe===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(xe)!==-1)ye--;else break}if([PR,PO].indexOf(ge)!==-1)for(var ye=[CL,CP].indexOf(ve)!==-1?Ae:ue;ye>=0;){var xe=J[ye];if(xe===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(xe)!==-1)ye--;else break}if(JL===ve&&[JL,JV,H2$1,H3$1].indexOf(ge)!==-1||[JV,H2$1].indexOf(ve)!==-1&&[JV,JT].indexOf(ge)!==-1||[JT,H3$1].indexOf(ve)!==-1&&ge===JT||KOREAN_SYLLABLE_BLOCK.indexOf(ve)!==-1&&[IN,PO].indexOf(ge)!==-1||KOREAN_SYLLABLE_BLOCK.indexOf(ge)!==-1&&ve===PR||ALPHABETICS.indexOf(ve)!==-1&&ALPHABETICS.indexOf(ge)!==-1||ve===IS&&ALPHABETICS.indexOf(ge)!==-1||ALPHABETICS.concat(NU).indexOf(ve)!==-1&&ge===OP&&ea_OP.indexOf(K[pe])===-1||ALPHABETICS.concat(NU).indexOf(ge)!==-1&&ve===CP)return BREAK_NOT_ALLOWED$1;if(ve===RI$1&&ge===RI$1){for(var _e=ne[ue],$e=1;_e>0&&(_e--,J[_e]===RI$1);)$e++;if($e%2!==0)return BREAK_NOT_ALLOWED$1}return ve===EB&&ge===EM?BREAK_NOT_ALLOWED$1:BREAK_ALLOWED$1},cssFormattedClasses=function(K,J){J||(J={lineBreak:"normal",wordBreak:"normal"});var ne=codePointsToCharacterClasses(K,J.lineBreak),oe=ne[0],ce=ne[1],ue=ne[2];(J.wordBreak==="break-all"||J.wordBreak==="break-word")&&(ce=ce.map(function(pe){return[NU,AL,SA].indexOf(pe)!==-1?ID:pe}));var Ae=J.wordBreak==="keep-all"?ue.map(function(pe,ve){return pe&&K[ve]>=19968&&K[ve]<=40959}):void 0;return[oe,ce,Ae]},Break=function(){function K(J,ne,oe,ce){this.codePoints=J,this.required=ne===BREAK_MANDATORY,this.start=oe,this.end=ce}return K.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end))},K}(),LineBreaker=function(K,J){var ne=toCodePoints$1(K),oe=cssFormattedClasses(ne,J),ce=oe[0],ue=oe[1],Ae=oe[2],pe=ne.length,ve=0,me=0;return{next:function(){if(me>=pe)return{done:!0,value:null};for(var ge=BREAK_NOT_ALLOWED$1;me<pe&&(ge=_lineBreakAtIndex(ne,ue,ce,++me,Ae))===BREAK_NOT_ALLOWED$1;);if(ge!==BREAK_NOT_ALLOWED$1||me===pe){var ye=new Break(ne,ge,ve,me);return ve=me,{value:ye,done:!1}}return{done:!0,value:null}}}},FLAG_UNRESTRICTED=1,FLAG_ID=2,FLAG_INTEGER=4,FLAG_NUMBER=8,LINE_FEED=10,SOLIDUS=47,REVERSE_SOLIDUS=92,CHARACTER_TABULATION=9,SPACE=32,QUOTATION_MARK=34,EQUALS_SIGN=61,NUMBER_SIGN=35,DOLLAR_SIGN=36,PERCENTAGE_SIGN=37,APOSTROPHE=39,LEFT_PARENTHESIS=40,RIGHT_PARENTHESIS=41,LOW_LINE=95,HYPHEN_MINUS=45,EXCLAMATION_MARK=33,LESS_THAN_SIGN=60,GREATER_THAN_SIGN=62,COMMERCIAL_AT=64,LEFT_SQUARE_BRACKET=91,RIGHT_SQUARE_BRACKET=93,CIRCUMFLEX_ACCENT=61,LEFT_CURLY_BRACKET=123,QUESTION_MARK=63,RIGHT_CURLY_BRACKET=125,VERTICAL_LINE=124,TILDE=126,CONTROL=128,REPLACEMENT_CHARACTER=65533,ASTERISK=42,PLUS_SIGN=43,COMMA=44,COLON=58,SEMICOLON=59,FULL_STOP=46,NULL=0,BACKSPACE=8,LINE_TABULATION=11,SHIFT_OUT=14,INFORMATION_SEPARATOR_ONE=31,DELETE=127,EOF=-1,ZERO=48,a=97,e=101,f$1=102,u=117,z=122,A$1=65,E=69,F=70,U=85,Z$1=90,isDigit=function(K){return K>=ZERO&&K<=57},isSurrogateCodePoint=function(K){return K>=55296&&K<=57343},isHex=function(K){return isDigit(K)||K>=A$1&&K<=F||K>=a&&K<=f$1},isLowerCaseLetter=function(K){return K>=a&&K<=z},isUpperCaseLetter=function(K){return K>=A$1&&K<=Z$1},isLetter=function(K){return isLowerCaseLetter(K)||isUpperCaseLetter(K)},isNonASCIICodePoint=function(K){return K>=CONTROL},isWhiteSpace=function(K){return K===LINE_FEED||K===CHARACTER_TABULATION||K===SPACE},isNameStartCodePoint=function(K){return isLetter(K)||isNonASCIICodePoint(K)||K===LOW_LINE},isNameCodePoint=function(K){return isNameStartCodePoint(K)||isDigit(K)||K===HYPHEN_MINUS},isNonPrintableCodePoint=function(K){return K>=NULL&&K<=BACKSPACE||K===LINE_TABULATION||K>=SHIFT_OUT&&K<=INFORMATION_SEPARATOR_ONE||K===DELETE},isValidEscape=function(K,J){return K!==REVERSE_SOLIDUS?!1:J!==LINE_FEED},isIdentifierStart=function(K,J,ne){return K===HYPHEN_MINUS?isNameStartCodePoint(J)||isValidEscape(J,ne):isNameStartCodePoint(K)?!0:!!(K===REVERSE_SOLIDUS&&isValidEscape(K,J))},isNumberStart=function(K,J,ne){return K===PLUS_SIGN||K===HYPHEN_MINUS?isDigit(J)?!0:J===FULL_STOP&&isDigit(ne):isDigit(K===FULL_STOP?J:K)},stringToNumber=function(K){var J=0,ne=1;(K[J]===PLUS_SIGN||K[J]===HYPHEN_MINUS)&&(K[J]===HYPHEN_MINUS&&(ne=-1),J++);for(var oe=[];isDigit(K[J]);)oe.push(K[J++]);var ce=oe.length?parseInt(fromCodePoint$1.apply(void 0,oe),10):0;K[J]===FULL_STOP&&J++;for(var ue=[];isDigit(K[J]);)ue.push(K[J++]);var Ae=ue.length,pe=Ae?parseInt(fromCodePoint$1.apply(void 0,ue),10):0;(K[J]===E||K[J]===e)&&J++;var ve=1;(K[J]===PLUS_SIGN||K[J]===HYPHEN_MINUS)&&(K[J]===HYPHEN_MINUS&&(ve=-1),J++);for(var me=[];isDigit(K[J]);)me.push(K[J++]);var ge=me.length?parseInt(fromCodePoint$1.apply(void 0,me),10):0;return ne*(ce+pe*Math.pow(10,-Ae))*Math.pow(10,ve*ge)},LEFT_PARENTHESIS_TOKEN={type:2},RIGHT_PARENTHESIS_TOKEN={type:3},COMMA_TOKEN={type:4},SUFFIX_MATCH_TOKEN={type:13},PREFIX_MATCH_TOKEN={type:8},COLUMN_TOKEN={type:21},DASH_MATCH_TOKEN={type:9},INCLUDE_MATCH_TOKEN={type:10},LEFT_CURLY_BRACKET_TOKEN={type:11},RIGHT_CURLY_BRACKET_TOKEN={type:12},SUBSTRING_MATCH_TOKEN={type:14},BAD_URL_TOKEN={type:23},BAD_STRING_TOKEN={type:1},CDO_TOKEN={type:25},CDC_TOKEN={type:24},COLON_TOKEN={type:26},SEMICOLON_TOKEN={type:27},LEFT_SQUARE_BRACKET_TOKEN={type:28},RIGHT_SQUARE_BRACKET_TOKEN={type:29},WHITESPACE_TOKEN={type:31},EOF_TOKEN={type:32},Tokenizer=function(){function K(){this._value=[]}return K.prototype.write=function(J){this._value=this._value.concat(toCodePoints$1(J))},K.prototype.read=function(){for(var J=[],ne=this.consumeToken();ne!==EOF_TOKEN;)J.push(ne),ne=this.consumeToken();return J},K.prototype.consumeToken=function(){var J=this.consumeCodePoint();switch(J){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var ne=this.peekCodePoint(0),oe=this.peekCodePoint(1),ce=this.peekCodePoint(2);if(isNameCodePoint(ne)||isValidEscape(oe,ce)){var ue=isIdentifierStart(ne,oe,ce)?FLAG_ID:FLAG_UNRESTRICTED,Ae=this.consumeName();return{type:5,value:Ae,flags:ue}}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case PLUS_SIGN:if(isNumberStart(J,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(J),this.consumeNumericToken();break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var pe=J,ve=this.peekCodePoint(0),me=this.peekCodePoint(1);if(isNumberStart(pe,ve,me))return this.reconsumeCodePoint(J),this.consumeNumericToken();if(isIdentifierStart(pe,ve,me))return this.reconsumeCodePoint(J),this.consumeIdentLikeToken();if(ve===HYPHEN_MINUS&&me===GREATER_THAN_SIGN)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case FULL_STOP:if(isNumberStart(J,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(J),this.consumeNumericToken();break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK)for(this.consumeCodePoint();;){var ge=this.consumeCodePoint();if(ge===ASTERISK&&(ge=this.consumeCodePoint(),ge===SOLIDUS))return this.consumeToken();if(ge===EOF)return this.consumeToken()}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS)return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case COMMERCIAL_AT:var ye=this.peekCodePoint(0),xe=this.peekCodePoint(1),_e=this.peekCodePoint(2);if(isIdentifierStart(ye,xe,_e)){var Ae=this.consumeName();return{type:7,value:Ae}}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(J,this.peekCodePoint(0)))return this.reconsumeCodePoint(J),this.consumeIdentLikeToken();break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u:case U:var $e=this.peekCodePoint(0),Ie=this.peekCodePoint(1);return $e===PLUS_SIGN&&(isHex(Ie)||Ie===QUESTION_MARK)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(J),this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(this.peekCodePoint(0)===VERTICAL_LINE)return this.consumeCodePoint(),COLUMN_TOKEN;break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case EOF:return EOF_TOKEN}return isWhiteSpace(J)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(J)?(this.reconsumeCodePoint(J),this.consumeNumericToken()):isNameStartCodePoint(J)?(this.reconsumeCodePoint(J),this.consumeIdentLikeToken()):{type:6,value:fromCodePoint$1(J)}},K.prototype.consumeCodePoint=function(){var J=this._value.shift();return typeof J>"u"?-1:J},K.prototype.reconsumeCodePoint=function(J){this._value.unshift(J)},K.prototype.peekCodePoint=function(J){return J>=this._value.length?-1:this._value[J]},K.prototype.consumeUnicodeRangeToken=function(){for(var J=[],ne=this.consumeCodePoint();isHex(ne)&&J.length<6;)J.push(ne),ne=this.consumeCodePoint();for(var oe=!1;ne===QUESTION_MARK&&J.length<6;)J.push(ne),ne=this.consumeCodePoint(),oe=!0;if(oe){var ce=parseInt(fromCodePoint$1.apply(void 0,J.map(function(ve){return ve===QUESTION_MARK?ZERO:ve})),16),ue=parseInt(fromCodePoint$1.apply(void 0,J.map(function(ve){return ve===QUESTION_MARK?F:ve})),16);return{type:30,start:ce,end:ue}}var Ae=parseInt(fromCodePoint$1.apply(void 0,J),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),ne=this.consumeCodePoint();for(var pe=[];isHex(ne)&&pe.length<6;)pe.push(ne),ne=this.consumeCodePoint();var ue=parseInt(fromCodePoint$1.apply(void 0,pe),16);return{type:30,start:Ae,end:ue}}else return{type:30,start:Ae,end:Ae}},K.prototype.consumeIdentLikeToken=function(){var J=this.consumeName();return J.toLowerCase()==="url"&&this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),{type:19,value:J}):{type:20,value:J}},K.prototype.consumeUrlToken=function(){var J=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF)return{type:22,value:""};var ne=this.peekCodePoint(0);if(ne===APOSTROPHE||ne===QUOTATION_MARK){var oe=this.consumeStringToken(this.consumeCodePoint());return oe.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS)?(this.consumeCodePoint(),{type:22,value:oe.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var ce=this.consumeCodePoint();if(ce===EOF||ce===RIGHT_PARENTHESIS)return{type:22,value:fromCodePoint$1.apply(void 0,J)};if(isWhiteSpace(ce))return this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS?(this.consumeCodePoint(),{type:22,value:fromCodePoint$1.apply(void 0,J)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(ce===QUOTATION_MARK||ce===APOSTROPHE||ce===LEFT_PARENTHESIS||isNonPrintableCodePoint(ce))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(ce===REVERSE_SOLIDUS)if(isValidEscape(ce,this.peekCodePoint(0)))J.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;else J.push(ce)}},K.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},K.prototype.consumeBadUrlRemnants=function(){for(;;){var J=this.consumeCodePoint();if(J===RIGHT_PARENTHESIS||J===EOF)return;isValidEscape(J,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},K.prototype.consumeStringSlice=function(J){for(var ne=5e4,oe="";J>0;){var ce=Math.min(ne,J);oe+=fromCodePoint$1.apply(void 0,this._value.splice(0,ce)),J-=ce}return this._value.shift(),oe},K.prototype.consumeStringToken=function(J){var ne="",oe=0;do{var ce=this._value[oe];if(ce===EOF||ce===void 0||ce===J)return ne+=this.consumeStringSlice(oe),{type:0,value:ne};if(ce===LINE_FEED)return this._value.splice(0,oe),BAD_STRING_TOKEN;if(ce===REVERSE_SOLIDUS){var ue=this._value[oe+1];ue!==EOF&&ue!==void 0&&(ue===LINE_FEED?(ne+=this.consumeStringSlice(oe),oe=-1,this._value.shift()):isValidEscape(ce,ue)&&(ne+=this.consumeStringSlice(oe),ne+=fromCodePoint$1(this.consumeEscapedCodePoint()),oe=-1))}oe++}while(!0)},K.prototype.consumeNumber=function(){var J=[],ne=FLAG_INTEGER,oe=this.peekCodePoint(0);for((oe===PLUS_SIGN||oe===HYPHEN_MINUS)&&J.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)J.push(this.consumeCodePoint());oe=this.peekCodePoint(0);var ce=this.peekCodePoint(1);if(oe===FULL_STOP&&isDigit(ce))for(J.push(this.consumeCodePoint(),this.consumeCodePoint()),ne=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)J.push(this.consumeCodePoint());oe=this.peekCodePoint(0),ce=this.peekCodePoint(1);var ue=this.peekCodePoint(2);if((oe===E||oe===e)&&((ce===PLUS_SIGN||ce===HYPHEN_MINUS)&&isDigit(ue)||isDigit(ce)))for(J.push(this.consumeCodePoint(),this.consumeCodePoint()),ne=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)J.push(this.consumeCodePoint());return[stringToNumber(J),ne]},K.prototype.consumeNumericToken=function(){var J=this.consumeNumber(),ne=J[0],oe=J[1],ce=this.peekCodePoint(0),ue=this.peekCodePoint(1),Ae=this.peekCodePoint(2);if(isIdentifierStart(ce,ue,Ae)){var pe=this.consumeName();return{type:15,number:ne,flags:oe,unit:pe}}return ce===PERCENTAGE_SIGN?(this.consumeCodePoint(),{type:16,number:ne,flags:oe}):{type:17,number:ne,flags:oe}},K.prototype.consumeEscapedCodePoint=function(){var J=this.consumeCodePoint();if(isHex(J)){for(var ne=fromCodePoint$1(J);isHex(this.peekCodePoint(0))&&ne.length<6;)ne+=fromCodePoint$1(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var oe=parseInt(ne,16);return oe===0||isSurrogateCodePoint(oe)||oe>1114111?REPLACEMENT_CHARACTER:oe}return J===EOF?REPLACEMENT_CHARACTER:J},K.prototype.consumeName=function(){for(var J="";;){var ne=this.consumeCodePoint();if(isNameCodePoint(ne))J+=fromCodePoint$1(ne);else if(isValidEscape(ne,this.peekCodePoint(0)))J+=fromCodePoint$1(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(ne),J}},K}(),Parser=function(){function K(J){this._tokens=J}return K.create=function(J){var ne=new Tokenizer;return ne.write(J),new K(ne.read())},K.parseValue=function(J){return K.create(J).parseComponentValue()},K.parseValues=function(J){return K.create(J).parseComponentValues()},K.prototype.parseComponentValue=function(){for(var J=this.consumeToken();J.type===31;)J=this.consumeToken();if(J.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(J);var ne=this.consumeComponentValue();do J=this.consumeToken();while(J.type===31);if(J.type===32)return ne;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},K.prototype.parseComponentValues=function(){for(var J=[];;){var ne=this.consumeComponentValue();if(ne.type===32)return J;J.push(ne),J.push()}},K.prototype.consumeComponentValue=function(){var J=this.consumeToken();switch(J.type){case 11:case 28:case 2:return this.consumeSimpleBlock(J.type);case 19:return this.consumeFunction(J)}return J},K.prototype.consumeSimpleBlock=function(J){for(var ne={type:J,values:[]},oe=this.consumeToken();;){if(oe.type===32||isEndingTokenFor(oe,J))return ne;this.reconsumeToken(oe),ne.values.push(this.consumeComponentValue()),oe=this.consumeToken()}},K.prototype.consumeFunction=function(J){for(var ne={name:J.value,values:[],type:18};;){var oe=this.consumeToken();if(oe.type===32||oe.type===3)return ne;this.reconsumeToken(oe),ne.values.push(this.consumeComponentValue())}},K.prototype.consumeToken=function(){var J=this._tokens.shift();return typeof J>"u"?EOF_TOKEN:J},K.prototype.reconsumeToken=function(J){this._tokens.unshift(J)},K}(),isDimensionToken=function(K){return K.type===15},isNumberToken=function(K){return K.type===17},isIdentToken=function(K){return K.type===20},isStringToken=function(K){return K.type===0},isIdentWithValue=function(K,J){return isIdentToken(K)&&K.value===J},nonWhiteSpace=function(K){return K.type!==31},nonFunctionArgSeparator=function(K){return K.type!==31&&K.type!==4},parseFunctionArgs=function(K){var J=[],ne=[];return K.forEach(function(oe){if(oe.type===4){if(ne.length===0)throw new Error("Error parsing function args, zero tokens for arg");J.push(ne),ne=[];return}oe.type!==31&&ne.push(oe)}),ne.length&&J.push(ne),J},isEndingTokenFor=function(K,J){return J===11&&K.type===12||J===28&&K.type===29?!0:J===2&&K.type===3},isLength$3=function(K){return K.type===17||K.type===15},isLengthPercentage=function(K){return K.type===16||isLength$3(K)},parseLengthPercentageTuple=function(K){return K.length>1?[K[0],K[1]]:[K[0]]},ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER},FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER},HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER},getAbsoluteValueForTuple=function(K,J,ne){var oe=K[0],ce=K[1];return[getAbsoluteValue(oe,J),getAbsoluteValue(typeof ce<"u"?ce:oe,ne)]},getAbsoluteValue=function(K,J){if(K.type===16)return K.number/100*J;if(isDimensionToken(K))switch(K.unit){case"rem":case"em":return 16*K.number;case"px":default:return K.number}return K.number},DEG="deg",GRAD="grad",RAD="rad",TURN="turn",angle={name:"angle",parse:function(K,J){if(J.type===15)switch(J.unit){case DEG:return Math.PI*J.number/180;case GRAD:return Math.PI/200*J.number;case RAD:return J.number;case TURN:return Math.PI*2*J.number}throw new Error("Unsupported angle type")}},isAngle=function(K){return K.type===15&&(K.unit===DEG||K.unit===GRAD||K.unit===RAD||K.unit===TURN)},parseNamedSide=function(K){var J=K.filter(isIdentToken).map(function(ne){return ne.value}).join(" ");switch(J){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0},deg=function(K){return Math.PI*K/180},color$1={name:"color",parse:function(K,J){if(J.type===18){var ne=SUPPORTED_COLOR_FUNCTIONS[J.name];if(typeof ne>"u")throw new Error('Attempting to parse an unsupported color function "'+J.name+'"');return ne(K,J.values)}if(J.type===5){if(J.value.length===3){var oe=J.value.substring(0,1),ce=J.value.substring(1,2),ue=J.value.substring(2,3);return pack$1(parseInt(oe+oe,16),parseInt(ce+ce,16),parseInt(ue+ue,16),1)}if(J.value.length===4){var oe=J.value.substring(0,1),ce=J.value.substring(1,2),ue=J.value.substring(2,3),Ae=J.value.substring(3,4);return pack$1(parseInt(oe+oe,16),parseInt(ce+ce,16),parseInt(ue+ue,16),parseInt(Ae+Ae,16)/255)}if(J.value.length===6){var oe=J.value.substring(0,2),ce=J.value.substring(2,4),ue=J.value.substring(4,6);return pack$1(parseInt(oe,16),parseInt(ce,16),parseInt(ue,16),1)}if(J.value.length===8){var oe=J.value.substring(0,2),ce=J.value.substring(2,4),ue=J.value.substring(4,6),Ae=J.value.substring(6,8);return pack$1(parseInt(oe,16),parseInt(ce,16),parseInt(ue,16),parseInt(Ae,16)/255)}}if(J.type===20){var pe=COLORS[J.value.toUpperCase()];if(typeof pe<"u")return pe}return COLORS.TRANSPARENT}},isTransparent=function(K){return(255&K)===0},asString=function(K){var J=255&K,ne=255&K>>8,oe=255&K>>16,ce=255&K>>24;return J<255?"rgba("+ce+","+oe+","+ne+","+J/255+")":"rgb("+ce+","+oe+","+ne+")"},pack$1=function(K,J,ne,oe){return(K<<24|J<<16|ne<<8|Math.round(oe*255)<<0)>>>0},getTokenColorValue=function(K,J){if(K.type===17)return K.number;if(K.type===16){var ne=J===3?1:255;return J===3?K.number/100*ne:Math.round(K.number/100*ne)}return 0},rgb=function(K,J){var ne=J.filter(nonFunctionArgSeparator);if(ne.length===3){var oe=ne.map(getTokenColorValue),ce=oe[0],ue=oe[1],Ae=oe[2];return pack$1(ce,ue,Ae,1)}if(ne.length===4){var pe=ne.map(getTokenColorValue),ce=pe[0],ue=pe[1],Ae=pe[2],ve=pe[3];return pack$1(ce,ue,Ae,ve)}return 0};function hue2rgb(K,J,ne){return ne<0&&(ne+=1),ne>=1&&(ne-=1),ne<1/6?(J-K)*ne*6+K:ne<1/2?J:ne<2/3?(J-K)*6*(2/3-ne)+K:K}var hsl=function(K,J){var ne=J.filter(nonFunctionArgSeparator),oe=ne[0],ce=ne[1],ue=ne[2],Ae=ne[3],pe=(oe.type===17?deg(oe.number):angle.parse(K,oe))/(Math.PI*2),ve=isLengthPercentage(ce)?ce.number/100:0,me=isLengthPercentage(ue)?ue.number/100:0,ge=typeof Ae<"u"&&isLengthPercentage(Ae)?getAbsoluteValue(Ae,1):1;if(ve===0)return pack$1(me*255,me*255,me*255,1);var ye=me<=.5?me*(ve+1):me+ve-me*ve,xe=me*2-ye,_e=hue2rgb(xe,ye,pe+1/3),$e=hue2rgb(xe,ye,pe),Ie=hue2rgb(xe,ye,pe-1/3);return pack$1(_e*255,$e*255,Ie*255,ge)},SUPPORTED_COLOR_FUNCTIONS={hsl,hsla:hsl,rgb,rgba:rgb},parseColor=function(K,J){return color$1.parse(K,Parser.create(J).parseComponentValue())},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(K,J){return J.map(function(ne){if(isIdentToken(ne))switch(ne.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},parseColorStop=function(K,J){var ne=color$1.parse(K,J[0]),oe=J[1];return oe&&isLengthPercentage(oe)?{color:ne,stop:oe}:{color:ne,stop:null}},processColorStops=function(K,J){var ne=K[0],oe=K[K.length-1];ne.stop===null&&(ne.stop=ZERO_LENGTH),oe.stop===null&&(oe.stop=HUNDRED_PERCENT);for(var ce=[],ue=0,Ae=0;Ae<K.length;Ae++){var pe=K[Ae].stop;if(pe!==null){var ve=getAbsoluteValue(pe,J);ve>ue?ce.push(ve):ce.push(ue),ue=ve}else ce.push(null)}for(var me=null,Ae=0;Ae<ce.length;Ae++){var ge=ce[Ae];if(ge===null)me===null&&(me=Ae);else if(me!==null){for(var ye=Ae-me,xe=ce[me-1],_e=(ge-xe)/(ye+1),$e=1;$e<=ye;$e++)ce[me+$e-1]=_e*$e;me=null}}return K.map(function(Ie,Fe){var ke=Ie.color;return{color:ke,stop:Math.max(Math.min(1,ce[Fe]/J),0)}})},getAngleFromCorner=function(K,J,ne){var oe=J/2,ce=ne/2,ue=getAbsoluteValue(K[0],J)-oe,Ae=ce-getAbsoluteValue(K[1],ne);return(Math.atan2(Ae,ue)+Math.PI*2)%(Math.PI*2)},calculateGradientDirection=function(K,J,ne){var oe=typeof K=="number"?K:getAngleFromCorner(K,J,ne),ce=Math.abs(J*Math.sin(oe))+Math.abs(ne*Math.cos(oe)),ue=J/2,Ae=ne/2,pe=ce/2,ve=Math.sin(oe-Math.PI/2)*pe,me=Math.cos(oe-Math.PI/2)*pe;return[ce,ue-me,ue+me,Ae-ve,Ae+ve]},distance=function(K,J){return Math.sqrt(K*K+J*J)},findCorner=function(K,J,ne,oe,ce){var ue=[[0,0],[0,J],[K,0],[K,J]];return ue.reduce(function(Ae,pe){var ve=pe[0],me=pe[1],ge=distance(ne-ve,oe-me);return(ce?ge<Ae.optimumDistance:ge>Ae.optimumDistance)?{optimumCorner:pe,optimumDistance:ge}:Ae},{optimumDistance:ce?1/0:-1/0,optimumCorner:null}).optimumCorner},calculateRadius=function(K,J,ne,oe,ce){var ue=0,Ae=0;switch(K.size){case 0:K.shape===0?ue=Ae=Math.min(Math.abs(J),Math.abs(J-oe),Math.abs(ne),Math.abs(ne-ce)):K.shape===1&&(ue=Math.min(Math.abs(J),Math.abs(J-oe)),Ae=Math.min(Math.abs(ne),Math.abs(ne-ce)));break;case 2:if(K.shape===0)ue=Ae=Math.min(distance(J,ne),distance(J,ne-ce),distance(J-oe,ne),distance(J-oe,ne-ce));else if(K.shape===1){var pe=Math.min(Math.abs(ne),Math.abs(ne-ce))/Math.min(Math.abs(J),Math.abs(J-oe)),ve=findCorner(oe,ce,J,ne,!0),me=ve[0],ge=ve[1];ue=distance(me-J,(ge-ne)/pe),Ae=pe*ue}break;case 1:K.shape===0?ue=Ae=Math.max(Math.abs(J),Math.abs(J-oe),Math.abs(ne),Math.abs(ne-ce)):K.shape===1&&(ue=Math.max(Math.abs(J),Math.abs(J-oe)),Ae=Math.max(Math.abs(ne),Math.abs(ne-ce)));break;case 3:if(K.shape===0)ue=Ae=Math.max(distance(J,ne),distance(J,ne-ce),distance(J-oe,ne),distance(J-oe,ne-ce));else if(K.shape===1){var pe=Math.max(Math.abs(ne),Math.abs(ne-ce))/Math.max(Math.abs(J),Math.abs(J-oe)),ye=findCorner(oe,ce,J,ne,!1),me=ye[0],ge=ye[1];ue=distance(me-J,(ge-ne)/pe),Ae=pe*ue}break}return Array.isArray(K.size)&&(ue=getAbsoluteValue(K.size[0],oe),Ae=K.size.length===2?getAbsoluteValue(K.size[1],ce):ue),[ue,Ae]},linearGradient=function(K,J){var ne=deg(180),oe=[];return parseFunctionArgs(J).forEach(function(ce,ue){if(ue===0){var Ae=ce[0];if(Ae.type===20&&Ae.value==="to"){ne=parseNamedSide(ce);return}else if(isAngle(Ae)){ne=angle.parse(K,Ae);return}}var pe=parseColorStop(K,ce);oe.push(pe)}),{angle:ne,stops:oe,type:1}},prefixLinearGradient=function(K,J){var ne=deg(180),oe=[];return parseFunctionArgs(J).forEach(function(ce,ue){if(ue===0){var Ae=ce[0];if(Ae.type===20&&["top","left","right","bottom"].indexOf(Ae.value)!==-1){ne=parseNamedSide(ce);return}else if(isAngle(Ae)){ne=(angle.parse(K,Ae)+deg(270))%deg(360);return}}var pe=parseColorStop(K,ce);oe.push(pe)}),{angle:ne,stops:oe,type:1}},webkitGradient=function(K,J){var ne=deg(180),oe=[],ce=1,ue=0,Ae=3,pe=[];return parseFunctionArgs(J).forEach(function(ve,me){var ge=ve[0];if(me===0){if(isIdentToken(ge)&&ge.value==="linear"){ce=1;return}else if(isIdentToken(ge)&&ge.value==="radial"){ce=2;return}}if(ge.type===18){if(ge.name==="from"){var ye=color$1.parse(K,ge.values[0]);oe.push({stop:ZERO_LENGTH,color:ye})}else if(ge.name==="to"){var ye=color$1.parse(K,ge.values[0]);oe.push({stop:HUNDRED_PERCENT,color:ye})}else if(ge.name==="color-stop"){var xe=ge.values.filter(nonFunctionArgSeparator);if(xe.length===2){var ye=color$1.parse(K,xe[1]),_e=xe[0];isNumberToken(_e)&&oe.push({stop:{type:16,number:_e.number*100,flags:_e.flags},color:ye})}}}}),ce===1?{angle:(ne+deg(180))%deg(360),stops:oe,type:ce}:{size:Ae,shape:ue,stops:oe,position:pe,type:ce}},CLOSEST_SIDE="closest-side",FARTHEST_SIDE="farthest-side",CLOSEST_CORNER="closest-corner",FARTHEST_CORNER="farthest-corner",CIRCLE="circle",ELLIPSE="ellipse",COVER="cover",CONTAIN="contain",radialGradient=function(K,J){var ne=0,oe=3,ce=[],ue=[];return parseFunctionArgs(J).forEach(function(Ae,pe){var ve=!0;if(pe===0){var me=!1;ve=Ae.reduce(function(ye,xe){if(me)if(isIdentToken(xe))switch(xe.value){case"center":return ue.push(FIFTY_PERCENT),ye;case"top":case"left":return ue.push(ZERO_LENGTH),ye;case"right":case"bottom":return ue.push(HUNDRED_PERCENT),ye}else(isLengthPercentage(xe)||isLength$3(xe))&&ue.push(xe);else if(isIdentToken(xe))switch(xe.value){case CIRCLE:return ne=0,!1;case ELLIPSE:return ne=1,!1;case"at":return me=!0,!1;case CLOSEST_SIDE:return oe=0,!1;case COVER:case FARTHEST_SIDE:return oe=1,!1;case CONTAIN:case CLOSEST_CORNER:return oe=2,!1;case FARTHEST_CORNER:return oe=3,!1}else if(isLength$3(xe)||isLengthPercentage(xe))return Array.isArray(oe)||(oe=[]),oe.push(xe),!1;return ye},ve)}if(ve){var ge=parseColorStop(K,Ae);ce.push(ge)}}),{size:oe,shape:ne,stops:ce,position:ue,type:2}},prefixRadialGradient=function(K,J){var ne=0,oe=3,ce=[],ue=[];return parseFunctionArgs(J).forEach(function(Ae,pe){var ve=!0;if(pe===0?ve=Ae.reduce(function(ge,ye){if(isIdentToken(ye))switch(ye.value){case"center":return ue.push(FIFTY_PERCENT),!1;case"top":case"left":return ue.push(ZERO_LENGTH),!1;case"right":case"bottom":return ue.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(ye)||isLength$3(ye))return ue.push(ye),!1;return ge},ve):pe===1&&(ve=Ae.reduce(function(ge,ye){if(isIdentToken(ye))switch(ye.value){case CIRCLE:return ne=0,!1;case ELLIPSE:return ne=1,!1;case CONTAIN:case CLOSEST_SIDE:return oe=0,!1;case FARTHEST_SIDE:return oe=1,!1;case CLOSEST_CORNER:return oe=2,!1;case COVER:case FARTHEST_CORNER:return oe=3,!1}else if(isLength$3(ye)||isLengthPercentage(ye))return Array.isArray(oe)||(oe=[]),oe.push(ye),!1;return ge},ve)),ve){var me=parseColorStop(K,Ae);ce.push(me)}}),{size:oe,shape:ne,stops:ce,position:ue,type:2}},isLinearGradient=function(K){return K.type===1},isRadialGradient=function(K){return K.type===2},image={name:"image",parse:function(K,J){if(J.type===22){var ne={url:J.value,type:0};return K.cache.addImage(J.value),ne}if(J.type===18){var oe=SUPPORTED_IMAGE_FUNCTIONS[J.name];if(typeof oe>"u")throw new Error('Attempting to parse an unsupported image function "'+J.name+'"');return oe(K,J.values)}throw new Error("Unsupported image type "+J.type)}};function isSupportedImage(K){return!(K.type===20&&K.value==="none")&&(K.type!==18||!!SUPPORTED_IMAGE_FUNCTIONS[K.name])}var SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":linearGradient,"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":radialGradient,"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":webkitGradient},backgroundImage={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(K,J){if(J.length===0)return[];var ne=J[0];return ne.type===20&&ne.value==="none"?[]:J.filter(function(oe){return nonFunctionArgSeparator(oe)&&isSupportedImage(oe)}).map(function(oe){return image.parse(K,oe)})}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(K,J){return J.map(function(ne){if(isIdentToken(ne))switch(ne.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(K,J){return parseFunctionArgs(J).map(function(ne){return ne.filter(isLengthPercentage)}).map(parseLengthPercentageTuple)}},backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(K,J){return parseFunctionArgs(J).map(function(ne){return ne.filter(isIdentToken).map(function(oe){return oe.value}).join(" ")}).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(K){switch(K){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},BACKGROUND_SIZE;(function(K){K.AUTO="auto",K.CONTAIN="contain",K.COVER="cover"})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(K,J){return parseFunctionArgs(J).map(function(ne){return ne.filter(isBackgroundSizeInfoToken)})}},isBackgroundSizeInfoToken=function(K){return isIdentToken(K)||isLengthPercentage(K)},borderColorForSide=function(K){return{name:"border-"+K+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderRadiusForSide=function(K){return{name:"border-radius-"+K,initialValue:"0 0",prefix:!1,type:1,parse:function(J,ne){return parseLengthPercentageTuple(ne.filter(isLengthPercentage))}}},borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left"),borderStyleForSide=function(K){return{name:"border-"+K+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(J,ne){switch(ne){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderWidthForSide=function(K){return{name:"border-"+K+"-width",initialValue:"0",type:0,prefix:!1,parse:function(J,ne){return isDimensionToken(ne)?ne.number:0}}},borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},direction={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(K,J){switch(J){case"rtl":return 1;case"ltr":default:return 0}}},display={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(K,J){return J.filter(isIdentToken).reduce(function(ne,oe){return ne|parseDisplayValue(oe.value)},0)}},parseDisplayValue=function(K){switch(K){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},float={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(K,J){switch(J){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(K,J){return J.type===20&&J.value==="normal"?0:J.type===17||J.type===15?J.number:0}},LINE_BREAK;(function(K){K.NORMAL="normal",K.STRICT="strict"})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(K,J){switch(J){case"strict":return LINE_BREAK.STRICT;case"normal":default:return LINE_BREAK.NORMAL}}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:4},computeLineHeight=function(K,J){return isIdentToken(K)&&K.value==="normal"?1.2*J:K.type===17?J*K.number:isLengthPercentage(K)?getAbsoluteValue(K,J):J},listStyleImage={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(K,J){return J.type===20&&J.value==="none"?null:image.parse(K,J)}},listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(K,J){switch(J){case"inside":return 0;case"outside":default:return 1}}},listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(K,J){switch(J){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},marginForSide=function(K){return{name:"margin-"+K,initialValue:"0",prefix:!1,type:4}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left"),overflow={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(K,J){return J.filter(isIdentToken).map(function(ne){switch(ne.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(K,J){switch(J){case"break-word":return"break-word";case"normal":default:return"normal"}}},paddingForSide=function(K){return{name:"padding-"+K,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left"),textAlign={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(K,J){switch(J){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},position={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(K,J){switch(J){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},textShadow={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(K,J){return J.length===1&&isIdentWithValue(J[0],"none")?[]:parseFunctionArgs(J).map(function(ne){for(var oe={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},ce=0,ue=0;ue<ne.length;ue++){var Ae=ne[ue];isLength$3(Ae)?(ce===0?oe.offsetX=Ae:ce===1?oe.offsetY=Ae:oe.blur=Ae,ce++):oe.color=color$1.parse(K,Ae)}return oe})}},textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(K,J){switch(J){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},transform$1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(K,J){if(J.type===20&&J.value==="none")return null;if(J.type===18){var ne=SUPPORTED_TRANSFORM_FUNCTIONS[J.name];if(typeof ne>"u")throw new Error('Attempting to parse an unsupported transform function "'+J.name+'"');return ne(J.values)}return null}},matrix=function(K){var J=K.filter(function(ne){return ne.type===17}).map(function(ne){return ne.number});return J.length===6?J:null},matrix3d=function(K){var J=K.filter(function(ve){return ve.type===17}).map(function(ve){return ve.number}),ne=J[0],oe=J[1];J[2],J[3];var ce=J[4],ue=J[5];J[6],J[7],J[8],J[9],J[10],J[11];var Ae=J[12],pe=J[13];return J[14],J[15],J.length===16?[ne,oe,ce,ue,Ae,pe]:null},SUPPORTED_TRANSFORM_FUNCTIONS={matrix,matrix3d},DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(K,J){var ne=J.filter(isLengthPercentage);return ne.length!==2?DEFAULT:[ne[0],ne[1]]}},visibility={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(K,J){switch(J){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},WORD_BREAK;(function(K){K.NORMAL="normal",K.BREAK_ALL="break-all",K.KEEP_ALL="keep-all"})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(K,J){switch(J){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;case"normal":default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(K,J){if(J.type===20)return{auto:!0,order:0};if(isNumberToken(J))return{auto:!1,order:J.number};throw new Error("Invalid z-index number parsed")}},time={name:"time",parse:function(K,J){if(J.type===15)switch(J.unit.toLowerCase()){case"s":return 1e3*J.number;case"ms":return J.number}throw new Error("Unsupported time type")}},opacity={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(K,J){return isNumberToken(J)?J.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(K,J){return J.filter(isIdentToken).map(function(ne){switch(ne.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(ne){return ne!==0})}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(K,J){var ne=[],oe=[];return J.forEach(function(ce){switch(ce.type){case 20:case 0:ne.push(ce.value);break;case 17:ne.push(ce.number.toString());break;case 4:oe.push(ne.join(" ")),ne.length=0;break}}),ne.length&&oe.push(ne.join(" ")),oe.map(function(ce){return ce.indexOf(" ")===-1?ce:"'"+ce+"'"})}},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(K,J){if(isNumberToken(J))return J.number;if(isIdentToken(J))switch(J.value){case"bold":return 700;case"normal":default:return 400}return 400}},fontVariant={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(K,J){return J.filter(isIdentToken).map(function(ne){return ne.value})}},fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(K,J){switch(J){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},contains=function(K,J){return(K&J)!==0},content$2={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(K,J){if(J.length===0)return[];var ne=J[0];return ne.type===20&&ne.value==="none"?[]:J}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(K,J){if(J.length===0)return null;var ne=J[0];if(ne.type===20&&ne.value==="none")return null;for(var oe=[],ce=J.filter(nonWhiteSpace),ue=0;ue<ce.length;ue++){var Ae=ce[ue],pe=ce[ue+1];if(Ae.type===20){var ve=pe&&isNumberToken(pe)?pe.number:1;oe.push({counter:Ae.value,increment:ve})}}return oe}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(K,J){if(J.length===0)return[];for(var ne=[],oe=J.filter(nonWhiteSpace),ce=0;ce<oe.length;ce++){var ue=oe[ce],Ae=oe[ce+1];if(isIdentToken(ue)&&ue.value!=="none"){var pe=Ae&&isNumberToken(Ae)?Ae.number:0;ne.push({counter:ue.value,reset:pe})}}return ne}},duration={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(K,J){return J.filter(isDimensionToken).map(function(ne){return time.parse(K,ne)})}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(K,J){if(J.length===0)return null;var ne=J[0];if(ne.type===20&&ne.value==="none")return null;var oe=[],ce=J.filter(isStringToken);if(ce.length%2!==0)return null;for(var ue=0;ue<ce.length;ue+=2){var Ae=ce[ue].value,pe=ce[ue+1].value;oe.push({open:Ae,close:pe})}return oe}},getQuote=function(K,J,ne){if(!K)return"";var oe=K[Math.min(J,K.length-1)];return oe?ne?oe.open:oe.close:""},boxShadow={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(K,J){return J.length===1&&isIdentWithValue(J[0],"none")?[]:parseFunctionArgs(J).map(function(ne){for(var oe={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},ce=0,ue=0;ue<ne.length;ue++){var Ae=ne[ue];isIdentWithValue(Ae,"inset")?oe.inset=!0:isLength$3(Ae)?(ce===0?oe.offsetX=Ae:ce===1?oe.offsetY=Ae:ce===2?oe.blur=Ae:oe.spread=Ae,ce++):oe.color=color$1.parse(K,Ae)}return oe})}},paintOrder={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(K,J){var ne=[0,1,2],oe=[];return J.filter(isIdentToken).forEach(function(ce){switch(ce.value){case"stroke":oe.push(1);break;case"fill":oe.push(0);break;case"markers":oe.push(2);break}}),ne.forEach(function(ce){oe.indexOf(ce)===-1&&oe.push(ce)}),oe}},webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(K,J){return isDimensionToken(J)?J.number:0}},CSSParsedDeclaration=function(){function K(J,ne){var oe,ce;this.animationDuration=parse(J,duration,ne.animationDuration),this.backgroundClip=parse(J,backgroundClip,ne.backgroundClip),this.backgroundColor=parse(J,backgroundColor,ne.backgroundColor),this.backgroundImage=parse(J,backgroundImage,ne.backgroundImage),this.backgroundOrigin=parse(J,backgroundOrigin,ne.backgroundOrigin),this.backgroundPosition=parse(J,backgroundPosition,ne.backgroundPosition),this.backgroundRepeat=parse(J,backgroundRepeat,ne.backgroundRepeat),this.backgroundSize=parse(J,backgroundSize,ne.backgroundSize),this.borderTopColor=parse(J,borderTopColor,ne.borderTopColor),this.borderRightColor=parse(J,borderRightColor,ne.borderRightColor),this.borderBottomColor=parse(J,borderBottomColor,ne.borderBottomColor),this.borderLeftColor=parse(J,borderLeftColor,ne.borderLeftColor),this.borderTopLeftRadius=parse(J,borderTopLeftRadius,ne.borderTopLeftRadius),this.borderTopRightRadius=parse(J,borderTopRightRadius,ne.borderTopRightRadius),this.borderBottomRightRadius=parse(J,borderBottomRightRadius,ne.borderBottomRightRadius),this.borderBottomLeftRadius=parse(J,borderBottomLeftRadius,ne.borderBottomLeftRadius),this.borderTopStyle=parse(J,borderTopStyle,ne.borderTopStyle),this.borderRightStyle=parse(J,borderRightStyle,ne.borderRightStyle),this.borderBottomStyle=parse(J,borderBottomStyle,ne.borderBottomStyle),this.borderLeftStyle=parse(J,borderLeftStyle,ne.borderLeftStyle),this.borderTopWidth=parse(J,borderTopWidth,ne.borderTopWidth),this.borderRightWidth=parse(J,borderRightWidth,ne.borderRightWidth),this.borderBottomWidth=parse(J,borderBottomWidth,ne.borderBottomWidth),this.borderLeftWidth=parse(J,borderLeftWidth,ne.borderLeftWidth),this.boxShadow=parse(J,boxShadow,ne.boxShadow),this.color=parse(J,color,ne.color),this.direction=parse(J,direction,ne.direction),this.display=parse(J,display,ne.display),this.float=parse(J,float,ne.cssFloat),this.fontFamily=parse(J,fontFamily,ne.fontFamily),this.fontSize=parse(J,fontSize,ne.fontSize),this.fontStyle=parse(J,fontStyle,ne.fontStyle),this.fontVariant=parse(J,fontVariant,ne.fontVariant),this.fontWeight=parse(J,fontWeight,ne.fontWeight),this.letterSpacing=parse(J,letterSpacing,ne.letterSpacing),this.lineBreak=parse(J,lineBreak,ne.lineBreak),this.lineHeight=parse(J,lineHeight,ne.lineHeight),this.listStyleImage=parse(J,listStyleImage,ne.listStyleImage),this.listStylePosition=parse(J,listStylePosition,ne.listStylePosition),this.listStyleType=parse(J,listStyleType,ne.listStyleType),this.marginTop=parse(J,marginTop,ne.marginTop),this.marginRight=parse(J,marginRight,ne.marginRight),this.marginBottom=parse(J,marginBottom,ne.marginBottom),this.marginLeft=parse(J,marginLeft,ne.marginLeft),this.opacity=parse(J,opacity,ne.opacity);var ue=parse(J,overflow,ne.overflow);this.overflowX=ue[0],this.overflowY=ue[ue.length>1?1:0],this.overflowWrap=parse(J,overflowWrap,ne.overflowWrap),this.paddingTop=parse(J,paddingTop,ne.paddingTop),this.paddingRight=parse(J,paddingRight,ne.paddingRight),this.paddingBottom=parse(J,paddingBottom,ne.paddingBottom),this.paddingLeft=parse(J,paddingLeft,ne.paddingLeft),this.paintOrder=parse(J,paintOrder,ne.paintOrder),this.position=parse(J,position,ne.position),this.textAlign=parse(J,textAlign,ne.textAlign),this.textDecorationColor=parse(J,textDecorationColor,(oe=ne.textDecorationColor)!==null&&oe!==void 0?oe:ne.color),this.textDecorationLine=parse(J,textDecorationLine,(ce=ne.textDecorationLine)!==null&&ce!==void 0?ce:ne.textDecoration),this.textShadow=parse(J,textShadow,ne.textShadow),this.textTransform=parse(J,textTransform,ne.textTransform),this.transform=parse(J,transform$1,ne.transform),this.transformOrigin=parse(J,transformOrigin,ne.transformOrigin),this.visibility=parse(J,visibility,ne.visibility),this.webkitTextStrokeColor=parse(J,webkitTextStrokeColor,ne.webkitTextStrokeColor),this.webkitTextStrokeWidth=parse(J,webkitTextStrokeWidth,ne.webkitTextStrokeWidth),this.wordBreak=parse(J,wordBreak,ne.wordBreak),this.zIndex=parse(J,zIndex,ne.zIndex)}return K.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},K.prototype.isTransparent=function(){return isTransparent(this.backgroundColor)},K.prototype.isTransformed=function(){return this.transform!==null},K.prototype.isPositioned=function(){return this.position!==0},K.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},K.prototype.isFloating=function(){return this.float!==0},K.prototype.isInlineLevel=function(){return contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728)},K}(),CSSParsedPseudoDeclaration=function(){function K(J,ne){this.content=parse(J,content$2,ne.content),this.quotes=parse(J,quotes,ne.quotes)}return K}(),CSSParsedCounterDeclaration=function(){function K(J,ne){this.counterIncrement=parse(J,counterIncrement,ne.counterIncrement),this.counterReset=parse(J,counterReset,ne.counterReset)}return K}(),parse=function(K,J,ne){var oe=new Tokenizer,ce=ne!==null&&typeof ne<"u"?ne.toString():J.initialValue;oe.write(ce);var ue=new Parser(oe.read());switch(J.type){case 2:var Ae=ue.parseComponentValue();return J.parse(K,isIdentToken(Ae)?Ae.value:J.initialValue);case 0:return J.parse(K,ue.parseComponentValue());case 1:return J.parse(K,ue.parseComponentValues());case 4:return ue.parseComponentValue();case 3:switch(J.format){case"angle":return angle.parse(K,ue.parseComponentValue());case"color":return color$1.parse(K,ue.parseComponentValue());case"image":return image.parse(K,ue.parseComponentValue());case"length":var pe=ue.parseComponentValue();return isLength$3(pe)?pe:ZERO_LENGTH;case"length-percentage":var ve=ue.parseComponentValue();return isLengthPercentage(ve)?ve:ZERO_LENGTH;case"time":return time.parse(K,ue.parseComponentValue())}break}},elementDebuggerAttribute="data-html2canvas-debug",getElementDebugType=function(K){var J=K.getAttribute(elementDebuggerAttribute);switch(J){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},isDebugging=function(K,J){var ne=getElementDebugType(K);return ne===1||J===ne},ElementContainer=function(){function K(J,ne){if(this.context=J,this.textNodes=[],this.elements=[],this.flags=0,isDebugging(ne,3))debugger;this.styles=new CSSParsedDeclaration(J,window.getComputedStyle(ne,null)),isHTMLElementNode(ne)&&(this.styles.animationDuration.some(function(oe){return oe>0})&&(ne.style.animationDuration="0s"),this.styles.transform!==null&&(ne.style.transform="none")),this.bounds=parseBounds(this.context,ne),isDebugging(ne,4)&&(this.flags|=16)}return K}(),base64="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1=0;i$1<chars$1.length;i$1++)lookup$1[chars$1.charCodeAt(i$1)]=i$1;var decode=function(K){var J=K.length*.75,ne=K.length,oe,ce=0,ue,Ae,pe,ve;K[K.length-1]==="="&&(J--,K[K.length-2]==="="&&J--);var me=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(J):new Array(J),ge=Array.isArray(me)?me:new Uint8Array(me);for(oe=0;oe<ne;oe+=4)ue=lookup$1[K.charCodeAt(oe)],Ae=lookup$1[K.charCodeAt(oe+1)],pe=lookup$1[K.charCodeAt(oe+2)],ve=lookup$1[K.charCodeAt(oe+3)],ge[ce++]=ue<<2|Ae>>4,ge[ce++]=(Ae&15)<<4|pe>>2,ge[ce++]=(pe&3)<<6|ve&63;return me},polyUint16Array=function(K){for(var J=K.length,ne=[],oe=0;oe<J;oe+=2)ne.push(K[oe+1]<<8|K[oe]);return ne},polyUint32Array=function(K){for(var J=K.length,ne=[],oe=0;oe<J;oe+=4)ne.push(K[oe+3]<<24|K[oe+2]<<16|K[oe+1]<<8|K[oe]);return ne},UTRIE2_SHIFT_2=5,UTRIE2_SHIFT_1=11,UTRIE2_INDEX_SHIFT=2,UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2,UTRIE2_LSCP_INDEX_2_OFFSET=65536>>UTRIE2_SHIFT_2,UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2,UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1,UTRIE2_LSCP_INDEX_2_LENGTH=1024>>UTRIE2_SHIFT_2,UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH,UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH,UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>UTRIE2_SHIFT_1,UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2,UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1,slice16=function(K,J,ne){return K.slice?K.slice(J,ne):new Uint16Array(Array.prototype.slice.call(K,J,ne))},slice32=function(K,J,ne){return K.slice?K.slice(J,ne):new Uint32Array(Array.prototype.slice.call(K,J,ne))},createTrieFromBase64=function(K,J){var ne=decode(K),oe=Array.isArray(ne)?polyUint32Array(ne):new Uint32Array(ne),ce=Array.isArray(ne)?polyUint16Array(ne):new Uint16Array(ne),ue=24,Ae=slice16(ce,ue/2,oe[4]/2),pe=oe[5]===2?slice16(ce,(ue+oe[4])/2):slice32(oe,Math.ceil((ue+oe[4])/4));return new Trie(oe[0],oe[1],oe[2],oe[3],Ae,pe)},Trie=function(){function K(J,ne,oe,ce,ue,Ae){this.initialValue=J,this.errorValue=ne,this.highStart=oe,this.highValueIndex=ce,this.index=ue,this.data=Ae}return K.prototype.get=function(J){var ne;if(J>=0){if(J<55296||J>56319&&J<=65535)return ne=this.index[J>>UTRIE2_SHIFT_2],ne=(ne<<UTRIE2_INDEX_SHIFT)+(J&UTRIE2_DATA_MASK),this.data[ne];if(J<=65535)return ne=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(J-55296>>UTRIE2_SHIFT_2)],ne=(ne<<UTRIE2_INDEX_SHIFT)+(J&UTRIE2_DATA_MASK),this.data[ne];if(J<this.highStart)return ne=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(J>>UTRIE2_SHIFT_1),ne=this.index[ne],ne+=J>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK,ne=this.index[ne],ne=(ne<<UTRIE2_INDEX_SHIFT)+(J&UTRIE2_DATA_MASK),this.data[ne];if(J<=1114111)return this.data[this.highValueIndex]}return this.errorValue},K}(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$4=0;i$4<chars.length;i$4++)lookup[chars.charCodeAt(i$4)]=i$4;var Prepend=1,CR=2,LF=3,Control=4,Extend=5,SpacingMark=7,L$1=8,V=9,T=10,LV=11,LVT=12,ZWJ=13,Extended_Pictographic=14,RI=15,toCodePoints=function(K){for(var J=[],ne=0,oe=K.length;ne<oe;){var ce=K.charCodeAt(ne++);if(ce>=55296&&ce<=56319&&ne<oe){var ue=K.charCodeAt(ne++);(ue&64512)===56320?J.push(((ce&1023)<<10)+(ue&1023)+65536):(J.push(ce),ne--)}else J.push(ce)}return J},fromCodePoint=function(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];if(String.fromCodePoint)return String.fromCodePoint.apply(String,K);var ne=K.length;if(!ne)return"";for(var oe=[],ce=-1,ue="";++ce<ne;){var Ae=K[ce];Ae<=65535?oe.push(Ae):(Ae-=65536,oe.push((Ae>>10)+55296,Ae%1024+56320)),(ce+1===ne||oe.length>16384)&&(ue+=String.fromCharCode.apply(String,oe),oe.length=0)}return ue},UnicodeTrie=createTrieFromBase64(base64),BREAK_NOT_ALLOWED="",BREAK_ALLOWED="",codePointToClass=function(K){return UnicodeTrie.get(K)},_graphemeBreakAtIndex=function(K,J,ne){var oe=ne-2,ce=J[oe],ue=J[ne-1],Ae=J[ne];if(ue===CR&&Ae===LF)return BREAK_NOT_ALLOWED;if(ue===CR||ue===LF||ue===Control||Ae===CR||Ae===LF||Ae===Control)return BREAK_ALLOWED;if(ue===L$1&&[L$1,V,LV,LVT].indexOf(Ae)!==-1||(ue===LV||ue===V)&&(Ae===V||Ae===T)||(ue===LVT||ue===T)&&Ae===T||Ae===ZWJ||Ae===Extend||Ae===SpacingMark||ue===Prepend)return BREAK_NOT_ALLOWED;if(ue===ZWJ&&Ae===Extended_Pictographic){for(;ce===Extend;)ce=J[--oe];if(ce===Extended_Pictographic)return BREAK_NOT_ALLOWED}if(ue===RI&&Ae===RI){for(var pe=0;ce===RI;)pe++,ce=J[--oe];if(pe%2===0)return BREAK_NOT_ALLOWED}return BREAK_ALLOWED},GraphemeBreaker=function(K){var J=toCodePoints(K),ne=J.length,oe=0,ce=0,ue=J.map(codePointToClass);return{next:function(){if(oe>=ne)return{done:!0,value:null};for(var Ae=BREAK_NOT_ALLOWED;oe<ne&&(Ae=_graphemeBreakAtIndex(J,ue,++oe))===BREAK_NOT_ALLOWED;);if(Ae!==BREAK_NOT_ALLOWED||oe===ne){var pe=fromCodePoint.apply(null,J.slice(ce,oe));return ce=oe,{value:pe,done:!1}}return{done:!0,value:null}}}},splitGraphemes=function(K){for(var J=GraphemeBreaker(K),ne=[],oe;!(oe=J.next()).done;)oe.value&&ne.push(oe.value.slice());return ne},testRangeBounds=function(K){var J=123;if(K.createRange){var ne=K.createRange();if(ne.getBoundingClientRect){var oe=K.createElement("boundtest");oe.style.height=J+"px",oe.style.display="block",K.body.appendChild(oe),ne.selectNode(oe);var ce=ne.getBoundingClientRect(),ue=Math.round(ce.height);if(K.body.removeChild(oe),ue===J)return!0}}return!1},testIOSLineBreak=function(K){var J=K.createElement("boundtest");J.style.width="50px",J.style.display="block",J.style.fontSize="12px",J.style.letterSpacing="0px",J.style.wordSpacing="0px",K.body.appendChild(J);var ne=K.createRange();J.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var oe=J.firstChild,ce=toCodePoints$1(oe.data).map(function(ve){return fromCodePoint$1(ve)}),ue=0,Ae={},pe=ce.every(function(ve,me){ne.setStart(oe,ue),ne.setEnd(oe,ue+ve.length);var ge=ne.getBoundingClientRect();ue+=ve.length;var ye=ge.x>Ae.x||ge.y>Ae.y;return Ae=ge,me===0?!0:ye});return K.body.removeChild(J),pe},testCORS=function(){return typeof new Image().crossOrigin<"u"},testResponseType=function(){return typeof new XMLHttpRequest().responseType=="string"},testSVG=function(K){var J=new Image,ne=K.createElement("canvas"),oe=ne.getContext("2d");if(!oe)return!1;J.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{oe.drawImage(J,0,0),ne.toDataURL()}catch{return!1}return!0},isGreenPixel=function(K){return K[0]===0&&K[1]===255&&K[2]===0&&K[3]===255},testForeignObject=function(K){var J=K.createElement("canvas"),ne=100;J.width=ne,J.height=ne;var oe=J.getContext("2d");if(!oe)return Promise.reject(!1);oe.fillStyle="rgb(0, 255, 0)",oe.fillRect(0,0,ne,ne);var ce=new Image,ue=J.toDataURL();ce.src=ue;var Ae=createForeignObjectSVG(ne,ne,0,0,ce);return oe.fillStyle="red",oe.fillRect(0,0,ne,ne),loadSerializedSVG$1(Ae).then(function(pe){oe.drawImage(pe,0,0);var ve=oe.getImageData(0,0,ne,ne).data;oe.fillStyle="red",oe.fillRect(0,0,ne,ne);var me=K.createElement("div");return me.style.backgroundImage="url("+ue+")",me.style.height=ne+"px",isGreenPixel(ve)?loadSerializedSVG$1(createForeignObjectSVG(ne,ne,0,0,me)):Promise.reject(!1)}).then(function(pe){return oe.drawImage(pe,0,0),isGreenPixel(oe.getImageData(0,0,ne,ne).data)}).catch(function(){return!1})},createForeignObjectSVG=function(K,J,ne,oe,ce){var ue="http://www.w3.org/2000/svg",Ae=document.createElementNS(ue,"svg"),pe=document.createElementNS(ue,"foreignObject");return Ae.setAttributeNS(null,"width",K.toString()),Ae.setAttributeNS(null,"height",J.toString()),pe.setAttributeNS(null,"width","100%"),pe.setAttributeNS(null,"height","100%"),pe.setAttributeNS(null,"x",ne.toString()),pe.setAttributeNS(null,"y",oe.toString()),pe.setAttributeNS(null,"externalResourcesRequired","true"),Ae.appendChild(pe),pe.appendChild(ce),Ae},loadSerializedSVG$1=function(K){return new Promise(function(J,ne){var oe=new Image;oe.onload=function(){return J(oe)},oe.onerror=ne,oe.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(K))})},FEATURES={get SUPPORT_RANGE_BOUNDS(){var K=testRangeBounds(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:K}),K},get SUPPORT_WORD_BREAKING(){var K=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);return Object.defineProperty(FEATURES,"SUPPORT_WORD_BREAKING",{value:K}),K},get SUPPORT_SVG_DRAWING(){var K=testSVG(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:K}),K},get SUPPORT_FOREIGNOBJECT_DRAWING(){var K=typeof Array.from=="function"&&typeof window.fetch=="function"?testForeignObject(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:K}),K},get SUPPORT_CORS_IMAGES(){var K=testCORS();return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:K}),K},get SUPPORT_RESPONSE_TYPE(){var K=testResponseType();return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:K}),K},get SUPPORT_CORS_XHR(){var K="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:K}),K},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var K=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(FEATURES,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:K}),K}},TextBounds=function(){function K(J,ne){this.text=J,this.bounds=ne}return K}(),parseTextBounds=function(K,J,ne,oe){var ce=breakText(J,ne),ue=[],Ae=0;return ce.forEach(function(pe){if(ne.textDecorationLine.length||pe.trim().length>0)if(FEATURES.SUPPORT_RANGE_BOUNDS){var ve=createRange(oe,Ae,pe.length).getClientRects();if(ve.length>1){var me=segmentGraphemes(pe),ge=0;me.forEach(function(xe){ue.push(new TextBounds(xe,Bounds.fromDOMRectList(K,createRange(oe,ge+Ae,xe.length).getClientRects()))),ge+=xe.length})}else ue.push(new TextBounds(pe,Bounds.fromDOMRectList(K,ve)))}else{var ye=oe.splitText(pe.length);ue.push(new TextBounds(pe,getWrapperBounds(K,oe))),oe=ye}else FEATURES.SUPPORT_RANGE_BOUNDS||(oe=oe.splitText(pe.length));Ae+=pe.length}),ue},getWrapperBounds=function(K,J){var ne=J.ownerDocument;if(ne){var oe=ne.createElement("html2canvaswrapper");oe.appendChild(J.cloneNode(!0));var ce=J.parentNode;if(ce){ce.replaceChild(oe,J);var ue=parseBounds(K,oe);return oe.firstChild&&ce.replaceChild(oe.firstChild,oe),ue}}return Bounds.EMPTY},createRange=function(K,J,ne){var oe=K.ownerDocument;if(!oe)throw new Error("Node has no owner document");var ce=oe.createRange();return ce.setStart(K,J),ce.setEnd(K,J+ne),ce},segmentGraphemes=function(K){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var J=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(J.segment(K)).map(function(ne){return ne.segment})}return splitGraphemes(K)},segmentWords=function(K,J){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var ne=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(ne.segment(K)).map(function(oe){return oe.segment})}return breakWords(K,J)},breakText=function(K,J){return J.letterSpacing!==0?segmentGraphemes(K):segmentWords(K,J)},wordSeparators=[32,160,4961,65792,65793,4153,4241],breakWords=function(K,J){for(var ne=LineBreaker(K,{lineBreak:J.lineBreak,wordBreak:J.overflowWrap==="break-word"?"break-word":J.wordBreak}),oe=[],ce,ue=function(){if(ce.value){var Ae=ce.value.slice(),pe=toCodePoints$1(Ae),ve="";pe.forEach(function(me){wordSeparators.indexOf(me)===-1?ve+=fromCodePoint$1(me):(ve.length&&oe.push(ve),oe.push(fromCodePoint$1(me)),ve="")}),ve.length&&oe.push(ve)}};!(ce=ne.next()).done;)ue();return oe},TextContainer=function(){function K(J,ne,oe){this.text=transform(ne.data,oe.textTransform),this.textBounds=parseTextBounds(J,this.text,oe,ne)}return K}(),transform=function(K,J){switch(J){case 1:return K.toLowerCase();case 3:return K.replace(CAPITALIZE,capitalize);case 2:return K.toUpperCase();default:return K}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize=function(K,J,ne){return K.length>0?J+ne.toUpperCase():K},ImageElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.src=oe.currentSrc||oe.src,ce.intrinsicWidth=oe.naturalWidth,ce.intrinsicHeight=oe.naturalHeight,ce.context.cache.addImage(ce.src),ce}return J}(ElementContainer),CanvasElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.canvas=oe,ce.intrinsicWidth=oe.width,ce.intrinsicHeight=oe.height,ce}return J}(ElementContainer),SVGElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this,ue=new XMLSerializer,Ae=parseBounds(ne,oe);return oe.setAttribute("width",Ae.width+"px"),oe.setAttribute("height",Ae.height+"px"),ce.svg="data:image/svg+xml,"+encodeURIComponent(ue.serializeToString(oe)),ce.intrinsicWidth=oe.width.baseVal.value,ce.intrinsicHeight=oe.height.baseVal.value,ce.context.cache.addImage(ce.svg),ce}return J}(ElementContainer),LIElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.value=oe.value,ce}return J}(ElementContainer),OLElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.start=oe.start,ce.reversed=typeof oe.reversed=="boolean"&&oe.reversed===!0,ce}return J}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}],reformatInputBounds=function(K){return K.width>K.height?new Bounds(K.left+(K.width-K.height)/2,K.top,K.height,K.height):K.width<K.height?new Bounds(K.left,K.top+(K.height-K.width)/2,K.width,K.width):K},getInputValue=function(K){var J=K.type===PASSWORD?new Array(K.value.length+1).join(""):K.value;return J.length===0?K.placeholder||"":J},CHECKBOX="checkbox",RADIO="radio",PASSWORD="password",INPUT_COLOR=707406591,InputElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;switch(ce.type=oe.type.toLowerCase(),ce.checked=oe.checked,ce.value=getInputValue(oe),(ce.type===CHECKBOX||ce.type===RADIO)&&(ce.styles.backgroundColor=3739148031,ce.styles.borderTopColor=ce.styles.borderRightColor=ce.styles.borderBottomColor=ce.styles.borderLeftColor=2779096575,ce.styles.borderTopWidth=ce.styles.borderRightWidth=ce.styles.borderBottomWidth=ce.styles.borderLeftWidth=1,ce.styles.borderTopStyle=ce.styles.borderRightStyle=ce.styles.borderBottomStyle=ce.styles.borderLeftStyle=1,ce.styles.backgroundClip=[0],ce.styles.backgroundOrigin=[0],ce.bounds=reformatInputBounds(ce.bounds)),ce.type){case CHECKBOX:ce.styles.borderTopRightRadius=ce.styles.borderTopLeftRadius=ce.styles.borderBottomRightRadius=ce.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:ce.styles.borderTopRightRadius=ce.styles.borderTopLeftRadius=ce.styles.borderBottomRightRadius=ce.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break}return ce}return J}(ElementContainer),SelectElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this,ue=oe.options[oe.selectedIndex||0];return ce.value=ue&&ue.text||"",ce}return J}(ElementContainer),TextareaElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.value=oe.value,ce}return J}(ElementContainer),IFrameElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;ce.src=oe.src,ce.width=parseInt(oe.width,10)||0,ce.height=parseInt(oe.height,10)||0,ce.backgroundColor=ce.styles.backgroundColor;try{if(oe.contentWindow&&oe.contentWindow.document&&oe.contentWindow.document.documentElement){ce.tree=parseTree(ne,oe.contentWindow.document.documentElement);var ue=oe.contentWindow.document.documentElement?parseColor(ne,getComputedStyle(oe.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,Ae=oe.contentWindow.document.body?parseColor(ne,getComputedStyle(oe.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;ce.backgroundColor=isTransparent(ue)?isTransparent(Ae)?ce.styles.backgroundColor:Ae:ue}}catch{}return ce}return J}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(K,J,ne,oe){for(var ce=J.firstChild,ue=void 0;ce;ce=ue)if(ue=ce.nextSibling,isTextNode(ce)&&ce.data.trim().length>0)ne.textNodes.push(new TextContainer(K,ce,ne.styles));else if(isElementNode(ce))if(isSlotElement(ce)&&ce.assignedNodes)ce.assignedNodes().forEach(function(pe){return parseNodeTree(K,pe,ne,oe)});else{var Ae=createContainer(K,ce);Ae.styles.isVisible()&&(createsRealStackingContext(ce,Ae,oe)?Ae.flags|=4:createsStackingContext(Ae.styles)&&(Ae.flags|=2),LIST_OWNERS.indexOf(ce.tagName)!==-1&&(Ae.flags|=8),ne.elements.push(Ae),ce.slot,ce.shadowRoot?parseNodeTree(K,ce.shadowRoot,Ae,oe):!isTextareaElement(ce)&&!isSVGElement(ce)&&!isSelectElement(ce)&&parseNodeTree(K,ce,Ae,oe))}},createContainer=function(K,J){return isImageElement(J)?new ImageElementContainer(K,J):isCanvasElement(J)?new CanvasElementContainer(K,J):isSVGElement(J)?new SVGElementContainer(K,J):isLIElement(J)?new LIElementContainer(K,J):isOLElement(J)?new OLElementContainer(K,J):isInputElement(J)?new InputElementContainer(K,J):isSelectElement(J)?new SelectElementContainer(K,J):isTextareaElement(J)?new TextareaElementContainer(K,J):isIFrameElement(J)?new IFrameElementContainer(K,J):new ElementContainer(K,J)},parseTree=function(K,J){var ne=createContainer(K,J);return ne.flags|=4,parseNodeTree(K,J,ne,ne),ne},createsRealStackingContext=function(K,J,ne){return J.styles.isPositionedWithZIndex()||J.styles.opacity<1||J.styles.isTransformed()||isBodyElement(K)&&ne.styles.isTransparent()},createsStackingContext=function(K){return K.isPositioned()||K.isFloating()},isTextNode=function(K){return K.nodeType===Node.TEXT_NODE},isElementNode=function(K){return K.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(K){return isElementNode(K)&&typeof K.style<"u"&&!isSVGElementNode(K)},isSVGElementNode=function(K){return typeof K.className=="object"},isLIElement=function(K){return K.tagName==="LI"},isOLElement=function(K){return K.tagName==="OL"},isInputElement=function(K){return K.tagName==="INPUT"},isHTMLElement=function(K){return K.tagName==="HTML"},isSVGElement=function(K){return K.tagName==="svg"},isBodyElement=function(K){return K.tagName==="BODY"},isCanvasElement=function(K){return K.tagName==="CANVAS"},isVideoElement=function(K){return K.tagName==="VIDEO"},isImageElement=function(K){return K.tagName==="IMG"},isIFrameElement=function(K){return K.tagName==="IFRAME"},isStyleElement=function(K){return K.tagName==="STYLE"},isScriptElement=function(K){return K.tagName==="SCRIPT"},isTextareaElement=function(K){return K.tagName==="TEXTAREA"},isSelectElement=function(K){return K.tagName==="SELECT"},isSlotElement=function(K){return K.tagName==="SLOT"},isCustomElement=function(K){return K.tagName.indexOf("-")>0},CounterState=function(){function K(){this.counters={}}return K.prototype.getCounterValue=function(J){var ne=this.counters[J];return ne&&ne.length?ne[ne.length-1]:1},K.prototype.getCounterValues=function(J){var ne=this.counters[J];return ne||[]},K.prototype.pop=function(J){var ne=this;J.forEach(function(oe){return ne.counters[oe].pop()})},K.prototype.parse=function(J){var ne=this,oe=J.counterIncrement,ce=J.counterReset,ue=!0;oe!==null&&oe.forEach(function(pe){var ve=ne.counters[pe.counter];ve&&pe.increment!==0&&(ue=!1,ve.length||ve.push(1),ve[Math.max(0,ve.length-1)]+=pe.increment)});var Ae=[];return ue&&ce.forEach(function(pe){var ve=ne.counters[pe.counter];Ae.push(pe.counter),ve||(ve=ne.counters[pe.counter]=[]),ve.push(pe.reset)}),Ae},K}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},createAdditiveCounter=function(K,J,ne,oe,ce,ue){return K<J||K>ne?createCounterText(K,ce,ue.length>0):oe.integers.reduce(function(Ae,pe,ve){for(;K>=pe;)K-=pe,Ae+=oe.values[ve];return Ae},"")+ue},createCounterStyleWithSymbolResolver=function(K,J,ne,oe){var ce="";do ne||K--,ce=oe(K)+ce,K/=J;while(K*J>=J);return ce},createCounterStyleFromRange=function(K,J,ne,oe,ce){var ue=ne-J+1;return(K<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(K),ue,oe,function(Ae){return fromCodePoint$1(Math.floor(Ae%ue)+J)})+ce)},createCounterStyleFromSymbols=function(K,J,ne){ne===void 0&&(ne=". ");var oe=J.length;return createCounterStyleWithSymbolResolver(Math.abs(K),oe,!1,function(ce){return J[Math.floor(ce%oe)]})+ne},CJK_ZEROS=1,CJK_TEN_COEFFICIENTS=2,CJK_TEN_HIGH_COEFFICIENTS=4,CJK_HUNDRED_COEFFICIENTS=8,createCJKCounter=function(K,J,ne,oe,ce,ue){if(K<-9999||K>9999)return createCounterText(K,4,ce.length>0);var Ae=Math.abs(K),pe=ce;if(Ae===0)return J[0]+pe;for(var ve=0;Ae>0&&ve<=4;ve++){var me=Ae%10;me===0&&contains(ue,CJK_ZEROS)&&pe!==""?pe=J[me]+pe:me>1||me===1&&ve===0||me===1&&ve===1&&contains(ue,CJK_TEN_COEFFICIENTS)||me===1&&ve===1&&contains(ue,CJK_TEN_HIGH_COEFFICIENTS)&&K>100||me===1&&ve>1&&contains(ue,CJK_HUNDRED_COEFFICIENTS)?pe=J[me]+(ve>0?ne[ve-1]:"")+pe:me===1&&ve>0&&(pe=ne[ve-1]+pe),Ae=Math.floor(Ae/10)}return(K<0?oe:"")+pe},CHINESE_INFORMAL_MULTIPLIERS="",CHINESE_FORMAL_MULTIPLIERS="",JAPANESE_NEGATIVE="",KOREAN_NEGATIVE="",createCounterText=function(K,J,ne){var oe=ne?". ":"",ce=ne?"":"",ue=ne?", ":"",Ae=ne?" ":"";switch(J){case 0:return""+Ae;case 1:return""+Ae;case 2:return""+Ae;case 5:var pe=createCounterStyleFromRange(K,48,57,!0,oe);return pe.length<4?"0"+pe:pe;case 4:return createCounterStyleFromSymbols(K,"",ce);case 6:return createAdditiveCounter(K,1,3999,ROMAN_UPPER,3,oe).toLowerCase();case 7:return createAdditiveCounter(K,1,3999,ROMAN_UPPER,3,oe);case 8:return createCounterStyleFromRange(K,945,969,!1,oe);case 9:return createCounterStyleFromRange(K,97,122,!1,oe);case 10:return createCounterStyleFromRange(K,65,90,!1,oe);case 11:return createCounterStyleFromRange(K,1632,1641,!0,oe);case 12:case 49:return createAdditiveCounter(K,1,9999,ARMENIAN,3,oe);case 35:return createAdditiveCounter(K,1,9999,ARMENIAN,3,oe).toLowerCase();case 13:return createCounterStyleFromRange(K,2534,2543,!0,oe);case 14:case 30:return createCounterStyleFromRange(K,6112,6121,!0,oe);case 15:return createCounterStyleFromSymbols(K,"",ce);case 16:return createCounterStyleFromSymbols(K,"",ce);case 17:case 48:return createCJKCounter(K,"",CHINESE_INFORMAL_MULTIPLIERS,"",ce,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(K,"",CHINESE_FORMAL_MULTIPLIERS,"",ce,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42:return createCJKCounter(K,"",CHINESE_INFORMAL_MULTIPLIERS,"",ce,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(K,"",CHINESE_FORMAL_MULTIPLIERS,"",ce,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(K,"","",JAPANESE_NEGATIVE,ce,0);case 25:return createCJKCounter(K,"","",JAPANESE_NEGATIVE,ce,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(K,"","",KOREAN_NEGATIVE,ue,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(K,"","",KOREAN_NEGATIVE,ue,0);case 32:return createCJKCounter(K,"","",KOREAN_NEGATIVE,ue,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18:return createCounterStyleFromRange(K,2406,2415,!0,oe);case 20:return createAdditiveCounter(K,1,19999,GEORGIAN,3,oe);case 21:return createCounterStyleFromRange(K,2790,2799,!0,oe);case 22:return createCounterStyleFromRange(K,2662,2671,!0,oe);case 22:return createAdditiveCounter(K,1,10999,HEBREW,3,oe);case 23:return createCounterStyleFromSymbols(K,"");case 24:return createCounterStyleFromSymbols(K,"");case 27:return createCounterStyleFromRange(K,3302,3311,!0,oe);case 28:return createCounterStyleFromSymbols(K,"",ce);case 29:return createCounterStyleFromSymbols(K,"",ce);case 34:return createCounterStyleFromRange(K,3792,3801,!0,oe);case 37:return createCounterStyleFromRange(K,6160,6169,!0,oe);case 38:return createCounterStyleFromRange(K,4160,4169,!0,oe);case 39:return createCounterStyleFromRange(K,2918,2927,!0,oe);case 40:return createCounterStyleFromRange(K,1776,1785,!0,oe);case 43:return createCounterStyleFromRange(K,3046,3055,!0,oe);case 44:return createCounterStyleFromRange(K,3174,3183,!0,oe);case 45:return createCounterStyleFromRange(K,3664,3673,!0,oe);case 46:return createCounterStyleFromRange(K,3872,3881,!0,oe);case 3:default:return createCounterStyleFromRange(K,48,57,!0,oe)}},IGNORE_ATTRIBUTE="data-html2canvas-ignore",DocumentCloner=function(){function K(J,ne,oe){if(this.context=J,this.options=oe,this.scrolledElements=[],this.referenceElement=ne,this.counters=new CounterState,this.quoteDepth=0,!ne.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(ne.ownerDocument.documentElement,!1)}return K.prototype.toIFrame=function(J,ne){var oe=this,ce=createIFrameContainer(J,ne);if(!ce.contentWindow)return Promise.reject("Unable to find iframe window");var ue=J.defaultView.pageXOffset,Ae=J.defaultView.pageYOffset,pe=ce.contentWindow,ve=pe.document,me=iframeLoader(ce).then(function(){return __awaiter$1(oe,void 0,void 0,function(){var ge,ye;return __generator$1(this,function(xe){switch(xe.label){case 0:return this.scrolledElements.forEach(restoreNodeScroll),pe&&(pe.scrollTo(ne.left,ne.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(pe.scrollY!==ne.top||pe.scrollX!==ne.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(pe.scrollX-ne.left,pe.scrollY-ne.top,0,0))),ge=this.options.onclone,ye=this.clonedReferenceElement,typeof ye>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:ve.fonts&&ve.fonts.ready?[4,ve.fonts.ready]:[3,2];case 1:xe.sent(),xe.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,imagesReady(ve)]:[3,4];case 3:xe.sent(),xe.label=4;case 4:return typeof ge=="function"?[2,Promise.resolve().then(function(){return ge(ve,ye)}).then(function(){return ce})]:[2,ce]}})})});return ve.open(),ve.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,ue,Ae),ve.replaceChild(ve.adoptNode(this.documentElement),ve.documentElement),ve.close(),me},K.prototype.createElementClone=function(J){if(isDebugging(J,2))debugger;if(isCanvasElement(J))return this.createCanvasClone(J);if(isVideoElement(J))return this.createVideoClone(J);if(isStyleElement(J))return this.createStyleClone(J);var ne=J.cloneNode(!1);return isImageElement(ne)&&(isImageElement(J)&&J.currentSrc&&J.currentSrc!==J.src&&(ne.src=J.currentSrc,ne.srcset=""),ne.loading==="lazy"&&(ne.loading="eager")),isCustomElement(ne)?this.createCustomElementClone(ne):ne},K.prototype.createCustomElementClone=function(J){var ne=document.createElement("html2canvascustomelement");return copyCSSStyles(J.style,ne),ne},K.prototype.createStyleClone=function(J){try{var ne=J.sheet;if(ne&&ne.cssRules){var oe=[].slice.call(ne.cssRules,0).reduce(function(ue,Ae){return Ae&&typeof Ae.cssText=="string"?ue+Ae.cssText:ue},""),ce=J.cloneNode(!1);return ce.textContent=oe,ce}}catch(ue){if(this.context.logger.error("Unable to access cssRules property",ue),ue.name!=="SecurityError")throw ue}return J.cloneNode(!1)},K.prototype.createCanvasClone=function(J){var ne;if(this.options.inlineImages&&J.ownerDocument){var oe=J.ownerDocument.createElement("img");try{return oe.src=J.toDataURL(),oe}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",J)}}var ce=J.cloneNode(!1);try{ce.width=J.width,ce.height=J.height;var ue=J.getContext("2d"),Ae=ce.getContext("2d");if(Ae)if(!this.options.allowTaint&&ue)Ae.putImageData(ue.getImageData(0,0,J.width,J.height),0,0);else{var pe=(ne=J.getContext("webgl2"))!==null&&ne!==void 0?ne:J.getContext("webgl");if(pe){var ve=pe.getContextAttributes();(ve==null?void 0:ve.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",J)}Ae.drawImage(J,0,0)}return ce}catch{this.context.logger.info("Unable to clone canvas as it is tainted",J)}return ce},K.prototype.createVideoClone=function(J){var ne=J.ownerDocument.createElement("canvas");ne.width=J.offsetWidth,ne.height=J.offsetHeight;var oe=ne.getContext("2d");try{return oe&&(oe.drawImage(J,0,0,ne.width,ne.height),this.options.allowTaint||oe.getImageData(0,0,ne.width,ne.height)),ne}catch{this.context.logger.info("Unable to clone video as it is tainted",J)}var ce=J.ownerDocument.createElement("canvas");return ce.width=J.offsetWidth,ce.height=J.offsetHeight,ce},K.prototype.appendChildNode=function(J,ne,oe){(!isElementNode(ne)||!isScriptElement(ne)&&!ne.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(ne)))&&(!this.options.copyStyles||!isElementNode(ne)||!isStyleElement(ne))&&J.appendChild(this.cloneNode(ne,oe))},K.prototype.cloneChildNodes=function(J,ne,oe){for(var ce=this,ue=J.shadowRoot?J.shadowRoot.firstChild:J.firstChild;ue;ue=ue.nextSibling)if(isElementNode(ue)&&isSlotElement(ue)&&typeof ue.assignedNodes=="function"){var Ae=ue.assignedNodes();Ae.length&&Ae.forEach(function(pe){return ce.appendChildNode(ne,pe,oe)})}else this.appendChildNode(ne,ue,oe)},K.prototype.cloneNode=function(J,ne){if(isTextNode(J))return document.createTextNode(J.data);if(!J.ownerDocument)return J.cloneNode(!1);var oe=J.ownerDocument.defaultView;if(oe&&isElementNode(J)&&(isHTMLElementNode(J)||isSVGElementNode(J))){var ce=this.createElementClone(J);ce.style.transitionProperty="none";var ue=oe.getComputedStyle(J),Ae=oe.getComputedStyle(J,":before"),pe=oe.getComputedStyle(J,":after");this.referenceElement===J&&isHTMLElementNode(ce)&&(this.clonedReferenceElement=ce),isBodyElement(ce)&&createPseudoHideStyles(ce);var ve=this.counters.parse(new CSSParsedCounterDeclaration(this.context,ue)),me=this.resolvePseudoContent(J,ce,Ae,PseudoElementType.BEFORE);isCustomElement(J)&&(ne=!0),isVideoElement(J)||this.cloneChildNodes(J,ce,ne),me&&ce.insertBefore(me,ce.firstChild);var ge=this.resolvePseudoContent(J,ce,pe,PseudoElementType.AFTER);return ge&&ce.appendChild(ge),this.counters.pop(ve),(ue&&(this.options.copyStyles||isSVGElementNode(J))&&!isIFrameElement(J)||ne)&&copyCSSStyles(ue,ce),(J.scrollTop!==0||J.scrollLeft!==0)&&this.scrolledElements.push([ce,J.scrollLeft,J.scrollTop]),(isTextareaElement(J)||isSelectElement(J))&&(isTextareaElement(ce)||isSelectElement(ce))&&(ce.value=J.value),ce}return J.cloneNode(!1)},K.prototype.resolvePseudoContent=function(J,ne,oe,ce){var ue=this;if(oe){var Ae=oe.content,pe=ne.ownerDocument;if(!(!pe||!Ae||Ae==="none"||Ae==="-moz-alt-content"||oe.display==="none")){this.counters.parse(new CSSParsedCounterDeclaration(this.context,oe));var ve=new CSSParsedPseudoDeclaration(this.context,oe),me=pe.createElement("html2canvaspseudoelement");copyCSSStyles(oe,me),ve.content.forEach(function(ye){if(ye.type===0)me.appendChild(pe.createTextNode(ye.value));else if(ye.type===22){var xe=pe.createElement("img");xe.src=ye.value,xe.style.opacity="1",me.appendChild(xe)}else if(ye.type===18){if(ye.name==="attr"){var _e=ye.values.filter(isIdentToken);_e.length&&me.appendChild(pe.createTextNode(J.getAttribute(_e[0].value)||""))}else if(ye.name==="counter"){var $e=ye.values.filter(nonFunctionArgSeparator),Ie=$e[0],Fe=$e[1];if(Ie&&isIdentToken(Ie)){var ke=ue.counters.getCounterValue(Ie.value),je=Fe&&isIdentToken(Fe)?listStyleType.parse(ue.context,Fe.value):3;me.appendChild(pe.createTextNode(createCounterText(ke,je,!1)))}}else if(ye.name==="counters"){var We=ye.values.filter(nonFunctionArgSeparator),Ie=We[0],ze=We[1],Fe=We[2];if(Ie&&isIdentToken(Ie)){var Xe=ue.counters.getCounterValues(Ie.value),Je=Fe&&isIdentToken(Fe)?listStyleType.parse(ue.context,Fe.value):3,nt=ze&&ze.type===0?ze.value:"",et=Xe.map(function(qe){return createCounterText(qe,Je,!1)}).join(nt);me.appendChild(pe.createTextNode(et))}}}else if(ye.type===20)switch(ye.value){case"open-quote":me.appendChild(pe.createTextNode(getQuote(ve.quotes,ue.quoteDepth++,!0)));break;case"close-quote":me.appendChild(pe.createTextNode(getQuote(ve.quotes,--ue.quoteDepth,!1)));break;default:me.appendChild(pe.createTextNode(ye.value))}}),me.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var ge=ce===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;return isSVGElementNode(ne)?ne.className.baseValue+=ge:ne.className+=ge,me}}},K.destroy=function(J){return J.parentNode?(J.parentNode.removeChild(J),!0):!1},K}(),PseudoElementType;(function(K){K[K.BEFORE=0]="BEFORE",K[K.AFTER=1]="AFTER"})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(K,J){var ne=K.createElement("iframe");return ne.className="html2canvas-container",ne.style.visibility="hidden",ne.style.position="fixed",ne.style.left="-10000px",ne.style.top="0px",ne.style.border="0",ne.width=J.width.toString(),ne.height=J.height.toString(),ne.scrolling="no",ne.setAttribute(IGNORE_ATTRIBUTE,"true"),K.body.appendChild(ne),ne},imageReady=function(K){return new Promise(function(J){if(K.complete){J();return}if(!K.src){J();return}K.onload=J,K.onerror=J})},imagesReady=function(K){return Promise.all([].slice.call(K.images,0).map(imageReady))},iframeLoader=function(K){return new Promise(function(J,ne){var oe=K.contentWindow;if(!oe)return ne("No window assigned for iframe");var ce=oe.document;oe.onload=K.onload=function(){oe.onload=K.onload=null;var ue=setInterval(function(){ce.body.childNodes.length>0&&ce.readyState==="complete"&&(clearInterval(ue),J(K))},50)}})},ignoredStyleProperties=["all","d","content"],copyCSSStyles=function(K,J){for(var ne=K.length-1;ne>=0;ne--){var oe=K.item(ne);ignoredStyleProperties.indexOf(oe)===-1&&J.style.setProperty(oe,K.getPropertyValue(oe))}return J},serializeDoctype=function(K){var J="";return K&&(J+="<!DOCTYPE ",K.name&&(J+=K.name),K.internalSubset&&(J+=K.internalSubset),K.publicId&&(J+='"'+K.publicId+'"'),K.systemId&&(J+='"'+K.systemId+'"'),J+=">"),J},restoreOwnerScroll=function(K,J,ne){K&&K.defaultView&&(J!==K.defaultView.pageXOffset||ne!==K.defaultView.pageYOffset)&&K.defaultView.scrollTo(J,ne)},restoreNodeScroll=function(K){var J=K[0],ne=K[1],oe=K[2];J.scrollLeft=ne,J.scrollTop=oe},PSEUDO_BEFORE=":before",PSEUDO_AFTER=":after",PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",PSEUDO_HIDE_ELEMENT_STYLE=`{
    content: "" !important;
    display: none !important;
}`,createPseudoHideStyles=function(K){createStyles(K,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+`
         .`+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE)},createStyles=function(K,J){var ne=K.ownerDocument;if(ne){var oe=ne.createElement("style");oe.textContent=J,K.appendChild(oe)}},CacheStorage=function(){function K(){}return K.getOrigin=function(J){var ne=K._link;return ne?(ne.href=J,ne.href=ne.href,ne.protocol+ne.hostname+ne.port):"about:blank"},K.isSameOrigin=function(J){return K.getOrigin(J)===K._origin},K.setContext=function(J){K._link=J.document.createElement("a"),K._origin=K.getOrigin(J.location.href)},K._origin="about:blank",K}(),Cache=function(){function K(J,ne){this.context=J,this._options=ne,this._cache={}}return K.prototype.addImage=function(J){var ne=Promise.resolve();return this.has(J)||(isBlobImage(J)||isRenderable(J))&&(this._cache[J]=this.loadImage(J)).catch(function(){}),ne},K.prototype.match=function(J){return this._cache[J]},K.prototype.loadImage=function(J){return __awaiter$1(this,void 0,void 0,function(){var ne,oe,ce,ue,Ae=this;return __generator$1(this,function(pe){switch(pe.label){case 0:return ne=CacheStorage.isSameOrigin(J),oe=!isInlineImage(J)&&this._options.useCORS===!0&&FEATURES.SUPPORT_CORS_IMAGES&&!ne,ce=!isInlineImage(J)&&!ne&&!isBlobImage(J)&&typeof this._options.proxy=="string"&&FEATURES.SUPPORT_CORS_XHR&&!oe,!ne&&this._options.allowTaint===!1&&!isInlineImage(J)&&!isBlobImage(J)&&!ce&&!oe?[2]:(ue=J,ce?[4,this.proxy(ue)]:[3,2]);case 1:ue=pe.sent(),pe.label=2;case 2:return this.context.logger.debug("Added image "+J.substring(0,256)),[4,new Promise(function(ve,me){var ge=new Image;ge.onload=function(){return ve(ge)},ge.onerror=me,(isInlineBase64Image(ue)||oe)&&(ge.crossOrigin="anonymous"),ge.src=ue,ge.complete===!0&&setTimeout(function(){return ve(ge)},500),Ae._options.imageTimeout>0&&setTimeout(function(){return me("Timed out ("+Ae._options.imageTimeout+"ms) loading image")},Ae._options.imageTimeout)})];case 3:return[2,pe.sent()]}})})},K.prototype.has=function(J){return typeof this._cache[J]<"u"},K.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},K.prototype.proxy=function(J){var ne=this,oe=this._options.proxy;if(!oe)throw new Error("No proxy defined");var ce=J.substring(0,256);return new Promise(function(ue,Ae){var pe=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",ve=new XMLHttpRequest;ve.onload=function(){if(ve.status===200)if(pe==="text")ue(ve.response);else{var ye=new FileReader;ye.addEventListener("load",function(){return ue(ye.result)},!1),ye.addEventListener("error",function(xe){return Ae(xe)},!1),ye.readAsDataURL(ve.response)}else Ae("Failed to proxy resource "+ce+" with status code "+ve.status)},ve.onerror=Ae;var me=oe.indexOf("?")>-1?"&":"?";if(ve.open("GET",""+oe+me+"url="+encodeURIComponent(J)+"&responseType="+pe),pe!=="text"&&ve instanceof XMLHttpRequest&&(ve.responseType=pe),ne._options.imageTimeout){var ge=ne._options.imageTimeout;ve.timeout=ge,ve.ontimeout=function(){return Ae("Timed out ("+ge+"ms) proxying "+ce)}}ve.send()})},K}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(K){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(K)},isInlineImage=function(K){return INLINE_IMG.test(K)},isInlineBase64Image=function(K){return INLINE_BASE64.test(K)},isBlobImage=function(K){return K.substr(0,4)==="blob"},isSVG=function(K){return K.substr(-3).toLowerCase()==="svg"||INLINE_SVG.test(K)},Vector=function(){function K(J,ne){this.type=0,this.x=J,this.y=ne}return K.prototype.add=function(J,ne){return new K(this.x+J,this.y+ne)},K}(),lerp=function(K,J,ne){return new Vector(K.x+(J.x-K.x)*ne,K.y+(J.y-K.y)*ne)},BezierCurve=function(){function K(J,ne,oe,ce){this.type=1,this.start=J,this.startControl=ne,this.endControl=oe,this.end=ce}return K.prototype.subdivide=function(J,ne){var oe=lerp(this.start,this.startControl,J),ce=lerp(this.startControl,this.endControl,J),ue=lerp(this.endControl,this.end,J),Ae=lerp(oe,ce,J),pe=lerp(ce,ue,J),ve=lerp(Ae,pe,J);return ne?new K(this.start,oe,Ae,ve):new K(ve,pe,ue,this.end)},K.prototype.add=function(J,ne){return new K(this.start.add(J,ne),this.startControl.add(J,ne),this.endControl.add(J,ne),this.end.add(J,ne))},K.prototype.reverse=function(){return new K(this.end,this.endControl,this.startControl,this.start)},K}(),isBezierCurve=function(K){return K.type===1},BoundCurves=function(){function K(J){var ne=J.styles,oe=J.bounds,ce=getAbsoluteValueForTuple(ne.borderTopLeftRadius,oe.width,oe.height),ue=ce[0],Ae=ce[1],pe=getAbsoluteValueForTuple(ne.borderTopRightRadius,oe.width,oe.height),ve=pe[0],me=pe[1],ge=getAbsoluteValueForTuple(ne.borderBottomRightRadius,oe.width,oe.height),ye=ge[0],xe=ge[1],_e=getAbsoluteValueForTuple(ne.borderBottomLeftRadius,oe.width,oe.height),$e=_e[0],Ie=_e[1],Fe=[];Fe.push((ue+ve)/oe.width),Fe.push(($e+ye)/oe.width),Fe.push((Ae+Ie)/oe.height),Fe.push((me+xe)/oe.height);var ke=Math.max.apply(Math,Fe);ke>1&&(ue/=ke,Ae/=ke,ve/=ke,me/=ke,ye/=ke,xe/=ke,$e/=ke,Ie/=ke);var je=oe.width-ve,We=oe.height-xe,ze=oe.width-ye,Xe=oe.height-Ie,Je=ne.borderTopWidth,nt=ne.borderRightWidth,et=ne.borderBottomWidth,tt=ne.borderLeftWidth,st=getAbsoluteValue(ne.paddingTop,J.bounds.width),qe=getAbsoluteValue(ne.paddingRight,J.bounds.width),Se=getAbsoluteValue(ne.paddingBottom,J.bounds.width),Re=getAbsoluteValue(ne.paddingLeft,J.bounds.width);this.topLeftBorderDoubleOuterBox=ue>0||Ae>0?getCurvePoints(oe.left+tt/3,oe.top+Je/3,ue-tt/3,Ae-Je/3,CORNER.TOP_LEFT):new Vector(oe.left+tt/3,oe.top+Je/3),this.topRightBorderDoubleOuterBox=ue>0||Ae>0?getCurvePoints(oe.left+je,oe.top+Je/3,ve-nt/3,me-Je/3,CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-nt/3,oe.top+Je/3),this.bottomRightBorderDoubleOuterBox=ye>0||xe>0?getCurvePoints(oe.left+ze,oe.top+We,ye-nt/3,xe-et/3,CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-nt/3,oe.top+oe.height-et/3),this.bottomLeftBorderDoubleOuterBox=$e>0||Ie>0?getCurvePoints(oe.left+tt/3,oe.top+Xe,$e-tt/3,Ie-et/3,CORNER.BOTTOM_LEFT):new Vector(oe.left+tt/3,oe.top+oe.height-et/3),this.topLeftBorderDoubleInnerBox=ue>0||Ae>0?getCurvePoints(oe.left+tt*2/3,oe.top+Je*2/3,ue-tt*2/3,Ae-Je*2/3,CORNER.TOP_LEFT):new Vector(oe.left+tt*2/3,oe.top+Je*2/3),this.topRightBorderDoubleInnerBox=ue>0||Ae>0?getCurvePoints(oe.left+je,oe.top+Je*2/3,ve-nt*2/3,me-Je*2/3,CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-nt*2/3,oe.top+Je*2/3),this.bottomRightBorderDoubleInnerBox=ye>0||xe>0?getCurvePoints(oe.left+ze,oe.top+We,ye-nt*2/3,xe-et*2/3,CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-nt*2/3,oe.top+oe.height-et*2/3),this.bottomLeftBorderDoubleInnerBox=$e>0||Ie>0?getCurvePoints(oe.left+tt*2/3,oe.top+Xe,$e-tt*2/3,Ie-et*2/3,CORNER.BOTTOM_LEFT):new Vector(oe.left+tt*2/3,oe.top+oe.height-et*2/3),this.topLeftBorderStroke=ue>0||Ae>0?getCurvePoints(oe.left+tt/2,oe.top+Je/2,ue-tt/2,Ae-Je/2,CORNER.TOP_LEFT):new Vector(oe.left+tt/2,oe.top+Je/2),this.topRightBorderStroke=ue>0||Ae>0?getCurvePoints(oe.left+je,oe.top+Je/2,ve-nt/2,me-Je/2,CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-nt/2,oe.top+Je/2),this.bottomRightBorderStroke=ye>0||xe>0?getCurvePoints(oe.left+ze,oe.top+We,ye-nt/2,xe-et/2,CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-nt/2,oe.top+oe.height-et/2),this.bottomLeftBorderStroke=$e>0||Ie>0?getCurvePoints(oe.left+tt/2,oe.top+Xe,$e-tt/2,Ie-et/2,CORNER.BOTTOM_LEFT):new Vector(oe.left+tt/2,oe.top+oe.height-et/2),this.topLeftBorderBox=ue>0||Ae>0?getCurvePoints(oe.left,oe.top,ue,Ae,CORNER.TOP_LEFT):new Vector(oe.left,oe.top),this.topRightBorderBox=ve>0||me>0?getCurvePoints(oe.left+je,oe.top,ve,me,CORNER.TOP_RIGHT):new Vector(oe.left+oe.width,oe.top),this.bottomRightBorderBox=ye>0||xe>0?getCurvePoints(oe.left+ze,oe.top+We,ye,xe,CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width,oe.top+oe.height),this.bottomLeftBorderBox=$e>0||Ie>0?getCurvePoints(oe.left,oe.top+Xe,$e,Ie,CORNER.BOTTOM_LEFT):new Vector(oe.left,oe.top+oe.height),this.topLeftPaddingBox=ue>0||Ae>0?getCurvePoints(oe.left+tt,oe.top+Je,Math.max(0,ue-tt),Math.max(0,Ae-Je),CORNER.TOP_LEFT):new Vector(oe.left+tt,oe.top+Je),this.topRightPaddingBox=ve>0||me>0?getCurvePoints(oe.left+Math.min(je,oe.width-nt),oe.top+Je,je>oe.width+nt?0:Math.max(0,ve-nt),Math.max(0,me-Je),CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-nt,oe.top+Je),this.bottomRightPaddingBox=ye>0||xe>0?getCurvePoints(oe.left+Math.min(ze,oe.width-tt),oe.top+Math.min(We,oe.height-et),Math.max(0,ye-nt),Math.max(0,xe-et),CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-nt,oe.top+oe.height-et),this.bottomLeftPaddingBox=$e>0||Ie>0?getCurvePoints(oe.left+tt,oe.top+Math.min(Xe,oe.height-et),Math.max(0,$e-tt),Math.max(0,Ie-et),CORNER.BOTTOM_LEFT):new Vector(oe.left+tt,oe.top+oe.height-et),this.topLeftContentBox=ue>0||Ae>0?getCurvePoints(oe.left+tt+Re,oe.top+Je+st,Math.max(0,ue-(tt+Re)),Math.max(0,Ae-(Je+st)),CORNER.TOP_LEFT):new Vector(oe.left+tt+Re,oe.top+Je+st),this.topRightContentBox=ve>0||me>0?getCurvePoints(oe.left+Math.min(je,oe.width+tt+Re),oe.top+Je+st,je>oe.width+tt+Re?0:ve-tt+Re,me-(Je+st),CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-(nt+qe),oe.top+Je+st),this.bottomRightContentBox=ye>0||xe>0?getCurvePoints(oe.left+Math.min(ze,oe.width-(tt+Re)),oe.top+Math.min(We,oe.height+Je+st),Math.max(0,ye-(nt+qe)),xe-(et+Se),CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-(nt+qe),oe.top+oe.height-(et+Se)),this.bottomLeftContentBox=$e>0||Ie>0?getCurvePoints(oe.left+tt+Re,oe.top+Xe,Math.max(0,$e-(tt+Re)),Ie-(et+Se),CORNER.BOTTOM_LEFT):new Vector(oe.left+tt+Re,oe.top+oe.height-(et+Se))}return K}(),CORNER;(function(K){K[K.TOP_LEFT=0]="TOP_LEFT",K[K.TOP_RIGHT=1]="TOP_RIGHT",K[K.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",K[K.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(CORNER||(CORNER={}));var getCurvePoints=function(K,J,ne,oe,ce){var ue=4*((Math.sqrt(2)-1)/3),Ae=ne*ue,pe=oe*ue,ve=K+ne,me=J+oe;switch(ce){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(K,me),new Vector(K,me-pe),new Vector(ve-Ae,J),new Vector(ve,J));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(K,J),new Vector(K+Ae,J),new Vector(ve,me-pe),new Vector(ve,me));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(ve,J),new Vector(ve,J+pe),new Vector(K+Ae,me),new Vector(K,me));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(ve,me),new Vector(ve-Ae,me),new Vector(K,J+pe),new Vector(K,J))}},calculateBorderBoxPath=function(K){return[K.topLeftBorderBox,K.topRightBorderBox,K.bottomRightBorderBox,K.bottomLeftBorderBox]},calculateContentBoxPath=function(K){return[K.topLeftContentBox,K.topRightContentBox,K.bottomRightContentBox,K.bottomLeftContentBox]},calculatePaddingBoxPath=function(K){return[K.topLeftPaddingBox,K.topRightPaddingBox,K.bottomRightPaddingBox,K.bottomLeftPaddingBox]},TransformEffect=function(){function K(J,ne,oe){this.offsetX=J,this.offsetY=ne,this.matrix=oe,this.type=0,this.target=6}return K}(),ClipEffect=function(){function K(J,ne){this.path=J,this.target=ne,this.type=1}return K}(),OpacityEffect=function(){function K(J){this.opacity=J,this.type=2,this.target=6}return K}(),isTransformEffect=function(K){return K.type===0},isClipEffect=function(K){return K.type===1},isOpacityEffect=function(K){return K.type===2},equalPath=function(K,J){return K.length===J.length?K.some(function(ne,oe){return ne===J[oe]}):!1},transformPath=function(K,J,ne,oe,ce){return K.map(function(ue,Ae){switch(Ae){case 0:return ue.add(J,ne);case 1:return ue.add(J+oe,ne);case 2:return ue.add(J+oe,ne+ce);case 3:return ue.add(J,ne+ce)}return ue})},StackingContext=function(){function K(J){this.element=J,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return K}(),ElementPaint=function(){function K(J,ne){if(this.container=J,this.parent=ne,this.effects=[],this.curves=new BoundCurves(this.container),this.container.styles.opacity<1&&this.effects.push(new OpacityEffect(this.container.styles.opacity)),this.container.styles.transform!==null){var oe=this.container.bounds.left+this.container.styles.transformOrigin[0].number,ce=this.container.bounds.top+this.container.styles.transformOrigin[1].number,ue=this.container.styles.transform;this.effects.push(new TransformEffect(oe,ce,ue))}if(this.container.styles.overflowX!==0){var Ae=calculateBorderBoxPath(this.curves),pe=calculatePaddingBoxPath(this.curves);equalPath(Ae,pe)?this.effects.push(new ClipEffect(Ae,6)):(this.effects.push(new ClipEffect(Ae,2)),this.effects.push(new ClipEffect(pe,4)))}}return K.prototype.getEffects=function(J){for(var ne=[2,3].indexOf(this.container.styles.position)===-1,oe=this.parent,ce=this.effects.slice(0);oe;){var ue=oe.effects.filter(function(ve){return!isClipEffect(ve)});if(ne||oe.container.styles.position!==0||!oe.parent){if(ce.unshift.apply(ce,ue),ne=[2,3].indexOf(oe.container.styles.position)===-1,oe.container.styles.overflowX!==0){var Ae=calculateBorderBoxPath(oe.curves),pe=calculatePaddingBoxPath(oe.curves);equalPath(Ae,pe)||ce.unshift(new ClipEffect(pe,6))}}else ce.unshift.apply(ce,ue);oe=oe.parent}return ce.filter(function(ve){return contains(ve.target,J)})},K}(),parseStackTree=function(K,J,ne,oe){K.container.elements.forEach(function(ce){var ue=contains(ce.flags,4),Ae=contains(ce.flags,2),pe=new ElementPaint(ce,K);contains(ce.styles.display,2048)&&oe.push(pe);var ve=contains(ce.flags,8)?[]:oe;if(ue||Ae){var me=ue||ce.styles.isPositioned()?ne:J,ge=new StackingContext(pe);if(ce.styles.isPositioned()||ce.styles.opacity<1||ce.styles.isTransformed()){var ye=ce.styles.zIndex.order;if(ye<0){var xe=0;me.negativeZIndex.some(function($e,Ie){return ye>$e.element.container.styles.zIndex.order?(xe=Ie,!1):xe>0}),me.negativeZIndex.splice(xe,0,ge)}else if(ye>0){var _e=0;me.positiveZIndex.some(function($e,Ie){return ye>=$e.element.container.styles.zIndex.order?(_e=Ie+1,!1):_e>0}),me.positiveZIndex.splice(_e,0,ge)}else me.zeroOrAutoZIndexOrTransformedOrOpacity.push(ge)}else ce.styles.isFloating()?me.nonPositionedFloats.push(ge):me.nonPositionedInlineLevel.push(ge);parseStackTree(pe,ge,ue?ge:ne,ve)}else ce.styles.isInlineLevel()?J.inlineLevel.push(pe):J.nonInlineLevel.push(pe),parseStackTree(pe,J,ne,ve);contains(ce.flags,8)&&processListItems(ce,ve)})},processListItems=function(K,J){for(var ne=K instanceof OLElementContainer?K.start:1,oe=K instanceof OLElementContainer?K.reversed:!1,ce=0;ce<J.length;ce++){var ue=J[ce];ue.container instanceof LIElementContainer&&typeof ue.container.value=="number"&&ue.container.value!==0&&(ne=ue.container.value),ue.listValue=createCounterText(ne,ue.container.styles.listStyleType,!0),ne+=oe?-1:1}},parseStackingContexts=function(K){var J=new ElementPaint(K,null),ne=new StackingContext(J),oe=[];return parseStackTree(J,ne,ne,oe),processListItems(J.container,oe),ne},parsePathForBorder=function(K,J){switch(J){case 0:return createPathFromCurves(K.topLeftBorderBox,K.topLeftPaddingBox,K.topRightBorderBox,K.topRightPaddingBox);case 1:return createPathFromCurves(K.topRightBorderBox,K.topRightPaddingBox,K.bottomRightBorderBox,K.bottomRightPaddingBox);case 2:return createPathFromCurves(K.bottomRightBorderBox,K.bottomRightPaddingBox,K.bottomLeftBorderBox,K.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(K.bottomLeftBorderBox,K.bottomLeftPaddingBox,K.topLeftBorderBox,K.topLeftPaddingBox)}},parsePathForBorderDoubleOuter=function(K,J){switch(J){case 0:return createPathFromCurves(K.topLeftBorderBox,K.topLeftBorderDoubleOuterBox,K.topRightBorderBox,K.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(K.topRightBorderBox,K.topRightBorderDoubleOuterBox,K.bottomRightBorderBox,K.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(K.bottomRightBorderBox,K.bottomRightBorderDoubleOuterBox,K.bottomLeftBorderBox,K.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(K.bottomLeftBorderBox,K.bottomLeftBorderDoubleOuterBox,K.topLeftBorderBox,K.topLeftBorderDoubleOuterBox)}},parsePathForBorderDoubleInner=function(K,J){switch(J){case 0:return createPathFromCurves(K.topLeftBorderDoubleInnerBox,K.topLeftPaddingBox,K.topRightBorderDoubleInnerBox,K.topRightPaddingBox);case 1:return createPathFromCurves(K.topRightBorderDoubleInnerBox,K.topRightPaddingBox,K.bottomRightBorderDoubleInnerBox,K.bottomRightPaddingBox);case 2:return createPathFromCurves(K.bottomRightBorderDoubleInnerBox,K.bottomRightPaddingBox,K.bottomLeftBorderDoubleInnerBox,K.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(K.bottomLeftBorderDoubleInnerBox,K.bottomLeftPaddingBox,K.topLeftBorderDoubleInnerBox,K.topLeftPaddingBox)}},parsePathForBorderStroke=function(K,J){switch(J){case 0:return createStrokePathFromCurves(K.topLeftBorderStroke,K.topRightBorderStroke);case 1:return createStrokePathFromCurves(K.topRightBorderStroke,K.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(K.bottomRightBorderStroke,K.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(K.bottomLeftBorderStroke,K.topLeftBorderStroke)}},createStrokePathFromCurves=function(K,J){var ne=[];return isBezierCurve(K)?ne.push(K.subdivide(.5,!1)):ne.push(K),isBezierCurve(J)?ne.push(J.subdivide(.5,!0)):ne.push(J),ne},createPathFromCurves=function(K,J,ne,oe){var ce=[];return isBezierCurve(K)?ce.push(K.subdivide(.5,!1)):ce.push(K),isBezierCurve(ne)?ce.push(ne.subdivide(.5,!0)):ce.push(ne),isBezierCurve(oe)?ce.push(oe.subdivide(.5,!0).reverse()):ce.push(oe),isBezierCurve(J)?ce.push(J.subdivide(.5,!1).reverse()):ce.push(J),ce},paddingBox=function(K){var J=K.bounds,ne=K.styles;return J.add(ne.borderLeftWidth,ne.borderTopWidth,-(ne.borderRightWidth+ne.borderLeftWidth),-(ne.borderTopWidth+ne.borderBottomWidth))},contentBox=function(K){var J=K.styles,ne=K.bounds,oe=getAbsoluteValue(J.paddingLeft,ne.width),ce=getAbsoluteValue(J.paddingRight,ne.width),ue=getAbsoluteValue(J.paddingTop,ne.width),Ae=getAbsoluteValue(J.paddingBottom,ne.width);return ne.add(oe+J.borderLeftWidth,ue+J.borderTopWidth,-(J.borderRightWidth+J.borderLeftWidth+oe+ce),-(J.borderTopWidth+J.borderBottomWidth+ue+Ae))},calculateBackgroundPositioningArea=function(K,J){return K===0?J.bounds:K===2?contentBox(J):paddingBox(J)},calculateBackgroundPaintingArea=function(K,J){return K===0?J.bounds:K===2?contentBox(J):paddingBox(J)},calculateBackgroundRendering=function(K,J,ne){var oe=calculateBackgroundPositioningArea(getBackgroundValueForIndex(K.styles.backgroundOrigin,J),K),ce=calculateBackgroundPaintingArea(getBackgroundValueForIndex(K.styles.backgroundClip,J),K),ue=calculateBackgroundSize(getBackgroundValueForIndex(K.styles.backgroundSize,J),ne,oe),Ae=ue[0],pe=ue[1],ve=getAbsoluteValueForTuple(getBackgroundValueForIndex(K.styles.backgroundPosition,J),oe.width-Ae,oe.height-pe),me=calculateBackgroundRepeatPath(getBackgroundValueForIndex(K.styles.backgroundRepeat,J),ve,ue,oe,ce),ge=Math.round(oe.left+ve[0]),ye=Math.round(oe.top+ve[1]);return[me,ge,ye,Ae,pe]},isAuto=function(K){return isIdentToken(K)&&K.value===BACKGROUND_SIZE.AUTO},hasIntrinsicValue=function(K){return typeof K=="number"},calculateBackgroundSize=function(K,J,ne){var oe=J[0],ce=J[1],ue=J[2],Ae=K[0],pe=K[1];if(!Ae)return[0,0];if(isLengthPercentage(Ae)&&pe&&isLengthPercentage(pe))return[getAbsoluteValue(Ae,ne.width),getAbsoluteValue(pe,ne.height)];var ve=hasIntrinsicValue(ue);if(isIdentToken(Ae)&&(Ae.value===BACKGROUND_SIZE.CONTAIN||Ae.value===BACKGROUND_SIZE.COVER)){if(hasIntrinsicValue(ue)){var me=ne.width/ne.height;return me<ue!=(Ae.value===BACKGROUND_SIZE.COVER)?[ne.width,ne.width/ue]:[ne.height*ue,ne.height]}return[ne.width,ne.height]}var ge=hasIntrinsicValue(oe),ye=hasIntrinsicValue(ce),xe=ge||ye;if(isAuto(Ae)&&(!pe||isAuto(pe))){if(ge&&ye)return[oe,ce];if(!ve&&!xe)return[ne.width,ne.height];if(xe&&ve){var _e=ge?oe:ce*ue,$e=ye?ce:oe/ue;return[_e,$e]}var Ie=ge?oe:ne.width,Fe=ye?ce:ne.height;return[Ie,Fe]}if(ve){var ke=0,je=0;return isLengthPercentage(Ae)?ke=getAbsoluteValue(Ae,ne.width):isLengthPercentage(pe)&&(je=getAbsoluteValue(pe,ne.height)),isAuto(Ae)?ke=je*ue:(!pe||isAuto(pe))&&(je=ke/ue),[ke,je]}var We=null,ze=null;if(isLengthPercentage(Ae)?We=getAbsoluteValue(Ae,ne.width):pe&&isLengthPercentage(pe)&&(ze=getAbsoluteValue(pe,ne.height)),We!==null&&(!pe||isAuto(pe))&&(ze=ge&&ye?We/oe*ce:ne.height),ze!==null&&isAuto(Ae)&&(We=ge&&ye?ze/ce*oe:ne.width),We!==null&&ze!==null)return[We,ze];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(K,J){var ne=K[J];return typeof ne>"u"?K[0]:ne},calculateBackgroundRepeatPath=function(K,J,ne,oe,ce){var ue=J[0],Ae=J[1],pe=ne[0],ve=ne[1];switch(K){case 2:return[new Vector(Math.round(oe.left),Math.round(oe.top+Ae)),new Vector(Math.round(oe.left+oe.width),Math.round(oe.top+Ae)),new Vector(Math.round(oe.left+oe.width),Math.round(ve+oe.top+Ae)),new Vector(Math.round(oe.left),Math.round(ve+oe.top+Ae))];case 3:return[new Vector(Math.round(oe.left+ue),Math.round(oe.top)),new Vector(Math.round(oe.left+ue+pe),Math.round(oe.top)),new Vector(Math.round(oe.left+ue+pe),Math.round(oe.height+oe.top)),new Vector(Math.round(oe.left+ue),Math.round(oe.height+oe.top))];case 1:return[new Vector(Math.round(oe.left+ue),Math.round(oe.top+Ae)),new Vector(Math.round(oe.left+ue+pe),Math.round(oe.top+Ae)),new Vector(Math.round(oe.left+ue+pe),Math.round(oe.top+Ae+ve)),new Vector(Math.round(oe.left+ue),Math.round(oe.top+Ae+ve))];default:return[new Vector(Math.round(ce.left),Math.round(ce.top)),new Vector(Math.round(ce.left+ce.width),Math.round(ce.top)),new Vector(Math.round(ce.left+ce.width),Math.round(ce.height+ce.top)),new Vector(Math.round(ce.left),Math.round(ce.height+ce.top))]}},SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SAMPLE_TEXT="Hidden Text",FontMetrics=function(){function K(J){this._data={},this._document=J}return K.prototype.parseMetrics=function(J,ne){var oe=this._document.createElement("div"),ce=this._document.createElement("img"),ue=this._document.createElement("span"),Ae=this._document.body;oe.style.visibility="hidden",oe.style.fontFamily=J,oe.style.fontSize=ne,oe.style.margin="0",oe.style.padding="0",oe.style.whiteSpace="nowrap",Ae.appendChild(oe),ce.src=SMALL_IMAGE,ce.width=1,ce.height=1,ce.style.margin="0",ce.style.padding="0",ce.style.verticalAlign="baseline",ue.style.fontFamily=J,ue.style.fontSize=ne,ue.style.margin="0",ue.style.padding="0",ue.appendChild(this._document.createTextNode(SAMPLE_TEXT)),oe.appendChild(ue),oe.appendChild(ce);var pe=ce.offsetTop-ue.offsetTop+2;oe.removeChild(ue),oe.appendChild(this._document.createTextNode(SAMPLE_TEXT)),oe.style.lineHeight="normal",ce.style.verticalAlign="super";var ve=ce.offsetTop-oe.offsetTop+2;return Ae.removeChild(oe),{baseline:pe,middle:ve}},K.prototype.getMetrics=function(J,ne){var oe=J+" "+ne;return typeof this._data[oe]>"u"&&(this._data[oe]=this.parseMetrics(J,ne)),this._data[oe]},K}(),Renderer=function(){function K(J,ne){this.context=J,this.options=ne}return K}(),MASK_OFFSET=1e4,CanvasRenderer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce._activeEffects=[],ce.canvas=oe.canvas?oe.canvas:document.createElement("canvas"),ce.ctx=ce.canvas.getContext("2d"),oe.canvas||(ce.canvas.width=Math.floor(oe.width*oe.scale),ce.canvas.height=Math.floor(oe.height*oe.scale),ce.canvas.style.width=oe.width+"px",ce.canvas.style.height=oe.height+"px"),ce.fontMetrics=new FontMetrics(document),ce.ctx.scale(ce.options.scale,ce.options.scale),ce.ctx.translate(-oe.x,-oe.y),ce.ctx.textBaseline="bottom",ce._activeEffects=[],ce.context.logger.debug("Canvas renderer initialized ("+oe.width+"x"+oe.height+") with scale "+oe.scale),ce}return J.prototype.applyEffects=function(ne){for(var oe=this;this._activeEffects.length;)this.popEffect();ne.forEach(function(ce){return oe.applyEffect(ce)})},J.prototype.applyEffect=function(ne){this.ctx.save(),isOpacityEffect(ne)&&(this.ctx.globalAlpha=ne.opacity),isTransformEffect(ne)&&(this.ctx.translate(ne.offsetX,ne.offsetY),this.ctx.transform(ne.matrix[0],ne.matrix[1],ne.matrix[2],ne.matrix[3],ne.matrix[4],ne.matrix[5]),this.ctx.translate(-ne.offsetX,-ne.offsetY)),isClipEffect(ne)&&(this.path(ne.path),this.ctx.clip()),this._activeEffects.push(ne)},J.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},J.prototype.renderStack=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe;return __generator$1(this,function(ce){switch(ce.label){case 0:return oe=ne.element.container.styles,oe.isVisible()?[4,this.renderStackContent(ne)]:[3,2];case 1:ce.sent(),ce.label=2;case 2:return[2]}})})},J.prototype.renderNode=function(ne){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(oe){switch(oe.label){case 0:if(contains(ne.container.flags,16))debugger;return ne.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(ne)]:[3,3];case 1:return oe.sent(),[4,this.renderNodeContent(ne)];case 2:oe.sent(),oe.label=3;case 3:return[2]}})})},J.prototype.renderTextWithLetterSpacing=function(ne,oe,ce){var ue=this;if(oe===0)this.ctx.fillText(ne.text,ne.bounds.left,ne.bounds.top+ce);else{var Ae=segmentGraphemes(ne.text);Ae.reduce(function(pe,ve){return ue.ctx.fillText(ve,pe,ne.bounds.top+ce),pe+ue.ctx.measureText(ve).width},ne.bounds.left)}},J.prototype.createFontStyle=function(ne){var oe=ne.fontVariant.filter(function(Ae){return Ae==="normal"||Ae==="small-caps"}).join(""),ce=fixIOSSystemFonts(ne.fontFamily).join(", "),ue=isDimensionToken(ne.fontSize)?""+ne.fontSize.number+ne.fontSize.unit:ne.fontSize.number+"px";return[[ne.fontStyle,oe,ne.fontWeight,ue,ce].join(" "),ce,ue]},J.prototype.renderTextNode=function(ne,oe){return __awaiter$1(this,void 0,void 0,function(){var ce,ue,Ae,pe,ve,me,ge,ye,xe=this;return __generator$1(this,function(_e){return ce=this.createFontStyle(oe),ue=ce[0],Ae=ce[1],pe=ce[2],this.ctx.font=ue,this.ctx.direction=oe.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",ve=this.fontMetrics.getMetrics(Ae,pe),me=ve.baseline,ge=ve.middle,ye=oe.paintOrder,ne.textBounds.forEach(function($e){ye.forEach(function(Ie){switch(Ie){case 0:xe.ctx.fillStyle=asString(oe.color),xe.renderTextWithLetterSpacing($e,oe.letterSpacing,me);var Fe=oe.textShadow;Fe.length&&$e.text.trim().length&&(Fe.slice(0).reverse().forEach(function(ke){xe.ctx.shadowColor=asString(ke.color),xe.ctx.shadowOffsetX=ke.offsetX.number*xe.options.scale,xe.ctx.shadowOffsetY=ke.offsetY.number*xe.options.scale,xe.ctx.shadowBlur=ke.blur.number,xe.renderTextWithLetterSpacing($e,oe.letterSpacing,me)}),xe.ctx.shadowColor="",xe.ctx.shadowOffsetX=0,xe.ctx.shadowOffsetY=0,xe.ctx.shadowBlur=0),oe.textDecorationLine.length&&(xe.ctx.fillStyle=asString(oe.textDecorationColor||oe.color),oe.textDecorationLine.forEach(function(ke){switch(ke){case 1:xe.ctx.fillRect($e.bounds.left,Math.round($e.bounds.top+me),$e.bounds.width,1);break;case 2:xe.ctx.fillRect($e.bounds.left,Math.round($e.bounds.top),$e.bounds.width,1);break;case 3:xe.ctx.fillRect($e.bounds.left,Math.ceil($e.bounds.top+ge),$e.bounds.width,1);break}}));break;case 1:oe.webkitTextStrokeWidth&&$e.text.trim().length&&(xe.ctx.strokeStyle=asString(oe.webkitTextStrokeColor),xe.ctx.lineWidth=oe.webkitTextStrokeWidth,xe.ctx.lineJoin=window.chrome?"miter":"round",xe.ctx.strokeText($e.text,$e.bounds.left,$e.bounds.top+me)),xe.ctx.strokeStyle="",xe.ctx.lineWidth=0,xe.ctx.lineJoin="miter";break}})}),[2]})})},J.prototype.renderReplacedElement=function(ne,oe,ce){if(ce&&ne.intrinsicWidth>0&&ne.intrinsicHeight>0){var ue=contentBox(ne),Ae=calculatePaddingBoxPath(oe);this.path(Ae),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(ce,0,0,ne.intrinsicWidth,ne.intrinsicHeight,ue.left,ue.top,ue.width,ue.height),this.ctx.restore()}},J.prototype.renderNodeContent=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce,ue,Ae,pe,ve,je,je,me,ge,ye,xe,ze,_e,$e,Xe,Ie,Fe,ke,je,We,ze,Xe;return __generator$1(this,function(Je){switch(Je.label){case 0:this.applyEffects(ne.getEffects(4)),oe=ne.container,ce=ne.curves,ue=oe.styles,Ae=0,pe=oe.textNodes,Je.label=1;case 1:return Ae<pe.length?(ve=pe[Ae],[4,this.renderTextNode(ve,ue)]):[3,4];case 2:Je.sent(),Je.label=3;case 3:return Ae++,[3,1];case 4:if(!(oe instanceof ImageElementContainer))return[3,8];Je.label=5;case 5:return Je.trys.push([5,7,,8]),[4,this.context.cache.match(oe.src)];case 6:return je=Je.sent(),this.renderReplacedElement(oe,ce,je),[3,8];case 7:return Je.sent(),this.context.logger.error("Error loading image "+oe.src),[3,8];case 8:if(oe instanceof CanvasElementContainer&&this.renderReplacedElement(oe,ce,oe.canvas),!(oe instanceof SVGElementContainer))return[3,12];Je.label=9;case 9:return Je.trys.push([9,11,,12]),[4,this.context.cache.match(oe.svg)];case 10:return je=Je.sent(),this.renderReplacedElement(oe,ce,je),[3,12];case 11:return Je.sent(),this.context.logger.error("Error loading svg "+oe.svg.substring(0,255)),[3,12];case 12:return oe instanceof IFrameElementContainer&&oe.tree?(me=new J(this.context,{scale:this.options.scale,backgroundColor:oe.backgroundColor,x:0,y:0,width:oe.width,height:oe.height}),[4,me.render(oe.tree)]):[3,14];case 13:ge=Je.sent(),oe.width&&oe.height&&this.ctx.drawImage(ge,0,0,oe.width,oe.height,oe.bounds.left,oe.bounds.top,oe.bounds.width,oe.bounds.height),Je.label=14;case 14:if(oe instanceof InputElementContainer&&(ye=Math.min(oe.bounds.width,oe.bounds.height),oe.type===CHECKBOX?oe.checked&&(this.ctx.save(),this.path([new Vector(oe.bounds.left+ye*.39363,oe.bounds.top+ye*.79),new Vector(oe.bounds.left+ye*.16,oe.bounds.top+ye*.5549),new Vector(oe.bounds.left+ye*.27347,oe.bounds.top+ye*.44071),new Vector(oe.bounds.left+ye*.39694,oe.bounds.top+ye*.5649),new Vector(oe.bounds.left+ye*.72983,oe.bounds.top+ye*.23),new Vector(oe.bounds.left+ye*.84,oe.bounds.top+ye*.34085),new Vector(oe.bounds.left+ye*.39363,oe.bounds.top+ye*.79)]),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore()):oe.type===RADIO&&oe.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(oe.bounds.left+ye/2,oe.bounds.top+ye/2,ye/4,0,Math.PI*2,!0),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore())),isTextInputElement(oe)&&oe.value.length){switch(xe=this.createFontStyle(ue),ze=xe[0],_e=xe[1],$e=this.fontMetrics.getMetrics(ze,_e).baseline,this.ctx.font=ze,this.ctx.fillStyle=asString(ue.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=canvasTextAlign(oe.styles.textAlign),Xe=contentBox(oe),Ie=0,oe.styles.textAlign){case 1:Ie+=Xe.width/2;break;case 2:Ie+=Xe.width;break}Fe=Xe.add(Ie,0,0,-Xe.height/2+1),this.ctx.save(),this.path([new Vector(Xe.left,Xe.top),new Vector(Xe.left+Xe.width,Xe.top),new Vector(Xe.left+Xe.width,Xe.top+Xe.height),new Vector(Xe.left,Xe.top+Xe.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(oe.value,Fe),ue.letterSpacing,$e),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!contains(oe.styles.display,2048))return[3,20];if(oe.styles.listStyleImage===null)return[3,19];if(ke=oe.styles.listStyleImage,ke.type!==0)return[3,18];je=void 0,We=ke.url,Je.label=15;case 15:return Je.trys.push([15,17,,18]),[4,this.context.cache.match(We)];case 16:return je=Je.sent(),this.ctx.drawImage(je,oe.bounds.left-(je.width+10),oe.bounds.top),[3,18];case 17:return Je.sent(),this.context.logger.error("Error loading list-style-image "+We),[3,18];case 18:return[3,20];case 19:ne.listValue&&oe.styles.listStyleType!==-1&&(ze=this.createFontStyle(ue)[0],this.ctx.font=ze,this.ctx.fillStyle=asString(ue.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Xe=new Bounds(oe.bounds.left,oe.bounds.top+getAbsoluteValue(oe.styles.paddingTop,oe.bounds.width),oe.bounds.width,computeLineHeight(ue.lineHeight,ue.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new TextBounds(ne.listValue,Xe),ue.letterSpacing,computeLineHeight(ue.lineHeight,ue.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Je.label=20;case 20:return[2]}})})},J.prototype.renderStackContent=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce,ke,ue,Ae,ke,pe,ve,ke,me,ge,ke,ye,xe,ke,_e,$e,ke,Ie,Fe,ke;return __generator$1(this,function(je){switch(je.label){case 0:if(contains(ne.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(ne.element)];case 1:je.sent(),oe=0,ce=ne.negativeZIndex,je.label=2;case 2:return oe<ce.length?(ke=ce[oe],[4,this.renderStack(ke)]):[3,5];case 3:je.sent(),je.label=4;case 4:return oe++,[3,2];case 5:return[4,this.renderNodeContent(ne.element)];case 6:je.sent(),ue=0,Ae=ne.nonInlineLevel,je.label=7;case 7:return ue<Ae.length?(ke=Ae[ue],[4,this.renderNode(ke)]):[3,10];case 8:je.sent(),je.label=9;case 9:return ue++,[3,7];case 10:pe=0,ve=ne.nonPositionedFloats,je.label=11;case 11:return pe<ve.length?(ke=ve[pe],[4,this.renderStack(ke)]):[3,14];case 12:je.sent(),je.label=13;case 13:return pe++,[3,11];case 14:me=0,ge=ne.nonPositionedInlineLevel,je.label=15;case 15:return me<ge.length?(ke=ge[me],[4,this.renderStack(ke)]):[3,18];case 16:je.sent(),je.label=17;case 17:return me++,[3,15];case 18:ye=0,xe=ne.inlineLevel,je.label=19;case 19:return ye<xe.length?(ke=xe[ye],[4,this.renderNode(ke)]):[3,22];case 20:je.sent(),je.label=21;case 21:return ye++,[3,19];case 22:_e=0,$e=ne.zeroOrAutoZIndexOrTransformedOrOpacity,je.label=23;case 23:return _e<$e.length?(ke=$e[_e],[4,this.renderStack(ke)]):[3,26];case 24:je.sent(),je.label=25;case 25:return _e++,[3,23];case 26:Ie=0,Fe=ne.positiveZIndex,je.label=27;case 27:return Ie<Fe.length?(ke=Fe[Ie],[4,this.renderStack(ke)]):[3,30];case 28:je.sent(),je.label=29;case 29:return Ie++,[3,27];case 30:return[2]}})})},J.prototype.mask=function(ne){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(ne.slice(0).reverse()),this.ctx.closePath()},J.prototype.path=function(ne){this.ctx.beginPath(),this.formatPath(ne),this.ctx.closePath()},J.prototype.formatPath=function(ne){var oe=this;ne.forEach(function(ce,ue){var Ae=isBezierCurve(ce)?ce.start:ce;ue===0?oe.ctx.moveTo(Ae.x,Ae.y):oe.ctx.lineTo(Ae.x,Ae.y),isBezierCurve(ce)&&oe.ctx.bezierCurveTo(ce.startControl.x,ce.startControl.y,ce.endControl.x,ce.endControl.y,ce.end.x,ce.end.y)})},J.prototype.renderRepeat=function(ne,oe,ce,ue){this.path(ne),this.ctx.fillStyle=oe,this.ctx.translate(ce,ue),this.ctx.fill(),this.ctx.translate(-ce,-ue)},J.prototype.resizeImage=function(ne,oe,ce){var ue;if(ne.width===oe&&ne.height===ce)return ne;var Ae=(ue=this.canvas.ownerDocument)!==null&&ue!==void 0?ue:document,pe=Ae.createElement("canvas");pe.width=Math.max(1,oe),pe.height=Math.max(1,ce);var ve=pe.getContext("2d");return ve.drawImage(ne,0,0,ne.width,ne.height,0,0,oe,ce),pe},J.prototype.renderBackgroundImage=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce,ue,Ae,pe,ve;return __generator$1(this,function(me){switch(me.label){case 0:oe=ne.styles.backgroundImage.length-1,ce=function(ge){var ye,xe,_e,st,Ue,Ge,Re,Be,et,$e,st,Ue,Ge,Re,Be,Ie,Fe,ke,je,We,ze,Xe,Je,nt,et,tt,st,qe,Se,Re,Be,Ne,Ue,Ge,Ye,Qe,Te,Ke,rt,it,at,lt;return __generator$1(this,function(ct){switch(ct.label){case 0:if(ge.type!==0)return[3,5];ye=void 0,xe=ge.url,ct.label=1;case 1:return ct.trys.push([1,3,,4]),[4,ue.context.cache.match(xe)];case 2:return ye=ct.sent(),[3,4];case 3:return ct.sent(),ue.context.logger.error("Error loading background-image "+xe),[3,4];case 4:return ye&&(_e=calculateBackgroundRendering(ne,oe,[ye.width,ye.height,ye.width/ye.height]),st=_e[0],Ue=_e[1],Ge=_e[2],Re=_e[3],Be=_e[4],et=ue.ctx.createPattern(ue.resizeImage(ye,Re,Be),"repeat"),ue.renderRepeat(st,et,Ue,Ge)),[3,6];case 5:isLinearGradient(ge)?($e=calculateBackgroundRendering(ne,oe,[null,null,null]),st=$e[0],Ue=$e[1],Ge=$e[2],Re=$e[3],Be=$e[4],Ie=calculateGradientDirection(ge.angle,Re,Be),Fe=Ie[0],ke=Ie[1],je=Ie[2],We=Ie[3],ze=Ie[4],Xe=document.createElement("canvas"),Xe.width=Re,Xe.height=Be,Je=Xe.getContext("2d"),nt=Je.createLinearGradient(ke,We,je,ze),processColorStops(ge.stops,Fe).forEach(function(ot){return nt.addColorStop(ot.stop,asString(ot.color))}),Je.fillStyle=nt,Je.fillRect(0,0,Re,Be),Re>0&&Be>0&&(et=ue.ctx.createPattern(Xe,"repeat"),ue.renderRepeat(st,et,Ue,Ge))):isRadialGradient(ge)&&(tt=calculateBackgroundRendering(ne,oe,[null,null,null]),st=tt[0],qe=tt[1],Se=tt[2],Re=tt[3],Be=tt[4],Ne=ge.position.length===0?[FIFTY_PERCENT]:ge.position,Ue=getAbsoluteValue(Ne[0],Re),Ge=getAbsoluteValue(Ne[Ne.length-1],Be),Ye=calculateRadius(ge,Ue,Ge,Re,Be),Qe=Ye[0],Te=Ye[1],Qe>0&&Te>0&&(Ke=ue.ctx.createRadialGradient(qe+Ue,Se+Ge,0,qe+Ue,Se+Ge,Qe),processColorStops(ge.stops,Qe*2).forEach(function(ot){return Ke.addColorStop(ot.stop,asString(ot.color))}),ue.path(st),ue.ctx.fillStyle=Ke,Qe!==Te?(rt=ne.bounds.left+.5*ne.bounds.width,it=ne.bounds.top+.5*ne.bounds.height,at=Te/Qe,lt=1/at,ue.ctx.save(),ue.ctx.translate(rt,it),ue.ctx.transform(1,0,0,at,0,0),ue.ctx.translate(-rt,-it),ue.ctx.fillRect(qe,lt*(Se-it)+it,Re,Be*lt),ue.ctx.restore()):ue.ctx.fill())),ct.label=6;case 6:return oe--,[2]}})},ue=this,Ae=0,pe=ne.styles.backgroundImage.slice(0).reverse(),me.label=1;case 1:return Ae<pe.length?(ve=pe[Ae],[5,ce(ve)]):[3,4];case 2:me.sent(),me.label=3;case 3:return Ae++,[3,1];case 4:return[2]}})})},J.prototype.renderSolidBorder=function(ne,oe,ce){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(ue){return this.path(parsePathForBorder(ce,oe)),this.ctx.fillStyle=asString(ne),this.ctx.fill(),[2]})})},J.prototype.renderDoubleBorder=function(ne,oe,ce,ue){return __awaiter$1(this,void 0,void 0,function(){var Ae,pe;return __generator$1(this,function(ve){switch(ve.label){case 0:return oe<3?[4,this.renderSolidBorder(ne,ce,ue)]:[3,2];case 1:return ve.sent(),[2];case 2:return Ae=parsePathForBorderDoubleOuter(ue,ce),this.path(Ae),this.ctx.fillStyle=asString(ne),this.ctx.fill(),pe=parsePathForBorderDoubleInner(ue,ce),this.path(pe),this.ctx.fill(),[2]}})})},J.prototype.renderNodeBackgroundAndBorders=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce,ue,Ae,pe,ve,me,ge,ye=this;return __generator$1(this,function(xe){switch(xe.label){case 0:return this.applyEffects(ne.getEffects(2)),oe=ne.container.styles,ce=!isTransparent(oe.backgroundColor)||oe.backgroundImage.length,ue=[{style:oe.borderTopStyle,color:oe.borderTopColor,width:oe.borderTopWidth},{style:oe.borderRightStyle,color:oe.borderRightColor,width:oe.borderRightWidth},{style:oe.borderBottomStyle,color:oe.borderBottomColor,width:oe.borderBottomWidth},{style:oe.borderLeftStyle,color:oe.borderLeftColor,width:oe.borderLeftWidth}],Ae=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(oe.backgroundClip,0),ne.curves),ce||oe.boxShadow.length?(this.ctx.save(),this.path(Ae),this.ctx.clip(),isTransparent(oe.backgroundColor)||(this.ctx.fillStyle=asString(oe.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(ne.container)]):[3,2];case 1:xe.sent(),this.ctx.restore(),oe.boxShadow.slice(0).reverse().forEach(function(_e){ye.ctx.save();var $e=calculateBorderBoxPath(ne.curves),Ie=_e.inset?0:MASK_OFFSET,Fe=transformPath($e,-Ie+(_e.inset?1:-1)*_e.spread.number,(_e.inset?1:-1)*_e.spread.number,_e.spread.number*(_e.inset?-2:2),_e.spread.number*(_e.inset?-2:2));_e.inset?(ye.path($e),ye.ctx.clip(),ye.mask(Fe)):(ye.mask($e),ye.ctx.clip(),ye.path(Fe)),ye.ctx.shadowOffsetX=_e.offsetX.number+Ie,ye.ctx.shadowOffsetY=_e.offsetY.number,ye.ctx.shadowColor=asString(_e.color),ye.ctx.shadowBlur=_e.blur.number,ye.ctx.fillStyle=_e.inset?asString(_e.color):"rgba(0,0,0,1)",ye.ctx.fill(),ye.ctx.restore()}),xe.label=2;case 2:pe=0,ve=0,me=ue,xe.label=3;case 3:return ve<me.length?(ge=me[ve],ge.style!==0&&!isTransparent(ge.color)&&ge.width>0?ge.style!==2?[3,5]:[4,this.renderDashedDottedBorder(ge.color,ge.width,pe,ne.curves,2)]:[3,11]):[3,13];case 4:return xe.sent(),[3,11];case 5:return ge.style!==3?[3,7]:[4,this.renderDashedDottedBorder(ge.color,ge.width,pe,ne.curves,3)];case 6:return xe.sent(),[3,11];case 7:return ge.style!==4?[3,9]:[4,this.renderDoubleBorder(ge.color,ge.width,pe,ne.curves)];case 8:return xe.sent(),[3,11];case 9:return[4,this.renderSolidBorder(ge.color,pe,ne.curves)];case 10:xe.sent(),xe.label=11;case 11:pe++,xe.label=12;case 12:return ve++,[3,3];case 13:return[2]}})})},J.prototype.renderDashedDottedBorder=function(ne,oe,ce,ue,Ae){return __awaiter$1(this,void 0,void 0,function(){var pe,ve,me,ge,ye,xe,_e,$e,Ie,Fe,ke,je,We,ze,Xe,Je,Xe,Je;return __generator$1(this,function(nt){return this.ctx.save(),pe=parsePathForBorderStroke(ue,ce),ve=parsePathForBorder(ue,ce),Ae===2&&(this.path(ve),this.ctx.clip()),isBezierCurve(ve[0])?(me=ve[0].start.x,ge=ve[0].start.y):(me=ve[0].x,ge=ve[0].y),isBezierCurve(ve[1])?(ye=ve[1].end.x,xe=ve[1].end.y):(ye=ve[1].x,xe=ve[1].y),ce===0||ce===2?_e=Math.abs(me-ye):_e=Math.abs(ge-xe),this.ctx.beginPath(),Ae===3?this.formatPath(pe):this.formatPath(ve.slice(0,2)),$e=oe<3?oe*3:oe*2,Ie=oe<3?oe*2:oe,Ae===3&&($e=oe,Ie=oe),Fe=!0,_e<=$e*2?Fe=!1:_e<=$e*2+Ie?(ke=_e/(2*$e+Ie),$e*=ke,Ie*=ke):(je=Math.floor((_e+Ie)/($e+Ie)),We=(_e-je*$e)/(je-1),ze=(_e-(je+1)*$e)/je,Ie=ze<=0||Math.abs(Ie-We)<Math.abs(Ie-ze)?We:ze),Fe&&(Ae===3?this.ctx.setLineDash([0,$e+Ie]):this.ctx.setLineDash([$e,Ie])),Ae===3?(this.ctx.lineCap="round",this.ctx.lineWidth=oe):this.ctx.lineWidth=oe*2+1.1,this.ctx.strokeStyle=asString(ne),this.ctx.stroke(),this.ctx.setLineDash([]),Ae===2&&(isBezierCurve(ve[0])&&(Xe=ve[3],Je=ve[0],this.ctx.beginPath(),this.formatPath([new Vector(Xe.end.x,Xe.end.y),new Vector(Je.start.x,Je.start.y)]),this.ctx.stroke()),isBezierCurve(ve[1])&&(Xe=ve[1],Je=ve[2],this.ctx.beginPath(),this.formatPath([new Vector(Xe.end.x,Xe.end.y),new Vector(Je.start.x,Je.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},J.prototype.render=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe;return __generator$1(this,function(ce){switch(ce.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),oe=parseStackingContexts(ne),[4,this.renderStack(oe)];case 1:return ce.sent(),this.applyEffects([]),[2,this.canvas]}})})},J}(Renderer),isTextInputElement=function(K){return K instanceof TextareaElementContainer||K instanceof SelectElementContainer?!0:K instanceof InputElementContainer&&K.type!==RADIO&&K.type!==CHECKBOX},calculateBackgroundCurvedPaintingArea=function(K,J){switch(K){case 0:return calculateBorderBoxPath(J);case 2:return calculateContentBoxPath(J);case 1:default:return calculatePaddingBoxPath(J)}},canvasTextAlign=function(K){switch(K){case 1:return"center";case 2:return"right";case 0:default:return"left"}},iOSBrokenFonts=["-apple-system","system-ui"],fixIOSSystemFonts=function(K){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?K.filter(function(J){return iOSBrokenFonts.indexOf(J)===-1}):K},ForeignObjectRenderer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.canvas=oe.canvas?oe.canvas:document.createElement("canvas"),ce.ctx=ce.canvas.getContext("2d"),ce.options=oe,ce.canvas.width=Math.floor(oe.width*oe.scale),ce.canvas.height=Math.floor(oe.height*oe.scale),ce.canvas.style.width=oe.width+"px",ce.canvas.style.height=oe.height+"px",ce.ctx.scale(ce.options.scale,ce.options.scale),ce.ctx.translate(-oe.x,-oe.y),ce.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+oe.width+"x"+oe.height+" at "+oe.x+","+oe.y+") with scale "+oe.scale),ce}return J.prototype.render=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce;return __generator$1(this,function(ue){switch(ue.label){case 0:return oe=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,ne),[4,loadSerializedSVG(oe)];case 1:return ce=ue.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(ce,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},J}(Renderer),loadSerializedSVG=function(K){return new Promise(function(J,ne){var oe=new Image;oe.onload=function(){J(oe)},oe.onerror=ne,oe.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(K))})},Logger=function(){function K(J){var ne=J.id,oe=J.enabled;this.id=ne,this.enabled=oe,this.start=Date.now()}return K.prototype.debug=function(){for(var J=[],ne=0;ne<arguments.length;ne++)J[ne]=arguments[ne];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,__spreadArray$1([this.id,this.getTime()+"ms"],J)):this.info.apply(this,J))},K.prototype.getTime=function(){return Date.now()-this.start},K.prototype.info=function(){for(var J=[],ne=0;ne<arguments.length;ne++)J[ne]=arguments[ne];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,__spreadArray$1([this.id,this.getTime()+"ms"],J))},K.prototype.warn=function(){for(var J=[],ne=0;ne<arguments.length;ne++)J[ne]=arguments[ne];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,__spreadArray$1([this.id,this.getTime()+"ms"],J)):this.info.apply(this,J))},K.prototype.error=function(){for(var J=[],ne=0;ne<arguments.length;ne++)J[ne]=arguments[ne];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,__spreadArray$1([this.id,this.getTime()+"ms"],J)):this.info.apply(this,J))},K.instances={},K}(),Context=function(){function K(J,ne){var oe;this.windowBounds=ne,this.instanceName="#"+K.instanceCount++,this.logger=new Logger({id:this.instanceName,enabled:J.logging}),this.cache=(oe=J.cache)!==null&&oe!==void 0?oe:new Cache(this,J)}return K.instanceCount=1,K}(),html2canvas=function(K,J){return J===void 0&&(J={}),renderElement(K,J)};typeof window<"u"&&CacheStorage.setContext(window);var renderElement=function(K,J){return __awaiter$1(void 0,void 0,void 0,function(){var ne,oe,ce,ue,Ae,pe,ve,me,ge,ye,xe,_e,$e,Ie,Fe,ke,je,We,ze,Xe,nt,Je,nt,et,tt,st,qe,Se,Re,Be,Ne,Ue,Ge,Ye,Qe,Te,Ke,rt,it,at;return __generator$1(this,function(lt){switch(lt.label){case 0:if(!K||typeof K!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(ne=K.ownerDocument,!ne)throw new Error("Element is not attached to a Document");if(oe=ne.defaultView,!oe)throw new Error("Document is not attached to a Window");return ce={allowTaint:(et=J.allowTaint)!==null&&et!==void 0?et:!1,imageTimeout:(tt=J.imageTimeout)!==null&&tt!==void 0?tt:15e3,proxy:J.proxy,useCORS:(st=J.useCORS)!==null&&st!==void 0?st:!1},ue=__assign$1({logging:(qe=J.logging)!==null&&qe!==void 0?qe:!0,cache:J.cache},ce),Ae={windowWidth:(Se=J.windowWidth)!==null&&Se!==void 0?Se:oe.innerWidth,windowHeight:(Re=J.windowHeight)!==null&&Re!==void 0?Re:oe.innerHeight,scrollX:(Be=J.scrollX)!==null&&Be!==void 0?Be:oe.pageXOffset,scrollY:(Ne=J.scrollY)!==null&&Ne!==void 0?Ne:oe.pageYOffset},pe=new Bounds(Ae.scrollX,Ae.scrollY,Ae.windowWidth,Ae.windowHeight),ve=new Context(ue,pe),me=(Ue=J.foreignObjectRendering)!==null&&Ue!==void 0?Ue:!1,ge={allowTaint:(Ge=J.allowTaint)!==null&&Ge!==void 0?Ge:!1,onclone:J.onclone,ignoreElements:J.ignoreElements,inlineImages:me,copyStyles:me},ve.logger.debug("Starting document clone with size "+pe.width+"x"+pe.height+" scrolled to "+-pe.left+","+-pe.top),ye=new DocumentCloner(ve,K,ge),xe=ye.clonedReferenceElement,xe?[4,ye.toIFrame(ne,pe)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return _e=lt.sent(),$e=isBodyElement(xe)||isHTMLElement(xe)?parseDocumentSize(xe.ownerDocument):parseBounds(ve,xe),Ie=$e.width,Fe=$e.height,ke=$e.left,je=$e.top,We=parseBackgroundColor(ve,xe,J.backgroundColor),ze={canvas:J.canvas,backgroundColor:We,scale:(Qe=(Ye=J.scale)!==null&&Ye!==void 0?Ye:oe.devicePixelRatio)!==null&&Qe!==void 0?Qe:1,x:((Te=J.x)!==null&&Te!==void 0?Te:0)+ke,y:((Ke=J.y)!==null&&Ke!==void 0?Ke:0)+je,width:(rt=J.width)!==null&&rt!==void 0?rt:Math.ceil(Ie),height:(it=J.height)!==null&&it!==void 0?it:Math.ceil(Fe)},me?(ve.logger.debug("Document cloned, using foreign object rendering"),nt=new ForeignObjectRenderer(ve,ze),[4,nt.render(xe)]):[3,3];case 2:return Xe=lt.sent(),[3,5];case 3:return ve.logger.debug("Document cloned, element located at "+ke+","+je+" with size "+Ie+"x"+Fe+" using computed rendering"),ve.logger.debug("Starting DOM parsing"),Je=parseTree(ve,xe),We===Je.styles.backgroundColor&&(Je.styles.backgroundColor=COLORS.TRANSPARENT),ve.logger.debug("Starting renderer for element at "+ze.x+","+ze.y+" with size "+ze.width+"x"+ze.height),nt=new CanvasRenderer(ve,ze),[4,nt.render(Je)];case 4:Xe=lt.sent(),lt.label=5;case 5:return(!((at=J.removeContainer)!==null&&at!==void 0)||at)&&(DocumentCloner.destroy(_e)||ve.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),ve.logger.debug("Finished rendering"),[2,Xe]}})})},parseBackgroundColor=function(K,J,ne){var oe=J.ownerDocument,ce=oe.documentElement?parseColor(K,getComputedStyle(oe.documentElement).backgroundColor):COLORS.TRANSPARENT,ue=oe.body?parseColor(K,getComputedStyle(oe.body).backgroundColor):COLORS.TRANSPARENT,Ae=typeof ne=="string"?parseColor(K,ne):ne===null?COLORS.TRANSPARENT:4294967295;return J===oe.documentElement?isTransparent(ce)?isTransparent(ue)?Ae:ue:ce:Ae};const title$1="_title_d9wt9_1",styles$h={title:title$1},InputTitle=({title:K})=>jsxRuntimeExports.jsx("div",{className:styles$h.title,children:K}),getIsValidEmail=K=>/^[a-z0-9][-a-z0-9._]+@([-a-z0-9]+\.)+[a-z]{2,5}$/.test(K),container$8="_container_q85y8_1",fieldContainer="_fieldContainer_q85y8_8",focusedContainer="_focusedContainer_q85y8_20",invalidField="_invalidField_q85y8_24",fieldTag="_fieldTag_q85y8_28",invalidTag="_invalidTag_q85y8_46",fieldBlock="_fieldBlock_q85y8_51",errorMessage="_errorMessage_q85y8_57",styles$g={container:container$8,fieldContainer,focusedContainer,invalidField,fieldTag,invalidTag,fieldBlock,errorMessage},ToField=({emailTags:K=[],setEmailTags:J})=>{const{t:ne}=useTranslation(),[oe,ce]=reactExports.useState(""),[ue,Ae]=reactExports.useState(""),[pe,ve]=reactExports.useState(!1),[me,ge]=reactExports.useState(!0);reactExports.useEffect(()=>{const je=K.find(We=>!getIsValidEmail(We));ge(!je)},[K]);const ye=je=>{Ae(je.currentTarget.textContent)},xe=je=>{const We=K.filter((ze,Xe)=>Xe!==je);J(We)},_e=(je,We)=>{ce(""),ue&&(K[We]=je,J(K),Ae(""))},$e=()=>{ce(""),ve(!1),oe&&J([...K,oe])},Ie=je=>{(je.code==="Space"||je.code==="Enter")&&$e()},Fe=!me||!K.length,ke=()=>{switch(!0){case!me:return ne("validationMessage.invalidEmail");case!K.length:return ne("validationMessage.emptyTagsArray");default:return""}};return jsxRuntimeExports.jsxs("div",{className:styles$g.container,children:[jsxRuntimeExports.jsxs("div",{className:cx(styles$g.fieldContainer,{[styles$g.focusedContainer]:pe,[styles$g.invalidField]:!me||!K.length}),children:[K.map((je,We)=>je.length?jsxRuntimeExports.jsxs("div",{contentEditable:"true",suppressContentEditableWarning:!0,className:cx(styles$g.fieldTag,{[styles$g.invalidTag]:!getIsValidEmail(je)}),onBlur:()=>_e(je,We),onInput:ye,children:[jsxRuntimeExports.jsx("div",{children:je}),jsxRuntimeExports.jsx(_c,{size:"XS",onClick:()=>xe(We)})]},We):null),jsxRuntimeExports.jsx(Ml,{variant:"borderless",className:styles$g.fieldBlock,value:oe,onChange:je=>ce(je.trimStart()),onKeyDown:Ie,onBlur:$e,onFocus:()=>ve(!0)})]}),Fe&&jsxRuntimeExports.jsx("div",{className:styles$g.errorMessage,children:ke()})]})};function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$2(K,J){return K===J||K!==K&&J!==J}var eq_1=eq$2,eq$1=eq_1;function assocIndexOf$4(K,J){for(var ne=K.length;ne--;)if(eq$1(K[ne][0],J))return ne;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(K){var J=this.__data__,ne=assocIndexOf$3(J,K);if(ne<0)return!1;var oe=J.length-1;return ne==oe?J.pop():splice.call(J,ne,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(K){var J=this.__data__,ne=assocIndexOf$2(J,K);return ne<0?void 0:J[ne][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(K){return assocIndexOf$1(this.__data__,K)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(K,J){var ne=this.__data__,oe=assocIndexOf(ne,K);return oe<0?(++this.size,ne.push([K,J])):ne[oe][1]=J,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(K){var J=-1,ne=K==null?0:K.length;for(this.clear();++J<ne;){var oe=K[J];this.set(oe[0],oe[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(K){var J=this.__data__,ne=J.delete(K);return this.size=J.size,ne}var _stackDelete=stackDelete$1;function stackGet$1(K){return this.__data__.get(K)}var _stackGet=stackGet$1;function stackHas$1(K){return this.__data__.has(K)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$4=root$8.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(K){var J=hasOwnProperty$8.call(K,symToStringTag$1),ne=K[symToStringTag$1];try{K[symToStringTag$1]=void 0;var oe=!0}catch{}var ce=nativeObjectToString$1.call(K);return oe&&(J?K[symToStringTag$1]=ne:delete K[symToStringTag$1]),ce}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(K){return nativeObjectToString.call(K)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$4(K){return K==null?K===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(K)?getRawTag(K):objectToString(K)}var _baseGetTag=baseGetTag$4;function isObject$3(K){var J=typeof K;return K!=null&&(J=="object"||J=="function")}var isObject_1=isObject$3,baseGetTag$3=_baseGetTag,isObject$2=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(K){if(!isObject$2(K))return!1;var J=baseGetTag$3(K);return J==funcTag$1||J==genTag||J==asyncTag||J==proxyTag}var isFunction_1=isFunction$2,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var K=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return K?"Symbol(src)_1."+K:""}();function isMasked$1(K){return!!maskSrcKey&&maskSrcKey in K}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(K){if(K!=null){try{return funcToString$1.call(K)}catch{}try{return K+""}catch{}}return""}var _toSource=toSource$2,isFunction$1=isFunction_1,isMasked=_isMasked,isObject$1=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(K){if(!isObject$1(K)||isMasked(K))return!1;var J=isFunction$1(K)?reIsNative:reIsHostCtor;return J.test(toSource$1(K))}var _baseIsNative=baseIsNative$1;function getValue$1(K,J){return K==null?void 0:K[J]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(K,J){var ne=getValue(K,J);return baseIsNative(ne)?ne:void 0}var _getNative=getNative$6,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,getNative$4=_getNative,nativeCreate$4=getNative$4(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(K){var J=this.has(K)&&delete this.__data__[K];return this.size-=J?1:0,J}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashGet$1(K){var J=this.__data__;if(nativeCreate$2){var ne=J[K];return ne===HASH_UNDEFINED$2?void 0:ne}return hasOwnProperty$6.call(J,K)?J[K]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashHas$1(K){var J=this.__data__;return nativeCreate$1?J[K]!==void 0:hasOwnProperty$5.call(J,K)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(K,J){var ne=this.__data__;return this.size+=this.has(K)?0:1,ne[K]=nativeCreate&&J===void 0?HASH_UNDEFINED$1:J,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(K){var J=-1,ne=K==null?0:K.length;for(this.clear();++J<ne;){var oe=K[J];this.set(oe[0],oe[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(K){var J=typeof K;return J=="string"||J=="number"||J=="symbol"||J=="boolean"?K!=="__proto__":K===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(K,J){var ne=K.__data__;return isKeyable(J)?ne[typeof J=="string"?"string":"hash"]:ne.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(K){var J=getMapData$3(this,K).delete(K);return this.size-=J?1:0,J}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(K){return getMapData$2(this,K).get(K)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(K){return getMapData$1(this,K).has(K)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(K,J){var ne=getMapData(this,K),oe=ne.size;return ne.set(K,J),this.size+=ne.size==oe?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$2(K){var J=-1,ne=K==null?0:K.length;for(this.clear();++J<ne;){var oe=K[J];this.set(oe[0],oe[1])}}MapCache$2.prototype.clear=mapCacheClear;MapCache$2.prototype.delete=mapCacheDelete;MapCache$2.prototype.get=mapCacheGet;MapCache$2.prototype.has=mapCacheHas;MapCache$2.prototype.set=mapCacheSet;var _MapCache=MapCache$2,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(K,J){var ne=this.__data__;if(ne instanceof ListCache$1){var oe=ne.__data__;if(!Map$2||oe.length<LARGE_ARRAY_SIZE-1)return oe.push([K,J]),this.size=++ne.size,this;ne=this.__data__=new MapCache$1(oe)}return ne.set(K,J),this.size=ne.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(K){var J=this.__data__=new ListCache(K);this.size=J.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;var _Stack=Stack$1,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(K){return this.__data__.set(K,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(K){return this.__data__.has(K)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(K){var J=-1,ne=K==null?0:K.length;for(this.__data__=new MapCache;++J<ne;)this.add(K[J])}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(K,J){for(var ne=-1,oe=K==null?0:K.length;++ne<oe;)if(J(K[ne],ne,K))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$1(K,J){return K.has(J)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(K,J,ne,oe,ce,ue){var Ae=ne&COMPARE_PARTIAL_FLAG$3,pe=K.length,ve=J.length;if(pe!=ve&&!(Ae&&ve>pe))return!1;var me=ue.get(K),ge=ue.get(J);if(me&&ge)return me==J&&ge==K;var ye=-1,xe=!0,_e=ne&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(ue.set(K,J),ue.set(J,K);++ye<pe;){var $e=K[ye],Ie=J[ye];if(oe)var Fe=Ae?oe(Ie,$e,ye,J,K,ue):oe($e,Ie,ye,K,J,ue);if(Fe!==void 0){if(Fe)continue;xe=!1;break}if(_e){if(!arraySome(J,function(ke,je){if(!cacheHas(_e,je)&&($e===ke||ce($e,ke,ne,oe,ue)))return _e.push(je)})){xe=!1;break}}else if(!($e===Ie||ce($e,Ie,ne,oe,ue))){xe=!1;break}}return ue.delete(K),ue.delete(J),xe}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(K){var J=-1,ne=Array(K.size);return K.forEach(function(oe,ce){ne[++J]=[ce,oe]}),ne}var _mapToArray=mapToArray$1;function setToArray$1(K){var J=-1,ne=Array(K.size);return K.forEach(function(oe){ne[++J]=oe}),ne}var _setToArray=setToArray$1,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(K,J,ne,oe,ce,ue,Ae){switch(ne){case dataViewTag$2:if(K.byteLength!=J.byteLength||K.byteOffset!=J.byteOffset)return!1;K=K.buffer,J=J.buffer;case arrayBufferTag$1:return!(K.byteLength!=J.byteLength||!ue(new Uint8Array$1(K),new Uint8Array$1(J)));case boolTag$1:case dateTag$1:case numberTag$1:return eq(+K,+J);case errorTag$1:return K.name==J.name&&K.message==J.message;case regexpTag$1:case stringTag$1:return K==J+"";case mapTag$2:var pe=mapToArray;case setTag$2:var ve=oe&COMPARE_PARTIAL_FLAG$2;if(pe||(pe=setToArray),K.size!=J.size&&!ve)return!1;var me=Ae.get(K);if(me)return me==J;oe|=COMPARE_UNORDERED_FLAG,Ae.set(K,J);var ge=equalArrays$1(pe(K),pe(J),oe,ce,ue,Ae);return Ae.delete(K),ge;case symbolTag:if(symbolValueOf)return symbolValueOf.call(K)==symbolValueOf.call(J)}return!1}var _equalByTag=equalByTag$1;function arrayPush$1(K,J){for(var ne=-1,oe=J.length,ce=K.length;++ne<oe;)K[ce+ne]=J[ne];return K}var _arrayPush=arrayPush$1,isArray$3=Array.isArray,isArray_1=isArray$3,arrayPush=_arrayPush,isArray$2=isArray_1;function baseGetAllKeys$1(K,J,ne){var oe=J(K);return isArray$2(K)?oe:arrayPush(oe,ne(K))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(K,J){for(var ne=-1,oe=K==null?0:K.length,ce=0,ue=[];++ne<oe;){var Ae=K[ne];J(Ae,ne,K)&&(ue[ce++]=Ae)}return ue}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$6=Object.prototype,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(K){return K==null?[]:(K=Object(K),arrayFilter(nativeGetSymbols(K),function(J){return propertyIsEnumerable$1.call(K,J)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(K,J){for(var ne=-1,oe=Array(K);++ne<K;)oe[ne]=J(ne);return oe}var _baseTimes=baseTimes$1;function isObjectLike$4(K){return K!=null&&typeof K=="object"}var isObjectLike_1=isObjectLike$4,baseGetTag$2=_baseGetTag,isObjectLike$3=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(K){return isObjectLike$3(K)&&baseGetTag$2(K)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$2=isObjectLike_1,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(K){return isObjectLike$2(K)&&hasOwnProperty$4.call(K,"callee")&&!propertyIsEnumerable.call(K,"callee")},isArguments_1=isArguments$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(K,J){var ne=_root,oe=stubFalse_1,ce=J&&!J.nodeType&&J,ue=ce&&!0&&K&&!K.nodeType&&K,Ae=ue&&ue.exports===ce,pe=Ae?ne.Buffer:void 0,ve=pe?pe.isBuffer:void 0,me=ve||oe;K.exports=me})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(K,J){var ne=typeof K;return J=J??MAX_SAFE_INTEGER$1,!!J&&(ne=="number"||ne!="symbol"&&reIsUint.test(K))&&K>-1&&K%1==0&&K<J}var _isIndex=isIndex$1,MAX_SAFE_INTEGER=9007199254740991;function isLength$2(K){return typeof K=="number"&&K>-1&&K%1==0&&K<=MAX_SAFE_INTEGER}var isLength_1=isLength$2,baseGetTag$1=_baseGetTag,isLength$1=isLength_1,isObjectLike$1=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(K){return isObjectLike$1(K)&&isLength$1(K.length)&&!!typedArrayTags[baseGetTag$1(K)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(K){return function(J){return K(J)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};_nodeUtil.exports;(function(K,J){var ne=_freeGlobal,oe=J&&!J.nodeType&&J,ce=oe&&!0&&K&&!K.nodeType&&K,ue=ce&&ce.exports===oe,Ae=ue&&ne.process,pe=function(){try{var ve=ce&&ce.require&&ce.require("util").types;return ve||Ae&&Ae.binding&&Ae.binding("util")}catch{}}();K.exports=pe})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments=isArguments_1,isArray$1=isArray_1,isBuffer$1=isBufferExports,isIndex=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(K,J){var ne=isArray$1(K),oe=!ne&&isArguments(K),ce=!ne&&!oe&&isBuffer$1(K),ue=!ne&&!oe&&!ce&&isTypedArray$1(K),Ae=ne||oe||ce||ue,pe=Ae?baseTimes(K.length,String):[],ve=pe.length;for(var me in K)(J||hasOwnProperty$3.call(K,me))&&!(Ae&&(me=="length"||ce&&(me=="offset"||me=="parent")||ue&&(me=="buffer"||me=="byteLength"||me=="byteOffset")||isIndex(me,ve)))&&pe.push(me);return pe}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(K){var J=K&&K.constructor,ne=typeof J=="function"&&J.prototype||objectProto$3;return K===ne}var _isPrototype=isPrototype$1;function overArg$1(K,J){return function(ne){return K(J(ne))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(K){if(!isPrototype(K))return nativeKeys(K);var J=[];for(var ne in Object(K))hasOwnProperty$2.call(K,ne)&&ne!="constructor"&&J.push(ne);return J}var _baseKeys=baseKeys$1,isFunction=isFunction_1,isLength=isLength_1;function isArrayLike$1(K){return K!=null&&isLength(K.length)&&!isFunction(K)}var isArrayLike_1=isArrayLike$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike=isArrayLike_1;function keys$1(K){return isArrayLike(K)?arrayLikeKeys(K):baseKeys(K)}var keys_1=keys$1,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys=keys_1;function getAllKeys$1(K){return baseGetAllKeys(K,keys,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(K,J,ne,oe,ce,ue){var Ae=ne&COMPARE_PARTIAL_FLAG$1,pe=getAllKeys(K),ve=pe.length,me=getAllKeys(J),ge=me.length;if(ve!=ge&&!Ae)return!1;for(var ye=ve;ye--;){var xe=pe[ye];if(!(Ae?xe in J:hasOwnProperty$1.call(J,xe)))return!1}var _e=ue.get(K),$e=ue.get(J);if(_e&&$e)return _e==J&&$e==K;var Ie=!0;ue.set(K,J),ue.set(J,K);for(var Fe=Ae;++ye<ve;){xe=pe[ye];var ke=K[xe],je=J[xe];if(oe)var We=Ae?oe(je,ke,xe,J,K,ue):oe(ke,je,xe,K,J,ue);if(!(We===void 0?ke===je||ce(ke,je,ne,oe,ue):We)){Ie=!1;break}Fe||(Fe=xe=="constructor")}if(Ie&&!Fe){var ze=K.constructor,Xe=J.constructor;ze!=Xe&&"constructor"in K&&"constructor"in J&&!(typeof ze=="function"&&ze instanceof ze&&typeof Xe=="function"&&Xe instanceof Xe)&&(Ie=!1)}return ue.delete(K),ue.delete(J),Ie}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$4=_root,DataView$2=getNative$3(root$4,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$3=_root,Promise$2=getNative$2(root$3,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$2=_root,Set$2=getNative$1(root$2,"Set"),_Set=Set$2,getNative=_getNative,root$1=_root,WeakMap$2=getNative(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(K){var J=baseGetTag(K),ne=J==objectTag$1?K.constructor:void 0,oe=ne?toSource(ne):"";if(oe)switch(oe){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return J});var _getTag=getTag$1,Stack=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(K,J,ne,oe,ce,ue){var Ae=isArray(K),pe=isArray(J),ve=Ae?arrayTag:getTag(K),me=pe?arrayTag:getTag(J);ve=ve==argsTag?objectTag:ve,me=me==argsTag?objectTag:me;var ge=ve==objectTag,ye=me==objectTag,xe=ve==me;if(xe&&isBuffer(K)){if(!isBuffer(J))return!1;Ae=!0,ge=!1}if(xe&&!ge)return ue||(ue=new Stack),Ae||isTypedArray(K)?equalArrays(K,J,ne,oe,ce,ue):equalByTag(K,J,ve,ne,oe,ce,ue);if(!(ne&COMPARE_PARTIAL_FLAG)){var _e=ge&&hasOwnProperty.call(K,"__wrapped__"),$e=ye&&hasOwnProperty.call(J,"__wrapped__");if(_e||$e){var Ie=_e?K.value():K,Fe=$e?J.value():J;return ue||(ue=new Stack),ce(Ie,Fe,ne,oe,ue)}}return xe?(ue||(ue=new Stack),equalObjects(K,J,ne,oe,ce,ue)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike=isObjectLike_1;function baseIsEqual$1(K,J,ne,oe,ce){return K===J?!0:K==null||J==null||!isObjectLike(K)&&!isObjectLike(J)?K!==K&&J!==J:baseIsEqualDeep(K,J,ne,oe,baseIsEqual$1,ce)}var _baseIsEqual=baseIsEqual$1,baseIsEqual=_baseIsEqual;function isEqual(K,J){return baseIsEqual(K,J)}var isEqual_1$1=isEqual,quill={exports:{}};(function(K,J){(function(oe,ce){K.exports=ce()})(typeof self<"u"?self:commonjsGlobal,function(){return function(ne){var oe={};function ce(ue){if(oe[ue])return oe[ue].exports;var Ae=oe[ue]={i:ue,l:!1,exports:{}};return ne[ue].call(Ae.exports,Ae,Ae.exports,ce),Ae.l=!0,Ae.exports}return ce.m=ne,ce.c=oe,ce.d=function(ue,Ae,pe){ce.o(ue,Ae)||Object.defineProperty(ue,Ae,{configurable:!1,enumerable:!0,get:pe})},ce.n=function(ue){var Ae=ue&&ue.__esModule?function(){return ue.default}:function(){return ue};return ce.d(Ae,"a",Ae),Ae},ce.o=function(ue,Ae){return Object.prototype.hasOwnProperty.call(ue,Ae)},ce.p="",ce(ce.s=109)}([function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(17),Ae=ce(18),pe=ce(19),ve=ce(45),me=ce(46),ge=ce(47),ye=ce(48),xe=ce(49),_e=ce(12),$e=ce(32),Ie=ce(33),Fe=ce(31),ke=ce(1),je={Scope:ke.Scope,create:ke.create,find:ke.find,query:ke.query,register:ke.register,Container:ue.default,Format:Ae.default,Leaf:pe.default,Embed:ye.default,Scroll:ve.default,Block:ge.default,Inline:me.default,Text:xe.default,Attributor:{Attribute:_e.default,Class:$e.default,Style:Ie.default,Store:Fe.default}};oe.default=je},function(ne,oe,ce){var ue=this&&this.__extends||function(){var Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,je){ke.__proto__=je}||function(ke,je){for(var We in je)je.hasOwnProperty(We)&&(ke[We]=je[We])};return function(ke,je){Fe(ke,je);function We(){this.constructor=ke}ke.prototype=je===null?Object.create(je):(We.prototype=je.prototype,new We)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=function(Fe){ue(ke,Fe);function ke(je){var We=this;return je="[Parchment] "+je,We=Fe.call(this,je)||this,We.message=je,We.name=We.constructor.name,We}return ke}(Error);oe.ParchmentError=Ae;var pe={},ve={},me={},ge={};oe.DATA_KEY="__blot";var ye;(function(Fe){Fe[Fe.TYPE=3]="TYPE",Fe[Fe.LEVEL=12]="LEVEL",Fe[Fe.ATTRIBUTE=13]="ATTRIBUTE",Fe[Fe.BLOT=14]="BLOT",Fe[Fe.INLINE=7]="INLINE",Fe[Fe.BLOCK=11]="BLOCK",Fe[Fe.BLOCK_BLOT=10]="BLOCK_BLOT",Fe[Fe.INLINE_BLOT=6]="INLINE_BLOT",Fe[Fe.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",Fe[Fe.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",Fe[Fe.ANY=15]="ANY"})(ye=oe.Scope||(oe.Scope={}));function xe(Fe,ke){var je=$e(Fe);if(je==null)throw new Ae("Unable to create "+Fe+" blot");var We=je,ze=Fe instanceof Node||Fe.nodeType===Node.TEXT_NODE?Fe:We.create(ke);return new We(ze,ke)}oe.create=xe;function _e(Fe,ke){return ke===void 0&&(ke=!1),Fe==null?null:Fe[oe.DATA_KEY]!=null?Fe[oe.DATA_KEY].blot:ke?_e(Fe.parentNode,ke):null}oe.find=_e;function $e(Fe,ke){ke===void 0&&(ke=ye.ANY);var je;if(typeof Fe=="string")je=ge[Fe]||pe[Fe];else if(Fe instanceof Text||Fe.nodeType===Node.TEXT_NODE)je=ge.text;else if(typeof Fe=="number")Fe&ye.LEVEL&ye.BLOCK?je=ge.block:Fe&ye.LEVEL&ye.INLINE&&(je=ge.inline);else if(Fe instanceof HTMLElement){var We=(Fe.getAttribute("class")||"").split(/\s+/);for(var ze in We)if(je=ve[We[ze]],je)break;je=je||me[Fe.tagName]}return je==null?null:ke&ye.LEVEL&je.scope&&ke&ye.TYPE&je.scope?je:null}oe.query=$e;function Ie(){for(var Fe=[],ke=0;ke<arguments.length;ke++)Fe[ke]=arguments[ke];if(Fe.length>1)return Fe.map(function(ze){return Ie(ze)});var je=Fe[0];if(typeof je.blotName!="string"&&typeof je.attrName!="string")throw new Ae("Invalid definition");if(je.blotName==="abstract")throw new Ae("Cannot register abstract class");if(ge[je.blotName||je.attrName]=je,typeof je.keyName=="string")pe[je.keyName]=je;else if(je.className!=null&&(ve[je.className]=je),je.tagName!=null){Array.isArray(je.tagName)?je.tagName=je.tagName.map(function(ze){return ze.toUpperCase()}):je.tagName=je.tagName.toUpperCase();var We=Array.isArray(je.tagName)?je.tagName:[je.tagName];We.forEach(function(ze){(me[ze]==null||je.className==null)&&(me[ze]=je)})}return je}oe.register=Ie},function(ne,oe,ce){var ue=ce(51),Ae=ce(11),pe=ce(3),ve=ce(20),me="\0",ge=function(ye){Array.isArray(ye)?this.ops=ye:ye!=null&&Array.isArray(ye.ops)?this.ops=ye.ops:this.ops=[]};ge.prototype.insert=function(ye,xe){var _e={};return ye.length===0?this:(_e.insert=ye,xe!=null&&typeof xe=="object"&&Object.keys(xe).length>0&&(_e.attributes=xe),this.push(_e))},ge.prototype.delete=function(ye){return ye<=0?this:this.push({delete:ye})},ge.prototype.retain=function(ye,xe){if(ye<=0)return this;var _e={retain:ye};return xe!=null&&typeof xe=="object"&&Object.keys(xe).length>0&&(_e.attributes=xe),this.push(_e)},ge.prototype.push=function(ye){var xe=this.ops.length,_e=this.ops[xe-1];if(ye=pe(!0,{},ye),typeof _e=="object"){if(typeof ye.delete=="number"&&typeof _e.delete=="number")return this.ops[xe-1]={delete:_e.delete+ye.delete},this;if(typeof _e.delete=="number"&&ye.insert!=null&&(xe-=1,_e=this.ops[xe-1],typeof _e!="object"))return this.ops.unshift(ye),this;if(Ae(ye.attributes,_e.attributes)){if(typeof ye.insert=="string"&&typeof _e.insert=="string")return this.ops[xe-1]={insert:_e.insert+ye.insert},typeof ye.attributes=="object"&&(this.ops[xe-1].attributes=ye.attributes),this;if(typeof ye.retain=="number"&&typeof _e.retain=="number")return this.ops[xe-1]={retain:_e.retain+ye.retain},typeof ye.attributes=="object"&&(this.ops[xe-1].attributes=ye.attributes),this}}return xe===this.ops.length?this.ops.push(ye):this.ops.splice(xe,0,ye),this},ge.prototype.chop=function(){var ye=this.ops[this.ops.length-1];return ye&&ye.retain&&!ye.attributes&&this.ops.pop(),this},ge.prototype.filter=function(ye){return this.ops.filter(ye)},ge.prototype.forEach=function(ye){this.ops.forEach(ye)},ge.prototype.map=function(ye){return this.ops.map(ye)},ge.prototype.partition=function(ye){var xe=[],_e=[];return this.forEach(function($e){var Ie=ye($e)?xe:_e;Ie.push($e)}),[xe,_e]},ge.prototype.reduce=function(ye,xe){return this.ops.reduce(ye,xe)},ge.prototype.changeLength=function(){return this.reduce(function(ye,xe){return xe.insert?ye+ve.length(xe):xe.delete?ye-xe.delete:ye},0)},ge.prototype.length=function(){return this.reduce(function(ye,xe){return ye+ve.length(xe)},0)},ge.prototype.slice=function(ye,xe){ye=ye||0,typeof xe!="number"&&(xe=1/0);for(var _e=[],$e=ve.iterator(this.ops),Ie=0;Ie<xe&&$e.hasNext();){var Fe;Ie<ye?Fe=$e.next(ye-Ie):(Fe=$e.next(xe-Ie),_e.push(Fe)),Ie+=ve.length(Fe)}return new ge(_e)},ge.prototype.compose=function(ye){var xe=ve.iterator(this.ops),_e=ve.iterator(ye.ops),$e=[],Ie=_e.peek();if(Ie!=null&&typeof Ie.retain=="number"&&Ie.attributes==null){for(var Fe=Ie.retain;xe.peekType()==="insert"&&xe.peekLength()<=Fe;)Fe-=xe.peekLength(),$e.push(xe.next());Ie.retain-Fe>0&&_e.next(Ie.retain-Fe)}for(var ke=new ge($e);xe.hasNext()||_e.hasNext();)if(_e.peekType()==="insert")ke.push(_e.next());else if(xe.peekType()==="delete")ke.push(xe.next());else{var je=Math.min(xe.peekLength(),_e.peekLength()),We=xe.next(je),ze=_e.next(je);if(typeof ze.retain=="number"){var Xe={};typeof We.retain=="number"?Xe.retain=je:Xe.insert=We.insert;var Je=ve.attributes.compose(We.attributes,ze.attributes,typeof We.retain=="number");if(Je&&(Xe.attributes=Je),ke.push(Xe),!_e.hasNext()&&Ae(ke.ops[ke.ops.length-1],Xe)){var nt=new ge(xe.rest());return ke.concat(nt).chop()}}else typeof ze.delete=="number"&&typeof We.retain=="number"&&ke.push(ze)}return ke.chop()},ge.prototype.concat=function(ye){var xe=new ge(this.ops.slice());return ye.ops.length>0&&(xe.push(ye.ops[0]),xe.ops=xe.ops.concat(ye.ops.slice(1))),xe},ge.prototype.diff=function(ye,xe){if(this.ops===ye.ops)return new ge;var _e=[this,ye].map(function(je){return je.map(function(We){if(We.insert!=null)return typeof We.insert=="string"?We.insert:me;var ze=je===ye?"on":"with";throw new Error("diff() called "+ze+" non-document")}).join("")}),$e=new ge,Ie=ue(_e[0],_e[1],xe),Fe=ve.iterator(this.ops),ke=ve.iterator(ye.ops);return Ie.forEach(function(je){for(var We=je[1].length;We>0;){var ze=0;switch(je[0]){case ue.INSERT:ze=Math.min(ke.peekLength(),We),$e.push(ke.next(ze));break;case ue.DELETE:ze=Math.min(We,Fe.peekLength()),Fe.next(ze),$e.delete(ze);break;case ue.EQUAL:ze=Math.min(Fe.peekLength(),ke.peekLength(),We);var Xe=Fe.next(ze),Je=ke.next(ze);Ae(Xe.insert,Je.insert)?$e.retain(ze,ve.attributes.diff(Xe.attributes,Je.attributes)):$e.push(Je).delete(ze);break}We-=ze}}),$e.chop()},ge.prototype.eachLine=function(ye,xe){xe=xe||`
`;for(var _e=ve.iterator(this.ops),$e=new ge,Ie=0;_e.hasNext();){if(_e.peekType()!=="insert")return;var Fe=_e.peek(),ke=ve.length(Fe)-_e.peekLength(),je=typeof Fe.insert=="string"?Fe.insert.indexOf(xe,ke)-ke:-1;if(je<0)$e.push(_e.next());else if(je>0)$e.push(_e.next(je));else{if(ye($e,_e.next(1).attributes||{},Ie)===!1)return;Ie+=1,$e=new ge}}$e.length()>0&&ye($e,{},Ie)},ge.prototype.transform=function(ye,xe){if(xe=!!xe,typeof ye=="number")return this.transformPosition(ye,xe);for(var _e=ve.iterator(this.ops),$e=ve.iterator(ye.ops),Ie=new ge;_e.hasNext()||$e.hasNext();)if(_e.peekType()==="insert"&&(xe||$e.peekType()!=="insert"))Ie.retain(ve.length(_e.next()));else if($e.peekType()==="insert")Ie.push($e.next());else{var Fe=Math.min(_e.peekLength(),$e.peekLength()),ke=_e.next(Fe),je=$e.next(Fe);if(ke.delete)continue;je.delete?Ie.push(je):Ie.retain(Fe,ve.attributes.transform(ke.attributes,je.attributes,xe))}return Ie.chop()},ge.prototype.transformPosition=function(ye,xe){xe=!!xe;for(var _e=ve.iterator(this.ops),$e=0;_e.hasNext()&&$e<=ye;){var Ie=_e.peekLength(),Fe=_e.peekType();if(_e.next(),Fe==="delete"){ye-=Math.min(Ie,ye-$e);continue}else Fe==="insert"&&($e<ye||!xe)&&(ye+=Ie);$e+=Ie}return ye},ne.exports=ge},function(ne,oe){var ce=Object.prototype.hasOwnProperty,ue=Object.prototype.toString,Ae=Object.defineProperty,pe=Object.getOwnPropertyDescriptor,ve=function(_e){return typeof Array.isArray=="function"?Array.isArray(_e):ue.call(_e)==="[object Array]"},me=function(_e){if(!_e||ue.call(_e)!=="[object Object]")return!1;var $e=ce.call(_e,"constructor"),Ie=_e.constructor&&_e.constructor.prototype&&ce.call(_e.constructor.prototype,"isPrototypeOf");if(_e.constructor&&!$e&&!Ie)return!1;var Fe;for(Fe in _e);return typeof Fe>"u"||ce.call(_e,Fe)},ge=function(_e,$e){Ae&&$e.name==="__proto__"?Ae(_e,$e.name,{enumerable:!0,configurable:!0,value:$e.newValue,writable:!0}):_e[$e.name]=$e.newValue},ye=function(_e,$e){if($e==="__proto__")if(ce.call(_e,$e)){if(pe)return pe(_e,$e).value}else return;return _e[$e]};ne.exports=function xe(){var _e,$e,Ie,Fe,ke,je,We=arguments[0],ze=1,Xe=arguments.length,Je=!1;for(typeof We=="boolean"&&(Je=We,We=arguments[1]||{},ze=2),(We==null||typeof We!="object"&&typeof We!="function")&&(We={});ze<Xe;++ze)if(_e=arguments[ze],_e!=null)for($e in _e)Ie=ye(We,$e),Fe=ye(_e,$e),We!==Fe&&(Je&&Fe&&(me(Fe)||(ke=ve(Fe)))?(ke?(ke=!1,je=Ie&&ve(Ie)?Ie:[]):je=Ie&&me(Ie)?Ie:{},ge(We,{name:$e,newValue:xe(Je,je,Fe)})):typeof Fe<"u"&&ge(We,{name:$e,newValue:Fe}));return We}},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.BlockEmbed=oe.bubbleFormats=void 0;var ue=function(){function qe(Se,Re){for(var Be=0;Be<Re.length;Be++){var Ne=Re[Be];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(Se,Ne.key,Ne)}}return function(Se,Re,Be){return Re&&qe(Se.prototype,Re),Be&&qe(Se,Be),Se}}(),Ae=function qe(Se,Re,Be){Se===null&&(Se=Function.prototype);var Ne=Object.getOwnPropertyDescriptor(Se,Re);if(Ne===void 0){var Ue=Object.getPrototypeOf(Se);return Ue===null?void 0:qe(Ue,Re,Be)}else{if("value"in Ne)return Ne.value;var Ge=Ne.get;return Ge===void 0?void 0:Ge.call(Be)}},pe=ce(3),ve=We(pe),me=ce(2),ge=We(me),ye=ce(0),xe=We(ye),_e=ce(16),$e=We(_e),Ie=ce(6),Fe=We(Ie),ke=ce(7),je=We(ke);function We(qe){return qe&&qe.__esModule?qe:{default:qe}}function ze(qe,Se){if(!(qe instanceof Se))throw new TypeError("Cannot call a class as a function")}function Xe(qe,Se){if(!qe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Se&&(typeof Se=="object"||typeof Se=="function")?Se:qe}function Je(qe,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Se);qe.prototype=Object.create(Se&&Se.prototype,{constructor:{value:qe,enumerable:!1,writable:!0,configurable:!0}}),Se&&(Object.setPrototypeOf?Object.setPrototypeOf(qe,Se):qe.__proto__=Se)}var nt=1,et=function(qe){Je(Se,qe);function Se(){return ze(this,Se),Xe(this,(Se.__proto__||Object.getPrototypeOf(Se)).apply(this,arguments))}return ue(Se,[{key:"attach",value:function(){Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"attach",this).call(this),this.attributes=new xe.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new ge.default().insert(this.value(),(0,ve.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(Be,Ne){var Ue=xe.default.query(Be,xe.default.Scope.BLOCK_ATTRIBUTE);Ue!=null&&this.attributes.attribute(Ue,Ne)}},{key:"formatAt",value:function(Be,Ne,Ue,Ge){this.format(Ue,Ge)}},{key:"insertAt",value:function(Be,Ne,Ue){if(typeof Ne=="string"&&Ne.endsWith(`
`)){var Ge=xe.default.create(tt.blotName);this.parent.insertBefore(Ge,Be===0?this:this.next),Ge.insertAt(0,Ne.slice(0,-1))}else Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"insertAt",this).call(this,Be,Ne,Ue)}}]),Se}(xe.default.Embed);et.scope=xe.default.Scope.BLOCK_BLOT;var tt=function(qe){Je(Se,qe);function Se(Re){ze(this,Se);var Be=Xe(this,(Se.__proto__||Object.getPrototypeOf(Se)).call(this,Re));return Be.cache={},Be}return ue(Se,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(xe.default.Leaf).reduce(function(Be,Ne){return Ne.length()===0?Be:Be.insert(Ne.value(),st(Ne))},new ge.default).insert(`
`,st(this))),this.cache.delta}},{key:"deleteAt",value:function(Be,Ne){Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"deleteAt",this).call(this,Be,Ne),this.cache={}}},{key:"formatAt",value:function(Be,Ne,Ue,Ge){Ne<=0||(xe.default.query(Ue,xe.default.Scope.BLOCK)?Be+Ne===this.length()&&this.format(Ue,Ge):Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"formatAt",this).call(this,Be,Math.min(Ne,this.length()-Be-1),Ue,Ge),this.cache={})}},{key:"insertAt",value:function(Be,Ne,Ue){if(Ue!=null)return Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"insertAt",this).call(this,Be,Ne,Ue);if(Ne.length!==0){var Ge=Ne.split(`
`),Ye=Ge.shift();Ye.length>0&&(Be<this.length()-1||this.children.tail==null?Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"insertAt",this).call(this,Math.min(Be,this.length()-1),Ye):this.children.tail.insertAt(this.children.tail.length(),Ye),this.cache={});var Qe=this;Ge.reduce(function(Te,Ke){return Qe=Qe.split(Te,!0),Qe.insertAt(0,Ke),Ke.length},Be+Ye.length)}}},{key:"insertBefore",value:function(Be,Ne){var Ue=this.children.head;Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"insertBefore",this).call(this,Be,Ne),Ue instanceof $e.default&&Ue.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"length",this).call(this)+nt),this.cache.length}},{key:"moveChildren",value:function(Be,Ne){Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"moveChildren",this).call(this,Be,Ne),this.cache={}}},{key:"optimize",value:function(Be){Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"optimize",this).call(this,Be),this.cache={}}},{key:"path",value:function(Be){return Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"path",this).call(this,Be,!0)}},{key:"removeChild",value:function(Be){Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"removeChild",this).call(this,Be),this.cache={}}},{key:"split",value:function(Be){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Ne&&(Be===0||Be>=this.length()-nt)){var Ue=this.clone();return Be===0?(this.parent.insertBefore(Ue,this),this):(this.parent.insertBefore(Ue,this.next),Ue)}else{var Ge=Ae(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"split",this).call(this,Be,Ne);return this.cache={},Ge}}}]),Se}(xe.default.Block);tt.blotName="block",tt.tagName="P",tt.defaultChild="break",tt.allowedChildren=[Fe.default,xe.default.Embed,je.default];function st(qe){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qe==null||(typeof qe.formats=="function"&&(Se=(0,ve.default)(Se,qe.formats())),qe.parent==null||qe.parent.blotName=="scroll"||qe.parent.statics.scope!==qe.statics.scope)?Se:st(qe.parent,Se)}oe.bubbleFormats=st,oe.BlockEmbed=et,oe.default=tt},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.overload=oe.expandConfig=void 0;var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Qe){return typeof Qe}:function(Qe){return Qe&&typeof Symbol=="function"&&Qe.constructor===Symbol&&Qe!==Symbol.prototype?"symbol":typeof Qe},Ae=function(){function Qe(Te,Ke){var rt=[],it=!0,at=!1,lt=void 0;try{for(var ct=Te[Symbol.iterator](),ot;!(it=(ot=ct.next()).done)&&(rt.push(ot.value),!(Ke&&rt.length===Ke));it=!0);}catch(ft){at=!0,lt=ft}finally{try{!it&&ct.return&&ct.return()}finally{if(at)throw lt}}return rt}return function(Te,Ke){if(Array.isArray(Te))return Te;if(Symbol.iterator in Object(Te))return Qe(Te,Ke);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function Qe(Te,Ke){for(var rt=0;rt<Ke.length;rt++){var it=Ke[rt];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Te,it.key,it)}}return function(Te,Ke,rt){return Ke&&Qe(Te.prototype,Ke),rt&&Qe(Te,rt),Te}}();ce(50);var ve=ce(2),me=st(ve),ge=ce(14),ye=st(ge),xe=ce(8),_e=st(xe),$e=ce(9),Ie=st($e),Fe=ce(0),ke=st(Fe),je=ce(15),We=st(je),ze=ce(3),Xe=st(ze),Je=ce(10),nt=st(Je),et=ce(34),tt=st(et);function st(Qe){return Qe&&Qe.__esModule?Qe:{default:Qe}}function qe(Qe,Te,Ke){return Te in Qe?Object.defineProperty(Qe,Te,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):Qe[Te]=Ke,Qe}function Se(Qe,Te){if(!(Qe instanceof Te))throw new TypeError("Cannot call a class as a function")}var Re=(0,nt.default)("quill"),Be=function(){pe(Qe,null,[{key:"debug",value:function(Ke){Ke===!0&&(Ke="log"),nt.default.level(Ke)}},{key:"find",value:function(Ke){return Ke.__quill||ke.default.find(Ke)}},{key:"import",value:function(Ke){return this.imports[Ke]==null&&Re.error("Cannot import "+Ke+". Are you sure it was registered?"),this.imports[Ke]}},{key:"register",value:function(Ke,rt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof Ke!="string"){var lt=Ke.attrName||Ke.blotName;typeof lt=="string"?this.register("formats/"+lt,Ke,rt):Object.keys(Ke).forEach(function(ct){it.register(ct,Ke[ct],rt)})}else this.imports[Ke]!=null&&!at&&Re.warn("Overwriting "+Ke+" with",rt),this.imports[Ke]=rt,(Ke.startsWith("blots/")||Ke.startsWith("formats/"))&&rt.blotName!=="abstract"?ke.default.register(rt):Ke.startsWith("modules")&&typeof rt.register=="function"&&rt.register()}}]);function Qe(Te){var Ke=this,rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Se(this,Qe),this.options=Ne(Te,rt),this.container=this.options.container,this.container==null)return Re.error("Invalid Quill container",Te);this.options.debug&&Qe.debug(this.options.debug);var it=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new _e.default,this.scroll=ke.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new ye.default(this.scroll),this.selection=new We.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(_e.default.events.EDITOR_CHANGE,function(lt){lt===_e.default.events.TEXT_CHANGE&&Ke.root.classList.toggle("ql-blank",Ke.editor.isBlank())}),this.emitter.on(_e.default.events.SCROLL_UPDATE,function(lt,ct){var ot=Ke.selection.lastRange,ft=ot&&ot.length===0?ot.index:void 0;Ue.call(Ke,function(){return Ke.editor.update(null,ct,ft)},lt)});var at=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+it+"<p><br></p></div>");this.setContents(at),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return pe(Qe,[{key:"addContainer",value:function(Ke){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof Ke=="string"){var it=Ke;Ke=document.createElement("div"),Ke.classList.add(it)}return this.container.insertBefore(Ke,rt),Ke}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(Ke,rt,it){var at=this,lt=Ge(Ke,rt,it),ct=Ae(lt,4);return Ke=ct[0],rt=ct[1],it=ct[3],Ue.call(this,function(){return at.editor.deleteText(Ke,rt)},it,Ke,-1*rt)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(Ke),this.container.classList.toggle("ql-disabled",!Ke)}},{key:"focus",value:function(){var Ke=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=Ke,this.scrollIntoView()}},{key:"format",value:function(Ke,rt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_e.default.sources.API;return Ue.call(this,function(){var lt=it.getSelection(!0),ct=new me.default;if(lt==null)return ct;if(ke.default.query(Ke,ke.default.Scope.BLOCK))ct=it.editor.formatLine(lt.index,lt.length,qe({},Ke,rt));else{if(lt.length===0)return it.selection.format(Ke,rt),ct;ct=it.editor.formatText(lt.index,lt.length,qe({},Ke,rt))}return it.setSelection(lt,_e.default.sources.SILENT),ct},at)}},{key:"formatLine",value:function(Ke,rt,it,at,lt){var ct=this,ot=void 0,ft=Ge(Ke,rt,it,at,lt),dt=Ae(ft,4);return Ke=dt[0],rt=dt[1],ot=dt[2],lt=dt[3],Ue.call(this,function(){return ct.editor.formatLine(Ke,rt,ot)},lt,Ke,0)}},{key:"formatText",value:function(Ke,rt,it,at,lt){var ct=this,ot=void 0,ft=Ge(Ke,rt,it,at,lt),dt=Ae(ft,4);return Ke=dt[0],rt=dt[1],ot=dt[2],lt=dt[3],Ue.call(this,function(){return ct.editor.formatText(Ke,rt,ot)},lt,Ke,0)}},{key:"getBounds",value:function(Ke){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,it=void 0;typeof Ke=="number"?it=this.selection.getBounds(Ke,rt):it=this.selection.getBounds(Ke.index,Ke.length);var at=this.container.getBoundingClientRect();return{bottom:it.bottom-at.top,height:it.height,left:it.left-at.left,right:it.right-at.left,top:it.top-at.top,width:it.width}}},{key:"getContents",value:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Ke,it=Ge(Ke,rt),at=Ae(it,2);return Ke=at[0],rt=at[1],this.editor.getContents(Ke,rt)}},{key:"getFormat",value:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof Ke=="number"?this.editor.getFormat(Ke,rt):this.editor.getFormat(Ke.index,Ke.length)}},{key:"getIndex",value:function(Ke){return Ke.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(Ke){return this.scroll.leaf(Ke)}},{key:"getLine",value:function(Ke){return this.scroll.line(Ke)}},{key:"getLines",value:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof Ke!="number"?this.scroll.lines(Ke.index,Ke.length):this.scroll.lines(Ke,rt)}},{key:"getModule",value:function(Ke){return this.theme.modules[Ke]}},{key:"getSelection",value:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Ke&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Ke,it=Ge(Ke,rt),at=Ae(it,2);return Ke=at[0],rt=at[1],this.editor.getText(Ke,rt)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(Ke,rt,it){var at=this,lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Qe.sources.API;return Ue.call(this,function(){return at.editor.insertEmbed(Ke,rt,it)},lt,Ke)}},{key:"insertText",value:function(Ke,rt,it,at,lt){var ct=this,ot=void 0,ft=Ge(Ke,0,it,at,lt),dt=Ae(ft,4);return Ke=dt[0],ot=dt[2],lt=dt[3],Ue.call(this,function(){return ct.editor.insertText(Ke,rt,ot)},lt,Ke,rt.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(Ke,rt,it){this.clipboard.dangerouslyPasteHTML(Ke,rt,it)}},{key:"removeFormat",value:function(Ke,rt,it){var at=this,lt=Ge(Ke,rt,it),ct=Ae(lt,4);return Ke=ct[0],rt=ct[1],it=ct[3],Ue.call(this,function(){return at.editor.removeFormat(Ke,rt)},it,Ke)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(Ke){var rt=this,it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_e.default.sources.API;return Ue.call(this,function(){Ke=new me.default(Ke);var at=rt.getLength(),lt=rt.editor.deleteText(0,at),ct=rt.editor.applyDelta(Ke),ot=ct.ops[ct.ops.length-1];ot!=null&&typeof ot.insert=="string"&&ot.insert[ot.insert.length-1]===`
`&&(rt.editor.deleteText(rt.getLength()-1,1),ct.delete(1));var ft=lt.compose(ct);return ft},it)}},{key:"setSelection",value:function(Ke,rt,it){if(Ke==null)this.selection.setRange(null,rt||Qe.sources.API);else{var at=Ge(Ke,rt,it),lt=Ae(at,4);Ke=lt[0],rt=lt[1],it=lt[3],this.selection.setRange(new je.Range(Ke,rt),it),it!==_e.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(Ke){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_e.default.sources.API,it=new me.default().insert(Ke);return this.setContents(it,rt)}},{key:"update",value:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_e.default.sources.USER,rt=this.scroll.update(Ke);return this.selection.update(Ke),rt}},{key:"updateContents",value:function(Ke){var rt=this,it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_e.default.sources.API;return Ue.call(this,function(){return Ke=new me.default(Ke),rt.editor.applyDelta(Ke,it)},it,!0)}}]),Qe}();Be.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},Be.events=_e.default.events,Be.sources=_e.default.sources,Be.version="1.3.7",Be.imports={delta:me.default,parchment:ke.default,"core/module":Ie.default,"core/theme":tt.default};function Ne(Qe,Te){if(Te=(0,Xe.default)(!0,{container:Qe,modules:{clipboard:!0,keyboard:!0,history:!0}},Te),!Te.theme||Te.theme===Be.DEFAULTS.theme)Te.theme=tt.default;else if(Te.theme=Be.import("themes/"+Te.theme),Te.theme==null)throw new Error("Invalid theme "+Te.theme+". Did you register it?");var Ke=(0,Xe.default)(!0,{},Te.theme.DEFAULTS);[Ke,Te].forEach(function(at){at.modules=at.modules||{},Object.keys(at.modules).forEach(function(lt){at.modules[lt]===!0&&(at.modules[lt]={})})});var rt=Object.keys(Ke.modules).concat(Object.keys(Te.modules)),it=rt.reduce(function(at,lt){var ct=Be.import("modules/"+lt);return ct==null?Re.error("Cannot load "+lt+" module. Are you sure you registered it?"):at[lt]=ct.DEFAULTS||{},at},{});return Te.modules!=null&&Te.modules.toolbar&&Te.modules.toolbar.constructor!==Object&&(Te.modules.toolbar={container:Te.modules.toolbar}),Te=(0,Xe.default)(!0,{},Be.DEFAULTS,{modules:it},Ke,Te),["bounds","container","scrollingContainer"].forEach(function(at){typeof Te[at]=="string"&&(Te[at]=document.querySelector(Te[at]))}),Te.modules=Object.keys(Te.modules).reduce(function(at,lt){return Te.modules[lt]&&(at[lt]=Te.modules[lt]),at},{}),Te}function Ue(Qe,Te,Ke,rt){if(this.options.strict&&!this.isEnabled()&&Te===_e.default.sources.USER)return new me.default;var it=Ke==null?null:this.getSelection(),at=this.editor.delta,lt=Qe();if(it!=null&&(Ke===!0&&(Ke=it.index),rt==null?it=Ye(it,lt,Te):rt!==0&&(it=Ye(it,Ke,rt,Te)),this.setSelection(it,_e.default.sources.SILENT)),lt.length()>0){var ct,ot=[_e.default.events.TEXT_CHANGE,lt,at,Te];if((ct=this.emitter).emit.apply(ct,[_e.default.events.EDITOR_CHANGE].concat(ot)),Te!==_e.default.sources.SILENT){var ft;(ft=this.emitter).emit.apply(ft,ot)}}return lt}function Ge(Qe,Te,Ke,rt,it){var at={};return typeof Qe.index=="number"&&typeof Qe.length=="number"?typeof Te!="number"?(it=rt,rt=Ke,Ke=Te,Te=Qe.length,Qe=Qe.index):(Te=Qe.length,Qe=Qe.index):typeof Te!="number"&&(it=rt,rt=Ke,Ke=Te,Te=0),(typeof Ke>"u"?"undefined":ue(Ke))==="object"?(at=Ke,it=rt):typeof Ke=="string"&&(rt!=null?at[Ke]=rt:it=Ke),it=it||_e.default.sources.API,[Qe,Te,at,it]}function Ye(Qe,Te,Ke,rt){if(Qe==null)return null;var it=void 0,at=void 0;if(Te instanceof me.default){var lt=[Qe.index,Qe.index+Qe.length].map(function(dt){return Te.transformPosition(dt,rt!==_e.default.sources.USER)}),ct=Ae(lt,2);it=ct[0],at=ct[1]}else{var ot=[Qe.index,Qe.index+Qe.length].map(function(dt){return dt<Te||dt===Te&&rt===_e.default.sources.USER?dt:Ke>=0?dt+Ke:Math.max(Te,dt+Ke)}),ft=Ae(ot,2);it=ft[0],at=ft[1]}return new je.Range(it,at-it)}oe.expandConfig=Ne,oe.overload=Ge,oe.default=Be},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Fe(ke,je){for(var We=0;We<je.length;We++){var ze=je[We];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(ke,ze.key,ze)}}return function(ke,je,We){return je&&Fe(ke.prototype,je),We&&Fe(ke,We),ke}}(),Ae=function Fe(ke,je,We){ke===null&&(ke=Function.prototype);var ze=Object.getOwnPropertyDescriptor(ke,je);if(ze===void 0){var Xe=Object.getPrototypeOf(ke);return Xe===null?void 0:Fe(Xe,je,We)}else{if("value"in ze)return ze.value;var Je=ze.get;return Je===void 0?void 0:Je.call(We)}},pe=ce(7),ve=ye(pe),me=ce(0),ge=ye(me);function ye(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}}function xe(Fe,ke){if(!(Fe instanceof ke))throw new TypeError("Cannot call a class as a function")}function _e(Fe,ke){if(!Fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke&&(typeof ke=="object"||typeof ke=="function")?ke:Fe}function $e(Fe,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ke);Fe.prototype=Object.create(ke&&ke.prototype,{constructor:{value:Fe,enumerable:!1,writable:!0,configurable:!0}}),ke&&(Object.setPrototypeOf?Object.setPrototypeOf(Fe,ke):Fe.__proto__=ke)}var Ie=function(Fe){$e(ke,Fe);function ke(){return xe(this,ke),_e(this,(ke.__proto__||Object.getPrototypeOf(ke)).apply(this,arguments))}return ue(ke,[{key:"formatAt",value:function(We,ze,Xe,Je){if(ke.compare(this.statics.blotName,Xe)<0&&ge.default.query(Xe,ge.default.Scope.BLOT)){var nt=this.isolate(We,ze);Je&&nt.wrap(Xe,Je)}else Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"formatAt",this).call(this,We,ze,Xe,Je)}},{key:"optimize",value:function(We){if(Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"optimize",this).call(this,We),this.parent instanceof ke&&ke.compare(this.statics.blotName,this.parent.statics.blotName)>0){var ze=this.parent.isolate(this.offset(),this.length());this.moveChildren(ze),ze.wrap(this)}}}],[{key:"compare",value:function(We,ze){var Xe=ke.order.indexOf(We),Je=ke.order.indexOf(ze);return Xe>=0||Je>=0?Xe-Je:We===ze?0:We<ze?-1:1}}]),ke}(ge.default.Inline);Ie.allowedChildren=[Ie,ge.default.Embed,ve.default],Ie.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],oe.default=Ie},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(0),Ae=pe(ue);function pe(xe){return xe&&xe.__esModule?xe:{default:xe}}function ve(xe,_e){if(!(xe instanceof _e))throw new TypeError("Cannot call a class as a function")}function me(xe,_e){if(!xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e&&(typeof _e=="object"||typeof _e=="function")?_e:xe}function ge(xe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);xe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:xe,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(xe,_e):xe.__proto__=_e)}var ye=function(xe){ge(_e,xe);function _e(){return ve(this,_e),me(this,(_e.__proto__||Object.getPrototypeOf(_e)).apply(this,arguments))}return _e}(Ae.default.Text);oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function je(We,ze){for(var Xe=0;Xe<ze.length;Xe++){var Je=ze[Xe];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(We,Je.key,Je)}}return function(We,ze,Xe){return ze&&je(We.prototype,ze),Xe&&je(We,Xe),We}}(),Ae=function je(We,ze,Xe){We===null&&(We=Function.prototype);var Je=Object.getOwnPropertyDescriptor(We,ze);if(Je===void 0){var nt=Object.getPrototypeOf(We);return nt===null?void 0:je(nt,ze,Xe)}else{if("value"in Je)return Je.value;var et=Je.get;return et===void 0?void 0:et.call(Xe)}},pe=ce(54),ve=ye(pe),me=ce(10),ge=ye(me);function ye(je){return je&&je.__esModule?je:{default:je}}function xe(je,We){if(!(je instanceof We))throw new TypeError("Cannot call a class as a function")}function _e(je,We){if(!je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return We&&(typeof We=="object"||typeof We=="function")?We:je}function $e(je,We){if(typeof We!="function"&&We!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof We);je.prototype=Object.create(We&&We.prototype,{constructor:{value:je,enumerable:!1,writable:!0,configurable:!0}}),We&&(Object.setPrototypeOf?Object.setPrototypeOf(je,We):je.__proto__=We)}var Ie=(0,ge.default)("quill:events"),Fe=["selectionchange","mousedown","mouseup","click"];Fe.forEach(function(je){document.addEventListener(je,function(){for(var We=arguments.length,ze=Array(We),Xe=0;Xe<We;Xe++)ze[Xe]=arguments[Xe];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(Je){if(Je.__quill&&Je.__quill.emitter){var nt;(nt=Je.__quill.emitter).handleDOM.apply(nt,ze)}})})});var ke=function(je){$e(We,je);function We(){xe(this,We);var ze=_e(this,(We.__proto__||Object.getPrototypeOf(We)).call(this));return ze.listeners={},ze.on("error",Ie.error),ze}return ue(We,[{key:"emit",value:function(){Ie.log.apply(Ie,arguments),Ae(We.prototype.__proto__||Object.getPrototypeOf(We.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(Xe){for(var Je=arguments.length,nt=Array(Je>1?Je-1:0),et=1;et<Je;et++)nt[et-1]=arguments[et];(this.listeners[Xe.type]||[]).forEach(function(tt){var st=tt.node,qe=tt.handler;(Xe.target===st||st.contains(Xe.target))&&qe.apply(void 0,[Xe].concat(nt))})}},{key:"listenDOM",value:function(Xe,Je,nt){this.listeners[Xe]||(this.listeners[Xe]=[]),this.listeners[Xe].push({node:Je,handler:nt})}}]),We}(ve.default);ke.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},ke.sources={API:"api",SILENT:"silent",USER:"user"},oe.default=ke},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});function ue(pe,ve){if(!(pe instanceof ve))throw new TypeError("Cannot call a class as a function")}var Ae=function pe(ve){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ue(this,pe),this.quill=ve,this.options=me};Ae.DEFAULTS={},oe.default=Ae},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=["error","warn","log","info"],Ae="warn";function pe(me){if(ue.indexOf(me)<=ue.indexOf(Ae)){for(var ge,ye=arguments.length,xe=Array(ye>1?ye-1:0),_e=1;_e<ye;_e++)xe[_e-1]=arguments[_e];(ge=console)[me].apply(ge,xe)}}function ve(me){return ue.reduce(function(ge,ye){return ge[ye]=pe.bind(console,ye,me),ge},{})}pe.level=ve.level=function(me){Ae=me},oe.default=ve},function(ne,oe,ce){var ue=Array.prototype.slice,Ae=ce(52),pe=ce(53),ve=ne.exports=function(xe,_e,$e){return $e||($e={}),xe===_e?!0:xe instanceof Date&&_e instanceof Date?xe.getTime()===_e.getTime():!xe||!_e||typeof xe!="object"&&typeof _e!="object"?$e.strict?xe===_e:xe==_e:ye(xe,_e,$e)};function me(xe){return xe==null}function ge(xe){return!(!xe||typeof xe!="object"||typeof xe.length!="number"||typeof xe.copy!="function"||typeof xe.slice!="function"||xe.length>0&&typeof xe[0]!="number")}function ye(xe,_e,$e){var Ie,Fe;if(me(xe)||me(_e)||xe.prototype!==_e.prototype)return!1;if(pe(xe))return pe(_e)?(xe=ue.call(xe),_e=ue.call(_e),ve(xe,_e,$e)):!1;if(ge(xe)){if(!ge(_e)||xe.length!==_e.length)return!1;for(Ie=0;Ie<xe.length;Ie++)if(xe[Ie]!==_e[Ie])return!1;return!0}try{var ke=Ae(xe),je=Ae(_e)}catch{return!1}if(ke.length!=je.length)return!1;for(ke.sort(),je.sort(),Ie=ke.length-1;Ie>=0;Ie--)if(ke[Ie]!=je[Ie])return!1;for(Ie=ke.length-1;Ie>=0;Ie--)if(Fe=ke[Ie],!ve(xe[Fe],_e[Fe],$e))return!1;return typeof xe==typeof _e}},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(1),Ae=function(){function pe(ve,me,ge){ge===void 0&&(ge={}),this.attrName=ve,this.keyName=me;var ye=ue.Scope.TYPE&ue.Scope.ATTRIBUTE;ge.scope!=null?this.scope=ge.scope&ue.Scope.LEVEL|ye:this.scope=ue.Scope.ATTRIBUTE,ge.whitelist!=null&&(this.whitelist=ge.whitelist)}return pe.keys=function(ve){return[].map.call(ve.attributes,function(me){return me.name})},pe.prototype.add=function(ve,me){return this.canAdd(ve,me)?(ve.setAttribute(this.keyName,me),!0):!1},pe.prototype.canAdd=function(ve,me){var ge=ue.query(ve,ue.Scope.BLOT&(this.scope|ue.Scope.TYPE));return ge==null?!1:this.whitelist==null?!0:typeof me=="string"?this.whitelist.indexOf(me.replace(/["']/g,""))>-1:this.whitelist.indexOf(me)>-1},pe.prototype.remove=function(ve){ve.removeAttribute(this.keyName)},pe.prototype.value=function(ve){var me=ve.getAttribute(this.keyName);return this.canAdd(ve,me)&&me?me:""},pe}();oe.default=Ae},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.Code=void 0;var ue=function(){function et(tt,st){var qe=[],Se=!0,Re=!1,Be=void 0;try{for(var Ne=tt[Symbol.iterator](),Ue;!(Se=(Ue=Ne.next()).done)&&(qe.push(Ue.value),!(st&&qe.length===st));Se=!0);}catch(Ge){Re=!0,Be=Ge}finally{try{!Se&&Ne.return&&Ne.return()}finally{if(Re)throw Be}}return qe}return function(tt,st){if(Array.isArray(tt))return tt;if(Symbol.iterator in Object(tt))return et(tt,st);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function(){function et(tt,st){for(var qe=0;qe<st.length;qe++){var Se=st[qe];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(tt,Se.key,Se)}}return function(tt,st,qe){return st&&et(tt.prototype,st),qe&&et(tt,qe),tt}}(),pe=function et(tt,st,qe){tt===null&&(tt=Function.prototype);var Se=Object.getOwnPropertyDescriptor(tt,st);if(Se===void 0){var Re=Object.getPrototypeOf(tt);return Re===null?void 0:et(Re,st,qe)}else{if("value"in Se)return Se.value;var Be=Se.get;return Be===void 0?void 0:Be.call(qe)}},ve=ce(2),me=je(ve),ge=ce(0),ye=je(ge),xe=ce(4),_e=je(xe),$e=ce(6),Ie=je($e),Fe=ce(7),ke=je(Fe);function je(et){return et&&et.__esModule?et:{default:et}}function We(et,tt){if(!(et instanceof tt))throw new TypeError("Cannot call a class as a function")}function ze(et,tt){if(!et)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tt&&(typeof tt=="object"||typeof tt=="function")?tt:et}function Xe(et,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof tt);et.prototype=Object.create(tt&&tt.prototype,{constructor:{value:et,enumerable:!1,writable:!0,configurable:!0}}),tt&&(Object.setPrototypeOf?Object.setPrototypeOf(et,tt):et.__proto__=tt)}var Je=function(et){Xe(tt,et);function tt(){return We(this,tt),ze(this,(tt.__proto__||Object.getPrototypeOf(tt)).apply(this,arguments))}return tt}(Ie.default);Je.blotName="code",Je.tagName="CODE";var nt=function(et){Xe(tt,et);function tt(){return We(this,tt),ze(this,(tt.__proto__||Object.getPrototypeOf(tt)).apply(this,arguments))}return Ae(tt,[{key:"delta",value:function(){var qe=this,Se=this.domNode.textContent;return Se.endsWith(`
`)&&(Se=Se.slice(0,-1)),Se.split(`
`).reduce(function(Re,Be){return Re.insert(Be).insert(`
`,qe.formats())},new me.default)}},{key:"format",value:function(qe,Se){if(!(qe===this.statics.blotName&&Se)){var Re=this.descendant(ke.default,this.length()-1),Be=ue(Re,1),Ne=Be[0];Ne!=null&&Ne.deleteAt(Ne.length()-1,1),pe(tt.prototype.__proto__||Object.getPrototypeOf(tt.prototype),"format",this).call(this,qe,Se)}}},{key:"formatAt",value:function(qe,Se,Re,Be){if(Se!==0&&!(ye.default.query(Re,ye.default.Scope.BLOCK)==null||Re===this.statics.blotName&&Be===this.statics.formats(this.domNode))){var Ne=this.newlineIndex(qe);if(!(Ne<0||Ne>=qe+Se)){var Ue=this.newlineIndex(qe,!0)+1,Ge=Ne-Ue+1,Ye=this.isolate(Ue,Ge),Qe=Ye.next;Ye.format(Re,Be),Qe instanceof tt&&Qe.formatAt(0,qe-Ue+Se-Ge,Re,Be)}}}},{key:"insertAt",value:function(qe,Se,Re){if(Re==null){var Be=this.descendant(ke.default,qe),Ne=ue(Be,2),Ue=Ne[0],Ge=Ne[1];Ue.insertAt(Ge,Se)}}},{key:"length",value:function(){var qe=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?qe:qe+1}},{key:"newlineIndex",value:function(qe){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Se)return this.domNode.textContent.slice(0,qe).lastIndexOf(`
`);var Re=this.domNode.textContent.slice(qe).indexOf(`
`);return Re>-1?qe+Re:-1}},{key:"optimize",value:function(qe){this.domNode.textContent.endsWith(`
`)||this.appendChild(ye.default.create("text",`
`)),pe(tt.prototype.__proto__||Object.getPrototypeOf(tt.prototype),"optimize",this).call(this,qe);var Se=this.next;Se!=null&&Se.prev===this&&Se.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===Se.statics.formats(Se.domNode)&&(Se.optimize(qe),Se.moveChildren(this),Se.remove())}},{key:"replace",value:function(qe){pe(tt.prototype.__proto__||Object.getPrototypeOf(tt.prototype),"replace",this).call(this,qe),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(Se){var Re=ye.default.find(Se);Re==null?Se.parentNode.removeChild(Se):Re instanceof ye.default.Embed?Re.remove():Re.unwrap()})}}],[{key:"create",value:function(qe){var Se=pe(tt.__proto__||Object.getPrototypeOf(tt),"create",this).call(this,qe);return Se.setAttribute("spellcheck",!1),Se}},{key:"formats",value:function(){return!0}}]),tt}(_e.default);nt.blotName="code-block",nt.tagName="PRE",nt.TAB="  ",oe.Code=Je,oe.default=nt},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Qe){return typeof Qe}:function(Qe){return Qe&&typeof Symbol=="function"&&Qe.constructor===Symbol&&Qe!==Symbol.prototype?"symbol":typeof Qe},Ae=function(){function Qe(Te,Ke){var rt=[],it=!0,at=!1,lt=void 0;try{for(var ct=Te[Symbol.iterator](),ot;!(it=(ot=ct.next()).done)&&(rt.push(ot.value),!(Ke&&rt.length===Ke));it=!0);}catch(ft){at=!0,lt=ft}finally{try{!it&&ct.return&&ct.return()}finally{if(at)throw lt}}return rt}return function(Te,Ke){if(Array.isArray(Te))return Te;if(Symbol.iterator in Object(Te))return Qe(Te,Ke);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function Qe(Te,Ke){for(var rt=0;rt<Ke.length;rt++){var it=Ke[rt];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Te,it.key,it)}}return function(Te,Ke,rt){return Ke&&Qe(Te.prototype,Ke),rt&&Qe(Te,rt),Te}}(),ve=ce(2),me=Se(ve),ge=ce(20),ye=Se(ge),xe=ce(0),_e=Se(xe),$e=ce(13),Ie=Se($e),Fe=ce(24),ke=Se(Fe),je=ce(4),We=Se(je),ze=ce(16),Xe=Se(ze),Je=ce(21),nt=Se(Je),et=ce(11),tt=Se(et),st=ce(3),qe=Se(st);function Se(Qe){return Qe&&Qe.__esModule?Qe:{default:Qe}}function Re(Qe,Te,Ke){return Te in Qe?Object.defineProperty(Qe,Te,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):Qe[Te]=Ke,Qe}function Be(Qe,Te){if(!(Qe instanceof Te))throw new TypeError("Cannot call a class as a function")}var Ne=/^[ -~]*$/,Ue=function(){function Qe(Te){Be(this,Qe),this.scroll=Te,this.delta=this.getDelta()}return pe(Qe,[{key:"applyDelta",value:function(Ke){var rt=this,it=!1;this.scroll.update();var at=this.scroll.length();return this.scroll.batchStart(),Ke=Ye(Ke),Ke.reduce(function(lt,ct){var ot=ct.retain||ct.delete||ct.insert.length||1,ft=ct.attributes||{};if(ct.insert!=null){if(typeof ct.insert=="string"){var dt=ct.insert;dt.endsWith(`
`)&&it&&(it=!1,dt=dt.slice(0,-1)),lt>=at&&!dt.endsWith(`
`)&&(it=!0),rt.scroll.insertAt(lt,dt);var mt=rt.scroll.line(lt),kt=Ae(mt,2),wt=kt[0],Et=kt[1],Ot=(0,qe.default)({},(0,je.bubbleFormats)(wt));if(wt instanceof We.default){var Rt=wt.descendant(_e.default.Leaf,Et),gt=Ae(Rt,1),$t=gt[0];Ot=(0,qe.default)(Ot,(0,je.bubbleFormats)($t))}ft=ye.default.attributes.diff(Ot,ft)||{}}else if(ue(ct.insert)==="object"){var pt=Object.keys(ct.insert)[0];if(pt==null)return lt;rt.scroll.insertAt(lt,pt,ct.insert[pt])}at+=ot}return Object.keys(ft).forEach(function(vt){rt.scroll.formatAt(lt,ot,vt,ft[vt])}),lt+ot},0),Ke.reduce(function(lt,ct){return typeof ct.delete=="number"?(rt.scroll.deleteAt(lt,ct.delete),lt):lt+(ct.retain||ct.insert.length||1)},0),this.scroll.batchEnd(),this.update(Ke)}},{key:"deleteText",value:function(Ke,rt){return this.scroll.deleteAt(Ke,rt),this.update(new me.default().retain(Ke).delete(rt))}},{key:"formatLine",value:function(Ke,rt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(at).forEach(function(lt){if(!(it.scroll.whitelist!=null&&!it.scroll.whitelist[lt])){var ct=it.scroll.lines(Ke,Math.max(rt,1)),ot=rt;ct.forEach(function(ft){var dt=ft.length();if(!(ft instanceof Ie.default))ft.format(lt,at[lt]);else{var mt=Ke-ft.offset(it.scroll),kt=ft.newlineIndex(mt+ot)-mt+1;ft.formatAt(mt,kt,lt,at[lt])}ot-=dt})}}),this.scroll.optimize(),this.update(new me.default().retain(Ke).retain(rt,(0,nt.default)(at)))}},{key:"formatText",value:function(Ke,rt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(at).forEach(function(lt){it.scroll.formatAt(Ke,rt,lt,at[lt])}),this.update(new me.default().retain(Ke).retain(rt,(0,nt.default)(at)))}},{key:"getContents",value:function(Ke,rt){return this.delta.slice(Ke,Ke+rt)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(Ke,rt){return Ke.concat(rt.delta())},new me.default)}},{key:"getFormat",value:function(Ke){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,it=[],at=[];rt===0?this.scroll.path(Ke).forEach(function(ct){var ot=Ae(ct,1),ft=ot[0];ft instanceof We.default?it.push(ft):ft instanceof _e.default.Leaf&&at.push(ft)}):(it=this.scroll.lines(Ke,rt),at=this.scroll.descendants(_e.default.Leaf,Ke,rt));var lt=[it,at].map(function(ct){if(ct.length===0)return{};for(var ot=(0,je.bubbleFormats)(ct.shift());Object.keys(ot).length>0;){var ft=ct.shift();if(ft==null)return ot;ot=Ge((0,je.bubbleFormats)(ft),ot)}return ot});return qe.default.apply(qe.default,lt)}},{key:"getText",value:function(Ke,rt){return this.getContents(Ke,rt).filter(function(it){return typeof it.insert=="string"}).map(function(it){return it.insert}).join("")}},{key:"insertEmbed",value:function(Ke,rt,it){return this.scroll.insertAt(Ke,rt,it),this.update(new me.default().retain(Ke).insert(Re({},rt,it)))}},{key:"insertText",value:function(Ke,rt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return rt=rt.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(Ke,rt),Object.keys(at).forEach(function(lt){it.scroll.formatAt(Ke,rt.length,lt,at[lt])}),this.update(new me.default().retain(Ke).insert(rt,(0,nt.default)(at)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var Ke=this.scroll.children.head;return Ke.statics.blotName!==We.default.blotName||Ke.children.length>1?!1:Ke.children.head instanceof Xe.default}},{key:"removeFormat",value:function(Ke,rt){var it=this.getText(Ke,rt),at=this.scroll.line(Ke+rt),lt=Ae(at,2),ct=lt[0],ot=lt[1],ft=0,dt=new me.default;ct!=null&&(ct instanceof Ie.default?ft=ct.newlineIndex(ot)-ot+1:ft=ct.length()-ot,dt=ct.delta().slice(ot,ot+ft-1).insert(`
`));var mt=this.getContents(Ke,rt+ft),kt=mt.diff(new me.default().insert(it).concat(dt)),wt=new me.default().retain(Ke).concat(kt);return this.applyDelta(wt)}},{key:"update",value:function(Ke){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,at=this.delta;if(rt.length===1&&rt[0].type==="characterData"&&rt[0].target.data.match(Ne)&&_e.default.find(rt[0].target)){var lt=_e.default.find(rt[0].target),ct=(0,je.bubbleFormats)(lt),ot=lt.offset(this.scroll),ft=rt[0].oldValue.replace(ke.default.CONTENTS,""),dt=new me.default().insert(ft),mt=new me.default().insert(lt.value()),kt=new me.default().retain(ot).concat(dt.diff(mt,it));Ke=kt.reduce(function(wt,Et){return Et.insert?wt.insert(Et.insert,ct):wt.push(Et)},new me.default),this.delta=at.compose(Ke)}else this.delta=this.getDelta(),(!Ke||!(0,tt.default)(at.compose(Ke),this.delta))&&(Ke=at.diff(this.delta,it));return Ke}}]),Qe}();function Ge(Qe,Te){return Object.keys(Te).reduce(function(Ke,rt){return Qe[rt]==null||(Te[rt]===Qe[rt]?Ke[rt]=Te[rt]:Array.isArray(Te[rt])?Te[rt].indexOf(Qe[rt])<0&&(Ke[rt]=Te[rt].concat([Qe[rt]])):Ke[rt]=[Te[rt],Qe[rt]]),Ke},{})}function Ye(Qe){return Qe.reduce(function(Te,Ke){if(Ke.insert===1){var rt=(0,nt.default)(Ke.attributes);return delete rt.image,Te.insert({image:Ke.attributes.image},rt)}if(Ke.attributes!=null&&(Ke.attributes.list===!0||Ke.attributes.bullet===!0)&&(Ke=(0,nt.default)(Ke),Ke.attributes.list?Ke.attributes.list="ordered":(Ke.attributes.list="bullet",delete Ke.attributes.bullet)),typeof Ke.insert=="string"){var it=Ke.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return Te.insert(it,Ke.attributes)}return Te.push(Ke)},new me.default)}oe.default=Ue},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.Range=void 0;var ue=function(){function et(tt,st){var qe=[],Se=!0,Re=!1,Be=void 0;try{for(var Ne=tt[Symbol.iterator](),Ue;!(Se=(Ue=Ne.next()).done)&&(qe.push(Ue.value),!(st&&qe.length===st));Se=!0);}catch(Ge){Re=!0,Be=Ge}finally{try{!Se&&Ne.return&&Ne.return()}finally{if(Re)throw Be}}return qe}return function(tt,st){if(Array.isArray(tt))return tt;if(Symbol.iterator in Object(tt))return et(tt,st);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function(){function et(tt,st){for(var qe=0;qe<st.length;qe++){var Se=st[qe];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(tt,Se.key,Se)}}return function(tt,st,qe){return st&&et(tt.prototype,st),qe&&et(tt,qe),tt}}(),pe=ce(0),ve=ke(pe),me=ce(21),ge=ke(me),ye=ce(11),xe=ke(ye),_e=ce(8),$e=ke(_e),Ie=ce(10),Fe=ke(Ie);function ke(et){return et&&et.__esModule?et:{default:et}}function je(et){if(Array.isArray(et)){for(var tt=0,st=Array(et.length);tt<et.length;tt++)st[tt]=et[tt];return st}else return Array.from(et)}function We(et,tt){if(!(et instanceof tt))throw new TypeError("Cannot call a class as a function")}var ze=(0,Fe.default)("quill:selection"),Xe=function et(tt){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;We(this,et),this.index=tt,this.length=st},Je=function(){function et(tt,st){var qe=this;We(this,et),this.emitter=st,this.scroll=tt,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=ve.default.create("cursor",this),this.lastRange=this.savedRange=new Xe(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){qe.mouseDown||setTimeout(qe.update.bind(qe,$e.default.sources.USER),1)}),this.emitter.on($e.default.events.EDITOR_CHANGE,function(Se,Re){Se===$e.default.events.TEXT_CHANGE&&Re.length()>0&&qe.update($e.default.sources.SILENT)}),this.emitter.on($e.default.events.SCROLL_BEFORE_UPDATE,function(){if(qe.hasFocus()){var Se=qe.getNativeRange();Se!=null&&Se.start.node!==qe.cursor.textNode&&qe.emitter.once($e.default.events.SCROLL_UPDATE,function(){try{qe.setNativeRange(Se.start.node,Se.start.offset,Se.end.node,Se.end.offset)}catch{}})}}),this.emitter.on($e.default.events.SCROLL_OPTIMIZE,function(Se,Re){if(Re.range){var Be=Re.range,Ne=Be.startNode,Ue=Be.startOffset,Ge=Be.endNode,Ye=Be.endOffset;qe.setNativeRange(Ne,Ue,Ge,Ye)}}),this.update($e.default.sources.SILENT)}return Ae(et,[{key:"handleComposition",value:function(){var st=this;this.root.addEventListener("compositionstart",function(){st.composing=!0}),this.root.addEventListener("compositionend",function(){if(st.composing=!1,st.cursor.parent){var qe=st.cursor.restore();if(!qe)return;setTimeout(function(){st.setNativeRange(qe.startNode,qe.startOffset,qe.endNode,qe.endOffset)},1)}})}},{key:"handleDragging",value:function(){var st=this;this.emitter.listenDOM("mousedown",document.body,function(){st.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){st.mouseDown=!1,st.update($e.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(st,qe){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[st])){this.scroll.update();var Se=this.getNativeRange();if(!(Se==null||!Se.native.collapsed||ve.default.query(st,ve.default.Scope.BLOCK))){if(Se.start.node!==this.cursor.textNode){var Re=ve.default.find(Se.start.node,!1);if(Re==null)return;if(Re instanceof ve.default.Leaf){var Be=Re.split(Se.start.offset);Re.parent.insertBefore(this.cursor,Be)}else Re.insertBefore(this.cursor,Se.start.node);this.cursor.attach()}this.cursor.format(st,qe),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(st){var qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Se=this.scroll.length();st=Math.min(st,Se-1),qe=Math.min(st+qe,Se-1)-st;var Re=void 0,Be=this.scroll.leaf(st),Ne=ue(Be,2),Ue=Ne[0],Ge=Ne[1];if(Ue==null)return null;var Ye=Ue.position(Ge,!0),Qe=ue(Ye,2);Re=Qe[0],Ge=Qe[1];var Te=document.createRange();if(qe>0){Te.setStart(Re,Ge);var Ke=this.scroll.leaf(st+qe),rt=ue(Ke,2);if(Ue=rt[0],Ge=rt[1],Ue==null)return null;var it=Ue.position(Ge,!0),at=ue(it,2);return Re=at[0],Ge=at[1],Te.setEnd(Re,Ge),Te.getBoundingClientRect()}else{var lt="left",ct=void 0;return Re instanceof Text?(Ge<Re.data.length?(Te.setStart(Re,Ge),Te.setEnd(Re,Ge+1)):(Te.setStart(Re,Ge-1),Te.setEnd(Re,Ge),lt="right"),ct=Te.getBoundingClientRect()):(ct=Ue.domNode.getBoundingClientRect(),Ge>0&&(lt="right")),{bottom:ct.top+ct.height,height:ct.height,left:ct[lt],right:ct[lt],top:ct.top,width:0}}}},{key:"getNativeRange",value:function(){var st=document.getSelection();if(st==null||st.rangeCount<=0)return null;var qe=st.getRangeAt(0);if(qe==null)return null;var Se=this.normalizeNative(qe);return ze.info("getNativeRange",Se),Se}},{key:"getRange",value:function(){var st=this.getNativeRange();if(st==null)return[null,null];var qe=this.normalizedToRange(st);return[qe,st]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(st){var qe=this,Se=[[st.start.node,st.start.offset]];st.native.collapsed||Se.push([st.end.node,st.end.offset]);var Re=Se.map(function(Ue){var Ge=ue(Ue,2),Ye=Ge[0],Qe=Ge[1],Te=ve.default.find(Ye,!0),Ke=Te.offset(qe.scroll);return Qe===0?Ke:Te instanceof ve.default.Container?Ke+Te.length():Ke+Te.index(Ye,Qe)}),Be=Math.min(Math.max.apply(Math,je(Re)),this.scroll.length()-1),Ne=Math.min.apply(Math,[Be].concat(je(Re)));return new Xe(Ne,Be-Ne)}},{key:"normalizeNative",value:function(st){if(!nt(this.root,st.startContainer)||!st.collapsed&&!nt(this.root,st.endContainer))return null;var qe={start:{node:st.startContainer,offset:st.startOffset},end:{node:st.endContainer,offset:st.endOffset},native:st};return[qe.start,qe.end].forEach(function(Se){for(var Re=Se.node,Be=Se.offset;!(Re instanceof Text)&&Re.childNodes.length>0;)if(Re.childNodes.length>Be)Re=Re.childNodes[Be],Be=0;else if(Re.childNodes.length===Be)Re=Re.lastChild,Be=Re instanceof Text?Re.data.length:Re.childNodes.length+1;else break;Se.node=Re,Se.offset=Be}),qe}},{key:"rangeToNative",value:function(st){var qe=this,Se=st.collapsed?[st.index]:[st.index,st.index+st.length],Re=[],Be=this.scroll.length();return Se.forEach(function(Ne,Ue){Ne=Math.min(Be-1,Ne);var Ge=void 0,Ye=qe.scroll.leaf(Ne),Qe=ue(Ye,2),Te=Qe[0],Ke=Qe[1],rt=Te.position(Ke,Ue!==0),it=ue(rt,2);Ge=it[0],Ke=it[1],Re.push(Ge,Ke)}),Re.length<2&&(Re=Re.concat(Re)),Re}},{key:"scrollIntoView",value:function(st){var qe=this.lastRange;if(qe!=null){var Se=this.getBounds(qe.index,qe.length);if(Se!=null){var Re=this.scroll.length()-1,Be=this.scroll.line(Math.min(qe.index,Re)),Ne=ue(Be,1),Ue=Ne[0],Ge=Ue;if(qe.length>0){var Ye=this.scroll.line(Math.min(qe.index+qe.length,Re)),Qe=ue(Ye,1);Ge=Qe[0]}if(!(Ue==null||Ge==null)){var Te=st.getBoundingClientRect();Se.top<Te.top?st.scrollTop-=Te.top-Se.top:Se.bottom>Te.bottom&&(st.scrollTop+=Se.bottom-Te.bottom)}}}}},{key:"setNativeRange",value:function(st,qe){var Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:st,Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:qe,Be=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(ze.info("setNativeRange",st,qe,Se,Re),!(st!=null&&(this.root.parentNode==null||st.parentNode==null||Se.parentNode==null))){var Ne=document.getSelection();if(Ne!=null)if(st!=null){this.hasFocus()||this.root.focus();var Ue=(this.getNativeRange()||{}).native;if(Ue==null||Be||st!==Ue.startContainer||qe!==Ue.startOffset||Se!==Ue.endContainer||Re!==Ue.endOffset){st.tagName=="BR"&&(qe=[].indexOf.call(st.parentNode.childNodes,st),st=st.parentNode),Se.tagName=="BR"&&(Re=[].indexOf.call(Se.parentNode.childNodes,Se),Se=Se.parentNode);var Ge=document.createRange();Ge.setStart(st,qe),Ge.setEnd(Se,Re),Ne.removeAllRanges(),Ne.addRange(Ge)}}else Ne.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(st){var qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$e.default.sources.API;if(typeof qe=="string"&&(Se=qe,qe=!1),ze.info("setRange",st),st!=null){var Re=this.rangeToNative(st);this.setNativeRange.apply(this,je(Re).concat([qe]))}else this.setNativeRange(null);this.update(Se)}},{key:"update",value:function(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$e.default.sources.USER,qe=this.lastRange,Se=this.getRange(),Re=ue(Se,2),Be=Re[0],Ne=Re[1];if(this.lastRange=Be,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,xe.default)(qe,this.lastRange)){var Ue;!this.composing&&Ne!=null&&Ne.native.collapsed&&Ne.start.node!==this.cursor.textNode&&this.cursor.restore();var Ge=[$e.default.events.SELECTION_CHANGE,(0,ge.default)(this.lastRange),(0,ge.default)(qe),st];if((Ue=this.emitter).emit.apply(Ue,[$e.default.events.EDITOR_CHANGE].concat(Ge)),st!==$e.default.sources.SILENT){var Ye;(Ye=this.emitter).emit.apply(Ye,Ge)}}}}]),et}();function nt(et,tt){try{tt.parentNode}catch{return!1}return tt instanceof Text&&(tt=tt.parentNode),et.contains(tt)}oe.Range=Xe,oe.default=Je},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function $e(Ie,Fe){for(var ke=0;ke<Fe.length;ke++){var je=Fe[ke];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(Ie,je.key,je)}}return function(Ie,Fe,ke){return Fe&&$e(Ie.prototype,Fe),ke&&$e(Ie,ke),Ie}}(),Ae=function $e(Ie,Fe,ke){Ie===null&&(Ie=Function.prototype);var je=Object.getOwnPropertyDescriptor(Ie,Fe);if(je===void 0){var We=Object.getPrototypeOf(Ie);return We===null?void 0:$e(We,Fe,ke)}else{if("value"in je)return je.value;var ze=je.get;return ze===void 0?void 0:ze.call(ke)}},pe=ce(0),ve=me(pe);function me($e){return $e&&$e.__esModule?$e:{default:$e}}function ge($e,Ie){if(!($e instanceof Ie))throw new TypeError("Cannot call a class as a function")}function ye($e,Ie){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie&&(typeof Ie=="object"||typeof Ie=="function")?Ie:$e}function xe($e,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);$e.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf($e,Ie):$e.__proto__=Ie)}var _e=function($e){xe(Ie,$e);function Ie(){return ge(this,Ie),ye(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).apply(this,arguments))}return ue(Ie,[{key:"insertInto",value:function(ke,je){ke.children.length===0?Ae(Ie.prototype.__proto__||Object.getPrototypeOf(Ie.prototype),"insertInto",this).call(this,ke,je):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),Ie}(ve.default.Embed);_e.blotName="break",_e.tagName="BR",oe.default=_e},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,_e){xe.__proto__=_e}||function(xe,_e){for(var $e in _e)_e.hasOwnProperty($e)&&(xe[$e]=_e[$e])};return function(xe,_e){ye(xe,_e);function $e(){this.constructor=xe}xe.prototype=_e===null?Object.create(_e):($e.prototype=_e.prototype,new $e)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(44),pe=ce(30),ve=ce(1),me=function(ye){ue(xe,ye);function xe(_e){var $e=ye.call(this,_e)||this;return $e.build(),$e}return xe.prototype.appendChild=function(_e){this.insertBefore(_e)},xe.prototype.attach=function(){ye.prototype.attach.call(this),this.children.forEach(function(_e){_e.attach()})},xe.prototype.build=function(){var _e=this;this.children=new Ae.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function($e){try{var Ie=ge($e);_e.insertBefore(Ie,_e.children.head||void 0)}catch(Fe){if(Fe instanceof ve.ParchmentError)return;throw Fe}})},xe.prototype.deleteAt=function(_e,$e){if(_e===0&&$e===this.length())return this.remove();this.children.forEachAt(_e,$e,function(Ie,Fe,ke){Ie.deleteAt(Fe,ke)})},xe.prototype.descendant=function(_e,$e){var Ie=this.children.find($e),Fe=Ie[0],ke=Ie[1];return _e.blotName==null&&_e(Fe)||_e.blotName!=null&&Fe instanceof _e?[Fe,ke]:Fe instanceof xe?Fe.descendant(_e,ke):[null,-1]},xe.prototype.descendants=function(_e,$e,Ie){$e===void 0&&($e=0),Ie===void 0&&(Ie=Number.MAX_VALUE);var Fe=[],ke=Ie;return this.children.forEachAt($e,Ie,function(je,We,ze){(_e.blotName==null&&_e(je)||_e.blotName!=null&&je instanceof _e)&&Fe.push(je),je instanceof xe&&(Fe=Fe.concat(je.descendants(_e,We,ke))),ke-=ze}),Fe},xe.prototype.detach=function(){this.children.forEach(function(_e){_e.detach()}),ye.prototype.detach.call(this)},xe.prototype.formatAt=function(_e,$e,Ie,Fe){this.children.forEachAt(_e,$e,function(ke,je,We){ke.formatAt(je,We,Ie,Fe)})},xe.prototype.insertAt=function(_e,$e,Ie){var Fe=this.children.find(_e),ke=Fe[0],je=Fe[1];if(ke)ke.insertAt(je,$e,Ie);else{var We=Ie==null?ve.create("text",$e):ve.create($e,Ie);this.appendChild(We)}},xe.prototype.insertBefore=function(_e,$e){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(Ie){return _e instanceof Ie}))throw new ve.ParchmentError("Cannot insert "+_e.statics.blotName+" into "+this.statics.blotName);_e.insertInto(this,$e)},xe.prototype.length=function(){return this.children.reduce(function(_e,$e){return _e+$e.length()},0)},xe.prototype.moveChildren=function(_e,$e){this.children.forEach(function(Ie){_e.insertBefore(Ie,$e)})},xe.prototype.optimize=function(_e){if(ye.prototype.optimize.call(this,_e),this.children.length===0)if(this.statics.defaultChild!=null){var $e=ve.create(this.statics.defaultChild);this.appendChild($e),$e.optimize(_e)}else this.remove()},xe.prototype.path=function(_e,$e){$e===void 0&&($e=!1);var Ie=this.children.find(_e,$e),Fe=Ie[0],ke=Ie[1],je=[[this,_e]];return Fe instanceof xe?je.concat(Fe.path(ke,$e)):(Fe!=null&&je.push([Fe,ke]),je)},xe.prototype.removeChild=function(_e){this.children.remove(_e)},xe.prototype.replace=function(_e){_e instanceof xe&&_e.moveChildren(this),ye.prototype.replace.call(this,_e)},xe.prototype.split=function(_e,$e){if($e===void 0&&($e=!1),!$e){if(_e===0)return this;if(_e===this.length())return this.next}var Ie=this.clone();return this.parent.insertBefore(Ie,this.next),this.children.forEachAt(_e,this.length(),function(Fe,ke,je){Fe=Fe.split(ke,$e),Ie.appendChild(Fe)}),Ie},xe.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},xe.prototype.update=function(_e,$e){var Ie=this,Fe=[],ke=[];_e.forEach(function(je){je.target===Ie.domNode&&je.type==="childList"&&(Fe.push.apply(Fe,je.addedNodes),ke.push.apply(ke,je.removedNodes))}),ke.forEach(function(je){if(!(je.parentNode!=null&&je.tagName!=="IFRAME"&&document.body.compareDocumentPosition(je)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var We=ve.find(je);We!=null&&(We.domNode.parentNode==null||We.domNode.parentNode===Ie.domNode)&&We.detach()}}),Fe.filter(function(je){return je.parentNode==Ie.domNode}).sort(function(je,We){return je===We?0:je.compareDocumentPosition(We)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(je){var We=null;je.nextSibling!=null&&(We=ve.find(je.nextSibling));var ze=ge(je);(ze.next!=We||ze.next==null)&&(ze.parent!=null&&ze.parent.removeChild(Ie),Ie.insertBefore(ze,We||void 0))})},xe}(pe.default);function ge(ye){var xe=ve.find(ye);if(xe==null)try{xe=ve.create(ye)}catch{xe=ve.create(ve.Scope.INLINE),[].slice.call(ye.childNodes).forEach(function($e){xe.domNode.appendChild($e)}),ye.parentNode&&ye.parentNode.replaceChild(xe.domNode,ye),xe.attach()}return xe}oe.default=me},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,_e){xe.__proto__=_e}||function(xe,_e){for(var $e in _e)_e.hasOwnProperty($e)&&(xe[$e]=_e[$e])};return function(xe,_e){ye(xe,_e);function $e(){this.constructor=xe}xe.prototype=_e===null?Object.create(_e):($e.prototype=_e.prototype,new $e)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(12),pe=ce(31),ve=ce(17),me=ce(1),ge=function(ye){ue(xe,ye);function xe(_e){var $e=ye.call(this,_e)||this;return $e.attributes=new pe.default($e.domNode),$e}return xe.formats=function(_e){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return _e.tagName.toLowerCase()},xe.prototype.format=function(_e,$e){var Ie=me.query(_e);Ie instanceof Ae.default?this.attributes.attribute(Ie,$e):$e&&Ie!=null&&(_e!==this.statics.blotName||this.formats()[_e]!==$e)&&this.replaceWith(_e,$e)},xe.prototype.formats=function(){var _e=this.attributes.values(),$e=this.statics.formats(this.domNode);return $e!=null&&(_e[this.statics.blotName]=$e),_e},xe.prototype.replaceWith=function(_e,$e){var Ie=ye.prototype.replaceWith.call(this,_e,$e);return this.attributes.copy(Ie),Ie},xe.prototype.update=function(_e,$e){var Ie=this;ye.prototype.update.call(this,_e,$e),_e.some(function(Fe){return Fe.target===Ie.domNode&&Fe.type==="attributes"})&&this.attributes.build()},xe.prototype.wrap=function(_e,$e){var Ie=ye.prototype.wrap.call(this,_e,$e);return Ie instanceof xe&&Ie.statics.scope===this.statics.scope&&this.attributes.move(Ie),Ie},xe}(ve.default);oe.default=ge},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var xe in ye)ye.hasOwnProperty(xe)&&(ge[xe]=ye[xe])};return function(ge,ye){me(ge,ye);function xe(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(xe.prototype=ye.prototype,new xe)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(30),pe=ce(1),ve=function(me){ue(ge,me);function ge(){return me!==null&&me.apply(this,arguments)||this}return ge.value=function(ye){return!0},ge.prototype.index=function(ye,xe){return this.domNode===ye||this.domNode.compareDocumentPosition(ye)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(xe,1):-1},ge.prototype.position=function(ye,xe){var _e=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return ye>0&&(_e+=1),[this.parent.domNode,_e]},ge.prototype.value=function(){var ye;return ye={},ye[this.statics.blotName]=this.statics.value(this.domNode)||!0,ye},ge.scope=pe.Scope.INLINE_BLOT,ge}(Ae.default);oe.default=ve},function(ne,oe,ce){var ue=ce(11),Ae=ce(3),pe={attributes:{compose:function(me,ge,ye){typeof me!="object"&&(me={}),typeof ge!="object"&&(ge={});var xe=Ae(!0,{},ge);ye||(xe=Object.keys(xe).reduce(function($e,Ie){return xe[Ie]!=null&&($e[Ie]=xe[Ie]),$e},{}));for(var _e in me)me[_e]!==void 0&&ge[_e]===void 0&&(xe[_e]=me[_e]);return Object.keys(xe).length>0?xe:void 0},diff:function(me,ge){typeof me!="object"&&(me={}),typeof ge!="object"&&(ge={});var ye=Object.keys(me).concat(Object.keys(ge)).reduce(function(xe,_e){return ue(me[_e],ge[_e])||(xe[_e]=ge[_e]===void 0?null:ge[_e]),xe},{});return Object.keys(ye).length>0?ye:void 0},transform:function(me,ge,ye){if(typeof me!="object")return ge;if(typeof ge=="object"){if(!ye)return ge;var xe=Object.keys(ge).reduce(function(_e,$e){return me[$e]===void 0&&(_e[$e]=ge[$e]),_e},{});return Object.keys(xe).length>0?xe:void 0}}},iterator:function(me){return new ve(me)},length:function(me){return typeof me.delete=="number"?me.delete:typeof me.retain=="number"?me.retain:typeof me.insert=="string"?me.insert.length:1}};function ve(me){this.ops=me,this.index=0,this.offset=0}ve.prototype.hasNext=function(){return this.peekLength()<1/0},ve.prototype.next=function(me){me||(me=1/0);var ge=this.ops[this.index];if(ge){var ye=this.offset,xe=pe.length(ge);if(me>=xe-ye?(me=xe-ye,this.index+=1,this.offset=0):this.offset+=me,typeof ge.delete=="number")return{delete:me};var _e={};return ge.attributes&&(_e.attributes=ge.attributes),typeof ge.retain=="number"?_e.retain=me:typeof ge.insert=="string"?_e.insert=ge.insert.substr(ye,me):_e.insert=ge.insert,_e}else return{retain:1/0}},ve.prototype.peek=function(){return this.ops[this.index]},ve.prototype.peekLength=function(){return this.ops[this.index]?pe.length(this.ops[this.index])-this.offset:1/0},ve.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},ve.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var me=this.offset,ge=this.index,ye=this.next(),xe=this.ops.slice(this.index);return this.offset=me,this.index=ge,[ye].concat(xe)}else return[]},ne.exports=pe},function(ne,oe){var ce=function(){function ue(Ie,Fe){return Fe!=null&&Ie instanceof Fe}var Ae;try{Ae=Map}catch{Ae=function(){}}var pe;try{pe=Set}catch{pe=function(){}}var ve;try{ve=Promise}catch{ve=function(){}}function me(Ie,Fe,ke,je,We){typeof Fe=="object"&&(ke=Fe.depth,je=Fe.prototype,We=Fe.includeNonEnumerable,Fe=Fe.circular);var ze=[],Xe=[],Je=typeof Buffer<"u";typeof Fe>"u"&&(Fe=!0),typeof ke>"u"&&(ke=1/0);function nt(et,tt){if(et===null)return null;if(tt===0)return et;var st,qe;if(typeof et!="object")return et;if(ue(et,Ae))st=new Ae;else if(ue(et,pe))st=new pe;else if(ue(et,ve))st=new ve(function(Te,Ke){et.then(function(rt){Te(nt(rt,tt-1))},function(rt){Ke(nt(rt,tt-1))})});else if(me.__isArray(et))st=[];else if(me.__isRegExp(et))st=new RegExp(et.source,$e(et)),et.lastIndex&&(st.lastIndex=et.lastIndex);else if(me.__isDate(et))st=new Date(et.getTime());else{if(Je&&Buffer.isBuffer(et))return Buffer.allocUnsafe?st=Buffer.allocUnsafe(et.length):st=new Buffer(et.length),et.copy(st),st;ue(et,Error)?st=Object.create(et):typeof je>"u"?(qe=Object.getPrototypeOf(et),st=Object.create(qe)):(st=Object.create(je),qe=je)}if(Fe){var Se=ze.indexOf(et);if(Se!=-1)return Xe[Se];ze.push(et),Xe.push(st)}ue(et,Ae)&&et.forEach(function(Te,Ke){var rt=nt(Ke,tt-1),it=nt(Te,tt-1);st.set(rt,it)}),ue(et,pe)&&et.forEach(function(Te){var Ke=nt(Te,tt-1);st.add(Ke)});for(var Re in et){var Be;qe&&(Be=Object.getOwnPropertyDescriptor(qe,Re)),!(Be&&Be.set==null)&&(st[Re]=nt(et[Re],tt-1))}if(Object.getOwnPropertySymbols)for(var Ne=Object.getOwnPropertySymbols(et),Re=0;Re<Ne.length;Re++){var Ue=Ne[Re],Ge=Object.getOwnPropertyDescriptor(et,Ue);Ge&&!Ge.enumerable&&!We||(st[Ue]=nt(et[Ue],tt-1),Ge.enumerable||Object.defineProperty(st,Ue,{enumerable:!1}))}if(We)for(var Ye=Object.getOwnPropertyNames(et),Re=0;Re<Ye.length;Re++){var Qe=Ye[Re],Ge=Object.getOwnPropertyDescriptor(et,Qe);Ge&&Ge.enumerable||(st[Qe]=nt(et[Qe],tt-1),Object.defineProperty(st,Qe,{enumerable:!1}))}return st}return nt(Ie,ke)}me.clonePrototype=function(Fe){if(Fe===null)return null;var ke=function(){};return ke.prototype=Fe,new ke};function ge(Ie){return Object.prototype.toString.call(Ie)}me.__objToStr=ge;function ye(Ie){return typeof Ie=="object"&&ge(Ie)==="[object Date]"}me.__isDate=ye;function xe(Ie){return typeof Ie=="object"&&ge(Ie)==="[object Array]"}me.__isArray=xe;function _e(Ie){return typeof Ie=="object"&&ge(Ie)==="[object RegExp]"}me.__isRegExp=_e;function $e(Ie){var Fe="";return Ie.global&&(Fe+="g"),Ie.ignoreCase&&(Fe+="i"),Ie.multiline&&(Fe+="m"),Fe}return me.__getRegExpFlags=$e,me}();typeof ne=="object"&&ne.exports&&(ne.exports=ce)},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function st(qe,Se){var Re=[],Be=!0,Ne=!1,Ue=void 0;try{for(var Ge=qe[Symbol.iterator](),Ye;!(Be=(Ye=Ge.next()).done)&&(Re.push(Ye.value),!(Se&&Re.length===Se));Be=!0);}catch(Qe){Ne=!0,Ue=Qe}finally{try{!Be&&Ge.return&&Ge.return()}finally{if(Ne)throw Ue}}return Re}return function(qe,Se){if(Array.isArray(qe))return qe;if(Symbol.iterator in Object(qe))return st(qe,Se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function(){function st(qe,Se){for(var Re=0;Re<Se.length;Re++){var Be=Se[Re];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(qe,Be.key,Be)}}return function(qe,Se,Re){return Se&&st(qe.prototype,Se),Re&&st(qe,Re),qe}}(),pe=function st(qe,Se,Re){qe===null&&(qe=Function.prototype);var Be=Object.getOwnPropertyDescriptor(qe,Se);if(Be===void 0){var Ne=Object.getPrototypeOf(qe);return Ne===null?void 0:st(Ne,Se,Re)}else{if("value"in Be)return Be.value;var Ue=Be.get;return Ue===void 0?void 0:Ue.call(Re)}},ve=ce(0),me=ze(ve),ge=ce(8),ye=ze(ge),xe=ce(4),_e=ze(xe),$e=ce(16),Ie=ze($e),Fe=ce(13),ke=ze(Fe),je=ce(25),We=ze(je);function ze(st){return st&&st.__esModule?st:{default:st}}function Xe(st,qe){if(!(st instanceof qe))throw new TypeError("Cannot call a class as a function")}function Je(st,qe){if(!st)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return qe&&(typeof qe=="object"||typeof qe=="function")?qe:st}function nt(st,qe){if(typeof qe!="function"&&qe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof qe);st.prototype=Object.create(qe&&qe.prototype,{constructor:{value:st,enumerable:!1,writable:!0,configurable:!0}}),qe&&(Object.setPrototypeOf?Object.setPrototypeOf(st,qe):st.__proto__=qe)}function et(st){return st instanceof _e.default||st instanceof xe.BlockEmbed}var tt=function(st){nt(qe,st);function qe(Se,Re){Xe(this,qe);var Be=Je(this,(qe.__proto__||Object.getPrototypeOf(qe)).call(this,Se));return Be.emitter=Re.emitter,Array.isArray(Re.whitelist)&&(Be.whitelist=Re.whitelist.reduce(function(Ne,Ue){return Ne[Ue]=!0,Ne},{})),Be.domNode.addEventListener("DOMNodeInserted",function(){}),Be.optimize(),Be.enable(),Be}return Ae(qe,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(Re,Be){var Ne=this.line(Re),Ue=ue(Ne,2),Ge=Ue[0],Ye=Ue[1],Qe=this.line(Re+Be),Te=ue(Qe,1),Ke=Te[0];if(pe(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"deleteAt",this).call(this,Re,Be),Ke!=null&&Ge!==Ke&&Ye>0){if(Ge instanceof xe.BlockEmbed||Ke instanceof xe.BlockEmbed){this.optimize();return}if(Ge instanceof ke.default){var rt=Ge.newlineIndex(Ge.length(),!0);if(rt>-1&&(Ge=Ge.split(rt+1),Ge===Ke)){this.optimize();return}}else if(Ke instanceof ke.default){var it=Ke.newlineIndex(0);it>-1&&Ke.split(it+1)}var at=Ke.children.head instanceof Ie.default?null:Ke.children.head;Ge.moveChildren(Ke,at),Ge.remove()}this.optimize()}},{key:"enable",value:function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",Re)}},{key:"formatAt",value:function(Re,Be,Ne,Ue){this.whitelist!=null&&!this.whitelist[Ne]||(pe(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"formatAt",this).call(this,Re,Be,Ne,Ue),this.optimize())}},{key:"insertAt",value:function(Re,Be,Ne){if(!(Ne!=null&&this.whitelist!=null&&!this.whitelist[Be])){if(Re>=this.length())if(Ne==null||me.default.query(Be,me.default.Scope.BLOCK)==null){var Ue=me.default.create(this.statics.defaultChild);this.appendChild(Ue),Ne==null&&Be.endsWith(`
`)&&(Be=Be.slice(0,-1)),Ue.insertAt(0,Be,Ne)}else{var Ge=me.default.create(Be,Ne);this.appendChild(Ge)}else pe(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"insertAt",this).call(this,Re,Be,Ne);this.optimize()}}},{key:"insertBefore",value:function(Re,Be){if(Re.statics.scope===me.default.Scope.INLINE_BLOT){var Ne=me.default.create(this.statics.defaultChild);Ne.appendChild(Re),Re=Ne}pe(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"insertBefore",this).call(this,Re,Be)}},{key:"leaf",value:function(Re){return this.path(Re).pop()||[null,-1]}},{key:"line",value:function(Re){return Re===this.length()?this.line(Re-1):this.descendant(et,Re)}},{key:"lines",value:function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Ne=function Ue(Ge,Ye,Qe){var Te=[],Ke=Qe;return Ge.children.forEachAt(Ye,Qe,function(rt,it,at){et(rt)?Te.push(rt):rt instanceof me.default.Container&&(Te=Te.concat(Ue(rt,it,Ke))),Ke-=at}),Te};return Ne(this,Re,Be)}},{key:"optimize",value:function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(pe(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"optimize",this).call(this,Re,Be),Re.length>0&&this.emitter.emit(ye.default.events.SCROLL_OPTIMIZE,Re,Be))}},{key:"path",value:function(Re){return pe(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"path",this).call(this,Re).slice(1)}},{key:"update",value:function(Re){if(this.batch!==!0){var Be=ye.default.sources.USER;typeof Re=="string"&&(Be=Re),Array.isArray(Re)||(Re=this.observer.takeRecords()),Re.length>0&&this.emitter.emit(ye.default.events.SCROLL_BEFORE_UPDATE,Be,Re),pe(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"update",this).call(this,Re.concat([])),Re.length>0&&this.emitter.emit(ye.default.events.SCROLL_UPDATE,Be,Re)}}}]),qe}(me.default.Scroll);tt.blotName="scroll",tt.className="ql-editor",tt.tagName="DIV",tt.defaultChild="block",tt.allowedChildren=[_e.default,xe.BlockEmbed,We.default],oe.default=tt},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.SHORTKEY=oe.default=void 0;var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ct){return typeof ct}:function(ct){return ct&&typeof Symbol=="function"&&ct.constructor===Symbol&&ct!==Symbol.prototype?"symbol":typeof ct},Ae=function(){function ct(ot,ft){var dt=[],mt=!0,kt=!1,wt=void 0;try{for(var Et=ot[Symbol.iterator](),Ot;!(mt=(Ot=Et.next()).done)&&(dt.push(Ot.value),!(ft&&dt.length===ft));mt=!0);}catch(Rt){kt=!0,wt=Rt}finally{try{!mt&&Et.return&&Et.return()}finally{if(kt)throw wt}}return dt}return function(ot,ft){if(Array.isArray(ot))return ot;if(Symbol.iterator in Object(ot))return ct(ot,ft);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function ct(ot,ft){for(var dt=0;dt<ft.length;dt++){var mt=ft[dt];mt.enumerable=mt.enumerable||!1,mt.configurable=!0,"value"in mt&&(mt.writable=!0),Object.defineProperty(ot,mt.key,mt)}}return function(ot,ft,dt){return ft&&ct(ot.prototype,ft),dt&&ct(ot,dt),ot}}(),ve=ce(21),me=st(ve),ge=ce(11),ye=st(ge),xe=ce(3),_e=st(xe),$e=ce(2),Ie=st($e),Fe=ce(20),ke=st(Fe),je=ce(0),We=st(je),ze=ce(5),Xe=st(ze),Je=ce(10),nt=st(Je),et=ce(9),tt=st(et);function st(ct){return ct&&ct.__esModule?ct:{default:ct}}function qe(ct,ot,ft){return ot in ct?Object.defineProperty(ct,ot,{value:ft,enumerable:!0,configurable:!0,writable:!0}):ct[ot]=ft,ct}function Se(ct,ot){if(!(ct instanceof ot))throw new TypeError("Cannot call a class as a function")}function Re(ct,ot){if(!ct)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ot&&(typeof ot=="object"||typeof ot=="function")?ot:ct}function Be(ct,ot){if(typeof ot!="function"&&ot!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ot);ct.prototype=Object.create(ot&&ot.prototype,{constructor:{value:ct,enumerable:!1,writable:!0,configurable:!0}}),ot&&(Object.setPrototypeOf?Object.setPrototypeOf(ct,ot):ct.__proto__=ot)}var Ne=(0,nt.default)("quill:keyboard"),Ue=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Ge=function(ct){Be(ot,ct),pe(ot,null,[{key:"match",value:function(dt,mt){return mt=lt(mt),["altKey","ctrlKey","metaKey","shiftKey"].some(function(kt){return!!mt[kt]!==dt[kt]&&mt[kt]!==null})?!1:mt.key===(dt.which||dt.keyCode)}}]);function ot(ft,dt){Se(this,ot);var mt=Re(this,(ot.__proto__||Object.getPrototypeOf(ot)).call(this,ft,dt));return mt.bindings={},Object.keys(mt.options.bindings).forEach(function(kt){kt==="list autofill"&&ft.scroll.whitelist!=null&&!ft.scroll.whitelist.list||mt.options.bindings[kt]&&mt.addBinding(mt.options.bindings[kt])}),mt.addBinding({key:ot.keys.ENTER,shiftKey:null},rt),mt.addBinding({key:ot.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(mt.addBinding({key:ot.keys.BACKSPACE},{collapsed:!0},Qe),mt.addBinding({key:ot.keys.DELETE},{collapsed:!0},Te)):(mt.addBinding({key:ot.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Qe),mt.addBinding({key:ot.keys.DELETE},{collapsed:!0,suffix:/^.?$/},Te)),mt.addBinding({key:ot.keys.BACKSPACE},{collapsed:!1},Ke),mt.addBinding({key:ot.keys.DELETE},{collapsed:!1},Ke),mt.addBinding({key:ot.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Qe),mt.listen(),mt}return pe(ot,[{key:"addBinding",value:function(dt){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},wt=lt(dt);if(wt==null||wt.key==null)return Ne.warn("Attempted to add invalid keyboard binding",wt);typeof mt=="function"&&(mt={handler:mt}),typeof kt=="function"&&(kt={handler:kt}),wt=(0,_e.default)(wt,mt,kt),this.bindings[wt.key]=this.bindings[wt.key]||[],this.bindings[wt.key].push(wt)}},{key:"listen",value:function(){var dt=this;this.quill.root.addEventListener("keydown",function(mt){if(!mt.defaultPrevented){var kt=mt.which||mt.keyCode,wt=(dt.bindings[kt]||[]).filter(function(Pt){return ot.match(mt,Pt)});if(wt.length!==0){var Et=dt.quill.getSelection();if(!(Et==null||!dt.quill.hasFocus())){var Ot=dt.quill.getLine(Et.index),Rt=Ae(Ot,2),gt=Rt[0],$t=Rt[1],pt=dt.quill.getLeaf(Et.index),vt=Ae(pt,2),Mt=vt[0],St=vt[1],_t=Et.length===0?[Mt,St]:dt.quill.getLeaf(Et.index+Et.length),Xt=Ae(_t,2),Tt=Xt[0],Dt=Xt[1],Ht=Mt instanceof We.default.Text?Mt.value().slice(0,St):"",Bt=Tt instanceof We.default.Text?Tt.value().slice(Dt):"",It={collapsed:Et.length===0,empty:Et.length===0&&gt.length()<=1,format:dt.quill.getFormat(Et),offset:$t,prefix:Ht,suffix:Bt},zt=wt.some(function(Pt){if(Pt.collapsed!=null&&Pt.collapsed!==It.collapsed||Pt.empty!=null&&Pt.empty!==It.empty||Pt.offset!=null&&Pt.offset!==It.offset)return!1;if(Array.isArray(Pt.format)){if(Pt.format.every(function(Vt){return It.format[Vt]==null}))return!1}else if(ue(Pt.format)==="object"&&!Object.keys(Pt.format).every(function(Vt){return Pt.format[Vt]===!0?It.format[Vt]!=null:Pt.format[Vt]===!1?It.format[Vt]==null:(0,ye.default)(Pt.format[Vt],It.format[Vt])}))return!1;return Pt.prefix!=null&&!Pt.prefix.test(It.prefix)||Pt.suffix!=null&&!Pt.suffix.test(It.suffix)?!1:Pt.handler.call(dt,Et,It)!==!0});zt&&mt.preventDefault()}}}})}}]),ot}(tt.default);Ge.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Ge.DEFAULTS={bindings:{bold:at("bold"),italic:at("italic"),underline:at("underline"),indent:{key:Ge.keys.TAB,format:["blockquote","indent","list"],handler:function(ot,ft){if(ft.collapsed&&ft.offset!==0)return!0;this.quill.format("indent","+1",Xe.default.sources.USER)}},outdent:{key:Ge.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ot,ft){if(ft.collapsed&&ft.offset!==0)return!0;this.quill.format("indent","-1",Xe.default.sources.USER)}},"outdent backspace":{key:Ge.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ot,ft){ft.format.indent!=null?this.quill.format("indent","-1",Xe.default.sources.USER):ft.format.list!=null&&this.quill.format("list",!1,Xe.default.sources.USER)}},"indent code-block":it(!0),"outdent code-block":it(!1),"remove tab":{key:Ge.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ot){this.quill.deleteText(ot.index-1,1,Xe.default.sources.USER)}},tab:{key:Ge.keys.TAB,handler:function(ot){this.quill.history.cutoff();var ft=new Ie.default().retain(ot.index).delete(ot.length).insert("	");this.quill.updateContents(ft,Xe.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ot.index+1,Xe.default.sources.SILENT)}},"list empty enter":{key:Ge.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ot,ft){this.quill.format("list",!1,Xe.default.sources.USER),ft.format.indent&&this.quill.format("indent",!1,Xe.default.sources.USER)}},"checklist enter":{key:Ge.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ot){var ft=this.quill.getLine(ot.index),dt=Ae(ft,2),mt=dt[0],kt=dt[1],wt=(0,_e.default)({},mt.formats(),{list:"checked"}),Et=new Ie.default().retain(ot.index).insert(`
`,wt).retain(mt.length()-kt-1).retain(1,{list:"unchecked"});this.quill.updateContents(Et,Xe.default.sources.USER),this.quill.setSelection(ot.index+1,Xe.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Ge.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ot,ft){var dt=this.quill.getLine(ot.index),mt=Ae(dt,2),kt=mt[0],wt=mt[1],Et=new Ie.default().retain(ot.index).insert(`
`,ft.format).retain(kt.length()-wt-1).retain(1,{header:null});this.quill.updateContents(Et,Xe.default.sources.USER),this.quill.setSelection(ot.index+1,Xe.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ot,ft){var dt=ft.prefix.length,mt=this.quill.getLine(ot.index),kt=Ae(mt,2),wt=kt[0],Et=kt[1];if(Et>dt)return!0;var Ot=void 0;switch(ft.prefix.trim()){case"[]":case"[ ]":Ot="unchecked";break;case"[x]":Ot="checked";break;case"-":case"*":Ot="bullet";break;default:Ot="ordered"}this.quill.insertText(ot.index," ",Xe.default.sources.USER),this.quill.history.cutoff();var Rt=new Ie.default().retain(ot.index-Et).delete(dt+1).retain(wt.length()-2-Et).retain(1,{list:Ot});this.quill.updateContents(Rt,Xe.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ot.index-dt,Xe.default.sources.SILENT)}},"code exit":{key:Ge.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ot){var ft=this.quill.getLine(ot.index),dt=Ae(ft,2),mt=dt[0],kt=dt[1],wt=new Ie.default().retain(ot.index+mt.length()-kt-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(wt,Xe.default.sources.USER)}},"embed left":Ye(Ge.keys.LEFT,!1),"embed left shift":Ye(Ge.keys.LEFT,!0),"embed right":Ye(Ge.keys.RIGHT,!1),"embed right shift":Ye(Ge.keys.RIGHT,!0)}};function Ye(ct,ot){var ft,dt=ct===Ge.keys.LEFT?"prefix":"suffix";return ft={key:ct,shiftKey:ot,altKey:null},qe(ft,dt,/^$/),qe(ft,"handler",function(kt){var wt=kt.index;ct===Ge.keys.RIGHT&&(wt+=kt.length+1);var Et=this.quill.getLeaf(wt),Ot=Ae(Et,1),Rt=Ot[0];return Rt instanceof We.default.Embed?(ct===Ge.keys.LEFT?ot?this.quill.setSelection(kt.index-1,kt.length+1,Xe.default.sources.USER):this.quill.setSelection(kt.index-1,Xe.default.sources.USER):ot?this.quill.setSelection(kt.index,kt.length+1,Xe.default.sources.USER):this.quill.setSelection(kt.index+kt.length+1,Xe.default.sources.USER),!1):!0}),ft}function Qe(ct,ot){if(!(ct.index===0||this.quill.getLength()<=1)){var ft=this.quill.getLine(ct.index),dt=Ae(ft,1),mt=dt[0],kt={};if(ot.offset===0){var wt=this.quill.getLine(ct.index-1),Et=Ae(wt,1),Ot=Et[0];if(Ot!=null&&Ot.length()>1){var Rt=mt.formats(),gt=this.quill.getFormat(ct.index-1,1);kt=ke.default.attributes.diff(Rt,gt)||{}}}var $t=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ot.prefix)?2:1;this.quill.deleteText(ct.index-$t,$t,Xe.default.sources.USER),Object.keys(kt).length>0&&this.quill.formatLine(ct.index-$t,$t,kt,Xe.default.sources.USER),this.quill.focus()}}function Te(ct,ot){var ft=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ot.suffix)?2:1;if(!(ct.index>=this.quill.getLength()-ft)){var dt={},mt=0,kt=this.quill.getLine(ct.index),wt=Ae(kt,1),Et=wt[0];if(ot.offset>=Et.length()-1){var Ot=this.quill.getLine(ct.index+1),Rt=Ae(Ot,1),gt=Rt[0];if(gt){var $t=Et.formats(),pt=this.quill.getFormat(ct.index,1);dt=ke.default.attributes.diff($t,pt)||{},mt=gt.length()}}this.quill.deleteText(ct.index,ft,Xe.default.sources.USER),Object.keys(dt).length>0&&this.quill.formatLine(ct.index+mt-1,ft,dt,Xe.default.sources.USER)}}function Ke(ct){var ot=this.quill.getLines(ct),ft={};if(ot.length>1){var dt=ot[0].formats(),mt=ot[ot.length-1].formats();ft=ke.default.attributes.diff(mt,dt)||{}}this.quill.deleteText(ct,Xe.default.sources.USER),Object.keys(ft).length>0&&this.quill.formatLine(ct.index,1,ft,Xe.default.sources.USER),this.quill.setSelection(ct.index,Xe.default.sources.SILENT),this.quill.focus()}function rt(ct,ot){var ft=this;ct.length>0&&this.quill.scroll.deleteAt(ct.index,ct.length);var dt=Object.keys(ot.format).reduce(function(mt,kt){return We.default.query(kt,We.default.Scope.BLOCK)&&!Array.isArray(ot.format[kt])&&(mt[kt]=ot.format[kt]),mt},{});this.quill.insertText(ct.index,`
`,dt,Xe.default.sources.USER),this.quill.setSelection(ct.index+1,Xe.default.sources.SILENT),this.quill.focus(),Object.keys(ot.format).forEach(function(mt){dt[mt]==null&&(Array.isArray(ot.format[mt])||mt!=="link"&&ft.quill.format(mt,ot.format[mt],Xe.default.sources.USER))})}function it(ct){return{key:Ge.keys.TAB,shiftKey:!ct,format:{"code-block":!0},handler:function(ft){var dt=We.default.query("code-block"),mt=ft.index,kt=ft.length,wt=this.quill.scroll.descendant(dt,mt),Et=Ae(wt,2),Ot=Et[0],Rt=Et[1];if(Ot!=null){var gt=this.quill.getIndex(Ot),$t=Ot.newlineIndex(Rt,!0)+1,pt=Ot.newlineIndex(gt+Rt+kt),vt=Ot.domNode.textContent.slice($t,pt).split(`
`);Rt=0,vt.forEach(function(Mt,St){ct?(Ot.insertAt($t+Rt,dt.TAB),Rt+=dt.TAB.length,St===0?mt+=dt.TAB.length:kt+=dt.TAB.length):Mt.startsWith(dt.TAB)&&(Ot.deleteAt($t+Rt,dt.TAB.length),Rt-=dt.TAB.length,St===0?mt-=dt.TAB.length:kt-=dt.TAB.length),Rt+=Mt.length+1}),this.quill.update(Xe.default.sources.USER),this.quill.setSelection(mt,kt,Xe.default.sources.SILENT)}}}}function at(ct){return{key:ct[0].toUpperCase(),shortKey:!0,handler:function(ft,dt){this.quill.format(ct,!dt.format[ct],Xe.default.sources.USER)}}}function lt(ct){if(typeof ct=="string"||typeof ct=="number")return lt({key:ct});if((typeof ct>"u"?"undefined":ue(ct))==="object"&&(ct=(0,me.default)(ct,!1)),typeof ct.key=="string")if(Ge.keys[ct.key.toUpperCase()]!=null)ct.key=Ge.keys[ct.key.toUpperCase()];else if(ct.key.length===1)ct.key=ct.key.toUpperCase().charCodeAt(0);else return null;return ct.shortKey&&(ct[Ue]=ct.shortKey,delete ct.shortKey),ct}oe.default=Ge,oe.SHORTKEY=Ue},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function ke(je,We){var ze=[],Xe=!0,Je=!1,nt=void 0;try{for(var et=je[Symbol.iterator](),tt;!(Xe=(tt=et.next()).done)&&(ze.push(tt.value),!(We&&ze.length===We));Xe=!0);}catch(st){Je=!0,nt=st}finally{try{!Xe&&et.return&&et.return()}finally{if(Je)throw nt}}return ze}return function(je,We){if(Array.isArray(je))return je;if(Symbol.iterator in Object(je))return ke(je,We);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function ke(je,We,ze){je===null&&(je=Function.prototype);var Xe=Object.getOwnPropertyDescriptor(je,We);if(Xe===void 0){var Je=Object.getPrototypeOf(je);return Je===null?void 0:ke(Je,We,ze)}else{if("value"in Xe)return Xe.value;var nt=Xe.get;return nt===void 0?void 0:nt.call(ze)}},pe=function(){function ke(je,We){for(var ze=0;ze<We.length;ze++){var Xe=We[ze];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(je,Xe.key,Xe)}}return function(je,We,ze){return We&&ke(je.prototype,We),ze&&ke(je,ze),je}}(),ve=ce(0),me=xe(ve),ge=ce(7),ye=xe(ge);function xe(ke){return ke&&ke.__esModule?ke:{default:ke}}function _e(ke,je){if(!(ke instanceof je))throw new TypeError("Cannot call a class as a function")}function $e(ke,je){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je&&(typeof je=="object"||typeof je=="function")?je:ke}function Ie(ke,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof je);ke.prototype=Object.create(je&&je.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),je&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,je):ke.__proto__=je)}var Fe=function(ke){Ie(je,ke),pe(je,null,[{key:"value",value:function(){}}]);function je(We,ze){_e(this,je);var Xe=$e(this,(je.__proto__||Object.getPrototypeOf(je)).call(this,We));return Xe.selection=ze,Xe.textNode=document.createTextNode(je.CONTENTS),Xe.domNode.appendChild(Xe.textNode),Xe._length=0,Xe}return pe(je,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(ze,Xe){if(this._length!==0)return Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"format",this).call(this,ze,Xe);for(var Je=this,nt=0;Je!=null&&Je.statics.scope!==me.default.Scope.BLOCK_BLOT;)nt+=Je.offset(Je.parent),Je=Je.parent;Je!=null&&(this._length=je.CONTENTS.length,Je.optimize(),Je.formatAt(nt,je.CONTENTS.length,ze,Xe),this._length=0)}},{key:"index",value:function(ze,Xe){return ze===this.textNode?0:Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"index",this).call(this,ze,Xe)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var ze=this.textNode,Xe=this.selection.getNativeRange(),Je=void 0,nt=void 0,et=void 0;if(Xe!=null&&Xe.start.node===ze&&Xe.end.node===ze){var tt=[ze,Xe.start.offset,Xe.end.offset];Je=tt[0],nt=tt[1],et=tt[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==je.CONTENTS){var st=this.textNode.data.split(je.CONTENTS).join("");this.next instanceof ye.default?(Je=this.next.domNode,this.next.insertAt(0,st),this.textNode.data=je.CONTENTS):(this.textNode.data=st,this.parent.insertBefore(me.default.create(this.textNode),this),this.textNode=document.createTextNode(je.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),nt!=null){var qe=[nt,et].map(function(Re){return Math.max(0,Math.min(Je.data.length,Re-1))}),Se=ue(qe,2);return nt=Se[0],et=Se[1],{startNode:Je,startOffset:nt,endNode:Je,endOffset:et}}}}},{key:"update",value:function(ze,Xe){var Je=this;if(ze.some(function(et){return et.type==="characterData"&&et.target===Je.textNode})){var nt=this.restore();nt&&(Xe.range=nt)}}},{key:"value",value:function(){return""}}]),je}(me.default.Embed);Fe.blotName="cursor",Fe.className="ql-cursor",Fe.tagName="span",Fe.CONTENTS="\uFEFF",oe.default=Fe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(0),Ae=me(ue),pe=ce(4),ve=me(pe);function me($e){return $e&&$e.__esModule?$e:{default:$e}}function ge($e,Ie){if(!($e instanceof Ie))throw new TypeError("Cannot call a class as a function")}function ye($e,Ie){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie&&(typeof Ie=="object"||typeof Ie=="function")?Ie:$e}function xe($e,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);$e.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf($e,Ie):$e.__proto__=Ie)}var _e=function($e){xe(Ie,$e);function Ie(){return ge(this,Ie),ye(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).apply(this,arguments))}return Ie}(Ae.default.Container);_e.allowedChildren=[ve.default,pe.BlockEmbed,_e],oe.default=_e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.ColorStyle=oe.ColorClass=oe.ColorAttributor=void 0;var ue=function(){function Fe(ke,je){for(var We=0;We<je.length;We++){var ze=je[We];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(ke,ze.key,ze)}}return function(ke,je,We){return je&&Fe(ke.prototype,je),We&&Fe(ke,We),ke}}(),Ae=function Fe(ke,je,We){ke===null&&(ke=Function.prototype);var ze=Object.getOwnPropertyDescriptor(ke,je);if(ze===void 0){var Xe=Object.getPrototypeOf(ke);return Xe===null?void 0:Fe(Xe,je,We)}else{if("value"in ze)return ze.value;var Je=ze.get;return Je===void 0?void 0:Je.call(We)}},pe=ce(0),ve=me(pe);function me(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}}function ge(Fe,ke){if(!(Fe instanceof ke))throw new TypeError("Cannot call a class as a function")}function ye(Fe,ke){if(!Fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke&&(typeof ke=="object"||typeof ke=="function")?ke:Fe}function xe(Fe,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ke);Fe.prototype=Object.create(ke&&ke.prototype,{constructor:{value:Fe,enumerable:!1,writable:!0,configurable:!0}}),ke&&(Object.setPrototypeOf?Object.setPrototypeOf(Fe,ke):Fe.__proto__=ke)}var _e=function(Fe){xe(ke,Fe);function ke(){return ge(this,ke),ye(this,(ke.__proto__||Object.getPrototypeOf(ke)).apply(this,arguments))}return ue(ke,[{key:"value",value:function(We){var ze=Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"value",this).call(this,We);return ze.startsWith("rgb(")?(ze=ze.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+ze.split(",").map(function(Xe){return("00"+parseInt(Xe).toString(16)).slice(-2)}).join("")):ze}}]),ke}(ve.default.Attributor.Style),$e=new ve.default.Attributor.Class("color","ql-color",{scope:ve.default.Scope.INLINE}),Ie=new _e("color","color",{scope:ve.default.Scope.INLINE});oe.ColorAttributor=_e,oe.ColorClass=$e,oe.ColorStyle=Ie},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.sanitize=oe.default=void 0;var ue=function(){function Ie(Fe,ke){for(var je=0;je<ke.length;je++){var We=ke[je];We.enumerable=We.enumerable||!1,We.configurable=!0,"value"in We&&(We.writable=!0),Object.defineProperty(Fe,We.key,We)}}return function(Fe,ke,je){return ke&&Ie(Fe.prototype,ke),je&&Ie(Fe,je),Fe}}(),Ae=function Ie(Fe,ke,je){Fe===null&&(Fe=Function.prototype);var We=Object.getOwnPropertyDescriptor(Fe,ke);if(We===void 0){var ze=Object.getPrototypeOf(Fe);return ze===null?void 0:Ie(ze,ke,je)}else{if("value"in We)return We.value;var Xe=We.get;return Xe===void 0?void 0:Xe.call(je)}},pe=ce(6),ve=me(pe);function me(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}}function ge(Ie,Fe){if(!(Ie instanceof Fe))throw new TypeError("Cannot call a class as a function")}function ye(Ie,Fe){if(!Ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Fe&&(typeof Fe=="object"||typeof Fe=="function")?Fe:Ie}function xe(Ie,Fe){if(typeof Fe!="function"&&Fe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Fe);Ie.prototype=Object.create(Fe&&Fe.prototype,{constructor:{value:Ie,enumerable:!1,writable:!0,configurable:!0}}),Fe&&(Object.setPrototypeOf?Object.setPrototypeOf(Ie,Fe):Ie.__proto__=Fe)}var _e=function(Ie){xe(Fe,Ie);function Fe(){return ge(this,Fe),ye(this,(Fe.__proto__||Object.getPrototypeOf(Fe)).apply(this,arguments))}return ue(Fe,[{key:"format",value:function(je,We){if(je!==this.statics.blotName||!We)return Ae(Fe.prototype.__proto__||Object.getPrototypeOf(Fe.prototype),"format",this).call(this,je,We);We=this.constructor.sanitize(We),this.domNode.setAttribute("href",We)}}],[{key:"create",value:function(je){var We=Ae(Fe.__proto__||Object.getPrototypeOf(Fe),"create",this).call(this,je);return je=this.sanitize(je),We.setAttribute("href",je),We.setAttribute("rel","noopener noreferrer"),We.setAttribute("target","_blank"),We}},{key:"formats",value:function(je){return je.getAttribute("href")}},{key:"sanitize",value:function(je){return $e(je,this.PROTOCOL_WHITELIST)?je:this.SANITIZED_URL}}]),Fe}(ve.default);_e.blotName="link",_e.tagName="A",_e.SANITIZED_URL="about:blank",_e.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function $e(Ie,Fe){var ke=document.createElement("a");ke.href=Ie;var je=ke.href.slice(0,ke.href.indexOf(":"));return Fe.indexOf(je)>-1}oe.default=_e,oe.sanitize=$e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Fe){return typeof Fe}:function(Fe){return Fe&&typeof Symbol=="function"&&Fe.constructor===Symbol&&Fe!==Symbol.prototype?"symbol":typeof Fe},Ae=function(){function Fe(ke,je){for(var We=0;We<je.length;We++){var ze=je[We];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(ke,ze.key,ze)}}return function(ke,je,We){return je&&Fe(ke.prototype,je),We&&Fe(ke,We),ke}}(),pe=ce(23),ve=ye(pe),me=ce(107),ge=ye(me);function ye(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}}function xe(Fe,ke){if(!(Fe instanceof ke))throw new TypeError("Cannot call a class as a function")}var _e=0;function $e(Fe,ke){Fe.setAttribute(ke,Fe.getAttribute(ke)!=="true")}var Ie=function(){function Fe(ke){var je=this;xe(this,Fe),this.select=ke,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){je.togglePicker()}),this.label.addEventListener("keydown",function(We){switch(We.keyCode){case ve.default.keys.ENTER:je.togglePicker();break;case ve.default.keys.ESCAPE:je.escape(),We.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return Ae(Fe,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),$e(this.label,"aria-expanded"),$e(this.options,"aria-hidden")}},{key:"buildItem",value:function(je){var We=this,ze=document.createElement("span");return ze.tabIndex="0",ze.setAttribute("role","button"),ze.classList.add("ql-picker-item"),je.hasAttribute("value")&&ze.setAttribute("data-value",je.getAttribute("value")),je.textContent&&ze.setAttribute("data-label",je.textContent),ze.addEventListener("click",function(){We.selectItem(ze,!0)}),ze.addEventListener("keydown",function(Xe){switch(Xe.keyCode){case ve.default.keys.ENTER:We.selectItem(ze,!0),Xe.preventDefault();break;case ve.default.keys.ESCAPE:We.escape(),Xe.preventDefault();break}}),ze}},{key:"buildLabel",value:function(){var je=document.createElement("span");return je.classList.add("ql-picker-label"),je.innerHTML=ge.default,je.tabIndex="0",je.setAttribute("role","button"),je.setAttribute("aria-expanded","false"),this.container.appendChild(je),je}},{key:"buildOptions",value:function(){var je=this,We=document.createElement("span");We.classList.add("ql-picker-options"),We.setAttribute("aria-hidden","true"),We.tabIndex="-1",We.id="ql-picker-options-"+_e,_e+=1,this.label.setAttribute("aria-controls",We.id),this.options=We,[].slice.call(this.select.options).forEach(function(ze){var Xe=je.buildItem(ze);We.appendChild(Xe),ze.selected===!0&&je.selectItem(Xe)}),this.container.appendChild(We)}},{key:"buildPicker",value:function(){var je=this;[].slice.call(this.select.attributes).forEach(function(We){je.container.setAttribute(We.name,We.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var je=this;this.close(),setTimeout(function(){return je.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(je){var We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ze=this.container.querySelector(".ql-selected");if(je!==ze&&(ze!=null&&ze.classList.remove("ql-selected"),je!=null&&(je.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(je.parentNode.children,je),je.hasAttribute("data-value")?this.label.setAttribute("data-value",je.getAttribute("data-value")):this.label.removeAttribute("data-value"),je.hasAttribute("data-label")?this.label.setAttribute("data-label",je.getAttribute("data-label")):this.label.removeAttribute("data-label"),We))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":ue(Event))==="object"){var Xe=document.createEvent("Event");Xe.initEvent("change",!0,!0),this.select.dispatchEvent(Xe)}this.close()}}},{key:"update",value:function(){var je=void 0;if(this.select.selectedIndex>-1){var We=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];je=this.select.options[this.select.selectedIndex],this.selectItem(We)}else this.selectItem(null);var ze=je!=null&&je!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",ze)}}]),Fe}();oe.default=Ie},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(0),Ae=Ne(ue),pe=ce(5),ve=Ne(pe),me=ce(4),ge=Ne(me),ye=ce(16),xe=Ne(ye),_e=ce(25),$e=Ne(_e),Ie=ce(24),Fe=Ne(Ie),ke=ce(35),je=Ne(ke),We=ce(6),ze=Ne(We),Xe=ce(22),Je=Ne(Xe),nt=ce(7),et=Ne(nt),tt=ce(55),st=Ne(tt),qe=ce(42),Se=Ne(qe),Re=ce(23),Be=Ne(Re);function Ne(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}ve.default.register({"blots/block":ge.default,"blots/block/embed":me.BlockEmbed,"blots/break":xe.default,"blots/container":$e.default,"blots/cursor":Fe.default,"blots/embed":je.default,"blots/inline":ze.default,"blots/scroll":Je.default,"blots/text":et.default,"modules/clipboard":st.default,"modules/history":Se.default,"modules/keyboard":Be.default}),Ae.default.register(ge.default,xe.default,Fe.default,ze.default,Je.default,et.default),oe.default=ve.default},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(1),Ae=function(){function pe(ve){this.domNode=ve,this.domNode[ue.DATA_KEY]={blot:this}}return Object.defineProperty(pe.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),pe.create=function(ve){if(this.tagName==null)throw new ue.ParchmentError("Blot definition missing tagName");var me;return Array.isArray(this.tagName)?(typeof ve=="string"&&(ve=ve.toUpperCase(),parseInt(ve).toString()===ve&&(ve=parseInt(ve))),typeof ve=="number"?me=document.createElement(this.tagName[ve-1]):this.tagName.indexOf(ve)>-1?me=document.createElement(ve):me=document.createElement(this.tagName[0])):me=document.createElement(this.tagName),this.className&&me.classList.add(this.className),me},pe.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},pe.prototype.clone=function(){var ve=this.domNode.cloneNode(!1);return ue.create(ve)},pe.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[ue.DATA_KEY]},pe.prototype.deleteAt=function(ve,me){var ge=this.isolate(ve,me);ge.remove()},pe.prototype.formatAt=function(ve,me,ge,ye){var xe=this.isolate(ve,me);if(ue.query(ge,ue.Scope.BLOT)!=null&&ye)xe.wrap(ge,ye);else if(ue.query(ge,ue.Scope.ATTRIBUTE)!=null){var _e=ue.create(this.statics.scope);xe.wrap(_e),_e.format(ge,ye)}},pe.prototype.insertAt=function(ve,me,ge){var ye=ge==null?ue.create("text",me):ue.create(me,ge),xe=this.split(ve);this.parent.insertBefore(ye,xe)},pe.prototype.insertInto=function(ve,me){me===void 0&&(me=null),this.parent!=null&&this.parent.children.remove(this);var ge=null;ve.children.insertBefore(this,me),me!=null&&(ge=me.domNode),(this.domNode.parentNode!=ve.domNode||this.domNode.nextSibling!=ge)&&ve.domNode.insertBefore(this.domNode,ge),this.parent=ve,this.attach()},pe.prototype.isolate=function(ve,me){var ge=this.split(ve);return ge.split(me),ge},pe.prototype.length=function(){return 1},pe.prototype.offset=function(ve){return ve===void 0&&(ve=this.parent),this.parent==null||this==ve?0:this.parent.children.offset(this)+this.parent.offset(ve)},pe.prototype.optimize=function(ve){this.domNode[ue.DATA_KEY]!=null&&delete this.domNode[ue.DATA_KEY].mutations},pe.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},pe.prototype.replace=function(ve){ve.parent!=null&&(ve.parent.insertBefore(this,ve.next),ve.remove())},pe.prototype.replaceWith=function(ve,me){var ge=typeof ve=="string"?ue.create(ve,me):ve;return ge.replace(this),ge},pe.prototype.split=function(ve,me){return ve===0?this:this.next},pe.prototype.update=function(ve,me){},pe.prototype.wrap=function(ve,me){var ge=typeof ve=="string"?ue.create(ve,me):ve;return this.parent!=null&&this.parent.insertBefore(ge,this.next),ge.appendChild(this),ge},pe.blotName="abstract",pe}();oe.default=Ae},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(12),Ae=ce(32),pe=ce(33),ve=ce(1),me=function(){function ge(ye){this.attributes={},this.domNode=ye,this.build()}return ge.prototype.attribute=function(ye,xe){xe?ye.add(this.domNode,xe)&&(ye.value(this.domNode)!=null?this.attributes[ye.attrName]=ye:delete this.attributes[ye.attrName]):(ye.remove(this.domNode),delete this.attributes[ye.attrName])},ge.prototype.build=function(){var ye=this;this.attributes={};var xe=ue.default.keys(this.domNode),_e=Ae.default.keys(this.domNode),$e=pe.default.keys(this.domNode);xe.concat(_e).concat($e).forEach(function(Ie){var Fe=ve.query(Ie,ve.Scope.ATTRIBUTE);Fe instanceof ue.default&&(ye.attributes[Fe.attrName]=Fe)})},ge.prototype.copy=function(ye){var xe=this;Object.keys(this.attributes).forEach(function(_e){var $e=xe.attributes[_e].value(xe.domNode);ye.format(_e,$e)})},ge.prototype.move=function(ye){var xe=this;this.copy(ye),Object.keys(this.attributes).forEach(function(_e){xe.attributes[_e].remove(xe.domNode)}),this.attributes={}},ge.prototype.values=function(){var ye=this;return Object.keys(this.attributes).reduce(function(xe,_e){return xe[_e]=ye.attributes[_e].value(ye.domNode),xe},{})},ge}();oe.default=me},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var xe in ye)ye.hasOwnProperty(xe)&&(ge[xe]=ye[xe])};return function(ge,ye){me(ge,ye);function xe(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(xe.prototype=ye.prototype,new xe)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(12);function pe(me,ge){var ye=me.getAttribute("class")||"";return ye.split(/\s+/).filter(function(xe){return xe.indexOf(ge+"-")===0})}var ve=function(me){ue(ge,me);function ge(){return me!==null&&me.apply(this,arguments)||this}return ge.keys=function(ye){return(ye.getAttribute("class")||"").split(/\s+/).map(function(xe){return xe.split("-").slice(0,-1).join("-")})},ge.prototype.add=function(ye,xe){return this.canAdd(ye,xe)?(this.remove(ye),ye.classList.add(this.keyName+"-"+xe),!0):!1},ge.prototype.remove=function(ye){var xe=pe(ye,this.keyName);xe.forEach(function(_e){ye.classList.remove(_e)}),ye.classList.length===0&&ye.removeAttribute("class")},ge.prototype.value=function(ye){var xe=pe(ye,this.keyName)[0]||"",_e=xe.slice(this.keyName.length+1);return this.canAdd(ye,_e)?_e:""},ge}(Ae.default);oe.default=ve},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var xe in ye)ye.hasOwnProperty(xe)&&(ge[xe]=ye[xe])};return function(ge,ye){me(ge,ye);function xe(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(xe.prototype=ye.prototype,new xe)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(12);function pe(me){var ge=me.split("-"),ye=ge.slice(1).map(function(xe){return xe[0].toUpperCase()+xe.slice(1)}).join("");return ge[0]+ye}var ve=function(me){ue(ge,me);function ge(){return me!==null&&me.apply(this,arguments)||this}return ge.keys=function(ye){return(ye.getAttribute("style")||"").split(";").map(function(xe){var _e=xe.split(":");return _e[0].trim()})},ge.prototype.add=function(ye,xe){return this.canAdd(ye,xe)?(ye.style[pe(this.keyName)]=xe,!0):!1},ge.prototype.remove=function(ye){ye.style[pe(this.keyName)]="",ye.getAttribute("style")||ye.removeAttribute("style")},ge.prototype.value=function(ye){var xe=ye.style[pe(this.keyName)];return this.canAdd(ye,xe)?xe:""},ge}(Ae.default);oe.default=ve},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function ve(me,ge){for(var ye=0;ye<ge.length;ye++){var xe=ge[ye];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(me,xe.key,xe)}}return function(me,ge,ye){return ge&&ve(me.prototype,ge),ye&&ve(me,ye),me}}();function Ae(ve,me){if(!(ve instanceof me))throw new TypeError("Cannot call a class as a function")}var pe=function(){function ve(me,ge){Ae(this,ve),this.quill=me,this.options=ge,this.modules={}}return ue(ve,[{key:"init",value:function(){var ge=this;Object.keys(this.options.modules).forEach(function(ye){ge.modules[ye]==null&&ge.addModule(ye)})}},{key:"addModule",value:function(ge){var ye=this.quill.constructor.import("modules/"+ge);return this.modules[ge]=new ye(this.quill,this.options.modules[ge]||{}),this.modules[ge]}}]),ve}();pe.DEFAULTS={modules:{}},pe.themes={default:pe},oe.default=pe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function ke(je,We){for(var ze=0;ze<We.length;ze++){var Xe=We[ze];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(je,Xe.key,Xe)}}return function(je,We,ze){return We&&ke(je.prototype,We),ze&&ke(je,ze),je}}(),Ae=function ke(je,We,ze){je===null&&(je=Function.prototype);var Xe=Object.getOwnPropertyDescriptor(je,We);if(Xe===void 0){var Je=Object.getPrototypeOf(je);return Je===null?void 0:ke(Je,We,ze)}else{if("value"in Xe)return Xe.value;var nt=Xe.get;return nt===void 0?void 0:nt.call(ze)}},pe=ce(0),ve=ye(pe),me=ce(7),ge=ye(me);function ye(ke){return ke&&ke.__esModule?ke:{default:ke}}function xe(ke,je){if(!(ke instanceof je))throw new TypeError("Cannot call a class as a function")}function _e(ke,je){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je&&(typeof je=="object"||typeof je=="function")?je:ke}function $e(ke,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof je);ke.prototype=Object.create(je&&je.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),je&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,je):ke.__proto__=je)}var Ie="\uFEFF",Fe=function(ke){$e(je,ke);function je(We){xe(this,je);var ze=_e(this,(je.__proto__||Object.getPrototypeOf(je)).call(this,We));return ze.contentNode=document.createElement("span"),ze.contentNode.setAttribute("contenteditable",!1),[].slice.call(ze.domNode.childNodes).forEach(function(Xe){ze.contentNode.appendChild(Xe)}),ze.leftGuard=document.createTextNode(Ie),ze.rightGuard=document.createTextNode(Ie),ze.domNode.appendChild(ze.leftGuard),ze.domNode.appendChild(ze.contentNode),ze.domNode.appendChild(ze.rightGuard),ze}return ue(je,[{key:"index",value:function(ze,Xe){return ze===this.leftGuard?0:ze===this.rightGuard?1:Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"index",this).call(this,ze,Xe)}},{key:"restore",value:function(ze){var Xe=void 0,Je=void 0,nt=ze.data.split(Ie).join("");if(ze===this.leftGuard)if(this.prev instanceof ge.default){var et=this.prev.length();this.prev.insertAt(et,nt),Xe={startNode:this.prev.domNode,startOffset:et+nt.length}}else Je=document.createTextNode(nt),this.parent.insertBefore(ve.default.create(Je),this),Xe={startNode:Je,startOffset:nt.length};else ze===this.rightGuard&&(this.next instanceof ge.default?(this.next.insertAt(0,nt),Xe={startNode:this.next.domNode,startOffset:nt.length}):(Je=document.createTextNode(nt),this.parent.insertBefore(ve.default.create(Je),this.next),Xe={startNode:Je,startOffset:nt.length}));return ze.data=Ie,Xe}},{key:"update",value:function(ze,Xe){var Je=this;ze.forEach(function(nt){if(nt.type==="characterData"&&(nt.target===Je.leftGuard||nt.target===Je.rightGuard)){var et=Je.restore(nt.target);et&&(Xe.range=et)}})}}]),je}(ve.default.Embed);oe.default=Fe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.AlignStyle=oe.AlignClass=oe.AlignAttribute=void 0;var ue=ce(0),Ae=pe(ue);function pe(xe){return xe&&xe.__esModule?xe:{default:xe}}var ve={scope:Ae.default.Scope.BLOCK,whitelist:["right","center","justify"]},me=new Ae.default.Attributor.Attribute("align","align",ve),ge=new Ae.default.Attributor.Class("align","ql-align",ve),ye=new Ae.default.Attributor.Style("align","text-align",ve);oe.AlignAttribute=me,oe.AlignClass=ge,oe.AlignStyle=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.BackgroundStyle=oe.BackgroundClass=void 0;var ue=ce(0),Ae=ve(ue),pe=ce(26);function ve(ye){return ye&&ye.__esModule?ye:{default:ye}}var me=new Ae.default.Attributor.Class("background","ql-bg",{scope:Ae.default.Scope.INLINE}),ge=new pe.ColorAttributor("background","background-color",{scope:Ae.default.Scope.INLINE});oe.BackgroundClass=me,oe.BackgroundStyle=ge},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.DirectionStyle=oe.DirectionClass=oe.DirectionAttribute=void 0;var ue=ce(0),Ae=pe(ue);function pe(xe){return xe&&xe.__esModule?xe:{default:xe}}var ve={scope:Ae.default.Scope.BLOCK,whitelist:["rtl"]},me=new Ae.default.Attributor.Attribute("direction","dir",ve),ge=new Ae.default.Attributor.Class("direction","ql-direction",ve),ye=new Ae.default.Attributor.Style("direction","direction",ve);oe.DirectionAttribute=me,oe.DirectionClass=ge,oe.DirectionStyle=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.FontClass=oe.FontStyle=void 0;var ue=function(){function ke(je,We){for(var ze=0;ze<We.length;ze++){var Xe=We[ze];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(je,Xe.key,Xe)}}return function(je,We,ze){return We&&ke(je.prototype,We),ze&&ke(je,ze),je}}(),Ae=function ke(je,We,ze){je===null&&(je=Function.prototype);var Xe=Object.getOwnPropertyDescriptor(je,We);if(Xe===void 0){var Je=Object.getPrototypeOf(je);return Je===null?void 0:ke(Je,We,ze)}else{if("value"in Xe)return Xe.value;var nt=Xe.get;return nt===void 0?void 0:nt.call(ze)}},pe=ce(0),ve=me(pe);function me(ke){return ke&&ke.__esModule?ke:{default:ke}}function ge(ke,je){if(!(ke instanceof je))throw new TypeError("Cannot call a class as a function")}function ye(ke,je){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je&&(typeof je=="object"||typeof je=="function")?je:ke}function xe(ke,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof je);ke.prototype=Object.create(je&&je.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),je&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,je):ke.__proto__=je)}var _e={scope:ve.default.Scope.INLINE,whitelist:["serif","monospace"]},$e=new ve.default.Attributor.Class("font","ql-font",_e),Ie=function(ke){xe(je,ke);function je(){return ge(this,je),ye(this,(je.__proto__||Object.getPrototypeOf(je)).apply(this,arguments))}return ue(je,[{key:"value",value:function(ze){return Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"value",this).call(this,ze).replace(/["']/g,"")}}]),je}(ve.default.Attributor.Style),Fe=new Ie("font","font-family",_e);oe.FontStyle=Fe,oe.FontClass=$e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.SizeStyle=oe.SizeClass=void 0;var ue=ce(0),Ae=pe(ue);function pe(ge){return ge&&ge.__esModule?ge:{default:ge}}var ve=new Ae.default.Attributor.Class("size","ql-size",{scope:Ae.default.Scope.INLINE,whitelist:["small","large","huge"]}),me=new Ae.default.Attributor.Style("size","font-size",{scope:Ae.default.Scope.INLINE,whitelist:["10px","18px","32px"]});oe.SizeClass=ve,oe.SizeStyle=me},function(ne,oe,ce){ne.exports={align:{"":ce(76),center:ce(77),right:ce(78),justify:ce(79)},background:ce(80),blockquote:ce(81),bold:ce(82),clean:ce(83),code:ce(58),"code-block":ce(58),color:ce(84),direction:{"":ce(85),rtl:ce(86)},float:{center:ce(87),full:ce(88),left:ce(89),right:ce(90)},formula:ce(91),header:{1:ce(92),2:ce(93)},italic:ce(94),image:ce(95),indent:{"+1":ce(96),"-1":ce(97)},link:ce(98),list:{ordered:ce(99),bullet:ce(100),check:ce(101)},script:{sub:ce(102),super:ce(103)},strike:ce(104),underline:ce(105),video:ce(106)}},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.getLastChangeIndex=oe.default=void 0;var ue=function(){function We(ze,Xe){for(var Je=0;Je<Xe.length;Je++){var nt=Xe[Je];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(ze,nt.key,nt)}}return function(ze,Xe,Je){return Xe&&We(ze.prototype,Xe),Je&&We(ze,Je),ze}}(),Ae=ce(0),pe=xe(Ae),ve=ce(5),me=xe(ve),ge=ce(9),ye=xe(ge);function xe(We){return We&&We.__esModule?We:{default:We}}function _e(We,ze){if(!(We instanceof ze))throw new TypeError("Cannot call a class as a function")}function $e(We,ze){if(!We)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ze&&(typeof ze=="object"||typeof ze=="function")?ze:We}function Ie(We,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ze);We.prototype=Object.create(ze&&ze.prototype,{constructor:{value:We,enumerable:!1,writable:!0,configurable:!0}}),ze&&(Object.setPrototypeOf?Object.setPrototypeOf(We,ze):We.__proto__=ze)}var Fe=function(We){Ie(ze,We);function ze(Xe,Je){_e(this,ze);var nt=$e(this,(ze.__proto__||Object.getPrototypeOf(ze)).call(this,Xe,Je));return nt.lastRecorded=0,nt.ignoreChange=!1,nt.clear(),nt.quill.on(me.default.events.EDITOR_CHANGE,function(et,tt,st,qe){et!==me.default.events.TEXT_CHANGE||nt.ignoreChange||(!nt.options.userOnly||qe===me.default.sources.USER?nt.record(tt,st):nt.transform(tt))}),nt.quill.keyboard.addBinding({key:"Z",shortKey:!0},nt.undo.bind(nt)),nt.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},nt.redo.bind(nt)),/Win/i.test(navigator.platform)&&nt.quill.keyboard.addBinding({key:"Y",shortKey:!0},nt.redo.bind(nt)),nt}return ue(ze,[{key:"change",value:function(Je,nt){if(this.stack[Je].length!==0){var et=this.stack[Je].pop();this.stack[nt].push(et),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(et[Je],me.default.sources.USER),this.ignoreChange=!1;var tt=je(et[Je]);this.quill.setSelection(tt)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(Je,nt){if(Je.ops.length!==0){this.stack.redo=[];var et=this.quill.getContents().diff(nt),tt=Date.now();if(this.lastRecorded+this.options.delay>tt&&this.stack.undo.length>0){var st=this.stack.undo.pop();et=et.compose(st.undo),Je=st.redo.compose(Je)}else this.lastRecorded=tt;this.stack.undo.push({redo:Je,undo:et}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(Je){this.stack.undo.forEach(function(nt){nt.undo=Je.transform(nt.undo,!0),nt.redo=Je.transform(nt.redo,!0)}),this.stack.redo.forEach(function(nt){nt.undo=Je.transform(nt.undo,!0),nt.redo=Je.transform(nt.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),ze}(ye.default);Fe.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function ke(We){var ze=We.ops[We.ops.length-1];return ze==null?!1:ze.insert!=null?typeof ze.insert=="string"&&ze.insert.endsWith(`
`):ze.attributes!=null?Object.keys(ze.attributes).some(function(Xe){return pe.default.query(Xe,pe.default.Scope.BLOCK)!=null}):!1}function je(We){var ze=We.reduce(function(Je,nt){return Je+=nt.delete||0,Je},0),Xe=We.length()-ze;return ke(We)&&(Xe-=1),Xe}oe.default=Fe,oe.getLastChangeIndex=je},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.BaseTooltip=void 0;var ue=function(){function rt(it,at){for(var lt=0;lt<at.length;lt++){var ct=at[lt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(it,ct.key,ct)}}return function(it,at,lt){return at&&rt(it.prototype,at),lt&&rt(it,lt),it}}(),Ae=function rt(it,at,lt){it===null&&(it=Function.prototype);var ct=Object.getOwnPropertyDescriptor(it,at);if(ct===void 0){var ot=Object.getPrototypeOf(it);return ot===null?void 0:rt(ot,at,lt)}else{if("value"in ct)return ct.value;var ft=ct.get;return ft===void 0?void 0:ft.call(lt)}},pe=ce(3),ve=tt(pe),me=ce(2),ge=tt(me),ye=ce(8),xe=tt(ye),_e=ce(23),$e=tt(_e),Ie=ce(34),Fe=tt(Ie),ke=ce(59),je=tt(ke),We=ce(60),ze=tt(We),Xe=ce(28),Je=tt(Xe),nt=ce(61),et=tt(nt);function tt(rt){return rt&&rt.__esModule?rt:{default:rt}}function st(rt,it){if(!(rt instanceof it))throw new TypeError("Cannot call a class as a function")}function qe(rt,it){if(!rt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return it&&(typeof it=="object"||typeof it=="function")?it:rt}function Se(rt,it){if(typeof it!="function"&&it!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof it);rt.prototype=Object.create(it&&it.prototype,{constructor:{value:rt,enumerable:!1,writable:!0,configurable:!0}}),it&&(Object.setPrototypeOf?Object.setPrototypeOf(rt,it):rt.__proto__=it)}var Re=[!1,"center","right","justify"],Be=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Ne=[!1,"serif","monospace"],Ue=["1","2","3",!1],Ge=["small",!1,"large","huge"],Ye=function(rt){Se(it,rt);function it(at,lt){st(this,it);var ct=qe(this,(it.__proto__||Object.getPrototypeOf(it)).call(this,at,lt)),ot=function ft(dt){if(!document.body.contains(at.root))return document.body.removeEventListener("click",ft);ct.tooltip!=null&&!ct.tooltip.root.contains(dt.target)&&document.activeElement!==ct.tooltip.textbox&&!ct.quill.hasFocus()&&ct.tooltip.hide(),ct.pickers!=null&&ct.pickers.forEach(function(mt){mt.container.contains(dt.target)||mt.close()})};return at.emitter.listenDOM("click",document.body,ot),ct}return ue(it,[{key:"addModule",value:function(lt){var ct=Ae(it.prototype.__proto__||Object.getPrototypeOf(it.prototype),"addModule",this).call(this,lt);return lt==="toolbar"&&this.extendToolbar(ct),ct}},{key:"buildButtons",value:function(lt,ct){lt.forEach(function(ot){var ft=ot.getAttribute("class")||"";ft.split(/\s+/).forEach(function(dt){if(dt.startsWith("ql-")&&(dt=dt.slice(3),ct[dt]!=null))if(dt==="direction")ot.innerHTML=ct[dt][""]+ct[dt].rtl;else if(typeof ct[dt]=="string")ot.innerHTML=ct[dt];else{var mt=ot.value||"";mt!=null&&ct[dt][mt]&&(ot.innerHTML=ct[dt][mt])}})})}},{key:"buildPickers",value:function(lt,ct){var ot=this;this.pickers=lt.map(function(dt){if(dt.classList.contains("ql-align"))return dt.querySelector("option")==null&&Ke(dt,Re),new ze.default(dt,ct.align);if(dt.classList.contains("ql-background")||dt.classList.contains("ql-color")){var mt=dt.classList.contains("ql-background")?"background":"color";return dt.querySelector("option")==null&&Ke(dt,Be,mt==="background"?"#ffffff":"#000000"),new je.default(dt,ct[mt])}else return dt.querySelector("option")==null&&(dt.classList.contains("ql-font")?Ke(dt,Ne):dt.classList.contains("ql-header")?Ke(dt,Ue):dt.classList.contains("ql-size")&&Ke(dt,Ge)),new Je.default(dt)});var ft=function(){ot.pickers.forEach(function(mt){mt.update()})};this.quill.on(xe.default.events.EDITOR_CHANGE,ft)}}]),it}(Fe.default);Ye.DEFAULTS=(0,ve.default)(!0,{},Fe.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var it=this,at=this.container.querySelector("input.ql-image[type=file]");at==null&&(at=document.createElement("input"),at.setAttribute("type","file"),at.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),at.classList.add("ql-image"),at.addEventListener("change",function(){if(at.files!=null&&at.files[0]!=null){var lt=new FileReader;lt.onload=function(ct){var ot=it.quill.getSelection(!0);it.quill.updateContents(new ge.default().retain(ot.index).delete(ot.length).insert({image:ct.target.result}),xe.default.sources.USER),it.quill.setSelection(ot.index+1,xe.default.sources.SILENT),at.value=""},lt.readAsDataURL(at.files[0])}}),this.container.appendChild(at)),at.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Qe=function(rt){Se(it,rt);function it(at,lt){st(this,it);var ct=qe(this,(it.__proto__||Object.getPrototypeOf(it)).call(this,at,lt));return ct.textbox=ct.root.querySelector('input[type="text"]'),ct.listen(),ct}return ue(it,[{key:"listen",value:function(){var lt=this;this.textbox.addEventListener("keydown",function(ct){$e.default.match(ct,"enter")?(lt.save(),ct.preventDefault()):$e.default.match(ct,"escape")&&(lt.cancel(),ct.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),ct!=null?this.textbox.value=ct:lt!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+lt)||""),this.root.setAttribute("data-mode",lt)}},{key:"restoreFocus",value:function(){var lt=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=lt}},{key:"save",value:function(){var lt=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var ct=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",lt,xe.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",lt,xe.default.sources.USER)),this.quill.root.scrollTop=ct;break}case"video":lt=Te(lt);case"formula":{if(!lt)break;var ot=this.quill.getSelection(!0);if(ot!=null){var ft=ot.index+ot.length;this.quill.insertEmbed(ft,this.root.getAttribute("data-mode"),lt,xe.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ft+1," ",xe.default.sources.USER),this.quill.setSelection(ft+2,xe.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),it}(et.default);function Te(rt){var it=rt.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||rt.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return it?(it[1]||"https")+"://www.youtube.com/embed/"+it[2]+"?showinfo=0":(it=rt.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(it[1]||"https")+"://player.vimeo.com/video/"+it[2]+"/":rt}function Ke(rt,it){var at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;it.forEach(function(lt){var ct=document.createElement("option");lt===at?ct.setAttribute("selected","selected"):ct.setAttribute("value",lt),rt.appendChild(ct)})}oe.BaseTooltip=Qe,oe.default=Ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Ae(){this.head=this.tail=null,this.length=0}return Ae.prototype.append=function(){for(var pe=[],ve=0;ve<arguments.length;ve++)pe[ve]=arguments[ve];this.insertBefore(pe[0],null),pe.length>1&&this.append.apply(this,pe.slice(1))},Ae.prototype.contains=function(pe){for(var ve,me=this.iterator();ve=me();)if(ve===pe)return!0;return!1},Ae.prototype.insertBefore=function(pe,ve){pe&&(pe.next=ve,ve!=null?(pe.prev=ve.prev,ve.prev!=null&&(ve.prev.next=pe),ve.prev=pe,ve===this.head&&(this.head=pe)):this.tail!=null?(this.tail.next=pe,pe.prev=this.tail,this.tail=pe):(pe.prev=null,this.head=this.tail=pe),this.length+=1)},Ae.prototype.offset=function(pe){for(var ve=0,me=this.head;me!=null;){if(me===pe)return ve;ve+=me.length(),me=me.next}return-1},Ae.prototype.remove=function(pe){this.contains(pe)&&(pe.prev!=null&&(pe.prev.next=pe.next),pe.next!=null&&(pe.next.prev=pe.prev),pe===this.head&&(this.head=pe.next),pe===this.tail&&(this.tail=pe.prev),this.length-=1)},Ae.prototype.iterator=function(pe){return pe===void 0&&(pe=this.head),function(){var ve=pe;return pe!=null&&(pe=pe.next),ve}},Ae.prototype.find=function(pe,ve){ve===void 0&&(ve=!1);for(var me,ge=this.iterator();me=ge();){var ye=me.length();if(pe<ye||ve&&pe===ye&&(me.next==null||me.next.length()!==0))return[me,pe];pe-=ye}return[null,0]},Ae.prototype.forEach=function(pe){for(var ve,me=this.iterator();ve=me();)pe(ve)},Ae.prototype.forEachAt=function(pe,ve,me){if(!(ve<=0))for(var ge=this.find(pe),ye=ge[0],xe=ge[1],_e,$e=pe-xe,Ie=this.iterator(ye);(_e=Ie())&&$e<pe+ve;){var Fe=_e.length();pe>$e?me(_e,pe-$e,Math.min(ve,$e+Fe-pe)):me(_e,0,Math.min(Fe,pe+ve-$e)),$e+=Fe}},Ae.prototype.map=function(pe){return this.reduce(function(ve,me){return ve.push(pe(me)),ve},[])},Ae.prototype.reduce=function(pe,ve){for(var me,ge=this.iterator();me=ge();)ve=pe(ve,me);return ve},Ae}();oe.default=ue},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,_e){xe.__proto__=_e}||function(xe,_e){for(var $e in _e)_e.hasOwnProperty($e)&&(xe[$e]=_e[$e])};return function(xe,_e){ye(xe,_e);function $e(){this.constructor=xe}xe.prototype=_e===null?Object.create(_e):($e.prototype=_e.prototype,new $e)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(17),pe=ce(1),ve={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},me=100,ge=function(ye){ue(xe,ye);function xe(_e){var $e=ye.call(this,_e)||this;return $e.scroll=$e,$e.observer=new MutationObserver(function(Ie){$e.update(Ie)}),$e.observer.observe($e.domNode,ve),$e.attach(),$e}return xe.prototype.detach=function(){ye.prototype.detach.call(this),this.observer.disconnect()},xe.prototype.deleteAt=function(_e,$e){this.update(),_e===0&&$e===this.length()?this.children.forEach(function(Ie){Ie.remove()}):ye.prototype.deleteAt.call(this,_e,$e)},xe.prototype.formatAt=function(_e,$e,Ie,Fe){this.update(),ye.prototype.formatAt.call(this,_e,$e,Ie,Fe)},xe.prototype.insertAt=function(_e,$e,Ie){this.update(),ye.prototype.insertAt.call(this,_e,$e,Ie)},xe.prototype.optimize=function(_e,$e){var Ie=this;_e===void 0&&(_e=[]),$e===void 0&&($e={}),ye.prototype.optimize.call(this,$e);for(var Fe=[].slice.call(this.observer.takeRecords());Fe.length>0;)_e.push(Fe.pop());for(var ke=function(Xe,Je){Je===void 0&&(Je=!0),!(Xe==null||Xe===Ie)&&Xe.domNode.parentNode!=null&&(Xe.domNode[pe.DATA_KEY].mutations==null&&(Xe.domNode[pe.DATA_KEY].mutations=[]),Je&&ke(Xe.parent))},je=function(Xe){Xe.domNode[pe.DATA_KEY]==null||Xe.domNode[pe.DATA_KEY].mutations==null||(Xe instanceof Ae.default&&Xe.children.forEach(je),Xe.optimize($e))},We=_e,ze=0;We.length>0;ze+=1){if(ze>=me)throw new Error("[Parchment] Maximum optimize iterations reached");for(We.forEach(function(Xe){var Je=pe.find(Xe.target,!0);Je!=null&&(Je.domNode===Xe.target&&(Xe.type==="childList"?(ke(pe.find(Xe.previousSibling,!1)),[].forEach.call(Xe.addedNodes,function(nt){var et=pe.find(nt,!1);ke(et,!1),et instanceof Ae.default&&et.children.forEach(function(tt){ke(tt,!1)})})):Xe.type==="attributes"&&ke(Je.prev)),ke(Je))}),this.children.forEach(je),We=[].slice.call(this.observer.takeRecords()),Fe=We.slice();Fe.length>0;)_e.push(Fe.pop())}},xe.prototype.update=function(_e,$e){var Ie=this;$e===void 0&&($e={}),_e=_e||this.observer.takeRecords(),_e.map(function(Fe){var ke=pe.find(Fe.target,!0);return ke==null?null:ke.domNode[pe.DATA_KEY].mutations==null?(ke.domNode[pe.DATA_KEY].mutations=[Fe],ke):(ke.domNode[pe.DATA_KEY].mutations.push(Fe),null)}).forEach(function(Fe){Fe==null||Fe===Ie||Fe.domNode[pe.DATA_KEY]==null||Fe.update(Fe.domNode[pe.DATA_KEY].mutations||[],$e)}),this.domNode[pe.DATA_KEY].mutations!=null&&ye.prototype.update.call(this,this.domNode[pe.DATA_KEY].mutations,$e),this.optimize(_e,$e)},xe.blotName="scroll",xe.defaultChild="block",xe.scope=pe.Scope.BLOCK_BLOT,xe.tagName="DIV",xe}(Ae.default);oe.default=ge},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ye,xe){ye.__proto__=xe}||function(ye,xe){for(var _e in xe)xe.hasOwnProperty(_e)&&(ye[_e]=xe[_e])};return function(ye,xe){ge(ye,xe);function _e(){this.constructor=ye}ye.prototype=xe===null?Object.create(xe):(_e.prototype=xe.prototype,new _e)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(18),pe=ce(1);function ve(ge,ye){if(Object.keys(ge).length!==Object.keys(ye).length)return!1;for(var xe in ge)if(ge[xe]!==ye[xe])return!1;return!0}var me=function(ge){ue(ye,ge);function ye(){return ge!==null&&ge.apply(this,arguments)||this}return ye.formats=function(xe){if(xe.tagName!==ye.tagName)return ge.formats.call(this,xe)},ye.prototype.format=function(xe,_e){var $e=this;xe===this.statics.blotName&&!_e?(this.children.forEach(function(Ie){Ie instanceof Ae.default||(Ie=Ie.wrap(ye.blotName,!0)),$e.attributes.copy(Ie)}),this.unwrap()):ge.prototype.format.call(this,xe,_e)},ye.prototype.formatAt=function(xe,_e,$e,Ie){if(this.formats()[$e]!=null||pe.query($e,pe.Scope.ATTRIBUTE)){var Fe=this.isolate(xe,_e);Fe.format($e,Ie)}else ge.prototype.formatAt.call(this,xe,_e,$e,Ie)},ye.prototype.optimize=function(xe){ge.prototype.optimize.call(this,xe);var _e=this.formats();if(Object.keys(_e).length===0)return this.unwrap();var $e=this.next;$e instanceof ye&&$e.prev===this&&ve(_e,$e.formats())&&($e.moveChildren(this),$e.remove())},ye.blotName="inline",ye.scope=pe.Scope.INLINE_BLOT,ye.tagName="SPAN",ye}(Ae.default);oe.default=me},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var xe in ye)ye.hasOwnProperty(xe)&&(ge[xe]=ye[xe])};return function(ge,ye){me(ge,ye);function xe(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(xe.prototype=ye.prototype,new xe)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(18),pe=ce(1),ve=function(me){ue(ge,me);function ge(){return me!==null&&me.apply(this,arguments)||this}return ge.formats=function(ye){var xe=pe.query(ge.blotName).tagName;if(ye.tagName!==xe)return me.formats.call(this,ye)},ge.prototype.format=function(ye,xe){pe.query(ye,pe.Scope.BLOCK)!=null&&(ye===this.statics.blotName&&!xe?this.replaceWith(ge.blotName):me.prototype.format.call(this,ye,xe))},ge.prototype.formatAt=function(ye,xe,_e,$e){pe.query(_e,pe.Scope.BLOCK)!=null?this.format(_e,$e):me.prototype.formatAt.call(this,ye,xe,_e,$e)},ge.prototype.insertAt=function(ye,xe,_e){if(_e==null||pe.query(xe,pe.Scope.INLINE)!=null)me.prototype.insertAt.call(this,ye,xe,_e);else{var $e=this.split(ye),Ie=pe.create(xe,_e);$e.parent.insertBefore(Ie,$e)}},ge.prototype.update=function(ye,xe){navigator.userAgent.match(/Trident/)?this.build():me.prototype.update.call(this,ye,xe)},ge.blotName="block",ge.scope=pe.Scope.BLOCK_BLOT,ge.tagName="P",ge}(Ae.default);oe.default=ve},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(me,ge){me.__proto__=ge}||function(me,ge){for(var ye in ge)ge.hasOwnProperty(ye)&&(me[ye]=ge[ye])};return function(me,ge){ve(me,ge);function ye(){this.constructor=me}me.prototype=ge===null?Object.create(ge):(ye.prototype=ge.prototype,new ye)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(19),pe=function(ve){ue(me,ve);function me(){return ve!==null&&ve.apply(this,arguments)||this}return me.formats=function(ge){},me.prototype.format=function(ge,ye){ve.prototype.formatAt.call(this,0,this.length(),ge,ye)},me.prototype.formatAt=function(ge,ye,xe,_e){ge===0&&ye===this.length()?this.format(xe,_e):ve.prototype.formatAt.call(this,ge,ye,xe,_e)},me.prototype.formats=function(){return this.statics.formats(this.domNode)},me}(Ae.default);oe.default=pe},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var xe in ye)ye.hasOwnProperty(xe)&&(ge[xe]=ye[xe])};return function(ge,ye){me(ge,ye);function xe(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(xe.prototype=ye.prototype,new xe)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(19),pe=ce(1),ve=function(me){ue(ge,me);function ge(ye){var xe=me.call(this,ye)||this;return xe.text=xe.statics.value(xe.domNode),xe}return ge.create=function(ye){return document.createTextNode(ye)},ge.value=function(ye){var xe=ye.data;return xe.normalize&&(xe=xe.normalize()),xe},ge.prototype.deleteAt=function(ye,xe){this.domNode.data=this.text=this.text.slice(0,ye)+this.text.slice(ye+xe)},ge.prototype.index=function(ye,xe){return this.domNode===ye?xe:-1},ge.prototype.insertAt=function(ye,xe,_e){_e==null?(this.text=this.text.slice(0,ye)+xe+this.text.slice(ye),this.domNode.data=this.text):me.prototype.insertAt.call(this,ye,xe,_e)},ge.prototype.length=function(){return this.text.length},ge.prototype.optimize=function(ye){me.prototype.optimize.call(this,ye),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof ge&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},ge.prototype.position=function(ye,xe){return[this.domNode,ye]},ge.prototype.split=function(ye,xe){if(xe===void 0&&(xe=!1),!xe){if(ye===0)return this;if(ye===this.length())return this.next}var _e=pe.create(this.domNode.splitText(ye));return this.parent.insertBefore(_e,this.next),this.text=this.statics.value(this.domNode),_e},ge.prototype.update=function(ye,xe){var _e=this;ye.some(function($e){return $e.type==="characterData"&&$e.target===_e.domNode})&&(this.text=this.statics.value(this.domNode))},ge.prototype.value=function(){return this.text},ge.blotName="text",ge.scope=pe.Scope.INLINE_BLOT,ge}(Ae.default);oe.default=ve},function(ne,oe,ce){var ue=document.createElement("div");if(ue.classList.toggle("test-class",!1),ue.classList.contains("test-class")){var Ae=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(pe,ve){return arguments.length>1&&!this.contains(pe)==!ve?ve:Ae.call(this,pe)}}String.prototype.startsWith||(String.prototype.startsWith=function(pe,ve){return ve=ve||0,this.substr(ve,pe.length)===pe}),String.prototype.endsWith||(String.prototype.endsWith=function(pe,ve){var me=this.toString();(typeof ve!="number"||!isFinite(ve)||Math.floor(ve)!==ve||ve>me.length)&&(ve=me.length),ve-=pe.length;var ge=me.indexOf(pe,ve);return ge!==-1&&ge===ve}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(ve){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof ve!="function")throw new TypeError("predicate must be a function");for(var me=Object(this),ge=me.length>>>0,ye=arguments[1],xe,_e=0;_e<ge;_e++)if(xe=me[_e],ve.call(ye,xe,_e,me))return xe}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(ne,oe){var ce=-1,ue=1,Ae=0;function pe(ze,Xe,Je){if(ze==Xe)return ze?[[Ae,ze]]:[];(Je<0||ze.length<Je)&&(Je=null);var nt=ye(ze,Xe),et=ze.substring(0,nt);ze=ze.substring(nt),Xe=Xe.substring(nt),nt=xe(ze,Xe);var tt=ze.substring(ze.length-nt);ze=ze.substring(0,ze.length-nt),Xe=Xe.substring(0,Xe.length-nt);var st=ve(ze,Xe);return et&&st.unshift([Ae,et]),tt&&st.push([Ae,tt]),$e(st),Je!=null&&(st=ke(st,Je)),st=je(st),st}function ve(ze,Xe){var Je;if(!ze)return[[ue,Xe]];if(!Xe)return[[ce,ze]];var nt=ze.length>Xe.length?ze:Xe,et=ze.length>Xe.length?Xe:ze,tt=nt.indexOf(et);if(tt!=-1)return Je=[[ue,nt.substring(0,tt)],[Ae,et],[ue,nt.substring(tt+et.length)]],ze.length>Xe.length&&(Je[0][0]=Je[2][0]=ce),Je;if(et.length==1)return[[ce,ze],[ue,Xe]];var st=_e(ze,Xe);if(st){var qe=st[0],Se=st[1],Re=st[2],Be=st[3],Ne=st[4],Ue=pe(qe,Re),Ge=pe(Se,Be);return Ue.concat([[Ae,Ne]],Ge)}return me(ze,Xe)}function me(ze,Xe){for(var Je=ze.length,nt=Xe.length,et=Math.ceil((Je+nt)/2),tt=et,st=2*et,qe=new Array(st),Se=new Array(st),Re=0;Re<st;Re++)qe[Re]=-1,Se[Re]=-1;qe[tt+1]=0,Se[tt+1]=0;for(var Be=Je-nt,Ne=Be%2!=0,Ue=0,Ge=0,Ye=0,Qe=0,Te=0;Te<et;Te++){for(var Ke=-Te+Ue;Ke<=Te-Ge;Ke+=2){var rt=tt+Ke,it;Ke==-Te||Ke!=Te&&qe[rt-1]<qe[rt+1]?it=qe[rt+1]:it=qe[rt-1]+1;for(var at=it-Ke;it<Je&&at<nt&&ze.charAt(it)==Xe.charAt(at);)it++,at++;if(qe[rt]=it,it>Je)Ge+=2;else if(at>nt)Ue+=2;else if(Ne){var lt=tt+Be-Ke;if(lt>=0&&lt<st&&Se[lt]!=-1){var ct=Je-Se[lt];if(it>=ct)return ge(ze,Xe,it,at)}}}for(var ot=-Te+Ye;ot<=Te-Qe;ot+=2){var lt=tt+ot,ct;ot==-Te||ot!=Te&&Se[lt-1]<Se[lt+1]?ct=Se[lt+1]:ct=Se[lt-1]+1;for(var ft=ct-ot;ct<Je&&ft<nt&&ze.charAt(Je-ct-1)==Xe.charAt(nt-ft-1);)ct++,ft++;if(Se[lt]=ct,ct>Je)Qe+=2;else if(ft>nt)Ye+=2;else if(!Ne){var rt=tt+Be-ot;if(rt>=0&&rt<st&&qe[rt]!=-1){var it=qe[rt],at=tt+it-rt;if(ct=Je-ct,it>=ct)return ge(ze,Xe,it,at)}}}}return[[ce,ze],[ue,Xe]]}function ge(ze,Xe,Je,nt){var et=ze.substring(0,Je),tt=Xe.substring(0,nt),st=ze.substring(Je),qe=Xe.substring(nt),Se=pe(et,tt),Re=pe(st,qe);return Se.concat(Re)}function ye(ze,Xe){if(!ze||!Xe||ze.charAt(0)!=Xe.charAt(0))return 0;for(var Je=0,nt=Math.min(ze.length,Xe.length),et=nt,tt=0;Je<et;)ze.substring(tt,et)==Xe.substring(tt,et)?(Je=et,tt=Je):nt=et,et=Math.floor((nt-Je)/2+Je);return et}function xe(ze,Xe){if(!ze||!Xe||ze.charAt(ze.length-1)!=Xe.charAt(Xe.length-1))return 0;for(var Je=0,nt=Math.min(ze.length,Xe.length),et=nt,tt=0;Je<et;)ze.substring(ze.length-et,ze.length-tt)==Xe.substring(Xe.length-et,Xe.length-tt)?(Je=et,tt=Je):nt=et,et=Math.floor((nt-Je)/2+Je);return et}function _e(ze,Xe){var Je=ze.length>Xe.length?ze:Xe,nt=ze.length>Xe.length?Xe:ze;if(Je.length<4||nt.length*2<Je.length)return null;function et(Ge,Ye,Qe){for(var Te=Ge.substring(Qe,Qe+Math.floor(Ge.length/4)),Ke=-1,rt="",it,at,lt,ct;(Ke=Ye.indexOf(Te,Ke+1))!=-1;){var ot=ye(Ge.substring(Qe),Ye.substring(Ke)),ft=xe(Ge.substring(0,Qe),Ye.substring(0,Ke));rt.length<ft+ot&&(rt=Ye.substring(Ke-ft,Ke)+Ye.substring(Ke,Ke+ot),it=Ge.substring(0,Qe-ft),at=Ge.substring(Qe+ot),lt=Ye.substring(0,Ke-ft),ct=Ye.substring(Ke+ot))}return rt.length*2>=Ge.length?[it,at,lt,ct,rt]:null}var tt=et(Je,nt,Math.ceil(Je.length/4)),st=et(Je,nt,Math.ceil(Je.length/2)),qe;if(!tt&&!st)return null;st?tt?qe=tt[4].length>st[4].length?tt:st:qe=st:qe=tt;var Se,Re,Be,Ne;ze.length>Xe.length?(Se=qe[0],Re=qe[1],Be=qe[2],Ne=qe[3]):(Be=qe[0],Ne=qe[1],Se=qe[2],Re=qe[3]);var Ue=qe[4];return[Se,Re,Be,Ne,Ue]}function $e(ze){ze.push([Ae,""]);for(var Xe=0,Je=0,nt=0,et="",tt="",st;Xe<ze.length;)switch(ze[Xe][0]){case ue:nt++,tt+=ze[Xe][1],Xe++;break;case ce:Je++,et+=ze[Xe][1],Xe++;break;case Ae:Je+nt>1?(Je!==0&&nt!==0&&(st=ye(tt,et),st!==0&&(Xe-Je-nt>0&&ze[Xe-Je-nt-1][0]==Ae?ze[Xe-Je-nt-1][1]+=tt.substring(0,st):(ze.splice(0,0,[Ae,tt.substring(0,st)]),Xe++),tt=tt.substring(st),et=et.substring(st)),st=xe(tt,et),st!==0&&(ze[Xe][1]=tt.substring(tt.length-st)+ze[Xe][1],tt=tt.substring(0,tt.length-st),et=et.substring(0,et.length-st))),Je===0?ze.splice(Xe-nt,Je+nt,[ue,tt]):nt===0?ze.splice(Xe-Je,Je+nt,[ce,et]):ze.splice(Xe-Je-nt,Je+nt,[ce,et],[ue,tt]),Xe=Xe-Je-nt+(Je?1:0)+(nt?1:0)+1):Xe!==0&&ze[Xe-1][0]==Ae?(ze[Xe-1][1]+=ze[Xe][1],ze.splice(Xe,1)):Xe++,nt=0,Je=0,et="",tt="";break}ze[ze.length-1][1]===""&&ze.pop();var qe=!1;for(Xe=1;Xe<ze.length-1;)ze[Xe-1][0]==Ae&&ze[Xe+1][0]==Ae&&(ze[Xe][1].substring(ze[Xe][1].length-ze[Xe-1][1].length)==ze[Xe-1][1]?(ze[Xe][1]=ze[Xe-1][1]+ze[Xe][1].substring(0,ze[Xe][1].length-ze[Xe-1][1].length),ze[Xe+1][1]=ze[Xe-1][1]+ze[Xe+1][1],ze.splice(Xe-1,1),qe=!0):ze[Xe][1].substring(0,ze[Xe+1][1].length)==ze[Xe+1][1]&&(ze[Xe-1][1]+=ze[Xe+1][1],ze[Xe][1]=ze[Xe][1].substring(ze[Xe+1][1].length)+ze[Xe+1][1],ze.splice(Xe+1,1),qe=!0)),Xe++;qe&&$e(ze)}var Ie=pe;Ie.INSERT=ue,Ie.DELETE=ce,Ie.EQUAL=Ae,ne.exports=Ie;function Fe(ze,Xe){if(Xe===0)return[Ae,ze];for(var Je=0,nt=0;nt<ze.length;nt++){var et=ze[nt];if(et[0]===ce||et[0]===Ae){var tt=Je+et[1].length;if(Xe===tt)return[nt+1,ze];if(Xe<tt){ze=ze.slice();var st=Xe-Je,qe=[et[0],et[1].slice(0,st)],Se=[et[0],et[1].slice(st)];return ze.splice(nt,1,qe,Se),[nt+1,ze]}else Je=tt}}throw new Error("cursor_pos is out of bounds!")}function ke(ze,Xe){var Je=Fe(ze,Xe),nt=Je[1],et=Je[0],tt=nt[et],st=nt[et+1];if(tt==null)return ze;if(tt[0]!==Ae)return ze;if(st!=null&&tt[1]+st[1]===st[1]+tt[1])return nt.splice(et,2,st,tt),We(nt,et,2);if(st!=null&&st[1].indexOf(tt[1])===0){nt.splice(et,2,[st[0],tt[1]],[0,tt[1]]);var qe=st[1].slice(tt[1].length);return qe.length>0&&nt.splice(et+2,0,[st[0],qe]),We(nt,et,3)}else return ze}function je(ze){for(var Xe=!1,Je=function(st){return st.charCodeAt(0)>=56320&&st.charCodeAt(0)<=57343},nt=function(st){return st.charCodeAt(st.length-1)>=55296&&st.charCodeAt(st.length-1)<=56319},et=2;et<ze.length;et+=1)ze[et-2][0]===Ae&&nt(ze[et-2][1])&&ze[et-1][0]===ce&&Je(ze[et-1][1])&&ze[et][0]===ue&&Je(ze[et][1])&&(Xe=!0,ze[et-1][1]=ze[et-2][1].slice(-1)+ze[et-1][1],ze[et][1]=ze[et-2][1].slice(-1)+ze[et][1],ze[et-2][1]=ze[et-2][1].slice(0,-1));if(!Xe)return ze;for(var tt=[],et=0;et<ze.length;et+=1)ze[et][1].length>0&&tt.push(ze[et]);return tt}function We(ze,Xe,Je){for(var nt=Xe+Je-1;nt>=0&&nt>=Xe-1;nt--)if(nt+1<ze.length){var et=ze[nt],tt=ze[nt+1];et[0]===tt[1]&&ze.splice(nt,2,[et[0],et[1]+tt[1]])}return ze}},function(ne,oe){oe=ne.exports=typeof Object.keys=="function"?Object.keys:ce,oe.shim=ce;function ce(ue){var Ae=[];for(var pe in ue)Ae.push(pe);return Ae}},function(ne,oe){var ce=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";oe=ne.exports=ce?ue:Ae,oe.supported=ue;function ue(pe){return Object.prototype.toString.call(pe)=="[object Arguments]"}oe.unsupported=Ae;function Ae(pe){return pe&&typeof pe=="object"&&typeof pe.length=="number"&&Object.prototype.hasOwnProperty.call(pe,"callee")&&!Object.prototype.propertyIsEnumerable.call(pe,"callee")||!1}},function(ne,oe){var ce=Object.prototype.hasOwnProperty,ue="~";function Ae(){}Object.create&&(Ae.prototype=Object.create(null),new Ae().__proto__||(ue=!1));function pe(me,ge,ye){this.fn=me,this.context=ge,this.once=ye||!1}function ve(){this._events=new Ae,this._eventsCount=0}ve.prototype.eventNames=function(){var ge=[],ye,xe;if(this._eventsCount===0)return ge;for(xe in ye=this._events)ce.call(ye,xe)&&ge.push(ue?xe.slice(1):xe);return Object.getOwnPropertySymbols?ge.concat(Object.getOwnPropertySymbols(ye)):ge},ve.prototype.listeners=function(ge,ye){var xe=ue?ue+ge:ge,_e=this._events[xe];if(ye)return!!_e;if(!_e)return[];if(_e.fn)return[_e.fn];for(var $e=0,Ie=_e.length,Fe=new Array(Ie);$e<Ie;$e++)Fe[$e]=_e[$e].fn;return Fe},ve.prototype.emit=function(ge,ye,xe,_e,$e,Ie){var Fe=ue?ue+ge:ge;if(!this._events[Fe])return!1;var ke=this._events[Fe],je=arguments.length,We,ze;if(ke.fn){switch(ke.once&&this.removeListener(ge,ke.fn,void 0,!0),je){case 1:return ke.fn.call(ke.context),!0;case 2:return ke.fn.call(ke.context,ye),!0;case 3:return ke.fn.call(ke.context,ye,xe),!0;case 4:return ke.fn.call(ke.context,ye,xe,_e),!0;case 5:return ke.fn.call(ke.context,ye,xe,_e,$e),!0;case 6:return ke.fn.call(ke.context,ye,xe,_e,$e,Ie),!0}for(ze=1,We=new Array(je-1);ze<je;ze++)We[ze-1]=arguments[ze];ke.fn.apply(ke.context,We)}else{var Xe=ke.length,Je;for(ze=0;ze<Xe;ze++)switch(ke[ze].once&&this.removeListener(ge,ke[ze].fn,void 0,!0),je){case 1:ke[ze].fn.call(ke[ze].context);break;case 2:ke[ze].fn.call(ke[ze].context,ye);break;case 3:ke[ze].fn.call(ke[ze].context,ye,xe);break;case 4:ke[ze].fn.call(ke[ze].context,ye,xe,_e);break;default:if(!We)for(Je=1,We=new Array(je-1);Je<je;Je++)We[Je-1]=arguments[Je];ke[ze].fn.apply(ke[ze].context,We)}}return!0},ve.prototype.on=function(ge,ye,xe){var _e=new pe(ye,xe||this),$e=ue?ue+ge:ge;return this._events[$e]?this._events[$e].fn?this._events[$e]=[this._events[$e],_e]:this._events[$e].push(_e):(this._events[$e]=_e,this._eventsCount++),this},ve.prototype.once=function(ge,ye,xe){var _e=new pe(ye,xe||this,!0),$e=ue?ue+ge:ge;return this._events[$e]?this._events[$e].fn?this._events[$e]=[this._events[$e],_e]:this._events[$e].push(_e):(this._events[$e]=_e,this._eventsCount++),this},ve.prototype.removeListener=function(ge,ye,xe,_e){var $e=ue?ue+ge:ge;if(!this._events[$e])return this;if(!ye)return--this._eventsCount===0?this._events=new Ae:delete this._events[$e],this;var Ie=this._events[$e];if(Ie.fn)Ie.fn===ye&&(!_e||Ie.once)&&(!xe||Ie.context===xe)&&(--this._eventsCount===0?this._events=new Ae:delete this._events[$e]);else{for(var Fe=0,ke=[],je=Ie.length;Fe<je;Fe++)(Ie[Fe].fn!==ye||_e&&!Ie[Fe].once||xe&&Ie[Fe].context!==xe)&&ke.push(Ie[Fe]);ke.length?this._events[$e]=ke.length===1?ke[0]:ke:--this._eventsCount===0?this._events=new Ae:delete this._events[$e]}return this},ve.prototype.removeAllListeners=function(ge){var ye;return ge?(ye=ue?ue+ge:ge,this._events[ye]&&(--this._eventsCount===0?this._events=new Ae:delete this._events[ye])):(this._events=new Ae,this._eventsCount=0),this},ve.prototype.off=ve.prototype.removeListener,ve.prototype.addListener=ve.prototype.on,ve.prototype.setMaxListeners=function(){return this},ve.prefixed=ue,ve.EventEmitter=ve,typeof ne<"u"&&(ne.exports=ve)},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.matchText=oe.matchSpacing=oe.matchNewline=oe.matchBlot=oe.matchAttributor=oe.default=void 0;var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pt){return typeof pt}:function(pt){return pt&&typeof Symbol=="function"&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt},Ae=function(){function pt(vt,Mt){var St=[],_t=!0,Xt=!1,Tt=void 0;try{for(var Dt=vt[Symbol.iterator](),Ht;!(_t=(Ht=Dt.next()).done)&&(St.push(Ht.value),!(Mt&&St.length===Mt));_t=!0);}catch(Bt){Xt=!0,Tt=Bt}finally{try{!_t&&Dt.return&&Dt.return()}finally{if(Xt)throw Tt}}return St}return function(vt,Mt){if(Array.isArray(vt))return vt;if(Symbol.iterator in Object(vt))return pt(vt,Mt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function pt(vt,Mt){for(var St=0;St<Mt.length;St++){var _t=Mt[St];_t.enumerable=_t.enumerable||!1,_t.configurable=!0,"value"in _t&&(_t.writable=!0),Object.defineProperty(vt,_t.key,_t)}}return function(vt,Mt,St){return Mt&&pt(vt.prototype,Mt),St&&pt(vt,St),vt}}(),ve=ce(3),me=Se(ve),ge=ce(2),ye=Se(ge),xe=ce(0),_e=Se(xe),$e=ce(5),Ie=Se($e),Fe=ce(10),ke=Se(Fe),je=ce(9),We=Se(je),ze=ce(36),Xe=ce(37),Je=ce(13),nt=Se(Je),et=ce(26),tt=ce(38),st=ce(39),qe=ce(40);function Se(pt){return pt&&pt.__esModule?pt:{default:pt}}function Re(pt,vt,Mt){return vt in pt?Object.defineProperty(pt,vt,{value:Mt,enumerable:!0,configurable:!0,writable:!0}):pt[vt]=Mt,pt}function Be(pt,vt){if(!(pt instanceof vt))throw new TypeError("Cannot call a class as a function")}function Ne(pt,vt){if(!pt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return vt&&(typeof vt=="object"||typeof vt=="function")?vt:pt}function Ue(pt,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof vt);pt.prototype=Object.create(vt&&vt.prototype,{constructor:{value:pt,enumerable:!1,writable:!0,configurable:!0}}),vt&&(Object.setPrototypeOf?Object.setPrototypeOf(pt,vt):pt.__proto__=vt)}var Ge=(0,ke.default)("quill:clipboard"),Ye="__ql-matcher",Qe=[[Node.TEXT_NODE,$t],[Node.TEXT_NODE,Ot],["br",kt],[Node.ELEMENT_NODE,Ot],[Node.ELEMENT_NODE,mt],[Node.ELEMENT_NODE,Rt],[Node.ELEMENT_NODE,dt],[Node.ELEMENT_NODE,gt],["li",Et],["b",ft.bind(ft,"bold")],["i",ft.bind(ft,"italic")],["style",wt]],Te=[ze.AlignAttribute,tt.DirectionAttribute].reduce(function(pt,vt){return pt[vt.keyName]=vt,pt},{}),Ke=[ze.AlignStyle,Xe.BackgroundStyle,et.ColorStyle,tt.DirectionStyle,st.FontStyle,qe.SizeStyle].reduce(function(pt,vt){return pt[vt.keyName]=vt,pt},{}),rt=function(pt){Ue(vt,pt);function vt(Mt,St){Be(this,vt);var _t=Ne(this,(vt.__proto__||Object.getPrototypeOf(vt)).call(this,Mt,St));return _t.quill.root.addEventListener("paste",_t.onPaste.bind(_t)),_t.container=_t.quill.addContainer("ql-clipboard"),_t.container.setAttribute("contenteditable",!0),_t.container.setAttribute("tabindex",-1),_t.matchers=[],Qe.concat(_t.options.matchers).forEach(function(Xt){var Tt=Ae(Xt,2),Dt=Tt[0],Ht=Tt[1];!St.matchVisual&&Ht===Rt||_t.addMatcher(Dt,Ht)}),_t}return pe(vt,[{key:"addMatcher",value:function(St,_t){this.matchers.push([St,_t])}},{key:"convert",value:function(St){if(typeof St=="string")return this.container.innerHTML=St.replace(/\>\r?\n +\</g,"><"),this.convert();var _t=this.quill.getFormat(this.quill.selection.savedRange.index);if(_t[nt.default.blotName]){var Xt=this.container.innerText;return this.container.innerHTML="",new ye.default().insert(Xt,Re({},nt.default.blotName,_t[nt.default.blotName]))}var Tt=this.prepareMatching(),Dt=Ae(Tt,2),Ht=Dt[0],Bt=Dt[1],It=ot(this.container,Ht,Bt);return lt(It,`
`)&&It.ops[It.ops.length-1].attributes==null&&(It=It.compose(new ye.default().retain(It.length()-1).delete(1))),Ge.log("convert",this.container.innerHTML,It),this.container.innerHTML="",It}},{key:"dangerouslyPasteHTML",value:function(St,_t){var Xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ie.default.sources.API;if(typeof St=="string")this.quill.setContents(this.convert(St),_t),this.quill.setSelection(0,Ie.default.sources.SILENT);else{var Tt=this.convert(_t);this.quill.updateContents(new ye.default().retain(St).concat(Tt),Xt),this.quill.setSelection(St+Tt.length(),Ie.default.sources.SILENT)}}},{key:"onPaste",value:function(St){var _t=this;if(!(St.defaultPrevented||!this.quill.isEnabled())){var Xt=this.quill.getSelection(),Tt=new ye.default().retain(Xt.index),Dt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(Ie.default.sources.SILENT),setTimeout(function(){Tt=Tt.concat(_t.convert()).delete(Xt.length),_t.quill.updateContents(Tt,Ie.default.sources.USER),_t.quill.setSelection(Tt.length()-Xt.length,Ie.default.sources.SILENT),_t.quill.scrollingContainer.scrollTop=Dt,_t.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var St=this,_t=[],Xt=[];return this.matchers.forEach(function(Tt){var Dt=Ae(Tt,2),Ht=Dt[0],Bt=Dt[1];switch(Ht){case Node.TEXT_NODE:Xt.push(Bt);break;case Node.ELEMENT_NODE:_t.push(Bt);break;default:[].forEach.call(St.container.querySelectorAll(Ht),function(It){It[Ye]=It[Ye]||[],It[Ye].push(Bt)});break}}),[_t,Xt]}}]),vt}(We.default);rt.DEFAULTS={matchers:[],matchVisual:!0};function it(pt,vt,Mt){return(typeof vt>"u"?"undefined":ue(vt))==="object"?Object.keys(vt).reduce(function(St,_t){return it(St,_t,vt[_t])},pt):pt.reduce(function(St,_t){return _t.attributes&&_t.attributes[vt]?St.push(_t):St.insert(_t.insert,(0,me.default)({},Re({},vt,Mt),_t.attributes))},new ye.default)}function at(pt){if(pt.nodeType!==Node.ELEMENT_NODE)return{};var vt="__ql-computed-style";return pt[vt]||(pt[vt]=window.getComputedStyle(pt))}function lt(pt,vt){for(var Mt="",St=pt.ops.length-1;St>=0&&Mt.length<vt.length;--St){var _t=pt.ops[St];if(typeof _t.insert!="string")break;Mt=_t.insert+Mt}return Mt.slice(-1*vt.length)===vt}function ct(pt){if(pt.childNodes.length===0)return!1;var vt=at(pt);return["block","list-item"].indexOf(vt.display)>-1}function ot(pt,vt,Mt){return pt.nodeType===pt.TEXT_NODE?Mt.reduce(function(St,_t){return _t(pt,St)},new ye.default):pt.nodeType===pt.ELEMENT_NODE?[].reduce.call(pt.childNodes||[],function(St,_t){var Xt=ot(_t,vt,Mt);return _t.nodeType===pt.ELEMENT_NODE&&(Xt=vt.reduce(function(Tt,Dt){return Dt(_t,Tt)},Xt),Xt=(_t[Ye]||[]).reduce(function(Tt,Dt){return Dt(_t,Tt)},Xt)),St.concat(Xt)},new ye.default):new ye.default}function ft(pt,vt,Mt){return it(Mt,pt,!0)}function dt(pt,vt){var Mt=_e.default.Attributor.Attribute.keys(pt),St=_e.default.Attributor.Class.keys(pt),_t=_e.default.Attributor.Style.keys(pt),Xt={};return Mt.concat(St).concat(_t).forEach(function(Tt){var Dt=_e.default.query(Tt,_e.default.Scope.ATTRIBUTE);Dt!=null&&(Xt[Dt.attrName]=Dt.value(pt),Xt[Dt.attrName])||(Dt=Te[Tt],Dt!=null&&(Dt.attrName===Tt||Dt.keyName===Tt)&&(Xt[Dt.attrName]=Dt.value(pt)||void 0),Dt=Ke[Tt],Dt!=null&&(Dt.attrName===Tt||Dt.keyName===Tt)&&(Dt=Ke[Tt],Xt[Dt.attrName]=Dt.value(pt)||void 0))}),Object.keys(Xt).length>0&&(vt=it(vt,Xt)),vt}function mt(pt,vt){var Mt=_e.default.query(pt);if(Mt==null)return vt;if(Mt.prototype instanceof _e.default.Embed){var St={},_t=Mt.value(pt);_t!=null&&(St[Mt.blotName]=_t,vt=new ye.default().insert(St,Mt.formats(pt)))}else typeof Mt.formats=="function"&&(vt=it(vt,Mt.blotName,Mt.formats(pt)));return vt}function kt(pt,vt){return lt(vt,`
`)||vt.insert(`
`),vt}function wt(){return new ye.default}function Et(pt,vt){var Mt=_e.default.query(pt);if(Mt==null||Mt.blotName!=="list-item"||!lt(vt,`
`))return vt;for(var St=-1,_t=pt.parentNode;!_t.classList.contains("ql-clipboard");)(_e.default.query(_t)||{}).blotName==="list"&&(St+=1),_t=_t.parentNode;return St<=0?vt:vt.compose(new ye.default().retain(vt.length()-1).retain(1,{indent:St}))}function Ot(pt,vt){return lt(vt,`
`)||(ct(pt)||vt.length()>0&&pt.nextSibling&&ct(pt.nextSibling))&&vt.insert(`
`),vt}function Rt(pt,vt){if(ct(pt)&&pt.nextElementSibling!=null&&!lt(vt,`

`)){var Mt=pt.offsetHeight+parseFloat(at(pt).marginTop)+parseFloat(at(pt).marginBottom);pt.nextElementSibling.offsetTop>pt.offsetTop+Mt*1.5&&vt.insert(`
`)}return vt}function gt(pt,vt){var Mt={},St=pt.style||{};return St.fontStyle&&at(pt).fontStyle==="italic"&&(Mt.italic=!0),St.fontWeight&&(at(pt).fontWeight.startsWith("bold")||parseInt(at(pt).fontWeight)>=700)&&(Mt.bold=!0),Object.keys(Mt).length>0&&(vt=it(vt,Mt)),parseFloat(St.textIndent||0)>0&&(vt=new ye.default().insert("	").concat(vt)),vt}function $t(pt,vt){var Mt=pt.data;if(pt.parentNode.tagName==="O:P")return vt.insert(Mt.trim());if(Mt.trim().length===0&&pt.parentNode.classList.contains("ql-clipboard"))return vt;if(!at(pt.parentNode).whiteSpace.startsWith("pre")){var St=function(Xt,Tt){return Tt=Tt.replace(/[^\u00a0]/g,""),Tt.length<1&&Xt?" ":Tt};Mt=Mt.replace(/\r\n/g," ").replace(/\n/g," "),Mt=Mt.replace(/\s\s+/g,St.bind(St,!0)),(pt.previousSibling==null&&ct(pt.parentNode)||pt.previousSibling!=null&&ct(pt.previousSibling))&&(Mt=Mt.replace(/^\s+/,St.bind(St,!1))),(pt.nextSibling==null&&ct(pt.parentNode)||pt.nextSibling!=null&&ct(pt.nextSibling))&&(Mt=Mt.replace(/\s+$/,St.bind(St,!1)))}return vt.insert(Mt)}oe.default=rt,oe.matchAttributor=dt,oe.matchBlot=mt,oe.matchNewline=Ot,oe.matchSpacing=Rt,oe.matchText=$t},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function $e(Ie,Fe){for(var ke=0;ke<Fe.length;ke++){var je=Fe[ke];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(Ie,je.key,je)}}return function(Ie,Fe,ke){return Fe&&$e(Ie.prototype,Fe),ke&&$e(Ie,ke),Ie}}(),Ae=function $e(Ie,Fe,ke){Ie===null&&(Ie=Function.prototype);var je=Object.getOwnPropertyDescriptor(Ie,Fe);if(je===void 0){var We=Object.getPrototypeOf(Ie);return We===null?void 0:$e(We,Fe,ke)}else{if("value"in je)return je.value;var ze=je.get;return ze===void 0?void 0:ze.call(ke)}},pe=ce(6),ve=me(pe);function me($e){return $e&&$e.__esModule?$e:{default:$e}}function ge($e,Ie){if(!($e instanceof Ie))throw new TypeError("Cannot call a class as a function")}function ye($e,Ie){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie&&(typeof Ie=="object"||typeof Ie=="function")?Ie:$e}function xe($e,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);$e.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf($e,Ie):$e.__proto__=Ie)}var _e=function($e){xe(Ie,$e);function Ie(){return ge(this,Ie),ye(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).apply(this,arguments))}return ue(Ie,[{key:"optimize",value:function(ke){Ae(Ie.prototype.__proto__||Object.getPrototypeOf(Ie.prototype),"optimize",this).call(this,ke),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return Ae(Ie.__proto__||Object.getPrototypeOf(Ie),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),Ie}(ve.default);_e.blotName="bold",_e.tagName=["STRONG","B"],oe.default=_e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.addControls=oe.default=void 0;var ue=function(){function qe(Se,Re){var Be=[],Ne=!0,Ue=!1,Ge=void 0;try{for(var Ye=Se[Symbol.iterator](),Qe;!(Ne=(Qe=Ye.next()).done)&&(Be.push(Qe.value),!(Re&&Be.length===Re));Ne=!0);}catch(Te){Ue=!0,Ge=Te}finally{try{!Ne&&Ye.return&&Ye.return()}finally{if(Ue)throw Ge}}return Be}return function(Se,Re){if(Array.isArray(Se))return Se;if(Symbol.iterator in Object(Se))return qe(Se,Re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function(){function qe(Se,Re){for(var Be=0;Be<Re.length;Be++){var Ne=Re[Be];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(Se,Ne.key,Ne)}}return function(Se,Re,Be){return Re&&qe(Se.prototype,Re),Be&&qe(Se,Be),Se}}(),pe=ce(2),ve=ke(pe),me=ce(0),ge=ke(me),ye=ce(5),xe=ke(ye),_e=ce(10),$e=ke(_e),Ie=ce(9),Fe=ke(Ie);function ke(qe){return qe&&qe.__esModule?qe:{default:qe}}function je(qe,Se,Re){return Se in qe?Object.defineProperty(qe,Se,{value:Re,enumerable:!0,configurable:!0,writable:!0}):qe[Se]=Re,qe}function We(qe,Se){if(!(qe instanceof Se))throw new TypeError("Cannot call a class as a function")}function ze(qe,Se){if(!qe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Se&&(typeof Se=="object"||typeof Se=="function")?Se:qe}function Xe(qe,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Se);qe.prototype=Object.create(Se&&Se.prototype,{constructor:{value:qe,enumerable:!1,writable:!0,configurable:!0}}),Se&&(Object.setPrototypeOf?Object.setPrototypeOf(qe,Se):qe.__proto__=Se)}var Je=(0,$e.default)("quill:toolbar"),nt=function(qe){Xe(Se,qe);function Se(Re,Be){We(this,Se);var Ne=ze(this,(Se.__proto__||Object.getPrototypeOf(Se)).call(this,Re,Be));if(Array.isArray(Ne.options.container)){var Ue=document.createElement("div");tt(Ue,Ne.options.container),Re.container.parentNode.insertBefore(Ue,Re.container),Ne.container=Ue}else typeof Ne.options.container=="string"?Ne.container=document.querySelector(Ne.options.container):Ne.container=Ne.options.container;if(!(Ne.container instanceof HTMLElement)){var Ge;return Ge=Je.error("Container required for toolbar",Ne.options),ze(Ne,Ge)}return Ne.container.classList.add("ql-toolbar"),Ne.controls=[],Ne.handlers={},Object.keys(Ne.options.handlers).forEach(function(Ye){Ne.addHandler(Ye,Ne.options.handlers[Ye])}),[].forEach.call(Ne.container.querySelectorAll("button, select"),function(Ye){Ne.attach(Ye)}),Ne.quill.on(xe.default.events.EDITOR_CHANGE,function(Ye,Qe){Ye===xe.default.events.SELECTION_CHANGE&&Ne.update(Qe)}),Ne.quill.on(xe.default.events.SCROLL_OPTIMIZE,function(){var Ye=Ne.quill.selection.getRange(),Qe=ue(Ye,1),Te=Qe[0];Ne.update(Te)}),Ne}return Ae(Se,[{key:"addHandler",value:function(Be,Ne){this.handlers[Be]=Ne}},{key:"attach",value:function(Be){var Ne=this,Ue=[].find.call(Be.classList,function(Ye){return Ye.indexOf("ql-")===0});if(Ue){if(Ue=Ue.slice(3),Be.tagName==="BUTTON"&&Be.setAttribute("type","button"),this.handlers[Ue]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Ue]==null){Je.warn("ignoring attaching to disabled format",Ue,Be);return}if(ge.default.query(Ue)==null){Je.warn("ignoring attaching to nonexistent format",Ue,Be);return}}var Ge=Be.tagName==="SELECT"?"change":"click";Be.addEventListener(Ge,function(Ye){var Qe=void 0;if(Be.tagName==="SELECT"){if(Be.selectedIndex<0)return;var Te=Be.options[Be.selectedIndex];Te.hasAttribute("selected")?Qe=!1:Qe=Te.value||!1}else Be.classList.contains("ql-active")?Qe=!1:Qe=Be.value||!Be.hasAttribute("value"),Ye.preventDefault();Ne.quill.focus();var Ke=Ne.quill.selection.getRange(),rt=ue(Ke,1),it=rt[0];if(Ne.handlers[Ue]!=null)Ne.handlers[Ue].call(Ne,Qe);else if(ge.default.query(Ue).prototype instanceof ge.default.Embed){if(Qe=prompt("Enter "+Ue),!Qe)return;Ne.quill.updateContents(new ve.default().retain(it.index).delete(it.length).insert(je({},Ue,Qe)),xe.default.sources.USER)}else Ne.quill.format(Ue,Qe,xe.default.sources.USER);Ne.update(it)}),this.controls.push([Ue,Be])}}},{key:"update",value:function(Be){var Ne=Be==null?{}:this.quill.getFormat(Be);this.controls.forEach(function(Ue){var Ge=ue(Ue,2),Ye=Ge[0],Qe=Ge[1];if(Qe.tagName==="SELECT"){var Te=void 0;if(Be==null)Te=null;else if(Ne[Ye]==null)Te=Qe.querySelector("option[selected]");else if(!Array.isArray(Ne[Ye])){var Ke=Ne[Ye];typeof Ke=="string"&&(Ke=Ke.replace(/\"/g,'\\"')),Te=Qe.querySelector('option[value="'+Ke+'"]')}Te==null?(Qe.value="",Qe.selectedIndex=-1):Te.selected=!0}else if(Be==null)Qe.classList.remove("ql-active");else if(Qe.hasAttribute("value")){var rt=Ne[Ye]===Qe.getAttribute("value")||Ne[Ye]!=null&&Ne[Ye].toString()===Qe.getAttribute("value")||Ne[Ye]==null&&!Qe.getAttribute("value");Qe.classList.toggle("ql-active",rt)}else Qe.classList.toggle("ql-active",Ne[Ye]!=null)})}}]),Se}(Fe.default);nt.DEFAULTS={};function et(qe,Se,Re){var Be=document.createElement("button");Be.setAttribute("type","button"),Be.classList.add("ql-"+Se),Re!=null&&(Be.value=Re),qe.appendChild(Be)}function tt(qe,Se){Array.isArray(Se[0])||(Se=[Se]),Se.forEach(function(Re){var Be=document.createElement("span");Be.classList.add("ql-formats"),Re.forEach(function(Ne){if(typeof Ne=="string")et(Be,Ne);else{var Ue=Object.keys(Ne)[0],Ge=Ne[Ue];Array.isArray(Ge)?st(Be,Ue,Ge):et(Be,Ue,Ge)}}),qe.appendChild(Be)})}function st(qe,Se,Re){var Be=document.createElement("select");Be.classList.add("ql-"+Se),Re.forEach(function(Ne){var Ue=document.createElement("option");Ne!==!1?Ue.setAttribute("value",Ne):Ue.setAttribute("selected","selected"),Be.appendChild(Ue)}),qe.appendChild(Be)}nt.DEFAULTS={container:null,handlers:{clean:function(){var Se=this,Re=this.quill.getSelection();if(Re!=null)if(Re.length==0){var Be=this.quill.getFormat();Object.keys(Be).forEach(function(Ne){ge.default.query(Ne,ge.default.Scope.INLINE)!=null&&Se.quill.format(Ne,!1)})}else this.quill.removeFormat(Re,xe.default.sources.USER)},direction:function(Se){var Re=this.quill.getFormat().align;Se==="rtl"&&Re==null?this.quill.format("align","right",xe.default.sources.USER):!Se&&Re==="right"&&this.quill.format("align",!1,xe.default.sources.USER),this.quill.format("direction",Se,xe.default.sources.USER)},indent:function(Se){var Re=this.quill.getSelection(),Be=this.quill.getFormat(Re),Ne=parseInt(Be.indent||0);if(Se==="+1"||Se==="-1"){var Ue=Se==="+1"?1:-1;Be.direction==="rtl"&&(Ue*=-1),this.quill.format("indent",Ne+Ue,xe.default.sources.USER)}},link:function(Se){Se===!0&&(Se=prompt("Enter link URL:")),this.quill.format("link",Se,xe.default.sources.USER)},list:function(Se){var Re=this.quill.getSelection(),Be=this.quill.getFormat(Re);Se==="check"?Be.list==="checked"||Be.list==="unchecked"?this.quill.format("list",!1,xe.default.sources.USER):this.quill.format("list","unchecked",xe.default.sources.USER):this.quill.format("list",Se,xe.default.sources.USER)}}},oe.default=nt,oe.addControls=tt},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function $e(Ie,Fe){for(var ke=0;ke<Fe.length;ke++){var je=Fe[ke];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(Ie,je.key,je)}}return function(Ie,Fe,ke){return Fe&&$e(Ie.prototype,Fe),ke&&$e(Ie,ke),Ie}}(),Ae=function $e(Ie,Fe,ke){Ie===null&&(Ie=Function.prototype);var je=Object.getOwnPropertyDescriptor(Ie,Fe);if(je===void 0){var We=Object.getPrototypeOf(Ie);return We===null?void 0:$e(We,Fe,ke)}else{if("value"in je)return je.value;var ze=je.get;return ze===void 0?void 0:ze.call(ke)}},pe=ce(28),ve=me(pe);function me($e){return $e&&$e.__esModule?$e:{default:$e}}function ge($e,Ie){if(!($e instanceof Ie))throw new TypeError("Cannot call a class as a function")}function ye($e,Ie){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie&&(typeof Ie=="object"||typeof Ie=="function")?Ie:$e}function xe($e,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);$e.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf($e,Ie):$e.__proto__=Ie)}var _e=function($e){xe(Ie,$e);function Ie(Fe,ke){ge(this,Ie);var je=ye(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this,Fe));return je.label.innerHTML=ke,je.container.classList.add("ql-color-picker"),[].slice.call(je.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(We){We.classList.add("ql-primary")}),je}return ue(Ie,[{key:"buildItem",value:function(ke){var je=Ae(Ie.prototype.__proto__||Object.getPrototypeOf(Ie.prototype),"buildItem",this).call(this,ke);return je.style.backgroundColor=ke.getAttribute("value")||"",je}},{key:"selectItem",value:function(ke,je){Ae(Ie.prototype.__proto__||Object.getPrototypeOf(Ie.prototype),"selectItem",this).call(this,ke,je);var We=this.label.querySelector(".ql-color-label"),ze=ke&&ke.getAttribute("data-value")||"";We&&(We.tagName==="line"?We.style.stroke=ze:We.style.fill=ze)}}]),Ie}(ve.default);oe.default=_e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function $e(Ie,Fe){for(var ke=0;ke<Fe.length;ke++){var je=Fe[ke];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(Ie,je.key,je)}}return function(Ie,Fe,ke){return Fe&&$e(Ie.prototype,Fe),ke&&$e(Ie,ke),Ie}}(),Ae=function $e(Ie,Fe,ke){Ie===null&&(Ie=Function.prototype);var je=Object.getOwnPropertyDescriptor(Ie,Fe);if(je===void 0){var We=Object.getPrototypeOf(Ie);return We===null?void 0:$e(We,Fe,ke)}else{if("value"in je)return je.value;var ze=je.get;return ze===void 0?void 0:ze.call(ke)}},pe=ce(28),ve=me(pe);function me($e){return $e&&$e.__esModule?$e:{default:$e}}function ge($e,Ie){if(!($e instanceof Ie))throw new TypeError("Cannot call a class as a function")}function ye($e,Ie){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie&&(typeof Ie=="object"||typeof Ie=="function")?Ie:$e}function xe($e,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);$e.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf($e,Ie):$e.__proto__=Ie)}var _e=function($e){xe(Ie,$e);function Ie(Fe,ke){ge(this,Ie);var je=ye(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this,Fe));return je.container.classList.add("ql-icon-picker"),[].forEach.call(je.container.querySelectorAll(".ql-picker-item"),function(We){We.innerHTML=ke[We.getAttribute("data-value")||""]}),je.defaultItem=je.container.querySelector(".ql-selected"),je.selectItem(je.defaultItem),je}return ue(Ie,[{key:"selectItem",value:function(ke,je){Ae(Ie.prototype.__proto__||Object.getPrototypeOf(Ie.prototype),"selectItem",this).call(this,ke,je),ke=ke||this.defaultItem,this.label.innerHTML=ke.innerHTML}}]),Ie}(ve.default);oe.default=_e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function ve(me,ge){for(var ye=0;ye<ge.length;ye++){var xe=ge[ye];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(me,xe.key,xe)}}return function(me,ge,ye){return ge&&ve(me.prototype,ge),ye&&ve(me,ye),me}}();function Ae(ve,me){if(!(ve instanceof me))throw new TypeError("Cannot call a class as a function")}var pe=function(){function ve(me,ge){var ye=this;Ae(this,ve),this.quill=me,this.boundsContainer=ge||document.body,this.root=me.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){ye.root.style.marginTop=-1*ye.quill.root.scrollTop+"px"}),this.hide()}return ue(ve,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(ge){var ye=ge.left+ge.width/2-this.root.offsetWidth/2,xe=ge.bottom+this.quill.root.scrollTop;this.root.style.left=ye+"px",this.root.style.top=xe+"px",this.root.classList.remove("ql-flip");var _e=this.boundsContainer.getBoundingClientRect(),$e=this.root.getBoundingClientRect(),Ie=0;if($e.right>_e.right&&(Ie=_e.right-$e.right,this.root.style.left=ye+Ie+"px"),$e.left<_e.left&&(Ie=_e.left-$e.left,this.root.style.left=ye+Ie+"px"),$e.bottom>_e.bottom){var Fe=$e.bottom-$e.top,ke=ge.bottom-ge.top+Fe;this.root.style.top=xe-ke+"px",this.root.classList.add("ql-flip")}return Ie}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),ve}();oe.default=pe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function st(qe,Se){var Re=[],Be=!0,Ne=!1,Ue=void 0;try{for(var Ge=qe[Symbol.iterator](),Ye;!(Be=(Ye=Ge.next()).done)&&(Re.push(Ye.value),!(Se&&Re.length===Se));Be=!0);}catch(Qe){Ne=!0,Ue=Qe}finally{try{!Be&&Ge.return&&Ge.return()}finally{if(Ne)throw Ue}}return Re}return function(qe,Se){if(Array.isArray(qe))return qe;if(Symbol.iterator in Object(qe))return st(qe,Se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function st(qe,Se,Re){qe===null&&(qe=Function.prototype);var Be=Object.getOwnPropertyDescriptor(qe,Se);if(Be===void 0){var Ne=Object.getPrototypeOf(qe);return Ne===null?void 0:st(Ne,Se,Re)}else{if("value"in Be)return Be.value;var Ue=Be.get;return Ue===void 0?void 0:Ue.call(Re)}},pe=function(){function st(qe,Se){for(var Re=0;Re<Se.length;Re++){var Be=Se[Re];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(qe,Be.key,Be)}}return function(qe,Se,Re){return Se&&st(qe.prototype,Se),Re&&st(qe,Re),qe}}(),ve=ce(3),me=We(ve),ge=ce(8),ye=We(ge),xe=ce(43),_e=We(xe),$e=ce(27),Ie=We($e),Fe=ce(15),ke=ce(41),je=We(ke);function We(st){return st&&st.__esModule?st:{default:st}}function ze(st,qe){if(!(st instanceof qe))throw new TypeError("Cannot call a class as a function")}function Xe(st,qe){if(!st)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return qe&&(typeof qe=="object"||typeof qe=="function")?qe:st}function Je(st,qe){if(typeof qe!="function"&&qe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof qe);st.prototype=Object.create(qe&&qe.prototype,{constructor:{value:st,enumerable:!1,writable:!0,configurable:!0}}),qe&&(Object.setPrototypeOf?Object.setPrototypeOf(st,qe):st.__proto__=qe)}var nt=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],et=function(st){Je(qe,st);function qe(Se,Re){ze(this,qe),Re.modules.toolbar!=null&&Re.modules.toolbar.container==null&&(Re.modules.toolbar.container=nt);var Be=Xe(this,(qe.__proto__||Object.getPrototypeOf(qe)).call(this,Se,Re));return Be.quill.container.classList.add("ql-snow"),Be}return pe(qe,[{key:"extendToolbar",value:function(Re){Re.container.classList.add("ql-snow"),this.buildButtons([].slice.call(Re.container.querySelectorAll("button")),je.default),this.buildPickers([].slice.call(Re.container.querySelectorAll("select")),je.default),this.tooltip=new tt(this.quill,this.options.bounds),Re.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(Be,Ne){Re.handlers.link.call(Re,!Ne.format.link)})}}]),qe}(_e.default);et.DEFAULTS=(0,me.default)(!0,{},_e.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(qe){if(qe){var Se=this.quill.getSelection();if(Se==null||Se.length==0)return;var Re=this.quill.getText(Se);/^\S+@\S+\.\S+$/.test(Re)&&Re.indexOf("mailto:")!==0&&(Re="mailto:"+Re);var Be=this.quill.theme.tooltip;Be.edit("link",Re)}else this.quill.format("link",!1)}}}}});var tt=function(st){Je(qe,st);function qe(Se,Re){ze(this,qe);var Be=Xe(this,(qe.__proto__||Object.getPrototypeOf(qe)).call(this,Se,Re));return Be.preview=Be.root.querySelector("a.ql-preview"),Be}return pe(qe,[{key:"listen",value:function(){var Re=this;Ae(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(Be){Re.root.classList.contains("ql-editing")?Re.save():Re.edit("link",Re.preview.textContent),Be.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(Be){if(Re.linkRange!=null){var Ne=Re.linkRange;Re.restoreFocus(),Re.quill.formatText(Ne,"link",!1,ye.default.sources.USER),delete Re.linkRange}Be.preventDefault(),Re.hide()}),this.quill.on(ye.default.events.SELECTION_CHANGE,function(Be,Ne,Ue){if(Be!=null){if(Be.length===0&&Ue===ye.default.sources.USER){var Ge=Re.quill.scroll.descendant(Ie.default,Be.index),Ye=ue(Ge,2),Qe=Ye[0],Te=Ye[1];if(Qe!=null){Re.linkRange=new Fe.Range(Be.index-Te,Qe.length());var Ke=Ie.default.formats(Qe.domNode);Re.preview.textContent=Ke,Re.preview.setAttribute("href",Ke),Re.show(),Re.position(Re.quill.getBounds(Re.linkRange));return}}else delete Re.linkRange;Re.hide()}})}},{key:"show",value:function(){Ae(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),qe}(xe.BaseTooltip);tt.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),oe.default=et},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(29),Ae=_t(ue),pe=ce(36),ve=ce(38),me=ce(64),ge=ce(65),ye=_t(ge),xe=ce(66),_e=_t(xe),$e=ce(67),Ie=_t($e),Fe=ce(37),ke=ce(26),je=ce(39),We=ce(40),ze=ce(56),Xe=_t(ze),Je=ce(68),nt=_t(Je),et=ce(27),tt=_t(et),st=ce(69),qe=_t(st),Se=ce(70),Re=_t(Se),Be=ce(71),Ne=_t(Be),Ue=ce(72),Ge=_t(Ue),Ye=ce(73),Qe=_t(Ye),Te=ce(13),Ke=_t(Te),rt=ce(74),it=_t(rt),at=ce(75),lt=_t(at),ct=ce(57),ot=_t(ct),ft=ce(41),dt=_t(ft),mt=ce(28),kt=_t(mt),wt=ce(59),Et=_t(wt),Ot=ce(60),Rt=_t(Ot),gt=ce(61),$t=_t(gt),pt=ce(108),vt=_t(pt),Mt=ce(62),St=_t(Mt);function _t(Xt){return Xt&&Xt.__esModule?Xt:{default:Xt}}Ae.default.register({"attributors/attribute/direction":ve.DirectionAttribute,"attributors/class/align":pe.AlignClass,"attributors/class/background":Fe.BackgroundClass,"attributors/class/color":ke.ColorClass,"attributors/class/direction":ve.DirectionClass,"attributors/class/font":je.FontClass,"attributors/class/size":We.SizeClass,"attributors/style/align":pe.AlignStyle,"attributors/style/background":Fe.BackgroundStyle,"attributors/style/color":ke.ColorStyle,"attributors/style/direction":ve.DirectionStyle,"attributors/style/font":je.FontStyle,"attributors/style/size":We.SizeStyle},!0),Ae.default.register({"formats/align":pe.AlignClass,"formats/direction":ve.DirectionClass,"formats/indent":me.IndentClass,"formats/background":Fe.BackgroundStyle,"formats/color":ke.ColorStyle,"formats/font":je.FontClass,"formats/size":We.SizeClass,"formats/blockquote":ye.default,"formats/code-block":Ke.default,"formats/header":_e.default,"formats/list":Ie.default,"formats/bold":Xe.default,"formats/code":Te.Code,"formats/italic":nt.default,"formats/link":tt.default,"formats/script":qe.default,"formats/strike":Re.default,"formats/underline":Ne.default,"formats/image":Ge.default,"formats/video":Qe.default,"formats/list/item":$e.ListItem,"modules/formula":it.default,"modules/syntax":lt.default,"modules/toolbar":ot.default,"themes/bubble":vt.default,"themes/snow":St.default,"ui/icons":dt.default,"ui/picker":kt.default,"ui/icon-picker":Rt.default,"ui/color-picker":Et.default,"ui/tooltip":$t.default},!0),oe.default=Ae.default},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.IndentClass=void 0;var ue=function(){function Ie(Fe,ke){for(var je=0;je<ke.length;je++){var We=ke[je];We.enumerable=We.enumerable||!1,We.configurable=!0,"value"in We&&(We.writable=!0),Object.defineProperty(Fe,We.key,We)}}return function(Fe,ke,je){return ke&&Ie(Fe.prototype,ke),je&&Ie(Fe,je),Fe}}(),Ae=function Ie(Fe,ke,je){Fe===null&&(Fe=Function.prototype);var We=Object.getOwnPropertyDescriptor(Fe,ke);if(We===void 0){var ze=Object.getPrototypeOf(Fe);return ze===null?void 0:Ie(ze,ke,je)}else{if("value"in We)return We.value;var Xe=We.get;return Xe===void 0?void 0:Xe.call(je)}},pe=ce(0),ve=me(pe);function me(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}}function ge(Ie,Fe){if(!(Ie instanceof Fe))throw new TypeError("Cannot call a class as a function")}function ye(Ie,Fe){if(!Ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Fe&&(typeof Fe=="object"||typeof Fe=="function")?Fe:Ie}function xe(Ie,Fe){if(typeof Fe!="function"&&Fe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Fe);Ie.prototype=Object.create(Fe&&Fe.prototype,{constructor:{value:Ie,enumerable:!1,writable:!0,configurable:!0}}),Fe&&(Object.setPrototypeOf?Object.setPrototypeOf(Ie,Fe):Ie.__proto__=Fe)}var _e=function(Ie){xe(Fe,Ie);function Fe(){return ge(this,Fe),ye(this,(Fe.__proto__||Object.getPrototypeOf(Fe)).apply(this,arguments))}return ue(Fe,[{key:"add",value:function(je,We){if(We==="+1"||We==="-1"){var ze=this.value(je)||0;We=We==="+1"?ze+1:ze-1}return We===0?(this.remove(je),!0):Ae(Fe.prototype.__proto__||Object.getPrototypeOf(Fe.prototype),"add",this).call(this,je,We)}},{key:"canAdd",value:function(je,We){return Ae(Fe.prototype.__proto__||Object.getPrototypeOf(Fe.prototype),"canAdd",this).call(this,je,We)||Ae(Fe.prototype.__proto__||Object.getPrototypeOf(Fe.prototype),"canAdd",this).call(this,je,parseInt(We))}},{key:"value",value:function(je){return parseInt(Ae(Fe.prototype.__proto__||Object.getPrototypeOf(Fe.prototype),"value",this).call(this,je))||void 0}}]),Fe}(ve.default.Attributor.Class),$e=new _e("indent","ql-indent",{scope:ve.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});oe.IndentClass=$e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(4),Ae=pe(ue);function pe(xe){return xe&&xe.__esModule?xe:{default:xe}}function ve(xe,_e){if(!(xe instanceof _e))throw new TypeError("Cannot call a class as a function")}function me(xe,_e){if(!xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e&&(typeof _e=="object"||typeof _e=="function")?_e:xe}function ge(xe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);xe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:xe,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(xe,_e):xe.__proto__=_e)}var ye=function(xe){ge(_e,xe);function _e(){return ve(this,_e),me(this,(_e.__proto__||Object.getPrototypeOf(_e)).apply(this,arguments))}return _e}(Ae.default);ye.blotName="blockquote",ye.tagName="blockquote",oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function _e($e,Ie){for(var Fe=0;Fe<Ie.length;Fe++){var ke=Ie[Fe];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty($e,ke.key,ke)}}return function($e,Ie,Fe){return Ie&&_e($e.prototype,Ie),Fe&&_e($e,Fe),$e}}(),Ae=ce(4),pe=ve(Ae);function ve(_e){return _e&&_e.__esModule?_e:{default:_e}}function me(_e,$e){if(!(_e instanceof $e))throw new TypeError("Cannot call a class as a function")}function ge(_e,$e){if(!_e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e&&(typeof $e=="object"||typeof $e=="function")?$e:_e}function ye(_e,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $e);_e.prototype=Object.create($e&&$e.prototype,{constructor:{value:_e,enumerable:!1,writable:!0,configurable:!0}}),$e&&(Object.setPrototypeOf?Object.setPrototypeOf(_e,$e):_e.__proto__=$e)}var xe=function(_e){ye($e,_e);function $e(){return me(this,$e),ge(this,($e.__proto__||Object.getPrototypeOf($e)).apply(this,arguments))}return ue($e,null,[{key:"formats",value:function(Fe){return this.tagName.indexOf(Fe.tagName)+1}}]),$e}(pe.default);xe.blotName="header",xe.tagName=["H1","H2","H3","H4","H5","H6"],oe.default=xe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.ListItem=void 0;var ue=function(){function ze(Xe,Je){for(var nt=0;nt<Je.length;nt++){var et=Je[nt];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(Xe,et.key,et)}}return function(Xe,Je,nt){return Je&&ze(Xe.prototype,Je),nt&&ze(Xe,nt),Xe}}(),Ae=function ze(Xe,Je,nt){Xe===null&&(Xe=Function.prototype);var et=Object.getOwnPropertyDescriptor(Xe,Je);if(et===void 0){var tt=Object.getPrototypeOf(Xe);return tt===null?void 0:ze(tt,Je,nt)}else{if("value"in et)return et.value;var st=et.get;return st===void 0?void 0:st.call(nt)}},pe=ce(0),ve=_e(pe),me=ce(4),ge=_e(me),ye=ce(25),xe=_e(ye);function _e(ze){return ze&&ze.__esModule?ze:{default:ze}}function $e(ze,Xe,Je){return Xe in ze?Object.defineProperty(ze,Xe,{value:Je,enumerable:!0,configurable:!0,writable:!0}):ze[Xe]=Je,ze}function Ie(ze,Xe){if(!(ze instanceof Xe))throw new TypeError("Cannot call a class as a function")}function Fe(ze,Xe){if(!ze)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Xe&&(typeof Xe=="object"||typeof Xe=="function")?Xe:ze}function ke(ze,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Xe);ze.prototype=Object.create(Xe&&Xe.prototype,{constructor:{value:ze,enumerable:!1,writable:!0,configurable:!0}}),Xe&&(Object.setPrototypeOf?Object.setPrototypeOf(ze,Xe):ze.__proto__=Xe)}var je=function(ze){ke(Xe,ze);function Xe(){return Ie(this,Xe),Fe(this,(Xe.__proto__||Object.getPrototypeOf(Xe)).apply(this,arguments))}return ue(Xe,[{key:"format",value:function(nt,et){nt===We.blotName&&!et?this.replaceWith(ve.default.create(this.statics.scope)):Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"format",this).call(this,nt,et)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(nt,et){return this.parent.isolate(this.offset(this.parent),this.length()),nt===this.parent.statics.blotName?(this.parent.replaceWith(nt,et),this):(this.parent.unwrap(),Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"replaceWith",this).call(this,nt,et))}}],[{key:"formats",value:function(nt){return nt.tagName===this.tagName?void 0:Ae(Xe.__proto__||Object.getPrototypeOf(Xe),"formats",this).call(this,nt)}}]),Xe}(ge.default);je.blotName="list-item",je.tagName="LI";var We=function(ze){ke(Xe,ze),ue(Xe,null,[{key:"create",value:function(nt){var et=nt==="ordered"?"OL":"UL",tt=Ae(Xe.__proto__||Object.getPrototypeOf(Xe),"create",this).call(this,et);return(nt==="checked"||nt==="unchecked")&&tt.setAttribute("data-checked",nt==="checked"),tt}},{key:"formats",value:function(nt){if(nt.tagName==="OL")return"ordered";if(nt.tagName==="UL")return nt.hasAttribute("data-checked")?nt.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function Xe(Je){Ie(this,Xe);var nt=Fe(this,(Xe.__proto__||Object.getPrototypeOf(Xe)).call(this,Je)),et=function(st){if(st.target.parentNode===Je){var qe=nt.statics.formats(Je),Se=ve.default.find(st.target);qe==="checked"?Se.format("list","unchecked"):qe==="unchecked"&&Se.format("list","checked")}};return Je.addEventListener("touchstart",et),Je.addEventListener("mousedown",et),nt}return ue(Xe,[{key:"format",value:function(nt,et){this.children.length>0&&this.children.tail.format(nt,et)}},{key:"formats",value:function(){return $e({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(nt,et){if(nt instanceof je)Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"insertBefore",this).call(this,nt,et);else{var tt=et==null?this.length():et.offset(this),st=this.split(tt);st.parent.insertBefore(nt,st)}}},{key:"optimize",value:function(nt){Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"optimize",this).call(this,nt);var et=this.next;et!=null&&et.prev===this&&et.statics.blotName===this.statics.blotName&&et.domNode.tagName===this.domNode.tagName&&et.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(et.moveChildren(this),et.remove())}},{key:"replace",value:function(nt){if(nt.statics.blotName!==this.statics.blotName){var et=ve.default.create(this.statics.defaultChild);nt.moveChildren(et),this.appendChild(et)}Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"replace",this).call(this,nt)}}]),Xe}(xe.default);We.blotName="list",We.scope=ve.default.Scope.BLOCK_BLOT,We.tagName=["OL","UL"],We.defaultChild="list-item",We.allowedChildren=[je],oe.ListItem=je,oe.default=We},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(56),Ae=pe(ue);function pe(xe){return xe&&xe.__esModule?xe:{default:xe}}function ve(xe,_e){if(!(xe instanceof _e))throw new TypeError("Cannot call a class as a function")}function me(xe,_e){if(!xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e&&(typeof _e=="object"||typeof _e=="function")?_e:xe}function ge(xe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);xe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:xe,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(xe,_e):xe.__proto__=_e)}var ye=function(xe){ge(_e,xe);function _e(){return ve(this,_e),me(this,(_e.__proto__||Object.getPrototypeOf(_e)).apply(this,arguments))}return _e}(Ae.default);ye.blotName="italic",ye.tagName=["EM","I"],oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function $e(Ie,Fe){for(var ke=0;ke<Fe.length;ke++){var je=Fe[ke];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(Ie,je.key,je)}}return function(Ie,Fe,ke){return Fe&&$e(Ie.prototype,Fe),ke&&$e(Ie,ke),Ie}}(),Ae=function $e(Ie,Fe,ke){Ie===null&&(Ie=Function.prototype);var je=Object.getOwnPropertyDescriptor(Ie,Fe);if(je===void 0){var We=Object.getPrototypeOf(Ie);return We===null?void 0:$e(We,Fe,ke)}else{if("value"in je)return je.value;var ze=je.get;return ze===void 0?void 0:ze.call(ke)}},pe=ce(6),ve=me(pe);function me($e){return $e&&$e.__esModule?$e:{default:$e}}function ge($e,Ie){if(!($e instanceof Ie))throw new TypeError("Cannot call a class as a function")}function ye($e,Ie){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie&&(typeof Ie=="object"||typeof Ie=="function")?Ie:$e}function xe($e,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);$e.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf($e,Ie):$e.__proto__=Ie)}var _e=function($e){xe(Ie,$e);function Ie(){return ge(this,Ie),ye(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).apply(this,arguments))}return ue(Ie,null,[{key:"create",value:function(ke){return ke==="super"?document.createElement("sup"):ke==="sub"?document.createElement("sub"):Ae(Ie.__proto__||Object.getPrototypeOf(Ie),"create",this).call(this,ke)}},{key:"formats",value:function(ke){if(ke.tagName==="SUB")return"sub";if(ke.tagName==="SUP")return"super"}}]),Ie}(ve.default);_e.blotName="script",_e.tagName=["SUB","SUP"],oe.default=_e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(6),Ae=pe(ue);function pe(xe){return xe&&xe.__esModule?xe:{default:xe}}function ve(xe,_e){if(!(xe instanceof _e))throw new TypeError("Cannot call a class as a function")}function me(xe,_e){if(!xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e&&(typeof _e=="object"||typeof _e=="function")?_e:xe}function ge(xe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);xe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:xe,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(xe,_e):xe.__proto__=_e)}var ye=function(xe){ge(_e,xe);function _e(){return ve(this,_e),me(this,(_e.__proto__||Object.getPrototypeOf(_e)).apply(this,arguments))}return _e}(Ae.default);ye.blotName="strike",ye.tagName="S",oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(6),Ae=pe(ue);function pe(xe){return xe&&xe.__esModule?xe:{default:xe}}function ve(xe,_e){if(!(xe instanceof _e))throw new TypeError("Cannot call a class as a function")}function me(xe,_e){if(!xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e&&(typeof _e=="object"||typeof _e=="function")?_e:xe}function ge(xe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);xe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:xe,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(xe,_e):xe.__proto__=_e)}var ye=function(xe){ge(_e,xe);function _e(){return ve(this,_e),me(this,(_e.__proto__||Object.getPrototypeOf(_e)).apply(this,arguments))}return _e}(Ae.default);ye.blotName="underline",ye.tagName="U",oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Fe(ke,je){for(var We=0;We<je.length;We++){var ze=je[We];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(ke,ze.key,ze)}}return function(ke,je,We){return je&&Fe(ke.prototype,je),We&&Fe(ke,We),ke}}(),Ae=function Fe(ke,je,We){ke===null&&(ke=Function.prototype);var ze=Object.getOwnPropertyDescriptor(ke,je);if(ze===void 0){var Xe=Object.getPrototypeOf(ke);return Xe===null?void 0:Fe(Xe,je,We)}else{if("value"in ze)return ze.value;var Je=ze.get;return Je===void 0?void 0:Je.call(We)}},pe=ce(0),ve=ge(pe),me=ce(27);function ge(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}}function ye(Fe,ke){if(!(Fe instanceof ke))throw new TypeError("Cannot call a class as a function")}function xe(Fe,ke){if(!Fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke&&(typeof ke=="object"||typeof ke=="function")?ke:Fe}function _e(Fe,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ke);Fe.prototype=Object.create(ke&&ke.prototype,{constructor:{value:Fe,enumerable:!1,writable:!0,configurable:!0}}),ke&&(Object.setPrototypeOf?Object.setPrototypeOf(Fe,ke):Fe.__proto__=ke)}var $e=["alt","height","width"],Ie=function(Fe){_e(ke,Fe);function ke(){return ye(this,ke),xe(this,(ke.__proto__||Object.getPrototypeOf(ke)).apply(this,arguments))}return ue(ke,[{key:"format",value:function(We,ze){$e.indexOf(We)>-1?ze?this.domNode.setAttribute(We,ze):this.domNode.removeAttribute(We):Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"format",this).call(this,We,ze)}}],[{key:"create",value:function(We){var ze=Ae(ke.__proto__||Object.getPrototypeOf(ke),"create",this).call(this,We);return typeof We=="string"&&ze.setAttribute("src",this.sanitize(We)),ze}},{key:"formats",value:function(We){return $e.reduce(function(ze,Xe){return We.hasAttribute(Xe)&&(ze[Xe]=We.getAttribute(Xe)),ze},{})}},{key:"match",value:function(We){return/\.(jpe?g|gif|png)$/.test(We)||/^data:image\/.+;base64/.test(We)}},{key:"sanitize",value:function(We){return(0,me.sanitize)(We,["http","https","data"])?We:"//:0"}},{key:"value",value:function(We){return We.getAttribute("src")}}]),ke}(ve.default.Embed);Ie.blotName="image",Ie.tagName="IMG",oe.default=Ie},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Fe(ke,je){for(var We=0;We<je.length;We++){var ze=je[We];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(ke,ze.key,ze)}}return function(ke,je,We){return je&&Fe(ke.prototype,je),We&&Fe(ke,We),ke}}(),Ae=function Fe(ke,je,We){ke===null&&(ke=Function.prototype);var ze=Object.getOwnPropertyDescriptor(ke,je);if(ze===void 0){var Xe=Object.getPrototypeOf(ke);return Xe===null?void 0:Fe(Xe,je,We)}else{if("value"in ze)return ze.value;var Je=ze.get;return Je===void 0?void 0:Je.call(We)}},pe=ce(4),ve=ce(27),me=ge(ve);function ge(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}}function ye(Fe,ke){if(!(Fe instanceof ke))throw new TypeError("Cannot call a class as a function")}function xe(Fe,ke){if(!Fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke&&(typeof ke=="object"||typeof ke=="function")?ke:Fe}function _e(Fe,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ke);Fe.prototype=Object.create(ke&&ke.prototype,{constructor:{value:Fe,enumerable:!1,writable:!0,configurable:!0}}),ke&&(Object.setPrototypeOf?Object.setPrototypeOf(Fe,ke):Fe.__proto__=ke)}var $e=["height","width"],Ie=function(Fe){_e(ke,Fe);function ke(){return ye(this,ke),xe(this,(ke.__proto__||Object.getPrototypeOf(ke)).apply(this,arguments))}return ue(ke,[{key:"format",value:function(We,ze){$e.indexOf(We)>-1?ze?this.domNode.setAttribute(We,ze):this.domNode.removeAttribute(We):Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"format",this).call(this,We,ze)}}],[{key:"create",value:function(We){var ze=Ae(ke.__proto__||Object.getPrototypeOf(ke),"create",this).call(this,We);return ze.setAttribute("frameborder","0"),ze.setAttribute("allowfullscreen",!0),ze.setAttribute("src",this.sanitize(We)),ze}},{key:"formats",value:function(We){return $e.reduce(function(ze,Xe){return We.hasAttribute(Xe)&&(ze[Xe]=We.getAttribute(Xe)),ze},{})}},{key:"sanitize",value:function(We){return me.default.sanitize(We)}},{key:"value",value:function(We){return We.getAttribute("src")}}]),ke}(pe.BlockEmbed);Ie.blotName="video",Ie.className="ql-video",Ie.tagName="IFRAME",oe.default=Ie},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.FormulaBlot=void 0;var ue=function(){function We(ze,Xe){for(var Je=0;Je<Xe.length;Je++){var nt=Xe[Je];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(ze,nt.key,nt)}}return function(ze,Xe,Je){return Xe&&We(ze.prototype,Xe),Je&&We(ze,Je),ze}}(),Ae=function We(ze,Xe,Je){ze===null&&(ze=Function.prototype);var nt=Object.getOwnPropertyDescriptor(ze,Xe);if(nt===void 0){var et=Object.getPrototypeOf(ze);return et===null?void 0:We(et,Xe,Je)}else{if("value"in nt)return nt.value;var tt=nt.get;return tt===void 0?void 0:tt.call(Je)}},pe=ce(35),ve=_e(pe),me=ce(5),ge=_e(me),ye=ce(9),xe=_e(ye);function _e(We){return We&&We.__esModule?We:{default:We}}function $e(We,ze){if(!(We instanceof ze))throw new TypeError("Cannot call a class as a function")}function Ie(We,ze){if(!We)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ze&&(typeof ze=="object"||typeof ze=="function")?ze:We}function Fe(We,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ze);We.prototype=Object.create(ze&&ze.prototype,{constructor:{value:We,enumerable:!1,writable:!0,configurable:!0}}),ze&&(Object.setPrototypeOf?Object.setPrototypeOf(We,ze):We.__proto__=ze)}var ke=function(We){Fe(ze,We);function ze(){return $e(this,ze),Ie(this,(ze.__proto__||Object.getPrototypeOf(ze)).apply(this,arguments))}return ue(ze,null,[{key:"create",value:function(Je){var nt=Ae(ze.__proto__||Object.getPrototypeOf(ze),"create",this).call(this,Je);return typeof Je=="string"&&(window.katex.render(Je,nt,{throwOnError:!1,errorColor:"#f00"}),nt.setAttribute("data-value",Je)),nt}},{key:"value",value:function(Je){return Je.getAttribute("data-value")}}]),ze}(ve.default);ke.blotName="formula",ke.className="ql-formula",ke.tagName="SPAN";var je=function(We){Fe(ze,We),ue(ze,null,[{key:"register",value:function(){ge.default.register(ke,!0)}}]);function ze(){$e(this,ze);var Xe=Ie(this,(ze.__proto__||Object.getPrototypeOf(ze)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return Xe}return ze}(xe.default);oe.FormulaBlot=ke,oe.default=je},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.CodeToken=oe.CodeBlock=void 0;var ue=function(){function Je(nt,et){for(var tt=0;tt<et.length;tt++){var st=et[tt];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(nt,st.key,st)}}return function(nt,et,tt){return et&&Je(nt.prototype,et),tt&&Je(nt,tt),nt}}(),Ae=function Je(nt,et,tt){nt===null&&(nt=Function.prototype);var st=Object.getOwnPropertyDescriptor(nt,et);if(st===void 0){var qe=Object.getPrototypeOf(nt);return qe===null?void 0:Je(qe,et,tt)}else{if("value"in st)return st.value;var Se=st.get;return Se===void 0?void 0:Se.call(tt)}},pe=ce(0),ve=Ie(pe),me=ce(5),ge=Ie(me),ye=ce(9),xe=Ie(ye),_e=ce(13),$e=Ie(_e);function Ie(Je){return Je&&Je.__esModule?Je:{default:Je}}function Fe(Je,nt){if(!(Je instanceof nt))throw new TypeError("Cannot call a class as a function")}function ke(Je,nt){if(!Je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt&&(typeof nt=="object"||typeof nt=="function")?nt:Je}function je(Je,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof nt);Je.prototype=Object.create(nt&&nt.prototype,{constructor:{value:Je,enumerable:!1,writable:!0,configurable:!0}}),nt&&(Object.setPrototypeOf?Object.setPrototypeOf(Je,nt):Je.__proto__=nt)}var We=function(Je){je(nt,Je);function nt(){return Fe(this,nt),ke(this,(nt.__proto__||Object.getPrototypeOf(nt)).apply(this,arguments))}return ue(nt,[{key:"replaceWith",value:function(tt){this.domNode.textContent=this.domNode.textContent,this.attach(),Ae(nt.prototype.__proto__||Object.getPrototypeOf(nt.prototype),"replaceWith",this).call(this,tt)}},{key:"highlight",value:function(tt){var st=this.domNode.textContent;this.cachedText!==st&&((st.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=tt(st),this.domNode.normalize(),this.attach()),this.cachedText=st)}}]),nt}($e.default);We.className="ql-syntax";var ze=new ve.default.Attributor.Class("token","hljs",{scope:ve.default.Scope.INLINE}),Xe=function(Je){je(nt,Je),ue(nt,null,[{key:"register",value:function(){ge.default.register(ze,!0),ge.default.register(We,!0)}}]);function nt(et,tt){Fe(this,nt);var st=ke(this,(nt.__proto__||Object.getPrototypeOf(nt)).call(this,et,tt));if(typeof st.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var qe=null;return st.quill.on(ge.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(qe),qe=setTimeout(function(){st.highlight(),qe=null},st.options.interval)}),st.highlight(),st}return ue(nt,[{key:"highlight",value:function(){var tt=this;if(!this.quill.selection.composing){this.quill.update(ge.default.sources.USER);var st=this.quill.getSelection();this.quill.scroll.descendants(We).forEach(function(qe){qe.highlight(tt.options.highlight)}),this.quill.update(ge.default.sources.SILENT),st!=null&&this.quill.setSelection(st,ge.default.sources.SILENT)}}}]),nt}(xe.default);Xe.DEFAULTS={highlight:function(){return window.hljs==null?null:function(Je){var nt=window.hljs.highlightAuto(Je);return nt.value}}(),interval:1e3},oe.CodeBlock=We,oe.CodeToken=ze,oe.default=Xe},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(ne,oe){ne.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(ne,oe){ne.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(ne,oe){ne.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(ne,oe){ne.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.BubbleTooltip=void 0;var ue=function nt(et,tt,st){et===null&&(et=Function.prototype);var qe=Object.getOwnPropertyDescriptor(et,tt);if(qe===void 0){var Se=Object.getPrototypeOf(et);return Se===null?void 0:nt(Se,tt,st)}else{if("value"in qe)return qe.value;var Re=qe.get;return Re===void 0?void 0:Re.call(st)}},Ae=function(){function nt(et,tt){for(var st=0;st<tt.length;st++){var qe=tt[st];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(et,qe.key,qe)}}return function(et,tt,st){return tt&&nt(et.prototype,tt),st&&nt(et,st),et}}(),pe=ce(3),ve=Fe(pe),me=ce(8),ge=Fe(me),ye=ce(43),xe=Fe(ye),_e=ce(15),$e=ce(41),Ie=Fe($e);function Fe(nt){return nt&&nt.__esModule?nt:{default:nt}}function ke(nt,et){if(!(nt instanceof et))throw new TypeError("Cannot call a class as a function")}function je(nt,et){if(!nt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return et&&(typeof et=="object"||typeof et=="function")?et:nt}function We(nt,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof et);nt.prototype=Object.create(et&&et.prototype,{constructor:{value:nt,enumerable:!1,writable:!0,configurable:!0}}),et&&(Object.setPrototypeOf?Object.setPrototypeOf(nt,et):nt.__proto__=et)}var ze=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Xe=function(nt){We(et,nt);function et(tt,st){ke(this,et),st.modules.toolbar!=null&&st.modules.toolbar.container==null&&(st.modules.toolbar.container=ze);var qe=je(this,(et.__proto__||Object.getPrototypeOf(et)).call(this,tt,st));return qe.quill.container.classList.add("ql-bubble"),qe}return Ae(et,[{key:"extendToolbar",value:function(st){this.tooltip=new Je(this.quill,this.options.bounds),this.tooltip.root.appendChild(st.container),this.buildButtons([].slice.call(st.container.querySelectorAll("button")),Ie.default),this.buildPickers([].slice.call(st.container.querySelectorAll("select")),Ie.default)}}]),et}(xe.default);Xe.DEFAULTS=(0,ve.default)(!0,{},xe.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(et){et?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var Je=function(nt){We(et,nt);function et(tt,st){ke(this,et);var qe=je(this,(et.__proto__||Object.getPrototypeOf(et)).call(this,tt,st));return qe.quill.on(ge.default.events.EDITOR_CHANGE,function(Se,Re,Be,Ne){if(Se===ge.default.events.SELECTION_CHANGE)if(Re!=null&&Re.length>0&&Ne===ge.default.sources.USER){qe.show(),qe.root.style.left="0px",qe.root.style.width="",qe.root.style.width=qe.root.offsetWidth+"px";var Ue=qe.quill.getLines(Re.index,Re.length);if(Ue.length===1)qe.position(qe.quill.getBounds(Re));else{var Ge=Ue[Ue.length-1],Ye=qe.quill.getIndex(Ge),Qe=Math.min(Ge.length()-1,Re.index+Re.length-Ye),Te=qe.quill.getBounds(new _e.Range(Ye,Qe));qe.position(Te)}}else document.activeElement!==qe.textbox&&qe.quill.hasFocus()&&qe.hide()}),qe}return Ae(et,[{key:"listen",value:function(){var st=this;ue(et.prototype.__proto__||Object.getPrototypeOf(et.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){st.root.classList.remove("ql-editing")}),this.quill.on(ge.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!st.root.classList.contains("ql-hidden")){var qe=st.quill.getSelection();qe!=null&&st.position(st.quill.getBounds(qe))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(st){var qe=ue(et.prototype.__proto__||Object.getPrototypeOf(et.prototype),"position",this).call(this,st),Se=this.root.querySelector(".ql-tooltip-arrow");if(Se.style.marginLeft="",qe===0)return qe;Se.style.marginLeft=-1*qe-Se.offsetWidth/2+"px"}}]),et}(ye.BaseTooltip);Je.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),oe.BubbleTooltip=Je,oe.default=Xe},function(ne,oe,ce){ne.exports=ce(63)}]).default})})(quill);var quillExports=quill.exports,__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)ce.hasOwnProperty(ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(K){for(var J,ne=1,oe=arguments.length;ne<oe;ne++){J=arguments[ne];for(var ce in J)Object.prototype.hasOwnProperty.call(J,ce)&&(K[ce]=J[ce])}return K},__assign.apply(this,arguments)},__spreadArrays=commonjsGlobal&&commonjsGlobal.__spreadArrays||function(){for(var K=0,J=0,ne=arguments.length;J<ne;J++)K+=arguments[J].length;for(var oe=Array(K),ce=0,J=0;J<ne;J++)for(var ue=arguments[J],Ae=0,pe=ue.length;Ae<pe;Ae++,ce++)oe[ce]=ue[Ae];return oe},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(K){return K&&K.__esModule?K:{default:K}},react_1=__importDefault(reactExports),react_dom_1=__importDefault(reactDomExports),isEqual_1=__importDefault(isEqual_1$1),quill_1=__importDefault(quillExports),ReactQuill=function(K){__extends(J,K);function J(ne){var oe=K.call(this,ne)||this;oe.dirtyProps=["modules","formats","bounds","theme","children"],oe.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],oe.state={generation:0},oe.selection=null,oe.onEditorChange=function(ue,Ae,pe,ve){var me,ge,ye,xe;ue==="text-change"?(ge=(me=oe).onEditorChangeText)===null||ge===void 0||ge.call(me,oe.editor.root.innerHTML,Ae,ve,oe.unprivilegedEditor):ue==="selection-change"&&((xe=(ye=oe).onEditorChangeSelection)===null||xe===void 0||xe.call(ye,Ae,ve,oe.unprivilegedEditor))};var ce=oe.isControlled()?ne.value:ne.defaultValue;return oe.value=ce??"",oe}return J.prototype.validateProps=function(ne){var oe;if(react_1.default.Children.count(ne.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(react_1.default.Children.count(ne.children)){var ce=react_1.default.Children.only(ne.children);if(((oe=ce)===null||oe===void 0?void 0:oe.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&ne.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},J.prototype.shouldComponentUpdate=function(ne,oe){var ce=this,ue;if(this.validateProps(ne),!this.editor||this.state.generation!==oe.generation)return!0;if("value"in ne){var Ae=this.getEditorContents(),pe=(ue=ne.value,ue??"");this.isEqualValue(pe,Ae)||this.setEditorContents(this.editor,pe)}return ne.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,ne.readOnly),__spreadArrays(this.cleanProps,this.dirtyProps).some(function(ve){return!isEqual_1.default(ne[ve],ce.props[ve])})},J.prototype.shouldComponentRegenerate=function(ne){var oe=this;return this.dirtyProps.some(function(ce){return!isEqual_1.default(ne[ce],oe.props[ce])})},J.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},J.prototype.componentWillUnmount=function(){this.destroyEditor()},J.prototype.componentDidUpdate=function(ne,oe){var ce=this;if(this.editor&&this.shouldComponentRegenerate(ne)){var ue=this.editor.getContents(),Ae=this.editor.getSelection();this.regenerationSnapshot={delta:ue,selection:Ae},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==oe.generation){var pe=this.regenerationSnapshot,ue=pe.delta,ve=pe.selection;delete this.regenerationSnapshot,this.instantiateEditor();var me=this.editor;me.setContents(ue),postpone(function(){return ce.setEditorSelection(me,ve)})}},J.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},J.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},J.prototype.isControlled=function(){return"value"in this.props},J.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},J.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},J.prototype.createEditor=function(ne,oe){var ce=new quill_1.default(ne,oe);return oe.tabIndex!=null&&this.setEditorTabIndex(ce,oe.tabIndex),this.hookEditor(ce),ce},J.prototype.hookEditor=function(ne){this.unprivilegedEditor=this.makeUnprivilegedEditor(ne),ne.on("editor-change",this.onEditorChange)},J.prototype.unhookEditor=function(ne){ne.off("editor-change",this.onEditorChange)},J.prototype.getEditorContents=function(){return this.value},J.prototype.getEditorSelection=function(){return this.selection},J.prototype.isDelta=function(ne){return ne&&ne.ops},J.prototype.isEqualValue=function(ne,oe){return this.isDelta(ne)&&this.isDelta(oe)?isEqual_1.default(ne.ops,oe.ops):isEqual_1.default(ne,oe)},J.prototype.setEditorContents=function(ne,oe){var ce=this;this.value=oe;var ue=this.getEditorSelection();typeof oe=="string"?ne.setContents(ne.clipboard.convert(oe)):ne.setContents(oe),postpone(function(){return ce.setEditorSelection(ne,ue)})},J.prototype.setEditorSelection=function(ne,oe){if(this.selection=oe,oe){var ce=ne.getLength();oe.index=Math.max(0,Math.min(oe.index,ce-1)),oe.length=Math.max(0,Math.min(oe.length,ce-1-oe.index)),ne.setSelection(oe)}},J.prototype.setEditorTabIndex=function(ne,oe){var ce,ue;!((ue=(ce=ne)===null||ce===void 0?void 0:ce.scroll)===null||ue===void 0)&&ue.domNode&&(ne.scroll.domNode.tabIndex=oe)},J.prototype.setEditorReadOnly=function(ne,oe){oe?ne.disable():ne.enable()},J.prototype.makeUnprivilegedEditor=function(ne){var oe=ne;return{getHTML:function(){return oe.root.innerHTML},getLength:oe.getLength.bind(oe),getText:oe.getText.bind(oe),getContents:oe.getContents.bind(oe),getSelection:oe.getSelection.bind(oe),getBounds:oe.getBounds.bind(oe)}},J.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var ne=react_dom_1.default.findDOMNode(this.editingArea);if(!ne)throw new Error("Cannot find element for editing area");if(ne.nodeType===3)throw new Error("Editing area cannot be a text node");return ne},J.prototype.renderEditingArea=function(){var ne=this,oe=this.props,ce=oe.children,ue=oe.preserveWhitespace,Ae=this.state.generation,pe={key:Ae,ref:function(ve){ne.editingArea=ve}};return react_1.default.Children.count(ce)?react_1.default.cloneElement(react_1.default.Children.only(ce),pe):ue?react_1.default.createElement("pre",__assign({},pe)):react_1.default.createElement("div",__assign({},pe))},J.prototype.render=function(){var ne;return react_1.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(ne=this.props.className,ne??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},J.prototype.onEditorChangeText=function(ne,oe,ce,ue){var Ae,pe;if(this.editor){var ve=this.isDelta(this.value)?ue.getContents():ue.getHTML();ve!==this.getEditorContents()&&(this.lastDeltaChangeSet=oe,this.value=ve,(pe=(Ae=this.props).onChange)===null||pe===void 0||pe.call(Ae,ne,oe,ce,ue))}},J.prototype.onEditorChangeSelection=function(ne,oe,ce){var ue,Ae,pe,ve,me,ge;if(this.editor){var ye=this.getEditorSelection(),xe=!ye&&ne,_e=ye&&!ne;isEqual_1.default(ne,ye)||(this.selection=ne,(Ae=(ue=this.props).onChangeSelection)===null||Ae===void 0||Ae.call(ue,ne,oe,ce),xe?(ve=(pe=this.props).onFocus)===null||ve===void 0||ve.call(pe,ne,oe,ce):_e&&((ge=(me=this.props).onBlur)===null||ge===void 0||ge.call(me,ye,oe,ce)))}},J.prototype.focus=function(){this.editor&&this.editor.focus()},J.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},J.displayName="React Quill",J.Quill=quill_1.default,J.defaultProps={theme:"snow",modules:{},readOnly:!1},J}(react_1.default.Component);function postpone(K){Promise.resolve().then(K)}var lib$1=ReactQuill;const ReactQuill$1=getDefaultExportFromCjs(lib$1),TextareaSelectedFiles=({selectedFiles:K,handleRemoveFile:J})=>jsxRuntimeExports.jsx("div",{className:"send-feedback-files",children:K.map((ne,oe)=>jsxRuntimeExports.jsxs("div",{className:"send-feedback-files__item",children:[jsxRuntimeExports.jsx("span",{className:"send-feedback-files__label",children:ne.name}),jsxRuntimeExports.jsx(_c,{onClick:()=>J(ne.name),className:"send-feedback-files__icon"})]},oe))}),icons=lib$1.Quill.import("ui/icons"),QuillToolbar=()=>(Object.keys(icons).forEach(K=>{icons[K]=null}),jsxRuntimeExports.jsxs("div",{id:"quillToolbar",className:"quill-toolbar",children:[jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(pB,{}),className:"ql-bold"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(hB,{}),className:"ql-italic"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(CB$1,{}),className:"ql-underline"}),jsxRuntimeExports.jsx("div",{className:"quill-toolbar__divider"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(bB,{}),className:"ql-align ql-active",value:""}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(yB,{}),className:"ql-align",value:"center"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(xB,{}),className:"ql-align",value:"right"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(wB,{}),className:"ql-align",value:"justify"}),jsxRuntimeExports.jsx("div",{className:"quill-toolbar__divider"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(SB,{}),className:"ql-list",value:"ordered"}),jsxRuntimeExports.jsx("div",{className:"quill-toolbar__divider"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(bT,{}),className:"ql-image"}),jsxRuntimeExports.jsx("div",{className:"quill-toolbar__divider"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(EB$1,{}),className:"ql-clean"})]})),logsQuillFormats=["bold","italic","underline","align","list","image"],container$7="_container_5cki3_1",textarea="_textarea_5cki3_13",validationMessage="_validationMessage_5cki3_25",styles$f={container:container$7,textarea,validationMessage},TextareaFormatting=({value:K,setFeedbackTextareaValue:J,feedbackFiles:ne,setFeedbackFiles:oe})=>{const{t:ce}=useTranslation(),ue=reactExports.useRef(null),[Ae,pe]=reactExports.useState(null),ve=()=>{const ge=document.createElement("input");ge.setAttribute("type","file"),ge.click(),ge.onchange=()=>{const ye=ge.files[0];oe(xe=>[...xe,ye])}};reactExports.useEffect(()=>{document.getElementById("quillToolbar")&&pe({toolbar:{container:"#quillToolbar",handlers:{image:ve}}})},[]);const me=ge=>{const ye=ne.filter(xe=>xe.name!==ge);oe(ye)};return jsxRuntimeExports.jsxs("div",{className:styles$f.container,children:[jsxRuntimeExports.jsx(QuillToolbar,{}),Ae&&jsxRuntimeExports.jsx(ReactQuill$1,{ref:ue,modules:Ae,formats:logsQuillFormats,value:K,onChange:J,placeholder:ce("sendFeedbackModal.textareaPlaceholder")||"",className:styles$f.textarea}),ne.length!==0&&jsxRuntimeExports.jsx(TextareaSelectedFiles,{selectedFiles:ne,handleRemoveFile:me})]})},DEFAULT_EMAIL_TO="team@compatibl.com",SendFeedbackButton=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectActiveDataset$1),ne=useSelector$1(selectUser),[oe,{toggle:ce}]=useBoolean(),[ue,Ae]=reactExports.useState(null),[pe,ve]=reactExports.useState([]),[me,ge]=reactExports.useState(!0);reactExports.useEffect(()=>{oe||(Ae(null),ve([]))},[oe]);const ye=ke=>{var We;if(((We=ke.EmailTo)==null?void 0:We.length)===0)return;const je={Type:HandlerRunTypeEnum.UI_SUPPORT_UTIL,Method:"SendFeedback",Keys:[],Arguments:ke,Dataset:J,userName:ne==null?void 0:ne.username};handlerApi.handlerRun(je).catch(ze=>{toast.error(ze)})},xe=async()=>{const ke=await Promise.all(pe.map(async je=>{const We=await fileToBase64$1(je);return{Name:je.name,FileBytes:We,_t:"FileData"}}));ye({EmailTo:ue==null?void 0:ue.emailTo,Subject:ue==null?void 0:ue.subject,Body:ue==null?void 0:ue.body,Attachments:ke,IncludeLogs:me})},_e=async()=>{const ke=await Ie(),je=await fileToBase64$1(ke),We={Type:HandlerRunTypeEnum.UI_SUPPORT_UTIL,Method:"GetFeedbackFormDetails",Dataset:J,userName:ne==null?void 0:ne.username};handlerApi.handlerRun(We).then(ze=>{if(isNullable(ze[0].Result))return;const{EmailTo:Xe,Subject:Je,Body:nt,Interactive:et}=ze[0].Result,tt=Xe!=null&&Xe.length?Xe:[DEFAULT_EMAIL_TO];if(et)Ae({emailTo:tt,subject:Je||"",body:nt||""}),ce();else{const{Subject:st,Body:qe}=ze[0].Result;ye({Subject:st,Body:qe,IncludeLogs:!0,Attachments:[{Name:ke.name,FileBytes:je,_t:"FileData"}]})}}).catch(ze=>{toast.error(ze)})},$e=()=>{xe(),ce()},Ie=async()=>{const je=(await html2canvas(document.body,{useCORS:!0,allowTaint:!0,scrollY:-window.scrollY,windowWidth:document.documentElement.scrollWidth,windowHeight:document.documentElement.scrollHeight})).toDataURL("image/png"),ze=`screenshot_${DateFormatUtility.create().format(DateFormatEnum.DATE_TIME_MS)}.png`,Xe=Fe(je,ze);return ve(Je=>[...Je,Xe]),Xe},Fe=(ke,je)=>{var et;const We=ke.split(","),ze=((et=We[0].match(/:(.*?);/))==null?void 0:et[1])||"image/png",Xe=atob(We[1]);let Je=Xe.length;const nt=new Uint8Array(Je);for(;Je--;)nt[Je]=Xe.charCodeAt(Je);return new File([nt],je,{type:ze})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(mf,{title:K("header.sendFeedback"),children:jsxRuntimeExports.jsx(rl,{"data-tid":"send-feedback-button",type:"transparent",variant:"ghost",size:"sm",onClick:_e,iconBefore:jsxRuntimeExports.jsx(PD,{width:"20",height:"20"})})}),jsxRuntimeExports.jsxs(Ho,{defaultHeight:400,title:K("sendFeedbackModal.feedback"),open:oe,onClose:ce,children:[jsxRuntimeExports.jsxs(Ho.Body,{className:"send-feedback-modal__content",children:[jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__input",children:[jsxRuntimeExports.jsx(InputTitle,{title:K("sendFeedbackModal.to")}),jsxRuntimeExports.jsx(ToField,{emailTags:ue==null?void 0:ue.emailTo,setEmailTags:ke=>Ae({...ue,emailTo:ke})})]}),jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__input",children:[jsxRuntimeExports.jsx(InputTitle,{title:K("sendFeedbackModal.subject")}),jsxRuntimeExports.jsx(Ml,{variant:"outlined",value:ue==null?void 0:ue.subject,onChange:ke=>Ae({...ue,subject:ke})})]}),jsxRuntimeExports.jsx(TextareaFormatting,{value:(ue==null?void 0:ue.body)||"",setFeedbackTextareaValue:ke=>Ae({...ue,body:ke}),feedbackFiles:pe,setFeedbackFiles:ve})]}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"send-feedback",okText:K("buttons.send"),cancelText:K("buttons.cancel"),onOk:$e,onCancel:ce,renderFooterActions:({cancelBtn:ke,okBtn:je})=>jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__footer",children:[jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__checkbox-wrapper",onClick:We=>{We.preventDefault(),ge(!me)},"aria-hidden":!0,children:[jsxRuntimeExports.jsx(pF,{value:me}),K("sendFeedbackModal.attachLogs")]}),jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__footer-btn",children:[je,ke]})]})})]})]})},Copy=({textToCopy:K,className:J,testid:ne})=>{const oe=reactExports.useRef(),{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(!1),pe=reactExports.useCallback(()=>{ue||(clearTimeout(oe.current),addDataToClickboard(K).then(()=>Ae(!0)).then(()=>{oe.current=setTimeout(()=>Ae(!1),3e3)}))},[ue,K]);return reactExports.useEffect(()=>()=>clearTimeout(oe.current),[]),jsxRuntimeExports.jsx(mf,{title:ce(ue?"shared.copied":"shared.copy"),className:J,children:jsxRuntimeExports.jsx(rl,{"data-tid":ne,type:ue?"success":"secondary",variant:"ghost",size:"sm",onClick:pe,iconBefore:ue?jsxRuntimeExports.jsx(Ek,{}):jsxRuntimeExports.jsx(jk,{})})})},container$6="_container_1ku9l_1",clickable="_clickable_1ku9l_9",chatContainer="_chatContainer_1ku9l_13",styles$e={container:container$6,clickable,chatContainer},UserInitials=({clickable:K,chatIcon:J=!1,className:ne,onClick:oe})=>jsxRuntimeExports.jsx("div",{"data-tid":"user-initials",className:cx(styles$e.container,{[styles$e.clickable]:K,[styles$e.chatContainer]:J},ne),onClick:oe,"aria-hidden":!0,children:jsxRuntimeExports.jsx(IA,{width:"20",height:"20"})}),menu="_menu_1o9m7_1",header$1="_header_1o9m7_6",headerInfo="_headerInfo_1o9m7_18",fullName="_fullName_1o9m7_24",email="_email_1o9m7_32",content$1="_content_1o9m7_39",userInitials="_userInitials_1o9m7_47",dropdownRow="_dropdownRow_1o9m7_51",userContent="_userContent_1o9m7_57",myKeysContent="_myKeysContent_1o9m7_65",styles$d={menu,header:header$1,headerInfo,fullName,email,content:content$1,userInitials,dropdownRow,userContent,myKeysContent},row="_row_o96jx_1",label$1="_label_o96jx_7",select="_select_o96jx_17",styles$c={row,label:label$1,select},DropdownRow=({label:K,selectedOptionKey:J,options:ne,onChange:oe,testid:ce})=>{const ue=ne.find(({value:Ae})=>Ae===J);return jsxRuntimeExports.jsxs("div",{className:styles$c.row,children:[jsxRuntimeExports.jsx("div",{className:styles$c.label,children:K}),jsxRuntimeExports.jsx(xF,{className:styles$c.select,testid:ce,variant:"outlined",options:ne,value:ue==null?void 0:ue.label,onChange:oe})]})},DEFAULT_USER_KEYS_EXPIRE=30,AVAIABLE_LANGUAGES=[{key:"eng",label:"English(US)",value:"eng"}],UserExpire=Number.parseInt(env$1.userKeyExpire||DEFAULT_USER_KEYS_EXPIRE),THIRTY_DAYS_MS=UserExpire*24*60*60*1e3,keysDescriptionArr=Array.from({length:5},(K,J)=>({id:J+1,content:`header.userInfo.secrets.point${J+1}`}));var forge$D={options:{usePureJavaScript:!1}},api$1={},baseN$1=api$1,_reverseAlphabets={};api$1.encode=function(K,J,ne){if(typeof J!="string")throw new TypeError('"alphabet" must be a string.');if(ne!==void 0&&typeof ne!="number")throw new TypeError('"maxline" must be a number.');var oe="";if(!(K instanceof Uint8Array))oe=_encodeWithByteBuffer(K,J);else{var ce=0,ue=J.length,Ae=J.charAt(0),pe=[0];for(ce=0;ce<K.length;++ce){for(var ve=0,me=K[ce];ve<pe.length;++ve)me+=pe[ve]<<8,pe[ve]=me%ue,me=me/ue|0;for(;me>0;)pe.push(me%ue),me=me/ue|0}for(ce=0;K[ce]===0&&ce<K.length-1;++ce)oe+=Ae;for(ce=pe.length-1;ce>=0;--ce)oe+=J[pe[ce]]}if(ne){var ge=new RegExp(".{1,"+ne+"}","g");oe=oe.match(ge).join(`\r
`)}return oe};api$1.decode=function(K,J){if(typeof K!="string")throw new TypeError('"input" must be a string.');if(typeof J!="string")throw new TypeError('"alphabet" must be a string.');var ne=_reverseAlphabets[J];if(!ne){ne=_reverseAlphabets[J]=[];for(var oe=0;oe<J.length;++oe)ne[J.charCodeAt(oe)]=oe}K=K.replace(/\s/g,"");for(var ce=J.length,ue=J.charAt(0),Ae=[0],oe=0;oe<K.length;oe++){var pe=ne[K.charCodeAt(oe)];if(pe===void 0)return;for(var ve=0,me=pe;ve<Ae.length;++ve)me+=Ae[ve]*ce,Ae[ve]=me&255,me>>=8;for(;me>0;)Ae.push(me&255),me>>=8}for(var ge=0;K[ge]===ue&&ge<K.length-1;++ge)Ae.push(0);return typeof Buffer<"u"?Buffer.from(Ae.reverse()):new Uint8Array(Ae.reverse())};function _encodeWithByteBuffer(K,J){var ne=0,oe=J.length,ce=J.charAt(0),ue=[0];for(ne=0;ne<K.length();++ne){for(var Ae=0,pe=K.at(ne);Ae<ue.length;++Ae)pe+=ue[Ae]<<8,ue[Ae]=pe%oe,pe=pe/oe|0;for(;pe>0;)ue.push(pe%oe),pe=pe/oe|0}var ve="";for(ne=0;K.at(ne)===0&&ne<K.length()-1;++ne)ve+=ce;for(ne=ue.length-1;ne>=0;--ne)ve+=J[ue[ne]];return ve}var forge$C=forge$D,baseN=baseN$1,util$2=forge$C.util=forge$C.util||{};(function(){if(typeof process$1<"u"&&process$1.nextTick&&!process$1.browser){util$2.nextTick=process$1.nextTick,typeof setImmediate=="function"?util$2.setImmediate=setImmediate:util$2.setImmediate=util$2.nextTick;return}if(typeof setImmediate=="function"){util$2.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$2.nextTick=function(Ae){return setImmediate(Ae)};return}if(util$2.setImmediate=function(Ae){setTimeout(Ae,0)},typeof window<"u"&&typeof window.postMessage=="function"){let Ae=function(pe){if(pe.source===window&&pe.data===K){pe.stopPropagation();var ve=J.slice();J.length=0,ve.forEach(function(me){me()})}};var K="forge.setImmediate",J=[];util$2.setImmediate=function(pe){J.push(pe),J.length===1&&window.postMessage(K,"*")},window.addEventListener("message",Ae,!0)}if(typeof MutationObserver<"u"){var ne=Date.now(),oe=!0,ce=document.createElement("div"),J=[];new MutationObserver(function(){var pe=J.slice();J.length=0,pe.forEach(function(ve){ve()})}).observe(ce,{attributes:!0});var ue=util$2.setImmediate;util$2.setImmediate=function(pe){Date.now()-ne>15?(ne=Date.now(),ue(pe)):(J.push(pe),J.length===1&&ce.setAttribute("a",oe=!oe))}}util$2.nextTick=util$2.setImmediate})();util$2.isNodejs=typeof process$1<"u"&&process$1.versions&&process$1.versions.node;util$2.globalScope=function(){return util$2.isNodejs?commonjsGlobal:typeof self>"u"?window:self}();util$2.isArray=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"};util$2.isArrayBuffer=function(K){return typeof ArrayBuffer<"u"&&K instanceof ArrayBuffer};util$2.isArrayBufferView=function(K){return K&&util$2.isArrayBuffer(K.buffer)&&K.byteLength!==void 0};function _checkBitsParam(K){if(!(K===8||K===16||K===24||K===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+K)}util$2.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(K){if(this.data="",this.read=0,typeof K=="string")this.data=K;else if(util$2.isArrayBuffer(K)||util$2.isArrayBufferView(K))if(typeof Buffer<"u"&&K instanceof Buffer)this.data=K.toString("binary");else{var J=new Uint8Array(K);try{this.data=String.fromCharCode.apply(null,J)}catch{for(var ne=0;ne<J.length;++ne)this.putByte(J[ne])}}else(K instanceof ByteStringBuffer||typeof K=="object"&&typeof K.data=="string"&&typeof K.read=="number")&&(this.data=K.data,this.read=K.read);this._constructedStringLength=0}util$2.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$2.ByteStringBuffer.prototype._optimizeConstructedString=function(K){this._constructedStringLength+=K,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$2.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$2.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$2.ByteStringBuffer.prototype.putByte=function(K){return this.putBytes(String.fromCharCode(K))};util$2.ByteStringBuffer.prototype.fillWithByte=function(K,J){K=String.fromCharCode(K);for(var ne=this.data;J>0;)J&1&&(ne+=K),J>>>=1,J>0&&(K+=K);return this.data=ne,this._optimizeConstructedString(J),this};util$2.ByteStringBuffer.prototype.putBytes=function(K){return this.data+=K,this._optimizeConstructedString(K.length),this};util$2.ByteStringBuffer.prototype.putString=function(K){return this.putBytes(util$2.encodeUtf8(K))};util$2.ByteStringBuffer.prototype.putInt16=function(K){return this.putBytes(String.fromCharCode(K>>8&255)+String.fromCharCode(K&255))};util$2.ByteStringBuffer.prototype.putInt24=function(K){return this.putBytes(String.fromCharCode(K>>16&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K&255))};util$2.ByteStringBuffer.prototype.putInt32=function(K){return this.putBytes(String.fromCharCode(K>>24&255)+String.fromCharCode(K>>16&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K&255))};util$2.ByteStringBuffer.prototype.putInt16Le=function(K){return this.putBytes(String.fromCharCode(K&255)+String.fromCharCode(K>>8&255))};util$2.ByteStringBuffer.prototype.putInt24Le=function(K){return this.putBytes(String.fromCharCode(K&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K>>16&255))};util$2.ByteStringBuffer.prototype.putInt32Le=function(K){return this.putBytes(String.fromCharCode(K&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K>>16&255)+String.fromCharCode(K>>24&255))};util$2.ByteStringBuffer.prototype.putInt=function(K,J){_checkBitsParam(J);var ne="";do J-=8,ne+=String.fromCharCode(K>>J&255);while(J>0);return this.putBytes(ne)};util$2.ByteStringBuffer.prototype.putSignedInt=function(K,J){return K<0&&(K+=2<<J-1),this.putInt(K,J)};util$2.ByteStringBuffer.prototype.putBuffer=function(K){return this.putBytes(K.getBytes())};util$2.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$2.ByteStringBuffer.prototype.getInt16=function(){var K=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,K};util$2.ByteStringBuffer.prototype.getInt24=function(){var K=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,K};util$2.ByteStringBuffer.prototype.getInt32=function(){var K=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,K};util$2.ByteStringBuffer.prototype.getInt16Le=function(){var K=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,K};util$2.ByteStringBuffer.prototype.getInt24Le=function(){var K=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,K};util$2.ByteStringBuffer.prototype.getInt32Le=function(){var K=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,K};util$2.ByteStringBuffer.prototype.getInt=function(K){_checkBitsParam(K);var J=0;do J=(J<<8)+this.data.charCodeAt(this.read++),K-=8;while(K>0);return J};util$2.ByteStringBuffer.prototype.getSignedInt=function(K){var J=this.getInt(K),ne=2<<K-2;return J>=ne&&(J-=ne<<1),J};util$2.ByteStringBuffer.prototype.getBytes=function(K){var J;return K?(K=Math.min(this.length(),K),J=this.data.slice(this.read,this.read+K),this.read+=K):K===0?J="":(J=this.read===0?this.data:this.data.slice(this.read),this.clear()),J};util$2.ByteStringBuffer.prototype.bytes=function(K){return typeof K>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+K)};util$2.ByteStringBuffer.prototype.at=function(K){return this.data.charCodeAt(this.read+K)};util$2.ByteStringBuffer.prototype.setAt=function(K,J){return this.data=this.data.substr(0,this.read+K)+String.fromCharCode(J)+this.data.substr(this.read+K+1),this};util$2.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$2.ByteStringBuffer.prototype.copy=function(){var K=util$2.createBuffer(this.data);return K.read=this.read,K};util$2.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$2.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$2.ByteStringBuffer.prototype.truncate=function(K){var J=Math.max(0,this.length()-K);return this.data=this.data.substr(this.read,J),this.read=0,this};util$2.ByteStringBuffer.prototype.toHex=function(){for(var K="",J=this.read;J<this.data.length;++J){var ne=this.data.charCodeAt(J);ne<16&&(K+="0"),K+=ne.toString(16)}return K};util$2.ByteStringBuffer.prototype.toString=function(){return util$2.decodeUtf8(this.bytes())};function DataBuffer(K,J){J=J||{},this.read=J.readOffset||0,this.growSize=J.growSize||1024;var ne=util$2.isArrayBuffer(K),oe=util$2.isArrayBufferView(K);if(ne||oe){ne?this.data=new DataView(K):this.data=new DataView(K.buffer,K.byteOffset,K.byteLength),this.write="writeOffset"in J?J.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,K!=null&&this.putBytes(K),"writeOffset"in J&&(this.write=J.writeOffset)}util$2.DataBuffer=DataBuffer;util$2.DataBuffer.prototype.length=function(){return this.write-this.read};util$2.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$2.DataBuffer.prototype.accommodate=function(K,J){if(this.length()>=K)return this;J=Math.max(J||this.growSize,K);var ne=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),oe=new Uint8Array(this.length()+J);return oe.set(ne),this.data=new DataView(oe.buffer),this};util$2.DataBuffer.prototype.putByte=function(K){return this.accommodate(1),this.data.setUint8(this.write++,K),this};util$2.DataBuffer.prototype.fillWithByte=function(K,J){this.accommodate(J);for(var ne=0;ne<J;++ne)this.data.setUint8(K);return this};util$2.DataBuffer.prototype.putBytes=function(K,J){if(util$2.isArrayBufferView(K)){var ne=new Uint8Array(K.buffer,K.byteOffset,K.byteLength),oe=ne.byteLength-ne.byteOffset;this.accommodate(oe);var ce=new Uint8Array(this.data.buffer,this.write);return ce.set(ne),this.write+=oe,this}if(util$2.isArrayBuffer(K)){var ne=new Uint8Array(K);this.accommodate(ne.byteLength);var ce=new Uint8Array(this.data.buffer);return ce.set(ne,this.write),this.write+=ne.byteLength,this}if(K instanceof util$2.DataBuffer||typeof K=="object"&&typeof K.read=="number"&&typeof K.write=="number"&&util$2.isArrayBufferView(K.data)){var ne=new Uint8Array(K.data.byteLength,K.read,K.length());this.accommodate(ne.byteLength);var ce=new Uint8Array(K.data.byteLength,this.write);return ce.set(ne),this.write+=ne.byteLength,this}if(K instanceof util$2.ByteStringBuffer&&(K=K.data,J="binary"),J=J||"binary",typeof K=="string"){var ue;if(J==="hex")return this.accommodate(Math.ceil(K.length/2)),ue=new Uint8Array(this.data.buffer,this.write),this.write+=util$2.binary.hex.decode(K,ue,this.write),this;if(J==="base64")return this.accommodate(Math.ceil(K.length/4)*3),ue=new Uint8Array(this.data.buffer,this.write),this.write+=util$2.binary.base64.decode(K,ue,this.write),this;if(J==="utf8"&&(K=util$2.encodeUtf8(K),J="binary"),J==="binary"||J==="raw")return this.accommodate(K.length),ue=new Uint8Array(this.data.buffer,this.write),this.write+=util$2.binary.raw.decode(ue),this;if(J==="utf16")return this.accommodate(K.length*2),ue=new Uint16Array(this.data.buffer,this.write),this.write+=util$2.text.utf16.encode(ue),this;throw new Error("Invalid encoding: "+J)}throw Error("Invalid parameter: "+K)};util$2.DataBuffer.prototype.putBuffer=function(K){return this.putBytes(K),K.clear(),this};util$2.DataBuffer.prototype.putString=function(K){return this.putBytes(K,"utf16")};util$2.DataBuffer.prototype.putInt16=function(K){return this.accommodate(2),this.data.setInt16(this.write,K),this.write+=2,this};util$2.DataBuffer.prototype.putInt24=function(K){return this.accommodate(3),this.data.setInt16(this.write,K>>8&65535),this.data.setInt8(this.write,K>>16&255),this.write+=3,this};util$2.DataBuffer.prototype.putInt32=function(K){return this.accommodate(4),this.data.setInt32(this.write,K),this.write+=4,this};util$2.DataBuffer.prototype.putInt16Le=function(K){return this.accommodate(2),this.data.setInt16(this.write,K,!0),this.write+=2,this};util$2.DataBuffer.prototype.putInt24Le=function(K){return this.accommodate(3),this.data.setInt8(this.write,K>>16&255),this.data.setInt16(this.write,K>>8&65535,!0),this.write+=3,this};util$2.DataBuffer.prototype.putInt32Le=function(K){return this.accommodate(4),this.data.setInt32(this.write,K,!0),this.write+=4,this};util$2.DataBuffer.prototype.putInt=function(K,J){_checkBitsParam(J),this.accommodate(J/8);do J-=8,this.data.setInt8(this.write++,K>>J&255);while(J>0);return this};util$2.DataBuffer.prototype.putSignedInt=function(K,J){return _checkBitsParam(J),this.accommodate(J/8),K<0&&(K+=2<<J-1),this.putInt(K,J)};util$2.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$2.DataBuffer.prototype.getInt16=function(){var K=this.data.getInt16(this.read);return this.read+=2,K};util$2.DataBuffer.prototype.getInt24=function(){var K=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,K};util$2.DataBuffer.prototype.getInt32=function(){var K=this.data.getInt32(this.read);return this.read+=4,K};util$2.DataBuffer.prototype.getInt16Le=function(){var K=this.data.getInt16(this.read,!0);return this.read+=2,K};util$2.DataBuffer.prototype.getInt24Le=function(){var K=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,K};util$2.DataBuffer.prototype.getInt32Le=function(){var K=this.data.getInt32(this.read,!0);return this.read+=4,K};util$2.DataBuffer.prototype.getInt=function(K){_checkBitsParam(K);var J=0;do J=(J<<8)+this.data.getInt8(this.read++),K-=8;while(K>0);return J};util$2.DataBuffer.prototype.getSignedInt=function(K){var J=this.getInt(K),ne=2<<K-2;return J>=ne&&(J-=ne<<1),J};util$2.DataBuffer.prototype.getBytes=function(K){var J;return K?(K=Math.min(this.length(),K),J=this.data.slice(this.read,this.read+K),this.read+=K):K===0?J="":(J=this.read===0?this.data:this.data.slice(this.read),this.clear()),J};util$2.DataBuffer.prototype.bytes=function(K){return typeof K>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+K)};util$2.DataBuffer.prototype.at=function(K){return this.data.getUint8(this.read+K)};util$2.DataBuffer.prototype.setAt=function(K,J){return this.data.setUint8(K,J),this};util$2.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$2.DataBuffer.prototype.copy=function(){return new util$2.DataBuffer(this)};util$2.DataBuffer.prototype.compact=function(){if(this.read>0){var K=new Uint8Array(this.data.buffer,this.read),J=new Uint8Array(K.byteLength);J.set(K),this.data=new DataView(J),this.write-=this.read,this.read=0}return this};util$2.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$2.DataBuffer.prototype.truncate=function(K){return this.write=Math.max(0,this.length()-K),this.read=Math.min(this.read,this.write),this};util$2.DataBuffer.prototype.toHex=function(){for(var K="",J=this.read;J<this.data.byteLength;++J){var ne=this.data.getUint8(J);ne<16&&(K+="0"),K+=ne.toString(16)}return K};util$2.DataBuffer.prototype.toString=function(K){var J=new Uint8Array(this.data,this.read,this.length());if(K=K||"utf8",K==="binary"||K==="raw")return util$2.binary.raw.encode(J);if(K==="hex")return util$2.binary.hex.encode(J);if(K==="base64")return util$2.binary.base64.encode(J);if(K==="utf8")return util$2.text.utf8.decode(J);if(K==="utf16")return util$2.text.utf16.decode(J);throw new Error("Invalid encoding: "+K)};util$2.createBuffer=function(K,J){return J=J||"raw",K!==void 0&&J==="utf8"&&(K=util$2.encodeUtf8(K)),new util$2.ByteBuffer(K)};util$2.fillString=function(K,J){for(var ne="";J>0;)J&1&&(ne+=K),J>>>=1,J>0&&(K+=K);return ne};util$2.xorBytes=function(K,J,ne){for(var oe="",ce="",ue="",Ae=0,pe=0;ne>0;--ne,++Ae)ce=K.charCodeAt(Ae)^J.charCodeAt(Ae),pe>=10&&(oe+=ue,ue="",pe=0),ue+=String.fromCharCode(ce),++pe;return oe+=ue,oe};util$2.hexToBytes=function(K){var J="",ne=0;for(K.length&!0&&(ne=1,J+=String.fromCharCode(parseInt(K[0],16)));ne<K.length;ne+=2)J+=String.fromCharCode(parseInt(K.substr(ne,2),16));return J};util$2.bytesToHex=function(K){return util$2.createBuffer(K).toHex()};util$2.int32ToBytes=function(K){return String.fromCharCode(K>>24&255)+String.fromCharCode(K>>16&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$2.encode64=function(K,J){for(var ne="",oe="",ce,ue,Ae,pe=0;pe<K.length;)ce=K.charCodeAt(pe++),ue=K.charCodeAt(pe++),Ae=K.charCodeAt(pe++),ne+=_base64.charAt(ce>>2),ne+=_base64.charAt((ce&3)<<4|ue>>4),isNaN(ue)?ne+="==":(ne+=_base64.charAt((ue&15)<<2|Ae>>6),ne+=isNaN(Ae)?"=":_base64.charAt(Ae&63)),J&&ne.length>J&&(oe+=ne.substr(0,J)+`\r
`,ne=ne.substr(J));return oe+=ne,oe};util$2.decode64=function(K){K=K.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var J="",ne,oe,ce,ue,Ae=0;Ae<K.length;)ne=_base64Idx[K.charCodeAt(Ae++)-43],oe=_base64Idx[K.charCodeAt(Ae++)-43],ce=_base64Idx[K.charCodeAt(Ae++)-43],ue=_base64Idx[K.charCodeAt(Ae++)-43],J+=String.fromCharCode(ne<<2|oe>>4),ce!==64&&(J+=String.fromCharCode((oe&15)<<4|ce>>2),ue!==64&&(J+=String.fromCharCode((ce&3)<<6|ue)));return J};util$2.encodeUtf8=function(K){return unescape(encodeURIComponent(K))};util$2.decodeUtf8=function(K){return decodeURIComponent(escape(K))};util$2.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$2.binary.raw.encode=function(K){return String.fromCharCode.apply(null,K)};util$2.binary.raw.decode=function(K,J,ne){var oe=J;oe||(oe=new Uint8Array(K.length)),ne=ne||0;for(var ce=ne,ue=0;ue<K.length;++ue)oe[ce++]=K.charCodeAt(ue);return J?ce-ne:oe};util$2.binary.hex.encode=util$2.bytesToHex;util$2.binary.hex.decode=function(K,J,ne){var oe=J;oe||(oe=new Uint8Array(Math.ceil(K.length/2))),ne=ne||0;var ce=0,ue=ne;for(K.length&1&&(ce=1,oe[ue++]=parseInt(K[0],16));ce<K.length;ce+=2)oe[ue++]=parseInt(K.substr(ce,2),16);return J?ue-ne:oe};util$2.binary.base64.encode=function(K,J){for(var ne="",oe="",ce,ue,Ae,pe=0;pe<K.byteLength;)ce=K[pe++],ue=K[pe++],Ae=K[pe++],ne+=_base64.charAt(ce>>2),ne+=_base64.charAt((ce&3)<<4|ue>>4),isNaN(ue)?ne+="==":(ne+=_base64.charAt((ue&15)<<2|Ae>>6),ne+=isNaN(Ae)?"=":_base64.charAt(Ae&63)),J&&ne.length>J&&(oe+=ne.substr(0,J)+`\r
`,ne=ne.substr(J));return oe+=ne,oe};util$2.binary.base64.decode=function(K,J,ne){var oe=J;oe||(oe=new Uint8Array(Math.ceil(K.length/4)*3)),K=K.replace(/[^A-Za-z0-9\+\/\=]/g,""),ne=ne||0;for(var ce,ue,Ae,pe,ve=0,me=ne;ve<K.length;)ce=_base64Idx[K.charCodeAt(ve++)-43],ue=_base64Idx[K.charCodeAt(ve++)-43],Ae=_base64Idx[K.charCodeAt(ve++)-43],pe=_base64Idx[K.charCodeAt(ve++)-43],oe[me++]=ce<<2|ue>>4,Ae!==64&&(oe[me++]=(ue&15)<<4|Ae>>2,pe!==64&&(oe[me++]=(Ae&3)<<6|pe));return J?me-ne:oe.subarray(0,me)};util$2.binary.base58.encode=function(K,J){return util$2.binary.baseN.encode(K,_base58,J)};util$2.binary.base58.decode=function(K,J){return util$2.binary.baseN.decode(K,_base58,J)};util$2.text={utf8:{},utf16:{}};util$2.text.utf8.encode=function(K,J,ne){K=util$2.encodeUtf8(K);var oe=J;oe||(oe=new Uint8Array(K.length)),ne=ne||0;for(var ce=ne,ue=0;ue<K.length;++ue)oe[ce++]=K.charCodeAt(ue);return J?ce-ne:oe};util$2.text.utf8.decode=function(K){return util$2.decodeUtf8(String.fromCharCode.apply(null,K))};util$2.text.utf16.encode=function(K,J,ne){var oe=J;oe||(oe=new Uint8Array(K.length*2));var ce=new Uint16Array(oe.buffer);ne=ne||0;for(var ue=ne,Ae=ne,pe=0;pe<K.length;++pe)ce[Ae++]=K.charCodeAt(pe),ue+=2;return J?ue-ne:oe};util$2.text.utf16.decode=function(K){return String.fromCharCode.apply(null,new Uint16Array(K.buffer))};util$2.deflate=function(K,J,ne){if(J=util$2.decode64(K.deflate(util$2.encode64(J)).rval),ne){var oe=2,ce=J.charCodeAt(1);ce&32&&(oe=6),J=J.substring(oe,J.length-4)}return J};util$2.inflate=function(K,J,ne){var oe=K.inflate(util$2.encode64(J)).rval;return oe===null?null:util$2.decode64(oe)};var _setStorageObject=function(K,J,ne){if(!K)throw new Error("WebStorage not available.");var oe;if(ne===null?oe=K.removeItem(J):(ne=util$2.encode64(JSON.stringify(ne)),oe=K.setItem(J,ne)),typeof oe<"u"&&oe.rval!==!0){var ce=new Error(oe.error.message);throw ce.id=oe.error.id,ce.name=oe.error.name,ce}},_getStorageObject=function(K,J){if(!K)throw new Error("WebStorage not available.");var ne=K.getItem(J);if(K.init)if(ne.rval===null){if(ne.error){var oe=new Error(ne.error.message);throw oe.id=ne.error.id,oe.name=ne.error.name,oe}ne=null}else ne=ne.rval;return ne!==null&&(ne=JSON.parse(util$2.decode64(ne))),ne},_setItem=function(K,J,ne,oe){var ce=_getStorageObject(K,J);ce===null&&(ce={}),ce[ne]=oe,_setStorageObject(K,J,ce)},_getItem=function(K,J,ne){var oe=_getStorageObject(K,J);return oe!==null&&(oe=ne in oe?oe[ne]:null),oe},_removeItem=function(K,J,ne){var oe=_getStorageObject(K,J);if(oe!==null&&ne in oe){delete oe[ne];var ce=!0;for(var ue in oe){ce=!1;break}ce&&(oe=null),_setStorageObject(K,J,oe)}},_clearItems=function(K,J){_setStorageObject(K,J,null)},_callStorageFunction=function(K,J,ne){var oe=null;typeof ne>"u"&&(ne=["web","flash"]);var ce,ue=!1,Ae=null;for(var pe in ne){ce=ne[pe];try{if(ce==="flash"||ce==="both"){if(J[0]===null)throw new Error("Flash local storage not available.");oe=K.apply(this,J),ue=ce==="flash"}(ce==="web"||ce==="both")&&(J[0]=localStorage,oe=K.apply(this,J),ue=!0)}catch(ve){Ae=ve}if(ue)break}if(!ue)throw Ae;return oe};util$2.setItem=function(K,J,ne,oe,ce){_callStorageFunction(_setItem,arguments,ce)};util$2.getItem=function(K,J,ne,oe){return _callStorageFunction(_getItem,arguments,oe)};util$2.removeItem=function(K,J,ne,oe){_callStorageFunction(_removeItem,arguments,oe)};util$2.clearItems=function(K,J,ne){_callStorageFunction(_clearItems,arguments,ne)};util$2.isEmpty=function(K){for(var J in K)if(K.hasOwnProperty(J))return!1;return!0};util$2.format=function(K){for(var J=/%./g,ne,oe,ce=0,ue=[],Ae=0;ne=J.exec(K);){oe=K.substring(Ae,J.lastIndex-2),oe.length>0&&ue.push(oe),Ae=J.lastIndex;var pe=ne[0][1];switch(pe){case"s":case"o":ce<arguments.length?ue.push(arguments[ce+++1]):ue.push("<?>");break;case"%":ue.push("%");break;default:ue.push("<%"+pe+"?>")}}return ue.push(K.substring(Ae)),ue.join("")};util$2.formatNumber=function(K,J,ne,oe){var ce=K,ue=isNaN(J=Math.abs(J))?2:J,Ae=ne===void 0?",":ne,pe=oe===void 0?".":oe,ve=ce<0?"-":"",me=parseInt(ce=Math.abs(+ce||0).toFixed(ue),10)+"",ge=me.length>3?me.length%3:0;return ve+(ge?me.substr(0,ge)+pe:"")+me.substr(ge).replace(/(\d{3})(?=\d)/g,"$1"+pe)+(ue?Ae+Math.abs(ce-me).toFixed(ue).slice(2):"")};util$2.formatSize=function(K){return K>=1073741824?K=util$2.formatNumber(K/1073741824,2,".","")+" GiB":K>=1048576?K=util$2.formatNumber(K/1048576,2,".","")+" MiB":K>=1024?K=util$2.formatNumber(K/1024,0)+" KiB":K=util$2.formatNumber(K,0)+" bytes",K};util$2.bytesFromIP=function(K){return K.indexOf(".")!==-1?util$2.bytesFromIPv4(K):K.indexOf(":")!==-1?util$2.bytesFromIPv6(K):null};util$2.bytesFromIPv4=function(K){if(K=K.split("."),K.length!==4)return null;for(var J=util$2.createBuffer(),ne=0;ne<K.length;++ne){var oe=parseInt(K[ne],10);if(isNaN(oe))return null;J.putByte(oe)}return J.getBytes()};util$2.bytesFromIPv6=function(K){var J=0;K=K.split(":").filter(function(Ae){return Ae.length===0&&++J,!0});for(var ne=(8-K.length+J)*2,oe=util$2.createBuffer(),ce=0;ce<8;++ce){if(!K[ce]||K[ce].length===0){oe.fillWithByte(0,ne),ne=0;continue}var ue=util$2.hexToBytes(K[ce]);ue.length<2&&oe.putByte(0),oe.putBytes(ue)}return oe.getBytes()};util$2.bytesToIP=function(K){return K.length===4?util$2.bytesToIPv4(K):K.length===16?util$2.bytesToIPv6(K):null};util$2.bytesToIPv4=function(K){if(K.length!==4)return null;for(var J=[],ne=0;ne<K.length;++ne)J.push(K.charCodeAt(ne));return J.join(".")};util$2.bytesToIPv6=function(K){if(K.length!==16)return null;for(var J=[],ne=[],oe=0,ce=0;ce<K.length;ce+=2){for(var ue=util$2.bytesToHex(K[ce]+K[ce+1]);ue[0]==="0"&&ue!=="0";)ue=ue.substr(1);if(ue==="0"){var Ae=ne[ne.length-1],pe=J.length;!Ae||pe!==Ae.end+1?ne.push({start:pe,end:pe}):(Ae.end=pe,Ae.end-Ae.start>ne[oe].end-ne[oe].start&&(oe=ne.length-1))}J.push(ue)}if(ne.length>0){var ve=ne[oe];ve.end-ve.start>0&&(J.splice(ve.start,ve.end-ve.start+1,""),ve.start===0&&J.unshift(""),ve.end===7&&J.push(""))}return J.join(":")};util$2.estimateCores=function(K,J){if(typeof K=="function"&&(J=K,K={}),K=K||{},"cores"in util$2&&!K.update)return J(null,util$2.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$2.cores=navigator.hardwareConcurrency,J(null,util$2.cores);if(typeof Worker>"u")return util$2.cores=1,J(null,util$2.cores);if(typeof Blob>"u")return util$2.cores=2,J(null,util$2.cores);var ne=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(Ae){var pe=Date.now(),ve=pe+4;self.postMessage({st:pe,et:ve})})}).toString(),")()"],{type:"application/javascript"}));oe([],5,16);function oe(Ae,pe,ve){if(pe===0){var me=Math.floor(Ae.reduce(function(ge,ye){return ge+ye},0)/Ae.length);return util$2.cores=Math.max(1,me),URL.revokeObjectURL(ne),J(null,util$2.cores)}ce(ve,function(ge,ye){Ae.push(ue(ve,ye)),oe(Ae,pe-1,ve)})}function ce(Ae,pe){for(var ve=[],me=[],ge=0;ge<Ae;++ge){var ye=new Worker(ne);ye.addEventListener("message",function(xe){if(me.push(xe.data),me.length===Ae){for(var _e=0;_e<Ae;++_e)ve[_e].terminate();pe(null,me)}}),ve.push(ye)}for(var ge=0;ge<Ae;++ge)ve[ge].postMessage(ge)}function ue(Ae,pe){for(var ve=[],me=0;me<Ae;++me)for(var ge=pe[me],ye=ve[me]=[],xe=0;xe<Ae;++xe)if(me!==xe){var _e=pe[xe];(ge.st>_e.st&&ge.st<_e.et||_e.st>ge.st&&_e.st<ge.et)&&ye.push(xe)}return ve.reduce(function($e,Ie){return Math.max($e,Ie.length)},0)}};var forge$B=forge$D;forge$B.cipher=forge$B.cipher||{};forge$B.cipher.algorithms=forge$B.cipher.algorithms||{};forge$B.cipher.createCipher=function(K,J){var ne=K;if(typeof ne=="string"&&(ne=forge$B.cipher.getAlgorithm(ne),ne&&(ne=ne())),!ne)throw new Error("Unsupported algorithm: "+K);return new forge$B.cipher.BlockCipher({algorithm:ne,key:J,decrypt:!1})};forge$B.cipher.createDecipher=function(K,J){var ne=K;if(typeof ne=="string"&&(ne=forge$B.cipher.getAlgorithm(ne),ne&&(ne=ne())),!ne)throw new Error("Unsupported algorithm: "+K);return new forge$B.cipher.BlockCipher({algorithm:ne,key:J,decrypt:!0})};forge$B.cipher.registerAlgorithm=function(K,J){K=K.toUpperCase(),forge$B.cipher.algorithms[K]=J};forge$B.cipher.getAlgorithm=function(K){return K=K.toUpperCase(),K in forge$B.cipher.algorithms?forge$B.cipher.algorithms[K]:null};var BlockCipher=forge$B.cipher.BlockCipher=function(K){this.algorithm=K.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=K.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=K.decrypt,this.algorithm.initialize(K)};BlockCipher.prototype.start=function(K){K=K||{};var J={};for(var ne in K)J[ne]=K[ne];J.decrypt=this._decrypt,this._finish=!1,this._input=forge$B.util.createBuffer(),this.output=K.output||forge$B.util.createBuffer(),this.mode.start(J)};BlockCipher.prototype.update=function(K){for(K&&this._input.putBuffer(K);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(K){K&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(ne){return K(this.blockSize,ne,!1)},this.mode.unpad=function(ne){return K(this.blockSize,ne,!0)});var J={};return J.decrypt=this._decrypt,J.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,J)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,J))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,J))};var forge$A=forge$D;forge$A.cipher=forge$A.cipher||{};var modes$1=forge$A.cipher.modes=forge$A.cipher.modes||{};modes$1.ecb=function(K){K=K||{},this.name="ECB",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.ecb.prototype.start=function(K){};modes$1.ecb.prototype.encrypt=function(K,J,ne){if(K.length()<this.blockSize&&!(ne&&K.length()>0))return!0;for(var oe=0;oe<this._ints;++oe)this._inBlock[oe]=K.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var oe=0;oe<this._ints;++oe)J.putInt32(this._outBlock[oe])};modes$1.ecb.prototype.decrypt=function(K,J,ne){if(K.length()<this.blockSize&&!(ne&&K.length()>0))return!0;for(var oe=0;oe<this._ints;++oe)this._inBlock[oe]=K.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var oe=0;oe<this._ints;++oe)J.putInt32(this._outBlock[oe])};modes$1.ecb.prototype.pad=function(K,J){var ne=K.length()===this.blockSize?this.blockSize:this.blockSize-K.length();return K.fillWithByte(ne,ne),!0};modes$1.ecb.prototype.unpad=function(K,J){if(J.overflow>0)return!1;var ne=K.length(),oe=K.at(ne-1);return oe>this.blockSize<<2?!1:(K.truncate(oe),!0)};modes$1.cbc=function(K){K=K||{},this.name="CBC",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.cbc.prototype.start=function(K){if(K.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in K)this._iv=transformIV(K.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes$1.cbc.prototype.encrypt=function(K,J,ne){if(K.length()<this.blockSize&&!(ne&&K.length()>0))return!0;for(var oe=0;oe<this._ints;++oe)this._inBlock[oe]=this._prev[oe]^K.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var oe=0;oe<this._ints;++oe)J.putInt32(this._outBlock[oe]);this._prev=this._outBlock};modes$1.cbc.prototype.decrypt=function(K,J,ne){if(K.length()<this.blockSize&&!(ne&&K.length()>0))return!0;for(var oe=0;oe<this._ints;++oe)this._inBlock[oe]=K.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var oe=0;oe<this._ints;++oe)J.putInt32(this._prev[oe]^this._outBlock[oe]);this._prev=this._inBlock.slice(0)};modes$1.cbc.prototype.pad=function(K,J){var ne=K.length()===this.blockSize?this.blockSize:this.blockSize-K.length();return K.fillWithByte(ne,ne),!0};modes$1.cbc.prototype.unpad=function(K,J){if(J.overflow>0)return!1;var ne=K.length(),oe=K.at(ne-1);return oe>this.blockSize<<2?!1:(K.truncate(oe),!0)};modes$1.cfb=function(K){K=K||{},this.name="CFB",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$A.util.createBuffer(),this._partialBytes=0};modes$1.cfb.prototype.start=function(K){if(!("iv"in K))throw new Error("Invalid IV parameter.");this._iv=transformIV(K.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.cfb.prototype.encrypt=function(K,J,ne){var oe=K.length();if(oe===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize){for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=K.getInt32()^this._outBlock[ce],J.putInt32(this._inBlock[ce]);return}var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialBlock[ce]=K.getInt32()^this._outBlock[ce],this._partialOutput.putInt32(this._partialBlock[ce]);if(ue>0)K.read-=this.blockSize;else for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=this._partialBlock[ce];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0};modes$1.cfb.prototype.decrypt=function(K,J,ne){var oe=K.length();if(oe===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize){for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=K.getInt32(),J.putInt32(this._inBlock[ce]^this._outBlock[ce]);return}var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialBlock[ce]=K.getInt32(),this._partialOutput.putInt32(this._partialBlock[ce]^this._outBlock[ce]);if(ue>0)K.read-=this.blockSize;else for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=this._partialBlock[ce];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0};modes$1.ofb=function(K){K=K||{},this.name="OFB",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$A.util.createBuffer(),this._partialBytes=0};modes$1.ofb.prototype.start=function(K){if(!("iv"in K))throw new Error("Invalid IV parameter.");this._iv=transformIV(K.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ofb.prototype.encrypt=function(K,J,ne){var oe=K.length();if(K.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize){for(var ce=0;ce<this._ints;++ce)J.putInt32(K.getInt32()^this._outBlock[ce]),this._inBlock[ce]=this._outBlock[ce];return}var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialOutput.putInt32(K.getInt32()^this._outBlock[ce]);if(ue>0)K.read-=this.blockSize;else for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=this._outBlock[ce];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0};modes$1.ofb.prototype.decrypt=modes$1.ofb.prototype.encrypt;modes$1.ctr=function(K){K=K||{},this.name="CTR",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$A.util.createBuffer(),this._partialBytes=0};modes$1.ctr.prototype.start=function(K){if(!("iv"in K))throw new Error("Invalid IV parameter.");this._iv=transformIV(K.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ctr.prototype.encrypt=function(K,J,ne){var oe=K.length();if(oe===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize)for(var ce=0;ce<this._ints;++ce)J.putInt32(K.getInt32()^this._outBlock[ce]);else{var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialOutput.putInt32(K.getInt32()^this._outBlock[ce]);if(ue>0&&(K.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes$1.ctr.prototype.decrypt=modes$1.ctr.prototype.encrypt;modes$1.gcm=function(K){K=K||{},this.name="GCM",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$A.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes$1.gcm.prototype.start=function(K){if(!("iv"in K))throw new Error("Invalid IV parameter.");var J=forge$A.util.createBuffer(K.iv);this._cipherLength=0;var ne;if("additionalData"in K?ne=forge$A.util.createBuffer(K.additionalData):ne=forge$A.util.createBuffer(),"tagLength"in K?this._tagLength=K.tagLength:this._tagLength=128,this._tag=null,K.decrypt&&(this._tag=forge$A.util.createBuffer(K.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var oe=J.length();if(oe===12)this._j0=[J.getInt32(),J.getInt32(),J.getInt32(),1];else{for(this._j0=[0,0,0,0];J.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[J.getInt32(),J.getInt32(),J.getInt32(),J.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(oe*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,ne=forge$A.util.createBuffer(ne),this._aDataLength=from64To32(ne.length()*8);var ce=ne.length()%this.blockSize;for(ce&&ne.fillWithByte(0,this.blockSize-ce),this._s=[0,0,0,0];ne.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[ne.getInt32(),ne.getInt32(),ne.getInt32(),ne.getInt32()])};modes$1.gcm.prototype.encrypt=function(K,J,ne){var oe=K.length();if(oe===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize){for(var ce=0;ce<this._ints;++ce)J.putInt32(this._outBlock[ce]^=K.getInt32());this._cipherLength+=this.blockSize}else{var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialOutput.putInt32(K.getInt32()^this._outBlock[ce]);if(ue<=0||ne){if(ne){var Ae=oe%this.blockSize;this._cipherLength+=Ae,this._partialOutput.truncate(this.blockSize-Ae)}else this._cipherLength+=this.blockSize;for(var ce=0;ce<this._ints;++ce)this._outBlock[ce]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return K.read-=this.blockSize,J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes$1.gcm.prototype.decrypt=function(K,J,ne){var oe=K.length();if(oe<this.blockSize&&!(ne&&oe>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=K.getInt32(),this._hashBlock[1]=K.getInt32(),this._hashBlock[2]=K.getInt32(),this._hashBlock[3]=K.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var ce=0;ce<this._ints;++ce)J.putInt32(this._outBlock[ce]^this._hashBlock[ce]);oe<this.blockSize?this._cipherLength+=oe%this.blockSize:this._cipherLength+=this.blockSize};modes$1.gcm.prototype.afterFinish=function(K,J){var ne=!0;J.decrypt&&J.overflow&&K.truncate(this.blockSize-J.overflow),this.tag=forge$A.util.createBuffer();var oe=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,oe);var ce=[];this.cipher.encrypt(this._j0,ce);for(var ue=0;ue<this._ints;++ue)this.tag.putInt32(this._s[ue]^ce[ue]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),J.decrypt&&this.tag.bytes()!==this._tag&&(ne=!1),ne};modes$1.gcm.prototype.multiply=function(K,J){for(var ne=[0,0,0,0],oe=J.slice(0),ce=0;ce<128;++ce){var ue=K[ce/32|0]&1<<31-ce%32;ue&&(ne[0]^=oe[0],ne[1]^=oe[1],ne[2]^=oe[2],ne[3]^=oe[3]),this.pow(oe,oe)}return ne};modes$1.gcm.prototype.pow=function(K,J){for(var ne=K[3]&1,oe=3;oe>0;--oe)J[oe]=K[oe]>>>1|(K[oe-1]&1)<<31;J[0]=K[0]>>>1,ne&&(J[0]^=this._R)};modes$1.gcm.prototype.tableMultiply=function(K){for(var J=[0,0,0,0],ne=0;ne<32;++ne){var oe=ne/8|0,ce=K[oe]>>>(7-ne%8)*4&15,ue=this._m[ne][ce];J[0]^=ue[0],J[1]^=ue[1],J[2]^=ue[2],J[3]^=ue[3]}return J};modes$1.gcm.prototype.ghash=function(K,J,ne){return J[0]^=ne[0],J[1]^=ne[1],J[2]^=ne[2],J[3]^=ne[3],this.tableMultiply(J)};modes$1.gcm.prototype.generateHashTable=function(K,J){for(var ne=8/J,oe=4*ne,ce=16*ne,ue=new Array(ce),Ae=0;Ae<ce;++Ae){var pe=[0,0,0,0],ve=Ae/oe|0,me=(oe-1-Ae%oe)*J;pe[ve]=1<<J-1<<me,ue[Ae]=this.generateSubHashTable(this.multiply(pe,K),J)}return ue};modes$1.gcm.prototype.generateSubHashTable=function(K,J){var ne=1<<J,oe=ne>>>1,ce=new Array(ne);ce[oe]=K.slice(0);for(var ue=oe>>>1;ue>0;)this.pow(ce[2*ue],ce[ue]=[]),ue>>=1;for(ue=2;ue<oe;){for(var Ae=1;Ae<ue;++Ae){var pe=ce[ue],ve=ce[Ae];ce[ue+Ae]=[pe[0]^ve[0],pe[1]^ve[1],pe[2]^ve[2],pe[3]^ve[3]]}ue*=2}for(ce[0]=[0,0,0,0],ue=oe+1;ue<ne;++ue){var me=ce[ue^oe];ce[ue]=[K[0]^me[0],K[1]^me[1],K[2]^me[2],K[3]^me[3]]}return ce};function transformIV(K,J){if(typeof K=="string"&&(K=forge$A.util.createBuffer(K)),forge$A.util.isArray(K)&&K.length>4){var ne=K;K=forge$A.util.createBuffer();for(var oe=0;oe<ne.length;++oe)K.putByte(ne[oe])}if(K.length()<J)throw new Error("Invalid IV length; got "+K.length()+" bytes and expected "+J+" bytes.");if(!forge$A.util.isArray(K)){for(var ce=[],ue=J/4,oe=0;oe<ue;++oe)ce.push(K.getInt32());K=ce}return K}function inc32(K){K[K.length-1]=K[K.length-1]+1&4294967295}function from64To32(K){return[K/4294967296|0,K&4294967295]}var forge$z=forge$D;forge$z.aes=forge$z.aes||{};forge$z.aes.startEncrypting=function(K,J,ne,oe){var ce=_createCipher$1({key:K,output:ne,decrypt:!1,mode:oe});return ce.start(J),ce};forge$z.aes.createEncryptionCipher=function(K,J){return _createCipher$1({key:K,output:null,decrypt:!1,mode:J})};forge$z.aes.startDecrypting=function(K,J,ne,oe){var ce=_createCipher$1({key:K,output:ne,decrypt:!0,mode:oe});return ce.start(J),ce};forge$z.aes.createDecryptionCipher=function(K,J){return _createCipher$1({key:K,output:null,decrypt:!0,mode:J})};forge$z.aes.Algorithm=function(K,J){init||initialize();var ne=this;ne.name=K,ne.mode=new J({blockSize:16,cipher:{encrypt:function(oe,ce){return _updateBlock$1(ne._w,oe,ce,!1)},decrypt:function(oe,ce){return _updateBlock$1(ne._w,oe,ce,!0)}}}),ne._init=!1};forge$z.aes.Algorithm.prototype.initialize=function(K){if(!this._init){var J=K.key,ne;if(typeof J=="string"&&(J.length===16||J.length===24||J.length===32))J=forge$z.util.createBuffer(J);else if(forge$z.util.isArray(J)&&(J.length===16||J.length===24||J.length===32)){ne=J,J=forge$z.util.createBuffer();for(var oe=0;oe<ne.length;++oe)J.putByte(ne[oe])}if(!forge$z.util.isArray(J)){ne=J,J=[];var ce=ne.length();if(ce===16||ce===24||ce===32){ce=ce>>>2;for(var oe=0;oe<ce;++oe)J.push(ne.getInt32())}}if(!forge$z.util.isArray(J)||!(J.length===4||J.length===6||J.length===8))throw new Error("Invalid key parameter.");var ue=this.mode.name,Ae=["CFB","OFB","CTR","GCM"].indexOf(ue)!==-1;this._w=_expandKey(J,K.decrypt&&!Ae),this._init=!0}};forge$z.aes._expandKey=function(K,J){return init||initialize(),_expandKey(K,J)};forge$z.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$z.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$z.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$z.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$z.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$z.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$z.cipher.modes.gcm);function registerAlgorithm$1(K,J){var ne=function(){return new forge$z.aes.Algorithm(K,J)};forge$z.cipher.registerAlgorithm(K,ne)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var K=new Array(256),J=0;J<128;++J)K[J]=J<<1,K[J+128]=J+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var J=0;J<4;++J)mix[J]=new Array(256),imix[J]=new Array(256);for(var ne=0,oe=0,ce,ue,Ae,pe,ve,me,ge,J=0;J<256;++J){pe=oe^oe<<1^oe<<2^oe<<3^oe<<4,pe=pe>>8^pe&255^99,sbox[ne]=pe,isbox[pe]=ne,ve=K[pe],ce=K[ne],ue=K[ce],Ae=K[ue],me=ve<<24^pe<<16^pe<<8^(pe^ve),ge=(ce^ue^Ae)<<24^(ne^Ae)<<16^(ne^ue^Ae)<<8^(ne^ce^Ae);for(var ye=0;ye<4;++ye)mix[ye][ne]=me,imix[ye][pe]=ge,me=me<<24|me>>>8,ge=ge<<24|ge>>>8;ne===0?ne=oe=1:(ne=ce^K[K[K[ce^Ae]]],oe^=K[K[oe]])}}function _expandKey(K,J){for(var ne=K.slice(0),oe,ce=1,ue=ne.length,Ae=ue+6+1,pe=Nb*Ae,ve=ue;ve<pe;++ve)oe=ne[ve-1],ve%ue===0?(oe=sbox[oe>>>16&255]<<24^sbox[oe>>>8&255]<<16^sbox[oe&255]<<8^sbox[oe>>>24]^rcon[ce]<<24,ce++):ue>6&&ve%ue===4&&(oe=sbox[oe>>>24]<<24^sbox[oe>>>16&255]<<16^sbox[oe>>>8&255]<<8^sbox[oe&255]),ne[ve]=ne[ve-ue]^oe;if(J){var me,ge=imix[0],ye=imix[1],xe=imix[2],_e=imix[3],$e=ne.slice(0);pe=ne.length;for(var ve=0,Ie=pe-Nb;ve<pe;ve+=Nb,Ie-=Nb)if(ve===0||ve===pe-Nb)$e[ve]=ne[Ie],$e[ve+1]=ne[Ie+3],$e[ve+2]=ne[Ie+2],$e[ve+3]=ne[Ie+1];else for(var Fe=0;Fe<Nb;++Fe)me=ne[Ie+Fe],$e[ve+(3&-Fe)]=ge[sbox[me>>>24]]^ye[sbox[me>>>16&255]]^xe[sbox[me>>>8&255]]^_e[sbox[me&255]];ne=$e}return ne}function _updateBlock$1(K,J,ne,oe){var ce=K.length/4-1,ue,Ae,pe,ve,me;oe?(ue=imix[0],Ae=imix[1],pe=imix[2],ve=imix[3],me=isbox):(ue=mix[0],Ae=mix[1],pe=mix[2],ve=mix[3],me=sbox);var ge,ye,xe,_e,$e,Ie,Fe;ge=J[0]^K[0],ye=J[oe?3:1]^K[1],xe=J[2]^K[2],_e=J[oe?1:3]^K[3];for(var ke=3,je=1;je<ce;++je)$e=ue[ge>>>24]^Ae[ye>>>16&255]^pe[xe>>>8&255]^ve[_e&255]^K[++ke],Ie=ue[ye>>>24]^Ae[xe>>>16&255]^pe[_e>>>8&255]^ve[ge&255]^K[++ke],Fe=ue[xe>>>24]^Ae[_e>>>16&255]^pe[ge>>>8&255]^ve[ye&255]^K[++ke],_e=ue[_e>>>24]^Ae[ge>>>16&255]^pe[ye>>>8&255]^ve[xe&255]^K[++ke],ge=$e,ye=Ie,xe=Fe;ne[0]=me[ge>>>24]<<24^me[ye>>>16&255]<<16^me[xe>>>8&255]<<8^me[_e&255]^K[++ke],ne[oe?3:1]=me[ye>>>24]<<24^me[xe>>>16&255]<<16^me[_e>>>8&255]<<8^me[ge&255]^K[++ke],ne[2]=me[xe>>>24]<<24^me[_e>>>16&255]<<16^me[ge>>>8&255]<<8^me[ye&255]^K[++ke],ne[oe?1:3]=me[_e>>>24]<<24^me[ge>>>16&255]<<16^me[ye>>>8&255]<<8^me[xe&255]^K[++ke]}function _createCipher$1(K){K=K||{};var J=(K.mode||"CBC").toUpperCase(),ne="AES-"+J,oe;K.decrypt?oe=forge$z.cipher.createDecipher(ne,K.key):oe=forge$z.cipher.createCipher(ne,K.key);var ce=oe.start;return oe.start=function(ue,Ae){var pe=null;Ae instanceof forge$z.util.ByteBuffer&&(pe=Ae,Ae={}),Ae=Ae||{},Ae.output=pe,Ae.iv=ue,ce.call(oe,Ae)},oe}var forge$y=forge$D;forge$y.pki=forge$y.pki||{};var oids$2=forge$y.pki.oids=forge$y.oids=forge$y.oids||{};function _IN(K,J){oids$2[K]=J,oids$2[J]=K}function _I_(K,J){oids$2[K]=J}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$x=forge$D,asn1$a=forge$x.asn1=forge$x.asn1||{};asn1$a.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$a.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$a.create=function(K,J,ne,oe,ce){if(forge$x.util.isArray(oe)){for(var ue=[],Ae=0;Ae<oe.length;++Ae)oe[Ae]!==void 0&&ue.push(oe[Ae]);oe=ue}var pe={tagClass:K,type:J,constructed:ne,composed:ne||forge$x.util.isArray(oe),value:oe};return ce&&"bitStringContents"in ce&&(pe.bitStringContents=ce.bitStringContents,pe.original=asn1$a.copy(pe)),pe};asn1$a.copy=function(K,J){var ne;if(forge$x.util.isArray(K)){ne=[];for(var oe=0;oe<K.length;++oe)ne.push(asn1$a.copy(K[oe],J));return ne}return typeof K=="string"?K:(ne={tagClass:K.tagClass,type:K.type,constructed:K.constructed,composed:K.composed,value:asn1$a.copy(K.value,J)},J&&!J.excludeBitStringContents&&(ne.bitStringContents=K.bitStringContents),ne)};asn1$a.equals=function(K,J,ne){if(forge$x.util.isArray(K)){if(!forge$x.util.isArray(J)||K.length!==J.length)return!1;for(var oe=0;oe<K.length;++oe)if(!asn1$a.equals(K[oe],J[oe]))return!1;return!0}if(typeof K!=typeof J)return!1;if(typeof K=="string")return K===J;var ce=K.tagClass===J.tagClass&&K.type===J.type&&K.constructed===J.constructed&&K.composed===J.composed&&asn1$a.equals(K.value,J.value);return ne&&ne.includeBitStringContents&&(ce=ce&&K.bitStringContents===J.bitStringContents),ce};asn1$a.getBerValueLength=function(K){var J=K.getByte();if(J!==128){var ne,oe=J&128;return oe?ne=K.getInt((J&127)<<3):ne=J,ne}};function _checkBufferLength(K,J,ne){if(ne>J){var oe=new Error("Too few bytes to parse DER.");throw oe.available=K.length(),oe.remaining=J,oe.requested=ne,oe}}var _getValueLength=function(K,J){var ne=K.getByte();if(J--,ne!==128){var oe,ce=ne&128;if(!ce)oe=ne;else{var ue=ne&127;_checkBufferLength(K,J,ue),oe=K.getInt(ue<<3)}if(oe<0)throw new Error("Negative length: "+oe);return oe}};asn1$a.fromDer=function(K,J){J===void 0&&(J={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof J=="boolean"&&(J={strict:J,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in J||(J.strict=!0),"parseAllBytes"in J||(J.parseAllBytes=!0),"decodeBitStrings"in J||(J.decodeBitStrings=!0),typeof K=="string"&&(K=forge$x.util.createBuffer(K));var ne=K.length(),oe=_fromDer(K,K.length(),0,J);if(J.parseAllBytes&&K.length()!==0){var ce=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw ce.byteCount=ne,ce.remaining=K.length(),ce}return oe};function _fromDer(K,J,ne,oe){var ce;_checkBufferLength(K,J,2);var ue=K.getByte();J--;var Ae=ue&192,pe=ue&31;ce=K.length();var ve=_getValueLength(K,J);if(J-=ce-K.length(),ve!==void 0&&ve>J){if(oe.strict){var me=new Error("Too few bytes to read ASN.1 value.");throw me.available=K.length(),me.remaining=J,me.requested=ve,me}ve=J}var ge,ye,xe=(ue&32)===32;if(xe)if(ge=[],ve===void 0)for(;;){if(_checkBufferLength(K,J,2),K.bytes(2)==="\0\0"){K.getBytes(2),J-=2;break}ce=K.length(),ge.push(_fromDer(K,J,ne+1,oe)),J-=ce-K.length()}else for(;ve>0;)ce=K.length(),ge.push(_fromDer(K,ve,ne+1,oe)),J-=ce-K.length(),ve-=ce-K.length();if(ge===void 0&&Ae===asn1$a.Class.UNIVERSAL&&pe===asn1$a.Type.BITSTRING&&(ye=K.bytes(ve)),ge===void 0&&oe.decodeBitStrings&&Ae===asn1$a.Class.UNIVERSAL&&pe===asn1$a.Type.BITSTRING&&ve>1){var _e=K.read,$e=J,Ie=0;if(pe===asn1$a.Type.BITSTRING&&(_checkBufferLength(K,J,1),Ie=K.getByte(),J--),Ie===0)try{ce=K.length();var Fe={strict:!0,decodeBitStrings:!0},ke=_fromDer(K,J,ne+1,Fe),je=ce-K.length();J-=je,pe==asn1$a.Type.BITSTRING&&je++;var We=ke.tagClass;je===ve&&(We===asn1$a.Class.UNIVERSAL||We===asn1$a.Class.CONTEXT_SPECIFIC)&&(ge=[ke])}catch{}ge===void 0&&(K.read=_e,J=$e)}if(ge===void 0){if(ve===void 0){if(oe.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");ve=J}if(pe===asn1$a.Type.BMPSTRING)for(ge="";ve>0;ve-=2)_checkBufferLength(K,J,2),ge+=String.fromCharCode(K.getInt16()),J-=2;else ge=K.getBytes(ve),J-=ve}var ze=ye===void 0?null:{bitStringContents:ye};return asn1$a.create(Ae,pe,xe,ge,ze)}asn1$a.toDer=function(K){var J=forge$x.util.createBuffer(),ne=K.tagClass|K.type,oe=forge$x.util.createBuffer(),ce=!1;if("bitStringContents"in K&&(ce=!0,K.original&&(ce=asn1$a.equals(K,K.original))),ce)oe.putBytes(K.bitStringContents);else if(K.composed){K.constructed?ne|=32:oe.putByte(0);for(var ue=0;ue<K.value.length;++ue)K.value[ue]!==void 0&&oe.putBuffer(asn1$a.toDer(K.value[ue]))}else if(K.type===asn1$a.Type.BMPSTRING)for(var ue=0;ue<K.value.length;++ue)oe.putInt16(K.value.charCodeAt(ue));else K.type===asn1$a.Type.INTEGER&&K.value.length>1&&(K.value.charCodeAt(0)===0&&!(K.value.charCodeAt(1)&128)||K.value.charCodeAt(0)===255&&(K.value.charCodeAt(1)&128)===128)?oe.putBytes(K.value.substr(1)):oe.putBytes(K.value);if(J.putByte(ne),oe.length()<=127)J.putByte(oe.length()&127);else{var Ae=oe.length(),pe="";do pe+=String.fromCharCode(Ae&255),Ae=Ae>>>8;while(Ae>0);J.putByte(pe.length|128);for(var ue=pe.length-1;ue>=0;--ue)J.putByte(pe.charCodeAt(ue))}return J.putBuffer(oe),J};asn1$a.oidToDer=function(K){var J=K.split("."),ne=forge$x.util.createBuffer();ne.putByte(40*parseInt(J[0],10)+parseInt(J[1],10));for(var oe,ce,ue,Ae,pe=2;pe<J.length;++pe){oe=!0,ce=[],ue=parseInt(J[pe],10);do Ae=ue&127,ue=ue>>>7,oe||(Ae|=128),ce.push(Ae),oe=!1;while(ue>0);for(var ve=ce.length-1;ve>=0;--ve)ne.putByte(ce[ve])}return ne};asn1$a.derToOid=function(K){var J;typeof K=="string"&&(K=forge$x.util.createBuffer(K));var ne=K.getByte();J=Math.floor(ne/40)+"."+ne%40;for(var oe=0;K.length()>0;)ne=K.getByte(),oe=oe<<7,ne&128?oe+=ne&127:(J+="."+(oe+ne),oe=0);return J};asn1$a.utcTimeToDate=function(K){var J=new Date,ne=parseInt(K.substr(0,2),10);ne=ne>=50?1900+ne:2e3+ne;var oe=parseInt(K.substr(2,2),10)-1,ce=parseInt(K.substr(4,2),10),ue=parseInt(K.substr(6,2),10),Ae=parseInt(K.substr(8,2),10),pe=0;if(K.length>11){var ve=K.charAt(10),me=10;ve!=="+"&&ve!=="-"&&(pe=parseInt(K.substr(10,2),10),me+=2)}if(J.setUTCFullYear(ne,oe,ce),J.setUTCHours(ue,Ae,pe,0),me&&(ve=K.charAt(me),ve==="+"||ve==="-")){var ge=parseInt(K.substr(me+1,2),10),ye=parseInt(K.substr(me+4,2),10),xe=ge*60+ye;xe*=6e4,ve==="+"?J.setTime(+J-xe):J.setTime(+J+xe)}return J};asn1$a.generalizedTimeToDate=function(K){var J=new Date,ne=parseInt(K.substr(0,4),10),oe=parseInt(K.substr(4,2),10)-1,ce=parseInt(K.substr(6,2),10),ue=parseInt(K.substr(8,2),10),Ae=parseInt(K.substr(10,2),10),pe=parseInt(K.substr(12,2),10),ve=0,me=0,ge=!1;K.charAt(K.length-1)==="Z"&&(ge=!0);var ye=K.length-5,xe=K.charAt(ye);if(xe==="+"||xe==="-"){var _e=parseInt(K.substr(ye+1,2),10),$e=parseInt(K.substr(ye+4,2),10);me=_e*60+$e,me*=6e4,xe==="+"&&(me*=-1),ge=!0}return K.charAt(14)==="."&&(ve=parseFloat(K.substr(14),10)*1e3),ge?(J.setUTCFullYear(ne,oe,ce),J.setUTCHours(ue,Ae,pe,ve),J.setTime(+J+me)):(J.setFullYear(ne,oe,ce),J.setHours(ue,Ae,pe,ve)),J};asn1$a.dateToUtcTime=function(K){if(typeof K=="string")return K;var J="",ne=[];ne.push((""+K.getUTCFullYear()).substr(2)),ne.push(""+(K.getUTCMonth()+1)),ne.push(""+K.getUTCDate()),ne.push(""+K.getUTCHours()),ne.push(""+K.getUTCMinutes()),ne.push(""+K.getUTCSeconds());for(var oe=0;oe<ne.length;++oe)ne[oe].length<2&&(J+="0"),J+=ne[oe];return J+="Z",J};asn1$a.dateToGeneralizedTime=function(K){if(typeof K=="string")return K;var J="",ne=[];ne.push(""+K.getUTCFullYear()),ne.push(""+(K.getUTCMonth()+1)),ne.push(""+K.getUTCDate()),ne.push(""+K.getUTCHours()),ne.push(""+K.getUTCMinutes()),ne.push(""+K.getUTCSeconds());for(var oe=0;oe<ne.length;++oe)ne[oe].length<2&&(J+="0"),J+=ne[oe];return J+="Z",J};asn1$a.integerToDer=function(K){var J=forge$x.util.createBuffer();if(K>=-128&&K<128)return J.putSignedInt(K,8);if(K>=-32768&&K<32768)return J.putSignedInt(K,16);if(K>=-8388608&&K<8388608)return J.putSignedInt(K,24);if(K>=-2147483648&&K<2147483648)return J.putSignedInt(K,32);var ne=new Error("Integer too large; max is 32-bits.");throw ne.integer=K,ne};asn1$a.derToInteger=function(K){typeof K=="string"&&(K=forge$x.util.createBuffer(K));var J=K.length()*8;if(J>32)throw new Error("Integer too large; max is 32-bits.");return K.getSignedInt(J)};asn1$a.validate=function(K,J,ne,oe){var ce=!1;if((K.tagClass===J.tagClass||typeof J.tagClass>"u")&&(K.type===J.type||typeof J.type>"u"))if(K.constructed===J.constructed||typeof J.constructed>"u"){if(ce=!0,J.value&&forge$x.util.isArray(J.value))for(var ue=0,Ae=0;ce&&Ae<J.value.length;++Ae)ce=J.value[Ae].optional||!1,K.value[ue]&&(ce=asn1$a.validate(K.value[ue],J.value[Ae],ne,oe),ce?++ue:J.value[Ae].optional&&(ce=!0)),!ce&&oe&&oe.push("["+J.name+'] Tag class "'+J.tagClass+'", type "'+J.type+'" expected value length "'+J.value.length+'", got "'+K.value.length+'"');if(ce&&ne&&(J.capture&&(ne[J.capture]=K.value),J.captureAsn1&&(ne[J.captureAsn1]=K),J.captureBitStringContents&&"bitStringContents"in K&&(ne[J.captureBitStringContents]=K.bitStringContents),J.captureBitStringValue&&"bitStringContents"in K))if(K.bitStringContents.length<2)ne[J.captureBitStringValue]="";else{var pe=K.bitStringContents.charCodeAt(0);if(pe!==0)throw new Error("captureBitStringValue only supported for zero unused bits");ne[J.captureBitStringValue]=K.bitStringContents.slice(1)}}else oe&&oe.push("["+J.name+'] Expected constructed "'+J.constructed+'", got "'+K.constructed+'"');else oe&&(K.tagClass!==J.tagClass&&oe.push("["+J.name+'] Expected tag class "'+J.tagClass+'", got "'+K.tagClass+'"'),K.type!==J.type&&oe.push("["+J.name+'] Expected type "'+J.type+'", got "'+K.type+'"'));return ce};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$a.prettyPrint=function(K,J,ne){var oe="";J=J||0,ne=ne||2,J>0&&(oe+=`
`);for(var ce="",ue=0;ue<J*ne;++ue)ce+=" ";switch(oe+=ce+"Tag: ",K.tagClass){case asn1$a.Class.UNIVERSAL:oe+="Universal:";break;case asn1$a.Class.APPLICATION:oe+="Application:";break;case asn1$a.Class.CONTEXT_SPECIFIC:oe+="Context-Specific:";break;case asn1$a.Class.PRIVATE:oe+="Private:";break}if(K.tagClass===asn1$a.Class.UNIVERSAL)switch(oe+=K.type,K.type){case asn1$a.Type.NONE:oe+=" (None)";break;case asn1$a.Type.BOOLEAN:oe+=" (Boolean)";break;case asn1$a.Type.INTEGER:oe+=" (Integer)";break;case asn1$a.Type.BITSTRING:oe+=" (Bit string)";break;case asn1$a.Type.OCTETSTRING:oe+=" (Octet string)";break;case asn1$a.Type.NULL:oe+=" (Null)";break;case asn1$a.Type.OID:oe+=" (Object Identifier)";break;case asn1$a.Type.ODESC:oe+=" (Object Descriptor)";break;case asn1$a.Type.EXTERNAL:oe+=" (External or Instance of)";break;case asn1$a.Type.REAL:oe+=" (Real)";break;case asn1$a.Type.ENUMERATED:oe+=" (Enumerated)";break;case asn1$a.Type.EMBEDDED:oe+=" (Embedded PDV)";break;case asn1$a.Type.UTF8:oe+=" (UTF8)";break;case asn1$a.Type.ROID:oe+=" (Relative Object Identifier)";break;case asn1$a.Type.SEQUENCE:oe+=" (Sequence)";break;case asn1$a.Type.SET:oe+=" (Set)";break;case asn1$a.Type.PRINTABLESTRING:oe+=" (Printable String)";break;case asn1$a.Type.IA5String:oe+=" (IA5String (ASCII))";break;case asn1$a.Type.UTCTIME:oe+=" (UTC time)";break;case asn1$a.Type.GENERALIZEDTIME:oe+=" (Generalized time)";break;case asn1$a.Type.BMPSTRING:oe+=" (BMP String)";break}else oe+=K.type;if(oe+=`
`,oe+=ce+"Constructed: "+K.constructed+`
`,K.composed){for(var Ae=0,pe="",ue=0;ue<K.value.length;++ue)K.value[ue]!==void 0&&(Ae+=1,pe+=asn1$a.prettyPrint(K.value[ue],J+1,ne),ue+1<K.value.length&&(pe+=","));oe+=ce+"Sub values: "+Ae+pe}else{if(oe+=ce+"Value: ",K.type===asn1$a.Type.OID){var ve=asn1$a.derToOid(K.value);oe+=ve,forge$x.pki&&forge$x.pki.oids&&ve in forge$x.pki.oids&&(oe+=" ("+forge$x.pki.oids[ve]+") ")}if(K.type===asn1$a.Type.INTEGER)try{oe+=asn1$a.derToInteger(K.value)}catch{oe+="0x"+forge$x.util.bytesToHex(K.value)}else if(K.type===asn1$a.Type.BITSTRING){if(K.value.length>1?oe+="0x"+forge$x.util.bytesToHex(K.value.slice(1)):oe+="(none)",K.value.length>0){var me=K.value.charCodeAt(0);me==1?oe+=" (1 unused bit shown)":me>1&&(oe+=" ("+me+" unused bits shown)")}}else if(K.type===asn1$a.Type.OCTETSTRING)_nonLatinRegex.test(K.value)||(oe+="("+K.value+") "),oe+="0x"+forge$x.util.bytesToHex(K.value);else if(K.type===asn1$a.Type.UTF8)try{oe+=forge$x.util.decodeUtf8(K.value)}catch(ge){if(ge.message==="URI malformed")oe+="0x"+forge$x.util.bytesToHex(K.value)+" (malformed UTF8)";else throw ge}else K.type===asn1$a.Type.PRINTABLESTRING||K.type===asn1$a.Type.IA5String?oe+=K.value:_nonLatinRegex.test(K.value)?oe+="0x"+forge$x.util.bytesToHex(K.value):K.value.length===0?oe+="[null]":oe+=K.value}return oe};var forge$w=forge$D;forge$w.md=forge$w.md||{};forge$w.md.algorithms=forge$w.md.algorithms||{};var forge$v=forge$D,hmac$1=forge$v.hmac=forge$v.hmac||{};hmac$1.create=function(){var K=null,J=null,ne=null,oe=null,ce={};return ce.start=function(ue,Ae){if(ue!==null)if(typeof ue=="string")if(ue=ue.toLowerCase(),ue in forge$v.md.algorithms)J=forge$v.md.algorithms[ue].create();else throw new Error('Unknown hash algorithm "'+ue+'"');else J=ue;if(Ae===null)Ae=K;else{if(typeof Ae=="string")Ae=forge$v.util.createBuffer(Ae);else if(forge$v.util.isArray(Ae)){var pe=Ae;Ae=forge$v.util.createBuffer();for(var ve=0;ve<pe.length;++ve)Ae.putByte(pe[ve])}var me=Ae.length();me>J.blockLength&&(J.start(),J.update(Ae.bytes()),Ae=J.digest()),ne=forge$v.util.createBuffer(),oe=forge$v.util.createBuffer(),me=Ae.length();for(var ve=0;ve<me;++ve){var pe=Ae.at(ve);ne.putByte(54^pe),oe.putByte(92^pe)}if(me<J.blockLength)for(var pe=J.blockLength-me,ve=0;ve<pe;++ve)ne.putByte(54),oe.putByte(92);K=Ae,ne=ne.bytes(),oe=oe.bytes()}J.start(),J.update(ne)},ce.update=function(ue){J.update(ue)},ce.getMac=function(){var ue=J.digest().bytes();return J.start(),J.update(oe),J.update(ue),J.digest()},ce.digest=ce.getMac,ce};var forge$u=forge$D,md5$1=forge$u.md5=forge$u.md5||{};forge$u.md.md5=forge$u.md.algorithms.md5=md5$1;md5$1.create=function(){_initialized$3||_init$3();var K=null,J=forge$u.util.createBuffer(),ne=new Array(16),oe={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return oe.start=function(){oe.messageLength=0,oe.fullMessageLength=oe.messageLength64=[];for(var ce=oe.messageLengthSize/4,ue=0;ue<ce;++ue)oe.fullMessageLength.push(0);return J=forge$u.util.createBuffer(),K={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},oe},oe.start(),oe.update=function(ce,ue){ue==="utf8"&&(ce=forge$u.util.encodeUtf8(ce));var Ae=ce.length;oe.messageLength+=Ae,Ae=[Ae/4294967296>>>0,Ae>>>0];for(var pe=oe.fullMessageLength.length-1;pe>=0;--pe)oe.fullMessageLength[pe]+=Ae[1],Ae[1]=Ae[0]+(oe.fullMessageLength[pe]/4294967296>>>0),oe.fullMessageLength[pe]=oe.fullMessageLength[pe]>>>0,Ae[0]=Ae[1]/4294967296>>>0;return J.putBytes(ce),_update$3(K,ne,J),(J.read>2048||J.length()===0)&&J.compact(),oe},oe.digest=function(){var ce=forge$u.util.createBuffer();ce.putBytes(J.bytes());var ue=oe.fullMessageLength[oe.fullMessageLength.length-1]+oe.messageLengthSize,Ae=ue&oe.blockLength-1;ce.putBytes(_padding$3.substr(0,oe.blockLength-Ae));for(var pe,ve=0,me=oe.fullMessageLength.length-1;me>=0;--me)pe=oe.fullMessageLength[me]*8+ve,ve=pe/4294967296>>>0,ce.putInt32Le(pe>>>0);var ge={h0:K.h0,h1:K.h1,h2:K.h2,h3:K.h3};_update$3(ge,ne,ce);var ye=forge$u.util.createBuffer();return ye.putInt32Le(ge.h0),ye.putInt32Le(ge.h1),ye.putInt32Le(ge.h2),ye.putInt32Le(ge.h3),ye},oe};var _padding$3=null,_g=null,_r=null,_k$2=null,_initialized$3=!1;function _init$3(){_padding$3="",_padding$3+=forge$u.util.fillString("\0",64),_g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],_r=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],_k$2=new Array(64);for(var K=0;K<64;++K)_k$2[K]=Math.floor(Math.abs(Math.sin(K+1))*4294967296);_initialized$3=!0}function _update$3(K,J,ne){for(var oe,ce,ue,Ae,pe,ve,me,ge,ye=ne.length();ye>=64;){for(ce=K.h0,ue=K.h1,Ae=K.h2,pe=K.h3,ge=0;ge<16;++ge)J[ge]=ne.getInt32Le(),ve=pe^ue&(Ae^pe),oe=ce+ve+_k$2[ge]+J[ge],me=_r[ge],ce=pe,pe=Ae,Ae=ue,ue+=oe<<me|oe>>>32-me;for(;ge<32;++ge)ve=Ae^pe&(ue^Ae),oe=ce+ve+_k$2[ge]+J[_g[ge]],me=_r[ge],ce=pe,pe=Ae,Ae=ue,ue+=oe<<me|oe>>>32-me;for(;ge<48;++ge)ve=ue^Ae^pe,oe=ce+ve+_k$2[ge]+J[_g[ge]],me=_r[ge],ce=pe,pe=Ae,Ae=ue,ue+=oe<<me|oe>>>32-me;for(;ge<64;++ge)ve=Ae^(ue|~pe),oe=ce+ve+_k$2[ge]+J[_g[ge]],me=_r[ge],ce=pe,pe=Ae,Ae=ue,ue+=oe<<me|oe>>>32-me;K.h0=K.h0+ce|0,K.h1=K.h1+ue|0,K.h2=K.h2+Ae|0,K.h3=K.h3+pe|0,ye-=64}}var forge$t=forge$D,pem$2=forge$t.pem=forge$t.pem||{};pem$2.encode=function(K,J){J=J||{};var ne="-----BEGIN "+K.type+`-----\r
`,oe;if(K.procType&&(oe={name:"Proc-Type",values:[String(K.procType.version),K.procType.type]},ne+=foldHeader(oe)),K.contentDomain&&(oe={name:"Content-Domain",values:[K.contentDomain]},ne+=foldHeader(oe)),K.dekInfo&&(oe={name:"DEK-Info",values:[K.dekInfo.algorithm]},K.dekInfo.parameters&&oe.values.push(K.dekInfo.parameters),ne+=foldHeader(oe)),K.headers)for(var ce=0;ce<K.headers.length;++ce)ne+=foldHeader(K.headers[ce]);return K.procType&&(ne+=`\r
`),ne+=forge$t.util.encode64(K.body,J.maxline||64)+`\r
`,ne+="-----END "+K.type+`-----\r
`,ne};pem$2.decode=function(K){for(var J=[],ne=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,oe=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,ce=/\r?\n/,ue;ue=ne.exec(K),!!ue;){var Ae=ue[1];Ae==="NEW CERTIFICATE REQUEST"&&(Ae="CERTIFICATE REQUEST");var pe={type:Ae,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$t.util.decode64(ue[3])};if(J.push(pe),!!ue[2]){for(var ve=ue[2].split(ce),me=0;ue&&me<ve.length;){for(var ge=ve[me].replace(/\s+$/,""),ye=me+1;ye<ve.length;++ye){var xe=ve[ye];if(!/\s/.test(xe[0]))break;ge+=xe,me=ye}if(ue=ge.match(oe),ue){for(var _e={name:ue[1],values:[]},$e=ue[2].split(","),Ie=0;Ie<$e.length;++Ie)_e.values.push(ltrim($e[Ie]));if(pe.procType)if(!pe.contentDomain&&_e.name==="Content-Domain")pe.contentDomain=$e[0]||"";else if(!pe.dekInfo&&_e.name==="DEK-Info"){if(_e.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');pe.dekInfo={algorithm:$e[0],parameters:$e[1]||null}}else pe.headers.push(_e);else{if(_e.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(_e.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');pe.procType={version:$e[0],type:$e[1]}}}++me}if(pe.procType==="ENCRYPTED"&&!pe.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(J.length===0)throw new Error("Invalid PEM formatted message.");return J};function foldHeader(K){for(var J=K.name+": ",ne=[],oe=function(ve,me){return" "+me},ce=0;ce<K.values.length;++ce)ne.push(K.values[ce].replace(/^(\S+\r\n)/,oe));J+=ne.join(",")+`\r
`;for(var ue=0,Ae=-1,ce=0;ce<J.length;++ce,++ue)if(ue>65&&Ae!==-1){var pe=J[Ae];pe===","?(++Ae,J=J.substr(0,Ae)+`\r
 `+J.substr(Ae)):J=J.substr(0,Ae)+`\r
`+pe+J.substr(Ae+1),ue=ce-Ae-1,Ae=-1,++ce}else(J[ce]===" "||J[ce]==="	"||J[ce]===",")&&(Ae=ce);return J}function ltrim(K){return K.replace(/^\s+/,"")}var forge$s=forge$D;forge$s.des=forge$s.des||{};forge$s.des.startEncrypting=function(K,J,ne,oe){var ce=_createCipher({key:K,output:ne,decrypt:!1,mode:oe||(J===null?"ECB":"CBC")});return ce.start(J),ce};forge$s.des.createEncryptionCipher=function(K,J){return _createCipher({key:K,output:null,decrypt:!1,mode:J})};forge$s.des.startDecrypting=function(K,J,ne,oe){var ce=_createCipher({key:K,output:ne,decrypt:!0,mode:oe||(J===null?"ECB":"CBC")});return ce.start(J),ce};forge$s.des.createDecryptionCipher=function(K,J){return _createCipher({key:K,output:null,decrypt:!0,mode:J})};forge$s.des.Algorithm=function(K,J){var ne=this;ne.name=K,ne.mode=new J({blockSize:8,cipher:{encrypt:function(oe,ce){return _updateBlock(ne._keys,oe,ce,!1)},decrypt:function(oe,ce){return _updateBlock(ne._keys,oe,ce,!0)}}}),ne._init=!1};forge$s.des.Algorithm.prototype.initialize=function(K){if(!this._init){var J=forge$s.util.createBuffer(K.key);if(this.name.indexOf("3DES")===0&&J.length()!==24)throw new Error("Invalid Triple-DES key size: "+J.length()*8);this._keys=_createKeys(J),this._init=!0}};registerAlgorithm("DES-ECB",forge$s.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$s.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$s.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$s.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$s.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$s.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$s.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$s.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$s.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$s.cipher.modes.ctr);function registerAlgorithm(K,J){var ne=function(){return new forge$s.des.Algorithm(K,J)};forge$s.cipher.registerAlgorithm(K,ne)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(K){for(var J=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],ne=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],oe=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],ce=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],ue=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],Ae=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],pe=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],ve=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],me=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],ge=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],ye=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],xe=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],_e=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],$e=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],Ie=K.length()>8?3:1,Fe=[],ke=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],je=0,We,ze=0;ze<Ie;ze++){var Xe=K.getInt32(),Je=K.getInt32();We=(Xe>>>4^Je)&252645135,Je^=We,Xe^=We<<4,We=(Je>>>-16^Xe)&65535,Xe^=We,Je^=We<<-16,We=(Xe>>>2^Je)&858993459,Je^=We,Xe^=We<<2,We=(Je>>>-16^Xe)&65535,Xe^=We,Je^=We<<-16,We=(Xe>>>1^Je)&1431655765,Je^=We,Xe^=We<<1,We=(Je>>>8^Xe)&16711935,Xe^=We,Je^=We<<8,We=(Xe>>>1^Je)&1431655765,Je^=We,Xe^=We<<1,We=Xe<<8|Je>>>20&240,Xe=Je<<24|Je<<8&16711680|Je>>>8&65280|Je>>>24&240,Je=We;for(var nt=0;nt<ke.length;++nt){ke[nt]?(Xe=Xe<<2|Xe>>>26,Je=Je<<2|Je>>>26):(Xe=Xe<<1|Xe>>>27,Je=Je<<1|Je>>>27),Xe&=-15,Je&=-15;var et=J[Xe>>>28]|ne[Xe>>>24&15]|oe[Xe>>>20&15]|ce[Xe>>>16&15]|ue[Xe>>>12&15]|Ae[Xe>>>8&15]|pe[Xe>>>4&15],tt=ve[Je>>>28]|me[Je>>>24&15]|ge[Je>>>20&15]|ye[Je>>>16&15]|xe[Je>>>12&15]|_e[Je>>>8&15]|$e[Je>>>4&15];We=(tt>>>16^et)&65535,Fe[je++]=et^We,Fe[je++]=tt^We<<16}}return Fe}function _updateBlock(K,J,ne,oe){var ce=K.length===32?3:9,ue;ce===3?ue=oe?[30,-2,-2]:[0,32,2]:ue=oe?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var Ae,pe=J[0],ve=J[1];Ae=(pe>>>4^ve)&252645135,ve^=Ae,pe^=Ae<<4,Ae=(pe>>>16^ve)&65535,ve^=Ae,pe^=Ae<<16,Ae=(ve>>>2^pe)&858993459,pe^=Ae,ve^=Ae<<2,Ae=(ve>>>8^pe)&16711935,pe^=Ae,ve^=Ae<<8,Ae=(pe>>>1^ve)&1431655765,ve^=Ae,pe^=Ae<<1,pe=pe<<1|pe>>>31,ve=ve<<1|ve>>>31;for(var me=0;me<ce;me+=3){for(var ge=ue[me+1],ye=ue[me+2],xe=ue[me];xe!=ge;xe+=ye){var _e=ve^K[xe],$e=(ve>>>4|ve<<28)^K[xe+1];Ae=pe,pe=ve,ve=Ae^(spfunction2[_e>>>24&63]|spfunction4[_e>>>16&63]|spfunction6[_e>>>8&63]|spfunction8[_e&63]|spfunction1[$e>>>24&63]|spfunction3[$e>>>16&63]|spfunction5[$e>>>8&63]|spfunction7[$e&63])}Ae=pe,pe=ve,ve=Ae}pe=pe>>>1|pe<<31,ve=ve>>>1|ve<<31,Ae=(pe>>>1^ve)&1431655765,ve^=Ae,pe^=Ae<<1,Ae=(ve>>>8^pe)&16711935,pe^=Ae,ve^=Ae<<8,Ae=(ve>>>2^pe)&858993459,pe^=Ae,ve^=Ae<<2,Ae=(pe>>>16^ve)&65535,ve^=Ae,pe^=Ae<<16,Ae=(pe>>>4^ve)&252645135,ve^=Ae,pe^=Ae<<4,ne[0]=pe,ne[1]=ve}function _createCipher(K){K=K||{};var J=(K.mode||"CBC").toUpperCase(),ne="DES-"+J,oe;K.decrypt?oe=forge$s.cipher.createDecipher(ne,K.key):oe=forge$s.cipher.createCipher(ne,K.key);var ce=oe.start;return oe.start=function(ue,Ae){var pe=null;Ae instanceof forge$s.util.ByteBuffer&&(pe=Ae,Ae={}),Ae=Ae||{},Ae.output=pe,Ae.iv=ue,ce.call(oe,Ae)},oe}var cryptoBrowserify={},browser$a={exports:{}},hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$a.exports;hasRequiredBrowser$a=1;var K=65536,J=4294967295;function ne(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var oe=requireSafeBuffer$1().Buffer,ce=commonjsGlobal.crypto||commonjsGlobal.msCrypto;ce&&ce.getRandomValues?browser$a.exports=ue:browser$a.exports=ne;function ue(Ae,pe){if(Ae>J)throw new RangeError("requested too many random bytes");var ve=oe.allocUnsafe(Ae);if(Ae>0)if(Ae>K)for(var me=0;me<Ae;me+=K)ce.getRandomValues(ve.slice(me,me+K));else ce.getRandomValues(ve);return typeof pe=="function"?process$1.nextTick(function(){pe(null,ve)}):ve}return browser$a.exports}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var K=requireSafeBuffer$1().Buffer,J=requireStreamBrowserify().Transform,ne=requireInherits_browser();function oe(ue,Ae){if(!K.isBuffer(ue)&&typeof ue!="string")throw new TypeError(Ae+" must be a string or a buffer")}function ce(ue){J.call(this),this._block=K.allocUnsafe(ue),this._blockSize=ue,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return ne(ce,J),ce.prototype._transform=function(ue,Ae,pe){var ve=null;try{this.update(ue,Ae)}catch(me){ve=me}pe(ve)},ce.prototype._flush=function(ue){var Ae=null;try{this.push(this.digest())}catch(pe){Ae=pe}ue(Ae)},ce.prototype.update=function(ue,Ae){if(oe(ue,"Data"),this._finalized)throw new Error("Digest already called");K.isBuffer(ue)||(ue=K.from(ue,Ae));for(var pe=this._block,ve=0;this._blockOffset+ue.length-ve>=this._blockSize;){for(var me=this._blockOffset;me<this._blockSize;)pe[me++]=ue[ve++];this._update(),this._blockOffset=0}for(;ve<ue.length;)pe[this._blockOffset++]=ue[ve++];for(var ge=0,ye=ue.length*8;ye>0;++ge)this._length[ge]+=ye,ye=this._length[ge]/4294967296|0,ye>0&&(this._length[ge]-=4294967296*ye);return this},ce.prototype._update=function(){throw new Error("_update is not implemented")},ce.prototype.digest=function(ue){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var Ae=this._digest();ue!==void 0&&(Ae=Ae.toString(ue)),this._block.fill(0),this._blockOffset=0;for(var pe=0;pe<4;++pe)this._length[pe]=0;return Ae},ce.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=ce,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var K=requireInherits_browser(),J=requireHashBase(),ne=requireSafeBuffer$1().Buffer,oe=new Array(16);function ce(){J.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}K(ce,J),ce.prototype._update=function(){for(var ge=oe,ye=0;ye<16;++ye)ge[ye]=this._block.readInt32LE(ye*4);var xe=this._a,_e=this._b,$e=this._c,Ie=this._d;xe=Ae(xe,_e,$e,Ie,ge[0],3614090360,7),Ie=Ae(Ie,xe,_e,$e,ge[1],3905402710,12),$e=Ae($e,Ie,xe,_e,ge[2],606105819,17),_e=Ae(_e,$e,Ie,xe,ge[3],3250441966,22),xe=Ae(xe,_e,$e,Ie,ge[4],4118548399,7),Ie=Ae(Ie,xe,_e,$e,ge[5],1200080426,12),$e=Ae($e,Ie,xe,_e,ge[6],2821735955,17),_e=Ae(_e,$e,Ie,xe,ge[7],4249261313,22),xe=Ae(xe,_e,$e,Ie,ge[8],1770035416,7),Ie=Ae(Ie,xe,_e,$e,ge[9],2336552879,12),$e=Ae($e,Ie,xe,_e,ge[10],4294925233,17),_e=Ae(_e,$e,Ie,xe,ge[11],2304563134,22),xe=Ae(xe,_e,$e,Ie,ge[12],1804603682,7),Ie=Ae(Ie,xe,_e,$e,ge[13],4254626195,12),$e=Ae($e,Ie,xe,_e,ge[14],2792965006,17),_e=Ae(_e,$e,Ie,xe,ge[15],1236535329,22),xe=pe(xe,_e,$e,Ie,ge[1],4129170786,5),Ie=pe(Ie,xe,_e,$e,ge[6],3225465664,9),$e=pe($e,Ie,xe,_e,ge[11],643717713,14),_e=pe(_e,$e,Ie,xe,ge[0],3921069994,20),xe=pe(xe,_e,$e,Ie,ge[5],3593408605,5),Ie=pe(Ie,xe,_e,$e,ge[10],38016083,9),$e=pe($e,Ie,xe,_e,ge[15],3634488961,14),_e=pe(_e,$e,Ie,xe,ge[4],3889429448,20),xe=pe(xe,_e,$e,Ie,ge[9],568446438,5),Ie=pe(Ie,xe,_e,$e,ge[14],3275163606,9),$e=pe($e,Ie,xe,_e,ge[3],4107603335,14),_e=pe(_e,$e,Ie,xe,ge[8],1163531501,20),xe=pe(xe,_e,$e,Ie,ge[13],2850285829,5),Ie=pe(Ie,xe,_e,$e,ge[2],4243563512,9),$e=pe($e,Ie,xe,_e,ge[7],1735328473,14),_e=pe(_e,$e,Ie,xe,ge[12],2368359562,20),xe=ve(xe,_e,$e,Ie,ge[5],4294588738,4),Ie=ve(Ie,xe,_e,$e,ge[8],2272392833,11),$e=ve($e,Ie,xe,_e,ge[11],1839030562,16),_e=ve(_e,$e,Ie,xe,ge[14],4259657740,23),xe=ve(xe,_e,$e,Ie,ge[1],2763975236,4),Ie=ve(Ie,xe,_e,$e,ge[4],1272893353,11),$e=ve($e,Ie,xe,_e,ge[7],4139469664,16),_e=ve(_e,$e,Ie,xe,ge[10],3200236656,23),xe=ve(xe,_e,$e,Ie,ge[13],681279174,4),Ie=ve(Ie,xe,_e,$e,ge[0],3936430074,11),$e=ve($e,Ie,xe,_e,ge[3],3572445317,16),_e=ve(_e,$e,Ie,xe,ge[6],76029189,23),xe=ve(xe,_e,$e,Ie,ge[9],3654602809,4),Ie=ve(Ie,xe,_e,$e,ge[12],3873151461,11),$e=ve($e,Ie,xe,_e,ge[15],530742520,16),_e=ve(_e,$e,Ie,xe,ge[2],3299628645,23),xe=me(xe,_e,$e,Ie,ge[0],4096336452,6),Ie=me(Ie,xe,_e,$e,ge[7],1126891415,10),$e=me($e,Ie,xe,_e,ge[14],2878612391,15),_e=me(_e,$e,Ie,xe,ge[5],4237533241,21),xe=me(xe,_e,$e,Ie,ge[12],1700485571,6),Ie=me(Ie,xe,_e,$e,ge[3],2399980690,10),$e=me($e,Ie,xe,_e,ge[10],4293915773,15),_e=me(_e,$e,Ie,xe,ge[1],2240044497,21),xe=me(xe,_e,$e,Ie,ge[8],1873313359,6),Ie=me(Ie,xe,_e,$e,ge[15],4264355552,10),$e=me($e,Ie,xe,_e,ge[6],2734768916,15),_e=me(_e,$e,Ie,xe,ge[13],1309151649,21),xe=me(xe,_e,$e,Ie,ge[4],4149444226,6),Ie=me(Ie,xe,_e,$e,ge[11],3174756917,10),$e=me($e,Ie,xe,_e,ge[2],718787259,15),_e=me(_e,$e,Ie,xe,ge[9],3951481745,21),this._a=this._a+xe|0,this._b=this._b+_e|0,this._c=this._c+$e|0,this._d=this._d+Ie|0},ce.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var ge=ne.allocUnsafe(16);return ge.writeInt32LE(this._a,0),ge.writeInt32LE(this._b,4),ge.writeInt32LE(this._c,8),ge.writeInt32LE(this._d,12),ge};function ue(ge,ye){return ge<<ye|ge>>>32-ye}function Ae(ge,ye,xe,_e,$e,Ie,Fe){return ue(ge+(ye&xe|~ye&_e)+$e+Ie|0,Fe)+ye|0}function pe(ge,ye,xe,_e,$e,Ie,Fe){return ue(ge+(ye&_e|xe&~_e)+$e+Ie|0,Fe)+ye|0}function ve(ge,ye,xe,_e,$e,Ie,Fe){return ue(ge+(ye^xe^_e)+$e+Ie|0,Fe)+ye|0}function me(ge,ye,xe,_e,$e,Ie,Fe){return ue(ge+(xe^(ye|~_e))+$e+Ie|0,Fe)+ye|0}return md5_js=ce,md5_js}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var K=require$$0$1.Buffer,J=requireInherits_browser(),ne=requireHashBase(),oe=new Array(16),ce=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ue=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ae=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],pe=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],ve=[0,1518500249,1859775393,2400959708,2840853838],me=[1352829926,1548603684,1836072691,2053994217,0];function ge(){ne.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}J(ge,ne),ge.prototype._update=function(){for(var ke=oe,je=0;je<16;++je)ke[je]=this._block.readInt32LE(je*4);for(var We=this._a|0,ze=this._b|0,Xe=this._c|0,Je=this._d|0,nt=this._e|0,et=this._a|0,tt=this._b|0,st=this._c|0,qe=this._d|0,Se=this._e|0,Re=0;Re<80;Re+=1){var Be,Ne;Re<16?(Be=xe(We,ze,Xe,Je,nt,ke[ce[Re]],ve[0],Ae[Re]),Ne=Fe(et,tt,st,qe,Se,ke[ue[Re]],me[0],pe[Re])):Re<32?(Be=_e(We,ze,Xe,Je,nt,ke[ce[Re]],ve[1],Ae[Re]),Ne=Ie(et,tt,st,qe,Se,ke[ue[Re]],me[1],pe[Re])):Re<48?(Be=$e(We,ze,Xe,Je,nt,ke[ce[Re]],ve[2],Ae[Re]),Ne=$e(et,tt,st,qe,Se,ke[ue[Re]],me[2],pe[Re])):Re<64?(Be=Ie(We,ze,Xe,Je,nt,ke[ce[Re]],ve[3],Ae[Re]),Ne=_e(et,tt,st,qe,Se,ke[ue[Re]],me[3],pe[Re])):(Be=Fe(We,ze,Xe,Je,nt,ke[ce[Re]],ve[4],Ae[Re]),Ne=xe(et,tt,st,qe,Se,ke[ue[Re]],me[4],pe[Re])),We=nt,nt=Je,Je=ye(Xe,10),Xe=ze,ze=Be,et=Se,Se=qe,qe=ye(st,10),st=tt,tt=Ne}var Ue=this._b+Xe+qe|0;this._b=this._c+Je+Se|0,this._c=this._d+nt+et|0,this._d=this._e+We+tt|0,this._e=this._a+ze+st|0,this._a=Ue},ge.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var ke=K.alloc?K.alloc(20):new K(20);return ke.writeInt32LE(this._a,0),ke.writeInt32LE(this._b,4),ke.writeInt32LE(this._c,8),ke.writeInt32LE(this._d,12),ke.writeInt32LE(this._e,16),ke};function ye(ke,je){return ke<<je|ke>>>32-je}function xe(ke,je,We,ze,Xe,Je,nt,et){return ye(ke+(je^We^ze)+Je+nt|0,et)+Xe|0}function _e(ke,je,We,ze,Xe,Je,nt,et){return ye(ke+(je&We|~je&ze)+Je+nt|0,et)+Xe|0}function $e(ke,je,We,ze,Xe,Je,nt,et){return ye(ke+((je|~We)^ze)+Je+nt|0,et)+Xe|0}function Ie(ke,je,We,ze,Xe,Je,nt,et){return ye(ke+(je&ze|We&~ze)+Je+nt|0,et)+Xe|0}function Fe(ke,je,We,ze,Xe,Je,nt,et){return ye(ke+(je^(We|~ze))+Je+nt|0,et)+Xe|0}return ripemd160=ge,ripemd160}var sha_js={exports:{}},hash$2,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$2;hasRequiredHash$1=1;var K=requireSafeBuffer$1().Buffer;function J(ne,oe){this._block=K.alloc(ne),this._finalSize=oe,this._blockSize=ne,this._len=0}return J.prototype.update=function(ne,oe){typeof ne=="string"&&(oe=oe||"utf8",ne=K.from(ne,oe));for(var ce=this._block,ue=this._blockSize,Ae=ne.length,pe=this._len,ve=0;ve<Ae;){for(var me=pe%ue,ge=Math.min(Ae-ve,ue-me),ye=0;ye<ge;ye++)ce[me+ye]=ne[ve+ye];pe+=ge,ve+=ge,pe%ue===0&&this._update(ce)}return this._len+=Ae,this},J.prototype.digest=function(ne){var oe=this._len%this._blockSize;this._block[oe]=128,this._block.fill(0,oe+1),oe>=this._finalSize&&(this._update(this._block),this._block.fill(0));var ce=this._len*8;if(ce<=4294967295)this._block.writeUInt32BE(ce,this._blockSize-4);else{var ue=(ce&4294967295)>>>0,Ae=(ce-ue)/4294967296;this._block.writeUInt32BE(Ae,this._blockSize-8),this._block.writeUInt32BE(ue,this._blockSize-4)}this._update(this._block);var pe=this._hash();return ne?pe.toString(ne):pe},J.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$2=J,hash$2}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var K=requireInherits_browser(),J=requireHash$1(),ne=requireSafeBuffer$1().Buffer,oe=[1518500249,1859775393,-1894007588,-899497514],ce=new Array(80);function ue(){this.init(),this._w=ce,J.call(this,64,56)}K(ue,J),ue.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Ae(me){return me<<5|me>>>27}function pe(me){return me<<30|me>>>2}function ve(me,ge,ye,xe){return me===0?ge&ye|~ge&xe:me===2?ge&ye|ge&xe|ye&xe:ge^ye^xe}return ue.prototype._update=function(me){for(var ge=this._w,ye=this._a|0,xe=this._b|0,_e=this._c|0,$e=this._d|0,Ie=this._e|0,Fe=0;Fe<16;++Fe)ge[Fe]=me.readInt32BE(Fe*4);for(;Fe<80;++Fe)ge[Fe]=ge[Fe-3]^ge[Fe-8]^ge[Fe-14]^ge[Fe-16];for(var ke=0;ke<80;++ke){var je=~~(ke/20),We=Ae(ye)+ve(je,xe,_e,$e)+Ie+ge[ke]+oe[je]|0;Ie=$e,$e=_e,_e=pe(xe),xe=ye,ye=We}this._a=ye+this._a|0,this._b=xe+this._b|0,this._c=_e+this._c|0,this._d=$e+this._d|0,this._e=Ie+this._e|0},ue.prototype._hash=function(){var me=ne.allocUnsafe(20);return me.writeInt32BE(this._a|0,0),me.writeInt32BE(this._b|0,4),me.writeInt32BE(this._c|0,8),me.writeInt32BE(this._d|0,12),me.writeInt32BE(this._e|0,16),me},sha$1=ue,sha$1}var sha1$1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var K=requireInherits_browser(),J=requireHash$1(),ne=requireSafeBuffer$1().Buffer,oe=[1518500249,1859775393,-1894007588,-899497514],ce=new Array(80);function ue(){this.init(),this._w=ce,J.call(this,64,56)}K(ue,J),ue.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Ae(ge){return ge<<1|ge>>>31}function pe(ge){return ge<<5|ge>>>27}function ve(ge){return ge<<30|ge>>>2}function me(ge,ye,xe,_e){return ge===0?ye&xe|~ye&_e:ge===2?ye&xe|ye&_e|xe&_e:ye^xe^_e}return ue.prototype._update=function(ge){for(var ye=this._w,xe=this._a|0,_e=this._b|0,$e=this._c|0,Ie=this._d|0,Fe=this._e|0,ke=0;ke<16;++ke)ye[ke]=ge.readInt32BE(ke*4);for(;ke<80;++ke)ye[ke]=Ae(ye[ke-3]^ye[ke-8]^ye[ke-14]^ye[ke-16]);for(var je=0;je<80;++je){var We=~~(je/20),ze=pe(xe)+me(We,_e,$e,Ie)+Fe+ye[je]+oe[We]|0;Fe=Ie,Ie=$e,$e=ve(_e),_e=xe,xe=ze}this._a=xe+this._a|0,this._b=_e+this._b|0,this._c=$e+this._c|0,this._d=Ie+this._d|0,this._e=Fe+this._e|0},ue.prototype._hash=function(){var ge=ne.allocUnsafe(20);return ge.writeInt32BE(this._a|0,0),ge.writeInt32BE(this._b|0,4),ge.writeInt32BE(this._c|0,8),ge.writeInt32BE(this._d|0,12),ge.writeInt32BE(this._e|0,16),ge},sha1$1=ue,sha1$1}var sha256$2,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$2;hasRequiredSha256=1;var K=requireInherits_browser(),J=requireHash$1(),ne=requireSafeBuffer$1().Buffer,oe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ce=new Array(64);function ue(){this.init(),this._w=ce,J.call(this,64,56)}K(ue,J),ue.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function Ae(xe,_e,$e){return $e^xe&(_e^$e)}function pe(xe,_e,$e){return xe&_e|$e&(xe|_e)}function ve(xe){return(xe>>>2|xe<<30)^(xe>>>13|xe<<19)^(xe>>>22|xe<<10)}function me(xe){return(xe>>>6|xe<<26)^(xe>>>11|xe<<21)^(xe>>>25|xe<<7)}function ge(xe){return(xe>>>7|xe<<25)^(xe>>>18|xe<<14)^xe>>>3}function ye(xe){return(xe>>>17|xe<<15)^(xe>>>19|xe<<13)^xe>>>10}return ue.prototype._update=function(xe){for(var _e=this._w,$e=this._a|0,Ie=this._b|0,Fe=this._c|0,ke=this._d|0,je=this._e|0,We=this._f|0,ze=this._g|0,Xe=this._h|0,Je=0;Je<16;++Je)_e[Je]=xe.readInt32BE(Je*4);for(;Je<64;++Je)_e[Je]=ye(_e[Je-2])+_e[Je-7]+ge(_e[Je-15])+_e[Je-16]|0;for(var nt=0;nt<64;++nt){var et=Xe+me(je)+Ae(je,We,ze)+oe[nt]+_e[nt]|0,tt=ve($e)+pe($e,Ie,Fe)|0;Xe=ze,ze=We,We=je,je=ke+et|0,ke=Fe,Fe=Ie,Ie=$e,$e=et+tt|0}this._a=$e+this._a|0,this._b=Ie+this._b|0,this._c=Fe+this._c|0,this._d=ke+this._d|0,this._e=je+this._e|0,this._f=We+this._f|0,this._g=ze+this._g|0,this._h=Xe+this._h|0},ue.prototype._hash=function(){var xe=ne.allocUnsafe(32);return xe.writeInt32BE(this._a,0),xe.writeInt32BE(this._b,4),xe.writeInt32BE(this._c,8),xe.writeInt32BE(this._d,12),xe.writeInt32BE(this._e,16),xe.writeInt32BE(this._f,20),xe.writeInt32BE(this._g,24),xe.writeInt32BE(this._h,28),xe},sha256$2=ue,sha256$2}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var K=requireInherits_browser(),J=requireSha256(),ne=requireHash$1(),oe=requireSafeBuffer$1().Buffer,ce=new Array(64);function ue(){this.init(),this._w=ce,ne.call(this,64,56)}return K(ue,J),ue.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},ue.prototype._hash=function(){var Ae=oe.allocUnsafe(28);return Ae.writeInt32BE(this._a,0),Ae.writeInt32BE(this._b,4),Ae.writeInt32BE(this._c,8),Ae.writeInt32BE(this._d,12),Ae.writeInt32BE(this._e,16),Ae.writeInt32BE(this._f,20),Ae.writeInt32BE(this._g,24),Ae},sha224$1=ue,sha224$1}var sha512$3,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$3;hasRequiredSha512=1;var K=requireInherits_browser(),J=requireHash$1(),ne=requireSafeBuffer$1().Buffer,oe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],ce=new Array(160);function ue(){this.init(),this._w=ce,J.call(this,128,112)}K(ue,J),ue.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ae(Ie,Fe,ke){return ke^Ie&(Fe^ke)}function pe(Ie,Fe,ke){return Ie&Fe|ke&(Ie|Fe)}function ve(Ie,Fe){return(Ie>>>28|Fe<<4)^(Fe>>>2|Ie<<30)^(Fe>>>7|Ie<<25)}function me(Ie,Fe){return(Ie>>>14|Fe<<18)^(Ie>>>18|Fe<<14)^(Fe>>>9|Ie<<23)}function ge(Ie,Fe){return(Ie>>>1|Fe<<31)^(Ie>>>8|Fe<<24)^Ie>>>7}function ye(Ie,Fe){return(Ie>>>1|Fe<<31)^(Ie>>>8|Fe<<24)^(Ie>>>7|Fe<<25)}function xe(Ie,Fe){return(Ie>>>19|Fe<<13)^(Fe>>>29|Ie<<3)^Ie>>>6}function _e(Ie,Fe){return(Ie>>>19|Fe<<13)^(Fe>>>29|Ie<<3)^(Ie>>>6|Fe<<26)}function $e(Ie,Fe){return Ie>>>0<Fe>>>0?1:0}return ue.prototype._update=function(Ie){for(var Fe=this._w,ke=this._ah|0,je=this._bh|0,We=this._ch|0,ze=this._dh|0,Xe=this._eh|0,Je=this._fh|0,nt=this._gh|0,et=this._hh|0,tt=this._al|0,st=this._bl|0,qe=this._cl|0,Se=this._dl|0,Re=this._el|0,Be=this._fl|0,Ne=this._gl|0,Ue=this._hl|0,Ge=0;Ge<32;Ge+=2)Fe[Ge]=Ie.readInt32BE(Ge*4),Fe[Ge+1]=Ie.readInt32BE(Ge*4+4);for(;Ge<160;Ge+=2){var Ye=Fe[Ge-30],Qe=Fe[Ge-15*2+1],Te=ge(Ye,Qe),Ke=ye(Qe,Ye);Ye=Fe[Ge-2*2],Qe=Fe[Ge-2*2+1];var rt=xe(Ye,Qe),it=_e(Qe,Ye),at=Fe[Ge-7*2],lt=Fe[Ge-7*2+1],ct=Fe[Ge-16*2],ot=Fe[Ge-16*2+1],ft=Ke+lt|0,dt=Te+at+$e(ft,Ke)|0;ft=ft+it|0,dt=dt+rt+$e(ft,it)|0,ft=ft+ot|0,dt=dt+ct+$e(ft,ot)|0,Fe[Ge]=dt,Fe[Ge+1]=ft}for(var mt=0;mt<160;mt+=2){dt=Fe[mt],ft=Fe[mt+1];var kt=pe(ke,je,We),wt=pe(tt,st,qe),Et=ve(ke,tt),Ot=ve(tt,ke),Rt=me(Xe,Re),gt=me(Re,Xe),$t=oe[mt],pt=oe[mt+1],vt=Ae(Xe,Je,nt),Mt=Ae(Re,Be,Ne),St=Ue+gt|0,_t=et+Rt+$e(St,Ue)|0;St=St+Mt|0,_t=_t+vt+$e(St,Mt)|0,St=St+pt|0,_t=_t+$t+$e(St,pt)|0,St=St+ft|0,_t=_t+dt+$e(St,ft)|0;var Xt=Ot+wt|0,Tt=Et+kt+$e(Xt,Ot)|0;et=nt,Ue=Ne,nt=Je,Ne=Be,Je=Xe,Be=Re,Re=Se+St|0,Xe=ze+_t+$e(Re,Se)|0,ze=We,Se=qe,We=je,qe=st,je=ke,st=tt,tt=St+Xt|0,ke=_t+Tt+$e(tt,St)|0}this._al=this._al+tt|0,this._bl=this._bl+st|0,this._cl=this._cl+qe|0,this._dl=this._dl+Se|0,this._el=this._el+Re|0,this._fl=this._fl+Be|0,this._gl=this._gl+Ne|0,this._hl=this._hl+Ue|0,this._ah=this._ah+ke+$e(this._al,tt)|0,this._bh=this._bh+je+$e(this._bl,st)|0,this._ch=this._ch+We+$e(this._cl,qe)|0,this._dh=this._dh+ze+$e(this._dl,Se)|0,this._eh=this._eh+Xe+$e(this._el,Re)|0,this._fh=this._fh+Je+$e(this._fl,Be)|0,this._gh=this._gh+nt+$e(this._gl,Ne)|0,this._hh=this._hh+et+$e(this._hl,Ue)|0},ue.prototype._hash=function(){var Ie=ne.allocUnsafe(64);function Fe(ke,je,We){Ie.writeInt32BE(ke,We),Ie.writeInt32BE(je,We+4)}return Fe(this._ah,this._al,0),Fe(this._bh,this._bl,8),Fe(this._ch,this._cl,16),Fe(this._dh,this._dl,24),Fe(this._eh,this._el,32),Fe(this._fh,this._fl,40),Fe(this._gh,this._gl,48),Fe(this._hh,this._hl,56),Ie},sha512$3=ue,sha512$3}var sha384$2,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$2;hasRequiredSha384=1;var K=requireInherits_browser(),J=requireSha512(),ne=requireHash$1(),oe=requireSafeBuffer$1().Buffer,ce=new Array(160);function ue(){this.init(),this._w=ce,ne.call(this,128,112)}return K(ue,J),ue.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},ue.prototype._hash=function(){var Ae=oe.allocUnsafe(48);function pe(ve,me,ge){Ae.writeInt32BE(ve,ge),Ae.writeInt32BE(me,ge+4)}return pe(this._ah,this._al,0),pe(this._bh,this._bl,8),pe(this._ch,this._cl,16),pe(this._dh,this._dl,24),pe(this._eh,this._el,32),pe(this._fh,this._fl,40),Ae},sha384$2=ue,sha384$2}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var K=sha_js.exports=function(ne){ne=ne.toLowerCase();var oe=K[ne];if(!oe)throw new Error(ne+" is not supported (we accept pull requests)");return new oe};return K.sha=requireSha$1(),K.sha1=requireSha1(),K.sha224=requireSha224(),K.sha256=requireSha256(),K.sha384=requireSha384(),K.sha512=requireSha512(),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var K=requireSafeBuffer$1().Buffer,J=requireStreamBrowserify().Transform,ne=requireString_decoder().StringDecoder,oe=requireInherits_browser();function ce(ue){J.call(this),this.hashMode=typeof ue=="string",this.hashMode?this[ue]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return oe(ce,J),ce.prototype.update=function(ue,Ae,pe){typeof ue=="string"&&(ue=K.from(ue,Ae));var ve=this._update(ue);return this.hashMode?this:(pe&&(ve=this._toString(ve,pe)),ve)},ce.prototype.setAutoPadding=function(){},ce.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},ce.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},ce.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},ce.prototype._transform=function(ue,Ae,pe){var ve;try{this.hashMode?this._update(ue):this.push(this._update(ue))}catch(me){ve=me}finally{pe(ve)}},ce.prototype._flush=function(ue){var Ae;try{this.push(this.__final())}catch(pe){Ae=pe}ue(Ae)},ce.prototype._finalOrDigest=function(ue){var Ae=this.__final()||K.alloc(0);return ue&&(Ae=this._toString(Ae,ue,!0)),Ae},ce.prototype._toString=function(ue,Ae,pe){if(this._decoder||(this._decoder=new ne(Ae),this._encoding=Ae),this._encoding!==Ae)throw new Error("can't switch encodings");var ve=this._decoder.write(ue);return pe&&(ve+=this._decoder.end()),ve},cipherBase=ce,cipherBase}var browser$9,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$9;hasRequiredBrowser$9=1;var K=requireInherits_browser(),J=requireMd5_js(),ne=requireRipemd160(),oe=requireSha_js(),ce=requireCipherBase();function ue(Ae){ce.call(this,"digest"),this._hash=Ae}return K(ue,ce),ue.prototype._update=function(Ae){this._hash.update(Ae)},ue.prototype._final=function(){return this._hash.digest()},browser$9=function(pe){return pe=pe.toLowerCase(),pe==="md5"?new J:pe==="rmd160"||pe==="ripemd160"?new ne:new ue(oe(pe))},browser$9}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var K=requireInherits_browser(),J=requireSafeBuffer$1().Buffer,ne=requireCipherBase(),oe=J.alloc(128),ce=64;function ue(Ae,pe){ne.call(this,"digest"),typeof pe=="string"&&(pe=J.from(pe)),this._alg=Ae,this._key=pe,pe.length>ce?pe=Ae(pe):pe.length<ce&&(pe=J.concat([pe,oe],ce));for(var ve=this._ipad=J.allocUnsafe(ce),me=this._opad=J.allocUnsafe(ce),ge=0;ge<ce;ge++)ve[ge]=pe[ge]^54,me[ge]=pe[ge]^92;this._hash=[ve]}return K(ue,ne),ue.prototype._update=function(Ae){this._hash.push(Ae)},ue.prototype._final=function(){var Ae=this._alg(J.concat(this._hash));return this._alg(J.concat([this._opad,Ae]))},legacy=ue,legacy}var md5,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var K=requireMd5_js();return md5=function(J){return new K().update(J).digest()},md5}var browser$8,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$8;hasRequiredBrowser$8=1;var K=requireInherits_browser(),J=requireLegacy(),ne=requireCipherBase(),oe=requireSafeBuffer$1().Buffer,ce=requireMd5(),ue=requireRipemd160(),Ae=requireSha_js(),pe=oe.alloc(128);function ve(me,ge){ne.call(this,"digest"),typeof ge=="string"&&(ge=oe.from(ge));var ye=me==="sha512"||me==="sha384"?128:64;if(this._alg=me,this._key=ge,ge.length>ye){var xe=me==="rmd160"?new ue:Ae(me);ge=xe.update(ge).digest()}else ge.length<ye&&(ge=oe.concat([ge,pe],ye));for(var _e=this._ipad=oe.allocUnsafe(ye),$e=this._opad=oe.allocUnsafe(ye),Ie=0;Ie<ye;Ie++)_e[Ie]=ge[Ie]^54,$e[Ie]=ge[Ie]^92;this._hash=me==="rmd160"?new ue:Ae(me),this._hash.update(_e)}return K(ve,ne),ve.prototype._update=function(me){this._hash.update(me)},ve.prototype._final=function(){var me=this._hash.digest(),ge=this._alg==="rmd160"?new ue:Ae(this._alg);return ge.update(this._opad).update(me).digest()},browser$8=function(ge,ye){return ge=ge.toLowerCase(),ge==="rmd160"||ge==="ripemd160"?new ve("rmd160",ye):ge==="md5"?new J(ce,ye):new ve(ge,ye)},browser$8}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$1={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$2={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$1,sha224,sha384:sha384$1,sha512:sha512$2,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$7={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var K=Math.pow(2,30)-1;return precondition=function(J,ne){if(typeof J!="number")throw new TypeError("Iterations not a number");if(J<0)throw new TypeError("Bad iterations");if(typeof ne!="number")throw new TypeError("Key length not a number");if(ne<0||ne>K||ne!==ne)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var K;if(commonjsGlobal.process&&commonjsGlobal.process.browser)K="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var J=parseInt(process$1.version.split(".")[0].slice(1),10);K=J>=6?"utf-8":"binary"}else K="utf-8";return defaultEncoding_1=K,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var K=requireSafeBuffer$1().Buffer;return toBuffer=function(J,ne,oe){if(K.isBuffer(J))return J;if(typeof J=="string")return K.from(J,ne);if(ArrayBuffer.isView(J))return K.from(J.buffer);throw new TypeError(oe+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var K=requireMd5(),J=requireRipemd160(),ne=requireSha_js(),oe=requireSafeBuffer$1().Buffer,ce=requirePrecondition(),ue=requireDefaultEncoding(),Ae=requireToBuffer(),pe=oe.alloc(128),ve={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function me(xe,_e,$e){var Ie=ge(xe),Fe=xe==="sha512"||xe==="sha384"?128:64;_e.length>Fe?_e=Ie(_e):_e.length<Fe&&(_e=oe.concat([_e,pe],Fe));for(var ke=oe.allocUnsafe(Fe+ve[xe]),je=oe.allocUnsafe(Fe+ve[xe]),We=0;We<Fe;We++)ke[We]=_e[We]^54,je[We]=_e[We]^92;var ze=oe.allocUnsafe(Fe+$e+4);ke.copy(ze,0,0,Fe),this.ipad1=ze,this.ipad2=ke,this.opad=je,this.alg=xe,this.blocksize=Fe,this.hash=Ie,this.size=ve[xe]}me.prototype.run=function(xe,_e){xe.copy(_e,this.blocksize);var $e=this.hash(_e);return $e.copy(this.opad,this.blocksize),this.hash(this.opad)};function ge(xe){function _e(Ie){return ne(xe).update(Ie).digest()}function $e(Ie){return new J().update(Ie).digest()}return xe==="rmd160"||xe==="ripemd160"?$e:xe==="md5"?K:_e}function ye(xe,_e,$e,Ie,Fe){ce($e,Ie),xe=Ae(xe,ue,"Password"),_e=Ae(_e,ue,"Salt"),Fe=Fe||"sha1";var ke=new me(Fe,xe,_e.length),je=oe.allocUnsafe(Ie),We=oe.allocUnsafe(_e.length+4);_e.copy(We,0,0,_e.length);for(var ze=0,Xe=ve[Fe],Je=Math.ceil(Ie/Xe),nt=1;nt<=Je;nt++){We.writeUInt32BE(nt,_e.length);for(var et=ke.run(We,ke.ipad1),tt=et,st=1;st<$e;st++){tt=ke.run(tt,ke.ipad2);for(var qe=0;qe<Xe;qe++)et[qe]^=tt[qe]}et.copy(je,ze),ze+=Xe}return je}return syncBrowser=ye,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var K=requireSafeBuffer$1().Buffer,J=requirePrecondition(),ne=requireDefaultEncoding(),oe=requireSyncBrowser(),ce=requireToBuffer(),ue,Ae=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,pe={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},ve=[];function me($e){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!Ae||!Ae.importKey||!Ae.deriveBits)return Promise.resolve(!1);if(ve[$e]!==void 0)return ve[$e];ue=ue||K.alloc(8);var Ie=xe(ue,ue,10,128,$e).then(function(){return!0}).catch(function(){return!1});return ve[$e]=Ie,Ie}var ge;function ye(){return ge||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?ge=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?ge=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?ge=commonjsGlobal.setImmediate:ge=commonjsGlobal.setTimeout,ge)}function xe($e,Ie,Fe,ke,je){return Ae.importKey("raw",$e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(We){return Ae.deriveBits({name:"PBKDF2",salt:Ie,iterations:Fe,hash:{name:je}},We,ke<<3)}).then(function(We){return K.from(We)})}function _e($e,Ie){$e.then(function(Fe){ye()(function(){Ie(null,Fe)})},function(Fe){ye()(function(){Ie(Fe)})})}return async=function($e,Ie,Fe,ke,je,We){typeof je=="function"&&(We=je,je=void 0),je=je||"sha1";var ze=pe[je.toLowerCase()];if(!ze||typeof commonjsGlobal.Promise!="function"){ye()(function(){var Xe;try{Xe=oe($e,Ie,Fe,ke,je)}catch(Je){return We(Je)}We(null,Xe)});return}if(J(Fe,ke),$e=ce($e,ne,"Password"),Ie=ce(Ie,ne,"Salt"),typeof We!="function")throw new Error("No callback provided to pbkdf2");_e(me(ze).then(function(Xe){return Xe?xe($e,Ie,Fe,ke,ze):oe($e,Ie,Fe,ke,je)}),We)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$7.pbkdf2=requireAsync(),browser$7.pbkdf2Sync=requireSyncBrowser()),browser$7}var browser$6={},des$1={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1,utils$3.readUInt32BE=function(ce,ue){var Ae=ce[0+ue]<<24|ce[1+ue]<<16|ce[2+ue]<<8|ce[3+ue];return Ae>>>0},utils$3.writeUInt32BE=function(ce,ue,Ae){ce[0+Ae]=ue>>>24,ce[1+Ae]=ue>>>16&255,ce[2+Ae]=ue>>>8&255,ce[3+Ae]=ue&255},utils$3.ip=function(ce,ue,Ae,pe){for(var ve=0,me=0,ge=6;ge>=0;ge-=2){for(var ye=0;ye<=24;ye+=8)ve<<=1,ve|=ue>>>ye+ge&1;for(var ye=0;ye<=24;ye+=8)ve<<=1,ve|=ce>>>ye+ge&1}for(var ge=6;ge>=0;ge-=2){for(var ye=1;ye<=25;ye+=8)me<<=1,me|=ue>>>ye+ge&1;for(var ye=1;ye<=25;ye+=8)me<<=1,me|=ce>>>ye+ge&1}Ae[pe+0]=ve>>>0,Ae[pe+1]=me>>>0},utils$3.rip=function(ce,ue,Ae,pe){for(var ve=0,me=0,ge=0;ge<4;ge++)for(var ye=24;ye>=0;ye-=8)ve<<=1,ve|=ue>>>ye+ge&1,ve<<=1,ve|=ce>>>ye+ge&1;for(var ge=4;ge<8;ge++)for(var ye=24;ye>=0;ye-=8)me<<=1,me|=ue>>>ye+ge&1,me<<=1,me|=ce>>>ye+ge&1;Ae[pe+0]=ve>>>0,Ae[pe+1]=me>>>0},utils$3.pc1=function(ce,ue,Ae,pe){for(var ve=0,me=0,ge=7;ge>=5;ge--){for(var ye=0;ye<=24;ye+=8)ve<<=1,ve|=ue>>ye+ge&1;for(var ye=0;ye<=24;ye+=8)ve<<=1,ve|=ce>>ye+ge&1}for(var ye=0;ye<=24;ye+=8)ve<<=1,ve|=ue>>ye+ge&1;for(var ge=1;ge<=3;ge++){for(var ye=0;ye<=24;ye+=8)me<<=1,me|=ue>>ye+ge&1;for(var ye=0;ye<=24;ye+=8)me<<=1,me|=ce>>ye+ge&1}for(var ye=0;ye<=24;ye+=8)me<<=1,me|=ce>>ye+ge&1;Ae[pe+0]=ve>>>0,Ae[pe+1]=me>>>0},utils$3.r28shl=function(ce,ue){return ce<<ue&268435455|ce>>>28-ue};var K=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$3.pc2=function(ce,ue,Ae,pe){for(var ve=0,me=0,ge=K.length>>>1,ye=0;ye<ge;ye++)ve<<=1,ve|=ce>>>K[ye]&1;for(var ye=ge;ye<K.length;ye++)me<<=1,me|=ue>>>K[ye]&1;Ae[pe+0]=ve>>>0,Ae[pe+1]=me>>>0},utils$3.expand=function(ce,ue,Ae){var pe=0,ve=0;pe=(ce&1)<<5|ce>>>27;for(var me=23;me>=15;me-=4)pe<<=6,pe|=ce>>>me&63;for(var me=11;me>=3;me-=4)ve|=ce>>>me&63,ve<<=6;ve|=(ce&31)<<1|ce>>>31,ue[Ae+0]=pe>>>0,ue[Ae+1]=ve>>>0};var J=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$3.substitute=function(ce,ue){for(var Ae=0,pe=0;pe<4;pe++){var ve=ce>>>18-pe*6&63,me=J[pe*64+ve];Ae<<=4,Ae|=me}for(var pe=0;pe<4;pe++){var ve=ue>>>18-pe*6&63,me=J[4*64+pe*64+ve];Ae<<=4,Ae|=me}return Ae>>>0};var ne=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$3.permute=function(ce){for(var ue=0,Ae=0;Ae<ne.length;Ae++)ue<<=1,ue|=ce>>>ne[Ae]&1;return ue>>>0},utils$3.padSplit=function(ce,ue,Ae){for(var pe=ce.toString(2);pe.length<ue;)pe="0"+pe;for(var ve=[],me=0;me<ue;me+=Ae)ve.push(pe.slice(me,me+Ae));return ve.join(" ")},utils$3}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=K;function K(J,ne){if(!J)throw new Error(ne||"Assertion failed")}return K.equal=function(ne,oe,ce){if(ne!=oe)throw new Error(ce||"Assertion failed: "+ne+" != "+oe)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var K=requireMinimalisticAssert();function J(ne){this.options=ne,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=ne.padding!==!1}return cipher=J,J.prototype._init=function(){},J.prototype.update=function(oe){return oe.length===0?[]:this.type==="decrypt"?this._updateDecrypt(oe):this._updateEncrypt(oe)},J.prototype._buffer=function(oe,ce){for(var ue=Math.min(this.buffer.length-this.bufferOff,oe.length-ce),Ae=0;Ae<ue;Ae++)this.buffer[this.bufferOff+Ae]=oe[ce+Ae];return this.bufferOff+=ue,ue},J.prototype._flushBuffer=function(oe,ce){return this._update(this.buffer,0,oe,ce),this.bufferOff=0,this.blockSize},J.prototype._updateEncrypt=function(oe){var ce=0,ue=0,Ae=(this.bufferOff+oe.length)/this.blockSize|0,pe=new Array(Ae*this.blockSize);this.bufferOff!==0&&(ce+=this._buffer(oe,ce),this.bufferOff===this.buffer.length&&(ue+=this._flushBuffer(pe,ue)));for(var ve=oe.length-(oe.length-ce)%this.blockSize;ce<ve;ce+=this.blockSize)this._update(oe,ce,pe,ue),ue+=this.blockSize;for(;ce<oe.length;ce++,this.bufferOff++)this.buffer[this.bufferOff]=oe[ce];return pe},J.prototype._updateDecrypt=function(oe){for(var ce=0,ue=0,Ae=Math.ceil((this.bufferOff+oe.length)/this.blockSize)-1,pe=new Array(Ae*this.blockSize);Ae>0;Ae--)ce+=this._buffer(oe,ce),ue+=this._flushBuffer(pe,ue);return ce+=this._buffer(oe,ce),pe},J.prototype.final=function(oe){var ce;oe&&(ce=this.update(oe));var ue;return this.type==="encrypt"?ue=this._finalEncrypt():ue=this._finalDecrypt(),ce?ce.concat(ue):ue},J.prototype._pad=function(oe,ce){if(ce===0)return!1;for(;ce<oe.length;)oe[ce++]=0;return!0},J.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var oe=new Array(this.blockSize);return this._update(this.buffer,0,oe,0),oe},J.prototype._unpad=function(oe){return oe},J.prototype._finalDecrypt=function(){K.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var oe=new Array(this.blockSize);return this._flushBuffer(oe,0),this._unpad(oe)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var K=requireMinimalisticAssert(),J=requireInherits_browser(),ne=requireUtils$3(),oe=requireCipher();function ce(){this.tmp=new Array(2),this.keys=null}function ue(pe){oe.call(this,pe);var ve=new ce;this._desState=ve,this.deriveKeys(ve,pe.key)}J(ue,oe),des=ue,ue.create=function(ve){return new ue(ve)};var Ae=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return ue.prototype.deriveKeys=function(ve,me){ve.keys=new Array(16*2),K.equal(me.length,this.blockSize,"Invalid key length");var ge=ne.readUInt32BE(me,0),ye=ne.readUInt32BE(me,4);ne.pc1(ge,ye,ve.tmp,0),ge=ve.tmp[0],ye=ve.tmp[1];for(var xe=0;xe<ve.keys.length;xe+=2){var _e=Ae[xe>>>1];ge=ne.r28shl(ge,_e),ye=ne.r28shl(ye,_e),ne.pc2(ge,ye,ve.keys,xe)}},ue.prototype._update=function(ve,me,ge,ye){var xe=this._desState,_e=ne.readUInt32BE(ve,me),$e=ne.readUInt32BE(ve,me+4);ne.ip(_e,$e,xe.tmp,0),_e=xe.tmp[0],$e=xe.tmp[1],this.type==="encrypt"?this._encrypt(xe,_e,$e,xe.tmp,0):this._decrypt(xe,_e,$e,xe.tmp,0),_e=xe.tmp[0],$e=xe.tmp[1],ne.writeUInt32BE(ge,_e,ye),ne.writeUInt32BE(ge,$e,ye+4)},ue.prototype._pad=function(ve,me){if(this.padding===!1)return!1;for(var ge=ve.length-me,ye=me;ye<ve.length;ye++)ve[ye]=ge;return!0},ue.prototype._unpad=function(ve){if(this.padding===!1)return ve;for(var me=ve[ve.length-1],ge=ve.length-me;ge<ve.length;ge++)K.equal(ve[ge],me);return ve.slice(0,ve.length-me)},ue.prototype._encrypt=function(ve,me,ge,ye,xe){for(var _e=me,$e=ge,Ie=0;Ie<ve.keys.length;Ie+=2){var Fe=ve.keys[Ie],ke=ve.keys[Ie+1];ne.expand($e,ve.tmp,0),Fe^=ve.tmp[0],ke^=ve.tmp[1];var je=ne.substitute(Fe,ke),We=ne.permute(je),ze=$e;$e=(_e^We)>>>0,_e=ze}ne.rip($e,_e,ye,xe)},ue.prototype._decrypt=function(ve,me,ge,ye,xe){for(var _e=ge,$e=me,Ie=ve.keys.length-2;Ie>=0;Ie-=2){var Fe=ve.keys[Ie],ke=ve.keys[Ie+1];ne.expand(_e,ve.tmp,0),Fe^=ve.tmp[0],ke^=ve.tmp[1];var je=ne.substitute(Fe,ke),We=ne.permute(je),ze=_e;_e=($e^We)>>>0,$e=ze}ne.rip(_e,$e,ye,xe)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var K=requireMinimalisticAssert(),J=requireInherits_browser(),ne={};function oe(ue){K.equal(ue.length,8,"Invalid IV length"),this.iv=new Array(8);for(var Ae=0;Ae<this.iv.length;Ae++)this.iv[Ae]=ue[Ae]}function ce(ue){function Ae(ge){ue.call(this,ge),this._cbcInit()}J(Ae,ue);for(var pe=Object.keys(ne),ve=0;ve<pe.length;ve++){var me=pe[ve];Ae.prototype[me]=ne[me]}return Ae.create=function(ye){return new Ae(ye)},Ae}return cbc$1.instantiate=ce,ne._cbcInit=function(){var Ae=new oe(this.options.iv);this._cbcState=Ae},ne._update=function(Ae,pe,ve,me){var ge=this._cbcState,ye=this.constructor.super_.prototype,xe=ge.iv;if(this.type==="encrypt"){for(var _e=0;_e<this.blockSize;_e++)xe[_e]^=Ae[pe+_e];ye._update.call(this,xe,0,ve,me);for(var _e=0;_e<this.blockSize;_e++)xe[_e]=ve[me+_e]}else{ye._update.call(this,Ae,pe,ve,me);for(var _e=0;_e<this.blockSize;_e++)ve[me+_e]^=xe[_e];for(var _e=0;_e<this.blockSize;_e++)xe[_e]=Ae[pe+_e]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var K=requireMinimalisticAssert(),J=requireInherits_browser(),ne=requireCipher(),oe=requireDes$1();function ce(Ae,pe){K.equal(pe.length,24,"Invalid key length");var ve=pe.slice(0,8),me=pe.slice(8,16),ge=pe.slice(16,24);Ae==="encrypt"?this.ciphers=[oe.create({type:"encrypt",key:ve}),oe.create({type:"decrypt",key:me}),oe.create({type:"encrypt",key:ge})]:this.ciphers=[oe.create({type:"decrypt",key:ge}),oe.create({type:"encrypt",key:me}),oe.create({type:"decrypt",key:ve})]}function ue(Ae){ne.call(this,Ae);var pe=new ce(this.type,this.options.key);this._edeState=pe}return J(ue,ne),ede=ue,ue.create=function(pe){return new ue(pe)},ue.prototype._update=function(pe,ve,me,ge){var ye=this._edeState;ye.ciphers[0]._update(pe,ve,me,ge),ye.ciphers[1]._update(me,ge,me,ge),ye.ciphers[2]._update(me,ge,me,ge)},ue.prototype._pad=oe.prototype._pad,ue.prototype._unpad=oe.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var K=requireCipherBase(),J=requireDes(),ne=requireInherits_browser(),oe=requireSafeBuffer$1().Buffer,ce={"des-ede3-cbc":J.CBC.instantiate(J.EDE),"des-ede3":J.EDE,"des-ede-cbc":J.CBC.instantiate(J.EDE),"des-ede":J.EDE,"des-cbc":J.CBC.instantiate(J.DES),"des-ecb":J.DES};ce.des=ce["des-cbc"],ce.des3=ce["des-ede3-cbc"],browserifyDes=ue,ne(ue,K);function ue(Ae){K.call(this);var pe=Ae.mode.toLowerCase(),ve=ce[pe],me;Ae.decrypt?me="decrypt":me="encrypt";var ge=Ae.key;oe.isBuffer(ge)||(ge=oe.from(ge)),(pe==="des-ede"||pe==="des-ede-cbc")&&(ge=oe.concat([ge,ge.slice(0,8)]));var ye=Ae.iv;oe.isBuffer(ye)||(ye=oe.from(ye)),this._des=ve.create({key:ge,iv:ye,type:me})}return ue.prototype._update=function(Ae){return oe.from(this._des.update(Ae))},ue.prototype._final=function(){return oe.from(this._des.final())},browserifyDes}var browser$5={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(K,J){return K._cipher.encryptBlock(J)},ecb.decrypt=function(K,J){return K._cipher.decryptBlock(J)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(J,ne){for(var oe=Math.min(J.length,ne.length),ce=new Buffer(oe),ue=0;ue<oe;++ue)ce[ue]=J[ue]^ne[ue];return ce}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var K=requireBufferXor();return cbc.encrypt=function(J,ne){var oe=K(ne,J._prev);return J._prev=J._cipher.encryptBlock(oe),J._prev},cbc.decrypt=function(J,ne){var oe=J._prev;J._prev=ne;var ce=J._cipher.decryptBlock(ne);return K(ce,oe)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var K=requireSafeBuffer$1().Buffer,J=requireBufferXor();function ne(oe,ce,ue){var Ae=ce.length,pe=J(ce,oe._cache);return oe._cache=oe._cache.slice(Ae),oe._prev=K.concat([oe._prev,ue?ce:pe]),pe}return cfb.encrypt=function(oe,ce,ue){for(var Ae=K.allocUnsafe(0),pe;ce.length;)if(oe._cache.length===0&&(oe._cache=oe._cipher.encryptBlock(oe._prev),oe._prev=K.allocUnsafe(0)),oe._cache.length<=ce.length)pe=oe._cache.length,Ae=K.concat([Ae,ne(oe,ce.slice(0,pe),ue)]),ce=ce.slice(pe);else{Ae=K.concat([Ae,ne(oe,ce,ue)]);break}return Ae},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var K=requireSafeBuffer$1().Buffer;function J(ne,oe,ce){var ue=ne._cipher.encryptBlock(ne._prev),Ae=ue[0]^oe;return ne._prev=K.concat([ne._prev.slice(1),K.from([ce?oe:Ae])]),Ae}return cfb8.encrypt=function(ne,oe,ce){for(var ue=oe.length,Ae=K.allocUnsafe(ue),pe=-1;++pe<ue;)Ae[pe]=J(ne,oe[pe],ce);return Ae},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var K=requireSafeBuffer$1().Buffer;function J(oe,ce,ue){for(var Ae,pe=-1,ve=8,me=0,ge,ye;++pe<ve;)Ae=oe._cipher.encryptBlock(oe._prev),ge=ce&1<<7-pe?128:0,ye=Ae[0]^ge,me+=(ye&128)>>pe%8,oe._prev=ne(oe._prev,ue?ge:ye);return me}function ne(oe,ce){var ue=oe.length,Ae=-1,pe=K.allocUnsafe(oe.length);for(oe=K.concat([oe,K.from([ce])]);++Ae<ue;)pe[Ae]=oe[Ae]<<1|oe[Ae+1]>>7;return pe}return cfb1.encrypt=function(oe,ce,ue){for(var Ae=ce.length,pe=K.allocUnsafe(Ae),ve=-1;++ve<Ae;)pe[ve]=J(oe,ce[ve],ue);return pe},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var K=requireBufferXor();function J(ne){return ne._prev=ne._cipher.encryptBlock(ne._prev),ne._prev}return ofb.encrypt=function(ne,oe){for(;ne._cache.length<oe.length;)ne._cache=Buffer.concat([ne._cache,J(ne)]);var ce=ne._cache.slice(0,oe.length);return ne._cache=ne._cache.slice(oe.length),K(oe,ce)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function K(J){for(var ne=J.length,oe;ne--;)if(oe=J.readUInt8(ne),oe===255)J.writeUInt8(0,ne);else{oe++,J.writeUInt8(oe,ne);break}}return incr32_1=K,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var K=requireBufferXor(),J=requireSafeBuffer$1().Buffer,ne=requireIncr32();function oe(ue){var Ae=ue._cipher.encryptBlockRaw(ue._prev);return ne(ue._prev),Ae}var ce=16;return ctr.encrypt=function(ue,Ae){var pe=Math.ceil(Ae.length/ce),ve=ue._cache.length;ue._cache=J.concat([ue._cache,J.allocUnsafe(pe*ce)]);for(var me=0;me<pe;me++){var ge=oe(ue),ye=ve+me*ce;ue._cache.writeUInt32BE(ge[0],ye+0),ue._cache.writeUInt32BE(ge[1],ye+4),ue._cache.writeUInt32BE(ge[2],ye+8),ue._cache.writeUInt32BE(ge[3],ye+12)}var xe=ue._cache.slice(0,Ae.length);return ue._cache=ue._cache.slice(Ae.length),K(Ae,xe)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var K={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},J=require$$2;for(var ne in J)J[ne].module=K[J[ne].mode];return modes_1=J,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var K=requireSafeBuffer$1().Buffer;function J(pe){K.isBuffer(pe)||(pe=K.from(pe));for(var ve=pe.length/4|0,me=new Array(ve),ge=0;ge<ve;ge++)me[ge]=pe.readUInt32BE(ge*4);return me}function ne(pe){for(var ve=0;ve<pe.length;pe++)pe[ve]=0}function oe(pe,ve,me,ge,ye){for(var xe=me[0],_e=me[1],$e=me[2],Ie=me[3],Fe=pe[0]^ve[0],ke=pe[1]^ve[1],je=pe[2]^ve[2],We=pe[3]^ve[3],ze,Xe,Je,nt,et=4,tt=1;tt<ye;tt++)ze=xe[Fe>>>24]^_e[ke>>>16&255]^$e[je>>>8&255]^Ie[We&255]^ve[et++],Xe=xe[ke>>>24]^_e[je>>>16&255]^$e[We>>>8&255]^Ie[Fe&255]^ve[et++],Je=xe[je>>>24]^_e[We>>>16&255]^$e[Fe>>>8&255]^Ie[ke&255]^ve[et++],nt=xe[We>>>24]^_e[Fe>>>16&255]^$e[ke>>>8&255]^Ie[je&255]^ve[et++],Fe=ze,ke=Xe,je=Je,We=nt;return ze=(ge[Fe>>>24]<<24|ge[ke>>>16&255]<<16|ge[je>>>8&255]<<8|ge[We&255])^ve[et++],Xe=(ge[ke>>>24]<<24|ge[je>>>16&255]<<16|ge[We>>>8&255]<<8|ge[Fe&255])^ve[et++],Je=(ge[je>>>24]<<24|ge[We>>>16&255]<<16|ge[Fe>>>8&255]<<8|ge[ke&255])^ve[et++],nt=(ge[We>>>24]<<24|ge[Fe>>>16&255]<<16|ge[ke>>>8&255]<<8|ge[je&255])^ve[et++],ze=ze>>>0,Xe=Xe>>>0,Je=Je>>>0,nt=nt>>>0,[ze,Xe,Je,nt]}var ce=[0,1,2,4,8,16,32,64,128,27,54],ue=function(){for(var pe=new Array(256),ve=0;ve<256;ve++)ve<128?pe[ve]=ve<<1:pe[ve]=ve<<1^283;for(var me=[],ge=[],ye=[[],[],[],[]],xe=[[],[],[],[]],_e=0,$e=0,Ie=0;Ie<256;++Ie){var Fe=$e^$e<<1^$e<<2^$e<<3^$e<<4;Fe=Fe>>>8^Fe&255^99,me[_e]=Fe,ge[Fe]=_e;var ke=pe[_e],je=pe[ke],We=pe[je],ze=pe[Fe]*257^Fe*16843008;ye[0][_e]=ze<<24|ze>>>8,ye[1][_e]=ze<<16|ze>>>16,ye[2][_e]=ze<<8|ze>>>24,ye[3][_e]=ze,ze=We*16843009^je*65537^ke*257^_e*16843008,xe[0][Fe]=ze<<24|ze>>>8,xe[1][Fe]=ze<<16|ze>>>16,xe[2][Fe]=ze<<8|ze>>>24,xe[3][Fe]=ze,_e===0?_e=$e=1:(_e=ke^pe[pe[pe[We^ke]]],$e^=pe[pe[$e]])}return{SBOX:me,INV_SBOX:ge,SUB_MIX:ye,INV_SUB_MIX:xe}}();function Ae(pe){this._key=J(pe),this._reset()}return Ae.blockSize=4*4,Ae.keySize=256/8,Ae.prototype.blockSize=Ae.blockSize,Ae.prototype.keySize=Ae.keySize,Ae.prototype._reset=function(){for(var pe=this._key,ve=pe.length,me=ve+6,ge=(me+1)*4,ye=[],xe=0;xe<ve;xe++)ye[xe]=pe[xe];for(xe=ve;xe<ge;xe++){var _e=ye[xe-1];xe%ve===0?(_e=_e<<8|_e>>>24,_e=ue.SBOX[_e>>>24]<<24|ue.SBOX[_e>>>16&255]<<16|ue.SBOX[_e>>>8&255]<<8|ue.SBOX[_e&255],_e^=ce[xe/ve|0]<<24):ve>6&&xe%ve===4&&(_e=ue.SBOX[_e>>>24]<<24|ue.SBOX[_e>>>16&255]<<16|ue.SBOX[_e>>>8&255]<<8|ue.SBOX[_e&255]),ye[xe]=ye[xe-ve]^_e}for(var $e=[],Ie=0;Ie<ge;Ie++){var Fe=ge-Ie,ke=ye[Fe-(Ie%4?0:4)];Ie<4||Fe<=4?$e[Ie]=ke:$e[Ie]=ue.INV_SUB_MIX[0][ue.SBOX[ke>>>24]]^ue.INV_SUB_MIX[1][ue.SBOX[ke>>>16&255]]^ue.INV_SUB_MIX[2][ue.SBOX[ke>>>8&255]]^ue.INV_SUB_MIX[3][ue.SBOX[ke&255]]}this._nRounds=me,this._keySchedule=ye,this._invKeySchedule=$e},Ae.prototype.encryptBlockRaw=function(pe){return pe=J(pe),oe(pe,this._keySchedule,ue.SUB_MIX,ue.SBOX,this._nRounds)},Ae.prototype.encryptBlock=function(pe){var ve=this.encryptBlockRaw(pe),me=K.allocUnsafe(16);return me.writeUInt32BE(ve[0],0),me.writeUInt32BE(ve[1],4),me.writeUInt32BE(ve[2],8),me.writeUInt32BE(ve[3],12),me},Ae.prototype.decryptBlock=function(pe){pe=J(pe);var ve=pe[1];pe[1]=pe[3],pe[3]=ve;var me=oe(pe,this._invKeySchedule,ue.INV_SUB_MIX,ue.INV_SBOX,this._nRounds),ge=K.allocUnsafe(16);return ge.writeUInt32BE(me[0],0),ge.writeUInt32BE(me[3],4),ge.writeUInt32BE(me[2],8),ge.writeUInt32BE(me[1],12),ge},Ae.prototype.scrub=function(){ne(this._keySchedule),ne(this._invKeySchedule),ne(this._key)},aes.AES=Ae,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var K=requireSafeBuffer$1().Buffer,J=K.alloc(16,0);function ne(ue){return[ue.readUInt32BE(0),ue.readUInt32BE(4),ue.readUInt32BE(8),ue.readUInt32BE(12)]}function oe(ue){var Ae=K.allocUnsafe(16);return Ae.writeUInt32BE(ue[0]>>>0,0),Ae.writeUInt32BE(ue[1]>>>0,4),Ae.writeUInt32BE(ue[2]>>>0,8),Ae.writeUInt32BE(ue[3]>>>0,12),Ae}function ce(ue){this.h=ue,this.state=K.alloc(16,0),this.cache=K.allocUnsafe(0)}return ce.prototype.ghash=function(ue){for(var Ae=-1;++Ae<ue.length;)this.state[Ae]^=ue[Ae];this._multiply()},ce.prototype._multiply=function(){for(var ue=ne(this.h),Ae=[0,0,0,0],pe,ve,me,ge=-1;++ge<128;){for(ve=(this.state[~~(ge/8)]&1<<7-ge%8)!==0,ve&&(Ae[0]^=ue[0],Ae[1]^=ue[1],Ae[2]^=ue[2],Ae[3]^=ue[3]),me=(ue[3]&1)!==0,pe=3;pe>0;pe--)ue[pe]=ue[pe]>>>1|(ue[pe-1]&1)<<31;ue[0]=ue[0]>>>1,me&&(ue[0]=ue[0]^225<<24)}this.state=oe(Ae)},ce.prototype.update=function(ue){this.cache=K.concat([this.cache,ue]);for(var Ae;this.cache.length>=16;)Ae=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(Ae)},ce.prototype.final=function(ue,Ae){return this.cache.length&&this.ghash(K.concat([this.cache,J],16)),this.ghash(oe([0,ue,0,Ae])),this.state},ghash=ce,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var K=requireAes(),J=requireSafeBuffer$1().Buffer,ne=requireCipherBase(),oe=requireInherits_browser(),ce=requireGhash(),ue=requireBufferXor(),Ae=requireIncr32();function pe(ge,ye){var xe=0;ge.length!==ye.length&&xe++;for(var _e=Math.min(ge.length,ye.length),$e=0;$e<_e;++$e)xe+=ge[$e]^ye[$e];return xe}function ve(ge,ye,xe){if(ye.length===12)return ge._finID=J.concat([ye,J.from([0,0,0,1])]),J.concat([ye,J.from([0,0,0,2])]);var _e=new ce(xe),$e=ye.length,Ie=$e%16;_e.update(ye),Ie&&(Ie=16-Ie,_e.update(J.alloc(Ie,0))),_e.update(J.alloc(8,0));var Fe=$e*8,ke=J.alloc(8);ke.writeUIntBE(Fe,0,8),_e.update(ke),ge._finID=_e.state;var je=J.from(ge._finID);return Ae(je),je}function me(ge,ye,xe,_e){ne.call(this);var $e=J.alloc(4,0);this._cipher=new K.AES(ye);var Ie=this._cipher.encryptBlock($e);this._ghash=new ce(Ie),xe=ve(this,xe,Ie),this._prev=J.from(xe),this._cache=J.allocUnsafe(0),this._secCache=J.allocUnsafe(0),this._decrypt=_e,this._alen=0,this._len=0,this._mode=ge,this._authTag=null,this._called=!1}return oe(me,ne),me.prototype._update=function(ge){if(!this._called&&this._alen){var ye=16-this._alen%16;ye<16&&(ye=J.alloc(ye,0),this._ghash.update(ye))}this._called=!0;var xe=this._mode.encrypt(this,ge);return this._decrypt?this._ghash.update(ge):this._ghash.update(xe),this._len+=ge.length,xe},me.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var ge=ue(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&pe(ge,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=ge,this._cipher.scrub()},me.prototype.getAuthTag=function(){if(this._decrypt||!J.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},me.prototype.setAuthTag=function(ye){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=ye},me.prototype.setAAD=function(ye){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(ye),this._alen+=ye.length},authCipher=me,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var K=requireAes(),J=requireSafeBuffer$1().Buffer,ne=requireCipherBase(),oe=requireInherits_browser();function ce(ue,Ae,pe,ve){ne.call(this),this._cipher=new K.AES(Ae),this._prev=J.from(pe),this._cache=J.allocUnsafe(0),this._secCache=J.allocUnsafe(0),this._decrypt=ve,this._mode=ue}return oe(ce,ne),ce.prototype._update=function(ue){return this._mode.encrypt(this,ue,this._decrypt)},ce.prototype._final=function(){this._cipher.scrub()},streamCipher=ce,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var K=requireSafeBuffer$1().Buffer,J=requireMd5_js();function ne(oe,ce,ue,Ae){if(K.isBuffer(oe)||(oe=K.from(oe,"binary")),ce&&(K.isBuffer(ce)||(ce=K.from(ce,"binary")),ce.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var pe=ue/8,ve=K.alloc(pe),me=K.alloc(Ae||0),ge=K.alloc(0);pe>0||Ae>0;){var ye=new J;ye.update(ge),ye.update(oe),ce&&ye.update(ce),ge=ye.digest();var xe=0;if(pe>0){var _e=ve.length-pe;xe=Math.min(pe,ge.length),ge.copy(ve,_e,0,xe),pe-=xe}if(xe<ge.length&&Ae>0){var $e=me.length-Ae,Ie=Math.min(Ae,ge.length-xe);ge.copy(me,$e,xe,xe+Ie),Ae-=Ie}}return ge.fill(0),{key:ve,iv:me}}return evp_bytestokey=ne,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var K=requireModes$1(),J=requireAuthCipher(),ne=requireSafeBuffer$1().Buffer,oe=requireStreamCipher(),ce=requireCipherBase(),ue=requireAes(),Ae=requireEvp_bytestokey(),pe=requireInherits_browser();function ve(_e,$e,Ie){ce.call(this),this._cache=new ge,this._cipher=new ue.AES($e),this._prev=ne.from(Ie),this._mode=_e,this._autopadding=!0}pe(ve,ce),ve.prototype._update=function(_e){this._cache.add(_e);for(var $e,Ie,Fe=[];$e=this._cache.get();)Ie=this._mode.encrypt(this,$e),Fe.push(Ie);return ne.concat(Fe)};var me=ne.alloc(16,16);ve.prototype._final=function(){var _e=this._cache.flush();if(this._autopadding)return _e=this._mode.encrypt(this,_e),this._cipher.scrub(),_e;if(!_e.equals(me))throw this._cipher.scrub(),new Error("data not multiple of block length")},ve.prototype.setAutoPadding=function(_e){return this._autopadding=!!_e,this};function ge(){this.cache=ne.allocUnsafe(0)}ge.prototype.add=function(_e){this.cache=ne.concat([this.cache,_e])},ge.prototype.get=function(){if(this.cache.length>15){var _e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),_e}return null},ge.prototype.flush=function(){for(var _e=16-this.cache.length,$e=ne.allocUnsafe(_e),Ie=-1;++Ie<_e;)$e.writeUInt8(_e,Ie);return ne.concat([this.cache,$e])};function ye(_e,$e,Ie){var Fe=K[_e.toLowerCase()];if(!Fe)throw new TypeError("invalid suite type");if(typeof $e=="string"&&($e=ne.from($e)),$e.length!==Fe.key/8)throw new TypeError("invalid key length "+$e.length);if(typeof Ie=="string"&&(Ie=ne.from(Ie)),Fe.mode!=="GCM"&&Ie.length!==Fe.iv)throw new TypeError("invalid iv length "+Ie.length);return Fe.type==="stream"?new oe(Fe.module,$e,Ie):Fe.type==="auth"?new J(Fe.module,$e,Ie):new ve(Fe.module,$e,Ie)}function xe(_e,$e){var Ie=K[_e.toLowerCase()];if(!Ie)throw new TypeError("invalid suite type");var Fe=Ae($e,!1,Ie.key,Ie.iv);return ye(_e,Fe.key,Fe.iv)}return encrypter.createCipheriv=ye,encrypter.createCipher=xe,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var K=requireAuthCipher(),J=requireSafeBuffer$1().Buffer,ne=requireModes$1(),oe=requireStreamCipher(),ce=requireCipherBase(),ue=requireAes(),Ae=requireEvp_bytestokey(),pe=requireInherits_browser();function ve(_e,$e,Ie){ce.call(this),this._cache=new me,this._last=void 0,this._cipher=new ue.AES($e),this._prev=J.from(Ie),this._mode=_e,this._autopadding=!0}pe(ve,ce),ve.prototype._update=function(_e){this._cache.add(_e);for(var $e,Ie,Fe=[];$e=this._cache.get(this._autopadding);)Ie=this._mode.decrypt(this,$e),Fe.push(Ie);return J.concat(Fe)},ve.prototype._final=function(){var _e=this._cache.flush();if(this._autopadding)return ge(this._mode.decrypt(this,_e));if(_e)throw new Error("data not multiple of block length")},ve.prototype.setAutoPadding=function(_e){return this._autopadding=!!_e,this};function me(){this.cache=J.allocUnsafe(0)}me.prototype.add=function(_e){this.cache=J.concat([this.cache,_e])},me.prototype.get=function(_e){var $e;if(_e){if(this.cache.length>16)return $e=this.cache.slice(0,16),this.cache=this.cache.slice(16),$e}else if(this.cache.length>=16)return $e=this.cache.slice(0,16),this.cache=this.cache.slice(16),$e;return null},me.prototype.flush=function(){if(this.cache.length)return this.cache};function ge(_e){var $e=_e[15];if($e<1||$e>16)throw new Error("unable to decrypt data");for(var Ie=-1;++Ie<$e;)if(_e[Ie+(16-$e)]!==$e)throw new Error("unable to decrypt data");if($e!==16)return _e.slice(0,16-$e)}function ye(_e,$e,Ie){var Fe=ne[_e.toLowerCase()];if(!Fe)throw new TypeError("invalid suite type");if(typeof Ie=="string"&&(Ie=J.from(Ie)),Fe.mode!=="GCM"&&Ie.length!==Fe.iv)throw new TypeError("invalid iv length "+Ie.length);if(typeof $e=="string"&&($e=J.from($e)),$e.length!==Fe.key/8)throw new TypeError("invalid key length "+$e.length);return Fe.type==="stream"?new oe(Fe.module,$e,Ie,!0):Fe.type==="auth"?new K(Fe.module,$e,Ie,!0):new ve(Fe.module,$e,Ie)}function xe(_e,$e){var Ie=ne[_e.toLowerCase()];if(!Ie)throw new TypeError("invalid suite type");var Fe=Ae($e,!1,Ie.key,Ie.iv);return ye(_e,Fe.key,Fe.iv)}return decrypter.createDecipher=xe,decrypter.createDecipheriv=ye,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$5;hasRequiredBrowser$6=1;var K=requireEncrypter(),J=requireDecrypter(),ne=require$$2;function oe(){return Object.keys(ne)}return browser$5.createCipher=browser$5.Cipher=K.createCipher,browser$5.createCipheriv=browser$5.Cipheriv=K.createCipheriv,browser$5.createDecipher=browser$5.Decipher=J.createDecipher,browser$5.createDecipheriv=browser$5.Decipheriv=J.createDecipheriv,browser$5.listCiphers=browser$5.getCiphers=oe,browser$5}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(K){K["des-ecb"]={key:8,iv:0},K["des-cbc"]=K.des={key:8,iv:8},K["des-ede3-cbc"]=K.des3={key:24,iv:8},K["des-ede3"]={key:24,iv:0},K["des-ede-cbc"]={key:16,iv:8},K["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$6;hasRequiredBrowser$5=1;var K=requireBrowserifyDes(),J=requireBrowser$6(),ne=requireModes$1(),oe=requireModes(),ce=requireEvp_bytestokey();function ue(ge,ye){ge=ge.toLowerCase();var xe,_e;if(ne[ge])xe=ne[ge].key,_e=ne[ge].iv;else if(oe[ge])xe=oe[ge].key*8,_e=oe[ge].iv;else throw new TypeError("invalid suite type");var $e=ce(ye,!1,xe,_e);return pe(ge,$e.key,$e.iv)}function Ae(ge,ye){ge=ge.toLowerCase();var xe,_e;if(ne[ge])xe=ne[ge].key,_e=ne[ge].iv;else if(oe[ge])xe=oe[ge].key*8,_e=oe[ge].iv;else throw new TypeError("invalid suite type");var $e=ce(ye,!1,xe,_e);return ve(ge,$e.key,$e.iv)}function pe(ge,ye,xe){if(ge=ge.toLowerCase(),ne[ge])return J.createCipheriv(ge,ye,xe);if(oe[ge])return new K({key:ye,iv:xe,mode:ge});throw new TypeError("invalid suite type")}function ve(ge,ye,xe){if(ge=ge.toLowerCase(),ne[ge])return J.createDecipheriv(ge,ye,xe);if(oe[ge])return new K({key:ye,iv:xe,mode:ge,decrypt:!0});throw new TypeError("invalid suite type")}function me(){return Object.keys(oe).concat(J.getCiphers())}return browser$6.createCipher=browser$6.Cipher=ue,browser$6.createCipheriv=browser$6.Cipheriv=pe,browser$6.createDecipher=browser$6.Decipher=Ae,browser$6.createDecipheriv=browser$6.Decipheriv=ve,browser$6.listCiphers=browser$6.getCiphers=me,browser$6}var browser$4={},bn$6={exports:{}};bn$6.exports;var hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,function(K){(function(J,ne){function oe(qe,Se){if(!qe)throw new Error(Se||"Assertion failed")}function ce(qe,Se){qe.super_=Se;var Re=function(){};Re.prototype=Se.prototype,qe.prototype=new Re,qe.prototype.constructor=qe}function ue(qe,Se,Re){if(ue.isBN(qe))return qe;this.negative=0,this.words=null,this.length=0,this.red=null,qe!==null&&((Se==="le"||Se==="be")&&(Re=Se,Se=10),this._init(qe||0,Se||10,Re||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(Se){return Se instanceof ue?!0:Se!==null&&typeof Se=="object"&&Se.constructor.wordSize===ue.wordSize&&Array.isArray(Se.words)},ue.max=function(Se,Re){return Se.cmp(Re)>0?Se:Re},ue.min=function(Se,Re){return Se.cmp(Re)<0?Se:Re},ue.prototype._init=function(Se,Re,Be){if(typeof Se=="number")return this._initNumber(Se,Re,Be);if(typeof Se=="object")return this._initArray(Se,Re,Be);Re==="hex"&&(Re=16),oe(Re===(Re|0)&&Re>=2&&Re<=36),Se=Se.toString().replace(/\s+/g,"");var Ne=0;Se[0]==="-"&&(Ne++,this.negative=1),Ne<Se.length&&(Re===16?this._parseHex(Se,Ne,Be):(this._parseBase(Se,Re,Ne),Be==="le"&&this._initArray(this.toArray(),Re,Be)))},ue.prototype._initNumber=function(Se,Re,Be){Se<0&&(this.negative=1,Se=-Se),Se<67108864?(this.words=[Se&67108863],this.length=1):Se<4503599627370496?(this.words=[Se&67108863,Se/67108864&67108863],this.length=2):(oe(Se<9007199254740992),this.words=[Se&67108863,Se/67108864&67108863,1],this.length=3),Be==="le"&&this._initArray(this.toArray(),Re,Be)},ue.prototype._initArray=function(Se,Re,Be){if(oe(typeof Se.length=="number"),Se.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Se.length/3),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue,Ge,Ye=0;if(Be==="be")for(Ne=Se.length-1,Ue=0;Ne>=0;Ne-=3)Ge=Se[Ne]|Se[Ne-1]<<8|Se[Ne-2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);else if(Be==="le")for(Ne=0,Ue=0;Ne<Se.length;Ne+=3)Ge=Se[Ne]|Se[Ne+1]<<8|Se[Ne+2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);return this.strip()};function pe(qe,Se){var Re=qe.charCodeAt(Se);return Re>=65&&Re<=70?Re-55:Re>=97&&Re<=102?Re-87:Re-48&15}function ve(qe,Se,Re){var Be=pe(qe,Re);return Re-1>=Se&&(Be|=pe(qe,Re-1)<<4),Be}ue.prototype._parseHex=function(Se,Re,Be){this.length=Math.ceil((Se.length-Re)/6),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue=0,Ge=0,Ye;if(Be==="be")for(Ne=Se.length-1;Ne>=Re;Ne-=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8;else{var Qe=Se.length-Re;for(Ne=Qe%2===0?Re+1:Re;Ne<Se.length;Ne+=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8}this.strip()};function me(qe,Se,Re,Be){for(var Ne=0,Ue=Math.min(qe.length,Re),Ge=Se;Ge<Ue;Ge++){var Ye=qe.charCodeAt(Ge)-48;Ne*=Be,Ye>=49?Ne+=Ye-49+10:Ye>=17?Ne+=Ye-17+10:Ne+=Ye}return Ne}ue.prototype._parseBase=function(Se,Re,Be){this.words=[0],this.length=1;for(var Ne=0,Ue=1;Ue<=67108863;Ue*=Re)Ne++;Ne--,Ue=Ue/Re|0;for(var Ge=Se.length-Be,Ye=Ge%Ne,Qe=Math.min(Ge,Ge-Ye)+Be,Te=0,Ke=Be;Ke<Qe;Ke+=Ne)Te=me(Se,Ke,Ke+Ne,Re),this.imuln(Ue),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te);if(Ye!==0){var rt=1;for(Te=me(Se,Ke,Se.length,Re),Ke=0;Ke<Ye;Ke++)rt*=Re;this.imuln(rt),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te)}this.strip()},ue.prototype.copy=function(Se){Se.words=new Array(this.length);for(var Re=0;Re<this.length;Re++)Se.words[Re]=this.words[Re];Se.length=this.length,Se.negative=this.negative,Se.red=this.red},ue.prototype.clone=function(){var Se=new ue(null);return this.copy(Se),Se},ue.prototype._expand=function(Se){for(;this.length<Se;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],xe=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(Se,Re){Se=Se||10,Re=Re|0||1;var Be;if(Se===16||Se==="hex"){Be="";for(var Ne=0,Ue=0,Ge=0;Ge<this.length;Ge++){var Ye=this.words[Ge],Qe=((Ye<<Ne|Ue)&16777215).toString(16);Ue=Ye>>>24-Ne&16777215,Ue!==0||Ge!==this.length-1?Be=ge[6-Qe.length]+Qe+Be:Be=Qe+Be,Ne+=2,Ne>=26&&(Ne-=26,Ge--)}for(Ue!==0&&(Be=Ue.toString(16)+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}if(Se===(Se|0)&&Se>=2&&Se<=36){var Te=ye[Se],Ke=xe[Se];Be="";var rt=this.clone();for(rt.negative=0;!rt.isZero();){var it=rt.modn(Ke).toString(Se);rt=rt.idivn(Ke),rt.isZero()?Be=it+Be:Be=ge[Te-it.length]+it+Be}for(this.isZero()&&(Be="0"+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var Se=this.words[0];return this.length===2?Se+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Se+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Se:Se},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(Se,Re){return oe(typeof Ae<"u"),this.toArrayLike(Ae,Se,Re)},ue.prototype.toArray=function(Se,Re){return this.toArrayLike(Array,Se,Re)},ue.prototype.toArrayLike=function(Se,Re,Be){var Ne=this.byteLength(),Ue=Be||Math.max(1,Ne);oe(Ne<=Ue,"byte array longer than desired length"),oe(Ue>0,"Requested array length <= 0"),this.strip();var Ge=Re==="le",Ye=new Se(Ue),Qe,Te,Ke=this.clone();if(Ge){for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Te]=Qe;for(;Te<Ue;Te++)Ye[Te]=0}else{for(Te=0;Te<Ue-Ne;Te++)Ye[Te]=0;for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Ue-Te-1]=Qe}return Ye},Math.clz32?ue.prototype._countBits=function(Se){return 32-Math.clz32(Se)}:ue.prototype._countBits=function(Se){var Re=Se,Be=0;return Re>=4096&&(Be+=13,Re>>>=13),Re>=64&&(Be+=7,Re>>>=7),Re>=8&&(Be+=4,Re>>>=4),Re>=2&&(Be+=2,Re>>>=2),Be+Re},ue.prototype._zeroBits=function(Se){if(Se===0)return 26;var Re=Se,Be=0;return Re&8191||(Be+=13,Re>>>=13),Re&127||(Be+=7,Re>>>=7),Re&15||(Be+=4,Re>>>=4),Re&3||(Be+=2,Re>>>=2),Re&1||Be++,Be},ue.prototype.bitLength=function(){var Se=this.words[this.length-1],Re=this._countBits(Se);return(this.length-1)*26+Re};function _e(qe){for(var Se=new Array(qe.bitLength()),Re=0;Re<Se.length;Re++){var Be=Re/26|0,Ne=Re%26;Se[Re]=(qe.words[Be]&1<<Ne)>>>Ne}return Se}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Se=0,Re=0;Re<this.length;Re++){var Be=this._zeroBits(this.words[Re]);if(Se+=Be,Be!==26)break}return Se},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(Se){return this.negative!==0?this.abs().inotn(Se).iaddn(1):this.clone()},ue.prototype.fromTwos=function(Se){return this.testn(Se-1)?this.notn(Se).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(Se){for(;this.length<Se.length;)this.words[this.length++]=0;for(var Re=0;Re<Se.length;Re++)this.words[Re]=this.words[Re]|Se.words[Re];return this.strip()},ue.prototype.ior=function(Se){return oe((this.negative|Se.negative)===0),this.iuor(Se)},ue.prototype.or=function(Se){return this.length>Se.length?this.clone().ior(Se):Se.clone().ior(this)},ue.prototype.uor=function(Se){return this.length>Se.length?this.clone().iuor(Se):Se.clone().iuor(this)},ue.prototype.iuand=function(Se){var Re;this.length>Se.length?Re=Se:Re=this;for(var Be=0;Be<Re.length;Be++)this.words[Be]=this.words[Be]&Se.words[Be];return this.length=Re.length,this.strip()},ue.prototype.iand=function(Se){return oe((this.negative|Se.negative)===0),this.iuand(Se)},ue.prototype.and=function(Se){return this.length>Se.length?this.clone().iand(Se):Se.clone().iand(this)},ue.prototype.uand=function(Se){return this.length>Se.length?this.clone().iuand(Se):Se.clone().iuand(this)},ue.prototype.iuxor=function(Se){var Re,Be;this.length>Se.length?(Re=this,Be=Se):(Re=Se,Be=this);for(var Ne=0;Ne<Be.length;Ne++)this.words[Ne]=Re.words[Ne]^Be.words[Ne];if(this!==Re)for(;Ne<Re.length;Ne++)this.words[Ne]=Re.words[Ne];return this.length=Re.length,this.strip()},ue.prototype.ixor=function(Se){return oe((this.negative|Se.negative)===0),this.iuxor(Se)},ue.prototype.xor=function(Se){return this.length>Se.length?this.clone().ixor(Se):Se.clone().ixor(this)},ue.prototype.uxor=function(Se){return this.length>Se.length?this.clone().iuxor(Se):Se.clone().iuxor(this)},ue.prototype.inotn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Math.ceil(Se/26)|0,Be=Se%26;this._expand(Re),Be>0&&Re--;for(var Ne=0;Ne<Re;Ne++)this.words[Ne]=~this.words[Ne]&67108863;return Be>0&&(this.words[Ne]=~this.words[Ne]&67108863>>26-Be),this.strip()},ue.prototype.notn=function(Se){return this.clone().inotn(Se)},ue.prototype.setn=function(Se,Re){oe(typeof Se=="number"&&Se>=0);var Be=Se/26|0,Ne=Se%26;return this._expand(Be+1),Re?this.words[Be]=this.words[Be]|1<<Ne:this.words[Be]=this.words[Be]&~(1<<Ne),this.strip()},ue.prototype.iadd=function(Se){var Re;if(this.negative!==0&&Se.negative===0)return this.negative=0,Re=this.isub(Se),this.negative^=1,this._normSign();if(this.negative===0&&Se.negative!==0)return Se.negative=0,Re=this.isub(Se),Se.negative=1,Re._normSign();var Be,Ne;this.length>Se.length?(Be=this,Ne=Se):(Be=Se,Ne=this);for(var Ue=0,Ge=0;Ge<Ne.length;Ge++)Re=(Be.words[Ge]|0)+(Ne.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;for(;Ue!==0&&Ge<Be.length;Ge++)Re=(Be.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;if(this.length=Be.length,Ue!==0)this.words[this.length]=Ue,this.length++;else if(Be!==this)for(;Ge<Be.length;Ge++)this.words[Ge]=Be.words[Ge];return this},ue.prototype.add=function(Se){var Re;return Se.negative!==0&&this.negative===0?(Se.negative=0,Re=this.sub(Se),Se.negative^=1,Re):Se.negative===0&&this.negative!==0?(this.negative=0,Re=Se.sub(this),this.negative=1,Re):this.length>Se.length?this.clone().iadd(Se):Se.clone().iadd(this)},ue.prototype.isub=function(Se){if(Se.negative!==0){Se.negative=0;var Re=this.iadd(Se);return Se.negative=1,Re._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Se),this.negative=1,this._normSign();var Be=this.cmp(Se);if(Be===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ne,Ue;Be>0?(Ne=this,Ue=Se):(Ne=Se,Ue=this);for(var Ge=0,Ye=0;Ye<Ue.length;Ye++)Re=(Ne.words[Ye]|0)-(Ue.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;for(;Ge!==0&&Ye<Ne.length;Ye++)Re=(Ne.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;if(Ge===0&&Ye<Ne.length&&Ne!==this)for(;Ye<Ne.length;Ye++)this.words[Ye]=Ne.words[Ye];return this.length=Math.max(this.length,Ye),Ne!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(Se){return this.clone().isub(Se)};function $e(qe,Se,Re){Re.negative=Se.negative^qe.negative;var Be=qe.length+Se.length|0;Re.length=Be,Be=Be-1|0;var Ne=qe.words[0]|0,Ue=Se.words[0]|0,Ge=Ne*Ue,Ye=Ge&67108863,Qe=Ge/67108864|0;Re.words[0]=Ye;for(var Te=1;Te<Be;Te++){for(var Ke=Qe>>>26,rt=Qe&67108863,it=Math.min(Te,Se.length-1),at=Math.max(0,Te-qe.length+1);at<=it;at++){var lt=Te-at|0;Ne=qe.words[lt]|0,Ue=Se.words[at]|0,Ge=Ne*Ue+rt,Ke+=Ge/67108864|0,rt=Ge&67108863}Re.words[Te]=rt|0,Qe=Ke|0}return Qe!==0?Re.words[Te]=Qe|0:Re.length--,Re.strip()}var Ie=function(Se,Re,Be){var Ne=Se.words,Ue=Re.words,Ge=Be.words,Ye=0,Qe,Te,Ke,rt=Ne[0]|0,it=rt&8191,at=rt>>>13,lt=Ne[1]|0,ct=lt&8191,ot=lt>>>13,ft=Ne[2]|0,dt=ft&8191,mt=ft>>>13,kt=Ne[3]|0,wt=kt&8191,Et=kt>>>13,Ot=Ne[4]|0,Rt=Ot&8191,gt=Ot>>>13,$t=Ne[5]|0,pt=$t&8191,vt=$t>>>13,Mt=Ne[6]|0,St=Mt&8191,_t=Mt>>>13,Xt=Ne[7]|0,Tt=Xt&8191,Dt=Xt>>>13,Ht=Ne[8]|0,Bt=Ht&8191,It=Ht>>>13,zt=Ne[9]|0,Pt=zt&8191,Vt=zt>>>13,vr=Ue[0]|0,qt=vr&8191,er=vr>>>13,yr=Ue[1]|0,Lt=yr&8191,jt=yr>>>13,fr=Ue[2]|0,Gt=fr&8191,Jt=fr>>>13,ar=Ue[3]|0,Wt=ar&8191,nr=ar>>>13,Er=Ue[4]|0,Zt=Er&8191,ir=Er>>>13,Ir=Ue[5]|0,tr=Ir&8191,cr=Ir>>>13,Or=Ue[6]|0,sr=Or&8191,dr=Or>>>13,Dr=Ue[7]|0,lr=Dr&8191,hr=Dr>>>13,Yr=Ue[8]|0,ur=Yr&8191,pr=Yr>>>13,Jr=Ue[9]|0,Yt=Jr&8191,or=Jr>>>13;Be.negative=Se.negative^Re.negative,Be.length=19,Qe=Math.imul(it,qt),Te=Math.imul(it,er),Te=Te+Math.imul(at,qt)|0,Ke=Math.imul(at,er);var Fr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,Qe=Math.imul(ct,qt),Te=Math.imul(ct,er),Te=Te+Math.imul(ot,qt)|0,Ke=Math.imul(ot,er),Qe=Qe+Math.imul(it,Lt)|0,Te=Te+Math.imul(it,jt)|0,Te=Te+Math.imul(at,Lt)|0,Ke=Ke+Math.imul(at,jt)|0;var kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(kr>>>26)|0,kr&=67108863,Qe=Math.imul(dt,qt),Te=Math.imul(dt,er),Te=Te+Math.imul(mt,qt)|0,Ke=Math.imul(mt,er),Qe=Qe+Math.imul(ct,Lt)|0,Te=Te+Math.imul(ct,jt)|0,Te=Te+Math.imul(ot,Lt)|0,Ke=Ke+Math.imul(ot,jt)|0,Qe=Qe+Math.imul(it,Gt)|0,Te=Te+Math.imul(it,Jt)|0,Te=Te+Math.imul(at,Gt)|0,Ke=Ke+Math.imul(at,Jt)|0;var Kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,Qe=Math.imul(wt,qt),Te=Math.imul(wt,er),Te=Te+Math.imul(Et,qt)|0,Ke=Math.imul(Et,er),Qe=Qe+Math.imul(dt,Lt)|0,Te=Te+Math.imul(dt,jt)|0,Te=Te+Math.imul(mt,Lt)|0,Ke=Ke+Math.imul(mt,jt)|0,Qe=Qe+Math.imul(ct,Gt)|0,Te=Te+Math.imul(ct,Jt)|0,Te=Te+Math.imul(ot,Gt)|0,Ke=Ke+Math.imul(ot,Jt)|0,Qe=Qe+Math.imul(it,Wt)|0,Te=Te+Math.imul(it,nr)|0,Te=Te+Math.imul(at,Wt)|0,Ke=Ke+Math.imul(at,nr)|0;var cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(cn>>>26)|0,cn&=67108863,Qe=Math.imul(Rt,qt),Te=Math.imul(Rt,er),Te=Te+Math.imul(gt,qt)|0,Ke=Math.imul(gt,er),Qe=Qe+Math.imul(wt,Lt)|0,Te=Te+Math.imul(wt,jt)|0,Te=Te+Math.imul(Et,Lt)|0,Ke=Ke+Math.imul(Et,jt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Te=Te+Math.imul(dt,Jt)|0,Te=Te+Math.imul(mt,Gt)|0,Ke=Ke+Math.imul(mt,Jt)|0,Qe=Qe+Math.imul(ct,Wt)|0,Te=Te+Math.imul(ct,nr)|0,Te=Te+Math.imul(ot,Wt)|0,Ke=Ke+Math.imul(ot,nr)|0,Qe=Qe+Math.imul(it,Zt)|0,Te=Te+Math.imul(it,ir)|0,Te=Te+Math.imul(at,Zt)|0,Ke=Ke+Math.imul(at,ir)|0;var An=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(An>>>26)|0,An&=67108863,Qe=Math.imul(pt,qt),Te=Math.imul(pt,er),Te=Te+Math.imul(vt,qt)|0,Ke=Math.imul(vt,er),Qe=Qe+Math.imul(Rt,Lt)|0,Te=Te+Math.imul(Rt,jt)|0,Te=Te+Math.imul(gt,Lt)|0,Ke=Ke+Math.imul(gt,jt)|0,Qe=Qe+Math.imul(wt,Gt)|0,Te=Te+Math.imul(wt,Jt)|0,Te=Te+Math.imul(Et,Gt)|0,Ke=Ke+Math.imul(Et,Jt)|0,Qe=Qe+Math.imul(dt,Wt)|0,Te=Te+Math.imul(dt,nr)|0,Te=Te+Math.imul(mt,Wt)|0,Ke=Ke+Math.imul(mt,nr)|0,Qe=Qe+Math.imul(ct,Zt)|0,Te=Te+Math.imul(ct,ir)|0,Te=Te+Math.imul(ot,Zt)|0,Ke=Ke+Math.imul(ot,ir)|0,Qe=Qe+Math.imul(it,tr)|0,Te=Te+Math.imul(it,cr)|0,Te=Te+Math.imul(at,tr)|0,Ke=Ke+Math.imul(at,cr)|0;var _n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(_n>>>26)|0,_n&=67108863,Qe=Math.imul(St,qt),Te=Math.imul(St,er),Te=Te+Math.imul(_t,qt)|0,Ke=Math.imul(_t,er),Qe=Qe+Math.imul(pt,Lt)|0,Te=Te+Math.imul(pt,jt)|0,Te=Te+Math.imul(vt,Lt)|0,Ke=Ke+Math.imul(vt,jt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Te=Te+Math.imul(Rt,Jt)|0,Te=Te+Math.imul(gt,Gt)|0,Ke=Ke+Math.imul(gt,Jt)|0,Qe=Qe+Math.imul(wt,Wt)|0,Te=Te+Math.imul(wt,nr)|0,Te=Te+Math.imul(Et,Wt)|0,Ke=Ke+Math.imul(Et,nr)|0,Qe=Qe+Math.imul(dt,Zt)|0,Te=Te+Math.imul(dt,ir)|0,Te=Te+Math.imul(mt,Zt)|0,Ke=Ke+Math.imul(mt,ir)|0,Qe=Qe+Math.imul(ct,tr)|0,Te=Te+Math.imul(ct,cr)|0,Te=Te+Math.imul(ot,tr)|0,Ke=Ke+Math.imul(ot,cr)|0,Qe=Qe+Math.imul(it,sr)|0,Te=Te+Math.imul(it,dr)|0,Te=Te+Math.imul(at,sr)|0,Ke=Ke+Math.imul(at,dr)|0;var wn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(wn>>>26)|0,wn&=67108863,Qe=Math.imul(Tt,qt),Te=Math.imul(Tt,er),Te=Te+Math.imul(Dt,qt)|0,Ke=Math.imul(Dt,er),Qe=Qe+Math.imul(St,Lt)|0,Te=Te+Math.imul(St,jt)|0,Te=Te+Math.imul(_t,Lt)|0,Ke=Ke+Math.imul(_t,jt)|0,Qe=Qe+Math.imul(pt,Gt)|0,Te=Te+Math.imul(pt,Jt)|0,Te=Te+Math.imul(vt,Gt)|0,Ke=Ke+Math.imul(vt,Jt)|0,Qe=Qe+Math.imul(Rt,Wt)|0,Te=Te+Math.imul(Rt,nr)|0,Te=Te+Math.imul(gt,Wt)|0,Ke=Ke+Math.imul(gt,nr)|0,Qe=Qe+Math.imul(wt,Zt)|0,Te=Te+Math.imul(wt,ir)|0,Te=Te+Math.imul(Et,Zt)|0,Ke=Ke+Math.imul(Et,ir)|0,Qe=Qe+Math.imul(dt,tr)|0,Te=Te+Math.imul(dt,cr)|0,Te=Te+Math.imul(mt,tr)|0,Ke=Ke+Math.imul(mt,cr)|0,Qe=Qe+Math.imul(ct,sr)|0,Te=Te+Math.imul(ct,dr)|0,Te=Te+Math.imul(ot,sr)|0,Ke=Ke+Math.imul(ot,dr)|0,Qe=Qe+Math.imul(it,lr)|0,Te=Te+Math.imul(it,hr)|0,Te=Te+Math.imul(at,lr)|0,Ke=Ke+Math.imul(at,hr)|0;var Bn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,Qe=Math.imul(Bt,qt),Te=Math.imul(Bt,er),Te=Te+Math.imul(It,qt)|0,Ke=Math.imul(It,er),Qe=Qe+Math.imul(Tt,Lt)|0,Te=Te+Math.imul(Tt,jt)|0,Te=Te+Math.imul(Dt,Lt)|0,Ke=Ke+Math.imul(Dt,jt)|0,Qe=Qe+Math.imul(St,Gt)|0,Te=Te+Math.imul(St,Jt)|0,Te=Te+Math.imul(_t,Gt)|0,Ke=Ke+Math.imul(_t,Jt)|0,Qe=Qe+Math.imul(pt,Wt)|0,Te=Te+Math.imul(pt,nr)|0,Te=Te+Math.imul(vt,Wt)|0,Ke=Ke+Math.imul(vt,nr)|0,Qe=Qe+Math.imul(Rt,Zt)|0,Te=Te+Math.imul(Rt,ir)|0,Te=Te+Math.imul(gt,Zt)|0,Ke=Ke+Math.imul(gt,ir)|0,Qe=Qe+Math.imul(wt,tr)|0,Te=Te+Math.imul(wt,cr)|0,Te=Te+Math.imul(Et,tr)|0,Ke=Ke+Math.imul(Et,cr)|0,Qe=Qe+Math.imul(dt,sr)|0,Te=Te+Math.imul(dt,dr)|0,Te=Te+Math.imul(mt,sr)|0,Ke=Ke+Math.imul(mt,dr)|0,Qe=Qe+Math.imul(ct,lr)|0,Te=Te+Math.imul(ct,hr)|0,Te=Te+Math.imul(ot,lr)|0,Ke=Ke+Math.imul(ot,hr)|0,Qe=Qe+Math.imul(it,ur)|0,Te=Te+Math.imul(it,pr)|0,Te=Te+Math.imul(at,ur)|0,Ke=Ke+Math.imul(at,pr)|0;var On=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(On>>>26)|0,On&=67108863,Qe=Math.imul(Pt,qt),Te=Math.imul(Pt,er),Te=Te+Math.imul(Vt,qt)|0,Ke=Math.imul(Vt,er),Qe=Qe+Math.imul(Bt,Lt)|0,Te=Te+Math.imul(Bt,jt)|0,Te=Te+Math.imul(It,Lt)|0,Ke=Ke+Math.imul(It,jt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Te=Te+Math.imul(Tt,Jt)|0,Te=Te+Math.imul(Dt,Gt)|0,Ke=Ke+Math.imul(Dt,Jt)|0,Qe=Qe+Math.imul(St,Wt)|0,Te=Te+Math.imul(St,nr)|0,Te=Te+Math.imul(_t,Wt)|0,Ke=Ke+Math.imul(_t,nr)|0,Qe=Qe+Math.imul(pt,Zt)|0,Te=Te+Math.imul(pt,ir)|0,Te=Te+Math.imul(vt,Zt)|0,Ke=Ke+Math.imul(vt,ir)|0,Qe=Qe+Math.imul(Rt,tr)|0,Te=Te+Math.imul(Rt,cr)|0,Te=Te+Math.imul(gt,tr)|0,Ke=Ke+Math.imul(gt,cr)|0,Qe=Qe+Math.imul(wt,sr)|0,Te=Te+Math.imul(wt,dr)|0,Te=Te+Math.imul(Et,sr)|0,Ke=Ke+Math.imul(Et,dr)|0,Qe=Qe+Math.imul(dt,lr)|0,Te=Te+Math.imul(dt,hr)|0,Te=Te+Math.imul(mt,lr)|0,Ke=Ke+Math.imul(mt,hr)|0,Qe=Qe+Math.imul(ct,ur)|0,Te=Te+Math.imul(ct,pr)|0,Te=Te+Math.imul(ot,ur)|0,Ke=Ke+Math.imul(ot,pr)|0,Qe=Qe+Math.imul(it,Yt)|0,Te=Te+Math.imul(it,or)|0,Te=Te+Math.imul(at,Yt)|0,Ke=Ke+Math.imul(at,or)|0;var In=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(In>>>26)|0,In&=67108863,Qe=Math.imul(Pt,Lt),Te=Math.imul(Pt,jt),Te=Te+Math.imul(Vt,Lt)|0,Ke=Math.imul(Vt,jt),Qe=Qe+Math.imul(Bt,Gt)|0,Te=Te+Math.imul(Bt,Jt)|0,Te=Te+Math.imul(It,Gt)|0,Ke=Ke+Math.imul(It,Jt)|0,Qe=Qe+Math.imul(Tt,Wt)|0,Te=Te+Math.imul(Tt,nr)|0,Te=Te+Math.imul(Dt,Wt)|0,Ke=Ke+Math.imul(Dt,nr)|0,Qe=Qe+Math.imul(St,Zt)|0,Te=Te+Math.imul(St,ir)|0,Te=Te+Math.imul(_t,Zt)|0,Ke=Ke+Math.imul(_t,ir)|0,Qe=Qe+Math.imul(pt,tr)|0,Te=Te+Math.imul(pt,cr)|0,Te=Te+Math.imul(vt,tr)|0,Ke=Ke+Math.imul(vt,cr)|0,Qe=Qe+Math.imul(Rt,sr)|0,Te=Te+Math.imul(Rt,dr)|0,Te=Te+Math.imul(gt,sr)|0,Ke=Ke+Math.imul(gt,dr)|0,Qe=Qe+Math.imul(wt,lr)|0,Te=Te+Math.imul(wt,hr)|0,Te=Te+Math.imul(Et,lr)|0,Ke=Ke+Math.imul(Et,hr)|0,Qe=Qe+Math.imul(dt,ur)|0,Te=Te+Math.imul(dt,pr)|0,Te=Te+Math.imul(mt,ur)|0,Ke=Ke+Math.imul(mt,pr)|0,Qe=Qe+Math.imul(ct,Yt)|0,Te=Te+Math.imul(ct,or)|0,Te=Te+Math.imul(ot,Yt)|0,Ke=Ke+Math.imul(ot,or)|0;var Ln=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,Qe=Math.imul(Pt,Gt),Te=Math.imul(Pt,Jt),Te=Te+Math.imul(Vt,Gt)|0,Ke=Math.imul(Vt,Jt),Qe=Qe+Math.imul(Bt,Wt)|0,Te=Te+Math.imul(Bt,nr)|0,Te=Te+Math.imul(It,Wt)|0,Ke=Ke+Math.imul(It,nr)|0,Qe=Qe+Math.imul(Tt,Zt)|0,Te=Te+Math.imul(Tt,ir)|0,Te=Te+Math.imul(Dt,Zt)|0,Ke=Ke+Math.imul(Dt,ir)|0,Qe=Qe+Math.imul(St,tr)|0,Te=Te+Math.imul(St,cr)|0,Te=Te+Math.imul(_t,tr)|0,Ke=Ke+Math.imul(_t,cr)|0,Qe=Qe+Math.imul(pt,sr)|0,Te=Te+Math.imul(pt,dr)|0,Te=Te+Math.imul(vt,sr)|0,Ke=Ke+Math.imul(vt,dr)|0,Qe=Qe+Math.imul(Rt,lr)|0,Te=Te+Math.imul(Rt,hr)|0,Te=Te+Math.imul(gt,lr)|0,Ke=Ke+Math.imul(gt,hr)|0,Qe=Qe+Math.imul(wt,ur)|0,Te=Te+Math.imul(wt,pr)|0,Te=Te+Math.imul(Et,ur)|0,Ke=Ke+Math.imul(Et,pr)|0,Qe=Qe+Math.imul(dt,Yt)|0,Te=Te+Math.imul(dt,or)|0,Te=Te+Math.imul(mt,Yt)|0,Ke=Ke+Math.imul(mt,or)|0;var Tn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Qe=Math.imul(Pt,Wt),Te=Math.imul(Pt,nr),Te=Te+Math.imul(Vt,Wt)|0,Ke=Math.imul(Vt,nr),Qe=Qe+Math.imul(Bt,Zt)|0,Te=Te+Math.imul(Bt,ir)|0,Te=Te+Math.imul(It,Zt)|0,Ke=Ke+Math.imul(It,ir)|0,Qe=Qe+Math.imul(Tt,tr)|0,Te=Te+Math.imul(Tt,cr)|0,Te=Te+Math.imul(Dt,tr)|0,Ke=Ke+Math.imul(Dt,cr)|0,Qe=Qe+Math.imul(St,sr)|0,Te=Te+Math.imul(St,dr)|0,Te=Te+Math.imul(_t,sr)|0,Ke=Ke+Math.imul(_t,dr)|0,Qe=Qe+Math.imul(pt,lr)|0,Te=Te+Math.imul(pt,hr)|0,Te=Te+Math.imul(vt,lr)|0,Ke=Ke+Math.imul(vt,hr)|0,Qe=Qe+Math.imul(Rt,ur)|0,Te=Te+Math.imul(Rt,pr)|0,Te=Te+Math.imul(gt,ur)|0,Ke=Ke+Math.imul(gt,pr)|0,Qe=Qe+Math.imul(wt,Yt)|0,Te=Te+Math.imul(wt,or)|0,Te=Te+Math.imul(Et,Yt)|0,Ke=Ke+Math.imul(Et,or)|0;var Rn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Qe=Math.imul(Pt,Zt),Te=Math.imul(Pt,ir),Te=Te+Math.imul(Vt,Zt)|0,Ke=Math.imul(Vt,ir),Qe=Qe+Math.imul(Bt,tr)|0,Te=Te+Math.imul(Bt,cr)|0,Te=Te+Math.imul(It,tr)|0,Ke=Ke+Math.imul(It,cr)|0,Qe=Qe+Math.imul(Tt,sr)|0,Te=Te+Math.imul(Tt,dr)|0,Te=Te+Math.imul(Dt,sr)|0,Ke=Ke+Math.imul(Dt,dr)|0,Qe=Qe+Math.imul(St,lr)|0,Te=Te+Math.imul(St,hr)|0,Te=Te+Math.imul(_t,lr)|0,Ke=Ke+Math.imul(_t,hr)|0,Qe=Qe+Math.imul(pt,ur)|0,Te=Te+Math.imul(pt,pr)|0,Te=Te+Math.imul(vt,ur)|0,Ke=Ke+Math.imul(vt,pr)|0,Qe=Qe+Math.imul(Rt,Yt)|0,Te=Te+Math.imul(Rt,or)|0,Te=Te+Math.imul(gt,Yt)|0,Ke=Ke+Math.imul(gt,or)|0;var $n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+($n>>>26)|0,$n&=67108863,Qe=Math.imul(Pt,tr),Te=Math.imul(Pt,cr),Te=Te+Math.imul(Vt,tr)|0,Ke=Math.imul(Vt,cr),Qe=Qe+Math.imul(Bt,sr)|0,Te=Te+Math.imul(Bt,dr)|0,Te=Te+Math.imul(It,sr)|0,Ke=Ke+Math.imul(It,dr)|0,Qe=Qe+Math.imul(Tt,lr)|0,Te=Te+Math.imul(Tt,hr)|0,Te=Te+Math.imul(Dt,lr)|0,Ke=Ke+Math.imul(Dt,hr)|0,Qe=Qe+Math.imul(St,ur)|0,Te=Te+Math.imul(St,pr)|0,Te=Te+Math.imul(_t,ur)|0,Ke=Ke+Math.imul(_t,pr)|0,Qe=Qe+Math.imul(pt,Yt)|0,Te=Te+Math.imul(pt,or)|0,Te=Te+Math.imul(vt,Yt)|0,Ke=Ke+Math.imul(vt,or)|0;var Cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Qe=Math.imul(Pt,sr),Te=Math.imul(Pt,dr),Te=Te+Math.imul(Vt,sr)|0,Ke=Math.imul(Vt,dr),Qe=Qe+Math.imul(Bt,lr)|0,Te=Te+Math.imul(Bt,hr)|0,Te=Te+Math.imul(It,lr)|0,Ke=Ke+Math.imul(It,hr)|0,Qe=Qe+Math.imul(Tt,ur)|0,Te=Te+Math.imul(Tt,pr)|0,Te=Te+Math.imul(Dt,ur)|0,Ke=Ke+Math.imul(Dt,pr)|0,Qe=Qe+Math.imul(St,Yt)|0,Te=Te+Math.imul(St,or)|0,Te=Te+Math.imul(_t,Yt)|0,Ke=Ke+Math.imul(_t,or)|0;var Sn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Qe=Math.imul(Pt,lr),Te=Math.imul(Pt,hr),Te=Te+Math.imul(Vt,lr)|0,Ke=Math.imul(Vt,hr),Qe=Qe+Math.imul(Bt,ur)|0,Te=Te+Math.imul(Bt,pr)|0,Te=Te+Math.imul(It,ur)|0,Ke=Ke+Math.imul(It,pr)|0,Qe=Qe+Math.imul(Tt,Yt)|0,Te=Te+Math.imul(Tt,or)|0,Te=Te+Math.imul(Dt,Yt)|0,Ke=Ke+Math.imul(Dt,or)|0;var gn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(gn>>>26)|0,gn&=67108863,Qe=Math.imul(Pt,ur),Te=Math.imul(Pt,pr),Te=Te+Math.imul(Vt,ur)|0,Ke=Math.imul(Vt,pr),Qe=Qe+Math.imul(Bt,Yt)|0,Te=Te+Math.imul(Bt,or)|0,Te=Te+Math.imul(It,Yt)|0,Ke=Ke+Math.imul(It,or)|0;var Mn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Qe=Math.imul(Pt,Yt),Te=Math.imul(Pt,or),Te=Te+Math.imul(Vt,Yt)|0,Ke=Math.imul(Vt,or);var yn=(Ye+Qe|0)+((Te&8191)<<13)|0;return Ye=(Ke+(Te>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ge[0]=Fr,Ge[1]=kr,Ge[2]=Kr,Ge[3]=cn,Ge[4]=An,Ge[5]=_n,Ge[6]=wn,Ge[7]=Bn,Ge[8]=On,Ge[9]=In,Ge[10]=Ln,Ge[11]=Tn,Ge[12]=Rn,Ge[13]=$n,Ge[14]=Cn,Ge[15]=Sn,Ge[16]=gn,Ge[17]=Mn,Ge[18]=yn,Ye!==0&&(Ge[19]=Ye,Be.length++),Be};Math.imul||(Ie=$e);function Fe(qe,Se,Re){Re.negative=Se.negative^qe.negative,Re.length=qe.length+Se.length;for(var Be=0,Ne=0,Ue=0;Ue<Re.length-1;Ue++){var Ge=Ne;Ne=0;for(var Ye=Be&67108863,Qe=Math.min(Ue,Se.length-1),Te=Math.max(0,Ue-qe.length+1);Te<=Qe;Te++){var Ke=Ue-Te,rt=qe.words[Ke]|0,it=Se.words[Te]|0,at=rt*it,lt=at&67108863;Ge=Ge+(at/67108864|0)|0,lt=lt+Ye|0,Ye=lt&67108863,Ge=Ge+(lt>>>26)|0,Ne+=Ge>>>26,Ge&=67108863}Re.words[Ue]=Ye,Be=Ge,Ge=Ne}return Be!==0?Re.words[Ue]=Be:Re.length--,Re.strip()}function ke(qe,Se,Re){var Be=new je;return Be.mulp(qe,Se,Re)}ue.prototype.mulTo=function(Se,Re){var Be,Ne=this.length+Se.length;return this.length===10&&Se.length===10?Be=Ie(this,Se,Re):Ne<63?Be=$e(this,Se,Re):Ne<1024?Be=Fe(this,Se,Re):Be=ke(this,Se,Re),Be};function je(qe,Se){this.x=qe,this.y=Se}je.prototype.makeRBT=function(Se){for(var Re=new Array(Se),Be=ue.prototype._countBits(Se)-1,Ne=0;Ne<Se;Ne++)Re[Ne]=this.revBin(Ne,Be,Se);return Re},je.prototype.revBin=function(Se,Re,Be){if(Se===0||Se===Be-1)return Se;for(var Ne=0,Ue=0;Ue<Re;Ue++)Ne|=(Se&1)<<Re-Ue-1,Se>>=1;return Ne},je.prototype.permute=function(Se,Re,Be,Ne,Ue,Ge){for(var Ye=0;Ye<Ge;Ye++)Ne[Ye]=Re[Se[Ye]],Ue[Ye]=Be[Se[Ye]]},je.prototype.transform=function(Se,Re,Be,Ne,Ue,Ge){this.permute(Ge,Se,Re,Be,Ne,Ue);for(var Ye=1;Ye<Ue;Ye<<=1)for(var Qe=Ye<<1,Te=Math.cos(2*Math.PI/Qe),Ke=Math.sin(2*Math.PI/Qe),rt=0;rt<Ue;rt+=Qe)for(var it=Te,at=Ke,lt=0;lt<Ye;lt++){var ct=Be[rt+lt],ot=Ne[rt+lt],ft=Be[rt+lt+Ye],dt=Ne[rt+lt+Ye],mt=it*ft-at*dt;dt=it*dt+at*ft,ft=mt,Be[rt+lt]=ct+ft,Ne[rt+lt]=ot+dt,Be[rt+lt+Ye]=ct-ft,Ne[rt+lt+Ye]=ot-dt,lt!==Qe&&(mt=Te*it-Ke*at,at=Te*at+Ke*it,it=mt)}},je.prototype.guessLen13b=function(Se,Re){var Be=Math.max(Re,Se)|1,Ne=Be&1,Ue=0;for(Be=Be/2|0;Be;Be=Be>>>1)Ue++;return 1<<Ue+1+Ne},je.prototype.conjugate=function(Se,Re,Be){if(!(Be<=1))for(var Ne=0;Ne<Be/2;Ne++){var Ue=Se[Ne];Se[Ne]=Se[Be-Ne-1],Se[Be-Ne-1]=Ue,Ue=Re[Ne],Re[Ne]=-Re[Be-Ne-1],Re[Be-Ne-1]=-Ue}},je.prototype.normalize13b=function(Se,Re){for(var Be=0,Ne=0;Ne<Re/2;Ne++){var Ue=Math.round(Se[2*Ne+1]/Re)*8192+Math.round(Se[2*Ne]/Re)+Be;Se[Ne]=Ue&67108863,Ue<67108864?Be=0:Be=Ue/67108864|0}return Se},je.prototype.convert13b=function(Se,Re,Be,Ne){for(var Ue=0,Ge=0;Ge<Re;Ge++)Ue=Ue+(Se[Ge]|0),Be[2*Ge]=Ue&8191,Ue=Ue>>>13,Be[2*Ge+1]=Ue&8191,Ue=Ue>>>13;for(Ge=2*Re;Ge<Ne;++Ge)Be[Ge]=0;oe(Ue===0),oe((Ue&-8192)===0)},je.prototype.stub=function(Se){for(var Re=new Array(Se),Be=0;Be<Se;Be++)Re[Be]=0;return Re},je.prototype.mulp=function(Se,Re,Be){var Ne=2*this.guessLen13b(Se.length,Re.length),Ue=this.makeRBT(Ne),Ge=this.stub(Ne),Ye=new Array(Ne),Qe=new Array(Ne),Te=new Array(Ne),Ke=new Array(Ne),rt=new Array(Ne),it=new Array(Ne),at=Be.words;at.length=Ne,this.convert13b(Se.words,Se.length,Ye,Ne),this.convert13b(Re.words,Re.length,Ke,Ne),this.transform(Ye,Ge,Qe,Te,Ne,Ue),this.transform(Ke,Ge,rt,it,Ne,Ue);for(var lt=0;lt<Ne;lt++){var ct=Qe[lt]*rt[lt]-Te[lt]*it[lt];Te[lt]=Qe[lt]*it[lt]+Te[lt]*rt[lt],Qe[lt]=ct}return this.conjugate(Qe,Te,Ne),this.transform(Qe,Te,at,Ge,Ne,Ue),this.conjugate(at,Ge,Ne),this.normalize13b(at,Ne),Be.negative=Se.negative^Re.negative,Be.length=Se.length+Re.length,Be.strip()},ue.prototype.mul=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),this.mulTo(Se,Re)},ue.prototype.mulf=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),ke(this,Se,Re)},ue.prototype.imul=function(Se){return this.clone().mulTo(Se,this)},ue.prototype.imuln=function(Se){oe(typeof Se=="number"),oe(Se<67108864);for(var Re=0,Be=0;Be<this.length;Be++){var Ne=(this.words[Be]|0)*Se,Ue=(Ne&67108863)+(Re&67108863);Re>>=26,Re+=Ne/67108864|0,Re+=Ue>>>26,this.words[Be]=Ue&67108863}return Re!==0&&(this.words[Be]=Re,this.length++),this},ue.prototype.muln=function(Se){return this.clone().imuln(Se)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(Se){var Re=_e(Se);if(Re.length===0)return new ue(1);for(var Be=this,Ne=0;Ne<Re.length&&Re[Ne]===0;Ne++,Be=Be.sqr());if(++Ne<Re.length)for(var Ue=Be.sqr();Ne<Re.length;Ne++,Ue=Ue.sqr())Re[Ne]!==0&&(Be=Be.mul(Ue));return Be},ue.prototype.iushln=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=67108863>>>26-Re<<26-Re,Ue;if(Re!==0){var Ge=0;for(Ue=0;Ue<this.length;Ue++){var Ye=this.words[Ue]&Ne,Qe=(this.words[Ue]|0)-Ye<<Re;this.words[Ue]=Qe|Ge,Ge=Ye>>>26-Re}Ge&&(this.words[Ue]=Ge,this.length++)}if(Be!==0){for(Ue=this.length-1;Ue>=0;Ue--)this.words[Ue+Be]=this.words[Ue];for(Ue=0;Ue<Be;Ue++)this.words[Ue]=0;this.length+=Be}return this.strip()},ue.prototype.ishln=function(Se){return oe(this.negative===0),this.iushln(Se)},ue.prototype.iushrn=function(Se,Re,Be){oe(typeof Se=="number"&&Se>=0);var Ne;Re?Ne=(Re-Re%26)/26:Ne=0;var Ue=Se%26,Ge=Math.min((Se-Ue)/26,this.length),Ye=67108863^67108863>>>Ue<<Ue,Qe=Be;if(Ne-=Ge,Ne=Math.max(0,Ne),Qe){for(var Te=0;Te<Ge;Te++)Qe.words[Te]=this.words[Te];Qe.length=Ge}if(Ge!==0)if(this.length>Ge)for(this.length-=Ge,Te=0;Te<this.length;Te++)this.words[Te]=this.words[Te+Ge];else this.words[0]=0,this.length=1;var Ke=0;for(Te=this.length-1;Te>=0&&(Ke!==0||Te>=Ne);Te--){var rt=this.words[Te]|0;this.words[Te]=Ke<<26-Ue|rt>>>Ue,Ke=rt&Ye}return Qe&&Ke!==0&&(Qe.words[Qe.length++]=Ke),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(Se,Re,Be){return oe(this.negative===0),this.iushrn(Se,Re,Be)},ue.prototype.shln=function(Se){return this.clone().ishln(Se)},ue.prototype.ushln=function(Se){return this.clone().iushln(Se)},ue.prototype.shrn=function(Se){return this.clone().ishrn(Se)},ue.prototype.ushrn=function(Se){return this.clone().iushrn(Se)},ue.prototype.testn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return!1;var Ue=this.words[Be];return!!(Ue&Ne)},ue.prototype.imaskn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Be)return this;if(Re!==0&&Be++,this.length=Math.min(Be,this.length),Re!==0){var Ne=67108863^67108863>>>Re<<Re;this.words[this.length-1]&=Ne}return this.strip()},ue.prototype.maskn=function(Se){return this.clone().imaskn(Se)},ue.prototype.iaddn=function(Se){return oe(typeof Se=="number"),oe(Se<67108864),Se<0?this.isubn(-Se):this.negative!==0?this.length===1&&(this.words[0]|0)<Se?(this.words[0]=Se-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Se),this.negative=1,this):this._iaddn(Se)},ue.prototype._iaddn=function(Se){this.words[0]+=Se;for(var Re=0;Re<this.length&&this.words[Re]>=67108864;Re++)this.words[Re]-=67108864,Re===this.length-1?this.words[Re+1]=1:this.words[Re+1]++;return this.length=Math.max(this.length,Re+1),this},ue.prototype.isubn=function(Se){if(oe(typeof Se=="number"),oe(Se<67108864),Se<0)return this.iaddn(-Se);if(this.negative!==0)return this.negative=0,this.iaddn(Se),this.negative=1,this;if(this.words[0]-=Se,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Re=0;Re<this.length&&this.words[Re]<0;Re++)this.words[Re]+=67108864,this.words[Re+1]-=1;return this.strip()},ue.prototype.addn=function(Se){return this.clone().iaddn(Se)},ue.prototype.subn=function(Se){return this.clone().isubn(Se)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(Se,Re,Be){var Ne=Se.length+Be,Ue;this._expand(Ne);var Ge,Ye=0;for(Ue=0;Ue<Se.length;Ue++){Ge=(this.words[Ue+Be]|0)+Ye;var Qe=(Se.words[Ue]|0)*Re;Ge-=Qe&67108863,Ye=(Ge>>26)-(Qe/67108864|0),this.words[Ue+Be]=Ge&67108863}for(;Ue<this.length-Be;Ue++)Ge=(this.words[Ue+Be]|0)+Ye,Ye=Ge>>26,this.words[Ue+Be]=Ge&67108863;if(Ye===0)return this.strip();for(oe(Ye===-1),Ye=0,Ue=0;Ue<this.length;Ue++)Ge=-(this.words[Ue]|0)+Ye,Ye=Ge>>26,this.words[Ue]=Ge&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(Se,Re){var Be=this.length-Se.length,Ne=this.clone(),Ue=Se,Ge=Ue.words[Ue.length-1]|0,Ye=this._countBits(Ge);Be=26-Ye,Be!==0&&(Ue=Ue.ushln(Be),Ne.iushln(Be),Ge=Ue.words[Ue.length-1]|0);var Qe=Ne.length-Ue.length,Te;if(Re!=="mod"){Te=new ue(null),Te.length=Qe+1,Te.words=new Array(Te.length);for(var Ke=0;Ke<Te.length;Ke++)Te.words[Ke]=0}var rt=Ne.clone()._ishlnsubmul(Ue,1,Qe);rt.negative===0&&(Ne=rt,Te&&(Te.words[Qe]=1));for(var it=Qe-1;it>=0;it--){var at=(Ne.words[Ue.length+it]|0)*67108864+(Ne.words[Ue.length+it-1]|0);for(at=Math.min(at/Ge|0,67108863),Ne._ishlnsubmul(Ue,at,it);Ne.negative!==0;)at--,Ne.negative=0,Ne._ishlnsubmul(Ue,1,it),Ne.isZero()||(Ne.negative^=1);Te&&(Te.words[it]=at)}return Te&&Te.strip(),Ne.strip(),Re!=="div"&&Be!==0&&Ne.iushrn(Be),{div:Te||null,mod:Ne}},ue.prototype.divmod=function(Se,Re,Be){if(oe(!Se.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ne,Ue,Ge;return this.negative!==0&&Se.negative===0?(Ge=this.neg().divmod(Se,Re),Re!=="mod"&&(Ne=Ge.div.neg()),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.iadd(Se)),{div:Ne,mod:Ue}):this.negative===0&&Se.negative!==0?(Ge=this.divmod(Se.neg(),Re),Re!=="mod"&&(Ne=Ge.div.neg()),{div:Ne,mod:Ge.mod}):this.negative&Se.negative?(Ge=this.neg().divmod(Se.neg(),Re),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.isub(Se)),{div:Ge.div,mod:Ue}):Se.length>this.length||this.cmp(Se)<0?{div:new ue(0),mod:this}:Se.length===1?Re==="div"?{div:this.divn(Se.words[0]),mod:null}:Re==="mod"?{div:null,mod:new ue(this.modn(Se.words[0]))}:{div:this.divn(Se.words[0]),mod:new ue(this.modn(Se.words[0]))}:this._wordDiv(Se,Re)},ue.prototype.div=function(Se){return this.divmod(Se,"div",!1).div},ue.prototype.mod=function(Se){return this.divmod(Se,"mod",!1).mod},ue.prototype.umod=function(Se){return this.divmod(Se,"mod",!0).mod},ue.prototype.divRound=function(Se){var Re=this.divmod(Se);if(Re.mod.isZero())return Re.div;var Be=Re.div.negative!==0?Re.mod.isub(Se):Re.mod,Ne=Se.ushrn(1),Ue=Se.andln(1),Ge=Be.cmp(Ne);return Ge<0||Ue===1&&Ge===0?Re.div:Re.div.negative!==0?Re.div.isubn(1):Re.div.iaddn(1)},ue.prototype.modn=function(Se){oe(Se<=67108863);for(var Re=(1<<26)%Se,Be=0,Ne=this.length-1;Ne>=0;Ne--)Be=(Re*Be+(this.words[Ne]|0))%Se;return Be},ue.prototype.idivn=function(Se){oe(Se<=67108863);for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=(this.words[Be]|0)+Re*67108864;this.words[Be]=Ne/Se|0,Re=Ne%Se}return this.strip()},ue.prototype.divn=function(Se){return this.clone().idivn(Se)},ue.prototype.egcd=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=new ue(0),Ye=new ue(1),Qe=0;Re.isEven()&&Be.isEven();)Re.iushrn(1),Be.iushrn(1),++Qe;for(var Te=Be.clone(),Ke=Re.clone();!Re.isZero();){for(var rt=0,it=1;!(Re.words[0]&it)&&rt<26;++rt,it<<=1);if(rt>0)for(Re.iushrn(rt);rt-- >0;)(Ne.isOdd()||Ue.isOdd())&&(Ne.iadd(Te),Ue.isub(Ke)),Ne.iushrn(1),Ue.iushrn(1);for(var at=0,lt=1;!(Be.words[0]&lt)&&at<26;++at,lt<<=1);if(at>0)for(Be.iushrn(at);at-- >0;)(Ge.isOdd()||Ye.isOdd())&&(Ge.iadd(Te),Ye.isub(Ke)),Ge.iushrn(1),Ye.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ge),Ue.isub(Ye)):(Be.isub(Re),Ge.isub(Ne),Ye.isub(Ue))}return{a:Ge,b:Ye,gcd:Be.iushln(Qe)}},ue.prototype._invmp=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=Be.clone();Re.cmpn(1)>0&&Be.cmpn(1)>0;){for(var Ye=0,Qe=1;!(Re.words[0]&Qe)&&Ye<26;++Ye,Qe<<=1);if(Ye>0)for(Re.iushrn(Ye);Ye-- >0;)Ne.isOdd()&&Ne.iadd(Ge),Ne.iushrn(1);for(var Te=0,Ke=1;!(Be.words[0]&Ke)&&Te<26;++Te,Ke<<=1);if(Te>0)for(Be.iushrn(Te);Te-- >0;)Ue.isOdd()&&Ue.iadd(Ge),Ue.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ue)):(Be.isub(Re),Ue.isub(Ne))}var rt;return Re.cmpn(1)===0?rt=Ne:rt=Ue,rt.cmpn(0)<0&&rt.iadd(Se),rt},ue.prototype.gcd=function(Se){if(this.isZero())return Se.abs();if(Se.isZero())return this.abs();var Re=this.clone(),Be=Se.clone();Re.negative=0,Be.negative=0;for(var Ne=0;Re.isEven()&&Be.isEven();Ne++)Re.iushrn(1),Be.iushrn(1);do{for(;Re.isEven();)Re.iushrn(1);for(;Be.isEven();)Be.iushrn(1);var Ue=Re.cmp(Be);if(Ue<0){var Ge=Re;Re=Be,Be=Ge}else if(Ue===0||Be.cmpn(1)===0)break;Re.isub(Be)}while(!0);return Be.iushln(Ne)},ue.prototype.invm=function(Se){return this.egcd(Se).a.umod(Se)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(Se){return this.words[0]&Se},ue.prototype.bincn=function(Se){oe(typeof Se=="number");var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return this._expand(Be+1),this.words[Be]|=Ne,this;for(var Ue=Ne,Ge=Be;Ue!==0&&Ge<this.length;Ge++){var Ye=this.words[Ge]|0;Ye+=Ue,Ue=Ye>>>26,Ye&=67108863,this.words[Ge]=Ye}return Ue!==0&&(this.words[Ge]=Ue,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(Se){var Re=Se<0;if(this.negative!==0&&!Re)return-1;if(this.negative===0&&Re)return 1;this.strip();var Be;if(this.length>1)Be=1;else{Re&&(Se=-Se),oe(Se<=67108863,"Number is too big");var Ne=this.words[0]|0;Be=Ne===Se?0:Ne<Se?-1:1}return this.negative!==0?-Be|0:Be},ue.prototype.cmp=function(Se){if(this.negative!==0&&Se.negative===0)return-1;if(this.negative===0&&Se.negative!==0)return 1;var Re=this.ucmp(Se);return this.negative!==0?-Re|0:Re},ue.prototype.ucmp=function(Se){if(this.length>Se.length)return 1;if(this.length<Se.length)return-1;for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=this.words[Be]|0,Ue=Se.words[Be]|0;if(Ne!==Ue){Ne<Ue?Re=-1:Ne>Ue&&(Re=1);break}}return Re},ue.prototype.gtn=function(Se){return this.cmpn(Se)===1},ue.prototype.gt=function(Se){return this.cmp(Se)===1},ue.prototype.gten=function(Se){return this.cmpn(Se)>=0},ue.prototype.gte=function(Se){return this.cmp(Se)>=0},ue.prototype.ltn=function(Se){return this.cmpn(Se)===-1},ue.prototype.lt=function(Se){return this.cmp(Se)===-1},ue.prototype.lten=function(Se){return this.cmpn(Se)<=0},ue.prototype.lte=function(Se){return this.cmp(Se)<=0},ue.prototype.eqn=function(Se){return this.cmpn(Se)===0},ue.prototype.eq=function(Se){return this.cmp(Se)===0},ue.red=function(Se){return new tt(Se)},ue.prototype.toRed=function(Se){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),Se.convertTo(this)._forceRed(Se)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(Se){return this.red=Se,this},ue.prototype.forceRed=function(Se){return oe(!this.red,"Already a number in reduction context"),this._forceRed(Se)},ue.prototype.redAdd=function(Se){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,Se)},ue.prototype.redIAdd=function(Se){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Se)},ue.prototype.redSub=function(Se){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,Se)},ue.prototype.redISub=function(Se){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,Se)},ue.prototype.redShl=function(Se){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,Se)},ue.prototype.redMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.mul(this,Se)},ue.prototype.redIMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.imul(this,Se)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(Se){return oe(this.red&&!Se.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Se)};var We={k256:null,p224:null,p192:null,p25519:null};function ze(qe,Se){this.name=qe,this.p=new ue(Se,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var Se=new ue(null);return Se.words=new Array(Math.ceil(this.n/13)),Se},ze.prototype.ireduce=function(Se){var Re=Se,Be;do this.split(Re,this.tmp),Re=this.imulK(Re),Re=Re.iadd(this.tmp),Be=Re.bitLength();while(Be>this.n);var Ne=Be<this.n?-1:Re.ucmp(this.p);return Ne===0?(Re.words[0]=0,Re.length=1):Ne>0?Re.isub(this.p):Re.strip!==void 0?Re.strip():Re._strip(),Re},ze.prototype.split=function(Se,Re){Se.iushrn(this.n,0,Re)},ze.prototype.imulK=function(Se){return Se.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(Se,Re){for(var Be=4194303,Ne=Math.min(Se.length,9),Ue=0;Ue<Ne;Ue++)Re.words[Ue]=Se.words[Ue];if(Re.length=Ne,Se.length<=9){Se.words[0]=0,Se.length=1;return}var Ge=Se.words[9];for(Re.words[Re.length++]=Ge&Be,Ue=10;Ue<Se.length;Ue++){var Ye=Se.words[Ue]|0;Se.words[Ue-10]=(Ye&Be)<<4|Ge>>>22,Ge=Ye}Ge>>>=22,Se.words[Ue-10]=Ge,Ge===0&&Se.length>10?Se.length-=10:Se.length-=9},Xe.prototype.imulK=function(Se){Se.words[Se.length]=0,Se.words[Se.length+1]=0,Se.length+=2;for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=Se.words[Be]|0;Re+=Ne*977,Se.words[Be]=Re&67108863,Re=Ne*64+(Re/67108864|0)}return Se.words[Se.length-1]===0&&(Se.length--,Se.words[Se.length-1]===0&&Se.length--),Se};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function nt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(nt,ze);function et(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(et,ze),et.prototype.imulK=function(Se){for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=(Se.words[Be]|0)*19+Re,Ue=Ne&67108863;Ne>>>=26,Se.words[Be]=Ue,Re=Ne}return Re!==0&&(Se.words[Se.length++]=Re),Se},ue._prime=function(Se){if(We[Se])return We[Se];var Re;if(Se==="k256")Re=new Xe;else if(Se==="p224")Re=new Je;else if(Se==="p192")Re=new nt;else if(Se==="p25519")Re=new et;else throw new Error("Unknown prime "+Se);return We[Se]=Re,Re};function tt(qe){if(typeof qe=="string"){var Se=ue._prime(qe);this.m=Se.p,this.prime=Se}else oe(qe.gtn(1),"modulus must be greater than 1"),this.m=qe,this.prime=null}tt.prototype._verify1=function(Se){oe(Se.negative===0,"red works only with positives"),oe(Se.red,"red works only with red numbers")},tt.prototype._verify2=function(Se,Re){oe((Se.negative|Re.negative)===0,"red works only with positives"),oe(Se.red&&Se.red===Re.red,"red works only with red numbers")},tt.prototype.imod=function(Se){return this.prime?this.prime.ireduce(Se)._forceRed(this):Se.umod(this.m)._forceRed(this)},tt.prototype.neg=function(Se){return Se.isZero()?Se.clone():this.m.sub(Se)._forceRed(this)},tt.prototype.add=function(Se,Re){this._verify2(Se,Re);var Be=Se.add(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be._forceRed(this)},tt.prototype.iadd=function(Se,Re){this._verify2(Se,Re);var Be=Se.iadd(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be},tt.prototype.sub=function(Se,Re){this._verify2(Se,Re);var Be=Se.sub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be._forceRed(this)},tt.prototype.isub=function(Se,Re){this._verify2(Se,Re);var Be=Se.isub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be},tt.prototype.shl=function(Se,Re){return this._verify1(Se),this.imod(Se.ushln(Re))},tt.prototype.imul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.imul(Re))},tt.prototype.mul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.mul(Re))},tt.prototype.isqr=function(Se){return this.imul(Se,Se.clone())},tt.prototype.sqr=function(Se){return this.mul(Se,Se)},tt.prototype.sqrt=function(Se){if(Se.isZero())return Se.clone();var Re=this.m.andln(3);if(oe(Re%2===1),Re===3){var Be=this.m.add(new ue(1)).iushrn(2);return this.pow(Se,Be)}for(var Ne=this.m.subn(1),Ue=0;!Ne.isZero()&&Ne.andln(1)===0;)Ue++,Ne.iushrn(1);oe(!Ne.isZero());var Ge=new ue(1).toRed(this),Ye=Ge.redNeg(),Qe=this.m.subn(1).iushrn(1),Te=this.m.bitLength();for(Te=new ue(2*Te*Te).toRed(this);this.pow(Te,Qe).cmp(Ye)!==0;)Te.redIAdd(Ye);for(var Ke=this.pow(Te,Ne),rt=this.pow(Se,Ne.addn(1).iushrn(1)),it=this.pow(Se,Ne),at=Ue;it.cmp(Ge)!==0;){for(var lt=it,ct=0;lt.cmp(Ge)!==0;ct++)lt=lt.redSqr();oe(ct<at);var ot=this.pow(Ke,new ue(1).iushln(at-ct-1));rt=rt.redMul(ot),Ke=ot.redSqr(),it=it.redMul(Ke),at=ct}return rt},tt.prototype.invm=function(Se){var Re=Se._invmp(this.m);return Re.negative!==0?(Re.negative=0,this.imod(Re).redNeg()):this.imod(Re)},tt.prototype.pow=function(Se,Re){if(Re.isZero())return new ue(1).toRed(this);if(Re.cmpn(1)===0)return Se.clone();var Be=4,Ne=new Array(1<<Be);Ne[0]=new ue(1).toRed(this),Ne[1]=Se;for(var Ue=2;Ue<Ne.length;Ue++)Ne[Ue]=this.mul(Ne[Ue-1],Se);var Ge=Ne[0],Ye=0,Qe=0,Te=Re.bitLength()%26;for(Te===0&&(Te=26),Ue=Re.length-1;Ue>=0;Ue--){for(var Ke=Re.words[Ue],rt=Te-1;rt>=0;rt--){var it=Ke>>rt&1;if(Ge!==Ne[0]&&(Ge=this.sqr(Ge)),it===0&&Ye===0){Qe=0;continue}Ye<<=1,Ye|=it,Qe++,!(Qe!==Be&&(Ue!==0||rt!==0))&&(Ge=this.mul(Ge,Ne[Ye]),Qe=0,Ye=0)}Te=26}return Ge},tt.prototype.convertTo=function(Se){var Re=Se.umod(this.m);return Re===Se?Re.clone():Re},tt.prototype.convertFrom=function(Se){var Re=Se.clone();return Re.red=null,Re},ue.mont=function(Se){return new st(Se)};function st(qe){tt.call(this,qe),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(st,tt),st.prototype.convertTo=function(Se){return this.imod(Se.ushln(this.shift))},st.prototype.convertFrom=function(Se){var Re=this.imod(Se.mul(this.rinv));return Re.red=null,Re},st.prototype.imul=function(Se,Re){if(Se.isZero()||Re.isZero())return Se.words[0]=0,Se.length=1,Se;var Be=Se.imul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.mul=function(Se,Re){if(Se.isZero()||Re.isZero())return new ue(0)._forceRed(this);var Be=Se.mul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.invm=function(Se){var Re=this.imod(Se._invmp(this.m).mul(this.r2));return Re._forceRed(this)}})(K,commonjsGlobal)}(bn$6)),bn$6.exports}var bn$5={exports:{}};bn$5.exports;var hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(K){(function(J,ne){function oe(qe,Se){if(!qe)throw new Error(Se||"Assertion failed")}function ce(qe,Se){qe.super_=Se;var Re=function(){};Re.prototype=Se.prototype,qe.prototype=new Re,qe.prototype.constructor=qe}function ue(qe,Se,Re){if(ue.isBN(qe))return qe;this.negative=0,this.words=null,this.length=0,this.red=null,qe!==null&&((Se==="le"||Se==="be")&&(Re=Se,Se=10),this._init(qe||0,Se||10,Re||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(Se){return Se instanceof ue?!0:Se!==null&&typeof Se=="object"&&Se.constructor.wordSize===ue.wordSize&&Array.isArray(Se.words)},ue.max=function(Se,Re){return Se.cmp(Re)>0?Se:Re},ue.min=function(Se,Re){return Se.cmp(Re)<0?Se:Re},ue.prototype._init=function(Se,Re,Be){if(typeof Se=="number")return this._initNumber(Se,Re,Be);if(typeof Se=="object")return this._initArray(Se,Re,Be);Re==="hex"&&(Re=16),oe(Re===(Re|0)&&Re>=2&&Re<=36),Se=Se.toString().replace(/\s+/g,"");var Ne=0;Se[0]==="-"&&(Ne++,this.negative=1),Ne<Se.length&&(Re===16?this._parseHex(Se,Ne,Be):(this._parseBase(Se,Re,Ne),Be==="le"&&this._initArray(this.toArray(),Re,Be)))},ue.prototype._initNumber=function(Se,Re,Be){Se<0&&(this.negative=1,Se=-Se),Se<67108864?(this.words=[Se&67108863],this.length=1):Se<4503599627370496?(this.words=[Se&67108863,Se/67108864&67108863],this.length=2):(oe(Se<9007199254740992),this.words=[Se&67108863,Se/67108864&67108863,1],this.length=3),Be==="le"&&this._initArray(this.toArray(),Re,Be)},ue.prototype._initArray=function(Se,Re,Be){if(oe(typeof Se.length=="number"),Se.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Se.length/3),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue,Ge,Ye=0;if(Be==="be")for(Ne=Se.length-1,Ue=0;Ne>=0;Ne-=3)Ge=Se[Ne]|Se[Ne-1]<<8|Se[Ne-2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);else if(Be==="le")for(Ne=0,Ue=0;Ne<Se.length;Ne+=3)Ge=Se[Ne]|Se[Ne+1]<<8|Se[Ne+2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);return this.strip()};function pe(qe,Se){var Re=qe.charCodeAt(Se);return Re>=65&&Re<=70?Re-55:Re>=97&&Re<=102?Re-87:Re-48&15}function ve(qe,Se,Re){var Be=pe(qe,Re);return Re-1>=Se&&(Be|=pe(qe,Re-1)<<4),Be}ue.prototype._parseHex=function(Se,Re,Be){this.length=Math.ceil((Se.length-Re)/6),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue=0,Ge=0,Ye;if(Be==="be")for(Ne=Se.length-1;Ne>=Re;Ne-=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8;else{var Qe=Se.length-Re;for(Ne=Qe%2===0?Re+1:Re;Ne<Se.length;Ne+=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8}this.strip()};function me(qe,Se,Re,Be){for(var Ne=0,Ue=Math.min(qe.length,Re),Ge=Se;Ge<Ue;Ge++){var Ye=qe.charCodeAt(Ge)-48;Ne*=Be,Ye>=49?Ne+=Ye-49+10:Ye>=17?Ne+=Ye-17+10:Ne+=Ye}return Ne}ue.prototype._parseBase=function(Se,Re,Be){this.words=[0],this.length=1;for(var Ne=0,Ue=1;Ue<=67108863;Ue*=Re)Ne++;Ne--,Ue=Ue/Re|0;for(var Ge=Se.length-Be,Ye=Ge%Ne,Qe=Math.min(Ge,Ge-Ye)+Be,Te=0,Ke=Be;Ke<Qe;Ke+=Ne)Te=me(Se,Ke,Ke+Ne,Re),this.imuln(Ue),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te);if(Ye!==0){var rt=1;for(Te=me(Se,Ke,Se.length,Re),Ke=0;Ke<Ye;Ke++)rt*=Re;this.imuln(rt),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te)}this.strip()},ue.prototype.copy=function(Se){Se.words=new Array(this.length);for(var Re=0;Re<this.length;Re++)Se.words[Re]=this.words[Re];Se.length=this.length,Se.negative=this.negative,Se.red=this.red},ue.prototype.clone=function(){var Se=new ue(null);return this.copy(Se),Se},ue.prototype._expand=function(Se){for(;this.length<Se;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],xe=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(Se,Re){Se=Se||10,Re=Re|0||1;var Be;if(Se===16||Se==="hex"){Be="";for(var Ne=0,Ue=0,Ge=0;Ge<this.length;Ge++){var Ye=this.words[Ge],Qe=((Ye<<Ne|Ue)&16777215).toString(16);Ue=Ye>>>24-Ne&16777215,Ue!==0||Ge!==this.length-1?Be=ge[6-Qe.length]+Qe+Be:Be=Qe+Be,Ne+=2,Ne>=26&&(Ne-=26,Ge--)}for(Ue!==0&&(Be=Ue.toString(16)+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}if(Se===(Se|0)&&Se>=2&&Se<=36){var Te=ye[Se],Ke=xe[Se];Be="";var rt=this.clone();for(rt.negative=0;!rt.isZero();){var it=rt.modn(Ke).toString(Se);rt=rt.idivn(Ke),rt.isZero()?Be=it+Be:Be=ge[Te-it.length]+it+Be}for(this.isZero()&&(Be="0"+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var Se=this.words[0];return this.length===2?Se+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Se+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Se:Se},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(Se,Re){return oe(typeof Ae<"u"),this.toArrayLike(Ae,Se,Re)},ue.prototype.toArray=function(Se,Re){return this.toArrayLike(Array,Se,Re)},ue.prototype.toArrayLike=function(Se,Re,Be){var Ne=this.byteLength(),Ue=Be||Math.max(1,Ne);oe(Ne<=Ue,"byte array longer than desired length"),oe(Ue>0,"Requested array length <= 0"),this.strip();var Ge=Re==="le",Ye=new Se(Ue),Qe,Te,Ke=this.clone();if(Ge){for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Te]=Qe;for(;Te<Ue;Te++)Ye[Te]=0}else{for(Te=0;Te<Ue-Ne;Te++)Ye[Te]=0;for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Ue-Te-1]=Qe}return Ye},Math.clz32?ue.prototype._countBits=function(Se){return 32-Math.clz32(Se)}:ue.prototype._countBits=function(Se){var Re=Se,Be=0;return Re>=4096&&(Be+=13,Re>>>=13),Re>=64&&(Be+=7,Re>>>=7),Re>=8&&(Be+=4,Re>>>=4),Re>=2&&(Be+=2,Re>>>=2),Be+Re},ue.prototype._zeroBits=function(Se){if(Se===0)return 26;var Re=Se,Be=0;return Re&8191||(Be+=13,Re>>>=13),Re&127||(Be+=7,Re>>>=7),Re&15||(Be+=4,Re>>>=4),Re&3||(Be+=2,Re>>>=2),Re&1||Be++,Be},ue.prototype.bitLength=function(){var Se=this.words[this.length-1],Re=this._countBits(Se);return(this.length-1)*26+Re};function _e(qe){for(var Se=new Array(qe.bitLength()),Re=0;Re<Se.length;Re++){var Be=Re/26|0,Ne=Re%26;Se[Re]=(qe.words[Be]&1<<Ne)>>>Ne}return Se}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Se=0,Re=0;Re<this.length;Re++){var Be=this._zeroBits(this.words[Re]);if(Se+=Be,Be!==26)break}return Se},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(Se){return this.negative!==0?this.abs().inotn(Se).iaddn(1):this.clone()},ue.prototype.fromTwos=function(Se){return this.testn(Se-1)?this.notn(Se).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(Se){for(;this.length<Se.length;)this.words[this.length++]=0;for(var Re=0;Re<Se.length;Re++)this.words[Re]=this.words[Re]|Se.words[Re];return this.strip()},ue.prototype.ior=function(Se){return oe((this.negative|Se.negative)===0),this.iuor(Se)},ue.prototype.or=function(Se){return this.length>Se.length?this.clone().ior(Se):Se.clone().ior(this)},ue.prototype.uor=function(Se){return this.length>Se.length?this.clone().iuor(Se):Se.clone().iuor(this)},ue.prototype.iuand=function(Se){var Re;this.length>Se.length?Re=Se:Re=this;for(var Be=0;Be<Re.length;Be++)this.words[Be]=this.words[Be]&Se.words[Be];return this.length=Re.length,this.strip()},ue.prototype.iand=function(Se){return oe((this.negative|Se.negative)===0),this.iuand(Se)},ue.prototype.and=function(Se){return this.length>Se.length?this.clone().iand(Se):Se.clone().iand(this)},ue.prototype.uand=function(Se){return this.length>Se.length?this.clone().iuand(Se):Se.clone().iuand(this)},ue.prototype.iuxor=function(Se){var Re,Be;this.length>Se.length?(Re=this,Be=Se):(Re=Se,Be=this);for(var Ne=0;Ne<Be.length;Ne++)this.words[Ne]=Re.words[Ne]^Be.words[Ne];if(this!==Re)for(;Ne<Re.length;Ne++)this.words[Ne]=Re.words[Ne];return this.length=Re.length,this.strip()},ue.prototype.ixor=function(Se){return oe((this.negative|Se.negative)===0),this.iuxor(Se)},ue.prototype.xor=function(Se){return this.length>Se.length?this.clone().ixor(Se):Se.clone().ixor(this)},ue.prototype.uxor=function(Se){return this.length>Se.length?this.clone().iuxor(Se):Se.clone().iuxor(this)},ue.prototype.inotn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Math.ceil(Se/26)|0,Be=Se%26;this._expand(Re),Be>0&&Re--;for(var Ne=0;Ne<Re;Ne++)this.words[Ne]=~this.words[Ne]&67108863;return Be>0&&(this.words[Ne]=~this.words[Ne]&67108863>>26-Be),this.strip()},ue.prototype.notn=function(Se){return this.clone().inotn(Se)},ue.prototype.setn=function(Se,Re){oe(typeof Se=="number"&&Se>=0);var Be=Se/26|0,Ne=Se%26;return this._expand(Be+1),Re?this.words[Be]=this.words[Be]|1<<Ne:this.words[Be]=this.words[Be]&~(1<<Ne),this.strip()},ue.prototype.iadd=function(Se){var Re;if(this.negative!==0&&Se.negative===0)return this.negative=0,Re=this.isub(Se),this.negative^=1,this._normSign();if(this.negative===0&&Se.negative!==0)return Se.negative=0,Re=this.isub(Se),Se.negative=1,Re._normSign();var Be,Ne;this.length>Se.length?(Be=this,Ne=Se):(Be=Se,Ne=this);for(var Ue=0,Ge=0;Ge<Ne.length;Ge++)Re=(Be.words[Ge]|0)+(Ne.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;for(;Ue!==0&&Ge<Be.length;Ge++)Re=(Be.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;if(this.length=Be.length,Ue!==0)this.words[this.length]=Ue,this.length++;else if(Be!==this)for(;Ge<Be.length;Ge++)this.words[Ge]=Be.words[Ge];return this},ue.prototype.add=function(Se){var Re;return Se.negative!==0&&this.negative===0?(Se.negative=0,Re=this.sub(Se),Se.negative^=1,Re):Se.negative===0&&this.negative!==0?(this.negative=0,Re=Se.sub(this),this.negative=1,Re):this.length>Se.length?this.clone().iadd(Se):Se.clone().iadd(this)},ue.prototype.isub=function(Se){if(Se.negative!==0){Se.negative=0;var Re=this.iadd(Se);return Se.negative=1,Re._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Se),this.negative=1,this._normSign();var Be=this.cmp(Se);if(Be===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ne,Ue;Be>0?(Ne=this,Ue=Se):(Ne=Se,Ue=this);for(var Ge=0,Ye=0;Ye<Ue.length;Ye++)Re=(Ne.words[Ye]|0)-(Ue.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;for(;Ge!==0&&Ye<Ne.length;Ye++)Re=(Ne.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;if(Ge===0&&Ye<Ne.length&&Ne!==this)for(;Ye<Ne.length;Ye++)this.words[Ye]=Ne.words[Ye];return this.length=Math.max(this.length,Ye),Ne!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(Se){return this.clone().isub(Se)};function $e(qe,Se,Re){Re.negative=Se.negative^qe.negative;var Be=qe.length+Se.length|0;Re.length=Be,Be=Be-1|0;var Ne=qe.words[0]|0,Ue=Se.words[0]|0,Ge=Ne*Ue,Ye=Ge&67108863,Qe=Ge/67108864|0;Re.words[0]=Ye;for(var Te=1;Te<Be;Te++){for(var Ke=Qe>>>26,rt=Qe&67108863,it=Math.min(Te,Se.length-1),at=Math.max(0,Te-qe.length+1);at<=it;at++){var lt=Te-at|0;Ne=qe.words[lt]|0,Ue=Se.words[at]|0,Ge=Ne*Ue+rt,Ke+=Ge/67108864|0,rt=Ge&67108863}Re.words[Te]=rt|0,Qe=Ke|0}return Qe!==0?Re.words[Te]=Qe|0:Re.length--,Re.strip()}var Ie=function(Se,Re,Be){var Ne=Se.words,Ue=Re.words,Ge=Be.words,Ye=0,Qe,Te,Ke,rt=Ne[0]|0,it=rt&8191,at=rt>>>13,lt=Ne[1]|0,ct=lt&8191,ot=lt>>>13,ft=Ne[2]|0,dt=ft&8191,mt=ft>>>13,kt=Ne[3]|0,wt=kt&8191,Et=kt>>>13,Ot=Ne[4]|0,Rt=Ot&8191,gt=Ot>>>13,$t=Ne[5]|0,pt=$t&8191,vt=$t>>>13,Mt=Ne[6]|0,St=Mt&8191,_t=Mt>>>13,Xt=Ne[7]|0,Tt=Xt&8191,Dt=Xt>>>13,Ht=Ne[8]|0,Bt=Ht&8191,It=Ht>>>13,zt=Ne[9]|0,Pt=zt&8191,Vt=zt>>>13,vr=Ue[0]|0,qt=vr&8191,er=vr>>>13,yr=Ue[1]|0,Lt=yr&8191,jt=yr>>>13,fr=Ue[2]|0,Gt=fr&8191,Jt=fr>>>13,ar=Ue[3]|0,Wt=ar&8191,nr=ar>>>13,Er=Ue[4]|0,Zt=Er&8191,ir=Er>>>13,Ir=Ue[5]|0,tr=Ir&8191,cr=Ir>>>13,Or=Ue[6]|0,sr=Or&8191,dr=Or>>>13,Dr=Ue[7]|0,lr=Dr&8191,hr=Dr>>>13,Yr=Ue[8]|0,ur=Yr&8191,pr=Yr>>>13,Jr=Ue[9]|0,Yt=Jr&8191,or=Jr>>>13;Be.negative=Se.negative^Re.negative,Be.length=19,Qe=Math.imul(it,qt),Te=Math.imul(it,er),Te=Te+Math.imul(at,qt)|0,Ke=Math.imul(at,er);var Fr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,Qe=Math.imul(ct,qt),Te=Math.imul(ct,er),Te=Te+Math.imul(ot,qt)|0,Ke=Math.imul(ot,er),Qe=Qe+Math.imul(it,Lt)|0,Te=Te+Math.imul(it,jt)|0,Te=Te+Math.imul(at,Lt)|0,Ke=Ke+Math.imul(at,jt)|0;var kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(kr>>>26)|0,kr&=67108863,Qe=Math.imul(dt,qt),Te=Math.imul(dt,er),Te=Te+Math.imul(mt,qt)|0,Ke=Math.imul(mt,er),Qe=Qe+Math.imul(ct,Lt)|0,Te=Te+Math.imul(ct,jt)|0,Te=Te+Math.imul(ot,Lt)|0,Ke=Ke+Math.imul(ot,jt)|0,Qe=Qe+Math.imul(it,Gt)|0,Te=Te+Math.imul(it,Jt)|0,Te=Te+Math.imul(at,Gt)|0,Ke=Ke+Math.imul(at,Jt)|0;var Kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,Qe=Math.imul(wt,qt),Te=Math.imul(wt,er),Te=Te+Math.imul(Et,qt)|0,Ke=Math.imul(Et,er),Qe=Qe+Math.imul(dt,Lt)|0,Te=Te+Math.imul(dt,jt)|0,Te=Te+Math.imul(mt,Lt)|0,Ke=Ke+Math.imul(mt,jt)|0,Qe=Qe+Math.imul(ct,Gt)|0,Te=Te+Math.imul(ct,Jt)|0,Te=Te+Math.imul(ot,Gt)|0,Ke=Ke+Math.imul(ot,Jt)|0,Qe=Qe+Math.imul(it,Wt)|0,Te=Te+Math.imul(it,nr)|0,Te=Te+Math.imul(at,Wt)|0,Ke=Ke+Math.imul(at,nr)|0;var cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(cn>>>26)|0,cn&=67108863,Qe=Math.imul(Rt,qt),Te=Math.imul(Rt,er),Te=Te+Math.imul(gt,qt)|0,Ke=Math.imul(gt,er),Qe=Qe+Math.imul(wt,Lt)|0,Te=Te+Math.imul(wt,jt)|0,Te=Te+Math.imul(Et,Lt)|0,Ke=Ke+Math.imul(Et,jt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Te=Te+Math.imul(dt,Jt)|0,Te=Te+Math.imul(mt,Gt)|0,Ke=Ke+Math.imul(mt,Jt)|0,Qe=Qe+Math.imul(ct,Wt)|0,Te=Te+Math.imul(ct,nr)|0,Te=Te+Math.imul(ot,Wt)|0,Ke=Ke+Math.imul(ot,nr)|0,Qe=Qe+Math.imul(it,Zt)|0,Te=Te+Math.imul(it,ir)|0,Te=Te+Math.imul(at,Zt)|0,Ke=Ke+Math.imul(at,ir)|0;var An=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(An>>>26)|0,An&=67108863,Qe=Math.imul(pt,qt),Te=Math.imul(pt,er),Te=Te+Math.imul(vt,qt)|0,Ke=Math.imul(vt,er),Qe=Qe+Math.imul(Rt,Lt)|0,Te=Te+Math.imul(Rt,jt)|0,Te=Te+Math.imul(gt,Lt)|0,Ke=Ke+Math.imul(gt,jt)|0,Qe=Qe+Math.imul(wt,Gt)|0,Te=Te+Math.imul(wt,Jt)|0,Te=Te+Math.imul(Et,Gt)|0,Ke=Ke+Math.imul(Et,Jt)|0,Qe=Qe+Math.imul(dt,Wt)|0,Te=Te+Math.imul(dt,nr)|0,Te=Te+Math.imul(mt,Wt)|0,Ke=Ke+Math.imul(mt,nr)|0,Qe=Qe+Math.imul(ct,Zt)|0,Te=Te+Math.imul(ct,ir)|0,Te=Te+Math.imul(ot,Zt)|0,Ke=Ke+Math.imul(ot,ir)|0,Qe=Qe+Math.imul(it,tr)|0,Te=Te+Math.imul(it,cr)|0,Te=Te+Math.imul(at,tr)|0,Ke=Ke+Math.imul(at,cr)|0;var _n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(_n>>>26)|0,_n&=67108863,Qe=Math.imul(St,qt),Te=Math.imul(St,er),Te=Te+Math.imul(_t,qt)|0,Ke=Math.imul(_t,er),Qe=Qe+Math.imul(pt,Lt)|0,Te=Te+Math.imul(pt,jt)|0,Te=Te+Math.imul(vt,Lt)|0,Ke=Ke+Math.imul(vt,jt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Te=Te+Math.imul(Rt,Jt)|0,Te=Te+Math.imul(gt,Gt)|0,Ke=Ke+Math.imul(gt,Jt)|0,Qe=Qe+Math.imul(wt,Wt)|0,Te=Te+Math.imul(wt,nr)|0,Te=Te+Math.imul(Et,Wt)|0,Ke=Ke+Math.imul(Et,nr)|0,Qe=Qe+Math.imul(dt,Zt)|0,Te=Te+Math.imul(dt,ir)|0,Te=Te+Math.imul(mt,Zt)|0,Ke=Ke+Math.imul(mt,ir)|0,Qe=Qe+Math.imul(ct,tr)|0,Te=Te+Math.imul(ct,cr)|0,Te=Te+Math.imul(ot,tr)|0,Ke=Ke+Math.imul(ot,cr)|0,Qe=Qe+Math.imul(it,sr)|0,Te=Te+Math.imul(it,dr)|0,Te=Te+Math.imul(at,sr)|0,Ke=Ke+Math.imul(at,dr)|0;var wn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(wn>>>26)|0,wn&=67108863,Qe=Math.imul(Tt,qt),Te=Math.imul(Tt,er),Te=Te+Math.imul(Dt,qt)|0,Ke=Math.imul(Dt,er),Qe=Qe+Math.imul(St,Lt)|0,Te=Te+Math.imul(St,jt)|0,Te=Te+Math.imul(_t,Lt)|0,Ke=Ke+Math.imul(_t,jt)|0,Qe=Qe+Math.imul(pt,Gt)|0,Te=Te+Math.imul(pt,Jt)|0,Te=Te+Math.imul(vt,Gt)|0,Ke=Ke+Math.imul(vt,Jt)|0,Qe=Qe+Math.imul(Rt,Wt)|0,Te=Te+Math.imul(Rt,nr)|0,Te=Te+Math.imul(gt,Wt)|0,Ke=Ke+Math.imul(gt,nr)|0,Qe=Qe+Math.imul(wt,Zt)|0,Te=Te+Math.imul(wt,ir)|0,Te=Te+Math.imul(Et,Zt)|0,Ke=Ke+Math.imul(Et,ir)|0,Qe=Qe+Math.imul(dt,tr)|0,Te=Te+Math.imul(dt,cr)|0,Te=Te+Math.imul(mt,tr)|0,Ke=Ke+Math.imul(mt,cr)|0,Qe=Qe+Math.imul(ct,sr)|0,Te=Te+Math.imul(ct,dr)|0,Te=Te+Math.imul(ot,sr)|0,Ke=Ke+Math.imul(ot,dr)|0,Qe=Qe+Math.imul(it,lr)|0,Te=Te+Math.imul(it,hr)|0,Te=Te+Math.imul(at,lr)|0,Ke=Ke+Math.imul(at,hr)|0;var Bn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,Qe=Math.imul(Bt,qt),Te=Math.imul(Bt,er),Te=Te+Math.imul(It,qt)|0,Ke=Math.imul(It,er),Qe=Qe+Math.imul(Tt,Lt)|0,Te=Te+Math.imul(Tt,jt)|0,Te=Te+Math.imul(Dt,Lt)|0,Ke=Ke+Math.imul(Dt,jt)|0,Qe=Qe+Math.imul(St,Gt)|0,Te=Te+Math.imul(St,Jt)|0,Te=Te+Math.imul(_t,Gt)|0,Ke=Ke+Math.imul(_t,Jt)|0,Qe=Qe+Math.imul(pt,Wt)|0,Te=Te+Math.imul(pt,nr)|0,Te=Te+Math.imul(vt,Wt)|0,Ke=Ke+Math.imul(vt,nr)|0,Qe=Qe+Math.imul(Rt,Zt)|0,Te=Te+Math.imul(Rt,ir)|0,Te=Te+Math.imul(gt,Zt)|0,Ke=Ke+Math.imul(gt,ir)|0,Qe=Qe+Math.imul(wt,tr)|0,Te=Te+Math.imul(wt,cr)|0,Te=Te+Math.imul(Et,tr)|0,Ke=Ke+Math.imul(Et,cr)|0,Qe=Qe+Math.imul(dt,sr)|0,Te=Te+Math.imul(dt,dr)|0,Te=Te+Math.imul(mt,sr)|0,Ke=Ke+Math.imul(mt,dr)|0,Qe=Qe+Math.imul(ct,lr)|0,Te=Te+Math.imul(ct,hr)|0,Te=Te+Math.imul(ot,lr)|0,Ke=Ke+Math.imul(ot,hr)|0,Qe=Qe+Math.imul(it,ur)|0,Te=Te+Math.imul(it,pr)|0,Te=Te+Math.imul(at,ur)|0,Ke=Ke+Math.imul(at,pr)|0;var On=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(On>>>26)|0,On&=67108863,Qe=Math.imul(Pt,qt),Te=Math.imul(Pt,er),Te=Te+Math.imul(Vt,qt)|0,Ke=Math.imul(Vt,er),Qe=Qe+Math.imul(Bt,Lt)|0,Te=Te+Math.imul(Bt,jt)|0,Te=Te+Math.imul(It,Lt)|0,Ke=Ke+Math.imul(It,jt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Te=Te+Math.imul(Tt,Jt)|0,Te=Te+Math.imul(Dt,Gt)|0,Ke=Ke+Math.imul(Dt,Jt)|0,Qe=Qe+Math.imul(St,Wt)|0,Te=Te+Math.imul(St,nr)|0,Te=Te+Math.imul(_t,Wt)|0,Ke=Ke+Math.imul(_t,nr)|0,Qe=Qe+Math.imul(pt,Zt)|0,Te=Te+Math.imul(pt,ir)|0,Te=Te+Math.imul(vt,Zt)|0,Ke=Ke+Math.imul(vt,ir)|0,Qe=Qe+Math.imul(Rt,tr)|0,Te=Te+Math.imul(Rt,cr)|0,Te=Te+Math.imul(gt,tr)|0,Ke=Ke+Math.imul(gt,cr)|0,Qe=Qe+Math.imul(wt,sr)|0,Te=Te+Math.imul(wt,dr)|0,Te=Te+Math.imul(Et,sr)|0,Ke=Ke+Math.imul(Et,dr)|0,Qe=Qe+Math.imul(dt,lr)|0,Te=Te+Math.imul(dt,hr)|0,Te=Te+Math.imul(mt,lr)|0,Ke=Ke+Math.imul(mt,hr)|0,Qe=Qe+Math.imul(ct,ur)|0,Te=Te+Math.imul(ct,pr)|0,Te=Te+Math.imul(ot,ur)|0,Ke=Ke+Math.imul(ot,pr)|0,Qe=Qe+Math.imul(it,Yt)|0,Te=Te+Math.imul(it,or)|0,Te=Te+Math.imul(at,Yt)|0,Ke=Ke+Math.imul(at,or)|0;var In=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(In>>>26)|0,In&=67108863,Qe=Math.imul(Pt,Lt),Te=Math.imul(Pt,jt),Te=Te+Math.imul(Vt,Lt)|0,Ke=Math.imul(Vt,jt),Qe=Qe+Math.imul(Bt,Gt)|0,Te=Te+Math.imul(Bt,Jt)|0,Te=Te+Math.imul(It,Gt)|0,Ke=Ke+Math.imul(It,Jt)|0,Qe=Qe+Math.imul(Tt,Wt)|0,Te=Te+Math.imul(Tt,nr)|0,Te=Te+Math.imul(Dt,Wt)|0,Ke=Ke+Math.imul(Dt,nr)|0,Qe=Qe+Math.imul(St,Zt)|0,Te=Te+Math.imul(St,ir)|0,Te=Te+Math.imul(_t,Zt)|0,Ke=Ke+Math.imul(_t,ir)|0,Qe=Qe+Math.imul(pt,tr)|0,Te=Te+Math.imul(pt,cr)|0,Te=Te+Math.imul(vt,tr)|0,Ke=Ke+Math.imul(vt,cr)|0,Qe=Qe+Math.imul(Rt,sr)|0,Te=Te+Math.imul(Rt,dr)|0,Te=Te+Math.imul(gt,sr)|0,Ke=Ke+Math.imul(gt,dr)|0,Qe=Qe+Math.imul(wt,lr)|0,Te=Te+Math.imul(wt,hr)|0,Te=Te+Math.imul(Et,lr)|0,Ke=Ke+Math.imul(Et,hr)|0,Qe=Qe+Math.imul(dt,ur)|0,Te=Te+Math.imul(dt,pr)|0,Te=Te+Math.imul(mt,ur)|0,Ke=Ke+Math.imul(mt,pr)|0,Qe=Qe+Math.imul(ct,Yt)|0,Te=Te+Math.imul(ct,or)|0,Te=Te+Math.imul(ot,Yt)|0,Ke=Ke+Math.imul(ot,or)|0;var Ln=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,Qe=Math.imul(Pt,Gt),Te=Math.imul(Pt,Jt),Te=Te+Math.imul(Vt,Gt)|0,Ke=Math.imul(Vt,Jt),Qe=Qe+Math.imul(Bt,Wt)|0,Te=Te+Math.imul(Bt,nr)|0,Te=Te+Math.imul(It,Wt)|0,Ke=Ke+Math.imul(It,nr)|0,Qe=Qe+Math.imul(Tt,Zt)|0,Te=Te+Math.imul(Tt,ir)|0,Te=Te+Math.imul(Dt,Zt)|0,Ke=Ke+Math.imul(Dt,ir)|0,Qe=Qe+Math.imul(St,tr)|0,Te=Te+Math.imul(St,cr)|0,Te=Te+Math.imul(_t,tr)|0,Ke=Ke+Math.imul(_t,cr)|0,Qe=Qe+Math.imul(pt,sr)|0,Te=Te+Math.imul(pt,dr)|0,Te=Te+Math.imul(vt,sr)|0,Ke=Ke+Math.imul(vt,dr)|0,Qe=Qe+Math.imul(Rt,lr)|0,Te=Te+Math.imul(Rt,hr)|0,Te=Te+Math.imul(gt,lr)|0,Ke=Ke+Math.imul(gt,hr)|0,Qe=Qe+Math.imul(wt,ur)|0,Te=Te+Math.imul(wt,pr)|0,Te=Te+Math.imul(Et,ur)|0,Ke=Ke+Math.imul(Et,pr)|0,Qe=Qe+Math.imul(dt,Yt)|0,Te=Te+Math.imul(dt,or)|0,Te=Te+Math.imul(mt,Yt)|0,Ke=Ke+Math.imul(mt,or)|0;var Tn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Qe=Math.imul(Pt,Wt),Te=Math.imul(Pt,nr),Te=Te+Math.imul(Vt,Wt)|0,Ke=Math.imul(Vt,nr),Qe=Qe+Math.imul(Bt,Zt)|0,Te=Te+Math.imul(Bt,ir)|0,Te=Te+Math.imul(It,Zt)|0,Ke=Ke+Math.imul(It,ir)|0,Qe=Qe+Math.imul(Tt,tr)|0,Te=Te+Math.imul(Tt,cr)|0,Te=Te+Math.imul(Dt,tr)|0,Ke=Ke+Math.imul(Dt,cr)|0,Qe=Qe+Math.imul(St,sr)|0,Te=Te+Math.imul(St,dr)|0,Te=Te+Math.imul(_t,sr)|0,Ke=Ke+Math.imul(_t,dr)|0,Qe=Qe+Math.imul(pt,lr)|0,Te=Te+Math.imul(pt,hr)|0,Te=Te+Math.imul(vt,lr)|0,Ke=Ke+Math.imul(vt,hr)|0,Qe=Qe+Math.imul(Rt,ur)|0,Te=Te+Math.imul(Rt,pr)|0,Te=Te+Math.imul(gt,ur)|0,Ke=Ke+Math.imul(gt,pr)|0,Qe=Qe+Math.imul(wt,Yt)|0,Te=Te+Math.imul(wt,or)|0,Te=Te+Math.imul(Et,Yt)|0,Ke=Ke+Math.imul(Et,or)|0;var Rn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Qe=Math.imul(Pt,Zt),Te=Math.imul(Pt,ir),Te=Te+Math.imul(Vt,Zt)|0,Ke=Math.imul(Vt,ir),Qe=Qe+Math.imul(Bt,tr)|0,Te=Te+Math.imul(Bt,cr)|0,Te=Te+Math.imul(It,tr)|0,Ke=Ke+Math.imul(It,cr)|0,Qe=Qe+Math.imul(Tt,sr)|0,Te=Te+Math.imul(Tt,dr)|0,Te=Te+Math.imul(Dt,sr)|0,Ke=Ke+Math.imul(Dt,dr)|0,Qe=Qe+Math.imul(St,lr)|0,Te=Te+Math.imul(St,hr)|0,Te=Te+Math.imul(_t,lr)|0,Ke=Ke+Math.imul(_t,hr)|0,Qe=Qe+Math.imul(pt,ur)|0,Te=Te+Math.imul(pt,pr)|0,Te=Te+Math.imul(vt,ur)|0,Ke=Ke+Math.imul(vt,pr)|0,Qe=Qe+Math.imul(Rt,Yt)|0,Te=Te+Math.imul(Rt,or)|0,Te=Te+Math.imul(gt,Yt)|0,Ke=Ke+Math.imul(gt,or)|0;var $n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+($n>>>26)|0,$n&=67108863,Qe=Math.imul(Pt,tr),Te=Math.imul(Pt,cr),Te=Te+Math.imul(Vt,tr)|0,Ke=Math.imul(Vt,cr),Qe=Qe+Math.imul(Bt,sr)|0,Te=Te+Math.imul(Bt,dr)|0,Te=Te+Math.imul(It,sr)|0,Ke=Ke+Math.imul(It,dr)|0,Qe=Qe+Math.imul(Tt,lr)|0,Te=Te+Math.imul(Tt,hr)|0,Te=Te+Math.imul(Dt,lr)|0,Ke=Ke+Math.imul(Dt,hr)|0,Qe=Qe+Math.imul(St,ur)|0,Te=Te+Math.imul(St,pr)|0,Te=Te+Math.imul(_t,ur)|0,Ke=Ke+Math.imul(_t,pr)|0,Qe=Qe+Math.imul(pt,Yt)|0,Te=Te+Math.imul(pt,or)|0,Te=Te+Math.imul(vt,Yt)|0,Ke=Ke+Math.imul(vt,or)|0;var Cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Qe=Math.imul(Pt,sr),Te=Math.imul(Pt,dr),Te=Te+Math.imul(Vt,sr)|0,Ke=Math.imul(Vt,dr),Qe=Qe+Math.imul(Bt,lr)|0,Te=Te+Math.imul(Bt,hr)|0,Te=Te+Math.imul(It,lr)|0,Ke=Ke+Math.imul(It,hr)|0,Qe=Qe+Math.imul(Tt,ur)|0,Te=Te+Math.imul(Tt,pr)|0,Te=Te+Math.imul(Dt,ur)|0,Ke=Ke+Math.imul(Dt,pr)|0,Qe=Qe+Math.imul(St,Yt)|0,Te=Te+Math.imul(St,or)|0,Te=Te+Math.imul(_t,Yt)|0,Ke=Ke+Math.imul(_t,or)|0;var Sn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Qe=Math.imul(Pt,lr),Te=Math.imul(Pt,hr),Te=Te+Math.imul(Vt,lr)|0,Ke=Math.imul(Vt,hr),Qe=Qe+Math.imul(Bt,ur)|0,Te=Te+Math.imul(Bt,pr)|0,Te=Te+Math.imul(It,ur)|0,Ke=Ke+Math.imul(It,pr)|0,Qe=Qe+Math.imul(Tt,Yt)|0,Te=Te+Math.imul(Tt,or)|0,Te=Te+Math.imul(Dt,Yt)|0,Ke=Ke+Math.imul(Dt,or)|0;var gn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(gn>>>26)|0,gn&=67108863,Qe=Math.imul(Pt,ur),Te=Math.imul(Pt,pr),Te=Te+Math.imul(Vt,ur)|0,Ke=Math.imul(Vt,pr),Qe=Qe+Math.imul(Bt,Yt)|0,Te=Te+Math.imul(Bt,or)|0,Te=Te+Math.imul(It,Yt)|0,Ke=Ke+Math.imul(It,or)|0;var Mn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Qe=Math.imul(Pt,Yt),Te=Math.imul(Pt,or),Te=Te+Math.imul(Vt,Yt)|0,Ke=Math.imul(Vt,or);var yn=(Ye+Qe|0)+((Te&8191)<<13)|0;return Ye=(Ke+(Te>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ge[0]=Fr,Ge[1]=kr,Ge[2]=Kr,Ge[3]=cn,Ge[4]=An,Ge[5]=_n,Ge[6]=wn,Ge[7]=Bn,Ge[8]=On,Ge[9]=In,Ge[10]=Ln,Ge[11]=Tn,Ge[12]=Rn,Ge[13]=$n,Ge[14]=Cn,Ge[15]=Sn,Ge[16]=gn,Ge[17]=Mn,Ge[18]=yn,Ye!==0&&(Ge[19]=Ye,Be.length++),Be};Math.imul||(Ie=$e);function Fe(qe,Se,Re){Re.negative=Se.negative^qe.negative,Re.length=qe.length+Se.length;for(var Be=0,Ne=0,Ue=0;Ue<Re.length-1;Ue++){var Ge=Ne;Ne=0;for(var Ye=Be&67108863,Qe=Math.min(Ue,Se.length-1),Te=Math.max(0,Ue-qe.length+1);Te<=Qe;Te++){var Ke=Ue-Te,rt=qe.words[Ke]|0,it=Se.words[Te]|0,at=rt*it,lt=at&67108863;Ge=Ge+(at/67108864|0)|0,lt=lt+Ye|0,Ye=lt&67108863,Ge=Ge+(lt>>>26)|0,Ne+=Ge>>>26,Ge&=67108863}Re.words[Ue]=Ye,Be=Ge,Ge=Ne}return Be!==0?Re.words[Ue]=Be:Re.length--,Re.strip()}function ke(qe,Se,Re){var Be=new je;return Be.mulp(qe,Se,Re)}ue.prototype.mulTo=function(Se,Re){var Be,Ne=this.length+Se.length;return this.length===10&&Se.length===10?Be=Ie(this,Se,Re):Ne<63?Be=$e(this,Se,Re):Ne<1024?Be=Fe(this,Se,Re):Be=ke(this,Se,Re),Be};function je(qe,Se){this.x=qe,this.y=Se}je.prototype.makeRBT=function(Se){for(var Re=new Array(Se),Be=ue.prototype._countBits(Se)-1,Ne=0;Ne<Se;Ne++)Re[Ne]=this.revBin(Ne,Be,Se);return Re},je.prototype.revBin=function(Se,Re,Be){if(Se===0||Se===Be-1)return Se;for(var Ne=0,Ue=0;Ue<Re;Ue++)Ne|=(Se&1)<<Re-Ue-1,Se>>=1;return Ne},je.prototype.permute=function(Se,Re,Be,Ne,Ue,Ge){for(var Ye=0;Ye<Ge;Ye++)Ne[Ye]=Re[Se[Ye]],Ue[Ye]=Be[Se[Ye]]},je.prototype.transform=function(Se,Re,Be,Ne,Ue,Ge){this.permute(Ge,Se,Re,Be,Ne,Ue);for(var Ye=1;Ye<Ue;Ye<<=1)for(var Qe=Ye<<1,Te=Math.cos(2*Math.PI/Qe),Ke=Math.sin(2*Math.PI/Qe),rt=0;rt<Ue;rt+=Qe)for(var it=Te,at=Ke,lt=0;lt<Ye;lt++){var ct=Be[rt+lt],ot=Ne[rt+lt],ft=Be[rt+lt+Ye],dt=Ne[rt+lt+Ye],mt=it*ft-at*dt;dt=it*dt+at*ft,ft=mt,Be[rt+lt]=ct+ft,Ne[rt+lt]=ot+dt,Be[rt+lt+Ye]=ct-ft,Ne[rt+lt+Ye]=ot-dt,lt!==Qe&&(mt=Te*it-Ke*at,at=Te*at+Ke*it,it=mt)}},je.prototype.guessLen13b=function(Se,Re){var Be=Math.max(Re,Se)|1,Ne=Be&1,Ue=0;for(Be=Be/2|0;Be;Be=Be>>>1)Ue++;return 1<<Ue+1+Ne},je.prototype.conjugate=function(Se,Re,Be){if(!(Be<=1))for(var Ne=0;Ne<Be/2;Ne++){var Ue=Se[Ne];Se[Ne]=Se[Be-Ne-1],Se[Be-Ne-1]=Ue,Ue=Re[Ne],Re[Ne]=-Re[Be-Ne-1],Re[Be-Ne-1]=-Ue}},je.prototype.normalize13b=function(Se,Re){for(var Be=0,Ne=0;Ne<Re/2;Ne++){var Ue=Math.round(Se[2*Ne+1]/Re)*8192+Math.round(Se[2*Ne]/Re)+Be;Se[Ne]=Ue&67108863,Ue<67108864?Be=0:Be=Ue/67108864|0}return Se},je.prototype.convert13b=function(Se,Re,Be,Ne){for(var Ue=0,Ge=0;Ge<Re;Ge++)Ue=Ue+(Se[Ge]|0),Be[2*Ge]=Ue&8191,Ue=Ue>>>13,Be[2*Ge+1]=Ue&8191,Ue=Ue>>>13;for(Ge=2*Re;Ge<Ne;++Ge)Be[Ge]=0;oe(Ue===0),oe((Ue&-8192)===0)},je.prototype.stub=function(Se){for(var Re=new Array(Se),Be=0;Be<Se;Be++)Re[Be]=0;return Re},je.prototype.mulp=function(Se,Re,Be){var Ne=2*this.guessLen13b(Se.length,Re.length),Ue=this.makeRBT(Ne),Ge=this.stub(Ne),Ye=new Array(Ne),Qe=new Array(Ne),Te=new Array(Ne),Ke=new Array(Ne),rt=new Array(Ne),it=new Array(Ne),at=Be.words;at.length=Ne,this.convert13b(Se.words,Se.length,Ye,Ne),this.convert13b(Re.words,Re.length,Ke,Ne),this.transform(Ye,Ge,Qe,Te,Ne,Ue),this.transform(Ke,Ge,rt,it,Ne,Ue);for(var lt=0;lt<Ne;lt++){var ct=Qe[lt]*rt[lt]-Te[lt]*it[lt];Te[lt]=Qe[lt]*it[lt]+Te[lt]*rt[lt],Qe[lt]=ct}return this.conjugate(Qe,Te,Ne),this.transform(Qe,Te,at,Ge,Ne,Ue),this.conjugate(at,Ge,Ne),this.normalize13b(at,Ne),Be.negative=Se.negative^Re.negative,Be.length=Se.length+Re.length,Be.strip()},ue.prototype.mul=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),this.mulTo(Se,Re)},ue.prototype.mulf=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),ke(this,Se,Re)},ue.prototype.imul=function(Se){return this.clone().mulTo(Se,this)},ue.prototype.imuln=function(Se){oe(typeof Se=="number"),oe(Se<67108864);for(var Re=0,Be=0;Be<this.length;Be++){var Ne=(this.words[Be]|0)*Se,Ue=(Ne&67108863)+(Re&67108863);Re>>=26,Re+=Ne/67108864|0,Re+=Ue>>>26,this.words[Be]=Ue&67108863}return Re!==0&&(this.words[Be]=Re,this.length++),this},ue.prototype.muln=function(Se){return this.clone().imuln(Se)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(Se){var Re=_e(Se);if(Re.length===0)return new ue(1);for(var Be=this,Ne=0;Ne<Re.length&&Re[Ne]===0;Ne++,Be=Be.sqr());if(++Ne<Re.length)for(var Ue=Be.sqr();Ne<Re.length;Ne++,Ue=Ue.sqr())Re[Ne]!==0&&(Be=Be.mul(Ue));return Be},ue.prototype.iushln=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=67108863>>>26-Re<<26-Re,Ue;if(Re!==0){var Ge=0;for(Ue=0;Ue<this.length;Ue++){var Ye=this.words[Ue]&Ne,Qe=(this.words[Ue]|0)-Ye<<Re;this.words[Ue]=Qe|Ge,Ge=Ye>>>26-Re}Ge&&(this.words[Ue]=Ge,this.length++)}if(Be!==0){for(Ue=this.length-1;Ue>=0;Ue--)this.words[Ue+Be]=this.words[Ue];for(Ue=0;Ue<Be;Ue++)this.words[Ue]=0;this.length+=Be}return this.strip()},ue.prototype.ishln=function(Se){return oe(this.negative===0),this.iushln(Se)},ue.prototype.iushrn=function(Se,Re,Be){oe(typeof Se=="number"&&Se>=0);var Ne;Re?Ne=(Re-Re%26)/26:Ne=0;var Ue=Se%26,Ge=Math.min((Se-Ue)/26,this.length),Ye=67108863^67108863>>>Ue<<Ue,Qe=Be;if(Ne-=Ge,Ne=Math.max(0,Ne),Qe){for(var Te=0;Te<Ge;Te++)Qe.words[Te]=this.words[Te];Qe.length=Ge}if(Ge!==0)if(this.length>Ge)for(this.length-=Ge,Te=0;Te<this.length;Te++)this.words[Te]=this.words[Te+Ge];else this.words[0]=0,this.length=1;var Ke=0;for(Te=this.length-1;Te>=0&&(Ke!==0||Te>=Ne);Te--){var rt=this.words[Te]|0;this.words[Te]=Ke<<26-Ue|rt>>>Ue,Ke=rt&Ye}return Qe&&Ke!==0&&(Qe.words[Qe.length++]=Ke),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(Se,Re,Be){return oe(this.negative===0),this.iushrn(Se,Re,Be)},ue.prototype.shln=function(Se){return this.clone().ishln(Se)},ue.prototype.ushln=function(Se){return this.clone().iushln(Se)},ue.prototype.shrn=function(Se){return this.clone().ishrn(Se)},ue.prototype.ushrn=function(Se){return this.clone().iushrn(Se)},ue.prototype.testn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return!1;var Ue=this.words[Be];return!!(Ue&Ne)},ue.prototype.imaskn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Be)return this;if(Re!==0&&Be++,this.length=Math.min(Be,this.length),Re!==0){var Ne=67108863^67108863>>>Re<<Re;this.words[this.length-1]&=Ne}return this.strip()},ue.prototype.maskn=function(Se){return this.clone().imaskn(Se)},ue.prototype.iaddn=function(Se){return oe(typeof Se=="number"),oe(Se<67108864),Se<0?this.isubn(-Se):this.negative!==0?this.length===1&&(this.words[0]|0)<Se?(this.words[0]=Se-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Se),this.negative=1,this):this._iaddn(Se)},ue.prototype._iaddn=function(Se){this.words[0]+=Se;for(var Re=0;Re<this.length&&this.words[Re]>=67108864;Re++)this.words[Re]-=67108864,Re===this.length-1?this.words[Re+1]=1:this.words[Re+1]++;return this.length=Math.max(this.length,Re+1),this},ue.prototype.isubn=function(Se){if(oe(typeof Se=="number"),oe(Se<67108864),Se<0)return this.iaddn(-Se);if(this.negative!==0)return this.negative=0,this.iaddn(Se),this.negative=1,this;if(this.words[0]-=Se,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Re=0;Re<this.length&&this.words[Re]<0;Re++)this.words[Re]+=67108864,this.words[Re+1]-=1;return this.strip()},ue.prototype.addn=function(Se){return this.clone().iaddn(Se)},ue.prototype.subn=function(Se){return this.clone().isubn(Se)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(Se,Re,Be){var Ne=Se.length+Be,Ue;this._expand(Ne);var Ge,Ye=0;for(Ue=0;Ue<Se.length;Ue++){Ge=(this.words[Ue+Be]|0)+Ye;var Qe=(Se.words[Ue]|0)*Re;Ge-=Qe&67108863,Ye=(Ge>>26)-(Qe/67108864|0),this.words[Ue+Be]=Ge&67108863}for(;Ue<this.length-Be;Ue++)Ge=(this.words[Ue+Be]|0)+Ye,Ye=Ge>>26,this.words[Ue+Be]=Ge&67108863;if(Ye===0)return this.strip();for(oe(Ye===-1),Ye=0,Ue=0;Ue<this.length;Ue++)Ge=-(this.words[Ue]|0)+Ye,Ye=Ge>>26,this.words[Ue]=Ge&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(Se,Re){var Be=this.length-Se.length,Ne=this.clone(),Ue=Se,Ge=Ue.words[Ue.length-1]|0,Ye=this._countBits(Ge);Be=26-Ye,Be!==0&&(Ue=Ue.ushln(Be),Ne.iushln(Be),Ge=Ue.words[Ue.length-1]|0);var Qe=Ne.length-Ue.length,Te;if(Re!=="mod"){Te=new ue(null),Te.length=Qe+1,Te.words=new Array(Te.length);for(var Ke=0;Ke<Te.length;Ke++)Te.words[Ke]=0}var rt=Ne.clone()._ishlnsubmul(Ue,1,Qe);rt.negative===0&&(Ne=rt,Te&&(Te.words[Qe]=1));for(var it=Qe-1;it>=0;it--){var at=(Ne.words[Ue.length+it]|0)*67108864+(Ne.words[Ue.length+it-1]|0);for(at=Math.min(at/Ge|0,67108863),Ne._ishlnsubmul(Ue,at,it);Ne.negative!==0;)at--,Ne.negative=0,Ne._ishlnsubmul(Ue,1,it),Ne.isZero()||(Ne.negative^=1);Te&&(Te.words[it]=at)}return Te&&Te.strip(),Ne.strip(),Re!=="div"&&Be!==0&&Ne.iushrn(Be),{div:Te||null,mod:Ne}},ue.prototype.divmod=function(Se,Re,Be){if(oe(!Se.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ne,Ue,Ge;return this.negative!==0&&Se.negative===0?(Ge=this.neg().divmod(Se,Re),Re!=="mod"&&(Ne=Ge.div.neg()),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.iadd(Se)),{div:Ne,mod:Ue}):this.negative===0&&Se.negative!==0?(Ge=this.divmod(Se.neg(),Re),Re!=="mod"&&(Ne=Ge.div.neg()),{div:Ne,mod:Ge.mod}):this.negative&Se.negative?(Ge=this.neg().divmod(Se.neg(),Re),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.isub(Se)),{div:Ge.div,mod:Ue}):Se.length>this.length||this.cmp(Se)<0?{div:new ue(0),mod:this}:Se.length===1?Re==="div"?{div:this.divn(Se.words[0]),mod:null}:Re==="mod"?{div:null,mod:new ue(this.modn(Se.words[0]))}:{div:this.divn(Se.words[0]),mod:new ue(this.modn(Se.words[0]))}:this._wordDiv(Se,Re)},ue.prototype.div=function(Se){return this.divmod(Se,"div",!1).div},ue.prototype.mod=function(Se){return this.divmod(Se,"mod",!1).mod},ue.prototype.umod=function(Se){return this.divmod(Se,"mod",!0).mod},ue.prototype.divRound=function(Se){var Re=this.divmod(Se);if(Re.mod.isZero())return Re.div;var Be=Re.div.negative!==0?Re.mod.isub(Se):Re.mod,Ne=Se.ushrn(1),Ue=Se.andln(1),Ge=Be.cmp(Ne);return Ge<0||Ue===1&&Ge===0?Re.div:Re.div.negative!==0?Re.div.isubn(1):Re.div.iaddn(1)},ue.prototype.modn=function(Se){oe(Se<=67108863);for(var Re=(1<<26)%Se,Be=0,Ne=this.length-1;Ne>=0;Ne--)Be=(Re*Be+(this.words[Ne]|0))%Se;return Be},ue.prototype.idivn=function(Se){oe(Se<=67108863);for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=(this.words[Be]|0)+Re*67108864;this.words[Be]=Ne/Se|0,Re=Ne%Se}return this.strip()},ue.prototype.divn=function(Se){return this.clone().idivn(Se)},ue.prototype.egcd=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=new ue(0),Ye=new ue(1),Qe=0;Re.isEven()&&Be.isEven();)Re.iushrn(1),Be.iushrn(1),++Qe;for(var Te=Be.clone(),Ke=Re.clone();!Re.isZero();){for(var rt=0,it=1;!(Re.words[0]&it)&&rt<26;++rt,it<<=1);if(rt>0)for(Re.iushrn(rt);rt-- >0;)(Ne.isOdd()||Ue.isOdd())&&(Ne.iadd(Te),Ue.isub(Ke)),Ne.iushrn(1),Ue.iushrn(1);for(var at=0,lt=1;!(Be.words[0]&lt)&&at<26;++at,lt<<=1);if(at>0)for(Be.iushrn(at);at-- >0;)(Ge.isOdd()||Ye.isOdd())&&(Ge.iadd(Te),Ye.isub(Ke)),Ge.iushrn(1),Ye.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ge),Ue.isub(Ye)):(Be.isub(Re),Ge.isub(Ne),Ye.isub(Ue))}return{a:Ge,b:Ye,gcd:Be.iushln(Qe)}},ue.prototype._invmp=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=Be.clone();Re.cmpn(1)>0&&Be.cmpn(1)>0;){for(var Ye=0,Qe=1;!(Re.words[0]&Qe)&&Ye<26;++Ye,Qe<<=1);if(Ye>0)for(Re.iushrn(Ye);Ye-- >0;)Ne.isOdd()&&Ne.iadd(Ge),Ne.iushrn(1);for(var Te=0,Ke=1;!(Be.words[0]&Ke)&&Te<26;++Te,Ke<<=1);if(Te>0)for(Be.iushrn(Te);Te-- >0;)Ue.isOdd()&&Ue.iadd(Ge),Ue.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ue)):(Be.isub(Re),Ue.isub(Ne))}var rt;return Re.cmpn(1)===0?rt=Ne:rt=Ue,rt.cmpn(0)<0&&rt.iadd(Se),rt},ue.prototype.gcd=function(Se){if(this.isZero())return Se.abs();if(Se.isZero())return this.abs();var Re=this.clone(),Be=Se.clone();Re.negative=0,Be.negative=0;for(var Ne=0;Re.isEven()&&Be.isEven();Ne++)Re.iushrn(1),Be.iushrn(1);do{for(;Re.isEven();)Re.iushrn(1);for(;Be.isEven();)Be.iushrn(1);var Ue=Re.cmp(Be);if(Ue<0){var Ge=Re;Re=Be,Be=Ge}else if(Ue===0||Be.cmpn(1)===0)break;Re.isub(Be)}while(!0);return Be.iushln(Ne)},ue.prototype.invm=function(Se){return this.egcd(Se).a.umod(Se)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(Se){return this.words[0]&Se},ue.prototype.bincn=function(Se){oe(typeof Se=="number");var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return this._expand(Be+1),this.words[Be]|=Ne,this;for(var Ue=Ne,Ge=Be;Ue!==0&&Ge<this.length;Ge++){var Ye=this.words[Ge]|0;Ye+=Ue,Ue=Ye>>>26,Ye&=67108863,this.words[Ge]=Ye}return Ue!==0&&(this.words[Ge]=Ue,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(Se){var Re=Se<0;if(this.negative!==0&&!Re)return-1;if(this.negative===0&&Re)return 1;this.strip();var Be;if(this.length>1)Be=1;else{Re&&(Se=-Se),oe(Se<=67108863,"Number is too big");var Ne=this.words[0]|0;Be=Ne===Se?0:Ne<Se?-1:1}return this.negative!==0?-Be|0:Be},ue.prototype.cmp=function(Se){if(this.negative!==0&&Se.negative===0)return-1;if(this.negative===0&&Se.negative!==0)return 1;var Re=this.ucmp(Se);return this.negative!==0?-Re|0:Re},ue.prototype.ucmp=function(Se){if(this.length>Se.length)return 1;if(this.length<Se.length)return-1;for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=this.words[Be]|0,Ue=Se.words[Be]|0;if(Ne!==Ue){Ne<Ue?Re=-1:Ne>Ue&&(Re=1);break}}return Re},ue.prototype.gtn=function(Se){return this.cmpn(Se)===1},ue.prototype.gt=function(Se){return this.cmp(Se)===1},ue.prototype.gten=function(Se){return this.cmpn(Se)>=0},ue.prototype.gte=function(Se){return this.cmp(Se)>=0},ue.prototype.ltn=function(Se){return this.cmpn(Se)===-1},ue.prototype.lt=function(Se){return this.cmp(Se)===-1},ue.prototype.lten=function(Se){return this.cmpn(Se)<=0},ue.prototype.lte=function(Se){return this.cmp(Se)<=0},ue.prototype.eqn=function(Se){return this.cmpn(Se)===0},ue.prototype.eq=function(Se){return this.cmp(Se)===0},ue.red=function(Se){return new tt(Se)},ue.prototype.toRed=function(Se){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),Se.convertTo(this)._forceRed(Se)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(Se){return this.red=Se,this},ue.prototype.forceRed=function(Se){return oe(!this.red,"Already a number in reduction context"),this._forceRed(Se)},ue.prototype.redAdd=function(Se){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,Se)},ue.prototype.redIAdd=function(Se){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Se)},ue.prototype.redSub=function(Se){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,Se)},ue.prototype.redISub=function(Se){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,Se)},ue.prototype.redShl=function(Se){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,Se)},ue.prototype.redMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.mul(this,Se)},ue.prototype.redIMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.imul(this,Se)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(Se){return oe(this.red&&!Se.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Se)};var We={k256:null,p224:null,p192:null,p25519:null};function ze(qe,Se){this.name=qe,this.p=new ue(Se,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var Se=new ue(null);return Se.words=new Array(Math.ceil(this.n/13)),Se},ze.prototype.ireduce=function(Se){var Re=Se,Be;do this.split(Re,this.tmp),Re=this.imulK(Re),Re=Re.iadd(this.tmp),Be=Re.bitLength();while(Be>this.n);var Ne=Be<this.n?-1:Re.ucmp(this.p);return Ne===0?(Re.words[0]=0,Re.length=1):Ne>0?Re.isub(this.p):Re.strip!==void 0?Re.strip():Re._strip(),Re},ze.prototype.split=function(Se,Re){Se.iushrn(this.n,0,Re)},ze.prototype.imulK=function(Se){return Se.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(Se,Re){for(var Be=4194303,Ne=Math.min(Se.length,9),Ue=0;Ue<Ne;Ue++)Re.words[Ue]=Se.words[Ue];if(Re.length=Ne,Se.length<=9){Se.words[0]=0,Se.length=1;return}var Ge=Se.words[9];for(Re.words[Re.length++]=Ge&Be,Ue=10;Ue<Se.length;Ue++){var Ye=Se.words[Ue]|0;Se.words[Ue-10]=(Ye&Be)<<4|Ge>>>22,Ge=Ye}Ge>>>=22,Se.words[Ue-10]=Ge,Ge===0&&Se.length>10?Se.length-=10:Se.length-=9},Xe.prototype.imulK=function(Se){Se.words[Se.length]=0,Se.words[Se.length+1]=0,Se.length+=2;for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=Se.words[Be]|0;Re+=Ne*977,Se.words[Be]=Re&67108863,Re=Ne*64+(Re/67108864|0)}return Se.words[Se.length-1]===0&&(Se.length--,Se.words[Se.length-1]===0&&Se.length--),Se};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function nt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(nt,ze);function et(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(et,ze),et.prototype.imulK=function(Se){for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=(Se.words[Be]|0)*19+Re,Ue=Ne&67108863;Ne>>>=26,Se.words[Be]=Ue,Re=Ne}return Re!==0&&(Se.words[Se.length++]=Re),Se},ue._prime=function(Se){if(We[Se])return We[Se];var Re;if(Se==="k256")Re=new Xe;else if(Se==="p224")Re=new Je;else if(Se==="p192")Re=new nt;else if(Se==="p25519")Re=new et;else throw new Error("Unknown prime "+Se);return We[Se]=Re,Re};function tt(qe){if(typeof qe=="string"){var Se=ue._prime(qe);this.m=Se.p,this.prime=Se}else oe(qe.gtn(1),"modulus must be greater than 1"),this.m=qe,this.prime=null}tt.prototype._verify1=function(Se){oe(Se.negative===0,"red works only with positives"),oe(Se.red,"red works only with red numbers")},tt.prototype._verify2=function(Se,Re){oe((Se.negative|Re.negative)===0,"red works only with positives"),oe(Se.red&&Se.red===Re.red,"red works only with red numbers")},tt.prototype.imod=function(Se){return this.prime?this.prime.ireduce(Se)._forceRed(this):Se.umod(this.m)._forceRed(this)},tt.prototype.neg=function(Se){return Se.isZero()?Se.clone():this.m.sub(Se)._forceRed(this)},tt.prototype.add=function(Se,Re){this._verify2(Se,Re);var Be=Se.add(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be._forceRed(this)},tt.prototype.iadd=function(Se,Re){this._verify2(Se,Re);var Be=Se.iadd(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be},tt.prototype.sub=function(Se,Re){this._verify2(Se,Re);var Be=Se.sub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be._forceRed(this)},tt.prototype.isub=function(Se,Re){this._verify2(Se,Re);var Be=Se.isub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be},tt.prototype.shl=function(Se,Re){return this._verify1(Se),this.imod(Se.ushln(Re))},tt.prototype.imul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.imul(Re))},tt.prototype.mul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.mul(Re))},tt.prototype.isqr=function(Se){return this.imul(Se,Se.clone())},tt.prototype.sqr=function(Se){return this.mul(Se,Se)},tt.prototype.sqrt=function(Se){if(Se.isZero())return Se.clone();var Re=this.m.andln(3);if(oe(Re%2===1),Re===3){var Be=this.m.add(new ue(1)).iushrn(2);return this.pow(Se,Be)}for(var Ne=this.m.subn(1),Ue=0;!Ne.isZero()&&Ne.andln(1)===0;)Ue++,Ne.iushrn(1);oe(!Ne.isZero());var Ge=new ue(1).toRed(this),Ye=Ge.redNeg(),Qe=this.m.subn(1).iushrn(1),Te=this.m.bitLength();for(Te=new ue(2*Te*Te).toRed(this);this.pow(Te,Qe).cmp(Ye)!==0;)Te.redIAdd(Ye);for(var Ke=this.pow(Te,Ne),rt=this.pow(Se,Ne.addn(1).iushrn(1)),it=this.pow(Se,Ne),at=Ue;it.cmp(Ge)!==0;){for(var lt=it,ct=0;lt.cmp(Ge)!==0;ct++)lt=lt.redSqr();oe(ct<at);var ot=this.pow(Ke,new ue(1).iushln(at-ct-1));rt=rt.redMul(ot),Ke=ot.redSqr(),it=it.redMul(Ke),at=ct}return rt},tt.prototype.invm=function(Se){var Re=Se._invmp(this.m);return Re.negative!==0?(Re.negative=0,this.imod(Re).redNeg()):this.imod(Re)},tt.prototype.pow=function(Se,Re){if(Re.isZero())return new ue(1).toRed(this);if(Re.cmpn(1)===0)return Se.clone();var Be=4,Ne=new Array(1<<Be);Ne[0]=new ue(1).toRed(this),Ne[1]=Se;for(var Ue=2;Ue<Ne.length;Ue++)Ne[Ue]=this.mul(Ne[Ue-1],Se);var Ge=Ne[0],Ye=0,Qe=0,Te=Re.bitLength()%26;for(Te===0&&(Te=26),Ue=Re.length-1;Ue>=0;Ue--){for(var Ke=Re.words[Ue],rt=Te-1;rt>=0;rt--){var it=Ke>>rt&1;if(Ge!==Ne[0]&&(Ge=this.sqr(Ge)),it===0&&Ye===0){Qe=0;continue}Ye<<=1,Ye|=it,Qe++,!(Qe!==Be&&(Ue!==0||rt!==0))&&(Ge=this.mul(Ge,Ne[Ye]),Qe=0,Ye=0)}Te=26}return Ge},tt.prototype.convertTo=function(Se){var Re=Se.umod(this.m);return Re===Se?Re.clone():Re},tt.prototype.convertFrom=function(Se){var Re=Se.clone();return Re.red=null,Re},ue.mont=function(Se){return new st(Se)};function st(qe){tt.call(this,qe),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(st,tt),st.prototype.convertTo=function(Se){return this.imod(Se.ushln(this.shift))},st.prototype.convertFrom=function(Se){var Re=this.imod(Se.mul(this.rinv));return Re.red=null,Re},st.prototype.imul=function(Se,Re){if(Se.isZero()||Re.isZero())return Se.words[0]=0,Se.length=1,Se;var Be=Se.imul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.mul=function(Se,Re){if(Se.isZero()||Re.isZero())return new ue(0)._forceRed(this);var Be=Se.mul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.invm=function(Se){var Re=this.imod(Se._invmp(this.m).mul(this.r2));return Re._forceRed(this)}})(K,commonjsGlobal)}(bn$5)),bn$5.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var K;brorand.exports=function(ce){return K||(K=new J(null)),K.generate(ce)};function J(oe){this.rand=oe}if(brorand.exports.Rand=J,J.prototype.generate=function(ce){return this._rand(ce)},J.prototype._rand=function(ce){if(this.rand.getBytes)return this.rand.getBytes(ce);for(var ue=new Uint8Array(ce),Ae=0;Ae<ue.length;Ae++)ue[Ae]=this.rand.getByte();return ue},typeof self=="object")self.crypto&&self.crypto.getRandomValues?J.prototype._rand=function(ce){var ue=new Uint8Array(ce);return self.crypto.getRandomValues(ue),ue}:self.msCrypto&&self.msCrypto.getRandomValues?J.prototype._rand=function(ce){var ue=new Uint8Array(ce);return self.msCrypto.getRandomValues(ue),ue}:typeof window=="object"&&(J.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var ne=requireCryptoBrowserify();if(typeof ne.randomBytes!="function")throw new Error("Not supported");J.prototype._rand=function(ce){return ne.randomBytes(ce)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var K=requireBn$5(),J=requireBrorand();function ne(oe){this.rand=oe||new J.Rand}return mr=ne,ne.create=function(ce){return new ne(ce)},ne.prototype._randbelow=function(ce){var ue=ce.bitLength(),Ae=Math.ceil(ue/8);do var pe=new K(this.rand.generate(Ae));while(pe.cmp(ce)>=0);return pe},ne.prototype._randrange=function(ce,ue){var Ae=ue.sub(ce);return ce.add(this._randbelow(Ae))},ne.prototype.test=function(ce,ue,Ae){var pe=ce.bitLength(),ve=K.mont(ce),me=new K(1).toRed(ve);ue||(ue=Math.max(1,pe/48|0));for(var ge=ce.subn(1),ye=0;!ge.testn(ye);ye++);for(var xe=ce.shrn(ye),_e=ge.toRed(ve),$e=!0;ue>0;ue--){var Ie=this._randrange(new K(2),ge);Ae&&Ae(Ie);var Fe=Ie.toRed(ve).redPow(xe);if(!(Fe.cmp(me)===0||Fe.cmp(_e)===0)){for(var ke=1;ke<ye;ke++){if(Fe=Fe.redSqr(),Fe.cmp(me)===0)return!1;if(Fe.cmp(_e)===0)break}if(ke===ye)return!1}}return $e},ne.prototype.getDivisor=function(ce,ue){var Ae=ce.bitLength(),pe=K.mont(ce),ve=new K(1).toRed(pe);ue||(ue=Math.max(1,Ae/48|0));for(var me=ce.subn(1),ge=0;!me.testn(ge);ge++);for(var ye=ce.shrn(ge),xe=me.toRed(pe);ue>0;ue--){var _e=this._randrange(new K(2),me),$e=ce.gcd(_e);if($e.cmpn(1)!==0)return $e;var Ie=_e.toRed(pe).redPow(ye);if(!(Ie.cmp(ve)===0||Ie.cmp(xe)===0)){for(var Fe=1;Fe<ge;Fe++){if(Ie=Ie.redSqr(),Ie.cmp(ve)===0)return Ie.fromRed().subn(1).gcd(ce);if(Ie.cmp(xe)===0)break}if(Fe===ge)return Ie=Ie.redSqr(),Ie.fromRed().subn(1).gcd(ce)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var K=requireBrowser$a();generatePrime=Fe,Fe.simpleSieve=$e,Fe.fermatTest=Ie;var J=requireBn$6(),ne=new J(24),oe=requireMr(),ce=new oe,ue=new J(1),Ae=new J(2),pe=new J(5);new J(16),new J(8);var ve=new J(10),me=new J(3);new J(7);var ge=new J(11),ye=new J(4);new J(12);var xe=null;function _e(){if(xe!==null)return xe;var ke=1048576,je=[];je[0]=2;for(var We=1,ze=3;ze<ke;ze+=2){for(var Xe=Math.ceil(Math.sqrt(ze)),Je=0;Je<We&&je[Je]<=Xe&&ze%je[Je]!==0;Je++);We!==Je&&je[Je]<=Xe||(je[We++]=ze)}return xe=je,je}function $e(ke){for(var je=_e(),We=0;We<je.length;We++)if(ke.modn(je[We])===0)return ke.cmpn(je[We])===0;return!0}function Ie(ke){var je=J.mont(ke);return Ae.toRed(je).redPow(ke.subn(1)).fromRed().cmpn(1)===0}function Fe(ke,je){if(ke<16)return je===2||je===5?new J([140,123]):new J([140,39]);je=new J(je);for(var We,ze;;){for(We=new J(K(Math.ceil(ke/8)));We.bitLength()>ke;)We.ishrn(1);if(We.isEven()&&We.iadd(ue),We.testn(1)||We.iadd(Ae),je.cmp(Ae)){if(!je.cmp(pe))for(;We.mod(ve).cmp(me);)We.iadd(ye)}else for(;We.mod(ne).cmp(ge);)We.iadd(ye);if(ze=We.shrn(1),$e(ze)&&$e(We)&&Ie(ze)&&Ie(We)&&ce.test(ze)&&ce.test(We))return We}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var K=requireBn$6(),J=requireMr(),ne=new J,oe=new K(24),ce=new K(11),ue=new K(10),Ae=new K(3),pe=new K(7),ve=requireGeneratePrime(),me=requireBrowser$a();dh=$e;function ge(Fe,ke){return ke=ke||"utf8",Buffer.isBuffer(Fe)||(Fe=new Buffer(Fe,ke)),this._pub=new K(Fe),this}function ye(Fe,ke){return ke=ke||"utf8",Buffer.isBuffer(Fe)||(Fe=new Buffer(Fe,ke)),this._priv=new K(Fe),this}var xe={};function _e(Fe,ke){var je=ke.toString("hex"),We=[je,Fe.toString(16)].join("_");if(We in xe)return xe[We];var ze=0;if(Fe.isEven()||!ve.simpleSieve||!ve.fermatTest(Fe)||!ne.test(Fe))return ze+=1,je==="02"||je==="05"?ze+=8:ze+=4,xe[We]=ze,ze;ne.test(Fe.shrn(1))||(ze+=2);var Xe;switch(je){case"02":Fe.mod(oe).cmp(ce)&&(ze+=8);break;case"05":Xe=Fe.mod(ue),Xe.cmp(Ae)&&Xe.cmp(pe)&&(ze+=8);break;default:ze+=4}return xe[We]=ze,ze}function $e(Fe,ke,je){this.setGenerator(ke),this.__prime=new K(Fe),this._prime=K.mont(this.__prime),this._primeLen=Fe.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,je?(this.setPublicKey=ge,this.setPrivateKey=ye):this._primeCode=8}Object.defineProperty($e.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=_e(this.__prime,this.__gen)),this._primeCode}}),$e.prototype.generateKeys=function(){return this._priv||(this._priv=new K(me(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},$e.prototype.computeSecret=function(Fe){Fe=new K(Fe),Fe=Fe.toRed(this._prime);var ke=Fe.redPow(this._priv).fromRed(),je=new Buffer(ke.toArray()),We=this.getPrime();if(je.length<We.length){var ze=new Buffer(We.length-je.length);ze.fill(0),je=Buffer.concat([ze,je])}return je},$e.prototype.getPublicKey=function(ke){return Ie(this._pub,ke)},$e.prototype.getPrivateKey=function(ke){return Ie(this._priv,ke)},$e.prototype.getPrime=function(Fe){return Ie(this.__prime,Fe)},$e.prototype.getGenerator=function(Fe){return Ie(this._gen,Fe)},$e.prototype.setGenerator=function(Fe,ke){return ke=ke||"utf8",Buffer.isBuffer(Fe)||(Fe=new Buffer(Fe,ke)),this.__gen=Fe,this._gen=new K(Fe),this};function Ie(Fe,ke){var je=new Buffer(Fe.toArray());return ke?je.toString(ke):je}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$4;hasRequiredBrowser$4=1;var K=requireGeneratePrime(),J=require$$1$1,ne=requireDh();function oe(Ae){var pe=new Buffer(J[Ae].prime,"hex"),ve=new Buffer(J[Ae].gen,"hex");return new ne(pe,ve)}var ce={binary:!0,hex:!0,base64:!0};function ue(Ae,pe,ve,me){return Buffer.isBuffer(pe)||ce[pe]===void 0?ue(Ae,"binary",pe,ve):(pe=pe||"binary",me=me||"binary",ve=ve||new Buffer([2]),Buffer.isBuffer(ve)||(ve=new Buffer(ve,me)),typeof Ae=="number"?new ne(K(Ae,ve),ve,!0):(Buffer.isBuffer(Ae)||(Ae=new Buffer(Ae,pe)),new ne(Ae,ve,!0)))}return browser$4.DiffieHellmanGroup=browser$4.createDiffieHellmanGroup=browser$4.getDiffieHellman=oe,browser$4.createDiffieHellman=browser$4.DiffieHellman=ue,browser$4}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:K}:processNextickArgs.exports=process$1;function K(J,ne,oe,ce){if(typeof J!="function")throw new TypeError('"callback" argument must be a function');var ue=arguments.length,Ae,pe;switch(ue){case 0:case 1:return process$1.nextTick(J);case 2:return process$1.nextTick(function(){J.call(null,ne)});case 3:return process$1.nextTick(function(){J.call(null,ne,oe)});case 4:return process$1.nextTick(function(){J.call(null,ne,oe,ce)});default:for(Ae=new Array(ue-1),pe=0;pe<Ae.length;)Ae[pe++]=arguments[pe];return process$1.nextTick(function(){J.apply(null,Ae)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var K={}.toString;return isarray=Array.isArray||function(J){return K.call(J)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(K,J){var ne=require$$0$1,oe=ne.Buffer;function ce(Ae,pe){for(var ve in Ae)pe[ve]=Ae[ve]}oe.from&&oe.alloc&&oe.allocUnsafe&&oe.allocUnsafeSlow?K.exports=ne:(ce(ne,J),J.Buffer=ue);function ue(Ae,pe,ve){return oe(Ae,pe,ve)}ce(oe,ue),ue.from=function(Ae,pe,ve){if(typeof Ae=="number")throw new TypeError("Argument must not be a number");return oe(Ae,pe,ve)},ue.alloc=function(Ae,pe,ve){if(typeof Ae!="number")throw new TypeError("Argument must be a number");var me=oe(Ae);return pe!==void 0?typeof ve=="string"?me.fill(pe,ve):me.fill(pe):me.fill(0),me},ue.allocUnsafe=function(Ae){if(typeof Ae!="number")throw new TypeError("Argument must be a number");return oe(Ae)},ue.allocUnsafeSlow=function(Ae){if(typeof Ae!="number")throw new TypeError("Argument must be a number");return ne.SlowBuffer(Ae)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util$1={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$1;hasRequiredUtil=1;function K(Ie){return Array.isArray?Array.isArray(Ie):$e(Ie)==="[object Array]"}util$1.isArray=K;function J(Ie){return typeof Ie=="boolean"}util$1.isBoolean=J;function ne(Ie){return Ie===null}util$1.isNull=ne;function oe(Ie){return Ie==null}util$1.isNullOrUndefined=oe;function ce(Ie){return typeof Ie=="number"}util$1.isNumber=ce;function ue(Ie){return typeof Ie=="string"}util$1.isString=ue;function Ae(Ie){return typeof Ie=="symbol"}util$1.isSymbol=Ae;function pe(Ie){return Ie===void 0}util$1.isUndefined=pe;function ve(Ie){return $e(Ie)==="[object RegExp]"}util$1.isRegExp=ve;function me(Ie){return typeof Ie=="object"&&Ie!==null}util$1.isObject=me;function ge(Ie){return $e(Ie)==="[object Date]"}util$1.isDate=ge;function ye(Ie){return $e(Ie)==="[object Error]"||Ie instanceof Error}util$1.isError=ye;function xe(Ie){return typeof Ie=="function"}util$1.isFunction=xe;function _e(Ie){return Ie===null||typeof Ie=="boolean"||typeof Ie=="number"||typeof Ie=="string"||typeof Ie=="symbol"||typeof Ie>"u"}util$1.isPrimitive=_e,util$1.isBuffer=require$$0$1.Buffer.isBuffer;function $e(Ie){return Object.prototype.toString.call(Ie)}return util$1}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(K){function J(ue,Ae){if(!(ue instanceof Ae))throw new TypeError("Cannot call a class as a function")}var ne=requireSafeBuffer().Buffer,oe=requireUtil$1();function ce(ue,Ae,pe){ue.copy(Ae,pe)}K.exports=function(){function ue(){J(this,ue),this.head=null,this.tail=null,this.length=0}return ue.prototype.push=function(pe){var ve={data:pe,next:null};this.length>0?this.tail.next=ve:this.head=ve,this.tail=ve,++this.length},ue.prototype.unshift=function(pe){var ve={data:pe,next:this.head};this.length===0&&(this.tail=ve),this.head=ve,++this.length},ue.prototype.shift=function(){if(this.length!==0){var pe=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,pe}},ue.prototype.clear=function(){this.head=this.tail=null,this.length=0},ue.prototype.join=function(pe){if(this.length===0)return"";for(var ve=this.head,me=""+ve.data;ve=ve.next;)me+=pe+ve.data;return me},ue.prototype.concat=function(pe){if(this.length===0)return ne.alloc(0);for(var ve=ne.allocUnsafe(pe>>>0),me=this.head,ge=0;me;)ce(me.data,ve,ge),ge+=me.data.length,me=me.next;return ve},ue}(),oe&&oe.inspect&&oe.inspect.custom&&(K.exports.prototype[oe.inspect.custom]=function(){var ue=oe.inspect({length:this.length});return this.constructor.name+" "+ue})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var K=requireProcessNextickArgs();function J(ce,ue){var Ae=this,pe=this._readableState&&this._readableState.destroyed,ve=this._writableState&&this._writableState.destroyed;return pe||ve?(ue?ue(ce):ce&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,K.nextTick(oe,this,ce)):K.nextTick(oe,this,ce)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(ce||null,function(me){!ue&&me?Ae._writableState?Ae._writableState.errorEmitted||(Ae._writableState.errorEmitted=!0,K.nextTick(oe,Ae,me)):K.nextTick(oe,Ae,me):ue&&ue(me)}),this)}function ne(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function oe(ce,ue){ce.emit("error",ue)}return destroy_1={destroy:J,undestroy:ne},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var K=requireProcessNextickArgs();_stream_writable=Ie;function J(Ge){var Ye=this;this.next=null,this.entry=null,this.finish=function(){Ue(Ye,Ge)}}var ne=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:K.nextTick,oe;Ie.WritableState=_e;var ce=Object.create(requireUtil());ce.inherits=requireInherits_browser();var ue={deprecate:requireBrowser$b()},Ae=requireStreamBrowser(),pe=requireSafeBuffer().Buffer,ve=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function me(Ge){return pe.from(Ge)}function ge(Ge){return pe.isBuffer(Ge)||Ge instanceof ve}var ye=requireDestroy();ce.inherits(Ie,Ae);function xe(){}function _e(Ge,Ye){oe=oe||require_stream_duplex(),Ge=Ge||{};var Qe=Ye instanceof oe;this.objectMode=!!Ge.objectMode,Qe&&(this.objectMode=this.objectMode||!!Ge.writableObjectMode);var Te=Ge.highWaterMark,Ke=Ge.writableHighWaterMark,rt=this.objectMode?16:16*1024;Te||Te===0?this.highWaterMark=Te:Qe&&(Ke||Ke===0)?this.highWaterMark=Ke:this.highWaterMark=rt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var it=Ge.decodeStrings===!1;this.decodeStrings=!it,this.defaultEncoding=Ge.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(at){nt(Ye,at)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new J(this)}_e.prototype.getBuffer=function(){for(var Ye=this.bufferedRequest,Qe=[];Ye;)Qe.push(Ye),Ye=Ye.next;return Qe},function(){try{Object.defineProperty(_e.prototype,"buffer",{get:ue.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var $e;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?($e=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ie,Symbol.hasInstance,{value:function(Ge){return $e.call(this,Ge)?!0:this!==Ie?!1:Ge&&Ge._writableState instanceof _e}})):$e=function(Ge){return Ge instanceof this};function Ie(Ge){if(oe=oe||require_stream_duplex(),!$e.call(Ie,this)&&!(this instanceof oe))return new Ie(Ge);this._writableState=new _e(Ge,this),this.writable=!0,Ge&&(typeof Ge.write=="function"&&(this._write=Ge.write),typeof Ge.writev=="function"&&(this._writev=Ge.writev),typeof Ge.destroy=="function"&&(this._destroy=Ge.destroy),typeof Ge.final=="function"&&(this._final=Ge.final)),Ae.call(this)}Ie.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Fe(Ge,Ye){var Qe=new Error("write after end");Ge.emit("error",Qe),K.nextTick(Ye,Qe)}function ke(Ge,Ye,Qe,Te){var Ke=!0,rt=!1;return Qe===null?rt=new TypeError("May not write null values to stream"):typeof Qe!="string"&&Qe!==void 0&&!Ye.objectMode&&(rt=new TypeError("Invalid non-string/buffer chunk")),rt&&(Ge.emit("error",rt),K.nextTick(Te,rt),Ke=!1),Ke}Ie.prototype.write=function(Ge,Ye,Qe){var Te=this._writableState,Ke=!1,rt=!Te.objectMode&&ge(Ge);return rt&&!pe.isBuffer(Ge)&&(Ge=me(Ge)),typeof Ye=="function"&&(Qe=Ye,Ye=null),rt?Ye="buffer":Ye||(Ye=Te.defaultEncoding),typeof Qe!="function"&&(Qe=xe),Te.ended?Fe(this,Qe):(rt||ke(this,Te,Ge,Qe))&&(Te.pendingcb++,Ke=We(this,Te,rt,Ge,Ye,Qe)),Ke},Ie.prototype.cork=function(){var Ge=this._writableState;Ge.corked++},Ie.prototype.uncork=function(){var Ge=this._writableState;Ge.corked&&(Ge.corked--,!Ge.writing&&!Ge.corked&&!Ge.bufferProcessing&&Ge.bufferedRequest&&st(this,Ge))},Ie.prototype.setDefaultEncoding=function(Ye){if(typeof Ye=="string"&&(Ye=Ye.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ye+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+Ye);return this._writableState.defaultEncoding=Ye,this};function je(Ge,Ye,Qe){return!Ge.objectMode&&Ge.decodeStrings!==!1&&typeof Ye=="string"&&(Ye=pe.from(Ye,Qe)),Ye}Object.defineProperty(Ie.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function We(Ge,Ye,Qe,Te,Ke,rt){if(!Qe){var it=je(Ye,Te,Ke);Te!==it&&(Qe=!0,Ke="buffer",Te=it)}var at=Ye.objectMode?1:Te.length;Ye.length+=at;var lt=Ye.length<Ye.highWaterMark;if(lt||(Ye.needDrain=!0),Ye.writing||Ye.corked){var ct=Ye.lastBufferedRequest;Ye.lastBufferedRequest={chunk:Te,encoding:Ke,isBuf:Qe,callback:rt,next:null},ct?ct.next=Ye.lastBufferedRequest:Ye.bufferedRequest=Ye.lastBufferedRequest,Ye.bufferedRequestCount+=1}else ze(Ge,Ye,!1,at,Te,Ke,rt);return lt}function ze(Ge,Ye,Qe,Te,Ke,rt,it){Ye.writelen=Te,Ye.writecb=it,Ye.writing=!0,Ye.sync=!0,Qe?Ge._writev(Ke,Ye.onwrite):Ge._write(Ke,rt,Ye.onwrite),Ye.sync=!1}function Xe(Ge,Ye,Qe,Te,Ke){--Ye.pendingcb,Qe?(K.nextTick(Ke,Te),K.nextTick(Be,Ge,Ye),Ge._writableState.errorEmitted=!0,Ge.emit("error",Te)):(Ke(Te),Ge._writableState.errorEmitted=!0,Ge.emit("error",Te),Be(Ge,Ye))}function Je(Ge){Ge.writing=!1,Ge.writecb=null,Ge.length-=Ge.writelen,Ge.writelen=0}function nt(Ge,Ye){var Qe=Ge._writableState,Te=Qe.sync,Ke=Qe.writecb;if(Je(Qe),Ye)Xe(Ge,Qe,Te,Ye,Ke);else{var rt=qe(Qe);!rt&&!Qe.corked&&!Qe.bufferProcessing&&Qe.bufferedRequest&&st(Ge,Qe),Te?ne(et,Ge,Qe,rt,Ke):et(Ge,Qe,rt,Ke)}}function et(Ge,Ye,Qe,Te){Qe||tt(Ge,Ye),Ye.pendingcb--,Te(),Be(Ge,Ye)}function tt(Ge,Ye){Ye.length===0&&Ye.needDrain&&(Ye.needDrain=!1,Ge.emit("drain"))}function st(Ge,Ye){Ye.bufferProcessing=!0;var Qe=Ye.bufferedRequest;if(Ge._writev&&Qe&&Qe.next){var Te=Ye.bufferedRequestCount,Ke=new Array(Te),rt=Ye.corkedRequestsFree;rt.entry=Qe;for(var it=0,at=!0;Qe;)Ke[it]=Qe,Qe.isBuf||(at=!1),Qe=Qe.next,it+=1;Ke.allBuffers=at,ze(Ge,Ye,!0,Ye.length,Ke,"",rt.finish),Ye.pendingcb++,Ye.lastBufferedRequest=null,rt.next?(Ye.corkedRequestsFree=rt.next,rt.next=null):Ye.corkedRequestsFree=new J(Ye),Ye.bufferedRequestCount=0}else{for(;Qe;){var lt=Qe.chunk,ct=Qe.encoding,ot=Qe.callback,ft=Ye.objectMode?1:lt.length;if(ze(Ge,Ye,!1,ft,lt,ct,ot),Qe=Qe.next,Ye.bufferedRequestCount--,Ye.writing)break}Qe===null&&(Ye.lastBufferedRequest=null)}Ye.bufferedRequest=Qe,Ye.bufferProcessing=!1}Ie.prototype._write=function(Ge,Ye,Qe){Qe(new Error("_write() is not implemented"))},Ie.prototype._writev=null,Ie.prototype.end=function(Ge,Ye,Qe){var Te=this._writableState;typeof Ge=="function"?(Qe=Ge,Ge=null,Ye=null):typeof Ye=="function"&&(Qe=Ye,Ye=null),Ge!=null&&this.write(Ge,Ye),Te.corked&&(Te.corked=1,this.uncork()),Te.ending||Ne(this,Te,Qe)};function qe(Ge){return Ge.ending&&Ge.length===0&&Ge.bufferedRequest===null&&!Ge.finished&&!Ge.writing}function Se(Ge,Ye){Ge._final(function(Qe){Ye.pendingcb--,Qe&&Ge.emit("error",Qe),Ye.prefinished=!0,Ge.emit("prefinish"),Be(Ge,Ye)})}function Re(Ge,Ye){!Ye.prefinished&&!Ye.finalCalled&&(typeof Ge._final=="function"?(Ye.pendingcb++,Ye.finalCalled=!0,K.nextTick(Se,Ge,Ye)):(Ye.prefinished=!0,Ge.emit("prefinish")))}function Be(Ge,Ye){var Qe=qe(Ye);return Qe&&(Re(Ge,Ye),Ye.pendingcb===0&&(Ye.finished=!0,Ge.emit("finish"))),Qe}function Ne(Ge,Ye,Qe){Ye.ending=!0,Be(Ge,Ye),Qe&&(Ye.finished?K.nextTick(Qe):Ge.once("finish",Qe)),Ye.ended=!0,Ge.writable=!1}function Ue(Ge,Ye,Qe){var Te=Ge.entry;for(Ge.entry=null;Te;){var Ke=Te.callback;Ye.pendingcb--,Ke(Qe),Te=Te.next}Ye.corkedRequestsFree.next=Ge}return Object.defineProperty(Ie.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Ge){this._writableState&&(this._writableState.destroyed=Ge)}}),Ie.prototype.destroy=ye.destroy,Ie.prototype._undestroy=ye.undestroy,Ie.prototype._destroy=function(Ge,Ye){this.end(),Ye(Ge)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var K=requireProcessNextickArgs(),J=Object.keys||function(ye){var xe=[];for(var _e in ye)xe.push(_e);return xe};_stream_duplex=ve;var ne=Object.create(requireUtil());ne.inherits=requireInherits_browser();var oe=require_stream_readable(),ce=require_stream_writable();ne.inherits(ve,oe);for(var ue=J(ce.prototype),Ae=0;Ae<ue.length;Ae++){var pe=ue[Ae];ve.prototype[pe]||(ve.prototype[pe]=ce.prototype[pe])}function ve(ye){if(!(this instanceof ve))return new ve(ye);oe.call(this,ye),ce.call(this,ye),ye&&ye.readable===!1&&(this.readable=!1),ye&&ye.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ye&&ye.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",me)}Object.defineProperty(ve.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function me(){this.allowHalfOpen||this._writableState.ended||K.nextTick(ge,this)}function ge(ye){ye.end()}return Object.defineProperty(ve.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(ye){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=ye,this._writableState.destroyed=ye)}}),ve.prototype._destroy=function(ye,xe){this.push(null),this.end(),K.nextTick(xe,ye)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var K=requireProcessNextickArgs();_stream_readable=je;var J=requireIsarray(),ne;je.ReadableState=ke,requireEvents().EventEmitter;var oe=function(ot,ft){return ot.listeners(ft).length},ce=requireStreamBrowser(),ue=requireSafeBuffer().Buffer,Ae=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function pe(ot){return ue.from(ot)}function ve(ot){return ue.isBuffer(ot)||ot instanceof Ae}var me=Object.create(requireUtil());me.inherits=requireInherits_browser();var ge=requireUtil$1(),ye=void 0;ge&&ge.debuglog?ye=ge.debuglog("stream"):ye=function(){};var xe=requireBufferList(),_e=requireDestroy(),$e;me.inherits(je,ce);var Ie=["error","close","destroy","pause","resume"];function Fe(ot,ft,dt){if(typeof ot.prependListener=="function")return ot.prependListener(ft,dt);!ot._events||!ot._events[ft]?ot.on(ft,dt):J(ot._events[ft])?ot._events[ft].unshift(dt):ot._events[ft]=[dt,ot._events[ft]]}function ke(ot,ft){ne=ne||require_stream_duplex(),ot=ot||{};var dt=ft instanceof ne;this.objectMode=!!ot.objectMode,dt&&(this.objectMode=this.objectMode||!!ot.readableObjectMode);var mt=ot.highWaterMark,kt=ot.readableHighWaterMark,wt=this.objectMode?16:16*1024;mt||mt===0?this.highWaterMark=mt:dt&&(kt||kt===0)?this.highWaterMark=kt:this.highWaterMark=wt,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new xe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=ot.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ot.encoding&&($e||($e=requireString_decoder().StringDecoder),this.decoder=new $e(ot.encoding),this.encoding=ot.encoding)}function je(ot){if(ne=ne||require_stream_duplex(),!(this instanceof je))return new je(ot);this._readableState=new ke(ot,this),this.readable=!0,ot&&(typeof ot.read=="function"&&(this._read=ot.read),typeof ot.destroy=="function"&&(this._destroy=ot.destroy)),ce.call(this)}Object.defineProperty(je.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ot){this._readableState&&(this._readableState.destroyed=ot)}}),je.prototype.destroy=_e.destroy,je.prototype._undestroy=_e.undestroy,je.prototype._destroy=function(ot,ft){this.push(null),ft(ot)},je.prototype.push=function(ot,ft){var dt=this._readableState,mt;return dt.objectMode?mt=!0:typeof ot=="string"&&(ft=ft||dt.defaultEncoding,ft!==dt.encoding&&(ot=ue.from(ot,ft),ft=""),mt=!0),We(this,ot,ft,!1,mt)},je.prototype.unshift=function(ot){return We(this,ot,null,!0,!1)};function We(ot,ft,dt,mt,kt){var wt=ot._readableState;if(ft===null)wt.reading=!1,st(ot,wt);else{var Et;kt||(Et=Xe(wt,ft)),Et?ot.emit("error",Et):wt.objectMode||ft&&ft.length>0?(typeof ft!="string"&&!wt.objectMode&&Object.getPrototypeOf(ft)!==ue.prototype&&(ft=pe(ft)),mt?wt.endEmitted?ot.emit("error",new Error("stream.unshift() after end event")):ze(ot,wt,ft,!0):wt.ended?ot.emit("error",new Error("stream.push() after EOF")):(wt.reading=!1,wt.decoder&&!dt?(ft=wt.decoder.write(ft),wt.objectMode||ft.length!==0?ze(ot,wt,ft,!1):Re(ot,wt)):ze(ot,wt,ft,!1))):mt||(wt.reading=!1)}return Je(wt)}function ze(ot,ft,dt,mt){ft.flowing&&ft.length===0&&!ft.sync?(ot.emit("data",dt),ot.read(0)):(ft.length+=ft.objectMode?1:dt.length,mt?ft.buffer.unshift(dt):ft.buffer.push(dt),ft.needReadable&&qe(ot)),Re(ot,ft)}function Xe(ot,ft){var dt;return!ve(ft)&&typeof ft!="string"&&ft!==void 0&&!ot.objectMode&&(dt=new TypeError("Invalid non-string/buffer chunk")),dt}function Je(ot){return!ot.ended&&(ot.needReadable||ot.length<ot.highWaterMark||ot.length===0)}je.prototype.isPaused=function(){return this._readableState.flowing===!1},je.prototype.setEncoding=function(ot){return $e||($e=requireString_decoder().StringDecoder),this._readableState.decoder=new $e(ot),this._readableState.encoding=ot,this};var nt=8388608;function et(ot){return ot>=nt?ot=nt:(ot--,ot|=ot>>>1,ot|=ot>>>2,ot|=ot>>>4,ot|=ot>>>8,ot|=ot>>>16,ot++),ot}function tt(ot,ft){return ot<=0||ft.length===0&&ft.ended?0:ft.objectMode?1:ot!==ot?ft.flowing&&ft.length?ft.buffer.head.data.length:ft.length:(ot>ft.highWaterMark&&(ft.highWaterMark=et(ot)),ot<=ft.length?ot:ft.ended?ft.length:(ft.needReadable=!0,0))}je.prototype.read=function(ot){ye("read",ot),ot=parseInt(ot,10);var ft=this._readableState,dt=ot;if(ot!==0&&(ft.emittedReadable=!1),ot===0&&ft.needReadable&&(ft.length>=ft.highWaterMark||ft.ended))return ye("read: emitReadable",ft.length,ft.ended),ft.length===0&&ft.ended?at(this):qe(this),null;if(ot=tt(ot,ft),ot===0&&ft.ended)return ft.length===0&&at(this),null;var mt=ft.needReadable;ye("need readable",mt),(ft.length===0||ft.length-ot<ft.highWaterMark)&&(mt=!0,ye("length less than watermark",mt)),ft.ended||ft.reading?(mt=!1,ye("reading or ended",mt)):mt&&(ye("do read"),ft.reading=!0,ft.sync=!0,ft.length===0&&(ft.needReadable=!0),this._read(ft.highWaterMark),ft.sync=!1,ft.reading||(ot=tt(dt,ft)));var kt;return ot>0?kt=Te(ot,ft):kt=null,kt===null?(ft.needReadable=!0,ot=0):ft.length-=ot,ft.length===0&&(ft.ended||(ft.needReadable=!0),dt!==ot&&ft.ended&&at(this)),kt!==null&&this.emit("data",kt),kt};function st(ot,ft){if(!ft.ended){if(ft.decoder){var dt=ft.decoder.end();dt&&dt.length&&(ft.buffer.push(dt),ft.length+=ft.objectMode?1:dt.length)}ft.ended=!0,qe(ot)}}function qe(ot){var ft=ot._readableState;ft.needReadable=!1,ft.emittedReadable||(ye("emitReadable",ft.flowing),ft.emittedReadable=!0,ft.sync?K.nextTick(Se,ot):Se(ot))}function Se(ot){ye("emit readable"),ot.emit("readable"),Qe(ot)}function Re(ot,ft){ft.readingMore||(ft.readingMore=!0,K.nextTick(Be,ot,ft))}function Be(ot,ft){for(var dt=ft.length;!ft.reading&&!ft.flowing&&!ft.ended&&ft.length<ft.highWaterMark&&(ye("maybeReadMore read 0"),ot.read(0),dt!==ft.length);)dt=ft.length;ft.readingMore=!1}je.prototype._read=function(ot){this.emit("error",new Error("_read() is not implemented"))},je.prototype.pipe=function(ot,ft){var dt=this,mt=this._readableState;switch(mt.pipesCount){case 0:mt.pipes=ot;break;case 1:mt.pipes=[mt.pipes,ot];break;default:mt.pipes.push(ot);break}mt.pipesCount+=1,ye("pipe count=%d opts=%j",mt.pipesCount,ft);var kt=(!ft||ft.end!==!1)&&ot!==process$1.stdout&&ot!==process$1.stderr,wt=kt?Ot:Xt;mt.endEmitted?K.nextTick(wt):dt.once("end",wt),ot.on("unpipe",Et);function Et(Tt,Dt){ye("onunpipe"),Tt===dt&&Dt&&Dt.hasUnpiped===!1&&(Dt.hasUnpiped=!0,$t())}function Ot(){ye("onend"),ot.end()}var Rt=Ne(dt);ot.on("drain",Rt);var gt=!1;function $t(){ye("cleanup"),ot.removeListener("close",St),ot.removeListener("finish",_t),ot.removeListener("drain",Rt),ot.removeListener("error",Mt),ot.removeListener("unpipe",Et),dt.removeListener("end",Ot),dt.removeListener("end",Xt),dt.removeListener("data",vt),gt=!0,mt.awaitDrain&&(!ot._writableState||ot._writableState.needDrain)&&Rt()}var pt=!1;dt.on("data",vt);function vt(Tt){ye("ondata"),pt=!1;var Dt=ot.write(Tt);Dt===!1&&!pt&&((mt.pipesCount===1&&mt.pipes===ot||mt.pipesCount>1&&ct(mt.pipes,ot)!==-1)&&!gt&&(ye("false write response, pause",mt.awaitDrain),mt.awaitDrain++,pt=!0),dt.pause())}function Mt(Tt){ye("onerror",Tt),Xt(),ot.removeListener("error",Mt),oe(ot,"error")===0&&ot.emit("error",Tt)}Fe(ot,"error",Mt);function St(){ot.removeListener("finish",_t),Xt()}ot.once("close",St);function _t(){ye("onfinish"),ot.removeListener("close",St),Xt()}ot.once("finish",_t);function Xt(){ye("unpipe"),dt.unpipe(ot)}return ot.emit("pipe",dt),mt.flowing||(ye("pipe resume"),dt.resume()),ot};function Ne(ot){return function(){var ft=ot._readableState;ye("pipeOnDrain",ft.awaitDrain),ft.awaitDrain&&ft.awaitDrain--,ft.awaitDrain===0&&oe(ot,"data")&&(ft.flowing=!0,Qe(ot))}}je.prototype.unpipe=function(ot){var ft=this._readableState,dt={hasUnpiped:!1};if(ft.pipesCount===0)return this;if(ft.pipesCount===1)return ot&&ot!==ft.pipes?this:(ot||(ot=ft.pipes),ft.pipes=null,ft.pipesCount=0,ft.flowing=!1,ot&&ot.emit("unpipe",this,dt),this);if(!ot){var mt=ft.pipes,kt=ft.pipesCount;ft.pipes=null,ft.pipesCount=0,ft.flowing=!1;for(var wt=0;wt<kt;wt++)mt[wt].emit("unpipe",this,{hasUnpiped:!1});return this}var Et=ct(ft.pipes,ot);return Et===-1?this:(ft.pipes.splice(Et,1),ft.pipesCount-=1,ft.pipesCount===1&&(ft.pipes=ft.pipes[0]),ot.emit("unpipe",this,dt),this)},je.prototype.on=function(ot,ft){var dt=ce.prototype.on.call(this,ot,ft);if(ot==="data")this._readableState.flowing!==!1&&this.resume();else if(ot==="readable"){var mt=this._readableState;!mt.endEmitted&&!mt.readableListening&&(mt.readableListening=mt.needReadable=!0,mt.emittedReadable=!1,mt.reading?mt.length&&qe(this):K.nextTick(Ue,this))}return dt},je.prototype.addListener=je.prototype.on;function Ue(ot){ye("readable nexttick read 0"),ot.read(0)}je.prototype.resume=function(){var ot=this._readableState;return ot.flowing||(ye("resume"),ot.flowing=!0,Ge(this,ot)),this};function Ge(ot,ft){ft.resumeScheduled||(ft.resumeScheduled=!0,K.nextTick(Ye,ot,ft))}function Ye(ot,ft){ft.reading||(ye("resume read 0"),ot.read(0)),ft.resumeScheduled=!1,ft.awaitDrain=0,ot.emit("resume"),Qe(ot),ft.flowing&&!ft.reading&&ot.read(0)}je.prototype.pause=function(){return ye("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ye("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Qe(ot){var ft=ot._readableState;for(ye("flow",ft.flowing);ft.flowing&&ot.read()!==null;);}je.prototype.wrap=function(ot){var ft=this,dt=this._readableState,mt=!1;ot.on("end",function(){if(ye("wrapped end"),dt.decoder&&!dt.ended){var Et=dt.decoder.end();Et&&Et.length&&ft.push(Et)}ft.push(null)}),ot.on("data",function(Et){if(ye("wrapped data"),dt.decoder&&(Et=dt.decoder.write(Et)),!(dt.objectMode&&Et==null)&&!(!dt.objectMode&&(!Et||!Et.length))){var Ot=ft.push(Et);Ot||(mt=!0,ot.pause())}});for(var kt in ot)this[kt]===void 0&&typeof ot[kt]=="function"&&(this[kt]=function(Et){return function(){return ot[Et].apply(ot,arguments)}}(kt));for(var wt=0;wt<Ie.length;wt++)ot.on(Ie[wt],this.emit.bind(this,Ie[wt]));return this._read=function(Et){ye("wrapped _read",Et),mt&&(mt=!1,ot.resume())},this},Object.defineProperty(je.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),je._fromList=Te;function Te(ot,ft){if(ft.length===0)return null;var dt;return ft.objectMode?dt=ft.buffer.shift():!ot||ot>=ft.length?(ft.decoder?dt=ft.buffer.join(""):ft.buffer.length===1?dt=ft.buffer.head.data:dt=ft.buffer.concat(ft.length),ft.buffer.clear()):dt=Ke(ot,ft.buffer,ft.decoder),dt}function Ke(ot,ft,dt){var mt;return ot<ft.head.data.length?(mt=ft.head.data.slice(0,ot),ft.head.data=ft.head.data.slice(ot)):ot===ft.head.data.length?mt=ft.shift():mt=dt?rt(ot,ft):it(ot,ft),mt}function rt(ot,ft){var dt=ft.head,mt=1,kt=dt.data;for(ot-=kt.length;dt=dt.next;){var wt=dt.data,Et=ot>wt.length?wt.length:ot;if(Et===wt.length?kt+=wt:kt+=wt.slice(0,ot),ot-=Et,ot===0){Et===wt.length?(++mt,dt.next?ft.head=dt.next:ft.head=ft.tail=null):(ft.head=dt,dt.data=wt.slice(Et));break}++mt}return ft.length-=mt,kt}function it(ot,ft){var dt=ue.allocUnsafe(ot),mt=ft.head,kt=1;for(mt.data.copy(dt),ot-=mt.data.length;mt=mt.next;){var wt=mt.data,Et=ot>wt.length?wt.length:ot;if(wt.copy(dt,dt.length-ot,0,Et),ot-=Et,ot===0){Et===wt.length?(++kt,mt.next?ft.head=mt.next:ft.head=ft.tail=null):(ft.head=mt,mt.data=wt.slice(Et));break}++kt}return ft.length-=kt,dt}function at(ot){var ft=ot._readableState;if(ft.length>0)throw new Error('"endReadable()" called on non-empty stream');ft.endEmitted||(ft.ended=!0,K.nextTick(lt,ft,ot))}function lt(ot,ft){!ot.endEmitted&&ot.length===0&&(ot.endEmitted=!0,ft.readable=!1,ft.emit("end"))}function ct(ot,ft){for(var dt=0,mt=ot.length;dt<mt;dt++)if(ot[dt]===ft)return dt;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=oe;var K=require_stream_duplex(),J=Object.create(requireUtil());J.inherits=requireInherits_browser(),J.inherits(oe,K);function ne(Ae,pe){var ve=this._transformState;ve.transforming=!1;var me=ve.writecb;if(!me)return this.emit("error",new Error("write callback called multiple times"));ve.writechunk=null,ve.writecb=null,pe!=null&&this.push(pe),me(Ae);var ge=this._readableState;ge.reading=!1,(ge.needReadable||ge.length<ge.highWaterMark)&&this._read(ge.highWaterMark)}function oe(Ae){if(!(this instanceof oe))return new oe(Ae);K.call(this,Ae),this._transformState={afterTransform:ne.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,Ae&&(typeof Ae.transform=="function"&&(this._transform=Ae.transform),typeof Ae.flush=="function"&&(this._flush=Ae.flush)),this.on("prefinish",ce)}function ce(){var Ae=this;typeof this._flush=="function"?this._flush(function(pe,ve){ue(Ae,pe,ve)}):ue(this,null,null)}oe.prototype.push=function(Ae,pe){return this._transformState.needTransform=!1,K.prototype.push.call(this,Ae,pe)},oe.prototype._transform=function(Ae,pe,ve){throw new Error("_transform() is not implemented")},oe.prototype._write=function(Ae,pe,ve){var me=this._transformState;if(me.writecb=ve,me.writechunk=Ae,me.writeencoding=pe,!me.transforming){var ge=this._readableState;(me.needTransform||ge.needReadable||ge.length<ge.highWaterMark)&&this._read(ge.highWaterMark)}},oe.prototype._read=function(Ae){var pe=this._transformState;pe.writechunk!==null&&pe.writecb&&!pe.transforming?(pe.transforming=!0,this._transform(pe.writechunk,pe.writeencoding,pe.afterTransform)):pe.needTransform=!0},oe.prototype._destroy=function(Ae,pe){var ve=this;K.prototype._destroy.call(this,Ae,function(me){pe(me),ve.emit("close")})};function ue(Ae,pe,ve){if(pe)return Ae.emit("error",pe);if(ve!=null&&Ae.push(ve),Ae._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(Ae._transformState.transforming)throw new Error("Calling transform done when still transforming");return Ae.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=ne;var K=require_stream_transform(),J=Object.create(requireUtil());J.inherits=requireInherits_browser(),J.inherits(ne,K);function ne(oe){if(!(this instanceof ne))return new ne(oe);K.call(this,oe)}return ne.prototype._transform=function(oe,ce,ue){ue(null,oe)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(K,J){J=K.exports=require_stream_readable(),J.Stream=J,J.Readable=J,J.Writable=require_stream_writable(),J.Duplex=require_stream_duplex(),J.Transform=require_stream_transform(),J.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},bn$4={exports:{}};bn$4.exports;var hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(K){(function(J,ne){function oe(Re,Be){if(!Re)throw new Error(Be||"Assertion failed")}function ce(Re,Be){Re.super_=Be;var Ne=function(){};Ne.prototype=Be.prototype,Re.prototype=new Ne,Re.prototype.constructor=Re}function ue(Re,Be,Ne){if(ue.isBN(Re))return Re;this.negative=0,this.words=null,this.length=0,this.red=null,Re!==null&&((Be==="le"||Be==="be")&&(Ne=Be,Be=10),this._init(Re||0,Be||10,Ne||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(Be){return Be instanceof ue?!0:Be!==null&&typeof Be=="object"&&Be.constructor.wordSize===ue.wordSize&&Array.isArray(Be.words)},ue.max=function(Be,Ne){return Be.cmp(Ne)>0?Be:Ne},ue.min=function(Be,Ne){return Be.cmp(Ne)<0?Be:Ne},ue.prototype._init=function(Be,Ne,Ue){if(typeof Be=="number")return this._initNumber(Be,Ne,Ue);if(typeof Be=="object")return this._initArray(Be,Ne,Ue);Ne==="hex"&&(Ne=16),oe(Ne===(Ne|0)&&Ne>=2&&Ne<=36),Be=Be.toString().replace(/\s+/g,"");var Ge=0;Be[0]==="-"&&(Ge++,this.negative=1),Ge<Be.length&&(Ne===16?this._parseHex(Be,Ge,Ue):(this._parseBase(Be,Ne,Ge),Ue==="le"&&this._initArray(this.toArray(),Ne,Ue)))},ue.prototype._initNumber=function(Be,Ne,Ue){Be<0&&(this.negative=1,Be=-Be),Be<67108864?(this.words=[Be&67108863],this.length=1):Be<4503599627370496?(this.words=[Be&67108863,Be/67108864&67108863],this.length=2):(oe(Be<9007199254740992),this.words=[Be&67108863,Be/67108864&67108863,1],this.length=3),Ue==="le"&&this._initArray(this.toArray(),Ne,Ue)},ue.prototype._initArray=function(Be,Ne,Ue){if(oe(typeof Be.length=="number"),Be.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Be.length/3),this.words=new Array(this.length);for(var Ge=0;Ge<this.length;Ge++)this.words[Ge]=0;var Ye,Qe,Te=0;if(Ue==="be")for(Ge=Be.length-1,Ye=0;Ge>=0;Ge-=3)Qe=Be[Ge]|Be[Ge-1]<<8|Be[Ge-2]<<16,this.words[Ye]|=Qe<<Te&67108863,this.words[Ye+1]=Qe>>>26-Te&67108863,Te+=24,Te>=26&&(Te-=26,Ye++);else if(Ue==="le")for(Ge=0,Ye=0;Ge<Be.length;Ge+=3)Qe=Be[Ge]|Be[Ge+1]<<8|Be[Ge+2]<<16,this.words[Ye]|=Qe<<Te&67108863,this.words[Ye+1]=Qe>>>26-Te&67108863,Te+=24,Te>=26&&(Te-=26,Ye++);return this._strip()};function pe(Re,Be){var Ne=Re.charCodeAt(Be);if(Ne>=48&&Ne<=57)return Ne-48;if(Ne>=65&&Ne<=70)return Ne-55;if(Ne>=97&&Ne<=102)return Ne-87;oe(!1,"Invalid character in "+Re)}function ve(Re,Be,Ne){var Ue=pe(Re,Ne);return Ne-1>=Be&&(Ue|=pe(Re,Ne-1)<<4),Ue}ue.prototype._parseHex=function(Be,Ne,Ue){this.length=Math.ceil((Be.length-Ne)/6),this.words=new Array(this.length);for(var Ge=0;Ge<this.length;Ge++)this.words[Ge]=0;var Ye=0,Qe=0,Te;if(Ue==="be")for(Ge=Be.length-1;Ge>=Ne;Ge-=2)Te=ve(Be,Ne,Ge)<<Ye,this.words[Qe]|=Te&67108863,Ye>=18?(Ye-=18,Qe+=1,this.words[Qe]|=Te>>>26):Ye+=8;else{var Ke=Be.length-Ne;for(Ge=Ke%2===0?Ne+1:Ne;Ge<Be.length;Ge+=2)Te=ve(Be,Ne,Ge)<<Ye,this.words[Qe]|=Te&67108863,Ye>=18?(Ye-=18,Qe+=1,this.words[Qe]|=Te>>>26):Ye+=8}this._strip()};function me(Re,Be,Ne,Ue){for(var Ge=0,Ye=0,Qe=Math.min(Re.length,Ne),Te=Be;Te<Qe;Te++){var Ke=Re.charCodeAt(Te)-48;Ge*=Ue,Ke>=49?Ye=Ke-49+10:Ke>=17?Ye=Ke-17+10:Ye=Ke,oe(Ke>=0&&Ye<Ue,"Invalid character"),Ge+=Ye}return Ge}ue.prototype._parseBase=function(Be,Ne,Ue){this.words=[0],this.length=1;for(var Ge=0,Ye=1;Ye<=67108863;Ye*=Ne)Ge++;Ge--,Ye=Ye/Ne|0;for(var Qe=Be.length-Ue,Te=Qe%Ge,Ke=Math.min(Qe,Qe-Te)+Ue,rt=0,it=Ue;it<Ke;it+=Ge)rt=me(Be,it,it+Ge,Ne),this.imuln(Ye),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt);if(Te!==0){var at=1;for(rt=me(Be,it,Be.length,Ne),it=0;it<Te;it++)at*=Ne;this.imuln(at),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt)}this._strip()},ue.prototype.copy=function(Be){Be.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)Be.words[Ne]=this.words[Ne];Be.length=this.length,Be.negative=this.negative,Be.red=this.red};function ge(Re,Be){Re.words=Be.words,Re.length=Be.length,Re.negative=Be.negative,Re.red=Be.red}if(ue.prototype._move=function(Be){ge(Be,this)},ue.prototype.clone=function(){var Be=new ue(null);return this.copy(Be),Be},ue.prototype._expand=function(Be){for(;this.length<Be;)this.words[this.length++]=0;return this},ue.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{ue.prototype[Symbol.for("nodejs.util.inspect.custom")]=ye}catch{ue.prototype.inspect=ye}else ue.prototype.inspect=ye;function ye(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var xe=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_e=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],$e=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(Be,Ne){Be=Be||10,Ne=Ne|0||1;var Ue;if(Be===16||Be==="hex"){Ue="";for(var Ge=0,Ye=0,Qe=0;Qe<this.length;Qe++){var Te=this.words[Qe],Ke=((Te<<Ge|Ye)&16777215).toString(16);Ye=Te>>>24-Ge&16777215,Ge+=2,Ge>=26&&(Ge-=26,Qe--),Ye!==0||Qe!==this.length-1?Ue=xe[6-Ke.length]+Ke+Ue:Ue=Ke+Ue}for(Ye!==0&&(Ue=Ye.toString(16)+Ue);Ue.length%Ne!==0;)Ue="0"+Ue;return this.negative!==0&&(Ue="-"+Ue),Ue}if(Be===(Be|0)&&Be>=2&&Be<=36){var rt=_e[Be],it=$e[Be];Ue="";var at=this.clone();for(at.negative=0;!at.isZero();){var lt=at.modrn(it).toString(Be);at=at.idivn(it),at.isZero()?Ue=lt+Ue:Ue=xe[rt-lt.length]+lt+Ue}for(this.isZero()&&(Ue="0"+Ue);Ue.length%Ne!==0;)Ue="0"+Ue;return this.negative!==0&&(Ue="-"+Ue),Ue}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var Be=this.words[0];return this.length===2?Be+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Be+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Be:Be},ue.prototype.toJSON=function(){return this.toString(16,2)},Ae&&(ue.prototype.toBuffer=function(Be,Ne){return this.toArrayLike(Ae,Be,Ne)}),ue.prototype.toArray=function(Be,Ne){return this.toArrayLike(Array,Be,Ne)};var Ie=function(Be,Ne){return Be.allocUnsafe?Be.allocUnsafe(Ne):new Be(Ne)};ue.prototype.toArrayLike=function(Be,Ne,Ue){this._strip();var Ge=this.byteLength(),Ye=Ue||Math.max(1,Ge);oe(Ge<=Ye,"byte array longer than desired length"),oe(Ye>0,"Requested array length <= 0");var Qe=Ie(Be,Ye),Te=Ne==="le"?"LE":"BE";return this["_toArrayLike"+Te](Qe,Ge),Qe},ue.prototype._toArrayLikeLE=function(Be,Ne){for(var Ue=0,Ge=0,Ye=0,Qe=0;Ye<this.length;Ye++){var Te=this.words[Ye]<<Qe|Ge;Be[Ue++]=Te&255,Ue<Be.length&&(Be[Ue++]=Te>>8&255),Ue<Be.length&&(Be[Ue++]=Te>>16&255),Qe===6?(Ue<Be.length&&(Be[Ue++]=Te>>24&255),Ge=0,Qe=0):(Ge=Te>>>24,Qe+=2)}if(Ue<Be.length)for(Be[Ue++]=Ge;Ue<Be.length;)Be[Ue++]=0},ue.prototype._toArrayLikeBE=function(Be,Ne){for(var Ue=Be.length-1,Ge=0,Ye=0,Qe=0;Ye<this.length;Ye++){var Te=this.words[Ye]<<Qe|Ge;Be[Ue--]=Te&255,Ue>=0&&(Be[Ue--]=Te>>8&255),Ue>=0&&(Be[Ue--]=Te>>16&255),Qe===6?(Ue>=0&&(Be[Ue--]=Te>>24&255),Ge=0,Qe=0):(Ge=Te>>>24,Qe+=2)}if(Ue>=0)for(Be[Ue--]=Ge;Ue>=0;)Be[Ue--]=0},Math.clz32?ue.prototype._countBits=function(Be){return 32-Math.clz32(Be)}:ue.prototype._countBits=function(Be){var Ne=Be,Ue=0;return Ne>=4096&&(Ue+=13,Ne>>>=13),Ne>=64&&(Ue+=7,Ne>>>=7),Ne>=8&&(Ue+=4,Ne>>>=4),Ne>=2&&(Ue+=2,Ne>>>=2),Ue+Ne},ue.prototype._zeroBits=function(Be){if(Be===0)return 26;var Ne=Be,Ue=0;return Ne&8191||(Ue+=13,Ne>>>=13),Ne&127||(Ue+=7,Ne>>>=7),Ne&15||(Ue+=4,Ne>>>=4),Ne&3||(Ue+=2,Ne>>>=2),Ne&1||Ue++,Ue},ue.prototype.bitLength=function(){var Be=this.words[this.length-1],Ne=this._countBits(Be);return(this.length-1)*26+Ne};function Fe(Re){for(var Be=new Array(Re.bitLength()),Ne=0;Ne<Be.length;Ne++){var Ue=Ne/26|0,Ge=Ne%26;Be[Ne]=Re.words[Ue]>>>Ge&1}return Be}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Be=0,Ne=0;Ne<this.length;Ne++){var Ue=this._zeroBits(this.words[Ne]);if(Be+=Ue,Ue!==26)break}return Be},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(Be){return this.negative!==0?this.abs().inotn(Be).iaddn(1):this.clone()},ue.prototype.fromTwos=function(Be){return this.testn(Be-1)?this.notn(Be).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(Be){for(;this.length<Be.length;)this.words[this.length++]=0;for(var Ne=0;Ne<Be.length;Ne++)this.words[Ne]=this.words[Ne]|Be.words[Ne];return this._strip()},ue.prototype.ior=function(Be){return oe((this.negative|Be.negative)===0),this.iuor(Be)},ue.prototype.or=function(Be){return this.length>Be.length?this.clone().ior(Be):Be.clone().ior(this)},ue.prototype.uor=function(Be){return this.length>Be.length?this.clone().iuor(Be):Be.clone().iuor(this)},ue.prototype.iuand=function(Be){var Ne;this.length>Be.length?Ne=Be:Ne=this;for(var Ue=0;Ue<Ne.length;Ue++)this.words[Ue]=this.words[Ue]&Be.words[Ue];return this.length=Ne.length,this._strip()},ue.prototype.iand=function(Be){return oe((this.negative|Be.negative)===0),this.iuand(Be)},ue.prototype.and=function(Be){return this.length>Be.length?this.clone().iand(Be):Be.clone().iand(this)},ue.prototype.uand=function(Be){return this.length>Be.length?this.clone().iuand(Be):Be.clone().iuand(this)},ue.prototype.iuxor=function(Be){var Ne,Ue;this.length>Be.length?(Ne=this,Ue=Be):(Ne=Be,Ue=this);for(var Ge=0;Ge<Ue.length;Ge++)this.words[Ge]=Ne.words[Ge]^Ue.words[Ge];if(this!==Ne)for(;Ge<Ne.length;Ge++)this.words[Ge]=Ne.words[Ge];return this.length=Ne.length,this._strip()},ue.prototype.ixor=function(Be){return oe((this.negative|Be.negative)===0),this.iuxor(Be)},ue.prototype.xor=function(Be){return this.length>Be.length?this.clone().ixor(Be):Be.clone().ixor(this)},ue.prototype.uxor=function(Be){return this.length>Be.length?this.clone().iuxor(Be):Be.clone().iuxor(this)},ue.prototype.inotn=function(Be){oe(typeof Be=="number"&&Be>=0);var Ne=Math.ceil(Be/26)|0,Ue=Be%26;this._expand(Ne),Ue>0&&Ne--;for(var Ge=0;Ge<Ne;Ge++)this.words[Ge]=~this.words[Ge]&67108863;return Ue>0&&(this.words[Ge]=~this.words[Ge]&67108863>>26-Ue),this._strip()},ue.prototype.notn=function(Be){return this.clone().inotn(Be)},ue.prototype.setn=function(Be,Ne){oe(typeof Be=="number"&&Be>=0);var Ue=Be/26|0,Ge=Be%26;return this._expand(Ue+1),Ne?this.words[Ue]=this.words[Ue]|1<<Ge:this.words[Ue]=this.words[Ue]&~(1<<Ge),this._strip()},ue.prototype.iadd=function(Be){var Ne;if(this.negative!==0&&Be.negative===0)return this.negative=0,Ne=this.isub(Be),this.negative^=1,this._normSign();if(this.negative===0&&Be.negative!==0)return Be.negative=0,Ne=this.isub(Be),Be.negative=1,Ne._normSign();var Ue,Ge;this.length>Be.length?(Ue=this,Ge=Be):(Ue=Be,Ge=this);for(var Ye=0,Qe=0;Qe<Ge.length;Qe++)Ne=(Ue.words[Qe]|0)+(Ge.words[Qe]|0)+Ye,this.words[Qe]=Ne&67108863,Ye=Ne>>>26;for(;Ye!==0&&Qe<Ue.length;Qe++)Ne=(Ue.words[Qe]|0)+Ye,this.words[Qe]=Ne&67108863,Ye=Ne>>>26;if(this.length=Ue.length,Ye!==0)this.words[this.length]=Ye,this.length++;else if(Ue!==this)for(;Qe<Ue.length;Qe++)this.words[Qe]=Ue.words[Qe];return this},ue.prototype.add=function(Be){var Ne;return Be.negative!==0&&this.negative===0?(Be.negative=0,Ne=this.sub(Be),Be.negative^=1,Ne):Be.negative===0&&this.negative!==0?(this.negative=0,Ne=Be.sub(this),this.negative=1,Ne):this.length>Be.length?this.clone().iadd(Be):Be.clone().iadd(this)},ue.prototype.isub=function(Be){if(Be.negative!==0){Be.negative=0;var Ne=this.iadd(Be);return Be.negative=1,Ne._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Be),this.negative=1,this._normSign();var Ue=this.cmp(Be);if(Ue===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ge,Ye;Ue>0?(Ge=this,Ye=Be):(Ge=Be,Ye=this);for(var Qe=0,Te=0;Te<Ye.length;Te++)Ne=(Ge.words[Te]|0)-(Ye.words[Te]|0)+Qe,Qe=Ne>>26,this.words[Te]=Ne&67108863;for(;Qe!==0&&Te<Ge.length;Te++)Ne=(Ge.words[Te]|0)+Qe,Qe=Ne>>26,this.words[Te]=Ne&67108863;if(Qe===0&&Te<Ge.length&&Ge!==this)for(;Te<Ge.length;Te++)this.words[Te]=Ge.words[Te];return this.length=Math.max(this.length,Te),Ge!==this&&(this.negative=1),this._strip()},ue.prototype.sub=function(Be){return this.clone().isub(Be)};function ke(Re,Be,Ne){Ne.negative=Be.negative^Re.negative;var Ue=Re.length+Be.length|0;Ne.length=Ue,Ue=Ue-1|0;var Ge=Re.words[0]|0,Ye=Be.words[0]|0,Qe=Ge*Ye,Te=Qe&67108863,Ke=Qe/67108864|0;Ne.words[0]=Te;for(var rt=1;rt<Ue;rt++){for(var it=Ke>>>26,at=Ke&67108863,lt=Math.min(rt,Be.length-1),ct=Math.max(0,rt-Re.length+1);ct<=lt;ct++){var ot=rt-ct|0;Ge=Re.words[ot]|0,Ye=Be.words[ct]|0,Qe=Ge*Ye+at,it+=Qe/67108864|0,at=Qe&67108863}Ne.words[rt]=at|0,Ke=it|0}return Ke!==0?Ne.words[rt]=Ke|0:Ne.length--,Ne._strip()}var je=function(Be,Ne,Ue){var Ge=Be.words,Ye=Ne.words,Qe=Ue.words,Te=0,Ke,rt,it,at=Ge[0]|0,lt=at&8191,ct=at>>>13,ot=Ge[1]|0,ft=ot&8191,dt=ot>>>13,mt=Ge[2]|0,kt=mt&8191,wt=mt>>>13,Et=Ge[3]|0,Ot=Et&8191,Rt=Et>>>13,gt=Ge[4]|0,$t=gt&8191,pt=gt>>>13,vt=Ge[5]|0,Mt=vt&8191,St=vt>>>13,_t=Ge[6]|0,Xt=_t&8191,Tt=_t>>>13,Dt=Ge[7]|0,Ht=Dt&8191,Bt=Dt>>>13,It=Ge[8]|0,zt=It&8191,Pt=It>>>13,Vt=Ge[9]|0,vr=Vt&8191,qt=Vt>>>13,er=Ye[0]|0,yr=er&8191,Lt=er>>>13,jt=Ye[1]|0,fr=jt&8191,Gt=jt>>>13,Jt=Ye[2]|0,ar=Jt&8191,Wt=Jt>>>13,nr=Ye[3]|0,Er=nr&8191,Zt=nr>>>13,ir=Ye[4]|0,Ir=ir&8191,tr=ir>>>13,cr=Ye[5]|0,Or=cr&8191,sr=cr>>>13,dr=Ye[6]|0,Dr=dr&8191,lr=dr>>>13,hr=Ye[7]|0,Yr=hr&8191,ur=hr>>>13,pr=Ye[8]|0,Jr=pr&8191,Yt=pr>>>13,or=Ye[9]|0,Fr=or&8191,kr=or>>>13;Ue.negative=Be.negative^Ne.negative,Ue.length=19,Ke=Math.imul(lt,yr),rt=Math.imul(lt,Lt),rt=rt+Math.imul(ct,yr)|0,it=Math.imul(ct,Lt);var Kr=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,Ke=Math.imul(ft,yr),rt=Math.imul(ft,Lt),rt=rt+Math.imul(dt,yr)|0,it=Math.imul(dt,Lt),Ke=Ke+Math.imul(lt,fr)|0,rt=rt+Math.imul(lt,Gt)|0,rt=rt+Math.imul(ct,fr)|0,it=it+Math.imul(ct,Gt)|0;var cn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(cn>>>26)|0,cn&=67108863,Ke=Math.imul(kt,yr),rt=Math.imul(kt,Lt),rt=rt+Math.imul(wt,yr)|0,it=Math.imul(wt,Lt),Ke=Ke+Math.imul(ft,fr)|0,rt=rt+Math.imul(ft,Gt)|0,rt=rt+Math.imul(dt,fr)|0,it=it+Math.imul(dt,Gt)|0,Ke=Ke+Math.imul(lt,ar)|0,rt=rt+Math.imul(lt,Wt)|0,rt=rt+Math.imul(ct,ar)|0,it=it+Math.imul(ct,Wt)|0;var An=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(An>>>26)|0,An&=67108863,Ke=Math.imul(Ot,yr),rt=Math.imul(Ot,Lt),rt=rt+Math.imul(Rt,yr)|0,it=Math.imul(Rt,Lt),Ke=Ke+Math.imul(kt,fr)|0,rt=rt+Math.imul(kt,Gt)|0,rt=rt+Math.imul(wt,fr)|0,it=it+Math.imul(wt,Gt)|0,Ke=Ke+Math.imul(ft,ar)|0,rt=rt+Math.imul(ft,Wt)|0,rt=rt+Math.imul(dt,ar)|0,it=it+Math.imul(dt,Wt)|0,Ke=Ke+Math.imul(lt,Er)|0,rt=rt+Math.imul(lt,Zt)|0,rt=rt+Math.imul(ct,Er)|0,it=it+Math.imul(ct,Zt)|0;var _n=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(_n>>>26)|0,_n&=67108863,Ke=Math.imul($t,yr),rt=Math.imul($t,Lt),rt=rt+Math.imul(pt,yr)|0,it=Math.imul(pt,Lt),Ke=Ke+Math.imul(Ot,fr)|0,rt=rt+Math.imul(Ot,Gt)|0,rt=rt+Math.imul(Rt,fr)|0,it=it+Math.imul(Rt,Gt)|0,Ke=Ke+Math.imul(kt,ar)|0,rt=rt+Math.imul(kt,Wt)|0,rt=rt+Math.imul(wt,ar)|0,it=it+Math.imul(wt,Wt)|0,Ke=Ke+Math.imul(ft,Er)|0,rt=rt+Math.imul(ft,Zt)|0,rt=rt+Math.imul(dt,Er)|0,it=it+Math.imul(dt,Zt)|0,Ke=Ke+Math.imul(lt,Ir)|0,rt=rt+Math.imul(lt,tr)|0,rt=rt+Math.imul(ct,Ir)|0,it=it+Math.imul(ct,tr)|0;var wn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(wn>>>26)|0,wn&=67108863,Ke=Math.imul(Mt,yr),rt=Math.imul(Mt,Lt),rt=rt+Math.imul(St,yr)|0,it=Math.imul(St,Lt),Ke=Ke+Math.imul($t,fr)|0,rt=rt+Math.imul($t,Gt)|0,rt=rt+Math.imul(pt,fr)|0,it=it+Math.imul(pt,Gt)|0,Ke=Ke+Math.imul(Ot,ar)|0,rt=rt+Math.imul(Ot,Wt)|0,rt=rt+Math.imul(Rt,ar)|0,it=it+Math.imul(Rt,Wt)|0,Ke=Ke+Math.imul(kt,Er)|0,rt=rt+Math.imul(kt,Zt)|0,rt=rt+Math.imul(wt,Er)|0,it=it+Math.imul(wt,Zt)|0,Ke=Ke+Math.imul(ft,Ir)|0,rt=rt+Math.imul(ft,tr)|0,rt=rt+Math.imul(dt,Ir)|0,it=it+Math.imul(dt,tr)|0,Ke=Ke+Math.imul(lt,Or)|0,rt=rt+Math.imul(lt,sr)|0,rt=rt+Math.imul(ct,Or)|0,it=it+Math.imul(ct,sr)|0;var Bn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,Ke=Math.imul(Xt,yr),rt=Math.imul(Xt,Lt),rt=rt+Math.imul(Tt,yr)|0,it=Math.imul(Tt,Lt),Ke=Ke+Math.imul(Mt,fr)|0,rt=rt+Math.imul(Mt,Gt)|0,rt=rt+Math.imul(St,fr)|0,it=it+Math.imul(St,Gt)|0,Ke=Ke+Math.imul($t,ar)|0,rt=rt+Math.imul($t,Wt)|0,rt=rt+Math.imul(pt,ar)|0,it=it+Math.imul(pt,Wt)|0,Ke=Ke+Math.imul(Ot,Er)|0,rt=rt+Math.imul(Ot,Zt)|0,rt=rt+Math.imul(Rt,Er)|0,it=it+Math.imul(Rt,Zt)|0,Ke=Ke+Math.imul(kt,Ir)|0,rt=rt+Math.imul(kt,tr)|0,rt=rt+Math.imul(wt,Ir)|0,it=it+Math.imul(wt,tr)|0,Ke=Ke+Math.imul(ft,Or)|0,rt=rt+Math.imul(ft,sr)|0,rt=rt+Math.imul(dt,Or)|0,it=it+Math.imul(dt,sr)|0,Ke=Ke+Math.imul(lt,Dr)|0,rt=rt+Math.imul(lt,lr)|0,rt=rt+Math.imul(ct,Dr)|0,it=it+Math.imul(ct,lr)|0;var On=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(On>>>26)|0,On&=67108863,Ke=Math.imul(Ht,yr),rt=Math.imul(Ht,Lt),rt=rt+Math.imul(Bt,yr)|0,it=Math.imul(Bt,Lt),Ke=Ke+Math.imul(Xt,fr)|0,rt=rt+Math.imul(Xt,Gt)|0,rt=rt+Math.imul(Tt,fr)|0,it=it+Math.imul(Tt,Gt)|0,Ke=Ke+Math.imul(Mt,ar)|0,rt=rt+Math.imul(Mt,Wt)|0,rt=rt+Math.imul(St,ar)|0,it=it+Math.imul(St,Wt)|0,Ke=Ke+Math.imul($t,Er)|0,rt=rt+Math.imul($t,Zt)|0,rt=rt+Math.imul(pt,Er)|0,it=it+Math.imul(pt,Zt)|0,Ke=Ke+Math.imul(Ot,Ir)|0,rt=rt+Math.imul(Ot,tr)|0,rt=rt+Math.imul(Rt,Ir)|0,it=it+Math.imul(Rt,tr)|0,Ke=Ke+Math.imul(kt,Or)|0,rt=rt+Math.imul(kt,sr)|0,rt=rt+Math.imul(wt,Or)|0,it=it+Math.imul(wt,sr)|0,Ke=Ke+Math.imul(ft,Dr)|0,rt=rt+Math.imul(ft,lr)|0,rt=rt+Math.imul(dt,Dr)|0,it=it+Math.imul(dt,lr)|0,Ke=Ke+Math.imul(lt,Yr)|0,rt=rt+Math.imul(lt,ur)|0,rt=rt+Math.imul(ct,Yr)|0,it=it+Math.imul(ct,ur)|0;var In=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(In>>>26)|0,In&=67108863,Ke=Math.imul(zt,yr),rt=Math.imul(zt,Lt),rt=rt+Math.imul(Pt,yr)|0,it=Math.imul(Pt,Lt),Ke=Ke+Math.imul(Ht,fr)|0,rt=rt+Math.imul(Ht,Gt)|0,rt=rt+Math.imul(Bt,fr)|0,it=it+Math.imul(Bt,Gt)|0,Ke=Ke+Math.imul(Xt,ar)|0,rt=rt+Math.imul(Xt,Wt)|0,rt=rt+Math.imul(Tt,ar)|0,it=it+Math.imul(Tt,Wt)|0,Ke=Ke+Math.imul(Mt,Er)|0,rt=rt+Math.imul(Mt,Zt)|0,rt=rt+Math.imul(St,Er)|0,it=it+Math.imul(St,Zt)|0,Ke=Ke+Math.imul($t,Ir)|0,rt=rt+Math.imul($t,tr)|0,rt=rt+Math.imul(pt,Ir)|0,it=it+Math.imul(pt,tr)|0,Ke=Ke+Math.imul(Ot,Or)|0,rt=rt+Math.imul(Ot,sr)|0,rt=rt+Math.imul(Rt,Or)|0,it=it+Math.imul(Rt,sr)|0,Ke=Ke+Math.imul(kt,Dr)|0,rt=rt+Math.imul(kt,lr)|0,rt=rt+Math.imul(wt,Dr)|0,it=it+Math.imul(wt,lr)|0,Ke=Ke+Math.imul(ft,Yr)|0,rt=rt+Math.imul(ft,ur)|0,rt=rt+Math.imul(dt,Yr)|0,it=it+Math.imul(dt,ur)|0,Ke=Ke+Math.imul(lt,Jr)|0,rt=rt+Math.imul(lt,Yt)|0,rt=rt+Math.imul(ct,Jr)|0,it=it+Math.imul(ct,Yt)|0;var Ln=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,Ke=Math.imul(vr,yr),rt=Math.imul(vr,Lt),rt=rt+Math.imul(qt,yr)|0,it=Math.imul(qt,Lt),Ke=Ke+Math.imul(zt,fr)|0,rt=rt+Math.imul(zt,Gt)|0,rt=rt+Math.imul(Pt,fr)|0,it=it+Math.imul(Pt,Gt)|0,Ke=Ke+Math.imul(Ht,ar)|0,rt=rt+Math.imul(Ht,Wt)|0,rt=rt+Math.imul(Bt,ar)|0,it=it+Math.imul(Bt,Wt)|0,Ke=Ke+Math.imul(Xt,Er)|0,rt=rt+Math.imul(Xt,Zt)|0,rt=rt+Math.imul(Tt,Er)|0,it=it+Math.imul(Tt,Zt)|0,Ke=Ke+Math.imul(Mt,Ir)|0,rt=rt+Math.imul(Mt,tr)|0,rt=rt+Math.imul(St,Ir)|0,it=it+Math.imul(St,tr)|0,Ke=Ke+Math.imul($t,Or)|0,rt=rt+Math.imul($t,sr)|0,rt=rt+Math.imul(pt,Or)|0,it=it+Math.imul(pt,sr)|0,Ke=Ke+Math.imul(Ot,Dr)|0,rt=rt+Math.imul(Ot,lr)|0,rt=rt+Math.imul(Rt,Dr)|0,it=it+Math.imul(Rt,lr)|0,Ke=Ke+Math.imul(kt,Yr)|0,rt=rt+Math.imul(kt,ur)|0,rt=rt+Math.imul(wt,Yr)|0,it=it+Math.imul(wt,ur)|0,Ke=Ke+Math.imul(ft,Jr)|0,rt=rt+Math.imul(ft,Yt)|0,rt=rt+Math.imul(dt,Jr)|0,it=it+Math.imul(dt,Yt)|0,Ke=Ke+Math.imul(lt,Fr)|0,rt=rt+Math.imul(lt,kr)|0,rt=rt+Math.imul(ct,Fr)|0,it=it+Math.imul(ct,kr)|0;var Tn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Ke=Math.imul(vr,fr),rt=Math.imul(vr,Gt),rt=rt+Math.imul(qt,fr)|0,it=Math.imul(qt,Gt),Ke=Ke+Math.imul(zt,ar)|0,rt=rt+Math.imul(zt,Wt)|0,rt=rt+Math.imul(Pt,ar)|0,it=it+Math.imul(Pt,Wt)|0,Ke=Ke+Math.imul(Ht,Er)|0,rt=rt+Math.imul(Ht,Zt)|0,rt=rt+Math.imul(Bt,Er)|0,it=it+Math.imul(Bt,Zt)|0,Ke=Ke+Math.imul(Xt,Ir)|0,rt=rt+Math.imul(Xt,tr)|0,rt=rt+Math.imul(Tt,Ir)|0,it=it+Math.imul(Tt,tr)|0,Ke=Ke+Math.imul(Mt,Or)|0,rt=rt+Math.imul(Mt,sr)|0,rt=rt+Math.imul(St,Or)|0,it=it+Math.imul(St,sr)|0,Ke=Ke+Math.imul($t,Dr)|0,rt=rt+Math.imul($t,lr)|0,rt=rt+Math.imul(pt,Dr)|0,it=it+Math.imul(pt,lr)|0,Ke=Ke+Math.imul(Ot,Yr)|0,rt=rt+Math.imul(Ot,ur)|0,rt=rt+Math.imul(Rt,Yr)|0,it=it+Math.imul(Rt,ur)|0,Ke=Ke+Math.imul(kt,Jr)|0,rt=rt+Math.imul(kt,Yt)|0,rt=rt+Math.imul(wt,Jr)|0,it=it+Math.imul(wt,Yt)|0,Ke=Ke+Math.imul(ft,Fr)|0,rt=rt+Math.imul(ft,kr)|0,rt=rt+Math.imul(dt,Fr)|0,it=it+Math.imul(dt,kr)|0;var Rn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Ke=Math.imul(vr,ar),rt=Math.imul(vr,Wt),rt=rt+Math.imul(qt,ar)|0,it=Math.imul(qt,Wt),Ke=Ke+Math.imul(zt,Er)|0,rt=rt+Math.imul(zt,Zt)|0,rt=rt+Math.imul(Pt,Er)|0,it=it+Math.imul(Pt,Zt)|0,Ke=Ke+Math.imul(Ht,Ir)|0,rt=rt+Math.imul(Ht,tr)|0,rt=rt+Math.imul(Bt,Ir)|0,it=it+Math.imul(Bt,tr)|0,Ke=Ke+Math.imul(Xt,Or)|0,rt=rt+Math.imul(Xt,sr)|0,rt=rt+Math.imul(Tt,Or)|0,it=it+Math.imul(Tt,sr)|0,Ke=Ke+Math.imul(Mt,Dr)|0,rt=rt+Math.imul(Mt,lr)|0,rt=rt+Math.imul(St,Dr)|0,it=it+Math.imul(St,lr)|0,Ke=Ke+Math.imul($t,Yr)|0,rt=rt+Math.imul($t,ur)|0,rt=rt+Math.imul(pt,Yr)|0,it=it+Math.imul(pt,ur)|0,Ke=Ke+Math.imul(Ot,Jr)|0,rt=rt+Math.imul(Ot,Yt)|0,rt=rt+Math.imul(Rt,Jr)|0,it=it+Math.imul(Rt,Yt)|0,Ke=Ke+Math.imul(kt,Fr)|0,rt=rt+Math.imul(kt,kr)|0,rt=rt+Math.imul(wt,Fr)|0,it=it+Math.imul(wt,kr)|0;var $n=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+($n>>>26)|0,$n&=67108863,Ke=Math.imul(vr,Er),rt=Math.imul(vr,Zt),rt=rt+Math.imul(qt,Er)|0,it=Math.imul(qt,Zt),Ke=Ke+Math.imul(zt,Ir)|0,rt=rt+Math.imul(zt,tr)|0,rt=rt+Math.imul(Pt,Ir)|0,it=it+Math.imul(Pt,tr)|0,Ke=Ke+Math.imul(Ht,Or)|0,rt=rt+Math.imul(Ht,sr)|0,rt=rt+Math.imul(Bt,Or)|0,it=it+Math.imul(Bt,sr)|0,Ke=Ke+Math.imul(Xt,Dr)|0,rt=rt+Math.imul(Xt,lr)|0,rt=rt+Math.imul(Tt,Dr)|0,it=it+Math.imul(Tt,lr)|0,Ke=Ke+Math.imul(Mt,Yr)|0,rt=rt+Math.imul(Mt,ur)|0,rt=rt+Math.imul(St,Yr)|0,it=it+Math.imul(St,ur)|0,Ke=Ke+Math.imul($t,Jr)|0,rt=rt+Math.imul($t,Yt)|0,rt=rt+Math.imul(pt,Jr)|0,it=it+Math.imul(pt,Yt)|0,Ke=Ke+Math.imul(Ot,Fr)|0,rt=rt+Math.imul(Ot,kr)|0,rt=rt+Math.imul(Rt,Fr)|0,it=it+Math.imul(Rt,kr)|0;var Cn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Ke=Math.imul(vr,Ir),rt=Math.imul(vr,tr),rt=rt+Math.imul(qt,Ir)|0,it=Math.imul(qt,tr),Ke=Ke+Math.imul(zt,Or)|0,rt=rt+Math.imul(zt,sr)|0,rt=rt+Math.imul(Pt,Or)|0,it=it+Math.imul(Pt,sr)|0,Ke=Ke+Math.imul(Ht,Dr)|0,rt=rt+Math.imul(Ht,lr)|0,rt=rt+Math.imul(Bt,Dr)|0,it=it+Math.imul(Bt,lr)|0,Ke=Ke+Math.imul(Xt,Yr)|0,rt=rt+Math.imul(Xt,ur)|0,rt=rt+Math.imul(Tt,Yr)|0,it=it+Math.imul(Tt,ur)|0,Ke=Ke+Math.imul(Mt,Jr)|0,rt=rt+Math.imul(Mt,Yt)|0,rt=rt+Math.imul(St,Jr)|0,it=it+Math.imul(St,Yt)|0,Ke=Ke+Math.imul($t,Fr)|0,rt=rt+Math.imul($t,kr)|0,rt=rt+Math.imul(pt,Fr)|0,it=it+Math.imul(pt,kr)|0;var Sn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Ke=Math.imul(vr,Or),rt=Math.imul(vr,sr),rt=rt+Math.imul(qt,Or)|0,it=Math.imul(qt,sr),Ke=Ke+Math.imul(zt,Dr)|0,rt=rt+Math.imul(zt,lr)|0,rt=rt+Math.imul(Pt,Dr)|0,it=it+Math.imul(Pt,lr)|0,Ke=Ke+Math.imul(Ht,Yr)|0,rt=rt+Math.imul(Ht,ur)|0,rt=rt+Math.imul(Bt,Yr)|0,it=it+Math.imul(Bt,ur)|0,Ke=Ke+Math.imul(Xt,Jr)|0,rt=rt+Math.imul(Xt,Yt)|0,rt=rt+Math.imul(Tt,Jr)|0,it=it+Math.imul(Tt,Yt)|0,Ke=Ke+Math.imul(Mt,Fr)|0,rt=rt+Math.imul(Mt,kr)|0,rt=rt+Math.imul(St,Fr)|0,it=it+Math.imul(St,kr)|0;var gn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(gn>>>26)|0,gn&=67108863,Ke=Math.imul(vr,Dr),rt=Math.imul(vr,lr),rt=rt+Math.imul(qt,Dr)|0,it=Math.imul(qt,lr),Ke=Ke+Math.imul(zt,Yr)|0,rt=rt+Math.imul(zt,ur)|0,rt=rt+Math.imul(Pt,Yr)|0,it=it+Math.imul(Pt,ur)|0,Ke=Ke+Math.imul(Ht,Jr)|0,rt=rt+Math.imul(Ht,Yt)|0,rt=rt+Math.imul(Bt,Jr)|0,it=it+Math.imul(Bt,Yt)|0,Ke=Ke+Math.imul(Xt,Fr)|0,rt=rt+Math.imul(Xt,kr)|0,rt=rt+Math.imul(Tt,Fr)|0,it=it+Math.imul(Tt,kr)|0;var Mn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Ke=Math.imul(vr,Yr),rt=Math.imul(vr,ur),rt=rt+Math.imul(qt,Yr)|0,it=Math.imul(qt,ur),Ke=Ke+Math.imul(zt,Jr)|0,rt=rt+Math.imul(zt,Yt)|0,rt=rt+Math.imul(Pt,Jr)|0,it=it+Math.imul(Pt,Yt)|0,Ke=Ke+Math.imul(Ht,Fr)|0,rt=rt+Math.imul(Ht,kr)|0,rt=rt+Math.imul(Bt,Fr)|0,it=it+Math.imul(Bt,kr)|0;var yn=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ke=Math.imul(vr,Jr),rt=Math.imul(vr,Yt),rt=rt+Math.imul(qt,Jr)|0,it=Math.imul(qt,Yt),Ke=Ke+Math.imul(zt,Fr)|0,rt=rt+Math.imul(zt,kr)|0,rt=rt+Math.imul(Pt,Fr)|0,it=it+Math.imul(Pt,kr)|0;var Ys=(Te+Ke|0)+((rt&8191)<<13)|0;Te=(it+(rt>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,Ke=Math.imul(vr,Fr),rt=Math.imul(vr,kr),rt=rt+Math.imul(qt,Fr)|0,it=Math.imul(qt,kr);var pa=(Te+Ke|0)+((rt&8191)<<13)|0;return Te=(it+(rt>>>13)|0)+(pa>>>26)|0,pa&=67108863,Qe[0]=Kr,Qe[1]=cn,Qe[2]=An,Qe[3]=_n,Qe[4]=wn,Qe[5]=Bn,Qe[6]=On,Qe[7]=In,Qe[8]=Ln,Qe[9]=Tn,Qe[10]=Rn,Qe[11]=$n,Qe[12]=Cn,Qe[13]=Sn,Qe[14]=gn,Qe[15]=Mn,Qe[16]=yn,Qe[17]=Ys,Qe[18]=pa,Te!==0&&(Qe[19]=Te,Ue.length++),Ue};Math.imul||(je=ke);function We(Re,Be,Ne){Ne.negative=Be.negative^Re.negative,Ne.length=Re.length+Be.length;for(var Ue=0,Ge=0,Ye=0;Ye<Ne.length-1;Ye++){var Qe=Ge;Ge=0;for(var Te=Ue&67108863,Ke=Math.min(Ye,Be.length-1),rt=Math.max(0,Ye-Re.length+1);rt<=Ke;rt++){var it=Ye-rt,at=Re.words[it]|0,lt=Be.words[rt]|0,ct=at*lt,ot=ct&67108863;Qe=Qe+(ct/67108864|0)|0,ot=ot+Te|0,Te=ot&67108863,Qe=Qe+(ot>>>26)|0,Ge+=Qe>>>26,Qe&=67108863}Ne.words[Ye]=Te,Ue=Qe,Qe=Ge}return Ue!==0?Ne.words[Ye]=Ue:Ne.length--,Ne._strip()}function ze(Re,Be,Ne){return We(Re,Be,Ne)}ue.prototype.mulTo=function(Be,Ne){var Ue,Ge=this.length+Be.length;return this.length===10&&Be.length===10?Ue=je(this,Be,Ne):Ge<63?Ue=ke(this,Be,Ne):Ge<1024?Ue=We(this,Be,Ne):Ue=ze(this,Be,Ne),Ue},ue.prototype.mul=function(Be){var Ne=new ue(null);return Ne.words=new Array(this.length+Be.length),this.mulTo(Be,Ne)},ue.prototype.mulf=function(Be){var Ne=new ue(null);return Ne.words=new Array(this.length+Be.length),ze(this,Be,Ne)},ue.prototype.imul=function(Be){return this.clone().mulTo(Be,this)},ue.prototype.imuln=function(Be){var Ne=Be<0;Ne&&(Be=-Be),oe(typeof Be=="number"),oe(Be<67108864);for(var Ue=0,Ge=0;Ge<this.length;Ge++){var Ye=(this.words[Ge]|0)*Be,Qe=(Ye&67108863)+(Ue&67108863);Ue>>=26,Ue+=Ye/67108864|0,Ue+=Qe>>>26,this.words[Ge]=Qe&67108863}return Ue!==0&&(this.words[Ge]=Ue,this.length++),Ne?this.ineg():this},ue.prototype.muln=function(Be){return this.clone().imuln(Be)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(Be){var Ne=Fe(Be);if(Ne.length===0)return new ue(1);for(var Ue=this,Ge=0;Ge<Ne.length&&Ne[Ge]===0;Ge++,Ue=Ue.sqr());if(++Ge<Ne.length)for(var Ye=Ue.sqr();Ge<Ne.length;Ge++,Ye=Ye.sqr())Ne[Ge]!==0&&(Ue=Ue.mul(Ye));return Ue},ue.prototype.iushln=function(Be){oe(typeof Be=="number"&&Be>=0);var Ne=Be%26,Ue=(Be-Ne)/26,Ge=67108863>>>26-Ne<<26-Ne,Ye;if(Ne!==0){var Qe=0;for(Ye=0;Ye<this.length;Ye++){var Te=this.words[Ye]&Ge,Ke=(this.words[Ye]|0)-Te<<Ne;this.words[Ye]=Ke|Qe,Qe=Te>>>26-Ne}Qe&&(this.words[Ye]=Qe,this.length++)}if(Ue!==0){for(Ye=this.length-1;Ye>=0;Ye--)this.words[Ye+Ue]=this.words[Ye];for(Ye=0;Ye<Ue;Ye++)this.words[Ye]=0;this.length+=Ue}return this._strip()},ue.prototype.ishln=function(Be){return oe(this.negative===0),this.iushln(Be)},ue.prototype.iushrn=function(Be,Ne,Ue){oe(typeof Be=="number"&&Be>=0);var Ge;Ne?Ge=(Ne-Ne%26)/26:Ge=0;var Ye=Be%26,Qe=Math.min((Be-Ye)/26,this.length),Te=67108863^67108863>>>Ye<<Ye,Ke=Ue;if(Ge-=Qe,Ge=Math.max(0,Ge),Ke){for(var rt=0;rt<Qe;rt++)Ke.words[rt]=this.words[rt];Ke.length=Qe}if(Qe!==0)if(this.length>Qe)for(this.length-=Qe,rt=0;rt<this.length;rt++)this.words[rt]=this.words[rt+Qe];else this.words[0]=0,this.length=1;var it=0;for(rt=this.length-1;rt>=0&&(it!==0||rt>=Ge);rt--){var at=this.words[rt]|0;this.words[rt]=it<<26-Ye|at>>>Ye,it=at&Te}return Ke&&it!==0&&(Ke.words[Ke.length++]=it),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},ue.prototype.ishrn=function(Be,Ne,Ue){return oe(this.negative===0),this.iushrn(Be,Ne,Ue)},ue.prototype.shln=function(Be){return this.clone().ishln(Be)},ue.prototype.ushln=function(Be){return this.clone().iushln(Be)},ue.prototype.shrn=function(Be){return this.clone().ishrn(Be)},ue.prototype.ushrn=function(Be){return this.clone().iushrn(Be)},ue.prototype.testn=function(Be){oe(typeof Be=="number"&&Be>=0);var Ne=Be%26,Ue=(Be-Ne)/26,Ge=1<<Ne;if(this.length<=Ue)return!1;var Ye=this.words[Ue];return!!(Ye&Ge)},ue.prototype.imaskn=function(Be){oe(typeof Be=="number"&&Be>=0);var Ne=Be%26,Ue=(Be-Ne)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Ue)return this;if(Ne!==0&&Ue++,this.length=Math.min(Ue,this.length),Ne!==0){var Ge=67108863^67108863>>>Ne<<Ne;this.words[this.length-1]&=Ge}return this._strip()},ue.prototype.maskn=function(Be){return this.clone().imaskn(Be)},ue.prototype.iaddn=function(Be){return oe(typeof Be=="number"),oe(Be<67108864),Be<0?this.isubn(-Be):this.negative!==0?this.length===1&&(this.words[0]|0)<=Be?(this.words[0]=Be-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Be),this.negative=1,this):this._iaddn(Be)},ue.prototype._iaddn=function(Be){this.words[0]+=Be;for(var Ne=0;Ne<this.length&&this.words[Ne]>=67108864;Ne++)this.words[Ne]-=67108864,Ne===this.length-1?this.words[Ne+1]=1:this.words[Ne+1]++;return this.length=Math.max(this.length,Ne+1),this},ue.prototype.isubn=function(Be){if(oe(typeof Be=="number"),oe(Be<67108864),Be<0)return this.iaddn(-Be);if(this.negative!==0)return this.negative=0,this.iaddn(Be),this.negative=1,this;if(this.words[0]-=Be,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Ne=0;Ne<this.length&&this.words[Ne]<0;Ne++)this.words[Ne]+=67108864,this.words[Ne+1]-=1;return this._strip()},ue.prototype.addn=function(Be){return this.clone().iaddn(Be)},ue.prototype.subn=function(Be){return this.clone().isubn(Be)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(Be,Ne,Ue){var Ge=Be.length+Ue,Ye;this._expand(Ge);var Qe,Te=0;for(Ye=0;Ye<Be.length;Ye++){Qe=(this.words[Ye+Ue]|0)+Te;var Ke=(Be.words[Ye]|0)*Ne;Qe-=Ke&67108863,Te=(Qe>>26)-(Ke/67108864|0),this.words[Ye+Ue]=Qe&67108863}for(;Ye<this.length-Ue;Ye++)Qe=(this.words[Ye+Ue]|0)+Te,Te=Qe>>26,this.words[Ye+Ue]=Qe&67108863;if(Te===0)return this._strip();for(oe(Te===-1),Te=0,Ye=0;Ye<this.length;Ye++)Qe=-(this.words[Ye]|0)+Te,Te=Qe>>26,this.words[Ye]=Qe&67108863;return this.negative=1,this._strip()},ue.prototype._wordDiv=function(Be,Ne){var Ue=this.length-Be.length,Ge=this.clone(),Ye=Be,Qe=Ye.words[Ye.length-1]|0,Te=this._countBits(Qe);Ue=26-Te,Ue!==0&&(Ye=Ye.ushln(Ue),Ge.iushln(Ue),Qe=Ye.words[Ye.length-1]|0);var Ke=Ge.length-Ye.length,rt;if(Ne!=="mod"){rt=new ue(null),rt.length=Ke+1,rt.words=new Array(rt.length);for(var it=0;it<rt.length;it++)rt.words[it]=0}var at=Ge.clone()._ishlnsubmul(Ye,1,Ke);at.negative===0&&(Ge=at,rt&&(rt.words[Ke]=1));for(var lt=Ke-1;lt>=0;lt--){var ct=(Ge.words[Ye.length+lt]|0)*67108864+(Ge.words[Ye.length+lt-1]|0);for(ct=Math.min(ct/Qe|0,67108863),Ge._ishlnsubmul(Ye,ct,lt);Ge.negative!==0;)ct--,Ge.negative=0,Ge._ishlnsubmul(Ye,1,lt),Ge.isZero()||(Ge.negative^=1);rt&&(rt.words[lt]=ct)}return rt&&rt._strip(),Ge._strip(),Ne!=="div"&&Ue!==0&&Ge.iushrn(Ue),{div:rt||null,mod:Ge}},ue.prototype.divmod=function(Be,Ne,Ue){if(oe(!Be.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ge,Ye,Qe;return this.negative!==0&&Be.negative===0?(Qe=this.neg().divmod(Be,Ne),Ne!=="mod"&&(Ge=Qe.div.neg()),Ne!=="div"&&(Ye=Qe.mod.neg(),Ue&&Ye.negative!==0&&Ye.iadd(Be)),{div:Ge,mod:Ye}):this.negative===0&&Be.negative!==0?(Qe=this.divmod(Be.neg(),Ne),Ne!=="mod"&&(Ge=Qe.div.neg()),{div:Ge,mod:Qe.mod}):this.negative&Be.negative?(Qe=this.neg().divmod(Be.neg(),Ne),Ne!=="div"&&(Ye=Qe.mod.neg(),Ue&&Ye.negative!==0&&Ye.isub(Be)),{div:Qe.div,mod:Ye}):Be.length>this.length||this.cmp(Be)<0?{div:new ue(0),mod:this}:Be.length===1?Ne==="div"?{div:this.divn(Be.words[0]),mod:null}:Ne==="mod"?{div:null,mod:new ue(this.modrn(Be.words[0]))}:{div:this.divn(Be.words[0]),mod:new ue(this.modrn(Be.words[0]))}:this._wordDiv(Be,Ne)},ue.prototype.div=function(Be){return this.divmod(Be,"div",!1).div},ue.prototype.mod=function(Be){return this.divmod(Be,"mod",!1).mod},ue.prototype.umod=function(Be){return this.divmod(Be,"mod",!0).mod},ue.prototype.divRound=function(Be){var Ne=this.divmod(Be);if(Ne.mod.isZero())return Ne.div;var Ue=Ne.div.negative!==0?Ne.mod.isub(Be):Ne.mod,Ge=Be.ushrn(1),Ye=Be.andln(1),Qe=Ue.cmp(Ge);return Qe<0||Ye===1&&Qe===0?Ne.div:Ne.div.negative!==0?Ne.div.isubn(1):Ne.div.iaddn(1)},ue.prototype.modrn=function(Be){var Ne=Be<0;Ne&&(Be=-Be),oe(Be<=67108863);for(var Ue=(1<<26)%Be,Ge=0,Ye=this.length-1;Ye>=0;Ye--)Ge=(Ue*Ge+(this.words[Ye]|0))%Be;return Ne?-Ge:Ge},ue.prototype.modn=function(Be){return this.modrn(Be)},ue.prototype.idivn=function(Be){var Ne=Be<0;Ne&&(Be=-Be),oe(Be<=67108863);for(var Ue=0,Ge=this.length-1;Ge>=0;Ge--){var Ye=(this.words[Ge]|0)+Ue*67108864;this.words[Ge]=Ye/Be|0,Ue=Ye%Be}return this._strip(),Ne?this.ineg():this},ue.prototype.divn=function(Be){return this.clone().idivn(Be)},ue.prototype.egcd=function(Be){oe(Be.negative===0),oe(!Be.isZero());var Ne=this,Ue=Be.clone();Ne.negative!==0?Ne=Ne.umod(Be):Ne=Ne.clone();for(var Ge=new ue(1),Ye=new ue(0),Qe=new ue(0),Te=new ue(1),Ke=0;Ne.isEven()&&Ue.isEven();)Ne.iushrn(1),Ue.iushrn(1),++Ke;for(var rt=Ue.clone(),it=Ne.clone();!Ne.isZero();){for(var at=0,lt=1;!(Ne.words[0]&lt)&&at<26;++at,lt<<=1);if(at>0)for(Ne.iushrn(at);at-- >0;)(Ge.isOdd()||Ye.isOdd())&&(Ge.iadd(rt),Ye.isub(it)),Ge.iushrn(1),Ye.iushrn(1);for(var ct=0,ot=1;!(Ue.words[0]&ot)&&ct<26;++ct,ot<<=1);if(ct>0)for(Ue.iushrn(ct);ct-- >0;)(Qe.isOdd()||Te.isOdd())&&(Qe.iadd(rt),Te.isub(it)),Qe.iushrn(1),Te.iushrn(1);Ne.cmp(Ue)>=0?(Ne.isub(Ue),Ge.isub(Qe),Ye.isub(Te)):(Ue.isub(Ne),Qe.isub(Ge),Te.isub(Ye))}return{a:Qe,b:Te,gcd:Ue.iushln(Ke)}},ue.prototype._invmp=function(Be){oe(Be.negative===0),oe(!Be.isZero());var Ne=this,Ue=Be.clone();Ne.negative!==0?Ne=Ne.umod(Be):Ne=Ne.clone();for(var Ge=new ue(1),Ye=new ue(0),Qe=Ue.clone();Ne.cmpn(1)>0&&Ue.cmpn(1)>0;){for(var Te=0,Ke=1;!(Ne.words[0]&Ke)&&Te<26;++Te,Ke<<=1);if(Te>0)for(Ne.iushrn(Te);Te-- >0;)Ge.isOdd()&&Ge.iadd(Qe),Ge.iushrn(1);for(var rt=0,it=1;!(Ue.words[0]&it)&&rt<26;++rt,it<<=1);if(rt>0)for(Ue.iushrn(rt);rt-- >0;)Ye.isOdd()&&Ye.iadd(Qe),Ye.iushrn(1);Ne.cmp(Ue)>=0?(Ne.isub(Ue),Ge.isub(Ye)):(Ue.isub(Ne),Ye.isub(Ge))}var at;return Ne.cmpn(1)===0?at=Ge:at=Ye,at.cmpn(0)<0&&at.iadd(Be),at},ue.prototype.gcd=function(Be){if(this.isZero())return Be.abs();if(Be.isZero())return this.abs();var Ne=this.clone(),Ue=Be.clone();Ne.negative=0,Ue.negative=0;for(var Ge=0;Ne.isEven()&&Ue.isEven();Ge++)Ne.iushrn(1),Ue.iushrn(1);do{for(;Ne.isEven();)Ne.iushrn(1);for(;Ue.isEven();)Ue.iushrn(1);var Ye=Ne.cmp(Ue);if(Ye<0){var Qe=Ne;Ne=Ue,Ue=Qe}else if(Ye===0||Ue.cmpn(1)===0)break;Ne.isub(Ue)}while(!0);return Ue.iushln(Ge)},ue.prototype.invm=function(Be){return this.egcd(Be).a.umod(Be)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(Be){return this.words[0]&Be},ue.prototype.bincn=function(Be){oe(typeof Be=="number");var Ne=Be%26,Ue=(Be-Ne)/26,Ge=1<<Ne;if(this.length<=Ue)return this._expand(Ue+1),this.words[Ue]|=Ge,this;for(var Ye=Ge,Qe=Ue;Ye!==0&&Qe<this.length;Qe++){var Te=this.words[Qe]|0;Te+=Ye,Ye=Te>>>26,Te&=67108863,this.words[Qe]=Te}return Ye!==0&&(this.words[Qe]=Ye,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(Be){var Ne=Be<0;if(this.negative!==0&&!Ne)return-1;if(this.negative===0&&Ne)return 1;this._strip();var Ue;if(this.length>1)Ue=1;else{Ne&&(Be=-Be),oe(Be<=67108863,"Number is too big");var Ge=this.words[0]|0;Ue=Ge===Be?0:Ge<Be?-1:1}return this.negative!==0?-Ue|0:Ue},ue.prototype.cmp=function(Be){if(this.negative!==0&&Be.negative===0)return-1;if(this.negative===0&&Be.negative!==0)return 1;var Ne=this.ucmp(Be);return this.negative!==0?-Ne|0:Ne},ue.prototype.ucmp=function(Be){if(this.length>Be.length)return 1;if(this.length<Be.length)return-1;for(var Ne=0,Ue=this.length-1;Ue>=0;Ue--){var Ge=this.words[Ue]|0,Ye=Be.words[Ue]|0;if(Ge!==Ye){Ge<Ye?Ne=-1:Ge>Ye&&(Ne=1);break}}return Ne},ue.prototype.gtn=function(Be){return this.cmpn(Be)===1},ue.prototype.gt=function(Be){return this.cmp(Be)===1},ue.prototype.gten=function(Be){return this.cmpn(Be)>=0},ue.prototype.gte=function(Be){return this.cmp(Be)>=0},ue.prototype.ltn=function(Be){return this.cmpn(Be)===-1},ue.prototype.lt=function(Be){return this.cmp(Be)===-1},ue.prototype.lten=function(Be){return this.cmpn(Be)<=0},ue.prototype.lte=function(Be){return this.cmp(Be)<=0},ue.prototype.eqn=function(Be){return this.cmpn(Be)===0},ue.prototype.eq=function(Be){return this.cmp(Be)===0},ue.red=function(Be){return new qe(Be)},ue.prototype.toRed=function(Be){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),Be.convertTo(this)._forceRed(Be)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(Be){return this.red=Be,this},ue.prototype.forceRed=function(Be){return oe(!this.red,"Already a number in reduction context"),this._forceRed(Be)},ue.prototype.redAdd=function(Be){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,Be)},ue.prototype.redIAdd=function(Be){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Be)},ue.prototype.redSub=function(Be){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,Be)},ue.prototype.redISub=function(Be){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,Be)},ue.prototype.redShl=function(Be){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,Be)},ue.prototype.redMul=function(Be){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Be),this.red.mul(this,Be)},ue.prototype.redIMul=function(Be){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Be),this.red.imul(this,Be)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(Be){return oe(this.red&&!Be.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Be)};var Xe={k256:null,p224:null,p192:null,p25519:null};function Je(Re,Be){this.name=Re,this.p=new ue(Be,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Je.prototype._tmp=function(){var Be=new ue(null);return Be.words=new Array(Math.ceil(this.n/13)),Be},Je.prototype.ireduce=function(Be){var Ne=Be,Ue;do this.split(Ne,this.tmp),Ne=this.imulK(Ne),Ne=Ne.iadd(this.tmp),Ue=Ne.bitLength();while(Ue>this.n);var Ge=Ue<this.n?-1:Ne.ucmp(this.p);return Ge===0?(Ne.words[0]=0,Ne.length=1):Ge>0?Ne.isub(this.p):Ne.strip!==void 0?Ne.strip():Ne._strip(),Ne},Je.prototype.split=function(Be,Ne){Be.iushrn(this.n,0,Ne)},Je.prototype.imulK=function(Be){return Be.imul(this.k)};function nt(){Je.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(nt,Je),nt.prototype.split=function(Be,Ne){for(var Ue=4194303,Ge=Math.min(Be.length,9),Ye=0;Ye<Ge;Ye++)Ne.words[Ye]=Be.words[Ye];if(Ne.length=Ge,Be.length<=9){Be.words[0]=0,Be.length=1;return}var Qe=Be.words[9];for(Ne.words[Ne.length++]=Qe&Ue,Ye=10;Ye<Be.length;Ye++){var Te=Be.words[Ye]|0;Be.words[Ye-10]=(Te&Ue)<<4|Qe>>>22,Qe=Te}Qe>>>=22,Be.words[Ye-10]=Qe,Qe===0&&Be.length>10?Be.length-=10:Be.length-=9},nt.prototype.imulK=function(Be){Be.words[Be.length]=0,Be.words[Be.length+1]=0,Be.length+=2;for(var Ne=0,Ue=0;Ue<Be.length;Ue++){var Ge=Be.words[Ue]|0;Ne+=Ge*977,Be.words[Ue]=Ne&67108863,Ne=Ge*64+(Ne/67108864|0)}return Be.words[Be.length-1]===0&&(Be.length--,Be.words[Be.length-1]===0&&Be.length--),Be};function et(){Je.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(et,Je);function tt(){Je.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(tt,Je);function st(){Je.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(st,Je),st.prototype.imulK=function(Be){for(var Ne=0,Ue=0;Ue<Be.length;Ue++){var Ge=(Be.words[Ue]|0)*19+Ne,Ye=Ge&67108863;Ge>>>=26,Be.words[Ue]=Ye,Ne=Ge}return Ne!==0&&(Be.words[Be.length++]=Ne),Be},ue._prime=function(Be){if(Xe[Be])return Xe[Be];var Ne;if(Be==="k256")Ne=new nt;else if(Be==="p224")Ne=new et;else if(Be==="p192")Ne=new tt;else if(Be==="p25519")Ne=new st;else throw new Error("Unknown prime "+Be);return Xe[Be]=Ne,Ne};function qe(Re){if(typeof Re=="string"){var Be=ue._prime(Re);this.m=Be.p,this.prime=Be}else oe(Re.gtn(1),"modulus must be greater than 1"),this.m=Re,this.prime=null}qe.prototype._verify1=function(Be){oe(Be.negative===0,"red works only with positives"),oe(Be.red,"red works only with red numbers")},qe.prototype._verify2=function(Be,Ne){oe((Be.negative|Ne.negative)===0,"red works only with positives"),oe(Be.red&&Be.red===Ne.red,"red works only with red numbers")},qe.prototype.imod=function(Be){return this.prime?this.prime.ireduce(Be)._forceRed(this):(ge(Be,Be.umod(this.m)._forceRed(this)),Be)},qe.prototype.neg=function(Be){return Be.isZero()?Be.clone():this.m.sub(Be)._forceRed(this)},qe.prototype.add=function(Be,Ne){this._verify2(Be,Ne);var Ue=Be.add(Ne);return Ue.cmp(this.m)>=0&&Ue.isub(this.m),Ue._forceRed(this)},qe.prototype.iadd=function(Be,Ne){this._verify2(Be,Ne);var Ue=Be.iadd(Ne);return Ue.cmp(this.m)>=0&&Ue.isub(this.m),Ue},qe.prototype.sub=function(Be,Ne){this._verify2(Be,Ne);var Ue=Be.sub(Ne);return Ue.cmpn(0)<0&&Ue.iadd(this.m),Ue._forceRed(this)},qe.prototype.isub=function(Be,Ne){this._verify2(Be,Ne);var Ue=Be.isub(Ne);return Ue.cmpn(0)<0&&Ue.iadd(this.m),Ue},qe.prototype.shl=function(Be,Ne){return this._verify1(Be),this.imod(Be.ushln(Ne))},qe.prototype.imul=function(Be,Ne){return this._verify2(Be,Ne),this.imod(Be.imul(Ne))},qe.prototype.mul=function(Be,Ne){return this._verify2(Be,Ne),this.imod(Be.mul(Ne))},qe.prototype.isqr=function(Be){return this.imul(Be,Be.clone())},qe.prototype.sqr=function(Be){return this.mul(Be,Be)},qe.prototype.sqrt=function(Be){if(Be.isZero())return Be.clone();var Ne=this.m.andln(3);if(oe(Ne%2===1),Ne===3){var Ue=this.m.add(new ue(1)).iushrn(2);return this.pow(Be,Ue)}for(var Ge=this.m.subn(1),Ye=0;!Ge.isZero()&&Ge.andln(1)===0;)Ye++,Ge.iushrn(1);oe(!Ge.isZero());var Qe=new ue(1).toRed(this),Te=Qe.redNeg(),Ke=this.m.subn(1).iushrn(1),rt=this.m.bitLength();for(rt=new ue(2*rt*rt).toRed(this);this.pow(rt,Ke).cmp(Te)!==0;)rt.redIAdd(Te);for(var it=this.pow(rt,Ge),at=this.pow(Be,Ge.addn(1).iushrn(1)),lt=this.pow(Be,Ge),ct=Ye;lt.cmp(Qe)!==0;){for(var ot=lt,ft=0;ot.cmp(Qe)!==0;ft++)ot=ot.redSqr();oe(ft<ct);var dt=this.pow(it,new ue(1).iushln(ct-ft-1));at=at.redMul(dt),it=dt.redSqr(),lt=lt.redMul(it),ct=ft}return at},qe.prototype.invm=function(Be){var Ne=Be._invmp(this.m);return Ne.negative!==0?(Ne.negative=0,this.imod(Ne).redNeg()):this.imod(Ne)},qe.prototype.pow=function(Be,Ne){if(Ne.isZero())return new ue(1).toRed(this);if(Ne.cmpn(1)===0)return Be.clone();var Ue=4,Ge=new Array(1<<Ue);Ge[0]=new ue(1).toRed(this),Ge[1]=Be;for(var Ye=2;Ye<Ge.length;Ye++)Ge[Ye]=this.mul(Ge[Ye-1],Be);var Qe=Ge[0],Te=0,Ke=0,rt=Ne.bitLength()%26;for(rt===0&&(rt=26),Ye=Ne.length-1;Ye>=0;Ye--){for(var it=Ne.words[Ye],at=rt-1;at>=0;at--){var lt=it>>at&1;if(Qe!==Ge[0]&&(Qe=this.sqr(Qe)),lt===0&&Te===0){Ke=0;continue}Te<<=1,Te|=lt,Ke++,!(Ke!==Ue&&(Ye!==0||at!==0))&&(Qe=this.mul(Qe,Ge[Te]),Ke=0,Te=0)}rt=26}return Qe},qe.prototype.convertTo=function(Be){var Ne=Be.umod(this.m);return Ne===Be?Ne.clone():Ne},qe.prototype.convertFrom=function(Be){var Ne=Be.clone();return Ne.red=null,Ne},ue.mont=function(Be){return new Se(Be)};function Se(Re){qe.call(this,Re),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(Se,qe),Se.prototype.convertTo=function(Be){return this.imod(Be.ushln(this.shift))},Se.prototype.convertFrom=function(Be){var Ne=this.imod(Be.mul(this.rinv));return Ne.red=null,Ne},Se.prototype.imul=function(Be,Ne){if(Be.isZero()||Ne.isZero())return Be.words[0]=0,Be.length=1,Be;var Ue=Be.imul(Ne),Ge=Ue.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ye=Ue.isub(Ge).iushrn(this.shift),Qe=Ye;return Ye.cmp(this.m)>=0?Qe=Ye.isub(this.m):Ye.cmpn(0)<0&&(Qe=Ye.iadd(this.m)),Qe._forceRed(this)},Se.prototype.mul=function(Be,Ne){if(Be.isZero()||Ne.isZero())return new ue(0)._forceRed(this);var Ue=Be.mul(Ne),Ge=Ue.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ye=Ue.isub(Ge).iushrn(this.shift),Qe=Ye;return Ye.cmp(this.m)>=0?Qe=Ye.isub(this.m):Ye.cmpn(0)<0&&(Qe=Ye.iadd(this.m)),Qe._forceRed(this)},Se.prototype.invm=function(Be){var Ne=this.imod(Be._invmp(this.m).mul(this.r2));return Ne._forceRed(this)}})(K,commonjsGlobal)}(bn$4)),bn$4.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var K=requireBn$4(),J=requireBrowser$a(),ne=requireSafeBuffer$1().Buffer;function oe(Ae){var pe=Ae.modulus.byteLength(),ve;do ve=new K(J(pe));while(ve.cmp(Ae.modulus)>=0||!ve.umod(Ae.prime1)||!ve.umod(Ae.prime2));return ve}function ce(Ae){var pe=oe(Ae),ve=pe.toRed(K.mont(Ae.modulus)).redPow(new K(Ae.publicExponent)).fromRed();return{blinder:ve,unblinder:pe.invm(Ae.modulus)}}function ue(Ae,pe){var ve=ce(pe),me=pe.modulus.byteLength(),ge=new K(Ae).mul(ve.blinder).umod(pe.modulus),ye=ge.toRed(K.mont(pe.prime1)),xe=ge.toRed(K.mont(pe.prime2)),_e=pe.coefficient,$e=pe.prime1,Ie=pe.prime2,Fe=ye.redPow(pe.exponent1).fromRed(),ke=xe.redPow(pe.exponent2).fromRed(),je=Fe.isub(ke).imul(_e).umod($e).imul(Ie);return ke.iadd(je).imul(ve.unblinder).umod(pe.modulus).toArrayLike(ne,"be",me)}return ue.getr=oe,browserifyRsa=ue,browserifyRsa}var elliptic={};const name="elliptic",version="6.5.7",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0={name,version,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$2={},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(K){(function(J,ne){function oe(qe,Se){if(!qe)throw new Error(Se||"Assertion failed")}function ce(qe,Se){qe.super_=Se;var Re=function(){};Re.prototype=Se.prototype,qe.prototype=new Re,qe.prototype.constructor=qe}function ue(qe,Se,Re){if(ue.isBN(qe))return qe;this.negative=0,this.words=null,this.length=0,this.red=null,qe!==null&&((Se==="le"||Se==="be")&&(Re=Se,Se=10),this._init(qe||0,Se||10,Re||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(Se){return Se instanceof ue?!0:Se!==null&&typeof Se=="object"&&Se.constructor.wordSize===ue.wordSize&&Array.isArray(Se.words)},ue.max=function(Se,Re){return Se.cmp(Re)>0?Se:Re},ue.min=function(Se,Re){return Se.cmp(Re)<0?Se:Re},ue.prototype._init=function(Se,Re,Be){if(typeof Se=="number")return this._initNumber(Se,Re,Be);if(typeof Se=="object")return this._initArray(Se,Re,Be);Re==="hex"&&(Re=16),oe(Re===(Re|0)&&Re>=2&&Re<=36),Se=Se.toString().replace(/\s+/g,"");var Ne=0;Se[0]==="-"&&(Ne++,this.negative=1),Ne<Se.length&&(Re===16?this._parseHex(Se,Ne,Be):(this._parseBase(Se,Re,Ne),Be==="le"&&this._initArray(this.toArray(),Re,Be)))},ue.prototype._initNumber=function(Se,Re,Be){Se<0&&(this.negative=1,Se=-Se),Se<67108864?(this.words=[Se&67108863],this.length=1):Se<4503599627370496?(this.words=[Se&67108863,Se/67108864&67108863],this.length=2):(oe(Se<9007199254740992),this.words=[Se&67108863,Se/67108864&67108863,1],this.length=3),Be==="le"&&this._initArray(this.toArray(),Re,Be)},ue.prototype._initArray=function(Se,Re,Be){if(oe(typeof Se.length=="number"),Se.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Se.length/3),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue,Ge,Ye=0;if(Be==="be")for(Ne=Se.length-1,Ue=0;Ne>=0;Ne-=3)Ge=Se[Ne]|Se[Ne-1]<<8|Se[Ne-2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);else if(Be==="le")for(Ne=0,Ue=0;Ne<Se.length;Ne+=3)Ge=Se[Ne]|Se[Ne+1]<<8|Se[Ne+2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);return this.strip()};function pe(qe,Se){var Re=qe.charCodeAt(Se);return Re>=65&&Re<=70?Re-55:Re>=97&&Re<=102?Re-87:Re-48&15}function ve(qe,Se,Re){var Be=pe(qe,Re);return Re-1>=Se&&(Be|=pe(qe,Re-1)<<4),Be}ue.prototype._parseHex=function(Se,Re,Be){this.length=Math.ceil((Se.length-Re)/6),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue=0,Ge=0,Ye;if(Be==="be")for(Ne=Se.length-1;Ne>=Re;Ne-=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8;else{var Qe=Se.length-Re;for(Ne=Qe%2===0?Re+1:Re;Ne<Se.length;Ne+=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8}this.strip()};function me(qe,Se,Re,Be){for(var Ne=0,Ue=Math.min(qe.length,Re),Ge=Se;Ge<Ue;Ge++){var Ye=qe.charCodeAt(Ge)-48;Ne*=Be,Ye>=49?Ne+=Ye-49+10:Ye>=17?Ne+=Ye-17+10:Ne+=Ye}return Ne}ue.prototype._parseBase=function(Se,Re,Be){this.words=[0],this.length=1;for(var Ne=0,Ue=1;Ue<=67108863;Ue*=Re)Ne++;Ne--,Ue=Ue/Re|0;for(var Ge=Se.length-Be,Ye=Ge%Ne,Qe=Math.min(Ge,Ge-Ye)+Be,Te=0,Ke=Be;Ke<Qe;Ke+=Ne)Te=me(Se,Ke,Ke+Ne,Re),this.imuln(Ue),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te);if(Ye!==0){var rt=1;for(Te=me(Se,Ke,Se.length,Re),Ke=0;Ke<Ye;Ke++)rt*=Re;this.imuln(rt),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te)}this.strip()},ue.prototype.copy=function(Se){Se.words=new Array(this.length);for(var Re=0;Re<this.length;Re++)Se.words[Re]=this.words[Re];Se.length=this.length,Se.negative=this.negative,Se.red=this.red},ue.prototype.clone=function(){var Se=new ue(null);return this.copy(Se),Se},ue.prototype._expand=function(Se){for(;this.length<Se;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],xe=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(Se,Re){Se=Se||10,Re=Re|0||1;var Be;if(Se===16||Se==="hex"){Be="";for(var Ne=0,Ue=0,Ge=0;Ge<this.length;Ge++){var Ye=this.words[Ge],Qe=((Ye<<Ne|Ue)&16777215).toString(16);Ue=Ye>>>24-Ne&16777215,Ue!==0||Ge!==this.length-1?Be=ge[6-Qe.length]+Qe+Be:Be=Qe+Be,Ne+=2,Ne>=26&&(Ne-=26,Ge--)}for(Ue!==0&&(Be=Ue.toString(16)+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}if(Se===(Se|0)&&Se>=2&&Se<=36){var Te=ye[Se],Ke=xe[Se];Be="";var rt=this.clone();for(rt.negative=0;!rt.isZero();){var it=rt.modn(Ke).toString(Se);rt=rt.idivn(Ke),rt.isZero()?Be=it+Be:Be=ge[Te-it.length]+it+Be}for(this.isZero()&&(Be="0"+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var Se=this.words[0];return this.length===2?Se+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Se+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Se:Se},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(Se,Re){return oe(typeof Ae<"u"),this.toArrayLike(Ae,Se,Re)},ue.prototype.toArray=function(Se,Re){return this.toArrayLike(Array,Se,Re)},ue.prototype.toArrayLike=function(Se,Re,Be){var Ne=this.byteLength(),Ue=Be||Math.max(1,Ne);oe(Ne<=Ue,"byte array longer than desired length"),oe(Ue>0,"Requested array length <= 0"),this.strip();var Ge=Re==="le",Ye=new Se(Ue),Qe,Te,Ke=this.clone();if(Ge){for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Te]=Qe;for(;Te<Ue;Te++)Ye[Te]=0}else{for(Te=0;Te<Ue-Ne;Te++)Ye[Te]=0;for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Ue-Te-1]=Qe}return Ye},Math.clz32?ue.prototype._countBits=function(Se){return 32-Math.clz32(Se)}:ue.prototype._countBits=function(Se){var Re=Se,Be=0;return Re>=4096&&(Be+=13,Re>>>=13),Re>=64&&(Be+=7,Re>>>=7),Re>=8&&(Be+=4,Re>>>=4),Re>=2&&(Be+=2,Re>>>=2),Be+Re},ue.prototype._zeroBits=function(Se){if(Se===0)return 26;var Re=Se,Be=0;return Re&8191||(Be+=13,Re>>>=13),Re&127||(Be+=7,Re>>>=7),Re&15||(Be+=4,Re>>>=4),Re&3||(Be+=2,Re>>>=2),Re&1||Be++,Be},ue.prototype.bitLength=function(){var Se=this.words[this.length-1],Re=this._countBits(Se);return(this.length-1)*26+Re};function _e(qe){for(var Se=new Array(qe.bitLength()),Re=0;Re<Se.length;Re++){var Be=Re/26|0,Ne=Re%26;Se[Re]=(qe.words[Be]&1<<Ne)>>>Ne}return Se}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Se=0,Re=0;Re<this.length;Re++){var Be=this._zeroBits(this.words[Re]);if(Se+=Be,Be!==26)break}return Se},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(Se){return this.negative!==0?this.abs().inotn(Se).iaddn(1):this.clone()},ue.prototype.fromTwos=function(Se){return this.testn(Se-1)?this.notn(Se).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(Se){for(;this.length<Se.length;)this.words[this.length++]=0;for(var Re=0;Re<Se.length;Re++)this.words[Re]=this.words[Re]|Se.words[Re];return this.strip()},ue.prototype.ior=function(Se){return oe((this.negative|Se.negative)===0),this.iuor(Se)},ue.prototype.or=function(Se){return this.length>Se.length?this.clone().ior(Se):Se.clone().ior(this)},ue.prototype.uor=function(Se){return this.length>Se.length?this.clone().iuor(Se):Se.clone().iuor(this)},ue.prototype.iuand=function(Se){var Re;this.length>Se.length?Re=Se:Re=this;for(var Be=0;Be<Re.length;Be++)this.words[Be]=this.words[Be]&Se.words[Be];return this.length=Re.length,this.strip()},ue.prototype.iand=function(Se){return oe((this.negative|Se.negative)===0),this.iuand(Se)},ue.prototype.and=function(Se){return this.length>Se.length?this.clone().iand(Se):Se.clone().iand(this)},ue.prototype.uand=function(Se){return this.length>Se.length?this.clone().iuand(Se):Se.clone().iuand(this)},ue.prototype.iuxor=function(Se){var Re,Be;this.length>Se.length?(Re=this,Be=Se):(Re=Se,Be=this);for(var Ne=0;Ne<Be.length;Ne++)this.words[Ne]=Re.words[Ne]^Be.words[Ne];if(this!==Re)for(;Ne<Re.length;Ne++)this.words[Ne]=Re.words[Ne];return this.length=Re.length,this.strip()},ue.prototype.ixor=function(Se){return oe((this.negative|Se.negative)===0),this.iuxor(Se)},ue.prototype.xor=function(Se){return this.length>Se.length?this.clone().ixor(Se):Se.clone().ixor(this)},ue.prototype.uxor=function(Se){return this.length>Se.length?this.clone().iuxor(Se):Se.clone().iuxor(this)},ue.prototype.inotn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Math.ceil(Se/26)|0,Be=Se%26;this._expand(Re),Be>0&&Re--;for(var Ne=0;Ne<Re;Ne++)this.words[Ne]=~this.words[Ne]&67108863;return Be>0&&(this.words[Ne]=~this.words[Ne]&67108863>>26-Be),this.strip()},ue.prototype.notn=function(Se){return this.clone().inotn(Se)},ue.prototype.setn=function(Se,Re){oe(typeof Se=="number"&&Se>=0);var Be=Se/26|0,Ne=Se%26;return this._expand(Be+1),Re?this.words[Be]=this.words[Be]|1<<Ne:this.words[Be]=this.words[Be]&~(1<<Ne),this.strip()},ue.prototype.iadd=function(Se){var Re;if(this.negative!==0&&Se.negative===0)return this.negative=0,Re=this.isub(Se),this.negative^=1,this._normSign();if(this.negative===0&&Se.negative!==0)return Se.negative=0,Re=this.isub(Se),Se.negative=1,Re._normSign();var Be,Ne;this.length>Se.length?(Be=this,Ne=Se):(Be=Se,Ne=this);for(var Ue=0,Ge=0;Ge<Ne.length;Ge++)Re=(Be.words[Ge]|0)+(Ne.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;for(;Ue!==0&&Ge<Be.length;Ge++)Re=(Be.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;if(this.length=Be.length,Ue!==0)this.words[this.length]=Ue,this.length++;else if(Be!==this)for(;Ge<Be.length;Ge++)this.words[Ge]=Be.words[Ge];return this},ue.prototype.add=function(Se){var Re;return Se.negative!==0&&this.negative===0?(Se.negative=0,Re=this.sub(Se),Se.negative^=1,Re):Se.negative===0&&this.negative!==0?(this.negative=0,Re=Se.sub(this),this.negative=1,Re):this.length>Se.length?this.clone().iadd(Se):Se.clone().iadd(this)},ue.prototype.isub=function(Se){if(Se.negative!==0){Se.negative=0;var Re=this.iadd(Se);return Se.negative=1,Re._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Se),this.negative=1,this._normSign();var Be=this.cmp(Se);if(Be===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ne,Ue;Be>0?(Ne=this,Ue=Se):(Ne=Se,Ue=this);for(var Ge=0,Ye=0;Ye<Ue.length;Ye++)Re=(Ne.words[Ye]|0)-(Ue.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;for(;Ge!==0&&Ye<Ne.length;Ye++)Re=(Ne.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;if(Ge===0&&Ye<Ne.length&&Ne!==this)for(;Ye<Ne.length;Ye++)this.words[Ye]=Ne.words[Ye];return this.length=Math.max(this.length,Ye),Ne!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(Se){return this.clone().isub(Se)};function $e(qe,Se,Re){Re.negative=Se.negative^qe.negative;var Be=qe.length+Se.length|0;Re.length=Be,Be=Be-1|0;var Ne=qe.words[0]|0,Ue=Se.words[0]|0,Ge=Ne*Ue,Ye=Ge&67108863,Qe=Ge/67108864|0;Re.words[0]=Ye;for(var Te=1;Te<Be;Te++){for(var Ke=Qe>>>26,rt=Qe&67108863,it=Math.min(Te,Se.length-1),at=Math.max(0,Te-qe.length+1);at<=it;at++){var lt=Te-at|0;Ne=qe.words[lt]|0,Ue=Se.words[at]|0,Ge=Ne*Ue+rt,Ke+=Ge/67108864|0,rt=Ge&67108863}Re.words[Te]=rt|0,Qe=Ke|0}return Qe!==0?Re.words[Te]=Qe|0:Re.length--,Re.strip()}var Ie=function(Se,Re,Be){var Ne=Se.words,Ue=Re.words,Ge=Be.words,Ye=0,Qe,Te,Ke,rt=Ne[0]|0,it=rt&8191,at=rt>>>13,lt=Ne[1]|0,ct=lt&8191,ot=lt>>>13,ft=Ne[2]|0,dt=ft&8191,mt=ft>>>13,kt=Ne[3]|0,wt=kt&8191,Et=kt>>>13,Ot=Ne[4]|0,Rt=Ot&8191,gt=Ot>>>13,$t=Ne[5]|0,pt=$t&8191,vt=$t>>>13,Mt=Ne[6]|0,St=Mt&8191,_t=Mt>>>13,Xt=Ne[7]|0,Tt=Xt&8191,Dt=Xt>>>13,Ht=Ne[8]|0,Bt=Ht&8191,It=Ht>>>13,zt=Ne[9]|0,Pt=zt&8191,Vt=zt>>>13,vr=Ue[0]|0,qt=vr&8191,er=vr>>>13,yr=Ue[1]|0,Lt=yr&8191,jt=yr>>>13,fr=Ue[2]|0,Gt=fr&8191,Jt=fr>>>13,ar=Ue[3]|0,Wt=ar&8191,nr=ar>>>13,Er=Ue[4]|0,Zt=Er&8191,ir=Er>>>13,Ir=Ue[5]|0,tr=Ir&8191,cr=Ir>>>13,Or=Ue[6]|0,sr=Or&8191,dr=Or>>>13,Dr=Ue[7]|0,lr=Dr&8191,hr=Dr>>>13,Yr=Ue[8]|0,ur=Yr&8191,pr=Yr>>>13,Jr=Ue[9]|0,Yt=Jr&8191,or=Jr>>>13;Be.negative=Se.negative^Re.negative,Be.length=19,Qe=Math.imul(it,qt),Te=Math.imul(it,er),Te=Te+Math.imul(at,qt)|0,Ke=Math.imul(at,er);var Fr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,Qe=Math.imul(ct,qt),Te=Math.imul(ct,er),Te=Te+Math.imul(ot,qt)|0,Ke=Math.imul(ot,er),Qe=Qe+Math.imul(it,Lt)|0,Te=Te+Math.imul(it,jt)|0,Te=Te+Math.imul(at,Lt)|0,Ke=Ke+Math.imul(at,jt)|0;var kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(kr>>>26)|0,kr&=67108863,Qe=Math.imul(dt,qt),Te=Math.imul(dt,er),Te=Te+Math.imul(mt,qt)|0,Ke=Math.imul(mt,er),Qe=Qe+Math.imul(ct,Lt)|0,Te=Te+Math.imul(ct,jt)|0,Te=Te+Math.imul(ot,Lt)|0,Ke=Ke+Math.imul(ot,jt)|0,Qe=Qe+Math.imul(it,Gt)|0,Te=Te+Math.imul(it,Jt)|0,Te=Te+Math.imul(at,Gt)|0,Ke=Ke+Math.imul(at,Jt)|0;var Kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,Qe=Math.imul(wt,qt),Te=Math.imul(wt,er),Te=Te+Math.imul(Et,qt)|0,Ke=Math.imul(Et,er),Qe=Qe+Math.imul(dt,Lt)|0,Te=Te+Math.imul(dt,jt)|0,Te=Te+Math.imul(mt,Lt)|0,Ke=Ke+Math.imul(mt,jt)|0,Qe=Qe+Math.imul(ct,Gt)|0,Te=Te+Math.imul(ct,Jt)|0,Te=Te+Math.imul(ot,Gt)|0,Ke=Ke+Math.imul(ot,Jt)|0,Qe=Qe+Math.imul(it,Wt)|0,Te=Te+Math.imul(it,nr)|0,Te=Te+Math.imul(at,Wt)|0,Ke=Ke+Math.imul(at,nr)|0;var cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(cn>>>26)|0,cn&=67108863,Qe=Math.imul(Rt,qt),Te=Math.imul(Rt,er),Te=Te+Math.imul(gt,qt)|0,Ke=Math.imul(gt,er),Qe=Qe+Math.imul(wt,Lt)|0,Te=Te+Math.imul(wt,jt)|0,Te=Te+Math.imul(Et,Lt)|0,Ke=Ke+Math.imul(Et,jt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Te=Te+Math.imul(dt,Jt)|0,Te=Te+Math.imul(mt,Gt)|0,Ke=Ke+Math.imul(mt,Jt)|0,Qe=Qe+Math.imul(ct,Wt)|0,Te=Te+Math.imul(ct,nr)|0,Te=Te+Math.imul(ot,Wt)|0,Ke=Ke+Math.imul(ot,nr)|0,Qe=Qe+Math.imul(it,Zt)|0,Te=Te+Math.imul(it,ir)|0,Te=Te+Math.imul(at,Zt)|0,Ke=Ke+Math.imul(at,ir)|0;var An=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(An>>>26)|0,An&=67108863,Qe=Math.imul(pt,qt),Te=Math.imul(pt,er),Te=Te+Math.imul(vt,qt)|0,Ke=Math.imul(vt,er),Qe=Qe+Math.imul(Rt,Lt)|0,Te=Te+Math.imul(Rt,jt)|0,Te=Te+Math.imul(gt,Lt)|0,Ke=Ke+Math.imul(gt,jt)|0,Qe=Qe+Math.imul(wt,Gt)|0,Te=Te+Math.imul(wt,Jt)|0,Te=Te+Math.imul(Et,Gt)|0,Ke=Ke+Math.imul(Et,Jt)|0,Qe=Qe+Math.imul(dt,Wt)|0,Te=Te+Math.imul(dt,nr)|0,Te=Te+Math.imul(mt,Wt)|0,Ke=Ke+Math.imul(mt,nr)|0,Qe=Qe+Math.imul(ct,Zt)|0,Te=Te+Math.imul(ct,ir)|0,Te=Te+Math.imul(ot,Zt)|0,Ke=Ke+Math.imul(ot,ir)|0,Qe=Qe+Math.imul(it,tr)|0,Te=Te+Math.imul(it,cr)|0,Te=Te+Math.imul(at,tr)|0,Ke=Ke+Math.imul(at,cr)|0;var _n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(_n>>>26)|0,_n&=67108863,Qe=Math.imul(St,qt),Te=Math.imul(St,er),Te=Te+Math.imul(_t,qt)|0,Ke=Math.imul(_t,er),Qe=Qe+Math.imul(pt,Lt)|0,Te=Te+Math.imul(pt,jt)|0,Te=Te+Math.imul(vt,Lt)|0,Ke=Ke+Math.imul(vt,jt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Te=Te+Math.imul(Rt,Jt)|0,Te=Te+Math.imul(gt,Gt)|0,Ke=Ke+Math.imul(gt,Jt)|0,Qe=Qe+Math.imul(wt,Wt)|0,Te=Te+Math.imul(wt,nr)|0,Te=Te+Math.imul(Et,Wt)|0,Ke=Ke+Math.imul(Et,nr)|0,Qe=Qe+Math.imul(dt,Zt)|0,Te=Te+Math.imul(dt,ir)|0,Te=Te+Math.imul(mt,Zt)|0,Ke=Ke+Math.imul(mt,ir)|0,Qe=Qe+Math.imul(ct,tr)|0,Te=Te+Math.imul(ct,cr)|0,Te=Te+Math.imul(ot,tr)|0,Ke=Ke+Math.imul(ot,cr)|0,Qe=Qe+Math.imul(it,sr)|0,Te=Te+Math.imul(it,dr)|0,Te=Te+Math.imul(at,sr)|0,Ke=Ke+Math.imul(at,dr)|0;var wn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(wn>>>26)|0,wn&=67108863,Qe=Math.imul(Tt,qt),Te=Math.imul(Tt,er),Te=Te+Math.imul(Dt,qt)|0,Ke=Math.imul(Dt,er),Qe=Qe+Math.imul(St,Lt)|0,Te=Te+Math.imul(St,jt)|0,Te=Te+Math.imul(_t,Lt)|0,Ke=Ke+Math.imul(_t,jt)|0,Qe=Qe+Math.imul(pt,Gt)|0,Te=Te+Math.imul(pt,Jt)|0,Te=Te+Math.imul(vt,Gt)|0,Ke=Ke+Math.imul(vt,Jt)|0,Qe=Qe+Math.imul(Rt,Wt)|0,Te=Te+Math.imul(Rt,nr)|0,Te=Te+Math.imul(gt,Wt)|0,Ke=Ke+Math.imul(gt,nr)|0,Qe=Qe+Math.imul(wt,Zt)|0,Te=Te+Math.imul(wt,ir)|0,Te=Te+Math.imul(Et,Zt)|0,Ke=Ke+Math.imul(Et,ir)|0,Qe=Qe+Math.imul(dt,tr)|0,Te=Te+Math.imul(dt,cr)|0,Te=Te+Math.imul(mt,tr)|0,Ke=Ke+Math.imul(mt,cr)|0,Qe=Qe+Math.imul(ct,sr)|0,Te=Te+Math.imul(ct,dr)|0,Te=Te+Math.imul(ot,sr)|0,Ke=Ke+Math.imul(ot,dr)|0,Qe=Qe+Math.imul(it,lr)|0,Te=Te+Math.imul(it,hr)|0,Te=Te+Math.imul(at,lr)|0,Ke=Ke+Math.imul(at,hr)|0;var Bn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,Qe=Math.imul(Bt,qt),Te=Math.imul(Bt,er),Te=Te+Math.imul(It,qt)|0,Ke=Math.imul(It,er),Qe=Qe+Math.imul(Tt,Lt)|0,Te=Te+Math.imul(Tt,jt)|0,Te=Te+Math.imul(Dt,Lt)|0,Ke=Ke+Math.imul(Dt,jt)|0,Qe=Qe+Math.imul(St,Gt)|0,Te=Te+Math.imul(St,Jt)|0,Te=Te+Math.imul(_t,Gt)|0,Ke=Ke+Math.imul(_t,Jt)|0,Qe=Qe+Math.imul(pt,Wt)|0,Te=Te+Math.imul(pt,nr)|0,Te=Te+Math.imul(vt,Wt)|0,Ke=Ke+Math.imul(vt,nr)|0,Qe=Qe+Math.imul(Rt,Zt)|0,Te=Te+Math.imul(Rt,ir)|0,Te=Te+Math.imul(gt,Zt)|0,Ke=Ke+Math.imul(gt,ir)|0,Qe=Qe+Math.imul(wt,tr)|0,Te=Te+Math.imul(wt,cr)|0,Te=Te+Math.imul(Et,tr)|0,Ke=Ke+Math.imul(Et,cr)|0,Qe=Qe+Math.imul(dt,sr)|0,Te=Te+Math.imul(dt,dr)|0,Te=Te+Math.imul(mt,sr)|0,Ke=Ke+Math.imul(mt,dr)|0,Qe=Qe+Math.imul(ct,lr)|0,Te=Te+Math.imul(ct,hr)|0,Te=Te+Math.imul(ot,lr)|0,Ke=Ke+Math.imul(ot,hr)|0,Qe=Qe+Math.imul(it,ur)|0,Te=Te+Math.imul(it,pr)|0,Te=Te+Math.imul(at,ur)|0,Ke=Ke+Math.imul(at,pr)|0;var On=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(On>>>26)|0,On&=67108863,Qe=Math.imul(Pt,qt),Te=Math.imul(Pt,er),Te=Te+Math.imul(Vt,qt)|0,Ke=Math.imul(Vt,er),Qe=Qe+Math.imul(Bt,Lt)|0,Te=Te+Math.imul(Bt,jt)|0,Te=Te+Math.imul(It,Lt)|0,Ke=Ke+Math.imul(It,jt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Te=Te+Math.imul(Tt,Jt)|0,Te=Te+Math.imul(Dt,Gt)|0,Ke=Ke+Math.imul(Dt,Jt)|0,Qe=Qe+Math.imul(St,Wt)|0,Te=Te+Math.imul(St,nr)|0,Te=Te+Math.imul(_t,Wt)|0,Ke=Ke+Math.imul(_t,nr)|0,Qe=Qe+Math.imul(pt,Zt)|0,Te=Te+Math.imul(pt,ir)|0,Te=Te+Math.imul(vt,Zt)|0,Ke=Ke+Math.imul(vt,ir)|0,Qe=Qe+Math.imul(Rt,tr)|0,Te=Te+Math.imul(Rt,cr)|0,Te=Te+Math.imul(gt,tr)|0,Ke=Ke+Math.imul(gt,cr)|0,Qe=Qe+Math.imul(wt,sr)|0,Te=Te+Math.imul(wt,dr)|0,Te=Te+Math.imul(Et,sr)|0,Ke=Ke+Math.imul(Et,dr)|0,Qe=Qe+Math.imul(dt,lr)|0,Te=Te+Math.imul(dt,hr)|0,Te=Te+Math.imul(mt,lr)|0,Ke=Ke+Math.imul(mt,hr)|0,Qe=Qe+Math.imul(ct,ur)|0,Te=Te+Math.imul(ct,pr)|0,Te=Te+Math.imul(ot,ur)|0,Ke=Ke+Math.imul(ot,pr)|0,Qe=Qe+Math.imul(it,Yt)|0,Te=Te+Math.imul(it,or)|0,Te=Te+Math.imul(at,Yt)|0,Ke=Ke+Math.imul(at,or)|0;var In=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(In>>>26)|0,In&=67108863,Qe=Math.imul(Pt,Lt),Te=Math.imul(Pt,jt),Te=Te+Math.imul(Vt,Lt)|0,Ke=Math.imul(Vt,jt),Qe=Qe+Math.imul(Bt,Gt)|0,Te=Te+Math.imul(Bt,Jt)|0,Te=Te+Math.imul(It,Gt)|0,Ke=Ke+Math.imul(It,Jt)|0,Qe=Qe+Math.imul(Tt,Wt)|0,Te=Te+Math.imul(Tt,nr)|0,Te=Te+Math.imul(Dt,Wt)|0,Ke=Ke+Math.imul(Dt,nr)|0,Qe=Qe+Math.imul(St,Zt)|0,Te=Te+Math.imul(St,ir)|0,Te=Te+Math.imul(_t,Zt)|0,Ke=Ke+Math.imul(_t,ir)|0,Qe=Qe+Math.imul(pt,tr)|0,Te=Te+Math.imul(pt,cr)|0,Te=Te+Math.imul(vt,tr)|0,Ke=Ke+Math.imul(vt,cr)|0,Qe=Qe+Math.imul(Rt,sr)|0,Te=Te+Math.imul(Rt,dr)|0,Te=Te+Math.imul(gt,sr)|0,Ke=Ke+Math.imul(gt,dr)|0,Qe=Qe+Math.imul(wt,lr)|0,Te=Te+Math.imul(wt,hr)|0,Te=Te+Math.imul(Et,lr)|0,Ke=Ke+Math.imul(Et,hr)|0,Qe=Qe+Math.imul(dt,ur)|0,Te=Te+Math.imul(dt,pr)|0,Te=Te+Math.imul(mt,ur)|0,Ke=Ke+Math.imul(mt,pr)|0,Qe=Qe+Math.imul(ct,Yt)|0,Te=Te+Math.imul(ct,or)|0,Te=Te+Math.imul(ot,Yt)|0,Ke=Ke+Math.imul(ot,or)|0;var Ln=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,Qe=Math.imul(Pt,Gt),Te=Math.imul(Pt,Jt),Te=Te+Math.imul(Vt,Gt)|0,Ke=Math.imul(Vt,Jt),Qe=Qe+Math.imul(Bt,Wt)|0,Te=Te+Math.imul(Bt,nr)|0,Te=Te+Math.imul(It,Wt)|0,Ke=Ke+Math.imul(It,nr)|0,Qe=Qe+Math.imul(Tt,Zt)|0,Te=Te+Math.imul(Tt,ir)|0,Te=Te+Math.imul(Dt,Zt)|0,Ke=Ke+Math.imul(Dt,ir)|0,Qe=Qe+Math.imul(St,tr)|0,Te=Te+Math.imul(St,cr)|0,Te=Te+Math.imul(_t,tr)|0,Ke=Ke+Math.imul(_t,cr)|0,Qe=Qe+Math.imul(pt,sr)|0,Te=Te+Math.imul(pt,dr)|0,Te=Te+Math.imul(vt,sr)|0,Ke=Ke+Math.imul(vt,dr)|0,Qe=Qe+Math.imul(Rt,lr)|0,Te=Te+Math.imul(Rt,hr)|0,Te=Te+Math.imul(gt,lr)|0,Ke=Ke+Math.imul(gt,hr)|0,Qe=Qe+Math.imul(wt,ur)|0,Te=Te+Math.imul(wt,pr)|0,Te=Te+Math.imul(Et,ur)|0,Ke=Ke+Math.imul(Et,pr)|0,Qe=Qe+Math.imul(dt,Yt)|0,Te=Te+Math.imul(dt,or)|0,Te=Te+Math.imul(mt,Yt)|0,Ke=Ke+Math.imul(mt,or)|0;var Tn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Qe=Math.imul(Pt,Wt),Te=Math.imul(Pt,nr),Te=Te+Math.imul(Vt,Wt)|0,Ke=Math.imul(Vt,nr),Qe=Qe+Math.imul(Bt,Zt)|0,Te=Te+Math.imul(Bt,ir)|0,Te=Te+Math.imul(It,Zt)|0,Ke=Ke+Math.imul(It,ir)|0,Qe=Qe+Math.imul(Tt,tr)|0,Te=Te+Math.imul(Tt,cr)|0,Te=Te+Math.imul(Dt,tr)|0,Ke=Ke+Math.imul(Dt,cr)|0,Qe=Qe+Math.imul(St,sr)|0,Te=Te+Math.imul(St,dr)|0,Te=Te+Math.imul(_t,sr)|0,Ke=Ke+Math.imul(_t,dr)|0,Qe=Qe+Math.imul(pt,lr)|0,Te=Te+Math.imul(pt,hr)|0,Te=Te+Math.imul(vt,lr)|0,Ke=Ke+Math.imul(vt,hr)|0,Qe=Qe+Math.imul(Rt,ur)|0,Te=Te+Math.imul(Rt,pr)|0,Te=Te+Math.imul(gt,ur)|0,Ke=Ke+Math.imul(gt,pr)|0,Qe=Qe+Math.imul(wt,Yt)|0,Te=Te+Math.imul(wt,or)|0,Te=Te+Math.imul(Et,Yt)|0,Ke=Ke+Math.imul(Et,or)|0;var Rn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Qe=Math.imul(Pt,Zt),Te=Math.imul(Pt,ir),Te=Te+Math.imul(Vt,Zt)|0,Ke=Math.imul(Vt,ir),Qe=Qe+Math.imul(Bt,tr)|0,Te=Te+Math.imul(Bt,cr)|0,Te=Te+Math.imul(It,tr)|0,Ke=Ke+Math.imul(It,cr)|0,Qe=Qe+Math.imul(Tt,sr)|0,Te=Te+Math.imul(Tt,dr)|0,Te=Te+Math.imul(Dt,sr)|0,Ke=Ke+Math.imul(Dt,dr)|0,Qe=Qe+Math.imul(St,lr)|0,Te=Te+Math.imul(St,hr)|0,Te=Te+Math.imul(_t,lr)|0,Ke=Ke+Math.imul(_t,hr)|0,Qe=Qe+Math.imul(pt,ur)|0,Te=Te+Math.imul(pt,pr)|0,Te=Te+Math.imul(vt,ur)|0,Ke=Ke+Math.imul(vt,pr)|0,Qe=Qe+Math.imul(Rt,Yt)|0,Te=Te+Math.imul(Rt,or)|0,Te=Te+Math.imul(gt,Yt)|0,Ke=Ke+Math.imul(gt,or)|0;var $n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+($n>>>26)|0,$n&=67108863,Qe=Math.imul(Pt,tr),Te=Math.imul(Pt,cr),Te=Te+Math.imul(Vt,tr)|0,Ke=Math.imul(Vt,cr),Qe=Qe+Math.imul(Bt,sr)|0,Te=Te+Math.imul(Bt,dr)|0,Te=Te+Math.imul(It,sr)|0,Ke=Ke+Math.imul(It,dr)|0,Qe=Qe+Math.imul(Tt,lr)|0,Te=Te+Math.imul(Tt,hr)|0,Te=Te+Math.imul(Dt,lr)|0,Ke=Ke+Math.imul(Dt,hr)|0,Qe=Qe+Math.imul(St,ur)|0,Te=Te+Math.imul(St,pr)|0,Te=Te+Math.imul(_t,ur)|0,Ke=Ke+Math.imul(_t,pr)|0,Qe=Qe+Math.imul(pt,Yt)|0,Te=Te+Math.imul(pt,or)|0,Te=Te+Math.imul(vt,Yt)|0,Ke=Ke+Math.imul(vt,or)|0;var Cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Qe=Math.imul(Pt,sr),Te=Math.imul(Pt,dr),Te=Te+Math.imul(Vt,sr)|0,Ke=Math.imul(Vt,dr),Qe=Qe+Math.imul(Bt,lr)|0,Te=Te+Math.imul(Bt,hr)|0,Te=Te+Math.imul(It,lr)|0,Ke=Ke+Math.imul(It,hr)|0,Qe=Qe+Math.imul(Tt,ur)|0,Te=Te+Math.imul(Tt,pr)|0,Te=Te+Math.imul(Dt,ur)|0,Ke=Ke+Math.imul(Dt,pr)|0,Qe=Qe+Math.imul(St,Yt)|0,Te=Te+Math.imul(St,or)|0,Te=Te+Math.imul(_t,Yt)|0,Ke=Ke+Math.imul(_t,or)|0;var Sn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Qe=Math.imul(Pt,lr),Te=Math.imul(Pt,hr),Te=Te+Math.imul(Vt,lr)|0,Ke=Math.imul(Vt,hr),Qe=Qe+Math.imul(Bt,ur)|0,Te=Te+Math.imul(Bt,pr)|0,Te=Te+Math.imul(It,ur)|0,Ke=Ke+Math.imul(It,pr)|0,Qe=Qe+Math.imul(Tt,Yt)|0,Te=Te+Math.imul(Tt,or)|0,Te=Te+Math.imul(Dt,Yt)|0,Ke=Ke+Math.imul(Dt,or)|0;var gn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(gn>>>26)|0,gn&=67108863,Qe=Math.imul(Pt,ur),Te=Math.imul(Pt,pr),Te=Te+Math.imul(Vt,ur)|0,Ke=Math.imul(Vt,pr),Qe=Qe+Math.imul(Bt,Yt)|0,Te=Te+Math.imul(Bt,or)|0,Te=Te+Math.imul(It,Yt)|0,Ke=Ke+Math.imul(It,or)|0;var Mn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Qe=Math.imul(Pt,Yt),Te=Math.imul(Pt,or),Te=Te+Math.imul(Vt,Yt)|0,Ke=Math.imul(Vt,or);var yn=(Ye+Qe|0)+((Te&8191)<<13)|0;return Ye=(Ke+(Te>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ge[0]=Fr,Ge[1]=kr,Ge[2]=Kr,Ge[3]=cn,Ge[4]=An,Ge[5]=_n,Ge[6]=wn,Ge[7]=Bn,Ge[8]=On,Ge[9]=In,Ge[10]=Ln,Ge[11]=Tn,Ge[12]=Rn,Ge[13]=$n,Ge[14]=Cn,Ge[15]=Sn,Ge[16]=gn,Ge[17]=Mn,Ge[18]=yn,Ye!==0&&(Ge[19]=Ye,Be.length++),Be};Math.imul||(Ie=$e);function Fe(qe,Se,Re){Re.negative=Se.negative^qe.negative,Re.length=qe.length+Se.length;for(var Be=0,Ne=0,Ue=0;Ue<Re.length-1;Ue++){var Ge=Ne;Ne=0;for(var Ye=Be&67108863,Qe=Math.min(Ue,Se.length-1),Te=Math.max(0,Ue-qe.length+1);Te<=Qe;Te++){var Ke=Ue-Te,rt=qe.words[Ke]|0,it=Se.words[Te]|0,at=rt*it,lt=at&67108863;Ge=Ge+(at/67108864|0)|0,lt=lt+Ye|0,Ye=lt&67108863,Ge=Ge+(lt>>>26)|0,Ne+=Ge>>>26,Ge&=67108863}Re.words[Ue]=Ye,Be=Ge,Ge=Ne}return Be!==0?Re.words[Ue]=Be:Re.length--,Re.strip()}function ke(qe,Se,Re){var Be=new je;return Be.mulp(qe,Se,Re)}ue.prototype.mulTo=function(Se,Re){var Be,Ne=this.length+Se.length;return this.length===10&&Se.length===10?Be=Ie(this,Se,Re):Ne<63?Be=$e(this,Se,Re):Ne<1024?Be=Fe(this,Se,Re):Be=ke(this,Se,Re),Be};function je(qe,Se){this.x=qe,this.y=Se}je.prototype.makeRBT=function(Se){for(var Re=new Array(Se),Be=ue.prototype._countBits(Se)-1,Ne=0;Ne<Se;Ne++)Re[Ne]=this.revBin(Ne,Be,Se);return Re},je.prototype.revBin=function(Se,Re,Be){if(Se===0||Se===Be-1)return Se;for(var Ne=0,Ue=0;Ue<Re;Ue++)Ne|=(Se&1)<<Re-Ue-1,Se>>=1;return Ne},je.prototype.permute=function(Se,Re,Be,Ne,Ue,Ge){for(var Ye=0;Ye<Ge;Ye++)Ne[Ye]=Re[Se[Ye]],Ue[Ye]=Be[Se[Ye]]},je.prototype.transform=function(Se,Re,Be,Ne,Ue,Ge){this.permute(Ge,Se,Re,Be,Ne,Ue);for(var Ye=1;Ye<Ue;Ye<<=1)for(var Qe=Ye<<1,Te=Math.cos(2*Math.PI/Qe),Ke=Math.sin(2*Math.PI/Qe),rt=0;rt<Ue;rt+=Qe)for(var it=Te,at=Ke,lt=0;lt<Ye;lt++){var ct=Be[rt+lt],ot=Ne[rt+lt],ft=Be[rt+lt+Ye],dt=Ne[rt+lt+Ye],mt=it*ft-at*dt;dt=it*dt+at*ft,ft=mt,Be[rt+lt]=ct+ft,Ne[rt+lt]=ot+dt,Be[rt+lt+Ye]=ct-ft,Ne[rt+lt+Ye]=ot-dt,lt!==Qe&&(mt=Te*it-Ke*at,at=Te*at+Ke*it,it=mt)}},je.prototype.guessLen13b=function(Se,Re){var Be=Math.max(Re,Se)|1,Ne=Be&1,Ue=0;for(Be=Be/2|0;Be;Be=Be>>>1)Ue++;return 1<<Ue+1+Ne},je.prototype.conjugate=function(Se,Re,Be){if(!(Be<=1))for(var Ne=0;Ne<Be/2;Ne++){var Ue=Se[Ne];Se[Ne]=Se[Be-Ne-1],Se[Be-Ne-1]=Ue,Ue=Re[Ne],Re[Ne]=-Re[Be-Ne-1],Re[Be-Ne-1]=-Ue}},je.prototype.normalize13b=function(Se,Re){for(var Be=0,Ne=0;Ne<Re/2;Ne++){var Ue=Math.round(Se[2*Ne+1]/Re)*8192+Math.round(Se[2*Ne]/Re)+Be;Se[Ne]=Ue&67108863,Ue<67108864?Be=0:Be=Ue/67108864|0}return Se},je.prototype.convert13b=function(Se,Re,Be,Ne){for(var Ue=0,Ge=0;Ge<Re;Ge++)Ue=Ue+(Se[Ge]|0),Be[2*Ge]=Ue&8191,Ue=Ue>>>13,Be[2*Ge+1]=Ue&8191,Ue=Ue>>>13;for(Ge=2*Re;Ge<Ne;++Ge)Be[Ge]=0;oe(Ue===0),oe((Ue&-8192)===0)},je.prototype.stub=function(Se){for(var Re=new Array(Se),Be=0;Be<Se;Be++)Re[Be]=0;return Re},je.prototype.mulp=function(Se,Re,Be){var Ne=2*this.guessLen13b(Se.length,Re.length),Ue=this.makeRBT(Ne),Ge=this.stub(Ne),Ye=new Array(Ne),Qe=new Array(Ne),Te=new Array(Ne),Ke=new Array(Ne),rt=new Array(Ne),it=new Array(Ne),at=Be.words;at.length=Ne,this.convert13b(Se.words,Se.length,Ye,Ne),this.convert13b(Re.words,Re.length,Ke,Ne),this.transform(Ye,Ge,Qe,Te,Ne,Ue),this.transform(Ke,Ge,rt,it,Ne,Ue);for(var lt=0;lt<Ne;lt++){var ct=Qe[lt]*rt[lt]-Te[lt]*it[lt];Te[lt]=Qe[lt]*it[lt]+Te[lt]*rt[lt],Qe[lt]=ct}return this.conjugate(Qe,Te,Ne),this.transform(Qe,Te,at,Ge,Ne,Ue),this.conjugate(at,Ge,Ne),this.normalize13b(at,Ne),Be.negative=Se.negative^Re.negative,Be.length=Se.length+Re.length,Be.strip()},ue.prototype.mul=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),this.mulTo(Se,Re)},ue.prototype.mulf=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),ke(this,Se,Re)},ue.prototype.imul=function(Se){return this.clone().mulTo(Se,this)},ue.prototype.imuln=function(Se){oe(typeof Se=="number"),oe(Se<67108864);for(var Re=0,Be=0;Be<this.length;Be++){var Ne=(this.words[Be]|0)*Se,Ue=(Ne&67108863)+(Re&67108863);Re>>=26,Re+=Ne/67108864|0,Re+=Ue>>>26,this.words[Be]=Ue&67108863}return Re!==0&&(this.words[Be]=Re,this.length++),this},ue.prototype.muln=function(Se){return this.clone().imuln(Se)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(Se){var Re=_e(Se);if(Re.length===0)return new ue(1);for(var Be=this,Ne=0;Ne<Re.length&&Re[Ne]===0;Ne++,Be=Be.sqr());if(++Ne<Re.length)for(var Ue=Be.sqr();Ne<Re.length;Ne++,Ue=Ue.sqr())Re[Ne]!==0&&(Be=Be.mul(Ue));return Be},ue.prototype.iushln=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=67108863>>>26-Re<<26-Re,Ue;if(Re!==0){var Ge=0;for(Ue=0;Ue<this.length;Ue++){var Ye=this.words[Ue]&Ne,Qe=(this.words[Ue]|0)-Ye<<Re;this.words[Ue]=Qe|Ge,Ge=Ye>>>26-Re}Ge&&(this.words[Ue]=Ge,this.length++)}if(Be!==0){for(Ue=this.length-1;Ue>=0;Ue--)this.words[Ue+Be]=this.words[Ue];for(Ue=0;Ue<Be;Ue++)this.words[Ue]=0;this.length+=Be}return this.strip()},ue.prototype.ishln=function(Se){return oe(this.negative===0),this.iushln(Se)},ue.prototype.iushrn=function(Se,Re,Be){oe(typeof Se=="number"&&Se>=0);var Ne;Re?Ne=(Re-Re%26)/26:Ne=0;var Ue=Se%26,Ge=Math.min((Se-Ue)/26,this.length),Ye=67108863^67108863>>>Ue<<Ue,Qe=Be;if(Ne-=Ge,Ne=Math.max(0,Ne),Qe){for(var Te=0;Te<Ge;Te++)Qe.words[Te]=this.words[Te];Qe.length=Ge}if(Ge!==0)if(this.length>Ge)for(this.length-=Ge,Te=0;Te<this.length;Te++)this.words[Te]=this.words[Te+Ge];else this.words[0]=0,this.length=1;var Ke=0;for(Te=this.length-1;Te>=0&&(Ke!==0||Te>=Ne);Te--){var rt=this.words[Te]|0;this.words[Te]=Ke<<26-Ue|rt>>>Ue,Ke=rt&Ye}return Qe&&Ke!==0&&(Qe.words[Qe.length++]=Ke),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(Se,Re,Be){return oe(this.negative===0),this.iushrn(Se,Re,Be)},ue.prototype.shln=function(Se){return this.clone().ishln(Se)},ue.prototype.ushln=function(Se){return this.clone().iushln(Se)},ue.prototype.shrn=function(Se){return this.clone().ishrn(Se)},ue.prototype.ushrn=function(Se){return this.clone().iushrn(Se)},ue.prototype.testn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return!1;var Ue=this.words[Be];return!!(Ue&Ne)},ue.prototype.imaskn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Be)return this;if(Re!==0&&Be++,this.length=Math.min(Be,this.length),Re!==0){var Ne=67108863^67108863>>>Re<<Re;this.words[this.length-1]&=Ne}return this.strip()},ue.prototype.maskn=function(Se){return this.clone().imaskn(Se)},ue.prototype.iaddn=function(Se){return oe(typeof Se=="number"),oe(Se<67108864),Se<0?this.isubn(-Se):this.negative!==0?this.length===1&&(this.words[0]|0)<Se?(this.words[0]=Se-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Se),this.negative=1,this):this._iaddn(Se)},ue.prototype._iaddn=function(Se){this.words[0]+=Se;for(var Re=0;Re<this.length&&this.words[Re]>=67108864;Re++)this.words[Re]-=67108864,Re===this.length-1?this.words[Re+1]=1:this.words[Re+1]++;return this.length=Math.max(this.length,Re+1),this},ue.prototype.isubn=function(Se){if(oe(typeof Se=="number"),oe(Se<67108864),Se<0)return this.iaddn(-Se);if(this.negative!==0)return this.negative=0,this.iaddn(Se),this.negative=1,this;if(this.words[0]-=Se,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Re=0;Re<this.length&&this.words[Re]<0;Re++)this.words[Re]+=67108864,this.words[Re+1]-=1;return this.strip()},ue.prototype.addn=function(Se){return this.clone().iaddn(Se)},ue.prototype.subn=function(Se){return this.clone().isubn(Se)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(Se,Re,Be){var Ne=Se.length+Be,Ue;this._expand(Ne);var Ge,Ye=0;for(Ue=0;Ue<Se.length;Ue++){Ge=(this.words[Ue+Be]|0)+Ye;var Qe=(Se.words[Ue]|0)*Re;Ge-=Qe&67108863,Ye=(Ge>>26)-(Qe/67108864|0),this.words[Ue+Be]=Ge&67108863}for(;Ue<this.length-Be;Ue++)Ge=(this.words[Ue+Be]|0)+Ye,Ye=Ge>>26,this.words[Ue+Be]=Ge&67108863;if(Ye===0)return this.strip();for(oe(Ye===-1),Ye=0,Ue=0;Ue<this.length;Ue++)Ge=-(this.words[Ue]|0)+Ye,Ye=Ge>>26,this.words[Ue]=Ge&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(Se,Re){var Be=this.length-Se.length,Ne=this.clone(),Ue=Se,Ge=Ue.words[Ue.length-1]|0,Ye=this._countBits(Ge);Be=26-Ye,Be!==0&&(Ue=Ue.ushln(Be),Ne.iushln(Be),Ge=Ue.words[Ue.length-1]|0);var Qe=Ne.length-Ue.length,Te;if(Re!=="mod"){Te=new ue(null),Te.length=Qe+1,Te.words=new Array(Te.length);for(var Ke=0;Ke<Te.length;Ke++)Te.words[Ke]=0}var rt=Ne.clone()._ishlnsubmul(Ue,1,Qe);rt.negative===0&&(Ne=rt,Te&&(Te.words[Qe]=1));for(var it=Qe-1;it>=0;it--){var at=(Ne.words[Ue.length+it]|0)*67108864+(Ne.words[Ue.length+it-1]|0);for(at=Math.min(at/Ge|0,67108863),Ne._ishlnsubmul(Ue,at,it);Ne.negative!==0;)at--,Ne.negative=0,Ne._ishlnsubmul(Ue,1,it),Ne.isZero()||(Ne.negative^=1);Te&&(Te.words[it]=at)}return Te&&Te.strip(),Ne.strip(),Re!=="div"&&Be!==0&&Ne.iushrn(Be),{div:Te||null,mod:Ne}},ue.prototype.divmod=function(Se,Re,Be){if(oe(!Se.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ne,Ue,Ge;return this.negative!==0&&Se.negative===0?(Ge=this.neg().divmod(Se,Re),Re!=="mod"&&(Ne=Ge.div.neg()),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.iadd(Se)),{div:Ne,mod:Ue}):this.negative===0&&Se.negative!==0?(Ge=this.divmod(Se.neg(),Re),Re!=="mod"&&(Ne=Ge.div.neg()),{div:Ne,mod:Ge.mod}):this.negative&Se.negative?(Ge=this.neg().divmod(Se.neg(),Re),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.isub(Se)),{div:Ge.div,mod:Ue}):Se.length>this.length||this.cmp(Se)<0?{div:new ue(0),mod:this}:Se.length===1?Re==="div"?{div:this.divn(Se.words[0]),mod:null}:Re==="mod"?{div:null,mod:new ue(this.modn(Se.words[0]))}:{div:this.divn(Se.words[0]),mod:new ue(this.modn(Se.words[0]))}:this._wordDiv(Se,Re)},ue.prototype.div=function(Se){return this.divmod(Se,"div",!1).div},ue.prototype.mod=function(Se){return this.divmod(Se,"mod",!1).mod},ue.prototype.umod=function(Se){return this.divmod(Se,"mod",!0).mod},ue.prototype.divRound=function(Se){var Re=this.divmod(Se);if(Re.mod.isZero())return Re.div;var Be=Re.div.negative!==0?Re.mod.isub(Se):Re.mod,Ne=Se.ushrn(1),Ue=Se.andln(1),Ge=Be.cmp(Ne);return Ge<0||Ue===1&&Ge===0?Re.div:Re.div.negative!==0?Re.div.isubn(1):Re.div.iaddn(1)},ue.prototype.modn=function(Se){oe(Se<=67108863);for(var Re=(1<<26)%Se,Be=0,Ne=this.length-1;Ne>=0;Ne--)Be=(Re*Be+(this.words[Ne]|0))%Se;return Be},ue.prototype.idivn=function(Se){oe(Se<=67108863);for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=(this.words[Be]|0)+Re*67108864;this.words[Be]=Ne/Se|0,Re=Ne%Se}return this.strip()},ue.prototype.divn=function(Se){return this.clone().idivn(Se)},ue.prototype.egcd=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=new ue(0),Ye=new ue(1),Qe=0;Re.isEven()&&Be.isEven();)Re.iushrn(1),Be.iushrn(1),++Qe;for(var Te=Be.clone(),Ke=Re.clone();!Re.isZero();){for(var rt=0,it=1;!(Re.words[0]&it)&&rt<26;++rt,it<<=1);if(rt>0)for(Re.iushrn(rt);rt-- >0;)(Ne.isOdd()||Ue.isOdd())&&(Ne.iadd(Te),Ue.isub(Ke)),Ne.iushrn(1),Ue.iushrn(1);for(var at=0,lt=1;!(Be.words[0]&lt)&&at<26;++at,lt<<=1);if(at>0)for(Be.iushrn(at);at-- >0;)(Ge.isOdd()||Ye.isOdd())&&(Ge.iadd(Te),Ye.isub(Ke)),Ge.iushrn(1),Ye.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ge),Ue.isub(Ye)):(Be.isub(Re),Ge.isub(Ne),Ye.isub(Ue))}return{a:Ge,b:Ye,gcd:Be.iushln(Qe)}},ue.prototype._invmp=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=Be.clone();Re.cmpn(1)>0&&Be.cmpn(1)>0;){for(var Ye=0,Qe=1;!(Re.words[0]&Qe)&&Ye<26;++Ye,Qe<<=1);if(Ye>0)for(Re.iushrn(Ye);Ye-- >0;)Ne.isOdd()&&Ne.iadd(Ge),Ne.iushrn(1);for(var Te=0,Ke=1;!(Be.words[0]&Ke)&&Te<26;++Te,Ke<<=1);if(Te>0)for(Be.iushrn(Te);Te-- >0;)Ue.isOdd()&&Ue.iadd(Ge),Ue.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ue)):(Be.isub(Re),Ue.isub(Ne))}var rt;return Re.cmpn(1)===0?rt=Ne:rt=Ue,rt.cmpn(0)<0&&rt.iadd(Se),rt},ue.prototype.gcd=function(Se){if(this.isZero())return Se.abs();if(Se.isZero())return this.abs();var Re=this.clone(),Be=Se.clone();Re.negative=0,Be.negative=0;for(var Ne=0;Re.isEven()&&Be.isEven();Ne++)Re.iushrn(1),Be.iushrn(1);do{for(;Re.isEven();)Re.iushrn(1);for(;Be.isEven();)Be.iushrn(1);var Ue=Re.cmp(Be);if(Ue<0){var Ge=Re;Re=Be,Be=Ge}else if(Ue===0||Be.cmpn(1)===0)break;Re.isub(Be)}while(!0);return Be.iushln(Ne)},ue.prototype.invm=function(Se){return this.egcd(Se).a.umod(Se)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(Se){return this.words[0]&Se},ue.prototype.bincn=function(Se){oe(typeof Se=="number");var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return this._expand(Be+1),this.words[Be]|=Ne,this;for(var Ue=Ne,Ge=Be;Ue!==0&&Ge<this.length;Ge++){var Ye=this.words[Ge]|0;Ye+=Ue,Ue=Ye>>>26,Ye&=67108863,this.words[Ge]=Ye}return Ue!==0&&(this.words[Ge]=Ue,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(Se){var Re=Se<0;if(this.negative!==0&&!Re)return-1;if(this.negative===0&&Re)return 1;this.strip();var Be;if(this.length>1)Be=1;else{Re&&(Se=-Se),oe(Se<=67108863,"Number is too big");var Ne=this.words[0]|0;Be=Ne===Se?0:Ne<Se?-1:1}return this.negative!==0?-Be|0:Be},ue.prototype.cmp=function(Se){if(this.negative!==0&&Se.negative===0)return-1;if(this.negative===0&&Se.negative!==0)return 1;var Re=this.ucmp(Se);return this.negative!==0?-Re|0:Re},ue.prototype.ucmp=function(Se){if(this.length>Se.length)return 1;if(this.length<Se.length)return-1;for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=this.words[Be]|0,Ue=Se.words[Be]|0;if(Ne!==Ue){Ne<Ue?Re=-1:Ne>Ue&&(Re=1);break}}return Re},ue.prototype.gtn=function(Se){return this.cmpn(Se)===1},ue.prototype.gt=function(Se){return this.cmp(Se)===1},ue.prototype.gten=function(Se){return this.cmpn(Se)>=0},ue.prototype.gte=function(Se){return this.cmp(Se)>=0},ue.prototype.ltn=function(Se){return this.cmpn(Se)===-1},ue.prototype.lt=function(Se){return this.cmp(Se)===-1},ue.prototype.lten=function(Se){return this.cmpn(Se)<=0},ue.prototype.lte=function(Se){return this.cmp(Se)<=0},ue.prototype.eqn=function(Se){return this.cmpn(Se)===0},ue.prototype.eq=function(Se){return this.cmp(Se)===0},ue.red=function(Se){return new tt(Se)},ue.prototype.toRed=function(Se){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),Se.convertTo(this)._forceRed(Se)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(Se){return this.red=Se,this},ue.prototype.forceRed=function(Se){return oe(!this.red,"Already a number in reduction context"),this._forceRed(Se)},ue.prototype.redAdd=function(Se){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,Se)},ue.prototype.redIAdd=function(Se){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Se)},ue.prototype.redSub=function(Se){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,Se)},ue.prototype.redISub=function(Se){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,Se)},ue.prototype.redShl=function(Se){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,Se)},ue.prototype.redMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.mul(this,Se)},ue.prototype.redIMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.imul(this,Se)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(Se){return oe(this.red&&!Se.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Se)};var We={k256:null,p224:null,p192:null,p25519:null};function ze(qe,Se){this.name=qe,this.p=new ue(Se,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var Se=new ue(null);return Se.words=new Array(Math.ceil(this.n/13)),Se},ze.prototype.ireduce=function(Se){var Re=Se,Be;do this.split(Re,this.tmp),Re=this.imulK(Re),Re=Re.iadd(this.tmp),Be=Re.bitLength();while(Be>this.n);var Ne=Be<this.n?-1:Re.ucmp(this.p);return Ne===0?(Re.words[0]=0,Re.length=1):Ne>0?Re.isub(this.p):Re.strip!==void 0?Re.strip():Re._strip(),Re},ze.prototype.split=function(Se,Re){Se.iushrn(this.n,0,Re)},ze.prototype.imulK=function(Se){return Se.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(Se,Re){for(var Be=4194303,Ne=Math.min(Se.length,9),Ue=0;Ue<Ne;Ue++)Re.words[Ue]=Se.words[Ue];if(Re.length=Ne,Se.length<=9){Se.words[0]=0,Se.length=1;return}var Ge=Se.words[9];for(Re.words[Re.length++]=Ge&Be,Ue=10;Ue<Se.length;Ue++){var Ye=Se.words[Ue]|0;Se.words[Ue-10]=(Ye&Be)<<4|Ge>>>22,Ge=Ye}Ge>>>=22,Se.words[Ue-10]=Ge,Ge===0&&Se.length>10?Se.length-=10:Se.length-=9},Xe.prototype.imulK=function(Se){Se.words[Se.length]=0,Se.words[Se.length+1]=0,Se.length+=2;for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=Se.words[Be]|0;Re+=Ne*977,Se.words[Be]=Re&67108863,Re=Ne*64+(Re/67108864|0)}return Se.words[Se.length-1]===0&&(Se.length--,Se.words[Se.length-1]===0&&Se.length--),Se};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function nt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(nt,ze);function et(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(et,ze),et.prototype.imulK=function(Se){for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=(Se.words[Be]|0)*19+Re,Ue=Ne&67108863;Ne>>>=26,Se.words[Be]=Ue,Re=Ne}return Re!==0&&(Se.words[Se.length++]=Re),Se},ue._prime=function(Se){if(We[Se])return We[Se];var Re;if(Se==="k256")Re=new Xe;else if(Se==="p224")Re=new Je;else if(Se==="p192")Re=new nt;else if(Se==="p25519")Re=new et;else throw new Error("Unknown prime "+Se);return We[Se]=Re,Re};function tt(qe){if(typeof qe=="string"){var Se=ue._prime(qe);this.m=Se.p,this.prime=Se}else oe(qe.gtn(1),"modulus must be greater than 1"),this.m=qe,this.prime=null}tt.prototype._verify1=function(Se){oe(Se.negative===0,"red works only with positives"),oe(Se.red,"red works only with red numbers")},tt.prototype._verify2=function(Se,Re){oe((Se.negative|Re.negative)===0,"red works only with positives"),oe(Se.red&&Se.red===Re.red,"red works only with red numbers")},tt.prototype.imod=function(Se){return this.prime?this.prime.ireduce(Se)._forceRed(this):Se.umod(this.m)._forceRed(this)},tt.prototype.neg=function(Se){return Se.isZero()?Se.clone():this.m.sub(Se)._forceRed(this)},tt.prototype.add=function(Se,Re){this._verify2(Se,Re);var Be=Se.add(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be._forceRed(this)},tt.prototype.iadd=function(Se,Re){this._verify2(Se,Re);var Be=Se.iadd(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be},tt.prototype.sub=function(Se,Re){this._verify2(Se,Re);var Be=Se.sub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be._forceRed(this)},tt.prototype.isub=function(Se,Re){this._verify2(Se,Re);var Be=Se.isub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be},tt.prototype.shl=function(Se,Re){return this._verify1(Se),this.imod(Se.ushln(Re))},tt.prototype.imul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.imul(Re))},tt.prototype.mul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.mul(Re))},tt.prototype.isqr=function(Se){return this.imul(Se,Se.clone())},tt.prototype.sqr=function(Se){return this.mul(Se,Se)},tt.prototype.sqrt=function(Se){if(Se.isZero())return Se.clone();var Re=this.m.andln(3);if(oe(Re%2===1),Re===3){var Be=this.m.add(new ue(1)).iushrn(2);return this.pow(Se,Be)}for(var Ne=this.m.subn(1),Ue=0;!Ne.isZero()&&Ne.andln(1)===0;)Ue++,Ne.iushrn(1);oe(!Ne.isZero());var Ge=new ue(1).toRed(this),Ye=Ge.redNeg(),Qe=this.m.subn(1).iushrn(1),Te=this.m.bitLength();for(Te=new ue(2*Te*Te).toRed(this);this.pow(Te,Qe).cmp(Ye)!==0;)Te.redIAdd(Ye);for(var Ke=this.pow(Te,Ne),rt=this.pow(Se,Ne.addn(1).iushrn(1)),it=this.pow(Se,Ne),at=Ue;it.cmp(Ge)!==0;){for(var lt=it,ct=0;lt.cmp(Ge)!==0;ct++)lt=lt.redSqr();oe(ct<at);var ot=this.pow(Ke,new ue(1).iushln(at-ct-1));rt=rt.redMul(ot),Ke=ot.redSqr(),it=it.redMul(Ke),at=ct}return rt},tt.prototype.invm=function(Se){var Re=Se._invmp(this.m);return Re.negative!==0?(Re.negative=0,this.imod(Re).redNeg()):this.imod(Re)},tt.prototype.pow=function(Se,Re){if(Re.isZero())return new ue(1).toRed(this);if(Re.cmpn(1)===0)return Se.clone();var Be=4,Ne=new Array(1<<Be);Ne[0]=new ue(1).toRed(this),Ne[1]=Se;for(var Ue=2;Ue<Ne.length;Ue++)Ne[Ue]=this.mul(Ne[Ue-1],Se);var Ge=Ne[0],Ye=0,Qe=0,Te=Re.bitLength()%26;for(Te===0&&(Te=26),Ue=Re.length-1;Ue>=0;Ue--){for(var Ke=Re.words[Ue],rt=Te-1;rt>=0;rt--){var it=Ke>>rt&1;if(Ge!==Ne[0]&&(Ge=this.sqr(Ge)),it===0&&Ye===0){Qe=0;continue}Ye<<=1,Ye|=it,Qe++,!(Qe!==Be&&(Ue!==0||rt!==0))&&(Ge=this.mul(Ge,Ne[Ye]),Qe=0,Ye=0)}Te=26}return Ge},tt.prototype.convertTo=function(Se){var Re=Se.umod(this.m);return Re===Se?Re.clone():Re},tt.prototype.convertFrom=function(Se){var Re=Se.clone();return Re.red=null,Re},ue.mont=function(Se){return new st(Se)};function st(qe){tt.call(this,qe),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(st,tt),st.prototype.convertTo=function(Se){return this.imod(Se.ushln(this.shift))},st.prototype.convertFrom=function(Se){var Re=this.imod(Se.mul(this.rinv));return Re.red=null,Re},st.prototype.imul=function(Se,Re){if(Se.isZero()||Re.isZero())return Se.words[0]=0,Se.length=1,Se;var Be=Se.imul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.mul=function(Se,Re){if(Se.isZero()||Re.isZero())return new ue(0)._forceRed(this);var Be=Se.mul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.invm=function(Se){var Re=this.imod(Se._invmp(this.m).mul(this.r2));return Re._forceRed(this)}})(K,commonjsGlobal)}(bn$3)),bn$3.exports}var utils$1={},hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(K){var J=K;function ne(ue,Ae){if(Array.isArray(ue))return ue.slice();if(!ue)return[];var pe=[];if(typeof ue!="string"){for(var ve=0;ve<ue.length;ve++)pe[ve]=ue[ve]|0;return pe}if(Ae==="hex"){ue=ue.replace(/[^a-z0-9]+/ig,""),ue.length%2!==0&&(ue="0"+ue);for(var ve=0;ve<ue.length;ve+=2)pe.push(parseInt(ue[ve]+ue[ve+1],16))}else for(var ve=0;ve<ue.length;ve++){var me=ue.charCodeAt(ve),ge=me>>8,ye=me&255;ge?pe.push(ge,ye):pe.push(ye)}return pe}J.toArray=ne;function oe(ue){return ue.length===1?"0"+ue:ue}J.zero2=oe;function ce(ue){for(var Ae="",pe=0;pe<ue.length;pe++)Ae+=oe(ue[pe].toString(16));return Ae}J.toHex=ce,J.encode=function(Ae,pe){return pe==="hex"?ce(Ae):Ae}}(utils$1)),utils$1}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(K){var J=K,ne=requireBn$3(),oe=requireMinimalisticAssert(),ce=requireUtils$2();J.assert=oe,J.toArray=ce.toArray,J.zero2=ce.zero2,J.toHex=ce.toHex,J.encode=ce.encode;function ue(ge,ye,xe){var _e=new Array(Math.max(ge.bitLength(),xe)+1),$e;for($e=0;$e<_e.length;$e+=1)_e[$e]=0;var Ie=1<<ye+1,Fe=ge.clone();for($e=0;$e<_e.length;$e++){var ke,je=Fe.andln(Ie-1);Fe.isOdd()?(je>(Ie>>1)-1?ke=(Ie>>1)-je:ke=je,Fe.isubn(ke)):ke=0,_e[$e]=ke,Fe.iushrn(1)}return _e}J.getNAF=ue;function Ae(ge,ye){var xe=[[],[]];ge=ge.clone(),ye=ye.clone();for(var _e=0,$e=0,Ie;ge.cmpn(-_e)>0||ye.cmpn(-$e)>0;){var Fe=ge.andln(3)+_e&3,ke=ye.andln(3)+$e&3;Fe===3&&(Fe=-1),ke===3&&(ke=-1);var je;Fe&1?(Ie=ge.andln(7)+_e&7,(Ie===3||Ie===5)&&ke===2?je=-Fe:je=Fe):je=0,xe[0].push(je);var We;ke&1?(Ie=ye.andln(7)+$e&7,(Ie===3||Ie===5)&&Fe===2?We=-ke:We=ke):We=0,xe[1].push(We),2*_e===je+1&&(_e=1-_e),2*$e===We+1&&($e=1-$e),ge.iushrn(1),ye.iushrn(1)}return xe}J.getJSF=Ae;function pe(ge,ye,xe){var _e="_"+ye;ge.prototype[ye]=function(){return this[_e]!==void 0?this[_e]:this[_e]=xe.call(this)}}J.cachedProperty=pe;function ve(ge){return typeof ge=="string"?J.toArray(ge,"hex"):ge}J.parseBytes=ve;function me(ge){return new ne(ge,"hex","le")}J.intFromLE=me}(utils$2)),utils$2}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var K=requireBn$3(),J=requireUtils$1(),ne=J.getNAF,oe=J.getJSF,ce=J.assert;function ue(pe,ve){this.type=pe,this.p=new K(ve.p,16),this.red=ve.prime?K.red(ve.prime):K.mont(this.p),this.zero=new K(0).toRed(this.red),this.one=new K(1).toRed(this.red),this.two=new K(2).toRed(this.red),this.n=ve.n&&new K(ve.n,16),this.g=ve.g&&this.pointFromJSON(ve.g,ve.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var me=this.n&&this.p.div(this.n);!me||me.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=ue,ue.prototype.point=function(){throw new Error("Not implemented")},ue.prototype.validate=function(){throw new Error("Not implemented")},ue.prototype._fixedNafMul=function(ve,me){ce(ve.precomputed);var ge=ve._getDoubles(),ye=ne(me,1,this._bitLength),xe=(1<<ge.step+1)-(ge.step%2===0?2:1);xe/=3;var _e=[],$e,Ie;for($e=0;$e<ye.length;$e+=ge.step){Ie=0;for(var Fe=$e+ge.step-1;Fe>=$e;Fe--)Ie=(Ie<<1)+ye[Fe];_e.push(Ie)}for(var ke=this.jpoint(null,null,null),je=this.jpoint(null,null,null),We=xe;We>0;We--){for($e=0;$e<_e.length;$e++)Ie=_e[$e],Ie===We?je=je.mixedAdd(ge.points[$e]):Ie===-We&&(je=je.mixedAdd(ge.points[$e].neg()));ke=ke.add(je)}return ke.toP()},ue.prototype._wnafMul=function(ve,me){var ge=4,ye=ve._getNAFPoints(ge);ge=ye.wnd;for(var xe=ye.points,_e=ne(me,ge,this._bitLength),$e=this.jpoint(null,null,null),Ie=_e.length-1;Ie>=0;Ie--){for(var Fe=0;Ie>=0&&_e[Ie]===0;Ie--)Fe++;if(Ie>=0&&Fe++,$e=$e.dblp(Fe),Ie<0)break;var ke=_e[Ie];ce(ke!==0),ve.type==="affine"?ke>0?$e=$e.mixedAdd(xe[ke-1>>1]):$e=$e.mixedAdd(xe[-ke-1>>1].neg()):ke>0?$e=$e.add(xe[ke-1>>1]):$e=$e.add(xe[-ke-1>>1].neg())}return ve.type==="affine"?$e.toP():$e},ue.prototype._wnafMulAdd=function(ve,me,ge,ye,xe){var _e=this._wnafT1,$e=this._wnafT2,Ie=this._wnafT3,Fe=0,ke,je,We;for(ke=0;ke<ye;ke++){We=me[ke];var ze=We._getNAFPoints(ve);_e[ke]=ze.wnd,$e[ke]=ze.points}for(ke=ye-1;ke>=1;ke-=2){var Xe=ke-1,Je=ke;if(_e[Xe]!==1||_e[Je]!==1){Ie[Xe]=ne(ge[Xe],_e[Xe],this._bitLength),Ie[Je]=ne(ge[Je],_e[Je],this._bitLength),Fe=Math.max(Ie[Xe].length,Fe),Fe=Math.max(Ie[Je].length,Fe);continue}var nt=[me[Xe],null,null,me[Je]];me[Xe].y.cmp(me[Je].y)===0?(nt[1]=me[Xe].add(me[Je]),nt[2]=me[Xe].toJ().mixedAdd(me[Je].neg())):me[Xe].y.cmp(me[Je].y.redNeg())===0?(nt[1]=me[Xe].toJ().mixedAdd(me[Je]),nt[2]=me[Xe].add(me[Je].neg())):(nt[1]=me[Xe].toJ().mixedAdd(me[Je]),nt[2]=me[Xe].toJ().mixedAdd(me[Je].neg()));var et=[-3,-1,-5,-7,0,7,5,1,3],tt=oe(ge[Xe],ge[Je]);for(Fe=Math.max(tt[0].length,Fe),Ie[Xe]=new Array(Fe),Ie[Je]=new Array(Fe),je=0;je<Fe;je++){var st=tt[0][je]|0,qe=tt[1][je]|0;Ie[Xe][je]=et[(st+1)*3+(qe+1)],Ie[Je][je]=0,$e[Xe]=nt}}var Se=this.jpoint(null,null,null),Re=this._wnafT4;for(ke=Fe;ke>=0;ke--){for(var Be=0;ke>=0;){var Ne=!0;for(je=0;je<ye;je++)Re[je]=Ie[je][ke]|0,Re[je]!==0&&(Ne=!1);if(!Ne)break;Be++,ke--}if(ke>=0&&Be++,Se=Se.dblp(Be),ke<0)break;for(je=0;je<ye;je++){var Ue=Re[je];Ue!==0&&(Ue>0?We=$e[je][Ue-1>>1]:Ue<0&&(We=$e[je][-Ue-1>>1].neg()),We.type==="affine"?Se=Se.mixedAdd(We):Se=Se.add(We))}}for(ke=0;ke<ye;ke++)$e[ke]=null;return xe?Se:Se.toP()};function Ae(pe,ve){this.curve=pe,this.type=ve,this.precomputed=null}return ue.BasePoint=Ae,Ae.prototype.eq=function(){throw new Error("Not implemented")},Ae.prototype.validate=function(){return this.curve.validate(this)},ue.prototype.decodePoint=function(ve,me){ve=J.toArray(ve,me);var ge=this.p.byteLength();if((ve[0]===4||ve[0]===6||ve[0]===7)&&ve.length-1===2*ge){ve[0]===6?ce(ve[ve.length-1]%2===0):ve[0]===7&&ce(ve[ve.length-1]%2===1);var ye=this.point(ve.slice(1,1+ge),ve.slice(1+ge,1+2*ge));return ye}else if((ve[0]===2||ve[0]===3)&&ve.length-1===ge)return this.pointFromX(ve.slice(1,1+ge),ve[0]===3);throw new Error("Unknown point format")},Ae.prototype.encodeCompressed=function(ve){return this.encode(ve,!0)},Ae.prototype._encode=function(ve){var me=this.curve.p.byteLength(),ge=this.getX().toArray("be",me);return ve?[this.getY().isEven()?2:3].concat(ge):[4].concat(ge,this.getY().toArray("be",me))},Ae.prototype.encode=function(ve,me){return J.encode(this._encode(me),ve)},Ae.prototype.precompute=function(ve){if(this.precomputed)return this;var me={doubles:null,naf:null,beta:null};return me.naf=this._getNAFPoints(8),me.doubles=this._getDoubles(4,ve),me.beta=this._getBeta(),this.precomputed=me,this},Ae.prototype._hasDoubles=function(ve){if(!this.precomputed)return!1;var me=this.precomputed.doubles;return me?me.points.length>=Math.ceil((ve.bitLength()+1)/me.step):!1},Ae.prototype._getDoubles=function(ve,me){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var ge=[this],ye=this,xe=0;xe<me;xe+=ve){for(var _e=0;_e<ve;_e++)ye=ye.dbl();ge.push(ye)}return{step:ve,points:ge}},Ae.prototype._getNAFPoints=function(ve){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var me=[this],ge=(1<<ve)-1,ye=ge===1?null:this.dbl(),xe=1;xe<ge;xe++)me[xe]=me[xe-1].add(ye);return{wnd:ve,points:me}},Ae.prototype._getBeta=function(){return null},Ae.prototype.dblp=function(ve){for(var me=this,ge=0;ge<ve;ge++)me=me.dbl();return me},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var K=requireUtils$1(),J=requireBn$3(),ne=requireInherits_browser(),oe=requireBase$1(),ce=K.assert;function ue(ve){oe.call(this,"short",ve),this.a=new J(ve.a,16).toRed(this.red),this.b=new J(ve.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(ve),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ne(ue,oe),short=ue,ue.prototype._getEndomorphism=function(me){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var ge,ye;if(me.beta)ge=new J(me.beta,16).toRed(this.red);else{var xe=this._getEndoRoots(this.p);ge=xe[0].cmp(xe[1])<0?xe[0]:xe[1],ge=ge.toRed(this.red)}if(me.lambda)ye=new J(me.lambda,16);else{var _e=this._getEndoRoots(this.n);this.g.mul(_e[0]).x.cmp(this.g.x.redMul(ge))===0?ye=_e[0]:(ye=_e[1],ce(this.g.mul(ye).x.cmp(this.g.x.redMul(ge))===0))}var $e;return me.basis?$e=me.basis.map(function(Ie){return{a:new J(Ie.a,16),b:new J(Ie.b,16)}}):$e=this._getEndoBasis(ye),{beta:ge,lambda:ye,basis:$e}}},ue.prototype._getEndoRoots=function(me){var ge=me===this.p?this.red:J.mont(me),ye=new J(2).toRed(ge).redInvm(),xe=ye.redNeg(),_e=new J(3).toRed(ge).redNeg().redSqrt().redMul(ye),$e=xe.redAdd(_e).fromRed(),Ie=xe.redSub(_e).fromRed();return[$e,Ie]},ue.prototype._getEndoBasis=function(me){for(var ge=this.n.ushrn(Math.floor(this.n.bitLength()/2)),ye=me,xe=this.n.clone(),_e=new J(1),$e=new J(0),Ie=new J(0),Fe=new J(1),ke,je,We,ze,Xe,Je,nt,et=0,tt,st;ye.cmpn(0)!==0;){var qe=xe.div(ye);tt=xe.sub(qe.mul(ye)),st=Ie.sub(qe.mul(_e));var Se=Fe.sub(qe.mul($e));if(!We&&tt.cmp(ge)<0)ke=nt.neg(),je=_e,We=tt.neg(),ze=st;else if(We&&++et===2)break;nt=tt,xe=ye,ye=tt,Ie=_e,_e=st,Fe=$e,$e=Se}Xe=tt.neg(),Je=st;var Re=We.sqr().add(ze.sqr()),Be=Xe.sqr().add(Je.sqr());return Be.cmp(Re)>=0&&(Xe=ke,Je=je),We.negative&&(We=We.neg(),ze=ze.neg()),Xe.negative&&(Xe=Xe.neg(),Je=Je.neg()),[{a:We,b:ze},{a:Xe,b:Je}]},ue.prototype._endoSplit=function(me){var ge=this.endo.basis,ye=ge[0],xe=ge[1],_e=xe.b.mul(me).divRound(this.n),$e=ye.b.neg().mul(me).divRound(this.n),Ie=_e.mul(ye.a),Fe=$e.mul(xe.a),ke=_e.mul(ye.b),je=$e.mul(xe.b),We=me.sub(Ie).sub(Fe),ze=ke.add(je).neg();return{k1:We,k2:ze}},ue.prototype.pointFromX=function(me,ge){me=new J(me,16),me.red||(me=me.toRed(this.red));var ye=me.redSqr().redMul(me).redIAdd(me.redMul(this.a)).redIAdd(this.b),xe=ye.redSqrt();if(xe.redSqr().redSub(ye).cmp(this.zero)!==0)throw new Error("invalid point");var _e=xe.fromRed().isOdd();return(ge&&!_e||!ge&&_e)&&(xe=xe.redNeg()),this.point(me,xe)},ue.prototype.validate=function(me){if(me.inf)return!0;var ge=me.x,ye=me.y,xe=this.a.redMul(ge),_e=ge.redSqr().redMul(ge).redIAdd(xe).redIAdd(this.b);return ye.redSqr().redISub(_e).cmpn(0)===0},ue.prototype._endoWnafMulAdd=function(me,ge,ye){for(var xe=this._endoWnafT1,_e=this._endoWnafT2,$e=0;$e<me.length;$e++){var Ie=this._endoSplit(ge[$e]),Fe=me[$e],ke=Fe._getBeta();Ie.k1.negative&&(Ie.k1.ineg(),Fe=Fe.neg(!0)),Ie.k2.negative&&(Ie.k2.ineg(),ke=ke.neg(!0)),xe[$e*2]=Fe,xe[$e*2+1]=ke,_e[$e*2]=Ie.k1,_e[$e*2+1]=Ie.k2}for(var je=this._wnafMulAdd(1,xe,_e,$e*2,ye),We=0;We<$e*2;We++)xe[We]=null,_e[We]=null;return je};function Ae(ve,me,ge,ye){oe.BasePoint.call(this,ve,"affine"),me===null&&ge===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new J(me,16),this.y=new J(ge,16),ye&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}ne(Ae,oe.BasePoint),ue.prototype.point=function(me,ge,ye){return new Ae(this,me,ge,ye)},ue.prototype.pointFromJSON=function(me,ge){return Ae.fromJSON(this,me,ge)},Ae.prototype._getBeta=function(){if(this.curve.endo){var me=this.precomputed;if(me&&me.beta)return me.beta;var ge=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(me){var ye=this.curve,xe=function(_e){return ye.point(_e.x.redMul(ye.endo.beta),_e.y)};me.beta=ge,ge.precomputed={beta:null,naf:me.naf&&{wnd:me.naf.wnd,points:me.naf.points.map(xe)},doubles:me.doubles&&{step:me.doubles.step,points:me.doubles.points.map(xe)}}}return ge}},Ae.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Ae.fromJSON=function(me,ge,ye){typeof ge=="string"&&(ge=JSON.parse(ge));var xe=me.point(ge[0],ge[1],ye);if(!ge[2])return xe;function _e(Ie){return me.point(Ie[0],Ie[1],ye)}var $e=ge[2];return xe.precomputed={beta:null,doubles:$e.doubles&&{step:$e.doubles.step,points:[xe].concat($e.doubles.points.map(_e))},naf:$e.naf&&{wnd:$e.naf.wnd,points:[xe].concat($e.naf.points.map(_e))}},xe},Ae.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Ae.prototype.isInfinity=function(){return this.inf},Ae.prototype.add=function(me){if(this.inf)return me;if(me.inf)return this;if(this.eq(me))return this.dbl();if(this.neg().eq(me))return this.curve.point(null,null);if(this.x.cmp(me.x)===0)return this.curve.point(null,null);var ge=this.y.redSub(me.y);ge.cmpn(0)!==0&&(ge=ge.redMul(this.x.redSub(me.x).redInvm()));var ye=ge.redSqr().redISub(this.x).redISub(me.x),xe=ge.redMul(this.x.redSub(ye)).redISub(this.y);return this.curve.point(ye,xe)},Ae.prototype.dbl=function(){if(this.inf)return this;var me=this.y.redAdd(this.y);if(me.cmpn(0)===0)return this.curve.point(null,null);var ge=this.curve.a,ye=this.x.redSqr(),xe=me.redInvm(),_e=ye.redAdd(ye).redIAdd(ye).redIAdd(ge).redMul(xe),$e=_e.redSqr().redISub(this.x.redAdd(this.x)),Ie=_e.redMul(this.x.redSub($e)).redISub(this.y);return this.curve.point($e,Ie)},Ae.prototype.getX=function(){return this.x.fromRed()},Ae.prototype.getY=function(){return this.y.fromRed()},Ae.prototype.mul=function(me){return me=new J(me,16),this.isInfinity()?this:this._hasDoubles(me)?this.curve._fixedNafMul(this,me):this.curve.endo?this.curve._endoWnafMulAdd([this],[me]):this.curve._wnafMul(this,me)},Ae.prototype.mulAdd=function(me,ge,ye){var xe=[this,ge],_e=[me,ye];return this.curve.endo?this.curve._endoWnafMulAdd(xe,_e):this.curve._wnafMulAdd(1,xe,_e,2)},Ae.prototype.jmulAdd=function(me,ge,ye){var xe=[this,ge],_e=[me,ye];return this.curve.endo?this.curve._endoWnafMulAdd(xe,_e,!0):this.curve._wnafMulAdd(1,xe,_e,2,!0)},Ae.prototype.eq=function(me){return this===me||this.inf===me.inf&&(this.inf||this.x.cmp(me.x)===0&&this.y.cmp(me.y)===0)},Ae.prototype.neg=function(me){if(this.inf)return this;var ge=this.curve.point(this.x,this.y.redNeg());if(me&&this.precomputed){var ye=this.precomputed,xe=function(_e){return _e.neg()};ge.precomputed={naf:ye.naf&&{wnd:ye.naf.wnd,points:ye.naf.points.map(xe)},doubles:ye.doubles&&{step:ye.doubles.step,points:ye.doubles.points.map(xe)}}}return ge},Ae.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var me=this.curve.jpoint(this.x,this.y,this.curve.one);return me};function pe(ve,me,ge,ye){oe.BasePoint.call(this,ve,"jacobian"),me===null&&ge===null&&ye===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new J(0)):(this.x=new J(me,16),this.y=new J(ge,16),this.z=new J(ye,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return ne(pe,oe.BasePoint),ue.prototype.jpoint=function(me,ge,ye){return new pe(this,me,ge,ye)},pe.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var me=this.z.redInvm(),ge=me.redSqr(),ye=this.x.redMul(ge),xe=this.y.redMul(ge).redMul(me);return this.curve.point(ye,xe)},pe.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},pe.prototype.add=function(me){if(this.isInfinity())return me;if(me.isInfinity())return this;var ge=me.z.redSqr(),ye=this.z.redSqr(),xe=this.x.redMul(ge),_e=me.x.redMul(ye),$e=this.y.redMul(ge.redMul(me.z)),Ie=me.y.redMul(ye.redMul(this.z)),Fe=xe.redSub(_e),ke=$e.redSub(Ie);if(Fe.cmpn(0)===0)return ke.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var je=Fe.redSqr(),We=je.redMul(Fe),ze=xe.redMul(je),Xe=ke.redSqr().redIAdd(We).redISub(ze).redISub(ze),Je=ke.redMul(ze.redISub(Xe)).redISub($e.redMul(We)),nt=this.z.redMul(me.z).redMul(Fe);return this.curve.jpoint(Xe,Je,nt)},pe.prototype.mixedAdd=function(me){if(this.isInfinity())return me.toJ();if(me.isInfinity())return this;var ge=this.z.redSqr(),ye=this.x,xe=me.x.redMul(ge),_e=this.y,$e=me.y.redMul(ge).redMul(this.z),Ie=ye.redSub(xe),Fe=_e.redSub($e);if(Ie.cmpn(0)===0)return Fe.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var ke=Ie.redSqr(),je=ke.redMul(Ie),We=ye.redMul(ke),ze=Fe.redSqr().redIAdd(je).redISub(We).redISub(We),Xe=Fe.redMul(We.redISub(ze)).redISub(_e.redMul(je)),Je=this.z.redMul(Ie);return this.curve.jpoint(ze,Xe,Je)},pe.prototype.dblp=function(me){if(me===0)return this;if(this.isInfinity())return this;if(!me)return this.dbl();var ge;if(this.curve.zeroA||this.curve.threeA){var ye=this;for(ge=0;ge<me;ge++)ye=ye.dbl();return ye}var xe=this.curve.a,_e=this.curve.tinv,$e=this.x,Ie=this.y,Fe=this.z,ke=Fe.redSqr().redSqr(),je=Ie.redAdd(Ie);for(ge=0;ge<me;ge++){var We=$e.redSqr(),ze=je.redSqr(),Xe=ze.redSqr(),Je=We.redAdd(We).redIAdd(We).redIAdd(xe.redMul(ke)),nt=$e.redMul(ze),et=Je.redSqr().redISub(nt.redAdd(nt)),tt=nt.redISub(et),st=Je.redMul(tt);st=st.redIAdd(st).redISub(Xe);var qe=je.redMul(Fe);ge+1<me&&(ke=ke.redMul(Xe)),$e=et,Fe=qe,je=st}return this.curve.jpoint($e,je.redMul(_e),Fe)},pe.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},pe.prototype._zeroDbl=function(){var me,ge,ye;if(this.zOne){var xe=this.x.redSqr(),_e=this.y.redSqr(),$e=_e.redSqr(),Ie=this.x.redAdd(_e).redSqr().redISub(xe).redISub($e);Ie=Ie.redIAdd(Ie);var Fe=xe.redAdd(xe).redIAdd(xe),ke=Fe.redSqr().redISub(Ie).redISub(Ie),je=$e.redIAdd($e);je=je.redIAdd(je),je=je.redIAdd(je),me=ke,ge=Fe.redMul(Ie.redISub(ke)).redISub(je),ye=this.y.redAdd(this.y)}else{var We=this.x.redSqr(),ze=this.y.redSqr(),Xe=ze.redSqr(),Je=this.x.redAdd(ze).redSqr().redISub(We).redISub(Xe);Je=Je.redIAdd(Je);var nt=We.redAdd(We).redIAdd(We),et=nt.redSqr(),tt=Xe.redIAdd(Xe);tt=tt.redIAdd(tt),tt=tt.redIAdd(tt),me=et.redISub(Je).redISub(Je),ge=nt.redMul(Je.redISub(me)).redISub(tt),ye=this.y.redMul(this.z),ye=ye.redIAdd(ye)}return this.curve.jpoint(me,ge,ye)},pe.prototype._threeDbl=function(){var me,ge,ye;if(this.zOne){var xe=this.x.redSqr(),_e=this.y.redSqr(),$e=_e.redSqr(),Ie=this.x.redAdd(_e).redSqr().redISub(xe).redISub($e);Ie=Ie.redIAdd(Ie);var Fe=xe.redAdd(xe).redIAdd(xe).redIAdd(this.curve.a),ke=Fe.redSqr().redISub(Ie).redISub(Ie);me=ke;var je=$e.redIAdd($e);je=je.redIAdd(je),je=je.redIAdd(je),ge=Fe.redMul(Ie.redISub(ke)).redISub(je),ye=this.y.redAdd(this.y)}else{var We=this.z.redSqr(),ze=this.y.redSqr(),Xe=this.x.redMul(ze),Je=this.x.redSub(We).redMul(this.x.redAdd(We));Je=Je.redAdd(Je).redIAdd(Je);var nt=Xe.redIAdd(Xe);nt=nt.redIAdd(nt);var et=nt.redAdd(nt);me=Je.redSqr().redISub(et),ye=this.y.redAdd(this.z).redSqr().redISub(ze).redISub(We);var tt=ze.redSqr();tt=tt.redIAdd(tt),tt=tt.redIAdd(tt),tt=tt.redIAdd(tt),ge=Je.redMul(nt.redISub(me)).redISub(tt)}return this.curve.jpoint(me,ge,ye)},pe.prototype._dbl=function(){var me=this.curve.a,ge=this.x,ye=this.y,xe=this.z,_e=xe.redSqr().redSqr(),$e=ge.redSqr(),Ie=ye.redSqr(),Fe=$e.redAdd($e).redIAdd($e).redIAdd(me.redMul(_e)),ke=ge.redAdd(ge);ke=ke.redIAdd(ke);var je=ke.redMul(Ie),We=Fe.redSqr().redISub(je.redAdd(je)),ze=je.redISub(We),Xe=Ie.redSqr();Xe=Xe.redIAdd(Xe),Xe=Xe.redIAdd(Xe),Xe=Xe.redIAdd(Xe);var Je=Fe.redMul(ze).redISub(Xe),nt=ye.redAdd(ye).redMul(xe);return this.curve.jpoint(We,Je,nt)},pe.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var me=this.x.redSqr(),ge=this.y.redSqr(),ye=this.z.redSqr(),xe=ge.redSqr(),_e=me.redAdd(me).redIAdd(me),$e=_e.redSqr(),Ie=this.x.redAdd(ge).redSqr().redISub(me).redISub(xe);Ie=Ie.redIAdd(Ie),Ie=Ie.redAdd(Ie).redIAdd(Ie),Ie=Ie.redISub($e);var Fe=Ie.redSqr(),ke=xe.redIAdd(xe);ke=ke.redIAdd(ke),ke=ke.redIAdd(ke),ke=ke.redIAdd(ke);var je=_e.redIAdd(Ie).redSqr().redISub($e).redISub(Fe).redISub(ke),We=ge.redMul(je);We=We.redIAdd(We),We=We.redIAdd(We);var ze=this.x.redMul(Fe).redISub(We);ze=ze.redIAdd(ze),ze=ze.redIAdd(ze);var Xe=this.y.redMul(je.redMul(ke.redISub(je)).redISub(Ie.redMul(Fe)));Xe=Xe.redIAdd(Xe),Xe=Xe.redIAdd(Xe),Xe=Xe.redIAdd(Xe);var Je=this.z.redAdd(Ie).redSqr().redISub(ye).redISub(Fe);return this.curve.jpoint(ze,Xe,Je)},pe.prototype.mul=function(me,ge){return me=new J(me,ge),this.curve._wnafMul(this,me)},pe.prototype.eq=function(me){if(me.type==="affine")return this.eq(me.toJ());if(this===me)return!0;var ge=this.z.redSqr(),ye=me.z.redSqr();if(this.x.redMul(ye).redISub(me.x.redMul(ge)).cmpn(0)!==0)return!1;var xe=ge.redMul(this.z),_e=ye.redMul(me.z);return this.y.redMul(_e).redISub(me.y.redMul(xe)).cmpn(0)===0},pe.prototype.eqXToP=function(me){var ge=this.z.redSqr(),ye=me.toRed(this.curve.red).redMul(ge);if(this.x.cmp(ye)===0)return!0;for(var xe=me.clone(),_e=this.curve.redN.redMul(ge);;){if(xe.iadd(this.curve.n),xe.cmp(this.curve.p)>=0)return!1;if(ye.redIAdd(_e),this.x.cmp(ye)===0)return!0}},pe.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},pe.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var K=requireBn$3(),J=requireInherits_browser(),ne=requireBase$1(),oe=requireUtils$1();function ce(Ae){ne.call(this,"mont",Ae),this.a=new K(Ae.a,16).toRed(this.red),this.b=new K(Ae.b,16).toRed(this.red),this.i4=new K(4).toRed(this.red).redInvm(),this.two=new K(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}J(ce,ne),mont=ce,ce.prototype.validate=function(pe){var ve=pe.normalize().x,me=ve.redSqr(),ge=me.redMul(ve).redAdd(me.redMul(this.a)).redAdd(ve),ye=ge.redSqrt();return ye.redSqr().cmp(ge)===0};function ue(Ae,pe,ve){ne.BasePoint.call(this,Ae,"projective"),pe===null&&ve===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new K(pe,16),this.z=new K(ve,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return J(ue,ne.BasePoint),ce.prototype.decodePoint=function(pe,ve){return this.point(oe.toArray(pe,ve),1)},ce.prototype.point=function(pe,ve){return new ue(this,pe,ve)},ce.prototype.pointFromJSON=function(pe){return ue.fromJSON(this,pe)},ue.prototype.precompute=function(){},ue.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},ue.fromJSON=function(pe,ve){return new ue(pe,ve[0],ve[1]||pe.one)},ue.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},ue.prototype.isInfinity=function(){return this.z.cmpn(0)===0},ue.prototype.dbl=function(){var pe=this.x.redAdd(this.z),ve=pe.redSqr(),me=this.x.redSub(this.z),ge=me.redSqr(),ye=ve.redSub(ge),xe=ve.redMul(ge),_e=ye.redMul(ge.redAdd(this.curve.a24.redMul(ye)));return this.curve.point(xe,_e)},ue.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},ue.prototype.diffAdd=function(pe,ve){var me=this.x.redAdd(this.z),ge=this.x.redSub(this.z),ye=pe.x.redAdd(pe.z),xe=pe.x.redSub(pe.z),_e=xe.redMul(me),$e=ye.redMul(ge),Ie=ve.z.redMul(_e.redAdd($e).redSqr()),Fe=ve.x.redMul(_e.redISub($e).redSqr());return this.curve.point(Ie,Fe)},ue.prototype.mul=function(pe){for(var ve=pe.clone(),me=this,ge=this.curve.point(null,null),ye=this,xe=[];ve.cmpn(0)!==0;ve.iushrn(1))xe.push(ve.andln(1));for(var _e=xe.length-1;_e>=0;_e--)xe[_e]===0?(me=me.diffAdd(ge,ye),ge=ge.dbl()):(ge=me.diffAdd(ge,ye),me=me.dbl());return ge},ue.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},ue.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},ue.prototype.eq=function(pe){return this.getX().cmp(pe.getX())===0},ue.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},ue.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var K=requireUtils$1(),J=requireBn$3(),ne=requireInherits_browser(),oe=requireBase$1(),ce=K.assert;function ue(pe){this.twisted=(pe.a|0)!==1,this.mOneA=this.twisted&&(pe.a|0)===-1,this.extended=this.mOneA,oe.call(this,"edwards",pe),this.a=new J(pe.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new J(pe.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new J(pe.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),ce(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(pe.c|0)===1}ne(ue,oe),edwards=ue,ue.prototype._mulA=function(ve){return this.mOneA?ve.redNeg():this.a.redMul(ve)},ue.prototype._mulC=function(ve){return this.oneC?ve:this.c.redMul(ve)},ue.prototype.jpoint=function(ve,me,ge,ye){return this.point(ve,me,ge,ye)},ue.prototype.pointFromX=function(ve,me){ve=new J(ve,16),ve.red||(ve=ve.toRed(this.red));var ge=ve.redSqr(),ye=this.c2.redSub(this.a.redMul(ge)),xe=this.one.redSub(this.c2.redMul(this.d).redMul(ge)),_e=ye.redMul(xe.redInvm()),$e=_e.redSqrt();if($e.redSqr().redSub(_e).cmp(this.zero)!==0)throw new Error("invalid point");var Ie=$e.fromRed().isOdd();return(me&&!Ie||!me&&Ie)&&($e=$e.redNeg()),this.point(ve,$e)},ue.prototype.pointFromY=function(ve,me){ve=new J(ve,16),ve.red||(ve=ve.toRed(this.red));var ge=ve.redSqr(),ye=ge.redSub(this.c2),xe=ge.redMul(this.d).redMul(this.c2).redSub(this.a),_e=ye.redMul(xe.redInvm());if(_e.cmp(this.zero)===0){if(me)throw new Error("invalid point");return this.point(this.zero,ve)}var $e=_e.redSqrt();if($e.redSqr().redSub(_e).cmp(this.zero)!==0)throw new Error("invalid point");return $e.fromRed().isOdd()!==me&&($e=$e.redNeg()),this.point($e,ve)},ue.prototype.validate=function(ve){if(ve.isInfinity())return!0;ve.normalize();var me=ve.x.redSqr(),ge=ve.y.redSqr(),ye=me.redMul(this.a).redAdd(ge),xe=this.c2.redMul(this.one.redAdd(this.d.redMul(me).redMul(ge)));return ye.cmp(xe)===0};function Ae(pe,ve,me,ge,ye){oe.BasePoint.call(this,pe,"projective"),ve===null&&me===null&&ge===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new J(ve,16),this.y=new J(me,16),this.z=ge?new J(ge,16):this.curve.one,this.t=ye&&new J(ye,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return ne(Ae,oe.BasePoint),ue.prototype.pointFromJSON=function(ve){return Ae.fromJSON(this,ve)},ue.prototype.point=function(ve,me,ge,ye){return new Ae(this,ve,me,ge,ye)},Ae.fromJSON=function(ve,me){return new Ae(ve,me[0],me[1],me[2])},Ae.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Ae.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},Ae.prototype._extDbl=function(){var ve=this.x.redSqr(),me=this.y.redSqr(),ge=this.z.redSqr();ge=ge.redIAdd(ge);var ye=this.curve._mulA(ve),xe=this.x.redAdd(this.y).redSqr().redISub(ve).redISub(me),_e=ye.redAdd(me),$e=_e.redSub(ge),Ie=ye.redSub(me),Fe=xe.redMul($e),ke=_e.redMul(Ie),je=xe.redMul(Ie),We=$e.redMul(_e);return this.curve.point(Fe,ke,We,je)},Ae.prototype._projDbl=function(){var ve=this.x.redAdd(this.y).redSqr(),me=this.x.redSqr(),ge=this.y.redSqr(),ye,xe,_e,$e,Ie,Fe;if(this.curve.twisted){$e=this.curve._mulA(me);var ke=$e.redAdd(ge);this.zOne?(ye=ve.redSub(me).redSub(ge).redMul(ke.redSub(this.curve.two)),xe=ke.redMul($e.redSub(ge)),_e=ke.redSqr().redSub(ke).redSub(ke)):(Ie=this.z.redSqr(),Fe=ke.redSub(Ie).redISub(Ie),ye=ve.redSub(me).redISub(ge).redMul(Fe),xe=ke.redMul($e.redSub(ge)),_e=ke.redMul(Fe))}else $e=me.redAdd(ge),Ie=this.curve._mulC(this.z).redSqr(),Fe=$e.redSub(Ie).redSub(Ie),ye=this.curve._mulC(ve.redISub($e)).redMul(Fe),xe=this.curve._mulC($e).redMul(me.redISub(ge)),_e=$e.redMul(Fe);return this.curve.point(ye,xe,_e)},Ae.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Ae.prototype._extAdd=function(ve){var me=this.y.redSub(this.x).redMul(ve.y.redSub(ve.x)),ge=this.y.redAdd(this.x).redMul(ve.y.redAdd(ve.x)),ye=this.t.redMul(this.curve.dd).redMul(ve.t),xe=this.z.redMul(ve.z.redAdd(ve.z)),_e=ge.redSub(me),$e=xe.redSub(ye),Ie=xe.redAdd(ye),Fe=ge.redAdd(me),ke=_e.redMul($e),je=Ie.redMul(Fe),We=_e.redMul(Fe),ze=$e.redMul(Ie);return this.curve.point(ke,je,ze,We)},Ae.prototype._projAdd=function(ve){var me=this.z.redMul(ve.z),ge=me.redSqr(),ye=this.x.redMul(ve.x),xe=this.y.redMul(ve.y),_e=this.curve.d.redMul(ye).redMul(xe),$e=ge.redSub(_e),Ie=ge.redAdd(_e),Fe=this.x.redAdd(this.y).redMul(ve.x.redAdd(ve.y)).redISub(ye).redISub(xe),ke=me.redMul($e).redMul(Fe),je,We;return this.curve.twisted?(je=me.redMul(Ie).redMul(xe.redSub(this.curve._mulA(ye))),We=$e.redMul(Ie)):(je=me.redMul(Ie).redMul(xe.redSub(ye)),We=this.curve._mulC($e).redMul(Ie)),this.curve.point(ke,je,We)},Ae.prototype.add=function(ve){return this.isInfinity()?ve:ve.isInfinity()?this:this.curve.extended?this._extAdd(ve):this._projAdd(ve)},Ae.prototype.mul=function(ve){return this._hasDoubles(ve)?this.curve._fixedNafMul(this,ve):this.curve._wnafMul(this,ve)},Ae.prototype.mulAdd=function(ve,me,ge){return this.curve._wnafMulAdd(1,[this,me],[ve,ge],2,!1)},Ae.prototype.jmulAdd=function(ve,me,ge){return this.curve._wnafMulAdd(1,[this,me],[ve,ge],2,!0)},Ae.prototype.normalize=function(){if(this.zOne)return this;var ve=this.z.redInvm();return this.x=this.x.redMul(ve),this.y=this.y.redMul(ve),this.t&&(this.t=this.t.redMul(ve)),this.z=this.curve.one,this.zOne=!0,this},Ae.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Ae.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Ae.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Ae.prototype.eq=function(ve){return this===ve||this.getX().cmp(ve.getX())===0&&this.getY().cmp(ve.getY())===0},Ae.prototype.eqXToP=function(ve){var me=ve.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(me)===0)return!0;for(var ge=ve.clone(),ye=this.curve.redN.redMul(this.z);;){if(ge.iadd(this.curve.n),ge.cmp(this.curve.p)>=0)return!1;if(me.redIAdd(ye),this.x.cmp(me)===0)return!0}},Ae.prototype.toP=Ae.prototype.normalize,Ae.prototype.mixedAdd=Ae.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(K){var J=K;J.base=requireBase$1(),J.short=requireShort(),J.mont=requireMont(),J.edwards=requireEdwards()}(curve)),curve}var curves={},hash$1={},utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var K=requireMinimalisticAssert(),J=requireInherits_browser();utils.inherits=J;function ne(Se,Re){return(Se.charCodeAt(Re)&64512)!==55296||Re<0||Re+1>=Se.length?!1:(Se.charCodeAt(Re+1)&64512)===56320}function oe(Se,Re){if(Array.isArray(Se))return Se.slice();if(!Se)return[];var Be=[];if(typeof Se=="string")if(Re){if(Re==="hex")for(Se=Se.replace(/[^a-z0-9]+/ig,""),Se.length%2!==0&&(Se="0"+Se),Ue=0;Ue<Se.length;Ue+=2)Be.push(parseInt(Se[Ue]+Se[Ue+1],16))}else for(var Ne=0,Ue=0;Ue<Se.length;Ue++){var Ge=Se.charCodeAt(Ue);Ge<128?Be[Ne++]=Ge:Ge<2048?(Be[Ne++]=Ge>>6|192,Be[Ne++]=Ge&63|128):ne(Se,Ue)?(Ge=65536+((Ge&1023)<<10)+(Se.charCodeAt(++Ue)&1023),Be[Ne++]=Ge>>18|240,Be[Ne++]=Ge>>12&63|128,Be[Ne++]=Ge>>6&63|128,Be[Ne++]=Ge&63|128):(Be[Ne++]=Ge>>12|224,Be[Ne++]=Ge>>6&63|128,Be[Ne++]=Ge&63|128)}else for(Ue=0;Ue<Se.length;Ue++)Be[Ue]=Se[Ue]|0;return Be}utils.toArray=oe;function ce(Se){for(var Re="",Be=0;Be<Se.length;Be++)Re+=pe(Se[Be].toString(16));return Re}utils.toHex=ce;function ue(Se){var Re=Se>>>24|Se>>>8&65280|Se<<8&16711680|(Se&255)<<24;return Re>>>0}utils.htonl=ue;function Ae(Se,Re){for(var Be="",Ne=0;Ne<Se.length;Ne++){var Ue=Se[Ne];Re==="little"&&(Ue=ue(Ue)),Be+=ve(Ue.toString(16))}return Be}utils.toHex32=Ae;function pe(Se){return Se.length===1?"0"+Se:Se}utils.zero2=pe;function ve(Se){return Se.length===7?"0"+Se:Se.length===6?"00"+Se:Se.length===5?"000"+Se:Se.length===4?"0000"+Se:Se.length===3?"00000"+Se:Se.length===2?"000000"+Se:Se.length===1?"0000000"+Se:Se}utils.zero8=ve;function me(Se,Re,Be,Ne){var Ue=Be-Re;K(Ue%4===0);for(var Ge=new Array(Ue/4),Ye=0,Qe=Re;Ye<Ge.length;Ye++,Qe+=4){var Te;Ne==="big"?Te=Se[Qe]<<24|Se[Qe+1]<<16|Se[Qe+2]<<8|Se[Qe+3]:Te=Se[Qe+3]<<24|Se[Qe+2]<<16|Se[Qe+1]<<8|Se[Qe],Ge[Ye]=Te>>>0}return Ge}utils.join32=me;function ge(Se,Re){for(var Be=new Array(Se.length*4),Ne=0,Ue=0;Ne<Se.length;Ne++,Ue+=4){var Ge=Se[Ne];Re==="big"?(Be[Ue]=Ge>>>24,Be[Ue+1]=Ge>>>16&255,Be[Ue+2]=Ge>>>8&255,Be[Ue+3]=Ge&255):(Be[Ue+3]=Ge>>>24,Be[Ue+2]=Ge>>>16&255,Be[Ue+1]=Ge>>>8&255,Be[Ue]=Ge&255)}return Be}utils.split32=ge;function ye(Se,Re){return Se>>>Re|Se<<32-Re}utils.rotr32=ye;function xe(Se,Re){return Se<<Re|Se>>>32-Re}utils.rotl32=xe;function _e(Se,Re){return Se+Re>>>0}utils.sum32=_e;function $e(Se,Re,Be){return Se+Re+Be>>>0}utils.sum32_3=$e;function Ie(Se,Re,Be,Ne){return Se+Re+Be+Ne>>>0}utils.sum32_4=Ie;function Fe(Se,Re,Be,Ne,Ue){return Se+Re+Be+Ne+Ue>>>0}utils.sum32_5=Fe;function ke(Se,Re,Be,Ne){var Ue=Se[Re],Ge=Se[Re+1],Ye=Ne+Ge>>>0,Qe=(Ye<Ne?1:0)+Be+Ue;Se[Re]=Qe>>>0,Se[Re+1]=Ye}utils.sum64=ke;function je(Se,Re,Be,Ne){var Ue=Re+Ne>>>0,Ge=(Ue<Re?1:0)+Se+Be;return Ge>>>0}utils.sum64_hi=je;function We(Se,Re,Be,Ne){var Ue=Re+Ne;return Ue>>>0}utils.sum64_lo=We;function ze(Se,Re,Be,Ne,Ue,Ge,Ye,Qe){var Te=0,Ke=Re;Ke=Ke+Ne>>>0,Te+=Ke<Re?1:0,Ke=Ke+Ge>>>0,Te+=Ke<Ge?1:0,Ke=Ke+Qe>>>0,Te+=Ke<Qe?1:0;var rt=Se+Be+Ue+Ye+Te;return rt>>>0}utils.sum64_4_hi=ze;function Xe(Se,Re,Be,Ne,Ue,Ge,Ye,Qe){var Te=Re+Ne+Ge+Qe;return Te>>>0}utils.sum64_4_lo=Xe;function Je(Se,Re,Be,Ne,Ue,Ge,Ye,Qe,Te,Ke){var rt=0,it=Re;it=it+Ne>>>0,rt+=it<Re?1:0,it=it+Ge>>>0,rt+=it<Ge?1:0,it=it+Qe>>>0,rt+=it<Qe?1:0,it=it+Ke>>>0,rt+=it<Ke?1:0;var at=Se+Be+Ue+Ye+Te+rt;return at>>>0}utils.sum64_5_hi=Je;function nt(Se,Re,Be,Ne,Ue,Ge,Ye,Qe,Te,Ke){var rt=Re+Ne+Ge+Qe+Ke;return rt>>>0}utils.sum64_5_lo=nt;function et(Se,Re,Be){var Ne=Re<<32-Be|Se>>>Be;return Ne>>>0}utils.rotr64_hi=et;function tt(Se,Re,Be){var Ne=Se<<32-Be|Re>>>Be;return Ne>>>0}utils.rotr64_lo=tt;function st(Se,Re,Be){return Se>>>Be}utils.shr64_hi=st;function qe(Se,Re,Be){var Ne=Se<<32-Be|Re>>>Be;return Ne>>>0}return utils.shr64_lo=qe,utils}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var K=requireUtils(),J=requireMinimalisticAssert();function ne(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=ne,ne.prototype.update=function(ce,ue){if(ce=K.toArray(ce,ue),this.pending?this.pending=this.pending.concat(ce):this.pending=ce,this.pendingTotal+=ce.length,this.pending.length>=this._delta8){ce=this.pending;var Ae=ce.length%this._delta8;this.pending=ce.slice(ce.length-Ae,ce.length),this.pending.length===0&&(this.pending=null),ce=K.join32(ce,0,ce.length-Ae,this.endian);for(var pe=0;pe<ce.length;pe+=this._delta32)this._update(ce,pe,pe+this._delta32)}return this},ne.prototype.digest=function(ce){return this.update(this._pad()),J(this.pending===null),this._digest(ce)},ne.prototype._pad=function(){var ce=this.pendingTotal,ue=this._delta8,Ae=ue-(ce+this.padLength)%ue,pe=new Array(Ae+this.padLength);pe[0]=128;for(var ve=1;ve<Ae;ve++)pe[ve]=0;if(ce<<=3,this.endian==="big"){for(var me=8;me<this.padLength;me++)pe[ve++]=0;pe[ve++]=0,pe[ve++]=0,pe[ve++]=0,pe[ve++]=0,pe[ve++]=ce>>>24&255,pe[ve++]=ce>>>16&255,pe[ve++]=ce>>>8&255,pe[ve++]=ce&255}else for(pe[ve++]=ce&255,pe[ve++]=ce>>>8&255,pe[ve++]=ce>>>16&255,pe[ve++]=ce>>>24&255,pe[ve++]=0,pe[ve++]=0,pe[ve++]=0,pe[ve++]=0,me=8;me<this.padLength;me++)pe[ve++]=0;return pe},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var K=requireUtils(),J=K.rotr32;function ne(ge,ye,xe,_e){if(ge===0)return oe(ye,xe,_e);if(ge===1||ge===3)return ue(ye,xe,_e);if(ge===2)return ce(ye,xe,_e)}common.ft_1=ne;function oe(ge,ye,xe){return ge&ye^~ge&xe}common.ch32=oe;function ce(ge,ye,xe){return ge&ye^ge&xe^ye&xe}common.maj32=ce;function ue(ge,ye,xe){return ge^ye^xe}common.p32=ue;function Ae(ge){return J(ge,2)^J(ge,13)^J(ge,22)}common.s0_256=Ae;function pe(ge){return J(ge,6)^J(ge,11)^J(ge,25)}common.s1_256=pe;function ve(ge){return J(ge,7)^J(ge,18)^ge>>>3}common.g0_256=ve;function me(ge){return J(ge,17)^J(ge,19)^ge>>>10}return common.g1_256=me,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var K=requireUtils(),J=requireCommon$1(),ne=requireCommon(),oe=K.rotl32,ce=K.sum32,ue=K.sum32_5,Ae=ne.ft_1,pe=J.BlockHash,ve=[1518500249,1859775393,2400959708,3395469782];function me(){if(!(this instanceof me))return new me;pe.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return K.inherits(me,pe),_1=me,me.blockSize=512,me.outSize=160,me.hmacStrength=80,me.padLength=64,me.prototype._update=function(ye,xe){for(var _e=this.W,$e=0;$e<16;$e++)_e[$e]=ye[xe+$e];for(;$e<_e.length;$e++)_e[$e]=oe(_e[$e-3]^_e[$e-8]^_e[$e-14]^_e[$e-16],1);var Ie=this.h[0],Fe=this.h[1],ke=this.h[2],je=this.h[3],We=this.h[4];for($e=0;$e<_e.length;$e++){var ze=~~($e/20),Xe=ue(oe(Ie,5),Ae(ze,Fe,ke,je),We,_e[$e],ve[ze]);We=je,je=ke,ke=oe(Fe,30),Fe=Ie,Ie=Xe}this.h[0]=ce(this.h[0],Ie),this.h[1]=ce(this.h[1],Fe),this.h[2]=ce(this.h[2],ke),this.h[3]=ce(this.h[3],je),this.h[4]=ce(this.h[4],We)},me.prototype._digest=function(ye){return ye==="hex"?K.toHex32(this.h,"big"):K.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var K=requireUtils(),J=requireCommon$1(),ne=requireCommon(),oe=requireMinimalisticAssert(),ce=K.sum32,ue=K.sum32_4,Ae=K.sum32_5,pe=ne.ch32,ve=ne.maj32,me=ne.s0_256,ge=ne.s1_256,ye=ne.g0_256,xe=ne.g1_256,_e=J.BlockHash,$e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ie(){if(!(this instanceof Ie))return new Ie;_e.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=$e,this.W=new Array(64)}return K.inherits(Ie,_e),_256=Ie,Ie.blockSize=512,Ie.outSize=256,Ie.hmacStrength=192,Ie.padLength=64,Ie.prototype._update=function(ke,je){for(var We=this.W,ze=0;ze<16;ze++)We[ze]=ke[je+ze];for(;ze<We.length;ze++)We[ze]=ue(xe(We[ze-2]),We[ze-7],ye(We[ze-15]),We[ze-16]);var Xe=this.h[0],Je=this.h[1],nt=this.h[2],et=this.h[3],tt=this.h[4],st=this.h[5],qe=this.h[6],Se=this.h[7];for(oe(this.k.length===We.length),ze=0;ze<We.length;ze++){var Re=Ae(Se,ge(tt),pe(tt,st,qe),this.k[ze],We[ze]),Be=ce(me(Xe),ve(Xe,Je,nt));Se=qe,qe=st,st=tt,tt=ce(et,Re),et=nt,nt=Je,Je=Xe,Xe=ce(Re,Be)}this.h[0]=ce(this.h[0],Xe),this.h[1]=ce(this.h[1],Je),this.h[2]=ce(this.h[2],nt),this.h[3]=ce(this.h[3],et),this.h[4]=ce(this.h[4],tt),this.h[5]=ce(this.h[5],st),this.h[6]=ce(this.h[6],qe),this.h[7]=ce(this.h[7],Se)},Ie.prototype._digest=function(ke){return ke==="hex"?K.toHex32(this.h,"big"):K.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var K=requireUtils(),J=require_256();function ne(){if(!(this instanceof ne))return new ne;J.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return K.inherits(ne,J),_224=ne,ne.blockSize=512,ne.outSize=224,ne.hmacStrength=192,ne.padLength=64,ne.prototype._digest=function(ce){return ce==="hex"?K.toHex32(this.h.slice(0,7),"big"):K.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var K=requireUtils(),J=requireCommon$1(),ne=requireMinimalisticAssert(),oe=K.rotr64_hi,ce=K.rotr64_lo,ue=K.shr64_hi,Ae=K.shr64_lo,pe=K.sum64,ve=K.sum64_hi,me=K.sum64_lo,ge=K.sum64_4_hi,ye=K.sum64_4_lo,xe=K.sum64_5_hi,_e=K.sum64_5_lo,$e=J.BlockHash,Ie=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Fe(){if(!(this instanceof Fe))return new Fe;$e.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Ie,this.W=new Array(160)}K.inherits(Fe,$e),_512=Fe,Fe.blockSize=1024,Fe.outSize=512,Fe.hmacStrength=192,Fe.padLength=128,Fe.prototype._prepareBlock=function(Be,Ne){for(var Ue=this.W,Ge=0;Ge<32;Ge++)Ue[Ge]=Be[Ne+Ge];for(;Ge<Ue.length;Ge+=2){var Ye=qe(Ue[Ge-4],Ue[Ge-3]),Qe=Se(Ue[Ge-4],Ue[Ge-3]),Te=Ue[Ge-14],Ke=Ue[Ge-13],rt=tt(Ue[Ge-30],Ue[Ge-29]),it=st(Ue[Ge-30],Ue[Ge-29]),at=Ue[Ge-32],lt=Ue[Ge-31];Ue[Ge]=ge(Ye,Qe,Te,Ke,rt,it,at,lt),Ue[Ge+1]=ye(Ye,Qe,Te,Ke,rt,it,at,lt)}},Fe.prototype._update=function(Be,Ne){this._prepareBlock(Be,Ne);var Ue=this.W,Ge=this.h[0],Ye=this.h[1],Qe=this.h[2],Te=this.h[3],Ke=this.h[4],rt=this.h[5],it=this.h[6],at=this.h[7],lt=this.h[8],ct=this.h[9],ot=this.h[10],ft=this.h[11],dt=this.h[12],mt=this.h[13],kt=this.h[14],wt=this.h[15];ne(this.k.length===Ue.length);for(var Et=0;Et<Ue.length;Et+=2){var Ot=kt,Rt=wt,gt=nt(lt,ct),$t=et(lt,ct),pt=ke(lt,ct,ot,ft,dt),vt=je(lt,ct,ot,ft,dt,mt),Mt=this.k[Et],St=this.k[Et+1],_t=Ue[Et],Xt=Ue[Et+1],Tt=xe(Ot,Rt,gt,$t,pt,vt,Mt,St,_t,Xt),Dt=_e(Ot,Rt,gt,$t,pt,vt,Mt,St,_t,Xt);Ot=Xe(Ge,Ye),Rt=Je(Ge,Ye),gt=We(Ge,Ye,Qe,Te,Ke),$t=ze(Ge,Ye,Qe,Te,Ke,rt);var Ht=ve(Ot,Rt,gt,$t),Bt=me(Ot,Rt,gt,$t);kt=dt,wt=mt,dt=ot,mt=ft,ot=lt,ft=ct,lt=ve(it,at,Tt,Dt),ct=me(at,at,Tt,Dt),it=Ke,at=rt,Ke=Qe,rt=Te,Qe=Ge,Te=Ye,Ge=ve(Tt,Dt,Ht,Bt),Ye=me(Tt,Dt,Ht,Bt)}pe(this.h,0,Ge,Ye),pe(this.h,2,Qe,Te),pe(this.h,4,Ke,rt),pe(this.h,6,it,at),pe(this.h,8,lt,ct),pe(this.h,10,ot,ft),pe(this.h,12,dt,mt),pe(this.h,14,kt,wt)},Fe.prototype._digest=function(Be){return Be==="hex"?K.toHex32(this.h,"big"):K.split32(this.h,"big")};function ke(Re,Be,Ne,Ue,Ge){var Ye=Re&Ne^~Re&Ge;return Ye<0&&(Ye+=4294967296),Ye}function je(Re,Be,Ne,Ue,Ge,Ye){var Qe=Be&Ue^~Be&Ye;return Qe<0&&(Qe+=4294967296),Qe}function We(Re,Be,Ne,Ue,Ge){var Ye=Re&Ne^Re&Ge^Ne&Ge;return Ye<0&&(Ye+=4294967296),Ye}function ze(Re,Be,Ne,Ue,Ge,Ye){var Qe=Be&Ue^Be&Ye^Ue&Ye;return Qe<0&&(Qe+=4294967296),Qe}function Xe(Re,Be){var Ne=oe(Re,Be,28),Ue=oe(Be,Re,2),Ge=oe(Be,Re,7),Ye=Ne^Ue^Ge;return Ye<0&&(Ye+=4294967296),Ye}function Je(Re,Be){var Ne=ce(Re,Be,28),Ue=ce(Be,Re,2),Ge=ce(Be,Re,7),Ye=Ne^Ue^Ge;return Ye<0&&(Ye+=4294967296),Ye}function nt(Re,Be){var Ne=oe(Re,Be,14),Ue=oe(Re,Be,18),Ge=oe(Be,Re,9),Ye=Ne^Ue^Ge;return Ye<0&&(Ye+=4294967296),Ye}function et(Re,Be){var Ne=ce(Re,Be,14),Ue=ce(Re,Be,18),Ge=ce(Be,Re,9),Ye=Ne^Ue^Ge;return Ye<0&&(Ye+=4294967296),Ye}function tt(Re,Be){var Ne=oe(Re,Be,1),Ue=oe(Re,Be,8),Ge=ue(Re,Be,7),Ye=Ne^Ue^Ge;return Ye<0&&(Ye+=4294967296),Ye}function st(Re,Be){var Ne=ce(Re,Be,1),Ue=ce(Re,Be,8),Ge=Ae(Re,Be,7),Ye=Ne^Ue^Ge;return Ye<0&&(Ye+=4294967296),Ye}function qe(Re,Be){var Ne=oe(Re,Be,19),Ue=oe(Be,Re,29),Ge=ue(Re,Be,6),Ye=Ne^Ue^Ge;return Ye<0&&(Ye+=4294967296),Ye}function Se(Re,Be){var Ne=ce(Re,Be,19),Ue=ce(Be,Re,29),Ge=Ae(Re,Be,6),Ye=Ne^Ue^Ge;return Ye<0&&(Ye+=4294967296),Ye}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var K=requireUtils(),J=require_512();function ne(){if(!(this instanceof ne))return new ne;J.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return K.inherits(ne,J),_384=ne,ne.blockSize=1024,ne.outSize=384,ne.hmacStrength=192,ne.padLength=128,ne.prototype._digest=function(ce){return ce==="hex"?K.toHex32(this.h.slice(0,12),"big"):K.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var K=requireUtils(),J=requireCommon$1(),ne=K.rotl32,oe=K.sum32,ce=K.sum32_3,ue=K.sum32_4,Ae=J.BlockHash;function pe(){if(!(this instanceof pe))return new pe;Ae.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}K.inherits(pe,Ae),ripemd.ripemd160=pe,pe.blockSize=512,pe.outSize=160,pe.hmacStrength=192,pe.padLength=64,pe.prototype._update=function(Fe,ke){for(var je=this.h[0],We=this.h[1],ze=this.h[2],Xe=this.h[3],Je=this.h[4],nt=je,et=We,tt=ze,st=Xe,qe=Je,Se=0;Se<80;Se++){var Re=oe(ne(ue(je,ve(Se,We,ze,Xe),Fe[ye[Se]+ke],me(Se)),_e[Se]),Je);je=Je,Je=Xe,Xe=ne(ze,10),ze=We,We=Re,Re=oe(ne(ue(nt,ve(79-Se,et,tt,st),Fe[xe[Se]+ke],ge(Se)),$e[Se]),qe),nt=qe,qe=st,st=ne(tt,10),tt=et,et=Re}Re=ce(this.h[1],ze,st),this.h[1]=ce(this.h[2],Xe,qe),this.h[2]=ce(this.h[3],Je,nt),this.h[3]=ce(this.h[4],je,et),this.h[4]=ce(this.h[0],We,tt),this.h[0]=Re},pe.prototype._digest=function(Fe){return Fe==="hex"?K.toHex32(this.h,"little"):K.split32(this.h,"little")};function ve(Ie,Fe,ke,je){return Ie<=15?Fe^ke^je:Ie<=31?Fe&ke|~Fe&je:Ie<=47?(Fe|~ke)^je:Ie<=63?Fe&je|ke&~je:Fe^(ke|~je)}function me(Ie){return Ie<=15?0:Ie<=31?1518500249:Ie<=47?1859775393:Ie<=63?2400959708:2840853838}function ge(Ie){return Ie<=15?1352829926:Ie<=31?1548603684:Ie<=47?1836072691:Ie<=63?2053994217:0}var ye=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],xe=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],_e=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],$e=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var K=requireUtils(),J=requireMinimalisticAssert();function ne(oe,ce,ue){if(!(this instanceof ne))return new ne(oe,ce,ue);this.Hash=oe,this.blockSize=oe.blockSize/8,this.outSize=oe.outSize/8,this.inner=null,this.outer=null,this._init(K.toArray(ce,ue))}return hmac=ne,ne.prototype._init=function(ce){ce.length>this.blockSize&&(ce=new this.Hash().update(ce).digest()),J(ce.length<=this.blockSize);for(var ue=ce.length;ue<this.blockSize;ue++)ce.push(0);for(ue=0;ue<ce.length;ue++)ce[ue]^=54;for(this.inner=new this.Hash().update(ce),ue=0;ue<ce.length;ue++)ce[ue]^=106;this.outer=new this.Hash().update(ce)},ne.prototype.update=function(ce,ue){return this.inner.update(ce,ue),this},ne.prototype.digest=function(ce){return this.outer.update(this.inner.digest()),this.outer.digest(ce)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(K){var J=K;J.utils=requireUtils(),J.common=requireCommon$1(),J.sha=requireSha(),J.ripemd=requireRipemd(),J.hmac=requireHmac(),J.sha1=J.sha.sha1,J.sha256=J.sha.sha256,J.sha224=J.sha.sha224,J.sha384=J.sha.sha384,J.sha512=J.sha.sha512,J.ripemd160=J.ripemd.ripemd160}(hash$1)),hash$1}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(K){var J=K,ne=requireHash(),oe=requireCurve(),ce=requireUtils$1(),ue=ce.assert;function Ae(me){me.type==="short"?this.curve=new oe.short(me):me.type==="edwards"?this.curve=new oe.edwards(me):this.curve=new oe.mont(me),this.g=this.curve.g,this.n=this.curve.n,this.hash=me.hash,ue(this.g.validate(),"Invalid curve"),ue(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}J.PresetCurve=Ae;function pe(me,ge){Object.defineProperty(J,me,{configurable:!0,enumerable:!0,get:function(){var ye=new Ae(ge);return Object.defineProperty(J,me,{configurable:!0,enumerable:!0,value:ye}),ye}})}pe("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ne.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),pe("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ne.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),pe("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ne.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),pe("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ne.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),pe("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ne.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),pe("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ne.sha256,gRed:!1,g:["9"]}),pe("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ne.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var ve;try{ve=requireSecp256k1()}catch{ve=void 0}pe("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ne.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",ve]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var K=requireHash(),J=requireUtils$2(),ne=requireMinimalisticAssert();function oe(ce){if(!(this instanceof oe))return new oe(ce);this.hash=ce.hash,this.predResist=!!ce.predResist,this.outLen=this.hash.outSize,this.minEntropy=ce.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var ue=J.toArray(ce.entropy,ce.entropyEnc||"hex"),Ae=J.toArray(ce.nonce,ce.nonceEnc||"hex"),pe=J.toArray(ce.pers,ce.persEnc||"hex");ne(ue.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(ue,Ae,pe)}return hmacDrbg=oe,oe.prototype._init=function(ue,Ae,pe){var ve=ue.concat(Ae).concat(pe);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var me=0;me<this.V.length;me++)this.K[me]=0,this.V[me]=1;this._update(ve),this._reseed=1,this.reseedInterval=281474976710656},oe.prototype._hmac=function(){return new K.hmac(this.hash,this.K)},oe.prototype._update=function(ue){var Ae=this._hmac().update(this.V).update([0]);ue&&(Ae=Ae.update(ue)),this.K=Ae.digest(),this.V=this._hmac().update(this.V).digest(),ue&&(this.K=this._hmac().update(this.V).update([1]).update(ue).digest(),this.V=this._hmac().update(this.V).digest())},oe.prototype.reseed=function(ue,Ae,pe,ve){typeof Ae!="string"&&(ve=pe,pe=Ae,Ae=null),ue=J.toArray(ue,Ae),pe=J.toArray(pe,ve),ne(ue.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(ue.concat(pe||[])),this._reseed=1},oe.prototype.generate=function(ue,Ae,pe,ve){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof Ae!="string"&&(ve=pe,pe=Ae,Ae=null),pe&&(pe=J.toArray(pe,ve||"hex"),this._update(pe));for(var me=[];me.length<ue;)this.V=this._hmac().update(this.V).digest(),me=me.concat(this.V);var ge=me.slice(0,ue);return this._update(pe),this._reseed++,J.encode(ge,Ae)},hmacDrbg}var key$2,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$2;hasRequiredKey$1=1;var K=requireBn$3(),J=requireUtils$1(),ne=J.assert;function oe(ce,ue){this.ec=ce,this.priv=null,this.pub=null,ue.priv&&this._importPrivate(ue.priv,ue.privEnc),ue.pub&&this._importPublic(ue.pub,ue.pubEnc)}return key$2=oe,oe.fromPublic=function(ue,Ae,pe){return Ae instanceof oe?Ae:new oe(ue,{pub:Ae,pubEnc:pe})},oe.fromPrivate=function(ue,Ae,pe){return Ae instanceof oe?Ae:new oe(ue,{priv:Ae,privEnc:pe})},oe.prototype.validate=function(){var ue=this.getPublic();return ue.isInfinity()?{result:!1,reason:"Invalid public key"}:ue.validate()?ue.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},oe.prototype.getPublic=function(ue,Ae){return typeof ue=="string"&&(Ae=ue,ue=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),Ae?this.pub.encode(Ae,ue):this.pub},oe.prototype.getPrivate=function(ue){return ue==="hex"?this.priv.toString(16,2):this.priv},oe.prototype._importPrivate=function(ue,Ae){this.priv=new K(ue,Ae||16),this.priv=this.priv.umod(this.ec.curve.n)},oe.prototype._importPublic=function(ue,Ae){if(ue.x||ue.y){this.ec.curve.type==="mont"?ne(ue.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ne(ue.x&&ue.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(ue.x,ue.y);return}this.pub=this.ec.curve.decodePoint(ue,Ae)},oe.prototype.derive=function(ue){return ue.validate()||ne(ue.validate(),"public point not validated"),ue.mul(this.priv).getX()},oe.prototype.sign=function(ue,Ae,pe){return this.ec.sign(ue,this,Ae,pe)},oe.prototype.verify=function(ue,Ae){return this.ec.verify(ue,Ae,this)},oe.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$2}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var K=requireBn$3(),J=requireUtils$1(),ne=J.assert;function oe(ve,me){if(ve instanceof oe)return ve;this._importDER(ve,me)||(ne(ve.r&&ve.s,"Signature without r or s"),this.r=new K(ve.r,16),this.s=new K(ve.s,16),ve.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=ve.recoveryParam)}signature$1=oe;function ce(){this.place=0}function ue(ve,me){var ge=ve[me.place++];if(!(ge&128))return ge;var ye=ge&15;if(ye===0||ye>4||ve[me.place]===0)return!1;for(var xe=0,_e=0,$e=me.place;_e<ye;_e++,$e++)xe<<=8,xe|=ve[$e],xe>>>=0;return xe<=127?!1:(me.place=$e,xe)}function Ae(ve){for(var me=0,ge=ve.length-1;!ve[me]&&!(ve[me+1]&128)&&me<ge;)me++;return me===0?ve:ve.slice(me)}oe.prototype._importDER=function(me,ge){me=J.toArray(me,ge);var ye=new ce;if(me[ye.place++]!==48)return!1;var xe=ue(me,ye);if(xe===!1||xe+ye.place!==me.length||me[ye.place++]!==2)return!1;var _e=ue(me,ye);if(_e===!1||me[ye.place]&128)return!1;var $e=me.slice(ye.place,_e+ye.place);if(ye.place+=_e,me[ye.place++]!==2)return!1;var Ie=ue(me,ye);if(Ie===!1||me.length!==Ie+ye.place||me[ye.place]&128)return!1;var Fe=me.slice(ye.place,Ie+ye.place);if($e[0]===0)if($e[1]&128)$e=$e.slice(1);else return!1;if(Fe[0]===0)if(Fe[1]&128)Fe=Fe.slice(1);else return!1;return this.r=new K($e),this.s=new K(Fe),this.recoveryParam=null,!0};function pe(ve,me){if(me<128){ve.push(me);return}var ge=1+(Math.log(me)/Math.LN2>>>3);for(ve.push(ge|128);--ge;)ve.push(me>>>(ge<<3)&255);ve.push(me)}return oe.prototype.toDER=function(me){var ge=this.r.toArray(),ye=this.s.toArray();for(ge[0]&128&&(ge=[0].concat(ge)),ye[0]&128&&(ye=[0].concat(ye)),ge=Ae(ge),ye=Ae(ye);!ye[0]&&!(ye[1]&128);)ye=ye.slice(1);var xe=[2];pe(xe,ge.length),xe=xe.concat(ge),xe.push(2),pe(xe,ye.length);var _e=xe.concat(ye),$e=[48];return pe($e,_e.length),$e=$e.concat(_e),J.encode($e,me)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var K=requireBn$3(),J=requireHmacDrbg(),ne=requireUtils$1(),oe=requireCurves(),ce=requireBrorand(),ue=ne.assert,Ae=requireKey$1(),pe=requireSignature$1();function ve(me){if(!(this instanceof ve))return new ve(me);typeof me=="string"&&(ue(Object.prototype.hasOwnProperty.call(oe,me),"Unknown curve "+me),me=oe[me]),me instanceof oe.PresetCurve&&(me={curve:me}),this.curve=me.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=me.curve.g,this.g.precompute(me.curve.n.bitLength()+1),this.hash=me.hash||me.curve.hash}return ec=ve,ve.prototype.keyPair=function(ge){return new Ae(this,ge)},ve.prototype.keyFromPrivate=function(ge,ye){return Ae.fromPrivate(this,ge,ye)},ve.prototype.keyFromPublic=function(ge,ye){return Ae.fromPublic(this,ge,ye)},ve.prototype.genKeyPair=function(ge){ge||(ge={});for(var ye=new J({hash:this.hash,pers:ge.pers,persEnc:ge.persEnc||"utf8",entropy:ge.entropy||ce(this.hash.hmacStrength),entropyEnc:ge.entropy&&ge.entropyEnc||"utf8",nonce:this.n.toArray()}),xe=this.n.byteLength(),_e=this.n.sub(new K(2));;){var $e=new K(ye.generate(xe));if(!($e.cmp(_e)>0))return $e.iaddn(1),this.keyFromPrivate($e)}},ve.prototype._truncateToN=function(ge,ye){var xe=ge.byteLength()*8-this.n.bitLength();return xe>0&&(ge=ge.ushrn(xe)),!ye&&ge.cmp(this.n)>=0?ge.sub(this.n):ge},ve.prototype.sign=function(ge,ye,xe,_e){typeof xe=="object"&&(_e=xe,xe=null),_e||(_e={}),ye=this.keyFromPrivate(ye,xe),ge=this._truncateToN(new K(ge,16));for(var $e=this.n.byteLength(),Ie=ye.getPrivate().toArray("be",$e),Fe=ge.toArray("be",$e),ke=new J({hash:this.hash,entropy:Ie,nonce:Fe,pers:_e.pers,persEnc:_e.persEnc||"utf8"}),je=this.n.sub(new K(1)),We=0;;We++){var ze=_e.k?_e.k(We):new K(ke.generate(this.n.byteLength()));if(ze=this._truncateToN(ze,!0),!(ze.cmpn(1)<=0||ze.cmp(je)>=0)){var Xe=this.g.mul(ze);if(!Xe.isInfinity()){var Je=Xe.getX(),nt=Je.umod(this.n);if(nt.cmpn(0)!==0){var et=ze.invm(this.n).mul(nt.mul(ye.getPrivate()).iadd(ge));if(et=et.umod(this.n),et.cmpn(0)!==0){var tt=(Xe.getY().isOdd()?1:0)|(Je.cmp(nt)!==0?2:0);return _e.canonical&&et.cmp(this.nh)>0&&(et=this.n.sub(et),tt^=1),new pe({r:nt,s:et,recoveryParam:tt})}}}}}},ve.prototype.verify=function(ge,ye,xe,_e){ge=this._truncateToN(new K(ge,16)),xe=this.keyFromPublic(xe,_e),ye=new pe(ye,"hex");var $e=ye.r,Ie=ye.s;if($e.cmpn(1)<0||$e.cmp(this.n)>=0||Ie.cmpn(1)<0||Ie.cmp(this.n)>=0)return!1;var Fe=Ie.invm(this.n),ke=Fe.mul(ge).umod(this.n),je=Fe.mul($e).umod(this.n),We;return this.curve._maxwellTrick?(We=this.g.jmulAdd(ke,xe.getPublic(),je),We.isInfinity()?!1:We.eqXToP($e)):(We=this.g.mulAdd(ke,xe.getPublic(),je),We.isInfinity()?!1:We.getX().umod(this.n).cmp($e)===0)},ve.prototype.recoverPubKey=function(me,ge,ye,xe){ue((3&ye)===ye,"The recovery param is more than two bits"),ge=new pe(ge,xe);var _e=this.n,$e=new K(me),Ie=ge.r,Fe=ge.s,ke=ye&1,je=ye>>1;if(Ie.cmp(this.curve.p.umod(this.curve.n))>=0&&je)throw new Error("Unable to find sencond key candinate");je?Ie=this.curve.pointFromX(Ie.add(this.curve.n),ke):Ie=this.curve.pointFromX(Ie,ke);var We=ge.r.invm(_e),ze=_e.sub($e).mul(We).umod(_e),Xe=Fe.mul(We).umod(_e);return this.g.mulAdd(ze,Ie,Xe)},ve.prototype.getKeyRecoveryParam=function(me,ge,ye,xe){if(ge=new pe(ge,xe),ge.recoveryParam!==null)return ge.recoveryParam;for(var _e=0;_e<4;_e++){var $e;try{$e=this.recoverPubKey(me,ge,_e)}catch{continue}if($e.eq(ye))return _e}throw new Error("Unable to find valid recovery factor")},ec}var key$1,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key$1;hasRequiredKey=1;var K=requireUtils$1(),J=K.assert,ne=K.parseBytes,oe=K.cachedProperty;function ce(ue,Ae){this.eddsa=ue,this._secret=ne(Ae.secret),ue.isPoint(Ae.pub)?this._pub=Ae.pub:this._pubBytes=ne(Ae.pub)}return ce.fromPublic=function(Ae,pe){return pe instanceof ce?pe:new ce(Ae,{pub:pe})},ce.fromSecret=function(Ae,pe){return pe instanceof ce?pe:new ce(Ae,{secret:pe})},ce.prototype.secret=function(){return this._secret},oe(ce,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),oe(ce,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),oe(ce,"privBytes",function(){var Ae=this.eddsa,pe=this.hash(),ve=Ae.encodingLength-1,me=pe.slice(0,Ae.encodingLength);return me[0]&=248,me[ve]&=127,me[ve]|=64,me}),oe(ce,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),oe(ce,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),oe(ce,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),ce.prototype.sign=function(Ae){return J(this._secret,"KeyPair can only verify"),this.eddsa.sign(Ae,this)},ce.prototype.verify=function(Ae,pe){return this.eddsa.verify(Ae,pe,this)},ce.prototype.getSecret=function(Ae){return J(this._secret,"KeyPair is public only"),K.encode(this.secret(),Ae)},ce.prototype.getPublic=function(Ae){return K.encode(this.pubBytes(),Ae)},key$1=ce,key$1}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var K=requireBn$3(),J=requireUtils$1(),ne=J.assert,oe=J.cachedProperty,ce=J.parseBytes;function ue(Ae,pe){this.eddsa=Ae,typeof pe!="object"&&(pe=ce(pe)),Array.isArray(pe)&&(ne(pe.length===Ae.encodingLength*2,"Signature has invalid size"),pe={R:pe.slice(0,Ae.encodingLength),S:pe.slice(Ae.encodingLength)}),ne(pe.R&&pe.S,"Signature without R or S"),Ae.isPoint(pe.R)&&(this._R=pe.R),pe.S instanceof K&&(this._S=pe.S),this._Rencoded=Array.isArray(pe.R)?pe.R:pe.Rencoded,this._Sencoded=Array.isArray(pe.S)?pe.S:pe.Sencoded}return oe(ue,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),oe(ue,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),oe(ue,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),oe(ue,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),ue.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},ue.prototype.toHex=function(){return J.encode(this.toBytes(),"hex").toUpperCase()},signature=ue,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var K=requireHash(),J=requireCurves(),ne=requireUtils$1(),oe=ne.assert,ce=ne.parseBytes,ue=requireKey(),Ae=requireSignature();function pe(ve){if(oe(ve==="ed25519","only tested with ed25519 so far"),!(this instanceof pe))return new pe(ve);ve=J[ve].curve,this.curve=ve,this.g=ve.g,this.g.precompute(ve.n.bitLength()+1),this.pointClass=ve.point().constructor,this.encodingLength=Math.ceil(ve.n.bitLength()/8),this.hash=K.sha512}return eddsa=pe,pe.prototype.sign=function(me,ge){me=ce(me);var ye=this.keyFromSecret(ge),xe=this.hashInt(ye.messagePrefix(),me),_e=this.g.mul(xe),$e=this.encodePoint(_e),Ie=this.hashInt($e,ye.pubBytes(),me).mul(ye.priv()),Fe=xe.add(Ie).umod(this.curve.n);return this.makeSignature({R:_e,S:Fe,Rencoded:$e})},pe.prototype.verify=function(me,ge,ye){if(me=ce(me),ge=this.makeSignature(ge),ge.S().gte(ge.eddsa.curve.n)||ge.S().isNeg())return!1;var xe=this.keyFromPublic(ye),_e=this.hashInt(ge.Rencoded(),xe.pubBytes(),me),$e=this.g.mul(ge.S()),Ie=ge.R().add(xe.pub().mul(_e));return Ie.eq($e)},pe.prototype.hashInt=function(){for(var me=this.hash(),ge=0;ge<arguments.length;ge++)me.update(arguments[ge]);return ne.intFromLE(me.digest()).umod(this.curve.n)},pe.prototype.keyFromPublic=function(me){return ue.fromPublic(this,me)},pe.prototype.keyFromSecret=function(me){return ue.fromSecret(this,me)},pe.prototype.makeSignature=function(me){return me instanceof Ae?me:new Ae(this,me)},pe.prototype.encodePoint=function(me){var ge=me.getY().toArray("le",this.encodingLength);return ge[this.encodingLength-1]|=me.getX().isOdd()?128:0,ge},pe.prototype.decodePoint=function(me){me=ne.parseBytes(me);var ge=me.length-1,ye=me.slice(0,ge).concat(me[ge]&-129),xe=(me[ge]&128)!==0,_e=ne.intFromLE(ye);return this.curve.pointFromY(_e,xe)},pe.prototype.encodeInt=function(me){return me.toArray("le",this.encodingLength)},pe.prototype.decodeInt=function(me){return ne.intFromLE(me)},pe.prototype.isPoint=function(me){return me instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(K){var J=K;J.version=require$$0.version,J.utils=requireUtils$1(),J.rand=requireBrorand(),J.curve=requireCurve(),J.curves=requireCurves(),J.ec=requireEc(),J.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$9={},asn1$8={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(K){(function(J,ne){function oe(qe,Se){if(!qe)throw new Error(Se||"Assertion failed")}function ce(qe,Se){qe.super_=Se;var Re=function(){};Re.prototype=Se.prototype,qe.prototype=new Re,qe.prototype.constructor=qe}function ue(qe,Se,Re){if(ue.isBN(qe))return qe;this.negative=0,this.words=null,this.length=0,this.red=null,qe!==null&&((Se==="le"||Se==="be")&&(Re=Se,Se=10),this._init(qe||0,Se||10,Re||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(Se){return Se instanceof ue?!0:Se!==null&&typeof Se=="object"&&Se.constructor.wordSize===ue.wordSize&&Array.isArray(Se.words)},ue.max=function(Se,Re){return Se.cmp(Re)>0?Se:Re},ue.min=function(Se,Re){return Se.cmp(Re)<0?Se:Re},ue.prototype._init=function(Se,Re,Be){if(typeof Se=="number")return this._initNumber(Se,Re,Be);if(typeof Se=="object")return this._initArray(Se,Re,Be);Re==="hex"&&(Re=16),oe(Re===(Re|0)&&Re>=2&&Re<=36),Se=Se.toString().replace(/\s+/g,"");var Ne=0;Se[0]==="-"&&(Ne++,this.negative=1),Ne<Se.length&&(Re===16?this._parseHex(Se,Ne,Be):(this._parseBase(Se,Re,Ne),Be==="le"&&this._initArray(this.toArray(),Re,Be)))},ue.prototype._initNumber=function(Se,Re,Be){Se<0&&(this.negative=1,Se=-Se),Se<67108864?(this.words=[Se&67108863],this.length=1):Se<4503599627370496?(this.words=[Se&67108863,Se/67108864&67108863],this.length=2):(oe(Se<9007199254740992),this.words=[Se&67108863,Se/67108864&67108863,1],this.length=3),Be==="le"&&this._initArray(this.toArray(),Re,Be)},ue.prototype._initArray=function(Se,Re,Be){if(oe(typeof Se.length=="number"),Se.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Se.length/3),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue,Ge,Ye=0;if(Be==="be")for(Ne=Se.length-1,Ue=0;Ne>=0;Ne-=3)Ge=Se[Ne]|Se[Ne-1]<<8|Se[Ne-2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);else if(Be==="le")for(Ne=0,Ue=0;Ne<Se.length;Ne+=3)Ge=Se[Ne]|Se[Ne+1]<<8|Se[Ne+2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);return this.strip()};function pe(qe,Se){var Re=qe.charCodeAt(Se);return Re>=65&&Re<=70?Re-55:Re>=97&&Re<=102?Re-87:Re-48&15}function ve(qe,Se,Re){var Be=pe(qe,Re);return Re-1>=Se&&(Be|=pe(qe,Re-1)<<4),Be}ue.prototype._parseHex=function(Se,Re,Be){this.length=Math.ceil((Se.length-Re)/6),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue=0,Ge=0,Ye;if(Be==="be")for(Ne=Se.length-1;Ne>=Re;Ne-=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8;else{var Qe=Se.length-Re;for(Ne=Qe%2===0?Re+1:Re;Ne<Se.length;Ne+=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8}this.strip()};function me(qe,Se,Re,Be){for(var Ne=0,Ue=Math.min(qe.length,Re),Ge=Se;Ge<Ue;Ge++){var Ye=qe.charCodeAt(Ge)-48;Ne*=Be,Ye>=49?Ne+=Ye-49+10:Ye>=17?Ne+=Ye-17+10:Ne+=Ye}return Ne}ue.prototype._parseBase=function(Se,Re,Be){this.words=[0],this.length=1;for(var Ne=0,Ue=1;Ue<=67108863;Ue*=Re)Ne++;Ne--,Ue=Ue/Re|0;for(var Ge=Se.length-Be,Ye=Ge%Ne,Qe=Math.min(Ge,Ge-Ye)+Be,Te=0,Ke=Be;Ke<Qe;Ke+=Ne)Te=me(Se,Ke,Ke+Ne,Re),this.imuln(Ue),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te);if(Ye!==0){var rt=1;for(Te=me(Se,Ke,Se.length,Re),Ke=0;Ke<Ye;Ke++)rt*=Re;this.imuln(rt),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te)}this.strip()},ue.prototype.copy=function(Se){Se.words=new Array(this.length);for(var Re=0;Re<this.length;Re++)Se.words[Re]=this.words[Re];Se.length=this.length,Se.negative=this.negative,Se.red=this.red},ue.prototype.clone=function(){var Se=new ue(null);return this.copy(Se),Se},ue.prototype._expand=function(Se){for(;this.length<Se;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],xe=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(Se,Re){Se=Se||10,Re=Re|0||1;var Be;if(Se===16||Se==="hex"){Be="";for(var Ne=0,Ue=0,Ge=0;Ge<this.length;Ge++){var Ye=this.words[Ge],Qe=((Ye<<Ne|Ue)&16777215).toString(16);Ue=Ye>>>24-Ne&16777215,Ue!==0||Ge!==this.length-1?Be=ge[6-Qe.length]+Qe+Be:Be=Qe+Be,Ne+=2,Ne>=26&&(Ne-=26,Ge--)}for(Ue!==0&&(Be=Ue.toString(16)+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}if(Se===(Se|0)&&Se>=2&&Se<=36){var Te=ye[Se],Ke=xe[Se];Be="";var rt=this.clone();for(rt.negative=0;!rt.isZero();){var it=rt.modn(Ke).toString(Se);rt=rt.idivn(Ke),rt.isZero()?Be=it+Be:Be=ge[Te-it.length]+it+Be}for(this.isZero()&&(Be="0"+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var Se=this.words[0];return this.length===2?Se+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Se+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Se:Se},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(Se,Re){return oe(typeof Ae<"u"),this.toArrayLike(Ae,Se,Re)},ue.prototype.toArray=function(Se,Re){return this.toArrayLike(Array,Se,Re)},ue.prototype.toArrayLike=function(Se,Re,Be){var Ne=this.byteLength(),Ue=Be||Math.max(1,Ne);oe(Ne<=Ue,"byte array longer than desired length"),oe(Ue>0,"Requested array length <= 0"),this.strip();var Ge=Re==="le",Ye=new Se(Ue),Qe,Te,Ke=this.clone();if(Ge){for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Te]=Qe;for(;Te<Ue;Te++)Ye[Te]=0}else{for(Te=0;Te<Ue-Ne;Te++)Ye[Te]=0;for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Ue-Te-1]=Qe}return Ye},Math.clz32?ue.prototype._countBits=function(Se){return 32-Math.clz32(Se)}:ue.prototype._countBits=function(Se){var Re=Se,Be=0;return Re>=4096&&(Be+=13,Re>>>=13),Re>=64&&(Be+=7,Re>>>=7),Re>=8&&(Be+=4,Re>>>=4),Re>=2&&(Be+=2,Re>>>=2),Be+Re},ue.prototype._zeroBits=function(Se){if(Se===0)return 26;var Re=Se,Be=0;return Re&8191||(Be+=13,Re>>>=13),Re&127||(Be+=7,Re>>>=7),Re&15||(Be+=4,Re>>>=4),Re&3||(Be+=2,Re>>>=2),Re&1||Be++,Be},ue.prototype.bitLength=function(){var Se=this.words[this.length-1],Re=this._countBits(Se);return(this.length-1)*26+Re};function _e(qe){for(var Se=new Array(qe.bitLength()),Re=0;Re<Se.length;Re++){var Be=Re/26|0,Ne=Re%26;Se[Re]=(qe.words[Be]&1<<Ne)>>>Ne}return Se}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Se=0,Re=0;Re<this.length;Re++){var Be=this._zeroBits(this.words[Re]);if(Se+=Be,Be!==26)break}return Se},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(Se){return this.negative!==0?this.abs().inotn(Se).iaddn(1):this.clone()},ue.prototype.fromTwos=function(Se){return this.testn(Se-1)?this.notn(Se).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(Se){for(;this.length<Se.length;)this.words[this.length++]=0;for(var Re=0;Re<Se.length;Re++)this.words[Re]=this.words[Re]|Se.words[Re];return this.strip()},ue.prototype.ior=function(Se){return oe((this.negative|Se.negative)===0),this.iuor(Se)},ue.prototype.or=function(Se){return this.length>Se.length?this.clone().ior(Se):Se.clone().ior(this)},ue.prototype.uor=function(Se){return this.length>Se.length?this.clone().iuor(Se):Se.clone().iuor(this)},ue.prototype.iuand=function(Se){var Re;this.length>Se.length?Re=Se:Re=this;for(var Be=0;Be<Re.length;Be++)this.words[Be]=this.words[Be]&Se.words[Be];return this.length=Re.length,this.strip()},ue.prototype.iand=function(Se){return oe((this.negative|Se.negative)===0),this.iuand(Se)},ue.prototype.and=function(Se){return this.length>Se.length?this.clone().iand(Se):Se.clone().iand(this)},ue.prototype.uand=function(Se){return this.length>Se.length?this.clone().iuand(Se):Se.clone().iuand(this)},ue.prototype.iuxor=function(Se){var Re,Be;this.length>Se.length?(Re=this,Be=Se):(Re=Se,Be=this);for(var Ne=0;Ne<Be.length;Ne++)this.words[Ne]=Re.words[Ne]^Be.words[Ne];if(this!==Re)for(;Ne<Re.length;Ne++)this.words[Ne]=Re.words[Ne];return this.length=Re.length,this.strip()},ue.prototype.ixor=function(Se){return oe((this.negative|Se.negative)===0),this.iuxor(Se)},ue.prototype.xor=function(Se){return this.length>Se.length?this.clone().ixor(Se):Se.clone().ixor(this)},ue.prototype.uxor=function(Se){return this.length>Se.length?this.clone().iuxor(Se):Se.clone().iuxor(this)},ue.prototype.inotn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Math.ceil(Se/26)|0,Be=Se%26;this._expand(Re),Be>0&&Re--;for(var Ne=0;Ne<Re;Ne++)this.words[Ne]=~this.words[Ne]&67108863;return Be>0&&(this.words[Ne]=~this.words[Ne]&67108863>>26-Be),this.strip()},ue.prototype.notn=function(Se){return this.clone().inotn(Se)},ue.prototype.setn=function(Se,Re){oe(typeof Se=="number"&&Se>=0);var Be=Se/26|0,Ne=Se%26;return this._expand(Be+1),Re?this.words[Be]=this.words[Be]|1<<Ne:this.words[Be]=this.words[Be]&~(1<<Ne),this.strip()},ue.prototype.iadd=function(Se){var Re;if(this.negative!==0&&Se.negative===0)return this.negative=0,Re=this.isub(Se),this.negative^=1,this._normSign();if(this.negative===0&&Se.negative!==0)return Se.negative=0,Re=this.isub(Se),Se.negative=1,Re._normSign();var Be,Ne;this.length>Se.length?(Be=this,Ne=Se):(Be=Se,Ne=this);for(var Ue=0,Ge=0;Ge<Ne.length;Ge++)Re=(Be.words[Ge]|0)+(Ne.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;for(;Ue!==0&&Ge<Be.length;Ge++)Re=(Be.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;if(this.length=Be.length,Ue!==0)this.words[this.length]=Ue,this.length++;else if(Be!==this)for(;Ge<Be.length;Ge++)this.words[Ge]=Be.words[Ge];return this},ue.prototype.add=function(Se){var Re;return Se.negative!==0&&this.negative===0?(Se.negative=0,Re=this.sub(Se),Se.negative^=1,Re):Se.negative===0&&this.negative!==0?(this.negative=0,Re=Se.sub(this),this.negative=1,Re):this.length>Se.length?this.clone().iadd(Se):Se.clone().iadd(this)},ue.prototype.isub=function(Se){if(Se.negative!==0){Se.negative=0;var Re=this.iadd(Se);return Se.negative=1,Re._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Se),this.negative=1,this._normSign();var Be=this.cmp(Se);if(Be===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ne,Ue;Be>0?(Ne=this,Ue=Se):(Ne=Se,Ue=this);for(var Ge=0,Ye=0;Ye<Ue.length;Ye++)Re=(Ne.words[Ye]|0)-(Ue.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;for(;Ge!==0&&Ye<Ne.length;Ye++)Re=(Ne.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;if(Ge===0&&Ye<Ne.length&&Ne!==this)for(;Ye<Ne.length;Ye++)this.words[Ye]=Ne.words[Ye];return this.length=Math.max(this.length,Ye),Ne!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(Se){return this.clone().isub(Se)};function $e(qe,Se,Re){Re.negative=Se.negative^qe.negative;var Be=qe.length+Se.length|0;Re.length=Be,Be=Be-1|0;var Ne=qe.words[0]|0,Ue=Se.words[0]|0,Ge=Ne*Ue,Ye=Ge&67108863,Qe=Ge/67108864|0;Re.words[0]=Ye;for(var Te=1;Te<Be;Te++){for(var Ke=Qe>>>26,rt=Qe&67108863,it=Math.min(Te,Se.length-1),at=Math.max(0,Te-qe.length+1);at<=it;at++){var lt=Te-at|0;Ne=qe.words[lt]|0,Ue=Se.words[at]|0,Ge=Ne*Ue+rt,Ke+=Ge/67108864|0,rt=Ge&67108863}Re.words[Te]=rt|0,Qe=Ke|0}return Qe!==0?Re.words[Te]=Qe|0:Re.length--,Re.strip()}var Ie=function(Se,Re,Be){var Ne=Se.words,Ue=Re.words,Ge=Be.words,Ye=0,Qe,Te,Ke,rt=Ne[0]|0,it=rt&8191,at=rt>>>13,lt=Ne[1]|0,ct=lt&8191,ot=lt>>>13,ft=Ne[2]|0,dt=ft&8191,mt=ft>>>13,kt=Ne[3]|0,wt=kt&8191,Et=kt>>>13,Ot=Ne[4]|0,Rt=Ot&8191,gt=Ot>>>13,$t=Ne[5]|0,pt=$t&8191,vt=$t>>>13,Mt=Ne[6]|0,St=Mt&8191,_t=Mt>>>13,Xt=Ne[7]|0,Tt=Xt&8191,Dt=Xt>>>13,Ht=Ne[8]|0,Bt=Ht&8191,It=Ht>>>13,zt=Ne[9]|0,Pt=zt&8191,Vt=zt>>>13,vr=Ue[0]|0,qt=vr&8191,er=vr>>>13,yr=Ue[1]|0,Lt=yr&8191,jt=yr>>>13,fr=Ue[2]|0,Gt=fr&8191,Jt=fr>>>13,ar=Ue[3]|0,Wt=ar&8191,nr=ar>>>13,Er=Ue[4]|0,Zt=Er&8191,ir=Er>>>13,Ir=Ue[5]|0,tr=Ir&8191,cr=Ir>>>13,Or=Ue[6]|0,sr=Or&8191,dr=Or>>>13,Dr=Ue[7]|0,lr=Dr&8191,hr=Dr>>>13,Yr=Ue[8]|0,ur=Yr&8191,pr=Yr>>>13,Jr=Ue[9]|0,Yt=Jr&8191,or=Jr>>>13;Be.negative=Se.negative^Re.negative,Be.length=19,Qe=Math.imul(it,qt),Te=Math.imul(it,er),Te=Te+Math.imul(at,qt)|0,Ke=Math.imul(at,er);var Fr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,Qe=Math.imul(ct,qt),Te=Math.imul(ct,er),Te=Te+Math.imul(ot,qt)|0,Ke=Math.imul(ot,er),Qe=Qe+Math.imul(it,Lt)|0,Te=Te+Math.imul(it,jt)|0,Te=Te+Math.imul(at,Lt)|0,Ke=Ke+Math.imul(at,jt)|0;var kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(kr>>>26)|0,kr&=67108863,Qe=Math.imul(dt,qt),Te=Math.imul(dt,er),Te=Te+Math.imul(mt,qt)|0,Ke=Math.imul(mt,er),Qe=Qe+Math.imul(ct,Lt)|0,Te=Te+Math.imul(ct,jt)|0,Te=Te+Math.imul(ot,Lt)|0,Ke=Ke+Math.imul(ot,jt)|0,Qe=Qe+Math.imul(it,Gt)|0,Te=Te+Math.imul(it,Jt)|0,Te=Te+Math.imul(at,Gt)|0,Ke=Ke+Math.imul(at,Jt)|0;var Kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,Qe=Math.imul(wt,qt),Te=Math.imul(wt,er),Te=Te+Math.imul(Et,qt)|0,Ke=Math.imul(Et,er),Qe=Qe+Math.imul(dt,Lt)|0,Te=Te+Math.imul(dt,jt)|0,Te=Te+Math.imul(mt,Lt)|0,Ke=Ke+Math.imul(mt,jt)|0,Qe=Qe+Math.imul(ct,Gt)|0,Te=Te+Math.imul(ct,Jt)|0,Te=Te+Math.imul(ot,Gt)|0,Ke=Ke+Math.imul(ot,Jt)|0,Qe=Qe+Math.imul(it,Wt)|0,Te=Te+Math.imul(it,nr)|0,Te=Te+Math.imul(at,Wt)|0,Ke=Ke+Math.imul(at,nr)|0;var cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(cn>>>26)|0,cn&=67108863,Qe=Math.imul(Rt,qt),Te=Math.imul(Rt,er),Te=Te+Math.imul(gt,qt)|0,Ke=Math.imul(gt,er),Qe=Qe+Math.imul(wt,Lt)|0,Te=Te+Math.imul(wt,jt)|0,Te=Te+Math.imul(Et,Lt)|0,Ke=Ke+Math.imul(Et,jt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Te=Te+Math.imul(dt,Jt)|0,Te=Te+Math.imul(mt,Gt)|0,Ke=Ke+Math.imul(mt,Jt)|0,Qe=Qe+Math.imul(ct,Wt)|0,Te=Te+Math.imul(ct,nr)|0,Te=Te+Math.imul(ot,Wt)|0,Ke=Ke+Math.imul(ot,nr)|0,Qe=Qe+Math.imul(it,Zt)|0,Te=Te+Math.imul(it,ir)|0,Te=Te+Math.imul(at,Zt)|0,Ke=Ke+Math.imul(at,ir)|0;var An=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(An>>>26)|0,An&=67108863,Qe=Math.imul(pt,qt),Te=Math.imul(pt,er),Te=Te+Math.imul(vt,qt)|0,Ke=Math.imul(vt,er),Qe=Qe+Math.imul(Rt,Lt)|0,Te=Te+Math.imul(Rt,jt)|0,Te=Te+Math.imul(gt,Lt)|0,Ke=Ke+Math.imul(gt,jt)|0,Qe=Qe+Math.imul(wt,Gt)|0,Te=Te+Math.imul(wt,Jt)|0,Te=Te+Math.imul(Et,Gt)|0,Ke=Ke+Math.imul(Et,Jt)|0,Qe=Qe+Math.imul(dt,Wt)|0,Te=Te+Math.imul(dt,nr)|0,Te=Te+Math.imul(mt,Wt)|0,Ke=Ke+Math.imul(mt,nr)|0,Qe=Qe+Math.imul(ct,Zt)|0,Te=Te+Math.imul(ct,ir)|0,Te=Te+Math.imul(ot,Zt)|0,Ke=Ke+Math.imul(ot,ir)|0,Qe=Qe+Math.imul(it,tr)|0,Te=Te+Math.imul(it,cr)|0,Te=Te+Math.imul(at,tr)|0,Ke=Ke+Math.imul(at,cr)|0;var _n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(_n>>>26)|0,_n&=67108863,Qe=Math.imul(St,qt),Te=Math.imul(St,er),Te=Te+Math.imul(_t,qt)|0,Ke=Math.imul(_t,er),Qe=Qe+Math.imul(pt,Lt)|0,Te=Te+Math.imul(pt,jt)|0,Te=Te+Math.imul(vt,Lt)|0,Ke=Ke+Math.imul(vt,jt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Te=Te+Math.imul(Rt,Jt)|0,Te=Te+Math.imul(gt,Gt)|0,Ke=Ke+Math.imul(gt,Jt)|0,Qe=Qe+Math.imul(wt,Wt)|0,Te=Te+Math.imul(wt,nr)|0,Te=Te+Math.imul(Et,Wt)|0,Ke=Ke+Math.imul(Et,nr)|0,Qe=Qe+Math.imul(dt,Zt)|0,Te=Te+Math.imul(dt,ir)|0,Te=Te+Math.imul(mt,Zt)|0,Ke=Ke+Math.imul(mt,ir)|0,Qe=Qe+Math.imul(ct,tr)|0,Te=Te+Math.imul(ct,cr)|0,Te=Te+Math.imul(ot,tr)|0,Ke=Ke+Math.imul(ot,cr)|0,Qe=Qe+Math.imul(it,sr)|0,Te=Te+Math.imul(it,dr)|0,Te=Te+Math.imul(at,sr)|0,Ke=Ke+Math.imul(at,dr)|0;var wn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(wn>>>26)|0,wn&=67108863,Qe=Math.imul(Tt,qt),Te=Math.imul(Tt,er),Te=Te+Math.imul(Dt,qt)|0,Ke=Math.imul(Dt,er),Qe=Qe+Math.imul(St,Lt)|0,Te=Te+Math.imul(St,jt)|0,Te=Te+Math.imul(_t,Lt)|0,Ke=Ke+Math.imul(_t,jt)|0,Qe=Qe+Math.imul(pt,Gt)|0,Te=Te+Math.imul(pt,Jt)|0,Te=Te+Math.imul(vt,Gt)|0,Ke=Ke+Math.imul(vt,Jt)|0,Qe=Qe+Math.imul(Rt,Wt)|0,Te=Te+Math.imul(Rt,nr)|0,Te=Te+Math.imul(gt,Wt)|0,Ke=Ke+Math.imul(gt,nr)|0,Qe=Qe+Math.imul(wt,Zt)|0,Te=Te+Math.imul(wt,ir)|0,Te=Te+Math.imul(Et,Zt)|0,Ke=Ke+Math.imul(Et,ir)|0,Qe=Qe+Math.imul(dt,tr)|0,Te=Te+Math.imul(dt,cr)|0,Te=Te+Math.imul(mt,tr)|0,Ke=Ke+Math.imul(mt,cr)|0,Qe=Qe+Math.imul(ct,sr)|0,Te=Te+Math.imul(ct,dr)|0,Te=Te+Math.imul(ot,sr)|0,Ke=Ke+Math.imul(ot,dr)|0,Qe=Qe+Math.imul(it,lr)|0,Te=Te+Math.imul(it,hr)|0,Te=Te+Math.imul(at,lr)|0,Ke=Ke+Math.imul(at,hr)|0;var Bn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,Qe=Math.imul(Bt,qt),Te=Math.imul(Bt,er),Te=Te+Math.imul(It,qt)|0,Ke=Math.imul(It,er),Qe=Qe+Math.imul(Tt,Lt)|0,Te=Te+Math.imul(Tt,jt)|0,Te=Te+Math.imul(Dt,Lt)|0,Ke=Ke+Math.imul(Dt,jt)|0,Qe=Qe+Math.imul(St,Gt)|0,Te=Te+Math.imul(St,Jt)|0,Te=Te+Math.imul(_t,Gt)|0,Ke=Ke+Math.imul(_t,Jt)|0,Qe=Qe+Math.imul(pt,Wt)|0,Te=Te+Math.imul(pt,nr)|0,Te=Te+Math.imul(vt,Wt)|0,Ke=Ke+Math.imul(vt,nr)|0,Qe=Qe+Math.imul(Rt,Zt)|0,Te=Te+Math.imul(Rt,ir)|0,Te=Te+Math.imul(gt,Zt)|0,Ke=Ke+Math.imul(gt,ir)|0,Qe=Qe+Math.imul(wt,tr)|0,Te=Te+Math.imul(wt,cr)|0,Te=Te+Math.imul(Et,tr)|0,Ke=Ke+Math.imul(Et,cr)|0,Qe=Qe+Math.imul(dt,sr)|0,Te=Te+Math.imul(dt,dr)|0,Te=Te+Math.imul(mt,sr)|0,Ke=Ke+Math.imul(mt,dr)|0,Qe=Qe+Math.imul(ct,lr)|0,Te=Te+Math.imul(ct,hr)|0,Te=Te+Math.imul(ot,lr)|0,Ke=Ke+Math.imul(ot,hr)|0,Qe=Qe+Math.imul(it,ur)|0,Te=Te+Math.imul(it,pr)|0,Te=Te+Math.imul(at,ur)|0,Ke=Ke+Math.imul(at,pr)|0;var On=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(On>>>26)|0,On&=67108863,Qe=Math.imul(Pt,qt),Te=Math.imul(Pt,er),Te=Te+Math.imul(Vt,qt)|0,Ke=Math.imul(Vt,er),Qe=Qe+Math.imul(Bt,Lt)|0,Te=Te+Math.imul(Bt,jt)|0,Te=Te+Math.imul(It,Lt)|0,Ke=Ke+Math.imul(It,jt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Te=Te+Math.imul(Tt,Jt)|0,Te=Te+Math.imul(Dt,Gt)|0,Ke=Ke+Math.imul(Dt,Jt)|0,Qe=Qe+Math.imul(St,Wt)|0,Te=Te+Math.imul(St,nr)|0,Te=Te+Math.imul(_t,Wt)|0,Ke=Ke+Math.imul(_t,nr)|0,Qe=Qe+Math.imul(pt,Zt)|0,Te=Te+Math.imul(pt,ir)|0,Te=Te+Math.imul(vt,Zt)|0,Ke=Ke+Math.imul(vt,ir)|0,Qe=Qe+Math.imul(Rt,tr)|0,Te=Te+Math.imul(Rt,cr)|0,Te=Te+Math.imul(gt,tr)|0,Ke=Ke+Math.imul(gt,cr)|0,Qe=Qe+Math.imul(wt,sr)|0,Te=Te+Math.imul(wt,dr)|0,Te=Te+Math.imul(Et,sr)|0,Ke=Ke+Math.imul(Et,dr)|0,Qe=Qe+Math.imul(dt,lr)|0,Te=Te+Math.imul(dt,hr)|0,Te=Te+Math.imul(mt,lr)|0,Ke=Ke+Math.imul(mt,hr)|0,Qe=Qe+Math.imul(ct,ur)|0,Te=Te+Math.imul(ct,pr)|0,Te=Te+Math.imul(ot,ur)|0,Ke=Ke+Math.imul(ot,pr)|0,Qe=Qe+Math.imul(it,Yt)|0,Te=Te+Math.imul(it,or)|0,Te=Te+Math.imul(at,Yt)|0,Ke=Ke+Math.imul(at,or)|0;var In=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(In>>>26)|0,In&=67108863,Qe=Math.imul(Pt,Lt),Te=Math.imul(Pt,jt),Te=Te+Math.imul(Vt,Lt)|0,Ke=Math.imul(Vt,jt),Qe=Qe+Math.imul(Bt,Gt)|0,Te=Te+Math.imul(Bt,Jt)|0,Te=Te+Math.imul(It,Gt)|0,Ke=Ke+Math.imul(It,Jt)|0,Qe=Qe+Math.imul(Tt,Wt)|0,Te=Te+Math.imul(Tt,nr)|0,Te=Te+Math.imul(Dt,Wt)|0,Ke=Ke+Math.imul(Dt,nr)|0,Qe=Qe+Math.imul(St,Zt)|0,Te=Te+Math.imul(St,ir)|0,Te=Te+Math.imul(_t,Zt)|0,Ke=Ke+Math.imul(_t,ir)|0,Qe=Qe+Math.imul(pt,tr)|0,Te=Te+Math.imul(pt,cr)|0,Te=Te+Math.imul(vt,tr)|0,Ke=Ke+Math.imul(vt,cr)|0,Qe=Qe+Math.imul(Rt,sr)|0,Te=Te+Math.imul(Rt,dr)|0,Te=Te+Math.imul(gt,sr)|0,Ke=Ke+Math.imul(gt,dr)|0,Qe=Qe+Math.imul(wt,lr)|0,Te=Te+Math.imul(wt,hr)|0,Te=Te+Math.imul(Et,lr)|0,Ke=Ke+Math.imul(Et,hr)|0,Qe=Qe+Math.imul(dt,ur)|0,Te=Te+Math.imul(dt,pr)|0,Te=Te+Math.imul(mt,ur)|0,Ke=Ke+Math.imul(mt,pr)|0,Qe=Qe+Math.imul(ct,Yt)|0,Te=Te+Math.imul(ct,or)|0,Te=Te+Math.imul(ot,Yt)|0,Ke=Ke+Math.imul(ot,or)|0;var Ln=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,Qe=Math.imul(Pt,Gt),Te=Math.imul(Pt,Jt),Te=Te+Math.imul(Vt,Gt)|0,Ke=Math.imul(Vt,Jt),Qe=Qe+Math.imul(Bt,Wt)|0,Te=Te+Math.imul(Bt,nr)|0,Te=Te+Math.imul(It,Wt)|0,Ke=Ke+Math.imul(It,nr)|0,Qe=Qe+Math.imul(Tt,Zt)|0,Te=Te+Math.imul(Tt,ir)|0,Te=Te+Math.imul(Dt,Zt)|0,Ke=Ke+Math.imul(Dt,ir)|0,Qe=Qe+Math.imul(St,tr)|0,Te=Te+Math.imul(St,cr)|0,Te=Te+Math.imul(_t,tr)|0,Ke=Ke+Math.imul(_t,cr)|0,Qe=Qe+Math.imul(pt,sr)|0,Te=Te+Math.imul(pt,dr)|0,Te=Te+Math.imul(vt,sr)|0,Ke=Ke+Math.imul(vt,dr)|0,Qe=Qe+Math.imul(Rt,lr)|0,Te=Te+Math.imul(Rt,hr)|0,Te=Te+Math.imul(gt,lr)|0,Ke=Ke+Math.imul(gt,hr)|0,Qe=Qe+Math.imul(wt,ur)|0,Te=Te+Math.imul(wt,pr)|0,Te=Te+Math.imul(Et,ur)|0,Ke=Ke+Math.imul(Et,pr)|0,Qe=Qe+Math.imul(dt,Yt)|0,Te=Te+Math.imul(dt,or)|0,Te=Te+Math.imul(mt,Yt)|0,Ke=Ke+Math.imul(mt,or)|0;var Tn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Qe=Math.imul(Pt,Wt),Te=Math.imul(Pt,nr),Te=Te+Math.imul(Vt,Wt)|0,Ke=Math.imul(Vt,nr),Qe=Qe+Math.imul(Bt,Zt)|0,Te=Te+Math.imul(Bt,ir)|0,Te=Te+Math.imul(It,Zt)|0,Ke=Ke+Math.imul(It,ir)|0,Qe=Qe+Math.imul(Tt,tr)|0,Te=Te+Math.imul(Tt,cr)|0,Te=Te+Math.imul(Dt,tr)|0,Ke=Ke+Math.imul(Dt,cr)|0,Qe=Qe+Math.imul(St,sr)|0,Te=Te+Math.imul(St,dr)|0,Te=Te+Math.imul(_t,sr)|0,Ke=Ke+Math.imul(_t,dr)|0,Qe=Qe+Math.imul(pt,lr)|0,Te=Te+Math.imul(pt,hr)|0,Te=Te+Math.imul(vt,lr)|0,Ke=Ke+Math.imul(vt,hr)|0,Qe=Qe+Math.imul(Rt,ur)|0,Te=Te+Math.imul(Rt,pr)|0,Te=Te+Math.imul(gt,ur)|0,Ke=Ke+Math.imul(gt,pr)|0,Qe=Qe+Math.imul(wt,Yt)|0,Te=Te+Math.imul(wt,or)|0,Te=Te+Math.imul(Et,Yt)|0,Ke=Ke+Math.imul(Et,or)|0;var Rn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Qe=Math.imul(Pt,Zt),Te=Math.imul(Pt,ir),Te=Te+Math.imul(Vt,Zt)|0,Ke=Math.imul(Vt,ir),Qe=Qe+Math.imul(Bt,tr)|0,Te=Te+Math.imul(Bt,cr)|0,Te=Te+Math.imul(It,tr)|0,Ke=Ke+Math.imul(It,cr)|0,Qe=Qe+Math.imul(Tt,sr)|0,Te=Te+Math.imul(Tt,dr)|0,Te=Te+Math.imul(Dt,sr)|0,Ke=Ke+Math.imul(Dt,dr)|0,Qe=Qe+Math.imul(St,lr)|0,Te=Te+Math.imul(St,hr)|0,Te=Te+Math.imul(_t,lr)|0,Ke=Ke+Math.imul(_t,hr)|0,Qe=Qe+Math.imul(pt,ur)|0,Te=Te+Math.imul(pt,pr)|0,Te=Te+Math.imul(vt,ur)|0,Ke=Ke+Math.imul(vt,pr)|0,Qe=Qe+Math.imul(Rt,Yt)|0,Te=Te+Math.imul(Rt,or)|0,Te=Te+Math.imul(gt,Yt)|0,Ke=Ke+Math.imul(gt,or)|0;var $n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+($n>>>26)|0,$n&=67108863,Qe=Math.imul(Pt,tr),Te=Math.imul(Pt,cr),Te=Te+Math.imul(Vt,tr)|0,Ke=Math.imul(Vt,cr),Qe=Qe+Math.imul(Bt,sr)|0,Te=Te+Math.imul(Bt,dr)|0,Te=Te+Math.imul(It,sr)|0,Ke=Ke+Math.imul(It,dr)|0,Qe=Qe+Math.imul(Tt,lr)|0,Te=Te+Math.imul(Tt,hr)|0,Te=Te+Math.imul(Dt,lr)|0,Ke=Ke+Math.imul(Dt,hr)|0,Qe=Qe+Math.imul(St,ur)|0,Te=Te+Math.imul(St,pr)|0,Te=Te+Math.imul(_t,ur)|0,Ke=Ke+Math.imul(_t,pr)|0,Qe=Qe+Math.imul(pt,Yt)|0,Te=Te+Math.imul(pt,or)|0,Te=Te+Math.imul(vt,Yt)|0,Ke=Ke+Math.imul(vt,or)|0;var Cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Qe=Math.imul(Pt,sr),Te=Math.imul(Pt,dr),Te=Te+Math.imul(Vt,sr)|0,Ke=Math.imul(Vt,dr),Qe=Qe+Math.imul(Bt,lr)|0,Te=Te+Math.imul(Bt,hr)|0,Te=Te+Math.imul(It,lr)|0,Ke=Ke+Math.imul(It,hr)|0,Qe=Qe+Math.imul(Tt,ur)|0,Te=Te+Math.imul(Tt,pr)|0,Te=Te+Math.imul(Dt,ur)|0,Ke=Ke+Math.imul(Dt,pr)|0,Qe=Qe+Math.imul(St,Yt)|0,Te=Te+Math.imul(St,or)|0,Te=Te+Math.imul(_t,Yt)|0,Ke=Ke+Math.imul(_t,or)|0;var Sn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Qe=Math.imul(Pt,lr),Te=Math.imul(Pt,hr),Te=Te+Math.imul(Vt,lr)|0,Ke=Math.imul(Vt,hr),Qe=Qe+Math.imul(Bt,ur)|0,Te=Te+Math.imul(Bt,pr)|0,Te=Te+Math.imul(It,ur)|0,Ke=Ke+Math.imul(It,pr)|0,Qe=Qe+Math.imul(Tt,Yt)|0,Te=Te+Math.imul(Tt,or)|0,Te=Te+Math.imul(Dt,Yt)|0,Ke=Ke+Math.imul(Dt,or)|0;var gn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(gn>>>26)|0,gn&=67108863,Qe=Math.imul(Pt,ur),Te=Math.imul(Pt,pr),Te=Te+Math.imul(Vt,ur)|0,Ke=Math.imul(Vt,pr),Qe=Qe+Math.imul(Bt,Yt)|0,Te=Te+Math.imul(Bt,or)|0,Te=Te+Math.imul(It,Yt)|0,Ke=Ke+Math.imul(It,or)|0;var Mn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Qe=Math.imul(Pt,Yt),Te=Math.imul(Pt,or),Te=Te+Math.imul(Vt,Yt)|0,Ke=Math.imul(Vt,or);var yn=(Ye+Qe|0)+((Te&8191)<<13)|0;return Ye=(Ke+(Te>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ge[0]=Fr,Ge[1]=kr,Ge[2]=Kr,Ge[3]=cn,Ge[4]=An,Ge[5]=_n,Ge[6]=wn,Ge[7]=Bn,Ge[8]=On,Ge[9]=In,Ge[10]=Ln,Ge[11]=Tn,Ge[12]=Rn,Ge[13]=$n,Ge[14]=Cn,Ge[15]=Sn,Ge[16]=gn,Ge[17]=Mn,Ge[18]=yn,Ye!==0&&(Ge[19]=Ye,Be.length++),Be};Math.imul||(Ie=$e);function Fe(qe,Se,Re){Re.negative=Se.negative^qe.negative,Re.length=qe.length+Se.length;for(var Be=0,Ne=0,Ue=0;Ue<Re.length-1;Ue++){var Ge=Ne;Ne=0;for(var Ye=Be&67108863,Qe=Math.min(Ue,Se.length-1),Te=Math.max(0,Ue-qe.length+1);Te<=Qe;Te++){var Ke=Ue-Te,rt=qe.words[Ke]|0,it=Se.words[Te]|0,at=rt*it,lt=at&67108863;Ge=Ge+(at/67108864|0)|0,lt=lt+Ye|0,Ye=lt&67108863,Ge=Ge+(lt>>>26)|0,Ne+=Ge>>>26,Ge&=67108863}Re.words[Ue]=Ye,Be=Ge,Ge=Ne}return Be!==0?Re.words[Ue]=Be:Re.length--,Re.strip()}function ke(qe,Se,Re){var Be=new je;return Be.mulp(qe,Se,Re)}ue.prototype.mulTo=function(Se,Re){var Be,Ne=this.length+Se.length;return this.length===10&&Se.length===10?Be=Ie(this,Se,Re):Ne<63?Be=$e(this,Se,Re):Ne<1024?Be=Fe(this,Se,Re):Be=ke(this,Se,Re),Be};function je(qe,Se){this.x=qe,this.y=Se}je.prototype.makeRBT=function(Se){for(var Re=new Array(Se),Be=ue.prototype._countBits(Se)-1,Ne=0;Ne<Se;Ne++)Re[Ne]=this.revBin(Ne,Be,Se);return Re},je.prototype.revBin=function(Se,Re,Be){if(Se===0||Se===Be-1)return Se;for(var Ne=0,Ue=0;Ue<Re;Ue++)Ne|=(Se&1)<<Re-Ue-1,Se>>=1;return Ne},je.prototype.permute=function(Se,Re,Be,Ne,Ue,Ge){for(var Ye=0;Ye<Ge;Ye++)Ne[Ye]=Re[Se[Ye]],Ue[Ye]=Be[Se[Ye]]},je.prototype.transform=function(Se,Re,Be,Ne,Ue,Ge){this.permute(Ge,Se,Re,Be,Ne,Ue);for(var Ye=1;Ye<Ue;Ye<<=1)for(var Qe=Ye<<1,Te=Math.cos(2*Math.PI/Qe),Ke=Math.sin(2*Math.PI/Qe),rt=0;rt<Ue;rt+=Qe)for(var it=Te,at=Ke,lt=0;lt<Ye;lt++){var ct=Be[rt+lt],ot=Ne[rt+lt],ft=Be[rt+lt+Ye],dt=Ne[rt+lt+Ye],mt=it*ft-at*dt;dt=it*dt+at*ft,ft=mt,Be[rt+lt]=ct+ft,Ne[rt+lt]=ot+dt,Be[rt+lt+Ye]=ct-ft,Ne[rt+lt+Ye]=ot-dt,lt!==Qe&&(mt=Te*it-Ke*at,at=Te*at+Ke*it,it=mt)}},je.prototype.guessLen13b=function(Se,Re){var Be=Math.max(Re,Se)|1,Ne=Be&1,Ue=0;for(Be=Be/2|0;Be;Be=Be>>>1)Ue++;return 1<<Ue+1+Ne},je.prototype.conjugate=function(Se,Re,Be){if(!(Be<=1))for(var Ne=0;Ne<Be/2;Ne++){var Ue=Se[Ne];Se[Ne]=Se[Be-Ne-1],Se[Be-Ne-1]=Ue,Ue=Re[Ne],Re[Ne]=-Re[Be-Ne-1],Re[Be-Ne-1]=-Ue}},je.prototype.normalize13b=function(Se,Re){for(var Be=0,Ne=0;Ne<Re/2;Ne++){var Ue=Math.round(Se[2*Ne+1]/Re)*8192+Math.round(Se[2*Ne]/Re)+Be;Se[Ne]=Ue&67108863,Ue<67108864?Be=0:Be=Ue/67108864|0}return Se},je.prototype.convert13b=function(Se,Re,Be,Ne){for(var Ue=0,Ge=0;Ge<Re;Ge++)Ue=Ue+(Se[Ge]|0),Be[2*Ge]=Ue&8191,Ue=Ue>>>13,Be[2*Ge+1]=Ue&8191,Ue=Ue>>>13;for(Ge=2*Re;Ge<Ne;++Ge)Be[Ge]=0;oe(Ue===0),oe((Ue&-8192)===0)},je.prototype.stub=function(Se){for(var Re=new Array(Se),Be=0;Be<Se;Be++)Re[Be]=0;return Re},je.prototype.mulp=function(Se,Re,Be){var Ne=2*this.guessLen13b(Se.length,Re.length),Ue=this.makeRBT(Ne),Ge=this.stub(Ne),Ye=new Array(Ne),Qe=new Array(Ne),Te=new Array(Ne),Ke=new Array(Ne),rt=new Array(Ne),it=new Array(Ne),at=Be.words;at.length=Ne,this.convert13b(Se.words,Se.length,Ye,Ne),this.convert13b(Re.words,Re.length,Ke,Ne),this.transform(Ye,Ge,Qe,Te,Ne,Ue),this.transform(Ke,Ge,rt,it,Ne,Ue);for(var lt=0;lt<Ne;lt++){var ct=Qe[lt]*rt[lt]-Te[lt]*it[lt];Te[lt]=Qe[lt]*it[lt]+Te[lt]*rt[lt],Qe[lt]=ct}return this.conjugate(Qe,Te,Ne),this.transform(Qe,Te,at,Ge,Ne,Ue),this.conjugate(at,Ge,Ne),this.normalize13b(at,Ne),Be.negative=Se.negative^Re.negative,Be.length=Se.length+Re.length,Be.strip()},ue.prototype.mul=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),this.mulTo(Se,Re)},ue.prototype.mulf=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),ke(this,Se,Re)},ue.prototype.imul=function(Se){return this.clone().mulTo(Se,this)},ue.prototype.imuln=function(Se){oe(typeof Se=="number"),oe(Se<67108864);for(var Re=0,Be=0;Be<this.length;Be++){var Ne=(this.words[Be]|0)*Se,Ue=(Ne&67108863)+(Re&67108863);Re>>=26,Re+=Ne/67108864|0,Re+=Ue>>>26,this.words[Be]=Ue&67108863}return Re!==0&&(this.words[Be]=Re,this.length++),this},ue.prototype.muln=function(Se){return this.clone().imuln(Se)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(Se){var Re=_e(Se);if(Re.length===0)return new ue(1);for(var Be=this,Ne=0;Ne<Re.length&&Re[Ne]===0;Ne++,Be=Be.sqr());if(++Ne<Re.length)for(var Ue=Be.sqr();Ne<Re.length;Ne++,Ue=Ue.sqr())Re[Ne]!==0&&(Be=Be.mul(Ue));return Be},ue.prototype.iushln=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=67108863>>>26-Re<<26-Re,Ue;if(Re!==0){var Ge=0;for(Ue=0;Ue<this.length;Ue++){var Ye=this.words[Ue]&Ne,Qe=(this.words[Ue]|0)-Ye<<Re;this.words[Ue]=Qe|Ge,Ge=Ye>>>26-Re}Ge&&(this.words[Ue]=Ge,this.length++)}if(Be!==0){for(Ue=this.length-1;Ue>=0;Ue--)this.words[Ue+Be]=this.words[Ue];for(Ue=0;Ue<Be;Ue++)this.words[Ue]=0;this.length+=Be}return this.strip()},ue.prototype.ishln=function(Se){return oe(this.negative===0),this.iushln(Se)},ue.prototype.iushrn=function(Se,Re,Be){oe(typeof Se=="number"&&Se>=0);var Ne;Re?Ne=(Re-Re%26)/26:Ne=0;var Ue=Se%26,Ge=Math.min((Se-Ue)/26,this.length),Ye=67108863^67108863>>>Ue<<Ue,Qe=Be;if(Ne-=Ge,Ne=Math.max(0,Ne),Qe){for(var Te=0;Te<Ge;Te++)Qe.words[Te]=this.words[Te];Qe.length=Ge}if(Ge!==0)if(this.length>Ge)for(this.length-=Ge,Te=0;Te<this.length;Te++)this.words[Te]=this.words[Te+Ge];else this.words[0]=0,this.length=1;var Ke=0;for(Te=this.length-1;Te>=0&&(Ke!==0||Te>=Ne);Te--){var rt=this.words[Te]|0;this.words[Te]=Ke<<26-Ue|rt>>>Ue,Ke=rt&Ye}return Qe&&Ke!==0&&(Qe.words[Qe.length++]=Ke),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(Se,Re,Be){return oe(this.negative===0),this.iushrn(Se,Re,Be)},ue.prototype.shln=function(Se){return this.clone().ishln(Se)},ue.prototype.ushln=function(Se){return this.clone().iushln(Se)},ue.prototype.shrn=function(Se){return this.clone().ishrn(Se)},ue.prototype.ushrn=function(Se){return this.clone().iushrn(Se)},ue.prototype.testn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return!1;var Ue=this.words[Be];return!!(Ue&Ne)},ue.prototype.imaskn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Be)return this;if(Re!==0&&Be++,this.length=Math.min(Be,this.length),Re!==0){var Ne=67108863^67108863>>>Re<<Re;this.words[this.length-1]&=Ne}return this.strip()},ue.prototype.maskn=function(Se){return this.clone().imaskn(Se)},ue.prototype.iaddn=function(Se){return oe(typeof Se=="number"),oe(Se<67108864),Se<0?this.isubn(-Se):this.negative!==0?this.length===1&&(this.words[0]|0)<Se?(this.words[0]=Se-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Se),this.negative=1,this):this._iaddn(Se)},ue.prototype._iaddn=function(Se){this.words[0]+=Se;for(var Re=0;Re<this.length&&this.words[Re]>=67108864;Re++)this.words[Re]-=67108864,Re===this.length-1?this.words[Re+1]=1:this.words[Re+1]++;return this.length=Math.max(this.length,Re+1),this},ue.prototype.isubn=function(Se){if(oe(typeof Se=="number"),oe(Se<67108864),Se<0)return this.iaddn(-Se);if(this.negative!==0)return this.negative=0,this.iaddn(Se),this.negative=1,this;if(this.words[0]-=Se,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Re=0;Re<this.length&&this.words[Re]<0;Re++)this.words[Re]+=67108864,this.words[Re+1]-=1;return this.strip()},ue.prototype.addn=function(Se){return this.clone().iaddn(Se)},ue.prototype.subn=function(Se){return this.clone().isubn(Se)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(Se,Re,Be){var Ne=Se.length+Be,Ue;this._expand(Ne);var Ge,Ye=0;for(Ue=0;Ue<Se.length;Ue++){Ge=(this.words[Ue+Be]|0)+Ye;var Qe=(Se.words[Ue]|0)*Re;Ge-=Qe&67108863,Ye=(Ge>>26)-(Qe/67108864|0),this.words[Ue+Be]=Ge&67108863}for(;Ue<this.length-Be;Ue++)Ge=(this.words[Ue+Be]|0)+Ye,Ye=Ge>>26,this.words[Ue+Be]=Ge&67108863;if(Ye===0)return this.strip();for(oe(Ye===-1),Ye=0,Ue=0;Ue<this.length;Ue++)Ge=-(this.words[Ue]|0)+Ye,Ye=Ge>>26,this.words[Ue]=Ge&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(Se,Re){var Be=this.length-Se.length,Ne=this.clone(),Ue=Se,Ge=Ue.words[Ue.length-1]|0,Ye=this._countBits(Ge);Be=26-Ye,Be!==0&&(Ue=Ue.ushln(Be),Ne.iushln(Be),Ge=Ue.words[Ue.length-1]|0);var Qe=Ne.length-Ue.length,Te;if(Re!=="mod"){Te=new ue(null),Te.length=Qe+1,Te.words=new Array(Te.length);for(var Ke=0;Ke<Te.length;Ke++)Te.words[Ke]=0}var rt=Ne.clone()._ishlnsubmul(Ue,1,Qe);rt.negative===0&&(Ne=rt,Te&&(Te.words[Qe]=1));for(var it=Qe-1;it>=0;it--){var at=(Ne.words[Ue.length+it]|0)*67108864+(Ne.words[Ue.length+it-1]|0);for(at=Math.min(at/Ge|0,67108863),Ne._ishlnsubmul(Ue,at,it);Ne.negative!==0;)at--,Ne.negative=0,Ne._ishlnsubmul(Ue,1,it),Ne.isZero()||(Ne.negative^=1);Te&&(Te.words[it]=at)}return Te&&Te.strip(),Ne.strip(),Re!=="div"&&Be!==0&&Ne.iushrn(Be),{div:Te||null,mod:Ne}},ue.prototype.divmod=function(Se,Re,Be){if(oe(!Se.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ne,Ue,Ge;return this.negative!==0&&Se.negative===0?(Ge=this.neg().divmod(Se,Re),Re!=="mod"&&(Ne=Ge.div.neg()),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.iadd(Se)),{div:Ne,mod:Ue}):this.negative===0&&Se.negative!==0?(Ge=this.divmod(Se.neg(),Re),Re!=="mod"&&(Ne=Ge.div.neg()),{div:Ne,mod:Ge.mod}):this.negative&Se.negative?(Ge=this.neg().divmod(Se.neg(),Re),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.isub(Se)),{div:Ge.div,mod:Ue}):Se.length>this.length||this.cmp(Se)<0?{div:new ue(0),mod:this}:Se.length===1?Re==="div"?{div:this.divn(Se.words[0]),mod:null}:Re==="mod"?{div:null,mod:new ue(this.modn(Se.words[0]))}:{div:this.divn(Se.words[0]),mod:new ue(this.modn(Se.words[0]))}:this._wordDiv(Se,Re)},ue.prototype.div=function(Se){return this.divmod(Se,"div",!1).div},ue.prototype.mod=function(Se){return this.divmod(Se,"mod",!1).mod},ue.prototype.umod=function(Se){return this.divmod(Se,"mod",!0).mod},ue.prototype.divRound=function(Se){var Re=this.divmod(Se);if(Re.mod.isZero())return Re.div;var Be=Re.div.negative!==0?Re.mod.isub(Se):Re.mod,Ne=Se.ushrn(1),Ue=Se.andln(1),Ge=Be.cmp(Ne);return Ge<0||Ue===1&&Ge===0?Re.div:Re.div.negative!==0?Re.div.isubn(1):Re.div.iaddn(1)},ue.prototype.modn=function(Se){oe(Se<=67108863);for(var Re=(1<<26)%Se,Be=0,Ne=this.length-1;Ne>=0;Ne--)Be=(Re*Be+(this.words[Ne]|0))%Se;return Be},ue.prototype.idivn=function(Se){oe(Se<=67108863);for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=(this.words[Be]|0)+Re*67108864;this.words[Be]=Ne/Se|0,Re=Ne%Se}return this.strip()},ue.prototype.divn=function(Se){return this.clone().idivn(Se)},ue.prototype.egcd=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=new ue(0),Ye=new ue(1),Qe=0;Re.isEven()&&Be.isEven();)Re.iushrn(1),Be.iushrn(1),++Qe;for(var Te=Be.clone(),Ke=Re.clone();!Re.isZero();){for(var rt=0,it=1;!(Re.words[0]&it)&&rt<26;++rt,it<<=1);if(rt>0)for(Re.iushrn(rt);rt-- >0;)(Ne.isOdd()||Ue.isOdd())&&(Ne.iadd(Te),Ue.isub(Ke)),Ne.iushrn(1),Ue.iushrn(1);for(var at=0,lt=1;!(Be.words[0]&lt)&&at<26;++at,lt<<=1);if(at>0)for(Be.iushrn(at);at-- >0;)(Ge.isOdd()||Ye.isOdd())&&(Ge.iadd(Te),Ye.isub(Ke)),Ge.iushrn(1),Ye.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ge),Ue.isub(Ye)):(Be.isub(Re),Ge.isub(Ne),Ye.isub(Ue))}return{a:Ge,b:Ye,gcd:Be.iushln(Qe)}},ue.prototype._invmp=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=Be.clone();Re.cmpn(1)>0&&Be.cmpn(1)>0;){for(var Ye=0,Qe=1;!(Re.words[0]&Qe)&&Ye<26;++Ye,Qe<<=1);if(Ye>0)for(Re.iushrn(Ye);Ye-- >0;)Ne.isOdd()&&Ne.iadd(Ge),Ne.iushrn(1);for(var Te=0,Ke=1;!(Be.words[0]&Ke)&&Te<26;++Te,Ke<<=1);if(Te>0)for(Be.iushrn(Te);Te-- >0;)Ue.isOdd()&&Ue.iadd(Ge),Ue.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ue)):(Be.isub(Re),Ue.isub(Ne))}var rt;return Re.cmpn(1)===0?rt=Ne:rt=Ue,rt.cmpn(0)<0&&rt.iadd(Se),rt},ue.prototype.gcd=function(Se){if(this.isZero())return Se.abs();if(Se.isZero())return this.abs();var Re=this.clone(),Be=Se.clone();Re.negative=0,Be.negative=0;for(var Ne=0;Re.isEven()&&Be.isEven();Ne++)Re.iushrn(1),Be.iushrn(1);do{for(;Re.isEven();)Re.iushrn(1);for(;Be.isEven();)Be.iushrn(1);var Ue=Re.cmp(Be);if(Ue<0){var Ge=Re;Re=Be,Be=Ge}else if(Ue===0||Be.cmpn(1)===0)break;Re.isub(Be)}while(!0);return Be.iushln(Ne)},ue.prototype.invm=function(Se){return this.egcd(Se).a.umod(Se)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(Se){return this.words[0]&Se},ue.prototype.bincn=function(Se){oe(typeof Se=="number");var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return this._expand(Be+1),this.words[Be]|=Ne,this;for(var Ue=Ne,Ge=Be;Ue!==0&&Ge<this.length;Ge++){var Ye=this.words[Ge]|0;Ye+=Ue,Ue=Ye>>>26,Ye&=67108863,this.words[Ge]=Ye}return Ue!==0&&(this.words[Ge]=Ue,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(Se){var Re=Se<0;if(this.negative!==0&&!Re)return-1;if(this.negative===0&&Re)return 1;this.strip();var Be;if(this.length>1)Be=1;else{Re&&(Se=-Se),oe(Se<=67108863,"Number is too big");var Ne=this.words[0]|0;Be=Ne===Se?0:Ne<Se?-1:1}return this.negative!==0?-Be|0:Be},ue.prototype.cmp=function(Se){if(this.negative!==0&&Se.negative===0)return-1;if(this.negative===0&&Se.negative!==0)return 1;var Re=this.ucmp(Se);return this.negative!==0?-Re|0:Re},ue.prototype.ucmp=function(Se){if(this.length>Se.length)return 1;if(this.length<Se.length)return-1;for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=this.words[Be]|0,Ue=Se.words[Be]|0;if(Ne!==Ue){Ne<Ue?Re=-1:Ne>Ue&&(Re=1);break}}return Re},ue.prototype.gtn=function(Se){return this.cmpn(Se)===1},ue.prototype.gt=function(Se){return this.cmp(Se)===1},ue.prototype.gten=function(Se){return this.cmpn(Se)>=0},ue.prototype.gte=function(Se){return this.cmp(Se)>=0},ue.prototype.ltn=function(Se){return this.cmpn(Se)===-1},ue.prototype.lt=function(Se){return this.cmp(Se)===-1},ue.prototype.lten=function(Se){return this.cmpn(Se)<=0},ue.prototype.lte=function(Se){return this.cmp(Se)<=0},ue.prototype.eqn=function(Se){return this.cmpn(Se)===0},ue.prototype.eq=function(Se){return this.cmp(Se)===0},ue.red=function(Se){return new tt(Se)},ue.prototype.toRed=function(Se){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),Se.convertTo(this)._forceRed(Se)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(Se){return this.red=Se,this},ue.prototype.forceRed=function(Se){return oe(!this.red,"Already a number in reduction context"),this._forceRed(Se)},ue.prototype.redAdd=function(Se){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,Se)},ue.prototype.redIAdd=function(Se){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Se)},ue.prototype.redSub=function(Se){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,Se)},ue.prototype.redISub=function(Se){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,Se)},ue.prototype.redShl=function(Se){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,Se)},ue.prototype.redMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.mul(this,Se)},ue.prototype.redIMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.imul(this,Se)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(Se){return oe(this.red&&!Se.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Se)};var We={k256:null,p224:null,p192:null,p25519:null};function ze(qe,Se){this.name=qe,this.p=new ue(Se,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var Se=new ue(null);return Se.words=new Array(Math.ceil(this.n/13)),Se},ze.prototype.ireduce=function(Se){var Re=Se,Be;do this.split(Re,this.tmp),Re=this.imulK(Re),Re=Re.iadd(this.tmp),Be=Re.bitLength();while(Be>this.n);var Ne=Be<this.n?-1:Re.ucmp(this.p);return Ne===0?(Re.words[0]=0,Re.length=1):Ne>0?Re.isub(this.p):Re.strip!==void 0?Re.strip():Re._strip(),Re},ze.prototype.split=function(Se,Re){Se.iushrn(this.n,0,Re)},ze.prototype.imulK=function(Se){return Se.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(Se,Re){for(var Be=4194303,Ne=Math.min(Se.length,9),Ue=0;Ue<Ne;Ue++)Re.words[Ue]=Se.words[Ue];if(Re.length=Ne,Se.length<=9){Se.words[0]=0,Se.length=1;return}var Ge=Se.words[9];for(Re.words[Re.length++]=Ge&Be,Ue=10;Ue<Se.length;Ue++){var Ye=Se.words[Ue]|0;Se.words[Ue-10]=(Ye&Be)<<4|Ge>>>22,Ge=Ye}Ge>>>=22,Se.words[Ue-10]=Ge,Ge===0&&Se.length>10?Se.length-=10:Se.length-=9},Xe.prototype.imulK=function(Se){Se.words[Se.length]=0,Se.words[Se.length+1]=0,Se.length+=2;for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=Se.words[Be]|0;Re+=Ne*977,Se.words[Be]=Re&67108863,Re=Ne*64+(Re/67108864|0)}return Se.words[Se.length-1]===0&&(Se.length--,Se.words[Se.length-1]===0&&Se.length--),Se};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function nt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(nt,ze);function et(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(et,ze),et.prototype.imulK=function(Se){for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=(Se.words[Be]|0)*19+Re,Ue=Ne&67108863;Ne>>>=26,Se.words[Be]=Ue,Re=Ne}return Re!==0&&(Se.words[Se.length++]=Re),Se},ue._prime=function(Se){if(We[Se])return We[Se];var Re;if(Se==="k256")Re=new Xe;else if(Se==="p224")Re=new Je;else if(Se==="p192")Re=new nt;else if(Se==="p25519")Re=new et;else throw new Error("Unknown prime "+Se);return We[Se]=Re,Re};function tt(qe){if(typeof qe=="string"){var Se=ue._prime(qe);this.m=Se.p,this.prime=Se}else oe(qe.gtn(1),"modulus must be greater than 1"),this.m=qe,this.prime=null}tt.prototype._verify1=function(Se){oe(Se.negative===0,"red works only with positives"),oe(Se.red,"red works only with red numbers")},tt.prototype._verify2=function(Se,Re){oe((Se.negative|Re.negative)===0,"red works only with positives"),oe(Se.red&&Se.red===Re.red,"red works only with red numbers")},tt.prototype.imod=function(Se){return this.prime?this.prime.ireduce(Se)._forceRed(this):Se.umod(this.m)._forceRed(this)},tt.prototype.neg=function(Se){return Se.isZero()?Se.clone():this.m.sub(Se)._forceRed(this)},tt.prototype.add=function(Se,Re){this._verify2(Se,Re);var Be=Se.add(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be._forceRed(this)},tt.prototype.iadd=function(Se,Re){this._verify2(Se,Re);var Be=Se.iadd(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be},tt.prototype.sub=function(Se,Re){this._verify2(Se,Re);var Be=Se.sub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be._forceRed(this)},tt.prototype.isub=function(Se,Re){this._verify2(Se,Re);var Be=Se.isub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be},tt.prototype.shl=function(Se,Re){return this._verify1(Se),this.imod(Se.ushln(Re))},tt.prototype.imul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.imul(Re))},tt.prototype.mul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.mul(Re))},tt.prototype.isqr=function(Se){return this.imul(Se,Se.clone())},tt.prototype.sqr=function(Se){return this.mul(Se,Se)},tt.prototype.sqrt=function(Se){if(Se.isZero())return Se.clone();var Re=this.m.andln(3);if(oe(Re%2===1),Re===3){var Be=this.m.add(new ue(1)).iushrn(2);return this.pow(Se,Be)}for(var Ne=this.m.subn(1),Ue=0;!Ne.isZero()&&Ne.andln(1)===0;)Ue++,Ne.iushrn(1);oe(!Ne.isZero());var Ge=new ue(1).toRed(this),Ye=Ge.redNeg(),Qe=this.m.subn(1).iushrn(1),Te=this.m.bitLength();for(Te=new ue(2*Te*Te).toRed(this);this.pow(Te,Qe).cmp(Ye)!==0;)Te.redIAdd(Ye);for(var Ke=this.pow(Te,Ne),rt=this.pow(Se,Ne.addn(1).iushrn(1)),it=this.pow(Se,Ne),at=Ue;it.cmp(Ge)!==0;){for(var lt=it,ct=0;lt.cmp(Ge)!==0;ct++)lt=lt.redSqr();oe(ct<at);var ot=this.pow(Ke,new ue(1).iushln(at-ct-1));rt=rt.redMul(ot),Ke=ot.redSqr(),it=it.redMul(Ke),at=ct}return rt},tt.prototype.invm=function(Se){var Re=Se._invmp(this.m);return Re.negative!==0?(Re.negative=0,this.imod(Re).redNeg()):this.imod(Re)},tt.prototype.pow=function(Se,Re){if(Re.isZero())return new ue(1).toRed(this);if(Re.cmpn(1)===0)return Se.clone();var Be=4,Ne=new Array(1<<Be);Ne[0]=new ue(1).toRed(this),Ne[1]=Se;for(var Ue=2;Ue<Ne.length;Ue++)Ne[Ue]=this.mul(Ne[Ue-1],Se);var Ge=Ne[0],Ye=0,Qe=0,Te=Re.bitLength()%26;for(Te===0&&(Te=26),Ue=Re.length-1;Ue>=0;Ue--){for(var Ke=Re.words[Ue],rt=Te-1;rt>=0;rt--){var it=Ke>>rt&1;if(Ge!==Ne[0]&&(Ge=this.sqr(Ge)),it===0&&Ye===0){Qe=0;continue}Ye<<=1,Ye|=it,Qe++,!(Qe!==Be&&(Ue!==0||rt!==0))&&(Ge=this.mul(Ge,Ne[Ye]),Qe=0,Ye=0)}Te=26}return Ge},tt.prototype.convertTo=function(Se){var Re=Se.umod(this.m);return Re===Se?Re.clone():Re},tt.prototype.convertFrom=function(Se){var Re=Se.clone();return Re.red=null,Re},ue.mont=function(Se){return new st(Se)};function st(qe){tt.call(this,qe),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(st,tt),st.prototype.convertTo=function(Se){return this.imod(Se.ushln(this.shift))},st.prototype.convertFrom=function(Se){var Re=this.imod(Se.mul(this.rinv));return Re.red=null,Re},st.prototype.imul=function(Se,Re){if(Se.isZero()||Re.isZero())return Se.words[0]=0,Se.length=1,Se;var Be=Se.imul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.mul=function(Se,Re){if(Se.isZero()||Re.isZero())return new ue(0)._forceRed(this);var Be=Se.mul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.invm=function(Se){var Re=this.imod(Se._invmp(this.m).mul(this.r2));return Re._forceRed(this)}})(K,commonjsGlobal)}(bn$2)),bn$2.exports}var api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(K,J){if(K.indexOf)return K.indexOf(J);for(var ne=0;ne<K.length;ne++)if(K[ne]===J)return ne;return-1},Object_keys=function(K){if(Object.keys)return Object.keys(K);var J=[];for(var ne in K)J.push(ne);return J},forEach=function(K,J){if(K.forEach)return K.forEach(J);for(var ne=0;ne<K.length;ne++)J(K[ne],ne,K)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(K,J,ne){Object.defineProperty(K,J,{writable:!0,enumerable:!1,configurable:!0,value:ne})}}catch{return function(J,ne,oe){J[ne]=oe}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(J){if(!(this instanceof Script))return new Script(J);this.code=J};Script.prototype.runInContext=function(K){if(!(K instanceof Context))throw new TypeError("needs a 'context' argument.");var J=document.createElement("iframe");J.style||(J.style={}),J.style.display="none",document.body.appendChild(J);var ne=J.contentWindow,oe=ne.eval,ce=ne.execScript;!oe&&ce&&(ce.call(ne,"null"),oe=ne.eval),forEach(Object_keys(K),function(pe){ne[pe]=K[pe]}),forEach(globals,function(pe){K[pe]&&(ne[pe]=K[pe])});var ue=Object_keys(ne),Ae=oe.call(ne,this.code);return forEach(Object_keys(ne),function(pe){(pe in K||indexOf(ue,pe)===-1)&&(K[pe]=ne[pe])}),forEach(globals,function(pe){pe in K||defineProp(K,pe,ne[pe])}),document.body.removeChild(J),Ae},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(K){var J=Script.createContext(K),ne=this.runInContext(J);return K&&forEach(Object_keys(J),function(oe){K[oe]=J[oe]}),ne},forEach(Object_keys(Script.prototype),function(K){exports[K]=Script[K]=function(J){var ne=Script(J);return ne[K].apply(ne,[].slice.call(arguments,1))}}),exports.isContext=function(K){return K instanceof Context},exports.createScript=function(K){return exports.Script(K)},exports.createContext=Script.createContext=function(K){var J=new Context;return typeof K=="object"&&forEach(Object_keys(K),function(ne){J[ne]=K[ne]}),J}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(K){var J=requireAsn1$1(),ne=requireInherits_browser(),oe=K;oe.define=function(Ae,pe){return new ce(Ae,pe)};function ce(ue,Ae){this.name=ue,this.body=Ae,this.decoders={},this.encoders={}}ce.prototype._createNamed=function(Ae){var pe;try{pe=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{pe=function(me){this._initNamed(me)}}return ne(pe,Ae),pe.prototype._initNamed=function(me){Ae.call(this,me)},new pe(this)},ce.prototype._getDecoder=function(Ae){return Ae=Ae||"der",this.decoders.hasOwnProperty(Ae)||(this.decoders[Ae]=this._createNamed(J.decoders[Ae])),this.decoders[Ae]},ce.prototype.decode=function(Ae,pe,ve){return this._getDecoder(pe).decode(Ae,ve)},ce.prototype._getEncoder=function(Ae){return Ae=Ae||"der",this.encoders.hasOwnProperty(Ae)||(this.encoders[Ae]=this._createNamed(J.encoders[Ae])),this.encoders[Ae]},ce.prototype.encode=function(Ae,pe,ve){return this._getEncoder(pe).encode(Ae,ve)}}(api)),api}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var K=requireInherits_browser();function J(oe){this._reporterState={obj:null,path:[],options:oe||{},errors:[]}}reporter.Reporter=J,J.prototype.isError=function(ce){return ce instanceof ne},J.prototype.save=function(){var ce=this._reporterState;return{obj:ce.obj,pathLen:ce.path.length}},J.prototype.restore=function(ce){var ue=this._reporterState;ue.obj=ce.obj,ue.path=ue.path.slice(0,ce.pathLen)},J.prototype.enterKey=function(ce){return this._reporterState.path.push(ce)},J.prototype.exitKey=function(ce){var ue=this._reporterState;ue.path=ue.path.slice(0,ce-1)},J.prototype.leaveKey=function(ce,ue,Ae){var pe=this._reporterState;this.exitKey(ce),pe.obj!==null&&(pe.obj[ue]=Ae)},J.prototype.path=function(){return this._reporterState.path.join("/")},J.prototype.enterObject=function(){var ce=this._reporterState,ue=ce.obj;return ce.obj={},ue},J.prototype.leaveObject=function(ce){var ue=this._reporterState,Ae=ue.obj;return ue.obj=ce,Ae},J.prototype.error=function(ce){var ue,Ae=this._reporterState,pe=ce instanceof ne;if(pe?ue=ce:ue=new ne(Ae.path.map(function(ve){return"["+JSON.stringify(ve)+"]"}).join(""),ce.message||ce,ce.stack),!Ae.options.partial)throw ue;return pe||Ae.errors.push(ue),ue},J.prototype.wrapResult=function(ce){var ue=this._reporterState;return ue.options.partial?{result:this.isError(ce)?null:ce,errors:ue.errors}:ce};function ne(oe,ce){this.path=oe,this.rethrow(ce)}return K(ne,Error),ne.prototype.rethrow=function(ce){if(this.message=ce+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ne),!this.stack)try{throw new Error(this.message)}catch(ue){this.stack=ue.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var K=requireInherits_browser(),J=requireBase().Reporter,ne=require$$0$1.Buffer;function oe(ue,Ae){if(J.call(this,Ae),!ne.isBuffer(ue)){this.error("Input not Buffer");return}this.base=ue,this.offset=0,this.length=ue.length}K(oe,J),buffer.DecoderBuffer=oe,oe.prototype.save=function(){return{offset:this.offset,reporter:J.prototype.save.call(this)}},oe.prototype.restore=function(Ae){var pe=new oe(this.base);return pe.offset=Ae.offset,pe.length=this.offset,this.offset=Ae.offset,J.prototype.restore.call(this,Ae.reporter),pe},oe.prototype.isEmpty=function(){return this.offset===this.length},oe.prototype.readUInt8=function(Ae){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(Ae||"DecoderBuffer overrun")},oe.prototype.skip=function(Ae,pe){if(!(this.offset+Ae<=this.length))return this.error(pe||"DecoderBuffer overrun");var ve=new oe(this.base);return ve._reporterState=this._reporterState,ve.offset=this.offset,ve.length=this.offset+Ae,this.offset+=Ae,ve},oe.prototype.raw=function(Ae){return this.base.slice(Ae?Ae.offset:this.offset,this.length)};function ce(ue,Ae){if(Array.isArray(ue))this.length=0,this.value=ue.map(function(pe){return pe instanceof ce||(pe=new ce(pe,Ae)),this.length+=pe.length,pe},this);else if(typeof ue=="number"){if(!(0<=ue&&ue<=255))return Ae.error("non-byte EncoderBuffer value");this.value=ue,this.length=1}else if(typeof ue=="string")this.value=ue,this.length=ne.byteLength(ue);else if(ne.isBuffer(ue))this.value=ue,this.length=ue.length;else return Ae.error("Unsupported type: "+typeof ue)}return buffer.EncoderBuffer=ce,ce.prototype.join=function(Ae,pe){return Ae||(Ae=new ne(this.length)),pe||(pe=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(ve){ve.join(Ae,pe),pe+=ve.length}):(typeof this.value=="number"?Ae[pe]=this.value:typeof this.value=="string"?Ae.write(this.value,pe):ne.isBuffer(this.value)&&this.value.copy(Ae,pe),pe+=this.length)),Ae},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var K=requireBase().Reporter,J=requireBase().EncoderBuffer,ne=requireBase().DecoderBuffer,oe=requireMinimalisticAssert(),ce=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],ue=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(ce),Ae=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function pe(me,ge){var ye={};this._baseState=ye,ye.enc=me,ye.parent=ge||null,ye.children=null,ye.tag=null,ye.args=null,ye.reverseArgs=null,ye.choice=null,ye.optional=!1,ye.any=!1,ye.obj=!1,ye.use=null,ye.useDecoder=null,ye.key=null,ye.default=null,ye.explicit=null,ye.implicit=null,ye.contains=null,ye.parent||(ye.children=[],this._wrap())}node=pe;var ve=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return pe.prototype.clone=function(){var ge=this._baseState,ye={};ve.forEach(function(_e){ye[_e]=ge[_e]});var xe=new this.constructor(ye.parent);return xe._baseState=ye,xe},pe.prototype._wrap=function(){var ge=this._baseState;ue.forEach(function(ye){this[ye]=function(){var _e=new this.constructor(this);return ge.children.push(_e),_e[ye].apply(_e,arguments)}},this)},pe.prototype._init=function(ge){var ye=this._baseState;oe(ye.parent===null),ge.call(this),ye.children=ye.children.filter(function(xe){return xe._baseState.parent===this},this),oe.equal(ye.children.length,1,"Root node can have only one child")},pe.prototype._useArgs=function(ge){var ye=this._baseState,xe=ge.filter(function(_e){return _e instanceof this.constructor},this);ge=ge.filter(function(_e){return!(_e instanceof this.constructor)},this),xe.length!==0&&(oe(ye.children===null),ye.children=xe,xe.forEach(function(_e){_e._baseState.parent=this},this)),ge.length!==0&&(oe(ye.args===null),ye.args=ge,ye.reverseArgs=ge.map(function(_e){if(typeof _e!="object"||_e.constructor!==Object)return _e;var $e={};return Object.keys(_e).forEach(function(Ie){Ie==(Ie|0)&&(Ie|=0);var Fe=_e[Ie];$e[Fe]=Ie}),$e}))},Ae.forEach(function(me){pe.prototype[me]=function(){var ye=this._baseState;throw new Error(me+" not implemented for encoding: "+ye.enc)}}),ce.forEach(function(me){pe.prototype[me]=function(){var ye=this._baseState,xe=Array.prototype.slice.call(arguments);return oe(ye.tag===null),ye.tag=me,this._useArgs(xe),this}}),pe.prototype.use=function(ge){oe(ge);var ye=this._baseState;return oe(ye.use===null),ye.use=ge,this},pe.prototype.optional=function(){var ge=this._baseState;return ge.optional=!0,this},pe.prototype.def=function(ge){var ye=this._baseState;return oe(ye.default===null),ye.default=ge,ye.optional=!0,this},pe.prototype.explicit=function(ge){var ye=this._baseState;return oe(ye.explicit===null&&ye.implicit===null),ye.explicit=ge,this},pe.prototype.implicit=function(ge){var ye=this._baseState;return oe(ye.explicit===null&&ye.implicit===null),ye.implicit=ge,this},pe.prototype.obj=function(){var ge=this._baseState,ye=Array.prototype.slice.call(arguments);return ge.obj=!0,ye.length!==0&&this._useArgs(ye),this},pe.prototype.key=function(ge){var ye=this._baseState;return oe(ye.key===null),ye.key=ge,this},pe.prototype.any=function(){var ge=this._baseState;return ge.any=!0,this},pe.prototype.choice=function(ge){var ye=this._baseState;return oe(ye.choice===null),ye.choice=ge,this._useArgs(Object.keys(ge).map(function(xe){return ge[xe]})),this},pe.prototype.contains=function(ge){var ye=this._baseState;return oe(ye.use===null),ye.contains=ge,this},pe.prototype._decode=function(ge,ye){var xe=this._baseState;if(xe.parent===null)return ge.wrapResult(xe.children[0]._decode(ge,ye));var _e=xe.default,$e=!0,Ie=null;if(xe.key!==null&&(Ie=ge.enterKey(xe.key)),xe.optional){var Fe=null;if(xe.explicit!==null?Fe=xe.explicit:xe.implicit!==null?Fe=xe.implicit:xe.tag!==null&&(Fe=xe.tag),Fe===null&&!xe.any){var ke=ge.save();try{xe.choice===null?this._decodeGeneric(xe.tag,ge,ye):this._decodeChoice(ge,ye),$e=!0}catch{$e=!1}ge.restore(ke)}else if($e=this._peekTag(ge,Fe,xe.any),ge.isError($e))return $e}var je;if(xe.obj&&$e&&(je=ge.enterObject()),$e){if(xe.explicit!==null){var We=this._decodeTag(ge,xe.explicit);if(ge.isError(We))return We;ge=We}var ze=ge.offset;if(xe.use===null&&xe.choice===null){if(xe.any)var ke=ge.save();var Xe=this._decodeTag(ge,xe.implicit!==null?xe.implicit:xe.tag,xe.any);if(ge.isError(Xe))return Xe;xe.any?_e=ge.raw(ke):ge=Xe}if(ye&&ye.track&&xe.tag!==null&&ye.track(ge.path(),ze,ge.length,"tagged"),ye&&ye.track&&xe.tag!==null&&ye.track(ge.path(),ge.offset,ge.length,"content"),xe.any?_e=_e:xe.choice===null?_e=this._decodeGeneric(xe.tag,ge,ye):_e=this._decodeChoice(ge,ye),ge.isError(_e))return _e;if(!xe.any&&xe.choice===null&&xe.children!==null&&xe.children.forEach(function(et){et._decode(ge,ye)}),xe.contains&&(xe.tag==="octstr"||xe.tag==="bitstr")){var Je=new ne(_e);_e=this._getUse(xe.contains,ge._reporterState.obj)._decode(Je,ye)}}return xe.obj&&$e&&(_e=ge.leaveObject(je)),xe.key!==null&&(_e!==null||$e===!0)?ge.leaveKey(Ie,xe.key,_e):Ie!==null&&ge.exitKey(Ie),_e},pe.prototype._decodeGeneric=function(ge,ye,xe){var _e=this._baseState;return ge==="seq"||ge==="set"?null:ge==="seqof"||ge==="setof"?this._decodeList(ye,ge,_e.args[0],xe):/str$/.test(ge)?this._decodeStr(ye,ge,xe):ge==="objid"&&_e.args?this._decodeObjid(ye,_e.args[0],_e.args[1],xe):ge==="objid"?this._decodeObjid(ye,null,null,xe):ge==="gentime"||ge==="utctime"?this._decodeTime(ye,ge,xe):ge==="null_"?this._decodeNull(ye,xe):ge==="bool"?this._decodeBool(ye,xe):ge==="objDesc"?this._decodeStr(ye,ge,xe):ge==="int"||ge==="enum"?this._decodeInt(ye,_e.args&&_e.args[0],xe):_e.use!==null?this._getUse(_e.use,ye._reporterState.obj)._decode(ye,xe):ye.error("unknown tag: "+ge)},pe.prototype._getUse=function(ge,ye){var xe=this._baseState;return xe.useDecoder=this._use(ge,ye),oe(xe.useDecoder._baseState.parent===null),xe.useDecoder=xe.useDecoder._baseState.children[0],xe.implicit!==xe.useDecoder._baseState.implicit&&(xe.useDecoder=xe.useDecoder.clone(),xe.useDecoder._baseState.implicit=xe.implicit),xe.useDecoder},pe.prototype._decodeChoice=function(ge,ye){var xe=this._baseState,_e=null,$e=!1;return Object.keys(xe.choice).some(function(Ie){var Fe=ge.save(),ke=xe.choice[Ie];try{var je=ke._decode(ge,ye);if(ge.isError(je))return!1;_e={type:Ie,value:je},$e=!0}catch{return ge.restore(Fe),!1}return!0},this),$e?_e:ge.error("Choice not matched")},pe.prototype._createEncoderBuffer=function(ge){return new J(ge,this.reporter)},pe.prototype._encode=function(ge,ye,xe){var _e=this._baseState;if(!(_e.default!==null&&_e.default===ge)){var $e=this._encodeValue(ge,ye,xe);if($e!==void 0&&!this._skipDefault($e,ye,xe))return $e}},pe.prototype._encodeValue=function(ge,ye,xe){var _e=this._baseState;if(_e.parent===null)return _e.children[0]._encode(ge,ye||new K);var ke=null;if(this.reporter=ye,_e.optional&&ge===void 0)if(_e.default!==null)ge=_e.default;else return;var $e=null,Ie=!1;if(_e.any)ke=this._createEncoderBuffer(ge);else if(_e.choice)ke=this._encodeChoice(ge,ye);else if(_e.contains)$e=this._getUse(_e.contains,xe)._encode(ge,ye),Ie=!0;else if(_e.children)$e=_e.children.map(function(ze){if(ze._baseState.tag==="null_")return ze._encode(null,ye,ge);if(ze._baseState.key===null)return ye.error("Child should have a key");var Xe=ye.enterKey(ze._baseState.key);if(typeof ge!="object")return ye.error("Child expected, but input is not object");var Je=ze._encode(ge[ze._baseState.key],ye,ge);return ye.leaveKey(Xe),Je},this).filter(function(ze){return ze}),$e=this._createEncoderBuffer($e);else if(_e.tag==="seqof"||_e.tag==="setof"){if(!(_e.args&&_e.args.length===1))return ye.error("Too many args for : "+_e.tag);if(!Array.isArray(ge))return ye.error("seqof/setof, but data is not Array");var Fe=this.clone();Fe._baseState.implicit=null,$e=this._createEncoderBuffer(ge.map(function(ze){var Xe=this._baseState;return this._getUse(Xe.args[0],ge)._encode(ze,ye)},Fe))}else _e.use!==null?ke=this._getUse(_e.use,xe)._encode(ge,ye):($e=this._encodePrimitive(_e.tag,ge),Ie=!0);var ke;if(!_e.any&&_e.choice===null){var je=_e.implicit!==null?_e.implicit:_e.tag,We=_e.implicit===null?"universal":"context";je===null?_e.use===null&&ye.error("Tag could be omitted only for .use()"):_e.use===null&&(ke=this._encodeComposite(je,Ie,We,$e))}return _e.explicit!==null&&(ke=this._encodeComposite(_e.explicit,!1,"context",ke)),ke},pe.prototype._encodeChoice=function(ge,ye){var xe=this._baseState,_e=xe.choice[ge.type];return _e||oe(!1,ge.type+" not found in "+JSON.stringify(Object.keys(xe.choice))),_e._encode(ge.value,ye)},pe.prototype._encodePrimitive=function(ge,ye){var xe=this._baseState;if(/str$/.test(ge))return this._encodeStr(ye,ge);if(ge==="objid"&&xe.args)return this._encodeObjid(ye,xe.reverseArgs[0],xe.args[1]);if(ge==="objid")return this._encodeObjid(ye,null,null);if(ge==="gentime"||ge==="utctime")return this._encodeTime(ye,ge);if(ge==="null_")return this._encodeNull();if(ge==="int"||ge==="enum")return this._encodeInt(ye,xe.args&&xe.reverseArgs[0]);if(ge==="bool")return this._encodeBool(ye);if(ge==="objDesc")return this._encodeStr(ye,ge);throw new Error("Unsupported tag: "+ge)},pe.prototype._isNumstr=function(ge){return/^[0-9 ]*$/.test(ge)},pe.prototype._isPrintstr=function(ge){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(ge)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(K){var J=K;J.Reporter=requireReporter().Reporter,J.DecoderBuffer=requireBuffer().DecoderBuffer,J.EncoderBuffer=requireBuffer().EncoderBuffer,J.Node=requireNode()}(base)),base}var constants={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(K){var J=requireConstants();K.tagClass={0:"universal",1:"application",2:"context",3:"private"},K.tagClassByName=J._reverse(K.tagClass),K.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},K.tagByName=J._reverse(K.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(K){var J=K;J._reverse=function(oe){var ce={};return Object.keys(oe).forEach(function(ue){(ue|0)==ue&&(ue=ue|0);var Ae=oe[ue];ce[Ae]=ue}),ce},J.der=requireDer$2()}(constants)),constants}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var K=requireInherits_browser(),J=requireAsn1$1(),ne=J.base,oe=J.bignum,ce=J.constants.der;function ue(me){this.enc="der",this.name=me.name,this.entity=me,this.tree=new Ae,this.tree._init(me.body)}der_1$1=ue,ue.prototype.decode=function(ge,ye){return ge instanceof ne.DecoderBuffer||(ge=new ne.DecoderBuffer(ge,ye)),this.tree._decode(ge,ye)};function Ae(me){ne.Node.call(this,"der",me)}K(Ae,ne.Node),Ae.prototype._peekTag=function(ge,ye,xe){if(ge.isEmpty())return!1;var _e=ge.save(),$e=pe(ge,'Failed to peek tag: "'+ye+'"');return ge.isError($e)?$e:(ge.restore(_e),$e.tag===ye||$e.tagStr===ye||$e.tagStr+"of"===ye||xe)},Ae.prototype._decodeTag=function(ge,ye,xe){var _e=pe(ge,'Failed to decode tag of "'+ye+'"');if(ge.isError(_e))return _e;var $e=ve(ge,_e.primitive,'Failed to get length of "'+ye+'"');if(ge.isError($e))return $e;if(!xe&&_e.tag!==ye&&_e.tagStr!==ye&&_e.tagStr+"of"!==ye)return ge.error('Failed to match tag: "'+ye+'"');if(_e.primitive||$e!==null)return ge.skip($e,'Failed to match body of: "'+ye+'"');var Ie=ge.save(),Fe=this._skipUntilEnd(ge,'Failed to skip indefinite length body: "'+this.tag+'"');return ge.isError(Fe)?Fe:($e=ge.offset-Ie.offset,ge.restore(Ie),ge.skip($e,'Failed to match body of: "'+ye+'"'))},Ae.prototype._skipUntilEnd=function(ge,ye){for(;;){var xe=pe(ge,ye);if(ge.isError(xe))return xe;var _e=ve(ge,xe.primitive,ye);if(ge.isError(_e))return _e;var $e;if(xe.primitive||_e!==null?$e=ge.skip(_e):$e=this._skipUntilEnd(ge,ye),ge.isError($e))return $e;if(xe.tagStr==="end")break}},Ae.prototype._decodeList=function(ge,ye,xe,_e){for(var $e=[];!ge.isEmpty();){var Ie=this._peekTag(ge,"end");if(ge.isError(Ie))return Ie;var Fe=xe.decode(ge,"der",_e);if(ge.isError(Fe)&&Ie)break;$e.push(Fe)}return $e},Ae.prototype._decodeStr=function(ge,ye){if(ye==="bitstr"){var xe=ge.readUInt8();return ge.isError(xe)?xe:{unused:xe,data:ge.raw()}}else if(ye==="bmpstr"){var _e=ge.raw();if(_e.length%2===1)return ge.error("Decoding of string type: bmpstr length mismatch");for(var $e="",Ie=0;Ie<_e.length/2;Ie++)$e+=String.fromCharCode(_e.readUInt16BE(Ie*2));return $e}else if(ye==="numstr"){var Fe=ge.raw().toString("ascii");return this._isNumstr(Fe)?Fe:ge.error("Decoding of string type: numstr unsupported characters")}else{if(ye==="octstr")return ge.raw();if(ye==="objDesc")return ge.raw();if(ye==="printstr"){var ke=ge.raw().toString("ascii");return this._isPrintstr(ke)?ke:ge.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(ye)?ge.raw().toString():ge.error("Decoding of string type: "+ye+" unsupported")}},Ae.prototype._decodeObjid=function(ge,ye,xe){for(var _e,$e=[],Ie=0;!ge.isEmpty();){var Fe=ge.readUInt8();Ie<<=7,Ie|=Fe&127,Fe&128||($e.push(Ie),Ie=0)}Fe&128&&$e.push(Ie);var ke=$e[0]/40|0,je=$e[0]%40;if(xe?_e=$e:_e=[ke,je].concat($e.slice(1)),ye){var We=ye[_e.join(" ")];We===void 0&&(We=ye[_e.join(".")]),We!==void 0&&(_e=We)}return _e},Ae.prototype._decodeTime=function(ge,ye){var xe=ge.raw().toString();if(ye==="gentime")var _e=xe.slice(0,4)|0,$e=xe.slice(4,6)|0,Ie=xe.slice(6,8)|0,Fe=xe.slice(8,10)|0,ke=xe.slice(10,12)|0,je=xe.slice(12,14)|0;else if(ye==="utctime"){var _e=xe.slice(0,2)|0,$e=xe.slice(2,4)|0,Ie=xe.slice(4,6)|0,Fe=xe.slice(6,8)|0,ke=xe.slice(8,10)|0,je=xe.slice(10,12)|0;_e<70?_e=2e3+_e:_e=1900+_e}else return ge.error("Decoding "+ye+" time is not supported yet");return Date.UTC(_e,$e-1,Ie,Fe,ke,je,0)},Ae.prototype._decodeNull=function(ge){return null},Ae.prototype._decodeBool=function(ge){var ye=ge.readUInt8();return ge.isError(ye)?ye:ye!==0},Ae.prototype._decodeInt=function(ge,ye){var xe=ge.raw(),_e=new oe(xe);return ye&&(_e=ye[_e.toString(10)]||_e),_e},Ae.prototype._use=function(ge,ye){return typeof ge=="function"&&(ge=ge(ye)),ge._getDecoder("der").tree};function pe(me,ge){var ye=me.readUInt8(ge);if(me.isError(ye))return ye;var xe=ce.tagClass[ye>>6],_e=(ye&32)===0;if((ye&31)===31){var $e=ye;for(ye=0;($e&128)===128;){if($e=me.readUInt8(ge),me.isError($e))return $e;ye<<=7,ye|=$e&127}}else ye&=31;var Ie=ce.tag[ye];return{cls:xe,primitive:_e,tag:ye,tagStr:Ie}}function ve(me,ge,ye){var xe=me.readUInt8(ye);if(me.isError(xe))return xe;if(!ge&&xe===128)return null;if(!(xe&128))return xe;var _e=xe&127;if(_e>4)return me.error("length octect is too long");xe=0;for(var $e=0;$e<_e;$e++){xe<<=8;var Ie=me.readUInt8(ye);if(me.isError(Ie))return Ie;xe|=Ie}return xe}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var K=requireInherits_browser(),J=require$$0$1.Buffer,ne=requireDer$1();function oe(ce){ne.call(this,ce),this.enc="pem"}return K(oe,ne),pem$1=oe,oe.prototype.decode=function(ue,Ae){for(var pe=ue.toString().split(/[\r\n]+/g),ve=Ae.label.toUpperCase(),me=/^-----(BEGIN|END) ([^-]+)-----$/,ge=-1,ye=-1,xe=0;xe<pe.length;xe++){var _e=pe[xe].match(me);if(_e!==null&&_e[2]===ve)if(ge===-1){if(_e[1]!=="BEGIN")break;ge=xe}else{if(_e[1]!=="END")break;ye=xe;break}}if(ge===-1||ye===-1)throw new Error("PEM section not found for: "+ve);var $e=pe.slice(ge+1,ye).join("");$e.replace(/[^a-z0-9\+\/=]+/gi,"");var Ie=new J($e,"base64");return ne.prototype.decode.call(this,Ie,Ae)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(K){var J=K;J.der=requireDer$1(),J.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var K=requireInherits_browser(),J=require$$0$1.Buffer,ne=requireAsn1$1(),oe=ne.base,ce=ne.constants.der;function ue(me){this.enc="der",this.name=me.name,this.entity=me,this.tree=new Ae,this.tree._init(me.body)}der_1=ue,ue.prototype.encode=function(ge,ye){return this.tree._encode(ge,ye).join()};function Ae(me){oe.Node.call(this,"der",me)}K(Ae,oe.Node),Ae.prototype._encodeComposite=function(ge,ye,xe,_e){var $e=ve(ge,ye,xe,this.reporter);if(_e.length<128){var ke=new J(2);return ke[0]=$e,ke[1]=_e.length,this._createEncoderBuffer([ke,_e])}for(var Ie=1,Fe=_e.length;Fe>=256;Fe>>=8)Ie++;var ke=new J(2+Ie);ke[0]=$e,ke[1]=128|Ie;for(var Fe=1+Ie,je=_e.length;je>0;Fe--,je>>=8)ke[Fe]=je&255;return this._createEncoderBuffer([ke,_e])},Ae.prototype._encodeStr=function(ge,ye){if(ye==="bitstr")return this._createEncoderBuffer([ge.unused|0,ge.data]);if(ye==="bmpstr"){for(var xe=new J(ge.length*2),_e=0;_e<ge.length;_e++)xe.writeUInt16BE(ge.charCodeAt(_e),_e*2);return this._createEncoderBuffer(xe)}else return ye==="numstr"?this._isNumstr(ge)?this._createEncoderBuffer(ge):this.reporter.error("Encoding of string type: numstr supports only digits and space"):ye==="printstr"?this._isPrintstr(ge)?this._createEncoderBuffer(ge):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(ye)?this._createEncoderBuffer(ge):ye==="objDesc"?this._createEncoderBuffer(ge):this.reporter.error("Encoding of string type: "+ye+" unsupported")},Ae.prototype._encodeObjid=function(ge,ye,xe){if(typeof ge=="string"){if(!ye)return this.reporter.error("string objid given, but no values map found");if(!ye.hasOwnProperty(ge))return this.reporter.error("objid not found in values map");ge=ye[ge].split(/[\s\.]+/g);for(var _e=0;_e<ge.length;_e++)ge[_e]|=0}else if(Array.isArray(ge)){ge=ge.slice();for(var _e=0;_e<ge.length;_e++)ge[_e]|=0}if(!Array.isArray(ge))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(ge));if(!xe){if(ge[1]>=40)return this.reporter.error("Second objid identifier OOB");ge.splice(0,2,ge[0]*40+ge[1])}for(var $e=0,_e=0;_e<ge.length;_e++){var Ie=ge[_e];for($e++;Ie>=128;Ie>>=7)$e++}for(var Fe=new J($e),ke=Fe.length-1,_e=ge.length-1;_e>=0;_e--){var Ie=ge[_e];for(Fe[ke--]=Ie&127;(Ie>>=7)>0;)Fe[ke--]=128|Ie&127}return this._createEncoderBuffer(Fe)};function pe(me){return me<10?"0"+me:me}Ae.prototype._encodeTime=function(ge,ye){var xe,_e=new Date(ge);return ye==="gentime"?xe=[pe(_e.getFullYear()),pe(_e.getUTCMonth()+1),pe(_e.getUTCDate()),pe(_e.getUTCHours()),pe(_e.getUTCMinutes()),pe(_e.getUTCSeconds()),"Z"].join(""):ye==="utctime"?xe=[pe(_e.getFullYear()%100),pe(_e.getUTCMonth()+1),pe(_e.getUTCDate()),pe(_e.getUTCHours()),pe(_e.getUTCMinutes()),pe(_e.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+ye+" time is not supported yet"),this._encodeStr(xe,"octstr")},Ae.prototype._encodeNull=function(){return this._createEncoderBuffer("")},Ae.prototype._encodeInt=function(ge,ye){if(typeof ge=="string"){if(!ye)return this.reporter.error("String int or enum given, but no values map");if(!ye.hasOwnProperty(ge))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(ge));ge=ye[ge]}if(typeof ge!="number"&&!J.isBuffer(ge)){var xe=ge.toArray();!ge.sign&&xe[0]&128&&xe.unshift(0),ge=new J(xe)}if(J.isBuffer(ge)){var _e=ge.length;ge.length===0&&_e++;var Ie=new J(_e);return ge.copy(Ie),ge.length===0&&(Ie[0]=0),this._createEncoderBuffer(Ie)}if(ge<128)return this._createEncoderBuffer(ge);if(ge<256)return this._createEncoderBuffer([0,ge]);for(var _e=1,$e=ge;$e>=256;$e>>=8)_e++;for(var Ie=new Array(_e),$e=Ie.length-1;$e>=0;$e--)Ie[$e]=ge&255,ge>>=8;return Ie[0]&128&&Ie.unshift(0),this._createEncoderBuffer(new J(Ie))},Ae.prototype._encodeBool=function(ge){return this._createEncoderBuffer(ge?255:0)},Ae.prototype._use=function(ge,ye){return typeof ge=="function"&&(ge=ge(ye)),ge._getEncoder("der").tree},Ae.prototype._skipDefault=function(ge,ye,xe){var _e=this._baseState,$e;if(_e.default===null)return!1;var Ie=ge.join();if(_e.defaultBuffer===void 0&&(_e.defaultBuffer=this._encodeValue(_e.default,ye,xe).join()),Ie.length!==_e.defaultBuffer.length)return!1;for($e=0;$e<Ie.length;$e++)if(Ie[$e]!==_e.defaultBuffer[$e])return!1;return!0};function ve(me,ge,ye,xe){var _e;if(me==="seqof"?me="seq":me==="setof"&&(me="set"),ce.tagByName.hasOwnProperty(me))_e=ce.tagByName[me];else if(typeof me=="number"&&(me|0)===me)_e=me;else return xe.error("Unknown tag: "+me);return _e>=31?xe.error("Multi-octet tag encoding unsupported"):(ge||(_e|=32),_e|=ce.tagClassByName[ye||"universal"]<<6,_e)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var K=requireInherits_browser(),J=requireDer();function ne(oe){J.call(this,oe),this.enc="pem"}return K(ne,J),pem=ne,ne.prototype.encode=function(ce,ue){for(var Ae=J.prototype.encode.call(this,ce),pe=Ae.toString("base64"),ve=["-----BEGIN "+ue.label+"-----"],me=0;me<pe.length;me+=64)ve.push(pe.slice(me,me+64));return ve.push("-----END "+ue.label+"-----"),ve.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(K){var J=K;J.der=requireDer(),J.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(K){var J=K;J.bignum=requireBn$2(),J.define=requireApi().define,J.base=requireBase(),J.constants=requireConstants(),J.decoders=requireDecoders(),J.encoders=requireEncoders()}(asn1$8)),asn1$8}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var K=requireAsn1$1(),J=K.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),ne=K.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),oe=K.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),ce=K.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(oe),this.key("subjectPublicKey").bitstr())}),ue=K.define("RelativeDistinguishedName",function(){this.setof(ne)}),Ae=K.define("RDNSequence",function(){this.seqof(ue)}),pe=K.define("Name",function(){this.choice({rdnSequence:this.use(Ae)})}),ve=K.define("Validity",function(){this.seq().obj(this.key("notBefore").use(J),this.key("notAfter").use(J))}),me=K.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),ge=K.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(oe),this.key("issuer").use(pe),this.key("validity").use(ve),this.key("subject").use(pe),this.key("subjectPublicKeyInfo").use(ce),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(me).optional())}),ye=K.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(ge),this.key("signatureAlgorithm").use(oe),this.key("signatureValue").bitstr())});return certificate=ye,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$9;hasRequiredAsn1=1;var K=requireAsn1$1();asn1$9.certificate=requireCertificate();var J=K.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$9.RSAPrivateKey=J;var ne=K.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$9.RSAPublicKey=ne;var oe=K.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),ce=K.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(oe),this.key("subjectPublicKey").bitstr())});asn1$9.PublicKey=ce;var ue=K.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(oe),this.key("subjectPrivateKey").octstr())});asn1$9.PrivateKey=ue;var Ae=K.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$9.EncryptedPrivateKey=Ae;var pe=K.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$9.DSAPrivateKey=pe,asn1$9.DSAparam=K.define("DSAparam",function(){this.int()});var ve=K.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),me=K.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ve),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$9.ECPrivateKey=me,asn1$9.signature=K.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$9}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var K=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,J=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,ne=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,oe=requireEvp_bytestokey(),ce=requireBrowser$6(),ue=requireSafeBuffer$1().Buffer;return fixProc=function(Ae,pe){var ve=Ae.toString(),me=ve.match(K),ge;if(me){var xe="aes"+me[1],_e=ue.from(me[2],"hex"),$e=ue.from(me[3].replace(/[\r\n]/g,""),"base64"),Ie=oe(pe,_e.slice(0,8),parseInt(me[1],10)).key,Fe=[],ke=ce.createDecipheriv(xe,Ie,_e);Fe.push(ke.update($e)),Fe.push(ke.final()),ge=ue.concat(Fe)}else{var ye=ve.match(ne);ge=ue.from(ye[2].replace(/[\r\n]/g,""),"base64")}var je=ve.match(J)[1];return{tag:je,data:ge}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var K=requireAsn1(),J=require$$1,ne=requireFixProc(),oe=requireBrowser$6(),ce=requireBrowser$7(),ue=requireSafeBuffer$1().Buffer;function Ae(ve,me){var ge=ve.algorithm.decrypt.kde.kdeparams.salt,ye=parseInt(ve.algorithm.decrypt.kde.kdeparams.iters.toString(),10),xe=J[ve.algorithm.decrypt.cipher.algo.join(".")],_e=ve.algorithm.decrypt.cipher.iv,$e=ve.subjectPrivateKey,Ie=parseInt(xe.split("-")[1],10)/8,Fe=ce.pbkdf2Sync(me,ge,ye,Ie,"sha1"),ke=oe.createDecipheriv(xe,Fe,_e),je=[];return je.push(ke.update($e)),je.push(ke.final()),ue.concat(je)}function pe(ve){var me;typeof ve=="object"&&!ue.isBuffer(ve)&&(me=ve.passphrase,ve=ve.key),typeof ve=="string"&&(ve=ue.from(ve));var ge=ne(ve,me),ye=ge.tag,xe=ge.data,_e,$e;switch(ye){case"CERTIFICATE":$e=K.certificate.decode(xe,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch($e||($e=K.PublicKey.decode(xe,"der")),_e=$e.algorithm.algorithm.join("."),_e){case"1.2.840.113549.1.1.1":return K.RSAPublicKey.decode($e.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return $e.subjectPrivateKey=$e.subjectPublicKey,{type:"ec",data:$e};case"1.2.840.10040.4.1":return $e.algorithm.params.pub_key=K.DSAparam.decode($e.subjectPublicKey.data,"der"),{type:"dsa",data:$e.algorithm.params};default:throw new Error("unknown key id "+_e)}case"ENCRYPTED PRIVATE KEY":xe=K.EncryptedPrivateKey.decode(xe,"der"),xe=Ae(xe,me);case"PRIVATE KEY":switch($e=K.PrivateKey.decode(xe,"der"),_e=$e.algorithm.algorithm.join("."),_e){case"1.2.840.113549.1.1.1":return K.RSAPrivateKey.decode($e.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:$e.algorithm.curve,privateKey:K.ECPrivateKey.decode($e.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return $e.algorithm.params.priv_key=K.DSAparam.decode($e.subjectPrivateKey,"der"),{type:"dsa",params:$e.algorithm.params};default:throw new Error("unknown key id "+_e)}case"RSA PUBLIC KEY":return K.RSAPublicKey.decode(xe,"der");case"RSA PRIVATE KEY":return K.RSAPrivateKey.decode(xe,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:K.DSAPrivateKey.decode(xe,"der")};case"EC PRIVATE KEY":return xe=K.ECPrivateKey.decode(xe,"der"),{curve:xe.parameters.value,privateKey:xe.privateKey};default:throw new Error("unknown key type "+ye)}}return pe.signature=K.signature,parseAsn1=pe,parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var K=requireSafeBuffer$1().Buffer,J=requireBrowser$8(),ne=requireBrowserifyRsa(),oe=requireElliptic().ec,ce=requireBn$4(),ue=requireParseAsn1(),Ae=require$$4,pe=1;function ve(ke,je,We,ze,Xe){var Je=ue(je);if(Je.curve){if(ze!=="ecdsa"&&ze!=="ecdsa/rsa")throw new Error("wrong private key type");return me(ke,Je)}else if(Je.type==="dsa"){if(ze!=="dsa")throw new Error("wrong private key type");return ge(ke,Je,We)}if(ze!=="rsa"&&ze!=="ecdsa/rsa")throw new Error("wrong private key type");if(je.padding!==void 0&&je.padding!==pe)throw new Error("illegal or unsupported padding mode");ke=K.concat([Xe,ke]);for(var nt=Je.modulus.byteLength(),et=[0,1];ke.length+et.length+1<nt;)et.push(255);et.push(0);for(var tt=-1;++tt<ke.length;)et.push(ke[tt]);var st=ne(et,Je);return st}function me(ke,je){var We=Ae[je.curve.join(".")];if(!We)throw new Error("unknown curve "+je.curve.join("."));var ze=new oe(We),Xe=ze.keyFromPrivate(je.privateKey),Je=Xe.sign(ke);return K.from(Je.toDER())}function ge(ke,je,We){for(var ze=je.params.priv_key,Xe=je.params.p,Je=je.params.q,nt=je.params.g,et=new ce(0),tt,st=_e(ke,Je).mod(Je),qe=!1,Se=xe(ze,Je,ke,We);qe===!1;)tt=Ie(Je,Se,We),et=Fe(nt,tt,Xe,Je),qe=tt.invm(Je).imul(st.add(ze.mul(et))).mod(Je),qe.cmpn(0)===0&&(qe=!1,et=new ce(0));return ye(et,qe)}function ye(ke,je){ke=ke.toArray(),je=je.toArray(),ke[0]&128&&(ke=[0].concat(ke)),je[0]&128&&(je=[0].concat(je));var We=ke.length+je.length+4,ze=[48,We,2,ke.length];return ze=ze.concat(ke,[2,je.length],je),K.from(ze)}function xe(ke,je,We,ze){if(ke=K.from(ke.toArray()),ke.length<je.byteLength()){var Xe=K.alloc(je.byteLength()-ke.length);ke=K.concat([Xe,ke])}var Je=We.length,nt=$e(We,je),et=K.alloc(Je);et.fill(1);var tt=K.alloc(Je);return tt=J(ze,tt).update(et).update(K.from([0])).update(ke).update(nt).digest(),et=J(ze,tt).update(et).digest(),tt=J(ze,tt).update(et).update(K.from([1])).update(ke).update(nt).digest(),et=J(ze,tt).update(et).digest(),{k:tt,v:et}}function _e(ke,je){var We=new ce(ke),ze=(ke.length<<3)-je.bitLength();return ze>0&&We.ishrn(ze),We}function $e(ke,je){ke=_e(ke,je),ke=ke.mod(je);var We=K.from(ke.toArray());if(We.length<je.byteLength()){var ze=K.alloc(je.byteLength()-We.length);We=K.concat([ze,We])}return We}function Ie(ke,je,We){var ze,Xe;do{for(ze=K.alloc(0);ze.length*8<ke.bitLength();)je.v=J(We,je.k).update(je.v).digest(),ze=K.concat([ze,je.v]);Xe=_e(ze,ke),je.k=J(We,je.k).update(je.v).update(K.from([0])).digest(),je.v=J(We,je.k).update(je.v).digest()}while(Xe.cmp(ke)!==-1);return Xe}function Fe(ke,je,We,ze){return ke.toRed(ce.mont(We)).redPow(je).fromRed().mod(ze)}return sign.exports=ve,sign.exports.getKey=xe,sign.exports.makeKey=Ie,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var K=requireSafeBuffer$1().Buffer,J=requireBn$4(),ne=requireElliptic().ec,oe=requireParseAsn1(),ce=require$$4;function ue(me,ge,ye,xe,_e){var $e=oe(ye);if($e.type==="ec"){if(xe!=="ecdsa"&&xe!=="ecdsa/rsa")throw new Error("wrong public key type");return Ae(me,ge,$e)}else if($e.type==="dsa"){if(xe!=="dsa")throw new Error("wrong public key type");return pe(me,ge,$e)}if(xe!=="rsa"&&xe!=="ecdsa/rsa")throw new Error("wrong public key type");ge=K.concat([_e,ge]);for(var Ie=$e.modulus.byteLength(),Fe=[1],ke=0;ge.length+Fe.length+2<Ie;)Fe.push(255),ke+=1;Fe.push(0);for(var je=-1;++je<ge.length;)Fe.push(ge[je]);Fe=K.from(Fe);var We=J.mont($e.modulus);me=new J(me).toRed(We),me=me.redPow(new J($e.publicExponent)),me=K.from(me.fromRed().toArray());var ze=ke<8?1:0;for(Ie=Math.min(me.length,Fe.length),me.length!==Fe.length&&(ze=1),je=-1;++je<Ie;)ze|=me[je]^Fe[je];return ze===0}function Ae(me,ge,ye){var xe=ce[ye.data.algorithm.curve.join(".")];if(!xe)throw new Error("unknown curve "+ye.data.algorithm.curve.join("."));var _e=new ne(xe),$e=ye.data.subjectPrivateKey.data;return _e.verify(ge,me,$e)}function pe(me,ge,ye){var xe=ye.data.p,_e=ye.data.q,$e=ye.data.g,Ie=ye.data.pub_key,Fe=oe.signature.decode(me,"der"),ke=Fe.s,je=Fe.r;ve(ke,_e),ve(je,_e);var We=J.mont(xe),ze=ke.invm(_e),Xe=$e.toRed(We).redPow(new J(ge).mul(ze).mod(_e)).fromRed().mul(Ie.toRed(We).redPow(je.mul(ze).mod(_e)).fromRed()).mod(xe).mod(_e);return Xe.cmp(je)===0}function ve(me,ge){if(me.cmpn(0)<=0)throw new Error("invalid sig");if(me.cmp(ge)>=0)throw new Error("invalid sig")}return verify_1=ue,verify_1}var browser$3,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;hasRequiredBrowser$3=1;var K=requireSafeBuffer$1().Buffer,J=requireBrowser$9(),ne=requireReadableBrowser(),oe=requireInherits_browser(),ce=requireSign(),ue=requireVerify(),Ae=require$$6;Object.keys(Ae).forEach(function(ye){Ae[ye].id=K.from(Ae[ye].id,"hex"),Ae[ye.toLowerCase()]=Ae[ye]});function pe(ye){ne.Writable.call(this);var xe=Ae[ye];if(!xe)throw new Error("Unknown message digest");this._hashType=xe.hash,this._hash=J(xe.hash),this._tag=xe.id,this._signType=xe.sign}oe(pe,ne.Writable),pe.prototype._write=function(xe,_e,$e){this._hash.update(xe),$e()},pe.prototype.update=function(xe,_e){return this._hash.update(typeof xe=="string"?K.from(xe,_e):xe),this},pe.prototype.sign=function(xe,_e){this.end();var $e=this._hash.digest(),Ie=ce($e,xe,this._hashType,this._signType,this._tag);return _e?Ie.toString(_e):Ie};function ve(ye){ne.Writable.call(this);var xe=Ae[ye];if(!xe)throw new Error("Unknown message digest");this._hash=J(xe.hash),this._tag=xe.id,this._signType=xe.sign}oe(ve,ne.Writable),ve.prototype._write=function(xe,_e,$e){this._hash.update(xe),$e()},ve.prototype.update=function(xe,_e){return this._hash.update(typeof xe=="string"?K.from(xe,_e):xe),this},ve.prototype.verify=function(xe,_e,$e){var Ie=typeof _e=="string"?K.from(_e,$e):_e;this.end();var Fe=this._hash.digest();return ue(Ie,Fe,xe,this._signType,this._tag)};function me(ye){return new pe(ye)}function ge(ye){return new ve(ye)}return browser$3={Sign:me,Verify:ge,createSign:me,createVerify:ge},browser$3}var bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(K){(function(J,ne){function oe(qe,Se){if(!qe)throw new Error(Se||"Assertion failed")}function ce(qe,Se){qe.super_=Se;var Re=function(){};Re.prototype=Se.prototype,qe.prototype=new Re,qe.prototype.constructor=qe}function ue(qe,Se,Re){if(ue.isBN(qe))return qe;this.negative=0,this.words=null,this.length=0,this.red=null,qe!==null&&((Se==="le"||Se==="be")&&(Re=Se,Se=10),this._init(qe||0,Se||10,Re||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(Se){return Se instanceof ue?!0:Se!==null&&typeof Se=="object"&&Se.constructor.wordSize===ue.wordSize&&Array.isArray(Se.words)},ue.max=function(Se,Re){return Se.cmp(Re)>0?Se:Re},ue.min=function(Se,Re){return Se.cmp(Re)<0?Se:Re},ue.prototype._init=function(Se,Re,Be){if(typeof Se=="number")return this._initNumber(Se,Re,Be);if(typeof Se=="object")return this._initArray(Se,Re,Be);Re==="hex"&&(Re=16),oe(Re===(Re|0)&&Re>=2&&Re<=36),Se=Se.toString().replace(/\s+/g,"");var Ne=0;Se[0]==="-"&&(Ne++,this.negative=1),Ne<Se.length&&(Re===16?this._parseHex(Se,Ne,Be):(this._parseBase(Se,Re,Ne),Be==="le"&&this._initArray(this.toArray(),Re,Be)))},ue.prototype._initNumber=function(Se,Re,Be){Se<0&&(this.negative=1,Se=-Se),Se<67108864?(this.words=[Se&67108863],this.length=1):Se<4503599627370496?(this.words=[Se&67108863,Se/67108864&67108863],this.length=2):(oe(Se<9007199254740992),this.words=[Se&67108863,Se/67108864&67108863,1],this.length=3),Be==="le"&&this._initArray(this.toArray(),Re,Be)},ue.prototype._initArray=function(Se,Re,Be){if(oe(typeof Se.length=="number"),Se.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Se.length/3),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue,Ge,Ye=0;if(Be==="be")for(Ne=Se.length-1,Ue=0;Ne>=0;Ne-=3)Ge=Se[Ne]|Se[Ne-1]<<8|Se[Ne-2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);else if(Be==="le")for(Ne=0,Ue=0;Ne<Se.length;Ne+=3)Ge=Se[Ne]|Se[Ne+1]<<8|Se[Ne+2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);return this.strip()};function pe(qe,Se){var Re=qe.charCodeAt(Se);return Re>=65&&Re<=70?Re-55:Re>=97&&Re<=102?Re-87:Re-48&15}function ve(qe,Se,Re){var Be=pe(qe,Re);return Re-1>=Se&&(Be|=pe(qe,Re-1)<<4),Be}ue.prototype._parseHex=function(Se,Re,Be){this.length=Math.ceil((Se.length-Re)/6),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue=0,Ge=0,Ye;if(Be==="be")for(Ne=Se.length-1;Ne>=Re;Ne-=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8;else{var Qe=Se.length-Re;for(Ne=Qe%2===0?Re+1:Re;Ne<Se.length;Ne+=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8}this.strip()};function me(qe,Se,Re,Be){for(var Ne=0,Ue=Math.min(qe.length,Re),Ge=Se;Ge<Ue;Ge++){var Ye=qe.charCodeAt(Ge)-48;Ne*=Be,Ye>=49?Ne+=Ye-49+10:Ye>=17?Ne+=Ye-17+10:Ne+=Ye}return Ne}ue.prototype._parseBase=function(Se,Re,Be){this.words=[0],this.length=1;for(var Ne=0,Ue=1;Ue<=67108863;Ue*=Re)Ne++;Ne--,Ue=Ue/Re|0;for(var Ge=Se.length-Be,Ye=Ge%Ne,Qe=Math.min(Ge,Ge-Ye)+Be,Te=0,Ke=Be;Ke<Qe;Ke+=Ne)Te=me(Se,Ke,Ke+Ne,Re),this.imuln(Ue),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te);if(Ye!==0){var rt=1;for(Te=me(Se,Ke,Se.length,Re),Ke=0;Ke<Ye;Ke++)rt*=Re;this.imuln(rt),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te)}this.strip()},ue.prototype.copy=function(Se){Se.words=new Array(this.length);for(var Re=0;Re<this.length;Re++)Se.words[Re]=this.words[Re];Se.length=this.length,Se.negative=this.negative,Se.red=this.red},ue.prototype.clone=function(){var Se=new ue(null);return this.copy(Se),Se},ue.prototype._expand=function(Se){for(;this.length<Se;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],xe=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(Se,Re){Se=Se||10,Re=Re|0||1;var Be;if(Se===16||Se==="hex"){Be="";for(var Ne=0,Ue=0,Ge=0;Ge<this.length;Ge++){var Ye=this.words[Ge],Qe=((Ye<<Ne|Ue)&16777215).toString(16);Ue=Ye>>>24-Ne&16777215,Ue!==0||Ge!==this.length-1?Be=ge[6-Qe.length]+Qe+Be:Be=Qe+Be,Ne+=2,Ne>=26&&(Ne-=26,Ge--)}for(Ue!==0&&(Be=Ue.toString(16)+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}if(Se===(Se|0)&&Se>=2&&Se<=36){var Te=ye[Se],Ke=xe[Se];Be="";var rt=this.clone();for(rt.negative=0;!rt.isZero();){var it=rt.modn(Ke).toString(Se);rt=rt.idivn(Ke),rt.isZero()?Be=it+Be:Be=ge[Te-it.length]+it+Be}for(this.isZero()&&(Be="0"+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var Se=this.words[0];return this.length===2?Se+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Se+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Se:Se},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(Se,Re){return oe(typeof Ae<"u"),this.toArrayLike(Ae,Se,Re)},ue.prototype.toArray=function(Se,Re){return this.toArrayLike(Array,Se,Re)},ue.prototype.toArrayLike=function(Se,Re,Be){var Ne=this.byteLength(),Ue=Be||Math.max(1,Ne);oe(Ne<=Ue,"byte array longer than desired length"),oe(Ue>0,"Requested array length <= 0"),this.strip();var Ge=Re==="le",Ye=new Se(Ue),Qe,Te,Ke=this.clone();if(Ge){for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Te]=Qe;for(;Te<Ue;Te++)Ye[Te]=0}else{for(Te=0;Te<Ue-Ne;Te++)Ye[Te]=0;for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Ue-Te-1]=Qe}return Ye},Math.clz32?ue.prototype._countBits=function(Se){return 32-Math.clz32(Se)}:ue.prototype._countBits=function(Se){var Re=Se,Be=0;return Re>=4096&&(Be+=13,Re>>>=13),Re>=64&&(Be+=7,Re>>>=7),Re>=8&&(Be+=4,Re>>>=4),Re>=2&&(Be+=2,Re>>>=2),Be+Re},ue.prototype._zeroBits=function(Se){if(Se===0)return 26;var Re=Se,Be=0;return Re&8191||(Be+=13,Re>>>=13),Re&127||(Be+=7,Re>>>=7),Re&15||(Be+=4,Re>>>=4),Re&3||(Be+=2,Re>>>=2),Re&1||Be++,Be},ue.prototype.bitLength=function(){var Se=this.words[this.length-1],Re=this._countBits(Se);return(this.length-1)*26+Re};function _e(qe){for(var Se=new Array(qe.bitLength()),Re=0;Re<Se.length;Re++){var Be=Re/26|0,Ne=Re%26;Se[Re]=(qe.words[Be]&1<<Ne)>>>Ne}return Se}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Se=0,Re=0;Re<this.length;Re++){var Be=this._zeroBits(this.words[Re]);if(Se+=Be,Be!==26)break}return Se},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(Se){return this.negative!==0?this.abs().inotn(Se).iaddn(1):this.clone()},ue.prototype.fromTwos=function(Se){return this.testn(Se-1)?this.notn(Se).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(Se){for(;this.length<Se.length;)this.words[this.length++]=0;for(var Re=0;Re<Se.length;Re++)this.words[Re]=this.words[Re]|Se.words[Re];return this.strip()},ue.prototype.ior=function(Se){return oe((this.negative|Se.negative)===0),this.iuor(Se)},ue.prototype.or=function(Se){return this.length>Se.length?this.clone().ior(Se):Se.clone().ior(this)},ue.prototype.uor=function(Se){return this.length>Se.length?this.clone().iuor(Se):Se.clone().iuor(this)},ue.prototype.iuand=function(Se){var Re;this.length>Se.length?Re=Se:Re=this;for(var Be=0;Be<Re.length;Be++)this.words[Be]=this.words[Be]&Se.words[Be];return this.length=Re.length,this.strip()},ue.prototype.iand=function(Se){return oe((this.negative|Se.negative)===0),this.iuand(Se)},ue.prototype.and=function(Se){return this.length>Se.length?this.clone().iand(Se):Se.clone().iand(this)},ue.prototype.uand=function(Se){return this.length>Se.length?this.clone().iuand(Se):Se.clone().iuand(this)},ue.prototype.iuxor=function(Se){var Re,Be;this.length>Se.length?(Re=this,Be=Se):(Re=Se,Be=this);for(var Ne=0;Ne<Be.length;Ne++)this.words[Ne]=Re.words[Ne]^Be.words[Ne];if(this!==Re)for(;Ne<Re.length;Ne++)this.words[Ne]=Re.words[Ne];return this.length=Re.length,this.strip()},ue.prototype.ixor=function(Se){return oe((this.negative|Se.negative)===0),this.iuxor(Se)},ue.prototype.xor=function(Se){return this.length>Se.length?this.clone().ixor(Se):Se.clone().ixor(this)},ue.prototype.uxor=function(Se){return this.length>Se.length?this.clone().iuxor(Se):Se.clone().iuxor(this)},ue.prototype.inotn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Math.ceil(Se/26)|0,Be=Se%26;this._expand(Re),Be>0&&Re--;for(var Ne=0;Ne<Re;Ne++)this.words[Ne]=~this.words[Ne]&67108863;return Be>0&&(this.words[Ne]=~this.words[Ne]&67108863>>26-Be),this.strip()},ue.prototype.notn=function(Se){return this.clone().inotn(Se)},ue.prototype.setn=function(Se,Re){oe(typeof Se=="number"&&Se>=0);var Be=Se/26|0,Ne=Se%26;return this._expand(Be+1),Re?this.words[Be]=this.words[Be]|1<<Ne:this.words[Be]=this.words[Be]&~(1<<Ne),this.strip()},ue.prototype.iadd=function(Se){var Re;if(this.negative!==0&&Se.negative===0)return this.negative=0,Re=this.isub(Se),this.negative^=1,this._normSign();if(this.negative===0&&Se.negative!==0)return Se.negative=0,Re=this.isub(Se),Se.negative=1,Re._normSign();var Be,Ne;this.length>Se.length?(Be=this,Ne=Se):(Be=Se,Ne=this);for(var Ue=0,Ge=0;Ge<Ne.length;Ge++)Re=(Be.words[Ge]|0)+(Ne.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;for(;Ue!==0&&Ge<Be.length;Ge++)Re=(Be.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;if(this.length=Be.length,Ue!==0)this.words[this.length]=Ue,this.length++;else if(Be!==this)for(;Ge<Be.length;Ge++)this.words[Ge]=Be.words[Ge];return this},ue.prototype.add=function(Se){var Re;return Se.negative!==0&&this.negative===0?(Se.negative=0,Re=this.sub(Se),Se.negative^=1,Re):Se.negative===0&&this.negative!==0?(this.negative=0,Re=Se.sub(this),this.negative=1,Re):this.length>Se.length?this.clone().iadd(Se):Se.clone().iadd(this)},ue.prototype.isub=function(Se){if(Se.negative!==0){Se.negative=0;var Re=this.iadd(Se);return Se.negative=1,Re._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Se),this.negative=1,this._normSign();var Be=this.cmp(Se);if(Be===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ne,Ue;Be>0?(Ne=this,Ue=Se):(Ne=Se,Ue=this);for(var Ge=0,Ye=0;Ye<Ue.length;Ye++)Re=(Ne.words[Ye]|0)-(Ue.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;for(;Ge!==0&&Ye<Ne.length;Ye++)Re=(Ne.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;if(Ge===0&&Ye<Ne.length&&Ne!==this)for(;Ye<Ne.length;Ye++)this.words[Ye]=Ne.words[Ye];return this.length=Math.max(this.length,Ye),Ne!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(Se){return this.clone().isub(Se)};function $e(qe,Se,Re){Re.negative=Se.negative^qe.negative;var Be=qe.length+Se.length|0;Re.length=Be,Be=Be-1|0;var Ne=qe.words[0]|0,Ue=Se.words[0]|0,Ge=Ne*Ue,Ye=Ge&67108863,Qe=Ge/67108864|0;Re.words[0]=Ye;for(var Te=1;Te<Be;Te++){for(var Ke=Qe>>>26,rt=Qe&67108863,it=Math.min(Te,Se.length-1),at=Math.max(0,Te-qe.length+1);at<=it;at++){var lt=Te-at|0;Ne=qe.words[lt]|0,Ue=Se.words[at]|0,Ge=Ne*Ue+rt,Ke+=Ge/67108864|0,rt=Ge&67108863}Re.words[Te]=rt|0,Qe=Ke|0}return Qe!==0?Re.words[Te]=Qe|0:Re.length--,Re.strip()}var Ie=function(Se,Re,Be){var Ne=Se.words,Ue=Re.words,Ge=Be.words,Ye=0,Qe,Te,Ke,rt=Ne[0]|0,it=rt&8191,at=rt>>>13,lt=Ne[1]|0,ct=lt&8191,ot=lt>>>13,ft=Ne[2]|0,dt=ft&8191,mt=ft>>>13,kt=Ne[3]|0,wt=kt&8191,Et=kt>>>13,Ot=Ne[4]|0,Rt=Ot&8191,gt=Ot>>>13,$t=Ne[5]|0,pt=$t&8191,vt=$t>>>13,Mt=Ne[6]|0,St=Mt&8191,_t=Mt>>>13,Xt=Ne[7]|0,Tt=Xt&8191,Dt=Xt>>>13,Ht=Ne[8]|0,Bt=Ht&8191,It=Ht>>>13,zt=Ne[9]|0,Pt=zt&8191,Vt=zt>>>13,vr=Ue[0]|0,qt=vr&8191,er=vr>>>13,yr=Ue[1]|0,Lt=yr&8191,jt=yr>>>13,fr=Ue[2]|0,Gt=fr&8191,Jt=fr>>>13,ar=Ue[3]|0,Wt=ar&8191,nr=ar>>>13,Er=Ue[4]|0,Zt=Er&8191,ir=Er>>>13,Ir=Ue[5]|0,tr=Ir&8191,cr=Ir>>>13,Or=Ue[6]|0,sr=Or&8191,dr=Or>>>13,Dr=Ue[7]|0,lr=Dr&8191,hr=Dr>>>13,Yr=Ue[8]|0,ur=Yr&8191,pr=Yr>>>13,Jr=Ue[9]|0,Yt=Jr&8191,or=Jr>>>13;Be.negative=Se.negative^Re.negative,Be.length=19,Qe=Math.imul(it,qt),Te=Math.imul(it,er),Te=Te+Math.imul(at,qt)|0,Ke=Math.imul(at,er);var Fr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,Qe=Math.imul(ct,qt),Te=Math.imul(ct,er),Te=Te+Math.imul(ot,qt)|0,Ke=Math.imul(ot,er),Qe=Qe+Math.imul(it,Lt)|0,Te=Te+Math.imul(it,jt)|0,Te=Te+Math.imul(at,Lt)|0,Ke=Ke+Math.imul(at,jt)|0;var kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(kr>>>26)|0,kr&=67108863,Qe=Math.imul(dt,qt),Te=Math.imul(dt,er),Te=Te+Math.imul(mt,qt)|0,Ke=Math.imul(mt,er),Qe=Qe+Math.imul(ct,Lt)|0,Te=Te+Math.imul(ct,jt)|0,Te=Te+Math.imul(ot,Lt)|0,Ke=Ke+Math.imul(ot,jt)|0,Qe=Qe+Math.imul(it,Gt)|0,Te=Te+Math.imul(it,Jt)|0,Te=Te+Math.imul(at,Gt)|0,Ke=Ke+Math.imul(at,Jt)|0;var Kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,Qe=Math.imul(wt,qt),Te=Math.imul(wt,er),Te=Te+Math.imul(Et,qt)|0,Ke=Math.imul(Et,er),Qe=Qe+Math.imul(dt,Lt)|0,Te=Te+Math.imul(dt,jt)|0,Te=Te+Math.imul(mt,Lt)|0,Ke=Ke+Math.imul(mt,jt)|0,Qe=Qe+Math.imul(ct,Gt)|0,Te=Te+Math.imul(ct,Jt)|0,Te=Te+Math.imul(ot,Gt)|0,Ke=Ke+Math.imul(ot,Jt)|0,Qe=Qe+Math.imul(it,Wt)|0,Te=Te+Math.imul(it,nr)|0,Te=Te+Math.imul(at,Wt)|0,Ke=Ke+Math.imul(at,nr)|0;var cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(cn>>>26)|0,cn&=67108863,Qe=Math.imul(Rt,qt),Te=Math.imul(Rt,er),Te=Te+Math.imul(gt,qt)|0,Ke=Math.imul(gt,er),Qe=Qe+Math.imul(wt,Lt)|0,Te=Te+Math.imul(wt,jt)|0,Te=Te+Math.imul(Et,Lt)|0,Ke=Ke+Math.imul(Et,jt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Te=Te+Math.imul(dt,Jt)|0,Te=Te+Math.imul(mt,Gt)|0,Ke=Ke+Math.imul(mt,Jt)|0,Qe=Qe+Math.imul(ct,Wt)|0,Te=Te+Math.imul(ct,nr)|0,Te=Te+Math.imul(ot,Wt)|0,Ke=Ke+Math.imul(ot,nr)|0,Qe=Qe+Math.imul(it,Zt)|0,Te=Te+Math.imul(it,ir)|0,Te=Te+Math.imul(at,Zt)|0,Ke=Ke+Math.imul(at,ir)|0;var An=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(An>>>26)|0,An&=67108863,Qe=Math.imul(pt,qt),Te=Math.imul(pt,er),Te=Te+Math.imul(vt,qt)|0,Ke=Math.imul(vt,er),Qe=Qe+Math.imul(Rt,Lt)|0,Te=Te+Math.imul(Rt,jt)|0,Te=Te+Math.imul(gt,Lt)|0,Ke=Ke+Math.imul(gt,jt)|0,Qe=Qe+Math.imul(wt,Gt)|0,Te=Te+Math.imul(wt,Jt)|0,Te=Te+Math.imul(Et,Gt)|0,Ke=Ke+Math.imul(Et,Jt)|0,Qe=Qe+Math.imul(dt,Wt)|0,Te=Te+Math.imul(dt,nr)|0,Te=Te+Math.imul(mt,Wt)|0,Ke=Ke+Math.imul(mt,nr)|0,Qe=Qe+Math.imul(ct,Zt)|0,Te=Te+Math.imul(ct,ir)|0,Te=Te+Math.imul(ot,Zt)|0,Ke=Ke+Math.imul(ot,ir)|0,Qe=Qe+Math.imul(it,tr)|0,Te=Te+Math.imul(it,cr)|0,Te=Te+Math.imul(at,tr)|0,Ke=Ke+Math.imul(at,cr)|0;var _n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(_n>>>26)|0,_n&=67108863,Qe=Math.imul(St,qt),Te=Math.imul(St,er),Te=Te+Math.imul(_t,qt)|0,Ke=Math.imul(_t,er),Qe=Qe+Math.imul(pt,Lt)|0,Te=Te+Math.imul(pt,jt)|0,Te=Te+Math.imul(vt,Lt)|0,Ke=Ke+Math.imul(vt,jt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Te=Te+Math.imul(Rt,Jt)|0,Te=Te+Math.imul(gt,Gt)|0,Ke=Ke+Math.imul(gt,Jt)|0,Qe=Qe+Math.imul(wt,Wt)|0,Te=Te+Math.imul(wt,nr)|0,Te=Te+Math.imul(Et,Wt)|0,Ke=Ke+Math.imul(Et,nr)|0,Qe=Qe+Math.imul(dt,Zt)|0,Te=Te+Math.imul(dt,ir)|0,Te=Te+Math.imul(mt,Zt)|0,Ke=Ke+Math.imul(mt,ir)|0,Qe=Qe+Math.imul(ct,tr)|0,Te=Te+Math.imul(ct,cr)|0,Te=Te+Math.imul(ot,tr)|0,Ke=Ke+Math.imul(ot,cr)|0,Qe=Qe+Math.imul(it,sr)|0,Te=Te+Math.imul(it,dr)|0,Te=Te+Math.imul(at,sr)|0,Ke=Ke+Math.imul(at,dr)|0;var wn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(wn>>>26)|0,wn&=67108863,Qe=Math.imul(Tt,qt),Te=Math.imul(Tt,er),Te=Te+Math.imul(Dt,qt)|0,Ke=Math.imul(Dt,er),Qe=Qe+Math.imul(St,Lt)|0,Te=Te+Math.imul(St,jt)|0,Te=Te+Math.imul(_t,Lt)|0,Ke=Ke+Math.imul(_t,jt)|0,Qe=Qe+Math.imul(pt,Gt)|0,Te=Te+Math.imul(pt,Jt)|0,Te=Te+Math.imul(vt,Gt)|0,Ke=Ke+Math.imul(vt,Jt)|0,Qe=Qe+Math.imul(Rt,Wt)|0,Te=Te+Math.imul(Rt,nr)|0,Te=Te+Math.imul(gt,Wt)|0,Ke=Ke+Math.imul(gt,nr)|0,Qe=Qe+Math.imul(wt,Zt)|0,Te=Te+Math.imul(wt,ir)|0,Te=Te+Math.imul(Et,Zt)|0,Ke=Ke+Math.imul(Et,ir)|0,Qe=Qe+Math.imul(dt,tr)|0,Te=Te+Math.imul(dt,cr)|0,Te=Te+Math.imul(mt,tr)|0,Ke=Ke+Math.imul(mt,cr)|0,Qe=Qe+Math.imul(ct,sr)|0,Te=Te+Math.imul(ct,dr)|0,Te=Te+Math.imul(ot,sr)|0,Ke=Ke+Math.imul(ot,dr)|0,Qe=Qe+Math.imul(it,lr)|0,Te=Te+Math.imul(it,hr)|0,Te=Te+Math.imul(at,lr)|0,Ke=Ke+Math.imul(at,hr)|0;var Bn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,Qe=Math.imul(Bt,qt),Te=Math.imul(Bt,er),Te=Te+Math.imul(It,qt)|0,Ke=Math.imul(It,er),Qe=Qe+Math.imul(Tt,Lt)|0,Te=Te+Math.imul(Tt,jt)|0,Te=Te+Math.imul(Dt,Lt)|0,Ke=Ke+Math.imul(Dt,jt)|0,Qe=Qe+Math.imul(St,Gt)|0,Te=Te+Math.imul(St,Jt)|0,Te=Te+Math.imul(_t,Gt)|0,Ke=Ke+Math.imul(_t,Jt)|0,Qe=Qe+Math.imul(pt,Wt)|0,Te=Te+Math.imul(pt,nr)|0,Te=Te+Math.imul(vt,Wt)|0,Ke=Ke+Math.imul(vt,nr)|0,Qe=Qe+Math.imul(Rt,Zt)|0,Te=Te+Math.imul(Rt,ir)|0,Te=Te+Math.imul(gt,Zt)|0,Ke=Ke+Math.imul(gt,ir)|0,Qe=Qe+Math.imul(wt,tr)|0,Te=Te+Math.imul(wt,cr)|0,Te=Te+Math.imul(Et,tr)|0,Ke=Ke+Math.imul(Et,cr)|0,Qe=Qe+Math.imul(dt,sr)|0,Te=Te+Math.imul(dt,dr)|0,Te=Te+Math.imul(mt,sr)|0,Ke=Ke+Math.imul(mt,dr)|0,Qe=Qe+Math.imul(ct,lr)|0,Te=Te+Math.imul(ct,hr)|0,Te=Te+Math.imul(ot,lr)|0,Ke=Ke+Math.imul(ot,hr)|0,Qe=Qe+Math.imul(it,ur)|0,Te=Te+Math.imul(it,pr)|0,Te=Te+Math.imul(at,ur)|0,Ke=Ke+Math.imul(at,pr)|0;var On=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(On>>>26)|0,On&=67108863,Qe=Math.imul(Pt,qt),Te=Math.imul(Pt,er),Te=Te+Math.imul(Vt,qt)|0,Ke=Math.imul(Vt,er),Qe=Qe+Math.imul(Bt,Lt)|0,Te=Te+Math.imul(Bt,jt)|0,Te=Te+Math.imul(It,Lt)|0,Ke=Ke+Math.imul(It,jt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Te=Te+Math.imul(Tt,Jt)|0,Te=Te+Math.imul(Dt,Gt)|0,Ke=Ke+Math.imul(Dt,Jt)|0,Qe=Qe+Math.imul(St,Wt)|0,Te=Te+Math.imul(St,nr)|0,Te=Te+Math.imul(_t,Wt)|0,Ke=Ke+Math.imul(_t,nr)|0,Qe=Qe+Math.imul(pt,Zt)|0,Te=Te+Math.imul(pt,ir)|0,Te=Te+Math.imul(vt,Zt)|0,Ke=Ke+Math.imul(vt,ir)|0,Qe=Qe+Math.imul(Rt,tr)|0,Te=Te+Math.imul(Rt,cr)|0,Te=Te+Math.imul(gt,tr)|0,Ke=Ke+Math.imul(gt,cr)|0,Qe=Qe+Math.imul(wt,sr)|0,Te=Te+Math.imul(wt,dr)|0,Te=Te+Math.imul(Et,sr)|0,Ke=Ke+Math.imul(Et,dr)|0,Qe=Qe+Math.imul(dt,lr)|0,Te=Te+Math.imul(dt,hr)|0,Te=Te+Math.imul(mt,lr)|0,Ke=Ke+Math.imul(mt,hr)|0,Qe=Qe+Math.imul(ct,ur)|0,Te=Te+Math.imul(ct,pr)|0,Te=Te+Math.imul(ot,ur)|0,Ke=Ke+Math.imul(ot,pr)|0,Qe=Qe+Math.imul(it,Yt)|0,Te=Te+Math.imul(it,or)|0,Te=Te+Math.imul(at,Yt)|0,Ke=Ke+Math.imul(at,or)|0;var In=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(In>>>26)|0,In&=67108863,Qe=Math.imul(Pt,Lt),Te=Math.imul(Pt,jt),Te=Te+Math.imul(Vt,Lt)|0,Ke=Math.imul(Vt,jt),Qe=Qe+Math.imul(Bt,Gt)|0,Te=Te+Math.imul(Bt,Jt)|0,Te=Te+Math.imul(It,Gt)|0,Ke=Ke+Math.imul(It,Jt)|0,Qe=Qe+Math.imul(Tt,Wt)|0,Te=Te+Math.imul(Tt,nr)|0,Te=Te+Math.imul(Dt,Wt)|0,Ke=Ke+Math.imul(Dt,nr)|0,Qe=Qe+Math.imul(St,Zt)|0,Te=Te+Math.imul(St,ir)|0,Te=Te+Math.imul(_t,Zt)|0,Ke=Ke+Math.imul(_t,ir)|0,Qe=Qe+Math.imul(pt,tr)|0,Te=Te+Math.imul(pt,cr)|0,Te=Te+Math.imul(vt,tr)|0,Ke=Ke+Math.imul(vt,cr)|0,Qe=Qe+Math.imul(Rt,sr)|0,Te=Te+Math.imul(Rt,dr)|0,Te=Te+Math.imul(gt,sr)|0,Ke=Ke+Math.imul(gt,dr)|0,Qe=Qe+Math.imul(wt,lr)|0,Te=Te+Math.imul(wt,hr)|0,Te=Te+Math.imul(Et,lr)|0,Ke=Ke+Math.imul(Et,hr)|0,Qe=Qe+Math.imul(dt,ur)|0,Te=Te+Math.imul(dt,pr)|0,Te=Te+Math.imul(mt,ur)|0,Ke=Ke+Math.imul(mt,pr)|0,Qe=Qe+Math.imul(ct,Yt)|0,Te=Te+Math.imul(ct,or)|0,Te=Te+Math.imul(ot,Yt)|0,Ke=Ke+Math.imul(ot,or)|0;var Ln=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,Qe=Math.imul(Pt,Gt),Te=Math.imul(Pt,Jt),Te=Te+Math.imul(Vt,Gt)|0,Ke=Math.imul(Vt,Jt),Qe=Qe+Math.imul(Bt,Wt)|0,Te=Te+Math.imul(Bt,nr)|0,Te=Te+Math.imul(It,Wt)|0,Ke=Ke+Math.imul(It,nr)|0,Qe=Qe+Math.imul(Tt,Zt)|0,Te=Te+Math.imul(Tt,ir)|0,Te=Te+Math.imul(Dt,Zt)|0,Ke=Ke+Math.imul(Dt,ir)|0,Qe=Qe+Math.imul(St,tr)|0,Te=Te+Math.imul(St,cr)|0,Te=Te+Math.imul(_t,tr)|0,Ke=Ke+Math.imul(_t,cr)|0,Qe=Qe+Math.imul(pt,sr)|0,Te=Te+Math.imul(pt,dr)|0,Te=Te+Math.imul(vt,sr)|0,Ke=Ke+Math.imul(vt,dr)|0,Qe=Qe+Math.imul(Rt,lr)|0,Te=Te+Math.imul(Rt,hr)|0,Te=Te+Math.imul(gt,lr)|0,Ke=Ke+Math.imul(gt,hr)|0,Qe=Qe+Math.imul(wt,ur)|0,Te=Te+Math.imul(wt,pr)|0,Te=Te+Math.imul(Et,ur)|0,Ke=Ke+Math.imul(Et,pr)|0,Qe=Qe+Math.imul(dt,Yt)|0,Te=Te+Math.imul(dt,or)|0,Te=Te+Math.imul(mt,Yt)|0,Ke=Ke+Math.imul(mt,or)|0;var Tn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Qe=Math.imul(Pt,Wt),Te=Math.imul(Pt,nr),Te=Te+Math.imul(Vt,Wt)|0,Ke=Math.imul(Vt,nr),Qe=Qe+Math.imul(Bt,Zt)|0,Te=Te+Math.imul(Bt,ir)|0,Te=Te+Math.imul(It,Zt)|0,Ke=Ke+Math.imul(It,ir)|0,Qe=Qe+Math.imul(Tt,tr)|0,Te=Te+Math.imul(Tt,cr)|0,Te=Te+Math.imul(Dt,tr)|0,Ke=Ke+Math.imul(Dt,cr)|0,Qe=Qe+Math.imul(St,sr)|0,Te=Te+Math.imul(St,dr)|0,Te=Te+Math.imul(_t,sr)|0,Ke=Ke+Math.imul(_t,dr)|0,Qe=Qe+Math.imul(pt,lr)|0,Te=Te+Math.imul(pt,hr)|0,Te=Te+Math.imul(vt,lr)|0,Ke=Ke+Math.imul(vt,hr)|0,Qe=Qe+Math.imul(Rt,ur)|0,Te=Te+Math.imul(Rt,pr)|0,Te=Te+Math.imul(gt,ur)|0,Ke=Ke+Math.imul(gt,pr)|0,Qe=Qe+Math.imul(wt,Yt)|0,Te=Te+Math.imul(wt,or)|0,Te=Te+Math.imul(Et,Yt)|0,Ke=Ke+Math.imul(Et,or)|0;var Rn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Qe=Math.imul(Pt,Zt),Te=Math.imul(Pt,ir),Te=Te+Math.imul(Vt,Zt)|0,Ke=Math.imul(Vt,ir),Qe=Qe+Math.imul(Bt,tr)|0,Te=Te+Math.imul(Bt,cr)|0,Te=Te+Math.imul(It,tr)|0,Ke=Ke+Math.imul(It,cr)|0,Qe=Qe+Math.imul(Tt,sr)|0,Te=Te+Math.imul(Tt,dr)|0,Te=Te+Math.imul(Dt,sr)|0,Ke=Ke+Math.imul(Dt,dr)|0,Qe=Qe+Math.imul(St,lr)|0,Te=Te+Math.imul(St,hr)|0,Te=Te+Math.imul(_t,lr)|0,Ke=Ke+Math.imul(_t,hr)|0,Qe=Qe+Math.imul(pt,ur)|0,Te=Te+Math.imul(pt,pr)|0,Te=Te+Math.imul(vt,ur)|0,Ke=Ke+Math.imul(vt,pr)|0,Qe=Qe+Math.imul(Rt,Yt)|0,Te=Te+Math.imul(Rt,or)|0,Te=Te+Math.imul(gt,Yt)|0,Ke=Ke+Math.imul(gt,or)|0;var $n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+($n>>>26)|0,$n&=67108863,Qe=Math.imul(Pt,tr),Te=Math.imul(Pt,cr),Te=Te+Math.imul(Vt,tr)|0,Ke=Math.imul(Vt,cr),Qe=Qe+Math.imul(Bt,sr)|0,Te=Te+Math.imul(Bt,dr)|0,Te=Te+Math.imul(It,sr)|0,Ke=Ke+Math.imul(It,dr)|0,Qe=Qe+Math.imul(Tt,lr)|0,Te=Te+Math.imul(Tt,hr)|0,Te=Te+Math.imul(Dt,lr)|0,Ke=Ke+Math.imul(Dt,hr)|0,Qe=Qe+Math.imul(St,ur)|0,Te=Te+Math.imul(St,pr)|0,Te=Te+Math.imul(_t,ur)|0,Ke=Ke+Math.imul(_t,pr)|0,Qe=Qe+Math.imul(pt,Yt)|0,Te=Te+Math.imul(pt,or)|0,Te=Te+Math.imul(vt,Yt)|0,Ke=Ke+Math.imul(vt,or)|0;var Cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Qe=Math.imul(Pt,sr),Te=Math.imul(Pt,dr),Te=Te+Math.imul(Vt,sr)|0,Ke=Math.imul(Vt,dr),Qe=Qe+Math.imul(Bt,lr)|0,Te=Te+Math.imul(Bt,hr)|0,Te=Te+Math.imul(It,lr)|0,Ke=Ke+Math.imul(It,hr)|0,Qe=Qe+Math.imul(Tt,ur)|0,Te=Te+Math.imul(Tt,pr)|0,Te=Te+Math.imul(Dt,ur)|0,Ke=Ke+Math.imul(Dt,pr)|0,Qe=Qe+Math.imul(St,Yt)|0,Te=Te+Math.imul(St,or)|0,Te=Te+Math.imul(_t,Yt)|0,Ke=Ke+Math.imul(_t,or)|0;var Sn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Qe=Math.imul(Pt,lr),Te=Math.imul(Pt,hr),Te=Te+Math.imul(Vt,lr)|0,Ke=Math.imul(Vt,hr),Qe=Qe+Math.imul(Bt,ur)|0,Te=Te+Math.imul(Bt,pr)|0,Te=Te+Math.imul(It,ur)|0,Ke=Ke+Math.imul(It,pr)|0,Qe=Qe+Math.imul(Tt,Yt)|0,Te=Te+Math.imul(Tt,or)|0,Te=Te+Math.imul(Dt,Yt)|0,Ke=Ke+Math.imul(Dt,or)|0;var gn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(gn>>>26)|0,gn&=67108863,Qe=Math.imul(Pt,ur),Te=Math.imul(Pt,pr),Te=Te+Math.imul(Vt,ur)|0,Ke=Math.imul(Vt,pr),Qe=Qe+Math.imul(Bt,Yt)|0,Te=Te+Math.imul(Bt,or)|0,Te=Te+Math.imul(It,Yt)|0,Ke=Ke+Math.imul(It,or)|0;var Mn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Qe=Math.imul(Pt,Yt),Te=Math.imul(Pt,or),Te=Te+Math.imul(Vt,Yt)|0,Ke=Math.imul(Vt,or);var yn=(Ye+Qe|0)+((Te&8191)<<13)|0;return Ye=(Ke+(Te>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ge[0]=Fr,Ge[1]=kr,Ge[2]=Kr,Ge[3]=cn,Ge[4]=An,Ge[5]=_n,Ge[6]=wn,Ge[7]=Bn,Ge[8]=On,Ge[9]=In,Ge[10]=Ln,Ge[11]=Tn,Ge[12]=Rn,Ge[13]=$n,Ge[14]=Cn,Ge[15]=Sn,Ge[16]=gn,Ge[17]=Mn,Ge[18]=yn,Ye!==0&&(Ge[19]=Ye,Be.length++),Be};Math.imul||(Ie=$e);function Fe(qe,Se,Re){Re.negative=Se.negative^qe.negative,Re.length=qe.length+Se.length;for(var Be=0,Ne=0,Ue=0;Ue<Re.length-1;Ue++){var Ge=Ne;Ne=0;for(var Ye=Be&67108863,Qe=Math.min(Ue,Se.length-1),Te=Math.max(0,Ue-qe.length+1);Te<=Qe;Te++){var Ke=Ue-Te,rt=qe.words[Ke]|0,it=Se.words[Te]|0,at=rt*it,lt=at&67108863;Ge=Ge+(at/67108864|0)|0,lt=lt+Ye|0,Ye=lt&67108863,Ge=Ge+(lt>>>26)|0,Ne+=Ge>>>26,Ge&=67108863}Re.words[Ue]=Ye,Be=Ge,Ge=Ne}return Be!==0?Re.words[Ue]=Be:Re.length--,Re.strip()}function ke(qe,Se,Re){var Be=new je;return Be.mulp(qe,Se,Re)}ue.prototype.mulTo=function(Se,Re){var Be,Ne=this.length+Se.length;return this.length===10&&Se.length===10?Be=Ie(this,Se,Re):Ne<63?Be=$e(this,Se,Re):Ne<1024?Be=Fe(this,Se,Re):Be=ke(this,Se,Re),Be};function je(qe,Se){this.x=qe,this.y=Se}je.prototype.makeRBT=function(Se){for(var Re=new Array(Se),Be=ue.prototype._countBits(Se)-1,Ne=0;Ne<Se;Ne++)Re[Ne]=this.revBin(Ne,Be,Se);return Re},je.prototype.revBin=function(Se,Re,Be){if(Se===0||Se===Be-1)return Se;for(var Ne=0,Ue=0;Ue<Re;Ue++)Ne|=(Se&1)<<Re-Ue-1,Se>>=1;return Ne},je.prototype.permute=function(Se,Re,Be,Ne,Ue,Ge){for(var Ye=0;Ye<Ge;Ye++)Ne[Ye]=Re[Se[Ye]],Ue[Ye]=Be[Se[Ye]]},je.prototype.transform=function(Se,Re,Be,Ne,Ue,Ge){this.permute(Ge,Se,Re,Be,Ne,Ue);for(var Ye=1;Ye<Ue;Ye<<=1)for(var Qe=Ye<<1,Te=Math.cos(2*Math.PI/Qe),Ke=Math.sin(2*Math.PI/Qe),rt=0;rt<Ue;rt+=Qe)for(var it=Te,at=Ke,lt=0;lt<Ye;lt++){var ct=Be[rt+lt],ot=Ne[rt+lt],ft=Be[rt+lt+Ye],dt=Ne[rt+lt+Ye],mt=it*ft-at*dt;dt=it*dt+at*ft,ft=mt,Be[rt+lt]=ct+ft,Ne[rt+lt]=ot+dt,Be[rt+lt+Ye]=ct-ft,Ne[rt+lt+Ye]=ot-dt,lt!==Qe&&(mt=Te*it-Ke*at,at=Te*at+Ke*it,it=mt)}},je.prototype.guessLen13b=function(Se,Re){var Be=Math.max(Re,Se)|1,Ne=Be&1,Ue=0;for(Be=Be/2|0;Be;Be=Be>>>1)Ue++;return 1<<Ue+1+Ne},je.prototype.conjugate=function(Se,Re,Be){if(!(Be<=1))for(var Ne=0;Ne<Be/2;Ne++){var Ue=Se[Ne];Se[Ne]=Se[Be-Ne-1],Se[Be-Ne-1]=Ue,Ue=Re[Ne],Re[Ne]=-Re[Be-Ne-1],Re[Be-Ne-1]=-Ue}},je.prototype.normalize13b=function(Se,Re){for(var Be=0,Ne=0;Ne<Re/2;Ne++){var Ue=Math.round(Se[2*Ne+1]/Re)*8192+Math.round(Se[2*Ne]/Re)+Be;Se[Ne]=Ue&67108863,Ue<67108864?Be=0:Be=Ue/67108864|0}return Se},je.prototype.convert13b=function(Se,Re,Be,Ne){for(var Ue=0,Ge=0;Ge<Re;Ge++)Ue=Ue+(Se[Ge]|0),Be[2*Ge]=Ue&8191,Ue=Ue>>>13,Be[2*Ge+1]=Ue&8191,Ue=Ue>>>13;for(Ge=2*Re;Ge<Ne;++Ge)Be[Ge]=0;oe(Ue===0),oe((Ue&-8192)===0)},je.prototype.stub=function(Se){for(var Re=new Array(Se),Be=0;Be<Se;Be++)Re[Be]=0;return Re},je.prototype.mulp=function(Se,Re,Be){var Ne=2*this.guessLen13b(Se.length,Re.length),Ue=this.makeRBT(Ne),Ge=this.stub(Ne),Ye=new Array(Ne),Qe=new Array(Ne),Te=new Array(Ne),Ke=new Array(Ne),rt=new Array(Ne),it=new Array(Ne),at=Be.words;at.length=Ne,this.convert13b(Se.words,Se.length,Ye,Ne),this.convert13b(Re.words,Re.length,Ke,Ne),this.transform(Ye,Ge,Qe,Te,Ne,Ue),this.transform(Ke,Ge,rt,it,Ne,Ue);for(var lt=0;lt<Ne;lt++){var ct=Qe[lt]*rt[lt]-Te[lt]*it[lt];Te[lt]=Qe[lt]*it[lt]+Te[lt]*rt[lt],Qe[lt]=ct}return this.conjugate(Qe,Te,Ne),this.transform(Qe,Te,at,Ge,Ne,Ue),this.conjugate(at,Ge,Ne),this.normalize13b(at,Ne),Be.negative=Se.negative^Re.negative,Be.length=Se.length+Re.length,Be.strip()},ue.prototype.mul=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),this.mulTo(Se,Re)},ue.prototype.mulf=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),ke(this,Se,Re)},ue.prototype.imul=function(Se){return this.clone().mulTo(Se,this)},ue.prototype.imuln=function(Se){oe(typeof Se=="number"),oe(Se<67108864);for(var Re=0,Be=0;Be<this.length;Be++){var Ne=(this.words[Be]|0)*Se,Ue=(Ne&67108863)+(Re&67108863);Re>>=26,Re+=Ne/67108864|0,Re+=Ue>>>26,this.words[Be]=Ue&67108863}return Re!==0&&(this.words[Be]=Re,this.length++),this},ue.prototype.muln=function(Se){return this.clone().imuln(Se)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(Se){var Re=_e(Se);if(Re.length===0)return new ue(1);for(var Be=this,Ne=0;Ne<Re.length&&Re[Ne]===0;Ne++,Be=Be.sqr());if(++Ne<Re.length)for(var Ue=Be.sqr();Ne<Re.length;Ne++,Ue=Ue.sqr())Re[Ne]!==0&&(Be=Be.mul(Ue));return Be},ue.prototype.iushln=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=67108863>>>26-Re<<26-Re,Ue;if(Re!==0){var Ge=0;for(Ue=0;Ue<this.length;Ue++){var Ye=this.words[Ue]&Ne,Qe=(this.words[Ue]|0)-Ye<<Re;this.words[Ue]=Qe|Ge,Ge=Ye>>>26-Re}Ge&&(this.words[Ue]=Ge,this.length++)}if(Be!==0){for(Ue=this.length-1;Ue>=0;Ue--)this.words[Ue+Be]=this.words[Ue];for(Ue=0;Ue<Be;Ue++)this.words[Ue]=0;this.length+=Be}return this.strip()},ue.prototype.ishln=function(Se){return oe(this.negative===0),this.iushln(Se)},ue.prototype.iushrn=function(Se,Re,Be){oe(typeof Se=="number"&&Se>=0);var Ne;Re?Ne=(Re-Re%26)/26:Ne=0;var Ue=Se%26,Ge=Math.min((Se-Ue)/26,this.length),Ye=67108863^67108863>>>Ue<<Ue,Qe=Be;if(Ne-=Ge,Ne=Math.max(0,Ne),Qe){for(var Te=0;Te<Ge;Te++)Qe.words[Te]=this.words[Te];Qe.length=Ge}if(Ge!==0)if(this.length>Ge)for(this.length-=Ge,Te=0;Te<this.length;Te++)this.words[Te]=this.words[Te+Ge];else this.words[0]=0,this.length=1;var Ke=0;for(Te=this.length-1;Te>=0&&(Ke!==0||Te>=Ne);Te--){var rt=this.words[Te]|0;this.words[Te]=Ke<<26-Ue|rt>>>Ue,Ke=rt&Ye}return Qe&&Ke!==0&&(Qe.words[Qe.length++]=Ke),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(Se,Re,Be){return oe(this.negative===0),this.iushrn(Se,Re,Be)},ue.prototype.shln=function(Se){return this.clone().ishln(Se)},ue.prototype.ushln=function(Se){return this.clone().iushln(Se)},ue.prototype.shrn=function(Se){return this.clone().ishrn(Se)},ue.prototype.ushrn=function(Se){return this.clone().iushrn(Se)},ue.prototype.testn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return!1;var Ue=this.words[Be];return!!(Ue&Ne)},ue.prototype.imaskn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Be)return this;if(Re!==0&&Be++,this.length=Math.min(Be,this.length),Re!==0){var Ne=67108863^67108863>>>Re<<Re;this.words[this.length-1]&=Ne}return this.strip()},ue.prototype.maskn=function(Se){return this.clone().imaskn(Se)},ue.prototype.iaddn=function(Se){return oe(typeof Se=="number"),oe(Se<67108864),Se<0?this.isubn(-Se):this.negative!==0?this.length===1&&(this.words[0]|0)<Se?(this.words[0]=Se-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Se),this.negative=1,this):this._iaddn(Se)},ue.prototype._iaddn=function(Se){this.words[0]+=Se;for(var Re=0;Re<this.length&&this.words[Re]>=67108864;Re++)this.words[Re]-=67108864,Re===this.length-1?this.words[Re+1]=1:this.words[Re+1]++;return this.length=Math.max(this.length,Re+1),this},ue.prototype.isubn=function(Se){if(oe(typeof Se=="number"),oe(Se<67108864),Se<0)return this.iaddn(-Se);if(this.negative!==0)return this.negative=0,this.iaddn(Se),this.negative=1,this;if(this.words[0]-=Se,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Re=0;Re<this.length&&this.words[Re]<0;Re++)this.words[Re]+=67108864,this.words[Re+1]-=1;return this.strip()},ue.prototype.addn=function(Se){return this.clone().iaddn(Se)},ue.prototype.subn=function(Se){return this.clone().isubn(Se)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(Se,Re,Be){var Ne=Se.length+Be,Ue;this._expand(Ne);var Ge,Ye=0;for(Ue=0;Ue<Se.length;Ue++){Ge=(this.words[Ue+Be]|0)+Ye;var Qe=(Se.words[Ue]|0)*Re;Ge-=Qe&67108863,Ye=(Ge>>26)-(Qe/67108864|0),this.words[Ue+Be]=Ge&67108863}for(;Ue<this.length-Be;Ue++)Ge=(this.words[Ue+Be]|0)+Ye,Ye=Ge>>26,this.words[Ue+Be]=Ge&67108863;if(Ye===0)return this.strip();for(oe(Ye===-1),Ye=0,Ue=0;Ue<this.length;Ue++)Ge=-(this.words[Ue]|0)+Ye,Ye=Ge>>26,this.words[Ue]=Ge&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(Se,Re){var Be=this.length-Se.length,Ne=this.clone(),Ue=Se,Ge=Ue.words[Ue.length-1]|0,Ye=this._countBits(Ge);Be=26-Ye,Be!==0&&(Ue=Ue.ushln(Be),Ne.iushln(Be),Ge=Ue.words[Ue.length-1]|0);var Qe=Ne.length-Ue.length,Te;if(Re!=="mod"){Te=new ue(null),Te.length=Qe+1,Te.words=new Array(Te.length);for(var Ke=0;Ke<Te.length;Ke++)Te.words[Ke]=0}var rt=Ne.clone()._ishlnsubmul(Ue,1,Qe);rt.negative===0&&(Ne=rt,Te&&(Te.words[Qe]=1));for(var it=Qe-1;it>=0;it--){var at=(Ne.words[Ue.length+it]|0)*67108864+(Ne.words[Ue.length+it-1]|0);for(at=Math.min(at/Ge|0,67108863),Ne._ishlnsubmul(Ue,at,it);Ne.negative!==0;)at--,Ne.negative=0,Ne._ishlnsubmul(Ue,1,it),Ne.isZero()||(Ne.negative^=1);Te&&(Te.words[it]=at)}return Te&&Te.strip(),Ne.strip(),Re!=="div"&&Be!==0&&Ne.iushrn(Be),{div:Te||null,mod:Ne}},ue.prototype.divmod=function(Se,Re,Be){if(oe(!Se.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ne,Ue,Ge;return this.negative!==0&&Se.negative===0?(Ge=this.neg().divmod(Se,Re),Re!=="mod"&&(Ne=Ge.div.neg()),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.iadd(Se)),{div:Ne,mod:Ue}):this.negative===0&&Se.negative!==0?(Ge=this.divmod(Se.neg(),Re),Re!=="mod"&&(Ne=Ge.div.neg()),{div:Ne,mod:Ge.mod}):this.negative&Se.negative?(Ge=this.neg().divmod(Se.neg(),Re),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.isub(Se)),{div:Ge.div,mod:Ue}):Se.length>this.length||this.cmp(Se)<0?{div:new ue(0),mod:this}:Se.length===1?Re==="div"?{div:this.divn(Se.words[0]),mod:null}:Re==="mod"?{div:null,mod:new ue(this.modn(Se.words[0]))}:{div:this.divn(Se.words[0]),mod:new ue(this.modn(Se.words[0]))}:this._wordDiv(Se,Re)},ue.prototype.div=function(Se){return this.divmod(Se,"div",!1).div},ue.prototype.mod=function(Se){return this.divmod(Se,"mod",!1).mod},ue.prototype.umod=function(Se){return this.divmod(Se,"mod",!0).mod},ue.prototype.divRound=function(Se){var Re=this.divmod(Se);if(Re.mod.isZero())return Re.div;var Be=Re.div.negative!==0?Re.mod.isub(Se):Re.mod,Ne=Se.ushrn(1),Ue=Se.andln(1),Ge=Be.cmp(Ne);return Ge<0||Ue===1&&Ge===0?Re.div:Re.div.negative!==0?Re.div.isubn(1):Re.div.iaddn(1)},ue.prototype.modn=function(Se){oe(Se<=67108863);for(var Re=(1<<26)%Se,Be=0,Ne=this.length-1;Ne>=0;Ne--)Be=(Re*Be+(this.words[Ne]|0))%Se;return Be},ue.prototype.idivn=function(Se){oe(Se<=67108863);for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=(this.words[Be]|0)+Re*67108864;this.words[Be]=Ne/Se|0,Re=Ne%Se}return this.strip()},ue.prototype.divn=function(Se){return this.clone().idivn(Se)},ue.prototype.egcd=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=new ue(0),Ye=new ue(1),Qe=0;Re.isEven()&&Be.isEven();)Re.iushrn(1),Be.iushrn(1),++Qe;for(var Te=Be.clone(),Ke=Re.clone();!Re.isZero();){for(var rt=0,it=1;!(Re.words[0]&it)&&rt<26;++rt,it<<=1);if(rt>0)for(Re.iushrn(rt);rt-- >0;)(Ne.isOdd()||Ue.isOdd())&&(Ne.iadd(Te),Ue.isub(Ke)),Ne.iushrn(1),Ue.iushrn(1);for(var at=0,lt=1;!(Be.words[0]&lt)&&at<26;++at,lt<<=1);if(at>0)for(Be.iushrn(at);at-- >0;)(Ge.isOdd()||Ye.isOdd())&&(Ge.iadd(Te),Ye.isub(Ke)),Ge.iushrn(1),Ye.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ge),Ue.isub(Ye)):(Be.isub(Re),Ge.isub(Ne),Ye.isub(Ue))}return{a:Ge,b:Ye,gcd:Be.iushln(Qe)}},ue.prototype._invmp=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=Be.clone();Re.cmpn(1)>0&&Be.cmpn(1)>0;){for(var Ye=0,Qe=1;!(Re.words[0]&Qe)&&Ye<26;++Ye,Qe<<=1);if(Ye>0)for(Re.iushrn(Ye);Ye-- >0;)Ne.isOdd()&&Ne.iadd(Ge),Ne.iushrn(1);for(var Te=0,Ke=1;!(Be.words[0]&Ke)&&Te<26;++Te,Ke<<=1);if(Te>0)for(Be.iushrn(Te);Te-- >0;)Ue.isOdd()&&Ue.iadd(Ge),Ue.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ue)):(Be.isub(Re),Ue.isub(Ne))}var rt;return Re.cmpn(1)===0?rt=Ne:rt=Ue,rt.cmpn(0)<0&&rt.iadd(Se),rt},ue.prototype.gcd=function(Se){if(this.isZero())return Se.abs();if(Se.isZero())return this.abs();var Re=this.clone(),Be=Se.clone();Re.negative=0,Be.negative=0;for(var Ne=0;Re.isEven()&&Be.isEven();Ne++)Re.iushrn(1),Be.iushrn(1);do{for(;Re.isEven();)Re.iushrn(1);for(;Be.isEven();)Be.iushrn(1);var Ue=Re.cmp(Be);if(Ue<0){var Ge=Re;Re=Be,Be=Ge}else if(Ue===0||Be.cmpn(1)===0)break;Re.isub(Be)}while(!0);return Be.iushln(Ne)},ue.prototype.invm=function(Se){return this.egcd(Se).a.umod(Se)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(Se){return this.words[0]&Se},ue.prototype.bincn=function(Se){oe(typeof Se=="number");var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return this._expand(Be+1),this.words[Be]|=Ne,this;for(var Ue=Ne,Ge=Be;Ue!==0&&Ge<this.length;Ge++){var Ye=this.words[Ge]|0;Ye+=Ue,Ue=Ye>>>26,Ye&=67108863,this.words[Ge]=Ye}return Ue!==0&&(this.words[Ge]=Ue,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(Se){var Re=Se<0;if(this.negative!==0&&!Re)return-1;if(this.negative===0&&Re)return 1;this.strip();var Be;if(this.length>1)Be=1;else{Re&&(Se=-Se),oe(Se<=67108863,"Number is too big");var Ne=this.words[0]|0;Be=Ne===Se?0:Ne<Se?-1:1}return this.negative!==0?-Be|0:Be},ue.prototype.cmp=function(Se){if(this.negative!==0&&Se.negative===0)return-1;if(this.negative===0&&Se.negative!==0)return 1;var Re=this.ucmp(Se);return this.negative!==0?-Re|0:Re},ue.prototype.ucmp=function(Se){if(this.length>Se.length)return 1;if(this.length<Se.length)return-1;for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=this.words[Be]|0,Ue=Se.words[Be]|0;if(Ne!==Ue){Ne<Ue?Re=-1:Ne>Ue&&(Re=1);break}}return Re},ue.prototype.gtn=function(Se){return this.cmpn(Se)===1},ue.prototype.gt=function(Se){return this.cmp(Se)===1},ue.prototype.gten=function(Se){return this.cmpn(Se)>=0},ue.prototype.gte=function(Se){return this.cmp(Se)>=0},ue.prototype.ltn=function(Se){return this.cmpn(Se)===-1},ue.prototype.lt=function(Se){return this.cmp(Se)===-1},ue.prototype.lten=function(Se){return this.cmpn(Se)<=0},ue.prototype.lte=function(Se){return this.cmp(Se)<=0},ue.prototype.eqn=function(Se){return this.cmpn(Se)===0},ue.prototype.eq=function(Se){return this.cmp(Se)===0},ue.red=function(Se){return new tt(Se)},ue.prototype.toRed=function(Se){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),Se.convertTo(this)._forceRed(Se)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(Se){return this.red=Se,this},ue.prototype.forceRed=function(Se){return oe(!this.red,"Already a number in reduction context"),this._forceRed(Se)},ue.prototype.redAdd=function(Se){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,Se)},ue.prototype.redIAdd=function(Se){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Se)},ue.prototype.redSub=function(Se){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,Se)},ue.prototype.redISub=function(Se){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,Se)},ue.prototype.redShl=function(Se){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,Se)},ue.prototype.redMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.mul(this,Se)},ue.prototype.redIMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.imul(this,Se)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(Se){return oe(this.red&&!Se.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Se)};var We={k256:null,p224:null,p192:null,p25519:null};function ze(qe,Se){this.name=qe,this.p=new ue(Se,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var Se=new ue(null);return Se.words=new Array(Math.ceil(this.n/13)),Se},ze.prototype.ireduce=function(Se){var Re=Se,Be;do this.split(Re,this.tmp),Re=this.imulK(Re),Re=Re.iadd(this.tmp),Be=Re.bitLength();while(Be>this.n);var Ne=Be<this.n?-1:Re.ucmp(this.p);return Ne===0?(Re.words[0]=0,Re.length=1):Ne>0?Re.isub(this.p):Re.strip!==void 0?Re.strip():Re._strip(),Re},ze.prototype.split=function(Se,Re){Se.iushrn(this.n,0,Re)},ze.prototype.imulK=function(Se){return Se.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(Se,Re){for(var Be=4194303,Ne=Math.min(Se.length,9),Ue=0;Ue<Ne;Ue++)Re.words[Ue]=Se.words[Ue];if(Re.length=Ne,Se.length<=9){Se.words[0]=0,Se.length=1;return}var Ge=Se.words[9];for(Re.words[Re.length++]=Ge&Be,Ue=10;Ue<Se.length;Ue++){var Ye=Se.words[Ue]|0;Se.words[Ue-10]=(Ye&Be)<<4|Ge>>>22,Ge=Ye}Ge>>>=22,Se.words[Ue-10]=Ge,Ge===0&&Se.length>10?Se.length-=10:Se.length-=9},Xe.prototype.imulK=function(Se){Se.words[Se.length]=0,Se.words[Se.length+1]=0,Se.length+=2;for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=Se.words[Be]|0;Re+=Ne*977,Se.words[Be]=Re&67108863,Re=Ne*64+(Re/67108864|0)}return Se.words[Se.length-1]===0&&(Se.length--,Se.words[Se.length-1]===0&&Se.length--),Se};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function nt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(nt,ze);function et(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(et,ze),et.prototype.imulK=function(Se){for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=(Se.words[Be]|0)*19+Re,Ue=Ne&67108863;Ne>>>=26,Se.words[Be]=Ue,Re=Ne}return Re!==0&&(Se.words[Se.length++]=Re),Se},ue._prime=function(Se){if(We[Se])return We[Se];var Re;if(Se==="k256")Re=new Xe;else if(Se==="p224")Re=new Je;else if(Se==="p192")Re=new nt;else if(Se==="p25519")Re=new et;else throw new Error("Unknown prime "+Se);return We[Se]=Re,Re};function tt(qe){if(typeof qe=="string"){var Se=ue._prime(qe);this.m=Se.p,this.prime=Se}else oe(qe.gtn(1),"modulus must be greater than 1"),this.m=qe,this.prime=null}tt.prototype._verify1=function(Se){oe(Se.negative===0,"red works only with positives"),oe(Se.red,"red works only with red numbers")},tt.prototype._verify2=function(Se,Re){oe((Se.negative|Re.negative)===0,"red works only with positives"),oe(Se.red&&Se.red===Re.red,"red works only with red numbers")},tt.prototype.imod=function(Se){return this.prime?this.prime.ireduce(Se)._forceRed(this):Se.umod(this.m)._forceRed(this)},tt.prototype.neg=function(Se){return Se.isZero()?Se.clone():this.m.sub(Se)._forceRed(this)},tt.prototype.add=function(Se,Re){this._verify2(Se,Re);var Be=Se.add(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be._forceRed(this)},tt.prototype.iadd=function(Se,Re){this._verify2(Se,Re);var Be=Se.iadd(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be},tt.prototype.sub=function(Se,Re){this._verify2(Se,Re);var Be=Se.sub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be._forceRed(this)},tt.prototype.isub=function(Se,Re){this._verify2(Se,Re);var Be=Se.isub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be},tt.prototype.shl=function(Se,Re){return this._verify1(Se),this.imod(Se.ushln(Re))},tt.prototype.imul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.imul(Re))},tt.prototype.mul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.mul(Re))},tt.prototype.isqr=function(Se){return this.imul(Se,Se.clone())},tt.prototype.sqr=function(Se){return this.mul(Se,Se)},tt.prototype.sqrt=function(Se){if(Se.isZero())return Se.clone();var Re=this.m.andln(3);if(oe(Re%2===1),Re===3){var Be=this.m.add(new ue(1)).iushrn(2);return this.pow(Se,Be)}for(var Ne=this.m.subn(1),Ue=0;!Ne.isZero()&&Ne.andln(1)===0;)Ue++,Ne.iushrn(1);oe(!Ne.isZero());var Ge=new ue(1).toRed(this),Ye=Ge.redNeg(),Qe=this.m.subn(1).iushrn(1),Te=this.m.bitLength();for(Te=new ue(2*Te*Te).toRed(this);this.pow(Te,Qe).cmp(Ye)!==0;)Te.redIAdd(Ye);for(var Ke=this.pow(Te,Ne),rt=this.pow(Se,Ne.addn(1).iushrn(1)),it=this.pow(Se,Ne),at=Ue;it.cmp(Ge)!==0;){for(var lt=it,ct=0;lt.cmp(Ge)!==0;ct++)lt=lt.redSqr();oe(ct<at);var ot=this.pow(Ke,new ue(1).iushln(at-ct-1));rt=rt.redMul(ot),Ke=ot.redSqr(),it=it.redMul(Ke),at=ct}return rt},tt.prototype.invm=function(Se){var Re=Se._invmp(this.m);return Re.negative!==0?(Re.negative=0,this.imod(Re).redNeg()):this.imod(Re)},tt.prototype.pow=function(Se,Re){if(Re.isZero())return new ue(1).toRed(this);if(Re.cmpn(1)===0)return Se.clone();var Be=4,Ne=new Array(1<<Be);Ne[0]=new ue(1).toRed(this),Ne[1]=Se;for(var Ue=2;Ue<Ne.length;Ue++)Ne[Ue]=this.mul(Ne[Ue-1],Se);var Ge=Ne[0],Ye=0,Qe=0,Te=Re.bitLength()%26;for(Te===0&&(Te=26),Ue=Re.length-1;Ue>=0;Ue--){for(var Ke=Re.words[Ue],rt=Te-1;rt>=0;rt--){var it=Ke>>rt&1;if(Ge!==Ne[0]&&(Ge=this.sqr(Ge)),it===0&&Ye===0){Qe=0;continue}Ye<<=1,Ye|=it,Qe++,!(Qe!==Be&&(Ue!==0||rt!==0))&&(Ge=this.mul(Ge,Ne[Ye]),Qe=0,Ye=0)}Te=26}return Ge},tt.prototype.convertTo=function(Se){var Re=Se.umod(this.m);return Re===Se?Re.clone():Re},tt.prototype.convertFrom=function(Se){var Re=Se.clone();return Re.red=null,Re},ue.mont=function(Se){return new st(Se)};function st(qe){tt.call(this,qe),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(st,tt),st.prototype.convertTo=function(Se){return this.imod(Se.ushln(this.shift))},st.prototype.convertFrom=function(Se){var Re=this.imod(Se.mul(this.rinv));return Re.red=null,Re},st.prototype.imul=function(Se,Re){if(Se.isZero()||Re.isZero())return Se.words[0]=0,Se.length=1,Se;var Be=Se.imul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.mul=function(Se,Re){if(Se.isZero()||Re.isZero())return new ue(0)._forceRed(this);var Be=Se.mul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.invm=function(Se){var Re=this.imod(Se._invmp(this.m).mul(this.r2));return Re._forceRed(this)}})(K,commonjsGlobal)}(bn$1)),bn$1.exports}var browser$2,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$2;hasRequiredBrowser$2=1;var K=requireElliptic(),J=requireBn$1();browser$2=function(Ae){return new oe(Ae)};var ne={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};ne.p224=ne.secp224r1,ne.p256=ne.secp256r1=ne.prime256v1,ne.p192=ne.secp192r1=ne.prime192v1,ne.p384=ne.secp384r1,ne.p521=ne.secp521r1;function oe(ue){this.curveType=ne[ue],this.curveType||(this.curveType={name:ue}),this.curve=new K.ec(this.curveType.name),this.keys=void 0}oe.prototype.generateKeys=function(ue,Ae){return this.keys=this.curve.genKeyPair(),this.getPublicKey(ue,Ae)},oe.prototype.computeSecret=function(ue,Ae,pe){Ae=Ae||"utf8",Buffer.isBuffer(ue)||(ue=new Buffer(ue,Ae));var ve=this.curve.keyFromPublic(ue).getPublic(),me=ve.mul(this.keys.getPrivate()).getX();return ce(me,pe,this.curveType.byteLength)},oe.prototype.getPublicKey=function(ue,Ae){var pe=this.keys.getPublic(Ae==="compressed",!0);return Ae==="hybrid"&&(pe[pe.length-1]%2?pe[0]=7:pe[0]=6),ce(pe,ue)},oe.prototype.getPrivateKey=function(ue){return ce(this.keys.getPrivate(),ue)},oe.prototype.setPublicKey=function(ue,Ae){return Ae=Ae||"utf8",Buffer.isBuffer(ue)||(ue=new Buffer(ue,Ae)),this.keys._importPublic(ue),this},oe.prototype.setPrivateKey=function(ue,Ae){Ae=Ae||"utf8",Buffer.isBuffer(ue)||(ue=new Buffer(ue,Ae));var pe=new J(ue);return pe=pe.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(pe),this};function ce(ue,Ae,pe){Array.isArray(ue)||(ue=ue.toArray());var ve=new Buffer(ue);if(pe&&ve.length<pe){var me=new Buffer(pe-ve.length);me.fill(0),ve=Buffer.concat([me,ve])}return Ae?ve.toString(Ae):ve}return browser$2}var browser$1={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var K=requireBrowser$9(),J=requireSafeBuffer$1().Buffer;mgf=function(oe,ce){for(var ue=J.alloc(0),Ae=0,pe;ue.length<ce;)pe=ne(Ae++),ue=J.concat([ue,K("sha1").update(oe).update(pe).digest()]);return ue.slice(0,ce)};function ne(oe){var ce=J.allocUnsafe(4);return ce.writeUInt32BE(oe,0),ce}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(J,ne){for(var oe=J.length,ce=-1;++ce<oe;)J[ce]^=ne[ce];return J}),xor}var bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(K){(function(J,ne){function oe(qe,Se){if(!qe)throw new Error(Se||"Assertion failed")}function ce(qe,Se){qe.super_=Se;var Re=function(){};Re.prototype=Se.prototype,qe.prototype=new Re,qe.prototype.constructor=qe}function ue(qe,Se,Re){if(ue.isBN(qe))return qe;this.negative=0,this.words=null,this.length=0,this.red=null,qe!==null&&((Se==="le"||Se==="be")&&(Re=Se,Se=10),this._init(qe||0,Se||10,Re||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(Se){return Se instanceof ue?!0:Se!==null&&typeof Se=="object"&&Se.constructor.wordSize===ue.wordSize&&Array.isArray(Se.words)},ue.max=function(Se,Re){return Se.cmp(Re)>0?Se:Re},ue.min=function(Se,Re){return Se.cmp(Re)<0?Se:Re},ue.prototype._init=function(Se,Re,Be){if(typeof Se=="number")return this._initNumber(Se,Re,Be);if(typeof Se=="object")return this._initArray(Se,Re,Be);Re==="hex"&&(Re=16),oe(Re===(Re|0)&&Re>=2&&Re<=36),Se=Se.toString().replace(/\s+/g,"");var Ne=0;Se[0]==="-"&&(Ne++,this.negative=1),Ne<Se.length&&(Re===16?this._parseHex(Se,Ne,Be):(this._parseBase(Se,Re,Ne),Be==="le"&&this._initArray(this.toArray(),Re,Be)))},ue.prototype._initNumber=function(Se,Re,Be){Se<0&&(this.negative=1,Se=-Se),Se<67108864?(this.words=[Se&67108863],this.length=1):Se<4503599627370496?(this.words=[Se&67108863,Se/67108864&67108863],this.length=2):(oe(Se<9007199254740992),this.words=[Se&67108863,Se/67108864&67108863,1],this.length=3),Be==="le"&&this._initArray(this.toArray(),Re,Be)},ue.prototype._initArray=function(Se,Re,Be){if(oe(typeof Se.length=="number"),Se.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Se.length/3),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue,Ge,Ye=0;if(Be==="be")for(Ne=Se.length-1,Ue=0;Ne>=0;Ne-=3)Ge=Se[Ne]|Se[Ne-1]<<8|Se[Ne-2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);else if(Be==="le")for(Ne=0,Ue=0;Ne<Se.length;Ne+=3)Ge=Se[Ne]|Se[Ne+1]<<8|Se[Ne+2]<<16,this.words[Ue]|=Ge<<Ye&67108863,this.words[Ue+1]=Ge>>>26-Ye&67108863,Ye+=24,Ye>=26&&(Ye-=26,Ue++);return this.strip()};function pe(qe,Se){var Re=qe.charCodeAt(Se);return Re>=65&&Re<=70?Re-55:Re>=97&&Re<=102?Re-87:Re-48&15}function ve(qe,Se,Re){var Be=pe(qe,Re);return Re-1>=Se&&(Be|=pe(qe,Re-1)<<4),Be}ue.prototype._parseHex=function(Se,Re,Be){this.length=Math.ceil((Se.length-Re)/6),this.words=new Array(this.length);for(var Ne=0;Ne<this.length;Ne++)this.words[Ne]=0;var Ue=0,Ge=0,Ye;if(Be==="be")for(Ne=Se.length-1;Ne>=Re;Ne-=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8;else{var Qe=Se.length-Re;for(Ne=Qe%2===0?Re+1:Re;Ne<Se.length;Ne+=2)Ye=ve(Se,Re,Ne)<<Ue,this.words[Ge]|=Ye&67108863,Ue>=18?(Ue-=18,Ge+=1,this.words[Ge]|=Ye>>>26):Ue+=8}this.strip()};function me(qe,Se,Re,Be){for(var Ne=0,Ue=Math.min(qe.length,Re),Ge=Se;Ge<Ue;Ge++){var Ye=qe.charCodeAt(Ge)-48;Ne*=Be,Ye>=49?Ne+=Ye-49+10:Ye>=17?Ne+=Ye-17+10:Ne+=Ye}return Ne}ue.prototype._parseBase=function(Se,Re,Be){this.words=[0],this.length=1;for(var Ne=0,Ue=1;Ue<=67108863;Ue*=Re)Ne++;Ne--,Ue=Ue/Re|0;for(var Ge=Se.length-Be,Ye=Ge%Ne,Qe=Math.min(Ge,Ge-Ye)+Be,Te=0,Ke=Be;Ke<Qe;Ke+=Ne)Te=me(Se,Ke,Ke+Ne,Re),this.imuln(Ue),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te);if(Ye!==0){var rt=1;for(Te=me(Se,Ke,Se.length,Re),Ke=0;Ke<Ye;Ke++)rt*=Re;this.imuln(rt),this.words[0]+Te<67108864?this.words[0]+=Te:this._iaddn(Te)}this.strip()},ue.prototype.copy=function(Se){Se.words=new Array(this.length);for(var Re=0;Re<this.length;Re++)Se.words[Re]=this.words[Re];Se.length=this.length,Se.negative=this.negative,Se.red=this.red},ue.prototype.clone=function(){var Se=new ue(null);return this.copy(Se),Se},ue.prototype._expand=function(Se){for(;this.length<Se;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],xe=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(Se,Re){Se=Se||10,Re=Re|0||1;var Be;if(Se===16||Se==="hex"){Be="";for(var Ne=0,Ue=0,Ge=0;Ge<this.length;Ge++){var Ye=this.words[Ge],Qe=((Ye<<Ne|Ue)&16777215).toString(16);Ue=Ye>>>24-Ne&16777215,Ue!==0||Ge!==this.length-1?Be=ge[6-Qe.length]+Qe+Be:Be=Qe+Be,Ne+=2,Ne>=26&&(Ne-=26,Ge--)}for(Ue!==0&&(Be=Ue.toString(16)+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}if(Se===(Se|0)&&Se>=2&&Se<=36){var Te=ye[Se],Ke=xe[Se];Be="";var rt=this.clone();for(rt.negative=0;!rt.isZero();){var it=rt.modn(Ke).toString(Se);rt=rt.idivn(Ke),rt.isZero()?Be=it+Be:Be=ge[Te-it.length]+it+Be}for(this.isZero()&&(Be="0"+Be);Be.length%Re!==0;)Be="0"+Be;return this.negative!==0&&(Be="-"+Be),Be}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var Se=this.words[0];return this.length===2?Se+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Se+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Se:Se},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(Se,Re){return oe(typeof Ae<"u"),this.toArrayLike(Ae,Se,Re)},ue.prototype.toArray=function(Se,Re){return this.toArrayLike(Array,Se,Re)},ue.prototype.toArrayLike=function(Se,Re,Be){var Ne=this.byteLength(),Ue=Be||Math.max(1,Ne);oe(Ne<=Ue,"byte array longer than desired length"),oe(Ue>0,"Requested array length <= 0"),this.strip();var Ge=Re==="le",Ye=new Se(Ue),Qe,Te,Ke=this.clone();if(Ge){for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Te]=Qe;for(;Te<Ue;Te++)Ye[Te]=0}else{for(Te=0;Te<Ue-Ne;Te++)Ye[Te]=0;for(Te=0;!Ke.isZero();Te++)Qe=Ke.andln(255),Ke.iushrn(8),Ye[Ue-Te-1]=Qe}return Ye},Math.clz32?ue.prototype._countBits=function(Se){return 32-Math.clz32(Se)}:ue.prototype._countBits=function(Se){var Re=Se,Be=0;return Re>=4096&&(Be+=13,Re>>>=13),Re>=64&&(Be+=7,Re>>>=7),Re>=8&&(Be+=4,Re>>>=4),Re>=2&&(Be+=2,Re>>>=2),Be+Re},ue.prototype._zeroBits=function(Se){if(Se===0)return 26;var Re=Se,Be=0;return Re&8191||(Be+=13,Re>>>=13),Re&127||(Be+=7,Re>>>=7),Re&15||(Be+=4,Re>>>=4),Re&3||(Be+=2,Re>>>=2),Re&1||Be++,Be},ue.prototype.bitLength=function(){var Se=this.words[this.length-1],Re=this._countBits(Se);return(this.length-1)*26+Re};function _e(qe){for(var Se=new Array(qe.bitLength()),Re=0;Re<Se.length;Re++){var Be=Re/26|0,Ne=Re%26;Se[Re]=(qe.words[Be]&1<<Ne)>>>Ne}return Se}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Se=0,Re=0;Re<this.length;Re++){var Be=this._zeroBits(this.words[Re]);if(Se+=Be,Be!==26)break}return Se},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(Se){return this.negative!==0?this.abs().inotn(Se).iaddn(1):this.clone()},ue.prototype.fromTwos=function(Se){return this.testn(Se-1)?this.notn(Se).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(Se){for(;this.length<Se.length;)this.words[this.length++]=0;for(var Re=0;Re<Se.length;Re++)this.words[Re]=this.words[Re]|Se.words[Re];return this.strip()},ue.prototype.ior=function(Se){return oe((this.negative|Se.negative)===0),this.iuor(Se)},ue.prototype.or=function(Se){return this.length>Se.length?this.clone().ior(Se):Se.clone().ior(this)},ue.prototype.uor=function(Se){return this.length>Se.length?this.clone().iuor(Se):Se.clone().iuor(this)},ue.prototype.iuand=function(Se){var Re;this.length>Se.length?Re=Se:Re=this;for(var Be=0;Be<Re.length;Be++)this.words[Be]=this.words[Be]&Se.words[Be];return this.length=Re.length,this.strip()},ue.prototype.iand=function(Se){return oe((this.negative|Se.negative)===0),this.iuand(Se)},ue.prototype.and=function(Se){return this.length>Se.length?this.clone().iand(Se):Se.clone().iand(this)},ue.prototype.uand=function(Se){return this.length>Se.length?this.clone().iuand(Se):Se.clone().iuand(this)},ue.prototype.iuxor=function(Se){var Re,Be;this.length>Se.length?(Re=this,Be=Se):(Re=Se,Be=this);for(var Ne=0;Ne<Be.length;Ne++)this.words[Ne]=Re.words[Ne]^Be.words[Ne];if(this!==Re)for(;Ne<Re.length;Ne++)this.words[Ne]=Re.words[Ne];return this.length=Re.length,this.strip()},ue.prototype.ixor=function(Se){return oe((this.negative|Se.negative)===0),this.iuxor(Se)},ue.prototype.xor=function(Se){return this.length>Se.length?this.clone().ixor(Se):Se.clone().ixor(this)},ue.prototype.uxor=function(Se){return this.length>Se.length?this.clone().iuxor(Se):Se.clone().iuxor(this)},ue.prototype.inotn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Math.ceil(Se/26)|0,Be=Se%26;this._expand(Re),Be>0&&Re--;for(var Ne=0;Ne<Re;Ne++)this.words[Ne]=~this.words[Ne]&67108863;return Be>0&&(this.words[Ne]=~this.words[Ne]&67108863>>26-Be),this.strip()},ue.prototype.notn=function(Se){return this.clone().inotn(Se)},ue.prototype.setn=function(Se,Re){oe(typeof Se=="number"&&Se>=0);var Be=Se/26|0,Ne=Se%26;return this._expand(Be+1),Re?this.words[Be]=this.words[Be]|1<<Ne:this.words[Be]=this.words[Be]&~(1<<Ne),this.strip()},ue.prototype.iadd=function(Se){var Re;if(this.negative!==0&&Se.negative===0)return this.negative=0,Re=this.isub(Se),this.negative^=1,this._normSign();if(this.negative===0&&Se.negative!==0)return Se.negative=0,Re=this.isub(Se),Se.negative=1,Re._normSign();var Be,Ne;this.length>Se.length?(Be=this,Ne=Se):(Be=Se,Ne=this);for(var Ue=0,Ge=0;Ge<Ne.length;Ge++)Re=(Be.words[Ge]|0)+(Ne.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;for(;Ue!==0&&Ge<Be.length;Ge++)Re=(Be.words[Ge]|0)+Ue,this.words[Ge]=Re&67108863,Ue=Re>>>26;if(this.length=Be.length,Ue!==0)this.words[this.length]=Ue,this.length++;else if(Be!==this)for(;Ge<Be.length;Ge++)this.words[Ge]=Be.words[Ge];return this},ue.prototype.add=function(Se){var Re;return Se.negative!==0&&this.negative===0?(Se.negative=0,Re=this.sub(Se),Se.negative^=1,Re):Se.negative===0&&this.negative!==0?(this.negative=0,Re=Se.sub(this),this.negative=1,Re):this.length>Se.length?this.clone().iadd(Se):Se.clone().iadd(this)},ue.prototype.isub=function(Se){if(Se.negative!==0){Se.negative=0;var Re=this.iadd(Se);return Se.negative=1,Re._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Se),this.negative=1,this._normSign();var Be=this.cmp(Se);if(Be===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ne,Ue;Be>0?(Ne=this,Ue=Se):(Ne=Se,Ue=this);for(var Ge=0,Ye=0;Ye<Ue.length;Ye++)Re=(Ne.words[Ye]|0)-(Ue.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;for(;Ge!==0&&Ye<Ne.length;Ye++)Re=(Ne.words[Ye]|0)+Ge,Ge=Re>>26,this.words[Ye]=Re&67108863;if(Ge===0&&Ye<Ne.length&&Ne!==this)for(;Ye<Ne.length;Ye++)this.words[Ye]=Ne.words[Ye];return this.length=Math.max(this.length,Ye),Ne!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(Se){return this.clone().isub(Se)};function $e(qe,Se,Re){Re.negative=Se.negative^qe.negative;var Be=qe.length+Se.length|0;Re.length=Be,Be=Be-1|0;var Ne=qe.words[0]|0,Ue=Se.words[0]|0,Ge=Ne*Ue,Ye=Ge&67108863,Qe=Ge/67108864|0;Re.words[0]=Ye;for(var Te=1;Te<Be;Te++){for(var Ke=Qe>>>26,rt=Qe&67108863,it=Math.min(Te,Se.length-1),at=Math.max(0,Te-qe.length+1);at<=it;at++){var lt=Te-at|0;Ne=qe.words[lt]|0,Ue=Se.words[at]|0,Ge=Ne*Ue+rt,Ke+=Ge/67108864|0,rt=Ge&67108863}Re.words[Te]=rt|0,Qe=Ke|0}return Qe!==0?Re.words[Te]=Qe|0:Re.length--,Re.strip()}var Ie=function(Se,Re,Be){var Ne=Se.words,Ue=Re.words,Ge=Be.words,Ye=0,Qe,Te,Ke,rt=Ne[0]|0,it=rt&8191,at=rt>>>13,lt=Ne[1]|0,ct=lt&8191,ot=lt>>>13,ft=Ne[2]|0,dt=ft&8191,mt=ft>>>13,kt=Ne[3]|0,wt=kt&8191,Et=kt>>>13,Ot=Ne[4]|0,Rt=Ot&8191,gt=Ot>>>13,$t=Ne[5]|0,pt=$t&8191,vt=$t>>>13,Mt=Ne[6]|0,St=Mt&8191,_t=Mt>>>13,Xt=Ne[7]|0,Tt=Xt&8191,Dt=Xt>>>13,Ht=Ne[8]|0,Bt=Ht&8191,It=Ht>>>13,zt=Ne[9]|0,Pt=zt&8191,Vt=zt>>>13,vr=Ue[0]|0,qt=vr&8191,er=vr>>>13,yr=Ue[1]|0,Lt=yr&8191,jt=yr>>>13,fr=Ue[2]|0,Gt=fr&8191,Jt=fr>>>13,ar=Ue[3]|0,Wt=ar&8191,nr=ar>>>13,Er=Ue[4]|0,Zt=Er&8191,ir=Er>>>13,Ir=Ue[5]|0,tr=Ir&8191,cr=Ir>>>13,Or=Ue[6]|0,sr=Or&8191,dr=Or>>>13,Dr=Ue[7]|0,lr=Dr&8191,hr=Dr>>>13,Yr=Ue[8]|0,ur=Yr&8191,pr=Yr>>>13,Jr=Ue[9]|0,Yt=Jr&8191,or=Jr>>>13;Be.negative=Se.negative^Re.negative,Be.length=19,Qe=Math.imul(it,qt),Te=Math.imul(it,er),Te=Te+Math.imul(at,qt)|0,Ke=Math.imul(at,er);var Fr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,Qe=Math.imul(ct,qt),Te=Math.imul(ct,er),Te=Te+Math.imul(ot,qt)|0,Ke=Math.imul(ot,er),Qe=Qe+Math.imul(it,Lt)|0,Te=Te+Math.imul(it,jt)|0,Te=Te+Math.imul(at,Lt)|0,Ke=Ke+Math.imul(at,jt)|0;var kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(kr>>>26)|0,kr&=67108863,Qe=Math.imul(dt,qt),Te=Math.imul(dt,er),Te=Te+Math.imul(mt,qt)|0,Ke=Math.imul(mt,er),Qe=Qe+Math.imul(ct,Lt)|0,Te=Te+Math.imul(ct,jt)|0,Te=Te+Math.imul(ot,Lt)|0,Ke=Ke+Math.imul(ot,jt)|0,Qe=Qe+Math.imul(it,Gt)|0,Te=Te+Math.imul(it,Jt)|0,Te=Te+Math.imul(at,Gt)|0,Ke=Ke+Math.imul(at,Jt)|0;var Kr=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,Qe=Math.imul(wt,qt),Te=Math.imul(wt,er),Te=Te+Math.imul(Et,qt)|0,Ke=Math.imul(Et,er),Qe=Qe+Math.imul(dt,Lt)|0,Te=Te+Math.imul(dt,jt)|0,Te=Te+Math.imul(mt,Lt)|0,Ke=Ke+Math.imul(mt,jt)|0,Qe=Qe+Math.imul(ct,Gt)|0,Te=Te+Math.imul(ct,Jt)|0,Te=Te+Math.imul(ot,Gt)|0,Ke=Ke+Math.imul(ot,Jt)|0,Qe=Qe+Math.imul(it,Wt)|0,Te=Te+Math.imul(it,nr)|0,Te=Te+Math.imul(at,Wt)|0,Ke=Ke+Math.imul(at,nr)|0;var cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(cn>>>26)|0,cn&=67108863,Qe=Math.imul(Rt,qt),Te=Math.imul(Rt,er),Te=Te+Math.imul(gt,qt)|0,Ke=Math.imul(gt,er),Qe=Qe+Math.imul(wt,Lt)|0,Te=Te+Math.imul(wt,jt)|0,Te=Te+Math.imul(Et,Lt)|0,Ke=Ke+Math.imul(Et,jt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Te=Te+Math.imul(dt,Jt)|0,Te=Te+Math.imul(mt,Gt)|0,Ke=Ke+Math.imul(mt,Jt)|0,Qe=Qe+Math.imul(ct,Wt)|0,Te=Te+Math.imul(ct,nr)|0,Te=Te+Math.imul(ot,Wt)|0,Ke=Ke+Math.imul(ot,nr)|0,Qe=Qe+Math.imul(it,Zt)|0,Te=Te+Math.imul(it,ir)|0,Te=Te+Math.imul(at,Zt)|0,Ke=Ke+Math.imul(at,ir)|0;var An=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(An>>>26)|0,An&=67108863,Qe=Math.imul(pt,qt),Te=Math.imul(pt,er),Te=Te+Math.imul(vt,qt)|0,Ke=Math.imul(vt,er),Qe=Qe+Math.imul(Rt,Lt)|0,Te=Te+Math.imul(Rt,jt)|0,Te=Te+Math.imul(gt,Lt)|0,Ke=Ke+Math.imul(gt,jt)|0,Qe=Qe+Math.imul(wt,Gt)|0,Te=Te+Math.imul(wt,Jt)|0,Te=Te+Math.imul(Et,Gt)|0,Ke=Ke+Math.imul(Et,Jt)|0,Qe=Qe+Math.imul(dt,Wt)|0,Te=Te+Math.imul(dt,nr)|0,Te=Te+Math.imul(mt,Wt)|0,Ke=Ke+Math.imul(mt,nr)|0,Qe=Qe+Math.imul(ct,Zt)|0,Te=Te+Math.imul(ct,ir)|0,Te=Te+Math.imul(ot,Zt)|0,Ke=Ke+Math.imul(ot,ir)|0,Qe=Qe+Math.imul(it,tr)|0,Te=Te+Math.imul(it,cr)|0,Te=Te+Math.imul(at,tr)|0,Ke=Ke+Math.imul(at,cr)|0;var _n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(_n>>>26)|0,_n&=67108863,Qe=Math.imul(St,qt),Te=Math.imul(St,er),Te=Te+Math.imul(_t,qt)|0,Ke=Math.imul(_t,er),Qe=Qe+Math.imul(pt,Lt)|0,Te=Te+Math.imul(pt,jt)|0,Te=Te+Math.imul(vt,Lt)|0,Ke=Ke+Math.imul(vt,jt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Te=Te+Math.imul(Rt,Jt)|0,Te=Te+Math.imul(gt,Gt)|0,Ke=Ke+Math.imul(gt,Jt)|0,Qe=Qe+Math.imul(wt,Wt)|0,Te=Te+Math.imul(wt,nr)|0,Te=Te+Math.imul(Et,Wt)|0,Ke=Ke+Math.imul(Et,nr)|0,Qe=Qe+Math.imul(dt,Zt)|0,Te=Te+Math.imul(dt,ir)|0,Te=Te+Math.imul(mt,Zt)|0,Ke=Ke+Math.imul(mt,ir)|0,Qe=Qe+Math.imul(ct,tr)|0,Te=Te+Math.imul(ct,cr)|0,Te=Te+Math.imul(ot,tr)|0,Ke=Ke+Math.imul(ot,cr)|0,Qe=Qe+Math.imul(it,sr)|0,Te=Te+Math.imul(it,dr)|0,Te=Te+Math.imul(at,sr)|0,Ke=Ke+Math.imul(at,dr)|0;var wn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(wn>>>26)|0,wn&=67108863,Qe=Math.imul(Tt,qt),Te=Math.imul(Tt,er),Te=Te+Math.imul(Dt,qt)|0,Ke=Math.imul(Dt,er),Qe=Qe+Math.imul(St,Lt)|0,Te=Te+Math.imul(St,jt)|0,Te=Te+Math.imul(_t,Lt)|0,Ke=Ke+Math.imul(_t,jt)|0,Qe=Qe+Math.imul(pt,Gt)|0,Te=Te+Math.imul(pt,Jt)|0,Te=Te+Math.imul(vt,Gt)|0,Ke=Ke+Math.imul(vt,Jt)|0,Qe=Qe+Math.imul(Rt,Wt)|0,Te=Te+Math.imul(Rt,nr)|0,Te=Te+Math.imul(gt,Wt)|0,Ke=Ke+Math.imul(gt,nr)|0,Qe=Qe+Math.imul(wt,Zt)|0,Te=Te+Math.imul(wt,ir)|0,Te=Te+Math.imul(Et,Zt)|0,Ke=Ke+Math.imul(Et,ir)|0,Qe=Qe+Math.imul(dt,tr)|0,Te=Te+Math.imul(dt,cr)|0,Te=Te+Math.imul(mt,tr)|0,Ke=Ke+Math.imul(mt,cr)|0,Qe=Qe+Math.imul(ct,sr)|0,Te=Te+Math.imul(ct,dr)|0,Te=Te+Math.imul(ot,sr)|0,Ke=Ke+Math.imul(ot,dr)|0,Qe=Qe+Math.imul(it,lr)|0,Te=Te+Math.imul(it,hr)|0,Te=Te+Math.imul(at,lr)|0,Ke=Ke+Math.imul(at,hr)|0;var Bn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,Qe=Math.imul(Bt,qt),Te=Math.imul(Bt,er),Te=Te+Math.imul(It,qt)|0,Ke=Math.imul(It,er),Qe=Qe+Math.imul(Tt,Lt)|0,Te=Te+Math.imul(Tt,jt)|0,Te=Te+Math.imul(Dt,Lt)|0,Ke=Ke+Math.imul(Dt,jt)|0,Qe=Qe+Math.imul(St,Gt)|0,Te=Te+Math.imul(St,Jt)|0,Te=Te+Math.imul(_t,Gt)|0,Ke=Ke+Math.imul(_t,Jt)|0,Qe=Qe+Math.imul(pt,Wt)|0,Te=Te+Math.imul(pt,nr)|0,Te=Te+Math.imul(vt,Wt)|0,Ke=Ke+Math.imul(vt,nr)|0,Qe=Qe+Math.imul(Rt,Zt)|0,Te=Te+Math.imul(Rt,ir)|0,Te=Te+Math.imul(gt,Zt)|0,Ke=Ke+Math.imul(gt,ir)|0,Qe=Qe+Math.imul(wt,tr)|0,Te=Te+Math.imul(wt,cr)|0,Te=Te+Math.imul(Et,tr)|0,Ke=Ke+Math.imul(Et,cr)|0,Qe=Qe+Math.imul(dt,sr)|0,Te=Te+Math.imul(dt,dr)|0,Te=Te+Math.imul(mt,sr)|0,Ke=Ke+Math.imul(mt,dr)|0,Qe=Qe+Math.imul(ct,lr)|0,Te=Te+Math.imul(ct,hr)|0,Te=Te+Math.imul(ot,lr)|0,Ke=Ke+Math.imul(ot,hr)|0,Qe=Qe+Math.imul(it,ur)|0,Te=Te+Math.imul(it,pr)|0,Te=Te+Math.imul(at,ur)|0,Ke=Ke+Math.imul(at,pr)|0;var On=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(On>>>26)|0,On&=67108863,Qe=Math.imul(Pt,qt),Te=Math.imul(Pt,er),Te=Te+Math.imul(Vt,qt)|0,Ke=Math.imul(Vt,er),Qe=Qe+Math.imul(Bt,Lt)|0,Te=Te+Math.imul(Bt,jt)|0,Te=Te+Math.imul(It,Lt)|0,Ke=Ke+Math.imul(It,jt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Te=Te+Math.imul(Tt,Jt)|0,Te=Te+Math.imul(Dt,Gt)|0,Ke=Ke+Math.imul(Dt,Jt)|0,Qe=Qe+Math.imul(St,Wt)|0,Te=Te+Math.imul(St,nr)|0,Te=Te+Math.imul(_t,Wt)|0,Ke=Ke+Math.imul(_t,nr)|0,Qe=Qe+Math.imul(pt,Zt)|0,Te=Te+Math.imul(pt,ir)|0,Te=Te+Math.imul(vt,Zt)|0,Ke=Ke+Math.imul(vt,ir)|0,Qe=Qe+Math.imul(Rt,tr)|0,Te=Te+Math.imul(Rt,cr)|0,Te=Te+Math.imul(gt,tr)|0,Ke=Ke+Math.imul(gt,cr)|0,Qe=Qe+Math.imul(wt,sr)|0,Te=Te+Math.imul(wt,dr)|0,Te=Te+Math.imul(Et,sr)|0,Ke=Ke+Math.imul(Et,dr)|0,Qe=Qe+Math.imul(dt,lr)|0,Te=Te+Math.imul(dt,hr)|0,Te=Te+Math.imul(mt,lr)|0,Ke=Ke+Math.imul(mt,hr)|0,Qe=Qe+Math.imul(ct,ur)|0,Te=Te+Math.imul(ct,pr)|0,Te=Te+Math.imul(ot,ur)|0,Ke=Ke+Math.imul(ot,pr)|0,Qe=Qe+Math.imul(it,Yt)|0,Te=Te+Math.imul(it,or)|0,Te=Te+Math.imul(at,Yt)|0,Ke=Ke+Math.imul(at,or)|0;var In=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(In>>>26)|0,In&=67108863,Qe=Math.imul(Pt,Lt),Te=Math.imul(Pt,jt),Te=Te+Math.imul(Vt,Lt)|0,Ke=Math.imul(Vt,jt),Qe=Qe+Math.imul(Bt,Gt)|0,Te=Te+Math.imul(Bt,Jt)|0,Te=Te+Math.imul(It,Gt)|0,Ke=Ke+Math.imul(It,Jt)|0,Qe=Qe+Math.imul(Tt,Wt)|0,Te=Te+Math.imul(Tt,nr)|0,Te=Te+Math.imul(Dt,Wt)|0,Ke=Ke+Math.imul(Dt,nr)|0,Qe=Qe+Math.imul(St,Zt)|0,Te=Te+Math.imul(St,ir)|0,Te=Te+Math.imul(_t,Zt)|0,Ke=Ke+Math.imul(_t,ir)|0,Qe=Qe+Math.imul(pt,tr)|0,Te=Te+Math.imul(pt,cr)|0,Te=Te+Math.imul(vt,tr)|0,Ke=Ke+Math.imul(vt,cr)|0,Qe=Qe+Math.imul(Rt,sr)|0,Te=Te+Math.imul(Rt,dr)|0,Te=Te+Math.imul(gt,sr)|0,Ke=Ke+Math.imul(gt,dr)|0,Qe=Qe+Math.imul(wt,lr)|0,Te=Te+Math.imul(wt,hr)|0,Te=Te+Math.imul(Et,lr)|0,Ke=Ke+Math.imul(Et,hr)|0,Qe=Qe+Math.imul(dt,ur)|0,Te=Te+Math.imul(dt,pr)|0,Te=Te+Math.imul(mt,ur)|0,Ke=Ke+Math.imul(mt,pr)|0,Qe=Qe+Math.imul(ct,Yt)|0,Te=Te+Math.imul(ct,or)|0,Te=Te+Math.imul(ot,Yt)|0,Ke=Ke+Math.imul(ot,or)|0;var Ln=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,Qe=Math.imul(Pt,Gt),Te=Math.imul(Pt,Jt),Te=Te+Math.imul(Vt,Gt)|0,Ke=Math.imul(Vt,Jt),Qe=Qe+Math.imul(Bt,Wt)|0,Te=Te+Math.imul(Bt,nr)|0,Te=Te+Math.imul(It,Wt)|0,Ke=Ke+Math.imul(It,nr)|0,Qe=Qe+Math.imul(Tt,Zt)|0,Te=Te+Math.imul(Tt,ir)|0,Te=Te+Math.imul(Dt,Zt)|0,Ke=Ke+Math.imul(Dt,ir)|0,Qe=Qe+Math.imul(St,tr)|0,Te=Te+Math.imul(St,cr)|0,Te=Te+Math.imul(_t,tr)|0,Ke=Ke+Math.imul(_t,cr)|0,Qe=Qe+Math.imul(pt,sr)|0,Te=Te+Math.imul(pt,dr)|0,Te=Te+Math.imul(vt,sr)|0,Ke=Ke+Math.imul(vt,dr)|0,Qe=Qe+Math.imul(Rt,lr)|0,Te=Te+Math.imul(Rt,hr)|0,Te=Te+Math.imul(gt,lr)|0,Ke=Ke+Math.imul(gt,hr)|0,Qe=Qe+Math.imul(wt,ur)|0,Te=Te+Math.imul(wt,pr)|0,Te=Te+Math.imul(Et,ur)|0,Ke=Ke+Math.imul(Et,pr)|0,Qe=Qe+Math.imul(dt,Yt)|0,Te=Te+Math.imul(dt,or)|0,Te=Te+Math.imul(mt,Yt)|0,Ke=Ke+Math.imul(mt,or)|0;var Tn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Qe=Math.imul(Pt,Wt),Te=Math.imul(Pt,nr),Te=Te+Math.imul(Vt,Wt)|0,Ke=Math.imul(Vt,nr),Qe=Qe+Math.imul(Bt,Zt)|0,Te=Te+Math.imul(Bt,ir)|0,Te=Te+Math.imul(It,Zt)|0,Ke=Ke+Math.imul(It,ir)|0,Qe=Qe+Math.imul(Tt,tr)|0,Te=Te+Math.imul(Tt,cr)|0,Te=Te+Math.imul(Dt,tr)|0,Ke=Ke+Math.imul(Dt,cr)|0,Qe=Qe+Math.imul(St,sr)|0,Te=Te+Math.imul(St,dr)|0,Te=Te+Math.imul(_t,sr)|0,Ke=Ke+Math.imul(_t,dr)|0,Qe=Qe+Math.imul(pt,lr)|0,Te=Te+Math.imul(pt,hr)|0,Te=Te+Math.imul(vt,lr)|0,Ke=Ke+Math.imul(vt,hr)|0,Qe=Qe+Math.imul(Rt,ur)|0,Te=Te+Math.imul(Rt,pr)|0,Te=Te+Math.imul(gt,ur)|0,Ke=Ke+Math.imul(gt,pr)|0,Qe=Qe+Math.imul(wt,Yt)|0,Te=Te+Math.imul(wt,or)|0,Te=Te+Math.imul(Et,Yt)|0,Ke=Ke+Math.imul(Et,or)|0;var Rn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Qe=Math.imul(Pt,Zt),Te=Math.imul(Pt,ir),Te=Te+Math.imul(Vt,Zt)|0,Ke=Math.imul(Vt,ir),Qe=Qe+Math.imul(Bt,tr)|0,Te=Te+Math.imul(Bt,cr)|0,Te=Te+Math.imul(It,tr)|0,Ke=Ke+Math.imul(It,cr)|0,Qe=Qe+Math.imul(Tt,sr)|0,Te=Te+Math.imul(Tt,dr)|0,Te=Te+Math.imul(Dt,sr)|0,Ke=Ke+Math.imul(Dt,dr)|0,Qe=Qe+Math.imul(St,lr)|0,Te=Te+Math.imul(St,hr)|0,Te=Te+Math.imul(_t,lr)|0,Ke=Ke+Math.imul(_t,hr)|0,Qe=Qe+Math.imul(pt,ur)|0,Te=Te+Math.imul(pt,pr)|0,Te=Te+Math.imul(vt,ur)|0,Ke=Ke+Math.imul(vt,pr)|0,Qe=Qe+Math.imul(Rt,Yt)|0,Te=Te+Math.imul(Rt,or)|0,Te=Te+Math.imul(gt,Yt)|0,Ke=Ke+Math.imul(gt,or)|0;var $n=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+($n>>>26)|0,$n&=67108863,Qe=Math.imul(Pt,tr),Te=Math.imul(Pt,cr),Te=Te+Math.imul(Vt,tr)|0,Ke=Math.imul(Vt,cr),Qe=Qe+Math.imul(Bt,sr)|0,Te=Te+Math.imul(Bt,dr)|0,Te=Te+Math.imul(It,sr)|0,Ke=Ke+Math.imul(It,dr)|0,Qe=Qe+Math.imul(Tt,lr)|0,Te=Te+Math.imul(Tt,hr)|0,Te=Te+Math.imul(Dt,lr)|0,Ke=Ke+Math.imul(Dt,hr)|0,Qe=Qe+Math.imul(St,ur)|0,Te=Te+Math.imul(St,pr)|0,Te=Te+Math.imul(_t,ur)|0,Ke=Ke+Math.imul(_t,pr)|0,Qe=Qe+Math.imul(pt,Yt)|0,Te=Te+Math.imul(pt,or)|0,Te=Te+Math.imul(vt,Yt)|0,Ke=Ke+Math.imul(vt,or)|0;var Cn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Qe=Math.imul(Pt,sr),Te=Math.imul(Pt,dr),Te=Te+Math.imul(Vt,sr)|0,Ke=Math.imul(Vt,dr),Qe=Qe+Math.imul(Bt,lr)|0,Te=Te+Math.imul(Bt,hr)|0,Te=Te+Math.imul(It,lr)|0,Ke=Ke+Math.imul(It,hr)|0,Qe=Qe+Math.imul(Tt,ur)|0,Te=Te+Math.imul(Tt,pr)|0,Te=Te+Math.imul(Dt,ur)|0,Ke=Ke+Math.imul(Dt,pr)|0,Qe=Qe+Math.imul(St,Yt)|0,Te=Te+Math.imul(St,or)|0,Te=Te+Math.imul(_t,Yt)|0,Ke=Ke+Math.imul(_t,or)|0;var Sn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Qe=Math.imul(Pt,lr),Te=Math.imul(Pt,hr),Te=Te+Math.imul(Vt,lr)|0,Ke=Math.imul(Vt,hr),Qe=Qe+Math.imul(Bt,ur)|0,Te=Te+Math.imul(Bt,pr)|0,Te=Te+Math.imul(It,ur)|0,Ke=Ke+Math.imul(It,pr)|0,Qe=Qe+Math.imul(Tt,Yt)|0,Te=Te+Math.imul(Tt,or)|0,Te=Te+Math.imul(Dt,Yt)|0,Ke=Ke+Math.imul(Dt,or)|0;var gn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(gn>>>26)|0,gn&=67108863,Qe=Math.imul(Pt,ur),Te=Math.imul(Pt,pr),Te=Te+Math.imul(Vt,ur)|0,Ke=Math.imul(Vt,pr),Qe=Qe+Math.imul(Bt,Yt)|0,Te=Te+Math.imul(Bt,or)|0,Te=Te+Math.imul(It,Yt)|0,Ke=Ke+Math.imul(It,or)|0;var Mn=(Ye+Qe|0)+((Te&8191)<<13)|0;Ye=(Ke+(Te>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Qe=Math.imul(Pt,Yt),Te=Math.imul(Pt,or),Te=Te+Math.imul(Vt,Yt)|0,Ke=Math.imul(Vt,or);var yn=(Ye+Qe|0)+((Te&8191)<<13)|0;return Ye=(Ke+(Te>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ge[0]=Fr,Ge[1]=kr,Ge[2]=Kr,Ge[3]=cn,Ge[4]=An,Ge[5]=_n,Ge[6]=wn,Ge[7]=Bn,Ge[8]=On,Ge[9]=In,Ge[10]=Ln,Ge[11]=Tn,Ge[12]=Rn,Ge[13]=$n,Ge[14]=Cn,Ge[15]=Sn,Ge[16]=gn,Ge[17]=Mn,Ge[18]=yn,Ye!==0&&(Ge[19]=Ye,Be.length++),Be};Math.imul||(Ie=$e);function Fe(qe,Se,Re){Re.negative=Se.negative^qe.negative,Re.length=qe.length+Se.length;for(var Be=0,Ne=0,Ue=0;Ue<Re.length-1;Ue++){var Ge=Ne;Ne=0;for(var Ye=Be&67108863,Qe=Math.min(Ue,Se.length-1),Te=Math.max(0,Ue-qe.length+1);Te<=Qe;Te++){var Ke=Ue-Te,rt=qe.words[Ke]|0,it=Se.words[Te]|0,at=rt*it,lt=at&67108863;Ge=Ge+(at/67108864|0)|0,lt=lt+Ye|0,Ye=lt&67108863,Ge=Ge+(lt>>>26)|0,Ne+=Ge>>>26,Ge&=67108863}Re.words[Ue]=Ye,Be=Ge,Ge=Ne}return Be!==0?Re.words[Ue]=Be:Re.length--,Re.strip()}function ke(qe,Se,Re){var Be=new je;return Be.mulp(qe,Se,Re)}ue.prototype.mulTo=function(Se,Re){var Be,Ne=this.length+Se.length;return this.length===10&&Se.length===10?Be=Ie(this,Se,Re):Ne<63?Be=$e(this,Se,Re):Ne<1024?Be=Fe(this,Se,Re):Be=ke(this,Se,Re),Be};function je(qe,Se){this.x=qe,this.y=Se}je.prototype.makeRBT=function(Se){for(var Re=new Array(Se),Be=ue.prototype._countBits(Se)-1,Ne=0;Ne<Se;Ne++)Re[Ne]=this.revBin(Ne,Be,Se);return Re},je.prototype.revBin=function(Se,Re,Be){if(Se===0||Se===Be-1)return Se;for(var Ne=0,Ue=0;Ue<Re;Ue++)Ne|=(Se&1)<<Re-Ue-1,Se>>=1;return Ne},je.prototype.permute=function(Se,Re,Be,Ne,Ue,Ge){for(var Ye=0;Ye<Ge;Ye++)Ne[Ye]=Re[Se[Ye]],Ue[Ye]=Be[Se[Ye]]},je.prototype.transform=function(Se,Re,Be,Ne,Ue,Ge){this.permute(Ge,Se,Re,Be,Ne,Ue);for(var Ye=1;Ye<Ue;Ye<<=1)for(var Qe=Ye<<1,Te=Math.cos(2*Math.PI/Qe),Ke=Math.sin(2*Math.PI/Qe),rt=0;rt<Ue;rt+=Qe)for(var it=Te,at=Ke,lt=0;lt<Ye;lt++){var ct=Be[rt+lt],ot=Ne[rt+lt],ft=Be[rt+lt+Ye],dt=Ne[rt+lt+Ye],mt=it*ft-at*dt;dt=it*dt+at*ft,ft=mt,Be[rt+lt]=ct+ft,Ne[rt+lt]=ot+dt,Be[rt+lt+Ye]=ct-ft,Ne[rt+lt+Ye]=ot-dt,lt!==Qe&&(mt=Te*it-Ke*at,at=Te*at+Ke*it,it=mt)}},je.prototype.guessLen13b=function(Se,Re){var Be=Math.max(Re,Se)|1,Ne=Be&1,Ue=0;for(Be=Be/2|0;Be;Be=Be>>>1)Ue++;return 1<<Ue+1+Ne},je.prototype.conjugate=function(Se,Re,Be){if(!(Be<=1))for(var Ne=0;Ne<Be/2;Ne++){var Ue=Se[Ne];Se[Ne]=Se[Be-Ne-1],Se[Be-Ne-1]=Ue,Ue=Re[Ne],Re[Ne]=-Re[Be-Ne-1],Re[Be-Ne-1]=-Ue}},je.prototype.normalize13b=function(Se,Re){for(var Be=0,Ne=0;Ne<Re/2;Ne++){var Ue=Math.round(Se[2*Ne+1]/Re)*8192+Math.round(Se[2*Ne]/Re)+Be;Se[Ne]=Ue&67108863,Ue<67108864?Be=0:Be=Ue/67108864|0}return Se},je.prototype.convert13b=function(Se,Re,Be,Ne){for(var Ue=0,Ge=0;Ge<Re;Ge++)Ue=Ue+(Se[Ge]|0),Be[2*Ge]=Ue&8191,Ue=Ue>>>13,Be[2*Ge+1]=Ue&8191,Ue=Ue>>>13;for(Ge=2*Re;Ge<Ne;++Ge)Be[Ge]=0;oe(Ue===0),oe((Ue&-8192)===0)},je.prototype.stub=function(Se){for(var Re=new Array(Se),Be=0;Be<Se;Be++)Re[Be]=0;return Re},je.prototype.mulp=function(Se,Re,Be){var Ne=2*this.guessLen13b(Se.length,Re.length),Ue=this.makeRBT(Ne),Ge=this.stub(Ne),Ye=new Array(Ne),Qe=new Array(Ne),Te=new Array(Ne),Ke=new Array(Ne),rt=new Array(Ne),it=new Array(Ne),at=Be.words;at.length=Ne,this.convert13b(Se.words,Se.length,Ye,Ne),this.convert13b(Re.words,Re.length,Ke,Ne),this.transform(Ye,Ge,Qe,Te,Ne,Ue),this.transform(Ke,Ge,rt,it,Ne,Ue);for(var lt=0;lt<Ne;lt++){var ct=Qe[lt]*rt[lt]-Te[lt]*it[lt];Te[lt]=Qe[lt]*it[lt]+Te[lt]*rt[lt],Qe[lt]=ct}return this.conjugate(Qe,Te,Ne),this.transform(Qe,Te,at,Ge,Ne,Ue),this.conjugate(at,Ge,Ne),this.normalize13b(at,Ne),Be.negative=Se.negative^Re.negative,Be.length=Se.length+Re.length,Be.strip()},ue.prototype.mul=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),this.mulTo(Se,Re)},ue.prototype.mulf=function(Se){var Re=new ue(null);return Re.words=new Array(this.length+Se.length),ke(this,Se,Re)},ue.prototype.imul=function(Se){return this.clone().mulTo(Se,this)},ue.prototype.imuln=function(Se){oe(typeof Se=="number"),oe(Se<67108864);for(var Re=0,Be=0;Be<this.length;Be++){var Ne=(this.words[Be]|0)*Se,Ue=(Ne&67108863)+(Re&67108863);Re>>=26,Re+=Ne/67108864|0,Re+=Ue>>>26,this.words[Be]=Ue&67108863}return Re!==0&&(this.words[Be]=Re,this.length++),this},ue.prototype.muln=function(Se){return this.clone().imuln(Se)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(Se){var Re=_e(Se);if(Re.length===0)return new ue(1);for(var Be=this,Ne=0;Ne<Re.length&&Re[Ne]===0;Ne++,Be=Be.sqr());if(++Ne<Re.length)for(var Ue=Be.sqr();Ne<Re.length;Ne++,Ue=Ue.sqr())Re[Ne]!==0&&(Be=Be.mul(Ue));return Be},ue.prototype.iushln=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=67108863>>>26-Re<<26-Re,Ue;if(Re!==0){var Ge=0;for(Ue=0;Ue<this.length;Ue++){var Ye=this.words[Ue]&Ne,Qe=(this.words[Ue]|0)-Ye<<Re;this.words[Ue]=Qe|Ge,Ge=Ye>>>26-Re}Ge&&(this.words[Ue]=Ge,this.length++)}if(Be!==0){for(Ue=this.length-1;Ue>=0;Ue--)this.words[Ue+Be]=this.words[Ue];for(Ue=0;Ue<Be;Ue++)this.words[Ue]=0;this.length+=Be}return this.strip()},ue.prototype.ishln=function(Se){return oe(this.negative===0),this.iushln(Se)},ue.prototype.iushrn=function(Se,Re,Be){oe(typeof Se=="number"&&Se>=0);var Ne;Re?Ne=(Re-Re%26)/26:Ne=0;var Ue=Se%26,Ge=Math.min((Se-Ue)/26,this.length),Ye=67108863^67108863>>>Ue<<Ue,Qe=Be;if(Ne-=Ge,Ne=Math.max(0,Ne),Qe){for(var Te=0;Te<Ge;Te++)Qe.words[Te]=this.words[Te];Qe.length=Ge}if(Ge!==0)if(this.length>Ge)for(this.length-=Ge,Te=0;Te<this.length;Te++)this.words[Te]=this.words[Te+Ge];else this.words[0]=0,this.length=1;var Ke=0;for(Te=this.length-1;Te>=0&&(Ke!==0||Te>=Ne);Te--){var rt=this.words[Te]|0;this.words[Te]=Ke<<26-Ue|rt>>>Ue,Ke=rt&Ye}return Qe&&Ke!==0&&(Qe.words[Qe.length++]=Ke),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(Se,Re,Be){return oe(this.negative===0),this.iushrn(Se,Re,Be)},ue.prototype.shln=function(Se){return this.clone().ishln(Se)},ue.prototype.ushln=function(Se){return this.clone().iushln(Se)},ue.prototype.shrn=function(Se){return this.clone().ishrn(Se)},ue.prototype.ushrn=function(Se){return this.clone().iushrn(Se)},ue.prototype.testn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return!1;var Ue=this.words[Be];return!!(Ue&Ne)},ue.prototype.imaskn=function(Se){oe(typeof Se=="number"&&Se>=0);var Re=Se%26,Be=(Se-Re)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Be)return this;if(Re!==0&&Be++,this.length=Math.min(Be,this.length),Re!==0){var Ne=67108863^67108863>>>Re<<Re;this.words[this.length-1]&=Ne}return this.strip()},ue.prototype.maskn=function(Se){return this.clone().imaskn(Se)},ue.prototype.iaddn=function(Se){return oe(typeof Se=="number"),oe(Se<67108864),Se<0?this.isubn(-Se):this.negative!==0?this.length===1&&(this.words[0]|0)<Se?(this.words[0]=Se-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Se),this.negative=1,this):this._iaddn(Se)},ue.prototype._iaddn=function(Se){this.words[0]+=Se;for(var Re=0;Re<this.length&&this.words[Re]>=67108864;Re++)this.words[Re]-=67108864,Re===this.length-1?this.words[Re+1]=1:this.words[Re+1]++;return this.length=Math.max(this.length,Re+1),this},ue.prototype.isubn=function(Se){if(oe(typeof Se=="number"),oe(Se<67108864),Se<0)return this.iaddn(-Se);if(this.negative!==0)return this.negative=0,this.iaddn(Se),this.negative=1,this;if(this.words[0]-=Se,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Re=0;Re<this.length&&this.words[Re]<0;Re++)this.words[Re]+=67108864,this.words[Re+1]-=1;return this.strip()},ue.prototype.addn=function(Se){return this.clone().iaddn(Se)},ue.prototype.subn=function(Se){return this.clone().isubn(Se)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(Se,Re,Be){var Ne=Se.length+Be,Ue;this._expand(Ne);var Ge,Ye=0;for(Ue=0;Ue<Se.length;Ue++){Ge=(this.words[Ue+Be]|0)+Ye;var Qe=(Se.words[Ue]|0)*Re;Ge-=Qe&67108863,Ye=(Ge>>26)-(Qe/67108864|0),this.words[Ue+Be]=Ge&67108863}for(;Ue<this.length-Be;Ue++)Ge=(this.words[Ue+Be]|0)+Ye,Ye=Ge>>26,this.words[Ue+Be]=Ge&67108863;if(Ye===0)return this.strip();for(oe(Ye===-1),Ye=0,Ue=0;Ue<this.length;Ue++)Ge=-(this.words[Ue]|0)+Ye,Ye=Ge>>26,this.words[Ue]=Ge&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(Se,Re){var Be=this.length-Se.length,Ne=this.clone(),Ue=Se,Ge=Ue.words[Ue.length-1]|0,Ye=this._countBits(Ge);Be=26-Ye,Be!==0&&(Ue=Ue.ushln(Be),Ne.iushln(Be),Ge=Ue.words[Ue.length-1]|0);var Qe=Ne.length-Ue.length,Te;if(Re!=="mod"){Te=new ue(null),Te.length=Qe+1,Te.words=new Array(Te.length);for(var Ke=0;Ke<Te.length;Ke++)Te.words[Ke]=0}var rt=Ne.clone()._ishlnsubmul(Ue,1,Qe);rt.negative===0&&(Ne=rt,Te&&(Te.words[Qe]=1));for(var it=Qe-1;it>=0;it--){var at=(Ne.words[Ue.length+it]|0)*67108864+(Ne.words[Ue.length+it-1]|0);for(at=Math.min(at/Ge|0,67108863),Ne._ishlnsubmul(Ue,at,it);Ne.negative!==0;)at--,Ne.negative=0,Ne._ishlnsubmul(Ue,1,it),Ne.isZero()||(Ne.negative^=1);Te&&(Te.words[it]=at)}return Te&&Te.strip(),Ne.strip(),Re!=="div"&&Be!==0&&Ne.iushrn(Be),{div:Te||null,mod:Ne}},ue.prototype.divmod=function(Se,Re,Be){if(oe(!Se.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ne,Ue,Ge;return this.negative!==0&&Se.negative===0?(Ge=this.neg().divmod(Se,Re),Re!=="mod"&&(Ne=Ge.div.neg()),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.iadd(Se)),{div:Ne,mod:Ue}):this.negative===0&&Se.negative!==0?(Ge=this.divmod(Se.neg(),Re),Re!=="mod"&&(Ne=Ge.div.neg()),{div:Ne,mod:Ge.mod}):this.negative&Se.negative?(Ge=this.neg().divmod(Se.neg(),Re),Re!=="div"&&(Ue=Ge.mod.neg(),Be&&Ue.negative!==0&&Ue.isub(Se)),{div:Ge.div,mod:Ue}):Se.length>this.length||this.cmp(Se)<0?{div:new ue(0),mod:this}:Se.length===1?Re==="div"?{div:this.divn(Se.words[0]),mod:null}:Re==="mod"?{div:null,mod:new ue(this.modn(Se.words[0]))}:{div:this.divn(Se.words[0]),mod:new ue(this.modn(Se.words[0]))}:this._wordDiv(Se,Re)},ue.prototype.div=function(Se){return this.divmod(Se,"div",!1).div},ue.prototype.mod=function(Se){return this.divmod(Se,"mod",!1).mod},ue.prototype.umod=function(Se){return this.divmod(Se,"mod",!0).mod},ue.prototype.divRound=function(Se){var Re=this.divmod(Se);if(Re.mod.isZero())return Re.div;var Be=Re.div.negative!==0?Re.mod.isub(Se):Re.mod,Ne=Se.ushrn(1),Ue=Se.andln(1),Ge=Be.cmp(Ne);return Ge<0||Ue===1&&Ge===0?Re.div:Re.div.negative!==0?Re.div.isubn(1):Re.div.iaddn(1)},ue.prototype.modn=function(Se){oe(Se<=67108863);for(var Re=(1<<26)%Se,Be=0,Ne=this.length-1;Ne>=0;Ne--)Be=(Re*Be+(this.words[Ne]|0))%Se;return Be},ue.prototype.idivn=function(Se){oe(Se<=67108863);for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=(this.words[Be]|0)+Re*67108864;this.words[Be]=Ne/Se|0,Re=Ne%Se}return this.strip()},ue.prototype.divn=function(Se){return this.clone().idivn(Se)},ue.prototype.egcd=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=new ue(0),Ye=new ue(1),Qe=0;Re.isEven()&&Be.isEven();)Re.iushrn(1),Be.iushrn(1),++Qe;for(var Te=Be.clone(),Ke=Re.clone();!Re.isZero();){for(var rt=0,it=1;!(Re.words[0]&it)&&rt<26;++rt,it<<=1);if(rt>0)for(Re.iushrn(rt);rt-- >0;)(Ne.isOdd()||Ue.isOdd())&&(Ne.iadd(Te),Ue.isub(Ke)),Ne.iushrn(1),Ue.iushrn(1);for(var at=0,lt=1;!(Be.words[0]&lt)&&at<26;++at,lt<<=1);if(at>0)for(Be.iushrn(at);at-- >0;)(Ge.isOdd()||Ye.isOdd())&&(Ge.iadd(Te),Ye.isub(Ke)),Ge.iushrn(1),Ye.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ge),Ue.isub(Ye)):(Be.isub(Re),Ge.isub(Ne),Ye.isub(Ue))}return{a:Ge,b:Ye,gcd:Be.iushln(Qe)}},ue.prototype._invmp=function(Se){oe(Se.negative===0),oe(!Se.isZero());var Re=this,Be=Se.clone();Re.negative!==0?Re=Re.umod(Se):Re=Re.clone();for(var Ne=new ue(1),Ue=new ue(0),Ge=Be.clone();Re.cmpn(1)>0&&Be.cmpn(1)>0;){for(var Ye=0,Qe=1;!(Re.words[0]&Qe)&&Ye<26;++Ye,Qe<<=1);if(Ye>0)for(Re.iushrn(Ye);Ye-- >0;)Ne.isOdd()&&Ne.iadd(Ge),Ne.iushrn(1);for(var Te=0,Ke=1;!(Be.words[0]&Ke)&&Te<26;++Te,Ke<<=1);if(Te>0)for(Be.iushrn(Te);Te-- >0;)Ue.isOdd()&&Ue.iadd(Ge),Ue.iushrn(1);Re.cmp(Be)>=0?(Re.isub(Be),Ne.isub(Ue)):(Be.isub(Re),Ue.isub(Ne))}var rt;return Re.cmpn(1)===0?rt=Ne:rt=Ue,rt.cmpn(0)<0&&rt.iadd(Se),rt},ue.prototype.gcd=function(Se){if(this.isZero())return Se.abs();if(Se.isZero())return this.abs();var Re=this.clone(),Be=Se.clone();Re.negative=0,Be.negative=0;for(var Ne=0;Re.isEven()&&Be.isEven();Ne++)Re.iushrn(1),Be.iushrn(1);do{for(;Re.isEven();)Re.iushrn(1);for(;Be.isEven();)Be.iushrn(1);var Ue=Re.cmp(Be);if(Ue<0){var Ge=Re;Re=Be,Be=Ge}else if(Ue===0||Be.cmpn(1)===0)break;Re.isub(Be)}while(!0);return Be.iushln(Ne)},ue.prototype.invm=function(Se){return this.egcd(Se).a.umod(Se)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(Se){return this.words[0]&Se},ue.prototype.bincn=function(Se){oe(typeof Se=="number");var Re=Se%26,Be=(Se-Re)/26,Ne=1<<Re;if(this.length<=Be)return this._expand(Be+1),this.words[Be]|=Ne,this;for(var Ue=Ne,Ge=Be;Ue!==0&&Ge<this.length;Ge++){var Ye=this.words[Ge]|0;Ye+=Ue,Ue=Ye>>>26,Ye&=67108863,this.words[Ge]=Ye}return Ue!==0&&(this.words[Ge]=Ue,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(Se){var Re=Se<0;if(this.negative!==0&&!Re)return-1;if(this.negative===0&&Re)return 1;this.strip();var Be;if(this.length>1)Be=1;else{Re&&(Se=-Se),oe(Se<=67108863,"Number is too big");var Ne=this.words[0]|0;Be=Ne===Se?0:Ne<Se?-1:1}return this.negative!==0?-Be|0:Be},ue.prototype.cmp=function(Se){if(this.negative!==0&&Se.negative===0)return-1;if(this.negative===0&&Se.negative!==0)return 1;var Re=this.ucmp(Se);return this.negative!==0?-Re|0:Re},ue.prototype.ucmp=function(Se){if(this.length>Se.length)return 1;if(this.length<Se.length)return-1;for(var Re=0,Be=this.length-1;Be>=0;Be--){var Ne=this.words[Be]|0,Ue=Se.words[Be]|0;if(Ne!==Ue){Ne<Ue?Re=-1:Ne>Ue&&(Re=1);break}}return Re},ue.prototype.gtn=function(Se){return this.cmpn(Se)===1},ue.prototype.gt=function(Se){return this.cmp(Se)===1},ue.prototype.gten=function(Se){return this.cmpn(Se)>=0},ue.prototype.gte=function(Se){return this.cmp(Se)>=0},ue.prototype.ltn=function(Se){return this.cmpn(Se)===-1},ue.prototype.lt=function(Se){return this.cmp(Se)===-1},ue.prototype.lten=function(Se){return this.cmpn(Se)<=0},ue.prototype.lte=function(Se){return this.cmp(Se)<=0},ue.prototype.eqn=function(Se){return this.cmpn(Se)===0},ue.prototype.eq=function(Se){return this.cmp(Se)===0},ue.red=function(Se){return new tt(Se)},ue.prototype.toRed=function(Se){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),Se.convertTo(this)._forceRed(Se)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(Se){return this.red=Se,this},ue.prototype.forceRed=function(Se){return oe(!this.red,"Already a number in reduction context"),this._forceRed(Se)},ue.prototype.redAdd=function(Se){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,Se)},ue.prototype.redIAdd=function(Se){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Se)},ue.prototype.redSub=function(Se){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,Se)},ue.prototype.redISub=function(Se){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,Se)},ue.prototype.redShl=function(Se){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,Se)},ue.prototype.redMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.mul(this,Se)},ue.prototype.redIMul=function(Se){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Se),this.red.imul(this,Se)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(Se){return oe(this.red&&!Se.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Se)};var We={k256:null,p224:null,p192:null,p25519:null};function ze(qe,Se){this.name=qe,this.p=new ue(Se,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var Se=new ue(null);return Se.words=new Array(Math.ceil(this.n/13)),Se},ze.prototype.ireduce=function(Se){var Re=Se,Be;do this.split(Re,this.tmp),Re=this.imulK(Re),Re=Re.iadd(this.tmp),Be=Re.bitLength();while(Be>this.n);var Ne=Be<this.n?-1:Re.ucmp(this.p);return Ne===0?(Re.words[0]=0,Re.length=1):Ne>0?Re.isub(this.p):Re.strip!==void 0?Re.strip():Re._strip(),Re},ze.prototype.split=function(Se,Re){Se.iushrn(this.n,0,Re)},ze.prototype.imulK=function(Se){return Se.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(Se,Re){for(var Be=4194303,Ne=Math.min(Se.length,9),Ue=0;Ue<Ne;Ue++)Re.words[Ue]=Se.words[Ue];if(Re.length=Ne,Se.length<=9){Se.words[0]=0,Se.length=1;return}var Ge=Se.words[9];for(Re.words[Re.length++]=Ge&Be,Ue=10;Ue<Se.length;Ue++){var Ye=Se.words[Ue]|0;Se.words[Ue-10]=(Ye&Be)<<4|Ge>>>22,Ge=Ye}Ge>>>=22,Se.words[Ue-10]=Ge,Ge===0&&Se.length>10?Se.length-=10:Se.length-=9},Xe.prototype.imulK=function(Se){Se.words[Se.length]=0,Se.words[Se.length+1]=0,Se.length+=2;for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=Se.words[Be]|0;Re+=Ne*977,Se.words[Be]=Re&67108863,Re=Ne*64+(Re/67108864|0)}return Se.words[Se.length-1]===0&&(Se.length--,Se.words[Se.length-1]===0&&Se.length--),Se};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function nt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(nt,ze);function et(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(et,ze),et.prototype.imulK=function(Se){for(var Re=0,Be=0;Be<Se.length;Be++){var Ne=(Se.words[Be]|0)*19+Re,Ue=Ne&67108863;Ne>>>=26,Se.words[Be]=Ue,Re=Ne}return Re!==0&&(Se.words[Se.length++]=Re),Se},ue._prime=function(Se){if(We[Se])return We[Se];var Re;if(Se==="k256")Re=new Xe;else if(Se==="p224")Re=new Je;else if(Se==="p192")Re=new nt;else if(Se==="p25519")Re=new et;else throw new Error("Unknown prime "+Se);return We[Se]=Re,Re};function tt(qe){if(typeof qe=="string"){var Se=ue._prime(qe);this.m=Se.p,this.prime=Se}else oe(qe.gtn(1),"modulus must be greater than 1"),this.m=qe,this.prime=null}tt.prototype._verify1=function(Se){oe(Se.negative===0,"red works only with positives"),oe(Se.red,"red works only with red numbers")},tt.prototype._verify2=function(Se,Re){oe((Se.negative|Re.negative)===0,"red works only with positives"),oe(Se.red&&Se.red===Re.red,"red works only with red numbers")},tt.prototype.imod=function(Se){return this.prime?this.prime.ireduce(Se)._forceRed(this):Se.umod(this.m)._forceRed(this)},tt.prototype.neg=function(Se){return Se.isZero()?Se.clone():this.m.sub(Se)._forceRed(this)},tt.prototype.add=function(Se,Re){this._verify2(Se,Re);var Be=Se.add(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be._forceRed(this)},tt.prototype.iadd=function(Se,Re){this._verify2(Se,Re);var Be=Se.iadd(Re);return Be.cmp(this.m)>=0&&Be.isub(this.m),Be},tt.prototype.sub=function(Se,Re){this._verify2(Se,Re);var Be=Se.sub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be._forceRed(this)},tt.prototype.isub=function(Se,Re){this._verify2(Se,Re);var Be=Se.isub(Re);return Be.cmpn(0)<0&&Be.iadd(this.m),Be},tt.prototype.shl=function(Se,Re){return this._verify1(Se),this.imod(Se.ushln(Re))},tt.prototype.imul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.imul(Re))},tt.prototype.mul=function(Se,Re){return this._verify2(Se,Re),this.imod(Se.mul(Re))},tt.prototype.isqr=function(Se){return this.imul(Se,Se.clone())},tt.prototype.sqr=function(Se){return this.mul(Se,Se)},tt.prototype.sqrt=function(Se){if(Se.isZero())return Se.clone();var Re=this.m.andln(3);if(oe(Re%2===1),Re===3){var Be=this.m.add(new ue(1)).iushrn(2);return this.pow(Se,Be)}for(var Ne=this.m.subn(1),Ue=0;!Ne.isZero()&&Ne.andln(1)===0;)Ue++,Ne.iushrn(1);oe(!Ne.isZero());var Ge=new ue(1).toRed(this),Ye=Ge.redNeg(),Qe=this.m.subn(1).iushrn(1),Te=this.m.bitLength();for(Te=new ue(2*Te*Te).toRed(this);this.pow(Te,Qe).cmp(Ye)!==0;)Te.redIAdd(Ye);for(var Ke=this.pow(Te,Ne),rt=this.pow(Se,Ne.addn(1).iushrn(1)),it=this.pow(Se,Ne),at=Ue;it.cmp(Ge)!==0;){for(var lt=it,ct=0;lt.cmp(Ge)!==0;ct++)lt=lt.redSqr();oe(ct<at);var ot=this.pow(Ke,new ue(1).iushln(at-ct-1));rt=rt.redMul(ot),Ke=ot.redSqr(),it=it.redMul(Ke),at=ct}return rt},tt.prototype.invm=function(Se){var Re=Se._invmp(this.m);return Re.negative!==0?(Re.negative=0,this.imod(Re).redNeg()):this.imod(Re)},tt.prototype.pow=function(Se,Re){if(Re.isZero())return new ue(1).toRed(this);if(Re.cmpn(1)===0)return Se.clone();var Be=4,Ne=new Array(1<<Be);Ne[0]=new ue(1).toRed(this),Ne[1]=Se;for(var Ue=2;Ue<Ne.length;Ue++)Ne[Ue]=this.mul(Ne[Ue-1],Se);var Ge=Ne[0],Ye=0,Qe=0,Te=Re.bitLength()%26;for(Te===0&&(Te=26),Ue=Re.length-1;Ue>=0;Ue--){for(var Ke=Re.words[Ue],rt=Te-1;rt>=0;rt--){var it=Ke>>rt&1;if(Ge!==Ne[0]&&(Ge=this.sqr(Ge)),it===0&&Ye===0){Qe=0;continue}Ye<<=1,Ye|=it,Qe++,!(Qe!==Be&&(Ue!==0||rt!==0))&&(Ge=this.mul(Ge,Ne[Ye]),Qe=0,Ye=0)}Te=26}return Ge},tt.prototype.convertTo=function(Se){var Re=Se.umod(this.m);return Re===Se?Re.clone():Re},tt.prototype.convertFrom=function(Se){var Re=Se.clone();return Re.red=null,Re},ue.mont=function(Se){return new st(Se)};function st(qe){tt.call(this,qe),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(st,tt),st.prototype.convertTo=function(Se){return this.imod(Se.ushln(this.shift))},st.prototype.convertFrom=function(Se){var Re=this.imod(Se.mul(this.rinv));return Re.red=null,Re},st.prototype.imul=function(Se,Re){if(Se.isZero()||Re.isZero())return Se.words[0]=0,Se.length=1,Se;var Be=Se.imul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.mul=function(Se,Re){if(Se.isZero()||Re.isZero())return new ue(0)._forceRed(this);var Be=Se.mul(Re),Ne=Be.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ue=Be.isub(Ne).iushrn(this.shift),Ge=Ue;return Ue.cmp(this.m)>=0?Ge=Ue.isub(this.m):Ue.cmpn(0)<0&&(Ge=Ue.iadd(this.m)),Ge._forceRed(this)},st.prototype.invm=function(Se){var Re=this.imod(Se._invmp(this.m).mul(this.r2));return Re._forceRed(this)}})(K,commonjsGlobal)}(bn)),bn.exports}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var K=requireBn(),J=requireSafeBuffer$1().Buffer;function ne(oe,ce){return J.from(oe.toRed(K.mont(ce.modulus)).redPow(new K(ce.publicExponent)).fromRed().toArray())}return withPublic_1=ne,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var K=requireParseAsn1(),J=requireBrowser$a(),ne=requireBrowser$9(),oe=requireMgf(),ce=requireXor(),ue=requireBn(),Ae=requireWithPublic(),pe=requireBrowserifyRsa(),ve=requireSafeBuffer$1().Buffer;publicEncrypt=function(_e,$e,Ie){var Fe;_e.padding?Fe=_e.padding:Ie?Fe=1:Fe=4;var ke=K(_e),je;if(Fe===4)je=me(ke,$e);else if(Fe===1)je=ge(ke,$e,Ie);else if(Fe===3){if(je=new ue($e),je.cmp(ke.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return Ie?pe(je,ke):Ae(je,ke)};function me(xe,_e){var $e=xe.modulus.byteLength(),Ie=_e.length,Fe=ne("sha1").update(ve.alloc(0)).digest(),ke=Fe.length,je=2*ke;if(Ie>$e-je-2)throw new Error("message too long");var We=ve.alloc($e-Ie-je-2),ze=$e-ke-1,Xe=J(ke),Je=ce(ve.concat([Fe,We,ve.alloc(1,1),_e],ze),oe(Xe,ze)),nt=ce(Xe,oe(Je,ke));return new ue(ve.concat([ve.alloc(1),nt,Je],$e))}function ge(xe,_e,$e){var Ie=_e.length,Fe=xe.modulus.byteLength();if(Ie>Fe-11)throw new Error("message too long");var ke;return $e?ke=ve.alloc(Fe-Ie-3,255):ke=ye(Fe-Ie-3),new ue(ve.concat([ve.from([0,$e?1:2]),ke,ve.alloc(1),_e],Fe))}function ye(xe){for(var _e=ve.allocUnsafe(xe),$e=0,Ie=J(xe*2),Fe=0,ke;$e<xe;)Fe===Ie.length&&(Ie=J(xe*2),Fe=0),ke=Ie[Fe++],ke&&(_e[$e++]=ke);return _e}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var K=requireParseAsn1(),J=requireMgf(),ne=requireXor(),oe=requireBn(),ce=requireBrowserifyRsa(),ue=requireBrowser$9(),Ae=requireWithPublic(),pe=requireSafeBuffer$1().Buffer;privateDecrypt=function(xe,_e,$e){var Ie;xe.padding?Ie=xe.padding:$e?Ie=1:Ie=4;var Fe=K(xe),ke=Fe.modulus.byteLength();if(_e.length>ke||new oe(_e).cmp(Fe.modulus)>=0)throw new Error("decryption error");var je;$e?je=Ae(new oe(_e),Fe):je=ce(_e,Fe);var We=pe.alloc(ke-je.length);if(je=pe.concat([We,je],ke),Ie===4)return ve(Fe,je);if(Ie===1)return me(Fe,je,$e);if(Ie===3)return je;throw new Error("unknown padding")};function ve(ye,xe){var _e=ye.modulus.byteLength(),$e=ue("sha1").update(pe.alloc(0)).digest(),Ie=$e.length;if(xe[0]!==0)throw new Error("decryption error");var Fe=xe.slice(1,Ie+1),ke=xe.slice(Ie+1),je=ne(Fe,J(ke,Ie)),We=ne(ke,J(je,_e-Ie-1));if(ge($e,We.slice(0,Ie)))throw new Error("decryption error");for(var ze=Ie;We[ze]===0;)ze++;if(We[ze++]!==1)throw new Error("decryption error");return We.slice(ze)}function me(ye,xe,_e){for(var $e=xe.slice(0,2),Ie=2,Fe=0;xe[Ie++]!==0;)if(Ie>=xe.length){Fe++;break}var ke=xe.slice(2,Ie-1);if(($e.toString("hex")!=="0002"&&!_e||$e.toString("hex")!=="0001"&&_e)&&Fe++,ke.length<8&&Fe++,Fe)throw new Error("decryption error");return xe.slice(Ie)}function ge(ye,xe){ye=pe.from(ye),xe=pe.from(xe);var _e=0,$e=ye.length;ye.length!==xe.length&&(_e++,$e=Math.min(ye.length,xe.length));for(var Ie=-1;++Ie<$e;)_e+=ye[Ie]^xe[Ie];return _e}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(K){K.publicEncrypt=requirePublicEncrypt(),K.privateDecrypt=requirePrivateDecrypt(),K.privateEncrypt=function(ne,oe){return K.publicEncrypt(ne,oe,!0)},K.publicDecrypt=function(ne,oe){return K.privateDecrypt(ne,oe,!0)}}(browser$1)),browser$1}var browser={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;function K(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var J=requireSafeBuffer$1(),ne=requireBrowser$a(),oe=J.Buffer,ce=J.kMaxLength,ue=commonjsGlobal.crypto||commonjsGlobal.msCrypto,Ae=Math.pow(2,32)-1;function pe(xe,_e){if(typeof xe!="number"||xe!==xe)throw new TypeError("offset must be a number");if(xe>Ae||xe<0)throw new TypeError("offset must be a uint32");if(xe>ce||xe>_e)throw new RangeError("offset out of range")}function ve(xe,_e,$e){if(typeof xe!="number"||xe!==xe)throw new TypeError("size must be a number");if(xe>Ae||xe<0)throw new TypeError("size must be a uint32");if(xe+_e>$e||xe>ce)throw new RangeError("buffer too small")}ue&&ue.getRandomValues||!process$1.browser?(browser.randomFill=me,browser.randomFillSync=ye):(browser.randomFill=K,browser.randomFillSync=K);function me(xe,_e,$e,Ie){if(!oe.isBuffer(xe)&&!(xe instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof _e=="function")Ie=_e,_e=0,$e=xe.length;else if(typeof $e=="function")Ie=$e,$e=xe.length-_e;else if(typeof Ie!="function")throw new TypeError('"cb" argument must be a function');return pe(_e,xe.length),ve($e,_e,xe.length),ge(xe,_e,$e,Ie)}function ge(xe,_e,$e,Ie){if(process$1.browser){var Fe=xe.buffer,ke=new Uint8Array(Fe,_e,$e);if(ue.getRandomValues(ke),Ie){process$1.nextTick(function(){Ie(null,xe)});return}return xe}if(Ie){ne($e,function(We,ze){if(We)return Ie(We);ze.copy(xe,_e),Ie(null,xe)});return}var je=ne($e);return je.copy(xe,_e),xe}function ye(xe,_e,$e){if(typeof _e>"u"&&(_e=0),!oe.isBuffer(xe)&&!(xe instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return pe(_e,xe.length),$e===void 0&&($e=xe.length-_e),ve($e,_e,xe.length),ge(xe,_e,$e)}return browser}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$a(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var K=requireAlgos(),J=Object.keys(K),ne=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(J);cryptoBrowserify.getHashes=function(){return ne};var oe=requireBrowser$7();cryptoBrowserify.pbkdf2=oe.pbkdf2,cryptoBrowserify.pbkdf2Sync=oe.pbkdf2Sync;var ce=requireBrowser$5();cryptoBrowserify.Cipher=ce.Cipher,cryptoBrowserify.createCipher=ce.createCipher,cryptoBrowserify.Cipheriv=ce.Cipheriv,cryptoBrowserify.createCipheriv=ce.createCipheriv,cryptoBrowserify.Decipher=ce.Decipher,cryptoBrowserify.createDecipher=ce.createDecipher,cryptoBrowserify.Decipheriv=ce.Decipheriv,cryptoBrowserify.createDecipheriv=ce.createDecipheriv,cryptoBrowserify.getCiphers=ce.getCiphers,cryptoBrowserify.listCiphers=ce.listCiphers;var ue=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=ue.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=ue.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=ue.getDiffieHellman,cryptoBrowserify.createDiffieHellman=ue.createDiffieHellman,cryptoBrowserify.DiffieHellman=ue.DiffieHellman;var Ae=requireBrowser$3();cryptoBrowserify.createSign=Ae.createSign,cryptoBrowserify.Sign=Ae.Sign,cryptoBrowserify.createVerify=Ae.createVerify,cryptoBrowserify.Verify=Ae.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var pe=requireBrowser$1();cryptoBrowserify.publicEncrypt=pe.publicEncrypt,cryptoBrowserify.privateEncrypt=pe.privateEncrypt,cryptoBrowserify.publicDecrypt=pe.publicDecrypt,cryptoBrowserify.privateDecrypt=pe.privateDecrypt;var ve=requireBrowser();return cryptoBrowserify.randomFill=ve.randomFill,cryptoBrowserify.randomFillSync=ve.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var forge$r=forge$D,pkcs5=forge$r.pkcs5=forge$r.pkcs5||{},crypto$1;forge$r.util.isNodejs&&!forge$r.options.usePureJavaScript&&(crypto$1=requireCryptoBrowserify());forge$r.pbkdf2=pkcs5.pbkdf2=function(K,J,ne,oe,ce,ue){if(typeof ce=="function"&&(ue=ce,ce=null),forge$r.util.isNodejs&&!forge$r.options.usePureJavaScript&&crypto$1.pbkdf2&&(ce===null||typeof ce!="object")&&(crypto$1.pbkdf2Sync.length>4||!ce||ce==="sha1"))return typeof ce!="string"&&(ce="sha1"),K=Buffer.from(K,"binary"),J=Buffer.from(J,"binary"),ue?crypto$1.pbkdf2Sync.length===4?crypto$1.pbkdf2(K,J,ne,oe,function(We,ze){if(We)return ue(We);ue(null,ze.toString("binary"))}):crypto$1.pbkdf2(K,J,ne,oe,ce,function(We,ze){if(We)return ue(We);ue(null,ze.toString("binary"))}):crypto$1.pbkdf2Sync.length===4?crypto$1.pbkdf2Sync(K,J,ne,oe).toString("binary"):crypto$1.pbkdf2Sync(K,J,ne,oe,ce).toString("binary");if((typeof ce>"u"||ce===null)&&(ce="sha1"),typeof ce=="string"){if(!(ce in forge$r.md.algorithms))throw new Error("Unknown hash algorithm: "+ce);ce=forge$r.md[ce].create()}var Ae=ce.digestLength;if(oe>4294967295*Ae){var pe=new Error("Derived key is too long.");if(ue)return ue(pe);throw pe}var ve=Math.ceil(oe/Ae),me=oe-(ve-1)*Ae,ge=forge$r.hmac.create();ge.start(ce,K);var ye="",xe,_e,$e;if(!ue){for(var Ie=1;Ie<=ve;++Ie){ge.start(null,null),ge.update(J),ge.update(forge$r.util.int32ToBytes(Ie)),xe=$e=ge.digest().getBytes();for(var Fe=2;Fe<=ne;++Fe)ge.start(null,null),ge.update($e),_e=ge.digest().getBytes(),xe=forge$r.util.xorBytes(xe,_e,Ae),$e=_e;ye+=Ie<ve?xe:xe.substr(0,me)}return ye}var Ie=1,Fe;function ke(){if(Ie>ve)return ue(null,ye);ge.start(null,null),ge.update(J),ge.update(forge$r.util.int32ToBytes(Ie)),xe=$e=ge.digest().getBytes(),Fe=2,je()}function je(){if(Fe<=ne)return ge.start(null,null),ge.update($e),_e=ge.digest().getBytes(),xe=forge$r.util.xorBytes(xe,_e,Ae),$e=_e,++Fe,forge$r.util.setImmediate(je);ye+=Ie<ve?xe:xe.substr(0,me),++Ie,ke()}ke()};var forge$q=forge$D,sha256=forge$q.sha256=forge$q.sha256||{};forge$q.md.sha256=forge$q.md.algorithms.sha256=sha256;sha256.create=function(){_initialized$2||_init$2();var K=null,J=forge$q.util.createBuffer(),ne=new Array(64),oe={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return oe.start=function(){oe.messageLength=0,oe.fullMessageLength=oe.messageLength64=[];for(var ce=oe.messageLengthSize/4,ue=0;ue<ce;++ue)oe.fullMessageLength.push(0);return J=forge$q.util.createBuffer(),K={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},oe},oe.start(),oe.update=function(ce,ue){ue==="utf8"&&(ce=forge$q.util.encodeUtf8(ce));var Ae=ce.length;oe.messageLength+=Ae,Ae=[Ae/4294967296>>>0,Ae>>>0];for(var pe=oe.fullMessageLength.length-1;pe>=0;--pe)oe.fullMessageLength[pe]+=Ae[1],Ae[1]=Ae[0]+(oe.fullMessageLength[pe]/4294967296>>>0),oe.fullMessageLength[pe]=oe.fullMessageLength[pe]>>>0,Ae[0]=Ae[1]/4294967296>>>0;return J.putBytes(ce),_update$2(K,ne,J),(J.read>2048||J.length()===0)&&J.compact(),oe},oe.digest=function(){var ce=forge$q.util.createBuffer();ce.putBytes(J.bytes());var ue=oe.fullMessageLength[oe.fullMessageLength.length-1]+oe.messageLengthSize,Ae=ue&oe.blockLength-1;ce.putBytes(_padding$2.substr(0,oe.blockLength-Ae));for(var pe,ve,me=oe.fullMessageLength[0]*8,ge=0;ge<oe.fullMessageLength.length-1;++ge)pe=oe.fullMessageLength[ge+1]*8,ve=pe/4294967296>>>0,me+=ve,ce.putInt32(me>>>0),me=pe>>>0;ce.putInt32(me);var ye={h0:K.h0,h1:K.h1,h2:K.h2,h3:K.h3,h4:K.h4,h5:K.h5,h6:K.h6,h7:K.h7};_update$2(ye,ne,ce);var xe=forge$q.util.createBuffer();return xe.putInt32(ye.h0),xe.putInt32(ye.h1),xe.putInt32(ye.h2),xe.putInt32(ye.h3),xe.putInt32(ye.h4),xe.putInt32(ye.h5),xe.putInt32(ye.h6),xe.putInt32(ye.h7),xe},oe};var _padding$2=null,_initialized$2=!1,_k$1=null;function _init$2(){_padding$2="",_padding$2+=forge$q.util.fillString("\0",64),_k$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$2=!0}function _update$2(K,J,ne){for(var oe,ce,ue,Ae,pe,ve,me,ge,ye,xe,_e,$e,Ie,Fe,ke,je=ne.length();je>=64;){for(me=0;me<16;++me)J[me]=ne.getInt32();for(;me<64;++me)oe=J[me-2],oe=(oe>>>17|oe<<15)^(oe>>>19|oe<<13)^oe>>>10,ce=J[me-15],ce=(ce>>>7|ce<<25)^(ce>>>18|ce<<14)^ce>>>3,J[me]=oe+J[me-7]+ce+J[me-16]|0;for(ge=K.h0,ye=K.h1,xe=K.h2,_e=K.h3,$e=K.h4,Ie=K.h5,Fe=K.h6,ke=K.h7,me=0;me<64;++me)Ae=($e>>>6|$e<<26)^($e>>>11|$e<<21)^($e>>>25|$e<<7),pe=Fe^$e&(Ie^Fe),ue=(ge>>>2|ge<<30)^(ge>>>13|ge<<19)^(ge>>>22|ge<<10),ve=ge&ye|xe&(ge^ye),oe=ke+Ae+pe+_k$1[me]+J[me],ce=ue+ve,ke=Fe,Fe=Ie,Ie=$e,$e=_e+oe>>>0,_e=xe,xe=ye,ye=ge,ge=oe+ce>>>0;K.h0=K.h0+ge|0,K.h1=K.h1+ye|0,K.h2=K.h2+xe|0,K.h3=K.h3+_e|0,K.h4=K.h4+$e|0,K.h5=K.h5+Ie|0,K.h6=K.h6+Fe|0,K.h7=K.h7+ke|0,je-=64}}var forge$p=forge$D,_crypto$1=null;forge$p.util.isNodejs&&!forge$p.options.usePureJavaScript&&!process$1.versions["node-webkit"]&&(_crypto$1=requireCryptoBrowserify());var prng=forge$p.prng=forge$p.prng||{};prng.create=function(K){for(var J={plugin:K,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},ne=K.md,oe=new Array(32),ce=0;ce<32;++ce)oe[ce]=ne.create();J.pools=oe,J.pool=0,J.generate=function(me,ge){if(!ge)return J.generateSync(me);var ye=J.plugin.cipher,xe=J.plugin.increment,_e=J.plugin.formatKey,$e=J.plugin.formatSeed,Ie=forge$p.util.createBuffer();J.key=null,Fe();function Fe(ke){if(ke)return ge(ke);if(Ie.length()>=me)return ge(null,Ie.getBytes(me));if(J.generated>1048575&&(J.key=null),J.key===null)return forge$p.util.nextTick(function(){ue(Fe)});var je=ye(J.key,J.seed);J.generated+=je.length,Ie.putBytes(je),J.key=_e(ye(J.key,xe(J.seed))),J.seed=$e(ye(J.key,J.seed)),forge$p.util.setImmediate(Fe)}},J.generateSync=function(me){var ge=J.plugin.cipher,ye=J.plugin.increment,xe=J.plugin.formatKey,_e=J.plugin.formatSeed;J.key=null;for(var $e=forge$p.util.createBuffer();$e.length()<me;){J.generated>1048575&&(J.key=null),J.key===null&&Ae();var Ie=ge(J.key,J.seed);J.generated+=Ie.length,$e.putBytes(Ie),J.key=xe(ge(J.key,ye(J.seed))),J.seed=_e(ge(J.key,J.seed))}return $e.getBytes(me)};function ue(me){if(J.pools[0].messageLength>=32)return pe(),me();var ge=32-J.pools[0].messageLength<<5;J.seedFile(ge,function(ye,xe){if(ye)return me(ye);J.collect(xe),pe(),me()})}function Ae(){if(J.pools[0].messageLength>=32)return pe();var me=32-J.pools[0].messageLength<<5;J.collect(J.seedFileSync(me)),pe()}function pe(){J.reseeds=J.reseeds===4294967295?0:J.reseeds+1;var me=J.plugin.md.create();me.update(J.keyBytes);for(var ge=1,ye=0;ye<32;++ye)J.reseeds%ge===0&&(me.update(J.pools[ye].digest().getBytes()),J.pools[ye].start()),ge=ge<<1;J.keyBytes=me.digest().getBytes(),me.start(),me.update(J.keyBytes);var xe=me.digest().getBytes();J.key=J.plugin.formatKey(J.keyBytes),J.seed=J.plugin.formatSeed(xe),J.generated=0}function ve(me){var ge=null,ye=forge$p.util.globalScope,xe=ye.crypto||ye.msCrypto;xe&&xe.getRandomValues&&(ge=function(Xe){return xe.getRandomValues(Xe)});var _e=forge$p.util.createBuffer();if(ge)for(;_e.length()<me;){var $e=Math.max(1,Math.min(me-_e.length(),65536)/4),Ie=new Uint32Array(Math.floor($e));try{ge(Ie);for(var Fe=0;Fe<Ie.length;++Fe)_e.putInt32(Ie[Fe])}catch(Xe){if(!(typeof QuotaExceededError<"u"&&Xe instanceof QuotaExceededError))throw Xe}}if(_e.length()<me)for(var ke,je,We,ze=Math.floor(Math.random()*65536);_e.length()<me;){je=16807*(ze&65535),ke=16807*(ze>>16),je+=(ke&32767)<<16,je+=ke>>15,je=(je&2147483647)+(je>>31),ze=je&4294967295;for(var Fe=0;Fe<3;++Fe)We=ze>>>(Fe<<3),We^=Math.floor(Math.random()*256),_e.putByte(We&255)}return _e.getBytes(me)}return _crypto$1?(J.seedFile=function(me,ge){_crypto$1.randomBytes(me,function(ye,xe){if(ye)return ge(ye);ge(null,xe.toString())})},J.seedFileSync=function(me){return _crypto$1.randomBytes(me).toString()}):(J.seedFile=function(me,ge){try{ge(null,ve(me))}catch(ye){ge(ye)}},J.seedFileSync=ve),J.collect=function(me){for(var ge=me.length,ye=0;ye<ge;++ye)J.pools[J.pool].update(me.substr(ye,1)),J.pool=J.pool===31?0:J.pool+1},J.collectInt=function(me,ge){for(var ye="",xe=0;xe<ge;xe+=8)ye+=String.fromCharCode(me>>xe&255);J.collect(ye)},J.registerWorker=function(me){if(me===self)J.seedFile=function(ye,xe){function _e($e){var Ie=$e.data;Ie.forge&&Ie.forge.prng&&(self.removeEventListener("message",_e),xe(Ie.forge.prng.err,Ie.forge.prng.bytes))}self.addEventListener("message",_e),self.postMessage({forge:{prng:{needed:ye}}})};else{var ge=function(ye){var xe=ye.data;xe.forge&&xe.forge.prng&&J.seedFile(xe.forge.prng.needed,function(_e,$e){me.postMessage({forge:{prng:{err:_e,bytes:$e}}})})};me.addEventListener("message",ge)}},J};var forge$o=forge$D;(function(){if(forge$o.random&&forge$o.random.getBytes){forge$o.random;return}(function(K){var J={},ne=new Array(4),oe=forge$o.util.createBuffer();J.formatKey=function(ye){var xe=forge$o.util.createBuffer(ye);return ye=new Array(4),ye[0]=xe.getInt32(),ye[1]=xe.getInt32(),ye[2]=xe.getInt32(),ye[3]=xe.getInt32(),forge$o.aes._expandKey(ye,!1)},J.formatSeed=function(ye){var xe=forge$o.util.createBuffer(ye);return ye=new Array(4),ye[0]=xe.getInt32(),ye[1]=xe.getInt32(),ye[2]=xe.getInt32(),ye[3]=xe.getInt32(),ye},J.cipher=function(ye,xe){return forge$o.aes._updateBlock(ye,xe,ne,!1),oe.putInt32(ne[0]),oe.putInt32(ne[1]),oe.putInt32(ne[2]),oe.putInt32(ne[3]),oe.getBytes()},J.increment=function(ye){return++ye[3],ye},J.md=forge$o.md.sha256;function ce(){var ye=forge$o.prng.create(J);return ye.getBytes=function(xe,_e){return ye.generate(xe,_e)},ye.getBytesSync=function(xe){return ye.generate(xe)},ye}var ue=ce(),Ae=null,pe=forge$o.util.globalScope,ve=pe.crypto||pe.msCrypto;if(ve&&ve.getRandomValues&&(Ae=function(ye){return ve.getRandomValues(ye)}),forge$o.options.usePureJavaScript||!forge$o.util.isNodejs&&!Ae){if(ue.collectInt(+new Date,32),typeof navigator<"u"){var me="";for(var ge in navigator)try{typeof navigator[ge]=="string"&&(me+=navigator[ge])}catch{}ue.collect(me),me=null}K&&(K().mousemove(function(ye){ue.collectInt(ye.clientX,16),ue.collectInt(ye.clientY,16)}),K().keypress(function(ye){ue.collectInt(ye.charCode,8)}))}if(!forge$o.random)forge$o.random=ue;else for(var ge in ue)forge$o.random[ge]=ue[ge];forge$o.random.createInstance=ce,forge$o.random})(typeof jQuery<"u"?jQuery:null)})();var forge$n=forge$D,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],rol=function(K,J){return K<<J&65535|(K&65535)>>16-J},ror=function(K,J){return(K&65535)>>J|K<<16-J&65535};forge$n.rc2=forge$n.rc2||{};forge$n.rc2.expandKey=function(K,J){typeof K=="string"&&(K=forge$n.util.createBuffer(K)),J=J||128;var ne=K,oe=K.length(),ce=J,ue=Math.ceil(ce/8),Ae=255>>(ce&7),pe;for(pe=oe;pe<128;pe++)ne.putByte(piTable[ne.at(pe-1)+ne.at(pe-oe)&255]);for(ne.setAt(128-ue,piTable[ne.at(128-ue)&Ae]),pe=127-ue;pe>=0;pe--)ne.setAt(pe,piTable[ne.at(pe+1)^ne.at(pe+ue)]);return ne};var createCipher=function(K,J,ne){var oe=!1,ce=null,ue=null,Ae=null,pe,ve,me,ge,ye=[];for(K=forge$n.rc2.expandKey(K,J),me=0;me<64;me++)ye.push(K.getInt16Le());ne?(pe=function($e){for(me=0;me<4;me++)$e[me]+=ye[ge]+($e[(me+3)%4]&$e[(me+2)%4])+(~$e[(me+3)%4]&$e[(me+1)%4]),$e[me]=rol($e[me],s[me]),ge++},ve=function($e){for(me=0;me<4;me++)$e[me]+=ye[$e[(me+3)%4]&63]}):(pe=function($e){for(me=3;me>=0;me--)$e[me]=ror($e[me],s[me]),$e[me]-=ye[ge]+($e[(me+3)%4]&$e[(me+2)%4])+(~$e[(me+3)%4]&$e[(me+1)%4]),ge--},ve=function($e){for(me=3;me>=0;me--)$e[me]-=ye[$e[(me+3)%4]&63]});var xe=function($e){var Ie=[];for(me=0;me<4;me++){var Fe=ce.getInt16Le();Ae!==null&&(ne?Fe^=Ae.getInt16Le():Ae.putInt16Le(Fe)),Ie.push(Fe&65535)}ge=ne?0:63;for(var ke=0;ke<$e.length;ke++)for(var je=0;je<$e[ke][0];je++)$e[ke][1](Ie);for(me=0;me<4;me++)Ae!==null&&(ne?Ae.putInt16Le(Ie[me]):Ie[me]^=Ae.getInt16Le()),ue.putInt16Le(Ie[me])},_e=null;return _e={start:function($e,Ie){$e&&typeof $e=="string"&&($e=forge$n.util.createBuffer($e)),oe=!1,ce=forge$n.util.createBuffer(),ue=Ie||new forge$n.util.createBuffer,Ae=$e,_e.output=ue},update:function($e){for(oe||ce.putBuffer($e);ce.length()>=8;)xe([[5,pe],[1,ve],[6,pe],[1,ve],[5,pe]])},finish:function($e){var Ie=!0;if(ne)if($e)Ie=$e(8,ce,!ne);else{var Fe=ce.length()===8?8:8-ce.length();ce.fillWithByte(Fe,Fe)}if(Ie&&(oe=!0,_e.update()),!ne&&(Ie=ce.length()===0,Ie))if($e)Ie=$e(8,ue,!ne);else{var ke=ue.length(),je=ue.at(ke-1);je>ke?Ie=!1:ue.truncate(je)}return Ie}},_e};forge$n.rc2.startEncrypting=function(K,J,ne){var oe=forge$n.rc2.createEncryptionCipher(K,128);return oe.start(J,ne),oe};forge$n.rc2.createEncryptionCipher=function(K,J){return createCipher(K,J,!0)};forge$n.rc2.startDecrypting=function(K,J,ne){var oe=forge$n.rc2.createDecryptionCipher(K,128);return oe.start(J,ne),oe};forge$n.rc2.createDecryptionCipher=function(K,J){return createCipher(K,J,!1)};var forge$m=forge$D;forge$m.jsbn=forge$m.jsbn||{};var dbits;function BigInteger$4(K,J,ne){this.data=[],K!=null&&(typeof K=="number"?this.fromNumber(K,J,ne):J==null&&typeof K!="string"?this.fromString(K,256):this.fromString(K,J))}forge$m.jsbn.BigInteger=BigInteger$4;function nbi(){return new BigInteger$4(null)}function am1(K,J,ne,oe,ce,ue){for(;--ue>=0;){var Ae=J*this.data[K++]+ne.data[oe]+ce;ce=Math.floor(Ae/67108864),ne.data[oe++]=Ae&67108863}return ce}function am2(K,J,ne,oe,ce,ue){for(var Ae=J&32767,pe=J>>15;--ue>=0;){var ve=this.data[K]&32767,me=this.data[K++]>>15,ge=pe*ve+me*Ae;ve=Ae*ve+((ge&32767)<<15)+ne.data[oe]+(ce&1073741823),ce=(ve>>>30)+(ge>>>15)+pe*me+(ce>>>30),ne.data[oe++]=ve&1073741823}return ce}function am3(K,J,ne,oe,ce,ue){for(var Ae=J&16383,pe=J>>14;--ue>=0;){var ve=this.data[K]&16383,me=this.data[K++]>>14,ge=pe*ve+me*Ae;ve=Ae*ve+((ge&16383)<<14)+ne.data[oe]+ce,ce=(ve>>28)+(ge>>14)+pe*me,ne.data[oe++]=ve&268435455}return ce}typeof navigator>"u"?(BigInteger$4.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$4.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$4.prototype.am=am1,dbits=26):(BigInteger$4.prototype.am=am3,dbits=28);BigInteger$4.prototype.DB=dbits;BigInteger$4.prototype.DM=(1<<dbits)-1;BigInteger$4.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$4.prototype.FV=Math.pow(2,BI_FP);BigInteger$4.prototype.F1=BI_FP-dbits;BigInteger$4.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr=48;for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr=97;for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr=65;for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(K){return BI_RM.charAt(K)}function intAt(K,J){var ne=BI_RC[K.charCodeAt(J)];return ne??-1}function bnpCopyTo(K){for(var J=this.t-1;J>=0;--J)K.data[J]=this.data[J];K.t=this.t,K.s=this.s}function bnpFromInt(K){this.t=1,this.s=K<0?-1:0,K>0?this.data[0]=K:K<-1?this.data[0]=K+this.DV:this.t=0}function nbv(K){var J=nbi();return J.fromInt(K),J}function bnpFromString(K,J){var ne;if(J==16)ne=4;else if(J==8)ne=3;else if(J==256)ne=8;else if(J==2)ne=1;else if(J==32)ne=5;else if(J==4)ne=2;else{this.fromRadix(K,J);return}this.t=0,this.s=0;for(var oe=K.length,ce=!1,ue=0;--oe>=0;){var Ae=ne==8?K[oe]&255:intAt(K,oe);if(Ae<0){K.charAt(oe)=="-"&&(ce=!0);continue}ce=!1,ue==0?this.data[this.t++]=Ae:ue+ne>this.DB?(this.data[this.t-1]|=(Ae&(1<<this.DB-ue)-1)<<ue,this.data[this.t++]=Ae>>this.DB-ue):this.data[this.t-1]|=Ae<<ue,ue+=ne,ue>=this.DB&&(ue-=this.DB)}ne==8&&K[0]&128&&(this.s=-1,ue>0&&(this.data[this.t-1]|=(1<<this.DB-ue)-1<<ue)),this.clamp(),ce&&BigInteger$4.ZERO.subTo(this,this)}function bnpClamp(){for(var K=this.s&this.DM;this.t>0&&this.data[this.t-1]==K;)--this.t}function bnToString(K){if(this.s<0)return"-"+this.negate().toString(K);var J;if(K==16)J=4;else if(K==8)J=3;else if(K==2)J=1;else if(K==32)J=5;else if(K==4)J=2;else return this.toRadix(K);var ne=(1<<J)-1,oe,ce=!1,ue="",Ae=this.t,pe=this.DB-Ae*this.DB%J;if(Ae-- >0)for(pe<this.DB&&(oe=this.data[Ae]>>pe)>0&&(ce=!0,ue=int2char(oe));Ae>=0;)pe<J?(oe=(this.data[Ae]&(1<<pe)-1)<<J-pe,oe|=this.data[--Ae]>>(pe+=this.DB-J)):(oe=this.data[Ae]>>(pe-=J)&ne,pe<=0&&(pe+=this.DB,--Ae)),oe>0&&(ce=!0),ce&&(ue+=int2char(oe));return ce?ue:"0"}function bnNegate(){var K=nbi();return BigInteger$4.ZERO.subTo(this,K),K}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(K){var J=this.s-K.s;if(J!=0)return J;var ne=this.t;if(J=ne-K.t,J!=0)return this.s<0?-J:J;for(;--ne>=0;)if((J=this.data[ne]-K.data[ne])!=0)return J;return 0}function nbits(K){var J=1,ne;return(ne=K>>>16)!=0&&(K=ne,J+=16),(ne=K>>8)!=0&&(K=ne,J+=8),(ne=K>>4)!=0&&(K=ne,J+=4),(ne=K>>2)!=0&&(K=ne,J+=2),(ne=K>>1)!=0&&(K=ne,J+=1),J}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(K,J){var ne;for(ne=this.t-1;ne>=0;--ne)J.data[ne+K]=this.data[ne];for(ne=K-1;ne>=0;--ne)J.data[ne]=0;J.t=this.t+K,J.s=this.s}function bnpDRShiftTo(K,J){for(var ne=K;ne<this.t;++ne)J.data[ne-K]=this.data[ne];J.t=Math.max(this.t-K,0),J.s=this.s}function bnpLShiftTo(K,J){var ne=K%this.DB,oe=this.DB-ne,ce=(1<<oe)-1,ue=Math.floor(K/this.DB),Ae=this.s<<ne&this.DM,pe;for(pe=this.t-1;pe>=0;--pe)J.data[pe+ue+1]=this.data[pe]>>oe|Ae,Ae=(this.data[pe]&ce)<<ne;for(pe=ue-1;pe>=0;--pe)J.data[pe]=0;J.data[ue]=Ae,J.t=this.t+ue+1,J.s=this.s,J.clamp()}function bnpRShiftTo(K,J){J.s=this.s;var ne=Math.floor(K/this.DB);if(ne>=this.t){J.t=0;return}var oe=K%this.DB,ce=this.DB-oe,ue=(1<<oe)-1;J.data[0]=this.data[ne]>>oe;for(var Ae=ne+1;Ae<this.t;++Ae)J.data[Ae-ne-1]|=(this.data[Ae]&ue)<<ce,J.data[Ae-ne]=this.data[Ae]>>oe;oe>0&&(J.data[this.t-ne-1]|=(this.s&ue)<<ce),J.t=this.t-ne,J.clamp()}function bnpSubTo(K,J){for(var ne=0,oe=0,ce=Math.min(K.t,this.t);ne<ce;)oe+=this.data[ne]-K.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;if(K.t<this.t){for(oe-=K.s;ne<this.t;)oe+=this.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;oe+=this.s}else{for(oe+=this.s;ne<K.t;)oe-=K.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;oe-=K.s}J.s=oe<0?-1:0,oe<-1?J.data[ne++]=this.DV+oe:oe>0&&(J.data[ne++]=oe),J.t=ne,J.clamp()}function bnpMultiplyTo(K,J){var ne=this.abs(),oe=K.abs(),ce=ne.t;for(J.t=ce+oe.t;--ce>=0;)J.data[ce]=0;for(ce=0;ce<oe.t;++ce)J.data[ce+ne.t]=ne.am(0,oe.data[ce],J,ce,0,ne.t);J.s=0,J.clamp(),this.s!=K.s&&BigInteger$4.ZERO.subTo(J,J)}function bnpSquareTo(K){for(var J=this.abs(),ne=K.t=2*J.t;--ne>=0;)K.data[ne]=0;for(ne=0;ne<J.t-1;++ne){var oe=J.am(ne,J.data[ne],K,2*ne,0,1);(K.data[ne+J.t]+=J.am(ne+1,2*J.data[ne],K,2*ne+1,oe,J.t-ne-1))>=J.DV&&(K.data[ne+J.t]-=J.DV,K.data[ne+J.t+1]=1)}K.t>0&&(K.data[K.t-1]+=J.am(ne,J.data[ne],K,2*ne,0,1)),K.s=0,K.clamp()}function bnpDivRemTo(K,J,ne){var oe=K.abs();if(!(oe.t<=0)){var ce=this.abs();if(ce.t<oe.t){J!=null&&J.fromInt(0),ne!=null&&this.copyTo(ne);return}ne==null&&(ne=nbi());var ue=nbi(),Ae=this.s,pe=K.s,ve=this.DB-nbits(oe.data[oe.t-1]);ve>0?(oe.lShiftTo(ve,ue),ce.lShiftTo(ve,ne)):(oe.copyTo(ue),ce.copyTo(ne));var me=ue.t,ge=ue.data[me-1];if(ge!=0){var ye=ge*(1<<this.F1)+(me>1?ue.data[me-2]>>this.F2:0),xe=this.FV/ye,_e=(1<<this.F1)/ye,$e=1<<this.F2,Ie=ne.t,Fe=Ie-me,ke=J??nbi();for(ue.dlShiftTo(Fe,ke),ne.compareTo(ke)>=0&&(ne.data[ne.t++]=1,ne.subTo(ke,ne)),BigInteger$4.ONE.dlShiftTo(me,ke),ke.subTo(ue,ue);ue.t<me;)ue.data[ue.t++]=0;for(;--Fe>=0;){var je=ne.data[--Ie]==ge?this.DM:Math.floor(ne.data[Ie]*xe+(ne.data[Ie-1]+$e)*_e);if((ne.data[Ie]+=ue.am(0,je,ne,Fe,0,me))<je)for(ue.dlShiftTo(Fe,ke),ne.subTo(ke,ne);ne.data[Ie]<--je;)ne.subTo(ke,ne)}J!=null&&(ne.drShiftTo(me,J),Ae!=pe&&BigInteger$4.ZERO.subTo(J,J)),ne.t=me,ne.clamp(),ve>0&&ne.rShiftTo(ve,ne),Ae<0&&BigInteger$4.ZERO.subTo(ne,ne)}}}function bnMod(K){var J=nbi();return this.abs().divRemTo(K,null,J),this.s<0&&J.compareTo(BigInteger$4.ZERO)>0&&K.subTo(J,J),J}function Classic(K){this.m=K}function cConvert(K){return K.s<0||K.compareTo(this.m)>=0?K.mod(this.m):K}function cRevert(K){return K}function cReduce(K){K.divRemTo(this.m,null,K)}function cMulTo(K,J,ne){K.multiplyTo(J,ne),this.reduce(ne)}function cSqrTo(K,J){K.squareTo(J),this.reduce(J)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var K=this.data[0];if(!(K&1))return 0;var J=K&3;return J=J*(2-(K&15)*J)&15,J=J*(2-(K&255)*J)&255,J=J*(2-((K&65535)*J&65535))&65535,J=J*(2-K*J%this.DV)%this.DV,J>0?this.DV-J:-J}function Montgomery(K){this.m=K,this.mp=K.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<K.DB-15)-1,this.mt2=2*K.t}function montConvert(K){var J=nbi();return K.abs().dlShiftTo(this.m.t,J),J.divRemTo(this.m,null,J),K.s<0&&J.compareTo(BigInteger$4.ZERO)>0&&this.m.subTo(J,J),J}function montRevert(K){var J=nbi();return K.copyTo(J),this.reduce(J),J}function montReduce(K){for(;K.t<=this.mt2;)K.data[K.t++]=0;for(var J=0;J<this.m.t;++J){var ne=K.data[J]&32767,oe=ne*this.mpl+((ne*this.mph+(K.data[J]>>15)*this.mpl&this.um)<<15)&K.DM;for(ne=J+this.m.t,K.data[ne]+=this.m.am(0,oe,K,J,0,this.m.t);K.data[ne]>=K.DV;)K.data[ne]-=K.DV,K.data[++ne]++}K.clamp(),K.drShiftTo(this.m.t,K),K.compareTo(this.m)>=0&&K.subTo(this.m,K)}function montSqrTo(K,J){K.squareTo(J),this.reduce(J)}function montMulTo(K,J,ne){K.multiplyTo(J,ne),this.reduce(ne)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(K,J){if(K>4294967295||K<1)return BigInteger$4.ONE;var ne=nbi(),oe=nbi(),ce=J.convert(this),ue=nbits(K)-1;for(ce.copyTo(ne);--ue>=0;)if(J.sqrTo(ne,oe),(K&1<<ue)>0)J.mulTo(oe,ce,ne);else{var Ae=ne;ne=oe,oe=Ae}return J.revert(ne)}function bnModPowInt(K,J){var ne;return K<256||J.isEven()?ne=new Classic(J):ne=new Montgomery(J),this.exp(K,ne)}BigInteger$4.prototype.copyTo=bnpCopyTo;BigInteger$4.prototype.fromInt=bnpFromInt;BigInteger$4.prototype.fromString=bnpFromString;BigInteger$4.prototype.clamp=bnpClamp;BigInteger$4.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$4.prototype.drShiftTo=bnpDRShiftTo;BigInteger$4.prototype.lShiftTo=bnpLShiftTo;BigInteger$4.prototype.rShiftTo=bnpRShiftTo;BigInteger$4.prototype.subTo=bnpSubTo;BigInteger$4.prototype.multiplyTo=bnpMultiplyTo;BigInteger$4.prototype.squareTo=bnpSquareTo;BigInteger$4.prototype.divRemTo=bnpDivRemTo;BigInteger$4.prototype.invDigit=bnpInvDigit;BigInteger$4.prototype.isEven=bnpIsEven;BigInteger$4.prototype.exp=bnpExp;BigInteger$4.prototype.toString=bnToString;BigInteger$4.prototype.negate=bnNegate;BigInteger$4.prototype.abs=bnAbs;BigInteger$4.prototype.compareTo=bnCompareTo;BigInteger$4.prototype.bitLength=bnBitLength;BigInteger$4.prototype.mod=bnMod;BigInteger$4.prototype.modPowInt=bnModPowInt;BigInteger$4.ZERO=nbv(0);BigInteger$4.ONE=nbv(1);function bnClone(){var K=nbi();return this.copyTo(K),K}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(K){return Math.floor(Math.LN2*this.DB/Math.log(K))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(K){if(K==null&&(K=10),this.signum()==0||K<2||K>36)return"0";var J=this.chunkSize(K),ne=Math.pow(K,J),oe=nbv(ne),ce=nbi(),ue=nbi(),Ae="";for(this.divRemTo(oe,ce,ue);ce.signum()>0;)Ae=(ne+ue.intValue()).toString(K).substr(1)+Ae,ce.divRemTo(oe,ce,ue);return ue.intValue().toString(K)+Ae}function bnpFromRadix(K,J){this.fromInt(0),J==null&&(J=10);for(var ne=this.chunkSize(J),oe=Math.pow(J,ne),ce=!1,ue=0,Ae=0,pe=0;pe<K.length;++pe){var ve=intAt(K,pe);if(ve<0){K.charAt(pe)=="-"&&this.signum()==0&&(ce=!0);continue}Ae=J*Ae+ve,++ue>=ne&&(this.dMultiply(oe),this.dAddOffset(Ae,0),ue=0,Ae=0)}ue>0&&(this.dMultiply(Math.pow(J,ue)),this.dAddOffset(Ae,0)),ce&&BigInteger$4.ZERO.subTo(this,this)}function bnpFromNumber(K,J,ne){if(typeof J=="number")if(K<2)this.fromInt(1);else for(this.fromNumber(K,ne),this.testBit(K-1)||this.bitwiseTo(BigInteger$4.ONE.shiftLeft(K-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(J);)this.dAddOffset(2,0),this.bitLength()>K&&this.subTo(BigInteger$4.ONE.shiftLeft(K-1),this);else{var oe=new Array,ce=K&7;oe.length=(K>>3)+1,J.nextBytes(oe),ce>0?oe[0]&=(1<<ce)-1:oe[0]=0,this.fromString(oe,256)}}function bnToByteArray(){var K=this.t,J=new Array;J[0]=this.s;var ne=this.DB-K*this.DB%8,oe,ce=0;if(K-- >0)for(ne<this.DB&&(oe=this.data[K]>>ne)!=(this.s&this.DM)>>ne&&(J[ce++]=oe|this.s<<this.DB-ne);K>=0;)ne<8?(oe=(this.data[K]&(1<<ne)-1)<<8-ne,oe|=this.data[--K]>>(ne+=this.DB-8)):(oe=this.data[K]>>(ne-=8)&255,ne<=0&&(ne+=this.DB,--K)),oe&128&&(oe|=-256),ce==0&&(this.s&128)!=(oe&128)&&++ce,(ce>0||oe!=this.s)&&(J[ce++]=oe);return J}function bnEquals(K){return this.compareTo(K)==0}function bnMin(K){return this.compareTo(K)<0?this:K}function bnMax(K){return this.compareTo(K)>0?this:K}function bnpBitwiseTo(K,J,ne){var oe,ce,ue=Math.min(K.t,this.t);for(oe=0;oe<ue;++oe)ne.data[oe]=J(this.data[oe],K.data[oe]);if(K.t<this.t){for(ce=K.s&this.DM,oe=ue;oe<this.t;++oe)ne.data[oe]=J(this.data[oe],ce);ne.t=this.t}else{for(ce=this.s&this.DM,oe=ue;oe<K.t;++oe)ne.data[oe]=J(ce,K.data[oe]);ne.t=K.t}ne.s=J(this.s,K.s),ne.clamp()}function op_and(K,J){return K&J}function bnAnd(K){var J=nbi();return this.bitwiseTo(K,op_and,J),J}function op_or(K,J){return K|J}function bnOr(K){var J=nbi();return this.bitwiseTo(K,op_or,J),J}function op_xor(K,J){return K^J}function bnXor(K){var J=nbi();return this.bitwiseTo(K,op_xor,J),J}function op_andnot(K,J){return K&~J}function bnAndNot(K){var J=nbi();return this.bitwiseTo(K,op_andnot,J),J}function bnNot(){for(var K=nbi(),J=0;J<this.t;++J)K.data[J]=this.DM&~this.data[J];return K.t=this.t,K.s=~this.s,K}function bnShiftLeft(K){var J=nbi();return K<0?this.rShiftTo(-K,J):this.lShiftTo(K,J),J}function bnShiftRight(K){var J=nbi();return K<0?this.lShiftTo(-K,J):this.rShiftTo(K,J),J}function lbit(K){if(K==0)return-1;var J=0;return K&65535||(K>>=16,J+=16),K&255||(K>>=8,J+=8),K&15||(K>>=4,J+=4),K&3||(K>>=2,J+=2),K&1||++J,J}function bnGetLowestSetBit(){for(var K=0;K<this.t;++K)if(this.data[K]!=0)return K*this.DB+lbit(this.data[K]);return this.s<0?this.t*this.DB:-1}function cbit(K){for(var J=0;K!=0;)K&=K-1,++J;return J}function bnBitCount(){for(var K=0,J=this.s&this.DM,ne=0;ne<this.t;++ne)K+=cbit(this.data[ne]^J);return K}function bnTestBit(K){var J=Math.floor(K/this.DB);return J>=this.t?this.s!=0:(this.data[J]&1<<K%this.DB)!=0}function bnpChangeBit(K,J){var ne=BigInteger$4.ONE.shiftLeft(K);return this.bitwiseTo(ne,J,ne),ne}function bnSetBit(K){return this.changeBit(K,op_or)}function bnClearBit(K){return this.changeBit(K,op_andnot)}function bnFlipBit(K){return this.changeBit(K,op_xor)}function bnpAddTo(K,J){for(var ne=0,oe=0,ce=Math.min(K.t,this.t);ne<ce;)oe+=this.data[ne]+K.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;if(K.t<this.t){for(oe+=K.s;ne<this.t;)oe+=this.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;oe+=this.s}else{for(oe+=this.s;ne<K.t;)oe+=K.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;oe+=K.s}J.s=oe<0?-1:0,oe>0?J.data[ne++]=oe:oe<-1&&(J.data[ne++]=this.DV+oe),J.t=ne,J.clamp()}function bnAdd(K){var J=nbi();return this.addTo(K,J),J}function bnSubtract(K){var J=nbi();return this.subTo(K,J),J}function bnMultiply(K){var J=nbi();return this.multiplyTo(K,J),J}function bnDivide(K){var J=nbi();return this.divRemTo(K,J,null),J}function bnRemainder(K){var J=nbi();return this.divRemTo(K,null,J),J}function bnDivideAndRemainder(K){var J=nbi(),ne=nbi();return this.divRemTo(K,J,ne),new Array(J,ne)}function bnpDMultiply(K){this.data[this.t]=this.am(0,K-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(K,J){if(K!=0){for(;this.t<=J;)this.data[this.t++]=0;for(this.data[J]+=K;this.data[J]>=this.DV;)this.data[J]-=this.DV,++J>=this.t&&(this.data[this.t++]=0),++this.data[J]}}function NullExp(){}function nNop(K){return K}function nMulTo(K,J,ne){K.multiplyTo(J,ne)}function nSqrTo(K,J){K.squareTo(J)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(K){return this.exp(K,new NullExp)}function bnpMultiplyLowerTo(K,J,ne){var oe=Math.min(this.t+K.t,J);for(ne.s=0,ne.t=oe;oe>0;)ne.data[--oe]=0;var ce;for(ce=ne.t-this.t;oe<ce;++oe)ne.data[oe+this.t]=this.am(0,K.data[oe],ne,oe,0,this.t);for(ce=Math.min(K.t,J);oe<ce;++oe)this.am(0,K.data[oe],ne,oe,0,J-oe);ne.clamp()}function bnpMultiplyUpperTo(K,J,ne){--J;var oe=ne.t=this.t+K.t-J;for(ne.s=0;--oe>=0;)ne.data[oe]=0;for(oe=Math.max(J-this.t,0);oe<K.t;++oe)ne.data[this.t+oe-J]=this.am(J-oe,K.data[oe],ne,0,0,this.t+oe-J);ne.clamp(),ne.drShiftTo(1,ne)}function Barrett(K){this.r2=nbi(),this.q3=nbi(),BigInteger$4.ONE.dlShiftTo(2*K.t,this.r2),this.mu=this.r2.divide(K),this.m=K}function barrettConvert(K){if(K.s<0||K.t>2*this.m.t)return K.mod(this.m);if(K.compareTo(this.m)<0)return K;var J=nbi();return K.copyTo(J),this.reduce(J),J}function barrettRevert(K){return K}function barrettReduce(K){for(K.drShiftTo(this.m.t-1,this.r2),K.t>this.m.t+1&&(K.t=this.m.t+1,K.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);K.compareTo(this.r2)<0;)K.dAddOffset(1,this.m.t+1);for(K.subTo(this.r2,K);K.compareTo(this.m)>=0;)K.subTo(this.m,K)}function barrettSqrTo(K,J){K.squareTo(J),this.reduce(J)}function barrettMulTo(K,J,ne){K.multiplyTo(J,ne),this.reduce(ne)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(K,J){var ne=K.bitLength(),oe,ce=nbv(1),ue;if(ne<=0)return ce;ne<18?oe=1:ne<48?oe=3:ne<144?oe=4:ne<768?oe=5:oe=6,ne<8?ue=new Classic(J):J.isEven()?ue=new Barrett(J):ue=new Montgomery(J);var Ae=new Array,pe=3,ve=oe-1,me=(1<<oe)-1;if(Ae[1]=ue.convert(this),oe>1){var ge=nbi();for(ue.sqrTo(Ae[1],ge);pe<=me;)Ae[pe]=nbi(),ue.mulTo(ge,Ae[pe-2],Ae[pe]),pe+=2}var ye=K.t-1,xe,_e=!0,$e=nbi(),Ie;for(ne=nbits(K.data[ye])-1;ye>=0;){for(ne>=ve?xe=K.data[ye]>>ne-ve&me:(xe=(K.data[ye]&(1<<ne+1)-1)<<ve-ne,ye>0&&(xe|=K.data[ye-1]>>this.DB+ne-ve)),pe=oe;!(xe&1);)xe>>=1,--pe;if((ne-=pe)<0&&(ne+=this.DB,--ye),_e)Ae[xe].copyTo(ce),_e=!1;else{for(;pe>1;)ue.sqrTo(ce,$e),ue.sqrTo($e,ce),pe-=2;pe>0?ue.sqrTo(ce,$e):(Ie=ce,ce=$e,$e=Ie),ue.mulTo($e,Ae[xe],ce)}for(;ye>=0&&!(K.data[ye]&1<<ne);)ue.sqrTo(ce,$e),Ie=ce,ce=$e,$e=Ie,--ne<0&&(ne=this.DB-1,--ye)}return ue.revert(ce)}function bnGCD(K){var J=this.s<0?this.negate():this.clone(),ne=K.s<0?K.negate():K.clone();if(J.compareTo(ne)<0){var oe=J;J=ne,ne=oe}var ce=J.getLowestSetBit(),ue=ne.getLowestSetBit();if(ue<0)return J;for(ce<ue&&(ue=ce),ue>0&&(J.rShiftTo(ue,J),ne.rShiftTo(ue,ne));J.signum()>0;)(ce=J.getLowestSetBit())>0&&J.rShiftTo(ce,J),(ce=ne.getLowestSetBit())>0&&ne.rShiftTo(ce,ne),J.compareTo(ne)>=0?(J.subTo(ne,J),J.rShiftTo(1,J)):(ne.subTo(J,ne),ne.rShiftTo(1,ne));return ue>0&&ne.lShiftTo(ue,ne),ne}function bnpModInt(K){if(K<=0)return 0;var J=this.DV%K,ne=this.s<0?K-1:0;if(this.t>0)if(J==0)ne=this.data[0]%K;else for(var oe=this.t-1;oe>=0;--oe)ne=(J*ne+this.data[oe])%K;return ne}function bnModInverse(K){var J=K.isEven();if(this.isEven()&&J||K.signum()==0)return BigInteger$4.ZERO;for(var ne=K.clone(),oe=this.clone(),ce=nbv(1),ue=nbv(0),Ae=nbv(0),pe=nbv(1);ne.signum()!=0;){for(;ne.isEven();)ne.rShiftTo(1,ne),J?((!ce.isEven()||!ue.isEven())&&(ce.addTo(this,ce),ue.subTo(K,ue)),ce.rShiftTo(1,ce)):ue.isEven()||ue.subTo(K,ue),ue.rShiftTo(1,ue);for(;oe.isEven();)oe.rShiftTo(1,oe),J?((!Ae.isEven()||!pe.isEven())&&(Ae.addTo(this,Ae),pe.subTo(K,pe)),Ae.rShiftTo(1,Ae)):pe.isEven()||pe.subTo(K,pe),pe.rShiftTo(1,pe);ne.compareTo(oe)>=0?(ne.subTo(oe,ne),J&&ce.subTo(Ae,ce),ue.subTo(pe,ue)):(oe.subTo(ne,oe),J&&Ae.subTo(ce,Ae),pe.subTo(ue,pe))}if(oe.compareTo(BigInteger$4.ONE)!=0)return BigInteger$4.ZERO;if(pe.compareTo(K)>=0)return pe.subtract(K);if(pe.signum()<0)pe.addTo(K,pe);else return pe;return pe.signum()<0?pe.add(K):pe}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(K){var J,ne=this.abs();if(ne.t==1&&ne.data[0]<=lowprimes[lowprimes.length-1]){for(J=0;J<lowprimes.length;++J)if(ne.data[0]==lowprimes[J])return!0;return!1}if(ne.isEven())return!1;for(J=1;J<lowprimes.length;){for(var oe=lowprimes[J],ce=J+1;ce<lowprimes.length&&oe<lplim;)oe*=lowprimes[ce++];for(oe=ne.modInt(oe);J<ce;)if(oe%lowprimes[J++]==0)return!1}return ne.millerRabin(K)}function bnpMillerRabin(K){var J=this.subtract(BigInteger$4.ONE),ne=J.getLowestSetBit();if(ne<=0)return!1;for(var oe=J.shiftRight(ne),ce=bnGetPrng(),ue,Ae=0;Ae<K;++Ae){do ue=new BigInteger$4(this.bitLength(),ce);while(ue.compareTo(BigInteger$4.ONE)<=0||ue.compareTo(J)>=0);var pe=ue.modPow(oe,this);if(pe.compareTo(BigInteger$4.ONE)!=0&&pe.compareTo(J)!=0){for(var ve=1;ve++<ne&&pe.compareTo(J)!=0;)if(pe=pe.modPowInt(2,this),pe.compareTo(BigInteger$4.ONE)==0)return!1;if(pe.compareTo(J)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(K){for(var J=0;J<K.length;++J)K[J]=Math.floor(Math.random()*256)}}}BigInteger$4.prototype.chunkSize=bnpChunkSize;BigInteger$4.prototype.toRadix=bnpToRadix;BigInteger$4.prototype.fromRadix=bnpFromRadix;BigInteger$4.prototype.fromNumber=bnpFromNumber;BigInteger$4.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$4.prototype.changeBit=bnpChangeBit;BigInteger$4.prototype.addTo=bnpAddTo;BigInteger$4.prototype.dMultiply=bnpDMultiply;BigInteger$4.prototype.dAddOffset=bnpDAddOffset;BigInteger$4.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$4.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$4.prototype.modInt=bnpModInt;BigInteger$4.prototype.millerRabin=bnpMillerRabin;BigInteger$4.prototype.clone=bnClone;BigInteger$4.prototype.intValue=bnIntValue;BigInteger$4.prototype.byteValue=bnByteValue;BigInteger$4.prototype.shortValue=bnShortValue;BigInteger$4.prototype.signum=bnSigNum;BigInteger$4.prototype.toByteArray=bnToByteArray;BigInteger$4.prototype.equals=bnEquals;BigInteger$4.prototype.min=bnMin;BigInteger$4.prototype.max=bnMax;BigInteger$4.prototype.and=bnAnd;BigInteger$4.prototype.or=bnOr;BigInteger$4.prototype.xor=bnXor;BigInteger$4.prototype.andNot=bnAndNot;BigInteger$4.prototype.not=bnNot;BigInteger$4.prototype.shiftLeft=bnShiftLeft;BigInteger$4.prototype.shiftRight=bnShiftRight;BigInteger$4.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$4.prototype.bitCount=bnBitCount;BigInteger$4.prototype.testBit=bnTestBit;BigInteger$4.prototype.setBit=bnSetBit;BigInteger$4.prototype.clearBit=bnClearBit;BigInteger$4.prototype.flipBit=bnFlipBit;BigInteger$4.prototype.add=bnAdd;BigInteger$4.prototype.subtract=bnSubtract;BigInteger$4.prototype.multiply=bnMultiply;BigInteger$4.prototype.divide=bnDivide;BigInteger$4.prototype.remainder=bnRemainder;BigInteger$4.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$4.prototype.modPow=bnModPow;BigInteger$4.prototype.modInverse=bnModInverse;BigInteger$4.prototype.pow=bnPow;BigInteger$4.prototype.gcd=bnGCD;BigInteger$4.prototype.isProbablePrime=bnIsProbablePrime;var forge$l=forge$D,sha1=forge$l.sha1=forge$l.sha1||{};forge$l.md.sha1=forge$l.md.algorithms.sha1=sha1;sha1.create=function(){_initialized$1||_init$1();var K=null,J=forge$l.util.createBuffer(),ne=new Array(80),oe={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return oe.start=function(){oe.messageLength=0,oe.fullMessageLength=oe.messageLength64=[];for(var ce=oe.messageLengthSize/4,ue=0;ue<ce;++ue)oe.fullMessageLength.push(0);return J=forge$l.util.createBuffer(),K={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},oe},oe.start(),oe.update=function(ce,ue){ue==="utf8"&&(ce=forge$l.util.encodeUtf8(ce));var Ae=ce.length;oe.messageLength+=Ae,Ae=[Ae/4294967296>>>0,Ae>>>0];for(var pe=oe.fullMessageLength.length-1;pe>=0;--pe)oe.fullMessageLength[pe]+=Ae[1],Ae[1]=Ae[0]+(oe.fullMessageLength[pe]/4294967296>>>0),oe.fullMessageLength[pe]=oe.fullMessageLength[pe]>>>0,Ae[0]=Ae[1]/4294967296>>>0;return J.putBytes(ce),_update$1(K,ne,J),(J.read>2048||J.length()===0)&&J.compact(),oe},oe.digest=function(){var ce=forge$l.util.createBuffer();ce.putBytes(J.bytes());var ue=oe.fullMessageLength[oe.fullMessageLength.length-1]+oe.messageLengthSize,Ae=ue&oe.blockLength-1;ce.putBytes(_padding$1.substr(0,oe.blockLength-Ae));for(var pe,ve,me=oe.fullMessageLength[0]*8,ge=0;ge<oe.fullMessageLength.length-1;++ge)pe=oe.fullMessageLength[ge+1]*8,ve=pe/4294967296>>>0,me+=ve,ce.putInt32(me>>>0),me=pe>>>0;ce.putInt32(me);var ye={h0:K.h0,h1:K.h1,h2:K.h2,h3:K.h3,h4:K.h4};_update$1(ye,ne,ce);var xe=forge$l.util.createBuffer();return xe.putInt32(ye.h0),xe.putInt32(ye.h1),xe.putInt32(ye.h2),xe.putInt32(ye.h3),xe.putInt32(ye.h4),xe},oe};var _padding$1=null,_initialized$1=!1;function _init$1(){_padding$1="",_padding$1+=forge$l.util.fillString("\0",64),_initialized$1=!0}function _update$1(K,J,ne){for(var oe,ce,ue,Ae,pe,ve,me,ge,ye=ne.length();ye>=64;){for(ce=K.h0,ue=K.h1,Ae=K.h2,pe=K.h3,ve=K.h4,ge=0;ge<16;++ge)oe=ne.getInt32(),J[ge]=oe,me=pe^ue&(Ae^pe),oe=(ce<<5|ce>>>27)+me+ve+1518500249+oe,ve=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<20;++ge)oe=J[ge-3]^J[ge-8]^J[ge-14]^J[ge-16],oe=oe<<1|oe>>>31,J[ge]=oe,me=pe^ue&(Ae^pe),oe=(ce<<5|ce>>>27)+me+ve+1518500249+oe,ve=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<32;++ge)oe=J[ge-3]^J[ge-8]^J[ge-14]^J[ge-16],oe=oe<<1|oe>>>31,J[ge]=oe,me=ue^Ae^pe,oe=(ce<<5|ce>>>27)+me+ve+1859775393+oe,ve=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<40;++ge)oe=J[ge-6]^J[ge-16]^J[ge-28]^J[ge-32],oe=oe<<2|oe>>>30,J[ge]=oe,me=ue^Ae^pe,oe=(ce<<5|ce>>>27)+me+ve+1859775393+oe,ve=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<60;++ge)oe=J[ge-6]^J[ge-16]^J[ge-28]^J[ge-32],oe=oe<<2|oe>>>30,J[ge]=oe,me=ue&Ae|pe&(ue^Ae),oe=(ce<<5|ce>>>27)+me+ve+2400959708+oe,ve=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<80;++ge)oe=J[ge-6]^J[ge-16]^J[ge-28]^J[ge-32],oe=oe<<2|oe>>>30,J[ge]=oe,me=ue^Ae^pe,oe=(ce<<5|ce>>>27)+me+ve+3395469782+oe,ve=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;K.h0=K.h0+ce|0,K.h1=K.h1+ue|0,K.h2=K.h2+Ae|0,K.h3=K.h3+pe|0,K.h4=K.h4+ve|0,ye-=64}}var forge$k=forge$D,pkcs1=forge$k.pkcs1=forge$k.pkcs1||{};pkcs1.encode_rsa_oaep=function(K,J,ne){var oe,ce,ue,Ae;typeof ne=="string"?(oe=ne,ce=arguments[3]||void 0,ue=arguments[4]||void 0):ne&&(oe=ne.label||void 0,ce=ne.seed||void 0,ue=ne.md||void 0,ne.mgf1&&ne.mgf1.md&&(Ae=ne.mgf1.md)),ue?ue.start():ue=forge$k.md.sha1.create(),Ae||(Ae=ue);var pe=Math.ceil(K.n.bitLength()/8),ve=pe-2*ue.digestLength-2;if(J.length>ve){var me=new Error("RSAES-OAEP input message length is too long.");throw me.length=J.length,me.maxLength=ve,me}oe||(oe=""),ue.update(oe,"raw");for(var ge=ue.digest(),ye="",xe=ve-J.length,_e=0;_e<xe;_e++)ye+="\0";var $e=ge.getBytes()+ye+""+J;if(!ce)ce=forge$k.random.getBytes(ue.digestLength);else if(ce.length!==ue.digestLength){var me=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw me.seedLength=ce.length,me.digestLength=ue.digestLength,me}var Ie=rsa_mgf1(ce,pe-ue.digestLength-1,Ae),Fe=forge$k.util.xorBytes($e,Ie,$e.length),ke=rsa_mgf1(Fe,ue.digestLength,Ae),je=forge$k.util.xorBytes(ce,ke,ce.length);return"\0"+je+Fe};pkcs1.decode_rsa_oaep=function(K,J,ne){var oe,ce,ue;typeof ne=="string"?(oe=ne,ce=arguments[3]||void 0):ne&&(oe=ne.label||void 0,ce=ne.md||void 0,ne.mgf1&&ne.mgf1.md&&(ue=ne.mgf1.md));var Ae=Math.ceil(K.n.bitLength()/8);if(J.length!==Ae){var Fe=new Error("RSAES-OAEP encoded message length is invalid.");throw Fe.length=J.length,Fe.expectedLength=Ae,Fe}if(ce===void 0?ce=forge$k.md.sha1.create():ce.start(),ue||(ue=ce),Ae<2*ce.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");oe||(oe=""),ce.update(oe,"raw");for(var pe=ce.digest().getBytes(),ve=J.charAt(0),me=J.substring(1,ce.digestLength+1),ge=J.substring(1+ce.digestLength),ye=rsa_mgf1(ge,ce.digestLength,ue),xe=forge$k.util.xorBytes(me,ye,me.length),_e=rsa_mgf1(xe,Ae-ce.digestLength-1,ue),$e=forge$k.util.xorBytes(ge,_e,ge.length),Ie=$e.substring(0,ce.digestLength),Fe=ve!=="\0",ke=0;ke<ce.digestLength;++ke)Fe|=pe.charAt(ke)!==Ie.charAt(ke);for(var je=1,We=ce.digestLength,ze=ce.digestLength;ze<$e.length;ze++){var Xe=$e.charCodeAt(ze),Je=Xe&1^1,nt=je?65534:0;Fe|=Xe&nt,je=je&Je,We+=je}if(Fe||$e.charCodeAt(We)!==1)throw new Error("Invalid RSAES-OAEP padding.");return $e.substring(We+1)};function rsa_mgf1(K,J,ne){ne||(ne=forge$k.md.sha1.create());for(var oe="",ce=Math.ceil(J/ne.digestLength),ue=0;ue<ce;++ue){var Ae=String.fromCharCode(ue>>24&255,ue>>16&255,ue>>8&255,ue&255);ne.start(),ne.update(K+Ae),oe+=ne.digest().getBytes()}return oe.substring(0,J)}var forge$j=forge$D;(function(){if(forge$j.prime){forge$j.prime;return}var K=forge$j.prime=forge$j.prime||{},J=forge$j.jsbn.BigInteger,ne=[6,4,2,4,2,4,6,2],oe=new J(null);oe.fromInt(30);var ce=function(ye,xe){return ye|xe};K.generateProbablePrime=function(ye,xe,_e){typeof xe=="function"&&(_e=xe,xe={}),xe=xe||{};var $e=xe.algorithm||"PRIMEINC";typeof $e=="string"&&($e={name:$e}),$e.options=$e.options||{};var Ie=xe.prng||forge$j.random,Fe={nextBytes:function(ke){for(var je=Ie.getBytesSync(ke.length),We=0;We<ke.length;++We)ke[We]=je.charCodeAt(We)}};if($e.name==="PRIMEINC")return ue(ye,Fe,$e.options,_e);throw new Error("Invalid prime generation algorithm: "+$e.name)};function ue(ye,xe,_e,$e){return"workers"in _e?ve(ye,xe,_e,$e):Ae(ye,xe,_e,$e)}function Ae(ye,xe,_e,$e){var Ie=me(ye,xe),Fe=0,ke=ge(Ie.bitLength());"millerRabinTests"in _e&&(ke=_e.millerRabinTests);var je=10;"maxBlockTime"in _e&&(je=_e.maxBlockTime),pe(Ie,ye,xe,Fe,ke,je,$e)}function pe(ye,xe,_e,$e,Ie,Fe,ke){var je=+new Date;do{if(ye.bitLength()>xe&&(ye=me(xe,_e)),ye.isProbablePrime(Ie))return ke(null,ye);ye.dAddOffset(ne[$e++%8],0)}while(Fe<0||+new Date-je<Fe);forge$j.util.setImmediate(function(){pe(ye,xe,_e,$e,Ie,Fe,ke)})}function ve(ye,xe,_e,$e){if(typeof Worker>"u")return Ae(ye,xe,_e,$e);var Ie=me(ye,xe),Fe=_e.workers,ke=_e.workLoad||100,je=ke*30/8,We=_e.workerScript||"forge/prime.worker.js";if(Fe===-1)return forge$j.util.estimateCores(function(Xe,Je){Xe&&(Je=2),Fe=Je-1,ze()});ze();function ze(){Fe=Math.max(1,Fe);for(var Xe=[],Je=0;Je<Fe;++Je)Xe[Je]=new Worker(We);for(var Je=0;Je<Fe;++Je)Xe[Je].addEventListener("message",et);var nt=!1;function et(tt){if(!nt){var st=tt.data;if(st.found){for(var qe=0;qe<Xe.length;++qe)Xe[qe].terminate();return nt=!0,$e(null,new J(st.prime,16))}Ie.bitLength()>ye&&(Ie=me(ye,xe));var Se=Ie.toString(16);tt.target.postMessage({hex:Se,workLoad:ke}),Ie.dAddOffset(je,0)}}}}function me(ye,xe){var _e=new J(ye,xe),$e=ye-1;return _e.testBit($e)||_e.bitwiseTo(J.ONE.shiftLeft($e),ce,_e),_e.dAddOffset(31-_e.mod(oe).byteValue(),0),_e}function ge(ye){return ye<=100?27:ye<=150?18:ye<=200?15:ye<=250?12:ye<=300?9:ye<=350?8:ye<=400?7:ye<=500?6:ye<=600?5:ye<=800?4:ye<=1250?3:2}})();var forge$i=forge$D;if(typeof BigInteger$3>"u")var BigInteger$3=forge$i.jsbn.BigInteger;var _crypto=forge$i.util.isNodejs?requireCryptoBrowserify():null,asn1$7=forge$i.asn1,util=forge$i.util;forge$i.pki=forge$i.pki||{};forge$i.pki.rsa=forge$i.rsa=forge$i.rsa||{};var pki$4=forge$i.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator$1={name:"PrivateKeyInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator$2=forge$i.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(K){var J;if(K.algorithm in pki$4.oids)J=pki$4.oids[K.algorithm];else{var ne=new Error("Unknown message digest algorithm.");throw ne.algorithm=K.algorithm,ne}var oe=asn1$7.oidToDer(J).getBytes(),ce=asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[]),ue=asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[]);ue.value.push(asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OID,!1,oe)),ue.value.push(asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.NULL,!1,""));var Ae=asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OCTETSTRING,!1,K.digest().getBytes());return ce.value.push(ue),ce.value.push(Ae),asn1$7.toDer(ce).getBytes()},_modPow=function(K,J,ne){if(ne)return K.modPow(J.e,J.n);if(!J.p||!J.q)return K.modPow(J.d,J.n);J.dP||(J.dP=J.d.mod(J.p.subtract(BigInteger$3.ONE))),J.dQ||(J.dQ=J.d.mod(J.q.subtract(BigInteger$3.ONE))),J.qInv||(J.qInv=J.q.modInverse(J.p));var oe;do oe=new BigInteger$3(forge$i.util.bytesToHex(forge$i.random.getBytes(J.n.bitLength()/8)),16);while(oe.compareTo(J.n)>=0||!oe.gcd(J.n).equals(BigInteger$3.ONE));K=K.multiply(oe.modPow(J.e,J.n)).mod(J.n);for(var ce=K.mod(J.p).modPow(J.dP,J.p),ue=K.mod(J.q).modPow(J.dQ,J.q);ce.compareTo(ue)<0;)ce=ce.add(J.p);var Ae=ce.subtract(ue).multiply(J.qInv).mod(J.p).multiply(J.q).add(ue);return Ae=Ae.multiply(oe.modInverse(J.n)).mod(J.n),Ae};pki$4.rsa.encrypt=function(K,J,ne){var oe=ne,ce,ue=Math.ceil(J.n.bitLength()/8);ne!==!1&&ne!==!0?(oe=ne===2,ce=_encodePkcs1_v1_5(K,J,ne)):(ce=forge$i.util.createBuffer(),ce.putBytes(K));for(var Ae=new BigInteger$3(ce.toHex(),16),pe=_modPow(Ae,J,oe),ve=pe.toString(16),me=forge$i.util.createBuffer(),ge=ue-Math.ceil(ve.length/2);ge>0;)me.putByte(0),--ge;return me.putBytes(forge$i.util.hexToBytes(ve)),me.getBytes()};pki$4.rsa.decrypt=function(K,J,ne,oe){var ce=Math.ceil(J.n.bitLength()/8);if(K.length!==ce){var ue=new Error("Encrypted message length is invalid.");throw ue.length=K.length,ue.expected=ce,ue}var Ae=new BigInteger$3(forge$i.util.createBuffer(K).toHex(),16);if(Ae.compareTo(J.n)>=0)throw new Error("Encrypted message is invalid.");for(var pe=_modPow(Ae,J,ne),ve=pe.toString(16),me=forge$i.util.createBuffer(),ge=ce-Math.ceil(ve.length/2);ge>0;)me.putByte(0),--ge;return me.putBytes(forge$i.util.hexToBytes(ve)),oe!==!1?_decodePkcs1_v1_5(me.getBytes(),J,ne):me.getBytes()};pki$4.rsa.createKeyPairGenerationState=function(K,J,ne){typeof K=="string"&&(K=parseInt(K,10)),K=K||2048,ne=ne||{};var oe=ne.prng||forge$i.random,ce={nextBytes:function(pe){for(var ve=oe.getBytesSync(pe.length),me=0;me<pe.length;++me)pe[me]=ve.charCodeAt(me)}},ue=ne.algorithm||"PRIMEINC",Ae;if(ue==="PRIMEINC")Ae={algorithm:ue,state:0,bits:K,rng:ce,eInt:J||65537,e:new BigInteger$3(null),p:null,q:null,qBits:K>>1,pBits:K-(K>>1),pqState:0,num:null,keys:null},Ae.e.fromInt(Ae.eInt);else throw new Error("Invalid key generation algorithm: "+ue);return Ae};pki$4.rsa.stepKeyPairGenerationState=function(K,J){"algorithm"in K||(K.algorithm="PRIMEINC");var ne=new BigInteger$3(null);ne.fromInt(30);for(var oe=0,ce=function(ye,xe){return ye|xe},ue=+new Date,Ae,pe=0;K.keys===null&&(J<=0||pe<J);){if(K.state===0){var ve=K.p===null?K.pBits:K.qBits,me=ve-1;K.pqState===0?(K.num=new BigInteger$3(ve,K.rng),K.num.testBit(me)||K.num.bitwiseTo(BigInteger$3.ONE.shiftLeft(me),ce,K.num),K.num.dAddOffset(31-K.num.mod(ne).byteValue(),0),oe=0,++K.pqState):K.pqState===1?K.num.bitLength()>ve?K.pqState=0:K.num.isProbablePrime(_getMillerRabinTests(K.num.bitLength()))?++K.pqState:K.num.dAddOffset(GCD_30_DELTA[oe++%8],0):K.pqState===2?K.pqState=K.num.subtract(BigInteger$3.ONE).gcd(K.e).compareTo(BigInteger$3.ONE)===0?3:0:K.pqState===3&&(K.pqState=0,K.p===null?K.p=K.num:K.q=K.num,K.p!==null&&K.q!==null&&++K.state,K.num=null)}else if(K.state===1)K.p.compareTo(K.q)<0&&(K.num=K.p,K.p=K.q,K.q=K.num),++K.state;else if(K.state===2)K.p1=K.p.subtract(BigInteger$3.ONE),K.q1=K.q.subtract(BigInteger$3.ONE),K.phi=K.p1.multiply(K.q1),++K.state;else if(K.state===3)K.phi.gcd(K.e).compareTo(BigInteger$3.ONE)===0?++K.state:(K.p=null,K.q=null,K.state=0);else if(K.state===4)K.n=K.p.multiply(K.q),K.n.bitLength()===K.bits?++K.state:(K.q=null,K.state=0);else if(K.state===5){var ge=K.e.modInverse(K.phi);K.keys={privateKey:pki$4.rsa.setPrivateKey(K.n,K.e,ge,K.p,K.q,ge.mod(K.p1),ge.mod(K.q1),K.q.modInverse(K.p)),publicKey:pki$4.rsa.setPublicKey(K.n,K.e)}}Ae=+new Date,pe+=Ae-ue,ue=Ae}return K.keys!==null};pki$4.rsa.generateKeyPair=function(K,J,ne,oe){if(arguments.length===1?typeof K=="object"?(ne=K,K=void 0):typeof K=="function"&&(oe=K,K=void 0):arguments.length===2?typeof K=="number"?typeof J=="function"?(oe=J,J=void 0):typeof J!="number"&&(ne=J,J=void 0):(ne=K,oe=J,K=void 0,J=void 0):arguments.length===3&&(typeof J=="number"?typeof ne=="function"&&(oe=ne,ne=void 0):(oe=ne,ne=J,J=void 0)),ne=ne||{},K===void 0&&(K=ne.bits||2048),J===void 0&&(J=ne.e||65537),!forge$i.options.usePureJavaScript&&!ne.prng&&K>=256&&K<=16384&&(J===65537||J===3)){if(oe){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:K,publicExponent:J,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(pe,ve,me){if(pe)return oe(pe);oe(null,{privateKey:pki$4.privateKeyFromPem(me),publicKey:pki$4.publicKeyFromPem(ve)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:K,publicExponent:_intToUint8Array(J),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(pe){return util.globalScope.crypto.subtle.exportKey("pkcs8",pe.privateKey)}).then(void 0,function(pe){oe(pe)}).then(function(pe){if(pe){var ve=pki$4.privateKeyFromAsn1(asn1$7.fromDer(forge$i.util.createBuffer(pe)));oe(null,{privateKey:ve,publicKey:pki$4.setRsaPublicKey(ve.n,ve.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var ce=util.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:K,publicExponent:_intToUint8Array(J),hash:{name:"SHA-256"}},!0,["sign","verify"]);ce.oncomplete=function(pe){var ve=pe.target.result,me=util.globalScope.msCrypto.subtle.exportKey("pkcs8",ve.privateKey);me.oncomplete=function(ge){var ye=ge.target.result,xe=pki$4.privateKeyFromAsn1(asn1$7.fromDer(forge$i.util.createBuffer(ye)));oe(null,{privateKey:xe,publicKey:pki$4.setRsaPublicKey(xe.n,xe.e)})},me.onerror=function(ge){oe(ge)}},ce.onerror=function(pe){oe(pe)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var ue=_crypto.generateKeyPairSync("rsa",{modulusLength:K,publicExponent:J,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$4.privateKeyFromPem(ue.privateKey),publicKey:pki$4.publicKeyFromPem(ue.publicKey)}}}var Ae=pki$4.rsa.createKeyPairGenerationState(K,J,ne);if(!oe)return pki$4.rsa.stepKeyPairGenerationState(Ae,0),Ae.keys;_generateKeyPair(Ae,ne,oe)};pki$4.setRsaPublicKey=pki$4.rsa.setPublicKey=function(K,J){var ne={n:K,e:J};return ne.encrypt=function(oe,ce,ue){if(typeof ce=="string"?ce=ce.toUpperCase():ce===void 0&&(ce="RSAES-PKCS1-V1_5"),ce==="RSAES-PKCS1-V1_5")ce={encode:function(pe,ve,me){return _encodePkcs1_v1_5(pe,ve,2).getBytes()}};else if(ce==="RSA-OAEP"||ce==="RSAES-OAEP")ce={encode:function(pe,ve){return forge$i.pkcs1.encode_rsa_oaep(ve,pe,ue)}};else if(["RAW","NONE","NULL",null].indexOf(ce)!==-1)ce={encode:function(pe){return pe}};else if(typeof ce=="string")throw new Error('Unsupported encryption scheme: "'+ce+'".');var Ae=ce.encode(oe,ne,!0);return pki$4.rsa.encrypt(Ae,ne,!0)},ne.verify=function(oe,ce,ue,Ae){typeof ue=="string"?ue=ue.toUpperCase():ue===void 0&&(ue="RSASSA-PKCS1-V1_5"),Ae===void 0&&(Ae={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in Ae||(Ae._parseAllDigestBytes=!0),ue==="RSASSA-PKCS1-V1_5"?ue={verify:function(ve,me){me=_decodePkcs1_v1_5(me,ne,!0);var ge=asn1$7.fromDer(me,{parseAllBytes:Ae._parseAllDigestBytes}),ye={},xe=[];if(!asn1$7.validate(ge,digestInfoValidator,ye,xe)){var _e=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw _e.errors=xe,_e}var $e=asn1$7.derToOid(ye.algorithmIdentifier);if(!($e===forge$i.oids.md2||$e===forge$i.oids.md5||$e===forge$i.oids.sha1||$e===forge$i.oids.sha224||$e===forge$i.oids.sha256||$e===forge$i.oids.sha384||$e===forge$i.oids.sha512||$e===forge$i.oids["sha512-224"]||$e===forge$i.oids["sha512-256"])){var _e=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw _e.oid=$e,_e}if(($e===forge$i.oids.md2||$e===forge$i.oids.md5)&&!("parameters"in ye))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return ve===ye.digest}}:(ue==="NONE"||ue==="NULL"||ue===null)&&(ue={verify:function(ve,me){return me=_decodePkcs1_v1_5(me,ne,!0),ve===me}});var pe=pki$4.rsa.decrypt(ce,ne,!0,!1);return ue.verify(oe,pe,ne.n.bitLength())},ne};pki$4.setRsaPrivateKey=pki$4.rsa.setPrivateKey=function(K,J,ne,oe,ce,ue,Ae,pe){var ve={n:K,e:J,d:ne,p:oe,q:ce,dP:ue,dQ:Ae,qInv:pe};return ve.decrypt=function(me,ge,ye){typeof ge=="string"?ge=ge.toUpperCase():ge===void 0&&(ge="RSAES-PKCS1-V1_5");var xe=pki$4.rsa.decrypt(me,ve,!1,!1);if(ge==="RSAES-PKCS1-V1_5")ge={decode:_decodePkcs1_v1_5};else if(ge==="RSA-OAEP"||ge==="RSAES-OAEP")ge={decode:function(_e,$e){return forge$i.pkcs1.decode_rsa_oaep($e,_e,ye)}};else if(["RAW","NONE","NULL",null].indexOf(ge)!==-1)ge={decode:function(_e){return _e}};else throw new Error('Unsupported encryption scheme: "'+ge+'".');return ge.decode(xe,ve,!1)},ve.sign=function(me,ge){var ye=!1;typeof ge=="string"&&(ge=ge.toUpperCase()),ge===void 0||ge==="RSASSA-PKCS1-V1_5"?(ge={encode:emsaPkcs1v15encode},ye=1):(ge==="NONE"||ge==="NULL"||ge===null)&&(ge={encode:function(){return me}},ye=1);var xe=ge.encode(me,ve.n.bitLength());return pki$4.rsa.encrypt(xe,ve,ye)},ve};pki$4.wrapRsaPrivateKey=function(K){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,asn1$7.integerToDer(0).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OID,!1,asn1$7.oidToDer(pki$4.oids.rsaEncryption).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.NULL,!1,"")]),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OCTETSTRING,!1,asn1$7.toDer(K).getBytes())])};pki$4.privateKeyFromAsn1=function(K){var J={},ne=[];if(asn1$7.validate(K,privateKeyValidator$1,J,ne)&&(K=asn1$7.fromDer(forge$i.util.createBuffer(J.privateKey))),J={},ne=[],!asn1$7.validate(K,rsaPrivateKeyValidator,J,ne)){var oe=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw oe.errors=ne,oe}var ce,ue,Ae,pe,ve,me,ge,ye;return ce=forge$i.util.createBuffer(J.privateKeyModulus).toHex(),ue=forge$i.util.createBuffer(J.privateKeyPublicExponent).toHex(),Ae=forge$i.util.createBuffer(J.privateKeyPrivateExponent).toHex(),pe=forge$i.util.createBuffer(J.privateKeyPrime1).toHex(),ve=forge$i.util.createBuffer(J.privateKeyPrime2).toHex(),me=forge$i.util.createBuffer(J.privateKeyExponent1).toHex(),ge=forge$i.util.createBuffer(J.privateKeyExponent2).toHex(),ye=forge$i.util.createBuffer(J.privateKeyCoefficient).toHex(),pki$4.setRsaPrivateKey(new BigInteger$3(ce,16),new BigInteger$3(ue,16),new BigInteger$3(Ae,16),new BigInteger$3(pe,16),new BigInteger$3(ve,16),new BigInteger$3(me,16),new BigInteger$3(ge,16),new BigInteger$3(ye,16))};pki$4.privateKeyToAsn1=pki$4.privateKeyToRSAPrivateKey=function(K){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,asn1$7.integerToDer(0).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.n)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.e)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.d)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.p)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.q)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.dP)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.dQ)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.qInv))])};pki$4.publicKeyFromAsn1=function(K){var J={},ne=[];if(asn1$7.validate(K,publicKeyValidator$2,J,ne)){var oe=asn1$7.derToOid(J.publicKeyOid);if(oe!==pki$4.oids.rsaEncryption){var ce=new Error("Cannot read public key. Unknown OID.");throw ce.oid=oe,ce}K=J.rsaPublicKey}if(ne=[],!asn1$7.validate(K,rsaPublicKeyValidator,J,ne)){var ce=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw ce.errors=ne,ce}var ue=forge$i.util.createBuffer(J.publicKeyModulus).toHex(),Ae=forge$i.util.createBuffer(J.publicKeyExponent).toHex();return pki$4.setRsaPublicKey(new BigInteger$3(ue,16),new BigInteger$3(Ae,16))};pki$4.publicKeyToAsn1=pki$4.publicKeyToSubjectPublicKeyInfo=function(K){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OID,!1,asn1$7.oidToDer(pki$4.oids.rsaEncryption).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.NULL,!1,"")]),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.BITSTRING,!1,[pki$4.publicKeyToRSAPublicKey(K)])])};pki$4.publicKeyToRSAPublicKey=function(K){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.n)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.e))])};function _encodePkcs1_v1_5(K,J,ne){var oe=forge$i.util.createBuffer(),ce=Math.ceil(J.n.bitLength()/8);if(K.length>ce-11){var ue=new Error("Message is too long for PKCS#1 v1.5 padding.");throw ue.length=K.length,ue.max=ce-11,ue}oe.putByte(0),oe.putByte(ne);var Ae=ce-3-K.length,pe;if(ne===0||ne===1){pe=ne===0?0:255;for(var ve=0;ve<Ae;++ve)oe.putByte(pe)}else for(;Ae>0;){for(var me=0,ge=forge$i.random.getBytes(Ae),ve=0;ve<Ae;++ve)pe=ge.charCodeAt(ve),pe===0?++me:oe.putByte(pe);Ae=me}return oe.putByte(0),oe.putBytes(K),oe}function _decodePkcs1_v1_5(K,J,ne,oe){var ce=Math.ceil(J.n.bitLength()/8),ue=forge$i.util.createBuffer(K),Ae=ue.getByte(),pe=ue.getByte();if(Ae!==0||ne&&pe!==0&&pe!==1||!ne&&pe!=2||ne&&pe===0&&typeof oe>"u")throw new Error("Encryption block is invalid.");var ve=0;if(pe===0){ve=ce-3-oe;for(var me=0;me<ve;++me)if(ue.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(pe===1)for(ve=0;ue.length()>1;){if(ue.getByte()!==255){--ue.read;break}++ve}else if(pe===2)for(ve=0;ue.length()>1;){if(ue.getByte()===0){--ue.read;break}++ve}var ge=ue.getByte();if(ge!==0||ve!==ce-3-ue.length())throw new Error("Encryption block is invalid.");return ue.getBytes()}function _generateKeyPair(K,J,ne){typeof J=="function"&&(ne=J,J={}),J=J||{};var oe={algorithm:{name:J.algorithm||"PRIMEINC",options:{workers:J.workers||2,workLoad:J.workLoad||100,workerScript:J.workerScript}}};"prng"in J&&(oe.prng=J.prng),ce();function ce(){ue(K.pBits,function(pe,ve){if(pe)return ne(pe);if(K.p=ve,K.q!==null)return Ae(pe,K.q);ue(K.qBits,Ae)})}function ue(pe,ve){forge$i.prime.generateProbablePrime(pe,oe,ve)}function Ae(pe,ve){if(pe)return ne(pe);if(K.q=ve,K.p.compareTo(K.q)<0){var me=K.p;K.p=K.q,K.q=me}if(K.p.subtract(BigInteger$3.ONE).gcd(K.e).compareTo(BigInteger$3.ONE)!==0){K.p=null,ce();return}if(K.q.subtract(BigInteger$3.ONE).gcd(K.e).compareTo(BigInteger$3.ONE)!==0){K.q=null,ue(K.qBits,Ae);return}if(K.p1=K.p.subtract(BigInteger$3.ONE),K.q1=K.q.subtract(BigInteger$3.ONE),K.phi=K.p1.multiply(K.q1),K.phi.gcd(K.e).compareTo(BigInteger$3.ONE)!==0){K.p=K.q=null,ce();return}if(K.n=K.p.multiply(K.q),K.n.bitLength()!==K.bits){K.q=null,ue(K.qBits,Ae);return}var ge=K.e.modInverse(K.phi);K.keys={privateKey:pki$4.rsa.setPrivateKey(K.n,K.e,ge,K.p,K.q,ge.mod(K.p1),ge.mod(K.q1),K.q.modInverse(K.p)),publicKey:pki$4.rsa.setPublicKey(K.n,K.e)},ne(null,K.keys)}}function _bnToBytes(K){var J=K.toString(16);J[0]>="8"&&(J="00"+J);var ne=forge$i.util.hexToBytes(J);return ne.length>1&&(ne.charCodeAt(0)===0&&!(ne.charCodeAt(1)&128)||ne.charCodeAt(0)===255&&(ne.charCodeAt(1)&128)===128)?ne.substr(1):ne}function _getMillerRabinTests(K){return K<=100?27:K<=150?18:K<=200?15:K<=250?12:K<=300?9:K<=350?8:K<=400?7:K<=500?6:K<=600?5:K<=800?4:K<=1250?3:2}function _detectNodeCrypto(K){return forge$i.util.isNodejs&&typeof _crypto[K]=="function"}function _detectSubtleCrypto(K){return typeof util.globalScope<"u"&&typeof util.globalScope.crypto=="object"&&typeof util.globalScope.crypto.subtle=="object"&&typeof util.globalScope.crypto.subtle[K]=="function"}function _detectSubtleMsCrypto(K){return typeof util.globalScope<"u"&&typeof util.globalScope.msCrypto=="object"&&typeof util.globalScope.msCrypto.subtle=="object"&&typeof util.globalScope.msCrypto.subtle[K]=="function"}function _intToUint8Array(K){for(var J=forge$i.util.hexToBytes(K.toString(16)),ne=new Uint8Array(J.length),oe=0;oe<J.length;++oe)ne[oe]=J.charCodeAt(oe);return ne}var forge$h=forge$D;if(typeof BigInteger$2>"u")var BigInteger$2=forge$h.jsbn.BigInteger;var asn1$6=forge$h.asn1,pki$3=forge$h.pki=forge$h.pki||{};pki$3.pbe=forge$h.pbe=forge$h.pbe||{};var oids$1=pki$3.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki$3.encryptPrivateKeyInfo=function(K,J,ne){ne=ne||{},ne.saltSize=ne.saltSize||8,ne.count=ne.count||2048,ne.algorithm=ne.algorithm||"aes128",ne.prfAlgorithm=ne.prfAlgorithm||"sha1";var oe=forge$h.random.getBytesSync(ne.saltSize),ce=ne.count,ue=asn1$6.integerToDer(ce),Ae,pe,ve;if(ne.algorithm.indexOf("aes")===0||ne.algorithm==="des"){var me,ge,ye;switch(ne.algorithm){case"aes128":Ae=16,me=16,ge=oids$1["aes128-CBC"],ye=forge$h.aes.createEncryptionCipher;break;case"aes192":Ae=24,me=16,ge=oids$1["aes192-CBC"],ye=forge$h.aes.createEncryptionCipher;break;case"aes256":Ae=32,me=16,ge=oids$1["aes256-CBC"],ye=forge$h.aes.createEncryptionCipher;break;case"des":Ae=8,me=8,ge=oids$1.desCBC,ye=forge$h.des.createEncryptionCipher;break;default:var xe=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw xe.algorithm=ne.algorithm,xe}var _e="hmacWith"+ne.prfAlgorithm.toUpperCase(),$e=prfAlgorithmToMessageDigest(_e),Ie=forge$h.pkcs5.pbkdf2(J,oe,ce,Ae,$e),Fe=forge$h.random.getBytesSync(me),ke=ye(Ie);ke.start(Fe),ke.update(asn1$6.toDer(K)),ke.finish(),ve=ke.output.getBytes();var je=createPbkdf2Params(oe,ue,Ae,_e);pe=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(oids$1.pkcs5PBES2).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(oids$1.pkcs5PBKDF2).getBytes()),je]),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(ge).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,Fe)])])])}else if(ne.algorithm==="3des"){Ae=24;var We=new forge$h.util.ByteBuffer(oe),Ie=pki$3.pbe.generatePkcs12Key(J,We,1,ce,Ae),Fe=pki$3.pbe.generatePkcs12Key(J,We,2,ce,Ae),ke=forge$h.des.createEncryptionCipher(Ie);ke.start(Fe),ke.update(asn1$6.toDer(K)),ke.finish(),ve=ke.output.getBytes(),pe=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(oids$1["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,oe),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.INTEGER,!1,ue.getBytes())])])}else{var xe=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw xe.algorithm=ne.algorithm,xe}var ze=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[pe,asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,ve)]);return ze};pki$3.decryptPrivateKeyInfo=function(K,J){var ne=null,oe={},ce=[];if(!asn1$6.validate(K,encryptedPrivateKeyValidator,oe,ce)){var ue=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw ue.errors=ce,ue}var Ae=asn1$6.derToOid(oe.encryptionOid),pe=pki$3.pbe.getCipher(Ae,oe.encryptionParams,J),ve=forge$h.util.createBuffer(oe.encryptedData);return pe.update(ve),pe.finish()&&(ne=asn1$6.fromDer(pe.output)),ne};pki$3.encryptedPrivateKeyToPem=function(K,J){var ne={type:"ENCRYPTED PRIVATE KEY",body:asn1$6.toDer(K).getBytes()};return forge$h.pem.encode(ne,{maxline:J})};pki$3.encryptedPrivateKeyFromPem=function(K){var J=forge$h.pem.decode(K)[0];if(J.type!=="ENCRYPTED PRIVATE KEY"){var ne=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw ne.headerType=J.type,ne}if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1$6.fromDer(J.body)};pki$3.encryptRsaPrivateKey=function(K,J,ne){if(ne=ne||{},!ne.legacy){var oe=pki$3.wrapRsaPrivateKey(pki$3.privateKeyToAsn1(K));return oe=pki$3.encryptPrivateKeyInfo(oe,J,ne),pki$3.encryptedPrivateKeyToPem(oe)}var ce,ue,Ae,pe;switch(ne.algorithm){case"aes128":ce="AES-128-CBC",Ae=16,ue=forge$h.random.getBytesSync(16),pe=forge$h.aes.createEncryptionCipher;break;case"aes192":ce="AES-192-CBC",Ae=24,ue=forge$h.random.getBytesSync(16),pe=forge$h.aes.createEncryptionCipher;break;case"aes256":ce="AES-256-CBC",Ae=32,ue=forge$h.random.getBytesSync(16),pe=forge$h.aes.createEncryptionCipher;break;case"3des":ce="DES-EDE3-CBC",Ae=24,ue=forge$h.random.getBytesSync(8),pe=forge$h.des.createEncryptionCipher;break;case"des":ce="DES-CBC",Ae=8,ue=forge$h.random.getBytesSync(8),pe=forge$h.des.createEncryptionCipher;break;default:var ve=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+ne.algorithm+'".');throw ve.algorithm=ne.algorithm,ve}var me=forge$h.pbe.opensslDeriveBytes(J,ue.substr(0,8),Ae),ge=pe(me);ge.start(ue),ge.update(asn1$6.toDer(pki$3.privateKeyToAsn1(K))),ge.finish();var ye={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:ce,parameters:forge$h.util.bytesToHex(ue).toUpperCase()},body:ge.output.getBytes()};return forge$h.pem.encode(ye)};pki$3.decryptRsaPrivateKey=function(K,J){var ne=null,oe=forge$h.pem.decode(K)[0];if(oe.type!=="ENCRYPTED PRIVATE KEY"&&oe.type!=="PRIVATE KEY"&&oe.type!=="RSA PRIVATE KEY"){var ce=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw ce.headerType=ce,ce}if(oe.procType&&oe.procType.type==="ENCRYPTED"){var ue,Ae;switch(oe.dekInfo.algorithm){case"DES-CBC":ue=8,Ae=forge$h.des.createDecryptionCipher;break;case"DES-EDE3-CBC":ue=24,Ae=forge$h.des.createDecryptionCipher;break;case"AES-128-CBC":ue=16,Ae=forge$h.aes.createDecryptionCipher;break;case"AES-192-CBC":ue=24,Ae=forge$h.aes.createDecryptionCipher;break;case"AES-256-CBC":ue=32,Ae=forge$h.aes.createDecryptionCipher;break;case"RC2-40-CBC":ue=5,Ae=function(ye){return forge$h.rc2.createDecryptionCipher(ye,40)};break;case"RC2-64-CBC":ue=8,Ae=function(ye){return forge$h.rc2.createDecryptionCipher(ye,64)};break;case"RC2-128-CBC":ue=16,Ae=function(ye){return forge$h.rc2.createDecryptionCipher(ye,128)};break;default:var ce=new Error('Could not decrypt private key; unsupported encryption algorithm "'+oe.dekInfo.algorithm+'".');throw ce.algorithm=oe.dekInfo.algorithm,ce}var pe=forge$h.util.hexToBytes(oe.dekInfo.parameters),ve=forge$h.pbe.opensslDeriveBytes(J,pe.substr(0,8),ue),me=Ae(ve);if(me.start(pe),me.update(forge$h.util.createBuffer(oe.body)),me.finish())ne=me.output.getBytes();else return ne}else ne=oe.body;return oe.type==="ENCRYPTED PRIVATE KEY"?ne=pki$3.decryptPrivateKeyInfo(asn1$6.fromDer(ne),J):ne=asn1$6.fromDer(ne),ne!==null&&(ne=pki$3.privateKeyFromAsn1(ne)),ne};pki$3.pbe.generatePkcs12Key=function(K,J,ne,oe,ce,ue){var Ae,pe;if(typeof ue>"u"||ue===null){if(!("sha1"in forge$h.md))throw new Error('"sha1" hash algorithm unavailable.');ue=forge$h.md.sha1.create()}var ve=ue.digestLength,me=ue.blockLength,ge=new forge$h.util.ByteBuffer,ye=new forge$h.util.ByteBuffer;if(K!=null){for(pe=0;pe<K.length;pe++)ye.putInt16(K.charCodeAt(pe));ye.putInt16(0)}var xe=ye.length(),_e=J.length(),$e=new forge$h.util.ByteBuffer;$e.fillWithByte(ne,me);var Ie=me*Math.ceil(_e/me),Fe=new forge$h.util.ByteBuffer;for(pe=0;pe<Ie;pe++)Fe.putByte(J.at(pe%_e));var ke=me*Math.ceil(xe/me),je=new forge$h.util.ByteBuffer;for(pe=0;pe<ke;pe++)je.putByte(ye.at(pe%xe));var We=Fe;We.putBuffer(je);for(var ze=Math.ceil(ce/ve),Xe=1;Xe<=ze;Xe++){var Je=new forge$h.util.ByteBuffer;Je.putBytes($e.bytes()),Je.putBytes(We.bytes());for(var nt=0;nt<oe;nt++)ue.start(),ue.update(Je.getBytes()),Je=ue.digest();var et=new forge$h.util.ByteBuffer;for(pe=0;pe<me;pe++)et.putByte(Je.at(pe%ve));var tt=Math.ceil(_e/me)+Math.ceil(xe/me),st=new forge$h.util.ByteBuffer;for(Ae=0;Ae<tt;Ae++){var qe=new forge$h.util.ByteBuffer(We.getBytes(me)),Se=511;for(pe=et.length()-1;pe>=0;pe--)Se=Se>>8,Se+=et.at(pe)+qe.at(pe),qe.setAt(pe,Se&255);st.putBuffer(qe)}We=st,ge.putBuffer(Je)}return ge.truncate(ge.length()-ce),ge};pki$3.pbe.getCipher=function(K,J,ne){switch(K){case pki$3.oids.pkcs5PBES2:return pki$3.pbe.getCipherForPBES2(K,J,ne);case pki$3.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki$3.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki$3.pbe.getCipherForPKCS12PBE(K,J,ne);default:var oe=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw oe.oid=K,oe.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],oe}};pki$3.pbe.getCipherForPBES2=function(K,J,ne){var oe={},ce=[];if(!asn1$6.validate(J,PBES2AlgorithmsValidator,oe,ce)){var ue=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw ue.errors=ce,ue}if(K=asn1$6.derToOid(oe.kdfOid),K!==pki$3.oids.pkcs5PBKDF2){var ue=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw ue.oid=K,ue.supportedOids=["pkcs5PBKDF2"],ue}if(K=asn1$6.derToOid(oe.encOid),K!==pki$3.oids["aes128-CBC"]&&K!==pki$3.oids["aes192-CBC"]&&K!==pki$3.oids["aes256-CBC"]&&K!==pki$3.oids["des-EDE3-CBC"]&&K!==pki$3.oids.desCBC){var ue=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw ue.oid=K,ue.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],ue}var Ae=oe.kdfSalt,pe=forge$h.util.createBuffer(oe.kdfIterationCount);pe=pe.getInt(pe.length()<<3);var ve,me;switch(pki$3.oids[K]){case"aes128-CBC":ve=16,me=forge$h.aes.createDecryptionCipher;break;case"aes192-CBC":ve=24,me=forge$h.aes.createDecryptionCipher;break;case"aes256-CBC":ve=32,me=forge$h.aes.createDecryptionCipher;break;case"des-EDE3-CBC":ve=24,me=forge$h.des.createDecryptionCipher;break;case"desCBC":ve=8,me=forge$h.des.createDecryptionCipher;break}var ge=prfOidToMessageDigest(oe.prfOid),ye=forge$h.pkcs5.pbkdf2(ne,Ae,pe,ve,ge),xe=oe.encIv,_e=me(ye);return _e.start(xe),_e};pki$3.pbe.getCipherForPKCS12PBE=function(K,J,ne){var oe={},ce=[];if(!asn1$6.validate(J,pkcs12PbeParamsValidator,oe,ce)){var ue=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw ue.errors=ce,ue}var Ae=forge$h.util.createBuffer(oe.salt),pe=forge$h.util.createBuffer(oe.iterations);pe=pe.getInt(pe.length()<<3);var ve,me,ge;switch(K){case pki$3.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:ve=24,me=8,ge=forge$h.des.startDecrypting;break;case pki$3.oids["pbewithSHAAnd40BitRC2-CBC"]:ve=5,me=8,ge=function(Ie,Fe){var ke=forge$h.rc2.createDecryptionCipher(Ie,40);return ke.start(Fe,null),ke};break;default:var ue=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw ue.oid=K,ue}var ye=prfOidToMessageDigest(oe.prfOid),xe=pki$3.pbe.generatePkcs12Key(ne,Ae,1,pe,ve,ye);ye.start();var _e=pki$3.pbe.generatePkcs12Key(ne,Ae,2,pe,me,ye);return ge(xe,_e)};pki$3.pbe.opensslDeriveBytes=function(K,J,ne,oe){if(typeof oe>"u"||oe===null){if(!("md5"in forge$h.md))throw new Error('"md5" hash algorithm unavailable.');oe=forge$h.md.md5.create()}J===null&&(J="");for(var ce=[hash(oe,K+J)],ue=16,Ae=1;ue<ne;++Ae,ue+=16)ce.push(hash(oe,ce[Ae-1]+K+J));return ce.join("").substr(0,ne)};function hash(K,J){return K.start().update(J).digest().getBytes()}function prfOidToMessageDigest(K){var J;if(!K)J="hmacWithSHA1";else if(J=pki$3.oids[asn1$6.derToOid(K)],!J){var ne=new Error("Unsupported PRF OID.");throw ne.oid=K,ne.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],ne}return prfAlgorithmToMessageDigest(J)}function prfAlgorithmToMessageDigest(K){var J=forge$h.md;switch(K){case"hmacWithSHA224":J=forge$h.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":K=K.substr(8).toLowerCase();break;default:var ne=new Error("Unsupported PRF algorithm.");throw ne.algorithm=K,ne.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],ne}if(!J||!(K in J))throw new Error("Unknown hash algorithm: "+K);return J[K].create()}function createPbkdf2Params(K,J,ne,oe){var ce=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,K),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.INTEGER,!1,J.getBytes())]);return oe!=="hmacWithSHA1"&&ce.value.push(asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.INTEGER,!1,forge$h.util.hexToBytes(ne.toString(16))),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(pki$3.oids[oe]).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.NULL,!1,"")])),ce}var forge$g=forge$D,asn1$5=forge$g.asn1,p7v=forge$g.pkcs7asn1=forge$g.pkcs7asn1||{};forge$g.pkcs7=forge$g.pkcs7||{};forge$g.pkcs7.asn1=p7v;var contentInfoValidator$1={name:"ContentInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};p7v.contentInfoValidator=contentInfoValidator$1;var encryptedContentInfoValidator={name:"EncryptedContentInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:asn1$5.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};p7v.envelopedDataValidator={name:"EnvelopedData",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(encryptedContentInfoValidator)};p7v.encryptedDataValidator={name:"EncryptedData",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"}].concat(encryptedContentInfoValidator)};var signerValidator={name:"SignerInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:asn1$5.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};p7v.signedDataValidator={name:"SignedData",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},contentInfoValidator$1,{name:"SignedData.Certificates",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SET,capture:"signerInfos",optional:!0,value:[signerValidator]}]};p7v.recipientInfoValidator={name:"RecipientInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:asn1$5.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var forge$f=forge$D;forge$f.mgf=forge$f.mgf||{};var mgf1=forge$f.mgf.mgf1=forge$f.mgf1=forge$f.mgf1||{};mgf1.create=function(K){var J={generate:function(ne,oe){for(var ce=new forge$f.util.ByteBuffer,ue=Math.ceil(oe/K.digestLength),Ae=0;Ae<ue;Ae++){var pe=new forge$f.util.ByteBuffer;pe.putInt32(Ae),K.start(),K.update(ne+pe.getBytes()),ce.putBuffer(K.digest())}return ce.truncate(ce.length()-oe),ce.getBytes()}};return J};var forge$e=forge$D;forge$e.mgf=forge$e.mgf||{};forge$e.mgf.mgf1=forge$e.mgf1;var forge$d=forge$D,pss=forge$d.pss=forge$d.pss||{};pss.create=function(K){arguments.length===3&&(K={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var J=K.md,ne=K.mgf,oe=J.digestLength,ce=K.salt||null;typeof ce=="string"&&(ce=forge$d.util.createBuffer(ce));var ue;if("saltLength"in K)ue=K.saltLength;else if(ce!==null)ue=ce.length();else throw new Error("Salt length not specified or specific salt not given.");if(ce!==null&&ce.length()!==ue)throw new Error("Given salt length does not match length of given salt.");var Ae=K.prng||forge$d.random,pe={};return pe.encode=function(ve,me){var ge,ye=me-1,xe=Math.ceil(ye/8),_e=ve.digest().getBytes();if(xe<oe+ue+2)throw new Error("Message is too long to encrypt.");var $e;ce===null?$e=Ae.getBytesSync(ue):$e=ce.bytes();var Ie=new forge$d.util.ByteBuffer;Ie.fillWithByte(0,8),Ie.putBytes(_e),Ie.putBytes($e),J.start(),J.update(Ie.getBytes());var Fe=J.digest().getBytes(),ke=new forge$d.util.ByteBuffer;ke.fillWithByte(0,xe-ue-oe-2),ke.putByte(1),ke.putBytes($e);var je=ke.getBytes(),We=xe-oe-1,ze=ne.generate(Fe,We),Xe="";for(ge=0;ge<We;ge++)Xe+=String.fromCharCode(je.charCodeAt(ge)^ze.charCodeAt(ge));var Je=65280>>8*xe-ye&255;return Xe=String.fromCharCode(Xe.charCodeAt(0)&~Je)+Xe.substr(1),Xe+Fe+""},pe.verify=function(ve,me,ge){var ye,xe=ge-1,_e=Math.ceil(xe/8);if(me=me.substr(-_e),_e<oe+ue+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(me.charCodeAt(_e-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var $e=_e-oe-1,Ie=me.substr(0,$e),Fe=me.substr($e,oe),ke=65280>>8*_e-xe&255;if(Ie.charCodeAt(0)&ke)throw new Error("Bits beyond keysize not zero as expected.");var je=ne.generate(Fe,$e),We="";for(ye=0;ye<$e;ye++)We+=String.fromCharCode(Ie.charCodeAt(ye)^je.charCodeAt(ye));We=String.fromCharCode(We.charCodeAt(0)&~ke)+We.substr(1);var ze=_e-oe-ue-2;for(ye=0;ye<ze;ye++)if(We.charCodeAt(ye)!==0)throw new Error("Leftmost octets not zero as expected");if(We.charCodeAt(ze)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var Xe=We.substr(-ue),Je=new forge$d.util.ByteBuffer;Je.fillWithByte(0,8),Je.putBytes(ve),Je.putBytes(Xe),J.start(),J.update(Je.getBytes());var nt=J.digest().getBytes();return Fe===nt},pe};var forge$c=forge$D,asn1$4=forge$c.asn1,pki$2=forge$c.pki=forge$c.pki||{},oids=pki$2.oids,_shortNames={};_shortNames.CN=oids.commonName;_shortNames.commonName="CN";_shortNames.C=oids.countryName;_shortNames.countryName="C";_shortNames.L=oids.localityName;_shortNames.localityName="L";_shortNames.ST=oids.stateOrProvinceName;_shortNames.stateOrProvinceName="ST";_shortNames.O=oids.organizationName;_shortNames.organizationName="O";_shortNames.OU=oids.organizationalUnitName;_shortNames.organizationalUnitName="OU";_shortNames.E=oids.emailAddress;_shortNames.emailAddress="E";var publicKeyValidator$1=forge$c.pki.rsa.publicKeyValidator,x509CertificateValidator={name:"Certificate",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:asn1$4.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},publicKeyValidator$1,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:asn1$4.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},rsassaPssParameterValidator={name:"rsapss",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},certificationRequestInfoValidator={name:"CertificationRequestInfo",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},publicKeyValidator$1,{name:"CertificationRequestInfo.attributes",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SET,constructed:!0}]}]}]},certificationRequestValidator={name:"CertificationRequest",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[certificationRequestInfoValidator,{name:"CertificationRequest.signatureAlgorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:asn1$4.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};pki$2.RDNAttributesAsArray=function(K,J){for(var ne=[],oe,ce,ue,Ae=0;Ae<K.value.length;++Ae){oe=K.value[Ae];for(var pe=0;pe<oe.value.length;++pe)ue={},ce=oe.value[pe],ue.type=asn1$4.derToOid(ce.value[0].value),ue.value=ce.value[1].value,ue.valueTagClass=ce.value[1].type,ue.type in oids&&(ue.name=oids[ue.type],ue.name in _shortNames&&(ue.shortName=_shortNames[ue.name])),J&&(J.update(ue.type),J.update(ue.value)),ne.push(ue)}return ne};pki$2.CRIAttributesAsArray=function(K){for(var J=[],ne=0;ne<K.length;++ne)for(var oe=K[ne],ce=asn1$4.derToOid(oe.value[0].value),ue=oe.value[1].value,Ae=0;Ae<ue.length;++Ae){var pe={};if(pe.type=ce,pe.value=ue[Ae].value,pe.valueTagClass=ue[Ae].type,pe.type in oids&&(pe.name=oids[pe.type],pe.name in _shortNames&&(pe.shortName=_shortNames[pe.name])),pe.type===oids.extensionRequest){pe.extensions=[];for(var ve=0;ve<pe.value.length;++ve)pe.extensions.push(pki$2.certificateExtensionFromAsn1(pe.value[ve]))}J.push(pe)}return J};function _getAttribute(K,J){typeof J=="string"&&(J={shortName:J});for(var ne=null,oe,ce=0;ne===null&&ce<K.attributes.length;++ce)oe=K.attributes[ce],(J.type&&J.type===oe.type||J.name&&J.name===oe.name||J.shortName&&J.shortName===oe.shortName)&&(ne=oe);return ne}var _readSignatureParameters=function(K,J,ne){var oe={};if(K!==oids["RSASSA-PSS"])return oe;ne&&(oe={hash:{algorithmOid:oids.sha1},mgf:{algorithmOid:oids.mgf1,hash:{algorithmOid:oids.sha1}},saltLength:20});var ce={},ue=[];if(!asn1$4.validate(J,rsassaPssParameterValidator,ce,ue)){var Ae=new Error("Cannot read RSASSA-PSS parameter block.");throw Ae.errors=ue,Ae}return ce.hashOid!==void 0&&(oe.hash=oe.hash||{},oe.hash.algorithmOid=asn1$4.derToOid(ce.hashOid)),ce.maskGenOid!==void 0&&(oe.mgf=oe.mgf||{},oe.mgf.algorithmOid=asn1$4.derToOid(ce.maskGenOid),oe.mgf.hash=oe.mgf.hash||{},oe.mgf.hash.algorithmOid=asn1$4.derToOid(ce.maskGenHashOid)),ce.saltLength!==void 0&&(oe.saltLength=ce.saltLength.charCodeAt(0)),oe},_createSignatureDigest=function(K){switch(oids[K.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return forge$c.md.sha1.create();case"md5WithRSAEncryption":return forge$c.md.md5.create();case"sha256WithRSAEncryption":return forge$c.md.sha256.create();case"sha384WithRSAEncryption":return forge$c.md.sha384.create();case"sha512WithRSAEncryption":return forge$c.md.sha512.create();case"RSASSA-PSS":return forge$c.md.sha256.create();default:var J=new Error("Could not compute "+K.type+" digest. Unknown signature OID.");throw J.signatureOid=K.signatureOid,J}},_verifySignature=function(K){var J=K.certificate,ne;switch(J.signatureOid){case oids.sha1WithRSAEncryption:case oids.sha1WithRSASignature:break;case oids["RSASSA-PSS"]:var oe,ce;if(oe=oids[J.signatureParameters.mgf.hash.algorithmOid],oe===void 0||forge$c.md[oe]===void 0){var ue=new Error("Unsupported MGF hash function.");throw ue.oid=J.signatureParameters.mgf.hash.algorithmOid,ue.name=oe,ue}if(ce=oids[J.signatureParameters.mgf.algorithmOid],ce===void 0||forge$c.mgf[ce]===void 0){var ue=new Error("Unsupported MGF function.");throw ue.oid=J.signatureParameters.mgf.algorithmOid,ue.name=ce,ue}if(ce=forge$c.mgf[ce].create(forge$c.md[oe].create()),oe=oids[J.signatureParameters.hash.algorithmOid],oe===void 0||forge$c.md[oe]===void 0){var ue=new Error("Unsupported RSASSA-PSS hash function.");throw ue.oid=J.signatureParameters.hash.algorithmOid,ue.name=oe,ue}ne=forge$c.pss.create(forge$c.md[oe].create(),ce,J.signatureParameters.saltLength);break}return J.publicKey.verify(K.md.digest().getBytes(),K.signature,ne)};pki$2.certificateFromPem=function(K,J,ne){var oe=forge$c.pem.decode(K)[0];if(oe.type!=="CERTIFICATE"&&oe.type!=="X509 CERTIFICATE"&&oe.type!=="TRUSTED CERTIFICATE"){var ce=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw ce.headerType=oe.type,ce}if(oe.procType&&oe.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var ue=asn1$4.fromDer(oe.body,ne);return pki$2.certificateFromAsn1(ue,J)};pki$2.certificateToPem=function(K,J){var ne={type:"CERTIFICATE",body:asn1$4.toDer(pki$2.certificateToAsn1(K)).getBytes()};return forge$c.pem.encode(ne,{maxline:J})};pki$2.publicKeyFromPem=function(K){var J=forge$c.pem.decode(K)[0];if(J.type!=="PUBLIC KEY"&&J.type!=="RSA PUBLIC KEY"){var ne=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw ne.headerType=J.type,ne}if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var oe=asn1$4.fromDer(J.body);return pki$2.publicKeyFromAsn1(oe)};pki$2.publicKeyToPem=function(K,J){var ne={type:"PUBLIC KEY",body:asn1$4.toDer(pki$2.publicKeyToAsn1(K)).getBytes()};return forge$c.pem.encode(ne,{maxline:J})};pki$2.publicKeyToRSAPublicKeyPem=function(K,J){var ne={type:"RSA PUBLIC KEY",body:asn1$4.toDer(pki$2.publicKeyToRSAPublicKey(K)).getBytes()};return forge$c.pem.encode(ne,{maxline:J})};pki$2.getPublicKeyFingerprint=function(K,J){J=J||{};var ne=J.md||forge$c.md.sha1.create(),oe=J.type||"RSAPublicKey",ce;switch(oe){case"RSAPublicKey":ce=asn1$4.toDer(pki$2.publicKeyToRSAPublicKey(K)).getBytes();break;case"SubjectPublicKeyInfo":ce=asn1$4.toDer(pki$2.publicKeyToAsn1(K)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+J.type+'".')}ne.start(),ne.update(ce);var ue=ne.digest();if(J.encoding==="hex"){var Ae=ue.toHex();return J.delimiter?Ae.match(/.{2}/g).join(J.delimiter):Ae}else{if(J.encoding==="binary")return ue.getBytes();if(J.encoding)throw new Error('Unknown encoding "'+J.encoding+'".')}return ue};pki$2.certificationRequestFromPem=function(K,J,ne){var oe=forge$c.pem.decode(K)[0];if(oe.type!=="CERTIFICATE REQUEST"){var ce=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw ce.headerType=oe.type,ce}if(oe.procType&&oe.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var ue=asn1$4.fromDer(oe.body,ne);return pki$2.certificationRequestFromAsn1(ue,J)};pki$2.certificationRequestToPem=function(K,J){var ne={type:"CERTIFICATE REQUEST",body:asn1$4.toDer(pki$2.certificationRequestToAsn1(K)).getBytes()};return forge$c.pem.encode(ne,{maxline:J})};pki$2.createCertificate=function(){var K={};return K.version=2,K.serialNumber="00",K.signatureOid=null,K.signature=null,K.siginfo={},K.siginfo.algorithmOid=null,K.validity={},K.validity.notBefore=new Date,K.validity.notAfter=new Date,K.issuer={},K.issuer.getField=function(J){return _getAttribute(K.issuer,J)},K.issuer.addField=function(J){_fillMissingFields([J]),K.issuer.attributes.push(J)},K.issuer.attributes=[],K.issuer.hash=null,K.subject={},K.subject.getField=function(J){return _getAttribute(K.subject,J)},K.subject.addField=function(J){_fillMissingFields([J]),K.subject.attributes.push(J)},K.subject.attributes=[],K.subject.hash=null,K.extensions=[],K.publicKey=null,K.md=null,K.setSubject=function(J,ne){_fillMissingFields(J),K.subject.attributes=J,delete K.subject.uniqueId,ne&&(K.subject.uniqueId=ne),K.subject.hash=null},K.setIssuer=function(J,ne){_fillMissingFields(J),K.issuer.attributes=J,delete K.issuer.uniqueId,ne&&(K.issuer.uniqueId=ne),K.issuer.hash=null},K.setExtensions=function(J){for(var ne=0;ne<J.length;++ne)_fillMissingExtensionFields(J[ne],{cert:K});K.extensions=J},K.getExtension=function(J){typeof J=="string"&&(J={name:J});for(var ne=null,oe,ce=0;ne===null&&ce<K.extensions.length;++ce)oe=K.extensions[ce],(J.id&&oe.id===J.id||J.name&&oe.name===J.name)&&(ne=oe);return ne},K.sign=function(J,ne){K.md=ne||forge$c.md.sha1.create();var oe=oids[K.md.algorithm+"WithRSAEncryption"];if(!oe){var ce=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw ce.algorithm=K.md.algorithm,ce}K.signatureOid=K.siginfo.algorithmOid=oe,K.tbsCertificate=pki$2.getTBSCertificate(K);var ue=asn1$4.toDer(K.tbsCertificate);K.md.update(ue.getBytes()),K.signature=J.sign(K.md)},K.verify=function(J){var ne=!1;if(!K.issued(J)){var oe=J.issuer,ce=K.subject,ue=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw ue.expectedIssuer=ce.attributes,ue.actualIssuer=oe.attributes,ue}var Ae=J.md;if(Ae===null){Ae=_createSignatureDigest({signatureOid:J.signatureOid,type:"certificate"});var pe=J.tbsCertificate||pki$2.getTBSCertificate(J),ve=asn1$4.toDer(pe);Ae.update(ve.getBytes())}return Ae!==null&&(ne=_verifySignature({certificate:K,md:Ae,signature:J.signature})),ne},K.isIssuer=function(J){var ne=!1,oe=K.issuer,ce=J.subject;if(oe.hash&&ce.hash)ne=oe.hash===ce.hash;else if(oe.attributes.length===ce.attributes.length){ne=!0;for(var ue,Ae,pe=0;ne&&pe<oe.attributes.length;++pe)ue=oe.attributes[pe],Ae=ce.attributes[pe],(ue.type!==Ae.type||ue.value!==Ae.value)&&(ne=!1)}return ne},K.issued=function(J){return J.isIssuer(K)},K.generateSubjectKeyIdentifier=function(){return pki$2.getPublicKeyFingerprint(K.publicKey,{type:"RSAPublicKey"})},K.verifySubjectKeyIdentifier=function(){for(var J=oids.subjectKeyIdentifier,ne=0;ne<K.extensions.length;++ne){var oe=K.extensions[ne];if(oe.id===J){var ce=K.generateSubjectKeyIdentifier().getBytes();return forge$c.util.hexToBytes(oe.subjectKeyIdentifier)===ce}}return!1},K};pki$2.certificateFromAsn1=function(K,J){var ne={},oe=[];if(!asn1$4.validate(K,x509CertificateValidator,ne,oe)){var ce=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw ce.errors=oe,ce}var ue=asn1$4.derToOid(ne.publicKeyOid);if(ue!==pki$2.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var Ae=pki$2.createCertificate();Ae.version=ne.certVersion?ne.certVersion.charCodeAt(0):0;var pe=forge$c.util.createBuffer(ne.certSerialNumber);Ae.serialNumber=pe.toHex(),Ae.signatureOid=forge$c.asn1.derToOid(ne.certSignatureOid),Ae.signatureParameters=_readSignatureParameters(Ae.signatureOid,ne.certSignatureParams,!0),Ae.siginfo.algorithmOid=forge$c.asn1.derToOid(ne.certinfoSignatureOid),Ae.siginfo.parameters=_readSignatureParameters(Ae.siginfo.algorithmOid,ne.certinfoSignatureParams,!1),Ae.signature=ne.certSignature;var ve=[];if(ne.certValidity1UTCTime!==void 0&&ve.push(asn1$4.utcTimeToDate(ne.certValidity1UTCTime)),ne.certValidity2GeneralizedTime!==void 0&&ve.push(asn1$4.generalizedTimeToDate(ne.certValidity2GeneralizedTime)),ne.certValidity3UTCTime!==void 0&&ve.push(asn1$4.utcTimeToDate(ne.certValidity3UTCTime)),ne.certValidity4GeneralizedTime!==void 0&&ve.push(asn1$4.generalizedTimeToDate(ne.certValidity4GeneralizedTime)),ve.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(ve.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(Ae.validity.notBefore=ve[0],Ae.validity.notAfter=ve[1],Ae.tbsCertificate=ne.tbsCertificate,J){Ae.md=_createSignatureDigest({signatureOid:Ae.signatureOid,type:"certificate"});var me=asn1$4.toDer(Ae.tbsCertificate);Ae.md.update(me.getBytes())}var ge=forge$c.md.sha1.create(),ye=asn1$4.toDer(ne.certIssuer);ge.update(ye.getBytes()),Ae.issuer.getField=function($e){return _getAttribute(Ae.issuer,$e)},Ae.issuer.addField=function($e){_fillMissingFields([$e]),Ae.issuer.attributes.push($e)},Ae.issuer.attributes=pki$2.RDNAttributesAsArray(ne.certIssuer),ne.certIssuerUniqueId&&(Ae.issuer.uniqueId=ne.certIssuerUniqueId),Ae.issuer.hash=ge.digest().toHex();var xe=forge$c.md.sha1.create(),_e=asn1$4.toDer(ne.certSubject);return xe.update(_e.getBytes()),Ae.subject.getField=function($e){return _getAttribute(Ae.subject,$e)},Ae.subject.addField=function($e){_fillMissingFields([$e]),Ae.subject.attributes.push($e)},Ae.subject.attributes=pki$2.RDNAttributesAsArray(ne.certSubject),ne.certSubjectUniqueId&&(Ae.subject.uniqueId=ne.certSubjectUniqueId),Ae.subject.hash=xe.digest().toHex(),ne.certExtensions?Ae.extensions=pki$2.certificateExtensionsFromAsn1(ne.certExtensions):Ae.extensions=[],Ae.publicKey=pki$2.publicKeyFromAsn1(ne.subjectPublicKeyInfo),Ae};pki$2.certificateExtensionsFromAsn1=function(K){for(var J=[],ne=0;ne<K.value.length;++ne)for(var oe=K.value[ne],ce=0;ce<oe.value.length;++ce)J.push(pki$2.certificateExtensionFromAsn1(oe.value[ce]));return J};pki$2.certificateExtensionFromAsn1=function(K){var J={};if(J.id=asn1$4.derToOid(K.value[0].value),J.critical=!1,K.value[1].type===asn1$4.Type.BOOLEAN?(J.critical=K.value[1].value.charCodeAt(0)!==0,J.value=K.value[2].value):J.value=K.value[1].value,J.id in oids){if(J.name=oids[J.id],J.name==="keyUsage"){var ne=asn1$4.fromDer(J.value),oe=0,ce=0;ne.value.length>1&&(oe=ne.value.charCodeAt(1),ce=ne.value.length>2?ne.value.charCodeAt(2):0),J.digitalSignature=(oe&128)===128,J.nonRepudiation=(oe&64)===64,J.keyEncipherment=(oe&32)===32,J.dataEncipherment=(oe&16)===16,J.keyAgreement=(oe&8)===8,J.keyCertSign=(oe&4)===4,J.cRLSign=(oe&2)===2,J.encipherOnly=(oe&1)===1,J.decipherOnly=(ce&128)===128}else if(J.name==="basicConstraints"){var ne=asn1$4.fromDer(J.value);ne.value.length>0&&ne.value[0].type===asn1$4.Type.BOOLEAN?J.cA=ne.value[0].value.charCodeAt(0)!==0:J.cA=!1;var ue=null;ne.value.length>0&&ne.value[0].type===asn1$4.Type.INTEGER?ue=ne.value[0].value:ne.value.length>1&&(ue=ne.value[1].value),ue!==null&&(J.pathLenConstraint=asn1$4.derToInteger(ue))}else if(J.name==="extKeyUsage")for(var ne=asn1$4.fromDer(J.value),Ae=0;Ae<ne.value.length;++Ae){var pe=asn1$4.derToOid(ne.value[Ae].value);pe in oids?J[oids[pe]]=!0:J[pe]=!0}else if(J.name==="nsCertType"){var ne=asn1$4.fromDer(J.value),oe=0;ne.value.length>1&&(oe=ne.value.charCodeAt(1)),J.client=(oe&128)===128,J.server=(oe&64)===64,J.email=(oe&32)===32,J.objsign=(oe&16)===16,J.reserved=(oe&8)===8,J.sslCA=(oe&4)===4,J.emailCA=(oe&2)===2,J.objCA=(oe&1)===1}else if(J.name==="subjectAltName"||J.name==="issuerAltName"){J.altNames=[];for(var ve,ne=asn1$4.fromDer(J.value),me=0;me<ne.value.length;++me){ve=ne.value[me];var ge={type:ve.type,value:ve.value};switch(J.altNames.push(ge),ve.type){case 1:case 2:case 6:break;case 7:ge.ip=forge$c.util.bytesToIP(ve.value);break;case 8:ge.oid=asn1$4.derToOid(ve.value);break}}}else if(J.name==="subjectKeyIdentifier"){var ne=asn1$4.fromDer(J.value);J.subjectKeyIdentifier=forge$c.util.bytesToHex(ne.value)}}return J};pki$2.certificationRequestFromAsn1=function(K,J){var ne={},oe=[];if(!asn1$4.validate(K,certificationRequestValidator,ne,oe)){var ce=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw ce.errors=oe,ce}var ue=asn1$4.derToOid(ne.publicKeyOid);if(ue!==pki$2.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var Ae=pki$2.createCertificationRequest();if(Ae.version=ne.csrVersion?ne.csrVersion.charCodeAt(0):0,Ae.signatureOid=forge$c.asn1.derToOid(ne.csrSignatureOid),Ae.signatureParameters=_readSignatureParameters(Ae.signatureOid,ne.csrSignatureParams,!0),Ae.siginfo.algorithmOid=forge$c.asn1.derToOid(ne.csrSignatureOid),Ae.siginfo.parameters=_readSignatureParameters(Ae.siginfo.algorithmOid,ne.csrSignatureParams,!1),Ae.signature=ne.csrSignature,Ae.certificationRequestInfo=ne.certificationRequestInfo,J){Ae.md=_createSignatureDigest({signatureOid:Ae.signatureOid,type:"certification request"});var pe=asn1$4.toDer(Ae.certificationRequestInfo);Ae.md.update(pe.getBytes())}var ve=forge$c.md.sha1.create();return Ae.subject.getField=function(me){return _getAttribute(Ae.subject,me)},Ae.subject.addField=function(me){_fillMissingFields([me]),Ae.subject.attributes.push(me)},Ae.subject.attributes=pki$2.RDNAttributesAsArray(ne.certificationRequestInfoSubject,ve),Ae.subject.hash=ve.digest().toHex(),Ae.publicKey=pki$2.publicKeyFromAsn1(ne.subjectPublicKeyInfo),Ae.getAttribute=function(me){return _getAttribute(Ae,me)},Ae.addAttribute=function(me){_fillMissingFields([me]),Ae.attributes.push(me)},Ae.attributes=pki$2.CRIAttributesAsArray(ne.certificationRequestInfoAttributes||[]),Ae};pki$2.createCertificationRequest=function(){var K={};return K.version=0,K.signatureOid=null,K.signature=null,K.siginfo={},K.siginfo.algorithmOid=null,K.subject={},K.subject.getField=function(J){return _getAttribute(K.subject,J)},K.subject.addField=function(J){_fillMissingFields([J]),K.subject.attributes.push(J)},K.subject.attributes=[],K.subject.hash=null,K.publicKey=null,K.attributes=[],K.getAttribute=function(J){return _getAttribute(K,J)},K.addAttribute=function(J){_fillMissingFields([J]),K.attributes.push(J)},K.md=null,K.setSubject=function(J){_fillMissingFields(J),K.subject.attributes=J,K.subject.hash=null},K.setAttributes=function(J){_fillMissingFields(J),K.attributes=J},K.sign=function(J,ne){K.md=ne||forge$c.md.sha1.create();var oe=oids[K.md.algorithm+"WithRSAEncryption"];if(!oe){var ce=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw ce.algorithm=K.md.algorithm,ce}K.signatureOid=K.siginfo.algorithmOid=oe,K.certificationRequestInfo=pki$2.getCertificationRequestInfo(K);var ue=asn1$4.toDer(K.certificationRequestInfo);K.md.update(ue.getBytes()),K.signature=J.sign(K.md)},K.verify=function(){var J=!1,ne=K.md;if(ne===null){ne=_createSignatureDigest({signatureOid:K.signatureOid,type:"certification request"});var oe=K.certificationRequestInfo||pki$2.getCertificationRequestInfo(K),ce=asn1$4.toDer(oe);ne.update(ce.getBytes())}return ne!==null&&(J=_verifySignature({certificate:K,md:ne,signature:K.signature})),J},K};function _dnToAsn1(K){for(var J=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),ne,oe,ce=K.attributes,ue=0;ue<ce.length;++ue){ne=ce[ue];var Ae=ne.value,pe=asn1$4.Type.PRINTABLESTRING;"valueTagClass"in ne&&(pe=ne.valueTagClass,pe===asn1$4.Type.UTF8&&(Ae=forge$c.util.encodeUtf8(Ae))),oe=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SET,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(ne.type).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,pe,!1,Ae)])]),J.value.push(oe)}return J}function _fillMissingFields(K){for(var J,ne=0;ne<K.length;++ne){if(J=K[ne],typeof J.name>"u"&&(J.type&&J.type in pki$2.oids?J.name=pki$2.oids[J.type]:J.shortName&&J.shortName in _shortNames&&(J.name=pki$2.oids[_shortNames[J.shortName]])),typeof J.type>"u")if(J.name&&J.name in pki$2.oids)J.type=pki$2.oids[J.name];else{var oe=new Error("Attribute type not specified.");throw oe.attribute=J,oe}if(typeof J.shortName>"u"&&J.name&&J.name in _shortNames&&(J.shortName=_shortNames[J.name]),J.type===oids.extensionRequest&&(J.valueConstructed=!0,J.valueTagClass=asn1$4.Type.SEQUENCE,!J.value&&J.extensions)){J.value=[];for(var ce=0;ce<J.extensions.length;++ce)J.value.push(pki$2.certificateExtensionToAsn1(_fillMissingExtensionFields(J.extensions[ce])))}if(typeof J.value>"u"){var oe=new Error("Attribute value not specified.");throw oe.attribute=J,oe}}}function _fillMissingExtensionFields(K,J){if(J=J||{},typeof K.name>"u"&&K.id&&K.id in pki$2.oids&&(K.name=pki$2.oids[K.id]),typeof K.id>"u")if(K.name&&K.name in pki$2.oids)K.id=pki$2.oids[K.name];else{var ne=new Error("Extension ID not specified.");throw ne.extension=K,ne}if(typeof K.value<"u")return K;if(K.name==="keyUsage"){var oe=0,ce=0,ue=0;K.digitalSignature&&(ce|=128,oe=7),K.nonRepudiation&&(ce|=64,oe=6),K.keyEncipherment&&(ce|=32,oe=5),K.dataEncipherment&&(ce|=16,oe=4),K.keyAgreement&&(ce|=8,oe=3),K.keyCertSign&&(ce|=4,oe=2),K.cRLSign&&(ce|=2,oe=1),K.encipherOnly&&(ce|=1,oe=0),K.decipherOnly&&(ue|=128,oe=7);var Ae=String.fromCharCode(oe);ue!==0?Ae+=String.fromCharCode(ce)+String.fromCharCode(ue):ce!==0&&(Ae+=String.fromCharCode(ce)),K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,Ae)}else if(K.name==="basicConstraints")K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),K.cA&&K.value.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BOOLEAN,!1,"")),"pathLenConstraint"in K&&K.value.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(K.pathLenConstraint).getBytes()));else if(K.name==="extKeyUsage"){K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);var pe=K.value.value;for(var ve in K)K[ve]===!0&&(ve in oids?pe.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(oids[ve]).getBytes())):ve.indexOf(".")!==-1&&pe.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(ve).getBytes())))}else if(K.name==="nsCertType"){var oe=0,ce=0;K.client&&(ce|=128,oe=7),K.server&&(ce|=64,oe=6),K.email&&(ce|=32,oe=5),K.objsign&&(ce|=16,oe=4),K.reserved&&(ce|=8,oe=3),K.sslCA&&(ce|=4,oe=2),K.emailCA&&(ce|=2,oe=1),K.objCA&&(ce|=1,oe=0);var Ae=String.fromCharCode(oe);ce!==0&&(Ae+=String.fromCharCode(ce)),K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,Ae)}else if(K.name==="subjectAltName"||K.name==="issuerAltName"){K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);for(var me,ge=0;ge<K.altNames.length;++ge){me=K.altNames[ge];var Ae=me.value;if(me.type===7&&me.ip){if(Ae=forge$c.util.bytesFromIP(me.ip),Ae===null){var ne=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw ne.extension=K,ne}}else me.type===8&&(me.oid?Ae=asn1$4.oidToDer(asn1$4.oidToDer(me.oid)):Ae=asn1$4.oidToDer(Ae));K.value.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,me.type,!1,Ae))}}else if(K.name==="nsComment"&&J.cert){if(!/^[\x00-\x7F]*$/.test(K.comment)||K.comment.length<1||K.comment.length>128)throw new Error('Invalid "nsComment" content.');K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.IA5STRING,!1,K.comment)}else if(K.name==="subjectKeyIdentifier"&&J.cert){var ye=J.cert.generateSubjectKeyIdentifier();K.subjectKeyIdentifier=ye.toHex(),K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OCTETSTRING,!1,ye.getBytes())}else if(K.name==="authorityKeyIdentifier"&&J.cert){K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);var pe=K.value.value;if(K.keyIdentifier){var xe=K.keyIdentifier===!0?J.cert.generateSubjectKeyIdentifier().getBytes():K.keyIdentifier;pe.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!1,xe))}if(K.authorityCertIssuer){var _e=[asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,4,!0,[_dnToAsn1(K.authorityCertIssuer===!0?J.cert.issuer:K.authorityCertIssuer)])];pe.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,1,!0,_e))}if(K.serialNumber){var $e=forge$c.util.hexToBytes(K.serialNumber===!0?J.cert.serialNumber:K.serialNumber);pe.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,2,!1,$e))}}else if(K.name==="cRLDistributionPoints"){K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);for(var pe=K.value.value,Ie=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),Fe=asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[]),me,ge=0;ge<K.altNames.length;++ge){me=K.altNames[ge];var Ae=me.value;if(me.type===7&&me.ip){if(Ae=forge$c.util.bytesFromIP(me.ip),Ae===null){var ne=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw ne.extension=K,ne}}else me.type===8&&(me.oid?Ae=asn1$4.oidToDer(asn1$4.oidToDer(me.oid)):Ae=asn1$4.oidToDer(Ae));Fe.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,me.type,!1,Ae))}Ie.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[Fe])),pe.push(Ie)}if(typeof K.value>"u"){var ne=new Error("Extension value not specified.");throw ne.extension=K,ne}return K}function _signatureParametersToAsn1(K,J){switch(K){case oids["RSASSA-PSS"]:var ne=[];return J.hash.algorithmOid!==void 0&&ne.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(J.hash.algorithmOid).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")])])),J.mgf.algorithmOid!==void 0&&ne.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,1,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(J.mgf.algorithmOid).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(J.mgf.hash.algorithmOid).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")])])])),J.saltLength!==void 0&&ne.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,2,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(J.saltLength).getBytes())])),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,ne);default:return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")}}function _CRIAttributesToAsn1(K){var J=asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[]);if(K.attributes.length===0)return J;for(var ne=K.attributes,oe=0;oe<ne.length;++oe){var ce=ne[oe],ue=ce.value,Ae=asn1$4.Type.UTF8;"valueTagClass"in ce&&(Ae=ce.valueTagClass),Ae===asn1$4.Type.UTF8&&(ue=forge$c.util.encodeUtf8(ue));var pe=!1;"valueConstructed"in ce&&(pe=ce.valueConstructed);var ve=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(ce.type).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SET,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,Ae,pe,ue)])]);J.value.push(ve)}return J}var jan_1_1950=new Date("1950-01-01T00:00:00Z"),jan_1_2050=new Date("2050-01-01T00:00:00Z");function _dateToAsn1(K){return K>=jan_1_1950&&K<jan_1_2050?asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.UTCTIME,!1,asn1$4.dateToUtcTime(K)):asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.GENERALIZEDTIME,!1,asn1$4.dateToGeneralizedTime(K))}pki$2.getTBSCertificate=function(K){var J=_dateToAsn1(K.validity.notBefore),ne=_dateToAsn1(K.validity.notAfter),oe=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(K.version).getBytes())]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,forge$c.util.hexToBytes(K.serialNumber)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(K.siginfo.algorithmOid).getBytes()),_signatureParametersToAsn1(K.siginfo.algorithmOid,K.siginfo.parameters)]),_dnToAsn1(K.issuer),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[J,ne]),_dnToAsn1(K.subject),pki$2.publicKeyToAsn1(K.publicKey)]);return K.issuer.uniqueId&&oe.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,1,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,"\0"+K.issuer.uniqueId)])),K.subject.uniqueId&&oe.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,2,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,"\0"+K.subject.uniqueId)])),K.extensions.length>0&&oe.value.push(pki$2.certificateExtensionsToAsn1(K.extensions)),oe};pki$2.getCertificationRequestInfo=function(K){var J=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(K.version).getBytes()),_dnToAsn1(K.subject),pki$2.publicKeyToAsn1(K.publicKey),_CRIAttributesToAsn1(K)]);return J};pki$2.distinguishedNameToAsn1=function(K){return _dnToAsn1(K)};pki$2.certificateToAsn1=function(K){var J=K.tbsCertificate||pki$2.getTBSCertificate(K);return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[J,asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(K.signatureOid).getBytes()),_signatureParametersToAsn1(K.signatureOid,K.signatureParameters)]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,"\0"+K.signature)])};pki$2.certificateExtensionsToAsn1=function(K){var J=asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,3,!0,[]),ne=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);J.value.push(ne);for(var oe=0;oe<K.length;++oe)ne.value.push(pki$2.certificateExtensionToAsn1(K[oe]));return J};pki$2.certificateExtensionToAsn1=function(K){var J=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);J.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(K.id).getBytes())),K.critical&&J.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BOOLEAN,!1,""));var ne=K.value;return typeof K.value!="string"&&(ne=asn1$4.toDer(ne).getBytes()),J.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OCTETSTRING,!1,ne)),J};pki$2.certificationRequestToAsn1=function(K){var J=K.certificationRequestInfo||pki$2.getCertificationRequestInfo(K);return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[J,asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(K.signatureOid).getBytes()),_signatureParametersToAsn1(K.signatureOid,K.signatureParameters)]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,"\0"+K.signature)])};pki$2.createCaStore=function(K){var J={certs:{}};J.getIssuer=function(Ae){var pe=ne(Ae.issuer);return pe},J.addCertificate=function(Ae){if(typeof Ae=="string"&&(Ae=forge$c.pki.certificateFromPem(Ae)),oe(Ae.subject),!J.hasCertificate(Ae))if(Ae.subject.hash in J.certs){var pe=J.certs[Ae.subject.hash];forge$c.util.isArray(pe)||(pe=[pe]),pe.push(Ae),J.certs[Ae.subject.hash]=pe}else J.certs[Ae.subject.hash]=Ae},J.hasCertificate=function(Ae){typeof Ae=="string"&&(Ae=forge$c.pki.certificateFromPem(Ae));var pe=ne(Ae.subject);if(!pe)return!1;forge$c.util.isArray(pe)||(pe=[pe]);for(var ve=asn1$4.toDer(pki$2.certificateToAsn1(Ae)).getBytes(),me=0;me<pe.length;++me){var ge=asn1$4.toDer(pki$2.certificateToAsn1(pe[me])).getBytes();if(ve===ge)return!0}return!1},J.listAllCertificates=function(){var Ae=[];for(var pe in J.certs)if(J.certs.hasOwnProperty(pe)){var ve=J.certs[pe];if(!forge$c.util.isArray(ve))Ae.push(ve);else for(var me=0;me<ve.length;++me)Ae.push(ve[me])}return Ae},J.removeCertificate=function(Ae){var pe;if(typeof Ae=="string"&&(Ae=forge$c.pki.certificateFromPem(Ae)),oe(Ae.subject),!J.hasCertificate(Ae))return null;var ve=ne(Ae.subject);if(!forge$c.util.isArray(ve))return pe=J.certs[Ae.subject.hash],delete J.certs[Ae.subject.hash],pe;for(var me=asn1$4.toDer(pki$2.certificateToAsn1(Ae)).getBytes(),ge=0;ge<ve.length;++ge){var ye=asn1$4.toDer(pki$2.certificateToAsn1(ve[ge])).getBytes();me===ye&&(pe=ve[ge],ve.splice(ge,1))}return ve.length===0&&delete J.certs[Ae.subject.hash],pe};function ne(Ae){return oe(Ae),J.certs[Ae.hash]||null}function oe(Ae){if(!Ae.hash){var pe=forge$c.md.sha1.create();Ae.attributes=pki$2.RDNAttributesAsArray(_dnToAsn1(Ae),pe),Ae.hash=pe.digest().toHex()}}if(K)for(var ce=0;ce<K.length;++ce){var ue=K[ce];J.addCertificate(ue)}return J};pki$2.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};pki$2.verifyCertificateChain=function(K,J,ne){typeof ne=="function"&&(ne={verify:ne}),ne=ne||{},J=J.slice(0);var oe=J.slice(0),ce=ne.validityCheckDate;typeof ce>"u"&&(ce=new Date);var ue=!0,Ae=null,pe=0;do{var ve=J.shift(),me=null,ge=!1;if(ce&&(ce<ve.validity.notBefore||ce>ve.validity.notAfter)&&(Ae={message:"Certificate is not valid yet or has expired.",error:pki$2.certificateError.certificate_expired,notBefore:ve.validity.notBefore,notAfter:ve.validity.notAfter,now:ce}),Ae===null){if(me=J[0]||K.getIssuer(ve),me===null&&ve.isIssuer(ve)&&(ge=!0,me=ve),me){var ye=me;forge$c.util.isArray(ye)||(ye=[ye]);for(var xe=!1;!xe&&ye.length>0;){me=ye.shift();try{xe=me.verify(ve)}catch{}}xe||(Ae={message:"Certificate signature is invalid.",error:pki$2.certificateError.bad_certificate})}Ae===null&&(!me||ge)&&!K.hasCertificate(ve)&&(Ae={message:"Certificate is not trusted.",error:pki$2.certificateError.unknown_ca})}if(Ae===null&&me&&!ve.isIssuer(me)&&(Ae={message:"Certificate issuer is invalid.",error:pki$2.certificateError.bad_certificate}),Ae===null)for(var _e={keyUsage:!0,basicConstraints:!0},$e=0;Ae===null&&$e<ve.extensions.length;++$e){var Ie=ve.extensions[$e];Ie.critical&&!(Ie.name in _e)&&(Ae={message:"Certificate has an unsupported critical extension.",error:pki$2.certificateError.unsupported_certificate})}if(Ae===null&&(!ue||J.length===0&&(!me||ge))){var Fe=ve.getExtension("basicConstraints"),ke=ve.getExtension("keyUsage");if(ke!==null&&(!ke.keyCertSign||Fe===null)&&(Ae={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:pki$2.certificateError.bad_certificate}),Ae===null&&Fe!==null&&!Fe.cA&&(Ae={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:pki$2.certificateError.bad_certificate}),Ae===null&&ke!==null&&"pathLenConstraint"in Fe){var je=pe-1;je>Fe.pathLenConstraint&&(Ae={message:"Certificate basicConstraints pathLenConstraint violated.",error:pki$2.certificateError.bad_certificate})}}var We=Ae===null?!0:Ae.error,ze=ne.verify?ne.verify(We,pe,oe):We;if(ze===!0)Ae=null;else throw We===!0&&(Ae={message:"The application rejected the certificate.",error:pki$2.certificateError.bad_certificate}),(ze||ze===0)&&(typeof ze=="object"&&!forge$c.util.isArray(ze)?(ze.message&&(Ae.message=ze.message),ze.error&&(Ae.error=ze.error)):typeof ze=="string"&&(Ae.error=ze)),Ae;ue=!1,++pe}while(J.length>0);return!0};var forge$b=forge$D,asn1$3=forge$b.asn1,pki$1=forge$b.pki,p12=forge$b.pkcs12=forge$b.pkcs12||{},contentInfoValidator={name:"ContentInfo",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:asn1$3.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},pfxValidator={name:"PFX",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.INTEGER,constructed:!1,capture:"version"},contentInfoValidator,{name:"PFX.macData",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:asn1$3.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},safeBagValidator={name:"SafeBag",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:asn1$3.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},attributeValidator={name:"Attribute",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SET,constructed:!0,capture:"values"}]},certBagValidator={name:"CertBag",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:asn1$3.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function _getBagsByAttribute(K,J,ne,oe){for(var ce=[],ue=0;ue<K.length;ue++)for(var Ae=0;Ae<K[ue].safeBags.length;Ae++){var pe=K[ue].safeBags[Ae];if(!(oe!==void 0&&pe.type!==oe)){if(J===null){ce.push(pe);continue}pe.attributes[J]!==void 0&&pe.attributes[J].indexOf(ne)>=0&&ce.push(pe)}}return ce}p12.pkcs12FromAsn1=function(K,J,ne){typeof J=="string"?(ne=J,J=!0):J===void 0&&(J=!0);var oe={},ce=[];if(!asn1$3.validate(K,pfxValidator,oe,ce)){var ue=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw ue.errors=ue,ue}var Ae={version:oe.version.charCodeAt(0),safeContents:[],getBags:function(Fe){var ke={},je;return"localKeyId"in Fe?je=Fe.localKeyId:"localKeyIdHex"in Fe&&(je=forge$b.util.hexToBytes(Fe.localKeyIdHex)),je===void 0&&!("friendlyName"in Fe)&&"bagType"in Fe&&(ke[Fe.bagType]=_getBagsByAttribute(Ae.safeContents,null,null,Fe.bagType)),je!==void 0&&(ke.localKeyId=_getBagsByAttribute(Ae.safeContents,"localKeyId",je,Fe.bagType)),"friendlyName"in Fe&&(ke.friendlyName=_getBagsByAttribute(Ae.safeContents,"friendlyName",Fe.friendlyName,Fe.bagType)),ke},getBagsByFriendlyName:function(Fe,ke){return _getBagsByAttribute(Ae.safeContents,"friendlyName",Fe,ke)},getBagsByLocalKeyId:function(Fe,ke){return _getBagsByAttribute(Ae.safeContents,"localKeyId",Fe,ke)}};if(oe.version.charCodeAt(0)!==3){var ue=new Error("PKCS#12 PFX of version other than 3 not supported.");throw ue.version=oe.version.charCodeAt(0),ue}if(asn1$3.derToOid(oe.contentType)!==pki$1.oids.data){var ue=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw ue.oid=asn1$3.derToOid(oe.contentType),ue}var pe=oe.content.value[0];if(pe.tagClass!==asn1$3.Class.UNIVERSAL||pe.type!==asn1$3.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(pe=_decodePkcs7Data(pe),oe.mac){var ve=null,me=0,ge=asn1$3.derToOid(oe.macAlgorithm);switch(ge){case pki$1.oids.sha1:ve=forge$b.md.sha1.create(),me=20;break;case pki$1.oids.sha256:ve=forge$b.md.sha256.create(),me=32;break;case pki$1.oids.sha384:ve=forge$b.md.sha384.create(),me=48;break;case pki$1.oids.sha512:ve=forge$b.md.sha512.create(),me=64;break;case pki$1.oids.md5:ve=forge$b.md.md5.create(),me=16;break}if(ve===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+ge);var ye=new forge$b.util.ByteBuffer(oe.macSalt),xe="macIterations"in oe?parseInt(forge$b.util.bytesToHex(oe.macIterations),16):1,_e=p12.generateKey(ne,ye,3,xe,me,ve),$e=forge$b.hmac.create();$e.start(ve,_e),$e.update(pe.value);var Ie=$e.getMac();if(Ie.getBytes()!==oe.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return _decodeAuthenticatedSafe(Ae,pe.value,J,ne),Ae};function _decodePkcs7Data(K){if(K.composed||K.constructed){for(var J=forge$b.util.createBuffer(),ne=0;ne<K.value.length;++ne)J.putBytes(K.value[ne].value);K.composed=K.constructed=!1,K.value=J.getBytes()}return K}function _decodeAuthenticatedSafe(K,J,ne,oe){if(J=asn1$3.fromDer(J,ne),J.tagClass!==asn1$3.Class.UNIVERSAL||J.type!==asn1$3.Type.SEQUENCE||J.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var ce=0;ce<J.value.length;ce++){var ue=J.value[ce],Ae={},pe=[];if(!asn1$3.validate(ue,contentInfoValidator,Ae,pe)){var ve=new Error("Cannot read ContentInfo.");throw ve.errors=pe,ve}var me={encrypted:!1},ge=null,ye=Ae.content.value[0];switch(asn1$3.derToOid(Ae.contentType)){case pki$1.oids.data:if(ye.tagClass!==asn1$3.Class.UNIVERSAL||ye.type!==asn1$3.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");ge=_decodePkcs7Data(ye).value;break;case pki$1.oids.encryptedData:ge=_decryptSafeContents(ye,oe),me.encrypted=!0;break;default:var ve=new Error("Unsupported PKCS#12 contentType.");throw ve.contentType=asn1$3.derToOid(Ae.contentType),ve}me.safeBags=_decodeSafeContents(ge,ne,oe),K.safeContents.push(me)}}function _decryptSafeContents(K,J){var ne={},oe=[];if(!asn1$3.validate(K,forge$b.pkcs7.asn1.encryptedDataValidator,ne,oe)){var ce=new Error("Cannot read EncryptedContentInfo.");throw ce.errors=oe,ce}var ue=asn1$3.derToOid(ne.contentType);if(ue!==pki$1.oids.data){var ce=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw ce.oid=ue,ce}ue=asn1$3.derToOid(ne.encAlgorithm);var Ae=pki$1.pbe.getCipher(ue,ne.encParameter,J),pe=_decodePkcs7Data(ne.encryptedContentAsn1),ve=forge$b.util.createBuffer(pe.value);if(Ae.update(ve),!Ae.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return Ae.output.getBytes()}function _decodeSafeContents(K,J,ne){if(!J&&K.length===0)return[];if(K=asn1$3.fromDer(K,J),K.tagClass!==asn1$3.Class.UNIVERSAL||K.type!==asn1$3.Type.SEQUENCE||K.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var oe=[],ce=0;ce<K.value.length;ce++){var ue=K.value[ce],Ae={},pe=[];if(!asn1$3.validate(ue,safeBagValidator,Ae,pe)){var ve=new Error("Cannot read SafeBag.");throw ve.errors=pe,ve}var me={type:asn1$3.derToOid(Ae.bagId),attributes:_decodeBagAttributes(Ae.bagAttributes)};oe.push(me);var ge,ye,xe=Ae.bagValue.value[0];switch(me.type){case pki$1.oids.pkcs8ShroudedKeyBag:if(xe=pki$1.decryptPrivateKeyInfo(xe,ne),xe===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case pki$1.oids.keyBag:try{me.key=pki$1.privateKeyFromAsn1(xe)}catch{me.key=null,me.asn1=xe}continue;case pki$1.oids.certBag:ge=certBagValidator,ye=function(){if(asn1$3.derToOid(Ae.certId)!==pki$1.oids.x509Certificate){var $e=new Error("Unsupported certificate type, only X.509 supported.");throw $e.oid=asn1$3.derToOid(Ae.certId),$e}var Ie=asn1$3.fromDer(Ae.cert,J);try{me.cert=pki$1.certificateFromAsn1(Ie,!0)}catch{me.cert=null,me.asn1=Ie}};break;default:var ve=new Error("Unsupported PKCS#12 SafeBag type.");throw ve.oid=me.type,ve}if(ge!==void 0&&!asn1$3.validate(xe,ge,Ae,pe)){var ve=new Error("Cannot read PKCS#12 "+ge.name);throw ve.errors=pe,ve}ye()}return oe}function _decodeBagAttributes(K){var J={};if(K!==void 0)for(var ne=0;ne<K.length;++ne){var oe={},ce=[];if(!asn1$3.validate(K[ne],attributeValidator,oe,ce)){var ue=new Error("Cannot read PKCS#12 BagAttribute.");throw ue.errors=ce,ue}var Ae=asn1$3.derToOid(oe.oid);if(pki$1.oids[Ae]!==void 0){J[pki$1.oids[Ae]]=[];for(var pe=0;pe<oe.values.length;++pe)J[pki$1.oids[Ae]].push(oe.values[pe].value)}}return J}p12.toPkcs12Asn1=function(K,J,ne,oe){oe=oe||{},oe.saltSize=oe.saltSize||8,oe.count=oe.count||2048,oe.algorithm=oe.algorithm||oe.encAlgorithm||"aes128","useMac"in oe||(oe.useMac=!0),"localKeyId"in oe||(oe.localKeyId=null),"generateLocalKeyId"in oe||(oe.generateLocalKeyId=!0);var ce=oe.localKeyId,ue;if(ce!==null)ce=forge$b.util.hexToBytes(ce);else if(oe.generateLocalKeyId)if(J){var Ae=forge$b.util.isArray(J)?J[0]:J;typeof Ae=="string"&&(Ae=pki$1.certificateFromPem(Ae));var pe=forge$b.md.sha1.create();pe.update(asn1$3.toDer(pki$1.certificateToAsn1(Ae)).getBytes()),ce=pe.digest().getBytes()}else ce=forge$b.random.getBytes(20);var ve=[];ce!==null&&ve.push(asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.localKeyId).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SET,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,ce)])])),"friendlyName"in oe&&ve.push(asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.friendlyName).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SET,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.BMPSTRING,!1,oe.friendlyName)])])),ve.length>0&&(ue=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SET,!0,ve));var me=[],ge=[];J!==null&&(forge$b.util.isArray(J)?ge=J:ge=[J]);for(var ye=[],xe=0;xe<ge.length;++xe){J=ge[xe],typeof J=="string"&&(J=pki$1.certificateFromPem(J));var _e=xe===0?ue:void 0,$e=pki$1.certificateToAsn1(J),Ie=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.certBag).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.x509Certificate).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer($e).getBytes())])])]),_e]);ye.push(Ie)}if(ye.length>0){var Fe=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,ye),ke=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.data).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(Fe).getBytes())])]);me.push(ke)}var je=null;if(K!==null){var We=pki$1.wrapRsaPrivateKey(pki$1.privateKeyToAsn1(K));ne===null?je=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.keyBag).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[We]),ue]):je=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.pkcs8ShroudedKeyBag).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[pki$1.encryptPrivateKeyInfo(We,ne,oe)]),ue]);var ze=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[je]),Xe=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.data).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(ze).getBytes())])]);me.push(Xe)}var Je=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,me),nt;if(oe.useMac){var pe=forge$b.md.sha1.create(),et=new forge$b.util.ByteBuffer(forge$b.random.getBytes(oe.saltSize)),tt=oe.count,K=p12.generateKey(ne,et,3,tt,20),st=forge$b.hmac.create();st.start(pe,K),st.update(asn1$3.toDer(Je).getBytes());var qe=st.getMac();nt=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.sha1).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.NULL,!1,"")]),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,qe.getBytes())]),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,et.getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.INTEGER,!1,asn1$3.integerToDer(tt).getBytes())])}return asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.INTEGER,!1,asn1$3.integerToDer(3).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.data).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(Je).getBytes())])]),nt])};p12.generateKey=forge$b.pbe.generatePkcs12Key;var forge$a=forge$D,asn1$2=forge$a.asn1,pki=forge$a.pki=forge$a.pki||{};pki.pemToDer=function(K){var J=forge$a.pem.decode(K)[0];if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return forge$a.util.createBuffer(J.body)};pki.privateKeyFromPem=function(K){var J=forge$a.pem.decode(K)[0];if(J.type!=="PRIVATE KEY"&&J.type!=="RSA PRIVATE KEY"){var ne=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw ne.headerType=J.type,ne}if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var oe=asn1$2.fromDer(J.body);return pki.privateKeyFromAsn1(oe)};pki.privateKeyToPem=function(K,J){var ne={type:"RSA PRIVATE KEY",body:asn1$2.toDer(pki.privateKeyToAsn1(K)).getBytes()};return forge$a.pem.encode(ne,{maxline:J})};pki.privateKeyInfoToPem=function(K,J){var ne={type:"PRIVATE KEY",body:asn1$2.toDer(K).getBytes()};return forge$a.pem.encode(ne,{maxline:J})};var forge$9=forge$D,prf_TLS1=function(K,J,ne,oe){var ce=forge$9.util.createBuffer(),ue=K.length>>1,Ae=ue+(K.length&1),pe=K.substr(0,Ae),ve=K.substr(ue,Ae),me=forge$9.util.createBuffer(),ge=forge$9.hmac.create();ne=J+ne;var ye=Math.ceil(oe/16),xe=Math.ceil(oe/20);ge.start("MD5",pe);var _e=forge$9.util.createBuffer();me.putBytes(ne);for(var $e=0;$e<ye;++$e)ge.start(null,null),ge.update(me.getBytes()),me.putBuffer(ge.digest()),ge.start(null,null),ge.update(me.bytes()+ne),_e.putBuffer(ge.digest());ge.start("SHA1",ve);var Ie=forge$9.util.createBuffer();me.clear(),me.putBytes(ne);for(var $e=0;$e<xe;++$e)ge.start(null,null),ge.update(me.getBytes()),me.putBuffer(ge.digest()),ge.start(null,null),ge.update(me.bytes()+ne),Ie.putBuffer(ge.digest());return ce.putBytes(forge$9.util.xorBytes(_e.getBytes(),Ie.getBytes(),oe)),ce},hmac_sha1=function(K,J,ne){var oe=forge$9.hmac.create();oe.start("SHA1",K);var ce=forge$9.util.createBuffer();return ce.putInt32(J[0]),ce.putInt32(J[1]),ce.putByte(ne.type),ce.putByte(ne.version.major),ce.putByte(ne.version.minor),ce.putInt16(ne.length),ce.putBytes(ne.fragment.bytes()),oe.update(ce.getBytes()),oe.digest().getBytes()},deflate=function(K,J,ne){var oe=!1;try{var ce=K.deflate(J.fragment.getBytes());J.fragment=forge$9.util.createBuffer(ce),J.length=ce.length,oe=!0}catch{}return oe},inflate=function(K,J,ne){var oe=!1;try{var ce=K.inflate(J.fragment.getBytes());J.fragment=forge$9.util.createBuffer(ce),J.length=ce.length,oe=!0}catch{}return oe},readVector=function(K,J){var ne=0;switch(J){case 1:ne=K.getByte();break;case 2:ne=K.getInt16();break;case 3:ne=K.getInt24();break;case 4:ne=K.getInt32();break}return forge$9.util.createBuffer(K.getBytes(ne))},writeVector=function(K,J,ne){K.putInt(ne.length(),J<<3),K.putBuffer(ne)},tls$1={};tls$1.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};tls$1.SupportedVersions=[tls$1.Versions.TLS_1_1,tls$1.Versions.TLS_1_0];tls$1.Version=tls$1.SupportedVersions[0];tls$1.MaxFragment=15360;tls$1.ConnectionEnd={server:0,client:1};tls$1.PRFAlgorithm={tls_prf_sha256:0};tls$1.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};tls$1.CipherType={stream:0,block:1,aead:2};tls$1.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};tls$1.CompressionMethod={none:0,deflate:1};tls$1.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};tls$1.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};tls$1.Alert={};tls$1.Alert.Level={warning:1,fatal:2};tls$1.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};tls$1.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};tls$1.CipherSuites={};tls$1.getCipherSuite=function(K){var J=null;for(var ne in tls$1.CipherSuites){var oe=tls$1.CipherSuites[ne];if(oe.id[0]===K.charCodeAt(0)&&oe.id[1]===K.charCodeAt(1)){J=oe;break}}return J};tls$1.handleUnexpected=function(K,J){var ne=!K.open&&K.entity===tls$1.ConnectionEnd.client;ne||K.error(K,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unexpected_message}})};tls$1.handleHelloRequest=function(K,J,ne){!K.handshaking&&K.handshakes>0&&(tls$1.queue(K,tls$1.createAlert(K,{level:tls$1.Alert.Level.warning,description:tls$1.Alert.Description.no_renegotiation})),tls$1.flush(K)),K.process()};tls$1.parseHelloMessage=function(K,J,ne){var oe=null,ce=K.entity===tls$1.ConnectionEnd.client;if(ne<38)K.error(K,{message:ce?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});else{var ue=J.fragment,Ae=ue.length();if(oe={version:{major:ue.getByte(),minor:ue.getByte()},random:forge$9.util.createBuffer(ue.getBytes(32)),session_id:readVector(ue,1),extensions:[]},ce?(oe.cipher_suite=ue.getBytes(2),oe.compression_method=ue.getByte()):(oe.cipher_suites=readVector(ue,2),oe.compression_methods=readVector(ue,1)),Ae=ne-(Ae-ue.length()),Ae>0){for(var pe=readVector(ue,2);pe.length()>0;)oe.extensions.push({type:[pe.getByte(),pe.getByte()],data:readVector(pe,2)});if(!ce)for(var ve=0;ve<oe.extensions.length;++ve){var me=oe.extensions[ve];if(me.type[0]===0&&me.type[1]===0)for(var ge=readVector(me.data,2);ge.length()>0;){var ye=ge.getByte();if(ye!==0)break;K.session.extensions.server_name.serverNameList.push(readVector(ge,2).getBytes())}}}if(K.session.version&&(oe.version.major!==K.session.version.major||oe.version.minor!==K.session.version.minor))return K.error(K,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.protocol_version}});if(ce)K.session.cipherSuite=tls$1.getCipherSuite(oe.cipher_suite);else for(var xe=forge$9.util.createBuffer(oe.cipher_suites.bytes());xe.length()>0&&(K.session.cipherSuite=tls$1.getCipherSuite(xe.getBytes(2)),K.session.cipherSuite===null););if(K.session.cipherSuite===null)return K.error(K,{message:"No cipher suites in common.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.handshake_failure},cipherSuite:forge$9.util.bytesToHex(oe.cipher_suite)});ce?K.session.compressionMethod=oe.compression_method:K.session.compressionMethod=tls$1.CompressionMethod.none}return oe};tls$1.createSecurityParameters=function(K,J){var ne=K.entity===tls$1.ConnectionEnd.client,oe=J.random.bytes(),ce=ne?K.session.sp.client_random:oe,ue=ne?oe:tls$1.createRandom().getBytes();K.session.sp={entity:K.entity,prf_algorithm:tls$1.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:K.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:ce,server_random:ue}};tls$1.handleServerHello=function(K,J,ne){var oe=tls$1.parseHelloMessage(K,J,ne);if(!K.fail){if(oe.version.minor<=K.version.minor)K.version.minor=oe.version.minor;else return K.error(K,{message:"Incompatible TLS version.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.protocol_version}});K.session.version=K.version;var ce=oe.session_id.bytes();ce.length>0&&ce===K.session.id?(K.expect=SCC,K.session.resuming=!0,K.session.sp.server_random=oe.random.bytes()):(K.expect=SCE,K.session.resuming=!1,tls$1.createSecurityParameters(K,oe)),K.session.id=ce,K.process()}};tls$1.handleClientHello=function(K,J,ne){var oe=tls$1.parseHelloMessage(K,J,ne);if(!K.fail){var ce=oe.session_id.bytes(),ue=null;if(K.sessionCache&&(ue=K.sessionCache.getSession(ce),ue===null?ce="":(ue.version.major!==oe.version.major||ue.version.minor>oe.version.minor)&&(ue=null,ce="")),ce.length===0&&(ce=forge$9.random.getBytes(32)),K.session.id=ce,K.session.clientHelloVersion=oe.version,K.session.sp={},ue)K.version=K.session.version=ue.version,K.session.sp=ue.sp;else{for(var Ae,pe=1;pe<tls$1.SupportedVersions.length&&(Ae=tls$1.SupportedVersions[pe],!(Ae.minor<=oe.version.minor));++pe);K.version={major:Ae.major,minor:Ae.minor},K.session.version=K.version}ue!==null?(K.expect=CCC,K.session.resuming=!0,K.session.sp.client_random=oe.random.bytes()):(K.expect=K.verifyClient!==!1?CCE:CKE,K.session.resuming=!1,tls$1.createSecurityParameters(K,oe)),K.open=!0,tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createServerHello(K)})),K.session.resuming?(tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.change_cipher_spec,data:tls$1.createChangeCipherSpec()})),K.state.pending=tls$1.createConnectionState(K),K.state.current.write=K.state.pending.write,tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createFinished(K)}))):(tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createCertificate(K)})),K.fail||(tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createServerKeyExchange(K)})),K.verifyClient!==!1&&tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createCertificateRequest(K)})),tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createServerHelloDone(K)})))),tls$1.flush(K),K.process()}};tls$1.handleCertificate=function(K,J,ne){if(ne<3)return K.error(K,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var oe=J.fragment,ce={certificate_list:readVector(oe,3)},ue,Ae,pe=[];try{for(;ce.certificate_list.length()>0;)ue=readVector(ce.certificate_list,3),Ae=forge$9.asn1.fromDer(ue),ue=forge$9.pki.certificateFromAsn1(Ae,!0),pe.push(ue)}catch(me){return K.error(K,{message:"Could not parse certificate list.",cause:me,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_certificate}})}var ve=K.entity===tls$1.ConnectionEnd.client;(ve||K.verifyClient===!0)&&pe.length===0?K.error(K,{message:ve?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}}):pe.length===0?K.expect=ve?SKE:CKE:(ve?K.session.serverCertificate=pe[0]:K.session.clientCertificate=pe[0],tls$1.verifyCertificateChain(K,pe)&&(K.expect=ve?SKE:CKE)),K.process()};tls$1.handleServerKeyExchange=function(K,J,ne){if(ne>0)return K.error(K,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unsupported_certificate}});K.expect=SCR,K.process()};tls$1.handleClientKeyExchange=function(K,J,ne){if(ne<48)return K.error(K,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unsupported_certificate}});var oe=J.fragment,ce={enc_pre_master_secret:readVector(oe,2).getBytes()},ue=null;if(K.getPrivateKey)try{ue=K.getPrivateKey(K,K.session.serverCertificate),ue=forge$9.pki.privateKeyFromPem(ue)}catch(ve){K.error(K,{message:"Could not get private key.",cause:ve,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}})}if(ue===null)return K.error(K,{message:"No private key set.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}});try{var Ae=K.session.sp;Ae.pre_master_secret=ue.decrypt(ce.enc_pre_master_secret);var pe=K.session.clientHelloVersion;if(pe.major!==Ae.pre_master_secret.charCodeAt(0)||pe.minor!==Ae.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{Ae.pre_master_secret=forge$9.random.getBytes(48)}K.expect=CCC,K.session.clientCertificate!==null&&(K.expect=CCV),K.process()};tls$1.handleCertificateRequest=function(K,J,ne){if(ne<3)return K.error(K,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var oe=J.fragment,ce={certificate_types:readVector(oe,1),certificate_authorities:readVector(oe,2)};K.session.certificateRequest=ce,K.expect=SHD,K.process()};tls$1.handleCertificateVerify=function(K,J,ne){if(ne<2)return K.error(K,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var oe=J.fragment;oe.read-=4;var ce=oe.bytes();oe.read+=4;var ue={signature:readVector(oe,2).getBytes()},Ae=forge$9.util.createBuffer();Ae.putBuffer(K.session.md5.digest()),Ae.putBuffer(K.session.sha1.digest()),Ae=Ae.getBytes();try{var pe=K.session.clientCertificate;if(!pe.publicKey.verify(Ae,ue.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");K.session.md5.update(ce),K.session.sha1.update(ce)}catch{return K.error(K,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.handshake_failure}})}K.expect=CCC,K.process()};tls$1.handleServerHelloDone=function(K,J,ne){if(ne>0)return K.error(K,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.record_overflow}});if(K.serverCertificate===null){var oe={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.insufficient_security}},ce=0,ue=K.verify(K,oe.alert.description,ce,[]);if(ue!==!0)return(ue||ue===0)&&(typeof ue=="object"&&!forge$9.util.isArray(ue)?(ue.message&&(oe.message=ue.message),ue.alert&&(oe.alert.description=ue.alert)):typeof ue=="number"&&(oe.alert.description=ue)),K.error(K,oe)}K.session.certificateRequest!==null&&(J=tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createCertificate(K)}),tls$1.queue(K,J)),J=tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createClientKeyExchange(K)}),tls$1.queue(K,J),K.expect=SER;var Ae=function(pe,ve){pe.session.certificateRequest!==null&&pe.session.clientCertificate!==null&&tls$1.queue(pe,tls$1.createRecord(pe,{type:tls$1.ContentType.handshake,data:tls$1.createCertificateVerify(pe,ve)})),tls$1.queue(pe,tls$1.createRecord(pe,{type:tls$1.ContentType.change_cipher_spec,data:tls$1.createChangeCipherSpec()})),pe.state.pending=tls$1.createConnectionState(pe),pe.state.current.write=pe.state.pending.write,tls$1.queue(pe,tls$1.createRecord(pe,{type:tls$1.ContentType.handshake,data:tls$1.createFinished(pe)})),pe.expect=SCC,tls$1.flush(pe),pe.process()};if(K.session.certificateRequest===null||K.session.clientCertificate===null)return Ae(K,null);tls$1.getClientSignature(K,Ae)};tls$1.handleChangeCipherSpec=function(K,J){if(J.fragment.getByte()!==1)return K.error(K,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var ne=K.entity===tls$1.ConnectionEnd.client;(K.session.resuming&&ne||!K.session.resuming&&!ne)&&(K.state.pending=tls$1.createConnectionState(K)),K.state.current.read=K.state.pending.read,(!K.session.resuming&&ne||K.session.resuming&&!ne)&&(K.state.pending=null),K.expect=ne?SFI:CFI,K.process()};tls$1.handleFinished=function(K,J,ne){var oe=J.fragment;oe.read-=4;var ce=oe.bytes();oe.read+=4;var ue=J.fragment.getBytes();oe=forge$9.util.createBuffer(),oe.putBuffer(K.session.md5.digest()),oe.putBuffer(K.session.sha1.digest());var Ae=K.entity===tls$1.ConnectionEnd.client,pe=Ae?"server finished":"client finished",ve=K.session.sp,me=12,ge=prf_TLS1;if(oe=ge(ve.master_secret,pe,oe.getBytes(),me),oe.getBytes()!==ue)return K.error(K,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.decrypt_error}});K.session.md5.update(ce),K.session.sha1.update(ce),(K.session.resuming&&Ae||!K.session.resuming&&!Ae)&&(tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.change_cipher_spec,data:tls$1.createChangeCipherSpec()})),K.state.current.write=K.state.pending.write,K.state.pending=null,tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createFinished(K)}))),K.expect=Ae?SAD:CAD,K.handshaking=!1,++K.handshakes,K.peerCertificate=Ae?K.session.serverCertificate:K.session.clientCertificate,tls$1.flush(K),K.isConnected=!0,K.connected(K),K.process()};tls$1.handleAlert=function(K,J){var ne=J.fragment,oe={level:ne.getByte(),description:ne.getByte()},ce;switch(oe.description){case tls$1.Alert.Description.close_notify:ce="Connection closed.";break;case tls$1.Alert.Description.unexpected_message:ce="Unexpected message.";break;case tls$1.Alert.Description.bad_record_mac:ce="Bad record MAC.";break;case tls$1.Alert.Description.decryption_failed:ce="Decryption failed.";break;case tls$1.Alert.Description.record_overflow:ce="Record overflow.";break;case tls$1.Alert.Description.decompression_failure:ce="Decompression failed.";break;case tls$1.Alert.Description.handshake_failure:ce="Handshake failure.";break;case tls$1.Alert.Description.bad_certificate:ce="Bad certificate.";break;case tls$1.Alert.Description.unsupported_certificate:ce="Unsupported certificate.";break;case tls$1.Alert.Description.certificate_revoked:ce="Certificate revoked.";break;case tls$1.Alert.Description.certificate_expired:ce="Certificate expired.";break;case tls$1.Alert.Description.certificate_unknown:ce="Certificate unknown.";break;case tls$1.Alert.Description.illegal_parameter:ce="Illegal parameter.";break;case tls$1.Alert.Description.unknown_ca:ce="Unknown certificate authority.";break;case tls$1.Alert.Description.access_denied:ce="Access denied.";break;case tls$1.Alert.Description.decode_error:ce="Decode error.";break;case tls$1.Alert.Description.decrypt_error:ce="Decrypt error.";break;case tls$1.Alert.Description.export_restriction:ce="Export restriction.";break;case tls$1.Alert.Description.protocol_version:ce="Unsupported protocol version.";break;case tls$1.Alert.Description.insufficient_security:ce="Insufficient security.";break;case tls$1.Alert.Description.internal_error:ce="Internal error.";break;case tls$1.Alert.Description.user_canceled:ce="User canceled.";break;case tls$1.Alert.Description.no_renegotiation:ce="Renegotiation not supported.";break;default:ce="Unknown error.";break}if(oe.description===tls$1.Alert.Description.close_notify)return K.close();K.error(K,{message:ce,send:!1,origin:K.entity===tls$1.ConnectionEnd.client?"server":"client",alert:oe}),K.process()};tls$1.handleHandshake=function(K,J){var ne=J.fragment,oe=ne.getByte(),ce=ne.getInt24();if(ce>ne.length())return K.fragmented=J,J.fragment=forge$9.util.createBuffer(),ne.read-=4,K.process();K.fragmented=null,ne.read-=4;var ue=ne.bytes(ce+4);ne.read+=4,oe in hsTable[K.entity][K.expect]?(K.entity===tls$1.ConnectionEnd.server&&!K.open&&!K.fail&&(K.handshaking=!0,K.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:forge$9.md.md5.create(),sha1:forge$9.md.sha1.create()}),oe!==tls$1.HandshakeType.hello_request&&oe!==tls$1.HandshakeType.certificate_verify&&oe!==tls$1.HandshakeType.finished&&(K.session.md5.update(ue),K.session.sha1.update(ue)),hsTable[K.entity][K.expect][oe](K,J,ce)):tls$1.handleUnexpected(K,J)};tls$1.handleApplicationData=function(K,J){K.data.putBuffer(J.fragment),K.dataReady(K),K.process()};tls$1.handleHeartbeat=function(K,J){var ne=J.fragment,oe=ne.getByte(),ce=ne.getInt16(),ue=ne.getBytes(ce);if(oe===tls$1.HeartbeatMessageType.heartbeat_request){if(K.handshaking||ce>ue.length)return K.process();tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.heartbeat,data:tls$1.createHeartbeat(tls$1.HeartbeatMessageType.heartbeat_response,ue)})),tls$1.flush(K)}else if(oe===tls$1.HeartbeatMessageType.heartbeat_response){if(ue!==K.expectedHeartbeatPayload)return K.process();K.heartbeatReceived&&K.heartbeatReceived(K,forge$9.util.createBuffer(ue))}K.process()};var SHE=0,SCE=1,SKE=2,SCR=3,SHD=4,SCC=5,SFI=6,SAD=7,SER=8,CHE=0,CCE=1,CKE=2,CCV=3,CCC=4,CFI=5,CAD=6,__=tls$1.handleUnexpected,R0=tls$1.handleChangeCipherSpec,R1=tls$1.handleAlert,R2=tls$1.handleHandshake,R3=tls$1.handleApplicationData,R4=tls$1.handleHeartbeat,ctTable=[];ctTable[tls$1.ConnectionEnd.client]=[[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[R0,R1,__,__,R4],[__,R1,R2,__,R4],[__,R1,R2,R3,R4],[__,R1,R2,__,R4]];ctTable[tls$1.ConnectionEnd.server]=[[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[R0,R1,__,__,R4],[__,R1,R2,__,R4],[__,R1,R2,R3,R4],[__,R1,R2,__,R4]];var H0=tls$1.handleHelloRequest,H1=tls$1.handleServerHello,H2=tls$1.handleCertificate,H3=tls$1.handleServerKeyExchange,H4=tls$1.handleCertificateRequest,H5=tls$1.handleServerHelloDone,H6=tls$1.handleFinished,hsTable=[];hsTable[tls$1.ConnectionEnd.client]=[[__,__,H1,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,H2,H3,H4,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,H3,H4,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,H4,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H6],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__]];var H7=tls$1.handleClientHello,H8=tls$1.handleClientKeyExchange,H9=tls$1.handleCertificateVerify;hsTable[tls$1.ConnectionEnd.server]=[[__,H7,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,H2,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H8,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H9,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H6],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__]];tls$1.generateKeys=function(K,J){var ne=prf_TLS1,oe=J.client_random+J.server_random;K.session.resuming||(J.master_secret=ne(J.pre_master_secret,"master secret",oe,48).bytes(),J.pre_master_secret=null),oe=J.server_random+J.client_random;var ce=2*J.mac_key_length+2*J.enc_key_length,ue=K.version.major===tls$1.Versions.TLS_1_0.major&&K.version.minor===tls$1.Versions.TLS_1_0.minor;ue&&(ce+=2*J.fixed_iv_length);var Ae=ne(J.master_secret,"key expansion",oe,ce),pe={client_write_MAC_key:Ae.getBytes(J.mac_key_length),server_write_MAC_key:Ae.getBytes(J.mac_key_length),client_write_key:Ae.getBytes(J.enc_key_length),server_write_key:Ae.getBytes(J.enc_key_length)};return ue&&(pe.client_write_IV=Ae.getBytes(J.fixed_iv_length),pe.server_write_IV=Ae.getBytes(J.fixed_iv_length)),pe};tls$1.createConnectionState=function(K){var J=K.entity===tls$1.ConnectionEnd.client,ne=function(){var ue={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(Ae){return!0},compressionState:null,compressFunction:function(Ae){return!0},updateSequenceNumber:function(){ue.sequenceNumber[1]===4294967295?(ue.sequenceNumber[1]=0,++ue.sequenceNumber[0]):++ue.sequenceNumber[1]}};return ue},oe={read:ne(),write:ne()};if(oe.read.update=function(ue,Ae){return oe.read.cipherFunction(Ae,oe.read)?oe.read.compressFunction(ue,Ae,oe.read)||ue.error(ue,{message:"Could not decompress record.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.decompression_failure}}):ue.error(ue,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_record_mac}}),!ue.fail},oe.write.update=function(ue,Ae){return oe.write.compressFunction(ue,Ae,oe.write)?oe.write.cipherFunction(Ae,oe.write)||ue.error(ue,{message:"Could not encrypt record.",send:!1,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}}):ue.error(ue,{message:"Could not compress record.",send:!1,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}}),!ue.fail},K.session){var ce=K.session.sp;switch(K.session.cipherSuite.initSecurityParameters(ce),ce.keys=tls$1.generateKeys(K,ce),oe.read.macKey=J?ce.keys.server_write_MAC_key:ce.keys.client_write_MAC_key,oe.write.macKey=J?ce.keys.client_write_MAC_key:ce.keys.server_write_MAC_key,K.session.cipherSuite.initConnectionState(oe,K,ce),ce.compression_algorithm){case tls$1.CompressionMethod.none:break;case tls$1.CompressionMethod.deflate:oe.read.compressFunction=inflate,oe.write.compressFunction=deflate;break;default:throw new Error("Unsupported compression algorithm.")}}return oe};tls$1.createRandom=function(){var K=new Date,J=+K+K.getTimezoneOffset()*6e4,ne=forge$9.util.createBuffer();return ne.putInt32(J),ne.putBytes(forge$9.random.getBytes(28)),ne};tls$1.createRecord=function(K,J){if(!J.data)return null;var ne={type:J.type,version:{major:K.version.major,minor:K.version.minor},length:J.data.length(),fragment:J.data};return ne};tls$1.createAlert=function(K,J){var ne=forge$9.util.createBuffer();return ne.putByte(J.level),ne.putByte(J.description),tls$1.createRecord(K,{type:tls$1.ContentType.alert,data:ne})};tls$1.createClientHello=function(K){K.session.clientHelloVersion={major:K.version.major,minor:K.version.minor};for(var J=forge$9.util.createBuffer(),ne=0;ne<K.cipherSuites.length;++ne){var oe=K.cipherSuites[ne];J.putByte(oe.id[0]),J.putByte(oe.id[1])}var ce=J.length(),ue=forge$9.util.createBuffer();ue.putByte(tls$1.CompressionMethod.none);var Ae=ue.length(),pe=forge$9.util.createBuffer();if(K.virtualHost){var ve=forge$9.util.createBuffer();ve.putByte(0),ve.putByte(0);var me=forge$9.util.createBuffer();me.putByte(0),writeVector(me,2,forge$9.util.createBuffer(K.virtualHost));var ge=forge$9.util.createBuffer();writeVector(ge,2,me),writeVector(ve,2,ge),pe.putBuffer(ve)}var ye=pe.length();ye>0&&(ye+=2);var xe=K.session.id,_e=xe.length+1+2+4+28+2+ce+1+Ae+ye,$e=forge$9.util.createBuffer();return $e.putByte(tls$1.HandshakeType.client_hello),$e.putInt24(_e),$e.putByte(K.version.major),$e.putByte(K.version.minor),$e.putBytes(K.session.sp.client_random),writeVector($e,1,forge$9.util.createBuffer(xe)),writeVector($e,2,J),writeVector($e,1,ue),ye>0&&writeVector($e,2,pe),$e};tls$1.createServerHello=function(K){var J=K.session.id,ne=J.length+1+2+4+28+2+1,oe=forge$9.util.createBuffer();return oe.putByte(tls$1.HandshakeType.server_hello),oe.putInt24(ne),oe.putByte(K.version.major),oe.putByte(K.version.minor),oe.putBytes(K.session.sp.server_random),writeVector(oe,1,forge$9.util.createBuffer(J)),oe.putByte(K.session.cipherSuite.id[0]),oe.putByte(K.session.cipherSuite.id[1]),oe.putByte(K.session.compressionMethod),oe};tls$1.createCertificate=function(K){var J=K.entity===tls$1.ConnectionEnd.client,ne=null;if(K.getCertificate){var oe;J?oe=K.session.certificateRequest:oe=K.session.extensions.server_name.serverNameList,ne=K.getCertificate(K,oe)}var ce=forge$9.util.createBuffer();if(ne!==null)try{forge$9.util.isArray(ne)||(ne=[ne]);for(var ue=null,Ae=0;Ae<ne.length;++Ae){var pe=forge$9.pem.decode(ne[Ae])[0];if(pe.type!=="CERTIFICATE"&&pe.type!=="X509 CERTIFICATE"&&pe.type!=="TRUSTED CERTIFICATE"){var ve=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw ve.headerType=pe.type,ve}if(pe.procType&&pe.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var me=forge$9.util.createBuffer(pe.body);ue===null&&(ue=forge$9.asn1.fromDer(me.bytes(),!1));var ge=forge$9.util.createBuffer();writeVector(ge,3,me),ce.putBuffer(ge)}ne=forge$9.pki.certificateFromAsn1(ue),J?K.session.clientCertificate=ne:K.session.serverCertificate=ne}catch(_e){return K.error(K,{message:"Could not send certificate list.",cause:_e,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_certificate}})}var ye=3+ce.length(),xe=forge$9.util.createBuffer();return xe.putByte(tls$1.HandshakeType.certificate),xe.putInt24(ye),writeVector(xe,3,ce),xe};tls$1.createClientKeyExchange=function(K){var J=forge$9.util.createBuffer();J.putByte(K.session.clientHelloVersion.major),J.putByte(K.session.clientHelloVersion.minor),J.putBytes(forge$9.random.getBytes(46));var ne=K.session.sp;ne.pre_master_secret=J.getBytes();var oe=K.session.serverCertificate.publicKey;J=oe.encrypt(ne.pre_master_secret);var ce=J.length+2,ue=forge$9.util.createBuffer();return ue.putByte(tls$1.HandshakeType.client_key_exchange),ue.putInt24(ce),ue.putInt16(J.length),ue.putBytes(J),ue};tls$1.createServerKeyExchange=function(K){var J=forge$9.util.createBuffer();return J};tls$1.getClientSignature=function(K,J){var ne=forge$9.util.createBuffer();ne.putBuffer(K.session.md5.digest()),ne.putBuffer(K.session.sha1.digest()),ne=ne.getBytes(),K.getSignature=K.getSignature||function(oe,ce,ue){var Ae=null;if(oe.getPrivateKey)try{Ae=oe.getPrivateKey(oe,oe.session.clientCertificate),Ae=forge$9.pki.privateKeyFromPem(Ae)}catch(pe){oe.error(oe,{message:"Could not get private key.",cause:pe,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}})}Ae===null?oe.error(oe,{message:"No private key set.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}}):ce=Ae.sign(ce,null),ue(oe,ce)},K.getSignature(K,ne,J)};tls$1.createCertificateVerify=function(K,J){var ne=J.length+2,oe=forge$9.util.createBuffer();return oe.putByte(tls$1.HandshakeType.certificate_verify),oe.putInt24(ne),oe.putInt16(J.length),oe.putBytes(J),oe};tls$1.createCertificateRequest=function(K){var J=forge$9.util.createBuffer();J.putByte(1);var ne=forge$9.util.createBuffer();for(var oe in K.caStore.certs){var ce=K.caStore.certs[oe],ue=forge$9.pki.distinguishedNameToAsn1(ce.subject),Ae=forge$9.asn1.toDer(ue);ne.putInt16(Ae.length()),ne.putBuffer(Ae)}var pe=1+J.length()+2+ne.length(),ve=forge$9.util.createBuffer();return ve.putByte(tls$1.HandshakeType.certificate_request),ve.putInt24(pe),writeVector(ve,1,J),writeVector(ve,2,ne),ve};tls$1.createServerHelloDone=function(K){var J=forge$9.util.createBuffer();return J.putByte(tls$1.HandshakeType.server_hello_done),J.putInt24(0),J};tls$1.createChangeCipherSpec=function(){var K=forge$9.util.createBuffer();return K.putByte(1),K};tls$1.createFinished=function(K){var J=forge$9.util.createBuffer();J.putBuffer(K.session.md5.digest()),J.putBuffer(K.session.sha1.digest());var ne=K.entity===tls$1.ConnectionEnd.client,oe=K.session.sp,ce=12,ue=prf_TLS1,Ae=ne?"client finished":"server finished";J=ue(oe.master_secret,Ae,J.getBytes(),ce);var pe=forge$9.util.createBuffer();return pe.putByte(tls$1.HandshakeType.finished),pe.putInt24(J.length()),pe.putBuffer(J),pe};tls$1.createHeartbeat=function(K,J,ne){typeof ne>"u"&&(ne=J.length);var oe=forge$9.util.createBuffer();oe.putByte(K),oe.putInt16(ne),oe.putBytes(J);var ce=oe.length(),ue=Math.max(16,ce-ne-3);return oe.putBytes(forge$9.random.getBytes(ue)),oe};tls$1.queue=function(K,J){if(J&&!(J.fragment.length()===0&&(J.type===tls$1.ContentType.handshake||J.type===tls$1.ContentType.alert||J.type===tls$1.ContentType.change_cipher_spec))){if(J.type===tls$1.ContentType.handshake){var ne=J.fragment.bytes();K.session.md5.update(ne),K.session.sha1.update(ne),ne=null}var oe;if(J.fragment.length()<=tls$1.MaxFragment)oe=[J];else{oe=[];for(var ce=J.fragment.bytes();ce.length>tls$1.MaxFragment;)oe.push(tls$1.createRecord(K,{type:J.type,data:forge$9.util.createBuffer(ce.slice(0,tls$1.MaxFragment))})),ce=ce.slice(tls$1.MaxFragment);ce.length>0&&oe.push(tls$1.createRecord(K,{type:J.type,data:forge$9.util.createBuffer(ce)}))}for(var ue=0;ue<oe.length&&!K.fail;++ue){var Ae=oe[ue],pe=K.state.current.write;pe.update(K,Ae)&&K.records.push(Ae)}}};tls$1.flush=function(K){for(var J=0;J<K.records.length;++J){var ne=K.records[J];K.tlsData.putByte(ne.type),K.tlsData.putByte(ne.version.major),K.tlsData.putByte(ne.version.minor),K.tlsData.putInt16(ne.fragment.length()),K.tlsData.putBuffer(K.records[J].fragment)}return K.records=[],K.tlsDataReady(K)};var _certErrorToAlertDesc=function(K){switch(K){case!0:return!0;case forge$9.pki.certificateError.bad_certificate:return tls$1.Alert.Description.bad_certificate;case forge$9.pki.certificateError.unsupported_certificate:return tls$1.Alert.Description.unsupported_certificate;case forge$9.pki.certificateError.certificate_revoked:return tls$1.Alert.Description.certificate_revoked;case forge$9.pki.certificateError.certificate_expired:return tls$1.Alert.Description.certificate_expired;case forge$9.pki.certificateError.certificate_unknown:return tls$1.Alert.Description.certificate_unknown;case forge$9.pki.certificateError.unknown_ca:return tls$1.Alert.Description.unknown_ca;default:return tls$1.Alert.Description.bad_certificate}},_alertDescToCertError=function(K){switch(K){case!0:return!0;case tls$1.Alert.Description.bad_certificate:return forge$9.pki.certificateError.bad_certificate;case tls$1.Alert.Description.unsupported_certificate:return forge$9.pki.certificateError.unsupported_certificate;case tls$1.Alert.Description.certificate_revoked:return forge$9.pki.certificateError.certificate_revoked;case tls$1.Alert.Description.certificate_expired:return forge$9.pki.certificateError.certificate_expired;case tls$1.Alert.Description.certificate_unknown:return forge$9.pki.certificateError.certificate_unknown;case tls$1.Alert.Description.unknown_ca:return forge$9.pki.certificateError.unknown_ca;default:return forge$9.pki.certificateError.bad_certificate}};tls$1.verifyCertificateChain=function(K,J){try{var ne={};for(var oe in K.verifyOptions)ne[oe]=K.verifyOptions[oe];ne.verify=function(ue,Ae,pe){var ve=_certErrorToAlertDesc(ue),me=K.verify(K,ue,Ae,pe);if(me!==!0){if(typeof me=="object"&&!forge$9.util.isArray(me)){var ge=new Error("The application rejected the certificate.");throw ge.send=!0,ge.alert={level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_certificate},me.message&&(ge.message=me.message),me.alert&&(ge.alert.description=me.alert),ge}me!==ue&&(me=_alertDescToCertError(me))}return me},forge$9.pki.verifyCertificateChain(K.caStore,J,ne)}catch(ue){var ce=ue;(typeof ce!="object"||forge$9.util.isArray(ce))&&(ce={send:!0,alert:{level:tls$1.Alert.Level.fatal,description:_certErrorToAlertDesc(ue)}}),"send"in ce||(ce.send=!0),"alert"in ce||(ce.alert={level:tls$1.Alert.Level.fatal,description:_certErrorToAlertDesc(ce.error)}),K.error(K,ce)}return!K.fail};tls$1.createSessionCache=function(K,J){var ne=null;if(K&&K.getSession&&K.setSession&&K.order)ne=K;else{ne={},ne.cache=K||{},ne.capacity=Math.max(J||100,1),ne.order=[];for(var oe in K)ne.order.length<=J?ne.order.push(oe):delete K[oe];ne.getSession=function(ce){var ue=null,Ae=null;if(ce?Ae=forge$9.util.bytesToHex(ce):ne.order.length>0&&(Ae=ne.order[0]),Ae!==null&&Ae in ne.cache){ue=ne.cache[Ae],delete ne.cache[Ae];for(var pe in ne.order)if(ne.order[pe]===Ae){ne.order.splice(pe,1);break}}return ue},ne.setSession=function(ce,ue){if(ne.order.length===ne.capacity){var Ae=ne.order.shift();delete ne.cache[Ae]}var Ae=forge$9.util.bytesToHex(ce);ne.order.push(Ae),ne.cache[Ae]=ue}}return ne};tls$1.createConnection=function(K){var J=null;K.caStore?forge$9.util.isArray(K.caStore)?J=forge$9.pki.createCaStore(K.caStore):J=K.caStore:J=forge$9.pki.createCaStore();var ne=K.cipherSuites||null;if(ne===null){ne=[];for(var oe in tls$1.CipherSuites)ne.push(tls$1.CipherSuites[oe])}var ce=K.server?tls$1.ConnectionEnd.server:tls$1.ConnectionEnd.client,ue=K.sessionCache?tls$1.createSessionCache(K.sessionCache):null,Ae={version:{major:tls$1.Version.major,minor:tls$1.Version.minor},entity:ce,sessionId:K.sessionId,caStore:J,sessionCache:ue,cipherSuites:ne,connected:K.connected,virtualHost:K.virtualHost||null,verifyClient:K.verifyClient||!1,verify:K.verify||function(ge,ye,xe,_e){return ye},verifyOptions:K.verifyOptions||{},getCertificate:K.getCertificate||null,getPrivateKey:K.getPrivateKey||null,getSignature:K.getSignature||null,input:forge$9.util.createBuffer(),tlsData:forge$9.util.createBuffer(),data:forge$9.util.createBuffer(),tlsDataReady:K.tlsDataReady,dataReady:K.dataReady,heartbeatReceived:K.heartbeatReceived,closed:K.closed,error:function(ge,ye){ye.origin=ye.origin||(ge.entity===tls$1.ConnectionEnd.client?"client":"server"),ye.send&&(tls$1.queue(ge,tls$1.createAlert(ge,ye.alert)),tls$1.flush(ge));var xe=ye.fatal!==!1;xe&&(ge.fail=!0),K.error(ge,ye),xe&&ge.close(!1)},deflate:K.deflate||null,inflate:K.inflate||null};Ae.reset=function(ge){Ae.version={major:tls$1.Version.major,minor:tls$1.Version.minor},Ae.record=null,Ae.session=null,Ae.peerCertificate=null,Ae.state={pending:null,current:null},Ae.expect=Ae.entity===tls$1.ConnectionEnd.client?SHE:CHE,Ae.fragmented=null,Ae.records=[],Ae.open=!1,Ae.handshakes=0,Ae.handshaking=!1,Ae.isConnected=!1,Ae.fail=!(ge||typeof ge>"u"),Ae.input.clear(),Ae.tlsData.clear(),Ae.data.clear(),Ae.state.current=tls$1.createConnectionState(Ae)},Ae.reset();var pe=function(ge,ye){var xe=ye.type-tls$1.ContentType.change_cipher_spec,_e=ctTable[ge.entity][ge.expect];xe in _e?_e[xe](ge,ye):tls$1.handleUnexpected(ge,ye)},ve=function(ge){var ye=0,xe=ge.input,_e=xe.length();if(_e<5)ye=5-_e;else{ge.record={type:xe.getByte(),version:{major:xe.getByte(),minor:xe.getByte()},length:xe.getInt16(),fragment:forge$9.util.createBuffer(),ready:!1};var $e=ge.record.version.major===ge.version.major;$e&&ge.session&&ge.session.version&&($e=ge.record.version.minor===ge.version.minor),$e||ge.error(ge,{message:"Incompatible TLS version.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.protocol_version}})}return ye},me=function(ge){var ye=0,xe=ge.input,_e=xe.length();if(_e<ge.record.length)ye=ge.record.length-_e;else{ge.record.fragment.putBytes(xe.getBytes(ge.record.length)),xe.compact();var $e=ge.state.current.read;$e.update(ge,ge.record)&&(ge.fragmented!==null&&(ge.fragmented.type===ge.record.type?(ge.fragmented.fragment.putBuffer(ge.record.fragment),ge.record=ge.fragmented):ge.error(ge,{message:"Invalid fragmented record.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unexpected_message}})),ge.record.ready=!0)}return ye};return Ae.handshake=function(ge){if(Ae.entity!==tls$1.ConnectionEnd.client)Ae.error(Ae,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(Ae.handshaking)Ae.error(Ae,{message:"Handshake already in progress.",fatal:!1});else{Ae.fail&&!Ae.open&&Ae.handshakes===0&&(Ae.fail=!1),Ae.handshaking=!0,ge=ge||"";var ye=null;ge.length>0&&(Ae.sessionCache&&(ye=Ae.sessionCache.getSession(ge)),ye===null&&(ge="")),ge.length===0&&Ae.sessionCache&&(ye=Ae.sessionCache.getSession(),ye!==null&&(ge=ye.id)),Ae.session={id:ge,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:forge$9.md.md5.create(),sha1:forge$9.md.sha1.create()},ye&&(Ae.version=ye.version,Ae.session.sp=ye.sp),Ae.session.sp.client_random=tls$1.createRandom().getBytes(),Ae.open=!0,tls$1.queue(Ae,tls$1.createRecord(Ae,{type:tls$1.ContentType.handshake,data:tls$1.createClientHello(Ae)})),tls$1.flush(Ae)}},Ae.process=function(ge){var ye=0;return ge&&Ae.input.putBytes(ge),Ae.fail||(Ae.record!==null&&Ae.record.ready&&Ae.record.fragment.isEmpty()&&(Ae.record=null),Ae.record===null&&(ye=ve(Ae)),!Ae.fail&&Ae.record!==null&&!Ae.record.ready&&(ye=me(Ae)),!Ae.fail&&Ae.record!==null&&Ae.record.ready&&pe(Ae,Ae.record)),ye},Ae.prepare=function(ge){return tls$1.queue(Ae,tls$1.createRecord(Ae,{type:tls$1.ContentType.application_data,data:forge$9.util.createBuffer(ge)})),tls$1.flush(Ae)},Ae.prepareHeartbeatRequest=function(ge,ye){return ge instanceof forge$9.util.ByteBuffer&&(ge=ge.bytes()),typeof ye>"u"&&(ye=ge.length),Ae.expectedHeartbeatPayload=ge,tls$1.queue(Ae,tls$1.createRecord(Ae,{type:tls$1.ContentType.heartbeat,data:tls$1.createHeartbeat(tls$1.HeartbeatMessageType.heartbeat_request,ge,ye)})),tls$1.flush(Ae)},Ae.close=function(ge){if(!Ae.fail&&Ae.sessionCache&&Ae.session){var ye={id:Ae.session.id,version:Ae.session.version,sp:Ae.session.sp};ye.sp.keys=null,Ae.sessionCache.setSession(ye.id,ye)}Ae.open&&(Ae.open=!1,Ae.input.clear(),(Ae.isConnected||Ae.handshaking)&&(Ae.isConnected=Ae.handshaking=!1,tls$1.queue(Ae,tls$1.createAlert(Ae,{level:tls$1.Alert.Level.warning,description:tls$1.Alert.Description.close_notify})),tls$1.flush(Ae)),Ae.closed(Ae)),Ae.reset(ge)},Ae};forge$9.tls=forge$9.tls||{};for(var key in tls$1)typeof tls$1[key]!="function"&&(forge$9.tls[key]=tls$1[key]);forge$9.tls.prf_tls1=prf_TLS1;forge$9.tls.hmac_sha1=hmac_sha1;forge$9.tls.createSessionCache=tls$1.createSessionCache;forge$9.tls.createConnection=tls$1.createConnection;var forge$8=forge$D,tls=forge$8.tls;tls.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(K){K.bulk_cipher_algorithm=tls.BulkCipherAlgorithm.aes,K.cipher_type=tls.CipherType.block,K.enc_key_length=16,K.block_length=16,K.fixed_iv_length=16,K.record_iv_length=16,K.mac_algorithm=tls.MACAlgorithm.hmac_sha1,K.mac_length=20,K.mac_key_length=20},initConnectionState};tls.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(K){K.bulk_cipher_algorithm=tls.BulkCipherAlgorithm.aes,K.cipher_type=tls.CipherType.block,K.enc_key_length=32,K.block_length=16,K.fixed_iv_length=16,K.record_iv_length=16,K.mac_algorithm=tls.MACAlgorithm.hmac_sha1,K.mac_length=20,K.mac_key_length=20},initConnectionState};function initConnectionState(K,J,ne){var oe=J.entity===forge$8.tls.ConnectionEnd.client;K.read.cipherState={init:!1,cipher:forge$8.cipher.createDecipher("AES-CBC",oe?ne.keys.server_write_key:ne.keys.client_write_key),iv:oe?ne.keys.server_write_IV:ne.keys.client_write_IV},K.write.cipherState={init:!1,cipher:forge$8.cipher.createCipher("AES-CBC",oe?ne.keys.client_write_key:ne.keys.server_write_key),iv:oe?ne.keys.client_write_IV:ne.keys.server_write_IV},K.read.cipherFunction=decrypt_aes_cbc_sha1,K.write.cipherFunction=encrypt_aes_cbc_sha1,K.read.macLength=K.write.macLength=ne.mac_length,K.read.macFunction=K.write.macFunction=tls.hmac_sha1}function encrypt_aes_cbc_sha1(K,J){var ne=!1,oe=J.macFunction(J.macKey,J.sequenceNumber,K);K.fragment.putBytes(oe),J.updateSequenceNumber();var ce;K.version.minor===tls.Versions.TLS_1_0.minor?ce=J.cipherState.init?null:J.cipherState.iv:ce=forge$8.random.getBytesSync(16),J.cipherState.init=!0;var ue=J.cipherState.cipher;return ue.start({iv:ce}),K.version.minor>=tls.Versions.TLS_1_1.minor&&ue.output.putBytes(ce),ue.update(K.fragment),ue.finish(encrypt_aes_cbc_sha1_padding)&&(K.fragment=ue.output,K.length=K.fragment.length(),ne=!0),ne}function encrypt_aes_cbc_sha1_padding(K,J,ne){if(!ne){var oe=K-J.length()%K;J.fillWithByte(oe-1,oe)}return!0}function decrypt_aes_cbc_sha1_padding(K,J,ne){var oe=!0;if(ne){for(var ce=J.length(),ue=J.last(),Ae=ce-1-ue;Ae<ce-1;++Ae)oe=oe&&J.at(Ae)==ue;oe&&J.truncate(ue+1)}return oe}function decrypt_aes_cbc_sha1(K,J){var ne=!1,oe;K.version.minor===tls.Versions.TLS_1_0.minor?oe=J.cipherState.init?null:J.cipherState.iv:oe=K.fragment.getBytes(16),J.cipherState.init=!0;var ce=J.cipherState.cipher;ce.start({iv:oe}),ce.update(K.fragment),ne=ce.finish(decrypt_aes_cbc_sha1_padding);var ue=J.macLength,Ae=forge$8.random.getBytesSync(ue),pe=ce.output.length();pe>=ue?(K.fragment=ce.output.getBytes(pe-ue),Ae=ce.output.getBytes(ue)):K.fragment=ce.output.getBytes(),K.fragment=forge$8.util.createBuffer(K.fragment),K.length=K.fragment.length();var ve=J.macFunction(J.macKey,J.sequenceNumber,K);return J.updateSequenceNumber(),ne=compareMacs(J.macKey,Ae,ve)&&ne,ne}function compareMacs(K,J,ne){var oe=forge$8.hmac.create();return oe.start("SHA1",K),oe.update(J),J=oe.digest().getBytes(),oe.start(null,null),oe.update(ne),ne=oe.digest().getBytes(),J===ne}var forge$7=forge$D,sha512$1=forge$7.sha512=forge$7.sha512||{};forge$7.md.sha512=forge$7.md.algorithms.sha512=sha512$1;var sha384=forge$7.sha384=forge$7.sha512.sha384=forge$7.sha512.sha384||{};sha384.create=function(){return sha512$1.create("SHA-384")};forge$7.md.sha384=forge$7.md.algorithms.sha384=sha384;forge$7.sha512.sha256=forge$7.sha512.sha256||{create:function(){return sha512$1.create("SHA-512/256")}};forge$7.md["sha512/256"]=forge$7.md.algorithms["sha512/256"]=forge$7.sha512.sha256;forge$7.sha512.sha224=forge$7.sha512.sha224||{create:function(){return sha512$1.create("SHA-512/224")}};forge$7.md["sha512/224"]=forge$7.md.algorithms["sha512/224"]=forge$7.sha512.sha224;sha512$1.create=function(K){if(_initialized||_init(),typeof K>"u"&&(K="SHA-512"),!(K in _states))throw new Error("Invalid SHA-512 algorithm: "+K);for(var J=_states[K],ne=null,oe=forge$7.util.createBuffer(),ce=new Array(80),ue=0;ue<80;++ue)ce[ue]=new Array(2);var Ae=64;switch(K){case"SHA-384":Ae=48;break;case"SHA-512/256":Ae=32;break;case"SHA-512/224":Ae=28;break}var pe={algorithm:K.replace("-","").toLowerCase(),blockLength:128,digestLength:Ae,messageLength:0,fullMessageLength:null,messageLengthSize:16};return pe.start=function(){pe.messageLength=0,pe.fullMessageLength=pe.messageLength128=[];for(var ve=pe.messageLengthSize/4,me=0;me<ve;++me)pe.fullMessageLength.push(0);oe=forge$7.util.createBuffer(),ne=new Array(J.length);for(var me=0;me<J.length;++me)ne[me]=J[me].slice(0);return pe},pe.start(),pe.update=function(ve,me){me==="utf8"&&(ve=forge$7.util.encodeUtf8(ve));var ge=ve.length;pe.messageLength+=ge,ge=[ge/4294967296>>>0,ge>>>0];for(var ye=pe.fullMessageLength.length-1;ye>=0;--ye)pe.fullMessageLength[ye]+=ge[1],ge[1]=ge[0]+(pe.fullMessageLength[ye]/4294967296>>>0),pe.fullMessageLength[ye]=pe.fullMessageLength[ye]>>>0,ge[0]=ge[1]/4294967296>>>0;return oe.putBytes(ve),_update(ne,ce,oe),(oe.read>2048||oe.length()===0)&&oe.compact(),pe},pe.digest=function(){var ve=forge$7.util.createBuffer();ve.putBytes(oe.bytes());var me=pe.fullMessageLength[pe.fullMessageLength.length-1]+pe.messageLengthSize,ge=me&pe.blockLength-1;ve.putBytes(_padding.substr(0,pe.blockLength-ge));for(var ye,xe,_e=pe.fullMessageLength[0]*8,$e=0;$e<pe.fullMessageLength.length-1;++$e)ye=pe.fullMessageLength[$e+1]*8,xe=ye/4294967296>>>0,_e+=xe,ve.putInt32(_e>>>0),_e=ye>>>0;ve.putInt32(_e);for(var Ie=new Array(ne.length),$e=0;$e<ne.length;++$e)Ie[$e]=ne[$e].slice(0);_update(Ie,ce,ve);var Fe=forge$7.util.createBuffer(),ke;K==="SHA-512"?ke=Ie.length:K==="SHA-384"?ke=Ie.length-2:ke=Ie.length-4;for(var $e=0;$e<ke;++$e)Fe.putInt32(Ie[$e][0]),($e!==ke-1||K!=="SHA-512/224")&&Fe.putInt32(Ie[$e][1]);return Fe},pe};var _padding=null,_initialized=!1,_k=null,_states=null;function _init(){_padding="",_padding+=forge$7.util.fillString("\0",128),_k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized=!0}function _update(K,J,ne){for(var oe,ce,ue,Ae,pe,ve,me,ge,ye,xe,_e,$e,Ie,Fe,ke,je,We,ze,Xe,Je,nt,et,tt,st,qe,Se,Re,Be,Ne,Ue,Ge,Ye,Qe,Te,Ke,rt=ne.length();rt>=128;){for(Ne=0;Ne<16;++Ne)J[Ne][0]=ne.getInt32()>>>0,J[Ne][1]=ne.getInt32()>>>0;for(;Ne<80;++Ne)Ye=J[Ne-2],Ue=Ye[0],Ge=Ye[1],oe=((Ue>>>19|Ge<<13)^(Ge>>>29|Ue<<3)^Ue>>>6)>>>0,ce=((Ue<<13|Ge>>>19)^(Ge<<3|Ue>>>29)^(Ue<<26|Ge>>>6))>>>0,Te=J[Ne-15],Ue=Te[0],Ge=Te[1],ue=((Ue>>>1|Ge<<31)^(Ue>>>8|Ge<<24)^Ue>>>7)>>>0,Ae=((Ue<<31|Ge>>>1)^(Ue<<24|Ge>>>8)^(Ue<<25|Ge>>>7))>>>0,Qe=J[Ne-7],Ke=J[Ne-16],Ge=ce+Qe[1]+Ae+Ke[1],J[Ne][0]=oe+Qe[0]+ue+Ke[0]+(Ge/4294967296>>>0)>>>0,J[Ne][1]=Ge>>>0;for(Ie=K[0][0],Fe=K[0][1],ke=K[1][0],je=K[1][1],We=K[2][0],ze=K[2][1],Xe=K[3][0],Je=K[3][1],nt=K[4][0],et=K[4][1],tt=K[5][0],st=K[5][1],qe=K[6][0],Se=K[6][1],Re=K[7][0],Be=K[7][1],Ne=0;Ne<80;++Ne)me=((nt>>>14|et<<18)^(nt>>>18|et<<14)^(et>>>9|nt<<23))>>>0,ge=((nt<<18|et>>>14)^(nt<<14|et>>>18)^(et<<23|nt>>>9))>>>0,ye=(qe^nt&(tt^qe))>>>0,xe=(Se^et&(st^Se))>>>0,pe=((Ie>>>28|Fe<<4)^(Fe>>>2|Ie<<30)^(Fe>>>7|Ie<<25))>>>0,ve=((Ie<<4|Fe>>>28)^(Fe<<30|Ie>>>2)^(Fe<<25|Ie>>>7))>>>0,_e=(Ie&ke|We&(Ie^ke))>>>0,$e=(Fe&je|ze&(Fe^je))>>>0,Ge=Be+ge+xe+_k[Ne][1]+J[Ne][1],oe=Re+me+ye+_k[Ne][0]+J[Ne][0]+(Ge/4294967296>>>0)>>>0,ce=Ge>>>0,Ge=ve+$e,ue=pe+_e+(Ge/4294967296>>>0)>>>0,Ae=Ge>>>0,Re=qe,Be=Se,qe=tt,Se=st,tt=nt,st=et,Ge=Je+ce,nt=Xe+oe+(Ge/4294967296>>>0)>>>0,et=Ge>>>0,Xe=We,Je=ze,We=ke,ze=je,ke=Ie,je=Fe,Ge=ce+Ae,Ie=oe+ue+(Ge/4294967296>>>0)>>>0,Fe=Ge>>>0;Ge=K[0][1]+Fe,K[0][0]=K[0][0]+Ie+(Ge/4294967296>>>0)>>>0,K[0][1]=Ge>>>0,Ge=K[1][1]+je,K[1][0]=K[1][0]+ke+(Ge/4294967296>>>0)>>>0,K[1][1]=Ge>>>0,Ge=K[2][1]+ze,K[2][0]=K[2][0]+We+(Ge/4294967296>>>0)>>>0,K[2][1]=Ge>>>0,Ge=K[3][1]+Je,K[3][0]=K[3][0]+Xe+(Ge/4294967296>>>0)>>>0,K[3][1]=Ge>>>0,Ge=K[4][1]+et,K[4][0]=K[4][0]+nt+(Ge/4294967296>>>0)>>>0,K[4][1]=Ge>>>0,Ge=K[5][1]+st,K[5][0]=K[5][0]+tt+(Ge/4294967296>>>0)>>>0,K[5][1]=Ge>>>0,Ge=K[6][1]+Se,K[6][0]=K[6][0]+qe+(Ge/4294967296>>>0)>>>0,K[6][1]=Ge>>>0,Ge=K[7][1]+Be,K[7][0]=K[7][0]+Re+(Ge/4294967296>>>0)>>>0,K[7][1]=Ge>>>0,rt-=128}}var asn1Validator$1={},forge$6=forge$D,asn1$1=forge$6.asn1;asn1Validator$1.privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};asn1Validator$1.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var forge$5=forge$D,asn1Validator=asn1Validator$1,publicKeyValidator=asn1Validator.publicKeyValidator,privateKeyValidator=asn1Validator.privateKeyValidator;if(typeof BigInteger$1>"u")var BigInteger$1=forge$5.jsbn.BigInteger;var ByteBuffer=forge$5.util.ByteBuffer,NativeBuffer=typeof Buffer>"u"?Uint8Array:Buffer;forge$5.pki=forge$5.pki||{};forge$5.pki.ed25519=forge$5.ed25519=forge$5.ed25519||{};var ed25519=forge$5.ed25519;ed25519.constants={};ed25519.constants.PUBLIC_KEY_BYTE_LENGTH=32;ed25519.constants.PRIVATE_KEY_BYTE_LENGTH=64;ed25519.constants.SEED_BYTE_LENGTH=32;ed25519.constants.SIGN_BYTE_LENGTH=64;ed25519.constants.HASH_BYTE_LENGTH=64;ed25519.generateKeyPair=function(K){K=K||{};var J=K.seed;if(J===void 0)J=forge$5.random.getBytesSync(ed25519.constants.SEED_BYTE_LENGTH);else if(typeof J=="string"){if(J.length!==ed25519.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+ed25519.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(J instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');J=messageToNativeBuffer({message:J,encoding:"binary"});for(var ne=new NativeBuffer(ed25519.constants.PUBLIC_KEY_BYTE_LENGTH),oe=new NativeBuffer(ed25519.constants.PRIVATE_KEY_BYTE_LENGTH),ce=0;ce<32;++ce)oe[ce]=J[ce];return crypto_sign_keypair(ne,oe),{publicKey:ne,privateKey:oe}};ed25519.privateKeyFromAsn1=function(K){var J={},ne=[],oe=forge$5.asn1.validate(K,privateKeyValidator,J,ne);if(!oe){var ce=new Error("Invalid Key.");throw ce.errors=ne,ce}var ue=forge$5.asn1.derToOid(J.privateKeyOid),Ae=forge$5.oids.EdDSA25519;if(ue!==Ae)throw new Error('Invalid OID "'+ue+'"; OID must be "'+Ae+'".');var pe=J.privateKey,ve=messageToNativeBuffer({message:forge$5.asn1.fromDer(pe).value,encoding:"binary"});return{privateKeyBytes:ve}};ed25519.publicKeyFromAsn1=function(K){var J={},ne=[],oe=forge$5.asn1.validate(K,publicKeyValidator,J,ne);if(!oe){var ce=new Error("Invalid Key.");throw ce.errors=ne,ce}var ue=forge$5.asn1.derToOid(J.publicKeyOid),Ae=forge$5.oids.EdDSA25519;if(ue!==Ae)throw new Error('Invalid OID "'+ue+'"; OID must be "'+Ae+'".');var pe=J.ed25519PublicKey;if(pe.length!==ed25519.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return messageToNativeBuffer({message:pe,encoding:"binary"})};ed25519.publicKeyFromPrivateKey=function(K){K=K||{};var J=messageToNativeBuffer({message:K.privateKey,encoding:"binary"});if(J.length!==ed25519.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ed25519.constants.PRIVATE_KEY_BYTE_LENGTH);for(var ne=new NativeBuffer(ed25519.constants.PUBLIC_KEY_BYTE_LENGTH),oe=0;oe<ne.length;++oe)ne[oe]=J[32+oe];return ne};ed25519.sign=function(K){K=K||{};var J=messageToNativeBuffer(K),ne=messageToNativeBuffer({message:K.privateKey,encoding:"binary"});if(ne.length===ed25519.constants.SEED_BYTE_LENGTH){var oe=ed25519.generateKeyPair({seed:ne});ne=oe.privateKey}else if(ne.length!==ed25519.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ed25519.constants.SEED_BYTE_LENGTH+" or "+ed25519.constants.PRIVATE_KEY_BYTE_LENGTH);var ce=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH+J.length);crypto_sign(ce,J,J.length,ne);for(var ue=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH),Ae=0;Ae<ue.length;++Ae)ue[Ae]=ce[Ae];return ue};ed25519.verify=function(K){K=K||{};var J=messageToNativeBuffer(K);if(K.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var ne=messageToNativeBuffer({message:K.signature,encoding:"binary"});if(ne.length!==ed25519.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+ed25519.constants.SIGN_BYTE_LENGTH);var oe=messageToNativeBuffer({message:K.publicKey,encoding:"binary"});if(oe.length!==ed25519.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+ed25519.constants.PUBLIC_KEY_BYTE_LENGTH);var ce=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH+J.length),ue=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH+J.length),Ae;for(Ae=0;Ae<ed25519.constants.SIGN_BYTE_LENGTH;++Ae)ce[Ae]=ne[Ae];for(Ae=0;Ae<J.length;++Ae)ce[Ae+ed25519.constants.SIGN_BYTE_LENGTH]=J[Ae];return crypto_sign_open(ue,ce,ce.length,oe)>=0};function messageToNativeBuffer(K){var J=K.message;if(J instanceof Uint8Array||J instanceof NativeBuffer)return J;var ne=K.encoding;if(J===void 0)if(K.md)J=K.md.digest().getBytes(),ne="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof J=="string"&&!ne)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof J=="string"){if(typeof Buffer<"u")return Buffer.from(J,ne);J=new ByteBuffer(J,ne)}else if(!(J instanceof ByteBuffer))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var oe=new NativeBuffer(J.length()),ce=0;ce<oe.length;++ce)oe[ce]=J.at(ce);return oe}var gf0=gf(),gf1=gf([1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function sha512(K,J){var ne=forge$5.md.sha512.create(),oe=new ByteBuffer(K);ne.update(oe.getBytes(J),"binary");var ce=ne.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(ce,"binary");for(var ue=new NativeBuffer(ed25519.constants.HASH_BYTE_LENGTH),Ae=0;Ae<64;++Ae)ue[Ae]=ce.charCodeAt(Ae);return ue}function crypto_sign_keypair(K,J){var ne=[gf(),gf(),gf(),gf()],oe,ce=sha512(J,32);for(ce[0]&=248,ce[31]&=127,ce[31]|=64,scalarbase(ne,ce),pack(K,ne),oe=0;oe<32;++oe)J[oe+32]=K[oe];return 0}function crypto_sign(K,J,ne,oe){var ce,ue,Ae=new Float64Array(64),pe=[gf(),gf(),gf(),gf()],ve=sha512(oe,32);ve[0]&=248,ve[31]&=127,ve[31]|=64;var me=ne+64;for(ce=0;ce<ne;++ce)K[64+ce]=J[ce];for(ce=0;ce<32;++ce)K[32+ce]=ve[32+ce];var ge=sha512(K.subarray(32),ne+32);for(reduce(ge),scalarbase(pe,ge),pack(K,pe),ce=32;ce<64;++ce)K[ce]=oe[ce];var ye=sha512(K,ne+64);for(reduce(ye),ce=32;ce<64;++ce)Ae[ce]=0;for(ce=0;ce<32;++ce)Ae[ce]=ge[ce];for(ce=0;ce<32;++ce)for(ue=0;ue<32;ue++)Ae[ce+ue]+=ye[ce]*ve[ue];return modL(K.subarray(32),Ae),me}function crypto_sign_open(K,J,ne,oe){var ce,ue,Ae=new NativeBuffer(32),pe=[gf(),gf(),gf(),gf()],ve=[gf(),gf(),gf(),gf()];if(ue=-1,ne<64||unpackneg(ve,oe))return-1;for(ce=0;ce<ne;++ce)K[ce]=J[ce];for(ce=0;ce<32;++ce)K[ce+32]=oe[ce];var me=sha512(K,ne);if(reduce(me),scalarmult(pe,ve,me),scalarbase(ve,J.subarray(32)),add(pe,ve),pack(Ae,pe),ne-=64,crypto_verify_32(J,0,Ae,0)){for(ce=0;ce<ne;++ce)K[ce]=0;return-1}for(ce=0;ce<ne;++ce)K[ce]=J[ce+64];return ue=ne,ue}function modL(K,J){var ne,oe,ce,ue;for(oe=63;oe>=32;--oe){for(ne=0,ce=oe-32,ue=oe-12;ce<ue;++ce)J[ce]+=ne-16*J[oe]*L[ce-(oe-32)],ne=J[ce]+128>>8,J[ce]-=ne*256;J[ce]+=ne,J[oe]=0}for(ne=0,ce=0;ce<32;++ce)J[ce]+=ne-(J[31]>>4)*L[ce],ne=J[ce]>>8,J[ce]&=255;for(ce=0;ce<32;++ce)J[ce]-=ne*L[ce];for(oe=0;oe<32;++oe)J[oe+1]+=J[oe]>>8,K[oe]=J[oe]&255}function reduce(K){for(var J=new Float64Array(64),ne=0;ne<64;++ne)J[ne]=K[ne],K[ne]=0;modL(K,J)}function add(K,J){var ne=gf(),oe=gf(),ce=gf(),ue=gf(),Ae=gf(),pe=gf(),ve=gf(),me=gf(),ge=gf();Z(ne,K[1],K[0]),Z(ge,J[1],J[0]),M(ne,ne,ge),A(oe,K[0],K[1]),A(ge,J[0],J[1]),M(oe,oe,ge),M(ce,K[3],J[3]),M(ce,ce,D2),M(ue,K[2],J[2]),A(ue,ue,ue),Z(Ae,oe,ne),Z(pe,ue,ce),A(ve,ue,ce),A(me,oe,ne),M(K[0],Ae,pe),M(K[1],me,ve),M(K[2],ve,pe),M(K[3],Ae,me)}function cswap(K,J,ne){for(var oe=0;oe<4;++oe)sel25519(K[oe],J[oe],ne)}function pack(K,J){var ne=gf(),oe=gf(),ce=gf();inv25519(ce,J[2]),M(ne,J[0],ce),M(oe,J[1],ce),pack25519(K,oe),K[31]^=par25519(ne)<<7}function pack25519(K,J){var ne,oe,ce,ue=gf(),Ae=gf();for(ne=0;ne<16;++ne)Ae[ne]=J[ne];for(car25519(Ae),car25519(Ae),car25519(Ae),oe=0;oe<2;++oe){for(ue[0]=Ae[0]-65517,ne=1;ne<15;++ne)ue[ne]=Ae[ne]-65535-(ue[ne-1]>>16&1),ue[ne-1]&=65535;ue[15]=Ae[15]-32767-(ue[14]>>16&1),ce=ue[15]>>16&1,ue[14]&=65535,sel25519(Ae,ue,1-ce)}for(ne=0;ne<16;ne++)K[2*ne]=Ae[ne]&255,K[2*ne+1]=Ae[ne]>>8}function unpackneg(K,J){var ne=gf(),oe=gf(),ce=gf(),ue=gf(),Ae=gf(),pe=gf(),ve=gf();return set25519(K[2],gf1),unpack25519(K[1],J),S(ce,K[1]),M(ue,ce,D),Z(ce,ce,K[2]),A(ue,K[2],ue),S(Ae,ue),S(pe,Ae),M(ve,pe,Ae),M(ne,ve,ce),M(ne,ne,ue),pow2523(ne,ne),M(ne,ne,ce),M(ne,ne,ue),M(ne,ne,ue),M(K[0],ne,ue),S(oe,K[0]),M(oe,oe,ue),neq25519(oe,ce)&&M(K[0],K[0],I),S(oe,K[0]),M(oe,oe,ue),neq25519(oe,ce)?-1:(par25519(K[0])===J[31]>>7&&Z(K[0],gf0,K[0]),M(K[3],K[0],K[1]),0)}function unpack25519(K,J){var ne;for(ne=0;ne<16;++ne)K[ne]=J[2*ne]+(J[2*ne+1]<<8);K[15]&=32767}function pow2523(K,J){var ne=gf(),oe;for(oe=0;oe<16;++oe)ne[oe]=J[oe];for(oe=250;oe>=0;--oe)S(ne,ne),oe!==1&&M(ne,ne,J);for(oe=0;oe<16;++oe)K[oe]=ne[oe]}function neq25519(K,J){var ne=new NativeBuffer(32),oe=new NativeBuffer(32);return pack25519(ne,K),pack25519(oe,J),crypto_verify_32(ne,0,oe,0)}function crypto_verify_32(K,J,ne,oe){return vn(K,J,ne,oe,32)}function vn(K,J,ne,oe,ce){var ue,Ae=0;for(ue=0;ue<ce;++ue)Ae|=K[J+ue]^ne[oe+ue];return(1&Ae-1>>>8)-1}function par25519(K){var J=new NativeBuffer(32);return pack25519(J,K),J[0]&1}function scalarmult(K,J,ne){var oe,ce;for(set25519(K[0],gf0),set25519(K[1],gf1),set25519(K[2],gf1),set25519(K[3],gf0),ce=255;ce>=0;--ce)oe=ne[ce/8|0]>>(ce&7)&1,cswap(K,J,oe),add(J,K),add(K,K),cswap(K,J,oe)}function scalarbase(K,J){var ne=[gf(),gf(),gf(),gf()];set25519(ne[0],X),set25519(ne[1],Y),set25519(ne[2],gf1),M(ne[3],X,Y),scalarmult(K,ne,J)}function set25519(K,J){var ne;for(ne=0;ne<16;ne++)K[ne]=J[ne]|0}function inv25519(K,J){var ne=gf(),oe;for(oe=0;oe<16;++oe)ne[oe]=J[oe];for(oe=253;oe>=0;--oe)S(ne,ne),oe!==2&&oe!==4&&M(ne,ne,J);for(oe=0;oe<16;++oe)K[oe]=ne[oe]}function car25519(K){var J,ne,oe=1;for(J=0;J<16;++J)ne=K[J]+oe+65535,oe=Math.floor(ne/65536),K[J]=ne-oe*65536;K[0]+=oe-1+37*(oe-1)}function sel25519(K,J,ne){for(var oe,ce=~(ne-1),ue=0;ue<16;++ue)oe=ce&(K[ue]^J[ue]),K[ue]^=oe,J[ue]^=oe}function gf(K){var J,ne=new Float64Array(16);if(K)for(J=0;J<K.length;++J)ne[J]=K[J];return ne}function A(K,J,ne){for(var oe=0;oe<16;++oe)K[oe]=J[oe]+ne[oe]}function Z(K,J,ne){for(var oe=0;oe<16;++oe)K[oe]=J[oe]-ne[oe]}function S(K,J){M(K,J,J)}function M(K,J,ne){var oe,ce,ue=0,Ae=0,pe=0,ve=0,me=0,ge=0,ye=0,xe=0,_e=0,$e=0,Ie=0,Fe=0,ke=0,je=0,We=0,ze=0,Xe=0,Je=0,nt=0,et=0,tt=0,st=0,qe=0,Se=0,Re=0,Be=0,Ne=0,Ue=0,Ge=0,Ye=0,Qe=0,Te=ne[0],Ke=ne[1],rt=ne[2],it=ne[3],at=ne[4],lt=ne[5],ct=ne[6],ot=ne[7],ft=ne[8],dt=ne[9],mt=ne[10],kt=ne[11],wt=ne[12],Et=ne[13],Ot=ne[14],Rt=ne[15];oe=J[0],ue+=oe*Te,Ae+=oe*Ke,pe+=oe*rt,ve+=oe*it,me+=oe*at,ge+=oe*lt,ye+=oe*ct,xe+=oe*ot,_e+=oe*ft,$e+=oe*dt,Ie+=oe*mt,Fe+=oe*kt,ke+=oe*wt,je+=oe*Et,We+=oe*Ot,ze+=oe*Rt,oe=J[1],Ae+=oe*Te,pe+=oe*Ke,ve+=oe*rt,me+=oe*it,ge+=oe*at,ye+=oe*lt,xe+=oe*ct,_e+=oe*ot,$e+=oe*ft,Ie+=oe*dt,Fe+=oe*mt,ke+=oe*kt,je+=oe*wt,We+=oe*Et,ze+=oe*Ot,Xe+=oe*Rt,oe=J[2],pe+=oe*Te,ve+=oe*Ke,me+=oe*rt,ge+=oe*it,ye+=oe*at,xe+=oe*lt,_e+=oe*ct,$e+=oe*ot,Ie+=oe*ft,Fe+=oe*dt,ke+=oe*mt,je+=oe*kt,We+=oe*wt,ze+=oe*Et,Xe+=oe*Ot,Je+=oe*Rt,oe=J[3],ve+=oe*Te,me+=oe*Ke,ge+=oe*rt,ye+=oe*it,xe+=oe*at,_e+=oe*lt,$e+=oe*ct,Ie+=oe*ot,Fe+=oe*ft,ke+=oe*dt,je+=oe*mt,We+=oe*kt,ze+=oe*wt,Xe+=oe*Et,Je+=oe*Ot,nt+=oe*Rt,oe=J[4],me+=oe*Te,ge+=oe*Ke,ye+=oe*rt,xe+=oe*it,_e+=oe*at,$e+=oe*lt,Ie+=oe*ct,Fe+=oe*ot,ke+=oe*ft,je+=oe*dt,We+=oe*mt,ze+=oe*kt,Xe+=oe*wt,Je+=oe*Et,nt+=oe*Ot,et+=oe*Rt,oe=J[5],ge+=oe*Te,ye+=oe*Ke,xe+=oe*rt,_e+=oe*it,$e+=oe*at,Ie+=oe*lt,Fe+=oe*ct,ke+=oe*ot,je+=oe*ft,We+=oe*dt,ze+=oe*mt,Xe+=oe*kt,Je+=oe*wt,nt+=oe*Et,et+=oe*Ot,tt+=oe*Rt,oe=J[6],ye+=oe*Te,xe+=oe*Ke,_e+=oe*rt,$e+=oe*it,Ie+=oe*at,Fe+=oe*lt,ke+=oe*ct,je+=oe*ot,We+=oe*ft,ze+=oe*dt,Xe+=oe*mt,Je+=oe*kt,nt+=oe*wt,et+=oe*Et,tt+=oe*Ot,st+=oe*Rt,oe=J[7],xe+=oe*Te,_e+=oe*Ke,$e+=oe*rt,Ie+=oe*it,Fe+=oe*at,ke+=oe*lt,je+=oe*ct,We+=oe*ot,ze+=oe*ft,Xe+=oe*dt,Je+=oe*mt,nt+=oe*kt,et+=oe*wt,tt+=oe*Et,st+=oe*Ot,qe+=oe*Rt,oe=J[8],_e+=oe*Te,$e+=oe*Ke,Ie+=oe*rt,Fe+=oe*it,ke+=oe*at,je+=oe*lt,We+=oe*ct,ze+=oe*ot,Xe+=oe*ft,Je+=oe*dt,nt+=oe*mt,et+=oe*kt,tt+=oe*wt,st+=oe*Et,qe+=oe*Ot,Se+=oe*Rt,oe=J[9],$e+=oe*Te,Ie+=oe*Ke,Fe+=oe*rt,ke+=oe*it,je+=oe*at,We+=oe*lt,ze+=oe*ct,Xe+=oe*ot,Je+=oe*ft,nt+=oe*dt,et+=oe*mt,tt+=oe*kt,st+=oe*wt,qe+=oe*Et,Se+=oe*Ot,Re+=oe*Rt,oe=J[10],Ie+=oe*Te,Fe+=oe*Ke,ke+=oe*rt,je+=oe*it,We+=oe*at,ze+=oe*lt,Xe+=oe*ct,Je+=oe*ot,nt+=oe*ft,et+=oe*dt,tt+=oe*mt,st+=oe*kt,qe+=oe*wt,Se+=oe*Et,Re+=oe*Ot,Be+=oe*Rt,oe=J[11],Fe+=oe*Te,ke+=oe*Ke,je+=oe*rt,We+=oe*it,ze+=oe*at,Xe+=oe*lt,Je+=oe*ct,nt+=oe*ot,et+=oe*ft,tt+=oe*dt,st+=oe*mt,qe+=oe*kt,Se+=oe*wt,Re+=oe*Et,Be+=oe*Ot,Ne+=oe*Rt,oe=J[12],ke+=oe*Te,je+=oe*Ke,We+=oe*rt,ze+=oe*it,Xe+=oe*at,Je+=oe*lt,nt+=oe*ct,et+=oe*ot,tt+=oe*ft,st+=oe*dt,qe+=oe*mt,Se+=oe*kt,Re+=oe*wt,Be+=oe*Et,Ne+=oe*Ot,Ue+=oe*Rt,oe=J[13],je+=oe*Te,We+=oe*Ke,ze+=oe*rt,Xe+=oe*it,Je+=oe*at,nt+=oe*lt,et+=oe*ct,tt+=oe*ot,st+=oe*ft,qe+=oe*dt,Se+=oe*mt,Re+=oe*kt,Be+=oe*wt,Ne+=oe*Et,Ue+=oe*Ot,Ge+=oe*Rt,oe=J[14],We+=oe*Te,ze+=oe*Ke,Xe+=oe*rt,Je+=oe*it,nt+=oe*at,et+=oe*lt,tt+=oe*ct,st+=oe*ot,qe+=oe*ft,Se+=oe*dt,Re+=oe*mt,Be+=oe*kt,Ne+=oe*wt,Ue+=oe*Et,Ge+=oe*Ot,Ye+=oe*Rt,oe=J[15],ze+=oe*Te,Xe+=oe*Ke,Je+=oe*rt,nt+=oe*it,et+=oe*at,tt+=oe*lt,st+=oe*ct,qe+=oe*ot,Se+=oe*ft,Re+=oe*dt,Be+=oe*mt,Ne+=oe*kt,Ue+=oe*wt,Ge+=oe*Et,Ye+=oe*Ot,Qe+=oe*Rt,ue+=38*Xe,Ae+=38*Je,pe+=38*nt,ve+=38*et,me+=38*tt,ge+=38*st,ye+=38*qe,xe+=38*Se,_e+=38*Re,$e+=38*Be,Ie+=38*Ne,Fe+=38*Ue,ke+=38*Ge,je+=38*Ye,We+=38*Qe,ce=1,oe=ue+ce+65535,ce=Math.floor(oe/65536),ue=oe-ce*65536,oe=Ae+ce+65535,ce=Math.floor(oe/65536),Ae=oe-ce*65536,oe=pe+ce+65535,ce=Math.floor(oe/65536),pe=oe-ce*65536,oe=ve+ce+65535,ce=Math.floor(oe/65536),ve=oe-ce*65536,oe=me+ce+65535,ce=Math.floor(oe/65536),me=oe-ce*65536,oe=ge+ce+65535,ce=Math.floor(oe/65536),ge=oe-ce*65536,oe=ye+ce+65535,ce=Math.floor(oe/65536),ye=oe-ce*65536,oe=xe+ce+65535,ce=Math.floor(oe/65536),xe=oe-ce*65536,oe=_e+ce+65535,ce=Math.floor(oe/65536),_e=oe-ce*65536,oe=$e+ce+65535,ce=Math.floor(oe/65536),$e=oe-ce*65536,oe=Ie+ce+65535,ce=Math.floor(oe/65536),Ie=oe-ce*65536,oe=Fe+ce+65535,ce=Math.floor(oe/65536),Fe=oe-ce*65536,oe=ke+ce+65535,ce=Math.floor(oe/65536),ke=oe-ce*65536,oe=je+ce+65535,ce=Math.floor(oe/65536),je=oe-ce*65536,oe=We+ce+65535,ce=Math.floor(oe/65536),We=oe-ce*65536,oe=ze+ce+65535,ce=Math.floor(oe/65536),ze=oe-ce*65536,ue+=ce-1+37*(ce-1),ce=1,oe=ue+ce+65535,ce=Math.floor(oe/65536),ue=oe-ce*65536,oe=Ae+ce+65535,ce=Math.floor(oe/65536),Ae=oe-ce*65536,oe=pe+ce+65535,ce=Math.floor(oe/65536),pe=oe-ce*65536,oe=ve+ce+65535,ce=Math.floor(oe/65536),ve=oe-ce*65536,oe=me+ce+65535,ce=Math.floor(oe/65536),me=oe-ce*65536,oe=ge+ce+65535,ce=Math.floor(oe/65536),ge=oe-ce*65536,oe=ye+ce+65535,ce=Math.floor(oe/65536),ye=oe-ce*65536,oe=xe+ce+65535,ce=Math.floor(oe/65536),xe=oe-ce*65536,oe=_e+ce+65535,ce=Math.floor(oe/65536),_e=oe-ce*65536,oe=$e+ce+65535,ce=Math.floor(oe/65536),$e=oe-ce*65536,oe=Ie+ce+65535,ce=Math.floor(oe/65536),Ie=oe-ce*65536,oe=Fe+ce+65535,ce=Math.floor(oe/65536),Fe=oe-ce*65536,oe=ke+ce+65535,ce=Math.floor(oe/65536),ke=oe-ce*65536,oe=je+ce+65535,ce=Math.floor(oe/65536),je=oe-ce*65536,oe=We+ce+65535,ce=Math.floor(oe/65536),We=oe-ce*65536,oe=ze+ce+65535,ce=Math.floor(oe/65536),ze=oe-ce*65536,ue+=ce-1+37*(ce-1),K[0]=ue,K[1]=Ae,K[2]=pe,K[3]=ve,K[4]=me,K[5]=ge,K[6]=ye,K[7]=xe,K[8]=_e,K[9]=$e,K[10]=Ie,K[11]=Fe,K[12]=ke,K[13]=je,K[14]=We,K[15]=ze}var forge$4=forge$D;forge$4.kem=forge$4.kem||{};var BigInteger=forge$4.jsbn.BigInteger;forge$4.kem.rsa={};forge$4.kem.rsa.create=function(K,J){J=J||{};var ne=J.prng||forge$4.random,oe={};return oe.encrypt=function(ce,ue){var Ae=Math.ceil(ce.n.bitLength()/8),pe;do pe=new BigInteger(forge$4.util.bytesToHex(ne.getBytesSync(Ae)),16).mod(ce.n);while(pe.compareTo(BigInteger.ONE)<=0);pe=forge$4.util.hexToBytes(pe.toString(16));var ve=Ae-pe.length;ve>0&&(pe=forge$4.util.fillString("\0",ve)+pe);var me=ce.encrypt(pe,"NONE"),ge=K.generate(pe,ue);return{encapsulation:me,key:ge}},oe.decrypt=function(ce,ue,Ae){var pe=ce.decrypt(ue,"NONE");return K.generate(pe,Ae)},oe};forge$4.kem.kdf1=function(K,J){_createKDF(this,K,0,J||K.digestLength)};forge$4.kem.kdf2=function(K,J){_createKDF(this,K,1,J||K.digestLength)};function _createKDF(K,J,ne,oe){K.generate=function(ce,ue){for(var Ae=new forge$4.util.ByteBuffer,pe=Math.ceil(ue/oe)+ne,ve=new forge$4.util.ByteBuffer,me=ne;me<pe;++me){ve.putInt32(me),J.start(),J.update(ce+ve.getBytes());var ge=J.digest();Ae.putBytes(ge.getBytes(oe))}return Ae.truncate(Ae.length()-ue),Ae.getBytes()}}var forge$3=forge$D;forge$3.log=forge$3.log||{};forge$3.log.levels=["none","error","warning","info","debug","verbose","max"];var sLevelInfo={},sLoggers=[],sConsoleLogger=null;forge$3.log.LEVEL_LOCKED=2;forge$3.log.NO_LEVEL_CHECK=4;forge$3.log.INTERPOLATE=8;for(var i=0;i<forge$3.log.levels.length;++i){var level=forge$3.log.levels[i];sLevelInfo[level]={index:i,name:level.toUpperCase()}}forge$3.log.logMessage=function(K){for(var J=sLevelInfo[K.level].index,ne=0;ne<sLoggers.length;++ne){var oe=sLoggers[ne];if(oe.flags&forge$3.log.NO_LEVEL_CHECK)oe.f(K);else{var ce=sLevelInfo[oe.level].index;J<=ce&&oe.f(oe,K)}}};forge$3.log.prepareStandard=function(K){"standard"in K||(K.standard=sLevelInfo[K.level].name+" ["+K.category+"] "+K.message)};forge$3.log.prepareFull=function(K){if(!("full"in K)){var J=[K.message];J=J.concat([]),K.full=forge$3.util.format.apply(this,J)}};forge$3.log.prepareStandardFull=function(K){"standardFull"in K||(forge$3.log.prepareStandard(K),K.standardFull=K.standard)};for(var levels=["error","warning","info","debug","verbose"],i=0;i<levels.length;++i)(function(J){forge$3.log[J]=function(ne,oe){var ce=Array.prototype.slice.call(arguments).slice(2),ue={timestamp:new Date,level:J,category:ne,message:oe,arguments:ce};forge$3.log.logMessage(ue)}})(levels[i]);forge$3.log.makeLogger=function(K){var J={flags:0,f:K};return forge$3.log.setLevel(J,"none"),J};forge$3.log.setLevel=function(K,J){var ne=!1;if(K&&!(K.flags&forge$3.log.LEVEL_LOCKED))for(var oe=0;oe<forge$3.log.levels.length;++oe){var ce=forge$3.log.levels[oe];if(J==ce){K.level=J,ne=!0;break}}return ne};forge$3.log.lock=function(K,J){typeof J>"u"||J?K.flags|=forge$3.log.LEVEL_LOCKED:K.flags&=~forge$3.log.LEVEL_LOCKED};forge$3.log.addLogger=function(K){sLoggers.push(K)};if(typeof console<"u"&&"log"in console){var logger;if(console.error&&console.warn&&console.info&&console.debug){var levelHandlers={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},f=function(K,J){forge$3.log.prepareStandard(J);var ne=levelHandlers[J.level],oe=[J.standard];oe=oe.concat(J.arguments.slice()),ne.apply(console,oe)};logger=forge$3.log.makeLogger(f)}else{var f=function(J,ne){forge$3.log.prepareStandardFull(ne),console.log(ne.standardFull)};logger=forge$3.log.makeLogger(f)}forge$3.log.setLevel(logger,"debug"),forge$3.log.addLogger(logger),sConsoleLogger=logger}else console={log:function(){}};if(sConsoleLogger!==null&&typeof window<"u"&&window.location){var query=new URL(window.location.href).searchParams;if(query.has("console.level")&&forge$3.log.setLevel(sConsoleLogger,query.get("console.level").slice(-1)[0]),query.has("console.lock")){var lock=query.get("console.lock").slice(-1)[0];lock=="true"&&forge$3.log.lock(sConsoleLogger)}}forge$3.log.consoleLogger=sConsoleLogger;var forge$2=forge$D,asn1=forge$2.asn1,p7=forge$2.pkcs7=forge$2.pkcs7||{};p7.messageFromPem=function(K){var J=forge$2.pem.decode(K)[0];if(J.type!=="PKCS7"){var ne=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw ne.headerType=J.type,ne}if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var oe=asn1.fromDer(J.body);return p7.messageFromAsn1(oe)};p7.messageToPem=function(K,J){var ne={type:"PKCS7",body:asn1.toDer(K.toAsn1()).getBytes()};return forge$2.pem.encode(ne,{maxline:J})};p7.messageFromAsn1=function(K){var J={},ne=[];if(!asn1.validate(K,p7.asn1.contentInfoValidator,J,ne)){var oe=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw oe.errors=ne,oe}var ce=asn1.derToOid(J.contentType),ue;switch(ce){case forge$2.pki.oids.envelopedData:ue=p7.createEnvelopedData();break;case forge$2.pki.oids.encryptedData:ue=p7.createEncryptedData();break;case forge$2.pki.oids.signedData:ue=p7.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+ce+" is not (yet) supported.")}return ue.fromAsn1(J.content.value[0]),ue};p7.createSignedData=function(){var K=null;return K={type:forge$2.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(oe){if(_fromAsn1(K,oe,p7.asn1.signedDataValidator),K.certificates=[],K.crls=[],K.digestAlgorithmIdentifiers=[],K.contentInfo=null,K.signerInfos=[],K.rawCapture.certificates)for(var ce=K.rawCapture.certificates.value,ue=0;ue<ce.length;++ue)K.certificates.push(forge$2.pki.certificateFromAsn1(ce[ue]))},toAsn1:function(){K.contentInfo||K.sign();for(var oe=[],ce=0;ce<K.certificates.length;++ce)oe.push(forge$2.pki.certificateToAsn1(K.certificates[ce]));var ue=[],Ae=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(K.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,K.digestAlgorithmIdentifiers),K.contentInfo])]);return oe.length>0&&Ae.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,oe)),ue.length>0&&Ae.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,!0,ue)),Ae.value[0].value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,K.signerInfos)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.type).getBytes()),Ae])},addSigner:function(oe){var ce=oe.issuer,ue=oe.serialNumber;if(oe.certificate){var Ae=oe.certificate;typeof Ae=="string"&&(Ae=forge$2.pki.certificateFromPem(Ae)),ce=Ae.issuer.attributes,ue=Ae.serialNumber}var pe=oe.key;if(!pe)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof pe=="string"&&(pe=forge$2.pki.privateKeyFromPem(pe));var ve=oe.digestAlgorithm||forge$2.pki.oids.sha1;switch(ve){case forge$2.pki.oids.sha1:case forge$2.pki.oids.sha256:case forge$2.pki.oids.sha384:case forge$2.pki.oids.sha512:case forge$2.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+ve)}var me=oe.authenticatedAttributes||[];if(me.length>0){for(var ge=!1,ye=!1,xe=0;xe<me.length;++xe){var _e=me[xe];if(!ge&&_e.type===forge$2.pki.oids.contentType){if(ge=!0,ye)break;continue}if(!ye&&_e.type===forge$2.pki.oids.messageDigest){if(ye=!0,ge)break;continue}}if(!ge||!ye)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}K.signers.push({key:pe,version:1,issuer:ce,serialNumber:ue,digestAlgorithm:ve,signatureAlgorithm:forge$2.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:me,unauthenticatedAttributes:[]})},sign:function(oe){if(oe=oe||{},(typeof K.content!="object"||K.contentInfo===null)&&(K.contentInfo=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(forge$2.pki.oids.data).getBytes())]),"content"in K)){var ce;K.content instanceof forge$2.util.ByteBuffer?ce=K.content.bytes():typeof K.content=="string"&&(ce=forge$2.util.encodeUtf8(K.content)),oe.detached?K.detachedContent=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,ce):K.contentInfo.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,ce)]))}if(K.signers.length!==0){var ue=J();ne(ue)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(oe){typeof oe=="string"&&(oe=forge$2.pki.certificateFromPem(oe)),K.certificates.push(oe)},addCertificateRevokationList:function(oe){throw new Error("PKCS#7 CRL support not yet implemented.")}},K;function J(){for(var oe={},ce=0;ce<K.signers.length;++ce){var ue=K.signers[ce],Ae=ue.digestAlgorithm;Ae in oe||(oe[Ae]=forge$2.md[forge$2.pki.oids[Ae]].create()),ue.authenticatedAttributes.length===0?ue.md=oe[Ae]:ue.md=forge$2.md[forge$2.pki.oids[Ae]].create()}K.digestAlgorithmIdentifiers=[];for(var Ae in oe)K.digestAlgorithmIdentifiers.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(Ae).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]));return oe}function ne(oe){var ce;if(K.detachedContent?ce=K.detachedContent:(ce=K.contentInfo.value[1],ce=ce.value[0]),!ce)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var ue=asn1.derToOid(K.contentInfo.value[0].value),Ae=asn1.toDer(ce);Ae.getByte(),asn1.getBerValueLength(Ae),Ae=Ae.getBytes();for(var pe in oe)oe[pe].start().update(Ae);for(var ve=new Date,me=0;me<K.signers.length;++me){var ge=K.signers[me];if(ge.authenticatedAttributes.length===0){if(ue!==forge$2.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{ge.authenticatedAttributesAsn1=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var ye=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,[]),xe=0;xe<ge.authenticatedAttributes.length;++xe){var _e=ge.authenticatedAttributes[xe];_e.type===forge$2.pki.oids.messageDigest?_e.value=oe[ge.digestAlgorithm].digest():_e.type===forge$2.pki.oids.signingTime&&(_e.value||(_e.value=ve)),ye.value.push(_attributeToAsn1(_e)),ge.authenticatedAttributesAsn1.value.push(_attributeToAsn1(_e))}Ae=asn1.toDer(ye).getBytes(),ge.md.start().update(Ae)}ge.signature=ge.key.sign(ge.md,"RSASSA-PKCS1-V1_5")}K.signerInfos=_signersToAsn1(K.signers)}};p7.createEncryptedData=function(){var K=null;return K={type:forge$2.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:forge$2.pki.oids["aes256-CBC"]},fromAsn1:function(J){_fromAsn1(K,J,p7.asn1.encryptedDataValidator)},decrypt:function(J){J!==void 0&&(K.encryptedContent.key=J),_decryptContent(K)}},K};p7.createEnvelopedData=function(){var K=null;return K={type:forge$2.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:forge$2.pki.oids["aes256-CBC"]},fromAsn1:function(J){var ne=_fromAsn1(K,J,p7.asn1.envelopedDataValidator);K.recipients=_recipientsFromAsn1(ne.recipientInfos.value)},toAsn1:function(){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.type).getBytes()),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(K.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,_recipientsToAsn1(K.recipients)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,_encryptedContentToAsn1(K.encryptedContent))])])])},findRecipient:function(J){for(var ne=J.issuer.attributes,oe=0;oe<K.recipients.length;++oe){var ce=K.recipients[oe],ue=ce.issuer;if(ce.serialNumber===J.serialNumber&&ue.length===ne.length){for(var Ae=!0,pe=0;pe<ne.length;++pe)if(ue[pe].type!==ne[pe].type||ue[pe].value!==ne[pe].value){Ae=!1;break}if(Ae)return ce}}return null},decrypt:function(J,ne){if(K.encryptedContent.key===void 0&&J!==void 0&&ne!==void 0)switch(J.encryptedContent.algorithm){case forge$2.pki.oids.rsaEncryption:case forge$2.pki.oids.desCBC:var oe=ne.decrypt(J.encryptedContent.content);K.encryptedContent.key=forge$2.util.createBuffer(oe);break;default:throw new Error("Unsupported asymmetric cipher, OID "+J.encryptedContent.algorithm)}_decryptContent(K)},addRecipient:function(J){K.recipients.push({version:0,issuer:J.issuer.attributes,serialNumber:J.serialNumber,encryptedContent:{algorithm:forge$2.pki.oids.rsaEncryption,key:J.publicKey}})},encrypt:function(J,ne){if(K.encryptedContent.content===void 0){ne=ne||K.encryptedContent.algorithm,J=J||K.encryptedContent.key;var oe,ce,ue;switch(ne){case forge$2.pki.oids["aes128-CBC"]:oe=16,ce=16,ue=forge$2.aes.createEncryptionCipher;break;case forge$2.pki.oids["aes192-CBC"]:oe=24,ce=16,ue=forge$2.aes.createEncryptionCipher;break;case forge$2.pki.oids["aes256-CBC"]:oe=32,ce=16,ue=forge$2.aes.createEncryptionCipher;break;case forge$2.pki.oids["des-EDE3-CBC"]:oe=24,ce=8,ue=forge$2.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+ne)}if(J===void 0)J=forge$2.util.createBuffer(forge$2.random.getBytes(oe));else if(J.length()!=oe)throw new Error("Symmetric key has wrong length; got "+J.length()+" bytes, expected "+oe+".");K.encryptedContent.algorithm=ne,K.encryptedContent.key=J,K.encryptedContent.parameter=forge$2.util.createBuffer(forge$2.random.getBytes(ce));var Ae=ue(J);if(Ae.start(K.encryptedContent.parameter.copy()),Ae.update(K.content),!Ae.finish())throw new Error("Symmetric encryption failed.");K.encryptedContent.content=Ae.output}for(var pe=0;pe<K.recipients.length;++pe){var ve=K.recipients[pe];if(ve.encryptedContent.content===void 0)switch(ve.encryptedContent.algorithm){case forge$2.pki.oids.rsaEncryption:ve.encryptedContent.content=ve.encryptedContent.key.encrypt(K.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+ve.encryptedContent.algorithm)}}}},K};function _recipientFromAsn1(K){var J={},ne=[];if(!asn1.validate(K,p7.asn1.recipientInfoValidator,J,ne)){var oe=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw oe.errors=ne,oe}return{version:J.version.charCodeAt(0),issuer:forge$2.pki.RDNAttributesAsArray(J.issuer),serialNumber:forge$2.util.createBuffer(J.serial).toHex(),encryptedContent:{algorithm:asn1.derToOid(J.encAlgorithm),parameter:J.encParameter?J.encParameter.value:void 0,content:J.encKey}}}function _recipientToAsn1(K){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(K.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[forge$2.pki.distinguishedNameToAsn1({attributes:K.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$2.util.hexToBytes(K.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.encryptedContent.algorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.encryptedContent.content)])}function _recipientsFromAsn1(K){for(var J=[],ne=0;ne<K.length;++ne)J.push(_recipientFromAsn1(K[ne]));return J}function _recipientsToAsn1(K){for(var J=[],ne=0;ne<K.length;++ne)J.push(_recipientToAsn1(K[ne]));return J}function _signerToAsn1(K){var J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(K.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[forge$2.pki.distinguishedNameToAsn1({attributes:K.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$2.util.hexToBytes(K.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.digestAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])]);if(K.authenticatedAttributesAsn1&&J.value.push(K.authenticatedAttributesAsn1),J.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.signatureAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),J.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.signature)),K.unauthenticatedAttributes.length>0){for(var ne=asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,!0,[]),oe=0;oe<K.unauthenticatedAttributes.length;++oe){var ce=K.unauthenticatedAttributes[oe];ne.values.push(_attributeToAsn1(ce))}J.value.push(ne)}return J}function _signersToAsn1(K){for(var J=[],ne=0;ne<K.length;++ne)J.push(_signerToAsn1(K[ne]));return J}function _attributeToAsn1(K){var J;if(K.type===forge$2.pki.oids.contentType)J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.value).getBytes());else if(K.type===forge$2.pki.oids.messageDigest)J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.value.bytes());else if(K.type===forge$2.pki.oids.signingTime){var ne=new Date("1950-01-01T00:00:00Z"),oe=new Date("2050-01-01T00:00:00Z"),ce=K.value;if(typeof ce=="string"){var ue=Date.parse(ce);isNaN(ue)?ce.length===13?ce=asn1.utcTimeToDate(ce):ce=asn1.generalizedTimeToDate(ce):ce=new Date(ue)}ce>=ne&&ce<oe?J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.UTCTIME,!1,asn1.dateToUtcTime(ce)):J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.GENERALIZEDTIME,!1,asn1.dateToGeneralizedTime(ce))}return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.type).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,[J])])}function _encryptedContentToAsn1(K){return[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(forge$2.pki.oids.data).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.algorithm).getBytes()),K.parameter?asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.parameter.getBytes()):void 0]),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.content.getBytes())])]}function _fromAsn1(K,J,ne){var oe={},ce=[];if(!asn1.validate(J,ne,oe,ce)){var ue=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw ue.errors=ue,ue}var Ae=asn1.derToOid(oe.contentType);if(Ae!==forge$2.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(oe.encryptedContent){var pe="";if(forge$2.util.isArray(oe.encryptedContent))for(var ve=0;ve<oe.encryptedContent.length;++ve){if(oe.encryptedContent[ve].type!==asn1.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");pe+=oe.encryptedContent[ve].value}else pe=oe.encryptedContent;K.encryptedContent={algorithm:asn1.derToOid(oe.encAlgorithm),parameter:forge$2.util.createBuffer(oe.encParameter.value),content:forge$2.util.createBuffer(pe)}}if(oe.content){var pe="";if(forge$2.util.isArray(oe.content))for(var ve=0;ve<oe.content.length;++ve){if(oe.content[ve].type!==asn1.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");pe+=oe.content[ve].value}else pe=oe.content;K.content=forge$2.util.createBuffer(pe)}return K.version=oe.version.charCodeAt(0),K.rawCapture=oe,oe}function _decryptContent(K){if(K.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(K.content===void 0){var J;switch(K.encryptedContent.algorithm){case forge$2.pki.oids["aes128-CBC"]:case forge$2.pki.oids["aes192-CBC"]:case forge$2.pki.oids["aes256-CBC"]:J=forge$2.aes.createDecryptionCipher(K.encryptedContent.key);break;case forge$2.pki.oids.desCBC:case forge$2.pki.oids["des-EDE3-CBC"]:J=forge$2.des.createDecryptionCipher(K.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+K.encryptedContent.algorithm)}if(J.start(K.encryptedContent.parameter),J.update(K.encryptedContent.content),!J.finish())throw new Error("Symmetric decryption failed.");K.content=J.output}}var forge$1=forge$D,ssh=forge$1.ssh=forge$1.ssh||{};ssh.privateKeyToPutty=function(K,J,ne){ne=ne||"",J=J||"";var oe="ssh-rsa",ce=J===""?"none":"aes256-cbc",ue="PuTTY-User-Key-File-2: "+oe+`\r
`;ue+="Encryption: "+ce+`\r
`,ue+="Comment: "+ne+`\r
`;var Ae=forge$1.util.createBuffer();_addStringToBuffer(Ae,oe),_addBigIntegerToBuffer(Ae,K.e),_addBigIntegerToBuffer(Ae,K.n);var pe=forge$1.util.encode64(Ae.bytes(),64),ve=Math.floor(pe.length/66)+1;ue+="Public-Lines: "+ve+`\r
`,ue+=pe;var me=forge$1.util.createBuffer();_addBigIntegerToBuffer(me,K.d),_addBigIntegerToBuffer(me,K.p),_addBigIntegerToBuffer(me,K.q),_addBigIntegerToBuffer(me,K.qInv);var ge;if(!J)ge=forge$1.util.encode64(me.bytes(),64);else{var ye=me.length()+16-1;ye-=ye%16;var xe=_sha1(me.bytes());xe.truncate(xe.length()-ye+me.length()),me.putBuffer(xe);var _e=forge$1.util.createBuffer();_e.putBuffer(_sha1("\0\0\0\0",J)),_e.putBuffer(_sha1("\0\0\0",J));var $e=forge$1.aes.createEncryptionCipher(_e.truncate(8),"CBC");$e.start(forge$1.util.createBuffer().fillWithByte(0,16)),$e.update(me.copy()),$e.finish();var Ie=$e.output;Ie.truncate(16),ge=forge$1.util.encode64(Ie.bytes(),64)}ve=Math.floor(ge.length/66)+1,ue+=`\r
Private-Lines: `+ve+`\r
`,ue+=ge;var Fe=_sha1("putty-private-key-file-mac-key",J),ke=forge$1.util.createBuffer();_addStringToBuffer(ke,oe),_addStringToBuffer(ke,ce),_addStringToBuffer(ke,ne),ke.putInt32(Ae.length()),ke.putBuffer(Ae),ke.putInt32(me.length()),ke.putBuffer(me);var je=forge$1.hmac.create();return je.start("sha1",Fe),je.update(ke.bytes()),ue+=`\r
Private-MAC: `+je.digest().toHex()+`\r
`,ue};ssh.publicKeyToOpenSSH=function(K,J){var ne="ssh-rsa";J=J||"";var oe=forge$1.util.createBuffer();return _addStringToBuffer(oe,ne),_addBigIntegerToBuffer(oe,K.e),_addBigIntegerToBuffer(oe,K.n),ne+" "+forge$1.util.encode64(oe.bytes())+" "+J};ssh.privateKeyToOpenSSH=function(K,J){return J?forge$1.pki.encryptRsaPrivateKey(K,J,{legacy:!0,algorithm:"aes128"}):forge$1.pki.privateKeyToPem(K)};ssh.getPublicKeyFingerprint=function(K,J){J=J||{};var ne=J.md||forge$1.md.md5.create(),oe="ssh-rsa",ce=forge$1.util.createBuffer();_addStringToBuffer(ce,oe),_addBigIntegerToBuffer(ce,K.e),_addBigIntegerToBuffer(ce,K.n),ne.start(),ne.update(ce.getBytes());var ue=ne.digest();if(J.encoding==="hex"){var Ae=ue.toHex();return J.delimiter?Ae.match(/.{2}/g).join(J.delimiter):Ae}else{if(J.encoding==="binary")return ue.getBytes();if(J.encoding)throw new Error('Unknown encoding "'+J.encoding+'".')}return ue};function _addBigIntegerToBuffer(K,J){var ne=J.toString(16);ne[0]>="8"&&(ne="00"+ne);var oe=forge$1.util.hexToBytes(ne);K.putInt32(oe.length),K.putBytes(oe)}function _addStringToBuffer(K,J){K.putInt32(J.length),K.putString(J)}function _sha1(){for(var K=forge$1.md.sha1.create(),J=arguments.length,ne=0;ne<J;++ne)K.update(arguments[ne]);return K.digest()}var lib=forge$D;const forge=getDefaultExportFromCjs(lib),getThemeOptionsHelper=K=>Object.keys(THEME_KEYS).map(J=>({key:J,label:K(`header.theme.${J}`),value:THEME_KEYS[J]})),getIsExpired=K=>Date.now()-K>THIRTY_DAYS_MS,generateEncryptedKey=(K,J)=>{if(J){const ne=forge.pem.decode(J)[0],oe=forge.asn1.fromDer(ne.body),ce=forge.pki.publicKeyFromAsn1(oe),ue=forge.util.encodeUtf8(K),Ae=ce.encrypt(ue,"RSA-OAEP",{md:forge.md.sha256.create()});return forge.util.encode64(Ae)}return window.btoa(K)},Versions=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectVersions);return J?jsxRuntimeExports.jsxs("div",{className:"user-info-versions",children:[jsxRuntimeExports.jsxs("div",{className:"user-info-versions__title",children:[jsxRuntimeExports.jsx(W5,{}),jsxRuntimeExports.jsxs("div",{className:"user-info-versions__label",children:[K("header.userInfo.versions"),":"]}),jsxRuntimeExports.jsx(Copy,{textToCopy:JSON.stringify(J)})]}),jsxRuntimeExports.jsx("div",{className:"user-info-versions__list",children:Object.entries(J).map(([ne,oe])=>jsxRuntimeExports.jsxs("div",{children:[ne," ",oe?`- ${oe}`:""]},ne))})]}):null},LogoutButton=()=>{const{t:K}=useTranslation();return useSelector$1(selectProviders).length?jsxRuntimeExports.jsx(mf,{title:K("auth.logOut"),children:jsxRuntimeExports.jsx(rl,{testid:"logout-button",type:"primary",variant:"ghost",size:"sm",onClick:authService.logout,iconBefore:jsxRuntimeExports.jsx(HB,{})})}):null},listItem$1="_listItem_htzy1_1",label="_label_htzy1_9",content="_content_htzy1_22",children="_children_htzy1_32",action="_action_htzy1_38",styles$b={listItem:listItem$1,label,content,children,action},InfoListItem=({icon:K,label:J,action:ne,children:oe})=>jsxRuntimeExports.jsxs("div",{className:styles$b.listItem,children:[jsxRuntimeExports.jsxs("span",{className:styles$b.label,children:[K,jsxRuntimeExports.jsx("span",{children:J})]}),jsxRuntimeExports.jsxs("div",{className:styles$b.content,children:[jsxRuntimeExports.jsx(mf,{title:oe,children:jsxRuntimeExports.jsx("div",{className:styles$b.children,children:oe})}),ne&&jsxRuntimeExports.jsx("span",{className:styles$b.action,children:ne})]})]}),MyKeys=({setIsDeleteKeyModal:K})=>{const{t:J}=useTranslation(),ne=reactExports.useRef([]),oe=useSelector$1(selectUser),ce=oe==null?void 0:oe.userSecretsPublicKey,ue=useSelector$1(selectUserSecretIdentifiers),Ae=(oe==null?void 0:oe.username)??"",pe=ue||[],[ve,me]=reactExports.useState(!1),[ge,ye]=reactExports.useState(""),[xe,_e]=reactExports.useState(""),[$e,Ie]=reactExports.useState([]),[Fe,ke]=reactExports.useState(null),[je,We]=reactExports.useState(""),[ze,Xe]=reactExports.useState(pe),[Je,nt]=reactExports.useState(!0);reactExports.useEffect(()=>{const Qe=externalStorage.getSecretKeys(Ae).filter(Te=>!getIsExpired(Te.timestamp));Ie(Qe),externalStorage.setSecretKeys(Qe,Ae)},[]);const et=Qe=>{var Te;Fe!==null&&ne.current[Fe]&&!((Te=ne.current[Fe])!=null&&Te.contains(Qe.target))&&(ke(null),We(""))};reactExports.useEffect(()=>(document.addEventListener("mousedown",et),()=>{document.removeEventListener("mousedown",et)}),[Fe]),reactExports.useEffect(()=>{ge.length===0&&Xe(pe)},[ge]);const tt=(Qe,Te)=>{ne.current[Te]=Qe},st=()=>{me(!1),ye(""),_e("")},qe=()=>{Je?(nt(!1),st()):nt(!0)},Se=()=>{const Qe=[...$e,{name:ge,value:generateEncryptedKey(xe,ce),timestamp:Date.now()}];Ie(Qe),externalStorage.setSecretKeys(Qe,Ae),st()},Re=Qe=>{const Te=$e.filter((Ke,rt)=>rt!==Qe);Ie(Te),externalStorage.setSecretKeys(Te,Ae)},Be=ve||$e.length>0,Ne=Qe=>{ye(Qe);const Te=pe.filter(Ke=>Ke.toLowerCase().includes(Qe.toLowerCase()||""));Xe(Te)},Ue=Qe=>{const Te=externalStorage.getSecretKeys(Ae).map((Ke,rt)=>rt===Qe?{...Ke,value:generateEncryptedKey(je,ce),timestamp:Date.now()}:Ke);Ie(Te),externalStorage.setSecretKeys(Te,Ae),ke(null),We("")},Ge=()=>{ke(null),We("")},Ye=ze.map((Qe,Te)=>({key:Te,label:Qe,onClick:()=>ye(Qe),children:null}));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"my-keys-header",children:[jsxRuntimeExports.jsxs("div",{className:"my-keys-header__title",children:[jsxRuntimeExports.jsx(ek,{}),jsxRuntimeExports.jsx("span",{className:"my-keys-header__tile-label",children:J("header.userInfo.secrets.title")})]}),jsxRuntimeExports.jsx(oa,{onClick:qe,children:Je?jsxRuntimeExports.jsx(fk,{}):jsxRuntimeExports.jsx(Kj,{})})]}),Je&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("ul",{className:"my-keys-info",children:keysDescriptionArr.map(({id:Qe,content:Te})=>jsxRuntimeExports.jsx("li",{children:J(Te,{expire:env$1.userKeyExpire||DEFAULT_USER_KEYS_EXPIRE})||""},Qe))}),Be&&jsxRuntimeExports.jsxs("div",{className:"my-keys-list-title",children:[jsxRuntimeExports.jsx("span",{children:J("header.userInfo.secrets.name")||""}),jsxRuntimeExports.jsx("span",{children:J("header.userInfo.secrets.value")||""})]}),$e.length>0&&jsxRuntimeExports.jsx("div",{className:"my-keys-list",children:$e.map((Qe,Te)=>jsxRuntimeExports.jsxs("div",{ref:Ke=>tt(Ke,Te),children:[jsxRuntimeExports.jsxs("div",{className:"my-keys-list__item",children:[jsxRuntimeExports.jsx(Ml,{readOnly:!0,variant:"outlined",className:"my-keys-list__item-readonly",value:Qe.name}),jsxRuntimeExports.jsx(Ml,{variant:"outlined",placeholder:J("header.userInfo.secrets.encrypted")||"",value:Fe===Te?je:"",onFocus:()=>ke(Te),onChange:We}),jsxRuntimeExports.jsx(oa,{className:"my-keys-list__item-trash-icon",onClick:()=>{K(!0),Ho.error({title:J("header.userInfo.secrets.deletingKey"),content:J("header.userInfo.secrets.deleteModalContent",{keyName:Qe.name}),onClose:()=>K(!1),onOk:Ke=>{Re(Te),K(!1),Ke()},onCancel:Ke=>{K(!1),Ke()},testId:"delete-user-key"})},children:jsxRuntimeExports.jsx(Tk,{})})]}),Fe===Te&&jsxRuntimeExports.jsxs("div",{className:"my-keys-list__item-buttons",children:[jsxRuntimeExports.jsx(rl,{className:"my-keys-form__buttons-save",disabled:isEmptyString(je),iconBefore:jsxRuntimeExports.jsx(Ak,{}),onClick:()=>Ue(Te),children:J("buttons.save")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",className:"my-keys-form__buttons-cancel",iconBefore:jsxRuntimeExports.jsx(_c,{}),onClick:Ge,children:J("buttons.cancel")})]})]},Te))}),ve?jsxRuntimeExports.jsxs("div",{className:"my-keys-form",children:[jsxRuntimeExports.jsxs("div",{className:"my-keys-form__fields",children:[jsxRuntimeExports.jsx(Y_,{placement:"top",className:cx("my-keys-dropdown",{"my-keys-dropdown__menu_hidden":ze.length===0}),menu:{items:Ye},children:jsxRuntimeExports.jsx(Ml,{variant:"outlined",autoComplete:"off",placeholder:J("header.userInfo.secrets.name")||"",value:ge,onChange:Ne})}),jsxRuntimeExports.jsx(Ml,{variant:"outlined",placeholder:J("header.userInfo.secrets.value")||"",value:xe,onChange:_e})]}),jsxRuntimeExports.jsxs("div",{className:"my-keys-form__buttons",children:[jsxRuntimeExports.jsx(rl,{className:"my-keys-form__buttons-save",disabled:isEmptyString(ge)||isEmptyString(xe),iconBefore:jsxRuntimeExports.jsx(Ak,{}),onClick:Se,children:J("buttons.save")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",className:"my-keys-form__buttons-cancel",iconBefore:jsxRuntimeExports.jsx(_c,{}),onClick:st,children:J("buttons.cancel")})]})]}):jsxRuntimeExports.jsx(rl,{className:"my-keys-add-button",onClick:()=>me(!0),children:J("header.userInfo.secrets.addKey")||""})]})]})},container$5="_container_zjowi_1",title="_title_zjowi_8",list="_list_zjowi_14",listItem="_listItem_zjowi_24",fileUploader="_fileUploader_zjowi_37",styles$a={container:container$5,title,list,listItem,fileUploader},BackupAndRestore=()=>{const{t:K}=useTranslation(),J=useNavigate(),{fetch:ne,state:oe}=useRequest(schemaApi.getTypes,{onError:toast.error}),ce=reactExports.useRef(null);reactExports.useEffect(()=>{ne()},[]);const ue=()=>{const ge={Type:HandlerRunTypeEnum.DATA_SOURCE_TOOL,Method:"Export"};handlerApi.handlerRun(ge).then(ye=>{ye.forEach(xe=>{const _e=xe.Result;_e.FileBytes&&downloadZipFromObject(_e.FileBytes,_e.Name)})}).catch(toast.error)},Ae=()=>{var ge;(ge=ce.current)==null||ge.click()},pe=async ge=>{var _e;const ye=(_e=ge.target.files)==null?void 0:_e[0];if(!ye)return;const xe=await fileToBase64$1(ye);try{const $e={Type:HandlerRunTypeEnum.DATA_SOURCE_TOOL,Method:"Import",Arguments:{File:{Name:ye.name,FileBytes:xe,_t:"FileData"}}};await handlerApi.handlerRun($e),J(0)}catch($e){toast.error($e)}finally{ge.target.value=""}},ve=[{key:"export",icon:jsxRuntimeExports.jsx(gD,{}),text:K("header.userInfo.backupAndRestore.export"),onClick:ue,testId:"user-info-export-database"},{key:"import",icon:jsxRuntimeExports.jsx(kB,{}),text:K("header.userInfo.backupAndRestore.import"),onClick:Ae,testId:"user-info-import-database"}];return reactExports.useMemo(()=>oe==null?void 0:oe.find(ge=>ge.Name==="DataSourceTool"),[oe])?jsxRuntimeExports.jsxs("div",{className:styles$a.container,children:[jsxRuntimeExports.jsx("span",{className:styles$a.title,children:K("header.userInfo.backupAndRestore.title")}),jsxRuntimeExports.jsx("ul",{className:styles$a.list,children:ve.map(({icon:ge,text:ye,key:xe,onClick:_e,testId:$e})=>jsxRuntimeExports.jsxs("li",{className:styles$a.listItem,onClick:_e,"data-tid":$e,"aria-hidden":!0,children:[jsxRuntimeExports.jsx(lk,{}),jsxRuntimeExports.jsx("span",{children:ye}),ge]},xe))}),jsxRuntimeExports.jsx("input",{type:"file",accept:".zip",ref:ce,onChange:pe,className:styles$a.fileUploader})]}):null},UserInfo=()=>{const K=useSelector$1(selectUser),J=useSelector$1(selectApplicationTheme),ne=useSelector$1(selectOpenedTabs),oe=useSelector$1(selectActiveTabIndex),ce=useSelector$1(selectIsReadonly),ue=useSelector$1(selectActiveDataset$1),Ae=useSelector$1(selectFullScreenMode),{t:pe}=useTranslation(),ve=useAppDispatch(),{headerData:{language:me}}=useAppSelector(Fe=>Fe.HeaderDataSliceReducer),[ge,ye]=reactExports.useState(!1),[xe,_e]=reactExports.useState(!1),$e=Fe=>{storageApi.saveEntity({dataset:ue||"",data:[{ApplicationTheme:Fe,OpenedTabs:generateTabsParams(ne),ActiveTabIndex:oe,User:(K==null?void 0:K.username)||null,ReadOnly:ce??!1,FullScreenMode:Ae,_t:"UiAppState"}]}).then(()=>{themeService.setTheme(Fe)}).catch(toast.error)},Ie=()=>{var Fe;return jsxRuntimeExports.jsxs("div",{"data-tid":"user-info",className:styles$d.menu,children:[jsxRuntimeExports.jsxs("div",{className:styles$d.header,children:[jsxRuntimeExports.jsxs("div",{className:styles$d.headerInfo,children:[jsxRuntimeExports.jsx(UserInitials,{clickable:!1,className:styles$d.userInitials}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:styles$d.fullName,children:K==null?void 0:K.fullName}),jsxRuntimeExports.jsx("div",{className:styles$d.email,children:K==null?void 0:K.email})]})]}),jsxRuntimeExports.jsx(LogoutButton,{})]}),jsxRuntimeExports.jsxs("div",{className:styles$d.content,children:[jsxRuntimeExports.jsxs("div",{className:styles$d.dropdownRow,children:[jsxRuntimeExports.jsx(QT,{}),jsxRuntimeExports.jsx(DropdownRow,{label:pe("header.userInfo.theme.label"),selectedOptionKey:J,options:getThemeOptionsHelper(pe),onChange:$e,testid:"theme-dropdown"})]}),jsxRuntimeExports.jsxs("div",{className:styles$d.dropdownRow,children:[jsxRuntimeExports.jsx(XT,{}),jsxRuntimeExports.jsx(DropdownRow,{label:pe("header.userInfo.language.label"),selectedOptionKey:me,options:AVAIABLE_LANGUAGES,onChange:ke=>ve(setLanguage(ke)),testid:"language-dropdown"})]}),jsxRuntimeExports.jsxs("div",{className:styles$d.userContent,children:[jsxRuntimeExports.jsx(InfoListItem,{icon:jsxRuntimeExports.jsx(BA$1,{}),label:pe("header.userInfo.role"),children:(Fe=K==null?void 0:K.roles)==null?void 0:Fe.reduce((ke,je)=>`${ke}${ke?",":""} ${je}`,"")}),jsxRuntimeExports.jsx(InfoListItem,{icon:jsxRuntimeExports.jsx(JT$1,{}),label:pe("header.userInfo.build"),action:jsxRuntimeExports.jsx(Copy,{testid:"copy-build-number",textToCopy:env$1.frontendVersion}),children:env$1.frontendVersion||""}),jsxRuntimeExports.jsx(Versions,{})]}),jsxRuntimeExports.jsx("div",{className:styles$d.myKeysContent,children:jsxRuntimeExports.jsx(MyKeys,{setIsDeleteKeyModal:_e})}),jsxRuntimeExports.jsx(BackupAndRestore,{})]})]})};return jsxRuntimeExports.jsx(Y_,{open:ge,onOpenChange:Fe=>{ye(xe?!0:Fe)},destroyPopupOnHide:!0,dropdownRender:Ie,children:jsxRuntimeExports.jsx(rl,{type:"transparent",variant:"ghost",size:"sm",onClick:()=>ye(!ge),iconBefore:jsxRuntimeExports.jsx(UserInitials,{clickable:!0})})})},logsCount="_logsCount_g97fs_1",loader="_loader_g97fs_7",dot="_dot_g97fs_11",fade="_fade_g97fs_1",badgeIcon="_badgeIcon_g97fs_35",styles$9={logsCount,loader,dot,fade,badgeIcon},EXECUTED_HANDLER_STATUSES=new Set([RunHandlerStatusCodeEnum.Completed,RunHandlerStatusCodeEnum.Failed]),LogsButton=({openedTabsLength:K,isBasicType:J})=>{const{t:ne}=useTranslation(),{isOpen:oe,togglePanel:ce}=useLogsPanel(),{eventsBatch:ue}=useSSEContext(),[Ae,pe]=reactExports.useState(null),[ve,me]=reactExports.useState(!1),[ge,ye]=reactExports.useState([]),[xe,_e]=reactExports.useState(),$e=reactExports.useMemo(()=>JSON.parse(JSON.stringify(ue)),[ue]);reactExports.useLayoutEffect(()=>{(K===0&&oe||!J)&&ce(!1)},[K,J]),reactExports.useEffect(()=>{oe&&pe(null)},[oe]),reactExports.useEffect(()=>{if(!oe&&$e.length){const ke=[],je=[],We=$e.reverse().find(Xe=>Xe.EventKind===SSEEventKindEnum.TASK_FINISHED);let ze=0;$e.forEach(({Status:Xe,EventKind:Je,TaskRunId:nt})=>{EXECUTED_HANDLER_STATUSES.has(Xe)&&(ze+=1),Je===SSEEventKindEnum.TASK_STARTED&&ke.push(nt),Je===SSEEventKindEnum.TASK_FINISHED&&je.push(nt)}),pe(ze),!ve&&(Ae||ke.length||je.length)&&me(!0),We&&_e(We),ye(Xe=>[...Xe,...ke].filter(Je=>!je.includes(Je)))}},[$e]);const Ie=()=>{if(oe&&ve&&me(!1),ge.length)return jsxRuntimeExports.jsxs("div",{className:cx(styles$9.logsCount,styles$9.loader),children:[jsxRuntimeExports.jsx("div",{className:styles$9.dot}),jsxRuntimeExports.jsx("div",{className:styles$9.dot}),jsxRuntimeExports.jsx("div",{className:styles$9.dot})]});if(Ae)return Ae},Fe=ke=>{if(ge.length!==0)return"info";if(ke){const{Status:je}=ke;if(je===RunHandlerStatusCodeEnum.Completed)return"success";if(je===RunHandlerStatusCodeEnum.Failed)return"error"}};return jsxRuntimeExports.jsx(mf,{title:ne("typeToolbar.openLogs"),children:jsxRuntimeExports.jsx(rl,{"data-tid":"logs-button",type:"transparent",variant:"ghost",size:"sm",onClick:()=>ce(!oe),disabled:K===0&&!oe||!J,iconBefore:ve?jsxRuntimeExports.jsx(vF,{size:"md",isBorder:!1,color:Fe(xe),count:Ie(),className:styles$9.badgeIcon,children:jsxRuntimeExports.jsx(Fk,{size:"M"})}):jsxRuntimeExports.jsx(Fk,{size:"M"})})})};var LayoutIconsSize=(K=>(K.ICON_WIDTH="86",K.ICON_HEIGHT="54",K))(LayoutIconsSize||{}),FillColorTheme=(K=>(K.Light="White",K.Dark="Black",K))(FillColorTheme||{});const FullScreenMaximizeEditorViewButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),{state:ne,action:oe}=useDndContext(),{maximizedTabId:ce}=ne,ue=useSelector$1(selectApplicationTheme),Ae=ce===EditorTabsEnum.EDITOR,pe=Ae?jsxRuntimeExports.jsx(eF,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT,fillColor:ue===THEME_KEYS.light?FillColorTheme.Light:FillColorTheme.Dark}):jsxRuntimeExports.jsx(JA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT});return jsxRuntimeExports.jsx(mf,{title:J("maximizeButton.editorFullScreen"),children:jsxRuntimeExports.jsxs("div",{className:"layout-control",children:[jsxRuntimeExports.jsx(rl,{type:Ae?"primary":"tertiary",testid:"full-screen-maximize-editor-view-button",className:cx("layout-control__button",Ae&&"active"),size:"sm",variant:"ghost",onClick:oe.handleMaximizeEditorRow,iconBefore:pe,disabled:ne.isLayoutBtnsDisabled||K}),jsxRuntimeExports.jsx("div",{className:cx("layout-control__text",Ae&&"active"),children:J("layoutDirectionButton.dataOnly")})]})})},FullScreenMaximizeGridViewButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),{state:ne,action:oe}=useDndContext(),{maximizedTabId:ce}=ne,ue=useSelector$1(selectApplicationTheme),Ae=ce===GridTabEnum.MAIN,pe=Ae?jsxRuntimeExports.jsx(QA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT,fillColor:ue===THEME_KEYS.light?FillColorTheme.Light:FillColorTheme.Dark}):jsxRuntimeExports.jsx(YA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT});return jsxRuntimeExports.jsx(mf,{title:J("maximizeButton.gridFullScreen"),children:jsxRuntimeExports.jsxs("div",{className:"layout-control",children:[jsxRuntimeExports.jsx(rl,{type:Ae?"primary":"tertiary",testid:"full-screen-maximize-grid-view-button",className:cx("layout-control__button",Ae&&"active"),size:"sm",variant:"ghost",onClick:oe.handleMaximizeGridRow,iconBefore:pe,disabled:ne.isLayoutBtnsDisabled||K}),jsxRuntimeExports.jsx("div",{className:cx("layout-control__text",Ae&&"active"),children:J("layoutDirectionButton.gridOnly")})]})})},FullScreenSplitHorizontallyButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),ne=useAppContext(),oe=useDndContext(),{state:ce,action:ue}=oe,{maximizedTabId:Ae,isHorizontalLayoutDirection:pe}=ce,ve=useSelector$1(selectApplicationTheme),me=ce.isHorizontalLayoutDirection&&!Ae,ge=()=>{pe&&Ae===""||(pe||ue.updateLayoutDirection(LayoutDirection.HORIZONTAL),updateCurrentLayout(ne,oe,LayoutDirection.HORIZONTAL,pe))},ye=me?jsxRuntimeExports.jsx(XA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT,fillColor:ve===THEME_KEYS.light?FillColorTheme.Light:FillColorTheme.Dark}):jsxRuntimeExports.jsx(UA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT});return jsxRuntimeExports.jsx(mf,{title:J("layoutDirectionButton.horizontalLayout"),children:jsxRuntimeExports.jsxs("div",{className:"layout-control",children:[jsxRuntimeExports.jsx(rl,{type:me?"primary":"tertiary",testid:"full-screen-split-horizontally-button",className:cx("layout-control__button",me&&"active"),variant:"ghost",disabled:ce.isLayoutBtnsDisabled||K,onClick:ge,iconBefore:ye}),jsxRuntimeExports.jsx("div",{className:cx("layout-control__text",me&&"active"),children:J("layoutDirectionButton.horizontalSplit")})]})})},FullScreenSplitVerticallyButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),ne=useAppContext(),oe=useDndContext(),{state:ce,action:ue}=oe,{maximizedTabId:Ae,isHorizontalLayoutDirection:pe}=ce,ve=useSelector$1(selectApplicationTheme),me=!ce.isHorizontalLayoutDirection&&!Ae,ge=()=>{!pe&&Ae===""||(pe&&ue.updateLayoutDirection(LayoutDirection.VERTICAL),updateCurrentLayout(ne,oe,LayoutDirection.VERTICAL,!pe))},ye=me?jsxRuntimeExports.jsx(GA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT,fillColor:ve===THEME_KEYS.light?FillColorTheme.Light:FillColorTheme.Dark}):jsxRuntimeExports.jsx(qA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT});return jsxRuntimeExports.jsx(mf,{title:J("layoutDirectionButton.verticalLayout"),children:jsxRuntimeExports.jsxs("div",{className:"layout-control",children:[jsxRuntimeExports.jsx(rl,{type:me?"primary":"tertiary",testid:"full-screen-split-vertically-button",className:cx("layout-control__button",me&&"active"),variant:"ghost",disabled:ce.isLayoutBtnsDisabled||K,onClick:ge,iconBefore:ye}),jsxRuntimeExports.jsx("div",{className:cx("layout-control__text",me&&"active"),children:J("layoutDirectionButton.verticalSplit")})]})})},LayoutDropdownButton=({isDisabled:K})=>{const{t:J}=useTranslation(),[ne,oe]=reactExports.useState(!1),ce=Ae=>Ae?jsxRuntimeExports.jsx(Ck,{}):jsxRuntimeExports.jsx(Rp,{}),ue=()=>jsxRuntimeExports.jsxs("div",{className:"layout-dropdown",children:[jsxRuntimeExports.jsx(FullScreenSplitHorizontallyButton,{isDisabled:K}),jsxRuntimeExports.jsx(FullScreenSplitVerticallyButton,{isDisabled:K}),jsxRuntimeExports.jsx(FullScreenMaximizeGridViewButton,{isDisabled:K}),jsxRuntimeExports.jsx(FullScreenMaximizeEditorViewButton,{isDisabled:K})]});return jsxRuntimeExports.jsx(Y_,{testid:"layout-dropdown-container",open:ne,onOpenChange:oe,placement:"bottom",dropdownRender:()=>ue(),children:jsxRuntimeExports.jsx(rl,{testid:"layout-dropdown-button",type:"transparent",variant:"ghost",size:"sm",iconAfter:ce(ne),onClick:()=>oe(!ne),children:J("layoutDirectionButton.view")})})},container$4="_container_blluq_1",largeContainer="_largeContainer_blluq_11",iconsBlock$2="_iconsBlock_blluq_15",divider$1="_divider_blluq_21",styles$8={container:container$4,largeContainer,iconsBlock:iconsBlock$2,divider:divider$1},FullScreenModeActions=({metaData:K,isDisabled:J=!1,isVersionWarning:ne})=>{const oe=useSelector$1(selectDataset),ce=useSelector$1(selectOpenedTabs),{state:ue}=useDndContext(),Ae=useSelector$1(selectIsReadonly);return reactExports.useMemo(()=>isLoading([K.status,oe.status]),[oe.status,K.status])?null:jsxRuntimeExports.jsxs("div",{className:cx(styles$8.container,{[styles$8.largeContainer]:ne}),children:[jsxRuntimeExports.jsx(RecordNavigationSelect,{}),jsxRuntimeExports.jsx("div",{className:styles$8.divider}),jsxRuntimeExports.jsxs("div",{className:styles$8.iconsBlock,children:[jsxRuntimeExports.jsx(LayoutDropdownButton,{isDisabled:J}),!Ae&&!ue.isTypeReadOnly&&jsxRuntimeExports.jsx(FullScreenModeButton,{isDisabled:J}),jsxRuntimeExports.jsx(FullScreenLayoutSettingsButton,{isDisabled:J})]}),jsxRuntimeExports.jsx("div",{className:styles$8.divider}),jsxRuntimeExports.jsxs("div",{className:styles$8.iconsBlock,children:[!env$1.isSimplifiedBuild&&jsxRuntimeExports.jsx(SendFeedbackButton,{}),jsxRuntimeExports.jsx(LogsButton,{openedTabsLength:ce.length,isBasicType:K.data.DisplayKind===SchemaDisplayKind.Basic}),jsxRuntimeExports.jsx(UserInfo,{})]})]})},headerContainer="_headerContainer_1r0yl_1",header="_header_1r0yl_1",searchContainer="_searchContainer_1r0yl_11",dropdowns="_dropdowns_1r0yl_19",headerSearch="_headerSearch_1r0yl_25",logoContainer$1="_logoContainer_1r0yl_31",headerActionBtns="_headerActionBtns_1r0yl_39",iconsBlock$1="_iconsBlock_1r0yl_46",divider="_divider_1r0yl_52",styles$7={headerContainer,header,searchContainer,dropdowns,headerSearch,logoContainer:logoContainer$1,headerActionBtns,iconsBlock:iconsBlock$1,divider},Header=({isVersionWarning:K})=>{const J=useSelector$1(selectOpenedTabs),ne=useSelector$1(selectMetaData),oe=useSelector$1(selectFullScreenMode),ce=useSelector$1(selectEnvLabel),ue=useSelector$1(selectIsDatasetSupport),{state:Ae}=useDndContext(),pe=useSelector$1(selectIsReadonly),ve=J.length===0||ne.data.DisplayKind!==SchemaDisplayKind.Basic;return oe?jsxRuntimeExports.jsx(FullScreenModeActions,{isDisabled:ve,metaData:ne,isVersionWarning:K}):jsxRuntimeExports.jsx("div",{"data-tid":"app-header",className:styles$7.headerContainer,children:jsxRuntimeExports.jsxs("div",{className:styles$7.header,children:[jsxRuntimeExports.jsxs("div",{"data-tid":"main-logo",className:styles$7.logoContainer,children:[jsxRuntimeExports.jsx(Logo,{}),jsxRuntimeExports.jsx(OF,{label:ce})]}),jsxRuntimeExports.jsxs("div",{className:styles$7.searchContainer,children:[jsxRuntimeExports.jsx(HeaderSearch,{}),jsxRuntimeExports.jsxs("div",{className:styles$7.dropdowns,children:[ue&&jsxRuntimeExports.jsx(DatasetButton,{}),!env$1.isSimplifiedBuild&&jsxRuntimeExports.jsx(EnvironmentButton,{})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$7.headerActionBtns,children:[jsxRuntimeExports.jsxs("div",{className:styles$7.iconsBlock,children:[jsxRuntimeExports.jsx(LayoutDropdownButton,{isDisabled:ve}),!pe&&!Ae.isTypeReadOnly&&jsxRuntimeExports.jsx(FullScreenModeButton,{isDisabled:ve}),jsxRuntimeExports.jsx(FullScreenLayoutSettingsButton,{isDisabled:ve})]}),jsxRuntimeExports.jsx("div",{className:styles$7.divider}),jsxRuntimeExports.jsxs("div",{className:styles$7.iconsBlock,children:[!env$1.isSimplifiedBuild&&jsxRuntimeExports.jsx(SendFeedbackButton,{}),jsxRuntimeExports.jsx(LogsButton,{openedTabsLength:J.length,isBasicType:ne.data.DisplayKind===SchemaDisplayKind.Basic}),jsxRuntimeExports.jsx(UserInfo,{})]})]})]})})},GenericTypesTable=({isLoading:K=!1,genericTypes:J,selectedGenericType:ne,onSelectGenericType:oe})=>{const ce=reactExports.useMemo(()=>J==null?void 0:J.map(({Label:pe,Name:ve})=>({Types:pe||"Unknown",_t:ve})),[J]),ue=reactExports.useMemo(()=>mapMetadataToGridColumnsHelper([{Name:"Types",Value:{Type:"String"}}]),[]),Ae=pe=>pe._t;return jsxRuntimeExports.jsx(PF,{loading:K,children:jsxRuntimeExports.jsx(Grid,{className:"genericTypesTable",status:K?LoadingStatusesEnum.LOADING:LoadingStatusesEnum.SUCCESS,variant:"secondary",columns:ue,data:ce??[],selectedRowId:ne,onChangeSelectedRowId:oe,getRowId:Ae,isColumnFilter:!1})})},grid="_grid_1vhq3_1",empty="_empty_1vhq3_5",styles$6={grid,empty},GenericRecordsTable=({data:K,columns:J,selectedGenericRecordKey:ne,isLoading:oe,onSelectedGenericRecordKey:ce,onRowDoublerClick:ue})=>{const{t:Ae}=useTranslation(),pe=ve=>ve._key;return!oe&&!(K!=null&&K.length)&&!J.length?jsxRuntimeExports.jsx("div",{className:styles$6.empty,children:Ae("editor.modals.genericTypeEmpty")}):jsxRuntimeExports.jsx(PF,{loading:oe,children:jsxRuntimeExports.jsx(Grid,{className:styles$6.grid,status:oe?LoadingStatusesEnum.LOADING:LoadingStatusesEnum.SUCCESS,variant:"secondary",data:K??[],columns:J,isColumnFilter:!1,selectedRowId:ne,onChangeSelectedRowId:ce,getRowId:pe,onRowDoubleClicked:ue})})},container$3="_container_p9mb5_1",iconsBlock="_iconsBlock_p9mb5_12",warningQuery="_warningQuery_p9mb5_31",styles$5={container:container$3,iconsBlock,warningQuery},GenericToolbar=({entities:K,paginationRange:J,paginationPage:ne,isAvailableNextPage:oe,isAvailablePreviousPage:ce,isQueryApplied:ue,showQueryBuilder:Ae,onNextPage:pe,onPreviousPage:ve,onFirstPage:me,isGridPageDataLoading:ge})=>{const{t:ye}=useTranslation(),xe=reactExports.useMemo(()=>[{groupId:v4(),icons:[{icon:jsxRuntimeExports.jsx(mD,{className:ue?styles$5.warningQuery:void 0}),tooltipPlaceholder:ye("gridToolbar.query")||"",tooltipTarget:"queryBuilder",actionHandler:Ae,isDisabled:ue?!1:K.length===0}]}],[K]);return jsxRuntimeExports.jsxs("div",{className:styles$5.container,children:[jsxRuntimeExports.jsx(GridPagination,{isGridPageDataLoading:ge,isAvailableNextPage:oe,isAvailablePreviousPage:ce,range:J,page:ne,onNext:pe,onPrev:ve,onFirst:me}),xe.map(({groupName:_e,groupId:$e,icons:Ie})=>jsxRuntimeExports.jsxs("div",{className:styles$5.iconsBlock,children:[jsxRuntimeExports.jsx("span",{children:ye(_e||"")}),Ie==null?void 0:Ie.map(({tooltipTarget:Fe,icon:ke,isDisabled:je,tooltipPlaceholder:We,actionHandler:ze,isHide:Xe})=>!Xe&&jsxRuntimeExports.jsx(mf,{title:We,children:jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",disabled:je,onClick:()=>!je&&(ze==null?void 0:ze()),iconBefore:ke})},Fe))]},$e))]})},errror="_errror_sabj6_1",panel="_panel_sabj6_9",genericToolbarContainer="_genericToolbarContainer_sabj6_14",genericToolbar="_genericToolbar_sabj6_14",genericRecords="_genericRecords_sabj6_25",styles$4={errror,panel,genericToolbarContainer,genericToolbar,genericRecords},GenericModal=({isOpen:K,initialGenericType:J,initialGenericRecordKey:ne,onSubmit:oe,onClose:ce})=>{const{t:ue}=useTranslation(),Ae=useSelector$1(selectActiveDataset$1),pe=usePagination({}),ve=useQueryBuilder(),{fetch:me,state:ge,isLoading:ye,hasError:xe,status:_e}=useRequest(storageApi.select,{onError:toast.error}),{isLoading:$e,fetch:Ie,hasError:Fe,state:ke}=useRequest(schemaApi.getTypes,{onError:toast.error}),[je,We]=reactExports.useState(J),[ze,Xe]=reactExports.useState(ne),[Je,nt]=reactExports.useState([]),et=ge==null?void 0:ge.schema.typeList[ge.schema.rootType],tt=!je||!ze,st=reactExports.useMemo(()=>et!=null&&et.Elements&&isArray$7(et==null?void 0:et.Elements)?mapMetadataToGridColumnsHelper(et.Elements):[],[et]),qe=Ye=>{ve.apply(Ye),pe.onResetPage()},Se=()=>{pe.onResetPage(),ve.reset()},Re=()=>Xe(void 0),Be=async()=>{if(!je)throw new Error("Cannot fetch data with empty type");const Ye=pe.getLimit(),Qe=pe.getSkipByCurrentPage();try{const Te=await me({params:{type:je,skip:Qe,limit:Ye,table_format:!0,dataset:Ae},dto:ve.mapQueryToDTO()});pe.updateRange(pe.sliceEntitiesByLimit(Te.data).length),pe.reset(),pe.updatePagination(Te.data);const Ke=pe.sliceEntitiesByLimit(Te.data);Te.data.some(it=>it._key===ze)||Re(),nt(Ke)}finally{pe.reset()}};reactExports.useEffect(()=>{je&&Be()},[je,ve.query,pe.page]),reactExports.useEffect(()=>{Ie()},[]);const Ne=Ye=>{tt||(oe({type:je,recordKey:(Ye==null?void 0:Ye.id)||ze}),ce())},Ue=Fe||xe,Ge=()=>Ue?jsxRuntimeExports.jsx("div",{className:styles$4.errror,children:"Something went wrong"}):jsxRuntimeExports.jsxs(Mj,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Lj,{defaultSize:ve.isShow?25:40,order:1,children:jsxRuntimeExports.jsx("div",{className:styles$4.panel,children:jsxRuntimeExports.jsx(GenericTypesTable,{isLoading:$e,genericTypes:ke,selectedGenericType:je,onSelectGenericType:We})})}),jsxRuntimeExports.jsx($F,{}),ve.isShow&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Lj,{minSize:30,defaultSize:35,maxSize:70,order:2,children:jsxRuntimeExports.jsx("div",{className:styles$4.panel,children:jsxRuntimeExports.jsx(QueryBuilder,{initialQuery:ve.query,elements:ve.generateElementsBySchema(et,ge==null?void 0:ge.schema.typeList),onCancel:ve.close,onApply:qe,onReset:Se})})}),jsxRuntimeExports.jsx($F,{})]}),jsxRuntimeExports.jsx(Lj,{defaultSize:ve.isShow?40:60,order:3,children:jsxRuntimeExports.jsxs("div",{className:styles$4.genericToolbarContainer,children:[jsxRuntimeExports.jsx("div",{className:styles$4.genericToolbar,children:jsxRuntimeExports.jsx(GenericToolbar,{isGridPageDataLoading:pe.isPageDataLoading,entities:Je,paginationRange:pe.generateRangeByEntities(Je),paginationPage:pe.page,isAvailablePreviousPage:pe.isAvailablePreviousPage,isAvailableNextPage:pe.isAvailableNextPage,isQueryApplied:ve.isApplied,showQueryBuilder:ve.show,onPreviousPage:pe.onPreviousPage,onNextPage:pe.onNextPage,onFirstPage:pe.onFirstPage})}),jsxRuntimeExports.jsx("div",{className:styles$4.genericRecords,children:jsxRuntimeExports.jsx(GenericRecordsTable,{data:Je,columns:st,isLoading:_e===LoadingStatusesEnum.INITIAL||ye||$e,selectedGenericRecordKey:ze,onSelectedGenericRecordKey:Xe,onRowDoublerClick:Ne})})]})})]});return jsxRuntimeExports.jsxs(Ho,{open:K,size:"lg",defaultHeight:400,title:ue("editor.modalHeader"),onClose:ce,children:[jsxRuntimeExports.jsx(Ho.Body,{children:Ge()}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"generic",okText:ue("buttons.apply"),cancelText:ue("buttons.cancel"),onCancel:ce,onOk:Ne,okProps:{disabled:tt}})]})},Disclaimer=reactExports.memo(()=>jsxRuntimeExports.jsx(Translation,{children:K=>jsxRuntimeExports.jsxs("div",{className:"disclaimer-modal-content",children:[jsxRuntimeExports.jsx("p",{className:"disclaimer-modal-content__paragraph",children:K("chat.disclaimer.paragraph")}),jsxRuntimeExports.jsxs("ul",{className:"disclaimer-modal-content__list",children:[jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.0")}),jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.1")}),jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.2")}),jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.3")}),jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.4")})]})]})}));Disclaimer.displayName="Disclaimer";const DisclaimerModal=reactExports.memo(({isOpen:K,isOnce:J,toggleOnce:ne,agree:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(J),pe=reactExports.useCallback(()=>Ae(me=>!me),[]),ve=reactExports.useCallback(()=>{oe(),J!==ue&&ne()},[oe,J,ue,ne]);return jsxRuntimeExports.jsxs(Ho,{open:K,defaultHeight:350,title:ce("chat.disclaimer.title"),isClosable:!1,children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(Disclaimer,{})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"disclaimer",cancelText:null,onOk:ve,renderFooterActions:({okBtn:me})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(pF,{className:"disclaimer-modal__checkbox",value:ue,onChange:pe,children:ce("userGuideModal.doNotShowAgain")}),me]})})]})});DisclaimerModal.displayName="DisclaimerModal";var FileStatusType=(K=>(K.NONE="none",K.ADDED="added",K.UPDATED="updated",K.REMOVED="removed",K))(FileStatusType||{});const FileStatusMap={Added:"added",Removed:"removed",Updated:"updated"};var MessageGroupStatus=(K=>(K[K.INITIAL=0]="INITIAL",K[K.LOADING=1]="LOADING",K[K.ERROR=2]="ERROR",K[K.SUCCESS=3]="SUCCESS",K[K.CANCELED=4]="CANCELED",K))(MessageGroupStatus||{}),ChatType=(K=>(K.PRIVATE="private",K.INTERNAL="internal",K.ENCRYPTED="encrypted",K))(ChatType||{});const FileItem=({name:K,isLoading:J=!1,isRemovable:ne=!0,onRemove:oe})=>{const ce=reactExports.useMemo(()=>!J&&ne,[J,ne]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"history-file-item",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ZD,{})}),jsxRuntimeExports.jsx(mf,{title:K,children:jsxRuntimeExports.jsx("div",{className:"history-file-item__file-name",children:K})}),ce&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(PT,{className:"history-file-item__icon",onClick:oe})})]})})},FileList=reactExports.memo(({files:K,isLoading:J,onRemove:ne})=>jsxRuntimeExports.jsx("div",{className:"history-file-list",children:K.filter(oe=>oe.status!==FileStatusType.REMOVED).map(oe=>jsxRuntimeExports.jsx(FileItem,{name:oe.filename,isLoading:J,isRemovable:!0,onRemove:()=>ne(oe.filename)},oe.filename))}));FileList.displayName="FileList";const Message=({text:K})=>jsxRuntimeExports.jsxs("div",{className:"message",children:[jsxRuntimeExports.jsx(IA,{className:"message__icon"}),jsxRuntimeExports.jsx("div",{className:"message__text",children:K.trim()})]}),Reply=({text:K,isLoading:J,isShowIcon:ne=!1})=>{if(!J&&K===void 0)return null;const oe=J&&K===void 0;return jsxRuntimeExports.jsxs("div",{className:"reply",children:[jsxRuntimeExports.jsxs("div",{className:"reply__container",children:[jsxRuntimeExports.jsx("div",{className:"reply__text",children:oe?jsxRuntimeExports.jsx(MF,{className:"reply__dot-loader"}):K}),jsxRuntimeExports.jsx(HA,{className:"reply__icon"})]}),!oe&&jsxRuntimeExports.jsx("div",{className:"reply__copy",children:jsxRuntimeExports.jsx(Copy,{textToCopy:K||""})})]})},EmptyChat=()=>{const{t:K}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"empty-chat",children:[jsxRuntimeExports.jsx(DT,{size:"L"}),jsxRuntimeExports.jsx("div",{className:"empty-chat__message",children:K("chat.askSomething")})]})},container$2="_container_p1iha_1",messages="_messages_p1iha_11",styles$3={container:container$2,messages},Chat=reactExports.memo(({isShowMaskIcon:K,messageGroups:J})=>{const ne=reactExports.useRef(null);return reactExports.useEffect(()=>{var oe;(oe=ne.current)==null||oe.scrollIntoView({behavior:"smooth"})},[J]),jsxRuntimeExports.jsx("div",{className:styles$3.container,children:jsxRuntimeExports.jsxs("div",{className:styles$3.messages,children:[J.length===0?jsxRuntimeExports.jsx(EmptyChat,{}):J.map(oe=>{var ce;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[oe.question&&jsxRuntimeExports.jsx(Message,{text:oe.question.text,files:oe.question.files}),jsxRuntimeExports.jsx(Reply,{isShowIcon:K,text:(ce=oe.answer)==null?void 0:ce.text,isLoading:oe.status===MessageGroupStatus.LOADING})]},oe.id)}),jsxRuntimeExports.jsx("div",{ref:ne})]})})});Chat.displayName="Chat";const ChatInputButton=({isSending:K,cancelSendMessage:J,isDisabledSending:ne,isLoading:oe,onSendMessage:ce})=>K?jsxRuntimeExports.jsx(rl,{onClick:J,iconAfter:jsxRuntimeExports.jsx(wA,{})}):oe?jsxRuntimeExports.jsx(MF,{className:"chat-input-button"}):jsxRuntimeExports.jsx(rl,{disabled:ne,onClick:()=>ce(),iconAfter:jsxRuntimeExports.jsx(_T,{})}),ChatInput=reactExports.memo(reactExports.forwardRef(({isSending:K,isLoading:J,isProfileChosen:ne,input:oe,onChangeInput:ce,onSendMessage:ue,cancelSendMessage:Ae,openFileExplorer:pe,openKeyDialog:ve,getUnsavedFiles:me},ge)=>{const{t:ye}=useTranslation(),xe=me(),_e=!ne||J!==K,$e=!ne||oe.length===0&&xe.length===0,Ie=!ne||J,Fe=reactExports.useMemo(()=>ye(ne?K?"chat.cancelRequest":J?"chat.loading":"chat.sendMessage":"chat.pleaseStartNewChat"),[K,ye,J]),ke=reactExports.useCallback(je=>{if((je.code===KeyboardCode.Enter||je.code===KeyboardCode.NumpadEnter)&&!je.shiftKey){if(je.preventDefault(),J)return;ue()}},[ue,J]);return jsxRuntimeExports.jsxs("div",{className:"chat-input",children:[jsxRuntimeExports.jsx(U_,{ref:ge,value:oe,className:"chat-input__textarea",status:"transparent",autoSize:{minRows:1,maxRows:8},disabled:_e,placeholder:Fe,onChange:ce,onKeyDown:ke}),jsxRuntimeExports.jsxs("div",{className:"chat-input__buttons",children:[jsxRuntimeExports.jsx(rl,{onClick:pe,disabled:Ie,iconAfter:jsxRuntimeExports.jsx(bT,{}),type:"tertiary"}),jsxRuntimeExports.jsx(rl,{disabled:Ie,onClick:ve,iconAfter:jsxRuntimeExports.jsx(nA,{}),type:"tertiary"}),jsxRuntimeExports.jsx(ChatInputButton,{isSending:K,isLoading:J,isDisabledSending:$e,onSendMessage:ue,cancelSendMessage:Ae})]})]})}));ChatInput.displayName="ChatInput";const PromptLabel=reactExports.memo(({prompt:K})=>{const{t:J}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"prompt-label",children:[jsxRuntimeExports.jsxs("span",{children:[J("chat.prompt"),":"]}),jsxRuntimeExports.jsx("span",{children:K})]})});PromptLabel.displayName="PromptLabel";const ChatHistoryHeader=({isAllSelection:K,isEmptySelection:J,toggleAllSessions:ne})=>{const{t:oe}=useTranslation(),ce=reactExports.useMemo(()=>!K&&!J,[K,J]);return jsxRuntimeExports.jsx("div",{className:"history-chat-history",children:jsxRuntimeExports.jsx(pF,{value:K,intermediate:ce,onChange:ne,children:oe("chat.selectAll")})})},ChatHistoryOption=({isActive:K,isSelected:J,session:ne,onClick:oe,onCheck:ce})=>{const{t:ue}=useTranslation(),Ae=reactExports.useMemo(()=>DateFormatUtility.create(ne.Created).format(DateFormatEnum.DATE_TIME),[ne.Created]),pe=reactExports.useMemo(()=>ne.Name?ne.Name:ue(ne.IsEncrypted?"chat.types.private":"chat.types.internal"),[ne.IsEncrypted,ne.Name]);return jsxRuntimeExports.jsxs("div",{className:"history-chat-option",children:[jsxRuntimeExports.jsx(pF,{value:J,onChange:ce}),jsxRuntimeExports.jsxs("div",{className:cx("history-chat-option__label",{"history-chat-option__label_active":K}),onClick:oe,"aria-hidden":!0,children:[jsxRuntimeExports.jsx(mf,{title:pe,children:jsxRuntimeExports.jsx("span",{className:"history-chat-option__name",children:pe})}),jsxRuntimeExports.jsx("div",{children:Ae})]})]})},ChatHistoryFooter=({isDisabled:K,deleteSelected:J})=>{const{t:ne}=useTranslation();return jsxRuntimeExports.jsx(rl,{type:"tertiary",className:"history-chat-dropdown-footer",iconBefore:jsxRuntimeExports.jsx(Tk,{className:"history-chat-dropdown-footer__icon"}),disabled:K,onClick:J,children:jsxRuntimeExports.jsx("span",{className:"history-chat-dropdown-footer__label",children:ne("chat.deleteSelectedChats")})})};function useSelectedSessions(K){const[J,ne]=reactExports.useState({}),oe=reactExports.useMemo(()=>{const xe=Object.values(J);return xe.length>0&&xe.every(_e=>_e)},[J]),ce=reactExports.useMemo(()=>Object.values(J).every(xe=>!xe),[J]),ue=reactExports.useCallback(xe=>J[xe]||!1,[J]),Ae=reactExports.useCallback(()=>K.filter(xe=>ue(xe.ChatKey)),[ue,K]),pe=reactExports.useCallback(xe=>{const _e=xe.reduce(($e,Ie)=>({...$e,[Ie.ChatKey]:!1}),{});ne(_e)},[]),ve=reactExports.useCallback(xe=>{ne(_e=>{if(xe.ChatKey in _e){const $e=_e[xe.ChatKey];return{..._e,[xe.ChatKey]:!$e}}return _e})},[]),me=reactExports.useCallback(xe=>{ne(_e=>Object.keys(_e).reduce(($e,Ie)=>({...$e,[Ie]:xe}),{}))},[]),ge=reactExports.useCallback(()=>me(!oe),[oe,me]),ye=reactExports.useCallback(()=>me(!1),[me]);return reactExports.useEffect(()=>{pe(K)},[pe,K]),{isSelected:ue,isEmptySelection:ce,isAllSelection:oe,toggleSession:ve,toggleAllSessions:ge,getSelectedSessions:Ae,resetAllSessions:ye}}const ChatHistoryMenu=({activeSession:K,isOpen:J,sessions:ne,selectSession:oe,deleteSelected:ce})=>{const{isSelected:ue,isEmptySelection:Ae,isAllSelection:pe,toggleSession:ve,toggleAllSessions:me,getSelectedSessions:ge,resetAllSessions:ye}=useSelectedSessions(ne),xe=reactExports.useCallback(()=>{const _e=ge();ce(_e)},[ce,ge]);return reactExports.useEffect(()=>{!J&&ye()},[J,ye]),jsxRuntimeExports.jsxs("div",{className:"history-toolbar-chat-history-menu",children:[jsxRuntimeExports.jsx(ChatHistoryHeader,{isAllSelection:pe,isEmptySelection:Ae,toggleAllSessions:me}),jsxRuntimeExports.jsx("div",{className:"history-toolbar-chat-history-menu__content",children:ne.map(_e=>jsxRuntimeExports.jsx(ChatHistoryOption,{isActive:_e.ChatKey===(K==null?void 0:K.ChatKey),isSelected:ue(_e.ChatKey),session:_e,onCheck:()=>ve(_e),onClick:()=>oe(_e)},_e.ChatKey))}),jsxRuntimeExports.jsx(ChatHistoryFooter,{isDisabled:Ae,deleteSelected:xe})]})};function useChatHistoryToggleTooltip(K,J,ne){const{t:oe}=useTranslation(),[ce,ue]=reactExports.useState(!1),Ae=reactExports.useMemo(()=>oe(J?"chat.emptyHistoryTooltip":"chat.historyTooltip"),[J,oe]),pe=reactExports.useCallback(()=>{ne||ue(ve=>!ve)},[ne]);return reactExports.useEffect(()=>{(K||ne)&&ue(!1)},[K,ne]),{showTooltip:ce,toggleTooltip:pe,tooltipMessage:Ae}}const ChatHistoryToggle=({isLoading:K,isEmpty:J,isOpen:ne,onClick:oe})=>{const{tooltipMessage:ce}=useChatHistoryToggleTooltip(K,J,ne);return jsxRuntimeExports.jsx(mf,{title:ce,children:jsxRuntimeExports.jsx(rl,{type:"primary",onClick:oe,variant:"ghost",disabled:K||J,iconAfter:jsxRuntimeExports.jsx(Vk,{})})})},ChatHistory=({isLoading:K,activeSession:J,sessions:ne,className:oe,selectSession:ce,deleteSelectedSessions:ue})=>{const[Ae,pe]=reactExports.useState(!1),ve=reactExports.useMemo(()=>K||ne.length===0,[K,ne.length]),me=()=>jsxRuntimeExports.jsx(ChatHistoryMenu,{activeSession:J,isOpen:Ae,sessions:ne,selectSession:ge=>{ce(ge),pe(!1)},deleteSelected:ge=>{ue(ge),pe(!1)}});return jsxRuntimeExports.jsx(Y_,{open:Ae,onOpenChange:pe,disabled:ve,className:cx(oe),dropdownRender:me,children:jsxRuntimeExports.jsx(ChatHistoryToggle,{isOpen:Ae,isEmpty:ne.length===0,isLoading:K})})},ChatButton=({disabled:K=!1,onClick:J})=>{const{t:ne}=useTranslation();return jsxRuntimeExports.jsx(mf,{title:ne("chat.newTooltipTypes.internal"),children:jsxRuntimeExports.jsx(rl,{type:"tertiary",disabled:K,className:"toolbar-chat-button",onClick:J,iconAfter:jsxRuntimeExports.jsx(Dk,{}),children:jsxRuntimeExports.jsx("span",{className:"toolbar-chat-button__children",children:ne("chat.newTypes.internal")})})})},MaximizeButton=({isMaximizedView:K,onCLick:J})=>{const{t:ne}=useTranslation(),oe=ne(K?"maximizeButton.exitFullScreen":"maximizeButton.fullScreen"),ce=K?Lk:Ik;return jsxRuntimeExports.jsx(mf,{title:oe,children:jsxRuntimeExports.jsx(rl,{type:"primary",variant:"ghost",iconAfter:jsxRuntimeExports.jsx(ce,{}),onClick:J})})},HistoryToolbar=reactExports.memo(({isShowMaximized:K,isMaximized:J,isTopic:ne,isLoading:oe,activeSession:ce,sessions:ue,startNewChat:Ae,selectSession:pe,deleteSelectedSessions:ve,toggleMaximizedView:me})=>jsxRuntimeExports.jsx("div",{className:"history-toolbar",children:ne&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ChatButton,{disabled:oe,onClick:()=>Ae(ChatType.INTERNAL,!0)}),(ce==null?void 0:ce.Profile)&&jsxRuntimeExports.jsx(PromptLabel,{prompt:ce.Profile}),jsxRuntimeExports.jsxs("div",{className:"history-toolbar__chat-control-buttons",children:[jsxRuntimeExports.jsx(ChatHistory,{activeSession:ce,isLoading:oe,sessions:ue,selectSession:pe,deleteSelectedSessions:ve}),K&&jsxRuntimeExports.jsx("div",{className:"history-toolbar__maximize-container",children:jsxRuntimeExports.jsx(MaximizeButton,{isMaximizedView:J,onCLick:me})})]})]})}));HistoryToolbar.displayName="HistoryToolbar";function __awaiter(K,J,ne,oe){function ce(ue){return ue instanceof ne?ue:new ne(function(Ae){Ae(ue)})}return new(ne||(ne=Promise))(function(ue,Ae){function pe(ge){try{me(oe.next(ge))}catch(ye){Ae(ye)}}function ve(ge){try{me(oe.throw(ge))}catch(ye){Ae(ye)}}function me(ge){ge.done?ue(ge.value):ce(ge.value).then(pe,ve)}me((oe=oe.apply(K,J||[])).next())})}function __generator(K,J){var ne={label:0,sent:function(){if(ue[0]&1)throw ue[1];return ue[1]},trys:[],ops:[]},oe,ce,ue,Ae=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return Ae.next=pe(0),Ae.throw=pe(1),Ae.return=pe(2),typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function pe(me){return function(ge){return ve([me,ge])}}function ve(me){if(oe)throw new TypeError("Generator is already executing.");for(;Ae&&(Ae=0,me[0]&&(ne=0)),ne;)try{if(oe=1,ce&&(ue=me[0]&2?ce.return:me[0]?ce.throw||((ue=ce.return)&&ue.call(ce),0):ce.next)&&!(ue=ue.call(ce,me[1])).done)return ue;switch(ce=0,ue&&(me=[me[0]&2,ue.value]),me[0]){case 0:case 1:ue=me;break;case 4:return ne.label++,{value:me[1],done:!1};case 5:ne.label++,ce=me[1],me=[0];continue;case 7:me=ne.ops.pop(),ne.trys.pop();continue;default:if(ue=ne.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(me[0]===6||me[0]===2)){ne=0;continue}if(me[0]===3&&(!ue||me[1]>ue[0]&&me[1]<ue[3])){ne.label=me[1];break}if(me[0]===6&&ne.label<ue[1]){ne.label=ue[1],ue=me;break}if(ue&&ne.label<ue[2]){ne.label=ue[2],ne.ops.push(me);break}ue[2]&&ne.ops.pop(),ne.trys.pop();continue}me=J.call(K,ne)}catch(ge){me=[6,ge],ce=0}finally{oe=ue=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}}function __read(K,J){var ne=typeof Symbol=="function"&&K[Symbol.iterator];if(!ne)return K;var oe=ne.call(K),ce,ue=[],Ae;try{for(;(J===void 0||J-- >0)&&!(ce=oe.next()).done;)ue.push(ce.value)}catch(pe){Ae={error:pe}}finally{try{ce&&!ce.done&&(ne=oe.return)&&ne.call(oe)}finally{if(Ae)throw Ae.error}}return ue}function __spreadArray(K,J,ne){if(ne||arguments.length===2)for(var oe=0,ce=J.length,ue;oe<ce;oe++)(ue||!(oe in J))&&(ue||(ue=Array.prototype.slice.call(J,0,oe)),ue[oe]=J[oe]);return K.concat(ue||Array.prototype.slice.call(J))}typeof SuppressedError=="function"&&SuppressedError;var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(K,J){var ne=withMimeType(K);if(typeof ne.path!="string"){var oe=K.webkitRelativePath;Object.defineProperty(ne,"path",{value:typeof J=="string"?J:typeof oe=="string"&&oe.length>0?oe:K.name,writable:!1,configurable:!1,enumerable:!0})}return ne}function withMimeType(K){var J=K.name,ne=J&&J.lastIndexOf(".")!==-1;if(ne&&!K.type){var oe=J.split(".").pop().toLowerCase(),ce=COMMON_MIME_TYPES.get(oe);ce&&Object.defineProperty(K,"type",{value:ce,writable:!1,configurable:!1,enumerable:!0})}return K}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(K){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(J){return isObject(K)&&isDataTransfer(K.dataTransfer)?[2,getDataTransferFiles(K.dataTransfer,K.type)]:isChangeEvt(K)?[2,getInputFiles(K)]:Array.isArray(K)&&K.every(function(ne){return"getFile"in ne&&typeof ne.getFile=="function"})?[2,getFsHandleFiles(K)]:[2,[]]})})}function isDataTransfer(K){return isObject(K)}function isChangeEvt(K){return isObject(K)&&isObject(K.target)}function isObject(K){return typeof K=="object"&&K!==null}function getInputFiles(K){return fromList(K.target.files).map(function(J){return toFileWithPath(J)})}function getFsHandleFiles(K){return __awaiter(this,void 0,void 0,function(){var J;return __generator(this,function(ne){switch(ne.label){case 0:return[4,Promise.all(K.map(function(oe){return oe.getFile()}))];case 1:return J=ne.sent(),[2,J.map(function(oe){return toFileWithPath(oe)})]}})})}function getDataTransferFiles(K,J){return __awaiter(this,void 0,void 0,function(){var ne,oe;return __generator(this,function(ce){switch(ce.label){case 0:return K.items?(ne=fromList(K.items).filter(function(ue){return ue.kind==="file"}),J!=="drop"?[2,ne]:[4,Promise.all(ne.map(toFilePromises))]):[3,2];case 1:return oe=ce.sent(),[2,noIgnoredFiles(flatten(oe))];case 2:return[2,noIgnoredFiles(fromList(K.files).map(function(ue){return toFileWithPath(ue)}))]}})})}function noIgnoredFiles(K){return K.filter(function(J){return FILES_TO_IGNORE.indexOf(J.name)===-1})}function fromList(K){if(K===null)return[];for(var J=[],ne=0;ne<K.length;ne++){var oe=K[ne];J.push(oe)}return J}function toFilePromises(K){if(typeof K.webkitGetAsEntry!="function")return fromDataTransferItem(K);var J=K.webkitGetAsEntry();return J&&J.isDirectory?fromDirEntry(J):fromDataTransferItem(K)}function flatten(K){return K.reduce(function(J,ne){return __spreadArray(__spreadArray([],__read(J),!1),__read(Array.isArray(ne)?flatten(ne):[ne]),!1)},[])}function fromDataTransferItem(K){var J=K.getAsFile();if(!J)return Promise.reject("".concat(K," is not a File"));var ne=toFileWithPath(J);return Promise.resolve(ne)}function fromEntry(K){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(J){return[2,K.isDirectory?fromDirEntry(K):fromFileEntry(K)]})})}function fromDirEntry(K){var J=K.createReader();return new Promise(function(ne,oe){var ce=[];function ue(){var Ae=this;J.readEntries(function(pe){return __awaiter(Ae,void 0,void 0,function(){var ve,me,ge;return __generator(this,function(ye){switch(ye.label){case 0:if(pe.length)return[3,5];ye.label=1;case 1:return ye.trys.push([1,3,,4]),[4,Promise.all(ce)];case 2:return ve=ye.sent(),ne(ve),[3,4];case 3:return me=ye.sent(),oe(me),[3,4];case 4:return[3,6];case 5:ge=Promise.all(pe.map(fromEntry)),ce.push(ge),ue(),ye.label=6;case 6:return[2]}})})},function(pe){oe(pe)})}ue()})}function fromFileEntry(K){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(J){return[2,new Promise(function(ne,oe){K.file(function(ce){var ue=toFileWithPath(ce,K.fullPath);ne(ue)},function(ce){oe(ce)})})]})})}var _default=function(K,J){if(K&&J){var ne=Array.isArray(J)?J:J.split(",");if(ne.length===0)return!0;var oe=K.name||"",ce=(K.type||"").toLowerCase(),ue=ce.replace(/\/.*$/,"");return ne.some(function(Ae){var pe=Ae.trim().toLowerCase();return pe.charAt(0)==="."?oe.toLowerCase().endsWith(pe):pe.endsWith("/*")?ue===pe.replace(/\/.*$/,""):ce===pe})}return!0};function _toConsumableArray$1(K){return _arrayWithoutHoles$1(K)||_iterableToArray$1(K)||_unsupportedIterableToArray$1(K)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}function _arrayWithoutHoles$1(K){if(Array.isArray(K))return _arrayLikeToArray$1(K)}function ownKeys$1(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread$1(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys$1(Object(ne),!0).forEach(function(oe){_defineProperty$1(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys$1(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function _defineProperty$1(K,J,ne){return J in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function _slicedToArray$1(K,J){return _arrayWithHoles$1(K)||_iterableToArrayLimit$1(K,J)||_unsupportedIterableToArray$1(K,J)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(K,J){if(K){if(typeof K=="string")return _arrayLikeToArray$1(K,J);var ne=Object.prototype.toString.call(K).slice(8,-1);if(ne==="Object"&&K.constructor&&(ne=K.constructor.name),ne==="Map"||ne==="Set")return Array.from(K);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return _arrayLikeToArray$1(K,J)}}function _arrayLikeToArray$1(K,J){(J==null||J>K.length)&&(J=K.length);for(var ne=0,oe=new Array(J);ne<J;ne++)oe[ne]=K[ne];return oe}function _iterableToArrayLimit$1(K,J){var ne=K==null?null:typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(ne!=null){var oe=[],ce=!0,ue=!1,Ae,pe;try{for(ne=ne.call(K);!(ce=(Ae=ne.next()).done)&&(oe.push(Ae.value),!(J&&oe.length===J));ce=!0);}catch(ve){ue=!0,pe=ve}finally{try{!ce&&ne.return!=null&&ne.return()}finally{if(ue)throw pe}}return oe}}function _arrayWithHoles$1(K){if(Array.isArray(K))return K}var accepts=typeof _default=="function"?_default:_default.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",ErrorCode={FileInvalidType:FILE_INVALID_TYPE,FileTooLarge:FILE_TOO_LARGE,FileTooSmall:FILE_TOO_SMALL,TooManyFiles:TOO_MANY_FILES},getInvalidTypeRejectionErr=function K(J){J=Array.isArray(J)&&J.length===1?J[0]:J;var ne=Array.isArray(J)?"one of ".concat(J.join(", ")):J;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(ne)}},getTooLargeRejectionErr=function K(J){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(J," ").concat(J===1?"byte":"bytes")}},getTooSmallRejectionErr=function K(J){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(J," ").concat(J===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(K,J){var ne=K.type==="application/x-moz-file"||accepts(K,J);return[ne,ne?null:getInvalidTypeRejectionErr(J)]}function fileMatchSize(K,J,ne){if(isDefined(K.size))if(isDefined(J)&&isDefined(ne)){if(K.size>ne)return[!1,getTooLargeRejectionErr(ne)];if(K.size<J)return[!1,getTooSmallRejectionErr(J)]}else{if(isDefined(J)&&K.size<J)return[!1,getTooSmallRejectionErr(J)];if(isDefined(ne)&&K.size>ne)return[!1,getTooLargeRejectionErr(ne)]}return[!0,null]}function isDefined(K){return K!=null}function allFilesAccepted(K){var J=K.files,ne=K.accept,oe=K.minSize,ce=K.maxSize,ue=K.multiple,Ae=K.maxFiles,pe=K.validator;return!ue&&J.length>1||ue&&Ae>=1&&J.length>Ae?!1:J.every(function(ve){var me=fileAccepted(ve,ne),ge=_slicedToArray$1(me,1),ye=ge[0],xe=fileMatchSize(ve,oe,ce),_e=_slicedToArray$1(xe,1),$e=_e[0],Ie=pe?pe(ve):null;return ye&&$e&&!Ie})}function isPropagationStopped(K){return typeof K.isPropagationStopped=="function"?K.isPropagationStopped():typeof K.cancelBubble<"u"?K.cancelBubble:!1}function isEvtWithFiles(K){return K.dataTransfer?Array.prototype.some.call(K.dataTransfer.types,function(J){return J==="Files"||J==="application/x-moz-file"}):!!K.target&&!!K.target.files}function onDocumentDragOver(K){K.preventDefault()}function isIe(K){return K.indexOf("MSIE")!==-1||K.indexOf("Trident/")!==-1}function isEdge(K){return K.indexOf("Edge/")!==-1}function isIeOrEdge(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(K)||isEdge(K)}function composeEventHandlers(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];return function(oe){for(var ce=arguments.length,ue=new Array(ce>1?ce-1:0),Ae=1;Ae<ce;Ae++)ue[Ae-1]=arguments[Ae];return J.some(function(pe){return!isPropagationStopped(oe)&&pe&&pe.apply(void 0,[oe].concat(ue)),isPropagationStopped(oe)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(K){if(isDefined(K)){var J=Object.entries(K).filter(function(ne){var oe=_slicedToArray$1(ne,2),ce=oe[0],ue=oe[1],Ae=!0;return isMIMEType(ce)||(console.warn('Skipped "'.concat(ce,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),Ae=!1),(!Array.isArray(ue)||!ue.every(isExt))&&(console.warn('Skipped "'.concat(ce,'" because an invalid file extension was provided.')),Ae=!1),Ae}).reduce(function(ne,oe){var ce=_slicedToArray$1(oe,2),ue=ce[0],Ae=ce[1];return _objectSpread$1(_objectSpread$1({},ne),{},_defineProperty$1({},ue,Ae))},{});return[{description:"Files",accept:J}]}return K}function acceptPropAsAcceptAttr(K){if(isDefined(K))return Object.entries(K).reduce(function(J,ne){var oe=_slicedToArray$1(ne,2),ce=oe[0],ue=oe[1];return[].concat(_toConsumableArray$1(J),[ce],_toConsumableArray$1(ue))},[]).filter(function(J){return isMIMEType(J)||isExt(J)}).join(",")}function isAbort(K){return K instanceof DOMException&&(K.name==="AbortError"||K.code===K.ABORT_ERR)}function isSecurityError(K){return K instanceof DOMException&&(K.name==="SecurityError"||K.code===K.SECURITY_ERR)}function isMIMEType(K){return K==="audio/*"||K==="video/*"||K==="image/*"||K==="text/*"||/\w+\/[-+.\w]+/g.test(K)}function isExt(K){return/^.*\.[\w]+$/.test(K)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(K){return _arrayWithoutHoles(K)||_iterableToArray(K)||_unsupportedIterableToArray(K)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}function _arrayWithoutHoles(K){if(Array.isArray(K))return _arrayLikeToArray(K)}function _slicedToArray(K,J){return _arrayWithHoles(K)||_iterableToArrayLimit(K,J)||_unsupportedIterableToArray(K,J)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(K,J){if(K){if(typeof K=="string")return _arrayLikeToArray(K,J);var ne=Object.prototype.toString.call(K).slice(8,-1);if(ne==="Object"&&K.constructor&&(ne=K.constructor.name),ne==="Map"||ne==="Set")return Array.from(K);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return _arrayLikeToArray(K,J)}}function _arrayLikeToArray(K,J){(J==null||J>K.length)&&(J=K.length);for(var ne=0,oe=new Array(J);ne<J;ne++)oe[ne]=K[ne];return oe}function _iterableToArrayLimit(K,J){var ne=K==null?null:typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(ne!=null){var oe=[],ce=!0,ue=!1,Ae,pe;try{for(ne=ne.call(K);!(ce=(Ae=ne.next()).done)&&(oe.push(Ae.value),!(J&&oe.length===J));ce=!0);}catch(ve){ue=!0,pe=ve}finally{try{!ce&&ne.return!=null&&ne.return()}finally{if(ue)throw pe}}return oe}}function _arrayWithHoles(K){if(Array.isArray(K))return K}function ownKeys(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys(Object(ne),!0).forEach(function(oe){_defineProperty(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function _defineProperty(K,J,ne){return J in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function _objectWithoutProperties(K,J){if(K==null)return{};var ne=_objectWithoutPropertiesLoose(K,J),oe,ce;if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(K);for(ce=0;ce<ue.length;ce++)oe=ue[ce],!(J.indexOf(oe)>=0)&&Object.prototype.propertyIsEnumerable.call(K,oe)&&(ne[oe]=K[oe])}return ne}function _objectWithoutPropertiesLoose(K,J){if(K==null)return{};var ne={},oe=Object.keys(K),ce,ue;for(ue=0;ue<oe.length;ue++)ce=oe[ue],!(J.indexOf(ce)>=0)&&(ne[ce]=K[ce]);return ne}var Dropzone=reactExports.forwardRef(function(K,J){var ne=K.children,oe=_objectWithoutProperties(K,_excluded),ce=useDropzone(oe),ue=ce.open,Ae=_objectWithoutProperties(ce,_excluded2);return reactExports.useImperativeHandle(J,function(){return{open:ue}},[ue]),React.createElement(reactExports.Fragment,null,ne(_objectSpread(_objectSpread({},Ae),{},{open:ue})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=_objectSpread(_objectSpread({},defaultProps),K),ne=J.accept,oe=J.disabled,ce=J.getFilesFromEvent,ue=J.maxSize,Ae=J.minSize,pe=J.multiple,ve=J.maxFiles,me=J.onDragEnter,ge=J.onDragLeave,ye=J.onDragOver,xe=J.onDrop,_e=J.onDropAccepted,$e=J.onDropRejected,Ie=J.onFileDialogCancel,Fe=J.onFileDialogOpen,ke=J.useFsAccessApi,je=J.autoFocus,We=J.preventDropOnDocument,ze=J.noClick,Xe=J.noKeyboard,Je=J.noDrag,nt=J.noDragEventsBubbling,et=J.onError,tt=J.validator,st=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(ne)},[ne]),qe=reactExports.useMemo(function(){return pickerOptionsFromAccept(ne)},[ne]),Se=reactExports.useMemo(function(){return typeof Fe=="function"?Fe:noop},[Fe]),Re=reactExports.useMemo(function(){return typeof Ie=="function"?Ie:noop},[Ie]),Be=reactExports.useRef(null),Ne=reactExports.useRef(null),Ue=reactExports.useReducer(reducer,initialState),Ge=_slicedToArray(Ue,2),Ye=Ge[0],Qe=Ge[1],Te=Ye.isFocused,Ke=Ye.isFileDialogActive,rt=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&ke&&canUseFileSystemAccessAPI()),it=function(){!rt.current&&Ke&&setTimeout(function(){if(Ne.current){var Dt=Ne.current.files;Dt.length||(Qe({type:"closeDialog"}),Re())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",it,!1),function(){window.removeEventListener("focus",it,!1)}},[Ne,Ke,Re,rt]);var at=reactExports.useRef([]),lt=function(Dt){Be.current&&Be.current.contains(Dt.target)||(Dt.preventDefault(),at.current=[])};reactExports.useEffect(function(){return We&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",lt,!1)),function(){We&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",lt))}},[Be,We]),reactExports.useEffect(function(){return!oe&&je&&Be.current&&Be.current.focus(),function(){}},[Be,je,oe]);var ct=reactExports.useCallback(function(Tt){et?et(Tt):console.error(Tt)},[et]),ot=reactExports.useCallback(function(Tt){Tt.preventDefault(),Tt.persist(),Mt(Tt),at.current=[].concat(_toConsumableArray(at.current),[Tt.target]),isEvtWithFiles(Tt)&&Promise.resolve(ce(Tt)).then(function(Dt){if(!(isPropagationStopped(Tt)&&!nt)){var Ht=Dt.length,Bt=Ht>0&&allFilesAccepted({files:Dt,accept:st,minSize:Ae,maxSize:ue,multiple:pe,maxFiles:ve,validator:tt}),It=Ht>0&&!Bt;Qe({isDragAccept:Bt,isDragReject:It,isDragActive:!0,type:"setDraggedFiles"}),me&&me(Tt)}}).catch(function(Dt){return ct(Dt)})},[ce,me,ct,nt,st,Ae,ue,pe,ve,tt]),ft=reactExports.useCallback(function(Tt){Tt.preventDefault(),Tt.persist(),Mt(Tt);var Dt=isEvtWithFiles(Tt);if(Dt&&Tt.dataTransfer)try{Tt.dataTransfer.dropEffect="copy"}catch{}return Dt&&ye&&ye(Tt),!1},[ye,nt]),dt=reactExports.useCallback(function(Tt){Tt.preventDefault(),Tt.persist(),Mt(Tt);var Dt=at.current.filter(function(Bt){return Be.current&&Be.current.contains(Bt)}),Ht=Dt.indexOf(Tt.target);Ht!==-1&&Dt.splice(Ht,1),at.current=Dt,!(Dt.length>0)&&(Qe({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(Tt)&&ge&&ge(Tt))},[Be,ge,nt]),mt=reactExports.useCallback(function(Tt,Dt){var Ht=[],Bt=[];Tt.forEach(function(It){var zt=fileAccepted(It,st),Pt=_slicedToArray(zt,2),Vt=Pt[0],vr=Pt[1],qt=fileMatchSize(It,Ae,ue),er=_slicedToArray(qt,2),yr=er[0],Lt=er[1],jt=tt?tt(It):null;if(Vt&&yr&&!jt)Ht.push(It);else{var fr=[vr,Lt];jt&&(fr=fr.concat(jt)),Bt.push({file:It,errors:fr.filter(function(Gt){return Gt})})}}),(!pe&&Ht.length>1||pe&&ve>=1&&Ht.length>ve)&&(Ht.forEach(function(It){Bt.push({file:It,errors:[TOO_MANY_FILES_REJECTION]})}),Ht.splice(0)),Qe({acceptedFiles:Ht,fileRejections:Bt,type:"setFiles"}),xe&&xe(Ht,Bt,Dt),Bt.length>0&&$e&&$e(Bt,Dt),Ht.length>0&&_e&&_e(Ht,Dt)},[Qe,pe,st,Ae,ue,ve,xe,_e,$e,tt]),kt=reactExports.useCallback(function(Tt){Tt.preventDefault(),Tt.persist(),Mt(Tt),at.current=[],isEvtWithFiles(Tt)&&Promise.resolve(ce(Tt)).then(function(Dt){isPropagationStopped(Tt)&&!nt||mt(Dt,Tt)}).catch(function(Dt){return ct(Dt)}),Qe({type:"reset"})},[ce,mt,ct,nt]),wt=reactExports.useCallback(function(){if(rt.current){Qe({type:"openDialog"}),Se();var Tt={multiple:pe,types:qe};window.showOpenFilePicker(Tt).then(function(Dt){return ce(Dt)}).then(function(Dt){mt(Dt,null),Qe({type:"closeDialog"})}).catch(function(Dt){isAbort(Dt)?(Re(Dt),Qe({type:"closeDialog"})):isSecurityError(Dt)?(rt.current=!1,Ne.current?(Ne.current.value=null,Ne.current.click()):ct(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ct(Dt)});return}Ne.current&&(Qe({type:"openDialog"}),Se(),Ne.current.value=null,Ne.current.click())},[Qe,Se,Re,ke,mt,ct,qe,pe]),Et=reactExports.useCallback(function(Tt){!Be.current||!Be.current.isEqualNode(Tt.target)||(Tt.key===" "||Tt.key==="Enter"||Tt.keyCode===32||Tt.keyCode===13)&&(Tt.preventDefault(),wt())},[Be,wt]),Ot=reactExports.useCallback(function(){Qe({type:"focus"})},[]),Rt=reactExports.useCallback(function(){Qe({type:"blur"})},[]),gt=reactExports.useCallback(function(){ze||(isIeOrEdge()?setTimeout(wt,0):wt())},[ze,wt]),$t=function(Dt){return oe?null:Dt},pt=function(Dt){return Xe?null:$t(Dt)},vt=function(Dt){return Je?null:$t(Dt)},Mt=function(Dt){nt&&Dt.stopPropagation()},St=reactExports.useMemo(function(){return function(){var Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Dt=Tt.refKey,Ht=Dt===void 0?"ref":Dt,Bt=Tt.role,It=Tt.onKeyDown,zt=Tt.onFocus,Pt=Tt.onBlur,Vt=Tt.onClick,vr=Tt.onDragEnter,qt=Tt.onDragOver,er=Tt.onDragLeave,yr=Tt.onDrop,Lt=_objectWithoutProperties(Tt,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:pt(composeEventHandlers(It,Et)),onFocus:pt(composeEventHandlers(zt,Ot)),onBlur:pt(composeEventHandlers(Pt,Rt)),onClick:$t(composeEventHandlers(Vt,gt)),onDragEnter:vt(composeEventHandlers(vr,ot)),onDragOver:vt(composeEventHandlers(qt,ft)),onDragLeave:vt(composeEventHandlers(er,dt)),onDrop:vt(composeEventHandlers(yr,kt)),role:typeof Bt=="string"&&Bt!==""?Bt:"presentation"},Ht,Be),!oe&&!Xe?{tabIndex:0}:{}),Lt)}},[Be,Et,Ot,Rt,gt,ot,ft,dt,kt,Xe,Je,oe]),_t=reactExports.useCallback(function(Tt){Tt.stopPropagation()},[]),Xt=reactExports.useMemo(function(){return function(){var Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Dt=Tt.refKey,Ht=Dt===void 0?"ref":Dt,Bt=Tt.onChange,It=Tt.onClick,zt=_objectWithoutProperties(Tt,_excluded4),Pt=_defineProperty({accept:st,multiple:pe,type:"file",style:{display:"none"},onChange:$t(composeEventHandlers(Bt,kt)),onClick:$t(composeEventHandlers(It,_t)),tabIndex:-1},Ht,Ne);return _objectSpread(_objectSpread({},Pt),zt)}},[Ne,ne,pe,kt,oe]);return _objectSpread(_objectSpread({},Ye),{},{isFocused:Te&&!oe,getRootProps:St,getInputProps:Xt,rootRef:Be,inputRef:Ne,open:$t(wt)})}function reducer(K,J){switch(J.type){case"focus":return _objectSpread(_objectSpread({},K),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},K),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},K),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},K),{},{isDragActive:J.isDragActive,isDragAccept:J.isDragAccept,isDragReject:J.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},K),{},{acceptedFiles:J.acceptedFiles,fileRejections:J.fileRejections});case"reset":return _objectSpread({},initialState);default:return K}}function noop(){}const BYTE_UNITS=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],BIBYTE_UNITS=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],BIT_UNITS=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],BIBIT_UNITS=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],toLocaleString=(K,J,ne)=>{let oe=K;return typeof J=="string"||Array.isArray(J)?oe=K.toLocaleString(J,ne):(J===!0||ne!==void 0)&&(oe=K.toLocaleString(void 0,ne)),oe};function prettyBytes(K,J){if(!Number.isFinite(K))throw new TypeError(`Expected a finite number, got ${typeof K}: ${K}`);J={bits:!1,binary:!1,space:!0,...J};const ne=J.bits?J.binary?BIBIT_UNITS:BIT_UNITS:J.binary?BIBYTE_UNITS:BYTE_UNITS,oe=J.space?" ":"";if(J.signed&&K===0)return` 0${oe}${ne[0]}`;const ce=K<0,ue=ce?"-":J.signed?"+":"";ce&&(K=-K);let Ae;if(J.minimumFractionDigits!==void 0&&(Ae={minimumFractionDigits:J.minimumFractionDigits}),J.maximumFractionDigits!==void 0&&(Ae={maximumFractionDigits:J.maximumFractionDigits,...Ae}),K<1){const ge=toLocaleString(K,J.locale,Ae);return ue+ge+oe+ne[0]}const pe=Math.min(Math.floor(J.binary?Math.log(K)/Math.log(1024):Math.log10(K)/3),ne.length-1);K/=(J.binary?1024:1e3)**pe,Ae||(K=K.toPrecision(3));const ve=toLocaleString(Number(K),J.locale,Ae),me=ne[pe];return ue+ve+oe+me}const generateMessageByError=(K,J,ne)=>{switch(J.code){case ErrorCode.FileInvalidType:return J.message.replaceAll(",",", ");case ErrorCode.FileTooLarge:{const oe=prettyBytes(ne.maxByteSize);return`File "${K.name}" is larger than the maximum of ${oe} supported by the current GPT model tier.`}default:return J.message}},generateErrorMessage=(K,J)=>{let ne="";for(let oe=0;oe<K.errors.length;oe+=1){const ce=K.errors[oe],ue=generateMessageByError(K.file,ce,J);ne=ne.concat(`${ue} 
`)}return ne},errorList="_errorList_rhoyz_1",dropzone="_dropzone_rhoyz_8",dropzoneActive="_dropzoneActive_rhoyz_15",dropzoneReject="_dropzoneReject_rhoyz_19",styles$2={errorList,dropzone,dropzoneActive,dropzoneReject},UploadZone=({isLoading:K,children:J,onChangeFiles:ne})=>{const[oe,ce]=reactExports.useState([]),ue=5e6;reactExports.useEffect(()=>{oe.length>0&&Ho.warning({title:instance.t("uploadZoneErrorModal.title"),content:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{children:instance.t("uploadZoneErrorModal.message")}),jsxRuntimeExports.jsx("ul",{className:styles$2.errorList,children:oe.map((pe,ve)=>jsxRuntimeExports.jsx("li",{children:pe},ve))})]}),cancelText:null,onOk(pe){ce([]),pe()},testId:"upload-zone"})},[oe]);const Ae=reactExports.useCallback(pe=>{const ve=pe.map(me=>generateErrorMessage(me,{maxByteSize:ue}));ce(ve)},[]);return jsxRuntimeExports.jsx(Dropzone,{disabled:K,maxSize:ue,accept:{"application/pdf":[],"text/csv":[],"text/plain":[".sql",".py",".cpp",".hpp",".c",".h",".cs",".java",".js",".ts",".md"]},noClick:!0,noKeyboard:!0,onDrop:ne,onDropRejected:Ae,children:({getRootProps:pe,getInputProps:ve,isDragActive:me,isDragReject:ge,open:ye})=>jsxRuntimeExports.jsxs("div",{...pe({className:cx(styles$2.dropzone,{[styles$2.dropzoneActive]:me,[styles$2.dropzoneReject]:ge})}),children:[jsxRuntimeExports.jsx("input",{...ve()}),J({open:ye})]})})},top="_top_1h0u2_1",container$1="_container_1h0u2_8",fullScreenMode="_fullScreenMode_1h0u2_18",logoContainer="_logoContainer_1h0u2_25",styles$1={top,container:container$1,fullScreenMode,logoContainer},History=({isShowMaximizedButton:K,isMaximized:J,isTopic:ne,files:oe,isSending:ce,isPrivateType:ue,isLoading:Ae,activeSession:pe,sessions:ve,selectSession:me,deleteSelectedSessions:ge,startNewChat:ye,messageGroups:xe,onSendMessage:_e,cancelSendMessage:$e,message:Ie,onChangeInput:Fe,onChangeFiles:ke,onRemoveFile:je,toggleMaximizedView:We,openKeyDialog:ze,getUnsavedFiles:Xe})=>{const Je=reactExports.useRef(),{state:nt,action:et}=useAppContext(),tt=useSelector$1(selectFullScreenMode);reactExports.useEffect(()=>{nt.showLineHider&&et.setShowLineHiderAction(!1)},[]);const st=reactExports.useCallback(qe=>{ke(qe),Je.current.focus()},[ke]);return jsxRuntimeExports.jsx(UploadZone,{isLoading:Ae,onChangeFiles:st,children:({open:qe})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[tt&&jsxRuntimeExports.jsxs("div",{className:styles$1.fullScreenMode,children:[jsxRuntimeExports.jsx("div",{className:styles$1.logoContainer,children:jsxRuntimeExports.jsx(Logo,{})}),env$1.isFullScreenNavigation&&jsxRuntimeExports.jsx(HeaderSearch,{})]}),jsxRuntimeExports.jsx("div",{className:styles$1.top,children:jsxRuntimeExports.jsxs("div",{className:styles$1.container,children:[jsxRuntimeExports.jsx(HistoryToolbar,{isShowMaximized:K,isMaximized:J,isTopic:ne,activeSession:pe,isLoading:Ae,sessions:ve,startNewChat:ye,selectSession:me,deleteSelectedSessions:ge,toggleMaximizedView:We}),jsxRuntimeExports.jsx(Chat,{isShowMaskIcon:ue,messageGroups:xe}),jsxRuntimeExports.jsx(FileList,{isLoading:Ae,files:oe,onRemove:je}),jsxRuntimeExports.jsx(ChatInput,{ref:Je,getUnsavedFiles:Xe,isProfileChosen:!!(pe!=null&&pe.Profile),isSending:ce,isLoading:Ae,input:Ie,onChangeInput:Fe,onSendMessage:_e,openFileExplorer:qe,cancelSendMessage:$e,openKeyDialog:ze})]})})]})})};function usePrompts(K,J){const[ne,oe]=reactExports.useState(LoadingStatusesEnum.INITIAL),[ce,ue]=reactExports.useState({}),[Ae,pe]=reactExports.useState([]),ve=ge=>schemaApi.getType({name:ge}).then(ye=>{const xe=ye.typeList[ye.rootType];return ue(xe),xe}),me=ge=>storageApi.select({params:{type:ge,table_format:!0,limit:1e5,dataset:J}}).then(({data:ye})=>pe(ye));return reactExports.useEffect(()=>{oe(LoadingStatusesEnum.LOADING),ve(K).then(()=>me(K)).then(()=>oe(LoadingStatusesEnum.SUCCESS)).catch(()=>oe(LoadingStatusesEnum.ERROR))},[K]),{status:ne,prompts:Ae,schema:ce,isLoading:ne===LoadingStatusesEnum.INITIAL||ne===LoadingStatusesEnum.LOADING}}const PromptsModal=({activeSession:K,close:J,create:ne})=>{const oe=useSelector$1(selectActiveDataset$1),{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(K==null?void 0:K.Profile),{status:pe,schema:ve,prompts:me,isLoading:ge}=usePrompts("Profile",oe),ye=reactExports.useCallback(_e=>_e.Name,[]),xe=reactExports.useMemo(()=>isArray$7(ve.Elements)?mapMetadataToGridColumnsHelper(ve.Elements):[],[ve]);return jsxRuntimeExports.jsxs(Ho,{open:!0,defaultHeight:500,defaultWidth:600,title:ce("chat.newChat"),onClose:J,children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(PF,{loading:ge,children:jsxRuntimeExports.jsx(Grid,{className:"promptsModal__grid",status:pe,columns:xe,data:me,getRowId:ye,selectedRowId:ue,onChangeSelectedRowId:Ae})})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"prompts",okText:ce("buttons.agree"),onOk:()=>ne(ue),okProps:{disabled:!ue},cancelText:ce("buttons.cancel"),onCancel:J})]})},getTimeoutDelay=K=>{const J=Date.now();let ne;return J-K<2e3?ne=500:J-K<5e3?ne=1e3:ne=5e3,ne};function useLocalStorage(K,J){const[ne,oe]=reactExports.useState(()=>{try{const ue=localStorage.getItem(K);return ue?JSON.parse(ue):J}catch(ue){return console.warn(`Error reading localStorage key ${K}:`,ue),J}});return[ne,ue=>{try{const Ae=ue instanceof Function?ue(ne):ue;oe(Ae);const pe=JSON.stringify(Ae);localStorage.setItem(K,pe)}catch(Ae){console.warn(`Error setting localStorage key ${K}:`,Ae)}}]}function useMessage(K=""){const{openTabParams:J}=useAppContext(),[ne,oe]=useLocalStorage("chat-message",K);reactExports.useEffect(()=>{J.chatAbout.getParams(ue=>{ue&&oe("")})},[]);const ce=reactExports.useCallback(()=>{oe(K)},[K]);return{message:ne,onChange:oe,onClear:ce}}const isQuestion=K=>isObject$9(K)&&"TextInput"in K,isAnswer=K=>isObject$9(K)&&"TextOutput"in K,mapResponseToMessageGroup=K=>{const J=K[0].Result||[],ne=[];for(let oe=0;oe<J.length;oe+=2){const[ce,ue]=J.slice(oe,oe+2);let Ae={id:v4(),status:MessageGroupStatus.INITIAL};isQuestion(ce)&&(Ae={...Ae,question:{id:v4(),text:ce.TextInput,files:Array.isArray(ce.Files)?ce.Files.map(pe=>{const ve=FileStatusMap[pe.Status]||FileStatusType.NONE;return{status:ve,filename:pe.FileNameWithExt,isSaved:!0,savedStatus:ve}}):[]}}),isAnswer(ue)&&(Ae={...Ae,answer:{id:v4(),text:ue.TextOutput,files:[]}}),ne.push(Ae)}return ne},loadHistoryRequest=({key:K,table:J,dataset:ne,chatKey:oe,userName:ce})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"LoadChatHistory",Arguments:{CurrentChat:oe},Dataset:ne,userName:ce}).then(mapResponseToMessageGroup);function useMessages(){const[K,J]=reactExports.useState([]),ne=reactExports.useCallback(ge=>loadHistoryRequest(ge).then(ye=>J(ye)),[]),oe=reactExports.useCallback(()=>{const ge=v4();return J(ye=>[...ye,{id:ge,status:MessageGroupStatus.INITIAL}]),ge},[]),ce=reactExports.useCallback((ge,ye=[])=>({id:v4(),text:ge,files:ye}),[]),ue=reactExports.useCallback((ge,ye)=>{J(xe=>xe.map(_e=>_e.id===ge?{..._e,...ye}:_e))},[]),Ae=reactExports.useCallback((ge,ye,xe=[])=>{ue(ge,{status:MessageGroupStatus.LOADING,question:ce(ye,xe)})},[ue,ce]),pe=reactExports.useCallback((ge,ye)=>{ue(ge,{status:MessageGroupStatus.SUCCESS,answer:ce(ye)})},[ce,ue]),ve=reactExports.useCallback((ge,ye)=>{ue(ge,{status:ye})},[ue]),me=reactExports.useCallback(()=>{J([])},[]);return{messageGroups:K,createGroup:oe,addQuestion:Ae,addAnswer:pe,updateStatus:ve,onClear:me,load:ne}}const fileToBase64=K=>new Promise((J,ne)=>{const oe=new FileReader;oe.readAsDataURL(K),oe.onload=()=>J(window.btoa(oe.result)),oe.onerror=ne}),mapResponseFile=K=>{const J=FileStatusType.NONE;return{isSaved:!0,filename:K.FileNameWithExt,savedStatus:J,status:J}},loadChatFilesRequest=({key:K,dataset:J,table:ne,chatKey:oe,userName:ce})=>handlerApi.handlerRun({Keys:[K],Type:ne,Method:"LoadChatFiles",Arguments:{CurrentChat:oe},Dataset:J,userName:ce}).then(ue=>{const Ae=ue[0].Result;return(Ae==null?void 0:Ae.map(mapResponseFile))||[]});function useFiles(){const[K,J]=reactExports.useState([]),[ne,oe]=reactExports.useState([]),ce=reactExports.useCallback(_e=>loadChatFilesRequest(_e).then($e=>{oe($e),J([])}),[]),ue=reactExports.useCallback(_e=>{J($e=>$e.filter(Ie=>Ie.name!==_e)),oe($e=>$e.reduce((Ie,Fe)=>(Fe.filename===_e?Fe.isSaved&&Ie.push({...Fe,status:FileStatusType.REMOVED,savedStatus:FileStatusType.REMOVED}):Ie.push(Fe),Ie),[]))},[]),Ae=reactExports.useCallback(_e=>{J($e=>{const Ie=_e.map(Fe=>Fe.name);return $e.filter(Fe=>Ie.indexOf(Fe.name)===-1).concat(_e)}),oe($e=>{const Ie=[],Fe=_e.map(ke=>ke.name);for(let ke=0;ke<$e.length;ke+=1){const je=$e[ke];if(Fe.includes(je.filename)){Ie.push({...je,status:FileStatusType.UPDATED});const We=Fe.indexOf(je.filename);Fe.splice(We,1)}else Ie.push(je)}return Ie.concat(Fe.map(ke=>({filename:ke,status:FileStatusType.ADDED,savedStatus:FileStatusType.NONE,isSaved:!1})))})},[]),pe=reactExports.useCallback(()=>J([]),[]),ve=reactExports.useCallback(()=>K.map(_e=>_e.name),[K]),me=reactExports.useCallback(()=>{const _e=new Set(K.map($e=>$e.name));return ne.filter($e=>_e.has($e.filename)||$e.status===FileStatusType.REMOVED)},[ne,K]),ge=reactExports.useCallback(()=>{pe(),oe(_e=>_e.filter($e=>$e.status!==FileStatusType.REMOVED).map($e=>({...$e,status:FileStatusType.NONE,savedStatus:FileStatusType.NONE,isSaved:!0})))},[pe]),ye=reactExports.useCallback(()=>{const _e=K.map(fileToBase64);return Promise.all(_e)},[K]),xe=reactExports.useCallback(()=>ne.filter(_e=>_e.status===FileStatusType.REMOVED).map(_e=>_e.filename),[ne]);return{files:ne,filesWithContent:K,onChange:Ae,onReset:pe,getFileNames:ve,getUnsavedFiles:me,getFilesAsBase64List:ye,onRemove:ue,loadChatFiles:ce,getRemovedFileNames:xe,onSend:ge}}const mapRawData=K=>K[0].Result.map(ne=>({ChatKey:ne.ChatKey,Created:ne.Created,IsEncrypted:ne.IsEncrypted,Profile:ne.Profile,Name:ne.Name})),getChatSessionsRequest=({key:K,table:J,dataset:ne,userName:oe})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"GetChatSessions",Dataset:ne,userName:oe}).then(mapRawData),switchChatSessionRequest=({key:K,table:J,dataset:ne,session:oe,activeChat:ce,userName:ue})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"SwitchChatSession",Arguments:{CurrentChat:oe.ChatKey,ActiveChat:ce},Dataset:ne,userName:ue}),deleteChatSessionsRequest=({key:K,table:J,sessionChatKeys:ne,dataset:oe,userName:ce})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"DeleteChatSessions",Arguments:{CurrentChats:ne},Dataset:oe,userName:ce});function useSessions(){const[K,J]=reactExports.useState([]),ne=reactExports.useCallback(()=>{J([])},[]),oe=reactExports.useCallback(Ae=>getChatSessionsRequest(Ae).then(pe=>(J(pe),pe)).catch(()=>(ne(),[])),[ne]),ce=reactExports.useCallback(switchChatSessionRequest,[]),ue=reactExports.useCallback(Ae=>{const{sessions:pe,...ve}=Ae,me=pe.map(ge=>ge.ChatKey);return deleteChatSessionsRequest({...ve,sessionChatKeys:me}).then(()=>{const ge=new Set(me),ye=K.filter(xe=>!ge.has(xe.ChatKey));return J(ye),ye})},[K]);return{sessions:K,load:oe,select:ce,reset:ne,deleteMany:ue}}const getActiveChatSessionRequest=({key:K,table:J,dataset:ne,userName:oe})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"GetActiveChatSession",Dataset:ne,userName:oe});function useActiveChat(){const[K,J]=reactExports.useState(),[ne,oe]=reactExports.useState(ChatType.INTERNAL),ce=reactExports.useMemo(()=>ne===ChatType.ENCRYPTED,[ne]),ue=reactExports.useMemo(()=>ne===ChatType.INTERNAL,[ne]),Ae=reactExports.useMemo(()=>ne===ChatType.PRIVATE,[ne]),pe=reactExports.useCallback(me=>oe(me),[]),ve=reactExports.useCallback(me=>getActiveChatSessionRequest(me).then(ge=>{const ye=ge[0].Result;return ye?(J(ye),pe(ye.IsEncrypted?ChatType.PRIVATE:ChatType.INTERNAL),ye):null}).catch(()=>J(void 0)),[pe]);return{activeChat:K,chatType:ne,isEncryptedType:ce,isInternalType:ue,isPrivateType:Ae,change:pe,getActiveChat:ve,setActiveChat:J}}const getKeyRequest=({type:K,dataset:J})=>storageApi.select({params:{type:K,dataset:J,table_format:!0,limit:1}}).then(({data:ne})=>{const{_key:oe}=ne[0];return oe}),sendPromptRequest=({dataset:K,fileNames:J,fileContentBytes:ne,removedFileNames:oe,key:ce,table:ue,prompt:Ae,chatKey:pe,userName:ve})=>handlerApi.runTasks({keys:[ce],type:ue,dataset:K,method:"SendPrompt",args:{Prompt:Ae,CurrentChat:pe,RemovedFileNames:oe,FileNames:J,FileContentBytes:ne},userName:ve}),startNewChatRequest=({key:K,dataset:J,table:ne,isEncrypted:oe=!1,promptId:ce,activeChat:ue,userName:Ae})=>handlerApi.handlerRun({Keys:[K],Type:ne,Method:"StartNewChat",Arguments:{IsEncrypted:oe,ActiveChat:ue,...ce&&{Profile:{_t:"ProfileKey",Name:ce}}},Dataset:J,userName:Ae}),isExistsEntityRequest=({type:K,key:J,dataset:ne})=>storageApi.getRecord({type:K,key:J,dataset:ne}).then(({data:oe})=>!!oe).catch(()=>!1),selectActiveDataset=K=>K.DatasetDataSliceReducer.datasetData.activeDatasetName;function useHistory({chatKey:K,isLoading:J,activeTypeTab:ne,onChangeLoading:oe,loadViewers:ce,resetViewers:ue}){const{activeTab:Ae}=useTabParams(),pe=useSelector$1(selectUser),ve=useDispatch$1(),me=useSelector$1(selectActiveEnvironment),ge=useSelector$1(selectActiveDataset),ye=useLatest(ne),xe=reactExports.useRef(new AbortController),[_e,$e]=reactExports.useState(!1),{openTabParams:Ie}=useAppContext(),[Fe,ke]=reactExports.useState(null),je=reactExports.useRef(null),[We,ze]=reactExports.useState(null),{activeChat:Xe,chatType:Je,isPrivateType:nt,getActiveChat:et,setActiveChat:tt}=useActiveChat(),{sessions:st,load:qe,select:Se,deleteMany:Re}=useSessions(),{files:Be,onChange:Ne,getFilesAsBase64List:Ue,getUnsavedFiles:Ge,getRemovedFileNames:Ye,onRemove:Qe,loadChatFiles:Te,onSend:Ke,getFileNames:rt}=useFiles(),{messageGroups:it,addQuestion:at,addAnswer:lt,createGroup:ct,updateStatus:ot,onClear:ft,load:dt}=useMessages(),{message:mt,onChange:kt,onClear:wt}=useMessage(),Et=reactExports.useRef(null),Ot=(pe==null?void 0:pe.username)??"",Rt=reactExports.useCallback((It,zt)=>{const Pt=Et.current;if(Pt===null||isNullable(me)||isNullable(ge))throw new Error('Cannot execute request because one of these parameters is empty: "key", "dataset" or "environment"');oe(!0),startNewChatRequest({key:Pt,dataset:ge,promptId:zt,activeChat:Xe==null?void 0:Xe.ChatKey,table:ye.current,isEncrypted:It===ChatType.PRIVATE,userName:Ot}).then(Vt=>{const vr=Vt[0].Result;wt(),ft(),ue(),tt(vr);const qt={key:Pt,dataset:ge,chatKey:vr.ChatKey,table:ye.current,userName:Ot};return Promise.all([ce(vr.ChatKey),Te(qt).then(()=>{}),dt(qt),qe(qt)]).then(()=>{Fe&&(_t(Fe.data),Ie.chatAbout.clearParams(),ke(null))})}).finally(()=>oe(!1))},[Xe,me,ge,oe,ye,wt,ft,ue,Te,ce,dt,qe,Fe]),gt=({data:It,groupId:zt,dataset:Pt,key:Vt,chatKey:vr})=>{const qt={dataset:Pt,taskRunIds:[It[0].TaskRunId]};handlerApi.runTasksResult(qt).then(er=>{const yr=er[0].Result;lt(zt,yr),Ke();const Lt={key:Vt,dataset:Pt,chatKey:vr,table:ye.current,userName:Ot},jt=[ce(vr),Te(Lt)];return st.some(fr=>!fr.Name)&&jt.push(qe(Lt)),Promise.all(jt)}).catch(()=>{ot(zt,MessageGroupStatus.ERROR)}).finally(()=>{oe(!1),$e(!1)})},$t=(It,zt,Pt,Vt,vr)=>{const qt=Date.now();let er;const yr=()=>{handlerApi.runTasksStatus({dataset:zt,taskRunIds:[It[0].TaskRunId]}).then(Lt=>{clearTimeout(er),Lt[0].StatusCode===RunHandlerStatusCodeEnum.Completed?gt({data:Lt,dataset:zt,groupId:Pt,key:Vt,chatKey:vr}):er=setTimeout(yr,getTimeoutDelay(qt))}).catch(()=>ot(Pt,MessageGroupStatus.ERROR))};yr()},pt=reactExports.useCallback(It=>{const zt=Et.current;if(zt===null||isNullable(me)||isNullable(ge)||isNullable(Xe))return;const Pt=(It||mt).trim(),Vt=Ge();if(Pt.length===0&&Vt.length===0||J)return;const vr=ct();at(vr,Pt,Vt),wt(),oe(!0),$e(!0),xe.current=new AbortController,Ue().then(qt=>sendPromptRequest({dataset:ge,key:zt,chatKey:Xe.ChatKey,fileNames:rt(),fileContentBytes:qt,removedFileNames:Ye(),table:ye.current,prompt:Pt,userName:Ot})).then(qt=>{$t(qt,ge,vr,zt,Xe.ChatKey)})},[Xe,ge,me,mt,J,Ge,rt,ct,at,wt,oe,Ue,ye,lt,ce,ot,Ke,Ye]),vt=reactExports.useCallback(()=>xe.current.abort(),[]),Mt=reactExports.useCallback(It=>{if(It.ChatKey===(Xe==null?void 0:Xe.ChatKey))return;const zt=Et.current;if(zt===null||isNullable(me)||isNullable(ge))throw new Error('Cannot execute request because one of these parameters is empty: "key", "dataset" or "environment"');oe(!0),Se({key:zt,table:ye.current,dataset:ge,activeChat:Xe==null?void 0:Xe.ChatKey,session:It,userName:Ot}).then(Pt=>{const Vt=Pt[0].Result;tt(Vt),wt();const vr={key:zt,chatKey:Vt.ChatKey,table:ye.current,dataset:ge,userName:Ot};return Promise.all([qe(vr),Te(vr),dt(vr),ce(Vt.ChatKey)])}).finally(()=>oe(!1))},[Xe==null?void 0:Xe.ChatKey,ge,me,Te,dt,ce,oe,ye,Se]),St=reactExports.useCallback(It=>{const zt=Et.current;if(zt===null||isNullable(ge)||isNullable(me))throw new Error('Cannot execute request because one of these parameters is empty: "key", "dataset" or "environment"');oe(!0),Re({key:zt,dataset:ge,table:ye.current,sessions:It,userName:Ot}).then(Pt=>{if(Pt.length===0){Rt(ChatType.INTERNAL);return}if(!Pt.some(vr=>vr.ChatKey===(Xe==null?void 0:Xe.ChatKey))){const vr=Pt[0];Mt(vr)}}).finally(()=>oe(!1))},[ge,me,oe,Re,ye,Rt,Xe==null?void 0:Xe.ChatKey,Mt]),_t=It=>{It.attachmentType===ContentHandlerAttachmentEnum.MessageInput?(kt(It.content),pt(It.content)):Ne([It.content])},Xt=reactExports.useCallback(It=>{if(!je.current)throw new Error("Run missed required params: 'type' | 'key'.");oe(!0),contentHandlerApi.runContentHandler({handler:It.handler,key:je.current.key,type:je.current.type,dataset:ge,environment:me}).then(_t).finally(()=>{oe(!1)})},[ge,me]),Tt=reactExports.useCallback(It=>{oe(!0),contentHandlerApi.getContentHandlers({type:It.type,key:It.recordKey,dataset:ge,environment:me}).then(zt=>{if(!zt.isExist)throw new Error("The record doesn't have any handlers.");if(je.current={type:It.type,key:It.recordKey},!zt.isMultiChoice)return Xt({handler:zt.handlers[0]});ze(zt)}).finally(()=>oe(!1))},[ge,me,pt]),Dt=()=>{ze(null),je.current=null},Ht=async()=>{if(K&&ge){if(!await isExistsEntityRequest({dataset:ge,key:K,type:ye.current})&&(Ae!=null&&Ae.id))throw ve(closeTab({id:Ae.id})),new Error("Can not find the entity");return K}return getKeyRequest({type:ye.current,dataset:ge})},Bt=async()=>{if(isNullable(ge)||isNullable(me))throw new Error('Cannot execute request because one of these parameters is empty: "dataset" or "environment"');oe(!0);try{const It=await Ht();Et.current=It,Ie.chatAbout.getParams(zt=>{zt?ke(zt):et({key:It,dataset:ge,table:ye.current,userName:Ot}).then(Pt=>{if(Pt){const Vt={key:It,dataset:ge,chatKey:Pt.ChatKey,table:ye.current,userName:Ot};return Promise.all([Te(Vt),dt(Vt),qe(Vt),ce(Pt.ChatKey)])}throw new Error("Cannot load details about the chat without the chat key.")})})}finally{oe(!1)}};return reactExports.useEffect(()=>{Bt()},[K,me,ye,ge]),{getContentByHandler:Xt,contentHandlers:We,chatAboutParams:Fe,handleClearContentHandlers:Dt,activeChat:Xe,isSending:_e,chatType:Je,isPrivateType:nt,sessions:st,selectSession:Mt,deleteSelectedSessions:St,files:Be,onChangeFiles:Ne,onRemoveFile:Qe,message:mt,messageGroups:it,sendMessage:pt,cancelSendMessage:vt,startNewChat:Rt,onChangeInput:kt,getContentByKey:Tt,getUnsavedFiles:Ge}}function useCollapsePanels(){const[K,J]=reactExports.useState([50,50]),ne=reactExports.useMemo(()=>K[0],[K]),oe=reactExports.useRef(null),ce=reactExports.useMemo(()=>ne===100,[ne]),ue=reactExports.useCallback(pe=>{if(pe.length===0)return;const[ve,me]=pe;J([ve,me??100-ve])},[]),Ae=reactExports.useCallback(()=>{const pe=oe.current;if(!pe)return;const ve=pe.isCollapsed()?50:0;pe.resize(ve)},[]);return{isMaximized:ce,contentPanelRef:oe,collapseContentPanel:Ae,onChangeSizes:ue}}function useDisclaimer(){const[K,J]=reactExports.useState(!0),[ne,oe]=useLocalStorage(StorageKeyEnum.SHOW_DISCLAIMER_ONCE,!1),ce=reactExports.useMemo(()=>K&&!ne,[K,ne]),ue=reactExports.useCallback(()=>oe(Ae=>!Ae),[oe]);return{isOpen:ce,isOnce:ne,toggleOnce:ue,show:J}}function useTabs(){const K=useSelector$1(selectActiveDataset$1),J=useSelector$1(selectActiveEnvironment),ne=useSelector$1(selectUser),[oe,ce]=reactExports.useState(LoadingStatusesEnum.INITIAL),[ue,Ae]=reactExports.useState(),[pe,ve]=reactExports.useState([]),me=reactExports.useCallback(_e=>Ae(_e),[]),ge=reactExports.useCallback(_e=>ve(_e),[]),ye=reactExports.useCallback((_e=!0)=>{ve([]),Ae(void 0),_e&&ce(LoadingStatusesEnum.INITIAL)},[]),xe=reactExports.useCallback((_e,$e)=>{ce(LoadingStatusesEnum.LOADING);const Ie={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"GetRecordPanels",Keys:[],Arguments:{TypeName:_e,Key:$e||""},Dataset:K,userName:ne==null?void 0:ne.username};return handlerApi.handlerRun(Ie).then(Fe=>{const ke=Fe[0].Result,je=getViewersTabs(ke.filter(ze=>ze.Kind!==(ViewersMetadataType==null?void 0:ViewersMetadataType.PRIMARY_DASHBOARD)));ve(je);const We=je[0];return We&&Ae(We.key),ce(LoadingStatusesEnum.SUCCESS),{tabs:je,activeTab:We==null?void 0:We.key}}).catch(Fe=>(toast.error(Fe),ce(LoadingStatusesEnum.ERROR),ye(!1),{tabs:[]}))},[K,J,ye]);return{status:oe,activeTab:ue,tabs:pe,loadTabs:xe,activateTab:me,updateOrderTabs:ge,reset:ye}}function useViewerData(){const K=useSelector$1(selectActiveDataset$1),J=useSelector$1(selectUser),[ne,oe]=reactExports.useState(LoadingStatusesEnum.INITIAL),[ce,ue]=reactExports.useState(),Ae=reactExports.useCallback((ve=!0)=>{ue(void 0),ve&&oe(LoadingStatusesEnum.INITIAL)},[]),pe=reactExports.useCallback((ve,me,ge)=>{oe(LoadingStatusesEnum.LOADING);const ye={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"LoadRecordPanel",Keys:[],Arguments:{TypeName:me,Key:ge,PanelId:ve},Dataset:K,userName:J==null?void 0:J.username};handlerApi.handlerRun(ye).then(xe=>{const _e=xe[0].Result;ue(_e),oe(LoadingStatusesEnum.SUCCESS)}).catch(()=>{Ae(!1),oe(LoadingStatusesEnum.ERROR)})},[Ae]);return{status:ne,data:ce,loadViewerData:pe,reset:Ae}}function useDashboard({activeType:K}){const J=useLatest(K),ne=useSelector$1(selectActiveDataset$1),oe=useSelector$1(selectActiveEnvironment),ce=reactExports.useRef(),{tabs:ue,status:Ae,activeTab:pe,loadTabs:ve,activateTab:me,updateOrderTabs:ge,reset:ye}=useTabs(),{loadViewerData:xe,data:_e,status:$e,reset:Ie}=useViewerData(),Fe=reactExports.useMemo(()=>getViewerTypeHelper(_e),[_e]),ke=reactExports.useMemo(()=>isLoading([Ae,$e]),[Ae,$e]),je=reactExports.useCallback(Xe=>(ce.current=Xe,ve(J.current,Xe).then(({activeTab:Je})=>{Je&&!isNullable(ne)&&xe(Je,J.current,Xe)})),[ve,J,ne,xe,oe]),We=reactExports.useCallback(Xe=>{me(Xe),isNullable(ne)||xe(Xe,J.current,ce.current)},[me,ne,xe,oe,J]),ze=reactExports.useCallback(()=>{ye(),Ie(),ce.current=void 0},[ye,Ie]);return{loading:ke,loadingViewerData:isLoading([$e]),activeTab:pe,tabs:ue,activeViewerType:Fe,viewerData:_e,load:je,updateOrderTabs:ge,switchTab:We,reset:ze}}const Content=reactExports.memo(({currentKey:K,type:J,isLoadingViewers:ne,activeViewerType:oe,tabs:ce,activeTab:ue,viewerData:Ae,switchTab:pe})=>{const ve=useSelector$1(selectFullScreenMode);return jsxRuntimeExports.jsx("div",{className:cx("content",ve&&"content__full-screen-container"),children:jsxRuntimeExports.jsxs("div",{className:"content__container",children:[jsxRuntimeExports.jsx(wF,{activeKey:ue,variant:"card",className:"content__tabs",items:ce,onChange:pe}),jsxRuntimeExports.jsx(PF,{loading:ne,children:jsxRuntimeExports.jsx("div",{className:"content__viewers",children:jsxRuntimeExports.jsx(Viewers,{panelKey:K,panelType:J,activeViewerType:oe,data:Ae.ViewOf},ue)})})]})})});Content.displayName="Content";function isTopic(K){return K==="ChatDashboard"}const container="_container_lwejo_1",styles={container},InteractiveDashboardContainer=({type:K,chatKey:J,className:ne,panelClassname:oe})=>{const ce="Chat",ue=reactExports.useRef(null),{collapseContentPanel:Ae,contentPanelRef:pe,isMaximized:ve,onChangeSizes:me}=useCollapsePanels(),{isOpen:ge,show:ye,isOnce:xe,toggleOnce:_e}=useDisclaimer(),[$e,Ie]=reactExports.useState(!1),[Fe,{setTrue:ke,setFalse:je}]=useBoolean(!1),We=reactExports.useMemo(()=>isTopic(K),[K]),[ze,Xe]=reactExports.useState(!1),Je=reactExports.useCallback(St=>Xe(St),[]),{loadingViewerData:nt,activeViewerType:et,viewerData:tt,tabs:st,activeTab:qe,switchTab:Se,load:Re,reset:Be}=useDashboard({activeType:ce}),{chatAboutParams:Ne,getContentByHandler:Ue,contentHandlers:Ge,handleClearContentHandlers:Ye,files:Qe,isSending:Te,isPrivateType:Ke,message:rt,messageGroups:it,activeChat:at,sessions:lt,selectSession:ct,deleteSelectedSessions:ot,onChangeInput:ft,onChangeFiles:dt,sendMessage:mt,cancelSendMessage:kt,startNewChat:wt,onRemoveFile:Et,getContentByKey:Ot,getUnsavedFiles:Rt}=useHistory({chatKey:J,activeTypeTab:K,isLoading:ze,onChangeLoading:Je,loadViewers:Re,resetViewers:Be});reactExports.useEffect(()=>{Ne&&pt(ChatType.INTERNAL,!0)},[Ne]);const gt=reactExports.useCallback(St=>{var _t;if(!ue.current)throw new Error("Cannot start new chat without type");Ie(!1),wt((_t=ue.current)==null?void 0:_t.type,St),ue.current=null},[wt]),$t=reactExports.useCallback(()=>{var St;ye(!1),ue.current&&((St=ue.current)!=null&&St.isProfile?Ie(!0):gt(void 0))},[ye,gt]),pt=reactExports.useCallback((St,_t)=>{ue.current={type:St,isProfile:_t},ye(!0),xe&&(_t?Ie(!0):gt(void 0))},[xe,gt,ye]),vt=reactExports.useMemo(()=>st.length>0,[st.length]),Mt=()=>{Ie(!1),Ne&&Ne.handleMoveToPreviousTab()};return jsxRuntimeExports.jsxs("div",{className:cx(styles.container,ne),children:[jsxRuntimeExports.jsx(DisclaimerModal,{isOpen:ge,isOnce:xe,toggleOnce:_e,agree:$t}),$e&&jsxRuntimeExports.jsx(PromptsModal,{activeSession:at,create:gt,close:Mt}),Fe&&jsxRuntimeExports.jsx(GenericModal,{isOpen:Fe,onSubmit:Ot,onClose:je}),(Ge==null?void 0:Ge.isMultiChoice)&&jsxRuntimeExports.jsx(ContentHandlersModal,{handlers:Ge.handlers,isOpen:Ge.isMultiChoice,onClose:Ye,onApply:Ue}),jsxRuntimeExports.jsxs(Mj,{direction:"horizontal",onLayout:me,children:[jsxRuntimeExports.jsx(Lj,{order:1,minSize:20,className:oe,children:jsxRuntimeExports.jsx(History,{isShowMaximizedButton:vt,isMaximized:ve,isTopic:We,files:Qe,isSending:Te,activeSession:at,isPrivateType:Ke,isLoading:ze,sessions:lt,message:rt,messageGroups:it,onChangeInput:ft,onSendMessage:mt,cancelSendMessage:kt,startNewChat:pt,selectSession:ct,deleteSelectedSessions:ot,onChangeFiles:dt,onRemoveFile:Et,toggleMaximizedView:Ae,openKeyDialog:ke,getUnsavedFiles:Rt})}),st.length>0&&tt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx($F,{}),jsxRuntimeExports.jsx(Lj,{order:2,collapsible:!0,ref:pe,minSize:0,className:oe,children:jsxRuntimeExports.jsx(Content,{currentKey:J||(at==null?void 0:at.ChatKey),type:ce,activeViewerType:et,activeTab:qe,tabs:st,switchTab:Se,viewerData:tt,isLoadingViewers:nt})})]})]})]})},coreComponentsDictionary={Header,Main,EditorContentInner,TypeToolbarInner,InteractiveDashboardContainer,NoGridDataInner},useComponentsMapper=()=>{const K=useSelector$1(selectApplicationTheme);return{...coreComponentsDictionary,...overrideComponentsDictionary[K]}},AppInit=({children:K})=>{const{environment:J,activeTab:ne}=useParams(),oe=useNavigate(),ce=useAppDispatch(),ue=useSelector$1(selectActiveTab),Ae=useSelector$1(selectActiveEnvironment),{schemaTypes:pe}=useSelector$1(selectSchemaTypes),ve=useSelector$1(selectUser),me=useRequest(storageApi.getAppState),ge=useSelector$1(selectSchemaVersion),ye=useSelector$1(selectMetaData),xe=useSelector$1(selectFullScreenMode);reactExports.useEffect(()=>{ve!=null&&ve.username&&pe.Tables.length&&me.fetch(ve.id).then($e=>{ce(setAppState({...$e,availableTypes:pe.Tables}))})},[ve==null?void 0:ve.username,pe.Tables]),reactExports.useEffect(()=>{xe&&ye.data.DisplayKind&&ye.data.DisplayKind!==SchemaDisplayKind.Basic&&ce(setFullScreenMode(!1))},[ye]),reactExports.useEffect(()=>{ce(setActiveEnvironment(J||"")),ce(setActiveTab({id:ne||""}))},[]),reactExports.useEffect(()=>{if(Ae&&ue){oe(routes.app.build({environment:Ae,activeTab:ue}));return}Ae&&oe(routes.app.build({environment:Ae}))},[Ae,ue]);const _e=$e=>Number.parseInt($e.split(".")[0],10);return reactExports.useEffect(()=>{!ge||!env$1.schemaVersion||_e(ge)!==_e(env$1.schemaVersion)&&oe(routes.versionError.path)},[ge,env$1.schemaVersion]),me.error?jsxRuntimeExports.jsx(Navigate,{to:routes.serverError.path}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K})},VersionWarning=()=>{const K=useSelector$1(selectSchemaVersion);return jsxRuntimeExports.jsxs("div",{className:"schema-version-warning",children:[jsxRuntimeExports.jsx(M_,{}),t$5("versionWarning.minor",{currentVersion:env$1.schemaVersion,lastVersion:K})]})},parseVersion=K=>K.split(".").map(J=>Number.parseInt(J,10)),AppPage=()=>{const K=useSelector$1(selectApplicationName),{Main:J}=useComponentsMapper(),ne=useSelector$1(selectActiveTab),oe=useSelector$1(selectSchemaVersion);reactExports.useEffect(()=>{K&&(document.title=K)},[K]);const ce=()=>{if(!oe||!env$1.schemaVersion)return!1;const[ue,Ae]=parseVersion(oe),[pe,ve]=parseVersion(env$1.schemaVersion);return ue===pe&&Ae!==ve};return jsxRuntimeExports.jsx(AppInit,{children:jsxRuntimeExports.jsxs(AppLayout,{children:[ce()&&jsxRuntimeExports.jsx(VersionWarning,{}),jsxRuntimeExports.jsx(AppContext$1,{children:jsxRuntimeExports.jsxs(DndContext,{activeTabId:ne,children:[jsxRuntimeExports.jsx(Header,{isVersionWarning:ce()}),jsxRuntimeExports.jsx(J,{})]})})]})})},LoginPageError=({children:K})=>K?jsxRuntimeExports.jsx("div",{className:"login-page-error",children:K}):null,LoginPageForm=({provider:K,isDevForm:J=!1})=>{const{t:ne}=useTranslation(),{fetch:oe,isLoading:ce}=useRequest(authApi.login),[ue,Ae]=reactExports.useState(""),pe=async({username:ge,password:ye})=>{var xe,_e;try{await oe({type_id:K.id,username:ge,password:ye}),await authService.login(K.id)}catch($e){let Ie="";if(axios.isAxiosError($e)){let Fe="";try{Fe=JSON.parse((xe=$e==null?void 0:$e.response)==null?void 0:xe.data).UserMessage}catch{Fe=((_e=$e==null?void 0:$e.response)==null?void 0:_e.data)||$e}Ie=getErrorMessage(Fe)}Ae(Ie)}},ve=()=>{ue&&Ae("")},me=ge=>J?ge:`new-${ge}`;return jsxRuntimeExports.jsxs(IF,{className:"login-page-form",autoComplete:"off",layout:"vertical",requiredMark:!1,onFinish:pe,onValuesChange:ve,children:[jsxRuntimeExports.jsx(IF.Item,{className:"login-page-form__item",label:ne("auth.login.username.placeholder"),name:"username",rules:[{required:!0,message:""}],help:null,children:jsxRuntimeExports.jsx(Ml,{variant:"outlined",autoComplete:me("username")})}),jsxRuntimeExports.jsx(IF.Item,{className:"login-page-form__item",label:ne("auth.login.password.placeholder"),name:"password",rules:[{required:!0,message:""}],help:null,children:jsxRuntimeExports.jsx(Ml,{inputType:"password",variant:"outlined",autoComplete:me("password")})}),jsxRuntimeExports.jsx(LoginPageError,{children:ue}),jsxRuntimeExports.jsx(IF.Item,{className:"login-page-form__item",children:jsxRuntimeExports.jsx(rl,{block:!0,htmlType:"submit",disabled:ce,children:ne("auth.login.actions.login")})})]})},LoginPageRedirectProvider=({provider:K,setActiveADProvider:J})=>{const{title:ne,logo:oe,id:ce,isNavigate:ue}=K,Ae=()=>{ue?(J(K),externalStorage.setProviderId(ce)):authApi.loginRedirect(ce).then(pe=>{externalStorage.setProviderId(ce),globalThis.location.href=pe.redirect_url})};return jsxRuntimeExports.jsxs("div",{"aria-hidden":"true",className:"login-page-redirect-provider",onClick:Ae,children:[jsxRuntimeExports.jsx("div",{className:"login-page-redirect-provider__logo",children:oe}),jsxRuntimeExports.jsx("div",{className:"login-page-redirect-provider__title",children:ne}),jsxRuntimeExports.jsx("div",{className:"login-page-redirect-provider__after",children:jsxRuntimeExports.jsx(mT,{})})]})},LoginPageRedirectProviders=({title:K,providers:J,setActiveADProvider:ne})=>J.length?jsxRuntimeExports.jsxs("div",{className:"login-page-redirect-providers",children:[K&&jsxRuntimeExports.jsx("div",{className:"login-page-redirect-providers__title",children:jsxRuntimeExports.jsx("div",{className:"login-page-redirect-providers__title-text",children:K})}),jsxRuntimeExports.jsx("div",{className:"login-page-redirect-providers__list",children:J==null?void 0:J.map(oe=>jsxRuntimeExports.jsx(LoginPageRedirectProvider,{provider:oe,setActiveADProvider:ne},oe.id))})]}):null,LoginProviders=({developProvider:K,redirectProviders:J,setActiveADProvider:ne})=>{const{t:oe}=useTranslation();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[K&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"login-providers__title",children:oe("auth.login.dev")}),jsxRuntimeExports.jsx(LoginPageForm,{provider:K,isDevForm:!0})]}),jsxRuntimeExports.jsx(LoginPageRedirectProviders,{providers:J,title:K?oe("auth.login.divider"):"",setActiveADProvider:ne})]})},LoginADProvider=({provider:K,setActiveADProvider:J})=>{const{t:ne}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"login-ad-provider",children:[jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",className:"login-ad-provider__button",iconBefore:jsxRuntimeExports.jsx(bk,{}),onClick:()=>J(null),children:ne("buttons.back")}),jsxRuntimeExports.jsxs("div",{className:"login-ad-provider__title",children:[K.logo,K.title]}),jsxRuntimeExports.jsx(LoginPageForm,{provider:K})]})},LoginPage=()=>{const K=useSelector$1(selectProviders),[J,ne]=reactExports.useState(null),oe=reactExports.useMemo(()=>createDevelopProvider(K),[K]),ce=reactExports.useMemo(()=>K.reduce((ue,Ae)=>((Ae.Kind===AuthKindEnum.ActiveDirectory||Ae.LoginStrategy===AuthStrategyEnum.redirect)&&ue.push(createRedirectProvider(Ae)),ue),[])||[],[K]);return jsxRuntimeExports.jsx("div",{className:"login-page",children:K.length!==0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"login-page__logo",children:jsxRuntimeExports.jsx(zA,{size:"Full"})}),jsxRuntimeExports.jsx("div",{className:"login-page__content",children:J?jsxRuntimeExports.jsx(LoginADProvider,{provider:J,setActiveADProvider:ne}):jsxRuntimeExports.jsx(LoginProviders,{developProvider:oe,redirectProviders:ce,setActiveADProvider:ne})})]})})},createDevelopProvider=K=>{const J=K==null?void 0:K.find(ne=>ne.Kind===AuthKindEnum.Develop);return J?{id:J.Name||""}:null},createRedirectProvider=K=>{const{Name:J,Label:ne,Kind:oe}=K,ce={[AuthKindNamesEnum.Okta]:jsxRuntimeExports.jsx(WA,{}),[AuthKindNamesEnum.Kinde]:jsxRuntimeExports.jsx(ZA,{}),[AuthKindEnum.ActiveDirectory]:jsxRuntimeExports.jsx(rF,{})};return{id:J,title:ne,logo:ce[oe===AuthKindEnum.ActiveDirectory?oe:ne]||null,isNavigate:oe===AuthKindEnum.ActiveDirectory}},ForbiddenPage=()=>{const{t:K}=useTranslation();return jsxRuntimeExports.jsx("div",{className:"forbidden-page",children:jsxRuntimeExports.jsx("p",{children:K("shared.somethingWentWrong")})})},ServerErrorPage=()=>{const{t:K}=useTranslation(),J=useNavigate();return jsxRuntimeExports.jsx(ErrorLayout,{title:K("shared.pleaseReloadPage"),children:jsxRuntimeExports.jsx(rl,{iconBefore:jsxRuntimeExports.jsx(Pk,{}),onClick:()=>J(routes.root.path),children:K("shared.reloadPage")})})},ServerUnavailablePage=()=>{const{t:K}=useTranslation(),J=useNavigate();reactExports.useEffect(()=>{ce()},[]);const ne=(ue,Ae)=>{setTimeout(()=>Ae(),getTimeoutDelay(ue))},oe=(ue,Ae)=>{supportApi.getHealth().then(()=>J(routes.root.path)).catch(()=>{Ae(()=>oe(ue,Ae))})},ce=()=>{const ue=Date.now();oe(ue,pe=>{ne(ue,pe)})};return jsxRuntimeExports.jsx(AppFallbackSkeleton,{renderContent:()=>jsxRuntimeExports.jsx("div",{className:"server-unavailable-page",children:jsxRuntimeExports.jsxs("div",{className:"server-unavailable-page__container",children:[jsxRuntimeExports.jsx(FT,{className:"server-unavailable-page__icon"}),jsxRuntimeExports.jsx("div",{className:"server-unavailable-page__title",children:K("serverUnavailablePage.title")}),jsxRuntimeExports.jsx("div",{className:"server-unavailable-page__subtitle",children:K("serverUnavailablePage.subtitle")}),jsxRuntimeExports.jsx("div",{className:"server-unavailable-page__loader-title",children:K("serverUnavailablePage.loaderTitle")}),jsxRuntimeExports.jsx("div",{className:"server-unavailable-page__loader",children:jsxRuntimeExports.jsx(NF,{})})]})})})},SecureGuard=({children:K})=>{const J=useSelector$1(selectIsAuthenticated),ne=useSelector$1(selectIsLogoutLink);if(J)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K});if(!ne)return jsxRuntimeExports.jsx(Navigate,{to:routes.login.path})},LoginCallbackPage=()=>{const[K]=useSearchParams(),J=useNavigate(),ne=K.get("one_time_token"),oe=K.get("provider_id"),ce=async()=>{if(!oe||!ne)return J(routes.login.path);try{await authApi.loginCallback(ne,oe),await authService.login(oe)}catch{J(routes.login.path)}};return reactExports.useEffect(()=>{ce()},[]),null},AuthGuard=({children:K})=>{const J=useSelector$1(selectIsAuthenticated);return useSelector$1(selectIsLogoutLink)&&dispatch$1(setIsLogoutLink(!1)),J?jsxRuntimeExports.jsx(Navigate,{to:routes.root.path}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K})},NotFound=()=>{const K=useNavigate();return jsxRuntimeExports.jsxs("div",{className:"server-error-page",children:[jsxRuntimeExports.jsx("h1",{children:"404"}),jsxRuntimeExports.jsx(rl,{onClick:()=>K(routes.root.path),children:"Home page"})]})},VersionErrorPage=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectSchemaVersion);return jsxRuntimeExports.jsx(ErrorLayout,{title:K("versionWarning.majorTitle"),subTitle:K("versionWarning.majorSubtitle",{currentVersion:env$1.schemaVersion,lastVersion:J})})},router=createBrowserRouter([{element:jsxRuntimeExports.jsx(BaseLayout,{}),children:[{path:routes.root.path,element:jsxRuntimeExports.jsx(SecureGuard,{children:jsxRuntimeExports.jsx(AppPage,{})}),children:[{path:routes.app.path,element:jsxRuntimeExports.jsx(SecureGuard,{children:jsxRuntimeExports.jsx(AppPage,{})})}]},{path:routes.login.path,element:jsxRuntimeExports.jsx(AuthGuard,{children:jsxRuntimeExports.jsx(LoginPage,{})})},{path:routes.loginCallback.path,element:jsxRuntimeExports.jsx(AuthGuard,{children:jsxRuntimeExports.jsx(LoginCallbackPage,{})})},{path:routes.forbidden.path,element:jsxRuntimeExports.jsx(ForbiddenPage,{})},{path:routes.serverError.path,element:jsxRuntimeExports.jsx(ServerErrorPage,{})},{path:routes.serverUnavailable.path,element:jsxRuntimeExports.jsx(ServerUnavailablePage,{})},{path:routes.notFound.path,element:jsxRuntimeExports.jsx(NotFound,{})},{path:routes.versionError.path,element:jsxRuntimeExports.jsx(VersionErrorPage,{})},{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:routes.notFound.path})}]}],{basename:env$1.baseName});var warn$1={};Object.defineProperty(warn$1,"__esModule",{value:!0});var warn=function K(J){console.warn("[react-gtm]",J)};warn$1.default=warn;var _warn=warn$1,_warn2=_interopRequireDefault$2(_warn);function _interopRequireDefault$2(K){return K&&K.__esModule?K:{default:K}}var Snippets={tags:function K(J){var ne=J.id,oe=J.events,ce=J.dataLayer,ue=J.dataLayerName,Ae=J.preview,pe=J.auth,ve="&gtm_auth="+pe,me="&gtm_preview="+Ae;ne||(0,_warn2.default)("GTM Id is required");var ge=`
      <iframe src="https://www.googletagmanager.com/ns.html?id=`+ne+ve+me+`&gtm_cookies_win=x"
        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>`,ye=`
      (function(w,d,s,l,i){w[l]=w[l]||[];
        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', `+JSON.stringify(oe).slice(1,-1)+`});
        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'`+ve+me+`&gtm_cookies_win=x';
        f.parentNode.insertBefore(j,f);
      })(window,document,'script','`+ue+"','"+ne+"');",xe=this.dataLayer(ce,ue);return{iframe:ge,script:ye,dataLayerVar:xe}},dataLayer:function K(J,ne){return`
      window.`+ne+" = window."+ne+` || [];
      window.`+ne+".push("+JSON.stringify(J)+")"}},Snippets_1=Snippets,_Snippets=Snippets_1,_Snippets2=_interopRequireDefault$1(_Snippets);function _interopRequireDefault$1(K){return K&&K.__esModule?K:{default:K}}var TagManager$1={dataScript:function K(J){var ne=document.createElement("script");return ne.innerHTML=J,ne},gtm:function K(J){var ne=_Snippets2.default.tags(J),oe=function(){var pe=document.createElement("noscript");return pe.innerHTML=ne.iframe,pe},ce=function(){var pe=document.createElement("script");return pe.innerHTML=ne.script,pe},ue=this.dataScript(ne.dataLayerVar);return{noScript:oe,script:ce,dataScript:ue}},initialize:function K(J){var ne=J.gtmId,oe=J.events,ce=oe===void 0?{}:oe,ue=J.dataLayer,Ae=J.dataLayerName,pe=Ae===void 0?"dataLayer":Ae,ve=J.auth,me=ve===void 0?"":ve,ge=J.preview,ye=ge===void 0?"":ge,xe=this.gtm({id:ne,events:ce,dataLayer:ue||void 0,dataLayerName:pe,auth:me,preview:ye});ue&&document.head.appendChild(xe.dataScript),document.head.insertBefore(xe.script(),document.head.childNodes[0]),document.body.insertBefore(xe.noScript(),document.body.childNodes[0])},dataLayer:function K(J){var ne=J.dataLayer,oe=J.dataLayerName,ce=oe===void 0?"dataLayer":oe;if(window[ce])return window[ce].push(ne);var ue=_Snippets2.default.dataLayer(ne,ce),Ae=this.dataScript(ue);document.head.insertBefore(Ae,document.head.childNodes[0])}},TagManager_1=TagManager$1,_TagManager=TagManager_1,_TagManager2=_interopRequireDefault(_TagManager);function _interopRequireDefault(K){return K&&K.__esModule?K:{default:K}}var dist=_TagManager2.default;const TagManager=getDefaultExportFromCjs(dist),GoogleTagManager=()=>(reactExports.useEffect(()=>{TagManager.initialize({gtmId:env$1.googleTagManagerId})},[]),null),rootNode=document.getElementById("root"),root=createRoot(rootNode);root.render(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[env$1.googleTagManagerId&&jsxRuntimeExports.jsx(GoogleTagManager,{}),jsxRuntimeExports.jsx(Provider$2,{store,children:jsxRuntimeExports.jsx(SSEProvider,{children:jsxRuntimeExports.jsx(RouterProvider,{router,fallbackElement:jsxRuntimeExports.jsx(AppFallbackSkeleton,{})})})})]}));export{GlobalWorkerOptions as G,Markdown as M,Page as P,index$1 as a,index$3 as i,useResizeObserver as u,version$1 as v};
